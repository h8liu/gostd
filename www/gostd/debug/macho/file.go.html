<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6427664">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6427720">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6427774">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6427825">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6427884">package</span>&nbsp;<span class="ident" id="6427892">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6427899">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6427951">import</span>&nbsp;<span class="op" id="6427958">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6427961">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6427970">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6427985">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6428004">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6428011">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6428017">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6428022">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6428025">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6428067">type</span>&nbsp;<span class="ident" id="6428072">File</span>&nbsp;<span class="keyword" id="6428077">struct</span>&nbsp;<span class="op" id="6428084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428087">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428099">ByteOrder</span>&nbsp;<span class="ident" id="6428109">binary</span><span class="op" id="6428115">.</span><span class="ident" id="6428116">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428127">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6428137">[</span><span class="op" id="6428138">]</span><span class="ident" id="6428139">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428145">Sections</span>&nbsp;&nbsp;<span class="op" id="6428155">[</span><span class="op" id="6428156">]</span><span class="op" id="6428157">*</span><span class="ident" id="6428158">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428168">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6428177">*</span><span class="ident" id="6428178">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428186">Dysymtab</span>&nbsp;<span class="op" id="6428195">*</span><span class="ident" id="6428196">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428207">closer</span>&nbsp;<span class="ident" id="6428214">io</span><span class="op" id="6428216">.</span><span class="ident" id="6428217">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6428224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6428227">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6428273">type</span>&nbsp;<span class="ident" id="6428278">Load</span>&nbsp;<span class="keyword" id="6428283">interface</span>&nbsp;<span class="op" id="6428293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428296">Raw</span><span class="op" id="6428299">(</span><span class="op" id="6428300">)</span>&nbsp;<span class="op" id="6428302">[</span><span class="op" id="6428303">]</span><span class="builtintype" id="6428304">byte</span><br>
<span class="lineno">35</span><span class="op" id="6428309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6428312">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6428380">type</span>&nbsp;<span class="ident" id="6428385">LoadBytes</span>&nbsp;<span class="op" id="6428395">[</span><span class="op" id="6428396">]</span><span class="builtintype" id="6428397">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6428403">func</span>&nbsp;<span class="op" id="6428408">(</span><span class="ident" id="6428409">b</span>&nbsp;<span class="ident" id="6428411">LoadBytes</span><span class="op" id="6428420">)</span>&nbsp;<span class="ident" id="6428422">Raw</span><span class="op" id="6428425">(</span><span class="op" id="6428426">)</span>&nbsp;<span class="op" id="6428428">[</span><span class="op" id="6428429">]</span><span class="builtintype" id="6428430">byte</span>&nbsp;<span class="op" id="6428435">{</span>&nbsp;<span class="keyword" id="6428437">return</span>&nbsp;<span class="ident" id="6428444">b</span>&nbsp;<span class="op" id="6428446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6428449">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6428534">type</span>&nbsp;<span class="ident" id="6428539">SegmentHeader</span>&nbsp;<span class="keyword" id="6428553">struct</span>&nbsp;<span class="op" id="6428560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428563">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6428571">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428580">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6428588">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428596">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6428604">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428612">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6428620">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428628">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6428636">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428644">Offset</span>&nbsp;&nbsp;<span class="ident" id="6428652">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428660">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6428668">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428676">Maxprot</span>&nbsp;<span class="builtintype" id="6428684">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428692">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6428700">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428708">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6428716">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428724">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6428732">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6428739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6428742">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6428814">type</span>&nbsp;<span class="ident" id="6428819">Segment</span>&nbsp;<span class="keyword" id="6428827">struct</span>&nbsp;<span class="op" id="6428834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428837">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428848">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428864">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428902">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428942">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428977">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429025">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429075">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429099">io</span><span class="op" id="6429101">.</span><span class="ident" id="6429102">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429112">sr</span>&nbsp;<span class="op" id="6429115">*</span><span class="ident" id="6429116">io</span><span class="op" id="6429118">.</span><span class="ident" id="6429119">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6429133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6429136">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6429191">func</span>&nbsp;<span class="op" id="6429196">(</span><span class="ident" id="6429197">s</span>&nbsp;<span class="op" id="6429199">*</span><span class="ident" id="6429200">Segment</span><span class="op" id="6429207">)</span>&nbsp;<span class="ident" id="6429209">Data</span><span class="op" id="6429213">(</span><span class="op" id="6429214">)</span>&nbsp;<span class="op" id="6429216">(</span><span class="op" id="6429217">[</span><span class="op" id="6429218">]</span><span class="builtintype" id="6429219">byte</span><span class="op" id="6429223">,</span>&nbsp;<span class="builtintype" id="6429225">error</span><span class="op" id="6429230">)</span>&nbsp;<span class="op" id="6429232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429235">dat</span>&nbsp;<span class="op" id="6429239">:=</span>&nbsp;<span class="builtinfunc" id="6429242">make</span><span class="op" id="6429246">(</span><span class="op" id="6429247">[</span><span class="op" id="6429248">]</span><span class="builtintype" id="6429249">byte</span><span class="op" id="6429253">,</span>&nbsp;<span class="ident" id="6429255">s</span><span class="op" id="6429256">.</span><span class="ident" id="6429257">sr</span><span class="op" id="6429259">.</span><span class="ident" id="6429260">Size</span><span class="op" id="6429264">(</span><span class="op" id="6429265">)</span><span class="op" id="6429266">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429269">n</span><span class="op" id="6429270">,</span>&nbsp;<span class="ident" id="6429272">err</span>&nbsp;<span class="op" id="6429276">:=</span>&nbsp;<span class="ident" id="6429279">s</span><span class="op" id="6429280">.</span><span class="ident" id="6429281">sr</span><span class="op" id="6429283">.</span><span class="ident" id="6429284">ReadAt</span><span class="op" id="6429290">(</span><span class="ident" id="6429291">dat</span><span class="op" id="6429294">,</span>&nbsp;<span class="num" id="6429296">0</span><span class="op" id="6429297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429300">if</span>&nbsp;<span class="ident" id="6429303">n</span>&nbsp;<span class="op" id="6429305">==</span>&nbsp;<span class="builtinfunc" id="6429308">len</span><span class="op" id="6429311">(</span><span class="ident" id="6429312">dat</span><span class="op" id="6429315">)</span>&nbsp;<span class="op" id="6429317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429321">err</span>&nbsp;<span class="op" id="6429325">=</span>&nbsp;<span class="ident" id="6429327">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6429332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429335">return</span>&nbsp;<span class="ident" id="6429342">dat</span><span class="op" id="6429345">[</span><span class="num" id="6429346">0</span><span class="op" id="6429347">:</span><span class="ident" id="6429348">n</span><span class="op" id="6429349">]</span><span class="op" id="6429350">,</span>&nbsp;<span class="ident" id="6429352">err</span><br>
<span class="lineno">80</span><span class="op" id="6429356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6429359">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6429413">func</span>&nbsp;<span class="op" id="6429418">(</span><span class="ident" id="6429419">s</span>&nbsp;<span class="op" id="6429421">*</span><span class="ident" id="6429422">Segment</span><span class="op" id="6429429">)</span>&nbsp;<span class="ident" id="6429431">Open</span><span class="op" id="6429435">(</span><span class="op" id="6429436">)</span>&nbsp;<span class="ident" id="6429438">io</span><span class="op" id="6429440">.</span><span class="ident" id="6429441">ReadSeeker</span>&nbsp;<span class="op" id="6429452">{</span>&nbsp;<span class="keyword" id="6429454">return</span>&nbsp;<span class="ident" id="6429461">io</span><span class="op" id="6429463">.</span><span class="ident" id="6429464">NewSectionReader</span><span class="op" id="6429480">(</span><span class="ident" id="6429481">s</span><span class="op" id="6429482">.</span><span class="ident" id="6429483">sr</span><span class="op" id="6429485">,</span>&nbsp;<span class="num" id="6429487">0</span><span class="op" id="6429488">,</span>&nbsp;<span class="num" id="6429490">1</span><span class="op" id="6429491">&lt;&lt;</span><span class="num" id="6429493">63</span><span class="op" id="6429495">-</span><span class="num" id="6429496">1</span><span class="op" id="6429497">)</span>&nbsp;<span class="op" id="6429499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6429502">type</span>&nbsp;<span class="ident" id="6429507">SectionHeader</span>&nbsp;<span class="keyword" id="6429521">struct</span>&nbsp;<span class="op" id="6429528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429531">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6429538">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429546">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6429553">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429561">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6429568">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429576">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6429583">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429591">Offset</span>&nbsp;<span class="builtintype" id="6429598">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429606">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6429613">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429621">Reloff</span>&nbsp;<span class="builtintype" id="6429628">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429636">Nreloc</span>&nbsp;<span class="builtintype" id="6429643">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429651">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6429658">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6429665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6429668">type</span>&nbsp;<span class="ident" id="6429673">Section</span>&nbsp;<span class="keyword" id="6429681">struct</span>&nbsp;<span class="op" id="6429688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429691">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429707">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429745">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429785">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429820">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429868">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429918">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429942">io</span><span class="op" id="6429944">.</span><span class="ident" id="6429945">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429955">sr</span>&nbsp;<span class="op" id="6429958">*</span><span class="ident" id="6429959">io</span><span class="op" id="6429961">.</span><span class="ident" id="6429962">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6429976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6429979">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6430041">func</span>&nbsp;<span class="op" id="6430046">(</span><span class="ident" id="6430047">s</span>&nbsp;<span class="op" id="6430049">*</span><span class="ident" id="6430050">Section</span><span class="op" id="6430057">)</span>&nbsp;<span class="ident" id="6430059">Data</span><span class="op" id="6430063">(</span><span class="op" id="6430064">)</span>&nbsp;<span class="op" id="6430066">(</span><span class="op" id="6430067">[</span><span class="op" id="6430068">]</span><span class="builtintype" id="6430069">byte</span><span class="op" id="6430073">,</span>&nbsp;<span class="builtintype" id="6430075">error</span><span class="op" id="6430080">)</span>&nbsp;<span class="op" id="6430082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430085">dat</span>&nbsp;<span class="op" id="6430089">:=</span>&nbsp;<span class="builtinfunc" id="6430092">make</span><span class="op" id="6430096">(</span><span class="op" id="6430097">[</span><span class="op" id="6430098">]</span><span class="builtintype" id="6430099">byte</span><span class="op" id="6430103">,</span>&nbsp;<span class="ident" id="6430105">s</span><span class="op" id="6430106">.</span><span class="ident" id="6430107">sr</span><span class="op" id="6430109">.</span><span class="ident" id="6430110">Size</span><span class="op" id="6430114">(</span><span class="op" id="6430115">)</span><span class="op" id="6430116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430119">n</span><span class="op" id="6430120">,</span>&nbsp;<span class="ident" id="6430122">err</span>&nbsp;<span class="op" id="6430126">:=</span>&nbsp;<span class="ident" id="6430129">s</span><span class="op" id="6430130">.</span><span class="ident" id="6430131">sr</span><span class="op" id="6430133">.</span><span class="ident" id="6430134">ReadAt</span><span class="op" id="6430140">(</span><span class="ident" id="6430141">dat</span><span class="op" id="6430144">,</span>&nbsp;<span class="num" id="6430146">0</span><span class="op" id="6430147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430150">if</span>&nbsp;<span class="ident" id="6430153">n</span>&nbsp;<span class="op" id="6430155">==</span>&nbsp;<span class="builtinfunc" id="6430158">len</span><span class="op" id="6430161">(</span><span class="ident" id="6430162">dat</span><span class="op" id="6430165">)</span>&nbsp;<span class="op" id="6430167">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430171">err</span>&nbsp;<span class="op" id="6430175">=</span>&nbsp;<span class="ident" id="6430177">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430185">return</span>&nbsp;<span class="ident" id="6430192">dat</span><span class="op" id="6430195">[</span><span class="num" id="6430196">0</span><span class="op" id="6430197">:</span><span class="ident" id="6430198">n</span><span class="op" id="6430199">]</span><span class="op" id="6430200">,</span>&nbsp;<span class="ident" id="6430202">err</span><br>
<span class="lineno"></span><span class="op" id="6430206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6430209">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6430270">func</span>&nbsp;<span class="op" id="6430275">(</span><span class="ident" id="6430276">s</span>&nbsp;<span class="op" id="6430278">*</span><span class="ident" id="6430279">Section</span><span class="op" id="6430286">)</span>&nbsp;<span class="ident" id="6430288">Open</span><span class="op" id="6430292">(</span><span class="op" id="6430293">)</span>&nbsp;<span class="ident" id="6430295">io</span><span class="op" id="6430297">.</span><span class="ident" id="6430298">ReadSeeker</span>&nbsp;<span class="op" id="6430309">{</span>&nbsp;<span class="keyword" id="6430311">return</span>&nbsp;<span class="ident" id="6430318">io</span><span class="op" id="6430320">.</span><span class="ident" id="6430321">NewSectionReader</span><span class="op" id="6430337">(</span><span class="ident" id="6430338">s</span><span class="op" id="6430339">.</span><span class="ident" id="6430340">sr</span><span class="op" id="6430342">,</span>&nbsp;<span class="num" id="6430344">0</span><span class="op" id="6430345">,</span>&nbsp;<span class="num" id="6430347">1</span><span class="op" id="6430348">&lt;&lt;</span><span class="num" id="6430350">63</span><span class="op" id="6430352">-</span><span class="num" id="6430353">1</span><span class="op" id="6430354">)</span>&nbsp;<span class="op" id="6430356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6430359">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6430420">type</span>&nbsp;<span class="ident" id="6430425">Dylib</span>&nbsp;<span class="keyword" id="6430431">struct</span>&nbsp;<span class="op" id="6430438">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430441">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430452">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6430467">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430475">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6430490">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430498">CurrentVersion</span>&nbsp;<span class="builtintype" id="6430513">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430521">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6430536">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6430543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6430546">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6430600">type</span>&nbsp;<span class="ident" id="6430605">Symtab</span>&nbsp;<span class="keyword" id="6430612">struct</span>&nbsp;<span class="op" id="6430619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430622">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430633">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430644">Syms</span>&nbsp;<span class="op" id="6430649">[</span><span class="op" id="6430650">]</span><span class="ident" id="6430651">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6430658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6430661">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6430725">type</span>&nbsp;<span class="ident" id="6430730">Dysymtab</span>&nbsp;<span class="keyword" id="6430739">struct</span>&nbsp;<span class="op" id="6430746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430749">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430760">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430773">IndirectSyms</span>&nbsp;<span class="op" id="6430786">[</span><span class="op" id="6430787">]</span><span class="builtintype" id="6430788">uint32</span>&nbsp;<span class="comment" id="6430795">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6430823">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6430826">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6430851">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6430914">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6430965">type</span>&nbsp;<span class="ident" id="6430970">FormatError</span>&nbsp;<span class="keyword" id="6430982">struct</span>&nbsp;<span class="op" id="6430989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430992">off</span>&nbsp;<span class="ident" id="6430996">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431003">msg</span>&nbsp;<span class="builtintype" id="6431007">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431015">val</span>&nbsp;<span class="keyword" id="6431019">interface</span><span class="op" id="6431028">{</span><span class="op" id="6431029">}</span><br>
<span class="lineno"></span><span class="op" id="6431031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6431034">func</span>&nbsp;<span class="op" id="6431039">(</span><span class="ident" id="6431040">e</span>&nbsp;<span class="op" id="6431042">*</span><span class="ident" id="6431043">FormatError</span><span class="op" id="6431054">)</span>&nbsp;<span class="ident" id="6431056">Error</span><span class="op" id="6431061">(</span><span class="op" id="6431062">)</span>&nbsp;<span class="builtintype" id="6431064">string</span>&nbsp;<span class="op" id="6431071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431074">msg</span>&nbsp;<span class="op" id="6431078">:=</span>&nbsp;<span class="ident" id="6431081">e</span><span class="op" id="6431082">.</span><span class="ident" id="6431083">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431088">if</span>&nbsp;<span class="ident" id="6431091">e</span><span class="op" id="6431092">.</span><span class="ident" id="6431093">val</span>&nbsp;<span class="op" id="6431097">!=</span>&nbsp;<span class="ident" id="6431100">nil</span>&nbsp;<span class="op" id="6431104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431108">msg</span>&nbsp;<span class="op" id="6431112">+=</span>&nbsp;<span class="ident" id="6431115">fmt</span><span class="op" id="6431118">.</span><span class="ident" id="6431119">Sprintf</span><span class="op" id="6431126">(</span><span class="string" id="6431127">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6431134">,</span>&nbsp;<span class="ident" id="6431136">e</span><span class="op" id="6431137">.</span><span class="ident" id="6431138">val</span><span class="op" id="6431141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431147">msg</span>&nbsp;<span class="op" id="6431151">+=</span>&nbsp;<span class="ident" id="6431154">fmt</span><span class="op" id="6431157">.</span><span class="ident" id="6431158">Sprintf</span><span class="op" id="6431165">(</span><span class="string" id="6431166">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6431190">,</span>&nbsp;<span class="ident" id="6431192">e</span><span class="op" id="6431193">.</span><span class="ident" id="6431194">off</span><span class="op" id="6431197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431200">return</span>&nbsp;<span class="ident" id="6431207">msg</span><br>
<span class="lineno">165</span><span class="op" id="6431211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431214">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6431301">func</span>&nbsp;<span class="ident" id="6431306">Open</span><span class="op" id="6431310">(</span><span class="ident" id="6431311">name</span>&nbsp;<span class="builtintype" id="6431316">string</span><span class="op" id="6431322">)</span>&nbsp;<span class="op" id="6431324">(</span><span class="op" id="6431325">*</span><span class="ident" id="6431326">File</span><span class="op" id="6431330">,</span>&nbsp;<span class="builtintype" id="6431332">error</span><span class="op" id="6431337">)</span>&nbsp;<span class="op" id="6431339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431342">f</span><span class="op" id="6431343">,</span>&nbsp;<span class="ident" id="6431345">err</span>&nbsp;<span class="op" id="6431349">:=</span>&nbsp;<span class="ident" id="6431352">os</span><span class="op" id="6431354">.</span><span class="ident" id="6431355">Open</span><span class="op" id="6431359">(</span><span class="ident" id="6431360">name</span><span class="op" id="6431364">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431367">if</span>&nbsp;<span class="ident" id="6431370">err</span>&nbsp;<span class="op" id="6431374">!=</span>&nbsp;<span class="ident" id="6431377">nil</span>&nbsp;<span class="op" id="6431381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431385">return</span>&nbsp;<span class="ident" id="6431392">nil</span><span class="op" id="6431395">,</span>&nbsp;<span class="ident" id="6431397">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431405">ff</span><span class="op" id="6431407">,</span>&nbsp;<span class="ident" id="6431409">err</span>&nbsp;<span class="op" id="6431413">:=</span>&nbsp;<span class="ident" id="6431416">NewFile</span><span class="op" id="6431423">(</span><span class="ident" id="6431424">f</span><span class="op" id="6431425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431428">if</span>&nbsp;<span class="ident" id="6431431">err</span>&nbsp;<span class="op" id="6431435">!=</span>&nbsp;<span class="ident" id="6431438">nil</span>&nbsp;<span class="op" id="6431442">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431446">f</span><span class="op" id="6431447">.</span><span class="ident" id="6431448">Close</span><span class="op" id="6431453">(</span><span class="op" id="6431454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431458">return</span>&nbsp;<span class="ident" id="6431465">nil</span><span class="op" id="6431468">,</span>&nbsp;<span class="ident" id="6431470">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431478">ff</span><span class="op" id="6431480">.</span><span class="ident" id="6431481">closer</span>&nbsp;<span class="op" id="6431488">=</span>&nbsp;<span class="ident" id="6431490">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431493">return</span>&nbsp;<span class="ident" id="6431500">ff</span><span class="op" id="6431502">,</span>&nbsp;<span class="ident" id="6431504">nil</span><br>
<span class="lineno">180</span><span class="op" id="6431508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431511">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6431537">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6431604">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6431628">func</span>&nbsp;<span class="op" id="6431633">(</span><span class="ident" id="6431634">f</span>&nbsp;<span class="op" id="6431636">*</span><span class="ident" id="6431637">File</span><span class="op" id="6431641">)</span>&nbsp;<span class="ident" id="6431643">Close</span><span class="op" id="6431648">(</span><span class="op" id="6431649">)</span>&nbsp;<span class="builtintype" id="6431651">error</span>&nbsp;<span class="op" id="6431657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431660">var</span>&nbsp;<span class="ident" id="6431664">err</span>&nbsp;<span class="builtintype" id="6431668">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431675">if</span>&nbsp;<span class="ident" id="6431678">f</span><span class="op" id="6431679">.</span><span class="ident" id="6431680">closer</span>&nbsp;<span class="op" id="6431687">!=</span>&nbsp;<span class="ident" id="6431690">nil</span>&nbsp;<span class="op" id="6431694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431698">err</span>&nbsp;<span class="op" id="6431702">=</span>&nbsp;<span class="ident" id="6431704">f</span><span class="op" id="6431705">.</span><span class="ident" id="6431706">closer</span><span class="op" id="6431712">.</span><span class="ident" id="6431713">Close</span><span class="op" id="6431718">(</span><span class="op" id="6431719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431723">f</span><span class="op" id="6431724">.</span><span class="ident" id="6431725">closer</span>&nbsp;<span class="op" id="6431732">=</span>&nbsp;<span class="ident" id="6431734">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431742">return</span>&nbsp;<span class="ident" id="6431749">err</span><br>
<span class="lineno"></span><span class="op" id="6431753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431756">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6431841">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6431914">func</span>&nbsp;<span class="ident" id="6431919">NewFile</span><span class="op" id="6431926">(</span><span class="ident" id="6431927">r</span>&nbsp;<span class="ident" id="6431929">io</span><span class="op" id="6431931">.</span><span class="ident" id="6431932">ReaderAt</span><span class="op" id="6431940">)</span>&nbsp;<span class="op" id="6431942">(</span><span class="op" id="6431943">*</span><span class="ident" id="6431944">File</span><span class="op" id="6431948">,</span>&nbsp;<span class="builtintype" id="6431950">error</span><span class="op" id="6431955">)</span>&nbsp;<span class="op" id="6431957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431960">f</span>&nbsp;<span class="op" id="6431962">:=</span>&nbsp;<span class="builtinfunc" id="6431965">new</span><span class="op" id="6431968">(</span><span class="ident" id="6431969">File</span><span class="op" id="6431973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431976">sr</span>&nbsp;<span class="op" id="6431979">:=</span>&nbsp;<span class="ident" id="6431982">io</span><span class="op" id="6431984">.</span><span class="ident" id="6431985">NewSectionReader</span><span class="op" id="6432001">(</span><span class="ident" id="6432002">r</span><span class="op" id="6432003">,</span>&nbsp;<span class="num" id="6432005">0</span><span class="op" id="6432006">,</span>&nbsp;<span class="num" id="6432008">1</span><span class="op" id="6432009">&lt;&lt;</span><span class="num" id="6432011">63</span><span class="op" id="6432013">-</span><span class="num" id="6432014">1</span><span class="op" id="6432015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432019">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432081">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432136">var</span>&nbsp;<span class="ident" id="6432140">ident</span>&nbsp;<span class="op" id="6432146">[</span><span class="num" id="6432147">4</span><span class="op" id="6432148">]</span><span class="builtintype" id="6432149">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432155">if</span>&nbsp;<span class="ident" id="6432158">_</span><span class="op" id="6432159">,</span>&nbsp;<span class="ident" id="6432161">err</span>&nbsp;<span class="op" id="6432165">:=</span>&nbsp;<span class="ident" id="6432168">r</span><span class="op" id="6432169">.</span><span class="ident" id="6432170">ReadAt</span><span class="op" id="6432176">(</span><span class="ident" id="6432177">ident</span><span class="op" id="6432182">[</span><span class="num" id="6432183">0</span><span class="op" id="6432184">:</span><span class="op" id="6432185">]</span><span class="op" id="6432186">,</span>&nbsp;<span class="num" id="6432188">0</span><span class="op" id="6432189">)</span><span class="op" id="6432190">;</span>&nbsp;<span class="ident" id="6432192">err</span>&nbsp;<span class="op" id="6432196">!=</span>&nbsp;<span class="ident" id="6432199">nil</span>&nbsp;<span class="op" id="6432203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432207">return</span>&nbsp;<span class="ident" id="6432214">nil</span><span class="op" id="6432217">,</span>&nbsp;<span class="ident" id="6432219">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432227">be</span>&nbsp;<span class="op" id="6432230">:=</span>&nbsp;<span class="ident" id="6432233">binary</span><span class="op" id="6432239">.</span><span class="ident" id="6432240">BigEndian</span><span class="op" id="6432249">.</span><span class="ident" id="6432250">Uint32</span><span class="op" id="6432256">(</span><span class="ident" id="6432257">ident</span><span class="op" id="6432262">[</span><span class="num" id="6432263">0</span><span class="op" id="6432264">:</span><span class="op" id="6432265">]</span><span class="op" id="6432266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432269">le</span>&nbsp;<span class="op" id="6432272">:=</span>&nbsp;<span class="ident" id="6432275">binary</span><span class="op" id="6432281">.</span><span class="ident" id="6432282">LittleEndian</span><span class="op" id="6432294">.</span><span class="ident" id="6432295">Uint32</span><span class="op" id="6432301">(</span><span class="ident" id="6432302">ident</span><span class="op" id="6432307">[</span><span class="num" id="6432308">0</span><span class="op" id="6432309">:</span><span class="op" id="6432310">]</span><span class="op" id="6432311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432314">switch</span>&nbsp;<span class="ident" id="6432321">Magic32</span>&nbsp;<span class="op" id="6432329">&amp;^</span>&nbsp;<span class="num" id="6432332">1</span>&nbsp;<span class="op" id="6432334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432337">case</span>&nbsp;<span class="ident" id="6432342">be</span>&nbsp;<span class="op" id="6432345">&amp;^</span>&nbsp;<span class="num" id="6432348">1</span><span class="op" id="6432349">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432353">f</span><span class="op" id="6432354">.</span><span class="ident" id="6432355">ByteOrder</span>&nbsp;<span class="op" id="6432365">=</span>&nbsp;<span class="ident" id="6432367">binary</span><span class="op" id="6432373">.</span><span class="ident" id="6432374">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432386">f</span><span class="op" id="6432387">.</span><span class="ident" id="6432388">Magic</span>&nbsp;<span class="op" id="6432394">=</span>&nbsp;<span class="ident" id="6432396">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432400">case</span>&nbsp;<span class="ident" id="6432405">le</span>&nbsp;<span class="op" id="6432408">&amp;^</span>&nbsp;<span class="num" id="6432411">1</span><span class="op" id="6432412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432416">f</span><span class="op" id="6432417">.</span><span class="ident" id="6432418">ByteOrder</span>&nbsp;<span class="op" id="6432428">=</span>&nbsp;<span class="ident" id="6432430">binary</span><span class="op" id="6432436">.</span><span class="ident" id="6432437">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432452">f</span><span class="op" id="6432453">.</span><span class="ident" id="6432454">Magic</span>&nbsp;<span class="op" id="6432460">=</span>&nbsp;<span class="ident" id="6432462">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432466">default</span><span class="op" id="6432473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432477">return</span>&nbsp;<span class="ident" id="6432484">nil</span><span class="op" id="6432487">,</span>&nbsp;<span class="op" id="6432489">&amp;</span><span class="ident" id="6432490">FormatError</span><span class="op" id="6432501">{</span><span class="num" id="6432502">0</span><span class="op" id="6432503">,</span>&nbsp;<span class="string" id="6432505">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6432527">,</span>&nbsp;<span class="ident" id="6432529">nil</span><span class="op" id="6432532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432539">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432568">if</span>&nbsp;<span class="ident" id="6432571">err</span>&nbsp;<span class="op" id="6432575">:=</span>&nbsp;<span class="ident" id="6432578">binary</span><span class="op" id="6432584">.</span><span class="ident" id="6432585">Read</span><span class="op" id="6432589">(</span><span class="ident" id="6432590">sr</span><span class="op" id="6432592">,</span>&nbsp;<span class="ident" id="6432594">f</span><span class="op" id="6432595">.</span><span class="ident" id="6432596">ByteOrder</span><span class="op" id="6432605">,</span>&nbsp;<span class="op" id="6432607">&amp;</span><span class="ident" id="6432608">f</span><span class="op" id="6432609">.</span><span class="ident" id="6432610">FileHeader</span><span class="op" id="6432620">)</span><span class="op" id="6432621">;</span>&nbsp;<span class="ident" id="6432623">err</span>&nbsp;<span class="op" id="6432627">!=</span>&nbsp;<span class="ident" id="6432630">nil</span>&nbsp;<span class="op" id="6432634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432638">return</span>&nbsp;<span class="ident" id="6432645">nil</span><span class="op" id="6432648">,</span>&nbsp;<span class="ident" id="6432650">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432659">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432683">offset</span>&nbsp;<span class="op" id="6432690">:=</span>&nbsp;<span class="ident" id="6432693">int64</span><span class="op" id="6432698">(</span><span class="ident" id="6432699">fileHeaderSize32</span><span class="op" id="6432715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432718">if</span>&nbsp;<span class="ident" id="6432721">f</span><span class="op" id="6432722">.</span><span class="ident" id="6432723">Magic</span>&nbsp;<span class="op" id="6432729">==</span>&nbsp;<span class="ident" id="6432732">Magic64</span>&nbsp;<span class="op" id="6432740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432744">offset</span>&nbsp;<span class="op" id="6432751">=</span>&nbsp;<span class="ident" id="6432753">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432774">dat</span>&nbsp;<span class="op" id="6432778">:=</span>&nbsp;<span class="builtinfunc" id="6432781">make</span><span class="op" id="6432785">(</span><span class="op" id="6432786">[</span><span class="op" id="6432787">]</span><span class="builtintype" id="6432788">byte</span><span class="op" id="6432792">,</span>&nbsp;<span class="ident" id="6432794">f</span><span class="op" id="6432795">.</span><span class="ident" id="6432796">Cmdsz</span><span class="op" id="6432801">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432804">if</span>&nbsp;<span class="ident" id="6432807">_</span><span class="op" id="6432808">,</span>&nbsp;<span class="ident" id="6432810">err</span>&nbsp;<span class="op" id="6432814">:=</span>&nbsp;<span class="ident" id="6432817">r</span><span class="op" id="6432818">.</span><span class="ident" id="6432819">ReadAt</span><span class="op" id="6432825">(</span><span class="ident" id="6432826">dat</span><span class="op" id="6432829">,</span>&nbsp;<span class="ident" id="6432831">offset</span><span class="op" id="6432837">)</span><span class="op" id="6432838">;</span>&nbsp;<span class="ident" id="6432840">err</span>&nbsp;<span class="op" id="6432844">!=</span>&nbsp;<span class="ident" id="6432847">nil</span>&nbsp;<span class="op" id="6432851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432855">return</span>&nbsp;<span class="ident" id="6432862">nil</span><span class="op" id="6432865">,</span>&nbsp;<span class="ident" id="6432867">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432875">f</span><span class="op" id="6432876">.</span><span class="ident" id="6432877">Loads</span>&nbsp;<span class="op" id="6432883">=</span>&nbsp;<span class="builtinfunc" id="6432885">make</span><span class="op" id="6432889">(</span><span class="op" id="6432890">[</span><span class="op" id="6432891">]</span><span class="ident" id="6432892">Load</span><span class="op" id="6432896">,</span>&nbsp;<span class="ident" id="6432898">f</span><span class="op" id="6432899">.</span><span class="ident" id="6432900">Ncmd</span><span class="op" id="6432904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6432907">bo</span>&nbsp;<span class="op" id="6432910">:=</span>&nbsp;<span class="ident" id="6432913">f</span><span class="op" id="6432914">.</span><span class="ident" id="6432915">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432926">for</span>&nbsp;<span class="ident" id="6432930">i</span>&nbsp;<span class="op" id="6432932">:=</span>&nbsp;<span class="keyword" id="6432935">range</span>&nbsp;<span class="ident" id="6432941">f</span><span class="op" id="6432942">.</span><span class="ident" id="6432943">Loads</span>&nbsp;<span class="op" id="6432949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432953">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433015">if</span>&nbsp;<span class="builtinfunc" id="6433018">len</span><span class="op" id="6433021">(</span><span class="ident" id="6433022">dat</span><span class="op" id="6433025">)</span>&nbsp;<span class="op" id="6433027">&lt;</span>&nbsp;<span class="num" id="6433029">8</span>&nbsp;<span class="op" id="6433031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433036">return</span>&nbsp;<span class="ident" id="6433043">nil</span><span class="op" id="6433046">,</span>&nbsp;<span class="op" id="6433048">&amp;</span><span class="ident" id="6433049">FormatError</span><span class="op" id="6433060">{</span><span class="ident" id="6433061">offset</span><span class="op" id="6433067">,</span>&nbsp;<span class="string" id="6433069">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6433094">,</span>&nbsp;<span class="ident" id="6433096">nil</span><span class="op" id="6433099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433103">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433107">cmd</span><span class="op" id="6433110">,</span>&nbsp;<span class="ident" id="6433112">siz</span>&nbsp;<span class="op" id="6433116">:=</span>&nbsp;<span class="ident" id="6433119">LoadCmd</span><span class="op" id="6433126">(</span><span class="ident" id="6433127">bo</span><span class="op" id="6433129">.</span><span class="ident" id="6433130">Uint32</span><span class="op" id="6433136">(</span><span class="ident" id="6433137">dat</span><span class="op" id="6433140">[</span><span class="num" id="6433141">0</span><span class="op" id="6433142">:</span><span class="num" id="6433143">4</span><span class="op" id="6433144">]</span><span class="op" id="6433145">)</span><span class="op" id="6433146">)</span><span class="op" id="6433147">,</span>&nbsp;<span class="ident" id="6433149">bo</span><span class="op" id="6433151">.</span><span class="ident" id="6433152">Uint32</span><span class="op" id="6433158">(</span><span class="ident" id="6433159">dat</span><span class="op" id="6433162">[</span><span class="num" id="6433163">4</span><span class="op" id="6433164">:</span><span class="num" id="6433165">8</span><span class="op" id="6433166">]</span><span class="op" id="6433167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433171">if</span>&nbsp;<span class="ident" id="6433174">siz</span>&nbsp;<span class="op" id="6433178">&lt;</span>&nbsp;<span class="num" id="6433180">8</span>&nbsp;<span class="op" id="6433182">||</span>&nbsp;<span class="ident" id="6433185">siz</span>&nbsp;<span class="op" id="6433189">&gt;</span>&nbsp;<span class="builtintype" id="6433191">uint32</span><span class="op" id="6433197">(</span><span class="builtinfunc" id="6433198">len</span><span class="op" id="6433201">(</span><span class="ident" id="6433202">dat</span><span class="op" id="6433205">)</span><span class="op" id="6433206">)</span>&nbsp;<span class="op" id="6433208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433213">return</span>&nbsp;<span class="ident" id="6433220">nil</span><span class="op" id="6433223">,</span>&nbsp;<span class="op" id="6433225">&amp;</span><span class="ident" id="6433226">FormatError</span><span class="op" id="6433237">{</span><span class="ident" id="6433238">offset</span><span class="op" id="6433244">,</span>&nbsp;<span class="string" id="6433246">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6433274">,</span>&nbsp;<span class="ident" id="6433276">nil</span><span class="op" id="6433279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433287">var</span>&nbsp;<span class="ident" id="6433291">cmddat</span>&nbsp;<span class="op" id="6433298">[</span><span class="op" id="6433299">]</span><span class="builtintype" id="6433300">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433307">cmddat</span><span class="op" id="6433313">,</span>&nbsp;<span class="ident" id="6433315">dat</span>&nbsp;<span class="op" id="6433319">=</span>&nbsp;<span class="ident" id="6433321">dat</span><span class="op" id="6433324">[</span><span class="num" id="6433325">0</span><span class="op" id="6433326">:</span><span class="ident" id="6433327">siz</span><span class="op" id="6433330">]</span><span class="op" id="6433331">,</span>&nbsp;<span class="ident" id="6433333">dat</span><span class="op" id="6433336">[</span><span class="ident" id="6433337">siz</span><span class="op" id="6433340">:</span><span class="op" id="6433341">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433345">offset</span>&nbsp;<span class="op" id="6433352">+=</span>&nbsp;<span class="ident" id="6433355">int64</span><span class="op" id="6433360">(</span><span class="ident" id="6433361">siz</span><span class="op" id="6433364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433368">var</span>&nbsp;<span class="ident" id="6433372">s</span>&nbsp;<span class="op" id="6433374">*</span><span class="ident" id="6433375">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433385">switch</span>&nbsp;<span class="ident" id="6433392">cmd</span>&nbsp;<span class="op" id="6433396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433400">default</span><span class="op" id="6433407">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433412">f</span><span class="op" id="6433413">.</span><span class="ident" id="6433414">Loads</span><span class="op" id="6433419">[</span><span class="ident" id="6433420">i</span><span class="op" id="6433421">]</span>&nbsp;<span class="op" id="6433423">=</span>&nbsp;<span class="ident" id="6433425">LoadBytes</span><span class="op" id="6433434">(</span><span class="ident" id="6433435">cmddat</span><span class="op" id="6433441">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433446">case</span>&nbsp;<span class="ident" id="6433451">LoadCmdDylib</span><span class="op" id="6433463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433468">var</span>&nbsp;<span class="ident" id="6433472">hdr</span>&nbsp;<span class="ident" id="6433476">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433488">b</span>&nbsp;<span class="op" id="6433490">:=</span>&nbsp;<span class="ident" id="6433493">bytes</span><span class="op" id="6433498">.</span><span class="ident" id="6433499">NewReader</span><span class="op" id="6433508">(</span><span class="ident" id="6433509">cmddat</span><span class="op" id="6433515">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433520">if</span>&nbsp;<span class="ident" id="6433523">err</span>&nbsp;<span class="op" id="6433527">:=</span>&nbsp;<span class="ident" id="6433530">binary</span><span class="op" id="6433536">.</span><span class="ident" id="6433537">Read</span><span class="op" id="6433541">(</span><span class="ident" id="6433542">b</span><span class="op" id="6433543">,</span>&nbsp;<span class="ident" id="6433545">bo</span><span class="op" id="6433547">,</span>&nbsp;<span class="op" id="6433549">&amp;</span><span class="ident" id="6433550">hdr</span><span class="op" id="6433553">)</span><span class="op" id="6433554">;</span>&nbsp;<span class="ident" id="6433556">err</span>&nbsp;<span class="op" id="6433560">!=</span>&nbsp;<span class="ident" id="6433563">nil</span>&nbsp;<span class="op" id="6433567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433573">return</span>&nbsp;<span class="ident" id="6433580">nil</span><span class="op" id="6433583">,</span>&nbsp;<span class="ident" id="6433585">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433597">l</span>&nbsp;<span class="op" id="6433599">:=</span>&nbsp;<span class="builtinfunc" id="6433602">new</span><span class="op" id="6433605">(</span><span class="ident" id="6433606">Dylib</span><span class="op" id="6433611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433616">if</span>&nbsp;<span class="ident" id="6433619">hdr</span><span class="op" id="6433622">.</span><span class="ident" id="6433623">Name</span>&nbsp;<span class="op" id="6433628">&gt;=</span>&nbsp;<span class="builtintype" id="6433631">uint32</span><span class="op" id="6433637">(</span><span class="builtinfunc" id="6433638">len</span><span class="op" id="6433641">(</span><span class="ident" id="6433642">cmddat</span><span class="op" id="6433648">)</span><span class="op" id="6433649">)</span>&nbsp;<span class="op" id="6433651">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433657">return</span>&nbsp;<span class="ident" id="6433664">nil</span><span class="op" id="6433667">,</span>&nbsp;<span class="op" id="6433669">&amp;</span><span class="ident" id="6433670">FormatError</span><span class="op" id="6433681">{</span><span class="ident" id="6433682">offset</span><span class="op" id="6433688">,</span>&nbsp;<span class="string" id="6433690">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6433731">,</span>&nbsp;<span class="ident" id="6433733">hdr</span><span class="op" id="6433736">.</span><span class="ident" id="6433737">Name</span><span class="op" id="6433741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433751">l</span><span class="op" id="6433752">.</span><span class="ident" id="6433753">Name</span>&nbsp;<span class="op" id="6433758">=</span>&nbsp;<span class="ident" id="6433760">cstring</span><span class="op" id="6433767">(</span><span class="ident" id="6433768">cmddat</span><span class="op" id="6433774">[</span><span class="ident" id="6433775">hdr</span><span class="op" id="6433778">.</span><span class="ident" id="6433779">Name</span><span class="op" id="6433783">:</span><span class="op" id="6433784">]</span><span class="op" id="6433785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433790">l</span><span class="op" id="6433791">.</span><span class="ident" id="6433792">Time</span>&nbsp;<span class="op" id="6433797">=</span>&nbsp;<span class="ident" id="6433799">hdr</span><span class="op" id="6433802">.</span><span class="ident" id="6433803">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433811">l</span><span class="op" id="6433812">.</span><span class="ident" id="6433813">CurrentVersion</span>&nbsp;<span class="op" id="6433828">=</span>&nbsp;<span class="ident" id="6433830">hdr</span><span class="op" id="6433833">.</span><span class="ident" id="6433834">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433852">l</span><span class="op" id="6433853">.</span><span class="ident" id="6433854">CompatVersion</span>&nbsp;<span class="op" id="6433868">=</span>&nbsp;<span class="ident" id="6433870">hdr</span><span class="op" id="6433873">.</span><span class="ident" id="6433874">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433891">l</span><span class="op" id="6433892">.</span><span class="ident" id="6433893">LoadBytes</span>&nbsp;<span class="op" id="6433903">=</span>&nbsp;<span class="ident" id="6433905">LoadBytes</span><span class="op" id="6433914">(</span><span class="ident" id="6433915">cmddat</span><span class="op" id="6433921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433926">f</span><span class="op" id="6433927">.</span><span class="ident" id="6433928">Loads</span><span class="op" id="6433933">[</span><span class="ident" id="6433934">i</span><span class="op" id="6433935">]</span>&nbsp;<span class="op" id="6433937">=</span>&nbsp;<span class="ident" id="6433939">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433944">case</span>&nbsp;<span class="ident" id="6433949">LoadCmdSymtab</span><span class="op" id="6433962">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433967">var</span>&nbsp;<span class="ident" id="6433971">hdr</span>&nbsp;<span class="ident" id="6433975">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433988">b</span>&nbsp;<span class="op" id="6433990">:=</span>&nbsp;<span class="ident" id="6433993">bytes</span><span class="op" id="6433998">.</span><span class="ident" id="6433999">NewReader</span><span class="op" id="6434008">(</span><span class="ident" id="6434009">cmddat</span><span class="op" id="6434015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434020">if</span>&nbsp;<span class="ident" id="6434023">err</span>&nbsp;<span class="op" id="6434027">:=</span>&nbsp;<span class="ident" id="6434030">binary</span><span class="op" id="6434036">.</span><span class="ident" id="6434037">Read</span><span class="op" id="6434041">(</span><span class="ident" id="6434042">b</span><span class="op" id="6434043">,</span>&nbsp;<span class="ident" id="6434045">bo</span><span class="op" id="6434047">,</span>&nbsp;<span class="op" id="6434049">&amp;</span><span class="ident" id="6434050">hdr</span><span class="op" id="6434053">)</span><span class="op" id="6434054">;</span>&nbsp;<span class="ident" id="6434056">err</span>&nbsp;<span class="op" id="6434060">!=</span>&nbsp;<span class="ident" id="6434063">nil</span>&nbsp;<span class="op" id="6434067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434073">return</span>&nbsp;<span class="ident" id="6434080">nil</span><span class="op" id="6434083">,</span>&nbsp;<span class="ident" id="6434085">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434092">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434097">strtab</span>&nbsp;<span class="op" id="6434104">:=</span>&nbsp;<span class="builtinfunc" id="6434107">make</span><span class="op" id="6434111">(</span><span class="op" id="6434112">[</span><span class="op" id="6434113">]</span><span class="builtintype" id="6434114">byte</span><span class="op" id="6434118">,</span>&nbsp;<span class="ident" id="6434120">hdr</span><span class="op" id="6434123">.</span><span class="ident" id="6434124">Strsize</span><span class="op" id="6434131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434136">if</span>&nbsp;<span class="ident" id="6434139">_</span><span class="op" id="6434140">,</span>&nbsp;<span class="ident" id="6434142">err</span>&nbsp;<span class="op" id="6434146">:=</span>&nbsp;<span class="ident" id="6434149">r</span><span class="op" id="6434150">.</span><span class="ident" id="6434151">ReadAt</span><span class="op" id="6434157">(</span><span class="ident" id="6434158">strtab</span><span class="op" id="6434164">,</span>&nbsp;<span class="ident" id="6434166">int64</span><span class="op" id="6434171">(</span><span class="ident" id="6434172">hdr</span><span class="op" id="6434175">.</span><span class="ident" id="6434176">Stroff</span><span class="op" id="6434182">)</span><span class="op" id="6434183">)</span><span class="op" id="6434184">;</span>&nbsp;<span class="ident" id="6434186">err</span>&nbsp;<span class="op" id="6434190">!=</span>&nbsp;<span class="ident" id="6434193">nil</span>&nbsp;<span class="op" id="6434197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434203">return</span>&nbsp;<span class="ident" id="6434210">nil</span><span class="op" id="6434213">,</span>&nbsp;<span class="ident" id="6434215">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434227">var</span>&nbsp;<span class="ident" id="6434231">symsz</span>&nbsp;<span class="builtintype" id="6434237">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434244">if</span>&nbsp;<span class="ident" id="6434247">f</span><span class="op" id="6434248">.</span><span class="ident" id="6434249">Magic</span>&nbsp;<span class="op" id="6434255">==</span>&nbsp;<span class="ident" id="6434258">Magic64</span>&nbsp;<span class="op" id="6434266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434272">symsz</span>&nbsp;<span class="op" id="6434278">=</span>&nbsp;<span class="num" id="6434280">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434286">}</span>&nbsp;<span class="keyword" id="6434288">else</span>&nbsp;<span class="op" id="6434293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434299">symsz</span>&nbsp;<span class="op" id="6434305">=</span>&nbsp;<span class="num" id="6434307">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434313">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434318">symdat</span>&nbsp;<span class="op" id="6434325">:=</span>&nbsp;<span class="builtinfunc" id="6434328">make</span><span class="op" id="6434332">(</span><span class="op" id="6434333">[</span><span class="op" id="6434334">]</span><span class="builtintype" id="6434335">byte</span><span class="op" id="6434339">,</span>&nbsp;<span class="builtintype" id="6434341">int</span><span class="op" id="6434344">(</span><span class="ident" id="6434345">hdr</span><span class="op" id="6434348">.</span><span class="ident" id="6434349">Nsyms</span><span class="op" id="6434354">)</span><span class="op" id="6434355">*</span><span class="ident" id="6434356">symsz</span><span class="op" id="6434361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434366">if</span>&nbsp;<span class="ident" id="6434369">_</span><span class="op" id="6434370">,</span>&nbsp;<span class="ident" id="6434372">err</span>&nbsp;<span class="op" id="6434376">:=</span>&nbsp;<span class="ident" id="6434379">r</span><span class="op" id="6434380">.</span><span class="ident" id="6434381">ReadAt</span><span class="op" id="6434387">(</span><span class="ident" id="6434388">symdat</span><span class="op" id="6434394">,</span>&nbsp;<span class="ident" id="6434396">int64</span><span class="op" id="6434401">(</span><span class="ident" id="6434402">hdr</span><span class="op" id="6434405">.</span><span class="ident" id="6434406">Symoff</span><span class="op" id="6434412">)</span><span class="op" id="6434413">)</span><span class="op" id="6434414">;</span>&nbsp;<span class="ident" id="6434416">err</span>&nbsp;<span class="op" id="6434420">!=</span>&nbsp;<span class="ident" id="6434423">nil</span>&nbsp;<span class="op" id="6434427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434433">return</span>&nbsp;<span class="ident" id="6434440">nil</span><span class="op" id="6434443">,</span>&nbsp;<span class="ident" id="6434445">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434457">st</span><span class="op" id="6434459">,</span>&nbsp;<span class="ident" id="6434461">err</span>&nbsp;<span class="op" id="6434465">:=</span>&nbsp;<span class="ident" id="6434468">f</span><span class="op" id="6434469">.</span><span class="ident" id="6434470">parseSymtab</span><span class="op" id="6434481">(</span><span class="ident" id="6434482">symdat</span><span class="op" id="6434488">,</span>&nbsp;<span class="ident" id="6434490">strtab</span><span class="op" id="6434496">,</span>&nbsp;<span class="ident" id="6434498">cmddat</span><span class="op" id="6434504">,</span>&nbsp;<span class="op" id="6434506">&amp;</span><span class="ident" id="6434507">hdr</span><span class="op" id="6434510">,</span>&nbsp;<span class="ident" id="6434512">offset</span><span class="op" id="6434518">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434523">if</span>&nbsp;<span class="ident" id="6434526">err</span>&nbsp;<span class="op" id="6434530">!=</span>&nbsp;<span class="ident" id="6434533">nil</span>&nbsp;<span class="op" id="6434537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434543">return</span>&nbsp;<span class="ident" id="6434550">nil</span><span class="op" id="6434553">,</span>&nbsp;<span class="ident" id="6434555">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434567">f</span><span class="op" id="6434568">.</span><span class="ident" id="6434569">Loads</span><span class="op" id="6434574">[</span><span class="ident" id="6434575">i</span><span class="op" id="6434576">]</span>&nbsp;<span class="op" id="6434578">=</span>&nbsp;<span class="ident" id="6434580">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434586">f</span><span class="op" id="6434587">.</span><span class="ident" id="6434588">Symtab</span>&nbsp;<span class="op" id="6434595">=</span>&nbsp;<span class="ident" id="6434597">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434603">case</span>&nbsp;<span class="ident" id="6434608">LoadCmdDysymtab</span><span class="op" id="6434623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434628">var</span>&nbsp;<span class="ident" id="6434632">hdr</span>&nbsp;<span class="ident" id="6434636">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434651">b</span>&nbsp;<span class="op" id="6434653">:=</span>&nbsp;<span class="ident" id="6434656">bytes</span><span class="op" id="6434661">.</span><span class="ident" id="6434662">NewReader</span><span class="op" id="6434671">(</span><span class="ident" id="6434672">cmddat</span><span class="op" id="6434678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434683">if</span>&nbsp;<span class="ident" id="6434686">err</span>&nbsp;<span class="op" id="6434690">:=</span>&nbsp;<span class="ident" id="6434693">binary</span><span class="op" id="6434699">.</span><span class="ident" id="6434700">Read</span><span class="op" id="6434704">(</span><span class="ident" id="6434705">b</span><span class="op" id="6434706">,</span>&nbsp;<span class="ident" id="6434708">bo</span><span class="op" id="6434710">,</span>&nbsp;<span class="op" id="6434712">&amp;</span><span class="ident" id="6434713">hdr</span><span class="op" id="6434716">)</span><span class="op" id="6434717">;</span>&nbsp;<span class="ident" id="6434719">err</span>&nbsp;<span class="op" id="6434723">!=</span>&nbsp;<span class="ident" id="6434726">nil</span>&nbsp;<span class="op" id="6434730">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434736">return</span>&nbsp;<span class="ident" id="6434743">nil</span><span class="op" id="6434746">,</span>&nbsp;<span class="ident" id="6434748">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434760">dat</span>&nbsp;<span class="op" id="6434764">:=</span>&nbsp;<span class="builtinfunc" id="6434767">make</span><span class="op" id="6434771">(</span><span class="op" id="6434772">[</span><span class="op" id="6434773">]</span><span class="builtintype" id="6434774">byte</span><span class="op" id="6434778">,</span>&nbsp;<span class="ident" id="6434780">hdr</span><span class="op" id="6434783">.</span><span class="ident" id="6434784">Nindirectsyms</span><span class="op" id="6434797">*</span><span class="num" id="6434798">4</span><span class="op" id="6434799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434804">if</span>&nbsp;<span class="ident" id="6434807">_</span><span class="op" id="6434808">,</span>&nbsp;<span class="ident" id="6434810">err</span>&nbsp;<span class="op" id="6434814">:=</span>&nbsp;<span class="ident" id="6434817">r</span><span class="op" id="6434818">.</span><span class="ident" id="6434819">ReadAt</span><span class="op" id="6434825">(</span><span class="ident" id="6434826">dat</span><span class="op" id="6434829">,</span>&nbsp;<span class="ident" id="6434831">int64</span><span class="op" id="6434836">(</span><span class="ident" id="6434837">hdr</span><span class="op" id="6434840">.</span><span class="ident" id="6434841">Indirectsymoff</span><span class="op" id="6434855">)</span><span class="op" id="6434856">)</span><span class="op" id="6434857">;</span>&nbsp;<span class="ident" id="6434859">err</span>&nbsp;<span class="op" id="6434863">!=</span>&nbsp;<span class="ident" id="6434866">nil</span>&nbsp;<span class="op" id="6434870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434876">return</span>&nbsp;<span class="ident" id="6434883">nil</span><span class="op" id="6434886">,</span>&nbsp;<span class="ident" id="6434888">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6434895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434900">x</span>&nbsp;<span class="op" id="6434902">:=</span>&nbsp;<span class="builtinfunc" id="6434905">make</span><span class="op" id="6434909">(</span><span class="op" id="6434910">[</span><span class="op" id="6434911">]</span><span class="builtintype" id="6434912">uint32</span><span class="op" id="6434918">,</span>&nbsp;<span class="ident" id="6434920">hdr</span><span class="op" id="6434923">.</span><span class="ident" id="6434924">Nindirectsyms</span><span class="op" id="6434937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434942">if</span>&nbsp;<span class="ident" id="6434945">err</span>&nbsp;<span class="op" id="6434949">:=</span>&nbsp;<span class="ident" id="6434952">binary</span><span class="op" id="6434958">.</span><span class="ident" id="6434959">Read</span><span class="op" id="6434963">(</span><span class="ident" id="6434964">bytes</span><span class="op" id="6434969">.</span><span class="ident" id="6434970">NewReader</span><span class="op" id="6434979">(</span><span class="ident" id="6434980">dat</span><span class="op" id="6434983">)</span><span class="op" id="6434984">,</span>&nbsp;<span class="ident" id="6434986">bo</span><span class="op" id="6434988">,</span>&nbsp;<span class="ident" id="6434990">x</span><span class="op" id="6434991">)</span><span class="op" id="6434992">;</span>&nbsp;<span class="ident" id="6434994">err</span>&nbsp;<span class="op" id="6434998">!=</span>&nbsp;<span class="ident" id="6435001">nil</span>&nbsp;<span class="op" id="6435005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435011">return</span>&nbsp;<span class="ident" id="6435018">nil</span><span class="op" id="6435021">,</span>&nbsp;<span class="ident" id="6435023">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435030">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435035">st</span>&nbsp;<span class="op" id="6435038">:=</span>&nbsp;<span class="builtinfunc" id="6435041">new</span><span class="op" id="6435044">(</span><span class="ident" id="6435045">Dysymtab</span><span class="op" id="6435053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435058">st</span><span class="op" id="6435060">.</span><span class="ident" id="6435061">LoadBytes</span>&nbsp;<span class="op" id="6435071">=</span>&nbsp;<span class="ident" id="6435073">LoadBytes</span><span class="op" id="6435082">(</span><span class="ident" id="6435083">cmddat</span><span class="op" id="6435089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435094">st</span><span class="op" id="6435096">.</span><span class="ident" id="6435097">DysymtabCmd</span>&nbsp;<span class="op" id="6435109">=</span>&nbsp;<span class="ident" id="6435111">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435118">st</span><span class="op" id="6435120">.</span><span class="ident" id="6435121">IndirectSyms</span>&nbsp;<span class="op" id="6435134">=</span>&nbsp;<span class="ident" id="6435136">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435141">f</span><span class="op" id="6435142">.</span><span class="ident" id="6435143">Loads</span><span class="op" id="6435148">[</span><span class="ident" id="6435149">i</span><span class="op" id="6435150">]</span>&nbsp;<span class="op" id="6435152">=</span>&nbsp;<span class="ident" id="6435154">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435160">f</span><span class="op" id="6435161">.</span><span class="ident" id="6435162">Dysymtab</span>&nbsp;<span class="op" id="6435171">=</span>&nbsp;<span class="ident" id="6435173">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435179">case</span>&nbsp;<span class="ident" id="6435184">LoadCmdSegment</span><span class="op" id="6435198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435203">var</span>&nbsp;<span class="ident" id="6435207">seg32</span>&nbsp;<span class="ident" id="6435213">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435226">b</span>&nbsp;<span class="op" id="6435228">:=</span>&nbsp;<span class="ident" id="6435231">bytes</span><span class="op" id="6435236">.</span><span class="ident" id="6435237">NewReader</span><span class="op" id="6435246">(</span><span class="ident" id="6435247">cmddat</span><span class="op" id="6435253">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435258">if</span>&nbsp;<span class="ident" id="6435261">err</span>&nbsp;<span class="op" id="6435265">:=</span>&nbsp;<span class="ident" id="6435268">binary</span><span class="op" id="6435274">.</span><span class="ident" id="6435275">Read</span><span class="op" id="6435279">(</span><span class="ident" id="6435280">b</span><span class="op" id="6435281">,</span>&nbsp;<span class="ident" id="6435283">bo</span><span class="op" id="6435285">,</span>&nbsp;<span class="op" id="6435287">&amp;</span><span class="ident" id="6435288">seg32</span><span class="op" id="6435293">)</span><span class="op" id="6435294">;</span>&nbsp;<span class="ident" id="6435296">err</span>&nbsp;<span class="op" id="6435300">!=</span>&nbsp;<span class="ident" id="6435303">nil</span>&nbsp;<span class="op" id="6435307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435313">return</span>&nbsp;<span class="ident" id="6435320">nil</span><span class="op" id="6435323">,</span>&nbsp;<span class="ident" id="6435325">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435337">s</span>&nbsp;<span class="op" id="6435339">=</span>&nbsp;<span class="builtinfunc" id="6435341">new</span><span class="op" id="6435344">(</span><span class="ident" id="6435345">Segment</span><span class="op" id="6435352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435357">s</span><span class="op" id="6435358">.</span><span class="ident" id="6435359">LoadBytes</span>&nbsp;<span class="op" id="6435369">=</span>&nbsp;<span class="ident" id="6435371">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435381">s</span><span class="op" id="6435382">.</span><span class="ident" id="6435383">Cmd</span>&nbsp;<span class="op" id="6435387">=</span>&nbsp;<span class="ident" id="6435389">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435396">s</span><span class="op" id="6435397">.</span><span class="ident" id="6435398">Len</span>&nbsp;<span class="op" id="6435402">=</span>&nbsp;<span class="ident" id="6435404">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435411">s</span><span class="op" id="6435412">.</span><span class="ident" id="6435413">Name</span>&nbsp;<span class="op" id="6435418">=</span>&nbsp;<span class="ident" id="6435420">cstring</span><span class="op" id="6435427">(</span><span class="ident" id="6435428">seg32</span><span class="op" id="6435433">.</span><span class="ident" id="6435434">Name</span><span class="op" id="6435438">[</span><span class="num" id="6435439">0</span><span class="op" id="6435440">:</span><span class="op" id="6435441">]</span><span class="op" id="6435442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435447">s</span><span class="op" id="6435448">.</span><span class="ident" id="6435449">Addr</span>&nbsp;<span class="op" id="6435454">=</span>&nbsp;<span class="ident" id="6435456">uint64</span><span class="op" id="6435462">(</span><span class="ident" id="6435463">seg32</span><span class="op" id="6435468">.</span><span class="ident" id="6435469">Addr</span><span class="op" id="6435473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435478">s</span><span class="op" id="6435479">.</span><span class="ident" id="6435480">Memsz</span>&nbsp;<span class="op" id="6435486">=</span>&nbsp;<span class="ident" id="6435488">uint64</span><span class="op" id="6435494">(</span><span class="ident" id="6435495">seg32</span><span class="op" id="6435500">.</span><span class="ident" id="6435501">Memsz</span><span class="op" id="6435506">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435511">s</span><span class="op" id="6435512">.</span><span class="ident" id="6435513">Offset</span>&nbsp;<span class="op" id="6435520">=</span>&nbsp;<span class="ident" id="6435522">uint64</span><span class="op" id="6435528">(</span><span class="ident" id="6435529">seg32</span><span class="op" id="6435534">.</span><span class="ident" id="6435535">Offset</span><span class="op" id="6435541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435546">s</span><span class="op" id="6435547">.</span><span class="ident" id="6435548">Filesz</span>&nbsp;<span class="op" id="6435555">=</span>&nbsp;<span class="ident" id="6435557">uint64</span><span class="op" id="6435563">(</span><span class="ident" id="6435564">seg32</span><span class="op" id="6435569">.</span><span class="ident" id="6435570">Filesz</span><span class="op" id="6435576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435581">s</span><span class="op" id="6435582">.</span><span class="ident" id="6435583">Maxprot</span>&nbsp;<span class="op" id="6435591">=</span>&nbsp;<span class="ident" id="6435593">seg32</span><span class="op" id="6435598">.</span><span class="ident" id="6435599">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435610">s</span><span class="op" id="6435611">.</span><span class="ident" id="6435612">Prot</span>&nbsp;<span class="op" id="6435617">=</span>&nbsp;<span class="ident" id="6435619">seg32</span><span class="op" id="6435624">.</span><span class="ident" id="6435625">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435633">s</span><span class="op" id="6435634">.</span><span class="ident" id="6435635">Nsect</span>&nbsp;<span class="op" id="6435641">=</span>&nbsp;<span class="ident" id="6435643">seg32</span><span class="op" id="6435648">.</span><span class="ident" id="6435649">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435658">s</span><span class="op" id="6435659">.</span><span class="ident" id="6435660">Flag</span>&nbsp;<span class="op" id="6435665">=</span>&nbsp;<span class="ident" id="6435667">seg32</span><span class="op" id="6435672">.</span><span class="ident" id="6435673">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435681">f</span><span class="op" id="6435682">.</span><span class="ident" id="6435683">Loads</span><span class="op" id="6435688">[</span><span class="ident" id="6435689">i</span><span class="op" id="6435690">]</span>&nbsp;<span class="op" id="6435692">=</span>&nbsp;<span class="ident" id="6435694">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435699">for</span>&nbsp;<span class="ident" id="6435703">i</span>&nbsp;<span class="op" id="6435705">:=</span>&nbsp;<span class="num" id="6435708">0</span><span class="op" id="6435709">;</span>&nbsp;<span class="ident" id="6435711">i</span>&nbsp;<span class="op" id="6435713">&lt;</span>&nbsp;<span class="builtintype" id="6435715">int</span><span class="op" id="6435718">(</span><span class="ident" id="6435719">s</span><span class="op" id="6435720">.</span><span class="ident" id="6435721">Nsect</span><span class="op" id="6435726">)</span><span class="op" id="6435727">;</span>&nbsp;<span class="ident" id="6435729">i</span><span class="op" id="6435730">++</span>&nbsp;<span class="op" id="6435733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435739">var</span>&nbsp;<span class="ident" id="6435743">sh32</span>&nbsp;<span class="ident" id="6435748">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435762">if</span>&nbsp;<span class="ident" id="6435765">err</span>&nbsp;<span class="op" id="6435769">:=</span>&nbsp;<span class="ident" id="6435772">binary</span><span class="op" id="6435778">.</span><span class="ident" id="6435779">Read</span><span class="op" id="6435783">(</span><span class="ident" id="6435784">b</span><span class="op" id="6435785">,</span>&nbsp;<span class="ident" id="6435787">bo</span><span class="op" id="6435789">,</span>&nbsp;<span class="op" id="6435791">&amp;</span><span class="ident" id="6435792">sh32</span><span class="op" id="6435796">)</span><span class="op" id="6435797">;</span>&nbsp;<span class="ident" id="6435799">err</span>&nbsp;<span class="op" id="6435803">!=</span>&nbsp;<span class="ident" id="6435806">nil</span>&nbsp;<span class="op" id="6435810">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435817">return</span>&nbsp;<span class="ident" id="6435824">nil</span><span class="op" id="6435827">,</span>&nbsp;<span class="ident" id="6435829">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435843">sh</span>&nbsp;<span class="op" id="6435846">:=</span>&nbsp;<span class="builtinfunc" id="6435849">new</span><span class="op" id="6435852">(</span><span class="ident" id="6435853">Section</span><span class="op" id="6435860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435866">sh</span><span class="op" id="6435868">.</span><span class="ident" id="6435869">Name</span>&nbsp;<span class="op" id="6435874">=</span>&nbsp;<span class="ident" id="6435876">cstring</span><span class="op" id="6435883">(</span><span class="ident" id="6435884">sh32</span><span class="op" id="6435888">.</span><span class="ident" id="6435889">Name</span><span class="op" id="6435893">[</span><span class="num" id="6435894">0</span><span class="op" id="6435895">:</span><span class="op" id="6435896">]</span><span class="op" id="6435897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435903">sh</span><span class="op" id="6435905">.</span><span class="ident" id="6435906">Seg</span>&nbsp;<span class="op" id="6435910">=</span>&nbsp;<span class="ident" id="6435912">cstring</span><span class="op" id="6435919">(</span><span class="ident" id="6435920">sh32</span><span class="op" id="6435924">.</span><span class="ident" id="6435925">Seg</span><span class="op" id="6435928">[</span><span class="num" id="6435929">0</span><span class="op" id="6435930">:</span><span class="op" id="6435931">]</span><span class="op" id="6435932">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435938">sh</span><span class="op" id="6435940">.</span><span class="ident" id="6435941">Addr</span>&nbsp;<span class="op" id="6435946">=</span>&nbsp;<span class="ident" id="6435948">uint64</span><span class="op" id="6435954">(</span><span class="ident" id="6435955">sh32</span><span class="op" id="6435959">.</span><span class="ident" id="6435960">Addr</span><span class="op" id="6435964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435970">sh</span><span class="op" id="6435972">.</span><span class="ident" id="6435973">Size</span>&nbsp;<span class="op" id="6435978">=</span>&nbsp;<span class="ident" id="6435980">uint64</span><span class="op" id="6435986">(</span><span class="ident" id="6435987">sh32</span><span class="op" id="6435991">.</span><span class="ident" id="6435992">Size</span><span class="op" id="6435996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436002">sh</span><span class="op" id="6436004">.</span><span class="ident" id="6436005">Offset</span>&nbsp;<span class="op" id="6436012">=</span>&nbsp;<span class="ident" id="6436014">sh32</span><span class="op" id="6436018">.</span><span class="ident" id="6436019">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436030">sh</span><span class="op" id="6436032">.</span><span class="ident" id="6436033">Align</span>&nbsp;<span class="op" id="6436039">=</span>&nbsp;<span class="ident" id="6436041">sh32</span><span class="op" id="6436045">.</span><span class="ident" id="6436046">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436056">sh</span><span class="op" id="6436058">.</span><span class="ident" id="6436059">Reloff</span>&nbsp;<span class="op" id="6436066">=</span>&nbsp;<span class="ident" id="6436068">sh32</span><span class="op" id="6436072">.</span><span class="ident" id="6436073">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436084">sh</span><span class="op" id="6436086">.</span><span class="ident" id="6436087">Nreloc</span>&nbsp;<span class="op" id="6436094">=</span>&nbsp;<span class="ident" id="6436096">sh32</span><span class="op" id="6436100">.</span><span class="ident" id="6436101">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436112">sh</span><span class="op" id="6436114">.</span><span class="ident" id="6436115">Flags</span>&nbsp;<span class="op" id="6436121">=</span>&nbsp;<span class="ident" id="6436123">sh32</span><span class="op" id="6436127">.</span><span class="ident" id="6436128">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436138">f</span><span class="op" id="6436139">.</span><span class="ident" id="6436140">pushSection</span><span class="op" id="6436151">(</span><span class="ident" id="6436152">sh</span><span class="op" id="6436154">,</span>&nbsp;<span class="ident" id="6436156">r</span><span class="op" id="6436157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6436162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436167">case</span>&nbsp;<span class="ident" id="6436172">LoadCmdSegment64</span><span class="op" id="6436188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436193">var</span>&nbsp;<span class="ident" id="6436197">seg64</span>&nbsp;<span class="ident" id="6436203">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436216">b</span>&nbsp;<span class="op" id="6436218">:=</span>&nbsp;<span class="ident" id="6436221">bytes</span><span class="op" id="6436226">.</span><span class="ident" id="6436227">NewReader</span><span class="op" id="6436236">(</span><span class="ident" id="6436237">cmddat</span><span class="op" id="6436243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436248">if</span>&nbsp;<span class="ident" id="6436251">err</span>&nbsp;<span class="op" id="6436255">:=</span>&nbsp;<span class="ident" id="6436258">binary</span><span class="op" id="6436264">.</span><span class="ident" id="6436265">Read</span><span class="op" id="6436269">(</span><span class="ident" id="6436270">b</span><span class="op" id="6436271">,</span>&nbsp;<span class="ident" id="6436273">bo</span><span class="op" id="6436275">,</span>&nbsp;<span class="op" id="6436277">&amp;</span><span class="ident" id="6436278">seg64</span><span class="op" id="6436283">)</span><span class="op" id="6436284">;</span>&nbsp;<span class="ident" id="6436286">err</span>&nbsp;<span class="op" id="6436290">!=</span>&nbsp;<span class="ident" id="6436293">nil</span>&nbsp;<span class="op" id="6436297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436303">return</span>&nbsp;<span class="ident" id="6436310">nil</span><span class="op" id="6436313">,</span>&nbsp;<span class="ident" id="6436315">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6436322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436327">s</span>&nbsp;<span class="op" id="6436329">=</span>&nbsp;<span class="builtinfunc" id="6436331">new</span><span class="op" id="6436334">(</span><span class="ident" id="6436335">Segment</span><span class="op" id="6436342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436347">s</span><span class="op" id="6436348">.</span><span class="ident" id="6436349">LoadBytes</span>&nbsp;<span class="op" id="6436359">=</span>&nbsp;<span class="ident" id="6436361">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436371">s</span><span class="op" id="6436372">.</span><span class="ident" id="6436373">Cmd</span>&nbsp;<span class="op" id="6436377">=</span>&nbsp;<span class="ident" id="6436379">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436386">s</span><span class="op" id="6436387">.</span><span class="ident" id="6436388">Len</span>&nbsp;<span class="op" id="6436392">=</span>&nbsp;<span class="ident" id="6436394">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436401">s</span><span class="op" id="6436402">.</span><span class="ident" id="6436403">Name</span>&nbsp;<span class="op" id="6436408">=</span>&nbsp;<span class="ident" id="6436410">cstring</span><span class="op" id="6436417">(</span><span class="ident" id="6436418">seg64</span><span class="op" id="6436423">.</span><span class="ident" id="6436424">Name</span><span class="op" id="6436428">[</span><span class="num" id="6436429">0</span><span class="op" id="6436430">:</span><span class="op" id="6436431">]</span><span class="op" id="6436432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436437">s</span><span class="op" id="6436438">.</span><span class="ident" id="6436439">Addr</span>&nbsp;<span class="op" id="6436444">=</span>&nbsp;<span class="ident" id="6436446">seg64</span><span class="op" id="6436451">.</span><span class="ident" id="6436452">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436460">s</span><span class="op" id="6436461">.</span><span class="ident" id="6436462">Memsz</span>&nbsp;<span class="op" id="6436468">=</span>&nbsp;<span class="ident" id="6436470">seg64</span><span class="op" id="6436475">.</span><span class="ident" id="6436476">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436485">s</span><span class="op" id="6436486">.</span><span class="ident" id="6436487">Offset</span>&nbsp;<span class="op" id="6436494">=</span>&nbsp;<span class="ident" id="6436496">seg64</span><span class="op" id="6436501">.</span><span class="ident" id="6436502">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436512">s</span><span class="op" id="6436513">.</span><span class="ident" id="6436514">Filesz</span>&nbsp;<span class="op" id="6436521">=</span>&nbsp;<span class="ident" id="6436523">seg64</span><span class="op" id="6436528">.</span><span class="ident" id="6436529">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436539">s</span><span class="op" id="6436540">.</span><span class="ident" id="6436541">Maxprot</span>&nbsp;<span class="op" id="6436549">=</span>&nbsp;<span class="ident" id="6436551">seg64</span><span class="op" id="6436556">.</span><span class="ident" id="6436557">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436568">s</span><span class="op" id="6436569">.</span><span class="ident" id="6436570">Prot</span>&nbsp;<span class="op" id="6436575">=</span>&nbsp;<span class="ident" id="6436577">seg64</span><span class="op" id="6436582">.</span><span class="ident" id="6436583">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436591">s</span><span class="op" id="6436592">.</span><span class="ident" id="6436593">Nsect</span>&nbsp;<span class="op" id="6436599">=</span>&nbsp;<span class="ident" id="6436601">seg64</span><span class="op" id="6436606">.</span><span class="ident" id="6436607">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436616">s</span><span class="op" id="6436617">.</span><span class="ident" id="6436618">Flag</span>&nbsp;<span class="op" id="6436623">=</span>&nbsp;<span class="ident" id="6436625">seg64</span><span class="op" id="6436630">.</span><span class="ident" id="6436631">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436639">f</span><span class="op" id="6436640">.</span><span class="ident" id="6436641">Loads</span><span class="op" id="6436646">[</span><span class="ident" id="6436647">i</span><span class="op" id="6436648">]</span>&nbsp;<span class="op" id="6436650">=</span>&nbsp;<span class="ident" id="6436652">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436657">for</span>&nbsp;<span class="ident" id="6436661">i</span>&nbsp;<span class="op" id="6436663">:=</span>&nbsp;<span class="num" id="6436666">0</span><span class="op" id="6436667">;</span>&nbsp;<span class="ident" id="6436669">i</span>&nbsp;<span class="op" id="6436671">&lt;</span>&nbsp;<span class="builtintype" id="6436673">int</span><span class="op" id="6436676">(</span><span class="ident" id="6436677">s</span><span class="op" id="6436678">.</span><span class="ident" id="6436679">Nsect</span><span class="op" id="6436684">)</span><span class="op" id="6436685">;</span>&nbsp;<span class="ident" id="6436687">i</span><span class="op" id="6436688">++</span>&nbsp;<span class="op" id="6436691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436697">var</span>&nbsp;<span class="ident" id="6436701">sh64</span>&nbsp;<span class="ident" id="6436706">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436720">if</span>&nbsp;<span class="ident" id="6436723">err</span>&nbsp;<span class="op" id="6436727">:=</span>&nbsp;<span class="ident" id="6436730">binary</span><span class="op" id="6436736">.</span><span class="ident" id="6436737">Read</span><span class="op" id="6436741">(</span><span class="ident" id="6436742">b</span><span class="op" id="6436743">,</span>&nbsp;<span class="ident" id="6436745">bo</span><span class="op" id="6436747">,</span>&nbsp;<span class="op" id="6436749">&amp;</span><span class="ident" id="6436750">sh64</span><span class="op" id="6436754">)</span><span class="op" id="6436755">;</span>&nbsp;<span class="ident" id="6436757">err</span>&nbsp;<span class="op" id="6436761">!=</span>&nbsp;<span class="ident" id="6436764">nil</span>&nbsp;<span class="op" id="6436768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436775">return</span>&nbsp;<span class="ident" id="6436782">nil</span><span class="op" id="6436785">,</span>&nbsp;<span class="ident" id="6436787">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6436795">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436801">sh</span>&nbsp;<span class="op" id="6436804">:=</span>&nbsp;<span class="builtinfunc" id="6436807">new</span><span class="op" id="6436810">(</span><span class="ident" id="6436811">Section</span><span class="op" id="6436818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436824">sh</span><span class="op" id="6436826">.</span><span class="ident" id="6436827">Name</span>&nbsp;<span class="op" id="6436832">=</span>&nbsp;<span class="ident" id="6436834">cstring</span><span class="op" id="6436841">(</span><span class="ident" id="6436842">sh64</span><span class="op" id="6436846">.</span><span class="ident" id="6436847">Name</span><span class="op" id="6436851">[</span><span class="num" id="6436852">0</span><span class="op" id="6436853">:</span><span class="op" id="6436854">]</span><span class="op" id="6436855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436861">sh</span><span class="op" id="6436863">.</span><span class="ident" id="6436864">Seg</span>&nbsp;<span class="op" id="6436868">=</span>&nbsp;<span class="ident" id="6436870">cstring</span><span class="op" id="6436877">(</span><span class="ident" id="6436878">sh64</span><span class="op" id="6436882">.</span><span class="ident" id="6436883">Seg</span><span class="op" id="6436886">[</span><span class="num" id="6436887">0</span><span class="op" id="6436888">:</span><span class="op" id="6436889">]</span><span class="op" id="6436890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436896">sh</span><span class="op" id="6436898">.</span><span class="ident" id="6436899">Addr</span>&nbsp;<span class="op" id="6436904">=</span>&nbsp;<span class="ident" id="6436906">sh64</span><span class="op" id="6436910">.</span><span class="ident" id="6436911">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436920">sh</span><span class="op" id="6436922">.</span><span class="ident" id="6436923">Size</span>&nbsp;<span class="op" id="6436928">=</span>&nbsp;<span class="ident" id="6436930">sh64</span><span class="op" id="6436934">.</span><span class="ident" id="6436935">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436944">sh</span><span class="op" id="6436946">.</span><span class="ident" id="6436947">Offset</span>&nbsp;<span class="op" id="6436954">=</span>&nbsp;<span class="ident" id="6436956">sh64</span><span class="op" id="6436960">.</span><span class="ident" id="6436961">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436972">sh</span><span class="op" id="6436974">.</span><span class="ident" id="6436975">Align</span>&nbsp;<span class="op" id="6436981">=</span>&nbsp;<span class="ident" id="6436983">sh64</span><span class="op" id="6436987">.</span><span class="ident" id="6436988">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436998">sh</span><span class="op" id="6437000">.</span><span class="ident" id="6437001">Reloff</span>&nbsp;<span class="op" id="6437008">=</span>&nbsp;<span class="ident" id="6437010">sh64</span><span class="op" id="6437014">.</span><span class="ident" id="6437015">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437026">sh</span><span class="op" id="6437028">.</span><span class="ident" id="6437029">Nreloc</span>&nbsp;<span class="op" id="6437036">=</span>&nbsp;<span class="ident" id="6437038">sh64</span><span class="op" id="6437042">.</span><span class="ident" id="6437043">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437054">sh</span><span class="op" id="6437056">.</span><span class="ident" id="6437057">Flags</span>&nbsp;<span class="op" id="6437063">=</span>&nbsp;<span class="ident" id="6437065">sh64</span><span class="op" id="6437069">.</span><span class="ident" id="6437070">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437080">f</span><span class="op" id="6437081">.</span><span class="ident" id="6437082">pushSection</span><span class="op" id="6437093">(</span><span class="ident" id="6437094">sh</span><span class="op" id="6437096">,</span>&nbsp;<span class="ident" id="6437098">r</span><span class="op" id="6437099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437112">if</span>&nbsp;<span class="ident" id="6437115">s</span>&nbsp;<span class="op" id="6437117">!=</span>&nbsp;<span class="ident" id="6437120">nil</span>&nbsp;<span class="op" id="6437124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437129">s</span><span class="op" id="6437130">.</span><span class="ident" id="6437131">sr</span>&nbsp;<span class="op" id="6437134">=</span>&nbsp;<span class="ident" id="6437136">io</span><span class="op" id="6437138">.</span><span class="ident" id="6437139">NewSectionReader</span><span class="op" id="6437155">(</span><span class="ident" id="6437156">r</span><span class="op" id="6437157">,</span>&nbsp;<span class="ident" id="6437159">int64</span><span class="op" id="6437164">(</span><span class="ident" id="6437165">s</span><span class="op" id="6437166">.</span><span class="ident" id="6437167">Offset</span><span class="op" id="6437173">)</span><span class="op" id="6437174">,</span>&nbsp;<span class="ident" id="6437176">int64</span><span class="op" id="6437181">(</span><span class="ident" id="6437182">s</span><span class="op" id="6437183">.</span><span class="ident" id="6437184">Filesz</span><span class="op" id="6437190">)</span><span class="op" id="6437191">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437196">s</span><span class="op" id="6437197">.</span><span class="ident" id="6437198">ReaderAt</span>&nbsp;<span class="op" id="6437207">=</span>&nbsp;<span class="ident" id="6437209">s</span><span class="op" id="6437210">.</span><span class="ident" id="6437211">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437222">return</span>&nbsp;<span class="ident" id="6437229">f</span><span class="op" id="6437230">,</span>&nbsp;<span class="ident" id="6437232">nil</span><br>
<span class="lineno"></span><span class="op" id="6437236">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6437239">func</span>&nbsp;<span class="op" id="6437244">(</span><span class="ident" id="6437245">f</span>&nbsp;<span class="op" id="6437247">*</span><span class="ident" id="6437248">File</span><span class="op" id="6437252">)</span>&nbsp;<span class="ident" id="6437254">parseSymtab</span><span class="op" id="6437265">(</span><span class="ident" id="6437266">symdat</span><span class="op" id="6437272">,</span>&nbsp;<span class="ident" id="6437274">strtab</span><span class="op" id="6437280">,</span>&nbsp;<span class="ident" id="6437282">cmddat</span>&nbsp;<span class="op" id="6437289">[</span><span class="op" id="6437290">]</span><span class="builtintype" id="6437291">byte</span><span class="op" id="6437295">,</span>&nbsp;<span class="ident" id="6437297">hdr</span>&nbsp;<span class="op" id="6437301">*</span><span class="ident" id="6437302">SymtabCmd</span><span class="op" id="6437311">,</span>&nbsp;<span class="ident" id="6437313">offset</span>&nbsp;<span class="ident" id="6437320">int64</span><span class="op" id="6437325">)</span>&nbsp;<span class="op" id="6437327">(</span><span class="op" id="6437328">*</span><span class="ident" id="6437329">Symtab</span><span class="op" id="6437335">,</span>&nbsp;<span class="builtintype" id="6437337">error</span><span class="op" id="6437342">)</span>&nbsp;<span class="op" id="6437344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437347">bo</span>&nbsp;<span class="op" id="6437350">:=</span>&nbsp;<span class="ident" id="6437353">f</span><span class="op" id="6437354">.</span><span class="ident" id="6437355">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437366">symtab</span>&nbsp;<span class="op" id="6437373">:=</span>&nbsp;<span class="builtinfunc" id="6437376">make</span><span class="op" id="6437380">(</span><span class="op" id="6437381">[</span><span class="op" id="6437382">]</span><span class="ident" id="6437383">Symbol</span><span class="op" id="6437389">,</span>&nbsp;<span class="ident" id="6437391">hdr</span><span class="op" id="6437394">.</span><span class="ident" id="6437395">Nsyms</span><span class="op" id="6437400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437403">b</span>&nbsp;<span class="op" id="6437405">:=</span>&nbsp;<span class="ident" id="6437408">bytes</span><span class="op" id="6437413">.</span><span class="ident" id="6437414">NewReader</span><span class="op" id="6437423">(</span><span class="ident" id="6437424">symdat</span><span class="op" id="6437430">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437433">for</span>&nbsp;<span class="ident" id="6437437">i</span>&nbsp;<span class="op" id="6437439">:=</span>&nbsp;<span class="keyword" id="6437442">range</span>&nbsp;<span class="ident" id="6437448">symtab</span>&nbsp;<span class="op" id="6437455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437459">var</span>&nbsp;<span class="ident" id="6437463">n</span>&nbsp;<span class="ident" id="6437465">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437475">if</span>&nbsp;<span class="ident" id="6437478">f</span><span class="op" id="6437479">.</span><span class="ident" id="6437480">Magic</span>&nbsp;<span class="op" id="6437486">==</span>&nbsp;<span class="ident" id="6437489">Magic64</span>&nbsp;<span class="op" id="6437497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437502">if</span>&nbsp;<span class="ident" id="6437505">err</span>&nbsp;<span class="op" id="6437509">:=</span>&nbsp;<span class="ident" id="6437512">binary</span><span class="op" id="6437518">.</span><span class="ident" id="6437519">Read</span><span class="op" id="6437523">(</span><span class="ident" id="6437524">b</span><span class="op" id="6437525">,</span>&nbsp;<span class="ident" id="6437527">bo</span><span class="op" id="6437529">,</span>&nbsp;<span class="op" id="6437531">&amp;</span><span class="ident" id="6437532">n</span><span class="op" id="6437533">)</span><span class="op" id="6437534">;</span>&nbsp;<span class="ident" id="6437536">err</span>&nbsp;<span class="op" id="6437540">!=</span>&nbsp;<span class="ident" id="6437543">nil</span>&nbsp;<span class="op" id="6437547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437553">return</span>&nbsp;<span class="ident" id="6437560">nil</span><span class="op" id="6437563">,</span>&nbsp;<span class="ident" id="6437565">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437576">}</span>&nbsp;<span class="keyword" id="6437578">else</span>&nbsp;<span class="op" id="6437583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437588">var</span>&nbsp;<span class="ident" id="6437592">n32</span>&nbsp;<span class="ident" id="6437596">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437607">if</span>&nbsp;<span class="ident" id="6437610">err</span>&nbsp;<span class="op" id="6437614">:=</span>&nbsp;<span class="ident" id="6437617">binary</span><span class="op" id="6437623">.</span><span class="ident" id="6437624">Read</span><span class="op" id="6437628">(</span><span class="ident" id="6437629">b</span><span class="op" id="6437630">,</span>&nbsp;<span class="ident" id="6437632">bo</span><span class="op" id="6437634">,</span>&nbsp;<span class="op" id="6437636">&amp;</span><span class="ident" id="6437637">n32</span><span class="op" id="6437640">)</span><span class="op" id="6437641">;</span>&nbsp;<span class="ident" id="6437643">err</span>&nbsp;<span class="op" id="6437647">!=</span>&nbsp;<span class="ident" id="6437650">nil</span>&nbsp;<span class="op" id="6437654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437660">return</span>&nbsp;<span class="ident" id="6437667">nil</span><span class="op" id="6437670">,</span>&nbsp;<span class="ident" id="6437672">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437684">n</span><span class="op" id="6437685">.</span><span class="ident" id="6437686">Name</span>&nbsp;<span class="op" id="6437691">=</span>&nbsp;<span class="ident" id="6437693">n32</span><span class="op" id="6437696">.</span><span class="ident" id="6437697">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437705">n</span><span class="op" id="6437706">.</span><span class="ident" id="6437707">Type</span>&nbsp;<span class="op" id="6437712">=</span>&nbsp;<span class="ident" id="6437714">n32</span><span class="op" id="6437717">.</span><span class="ident" id="6437718">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437726">n</span><span class="op" id="6437727">.</span><span class="ident" id="6437728">Sect</span>&nbsp;<span class="op" id="6437733">=</span>&nbsp;<span class="ident" id="6437735">n32</span><span class="op" id="6437738">.</span><span class="ident" id="6437739">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437747">n</span><span class="op" id="6437748">.</span><span class="ident" id="6437749">Desc</span>&nbsp;<span class="op" id="6437754">=</span>&nbsp;<span class="ident" id="6437756">n32</span><span class="op" id="6437759">.</span><span class="ident" id="6437760">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437768">n</span><span class="op" id="6437769">.</span><span class="ident" id="6437770">Value</span>&nbsp;<span class="op" id="6437776">=</span>&nbsp;<span class="ident" id="6437778">uint64</span><span class="op" id="6437784">(</span><span class="ident" id="6437785">n32</span><span class="op" id="6437788">.</span><span class="ident" id="6437789">Value</span><span class="op" id="6437794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437802">sym</span>&nbsp;<span class="op" id="6437806">:=</span>&nbsp;<span class="op" id="6437809">&amp;</span><span class="ident" id="6437810">symtab</span><span class="op" id="6437816">[</span><span class="ident" id="6437817">i</span><span class="op" id="6437818">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437822">if</span>&nbsp;<span class="ident" id="6437825">n</span><span class="op" id="6437826">.</span><span class="ident" id="6437827">Name</span>&nbsp;<span class="op" id="6437832">&gt;=</span>&nbsp;<span class="builtintype" id="6437835">uint32</span><span class="op" id="6437841">(</span><span class="builtinfunc" id="6437842">len</span><span class="op" id="6437845">(</span><span class="ident" id="6437846">strtab</span><span class="op" id="6437852">)</span><span class="op" id="6437853">)</span>&nbsp;<span class="op" id="6437855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437860">return</span>&nbsp;<span class="ident" id="6437867">nil</span><span class="op" id="6437870">,</span>&nbsp;<span class="op" id="6437872">&amp;</span><span class="ident" id="6437873">FormatError</span><span class="op" id="6437884">{</span><span class="ident" id="6437885">offset</span><span class="op" id="6437891">,</span>&nbsp;<span class="string" id="6437893">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6437923">,</span>&nbsp;<span class="ident" id="6437925">n</span><span class="op" id="6437926">.</span><span class="ident" id="6437927">Name</span><span class="op" id="6437931">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437939">sym</span><span class="op" id="6437942">.</span><span class="ident" id="6437943">Name</span>&nbsp;<span class="op" id="6437948">=</span>&nbsp;<span class="ident" id="6437950">cstring</span><span class="op" id="6437957">(</span><span class="ident" id="6437958">strtab</span><span class="op" id="6437964">[</span><span class="ident" id="6437965">n</span><span class="op" id="6437966">.</span><span class="ident" id="6437967">Name</span><span class="op" id="6437971">:</span><span class="op" id="6437972">]</span><span class="op" id="6437973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437977">sym</span><span class="op" id="6437980">.</span><span class="ident" id="6437981">Type</span>&nbsp;<span class="op" id="6437986">=</span>&nbsp;<span class="ident" id="6437988">n</span><span class="op" id="6437989">.</span><span class="ident" id="6437990">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437997">sym</span><span class="op" id="6438000">.</span><span class="ident" id="6438001">Sect</span>&nbsp;<span class="op" id="6438006">=</span>&nbsp;<span class="ident" id="6438008">n</span><span class="op" id="6438009">.</span><span class="ident" id="6438010">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438017">sym</span><span class="op" id="6438020">.</span><span class="ident" id="6438021">Desc</span>&nbsp;<span class="op" id="6438026">=</span>&nbsp;<span class="ident" id="6438028">n</span><span class="op" id="6438029">.</span><span class="ident" id="6438030">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438037">sym</span><span class="op" id="6438040">.</span><span class="ident" id="6438041">Value</span>&nbsp;<span class="op" id="6438047">=</span>&nbsp;<span class="ident" id="6438049">n</span><span class="op" id="6438050">.</span><span class="ident" id="6438051">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438061">st</span>&nbsp;<span class="op" id="6438064">:=</span>&nbsp;<span class="builtinfunc" id="6438067">new</span><span class="op" id="6438070">(</span><span class="ident" id="6438071">Symtab</span><span class="op" id="6438077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438080">st</span><span class="op" id="6438082">.</span><span class="ident" id="6438083">LoadBytes</span>&nbsp;<span class="op" id="6438093">=</span>&nbsp;<span class="ident" id="6438095">LoadBytes</span><span class="op" id="6438104">(</span><span class="ident" id="6438105">cmddat</span><span class="op" id="6438111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438114">st</span><span class="op" id="6438116">.</span><span class="ident" id="6438117">Syms</span>&nbsp;<span class="op" id="6438122">=</span>&nbsp;<span class="ident" id="6438124">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438132">return</span>&nbsp;<span class="ident" id="6438139">st</span><span class="op" id="6438141">,</span>&nbsp;<span class="ident" id="6438143">nil</span><br>
<span class="lineno"></span><span class="op" id="6438147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438150">func</span>&nbsp;<span class="op" id="6438155">(</span><span class="ident" id="6438156">f</span>&nbsp;<span class="op" id="6438158">*</span><span class="ident" id="6438159">File</span><span class="op" id="6438163">)</span>&nbsp;<span class="ident" id="6438165">pushSection</span><span class="op" id="6438176">(</span><span class="ident" id="6438177">sh</span>&nbsp;<span class="op" id="6438180">*</span><span class="ident" id="6438181">Section</span><span class="op" id="6438188">,</span>&nbsp;<span class="ident" id="6438190">r</span>&nbsp;<span class="ident" id="6438192">io</span><span class="op" id="6438194">.</span><span class="ident" id="6438195">ReaderAt</span><span class="op" id="6438203">)</span>&nbsp;<span class="op" id="6438205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438208">f</span><span class="op" id="6438209">.</span><span class="ident" id="6438210">Sections</span>&nbsp;<span class="op" id="6438219">=</span>&nbsp;<span class="builtinfunc" id="6438221">append</span><span class="op" id="6438227">(</span><span class="ident" id="6438228">f</span><span class="op" id="6438229">.</span><span class="ident" id="6438230">Sections</span><span class="op" id="6438238">,</span>&nbsp;<span class="ident" id="6438240">sh</span><span class="op" id="6438242">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438245">sh</span><span class="op" id="6438247">.</span><span class="ident" id="6438248">sr</span>&nbsp;<span class="op" id="6438251">=</span>&nbsp;<span class="ident" id="6438253">io</span><span class="op" id="6438255">.</span><span class="ident" id="6438256">NewSectionReader</span><span class="op" id="6438272">(</span><span class="ident" id="6438273">r</span><span class="op" id="6438274">,</span>&nbsp;<span class="ident" id="6438276">int64</span><span class="op" id="6438281">(</span><span class="ident" id="6438282">sh</span><span class="op" id="6438284">.</span><span class="ident" id="6438285">Offset</span><span class="op" id="6438291">)</span><span class="op" id="6438292">,</span>&nbsp;<span class="ident" id="6438294">int64</span><span class="op" id="6438299">(</span><span class="ident" id="6438300">sh</span><span class="op" id="6438302">.</span><span class="ident" id="6438303">Size</span><span class="op" id="6438307">)</span><span class="op" id="6438308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438311">sh</span><span class="op" id="6438313">.</span><span class="ident" id="6438314">ReaderAt</span>&nbsp;<span class="op" id="6438323">=</span>&nbsp;<span class="ident" id="6438325">sh</span><span class="op" id="6438327">.</span><span class="ident" id="6438328">sr</span><br>
<span class="lineno"></span><span class="op" id="6438331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438334">func</span>&nbsp;<span class="ident" id="6438339">cstring</span><span class="op" id="6438346">(</span><span class="ident" id="6438347">b</span>&nbsp;<span class="op" id="6438349">[</span><span class="op" id="6438350">]</span><span class="builtintype" id="6438351">byte</span><span class="op" id="6438355">)</span>&nbsp;<span class="builtintype" id="6438357">string</span>&nbsp;<span class="op" id="6438364">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438367">var</span>&nbsp;<span class="ident" id="6438371">i</span>&nbsp;<span class="builtintype" id="6438373">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438378">for</span>&nbsp;<span class="ident" id="6438382">i</span>&nbsp;<span class="op" id="6438384">=</span>&nbsp;<span class="num" id="6438386">0</span><span class="op" id="6438387">;</span>&nbsp;<span class="ident" id="6438389">i</span>&nbsp;<span class="op" id="6438391">&lt;</span>&nbsp;<span class="builtinfunc" id="6438393">len</span><span class="op" id="6438396">(</span><span class="ident" id="6438397">b</span><span class="op" id="6438398">)</span>&nbsp;<span class="op" id="6438400">&amp;&amp;</span>&nbsp;<span class="ident" id="6438403">b</span><span class="op" id="6438404">[</span><span class="ident" id="6438405">i</span><span class="op" id="6438406">]</span>&nbsp;<span class="op" id="6438408">!=</span>&nbsp;<span class="num" id="6438411">0</span><span class="op" id="6438412">;</span>&nbsp;<span class="ident" id="6438414">i</span><span class="op" id="6438415">++</span>&nbsp;<span class="op" id="6438418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438424">return</span>&nbsp;<span class="builtintype" id="6438431">string</span><span class="op" id="6438437">(</span><span class="ident" id="6438438">b</span><span class="op" id="6438439">[</span><span class="num" id="6438440">0</span><span class="op" id="6438441">:</span><span class="ident" id="6438442">i</span><span class="op" id="6438443">]</span><span class="op" id="6438444">)</span><br>
<span class="lineno"></span><span class="op" id="6438446">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6438449">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6438541">func</span>&nbsp;<span class="op" id="6438546">(</span><span class="ident" id="6438547">f</span>&nbsp;<span class="op" id="6438549">*</span><span class="ident" id="6438550">File</span><span class="op" id="6438554">)</span>&nbsp;<span class="ident" id="6438556">Segment</span><span class="op" id="6438563">(</span><span class="ident" id="6438564">name</span>&nbsp;<span class="builtintype" id="6438569">string</span><span class="op" id="6438575">)</span>&nbsp;<span class="op" id="6438577">*</span><span class="ident" id="6438578">Segment</span>&nbsp;<span class="op" id="6438586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438589">for</span>&nbsp;<span class="ident" id="6438593">_</span><span class="op" id="6438594">,</span>&nbsp;<span class="ident" id="6438596">l</span>&nbsp;<span class="op" id="6438598">:=</span>&nbsp;<span class="keyword" id="6438601">range</span>&nbsp;<span class="ident" id="6438607">f</span><span class="op" id="6438608">.</span><span class="ident" id="6438609">Loads</span>&nbsp;<span class="op" id="6438615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438619">if</span>&nbsp;<span class="ident" id="6438622">s</span><span class="op" id="6438623">,</span>&nbsp;<span class="ident" id="6438625">ok</span>&nbsp;<span class="op" id="6438628">:=</span>&nbsp;<span class="ident" id="6438631">l</span><span class="op" id="6438632">.</span><span class="op" id="6438633">(</span><span class="op" id="6438634">*</span><span class="ident" id="6438635">Segment</span><span class="op" id="6438642">)</span><span class="op" id="6438643">;</span>&nbsp;<span class="ident" id="6438645">ok</span>&nbsp;<span class="op" id="6438648">&amp;&amp;</span>&nbsp;<span class="ident" id="6438651">s</span><span class="op" id="6438652">.</span><span class="ident" id="6438653">Name</span>&nbsp;<span class="op" id="6438658">==</span>&nbsp;<span class="ident" id="6438661">name</span>&nbsp;<span class="op" id="6438666">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438671">return</span>&nbsp;<span class="ident" id="6438678">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438688">return</span>&nbsp;<span class="ident" id="6438695">nil</span><br>
<span class="lineno"></span><span class="op" id="6438699">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6438702">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6438778">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6438797">func</span>&nbsp;<span class="op" id="6438802">(</span><span class="ident" id="6438803">f</span>&nbsp;<span class="op" id="6438805">*</span><span class="ident" id="6438806">File</span><span class="op" id="6438810">)</span>&nbsp;<span class="ident" id="6438812">Section</span><span class="op" id="6438819">(</span><span class="ident" id="6438820">name</span>&nbsp;<span class="builtintype" id="6438825">string</span><span class="op" id="6438831">)</span>&nbsp;<span class="op" id="6438833">*</span><span class="ident" id="6438834">Section</span>&nbsp;<span class="op" id="6438842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438845">for</span>&nbsp;<span class="ident" id="6438849">_</span><span class="op" id="6438850">,</span>&nbsp;<span class="ident" id="6438852">s</span>&nbsp;<span class="op" id="6438854">:=</span>&nbsp;<span class="keyword" id="6438857">range</span>&nbsp;<span class="ident" id="6438863">f</span><span class="op" id="6438864">.</span><span class="ident" id="6438865">Sections</span>&nbsp;<span class="op" id="6438874">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438878">if</span>&nbsp;<span class="ident" id="6438881">s</span><span class="op" id="6438882">.</span><span class="ident" id="6438883">Name</span>&nbsp;<span class="op" id="6438888">==</span>&nbsp;<span class="ident" id="6438891">name</span>&nbsp;<span class="op" id="6438896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438901">return</span>&nbsp;<span class="ident" id="6438908">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438918">return</span>&nbsp;<span class="ident" id="6438925">nil</span><br>
<span class="lineno">470</span><span class="op" id="6438929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6438932">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6438998">func</span>&nbsp;<span class="op" id="6439003">(</span><span class="ident" id="6439004">f</span>&nbsp;<span class="op" id="6439006">*</span><span class="ident" id="6439007">File</span><span class="op" id="6439011">)</span>&nbsp;<span class="ident" id="6439013">DWARF</span><span class="op" id="6439018">(</span><span class="op" id="6439019">)</span>&nbsp;<span class="op" id="6439021">(</span><span class="op" id="6439022">*</span><span class="ident" id="6439023">dwarf</span><span class="op" id="6439028">.</span><span class="ident" id="6439029">Data</span><span class="op" id="6439033">,</span>&nbsp;<span class="builtintype" id="6439035">error</span><span class="op" id="6439040">)</span>&nbsp;<span class="op" id="6439042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439045">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439096">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439151">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439210">var</span>&nbsp;<span class="ident" id="6439214">names</span>&nbsp;<span class="op" id="6439220">=</span>&nbsp;<span class="op" id="6439222">[</span><span class="op" id="6439223">...</span><span class="op" id="6439226">]</span><span class="builtintype" id="6439227">string</span><span class="op" id="6439233">{</span><span class="string" id="6439234">&#34;abbrev&#34;</span><span class="op" id="6439242">,</span>&nbsp;<span class="string" id="6439244">&#34;info&#34;</span><span class="op" id="6439250">,</span>&nbsp;<span class="string" id="6439252">&#34;str&#34;</span><span class="op" id="6439257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439260">var</span>&nbsp;<span class="ident" id="6439264">dat</span>&nbsp;<span class="op" id="6439268">[</span><span class="builtinfunc" id="6439269">len</span><span class="op" id="6439272">(</span><span class="ident" id="6439273">names</span><span class="op" id="6439278">)</span><span class="op" id="6439279">]</span><span class="op" id="6439280">[</span><span class="op" id="6439281">]</span><span class="builtintype" id="6439282">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439288">for</span>&nbsp;<span class="ident" id="6439292">i</span><span class="op" id="6439293">,</span>&nbsp;<span class="ident" id="6439295">name</span>&nbsp;<span class="op" id="6439300">:=</span>&nbsp;<span class="keyword" id="6439303">range</span>&nbsp;<span class="ident" id="6439309">names</span>&nbsp;<span class="op" id="6439315">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439319">name</span>&nbsp;<span class="op" id="6439324">=</span>&nbsp;<span class="string" id="6439326">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6439337">+</span>&nbsp;<span class="ident" id="6439339">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439346">s</span>&nbsp;<span class="op" id="6439348">:=</span>&nbsp;<span class="ident" id="6439351">f</span><span class="op" id="6439352">.</span><span class="ident" id="6439353">Section</span><span class="op" id="6439360">(</span><span class="ident" id="6439361">name</span><span class="op" id="6439365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439369">if</span>&nbsp;<span class="ident" id="6439372">s</span>&nbsp;<span class="op" id="6439374">==</span>&nbsp;<span class="ident" id="6439377">nil</span>&nbsp;<span class="op" id="6439381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439386">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439397">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439401">b</span><span class="op" id="6439402">,</span>&nbsp;<span class="ident" id="6439404">err</span>&nbsp;<span class="op" id="6439408">:=</span>&nbsp;<span class="ident" id="6439411">s</span><span class="op" id="6439412">.</span><span class="ident" id="6439413">Data</span><span class="op" id="6439417">(</span><span class="op" id="6439418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439422">if</span>&nbsp;<span class="ident" id="6439425">err</span>&nbsp;<span class="op" id="6439429">!=</span>&nbsp;<span class="ident" id="6439432">nil</span>&nbsp;<span class="op" id="6439436">&amp;&amp;</span>&nbsp;<span class="ident" id="6439439">uint64</span><span class="op" id="6439445">(</span><span class="builtinfunc" id="6439446">len</span><span class="op" id="6439449">(</span><span class="ident" id="6439450">b</span><span class="op" id="6439451">)</span><span class="op" id="6439452">)</span>&nbsp;<span class="op" id="6439454">&lt;</span>&nbsp;<span class="ident" id="6439456">s</span><span class="op" id="6439457">.</span><span class="ident" id="6439458">Size</span>&nbsp;<span class="op" id="6439463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439468">return</span>&nbsp;<span class="ident" id="6439475">nil</span><span class="op" id="6439478">,</span>&nbsp;<span class="ident" id="6439480">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439490">dat</span><span class="op" id="6439493">[</span><span class="ident" id="6439494">i</span><span class="op" id="6439495">]</span>&nbsp;<span class="op" id="6439497">=</span>&nbsp;<span class="ident" id="6439499">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439506">abbrev</span><span class="op" id="6439512">,</span>&nbsp;<span class="ident" id="6439514">info</span><span class="op" id="6439518">,</span>&nbsp;<span class="ident" id="6439520">str</span>&nbsp;<span class="op" id="6439524">:=</span>&nbsp;<span class="ident" id="6439527">dat</span><span class="op" id="6439530">[</span><span class="num" id="6439531">0</span><span class="op" id="6439532">]</span><span class="op" id="6439533">,</span>&nbsp;<span class="ident" id="6439535">dat</span><span class="op" id="6439538">[</span><span class="num" id="6439539">1</span><span class="op" id="6439540">]</span><span class="op" id="6439541">,</span>&nbsp;<span class="ident" id="6439543">dat</span><span class="op" id="6439546">[</span><span class="num" id="6439547">2</span><span class="op" id="6439548">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439551">return</span>&nbsp;<span class="ident" id="6439558">dwarf</span><span class="op" id="6439563">.</span><span class="ident" id="6439564">New</span><span class="op" id="6439567">(</span><span class="ident" id="6439568">abbrev</span><span class="op" id="6439574">,</span>&nbsp;<span class="ident" id="6439576">nil</span><span class="op" id="6439579">,</span>&nbsp;<span class="ident" id="6439581">nil</span><span class="op" id="6439584">,</span>&nbsp;<span class="ident" id="6439586">info</span><span class="op" id="6439590">,</span>&nbsp;<span class="ident" id="6439592">nil</span><span class="op" id="6439595">,</span>&nbsp;<span class="ident" id="6439597">nil</span><span class="op" id="6439600">,</span>&nbsp;<span class="ident" id="6439602">nil</span><span class="op" id="6439605">,</span>&nbsp;<span class="ident" id="6439607">str</span><span class="op" id="6439610">)</span><br>
<span class="lineno"></span><span class="op" id="6439612">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6439615">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6439667">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6439722">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6439776">func</span>&nbsp;<span class="op" id="6439781">(</span><span class="ident" id="6439782">f</span>&nbsp;<span class="op" id="6439784">*</span><span class="ident" id="6439785">File</span><span class="op" id="6439789">)</span>&nbsp;<span class="ident" id="6439791">ImportedSymbols</span><span class="op" id="6439806">(</span><span class="op" id="6439807">)</span>&nbsp;<span class="op" id="6439809">(</span><span class="op" id="6439810">[</span><span class="op" id="6439811">]</span><span class="builtintype" id="6439812">string</span><span class="op" id="6439818">,</span>&nbsp;<span class="builtintype" id="6439820">error</span><span class="op" id="6439825">)</span>&nbsp;<span class="op" id="6439827">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439830">if</span>&nbsp;<span class="ident" id="6439833">f</span><span class="op" id="6439834">.</span><span class="ident" id="6439835">Dysymtab</span>&nbsp;<span class="op" id="6439844">==</span>&nbsp;<span class="ident" id="6439847">nil</span>&nbsp;<span class="op" id="6439851">||</span>&nbsp;<span class="ident" id="6439854">f</span><span class="op" id="6439855">.</span><span class="ident" id="6439856">Symtab</span>&nbsp;<span class="op" id="6439863">==</span>&nbsp;<span class="ident" id="6439866">nil</span>&nbsp;<span class="op" id="6439870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439874">return</span>&nbsp;<span class="ident" id="6439881">nil</span><span class="op" id="6439884">,</span>&nbsp;<span class="op" id="6439886">&amp;</span><span class="ident" id="6439887">FormatError</span><span class="op" id="6439898">{</span><span class="num" id="6439899">0</span><span class="op" id="6439900">,</span>&nbsp;<span class="string" id="6439902">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6439924">,</span>&nbsp;<span class="ident" id="6439926">nil</span><span class="op" id="6439929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439936">st</span>&nbsp;<span class="op" id="6439939">:=</span>&nbsp;<span class="ident" id="6439942">f</span><span class="op" id="6439943">.</span><span class="ident" id="6439944">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439952">dt</span>&nbsp;<span class="op" id="6439955">:=</span>&nbsp;<span class="ident" id="6439958">f</span><span class="op" id="6439959">.</span><span class="ident" id="6439960">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439970">var</span>&nbsp;<span class="ident" id="6439974">all</span>&nbsp;<span class="op" id="6439978">[</span><span class="op" id="6439979">]</span><span class="builtintype" id="6439980">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439988">for</span>&nbsp;<span class="ident" id="6439992">_</span><span class="op" id="6439993">,</span>&nbsp;<span class="ident" id="6439995">s</span>&nbsp;<span class="op" id="6439997">:=</span>&nbsp;<span class="keyword" id="6440000">range</span>&nbsp;<span class="ident" id="6440006">st</span><span class="op" id="6440008">.</span><span class="ident" id="6440009">Syms</span><span class="op" id="6440013">[</span><span class="ident" id="6440014">dt</span><span class="op" id="6440016">.</span><span class="ident" id="6440017">Iundefsym</span>&nbsp;<span class="op" id="6440027">:</span>&nbsp;<span class="ident" id="6440029">dt</span><span class="op" id="6440031">.</span><span class="ident" id="6440032">Iundefsym</span><span class="op" id="6440041">+</span><span class="ident" id="6440042">dt</span><span class="op" id="6440044">.</span><span class="ident" id="6440045">Nundefsym</span><span class="op" id="6440054">]</span>&nbsp;<span class="op" id="6440056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440060">all</span>&nbsp;<span class="op" id="6440064">=</span>&nbsp;<span class="builtinfunc" id="6440066">append</span><span class="op" id="6440072">(</span><span class="ident" id="6440073">all</span><span class="op" id="6440076">,</span>&nbsp;<span class="ident" id="6440078">s</span><span class="op" id="6440079">.</span><span class="ident" id="6440080">Name</span><span class="op" id="6440084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440087">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440090">return</span>&nbsp;<span class="ident" id="6440097">all</span><span class="op" id="6440100">,</span>&nbsp;<span class="ident" id="6440102">nil</span><br>
<span class="lineno"></span><span class="op" id="6440106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6440109">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6440165">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6440220">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6440268">func</span>&nbsp;<span class="op" id="6440273">(</span><span class="ident" id="6440274">f</span>&nbsp;<span class="op" id="6440276">*</span><span class="ident" id="6440277">File</span><span class="op" id="6440281">)</span>&nbsp;<span class="ident" id="6440283">ImportedLibraries</span><span class="op" id="6440300">(</span><span class="op" id="6440301">)</span>&nbsp;<span class="op" id="6440303">(</span><span class="op" id="6440304">[</span><span class="op" id="6440305">]</span><span class="builtintype" id="6440306">string</span><span class="op" id="6440312">,</span>&nbsp;<span class="builtintype" id="6440314">error</span><span class="op" id="6440319">)</span>&nbsp;<span class="op" id="6440321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440324">var</span>&nbsp;<span class="ident" id="6440328">all</span>&nbsp;<span class="op" id="6440332">[</span><span class="op" id="6440333">]</span><span class="builtintype" id="6440334">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440342">for</span>&nbsp;<span class="ident" id="6440346">_</span><span class="op" id="6440347">,</span>&nbsp;<span class="ident" id="6440349">l</span>&nbsp;<span class="op" id="6440351">:=</span>&nbsp;<span class="keyword" id="6440354">range</span>&nbsp;<span class="ident" id="6440360">f</span><span class="op" id="6440361">.</span><span class="ident" id="6440362">Loads</span>&nbsp;<span class="op" id="6440368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440372">if</span>&nbsp;<span class="ident" id="6440375">lib</span><span class="op" id="6440378">,</span>&nbsp;<span class="ident" id="6440380">ok</span>&nbsp;<span class="op" id="6440383">:=</span>&nbsp;<span class="ident" id="6440386">l</span><span class="op" id="6440387">.</span><span class="op" id="6440388">(</span><span class="op" id="6440389">*</span><span class="ident" id="6440390">Dylib</span><span class="op" id="6440395">)</span><span class="op" id="6440396">;</span>&nbsp;<span class="ident" id="6440398">ok</span>&nbsp;<span class="op" id="6440401">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440406">all</span>&nbsp;<span class="op" id="6440410">=</span>&nbsp;<span class="builtinfunc" id="6440412">append</span><span class="op" id="6440418">(</span><span class="ident" id="6440419">all</span><span class="op" id="6440422">,</span>&nbsp;<span class="ident" id="6440424">lib</span><span class="op" id="6440427">.</span><span class="ident" id="6440428">Name</span><span class="op" id="6440432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440442">return</span>&nbsp;<span class="ident" id="6440449">all</span><span class="op" id="6440452">,</span>&nbsp;<span class="ident" id="6440454">nil</span><br>
<span class="lineno"></span><span class="op" id="6440458">}</span>
</div>
</body>
</html>
