<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6063782">package</span>&nbsp;<span class="ident" id="6063790">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6063796">//&nbsp;SymScope&nbsp;is&nbsp;a&nbsp;stack&nbsp;of&nbsp;symbol&nbsp;tables.</span><br>
<span class="lineno"></span><span class="keyword" id="6063837">type</span>&nbsp;<span class="ident" id="6063842">symScope</span>&nbsp;<span class="keyword" id="6063851">struct</span>&nbsp;<span class="op" id="6063858">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063861">stack</span>&nbsp;<span class="op" id="6063867">[</span><span class="op" id="6063868">]</span><span class="op" id="6063869">*</span><span class="ident" id="6063870"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#6065146">symTabel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063880">top</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6063886">*</span><span class="ident" id="6063887"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#6065146">symTabel</a></span>&nbsp;<span class="comment" id="6063896">//&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span><span class="op" id="6063907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6063910">//&nbsp;NewSymScope&nbsp;creates&nbsp;a&nbsp;new&nbsp;symbole&nbsp;scope&nbsp;with&nbsp;one&nbsp;symbol&nbsp;table&nbsp;at&nbsp;the</span><br>
<span class="lineno">10</span><span class="comment" id="6063982">//&nbsp;bottom.</span><br>
<span class="lineno"></span><span class="keyword" id="6063993">func</span>&nbsp;<span class="ident" id="6063998">newSymScope</span><span class="op" id="6064009">(</span><span class="op" id="6064010">)</span>&nbsp;<span class="op" id="6064012">*</span><span class="ident" id="6064013"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span>&nbsp;<span class="op" id="6064022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064025">ret</span>&nbsp;<span class="op" id="6064029">:=</span>&nbsp;<span class="builtinfunc" id="6064032">new</span><span class="op" id="6064035">(</span><span class="ident" id="6064036"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6064044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064047"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064025">ret</a></span><span class="op" id="6064050">.</span><span class="ident" id="6064051">Push</span><span class="op" id="6064055">(</span><span class="op" id="6064056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064060">return</span>&nbsp;<span class="ident" id="6064067"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064025">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6064071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6064074">//&nbsp;Push&nbsp;adds&nbsp;a&nbsp;new&nbsp;symbol&nbsp;table&nbsp;on&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="6064131">func</span>&nbsp;<span class="op" id="6064136">(</span><span class="ident" id="6064137">s</span>&nbsp;<span class="op" id="6064139">*</span><span class="ident" id="6064140"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6064148">)</span>&nbsp;<span class="ident" id="6064150">Push</span><span class="op" id="6064154">(</span><span class="op" id="6064155">)</span>&nbsp;<span class="op" id="6064157">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064160">tab</span>&nbsp;<span class="op" id="6064164">:=</span>&nbsp;<span class="ident" id="6064167"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#6065239">newSymTable</a></span><span class="op" id="6064178">(</span><span class="op" id="6064179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064182"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064137">s</a></span><span class="op" id="6064183">.</span><span class="ident" id="6064184">top</span>&nbsp;<span class="op" id="6064188">=</span>&nbsp;<span class="ident" id="6064190"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064160">tab</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064195"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064137">s</a></span><span class="op" id="6064196">.</span><span class="ident" id="6064197">stack</span>&nbsp;<span class="op" id="6064203">=</span>&nbsp;<span class="builtinfunc" id="6064205">append</span><span class="op" id="6064211">(</span><span class="ident" id="6064212"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064137">s</a></span><span class="op" id="6064213">.</span><span class="ident" id="6064214">stack</span><span class="op" id="6064219">,</span>&nbsp;<span class="ident" id="6064221"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064160">tab</a></span><span class="op" id="6064224">)</span><br>
<span class="lineno"></span><span class="op" id="6064226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6064229">//&nbsp;Pop&nbsp;removes&nbsp;a&nbsp;symbol&nbsp;table&nbsp;from&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="6064286">//&nbsp;It&nbsp;panics&nbsp;when&nbsp;the&nbsp;stack&nbsp;is&nbsp;empty&nbsp;after&nbsp;the&nbsp;pop.</span><br>
<span class="lineno"></span><span class="keyword" id="6064338">func</span>&nbsp;<span class="op" id="6064343">(</span><span class="ident" id="6064344">s</span>&nbsp;<span class="op" id="6064346">*</span><span class="ident" id="6064347"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6064355">)</span>&nbsp;<span class="ident" id="6064357">Pop</span><span class="op" id="6064360">(</span><span class="op" id="6064361">)</span>&nbsp;<span class="op" id="6064363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064366">n</span>&nbsp;<span class="op" id="6064368">:=</span>&nbsp;<span class="builtinfunc" id="6064371">len</span><span class="op" id="6064374">(</span><span class="ident" id="6064375"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064344">s</a></span><span class="op" id="6064376">.</span><span class="ident" id="6064377">stack</span><span class="op" id="6064382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064385">if</span>&nbsp;<span class="ident" id="6064388"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064366">n</a></span>&nbsp;<span class="op" id="6064390">&lt;</span>&nbsp;<span class="num" id="6064392">2</span>&nbsp;<span class="op" id="6064394">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6064398">panic</span><span class="op" id="6064403">(</span><span class="string" id="6064404">&#34;stack&nbsp;empty&nbsp;after&nbsp;pop&#34;</span><span class="op" id="6064427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064434"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064344">s</a></span><span class="op" id="6064435">.</span><span class="ident" id="6064436">stack</span>&nbsp;<span class="op" id="6064442">=</span>&nbsp;<span class="ident" id="6064444"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064344">s</a></span><span class="op" id="6064445">.</span><span class="ident" id="6064446">stack</span><span class="op" id="6064451">[</span><span class="op" id="6064452">:</span><span class="ident" id="6064453"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064366">n</a></span><span class="op" id="6064454">-</span><span class="num" id="6064455">1</span><span class="op" id="6064456">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064459"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064344">s</a></span><span class="op" id="6064460">.</span><span class="ident" id="6064461">top</span>&nbsp;<span class="op" id="6064465">=</span>&nbsp;<span class="ident" id="6064467"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064344">s</a></span><span class="op" id="6064468">.</span><span class="ident" id="6064469">stack</span><span class="op" id="6064474">[</span><span class="ident" id="6064475"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064366">n</a></span><span class="op" id="6064476">-</span><span class="num" id="6064477">2</span><span class="op" id="6064478">]</span><br>
<span class="lineno">35</span><span class="op" id="6064480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6064483">//&nbsp;Depth&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;scopes&nbsp;on&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="6064535">func</span>&nbsp;<span class="op" id="6064540">(</span><span class="ident" id="6064541">s</span>&nbsp;<span class="op" id="6064543">*</span><span class="ident" id="6064544"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6064552">)</span>&nbsp;<span class="ident" id="6064554">Depth</span><span class="op" id="6064559">(</span><span class="op" id="6064560">)</span>&nbsp;<span class="builtintype" id="6064562">int</span>&nbsp;<span class="op" id="6064566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064569">return</span>&nbsp;<span class="builtinfunc" id="6064576">len</span><span class="op" id="6064579">(</span><span class="ident" id="6064580"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064541">s</a></span><span class="op" id="6064581">.</span><span class="ident" id="6064582">stack</span><span class="op" id="6064587">)</span><br>
<span class="lineno">40</span><span class="op" id="6064589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6064592">//&nbsp;Query&nbsp;searches&nbsp;for&nbsp;the&nbsp;top&nbsp;visible&nbsp;symbol&nbsp;with&nbsp;a&nbsp;particular&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="6064661">func</span>&nbsp;<span class="op" id="6064666">(</span><span class="ident" id="6064667">s</span>&nbsp;<span class="op" id="6064669">*</span><span class="ident" id="6064670"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6064678">)</span>&nbsp;<span class="ident" id="6064680">Query</span><span class="op" id="6064685">(</span><span class="ident" id="6064686">n</span>&nbsp;<span class="builtintype" id="6064688">string</span><span class="op" id="6064694">)</span>&nbsp;<span class="op" id="6064696">*</span><span class="ident" id="6064697"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#6065903">symbol</a></span>&nbsp;<span class="op" id="6064704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064707">d</span>&nbsp;<span class="op" id="6064709">:=</span>&nbsp;<span class="builtinfunc" id="6064712">len</span><span class="op" id="6064715">(</span><span class="ident" id="6064716"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064667">s</a></span><span class="op" id="6064717">.</span><span class="ident" id="6064718">stack</span><span class="op" id="6064723">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064727">for</span>&nbsp;<span class="ident" id="6064731">i</span>&nbsp;<span class="op" id="6064733">:=</span>&nbsp;<span class="ident" id="6064736"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064707">d</a></span>&nbsp;<span class="op" id="6064738">-</span>&nbsp;<span class="num" id="6064740">1</span><span class="op" id="6064741">;</span>&nbsp;<span class="ident" id="6064743"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064731">i</a></span>&nbsp;<span class="op" id="6064745">&gt;=</span>&nbsp;<span class="num" id="6064748">0</span><span class="op" id="6064749">;</span>&nbsp;<span class="ident" id="6064751"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064731">i</a></span><span class="op" id="6064752">--</span>&nbsp;<span class="op" id="6064755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064759">tab</span>&nbsp;<span class="op" id="6064763">:=</span>&nbsp;<span class="ident" id="6064766"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064667">s</a></span><span class="op" id="6064767">.</span><span class="ident" id="6064768">stack</span><span class="op" id="6064773">[</span><span class="ident" id="6064774"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064731">i</a></span><span class="op" id="6064775">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064779">ret</span>&nbsp;<span class="op" id="6064783">:=</span>&nbsp;<span class="ident" id="6064786"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064759">tab</a></span><span class="op" id="6064789">.</span><span class="ident" id="6064790">Query</span><span class="op" id="6064795">(</span><span class="ident" id="6064796"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064686">n</a></span><span class="op" id="6064797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064801">if</span>&nbsp;<span class="ident" id="6064804"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064779">ret</a></span>&nbsp;<span class="op" id="6064808">!=</span>&nbsp;<span class="ident" id="6064811">nil</span>&nbsp;<span class="op" id="6064815">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064820">return</span>&nbsp;<span class="ident" id="6064827"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6064779">ret</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064840">return</span>&nbsp;<span class="ident" id="6064847">nil</span><br>
<span class="lineno">55</span><span class="op" id="6064851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6064854">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbole&nbsp;on&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;symbol&nbsp;table&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="6064922">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;on&nbsp;successful,&nbsp;and&nbsp;returns&nbsp;the&nbsp;conflict&nbsp;symbol&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6064992">//&nbsp;it&nbsp;is&nbsp;already&nbsp;declared.</span><br>
<span class="lineno">60</span><span class="keyword" id="6065019">func</span>&nbsp;<span class="op" id="6065024">(</span><span class="ident" id="6065025">s</span>&nbsp;<span class="op" id="6065027">*</span><span class="ident" id="6065028"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6063842">symScope</a></span><span class="op" id="6065036">)</span>&nbsp;<span class="ident" id="6065038">Declare</span><span class="op" id="6065045">(</span><span class="ident" id="6065046">sym</span>&nbsp;<span class="op" id="6065050">*</span><span class="ident" id="6065051"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#6065903">symbol</a></span><span class="op" id="6065057">)</span>&nbsp;<span class="op" id="6065059">*</span><span class="ident" id="6065060"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#6065903">symbol</a></span>&nbsp;<span class="op" id="6065067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065070">return</span>&nbsp;<span class="ident" id="6065077"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6065025">s</a></span><span class="op" id="6065078">.</span><span class="ident" id="6065079">top</span><span class="op" id="6065082">.</span><span class="ident" id="6065083">Declare</span><span class="op" id="6065090">(</span><span class="ident" id="6065091"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#6065046">sym</a></span><span class="op" id="6065094">)</span><br>
<span class="lineno"></span><span class="op" id="6065096">}</span>
</div>
</body>
</html>
