<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4794721">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4794777">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4794831">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4794882">package</span>&nbsp;<span class="ident" id="4794890">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4794896">import</span>&nbsp;<span class="string" id="4794903">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4794912">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="4794964">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="4795006">func</span>&nbsp;<span class="ident" id="4795011">Compact</span><span class="op" id="4795018">(</span><span class="ident" id="4795019">dst</span>&nbsp;<span class="op" id="4795023">*</span><span class="ident" id="4795024">bytes</span><span class="op" id="4795029">.</span><span class="ident" id="4795030">Buffer</span><span class="op" id="4795036">,</span>&nbsp;<span class="ident" id="4795038">src</span>&nbsp;<span class="op" id="4795042">[</span><span class="op" id="4795043">]</span><span class="builtintype" id="4795044">byte</span><span class="op" id="4795048">)</span>&nbsp;<span class="builtintype" id="4795050">error</span>&nbsp;<span class="op" id="4795056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795059">return</span>&nbsp;<span class="ident" id="4795066">compact</span><span class="op" id="4795073">(</span><span class="ident" id="4795074">dst</span><span class="op" id="4795077">,</span>&nbsp;<span class="ident" id="4795079">src</span><span class="op" id="4795082">,</span>&nbsp;<span class="builtintype" id="4795084">false</span><span class="op" id="4795089">)</span><br>
<span class="lineno"></span><span class="op" id="4795091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4795094">func</span>&nbsp;<span class="ident" id="4795099">compact</span><span class="op" id="4795106">(</span><span class="ident" id="4795107">dst</span>&nbsp;<span class="op" id="4795111">*</span><span class="ident" id="4795112">bytes</span><span class="op" id="4795117">.</span><span class="ident" id="4795118">Buffer</span><span class="op" id="4795124">,</span>&nbsp;<span class="ident" id="4795126">src</span>&nbsp;<span class="op" id="4795130">[</span><span class="op" id="4795131">]</span><span class="builtintype" id="4795132">byte</span><span class="op" id="4795136">,</span>&nbsp;<span class="ident" id="4795138">escape</span>&nbsp;<span class="builtintype" id="4795145">bool</span><span class="op" id="4795149">)</span>&nbsp;<span class="builtintype" id="4795151">error</span>&nbsp;<span class="op" id="4795157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795160">origLen</span>&nbsp;<span class="op" id="4795168">:=</span>&nbsp;<span class="ident" id="4795171">dst</span><span class="op" id="4795174">.</span><span class="ident" id="4795175">Len</span><span class="op" id="4795178">(</span><span class="op" id="4795179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795182">var</span>&nbsp;<span class="ident" id="4795186">scan</span>&nbsp;<span class="ident" id="4795191">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795200">scan</span><span class="op" id="4795204">.</span><span class="ident" id="4795205">reset</span><span class="op" id="4795210">(</span><span class="op" id="4795211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795214">start</span>&nbsp;<span class="op" id="4795220">:=</span>&nbsp;<span class="num" id="4795223">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795226">for</span>&nbsp;<span class="ident" id="4795230">i</span><span class="op" id="4795231">,</span>&nbsp;<span class="ident" id="4795233">c</span>&nbsp;<span class="op" id="4795235">:=</span>&nbsp;<span class="keyword" id="4795238">range</span>&nbsp;<span class="ident" id="4795244">src</span>&nbsp;<span class="op" id="4795248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795252">if</span>&nbsp;<span class="ident" id="4795255">escape</span>&nbsp;<span class="op" id="4795262">&amp;&amp;</span>&nbsp;<span class="op" id="4795265">(</span><span class="ident" id="4795266">c</span>&nbsp;<span class="op" id="4795268">==</span>&nbsp;<span class="string" id="4795271">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="4795275">||</span>&nbsp;<span class="ident" id="4795278">c</span>&nbsp;<span class="op" id="4795280">==</span>&nbsp;<span class="string" id="4795283">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="4795287">||</span>&nbsp;<span class="ident" id="4795290">c</span>&nbsp;<span class="op" id="4795292">==</span>&nbsp;<span class="string" id="4795295">&#39;&amp;&#39;</span><span class="op" id="4795298">)</span>&nbsp;<span class="op" id="4795300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795305">if</span>&nbsp;<span class="ident" id="4795308">start</span>&nbsp;<span class="op" id="4795314">&lt;</span>&nbsp;<span class="ident" id="4795316">i</span>&nbsp;<span class="op" id="4795318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795324">dst</span><span class="op" id="4795327">.</span><span class="ident" id="4795328">Write</span><span class="op" id="4795333">(</span><span class="ident" id="4795334">src</span><span class="op" id="4795337">[</span><span class="ident" id="4795338">start</span><span class="op" id="4795343">:</span><span class="ident" id="4795344">i</span><span class="op" id="4795345">]</span><span class="op" id="4795346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795351">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795356">dst</span><span class="op" id="4795359">.</span><span class="ident" id="4795360">WriteString</span><span class="op" id="4795371">(</span><span class="string" id="4795372">`\u00`</span><span class="op" id="4795378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795383">dst</span><span class="op" id="4795386">.</span><span class="ident" id="4795387">WriteByte</span><span class="op" id="4795396">(</span><span class="ident" id="4795397">hex</span><span class="op" id="4795400">[</span><span class="ident" id="4795401">c</span><span class="op" id="4795402">&gt;&gt;</span><span class="num" id="4795404">4</span><span class="op" id="4795405">]</span><span class="op" id="4795406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795411">dst</span><span class="op" id="4795414">.</span><span class="ident" id="4795415">WriteByte</span><span class="op" id="4795424">(</span><span class="ident" id="4795425">hex</span><span class="op" id="4795428">[</span><span class="ident" id="4795429">c</span><span class="op" id="4795430">&amp;</span><span class="num" id="4795431">0xF</span><span class="op" id="4795434">]</span><span class="op" id="4795435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795440">start</span>&nbsp;<span class="op" id="4795446">=</span>&nbsp;<span class="ident" id="4795448">i</span>&nbsp;<span class="op" id="4795450">+</span>&nbsp;<span class="num" id="4795452">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795456">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4795460">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795516">if</span>&nbsp;<span class="ident" id="4795519">c</span>&nbsp;<span class="op" id="4795521">==</span>&nbsp;<span class="num" id="4795524">0xE2</span>&nbsp;<span class="op" id="4795529">&amp;&amp;</span>&nbsp;<span class="ident" id="4795532">i</span><span class="op" id="4795533">+</span><span class="num" id="4795534">2</span>&nbsp;<span class="op" id="4795536">&lt;</span>&nbsp;<span class="builtinfunc" id="4795538">len</span><span class="op" id="4795541">(</span><span class="ident" id="4795542">src</span><span class="op" id="4795545">)</span>&nbsp;<span class="op" id="4795547">&amp;&amp;</span>&nbsp;<span class="ident" id="4795550">src</span><span class="op" id="4795553">[</span><span class="ident" id="4795554">i</span><span class="op" id="4795555">+</span><span class="num" id="4795556">1</span><span class="op" id="4795557">]</span>&nbsp;<span class="op" id="4795559">==</span>&nbsp;<span class="num" id="4795562">0x80</span>&nbsp;<span class="op" id="4795567">&amp;&amp;</span>&nbsp;<span class="ident" id="4795570">src</span><span class="op" id="4795573">[</span><span class="ident" id="4795574">i</span><span class="op" id="4795575">+</span><span class="num" id="4795576">2</span><span class="op" id="4795577">]</span><span class="op" id="4795578">&amp;^</span><span class="num" id="4795580">1</span>&nbsp;<span class="op" id="4795582">==</span>&nbsp;<span class="num" id="4795585">0xA8</span>&nbsp;<span class="op" id="4795590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795595">if</span>&nbsp;<span class="ident" id="4795598">start</span>&nbsp;<span class="op" id="4795604">&lt;</span>&nbsp;<span class="ident" id="4795606">i</span>&nbsp;<span class="op" id="4795608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795614">dst</span><span class="op" id="4795617">.</span><span class="ident" id="4795618">Write</span><span class="op" id="4795623">(</span><span class="ident" id="4795624">src</span><span class="op" id="4795627">[</span><span class="ident" id="4795628">start</span><span class="op" id="4795633">:</span><span class="ident" id="4795634">i</span><span class="op" id="4795635">]</span><span class="op" id="4795636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795641">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795646">dst</span><span class="op" id="4795649">.</span><span class="ident" id="4795650">WriteString</span><span class="op" id="4795661">(</span><span class="string" id="4795662">`\u202`</span><span class="op" id="4795669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795674">dst</span><span class="op" id="4795677">.</span><span class="ident" id="4795678">WriteByte</span><span class="op" id="4795687">(</span><span class="ident" id="4795688">hex</span><span class="op" id="4795691">[</span><span class="ident" id="4795692">src</span><span class="op" id="4795695">[</span><span class="ident" id="4795696">i</span><span class="op" id="4795697">+</span><span class="num" id="4795698">2</span><span class="op" id="4795699">]</span><span class="op" id="4795700">&amp;</span><span class="num" id="4795701">0xF</span><span class="op" id="4795704">]</span><span class="op" id="4795705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795710">start</span>&nbsp;<span class="op" id="4795716">=</span>&nbsp;<span class="ident" id="4795718">i</span>&nbsp;<span class="op" id="4795720">+</span>&nbsp;<span class="num" id="4795722">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795730">v</span>&nbsp;<span class="op" id="4795732">:=</span>&nbsp;<span class="ident" id="4795735">scan</span><span class="op" id="4795739">.</span><span class="ident" id="4795740">step</span><span class="op" id="4795744">(</span><span class="op" id="4795745">&amp;</span><span class="ident" id="4795746">scan</span><span class="op" id="4795750">,</span>&nbsp;<span class="builtintype" id="4795752">int</span><span class="op" id="4795755">(</span><span class="ident" id="4795756">c</span><span class="op" id="4795757">)</span><span class="op" id="4795758">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795762">if</span>&nbsp;<span class="ident" id="4795765">v</span>&nbsp;<span class="op" id="4795767">&gt;=</span>&nbsp;<span class="ident" id="4795770">scanSkipSpace</span>&nbsp;<span class="op" id="4795784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795789">if</span>&nbsp;<span class="ident" id="4795792">v</span>&nbsp;<span class="op" id="4795794">==</span>&nbsp;<span class="ident" id="4795797">scanError</span>&nbsp;<span class="op" id="4795807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795813">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795827">if</span>&nbsp;<span class="ident" id="4795830">start</span>&nbsp;<span class="op" id="4795836">&lt;</span>&nbsp;<span class="ident" id="4795838">i</span>&nbsp;<span class="op" id="4795840">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795846">dst</span><span class="op" id="4795849">.</span><span class="ident" id="4795850">Write</span><span class="op" id="4795855">(</span><span class="ident" id="4795856">src</span><span class="op" id="4795859">[</span><span class="ident" id="4795860">start</span><span class="op" id="4795865">:</span><span class="ident" id="4795866">i</span><span class="op" id="4795867">]</span><span class="op" id="4795868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795878">start</span>&nbsp;<span class="op" id="4795884">=</span>&nbsp;<span class="ident" id="4795886">i</span>&nbsp;<span class="op" id="4795888">+</span>&nbsp;<span class="num" id="4795890">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795897">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795900">if</span>&nbsp;<span class="ident" id="4795903">scan</span><span class="op" id="4795907">.</span><span class="ident" id="4795908">eof</span><span class="op" id="4795911">(</span><span class="op" id="4795912">)</span>&nbsp;<span class="op" id="4795914">==</span>&nbsp;<span class="ident" id="4795917">scanError</span>&nbsp;<span class="op" id="4795927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795931">dst</span><span class="op" id="4795934">.</span><span class="ident" id="4795935">Truncate</span><span class="op" id="4795943">(</span><span class="ident" id="4795944">origLen</span><span class="op" id="4795951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795955">return</span>&nbsp;<span class="ident" id="4795962">scan</span><span class="op" id="4795966">.</span><span class="ident" id="4795967">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795975">if</span>&nbsp;<span class="ident" id="4795978">start</span>&nbsp;<span class="op" id="4795984">&lt;</span>&nbsp;<span class="builtinfunc" id="4795986">len</span><span class="op" id="4795989">(</span><span class="ident" id="4795990">src</span><span class="op" id="4795993">)</span>&nbsp;<span class="op" id="4795995">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795999">dst</span><span class="op" id="4796002">.</span><span class="ident" id="4796003">Write</span><span class="op" id="4796008">(</span><span class="ident" id="4796009">src</span><span class="op" id="4796012">[</span><span class="ident" id="4796013">start</span><span class="op" id="4796018">:</span><span class="op" id="4796019">]</span><span class="op" id="4796020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4796023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796026">return</span>&nbsp;<span class="ident" id="4796033">nil</span><br>
<span class="lineno"></span><span class="op" id="4796037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4796040">func</span>&nbsp;<span class="ident" id="4796045">newline</span><span class="op" id="4796052">(</span><span class="ident" id="4796053">dst</span>&nbsp;<span class="op" id="4796057">*</span><span class="ident" id="4796058">bytes</span><span class="op" id="4796063">.</span><span class="ident" id="4796064">Buffer</span><span class="op" id="4796070">,</span>&nbsp;<span class="ident" id="4796072">prefix</span><span class="op" id="4796078">,</span>&nbsp;<span class="ident" id="4796080">indent</span>&nbsp;<span class="builtintype" id="4796087">string</span><span class="op" id="4796093">,</span>&nbsp;<span class="ident" id="4796095">depth</span>&nbsp;<span class="builtintype" id="4796101">int</span><span class="op" id="4796104">)</span>&nbsp;<span class="op" id="4796106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796109">dst</span><span class="op" id="4796112">.</span><span class="ident" id="4796113">WriteByte</span><span class="op" id="4796122">(</span><span class="string" id="4796123">&#39;\n&#39;</span><span class="op" id="4796127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796130">dst</span><span class="op" id="4796133">.</span><span class="ident" id="4796134">WriteString</span><span class="op" id="4796145">(</span><span class="ident" id="4796146">prefix</span><span class="op" id="4796152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796155">for</span>&nbsp;<span class="ident" id="4796159">i</span>&nbsp;<span class="op" id="4796161">:=</span>&nbsp;<span class="num" id="4796164">0</span><span class="op" id="4796165">;</span>&nbsp;<span class="ident" id="4796167">i</span>&nbsp;<span class="op" id="4796169">&lt;</span>&nbsp;<span class="ident" id="4796171">depth</span><span class="op" id="4796176">;</span>&nbsp;<span class="ident" id="4796178">i</span><span class="op" id="4796179">++</span>&nbsp;<span class="op" id="4796182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796186">dst</span><span class="op" id="4796189">.</span><span class="ident" id="4796190">WriteString</span><span class="op" id="4796201">(</span><span class="ident" id="4796202">indent</span><span class="op" id="4796208">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4796211">}</span><br>
<span class="lineno"></span><span class="op" id="4796213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4796216">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="4796283">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="4796342">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="4796405">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="4796463">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="4796526">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4796586">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="4796639">func</span>&nbsp;<span class="ident" id="4796644">Indent</span><span class="op" id="4796650">(</span><span class="ident" id="4796651">dst</span>&nbsp;<span class="op" id="4796655">*</span><span class="ident" id="4796656">bytes</span><span class="op" id="4796661">.</span><span class="ident" id="4796662">Buffer</span><span class="op" id="4796668">,</span>&nbsp;<span class="ident" id="4796670">src</span>&nbsp;<span class="op" id="4796674">[</span><span class="op" id="4796675">]</span><span class="builtintype" id="4796676">byte</span><span class="op" id="4796680">,</span>&nbsp;<span class="ident" id="4796682">prefix</span><span class="op" id="4796688">,</span>&nbsp;<span class="ident" id="4796690">indent</span>&nbsp;<span class="builtintype" id="4796697">string</span><span class="op" id="4796703">)</span>&nbsp;<span class="builtintype" id="4796705">error</span>&nbsp;<span class="op" id="4796711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796714">origLen</span>&nbsp;<span class="op" id="4796722">:=</span>&nbsp;<span class="ident" id="4796725">dst</span><span class="op" id="4796728">.</span><span class="ident" id="4796729">Len</span><span class="op" id="4796732">(</span><span class="op" id="4796733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796736">var</span>&nbsp;<span class="ident" id="4796740">scan</span>&nbsp;<span class="ident" id="4796745">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796754">scan</span><span class="op" id="4796758">.</span><span class="ident" id="4796759">reset</span><span class="op" id="4796764">(</span><span class="op" id="4796765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796768">needIndent</span>&nbsp;<span class="op" id="4796779">:=</span>&nbsp;<span class="builtintype" id="4796782">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796789">depth</span>&nbsp;<span class="op" id="4796795">:=</span>&nbsp;<span class="num" id="4796798">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796801">for</span>&nbsp;<span class="ident" id="4796805">_</span><span class="op" id="4796806">,</span>&nbsp;<span class="ident" id="4796808">c</span>&nbsp;<span class="op" id="4796810">:=</span>&nbsp;<span class="keyword" id="4796813">range</span>&nbsp;<span class="ident" id="4796819">src</span>&nbsp;<span class="op" id="4796823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796827">scan</span><span class="op" id="4796831">.</span><span class="ident" id="4796832">bytes</span><span class="op" id="4796837">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4796842">v</span>&nbsp;<span class="op" id="4796844">:=</span>&nbsp;<span class="ident" id="4796847">scan</span><span class="op" id="4796851">.</span><span class="ident" id="4796852">step</span><span class="op" id="4796856">(</span><span class="op" id="4796857">&amp;</span><span class="ident" id="4796858">scan</span><span class="op" id="4796862">,</span>&nbsp;<span class="builtintype" id="4796864">int</span><span class="op" id="4796867">(</span><span class="ident" id="4796868">c</span><span class="op" id="4796869">)</span><span class="op" id="4796870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796874">if</span>&nbsp;<span class="ident" id="4796877">v</span>&nbsp;<span class="op" id="4796879">==</span>&nbsp;<span class="ident" id="4796882">scanSkipSpace</span>&nbsp;<span class="op" id="4796896">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796901">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4796912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796916">if</span>&nbsp;<span class="ident" id="4796919">v</span>&nbsp;<span class="op" id="4796921">==</span>&nbsp;<span class="ident" id="4796924">scanError</span>&nbsp;<span class="op" id="4796934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796939">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4796947">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4796951">if</span>&nbsp;<span class="ident" id="4796954">needIndent</span>&nbsp;<span class="op" id="4796965">&amp;&amp;</span>&nbsp;<span class="ident" id="4796968">v</span>&nbsp;<span class="op" id="4796970">!=</span>&nbsp;<span class="ident" id="4796973">scanEndObject</span>&nbsp;<span class="op" id="4796987">&amp;&amp;</span>&nbsp;<span class="ident" id="4796990">v</span>&nbsp;<span class="op" id="4796992">!=</span>&nbsp;<span class="ident" id="4796995">scanEndArray</span>&nbsp;<span class="op" id="4797008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797013">needIndent</span>&nbsp;<span class="op" id="4797024">=</span>&nbsp;<span class="builtintype" id="4797026">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797035">depth</span><span class="op" id="4797040">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797046">newline</span><span class="op" id="4797053">(</span><span class="ident" id="4797054">dst</span><span class="op" id="4797057">,</span>&nbsp;<span class="ident" id="4797059">prefix</span><span class="op" id="4797065">,</span>&nbsp;<span class="ident" id="4797067">indent</span><span class="op" id="4797073">,</span>&nbsp;<span class="ident" id="4797075">depth</span><span class="op" id="4797080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797084">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4797089">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4797132">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797189">if</span>&nbsp;<span class="ident" id="4797192">v</span>&nbsp;<span class="op" id="4797194">==</span>&nbsp;<span class="ident" id="4797197">scanContinue</span>&nbsp;<span class="op" id="4797210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797215">dst</span><span class="op" id="4797218">.</span><span class="ident" id="4797219">WriteByte</span><span class="op" id="4797228">(</span><span class="ident" id="4797229">c</span><span class="op" id="4797230">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797235">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4797251">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797293">switch</span>&nbsp;<span class="ident" id="4797300">c</span>&nbsp;<span class="op" id="4797302">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797306">case</span>&nbsp;<span class="string" id="4797311">&#39;{&#39;</span><span class="op" id="4797314">,</span>&nbsp;<span class="string" id="4797316">&#39;[&#39;</span><span class="op" id="4797319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4797324">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797402">needIndent</span>&nbsp;<span class="op" id="4797413">=</span>&nbsp;<span class="builtintype" id="4797415">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797423">dst</span><span class="op" id="4797426">.</span><span class="ident" id="4797427">WriteByte</span><span class="op" id="4797436">(</span><span class="ident" id="4797437">c</span><span class="op" id="4797438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797443">case</span>&nbsp;<span class="string" id="4797448">&#39;,&#39;</span><span class="op" id="4797451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797456">dst</span><span class="op" id="4797459">.</span><span class="ident" id="4797460">WriteByte</span><span class="op" id="4797469">(</span><span class="ident" id="4797470">c</span><span class="op" id="4797471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797476">newline</span><span class="op" id="4797483">(</span><span class="ident" id="4797484">dst</span><span class="op" id="4797487">,</span>&nbsp;<span class="ident" id="4797489">prefix</span><span class="op" id="4797495">,</span>&nbsp;<span class="ident" id="4797497">indent</span><span class="op" id="4797503">,</span>&nbsp;<span class="ident" id="4797505">depth</span><span class="op" id="4797510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797515">case</span>&nbsp;<span class="string" id="4797520">&#39;:&#39;</span><span class="op" id="4797523">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797528">dst</span><span class="op" id="4797531">.</span><span class="ident" id="4797532">WriteByte</span><span class="op" id="4797541">(</span><span class="ident" id="4797542">c</span><span class="op" id="4797543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797548">dst</span><span class="op" id="4797551">.</span><span class="ident" id="4797552">WriteByte</span><span class="op" id="4797561">(</span><span class="string" id="4797562">&#39;&nbsp;&#39;</span><span class="op" id="4797565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797570">case</span>&nbsp;<span class="string" id="4797575">&#39;}&#39;</span><span class="op" id="4797578">,</span>&nbsp;<span class="string" id="4797580">&#39;]&#39;</span><span class="op" id="4797583">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797588">if</span>&nbsp;<span class="ident" id="4797591">needIndent</span>&nbsp;<span class="op" id="4797602">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4797608">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797653">needIndent</span>&nbsp;<span class="op" id="4797664">=</span>&nbsp;<span class="builtintype" id="4797666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797675">}</span>&nbsp;<span class="keyword" id="4797677">else</span>&nbsp;<span class="op" id="4797682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797688">depth</span><span class="op" id="4797693">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797700">newline</span><span class="op" id="4797707">(</span><span class="ident" id="4797708">dst</span><span class="op" id="4797711">,</span>&nbsp;<span class="ident" id="4797713">prefix</span><span class="op" id="4797719">,</span>&nbsp;<span class="ident" id="4797721">indent</span><span class="op" id="4797727">,</span>&nbsp;<span class="ident" id="4797729">depth</span><span class="op" id="4797734">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797744">dst</span><span class="op" id="4797747">.</span><span class="ident" id="4797748">WriteByte</span><span class="op" id="4797757">(</span><span class="ident" id="4797758">c</span><span class="op" id="4797759">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797764">default</span><span class="op" id="4797771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797776">dst</span><span class="op" id="4797779">.</span><span class="ident" id="4797780">WriteByte</span><span class="op" id="4797789">(</span><span class="ident" id="4797790">c</span><span class="op" id="4797791">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797801">if</span>&nbsp;<span class="ident" id="4797804">scan</span><span class="op" id="4797808">.</span><span class="ident" id="4797809">eof</span><span class="op" id="4797812">(</span><span class="op" id="4797813">)</span>&nbsp;<span class="op" id="4797815">==</span>&nbsp;<span class="ident" id="4797818">scanError</span>&nbsp;<span class="op" id="4797828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4797832">dst</span><span class="op" id="4797835">.</span><span class="ident" id="4797836">Truncate</span><span class="op" id="4797844">(</span><span class="ident" id="4797845">origLen</span><span class="op" id="4797852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797856">return</span>&nbsp;<span class="ident" id="4797863">scan</span><span class="op" id="4797867">.</span><span class="ident" id="4797868">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4797873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4797876">return</span>&nbsp;<span class="ident" id="4797883">nil</span><br>
<span class="lineno"></span><span class="op" id="4797887">}</span>
</div>
</body>
</html>
