<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7101600">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7101655">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7101709">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7101760">package</span>&nbsp;<span class="ident" id="7101768">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7101773">import</span>&nbsp;<span class="op" id="7101780">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101783">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101792">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101806">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101813">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101819">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101832">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101838">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101849">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101860">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7101871">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7101878">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7101881">type</span>&nbsp;<span class="ident" id="7101886">untarTest</span>&nbsp;<span class="keyword" id="7101896">struct</span>&nbsp;<span class="op" id="7101903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7101906">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7101914">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7101922">headers</span>&nbsp;<span class="op" id="7101930">[</span><span class="op" id="7101931">]</span><span class="op" id="7101932">*</span><span class="ident" id="7101933">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7101941">cksums</span>&nbsp;&nbsp;<span class="op" id="7101949">[</span><span class="op" id="7101950">]</span><span class="builtintype" id="7101951">string</span><br>
<span class="lineno"></span><span class="op" id="7101958">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7101961">var</span>&nbsp;<span class="ident" id="7101965">gnuTarTest</span>&nbsp;<span class="op" id="7101976">=</span>&nbsp;<span class="op" id="7101978">&amp;</span><span class="ident" id="7101979">untarTest</span><span class="op" id="7101988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7101991">file</span><span class="op" id="7101995">:</span>&nbsp;<span class="string" id="7101997">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7102015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102018">headers</span><span class="op" id="7102025">:</span>&nbsp;<span class="op" id="7102027">[</span><span class="op" id="7102028">]</span><span class="op" id="7102029">*</span><span class="ident" id="7102030">Header</span><span class="op" id="7102036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102040">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102045">Name</span><span class="op" id="7102049">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102055">&#34;small.txt&#34;</span><span class="op" id="7102066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102071">Mode</span><span class="op" id="7102075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102081">0640</span><span class="op" id="7102085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102090">Uid</span><span class="op" id="7102093">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102100">73025</span><span class="op" id="7102105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102110">Gid</span><span class="op" id="7102113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102120">5000</span><span class="op" id="7102124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102129">Size</span><span class="op" id="7102133">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102139">5</span><span class="op" id="7102140">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102145">ModTime</span><span class="op" id="7102152">:</span>&nbsp;&nbsp;<span class="ident" id="7102155">time</span><span class="op" id="7102159">.</span><span class="ident" id="7102160">Unix</span><span class="op" id="7102164">(</span><span class="num" id="7102165">1244428340</span><span class="op" id="7102175">,</span>&nbsp;<span class="num" id="7102177">0</span><span class="op" id="7102178">)</span><span class="op" id="7102179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102184">Typeflag</span><span class="op" id="7102192">:</span>&nbsp;<span class="string" id="7102194">&#39;0&#39;</span><span class="op" id="7102197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102202">Uname</span><span class="op" id="7102207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102212">&#34;dsymonds&#34;</span><span class="op" id="7102222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102227">Gname</span><span class="op" id="7102232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102237">&#34;eng&#34;</span><span class="op" id="7102242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102246">}</span><span class="op" id="7102247">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102256">Name</span><span class="op" id="7102260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102266">&#34;small2.txt&#34;</span><span class="op" id="7102278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102283">Mode</span><span class="op" id="7102287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102293">0640</span><span class="op" id="7102297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102302">Uid</span><span class="op" id="7102305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102312">73025</span><span class="op" id="7102317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102322">Gid</span><span class="op" id="7102325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102332">5000</span><span class="op" id="7102336">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102341">Size</span><span class="op" id="7102345">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102351">11</span><span class="op" id="7102353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102358">ModTime</span><span class="op" id="7102365">:</span>&nbsp;&nbsp;<span class="ident" id="7102368">time</span><span class="op" id="7102372">.</span><span class="ident" id="7102373">Unix</span><span class="op" id="7102377">(</span><span class="num" id="7102378">1244436044</span><span class="op" id="7102388">,</span>&nbsp;<span class="num" id="7102390">0</span><span class="op" id="7102391">)</span><span class="op" id="7102392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102397">Typeflag</span><span class="op" id="7102405">:</span>&nbsp;<span class="string" id="7102407">&#39;0&#39;</span><span class="op" id="7102410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102415">Uname</span><span class="op" id="7102420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102425">&#34;dsymonds&#34;</span><span class="op" id="7102435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102440">Gname</span><span class="op" id="7102445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102450">&#34;eng&#34;</span><span class="op" id="7102455">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102459">}</span><span class="op" id="7102460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102463">}</span><span class="op" id="7102464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102467">cksums</span><span class="op" id="7102473">:</span>&nbsp;<span class="op" id="7102475">[</span><span class="op" id="7102476">]</span><span class="builtintype" id="7102477">string</span><span class="op" id="7102483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7102487">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7102521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7102525">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7102559">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102562">}</span><span class="op" id="7102563">,</span><br>
<span class="lineno"></span><span class="op" id="7102565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7102568">var</span>&nbsp;<span class="ident" id="7102572">sparseTarTest</span>&nbsp;<span class="op" id="7102586">=</span>&nbsp;<span class="op" id="7102588">&amp;</span><span class="ident" id="7102589">untarTest</span><span class="op" id="7102598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102601">file</span><span class="op" id="7102605">:</span>&nbsp;<span class="string" id="7102607">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7102636">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102639">headers</span><span class="op" id="7102646">:</span>&nbsp;<span class="op" id="7102648">[</span><span class="op" id="7102649">]</span><span class="op" id="7102650">*</span><span class="ident" id="7102651">Header</span><span class="op" id="7102657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102666">Name</span><span class="op" id="7102670">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102676">&#34;sparse-gnu&#34;</span><span class="op" id="7102688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102693">Mode</span><span class="op" id="7102697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102703">420</span><span class="op" id="7102706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102711">Uid</span><span class="op" id="7102714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102721">1000</span><span class="op" id="7102725">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102730">Gid</span><span class="op" id="7102733">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102740">1000</span><span class="op" id="7102744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102749">Size</span><span class="op" id="7102753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102759">200</span><span class="op" id="7102762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102767">ModTime</span><span class="op" id="7102774">:</span>&nbsp;&nbsp;<span class="ident" id="7102777">time</span><span class="op" id="7102781">.</span><span class="ident" id="7102782">Unix</span><span class="op" id="7102786">(</span><span class="num" id="7102787">1392395740</span><span class="op" id="7102797">,</span>&nbsp;<span class="num" id="7102799">0</span><span class="op" id="7102800">)</span><span class="op" id="7102801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102806">Typeflag</span><span class="op" id="7102814">:</span>&nbsp;<span class="num" id="7102816">0x53</span><span class="op" id="7102820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102825">Linkname</span><span class="op" id="7102833">:</span>&nbsp;<span class="string" id="7102835">&#34;&#34;</span><span class="op" id="7102837">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102842">Uname</span><span class="op" id="7102847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102852">&#34;david&#34;</span><span class="op" id="7102859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102864">Gname</span><span class="op" id="7102869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102874">&#34;david&#34;</span><span class="op" id="7102881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102886">Devmajor</span><span class="op" id="7102894">:</span>&nbsp;<span class="num" id="7102896">0</span><span class="op" id="7102897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102902">Devminor</span><span class="op" id="7102910">:</span>&nbsp;<span class="num" id="7102912">0</span><span class="op" id="7102913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102917">}</span><span class="op" id="7102918">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7102922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102927">Name</span><span class="op" id="7102931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7102937">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7102955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102960">Mode</span><span class="op" id="7102964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102970">420</span><span class="op" id="7102973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102978">Uid</span><span class="op" id="7102981">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7102988">1000</span><span class="op" id="7102992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7102997">Gid</span><span class="op" id="7103000">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103007">1000</span><span class="op" id="7103011">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103016">Size</span><span class="op" id="7103020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103026">200</span><span class="op" id="7103029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103034">ModTime</span><span class="op" id="7103041">:</span>&nbsp;&nbsp;<span class="ident" id="7103044">time</span><span class="op" id="7103048">.</span><span class="ident" id="7103049">Unix</span><span class="op" id="7103053">(</span><span class="num" id="7103054">1392342187</span><span class="op" id="7103064">,</span>&nbsp;<span class="num" id="7103066">0</span><span class="op" id="7103067">)</span><span class="op" id="7103068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103073">Typeflag</span><span class="op" id="7103081">:</span>&nbsp;<span class="num" id="7103083">0x30</span><span class="op" id="7103087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103092">Linkname</span><span class="op" id="7103100">:</span>&nbsp;<span class="string" id="7103102">&#34;&#34;</span><span class="op" id="7103104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103109">Uname</span><span class="op" id="7103114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103119">&#34;david&#34;</span><span class="op" id="7103126">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103131">Gname</span><span class="op" id="7103136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103141">&#34;david&#34;</span><span class="op" id="7103148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103153">Devmajor</span><span class="op" id="7103161">:</span>&nbsp;<span class="num" id="7103163">0</span><span class="op" id="7103164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103169">Devminor</span><span class="op" id="7103177">:</span>&nbsp;<span class="num" id="7103179">0</span><span class="op" id="7103180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103184">}</span><span class="op" id="7103185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103189">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103194">Name</span><span class="op" id="7103198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103204">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7103222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103227">Mode</span><span class="op" id="7103231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103237">420</span><span class="op" id="7103240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103245">Uid</span><span class="op" id="7103248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103255">1000</span><span class="op" id="7103259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103264">Gid</span><span class="op" id="7103267">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103274">1000</span><span class="op" id="7103278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103283">Size</span><span class="op" id="7103287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103293">200</span><span class="op" id="7103296">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103301">ModTime</span><span class="op" id="7103308">:</span>&nbsp;&nbsp;<span class="ident" id="7103311">time</span><span class="op" id="7103315">.</span><span class="ident" id="7103316">Unix</span><span class="op" id="7103320">(</span><span class="num" id="7103321">1392340456</span><span class="op" id="7103331">,</span>&nbsp;<span class="num" id="7103333">0</span><span class="op" id="7103334">)</span><span class="op" id="7103335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103340">Typeflag</span><span class="op" id="7103348">:</span>&nbsp;<span class="num" id="7103350">0x30</span><span class="op" id="7103354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103359">Linkname</span><span class="op" id="7103367">:</span>&nbsp;<span class="string" id="7103369">&#34;&#34;</span><span class="op" id="7103371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103376">Uname</span><span class="op" id="7103381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103386">&#34;david&#34;</span><span class="op" id="7103393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103398">Gname</span><span class="op" id="7103403">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103408">&#34;david&#34;</span><span class="op" id="7103415">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103420">Devmajor</span><span class="op" id="7103428">:</span>&nbsp;<span class="num" id="7103430">0</span><span class="op" id="7103431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103436">Devminor</span><span class="op" id="7103444">:</span>&nbsp;<span class="num" id="7103446">0</span><span class="op" id="7103447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103451">}</span><span class="op" id="7103452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103461">Name</span><span class="op" id="7103465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103471">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7103489">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103494">Mode</span><span class="op" id="7103498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103504">420</span><span class="op" id="7103507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103512">Uid</span><span class="op" id="7103515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103522">1000</span><span class="op" id="7103526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103531">Gid</span><span class="op" id="7103534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103541">1000</span><span class="op" id="7103545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103550">Size</span><span class="op" id="7103554">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103560">200</span><span class="op" id="7103563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103568">ModTime</span><span class="op" id="7103575">:</span>&nbsp;&nbsp;<span class="ident" id="7103578">time</span><span class="op" id="7103582">.</span><span class="ident" id="7103583">Unix</span><span class="op" id="7103587">(</span><span class="num" id="7103588">1392337404</span><span class="op" id="7103598">,</span>&nbsp;<span class="num" id="7103600">0</span><span class="op" id="7103601">)</span><span class="op" id="7103602">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103607">Typeflag</span><span class="op" id="7103615">:</span>&nbsp;<span class="num" id="7103617">0x30</span><span class="op" id="7103621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103626">Linkname</span><span class="op" id="7103634">:</span>&nbsp;<span class="string" id="7103636">&#34;&#34;</span><span class="op" id="7103638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103643">Uname</span><span class="op" id="7103648">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103653">&#34;david&#34;</span><span class="op" id="7103660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103665">Gname</span><span class="op" id="7103670">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103675">&#34;david&#34;</span><span class="op" id="7103682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103687">Devmajor</span><span class="op" id="7103695">:</span>&nbsp;<span class="num" id="7103697">0</span><span class="op" id="7103698">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103703">Devminor</span><span class="op" id="7103711">:</span>&nbsp;<span class="num" id="7103713">0</span><span class="op" id="7103714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103718">}</span><span class="op" id="7103719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103728">Name</span><span class="op" id="7103732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103738">&#34;end&#34;</span><span class="op" id="7103743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103748">Mode</span><span class="op" id="7103752">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103758">420</span><span class="op" id="7103761">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103766">Uid</span><span class="op" id="7103769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103776">1000</span><span class="op" id="7103780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103785">Gid</span><span class="op" id="7103788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103795">1000</span><span class="op" id="7103799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103804">Size</span><span class="op" id="7103808">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7103814">4</span><span class="op" id="7103815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103820">ModTime</span><span class="op" id="7103827">:</span>&nbsp;&nbsp;<span class="ident" id="7103830">time</span><span class="op" id="7103834">.</span><span class="ident" id="7103835">Unix</span><span class="op" id="7103839">(</span><span class="num" id="7103840">1392398319</span><span class="op" id="7103850">,</span>&nbsp;<span class="num" id="7103852">0</span><span class="op" id="7103853">)</span><span class="op" id="7103854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103859">Typeflag</span><span class="op" id="7103867">:</span>&nbsp;<span class="num" id="7103869">0x30</span><span class="op" id="7103873">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103878">Linkname</span><span class="op" id="7103886">:</span>&nbsp;<span class="string" id="7103888">&#34;&#34;</span><span class="op" id="7103890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103895">Uname</span><span class="op" id="7103900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103905">&#34;david&#34;</span><span class="op" id="7103912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103917">Gname</span><span class="op" id="7103922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7103927">&#34;david&#34;</span><span class="op" id="7103934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103939">Devmajor</span><span class="op" id="7103947">:</span>&nbsp;<span class="num" id="7103949">0</span><span class="op" id="7103950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103955">Devminor</span><span class="op" id="7103963">:</span>&nbsp;<span class="num" id="7103965">0</span><span class="op" id="7103966">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103970">}</span><span class="op" id="7103971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7103974">}</span><span class="op" id="7103975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7103978">cksums</span><span class="op" id="7103984">:</span>&nbsp;<span class="op" id="7103986">[</span><span class="op" id="7103987">]</span><span class="builtintype" id="7103988">string</span><span class="op" id="7103994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7103998">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7104032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7104036">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7104070">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7104074">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7104108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7104112">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7104146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7104150">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7104184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104187">}</span><span class="op" id="7104188">,</span><br>
<span class="lineno"></span><span class="op" id="7104190">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7104193">var</span>&nbsp;<span class="ident" id="7104197">untarTests</span>&nbsp;<span class="op" id="7104208">=</span>&nbsp;<span class="op" id="7104210">[</span><span class="op" id="7104211">]</span><span class="op" id="7104212">*</span><span class="ident" id="7104213">untarTest</span><span class="op" id="7104222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104225">gnuTarTest</span><span class="op" id="7104235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104238">sparseTarTest</span><span class="op" id="7104251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104254">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104258">file</span><span class="op" id="7104262">:</span>&nbsp;<span class="string" id="7104264">&#34;testdata/star.tar&#34;</span><span class="op" id="7104283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104287">headers</span><span class="op" id="7104294">:</span>&nbsp;<span class="op" id="7104296">[</span><span class="op" id="7104297">]</span><span class="op" id="7104298">*</span><span class="ident" id="7104299">Header</span><span class="op" id="7104305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104316">Name</span><span class="op" id="7104320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104328">&#34;small.txt&#34;</span><span class="op" id="7104339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104345">Mode</span><span class="op" id="7104349">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104357">0640</span><span class="op" id="7104361">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104367">Uid</span><span class="op" id="7104370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104379">73025</span><span class="op" id="7104384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104390">Gid</span><span class="op" id="7104393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104402">5000</span><span class="op" id="7104406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104412">Size</span><span class="op" id="7104416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104424">5</span><span class="op" id="7104425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104431">ModTime</span><span class="op" id="7104438">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7104443">time</span><span class="op" id="7104447">.</span><span class="ident" id="7104448">Unix</span><span class="op" id="7104452">(</span><span class="num" id="7104453">1244592783</span><span class="op" id="7104463">,</span>&nbsp;<span class="num" id="7104465">0</span><span class="op" id="7104466">)</span><span class="op" id="7104467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104473">Typeflag</span><span class="op" id="7104481">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7104485">&#39;0&#39;</span><span class="op" id="7104488">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104494">Uname</span><span class="op" id="7104499">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104506">&#34;dsymonds&#34;</span><span class="op" id="7104516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104522">Gname</span><span class="op" id="7104527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104534">&#34;eng&#34;</span><span class="op" id="7104539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104545">AccessTime</span><span class="op" id="7104555">:</span>&nbsp;<span class="ident" id="7104557">time</span><span class="op" id="7104561">.</span><span class="ident" id="7104562">Unix</span><span class="op" id="7104566">(</span><span class="num" id="7104567">1244592783</span><span class="op" id="7104577">,</span>&nbsp;<span class="num" id="7104579">0</span><span class="op" id="7104580">)</span><span class="op" id="7104581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104587">ChangeTime</span><span class="op" id="7104597">:</span>&nbsp;<span class="ident" id="7104599">time</span><span class="op" id="7104603">.</span><span class="ident" id="7104604">Unix</span><span class="op" id="7104608">(</span><span class="num" id="7104609">1244592783</span><span class="op" id="7104619">,</span>&nbsp;<span class="num" id="7104621">0</span><span class="op" id="7104622">)</span><span class="op" id="7104623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104628">}</span><span class="op" id="7104629">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104640">Name</span><span class="op" id="7104644">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104652">&#34;small2.txt&#34;</span><span class="op" id="7104664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104670">Mode</span><span class="op" id="7104674">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104682">0640</span><span class="op" id="7104686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104692">Uid</span><span class="op" id="7104695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104704">73025</span><span class="op" id="7104709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104715">Gid</span><span class="op" id="7104718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104727">5000</span><span class="op" id="7104731">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104737">Size</span><span class="op" id="7104741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7104749">11</span><span class="op" id="7104751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104757">ModTime</span><span class="op" id="7104764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7104769">time</span><span class="op" id="7104773">.</span><span class="ident" id="7104774">Unix</span><span class="op" id="7104778">(</span><span class="num" id="7104779">1244592783</span><span class="op" id="7104789">,</span>&nbsp;<span class="num" id="7104791">0</span><span class="op" id="7104792">)</span><span class="op" id="7104793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104799">Typeflag</span><span class="op" id="7104807">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7104811">&#39;0&#39;</span><span class="op" id="7104814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104820">Uname</span><span class="op" id="7104825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104832">&#34;dsymonds&#34;</span><span class="op" id="7104842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104848">Gname</span><span class="op" id="7104853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7104860">&#34;eng&#34;</span><span class="op" id="7104865">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104871">AccessTime</span><span class="op" id="7104881">:</span>&nbsp;<span class="ident" id="7104883">time</span><span class="op" id="7104887">.</span><span class="ident" id="7104888">Unix</span><span class="op" id="7104892">(</span><span class="num" id="7104893">1244592783</span><span class="op" id="7104903">,</span>&nbsp;<span class="num" id="7104905">0</span><span class="op" id="7104906">)</span><span class="op" id="7104907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104913">ChangeTime</span><span class="op" id="7104923">:</span>&nbsp;<span class="ident" id="7104925">time</span><span class="op" id="7104929">.</span><span class="ident" id="7104930">Unix</span><span class="op" id="7104934">(</span><span class="num" id="7104935">1244592783</span><span class="op" id="7104945">,</span>&nbsp;<span class="num" id="7104947">0</span><span class="op" id="7104948">)</span><span class="op" id="7104949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104954">}</span><span class="op" id="7104955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104959">}</span><span class="op" id="7104960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104963">}</span><span class="op" id="7104964">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7104967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104971">file</span><span class="op" id="7104975">:</span>&nbsp;<span class="string" id="7104977">&#34;testdata/v7.tar&#34;</span><span class="op" id="7104994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7104998">headers</span><span class="op" id="7105005">:</span>&nbsp;<span class="op" id="7105007">[</span><span class="op" id="7105008">]</span><span class="op" id="7105009">*</span><span class="ident" id="7105010">Header</span><span class="op" id="7105016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105027">Name</span><span class="op" id="7105031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105037">&#34;small.txt&#34;</span><span class="op" id="7105048">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105054">Mode</span><span class="op" id="7105058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105064">0444</span><span class="op" id="7105068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105074">Uid</span><span class="op" id="7105077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105084">73025</span><span class="op" id="7105089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105095">Gid</span><span class="op" id="7105098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105105">5000</span><span class="op" id="7105109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105115">Size</span><span class="op" id="7105119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105125">5</span><span class="op" id="7105126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105132">ModTime</span><span class="op" id="7105139">:</span>&nbsp;&nbsp;<span class="ident" id="7105142">time</span><span class="op" id="7105146">.</span><span class="ident" id="7105147">Unix</span><span class="op" id="7105151">(</span><span class="num" id="7105152">1244593104</span><span class="op" id="7105162">,</span>&nbsp;<span class="num" id="7105164">0</span><span class="op" id="7105165">)</span><span class="op" id="7105166">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105172">Typeflag</span><span class="op" id="7105180">:</span>&nbsp;<span class="string" id="7105182">&#39;\x00&#39;</span><span class="op" id="7105188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105193">}</span><span class="op" id="7105194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105205">Name</span><span class="op" id="7105209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105215">&#34;small2.txt&#34;</span><span class="op" id="7105227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105233">Mode</span><span class="op" id="7105237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105243">0444</span><span class="op" id="7105247">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105253">Uid</span><span class="op" id="7105256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105263">73025</span><span class="op" id="7105268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105274">Gid</span><span class="op" id="7105277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105284">5000</span><span class="op" id="7105288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105294">Size</span><span class="op" id="7105298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105304">11</span><span class="op" id="7105306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105312">ModTime</span><span class="op" id="7105319">:</span>&nbsp;&nbsp;<span class="ident" id="7105322">time</span><span class="op" id="7105326">.</span><span class="ident" id="7105327">Unix</span><span class="op" id="7105331">(</span><span class="num" id="7105332">1244593104</span><span class="op" id="7105342">,</span>&nbsp;<span class="num" id="7105344">0</span><span class="op" id="7105345">)</span><span class="op" id="7105346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105352">Typeflag</span><span class="op" id="7105360">:</span>&nbsp;<span class="string" id="7105362">&#39;\x00&#39;</span><span class="op" id="7105368">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105373">}</span><span class="op" id="7105374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105378">}</span><span class="op" id="7105379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105382">}</span><span class="op" id="7105383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105390">file</span><span class="op" id="7105394">:</span>&nbsp;<span class="string" id="7105396">&#34;testdata/pax.tar&#34;</span><span class="op" id="7105414">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105418">headers</span><span class="op" id="7105425">:</span>&nbsp;<span class="op" id="7105427">[</span><span class="op" id="7105428">]</span><span class="op" id="7105429">*</span><span class="ident" id="7105430">Header</span><span class="op" id="7105436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105447">Name</span><span class="op" id="7105451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105459">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7105655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105661">Mode</span><span class="op" id="7105665">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105673">0664</span><span class="op" id="7105677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105683">Uid</span><span class="op" id="7105686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105695">1000</span><span class="op" id="7105699">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105705">Gid</span><span class="op" id="7105708">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105717">1000</span><span class="op" id="7105721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105727">Uname</span><span class="op" id="7105732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105739">&#34;shane&#34;</span><span class="op" id="7105746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105752">Gname</span><span class="op" id="7105757">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105764">&#34;shane&#34;</span><span class="op" id="7105771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105777">Size</span><span class="op" id="7105781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7105789">7</span><span class="op" id="7105790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105796">ModTime</span><span class="op" id="7105803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7105808">time</span><span class="op" id="7105812">.</span><span class="ident" id="7105813">Unix</span><span class="op" id="7105817">(</span><span class="num" id="7105818">1350244992</span><span class="op" id="7105828">,</span>&nbsp;<span class="num" id="7105830">23960108</span><span class="op" id="7105838">)</span><span class="op" id="7105839">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105845">ChangeTime</span><span class="op" id="7105855">:</span>&nbsp;<span class="ident" id="7105857">time</span><span class="op" id="7105861">.</span><span class="ident" id="7105862">Unix</span><span class="op" id="7105866">(</span><span class="num" id="7105867">1350244992</span><span class="op" id="7105877">,</span>&nbsp;<span class="num" id="7105879">23960108</span><span class="op" id="7105887">)</span><span class="op" id="7105888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105894">AccessTime</span><span class="op" id="7105904">:</span>&nbsp;<span class="ident" id="7105906">time</span><span class="op" id="7105910">.</span><span class="ident" id="7105911">Unix</span><span class="op" id="7105915">(</span><span class="num" id="7105916">1350244992</span><span class="op" id="7105926">,</span>&nbsp;<span class="num" id="7105928">23960108</span><span class="op" id="7105936">)</span><span class="op" id="7105937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105943">Typeflag</span><span class="op" id="7105951">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7105955">TypeReg</span><span class="op" id="7105962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105967">}</span><span class="op" id="7105968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7105973">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7105979">Name</span><span class="op" id="7105983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7105991">&#34;a/b&#34;</span><span class="op" id="7105996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106002">Mode</span><span class="op" id="7106006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106014">0777</span><span class="op" id="7106018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106024">Uid</span><span class="op" id="7106027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106036">1000</span><span class="op" id="7106040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106046">Gid</span><span class="op" id="7106049">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106058">1000</span><span class="op" id="7106062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106068">Uname</span><span class="op" id="7106073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106080">&#34;shane&#34;</span><span class="op" id="7106087">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106093">Gname</span><span class="op" id="7106098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106105">&#34;shane&#34;</span><span class="op" id="7106112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106118">Size</span><span class="op" id="7106122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106130">0</span><span class="op" id="7106131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106137">ModTime</span><span class="op" id="7106144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7106149">time</span><span class="op" id="7106153">.</span><span class="ident" id="7106154">Unix</span><span class="op" id="7106158">(</span><span class="num" id="7106159">1350266320</span><span class="op" id="7106169">,</span>&nbsp;<span class="num" id="7106171">910238425</span><span class="op" id="7106180">)</span><span class="op" id="7106181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106187">ChangeTime</span><span class="op" id="7106197">:</span>&nbsp;<span class="ident" id="7106199">time</span><span class="op" id="7106203">.</span><span class="ident" id="7106204">Unix</span><span class="op" id="7106208">(</span><span class="num" id="7106209">1350266320</span><span class="op" id="7106219">,</span>&nbsp;<span class="num" id="7106221">910238425</span><span class="op" id="7106230">)</span><span class="op" id="7106231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106237">AccessTime</span><span class="op" id="7106247">:</span>&nbsp;<span class="ident" id="7106249">time</span><span class="op" id="7106253">.</span><span class="ident" id="7106254">Unix</span><span class="op" id="7106258">(</span><span class="num" id="7106259">1350266320</span><span class="op" id="7106269">,</span>&nbsp;<span class="num" id="7106271">910238425</span><span class="op" id="7106280">)</span><span class="op" id="7106281">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106287">Typeflag</span><span class="op" id="7106295">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7106299">TypeSymlink</span><span class="op" id="7106310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106316">Linkname</span><span class="op" id="7106324">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7106328">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7106522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106527">}</span><span class="op" id="7106528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106532">}</span><span class="op" id="7106533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106536">}</span><span class="op" id="7106537">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106544">file</span><span class="op" id="7106548">:</span>&nbsp;<span class="string" id="7106550">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7106572">,</span>&nbsp;<span class="comment" id="7106574">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106601">headers</span><span class="op" id="7106608">:</span>&nbsp;<span class="op" id="7106610">[</span><span class="op" id="7106611">]</span><span class="op" id="7106612">*</span><span class="ident" id="7106613">Header</span><span class="op" id="7106619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106630">Name</span><span class="op" id="7106634">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106640">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7106658">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106664">Mode</span><span class="op" id="7106668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106674">0664</span><span class="op" id="7106678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106684">Uid</span><span class="op" id="7106687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106694">0</span><span class="op" id="7106695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106701">Gid</span><span class="op" id="7106704">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106711">0</span><span class="op" id="7106712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106718">Size</span><span class="op" id="7106722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7106728">14</span><span class="op" id="7106730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106736">ModTime</span><span class="op" id="7106743">:</span>&nbsp;&nbsp;<span class="ident" id="7106746">time</span><span class="op" id="7106750">.</span><span class="ident" id="7106751">Unix</span><span class="op" id="7106755">(</span><span class="num" id="7106756">1365454838</span><span class="op" id="7106766">,</span>&nbsp;<span class="num" id="7106768">0</span><span class="op" id="7106769">)</span><span class="op" id="7106770">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106776">Typeflag</span><span class="op" id="7106784">:</span>&nbsp;<span class="ident" id="7106786">TypeReg</span><span class="op" id="7106793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106799">Linkname</span><span class="op" id="7106807">:</span>&nbsp;<span class="string" id="7106809">&#34;&#34;</span><span class="op" id="7106811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106817">Uname</span><span class="op" id="7106822">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106827">&#34;eyefi&#34;</span><span class="op" id="7106834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106840">Gname</span><span class="op" id="7106845">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106850">&#34;eyefi&#34;</span><span class="op" id="7106857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106863">Devmajor</span><span class="op" id="7106871">:</span>&nbsp;<span class="num" id="7106873">0</span><span class="op" id="7106874">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106880">Devminor</span><span class="op" id="7106888">:</span>&nbsp;<span class="num" id="7106890">0</span><span class="op" id="7106891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106896">}</span><span class="op" id="7106897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106901">}</span><span class="op" id="7106902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106905">}</span><span class="op" id="7106906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106909">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106913">file</span><span class="op" id="7106917">:</span>&nbsp;<span class="string" id="7106919">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7106940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106944">headers</span><span class="op" id="7106951">:</span>&nbsp;<span class="op" id="7106953">[</span><span class="op" id="7106954">]</span><span class="op" id="7106955">*</span><span class="ident" id="7106956">Header</span><span class="op" id="7106962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7106967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7106973">Name</span><span class="op" id="7106977">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106985">&#34;small.txt&#34;</span><span class="op" id="7106996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107002">Mode</span><span class="op" id="7107006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107014">0644</span><span class="op" id="7107018">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107024">Uid</span><span class="op" id="7107027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107036">1000</span><span class="op" id="7107040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107046">Gid</span><span class="op" id="7107049">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107058">10</span><span class="op" id="7107060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107066">Size</span><span class="op" id="7107070">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107078">5</span><span class="op" id="7107079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107085">ModTime</span><span class="op" id="7107092">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107097">time</span><span class="op" id="7107101">.</span><span class="ident" id="7107102">Unix</span><span class="op" id="7107106">(</span><span class="num" id="7107107">1386065770</span><span class="op" id="7107117">,</span>&nbsp;<span class="num" id="7107119">448252320</span><span class="op" id="7107128">)</span><span class="op" id="7107129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107135">Typeflag</span><span class="op" id="7107143">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7107147">&#39;0&#39;</span><span class="op" id="7107150">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107156">Uname</span><span class="op" id="7107161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7107168">&#34;alex&#34;</span><span class="op" id="7107174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107180">Gname</span><span class="op" id="7107185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7107192">&#34;wheel&#34;</span><span class="op" id="7107199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107205">AccessTime</span><span class="op" id="7107215">:</span>&nbsp;<span class="ident" id="7107217">time</span><span class="op" id="7107221">.</span><span class="ident" id="7107222">Unix</span><span class="op" id="7107226">(</span><span class="num" id="7107227">1389782991</span><span class="op" id="7107237">,</span>&nbsp;<span class="num" id="7107239">419875220</span><span class="op" id="7107248">)</span><span class="op" id="7107249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107255">ChangeTime</span><span class="op" id="7107265">:</span>&nbsp;<span class="ident" id="7107267">time</span><span class="op" id="7107271">.</span><span class="ident" id="7107272">Unix</span><span class="op" id="7107276">(</span><span class="num" id="7107277">1389782956</span><span class="op" id="7107287">,</span>&nbsp;<span class="num" id="7107289">794414986</span><span class="op" id="7107298">)</span><span class="op" id="7107299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107305">Xattrs</span><span class="op" id="7107311">:</span>&nbsp;<span class="keyword" id="7107313">map</span><span class="op" id="7107316">[</span><span class="builtintype" id="7107317">string</span><span class="op" id="7107323">]</span><span class="builtintype" id="7107324">string</span><span class="op" id="7107330">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7107337">&#34;user.key&#34;</span><span class="op" id="7107347">:</span>&nbsp;&nbsp;<span class="string" id="7107350">&#34;value&#34;</span><span class="op" id="7107357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7107364">&#34;user.key2&#34;</span><span class="op" id="7107375">:</span>&nbsp;<span class="string" id="7107377">&#34;value2&#34;</span><span class="op" id="7107385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7107392">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7107469">&#34;security.selinux&#34;</span><span class="op" id="7107487">:</span>&nbsp;<span class="string" id="7107489">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7107529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107535">}</span><span class="op" id="7107536">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107541">}</span><span class="op" id="7107542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107553">Name</span><span class="op" id="7107557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7107565">&#34;small2.txt&#34;</span><span class="op" id="7107577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107583">Mode</span><span class="op" id="7107587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107595">0644</span><span class="op" id="7107599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107605">Uid</span><span class="op" id="7107608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107617">1000</span><span class="op" id="7107621">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107627">Gid</span><span class="op" id="7107630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107639">10</span><span class="op" id="7107641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107647">Size</span><span class="op" id="7107651">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7107659">11</span><span class="op" id="7107661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107667">ModTime</span><span class="op" id="7107674">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107679">time</span><span class="op" id="7107683">.</span><span class="ident" id="7107684">Unix</span><span class="op" id="7107688">(</span><span class="num" id="7107689">1386065770</span><span class="op" id="7107699">,</span>&nbsp;<span class="num" id="7107701">449252304</span><span class="op" id="7107710">)</span><span class="op" id="7107711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107717">Typeflag</span><span class="op" id="7107725">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7107729">&#39;0&#39;</span><span class="op" id="7107732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107738">Uname</span><span class="op" id="7107743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7107750">&#34;alex&#34;</span><span class="op" id="7107756">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107762">Gname</span><span class="op" id="7107767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7107774">&#34;wheel&#34;</span><span class="op" id="7107781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107787">AccessTime</span><span class="op" id="7107797">:</span>&nbsp;<span class="ident" id="7107799">time</span><span class="op" id="7107803">.</span><span class="ident" id="7107804">Unix</span><span class="op" id="7107808">(</span><span class="num" id="7107809">1389782991</span><span class="op" id="7107819">,</span>&nbsp;<span class="num" id="7107821">419875220</span><span class="op" id="7107830">)</span><span class="op" id="7107831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107837">ChangeTime</span><span class="op" id="7107847">:</span>&nbsp;<span class="ident" id="7107849">time</span><span class="op" id="7107853">.</span><span class="ident" id="7107854">Unix</span><span class="op" id="7107858">(</span><span class="num" id="7107859">1386065770</span><span class="op" id="7107869">,</span>&nbsp;<span class="num" id="7107871">449252304</span><span class="op" id="7107880">)</span><span class="op" id="7107881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7107887">Xattrs</span><span class="op" id="7107893">:</span>&nbsp;<span class="keyword" id="7107895">map</span><span class="op" id="7107898">[</span><span class="builtintype" id="7107899">string</span><span class="op" id="7107905">]</span><span class="builtintype" id="7107906">string</span><span class="op" id="7107912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7107919">&#34;security.selinux&#34;</span><span class="op" id="7107937">:</span>&nbsp;<span class="string" id="7107939">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7107979">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107985">}</span><span class="op" id="7107986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107991">}</span><span class="op" id="7107992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7107996">}</span><span class="op" id="7107997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108000">}</span><span class="op" id="7108001">,</span><br>
<span class="lineno"></span><span class="op" id="7108003">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7108006">func</span>&nbsp;<span class="ident" id="7108011">TestReader</span><span class="op" id="7108021">(</span><span class="ident" id="7108022">t</span>&nbsp;<span class="op" id="7108024">*</span><span class="ident" id="7108025">testing</span><span class="op" id="7108032">.</span><span class="ident" id="7108033">T</span><span class="op" id="7108034">)</span>&nbsp;<span class="op" id="7108036">{</span><br>
<span class="lineno"></span><span class="ident" id="7108038">testLoop</span><span class="op" id="7108046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108049">for</span>&nbsp;<span class="ident" id="7108053">i</span><span class="op" id="7108054">,</span>&nbsp;<span class="ident" id="7108056">test</span>&nbsp;<span class="op" id="7108061">:=</span>&nbsp;<span class="keyword" id="7108064">range</span>&nbsp;<span class="ident" id="7108070">untarTests</span>&nbsp;<span class="op" id="7108081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108085">f</span><span class="op" id="7108086">,</span>&nbsp;<span class="ident" id="7108088">err</span>&nbsp;<span class="op" id="7108092">:=</span>&nbsp;<span class="ident" id="7108095">os</span><span class="op" id="7108097">.</span><span class="ident" id="7108098">Open</span><span class="op" id="7108102">(</span><span class="ident" id="7108103">test</span><span class="op" id="7108107">.</span><span class="ident" id="7108108">file</span><span class="op" id="7108112">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108116">if</span>&nbsp;<span class="ident" id="7108119">err</span>&nbsp;<span class="op" id="7108123">!=</span>&nbsp;<span class="ident" id="7108126">nil</span>&nbsp;<span class="op" id="7108130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108135">t</span><span class="op" id="7108136">.</span><span class="ident" id="7108137">Errorf</span><span class="op" id="7108143">(</span><span class="string" id="7108144">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7108175">,</span>&nbsp;<span class="ident" id="7108177">i</span><span class="op" id="7108178">,</span>&nbsp;<span class="ident" id="7108180">err</span><span class="op" id="7108183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108188">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108203">defer</span>&nbsp;<span class="ident" id="7108209">f</span><span class="op" id="7108210">.</span><span class="ident" id="7108211">Close</span><span class="op" id="7108216">(</span><span class="op" id="7108217">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108221">tr</span>&nbsp;<span class="op" id="7108224">:=</span>&nbsp;<span class="ident" id="7108227">NewReader</span><span class="op" id="7108236">(</span><span class="ident" id="7108237">f</span><span class="op" id="7108238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108242">for</span>&nbsp;<span class="ident" id="7108246">j</span><span class="op" id="7108247">,</span>&nbsp;<span class="ident" id="7108249">header</span>&nbsp;<span class="op" id="7108256">:=</span>&nbsp;<span class="keyword" id="7108259">range</span>&nbsp;<span class="ident" id="7108265">test</span><span class="op" id="7108269">.</span><span class="ident" id="7108270">headers</span>&nbsp;<span class="op" id="7108278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108283">hdr</span><span class="op" id="7108286">,</span>&nbsp;<span class="ident" id="7108288">err</span>&nbsp;<span class="op" id="7108292">:=</span>&nbsp;<span class="ident" id="7108295">tr</span><span class="op" id="7108297">.</span><span class="ident" id="7108298">Next</span><span class="op" id="7108302">(</span><span class="op" id="7108303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108308">if</span>&nbsp;<span class="ident" id="7108311">err</span>&nbsp;<span class="op" id="7108315">!=</span>&nbsp;<span class="ident" id="7108318">nil</span>&nbsp;<span class="op" id="7108322">||</span>&nbsp;<span class="ident" id="7108325">hdr</span>&nbsp;<span class="op" id="7108329">==</span>&nbsp;<span class="ident" id="7108332">nil</span>&nbsp;<span class="op" id="7108336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108342">t</span><span class="op" id="7108343">.</span><span class="ident" id="7108344">Errorf</span><span class="op" id="7108350">(</span><span class="string" id="7108351">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7108392">,</span>&nbsp;<span class="ident" id="7108394">i</span><span class="op" id="7108395">,</span>&nbsp;<span class="ident" id="7108397">j</span><span class="op" id="7108398">,</span>&nbsp;<span class="ident" id="7108400">err</span><span class="op" id="7108403">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108409">f</span><span class="op" id="7108410">.</span><span class="ident" id="7108411">Close</span><span class="op" id="7108416">(</span><span class="op" id="7108417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108423">continue</span>&nbsp;<span class="ident" id="7108432">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108449">if</span>&nbsp;<span class="op" id="7108452">!</span><span class="ident" id="7108453">reflect</span><span class="op" id="7108460">.</span><span class="ident" id="7108461">DeepEqual</span><span class="op" id="7108470">(</span><span class="op" id="7108471">*</span><span class="ident" id="7108472">hdr</span><span class="op" id="7108475">,</span>&nbsp;<span class="op" id="7108477">*</span><span class="ident" id="7108478">header</span><span class="op" id="7108484">)</span>&nbsp;<span class="op" id="7108486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108492">t</span><span class="op" id="7108493">.</span><span class="ident" id="7108494">Errorf</span><span class="op" id="7108500">(</span><span class="string" id="7108501">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7108559">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108566">i</span><span class="op" id="7108567">,</span>&nbsp;<span class="ident" id="7108569">j</span><span class="op" id="7108570">,</span>&nbsp;<span class="op" id="7108572">*</span><span class="ident" id="7108573">hdr</span><span class="op" id="7108576">,</span>&nbsp;<span class="op" id="7108578">*</span><span class="ident" id="7108579">header</span><span class="op" id="7108585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108598">hdr</span><span class="op" id="7108601">,</span>&nbsp;<span class="ident" id="7108603">err</span>&nbsp;<span class="op" id="7108607">:=</span>&nbsp;<span class="ident" id="7108610">tr</span><span class="op" id="7108612">.</span><span class="ident" id="7108613">Next</span><span class="op" id="7108617">(</span><span class="op" id="7108618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108622">if</span>&nbsp;<span class="ident" id="7108625">err</span>&nbsp;<span class="op" id="7108629">==</span>&nbsp;<span class="ident" id="7108632">io</span><span class="op" id="7108634">.</span><span class="ident" id="7108635">EOF</span>&nbsp;<span class="op" id="7108639">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108644">continue</span>&nbsp;<span class="ident" id="7108653">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108668">if</span>&nbsp;<span class="ident" id="7108671">hdr</span>&nbsp;<span class="op" id="7108675">!=</span>&nbsp;<span class="ident" id="7108678">nil</span>&nbsp;<span class="op" id="7108682">||</span>&nbsp;<span class="ident" id="7108685">err</span>&nbsp;<span class="op" id="7108689">!=</span>&nbsp;<span class="ident" id="7108692">nil</span>&nbsp;<span class="op" id="7108696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108701">t</span><span class="op" id="7108702">.</span><span class="ident" id="7108703">Errorf</span><span class="op" id="7108709">(</span><span class="string" id="7108710">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7108761">,</span>&nbsp;<span class="ident" id="7108763">i</span><span class="op" id="7108764">,</span>&nbsp;<span class="ident" id="7108766">hdr</span><span class="op" id="7108769">,</span>&nbsp;<span class="ident" id="7108771">err</span><span class="op" id="7108774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108778">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108781">}</span><br>
<span class="lineno"></span><span class="op" id="7108783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7108786">func</span>&nbsp;<span class="ident" id="7108791">TestPartialRead</span><span class="op" id="7108806">(</span><span class="ident" id="7108807">t</span>&nbsp;<span class="op" id="7108809">*</span><span class="ident" id="7108810">testing</span><span class="op" id="7108817">.</span><span class="ident" id="7108818">T</span><span class="op" id="7108819">)</span>&nbsp;<span class="op" id="7108821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108824">f</span><span class="op" id="7108825">,</span>&nbsp;<span class="ident" id="7108827">err</span>&nbsp;<span class="op" id="7108831">:=</span>&nbsp;<span class="ident" id="7108834">os</span><span class="op" id="7108836">.</span><span class="ident" id="7108837">Open</span><span class="op" id="7108841">(</span><span class="string" id="7108842">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7108860">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108863">if</span>&nbsp;<span class="ident" id="7108866">err</span>&nbsp;<span class="op" id="7108870">!=</span>&nbsp;<span class="ident" id="7108873">nil</span>&nbsp;<span class="op" id="7108877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108881">t</span><span class="op" id="7108882">.</span><span class="ident" id="7108883">Fatalf</span><span class="op" id="7108889">(</span><span class="string" id="7108890">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7108912">,</span>&nbsp;<span class="ident" id="7108914">err</span><span class="op" id="7108917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7108920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7108923">defer</span>&nbsp;<span class="ident" id="7108929">f</span><span class="op" id="7108930">.</span><span class="ident" id="7108931">Close</span><span class="op" id="7108936">(</span><span class="op" id="7108937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7108941">tr</span>&nbsp;<span class="op" id="7108944">:=</span>&nbsp;<span class="ident" id="7108947">NewReader</span><span class="op" id="7108956">(</span><span class="ident" id="7108957">f</span><span class="op" id="7108958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7108962">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109027">hdr</span><span class="op" id="7109030">,</span>&nbsp;<span class="ident" id="7109032">err</span>&nbsp;<span class="op" id="7109036">:=</span>&nbsp;<span class="ident" id="7109039">tr</span><span class="op" id="7109041">.</span><span class="ident" id="7109042">Next</span><span class="op" id="7109046">(</span><span class="op" id="7109047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109050">if</span>&nbsp;<span class="ident" id="7109053">err</span>&nbsp;<span class="op" id="7109057">!=</span>&nbsp;<span class="ident" id="7109060">nil</span>&nbsp;<span class="op" id="7109064">||</span>&nbsp;<span class="ident" id="7109067">hdr</span>&nbsp;<span class="op" id="7109071">==</span>&nbsp;<span class="ident" id="7109074">nil</span>&nbsp;<span class="op" id="7109078">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109082">t</span><span class="op" id="7109083">.</span><span class="ident" id="7109084">Fatalf</span><span class="op" id="7109090">(</span><span class="string" id="7109091">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7109118">,</span>&nbsp;<span class="ident" id="7109120">err</span><span class="op" id="7109123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109129">buf</span>&nbsp;<span class="op" id="7109133">:=</span>&nbsp;<span class="builtinfunc" id="7109136">make</span><span class="op" id="7109140">(</span><span class="op" id="7109141">[</span><span class="op" id="7109142">]</span><span class="builtintype" id="7109143">byte</span><span class="op" id="7109147">,</span>&nbsp;<span class="num" id="7109149">4</span><span class="op" id="7109150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109153">if</span>&nbsp;<span class="ident" id="7109156">_</span><span class="op" id="7109157">,</span>&nbsp;<span class="ident" id="7109159">err</span>&nbsp;<span class="op" id="7109163">:=</span>&nbsp;<span class="ident" id="7109166">io</span><span class="op" id="7109168">.</span><span class="ident" id="7109169">ReadFull</span><span class="op" id="7109177">(</span><span class="ident" id="7109178">tr</span><span class="op" id="7109180">,</span>&nbsp;<span class="ident" id="7109182">buf</span><span class="op" id="7109185">)</span><span class="op" id="7109186">;</span>&nbsp;<span class="ident" id="7109188">err</span>&nbsp;<span class="op" id="7109192">!=</span>&nbsp;<span class="ident" id="7109195">nil</span>&nbsp;<span class="op" id="7109199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109203">t</span><span class="op" id="7109204">.</span><span class="ident" id="7109205">Fatalf</span><span class="op" id="7109211">(</span><span class="string" id="7109212">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7109234">,</span>&nbsp;<span class="ident" id="7109236">err</span><span class="op" id="7109239">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109245">if</span>&nbsp;<span class="ident" id="7109248">expected</span>&nbsp;<span class="op" id="7109257">:=</span>&nbsp;<span class="op" id="7109260">[</span><span class="op" id="7109261">]</span><span class="builtintype" id="7109262">byte</span><span class="op" id="7109266">(</span><span class="string" id="7109267">&#34;Kilt&#34;</span><span class="op" id="7109273">)</span><span class="op" id="7109274">;</span>&nbsp;<span class="op" id="7109276">!</span><span class="ident" id="7109277">bytes</span><span class="op" id="7109282">.</span><span class="ident" id="7109283">Equal</span><span class="op" id="7109288">(</span><span class="ident" id="7109289">buf</span><span class="op" id="7109292">,</span>&nbsp;<span class="ident" id="7109294">expected</span><span class="op" id="7109302">)</span>&nbsp;<span class="op" id="7109304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109308">t</span><span class="op" id="7109309">.</span><span class="ident" id="7109310">Errorf</span><span class="op" id="7109316">(</span><span class="string" id="7109317">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7109341">,</span>&nbsp;<span class="ident" id="7109343">buf</span><span class="op" id="7109346">,</span>&nbsp;<span class="ident" id="7109348">expected</span><span class="op" id="7109356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7109363">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109379">hdr</span><span class="op" id="7109382">,</span>&nbsp;<span class="ident" id="7109384">err</span>&nbsp;<span class="op" id="7109388">=</span>&nbsp;<span class="ident" id="7109390">tr</span><span class="op" id="7109392">.</span><span class="ident" id="7109393">Next</span><span class="op" id="7109397">(</span><span class="op" id="7109398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109401">if</span>&nbsp;<span class="ident" id="7109404">err</span>&nbsp;<span class="op" id="7109408">!=</span>&nbsp;<span class="ident" id="7109411">nil</span>&nbsp;<span class="op" id="7109415">||</span>&nbsp;<span class="ident" id="7109418">hdr</span>&nbsp;<span class="op" id="7109422">==</span>&nbsp;<span class="ident" id="7109425">nil</span>&nbsp;<span class="op" id="7109429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109433">t</span><span class="op" id="7109434">.</span><span class="ident" id="7109435">Fatalf</span><span class="op" id="7109441">(</span><span class="string" id="7109442">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7109470">,</span>&nbsp;<span class="ident" id="7109472">err</span><span class="op" id="7109475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109478">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109481">buf</span>&nbsp;<span class="op" id="7109485">=</span>&nbsp;<span class="builtinfunc" id="7109487">make</span><span class="op" id="7109491">(</span><span class="op" id="7109492">[</span><span class="op" id="7109493">]</span><span class="builtintype" id="7109494">byte</span><span class="op" id="7109498">,</span>&nbsp;<span class="num" id="7109500">6</span><span class="op" id="7109501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109504">if</span>&nbsp;<span class="ident" id="7109507">_</span><span class="op" id="7109508">,</span>&nbsp;<span class="ident" id="7109510">err</span>&nbsp;<span class="op" id="7109514">:=</span>&nbsp;<span class="ident" id="7109517">io</span><span class="op" id="7109519">.</span><span class="ident" id="7109520">ReadFull</span><span class="op" id="7109528">(</span><span class="ident" id="7109529">tr</span><span class="op" id="7109531">,</span>&nbsp;<span class="ident" id="7109533">buf</span><span class="op" id="7109536">)</span><span class="op" id="7109537">;</span>&nbsp;<span class="ident" id="7109539">err</span>&nbsp;<span class="op" id="7109543">!=</span>&nbsp;<span class="ident" id="7109546">nil</span>&nbsp;<span class="op" id="7109550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109554">t</span><span class="op" id="7109555">.</span><span class="ident" id="7109556">Fatalf</span><span class="op" id="7109562">(</span><span class="string" id="7109563">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7109585">,</span>&nbsp;<span class="ident" id="7109587">err</span><span class="op" id="7109590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109596">if</span>&nbsp;<span class="ident" id="7109599">expected</span>&nbsp;<span class="op" id="7109608">:=</span>&nbsp;<span class="op" id="7109611">[</span><span class="op" id="7109612">]</span><span class="builtintype" id="7109613">byte</span><span class="op" id="7109617">(</span><span class="string" id="7109618">&#34;Google&#34;</span><span class="op" id="7109626">)</span><span class="op" id="7109627">;</span>&nbsp;<span class="op" id="7109629">!</span><span class="ident" id="7109630">bytes</span><span class="op" id="7109635">.</span><span class="ident" id="7109636">Equal</span><span class="op" id="7109641">(</span><span class="ident" id="7109642">buf</span><span class="op" id="7109645">,</span>&nbsp;<span class="ident" id="7109647">expected</span><span class="op" id="7109655">)</span>&nbsp;<span class="op" id="7109657">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109661">t</span><span class="op" id="7109662">.</span><span class="ident" id="7109663">Errorf</span><span class="op" id="7109669">(</span><span class="string" id="7109670">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7109694">,</span>&nbsp;<span class="ident" id="7109696">buf</span><span class="op" id="7109699">,</span>&nbsp;<span class="ident" id="7109701">expected</span><span class="op" id="7109709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109712">}</span><br>
<span class="lineno"></span><span class="op" id="7109714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7109717">func</span>&nbsp;<span class="ident" id="7109722">TestIncrementalRead</span><span class="op" id="7109741">(</span><span class="ident" id="7109742">t</span>&nbsp;<span class="op" id="7109744">*</span><span class="ident" id="7109745">testing</span><span class="op" id="7109752">.</span><span class="ident" id="7109753">T</span><span class="op" id="7109754">)</span>&nbsp;<span class="op" id="7109756">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109759">test</span>&nbsp;<span class="op" id="7109764">:=</span>&nbsp;<span class="ident" id="7109767">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109779">f</span><span class="op" id="7109780">,</span>&nbsp;<span class="ident" id="7109782">err</span>&nbsp;<span class="op" id="7109786">:=</span>&nbsp;<span class="ident" id="7109789">os</span><span class="op" id="7109791">.</span><span class="ident" id="7109792">Open</span><span class="op" id="7109796">(</span><span class="ident" id="7109797">test</span><span class="op" id="7109801">.</span><span class="ident" id="7109802">file</span><span class="op" id="7109806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109809">if</span>&nbsp;<span class="ident" id="7109812">err</span>&nbsp;<span class="op" id="7109816">!=</span>&nbsp;<span class="ident" id="7109819">nil</span>&nbsp;<span class="op" id="7109823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109827">t</span><span class="op" id="7109828">.</span><span class="ident" id="7109829">Fatalf</span><span class="op" id="7109835">(</span><span class="string" id="7109836">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7109858">,</span>&nbsp;<span class="ident" id="7109860">err</span><span class="op" id="7109863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7109866">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109869">defer</span>&nbsp;<span class="ident" id="7109875">f</span><span class="op" id="7109876">.</span><span class="ident" id="7109877">Close</span><span class="op" id="7109882">(</span><span class="op" id="7109883">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109887">tr</span>&nbsp;<span class="op" id="7109890">:=</span>&nbsp;<span class="ident" id="7109893">NewReader</span><span class="op" id="7109902">(</span><span class="ident" id="7109903">f</span><span class="op" id="7109904">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109908">headers</span>&nbsp;<span class="op" id="7109916">:=</span>&nbsp;<span class="ident" id="7109919">test</span><span class="op" id="7109923">.</span><span class="ident" id="7109924">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109933">cksums</span>&nbsp;<span class="op" id="7109940">:=</span>&nbsp;<span class="ident" id="7109943">test</span><span class="op" id="7109947">.</span><span class="ident" id="7109948">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7109956">nread</span>&nbsp;<span class="op" id="7109962">:=</span>&nbsp;<span class="num" id="7109965">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7109969">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7109993">for</span>&nbsp;<span class="op" id="7109997">;</span>&nbsp;<span class="op" id="7109999">;</span>&nbsp;<span class="ident" id="7110001">nread</span><span class="op" id="7110006">++</span>&nbsp;<span class="op" id="7110009">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110013">hdr</span><span class="op" id="7110016">,</span>&nbsp;<span class="ident" id="7110018">err</span>&nbsp;<span class="op" id="7110022">:=</span>&nbsp;<span class="ident" id="7110025">tr</span><span class="op" id="7110027">.</span><span class="ident" id="7110028">Next</span><span class="op" id="7110032">(</span><span class="op" id="7110033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110037">if</span>&nbsp;<span class="ident" id="7110040">hdr</span>&nbsp;<span class="op" id="7110044">==</span>&nbsp;<span class="ident" id="7110047">nil</span>&nbsp;<span class="op" id="7110051">||</span>&nbsp;<span class="ident" id="7110054">err</span>&nbsp;<span class="op" id="7110058">==</span>&nbsp;<span class="ident" id="7110061">io</span><span class="op" id="7110063">.</span><span class="ident" id="7110064">EOF</span>&nbsp;<span class="op" id="7110068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110073">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7110086">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110108">if</span>&nbsp;<span class="op" id="7110111">!</span><span class="ident" id="7110112">reflect</span><span class="op" id="7110119">.</span><span class="ident" id="7110120">DeepEqual</span><span class="op" id="7110129">(</span><span class="op" id="7110130">*</span><span class="ident" id="7110131">hdr</span><span class="op" id="7110134">,</span>&nbsp;<span class="op" id="7110136">*</span><span class="ident" id="7110137">headers</span><span class="op" id="7110144">[</span><span class="ident" id="7110145">nread</span><span class="op" id="7110150">]</span><span class="op" id="7110151">)</span>&nbsp;<span class="op" id="7110153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110158">t</span><span class="op" id="7110159">.</span><span class="ident" id="7110160">Errorf</span><span class="op" id="7110166">(</span><span class="string" id="7110167">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7110206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110212">*</span><span class="ident" id="7110213">hdr</span><span class="op" id="7110216">,</span>&nbsp;<span class="ident" id="7110218">headers</span><span class="op" id="7110225">[</span><span class="ident" id="7110226">nread</span><span class="op" id="7110231">]</span><span class="op" id="7110232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110236">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7110241">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7110287">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110317">h</span>&nbsp;<span class="op" id="7110319">:=</span>&nbsp;<span class="ident" id="7110322">md5</span><span class="op" id="7110325">.</span><span class="ident" id="7110326">New</span><span class="op" id="7110329">(</span><span class="op" id="7110330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110334">rdbuf</span>&nbsp;<span class="op" id="7110340">:=</span>&nbsp;<span class="builtinfunc" id="7110343">make</span><span class="op" id="7110347">(</span><span class="op" id="7110348">[</span><span class="op" id="7110349">]</span><span class="builtintype" id="7110350">uint8</span><span class="op" id="7110355">,</span>&nbsp;<span class="num" id="7110357">8</span><span class="op" id="7110358">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110362">for</span>&nbsp;<span class="op" id="7110366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110371">nr</span><span class="op" id="7110373">,</span>&nbsp;<span class="ident" id="7110375">err</span>&nbsp;<span class="op" id="7110379">:=</span>&nbsp;<span class="ident" id="7110382">tr</span><span class="op" id="7110384">.</span><span class="ident" id="7110385">Read</span><span class="op" id="7110389">(</span><span class="ident" id="7110390">rdbuf</span><span class="op" id="7110395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110400">if</span>&nbsp;<span class="ident" id="7110403">err</span>&nbsp;<span class="op" id="7110407">==</span>&nbsp;<span class="ident" id="7110410">io</span><span class="op" id="7110412">.</span><span class="ident" id="7110413">EOF</span>&nbsp;<span class="op" id="7110417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110423">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110432">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110437">if</span>&nbsp;<span class="ident" id="7110440">err</span>&nbsp;<span class="op" id="7110444">!=</span>&nbsp;<span class="ident" id="7110447">nil</span>&nbsp;<span class="op" id="7110451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110457">t</span><span class="op" id="7110458">.</span><span class="ident" id="7110459">Errorf</span><span class="op" id="7110465">(</span><span class="string" id="7110466">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7110495">,</span>&nbsp;<span class="ident" id="7110497">err</span><span class="op" id="7110500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110506">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110520">h</span><span class="op" id="7110521">.</span><span class="ident" id="7110522">Write</span><span class="op" id="7110527">(</span><span class="ident" id="7110528">rdbuf</span><span class="op" id="7110533">[</span><span class="num" id="7110534">0</span><span class="op" id="7110535">:</span><span class="ident" id="7110536">nr</span><span class="op" id="7110538">]</span><span class="op" id="7110539">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7110547">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110568">have</span>&nbsp;<span class="op" id="7110573">:=</span>&nbsp;<span class="ident" id="7110576">fmt</span><span class="op" id="7110579">.</span><span class="ident" id="7110580">Sprintf</span><span class="op" id="7110587">(</span><span class="string" id="7110588">&#34;%x&#34;</span><span class="op" id="7110592">,</span>&nbsp;<span class="ident" id="7110594">h</span><span class="op" id="7110595">.</span><span class="ident" id="7110596">Sum</span><span class="op" id="7110599">(</span><span class="ident" id="7110600">nil</span><span class="op" id="7110603">)</span><span class="op" id="7110604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110608">want</span>&nbsp;<span class="op" id="7110613">:=</span>&nbsp;<span class="ident" id="7110616">cksums</span><span class="op" id="7110622">[</span><span class="ident" id="7110623">nread</span><span class="op" id="7110628">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110632">if</span>&nbsp;<span class="ident" id="7110635">want</span>&nbsp;<span class="op" id="7110640">!=</span>&nbsp;<span class="ident" id="7110643">have</span>&nbsp;<span class="op" id="7110648">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110653">t</span><span class="op" id="7110654">.</span><span class="ident" id="7110655">Errorf</span><span class="op" id="7110661">(</span><span class="string" id="7110662">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7110708">,</span>&nbsp;<span class="ident" id="7110710">hdr</span><span class="op" id="7110713">.</span><span class="ident" id="7110714">Name</span><span class="op" id="7110718">,</span>&nbsp;<span class="ident" id="7110720">have</span><span class="op" id="7110724">,</span>&nbsp;<span class="ident" id="7110726">want</span><span class="op" id="7110730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110740">if</span>&nbsp;<span class="ident" id="7110743">nread</span>&nbsp;<span class="op" id="7110749">!=</span>&nbsp;<span class="builtinfunc" id="7110752">len</span><span class="op" id="7110755">(</span><span class="ident" id="7110756">headers</span><span class="op" id="7110763">)</span>&nbsp;<span class="op" id="7110765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110769">t</span><span class="op" id="7110770">.</span><span class="ident" id="7110771">Errorf</span><span class="op" id="7110777">(</span><span class="string" id="7110778">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7110834">,</span>&nbsp;<span class="builtinfunc" id="7110836">len</span><span class="op" id="7110839">(</span><span class="ident" id="7110840">headers</span><span class="op" id="7110847">)</span><span class="op" id="7110848">,</span>&nbsp;<span class="ident" id="7110850">nread</span><span class="op" id="7110855">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7110858">}</span><br>
<span class="lineno"></span><span class="op" id="7110860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7110863">func</span>&nbsp;<span class="ident" id="7110868">TestNonSeekable</span><span class="op" id="7110883">(</span><span class="ident" id="7110884">t</span>&nbsp;<span class="op" id="7110886">*</span><span class="ident" id="7110887">testing</span><span class="op" id="7110894">.</span><span class="ident" id="7110895">T</span><span class="op" id="7110896">)</span>&nbsp;<span class="op" id="7110898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110901">test</span>&nbsp;<span class="op" id="7110906">:=</span>&nbsp;<span class="ident" id="7110909">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110921">f</span><span class="op" id="7110922">,</span>&nbsp;<span class="ident" id="7110924">err</span>&nbsp;<span class="op" id="7110928">:=</span>&nbsp;<span class="ident" id="7110931">os</span><span class="op" id="7110933">.</span><span class="ident" id="7110934">Open</span><span class="op" id="7110938">(</span><span class="ident" id="7110939">test</span><span class="op" id="7110943">.</span><span class="ident" id="7110944">file</span><span class="op" id="7110948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7110951">if</span>&nbsp;<span class="ident" id="7110954">err</span>&nbsp;<span class="op" id="7110958">!=</span>&nbsp;<span class="ident" id="7110961">nil</span>&nbsp;<span class="op" id="7110965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7110969">t</span><span class="op" id="7110970">.</span><span class="ident" id="7110971">Fatalf</span><span class="op" id="7110977">(</span><span class="string" id="7110978">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7111000">,</span>&nbsp;<span class="ident" id="7111002">err</span><span class="op" id="7111005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111011">defer</span>&nbsp;<span class="ident" id="7111017">f</span><span class="op" id="7111018">.</span><span class="ident" id="7111019">Close</span><span class="op" id="7111024">(</span><span class="op" id="7111025">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111029">type</span>&nbsp;<span class="ident" id="7111034">readerOnly</span>&nbsp;<span class="keyword" id="7111045">struct</span>&nbsp;<span class="op" id="7111052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111056">io</span><span class="op" id="7111058">.</span><span class="ident" id="7111059">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111070">tr</span>&nbsp;<span class="op" id="7111073">:=</span>&nbsp;<span class="ident" id="7111076">NewReader</span><span class="op" id="7111085">(</span><span class="ident" id="7111086">readerOnly</span><span class="op" id="7111096">{</span><span class="ident" id="7111097">f</span><span class="op" id="7111098">}</span><span class="op" id="7111099">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111102">nread</span>&nbsp;<span class="op" id="7111108">:=</span>&nbsp;<span class="num" id="7111111">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111115">for</span>&nbsp;<span class="op" id="7111119">;</span>&nbsp;<span class="op" id="7111121">;</span>&nbsp;<span class="ident" id="7111123">nread</span><span class="op" id="7111128">++</span>&nbsp;<span class="op" id="7111131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111135">_</span><span class="op" id="7111136">,</span>&nbsp;<span class="ident" id="7111138">err</span>&nbsp;<span class="op" id="7111142">:=</span>&nbsp;<span class="ident" id="7111145">tr</span><span class="op" id="7111147">.</span><span class="ident" id="7111148">Next</span><span class="op" id="7111152">(</span><span class="op" id="7111153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111157">if</span>&nbsp;<span class="ident" id="7111160">err</span>&nbsp;<span class="op" id="7111164">==</span>&nbsp;<span class="ident" id="7111167">io</span><span class="op" id="7111169">.</span><span class="ident" id="7111170">EOF</span>&nbsp;<span class="op" id="7111174">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111179">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111191">if</span>&nbsp;<span class="ident" id="7111194">err</span>&nbsp;<span class="op" id="7111198">!=</span>&nbsp;<span class="ident" id="7111201">nil</span>&nbsp;<span class="op" id="7111205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111210">t</span><span class="op" id="7111211">.</span><span class="ident" id="7111212">Fatalf</span><span class="op" id="7111218">(</span><span class="string" id="7111219">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7111241">,</span>&nbsp;<span class="ident" id="7111243">err</span><span class="op" id="7111246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111250">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111257">if</span>&nbsp;<span class="ident" id="7111260">nread</span>&nbsp;<span class="op" id="7111266">!=</span>&nbsp;<span class="builtinfunc" id="7111269">len</span><span class="op" id="7111272">(</span><span class="ident" id="7111273">test</span><span class="op" id="7111277">.</span><span class="ident" id="7111278">headers</span><span class="op" id="7111285">)</span>&nbsp;<span class="op" id="7111287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111291">t</span><span class="op" id="7111292">.</span><span class="ident" id="7111293">Errorf</span><span class="op" id="7111299">(</span><span class="string" id="7111300">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7111356">,</span>&nbsp;<span class="builtinfunc" id="7111358">len</span><span class="op" id="7111361">(</span><span class="ident" id="7111362">test</span><span class="op" id="7111366">.</span><span class="ident" id="7111367">headers</span><span class="op" id="7111374">)</span><span class="op" id="7111375">,</span>&nbsp;<span class="ident" id="7111377">nread</span><span class="op" id="7111382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111385">}</span><br>
<span class="lineno">440</span><span class="op" id="7111387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7111390">func</span>&nbsp;<span class="ident" id="7111395">TestParsePAXHeader</span><span class="op" id="7111413">(</span><span class="ident" id="7111414">t</span>&nbsp;<span class="op" id="7111416">*</span><span class="ident" id="7111417">testing</span><span class="op" id="7111424">.</span><span class="ident" id="7111425">T</span><span class="op" id="7111426">)</span>&nbsp;<span class="op" id="7111428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111431">paxTests</span>&nbsp;<span class="op" id="7111440">:=</span>&nbsp;<span class="op" id="7111443">[</span><span class="op" id="7111444">]</span><span class="op" id="7111445">[</span><span class="num" id="7111446">3</span><span class="op" id="7111447">]</span><span class="builtintype" id="7111448">string</span><span class="op" id="7111454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111458">{</span><span class="string" id="7111459">&#34;a&#34;</span><span class="op" id="7111462">,</span>&nbsp;<span class="string" id="7111464">&#34;a=name&#34;</span><span class="op" id="7111472">,</span>&nbsp;<span class="string" id="7111474">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7111487">}</span><span class="op" id="7111488">,</span>&nbsp;<span class="comment" id="7111490">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111543">{</span><span class="string" id="7111544">&#34;a&#34;</span><span class="op" id="7111547">,</span>&nbsp;<span class="string" id="7111549">&#34;a=name&#34;</span><span class="op" id="7111557">,</span>&nbsp;<span class="string" id="7111559">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7111571">}</span><span class="op" id="7111572">,</span>&nbsp;&nbsp;<span class="comment" id="7111575">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111627">{</span><span class="string" id="7111628">&#34;mtime&#34;</span><span class="op" id="7111635">,</span>&nbsp;<span class="string" id="7111637">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7111665">,</span>&nbsp;<span class="string" id="7111667">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7111700">}</span><span class="op" id="7111701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111704">for</span>&nbsp;<span class="ident" id="7111708">_</span><span class="op" id="7111709">,</span>&nbsp;<span class="ident" id="7111711">test</span>&nbsp;<span class="op" id="7111716">:=</span>&nbsp;<span class="keyword" id="7111719">range</span>&nbsp;<span class="ident" id="7111725">paxTests</span>&nbsp;<span class="op" id="7111734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111738">key</span><span class="op" id="7111741">,</span>&nbsp;<span class="ident" id="7111743">expected</span><span class="op" id="7111751">,</span>&nbsp;<span class="ident" id="7111753">raw</span>&nbsp;<span class="op" id="7111757">:=</span>&nbsp;<span class="ident" id="7111760">test</span><span class="op" id="7111764">[</span><span class="num" id="7111765">0</span><span class="op" id="7111766">]</span><span class="op" id="7111767">,</span>&nbsp;<span class="ident" id="7111769">test</span><span class="op" id="7111773">[</span><span class="num" id="7111774">1</span><span class="op" id="7111775">]</span><span class="op" id="7111776">,</span>&nbsp;<span class="ident" id="7111778">test</span><span class="op" id="7111782">[</span><span class="num" id="7111783">2</span><span class="op" id="7111784">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111788">reader</span>&nbsp;<span class="op" id="7111795">:=</span>&nbsp;<span class="ident" id="7111798">bytes</span><span class="op" id="7111803">.</span><span class="ident" id="7111804">NewReader</span><span class="op" id="7111813">(</span><span class="op" id="7111814">[</span><span class="op" id="7111815">]</span><span class="builtintype" id="7111816">byte</span><span class="op" id="7111820">(</span><span class="ident" id="7111821">raw</span><span class="op" id="7111824">)</span><span class="op" id="7111825">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111829">headers</span><span class="op" id="7111836">,</span>&nbsp;<span class="ident" id="7111838">err</span>&nbsp;<span class="op" id="7111842">:=</span>&nbsp;<span class="ident" id="7111845">parsePAX</span><span class="op" id="7111853">(</span><span class="ident" id="7111854">reader</span><span class="op" id="7111860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111864">if</span>&nbsp;<span class="ident" id="7111867">err</span>&nbsp;<span class="op" id="7111871">!=</span>&nbsp;<span class="ident" id="7111874">nil</span>&nbsp;<span class="op" id="7111878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7111883">t</span><span class="op" id="7111884">.</span><span class="ident" id="7111885">Errorf</span><span class="op" id="7111891">(</span><span class="string" id="7111892">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7111940">,</span>&nbsp;<span class="ident" id="7111942">err</span><span class="op" id="7111945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111950">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7111961">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7111965">if</span>&nbsp;<span class="ident" id="7111968">strings</span><span class="op" id="7111975">.</span><span class="ident" id="7111976">EqualFold</span><span class="op" id="7111985">(</span><span class="ident" id="7111986">headers</span><span class="op" id="7111993">[</span><span class="ident" id="7111994">key</span><span class="op" id="7111997">]</span><span class="op" id="7111998">,</span>&nbsp;<span class="ident" id="7112000">expected</span><span class="op" id="7112008">)</span>&nbsp;<span class="op" id="7112010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112015">t</span><span class="op" id="7112016">.</span><span class="ident" id="7112017">Errorf</span><span class="op" id="7112023">(</span><span class="string" id="7112024">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7112076">,</span>&nbsp;<span class="ident" id="7112078">headers</span><span class="op" id="7112085">[</span><span class="ident" id="7112086">key</span><span class="op" id="7112089">]</span><span class="op" id="7112090">,</span>&nbsp;<span class="ident" id="7112092">expected</span><span class="op" id="7112100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112105">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112120">trailer</span>&nbsp;<span class="op" id="7112128">:=</span>&nbsp;<span class="builtinfunc" id="7112131">make</span><span class="op" id="7112135">(</span><span class="op" id="7112136">[</span><span class="op" id="7112137">]</span><span class="builtintype" id="7112138">byte</span><span class="op" id="7112142">,</span>&nbsp;<span class="num" id="7112144">100</span><span class="op" id="7112147">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112151">n</span><span class="op" id="7112152">,</span>&nbsp;<span class="ident" id="7112154">err</span>&nbsp;<span class="op" id="7112158">:=</span>&nbsp;<span class="ident" id="7112161">reader</span><span class="op" id="7112167">.</span><span class="ident" id="7112168">Read</span><span class="op" id="7112172">(</span><span class="ident" id="7112173">trailer</span><span class="op" id="7112180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112184">if</span>&nbsp;<span class="ident" id="7112187">err</span>&nbsp;<span class="op" id="7112191">!=</span>&nbsp;<span class="ident" id="7112194">io</span><span class="op" id="7112196">.</span><span class="ident" id="7112197">EOF</span>&nbsp;<span class="op" id="7112201">||</span>&nbsp;<span class="ident" id="7112204">n</span>&nbsp;<span class="op" id="7112206">!=</span>&nbsp;<span class="num" id="7112209">0</span>&nbsp;<span class="op" id="7112211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112216">t</span><span class="op" id="7112217">.</span><span class="ident" id="7112218">Error</span><span class="op" id="7112223">(</span><span class="string" id="7112224">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7112248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112255">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112258">badHeader</span>&nbsp;<span class="op" id="7112268">:=</span>&nbsp;<span class="ident" id="7112271">bytes</span><span class="op" id="7112276">.</span><span class="ident" id="7112277">NewReader</span><span class="op" id="7112286">(</span><span class="op" id="7112287">[</span><span class="op" id="7112288">]</span><span class="builtintype" id="7112289">byte</span><span class="op" id="7112293">(</span><span class="string" id="7112294">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7112310">)</span><span class="op" id="7112311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112314">if</span>&nbsp;<span class="ident" id="7112317">_</span><span class="op" id="7112318">,</span>&nbsp;<span class="ident" id="7112320">err</span>&nbsp;<span class="op" id="7112324">:=</span>&nbsp;<span class="ident" id="7112327">parsePAX</span><span class="op" id="7112335">(</span><span class="ident" id="7112336">badHeader</span><span class="op" id="7112345">)</span><span class="op" id="7112346">;</span>&nbsp;<span class="ident" id="7112348">err</span>&nbsp;<span class="op" id="7112352">!=</span>&nbsp;<span class="ident" id="7112355">ErrHeader</span>&nbsp;<span class="op" id="7112365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112369">t</span><span class="op" id="7112370">.</span><span class="ident" id="7112371">Fatal</span><span class="op" id="7112376">(</span><span class="string" id="7112377">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7112421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112424">}</span><br>
<span class="lineno"></span><span class="op" id="7112426">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7112429">func</span>&nbsp;<span class="ident" id="7112434">TestParsePAXTime</span><span class="op" id="7112450">(</span><span class="ident" id="7112451">t</span>&nbsp;<span class="op" id="7112453">*</span><span class="ident" id="7112454">testing</span><span class="op" id="7112461">.</span><span class="ident" id="7112462">T</span><span class="op" id="7112463">)</span>&nbsp;<span class="op" id="7112465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7112468">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112499">timestamps</span>&nbsp;<span class="op" id="7112510">:=</span>&nbsp;<span class="keyword" id="7112513">map</span><span class="op" id="7112516">[</span><span class="builtintype" id="7112517">string</span><span class="op" id="7112523">]</span><span class="ident" id="7112524">time</span><span class="op" id="7112528">.</span><span class="ident" id="7112529">Time</span><span class="op" id="7112533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7112537">&#34;1350244992.023960108&#34;</span><span class="op" id="7112559">:</span>&nbsp;&nbsp;<span class="ident" id="7112562">time</span><span class="op" id="7112566">.</span><span class="ident" id="7112567">Unix</span><span class="op" id="7112571">(</span><span class="num" id="7112572">1350244992</span><span class="op" id="7112582">,</span>&nbsp;<span class="num" id="7112584">23960108</span><span class="op" id="7112592">)</span><span class="op" id="7112593">,</span>&nbsp;<span class="comment" id="7112595">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7112616">&#34;1350244992.02396010&#34;</span><span class="op" id="7112637">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7112641">time</span><span class="op" id="7112645">.</span><span class="ident" id="7112646">Unix</span><span class="op" id="7112650">(</span><span class="num" id="7112651">1350244992</span><span class="op" id="7112661">,</span>&nbsp;<span class="num" id="7112663">23960100</span><span class="op" id="7112671">)</span><span class="op" id="7112672">,</span>&nbsp;<span class="comment" id="7112674">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7112701">&#34;1350244992.0239601089&#34;</span><span class="op" id="7112724">:</span>&nbsp;<span class="ident" id="7112726">time</span><span class="op" id="7112730">.</span><span class="ident" id="7112731">Unix</span><span class="op" id="7112735">(</span><span class="num" id="7112736">1350244992</span><span class="op" id="7112746">,</span>&nbsp;<span class="num" id="7112748">23960108</span><span class="op" id="7112756">)</span><span class="op" id="7112757">,</span>&nbsp;<span class="comment" id="7112759">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7112787">&#34;1350244992&#34;</span><span class="op" id="7112799">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112812">time</span><span class="op" id="7112816">.</span><span class="ident" id="7112817">Unix</span><span class="op" id="7112821">(</span><span class="num" id="7112822">1350244992</span><span class="op" id="7112832">,</span>&nbsp;<span class="num" id="7112834">0</span><span class="op" id="7112835">)</span><span class="op" id="7112836">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7112845">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112872">for</span>&nbsp;<span class="ident" id="7112876">input</span><span class="op" id="7112881">,</span>&nbsp;<span class="ident" id="7112883">expected</span>&nbsp;<span class="op" id="7112892">:=</span>&nbsp;<span class="keyword" id="7112895">range</span>&nbsp;<span class="ident" id="7112901">timestamps</span>&nbsp;<span class="op" id="7112912">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112916">ts</span><span class="op" id="7112918">,</span>&nbsp;<span class="ident" id="7112920">err</span>&nbsp;<span class="op" id="7112924">:=</span>&nbsp;<span class="ident" id="7112927">parsePAXTime</span><span class="op" id="7112939">(</span><span class="ident" id="7112940">input</span><span class="op" id="7112945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112949">if</span>&nbsp;<span class="ident" id="7112952">err</span>&nbsp;<span class="op" id="7112956">!=</span>&nbsp;<span class="ident" id="7112959">nil</span>&nbsp;<span class="op" id="7112963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7112968">t</span><span class="op" id="7112969">.</span><span class="ident" id="7112970">Fatal</span><span class="op" id="7112975">(</span><span class="ident" id="7112976">err</span><span class="op" id="7112979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7112983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7112987">if</span>&nbsp;<span class="op" id="7112990">!</span><span class="ident" id="7112991">ts</span><span class="op" id="7112993">.</span><span class="ident" id="7112994">Equal</span><span class="op" id="7112999">(</span><span class="ident" id="7113000">expected</span><span class="op" id="7113008">)</span>&nbsp;<span class="op" id="7113010">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113015">t</span><span class="op" id="7113016">.</span><span class="ident" id="7113017">Fatalf</span><span class="op" id="7113023">(</span><span class="string" id="7113024">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7113052">,</span>&nbsp;<span class="ident" id="7113054">ts</span><span class="op" id="7113056">,</span>&nbsp;<span class="ident" id="7113058">expected</span><span class="op" id="7113066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113073">}</span><br>
<span class="lineno"></span><span class="op" id="7113075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7113078">func</span>&nbsp;<span class="ident" id="7113083">TestMergePAX</span><span class="op" id="7113095">(</span><span class="ident" id="7113096">t</span>&nbsp;<span class="op" id="7113098">*</span><span class="ident" id="7113099">testing</span><span class="op" id="7113106">.</span><span class="ident" id="7113107">T</span><span class="op" id="7113108">)</span>&nbsp;<span class="op" id="7113110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113113">hdr</span>&nbsp;<span class="op" id="7113117">:=</span>&nbsp;<span class="builtinfunc" id="7113120">new</span><span class="op" id="7113123">(</span><span class="ident" id="7113124">Header</span><span class="op" id="7113130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7113133">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113183">headers</span>&nbsp;<span class="op" id="7113191">:=</span>&nbsp;<span class="keyword" id="7113194">map</span><span class="op" id="7113197">[</span><span class="builtintype" id="7113198">string</span><span class="op" id="7113204">]</span><span class="builtintype" id="7113205">string</span><span class="op" id="7113211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113215">&#34;path&#34;</span><span class="op" id="7113221">:</span>&nbsp;&nbsp;<span class="string" id="7113224">&#34;a/b/c&#34;</span><span class="op" id="7113231">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113235">&#34;uid&#34;</span><span class="op" id="7113240">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7113244">&#34;1000&#34;</span><span class="op" id="7113250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113254">&#34;mtime&#34;</span><span class="op" id="7113261">:</span>&nbsp;<span class="string" id="7113263">&#34;1350244992.023960108&#34;</span><span class="op" id="7113285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113291">err</span>&nbsp;<span class="op" id="7113295">:=</span>&nbsp;<span class="ident" id="7113298">mergePAX</span><span class="op" id="7113306">(</span><span class="ident" id="7113307">hdr</span><span class="op" id="7113310">,</span>&nbsp;<span class="ident" id="7113312">headers</span><span class="op" id="7113319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113322">if</span>&nbsp;<span class="ident" id="7113325">err</span>&nbsp;<span class="op" id="7113329">!=</span>&nbsp;<span class="ident" id="7113332">nil</span>&nbsp;<span class="op" id="7113336">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113340">t</span><span class="op" id="7113341">.</span><span class="ident" id="7113342">Fatal</span><span class="op" id="7113347">(</span><span class="ident" id="7113348">err</span><span class="op" id="7113351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113357">want</span>&nbsp;<span class="op" id="7113362">:=</span>&nbsp;<span class="op" id="7113365">&amp;</span><span class="ident" id="7113366">Header</span><span class="op" id="7113372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113376">Name</span><span class="op" id="7113380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7113385">&#34;a/b/c&#34;</span><span class="op" id="7113392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113396">Uid</span><span class="op" id="7113399">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7113405">1000</span><span class="op" id="7113409">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113413">ModTime</span><span class="op" id="7113420">:</span>&nbsp;<span class="ident" id="7113422">time</span><span class="op" id="7113426">.</span><span class="ident" id="7113427">Unix</span><span class="op" id="7113431">(</span><span class="num" id="7113432">1350244992</span><span class="op" id="7113442">,</span>&nbsp;<span class="num" id="7113444">23960108</span><span class="op" id="7113452">)</span><span class="op" id="7113453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113459">if</span>&nbsp;<span class="op" id="7113462">!</span><span class="ident" id="7113463">reflect</span><span class="op" id="7113470">.</span><span class="ident" id="7113471">DeepEqual</span><span class="op" id="7113480">(</span><span class="ident" id="7113481">hdr</span><span class="op" id="7113484">,</span>&nbsp;<span class="ident" id="7113486">want</span><span class="op" id="7113490">)</span>&nbsp;<span class="op" id="7113492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113496">t</span><span class="op" id="7113497">.</span><span class="ident" id="7113498">Errorf</span><span class="op" id="7113504">(</span><span class="string" id="7113505">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7113541">,</span>&nbsp;<span class="ident" id="7113543">hdr</span><span class="op" id="7113546">,</span>&nbsp;<span class="ident" id="7113548">want</span><span class="op" id="7113552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113555">}</span><br>
<span class="lineno">510</span><span class="op" id="7113557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7113560">func</span>&nbsp;<span class="ident" id="7113565">TestSparseEndToEnd</span><span class="op" id="7113583">(</span><span class="ident" id="7113584">t</span>&nbsp;<span class="op" id="7113586">*</span><span class="ident" id="7113587">testing</span><span class="op" id="7113594">.</span><span class="ident" id="7113595">T</span><span class="op" id="7113596">)</span>&nbsp;<span class="op" id="7113598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113601">test</span>&nbsp;<span class="op" id="7113606">:=</span>&nbsp;<span class="ident" id="7113609">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113624">f</span><span class="op" id="7113625">,</span>&nbsp;<span class="ident" id="7113627">err</span>&nbsp;<span class="op" id="7113631">:=</span>&nbsp;<span class="ident" id="7113634">os</span><span class="op" id="7113636">.</span><span class="ident" id="7113637">Open</span><span class="op" id="7113641">(</span><span class="ident" id="7113642">test</span><span class="op" id="7113646">.</span><span class="ident" id="7113647">file</span><span class="op" id="7113651">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113654">if</span>&nbsp;<span class="ident" id="7113657">err</span>&nbsp;<span class="op" id="7113661">!=</span>&nbsp;<span class="ident" id="7113664">nil</span>&nbsp;<span class="op" id="7113668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113672">t</span><span class="op" id="7113673">.</span><span class="ident" id="7113674">Fatalf</span><span class="op" id="7113680">(</span><span class="string" id="7113681">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7113703">,</span>&nbsp;<span class="ident" id="7113705">err</span><span class="op" id="7113708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113714">defer</span>&nbsp;<span class="ident" id="7113720">f</span><span class="op" id="7113721">.</span><span class="ident" id="7113722">Close</span><span class="op" id="7113727">(</span><span class="op" id="7113728">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113732">tr</span>&nbsp;<span class="op" id="7113735">:=</span>&nbsp;<span class="ident" id="7113738">NewReader</span><span class="op" id="7113747">(</span><span class="ident" id="7113748">f</span><span class="op" id="7113749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113753">headers</span>&nbsp;<span class="op" id="7113761">:=</span>&nbsp;<span class="ident" id="7113764">test</span><span class="op" id="7113768">.</span><span class="ident" id="7113769">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113778">cksums</span>&nbsp;<span class="op" id="7113785">:=</span>&nbsp;<span class="ident" id="7113788">test</span><span class="op" id="7113792">.</span><span class="ident" id="7113793">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113801">nread</span>&nbsp;<span class="op" id="7113807">:=</span>&nbsp;<span class="num" id="7113810">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7113814">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113838">for</span>&nbsp;<span class="op" id="7113842">;</span>&nbsp;<span class="op" id="7113844">;</span>&nbsp;<span class="ident" id="7113846">nread</span><span class="op" id="7113851">++</span>&nbsp;<span class="op" id="7113854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113858">hdr</span><span class="op" id="7113861">,</span>&nbsp;<span class="ident" id="7113863">err</span>&nbsp;<span class="op" id="7113867">:=</span>&nbsp;<span class="ident" id="7113870">tr</span><span class="op" id="7113872">.</span><span class="ident" id="7113873">Next</span><span class="op" id="7113877">(</span><span class="op" id="7113878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113882">if</span>&nbsp;<span class="ident" id="7113885">hdr</span>&nbsp;<span class="op" id="7113889">==</span>&nbsp;<span class="ident" id="7113892">nil</span>&nbsp;<span class="op" id="7113896">||</span>&nbsp;<span class="ident" id="7113899">err</span>&nbsp;<span class="op" id="7113903">==</span>&nbsp;<span class="ident" id="7113906">io</span><span class="op" id="7113908">.</span><span class="ident" id="7113909">EOF</span>&nbsp;<span class="op" id="7113913">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113918">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7113931">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113953">if</span>&nbsp;<span class="op" id="7113956">!</span><span class="ident" id="7113957">reflect</span><span class="op" id="7113964">.</span><span class="ident" id="7113965">DeepEqual</span><span class="op" id="7113974">(</span><span class="op" id="7113975">*</span><span class="ident" id="7113976">hdr</span><span class="op" id="7113979">,</span>&nbsp;<span class="op" id="7113981">*</span><span class="ident" id="7113982">headers</span><span class="op" id="7113989">[</span><span class="ident" id="7113990">nread</span><span class="op" id="7113995">]</span><span class="op" id="7113996">)</span>&nbsp;<span class="op" id="7113998">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114003">t</span><span class="op" id="7114004">.</span><span class="ident" id="7114005">Errorf</span><span class="op" id="7114011">(</span><span class="string" id="7114012">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7114051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114057">*</span><span class="ident" id="7114058">hdr</span><span class="op" id="7114061">,</span>&nbsp;<span class="ident" id="7114063">headers</span><span class="op" id="7114070">[</span><span class="ident" id="7114071">nread</span><span class="op" id="7114076">]</span><span class="op" id="7114077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7114086">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114123">h</span>&nbsp;<span class="op" id="7114125">:=</span>&nbsp;<span class="ident" id="7114128">md5</span><span class="op" id="7114131">.</span><span class="ident" id="7114132">New</span><span class="op" id="7114135">(</span><span class="op" id="7114136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114140">_</span><span class="op" id="7114141">,</span>&nbsp;<span class="ident" id="7114143">err</span>&nbsp;<span class="op" id="7114147">=</span>&nbsp;<span class="ident" id="7114149">io</span><span class="op" id="7114151">.</span><span class="ident" id="7114152">Copy</span><span class="op" id="7114156">(</span><span class="ident" id="7114157">h</span><span class="op" id="7114158">,</span>&nbsp;<span class="ident" id="7114160">tr</span><span class="op" id="7114162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7114166">if</span>&nbsp;<span class="ident" id="7114169">err</span>&nbsp;<span class="op" id="7114173">!=</span>&nbsp;<span class="ident" id="7114176">nil</span>&nbsp;<span class="op" id="7114180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114185">t</span><span class="op" id="7114186">.</span><span class="ident" id="7114187">Fatalf</span><span class="op" id="7114193">(</span><span class="string" id="7114194">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7114216">,</span>&nbsp;<span class="ident" id="7114218">err</span><span class="op" id="7114221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114225">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7114230">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114251">have</span>&nbsp;<span class="op" id="7114256">:=</span>&nbsp;<span class="ident" id="7114259">fmt</span><span class="op" id="7114262">.</span><span class="ident" id="7114263">Sprintf</span><span class="op" id="7114270">(</span><span class="string" id="7114271">&#34;%x&#34;</span><span class="op" id="7114275">,</span>&nbsp;<span class="ident" id="7114277">h</span><span class="op" id="7114278">.</span><span class="ident" id="7114279">Sum</span><span class="op" id="7114282">(</span><span class="ident" id="7114283">nil</span><span class="op" id="7114286">)</span><span class="op" id="7114287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114291">want</span>&nbsp;<span class="op" id="7114296">:=</span>&nbsp;<span class="ident" id="7114299">cksums</span><span class="op" id="7114305">[</span><span class="ident" id="7114306">nread</span><span class="op" id="7114311">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7114315">if</span>&nbsp;<span class="ident" id="7114318">want</span>&nbsp;<span class="op" id="7114323">!=</span>&nbsp;<span class="ident" id="7114326">have</span>&nbsp;<span class="op" id="7114331">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114336">t</span><span class="op" id="7114337">.</span><span class="ident" id="7114338">Errorf</span><span class="op" id="7114344">(</span><span class="string" id="7114345">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7114391">,</span>&nbsp;<span class="ident" id="7114393">hdr</span><span class="op" id="7114396">.</span><span class="ident" id="7114397">Name</span><span class="op" id="7114401">,</span>&nbsp;<span class="ident" id="7114403">have</span><span class="op" id="7114407">,</span>&nbsp;<span class="ident" id="7114409">want</span><span class="op" id="7114413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7114423">if</span>&nbsp;<span class="ident" id="7114426">nread</span>&nbsp;<span class="op" id="7114432">!=</span>&nbsp;<span class="builtinfunc" id="7114435">len</span><span class="op" id="7114438">(</span><span class="ident" id="7114439">headers</span><span class="op" id="7114446">)</span>&nbsp;<span class="op" id="7114448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114452">t</span><span class="op" id="7114453">.</span><span class="ident" id="7114454">Errorf</span><span class="op" id="7114460">(</span><span class="string" id="7114461">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7114517">,</span>&nbsp;<span class="builtinfunc" id="7114519">len</span><span class="op" id="7114522">(</span><span class="ident" id="7114523">headers</span><span class="op" id="7114530">)</span><span class="op" id="7114531">,</span>&nbsp;<span class="ident" id="7114533">nread</span><span class="op" id="7114538">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114541">}</span><br>
<span class="lineno"></span><span class="op" id="7114543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7114546">type</span>&nbsp;<span class="ident" id="7114551">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7114570">struct</span>&nbsp;<span class="op" id="7114577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114580">sparseData</span>&nbsp;<span class="op" id="7114591">[</span><span class="op" id="7114592">]</span><span class="builtintype" id="7114593">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114599">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7114610">[</span><span class="op" id="7114611">]</span><span class="ident" id="7114612">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114625">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7114636">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114643">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7114654">[</span><span class="op" id="7114655">]</span><span class="builtintype" id="7114656">byte</span><br>
<span class="lineno"></span><span class="op" id="7114661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7114664">var</span>&nbsp;<span class="ident" id="7114668">sparseFileReadTests</span>&nbsp;<span class="op" id="7114688">=</span>&nbsp;<span class="op" id="7114690">[</span><span class="op" id="7114691">]</span><span class="ident" id="7114692">sparseFileReadTest</span><span class="op" id="7114710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114717">sparseData</span><span class="op" id="7114727">:</span>&nbsp;<span class="op" id="7114729">[</span><span class="op" id="7114730">]</span><span class="builtintype" id="7114731">byte</span><span class="op" id="7114735">(</span><span class="string" id="7114736">&#34;abcde&#34;</span><span class="op" id="7114743">)</span><span class="op" id="7114744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114748">sparseMap</span><span class="op" id="7114757">:</span>&nbsp;<span class="op" id="7114759">[</span><span class="op" id="7114760">]</span><span class="ident" id="7114761">sparseEntry</span><span class="op" id="7114772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114777">{</span><span class="ident" id="7114778">offset</span><span class="op" id="7114784">:</span>&nbsp;<span class="num" id="7114786">0</span><span class="op" id="7114787">,</span>&nbsp;<span class="ident" id="7114789">numBytes</span><span class="op" id="7114797">:</span>&nbsp;<span class="num" id="7114799">2</span><span class="op" id="7114800">}</span><span class="op" id="7114801">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114806">{</span><span class="ident" id="7114807">offset</span><span class="op" id="7114813">:</span>&nbsp;<span class="num" id="7114815">5</span><span class="op" id="7114816">,</span>&nbsp;<span class="ident" id="7114818">numBytes</span><span class="op" id="7114826">:</span>&nbsp;<span class="num" id="7114828">3</span><span class="op" id="7114829">}</span><span class="op" id="7114830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114834">}</span><span class="op" id="7114835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114839">realSize</span><span class="op" id="7114847">:</span>&nbsp;<span class="num" id="7114849">8</span><span class="op" id="7114850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114854">expected</span><span class="op" id="7114862">:</span>&nbsp;<span class="op" id="7114864">[</span><span class="op" id="7114865">]</span><span class="builtintype" id="7114866">byte</span><span class="op" id="7114870">(</span><span class="string" id="7114871">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7114890">)</span><span class="op" id="7114891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114894">}</span><span class="op" id="7114895">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114902">sparseData</span><span class="op" id="7114912">:</span>&nbsp;<span class="op" id="7114914">[</span><span class="op" id="7114915">]</span><span class="builtintype" id="7114916">byte</span><span class="op" id="7114920">(</span><span class="string" id="7114921">&#34;abcde&#34;</span><span class="op" id="7114928">)</span><span class="op" id="7114929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7114933">sparseMap</span><span class="op" id="7114942">:</span>&nbsp;<span class="op" id="7114944">[</span><span class="op" id="7114945">]</span><span class="ident" id="7114946">sparseEntry</span><span class="op" id="7114957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114962">{</span><span class="ident" id="7114963">offset</span><span class="op" id="7114969">:</span>&nbsp;<span class="num" id="7114971">0</span><span class="op" id="7114972">,</span>&nbsp;<span class="ident" id="7114974">numBytes</span><span class="op" id="7114982">:</span>&nbsp;<span class="num" id="7114984">2</span><span class="op" id="7114985">}</span><span class="op" id="7114986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7114991">{</span><span class="ident" id="7114992">offset</span><span class="op" id="7114998">:</span>&nbsp;<span class="num" id="7115000">5</span><span class="op" id="7115001">,</span>&nbsp;<span class="ident" id="7115003">numBytes</span><span class="op" id="7115011">:</span>&nbsp;<span class="num" id="7115013">3</span><span class="op" id="7115014">}</span><span class="op" id="7115015">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115019">}</span><span class="op" id="7115020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115024">realSize</span><span class="op" id="7115032">:</span>&nbsp;<span class="num" id="7115034">10</span><span class="op" id="7115036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115040">expected</span><span class="op" id="7115048">:</span>&nbsp;<span class="op" id="7115050">[</span><span class="op" id="7115051">]</span><span class="builtintype" id="7115052">byte</span><span class="op" id="7115056">(</span><span class="string" id="7115057">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7115084">)</span><span class="op" id="7115085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115088">}</span><span class="op" id="7115089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115092">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115096">sparseData</span><span class="op" id="7115106">:</span>&nbsp;<span class="op" id="7115108">[</span><span class="op" id="7115109">]</span><span class="builtintype" id="7115110">byte</span><span class="op" id="7115114">(</span><span class="string" id="7115115">&#34;abcde&#34;</span><span class="op" id="7115122">)</span><span class="op" id="7115123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115127">sparseMap</span><span class="op" id="7115136">:</span>&nbsp;<span class="op" id="7115138">[</span><span class="op" id="7115139">]</span><span class="ident" id="7115140">sparseEntry</span><span class="op" id="7115151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115156">{</span><span class="ident" id="7115157">offset</span><span class="op" id="7115163">:</span>&nbsp;<span class="num" id="7115165">1</span><span class="op" id="7115166">,</span>&nbsp;<span class="ident" id="7115168">numBytes</span><span class="op" id="7115176">:</span>&nbsp;<span class="num" id="7115178">3</span><span class="op" id="7115179">}</span><span class="op" id="7115180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115185">{</span><span class="ident" id="7115186">offset</span><span class="op" id="7115192">:</span>&nbsp;<span class="num" id="7115194">6</span><span class="op" id="7115195">,</span>&nbsp;<span class="ident" id="7115197">numBytes</span><span class="op" id="7115205">:</span>&nbsp;<span class="num" id="7115207">2</span><span class="op" id="7115208">}</span><span class="op" id="7115209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115213">}</span><span class="op" id="7115214">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115218">realSize</span><span class="op" id="7115226">:</span>&nbsp;<span class="num" id="7115228">8</span><span class="op" id="7115229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115233">expected</span><span class="op" id="7115241">:</span>&nbsp;<span class="op" id="7115243">[</span><span class="op" id="7115244">]</span><span class="builtintype" id="7115245">byte</span><span class="op" id="7115249">(</span><span class="string" id="7115250">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7115269">)</span><span class="op" id="7115270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115273">}</span><span class="op" id="7115274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115281">sparseData</span><span class="op" id="7115291">:</span>&nbsp;<span class="op" id="7115293">[</span><span class="op" id="7115294">]</span><span class="builtintype" id="7115295">byte</span><span class="op" id="7115299">(</span><span class="string" id="7115300">&#34;abcde&#34;</span><span class="op" id="7115307">)</span><span class="op" id="7115308">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115312">sparseMap</span><span class="op" id="7115321">:</span>&nbsp;<span class="op" id="7115323">[</span><span class="op" id="7115324">]</span><span class="ident" id="7115325">sparseEntry</span><span class="op" id="7115336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115341">{</span><span class="ident" id="7115342">offset</span><span class="op" id="7115348">:</span>&nbsp;<span class="num" id="7115350">1</span><span class="op" id="7115351">,</span>&nbsp;<span class="ident" id="7115353">numBytes</span><span class="op" id="7115361">:</span>&nbsp;<span class="num" id="7115363">3</span><span class="op" id="7115364">}</span><span class="op" id="7115365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115370">{</span><span class="ident" id="7115371">offset</span><span class="op" id="7115377">:</span>&nbsp;<span class="num" id="7115379">6</span><span class="op" id="7115380">,</span>&nbsp;<span class="ident" id="7115382">numBytes</span><span class="op" id="7115390">:</span>&nbsp;<span class="num" id="7115392">2</span><span class="op" id="7115393">}</span><span class="op" id="7115394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115398">}</span><span class="op" id="7115399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115403">realSize</span><span class="op" id="7115411">:</span>&nbsp;<span class="num" id="7115413">10</span><span class="op" id="7115415">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115419">expected</span><span class="op" id="7115427">:</span>&nbsp;<span class="op" id="7115429">[</span><span class="op" id="7115430">]</span><span class="builtintype" id="7115431">byte</span><span class="op" id="7115435">(</span><span class="string" id="7115436">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7115463">)</span><span class="op" id="7115464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115467">}</span><span class="op" id="7115468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115475">sparseData</span><span class="op" id="7115485">:</span>&nbsp;<span class="op" id="7115487">[</span><span class="op" id="7115488">]</span><span class="builtintype" id="7115489">byte</span><span class="op" id="7115493">(</span><span class="string" id="7115494">&#34;&#34;</span><span class="op" id="7115496">)</span><span class="op" id="7115497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115501">sparseMap</span><span class="op" id="7115510">:</span>&nbsp;&nbsp;<span class="ident" id="7115513">nil</span><span class="op" id="7115516">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115520">realSize</span><span class="op" id="7115528">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7115532">2</span><span class="op" id="7115533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115537">expected</span><span class="op" id="7115545">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7115549">[</span><span class="op" id="7115550">]</span><span class="builtintype" id="7115551">byte</span><span class="op" id="7115555">(</span><span class="string" id="7115556">&#34;\x00\x00&#34;</span><span class="op" id="7115566">)</span><span class="op" id="7115567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115570">}</span><span class="op" id="7115571">,</span><br>
<span class="lineno"></span><span class="op" id="7115573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7115576">func</span>&nbsp;<span class="ident" id="7115581">TestSparseFileReader</span><span class="op" id="7115601">(</span><span class="ident" id="7115602">t</span>&nbsp;<span class="op" id="7115604">*</span><span class="ident" id="7115605">testing</span><span class="op" id="7115612">.</span><span class="ident" id="7115613">T</span><span class="op" id="7115614">)</span>&nbsp;<span class="op" id="7115616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7115619">for</span>&nbsp;<span class="ident" id="7115623">i</span><span class="op" id="7115624">,</span>&nbsp;<span class="ident" id="7115626">test</span>&nbsp;<span class="op" id="7115631">:=</span>&nbsp;<span class="keyword" id="7115634">range</span>&nbsp;<span class="ident" id="7115640">sparseFileReadTests</span>&nbsp;<span class="op" id="7115660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115664">r</span>&nbsp;<span class="op" id="7115666">:=</span>&nbsp;<span class="ident" id="7115669">bytes</span><span class="op" id="7115674">.</span><span class="ident" id="7115675">NewReader</span><span class="op" id="7115684">(</span><span class="ident" id="7115685">test</span><span class="op" id="7115689">.</span><span class="ident" id="7115690">sparseData</span><span class="op" id="7115700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115704">nb</span>&nbsp;<span class="op" id="7115707">:=</span>&nbsp;<span class="ident" id="7115710">int64</span><span class="op" id="7115715">(</span><span class="ident" id="7115716">r</span><span class="op" id="7115717">.</span><span class="ident" id="7115718">Len</span><span class="op" id="7115721">(</span><span class="op" id="7115722">)</span><span class="op" id="7115723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115727">sfr</span>&nbsp;<span class="op" id="7115731">:=</span>&nbsp;<span class="op" id="7115734">&amp;</span><span class="ident" id="7115735">sparseFileReader</span><span class="op" id="7115751">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115756">rfr</span><span class="op" id="7115759">:</span>&nbsp;<span class="op" id="7115761">&amp;</span><span class="ident" id="7115762">regFileReader</span><span class="op" id="7115775">{</span><span class="ident" id="7115776">r</span><span class="op" id="7115777">:</span>&nbsp;<span class="ident" id="7115779">r</span><span class="op" id="7115780">,</span>&nbsp;<span class="ident" id="7115782">nb</span><span class="op" id="7115784">:</span>&nbsp;<span class="ident" id="7115786">nb</span><span class="op" id="7115788">}</span><span class="op" id="7115789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115794">sp</span><span class="op" id="7115796">:</span>&nbsp;&nbsp;<span class="ident" id="7115799">test</span><span class="op" id="7115803">.</span><span class="ident" id="7115804">sparseMap</span><span class="op" id="7115813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115818">pos</span><span class="op" id="7115821">:</span>&nbsp;<span class="num" id="7115823">0</span><span class="op" id="7115824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115829">tot</span><span class="op" id="7115832">:</span>&nbsp;<span class="ident" id="7115834">test</span><span class="op" id="7115838">.</span><span class="ident" id="7115839">realSize</span><span class="op" id="7115847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115851">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7115855">if</span>&nbsp;<span class="ident" id="7115858">sfr</span><span class="op" id="7115861">.</span><span class="ident" id="7115862">numBytes</span><span class="op" id="7115870">(</span><span class="op" id="7115871">)</span>&nbsp;<span class="op" id="7115873">!=</span>&nbsp;<span class="ident" id="7115876">nb</span>&nbsp;<span class="op" id="7115879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115884">t</span><span class="op" id="7115885">.</span><span class="ident" id="7115886">Errorf</span><span class="op" id="7115892">(</span><span class="string" id="7115893">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7115948">,</span>&nbsp;<span class="ident" id="7115950">i</span><span class="op" id="7115951">,</span>&nbsp;<span class="ident" id="7115953">sfr</span><span class="op" id="7115956">.</span><span class="ident" id="7115957">numBytes</span><span class="op" id="7115965">(</span><span class="op" id="7115966">)</span><span class="op" id="7115967">,</span>&nbsp;<span class="ident" id="7115969">nb</span><span class="op" id="7115971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7115975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7115979">buf</span><span class="op" id="7115982">,</span>&nbsp;<span class="ident" id="7115984">err</span>&nbsp;<span class="op" id="7115988">:=</span>&nbsp;<span class="ident" id="7115991">ioutil</span><span class="op" id="7115997">.</span><span class="ident" id="7115998">ReadAll</span><span class="op" id="7116005">(</span><span class="ident" id="7116006">sfr</span><span class="op" id="7116009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116013">if</span>&nbsp;<span class="ident" id="7116016">err</span>&nbsp;<span class="op" id="7116020">!=</span>&nbsp;<span class="ident" id="7116023">nil</span>&nbsp;<span class="op" id="7116027">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116032">t</span><span class="op" id="7116033">.</span><span class="ident" id="7116034">Errorf</span><span class="op" id="7116040">(</span><span class="string" id="7116041">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7116072">,</span>&nbsp;<span class="ident" id="7116074">i</span><span class="op" id="7116075">,</span>&nbsp;<span class="ident" id="7116077">err</span><span class="op" id="7116080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116088">if</span>&nbsp;<span class="ident" id="7116091">e</span>&nbsp;<span class="op" id="7116093">:=</span>&nbsp;<span class="ident" id="7116096">test</span><span class="op" id="7116100">.</span><span class="ident" id="7116101">expected</span><span class="op" id="7116109">;</span>&nbsp;<span class="op" id="7116111">!</span><span class="ident" id="7116112">bytes</span><span class="op" id="7116117">.</span><span class="ident" id="7116118">Equal</span><span class="op" id="7116123">(</span><span class="ident" id="7116124">buf</span><span class="op" id="7116127">,</span>&nbsp;<span class="ident" id="7116129">e</span><span class="op" id="7116130">)</span>&nbsp;<span class="op" id="7116132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116137">t</span><span class="op" id="7116138">.</span><span class="ident" id="7116139">Errorf</span><span class="op" id="7116145">(</span><span class="string" id="7116146">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7116179">,</span>&nbsp;<span class="ident" id="7116181">i</span><span class="op" id="7116182">,</span>&nbsp;<span class="ident" id="7116184">buf</span><span class="op" id="7116187">,</span>&nbsp;<span class="ident" id="7116189">e</span><span class="op" id="7116190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116194">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116198">if</span>&nbsp;<span class="ident" id="7116201">sfr</span><span class="op" id="7116204">.</span><span class="ident" id="7116205">numBytes</span><span class="op" id="7116213">(</span><span class="op" id="7116214">)</span>&nbsp;<span class="op" id="7116216">!=</span>&nbsp;<span class="num" id="7116219">0</span>&nbsp;<span class="op" id="7116221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116226">t</span><span class="op" id="7116227">.</span><span class="ident" id="7116228">Errorf</span><span class="op" id="7116234">(</span><span class="string" id="7116235">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7116295">,</span>&nbsp;<span class="ident" id="7116297">i</span><span class="op" id="7116298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116305">}</span><br>
<span class="lineno"></span><span class="op" id="7116307">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7116310">func</span>&nbsp;<span class="ident" id="7116315">TestSparseIncrementalRead</span><span class="op" id="7116340">(</span><span class="ident" id="7116341">t</span>&nbsp;<span class="op" id="7116343">*</span><span class="ident" id="7116344">testing</span><span class="op" id="7116351">.</span><span class="ident" id="7116352">T</span><span class="op" id="7116353">)</span>&nbsp;<span class="op" id="7116355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116358">sparseMap</span>&nbsp;<span class="op" id="7116368">:=</span>&nbsp;<span class="op" id="7116371">[</span><span class="op" id="7116372">]</span><span class="ident" id="7116373">sparseEntry</span><span class="op" id="7116384">{</span><span class="op" id="7116385">{</span><span class="num" id="7116386">10</span><span class="op" id="7116388">,</span>&nbsp;<span class="num" id="7116390">2</span><span class="op" id="7116391">}</span><span class="op" id="7116392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116395">sparseData</span>&nbsp;<span class="op" id="7116406">:=</span>&nbsp;<span class="op" id="7116409">[</span><span class="op" id="7116410">]</span><span class="builtintype" id="7116411">byte</span><span class="op" id="7116415">(</span><span class="string" id="7116416">&#34;Go&#34;</span><span class="op" id="7116420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116423">expected</span>&nbsp;<span class="op" id="7116432">:=</span>&nbsp;<span class="string" id="7116435">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116514">r</span>&nbsp;<span class="op" id="7116516">:=</span>&nbsp;<span class="ident" id="7116519">bytes</span><span class="op" id="7116524">.</span><span class="ident" id="7116525">NewReader</span><span class="op" id="7116534">(</span><span class="ident" id="7116535">sparseData</span><span class="op" id="7116545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116548">nb</span>&nbsp;<span class="op" id="7116551">:=</span>&nbsp;<span class="ident" id="7116554">int64</span><span class="op" id="7116559">(</span><span class="ident" id="7116560">r</span><span class="op" id="7116561">.</span><span class="ident" id="7116562">Len</span><span class="op" id="7116565">(</span><span class="op" id="7116566">)</span><span class="op" id="7116567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116570">sfr</span>&nbsp;<span class="op" id="7116574">:=</span>&nbsp;<span class="op" id="7116577">&amp;</span><span class="ident" id="7116578">sparseFileReader</span><span class="op" id="7116594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116598">rfr</span><span class="op" id="7116601">:</span>&nbsp;<span class="op" id="7116603">&amp;</span><span class="ident" id="7116604">regFileReader</span><span class="op" id="7116617">{</span><span class="ident" id="7116618">r</span><span class="op" id="7116619">:</span>&nbsp;<span class="ident" id="7116621">r</span><span class="op" id="7116622">,</span>&nbsp;<span class="ident" id="7116624">nb</span><span class="op" id="7116626">:</span>&nbsp;<span class="ident" id="7116628">nb</span><span class="op" id="7116630">}</span><span class="op" id="7116631">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116635">sp</span><span class="op" id="7116637">:</span>&nbsp;&nbsp;<span class="ident" id="7116640">sparseMap</span><span class="op" id="7116649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116653">pos</span><span class="op" id="7116656">:</span>&nbsp;<span class="num" id="7116658">0</span><span class="op" id="7116659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116663">tot</span><span class="op" id="7116666">:</span>&nbsp;<span class="ident" id="7116668">int64</span><span class="op" id="7116673">(</span><span class="builtinfunc" id="7116674">len</span><span class="op" id="7116677">(</span><span class="ident" id="7116678">expected</span><span class="op" id="7116686">)</span><span class="op" id="7116687">)</span><span class="op" id="7116688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7116695">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7116764">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116812">var</span>&nbsp;<span class="ident" id="7116816">outputBuf</span>&nbsp;<span class="ident" id="7116826">bytes</span><span class="op" id="7116831">.</span><span class="ident" id="7116832">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116840">buf</span>&nbsp;<span class="op" id="7116844">:=</span>&nbsp;<span class="builtinfunc" id="7116847">make</span><span class="op" id="7116851">(</span><span class="op" id="7116852">[</span><span class="op" id="7116853">]</span><span class="builtintype" id="7116854">byte</span><span class="op" id="7116858">,</span>&nbsp;<span class="num" id="7116860">6</span><span class="op" id="7116861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116864">for</span>&nbsp;<span class="op" id="7116868">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116872">n</span><span class="op" id="7116873">,</span>&nbsp;<span class="ident" id="7116875">err</span>&nbsp;<span class="op" id="7116879">:=</span>&nbsp;<span class="ident" id="7116882">sfr</span><span class="op" id="7116885">.</span><span class="ident" id="7116886">Read</span><span class="op" id="7116890">(</span><span class="ident" id="7116891">buf</span><span class="op" id="7116894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116898">if</span>&nbsp;<span class="ident" id="7116901">err</span>&nbsp;<span class="op" id="7116905">==</span>&nbsp;<span class="ident" id="7116908">io</span><span class="op" id="7116910">.</span><span class="ident" id="7116911">EOF</span>&nbsp;<span class="op" id="7116915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116920">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7116932">if</span>&nbsp;<span class="ident" id="7116935">err</span>&nbsp;<span class="op" id="7116939">!=</span>&nbsp;<span class="ident" id="7116942">nil</span>&nbsp;<span class="op" id="7116946">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7116951">t</span><span class="op" id="7116952">.</span><span class="ident" id="7116953">Errorf</span><span class="op" id="7116959">(</span><span class="string" id="7116960">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7116989">,</span>&nbsp;<span class="ident" id="7116991">err</span><span class="op" id="7116994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7116998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7117002">if</span>&nbsp;<span class="ident" id="7117005">n</span>&nbsp;<span class="op" id="7117007">&gt;</span>&nbsp;<span class="num" id="7117009">0</span>&nbsp;<span class="op" id="7117011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117016">_</span><span class="op" id="7117017">,</span>&nbsp;<span class="ident" id="7117019">err</span>&nbsp;<span class="op" id="7117023">:=</span>&nbsp;<span class="ident" id="7117026">outputBuf</span><span class="op" id="7117035">.</span><span class="ident" id="7117036">Write</span><span class="op" id="7117041">(</span><span class="ident" id="7117042">buf</span><span class="op" id="7117045">[</span><span class="op" id="7117046">:</span><span class="ident" id="7117047">n</span><span class="op" id="7117048">]</span><span class="op" id="7117049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7117054">if</span>&nbsp;<span class="ident" id="7117057">err</span>&nbsp;<span class="op" id="7117061">!=</span>&nbsp;<span class="ident" id="7117064">nil</span>&nbsp;<span class="op" id="7117068">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117074">t</span><span class="op" id="7117075">.</span><span class="ident" id="7117076">Errorf</span><span class="op" id="7117082">(</span><span class="string" id="7117083">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7117113">,</span>&nbsp;<span class="ident" id="7117115">err</span><span class="op" id="7117118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117133">got</span>&nbsp;<span class="op" id="7117137">:=</span>&nbsp;<span class="ident" id="7117140">outputBuf</span><span class="op" id="7117149">.</span><span class="ident" id="7117150">String</span><span class="op" id="7117156">(</span><span class="op" id="7117157">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7117160">if</span>&nbsp;<span class="ident" id="7117163">got</span>&nbsp;<span class="op" id="7117167">!=</span>&nbsp;<span class="ident" id="7117170">expected</span>&nbsp;<span class="op" id="7117179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117183">t</span><span class="op" id="7117184">.</span><span class="ident" id="7117185">Errorf</span><span class="op" id="7117191">(</span><span class="string" id="7117192">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7117216">,</span>&nbsp;<span class="ident" id="7117218">got</span><span class="op" id="7117221">,</span>&nbsp;<span class="ident" id="7117223">expected</span><span class="op" id="7117231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117234">}</span><br>
<span class="lineno"></span><span class="op" id="7117236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7117239">func</span>&nbsp;<span class="ident" id="7117244">TestReadGNUSparseMap0x1</span><span class="op" id="7117267">(</span><span class="ident" id="7117268">t</span>&nbsp;<span class="op" id="7117270">*</span><span class="ident" id="7117271">testing</span><span class="op" id="7117278">.</span><span class="ident" id="7117279">T</span><span class="op" id="7117280">)</span>&nbsp;<span class="op" id="7117282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117285">headers</span>&nbsp;<span class="op" id="7117293">:=</span>&nbsp;<span class="keyword" id="7117296">map</span><span class="op" id="7117299">[</span><span class="builtintype" id="7117300">string</span><span class="op" id="7117306">]</span><span class="builtintype" id="7117307">string</span><span class="op" id="7117313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117317">paxGNUSparseNumBlocks</span><span class="op" id="7117338">:</span>&nbsp;<span class="string" id="7117340">&#34;4&#34;</span><span class="op" id="7117343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117347">paxGNUSparseMap</span><span class="op" id="7117362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7117370">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7117390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117393">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117396">expected</span>&nbsp;<span class="op" id="7117405">:=</span>&nbsp;<span class="op" id="7117408">[</span><span class="op" id="7117409">]</span><span class="ident" id="7117410">sparseEntry</span><span class="op" id="7117421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117425">{</span><span class="ident" id="7117426">offset</span><span class="op" id="7117432">:</span>&nbsp;<span class="num" id="7117434">0</span><span class="op" id="7117435">,</span>&nbsp;<span class="ident" id="7117437">numBytes</span><span class="op" id="7117445">:</span>&nbsp;<span class="num" id="7117447">5</span><span class="op" id="7117448">}</span><span class="op" id="7117449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117453">{</span><span class="ident" id="7117454">offset</span><span class="op" id="7117460">:</span>&nbsp;<span class="num" id="7117462">10</span><span class="op" id="7117464">,</span>&nbsp;<span class="ident" id="7117466">numBytes</span><span class="op" id="7117474">:</span>&nbsp;<span class="num" id="7117476">5</span><span class="op" id="7117477">}</span><span class="op" id="7117478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117482">{</span><span class="ident" id="7117483">offset</span><span class="op" id="7117489">:</span>&nbsp;<span class="num" id="7117491">20</span><span class="op" id="7117493">,</span>&nbsp;<span class="ident" id="7117495">numBytes</span><span class="op" id="7117503">:</span>&nbsp;<span class="num" id="7117505">5</span><span class="op" id="7117506">}</span><span class="op" id="7117507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117511">{</span><span class="ident" id="7117512">offset</span><span class="op" id="7117518">:</span>&nbsp;<span class="num" id="7117520">30</span><span class="op" id="7117522">,</span>&nbsp;<span class="ident" id="7117524">numBytes</span><span class="op" id="7117532">:</span>&nbsp;<span class="num" id="7117534">5</span><span class="op" id="7117535">}</span><span class="op" id="7117536">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117543">sp</span><span class="op" id="7117545">,</span>&nbsp;<span class="ident" id="7117547">err</span>&nbsp;<span class="op" id="7117551">:=</span>&nbsp;<span class="ident" id="7117554">readGNUSparseMap0x1</span><span class="op" id="7117573">(</span><span class="ident" id="7117574">headers</span><span class="op" id="7117581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7117584">if</span>&nbsp;<span class="ident" id="7117587">err</span>&nbsp;<span class="op" id="7117591">!=</span>&nbsp;<span class="ident" id="7117594">nil</span>&nbsp;<span class="op" id="7117598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117602">t</span><span class="op" id="7117603">.</span><span class="ident" id="7117604">Errorf</span><span class="op" id="7117610">(</span><span class="string" id="7117611">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7117633">,</span>&nbsp;<span class="ident" id="7117635">err</span><span class="op" id="7117638">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7117644">if</span>&nbsp;<span class="op" id="7117647">!</span><span class="ident" id="7117648">reflect</span><span class="op" id="7117655">.</span><span class="ident" id="7117656">DeepEqual</span><span class="op" id="7117665">(</span><span class="ident" id="7117666">sp</span><span class="op" id="7117668">,</span>&nbsp;<span class="ident" id="7117670">expected</span><span class="op" id="7117678">)</span>&nbsp;<span class="op" id="7117680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117684">t</span><span class="op" id="7117685">.</span><span class="ident" id="7117686">Errorf</span><span class="op" id="7117692">(</span><span class="string" id="7117693">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7117734">,</span>&nbsp;<span class="ident" id="7117736">sp</span><span class="op" id="7117738">,</span>&nbsp;<span class="ident" id="7117740">expected</span><span class="op" id="7117748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7117751">}</span><br>
<span class="lineno"></span><span class="op" id="7117753">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7117756">func</span>&nbsp;<span class="ident" id="7117761">TestReadGNUSparseMap1x0</span><span class="op" id="7117784">(</span><span class="ident" id="7117785">t</span>&nbsp;<span class="op" id="7117787">*</span><span class="ident" id="7117788">testing</span><span class="op" id="7117795">.</span><span class="ident" id="7117796">T</span><span class="op" id="7117797">)</span>&nbsp;<span class="op" id="7117799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7117802">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117886">numEntries</span>&nbsp;<span class="op" id="7117897">:=</span>&nbsp;<span class="num" id="7117900">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117905">expected</span>&nbsp;<span class="op" id="7117914">:=</span>&nbsp;<span class="builtinfunc" id="7117917">make</span><span class="op" id="7117921">(</span><span class="op" id="7117922">[</span><span class="op" id="7117923">]</span><span class="ident" id="7117924">sparseEntry</span><span class="op" id="7117935">,</span>&nbsp;<span class="num" id="7117937">0</span><span class="op" id="7117938">,</span>&nbsp;<span class="ident" id="7117940">numEntries</span><span class="op" id="7117950">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117953">sparseMap</span>&nbsp;<span class="op" id="7117963">:=</span>&nbsp;<span class="builtinfunc" id="7117966">new</span><span class="op" id="7117969">(</span><span class="ident" id="7117970">bytes</span><span class="op" id="7117975">.</span><span class="ident" id="7117976">Buffer</span><span class="op" id="7117982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7117986">fmt</span><span class="op" id="7117989">.</span><span class="ident" id="7117990">Fprintf</span><span class="op" id="7117997">(</span><span class="ident" id="7117998">sparseMap</span><span class="op" id="7118007">,</span>&nbsp;<span class="string" id="7118009">&#34;%d\n&#34;</span><span class="op" id="7118015">,</span>&nbsp;<span class="ident" id="7118017">numEntries</span><span class="op" id="7118027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7118030">for</span>&nbsp;<span class="ident" id="7118034">i</span>&nbsp;<span class="op" id="7118036">:=</span>&nbsp;<span class="num" id="7118039">0</span><span class="op" id="7118040">;</span>&nbsp;<span class="ident" id="7118042">i</span>&nbsp;<span class="op" id="7118044">&lt;</span>&nbsp;<span class="ident" id="7118046">numEntries</span><span class="op" id="7118056">;</span>&nbsp;<span class="ident" id="7118058">i</span><span class="op" id="7118059">++</span>&nbsp;<span class="op" id="7118062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118066">offset</span>&nbsp;<span class="op" id="7118073">:=</span>&nbsp;<span class="ident" id="7118076">int64</span><span class="op" id="7118081">(</span><span class="num" id="7118082">2048</span>&nbsp;<span class="op" id="7118087">*</span>&nbsp;<span class="ident" id="7118089">i</span><span class="op" id="7118090">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118094">numBytes</span>&nbsp;<span class="op" id="7118103">:=</span>&nbsp;<span class="ident" id="7118106">int64</span><span class="op" id="7118111">(</span><span class="num" id="7118112">1024</span><span class="op" id="7118116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118120">expected</span>&nbsp;<span class="op" id="7118129">=</span>&nbsp;<span class="builtinfunc" id="7118131">append</span><span class="op" id="7118137">(</span><span class="ident" id="7118138">expected</span><span class="op" id="7118146">,</span>&nbsp;<span class="ident" id="7118148">sparseEntry</span><span class="op" id="7118159">{</span><span class="ident" id="7118160">offset</span><span class="op" id="7118166">:</span>&nbsp;<span class="ident" id="7118168">offset</span><span class="op" id="7118174">,</span>&nbsp;<span class="ident" id="7118176">numBytes</span><span class="op" id="7118184">:</span>&nbsp;<span class="ident" id="7118186">numBytes</span><span class="op" id="7118194">}</span><span class="op" id="7118195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118199">fmt</span><span class="op" id="7118202">.</span><span class="ident" id="7118203">Fprintf</span><span class="op" id="7118210">(</span><span class="ident" id="7118211">sparseMap</span><span class="op" id="7118220">,</span>&nbsp;<span class="string" id="7118222">&#34;%d\n%d\n&#34;</span><span class="op" id="7118232">,</span>&nbsp;<span class="ident" id="7118234">offset</span><span class="op" id="7118240">,</span>&nbsp;<span class="ident" id="7118242">numBytes</span><span class="op" id="7118250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7118253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7118257">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118336">headerBlocks</span>&nbsp;<span class="op" id="7118349">:=</span>&nbsp;<span class="op" id="7118352">(</span><span class="ident" id="7118353">sparseMap</span><span class="op" id="7118362">.</span><span class="ident" id="7118363">Len</span><span class="op" id="7118366">(</span><span class="op" id="7118367">)</span>&nbsp;<span class="op" id="7118369">+</span>&nbsp;<span class="ident" id="7118371">blockSize</span>&nbsp;<span class="op" id="7118381">-</span>&nbsp;<span class="num" id="7118383">1</span><span class="op" id="7118384">)</span>&nbsp;<span class="op" id="7118386">/</span>&nbsp;<span class="ident" id="7118388">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118399">bufLen</span>&nbsp;<span class="op" id="7118406">:=</span>&nbsp;<span class="ident" id="7118409">blockSize</span>&nbsp;<span class="op" id="7118419">*</span>&nbsp;<span class="ident" id="7118421">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118435">buf</span>&nbsp;<span class="op" id="7118439">:=</span>&nbsp;<span class="builtinfunc" id="7118442">make</span><span class="op" id="7118446">(</span><span class="op" id="7118447">[</span><span class="op" id="7118448">]</span><span class="builtintype" id="7118449">byte</span><span class="op" id="7118453">,</span>&nbsp;<span class="ident" id="7118455">bufLen</span><span class="op" id="7118461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7118464">copy</span><span class="op" id="7118468">(</span><span class="ident" id="7118469">buf</span><span class="op" id="7118472">,</span>&nbsp;<span class="ident" id="7118474">sparseMap</span><span class="op" id="7118483">.</span><span class="ident" id="7118484">Bytes</span><span class="op" id="7118489">(</span><span class="op" id="7118490">)</span><span class="op" id="7118491">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7118495">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118536">r</span>&nbsp;<span class="op" id="7118538">:=</span>&nbsp;<span class="ident" id="7118541">bytes</span><span class="op" id="7118546">.</span><span class="ident" id="7118547">NewReader</span><span class="op" id="7118556">(</span><span class="ident" id="7118557">buf</span><span class="op" id="7118560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7118564">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118588">sp</span><span class="op" id="7118590">,</span>&nbsp;<span class="ident" id="7118592">err</span>&nbsp;<span class="op" id="7118596">:=</span>&nbsp;<span class="ident" id="7118599">readGNUSparseMap1x0</span><span class="op" id="7118618">(</span><span class="ident" id="7118619">r</span><span class="op" id="7118620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7118623">if</span>&nbsp;<span class="ident" id="7118626">err</span>&nbsp;<span class="op" id="7118630">!=</span>&nbsp;<span class="ident" id="7118633">nil</span>&nbsp;<span class="op" id="7118637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118641">t</span><span class="op" id="7118642">.</span><span class="ident" id="7118643">Errorf</span><span class="op" id="7118649">(</span><span class="string" id="7118650">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7118672">,</span>&nbsp;<span class="ident" id="7118674">err</span><span class="op" id="7118677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7118680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7118683">if</span>&nbsp;<span class="op" id="7118686">!</span><span class="ident" id="7118687">reflect</span><span class="op" id="7118694">.</span><span class="ident" id="7118695">DeepEqual</span><span class="op" id="7118704">(</span><span class="ident" id="7118705">sp</span><span class="op" id="7118707">,</span>&nbsp;<span class="ident" id="7118709">expected</span><span class="op" id="7118717">)</span>&nbsp;<span class="op" id="7118719">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118723">t</span><span class="op" id="7118724">.</span><span class="ident" id="7118725">Errorf</span><span class="op" id="7118731">(</span><span class="string" id="7118732">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7118773">,</span>&nbsp;<span class="ident" id="7118775">sp</span><span class="op" id="7118777">,</span>&nbsp;<span class="ident" id="7118779">expected</span><span class="op" id="7118787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7118790">}</span><br>
<span class="lineno"></span><span class="op" id="7118792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7118795">func</span>&nbsp;<span class="ident" id="7118800">TestUninitializedRead</span><span class="op" id="7118821">(</span><span class="ident" id="7118822">t</span>&nbsp;<span class="op" id="7118824">*</span><span class="ident" id="7118825">testing</span><span class="op" id="7118832">.</span><span class="ident" id="7118833">T</span><span class="op" id="7118834">)</span>&nbsp;<span class="op" id="7118836">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118839">test</span>&nbsp;<span class="op" id="7118844">:=</span>&nbsp;<span class="ident" id="7118847">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118859">f</span><span class="op" id="7118860">,</span>&nbsp;<span class="ident" id="7118862">err</span>&nbsp;<span class="op" id="7118866">:=</span>&nbsp;<span class="ident" id="7118869">os</span><span class="op" id="7118871">.</span><span class="ident" id="7118872">Open</span><span class="op" id="7118876">(</span><span class="ident" id="7118877">test</span><span class="op" id="7118881">.</span><span class="ident" id="7118882">file</span><span class="op" id="7118886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7118889">if</span>&nbsp;<span class="ident" id="7118892">err</span>&nbsp;<span class="op" id="7118896">!=</span>&nbsp;<span class="ident" id="7118899">nil</span>&nbsp;<span class="op" id="7118903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118907">t</span><span class="op" id="7118908">.</span><span class="ident" id="7118909">Fatalf</span><span class="op" id="7118915">(</span><span class="string" id="7118916">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7118938">,</span>&nbsp;<span class="ident" id="7118940">err</span><span class="op" id="7118943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7118946">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7118949">defer</span>&nbsp;<span class="ident" id="7118955">f</span><span class="op" id="7118956">.</span><span class="ident" id="7118957">Close</span><span class="op" id="7118962">(</span><span class="op" id="7118963">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118967">tr</span>&nbsp;<span class="op" id="7118970">:=</span>&nbsp;<span class="ident" id="7118973">NewReader</span><span class="op" id="7118982">(</span><span class="ident" id="7118983">f</span><span class="op" id="7118984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7118987">_</span><span class="op" id="7118988">,</span>&nbsp;<span class="ident" id="7118990">err</span>&nbsp;<span class="op" id="7118994">=</span>&nbsp;<span class="ident" id="7118996">tr</span><span class="op" id="7118998">.</span><span class="ident" id="7118999">Read</span><span class="op" id="7119003">(</span><span class="op" id="7119004">[</span><span class="op" id="7119005">]</span><span class="builtintype" id="7119006">byte</span><span class="op" id="7119010">{</span><span class="op" id="7119011">}</span><span class="op" id="7119012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119015">if</span>&nbsp;<span class="ident" id="7119018">err</span>&nbsp;<span class="op" id="7119022">==</span>&nbsp;<span class="ident" id="7119025">nil</span>&nbsp;<span class="op" id="7119029">||</span>&nbsp;<span class="ident" id="7119032">err</span>&nbsp;<span class="op" id="7119036">!=</span>&nbsp;<span class="ident" id="7119039">io</span><span class="op" id="7119041">.</span><span class="ident" id="7119042">EOF</span>&nbsp;<span class="op" id="7119046">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119050">t</span><span class="op" id="7119051">.</span><span class="ident" id="7119052">Errorf</span><span class="op" id="7119058">(</span><span class="string" id="7119059">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7119092">,</span>&nbsp;<span class="ident" id="7119094">err</span><span class="op" id="7119097">,</span>&nbsp;<span class="ident" id="7119099">io</span><span class="op" id="7119101">.</span><span class="ident" id="7119102">EOF</span><span class="op" id="7119105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7119111">}</span>
</div>
</body>
</html>
