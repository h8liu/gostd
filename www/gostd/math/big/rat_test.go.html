<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6978382">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6978437">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6978491">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6978542">package</span>&nbsp;<span class="ident" id="6978550">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6978555">import</span>&nbsp;<span class="op" id="6978562">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978565">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978574">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978590">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978607">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978623">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978630">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978638">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978649">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978660">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6978670">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6978673">func</span>&nbsp;<span class="ident" id="6978678">TestZeroRat</span><span class="op" id="6978689">(</span><span class="ident" id="6978690">t</span>&nbsp;<span class="op" id="6978692">*</span><span class="ident" id="6978693">testing</span><span class="op" id="6978700">.</span><span class="ident" id="6978701">T</span><span class="op" id="6978702">)</span>&nbsp;<span class="op" id="6978704">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978707">var</span>&nbsp;<span class="ident" id="6978711">x</span><span class="op" id="6978712">,</span>&nbsp;<span class="ident" id="6978714">y</span><span class="op" id="6978715">,</span>&nbsp;<span class="ident" id="6978717">z</span>&nbsp;<span class="ident" id="6978719">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978724">y</span><span class="op" id="6978725">.</span><span class="ident" id="6978726">SetFrac64</span><span class="op" id="6978735">(</span><span class="num" id="6978736">0</span><span class="op" id="6978737">,</span>&nbsp;<span class="num" id="6978739">42</span><span class="op" id="6978741">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978745">if</span>&nbsp;<span class="ident" id="6978748">x</span><span class="op" id="6978749">.</span><span class="ident" id="6978750">Cmp</span><span class="op" id="6978753">(</span><span class="op" id="6978754">&amp;</span><span class="ident" id="6978755">y</span><span class="op" id="6978756">)</span>&nbsp;<span class="op" id="6978758">!=</span>&nbsp;<span class="num" id="6978761">0</span>&nbsp;<span class="op" id="6978763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978767">t</span><span class="op" id="6978768">.</span><span class="ident" id="6978769">Errorf</span><span class="op" id="6978775">(</span><span class="string" id="6978776">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="6978815">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978822">if</span>&nbsp;<span class="ident" id="6978825">s</span>&nbsp;<span class="op" id="6978827">:=</span>&nbsp;<span class="ident" id="6978830">x</span><span class="op" id="6978831">.</span><span class="ident" id="6978832">String</span><span class="op" id="6978838">(</span><span class="op" id="6978839">)</span><span class="op" id="6978840">;</span>&nbsp;<span class="ident" id="6978842">s</span>&nbsp;<span class="op" id="6978844">!=</span>&nbsp;<span class="string" id="6978847">&#34;0/1&#34;</span>&nbsp;<span class="op" id="6978853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978857">t</span><span class="op" id="6978858">.</span><span class="ident" id="6978859">Errorf</span><span class="op" id="6978865">(</span><span class="string" id="6978866">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="6978888">,</span>&nbsp;<span class="ident" id="6978890">s</span><span class="op" id="6978891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978894">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978898">if</span>&nbsp;<span class="ident" id="6978901">s</span>&nbsp;<span class="op" id="6978903">:=</span>&nbsp;<span class="ident" id="6978906">x</span><span class="op" id="6978907">.</span><span class="ident" id="6978908">RatString</span><span class="op" id="6978917">(</span><span class="op" id="6978918">)</span><span class="op" id="6978919">;</span>&nbsp;<span class="ident" id="6978921">s</span>&nbsp;<span class="op" id="6978923">!=</span>&nbsp;<span class="string" id="6978926">&#34;0&#34;</span>&nbsp;<span class="op" id="6978930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978934">t</span><span class="op" id="6978935">.</span><span class="ident" id="6978936">Errorf</span><span class="op" id="6978942">(</span><span class="string" id="6978943">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6978963">,</span>&nbsp;<span class="ident" id="6978965">s</span><span class="op" id="6978966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978973">z</span><span class="op" id="6978974">.</span><span class="ident" id="6978975">Add</span><span class="op" id="6978978">(</span><span class="op" id="6978979">&amp;</span><span class="ident" id="6978980">x</span><span class="op" id="6978981">,</span>&nbsp;<span class="op" id="6978983">&amp;</span><span class="ident" id="6978984">y</span><span class="op" id="6978985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978988">if</span>&nbsp;<span class="ident" id="6978991">s</span>&nbsp;<span class="op" id="6978993">:=</span>&nbsp;<span class="ident" id="6978996">z</span><span class="op" id="6978997">.</span><span class="ident" id="6978998">RatString</span><span class="op" id="6979007">(</span><span class="op" id="6979008">)</span><span class="op" id="6979009">;</span>&nbsp;<span class="ident" id="6979011">s</span>&nbsp;<span class="op" id="6979013">!=</span>&nbsp;<span class="string" id="6979016">&#34;0&#34;</span>&nbsp;<span class="op" id="6979020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979024">t</span><span class="op" id="6979025">.</span><span class="ident" id="6979026">Errorf</span><span class="op" id="6979032">(</span><span class="string" id="6979033">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6979055">,</span>&nbsp;<span class="ident" id="6979057">s</span><span class="op" id="6979058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979065">z</span><span class="op" id="6979066">.</span><span class="ident" id="6979067">Sub</span><span class="op" id="6979070">(</span><span class="op" id="6979071">&amp;</span><span class="ident" id="6979072">x</span><span class="op" id="6979073">,</span>&nbsp;<span class="op" id="6979075">&amp;</span><span class="ident" id="6979076">y</span><span class="op" id="6979077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979080">if</span>&nbsp;<span class="ident" id="6979083">s</span>&nbsp;<span class="op" id="6979085">:=</span>&nbsp;<span class="ident" id="6979088">z</span><span class="op" id="6979089">.</span><span class="ident" id="6979090">RatString</span><span class="op" id="6979099">(</span><span class="op" id="6979100">)</span><span class="op" id="6979101">;</span>&nbsp;<span class="ident" id="6979103">s</span>&nbsp;<span class="op" id="6979105">!=</span>&nbsp;<span class="string" id="6979108">&#34;0&#34;</span>&nbsp;<span class="op" id="6979112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979116">t</span><span class="op" id="6979117">.</span><span class="ident" id="6979118">Errorf</span><span class="op" id="6979124">(</span><span class="string" id="6979125">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6979147">,</span>&nbsp;<span class="ident" id="6979149">s</span><span class="op" id="6979150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979157">z</span><span class="op" id="6979158">.</span><span class="ident" id="6979159">Mul</span><span class="op" id="6979162">(</span><span class="op" id="6979163">&amp;</span><span class="ident" id="6979164">x</span><span class="op" id="6979165">,</span>&nbsp;<span class="op" id="6979167">&amp;</span><span class="ident" id="6979168">y</span><span class="op" id="6979169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979172">if</span>&nbsp;<span class="ident" id="6979175">s</span>&nbsp;<span class="op" id="6979177">:=</span>&nbsp;<span class="ident" id="6979180">z</span><span class="op" id="6979181">.</span><span class="ident" id="6979182">RatString</span><span class="op" id="6979191">(</span><span class="op" id="6979192">)</span><span class="op" id="6979193">;</span>&nbsp;<span class="ident" id="6979195">s</span>&nbsp;<span class="op" id="6979197">!=</span>&nbsp;<span class="string" id="6979200">&#34;0&#34;</span>&nbsp;<span class="op" id="6979204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979208">t</span><span class="op" id="6979209">.</span><span class="ident" id="6979210">Errorf</span><span class="op" id="6979216">(</span><span class="string" id="6979217">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6979239">,</span>&nbsp;<span class="ident" id="6979241">s</span><span class="op" id="6979242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6979249">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979280">defer</span>&nbsp;<span class="keyword" id="6979286">func</span><span class="op" id="6979290">(</span><span class="op" id="6979291">)</span>&nbsp;<span class="op" id="6979293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979297">if</span>&nbsp;<span class="ident" id="6979300">s</span>&nbsp;<span class="op" id="6979302">:=</span>&nbsp;<span class="builtinfunc" id="6979305">recover</span><span class="op" id="6979312">(</span><span class="op" id="6979313">)</span><span class="op" id="6979314">;</span>&nbsp;<span class="ident" id="6979316">s</span>&nbsp;<span class="op" id="6979318">==</span>&nbsp;<span class="builtintype" id="6979321">nil</span>&nbsp;<span class="op" id="6979325">||</span>&nbsp;<span class="ident" id="6979328">s</span><span class="op" id="6979329">.</span><span class="op" id="6979330">(</span><span class="builtintype" id="6979331">string</span><span class="op" id="6979337">)</span>&nbsp;<span class="op" id="6979339">!=</span>&nbsp;<span class="string" id="6979342">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="6979361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6979366">panic</span><span class="op" id="6979371">(</span><span class="ident" id="6979372">s</span><span class="op" id="6979373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979377">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979380">}</span><span class="op" id="6979381">(</span><span class="op" id="6979382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979385">z</span><span class="op" id="6979386">.</span><span class="ident" id="6979387">Quo</span><span class="op" id="6979390">(</span><span class="op" id="6979391">&amp;</span><span class="ident" id="6979392">x</span><span class="op" id="6979393">,</span>&nbsp;<span class="op" id="6979395">&amp;</span><span class="ident" id="6979396">y</span><span class="op" id="6979397">)</span><br>
<span class="lineno"></span><span class="op" id="6979399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6979402">var</span>&nbsp;<span class="ident" id="6979406">setStringTests</span>&nbsp;<span class="op" id="6979421">=</span>&nbsp;<span class="op" id="6979423">[</span><span class="op" id="6979424">]</span><span class="keyword" id="6979425">struct</span>&nbsp;<span class="op" id="6979432">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979435">in</span><span class="op" id="6979437">,</span>&nbsp;<span class="ident" id="6979439">out</span>&nbsp;<span class="builtintype" id="6979443">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979451">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6979459">bool</span><br>
<span class="lineno"></span><span class="op" id="6979464">}</span><span class="op" id="6979465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979468">{</span><span class="string" id="6979469">&#34;0&#34;</span><span class="op" id="6979472">,</span>&nbsp;<span class="string" id="6979474">&#34;0&#34;</span><span class="op" id="6979477">,</span>&nbsp;<span class="builtintype" id="6979479">true</span><span class="op" id="6979483">}</span><span class="op" id="6979484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979487">{</span><span class="string" id="6979488">&#34;-0&#34;</span><span class="op" id="6979492">,</span>&nbsp;<span class="string" id="6979494">&#34;0&#34;</span><span class="op" id="6979497">,</span>&nbsp;<span class="builtintype" id="6979499">true</span><span class="op" id="6979503">}</span><span class="op" id="6979504">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979507">{</span><span class="string" id="6979508">&#34;1&#34;</span><span class="op" id="6979511">,</span>&nbsp;<span class="string" id="6979513">&#34;1&#34;</span><span class="op" id="6979516">,</span>&nbsp;<span class="builtintype" id="6979518">true</span><span class="op" id="6979522">}</span><span class="op" id="6979523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979526">{</span><span class="string" id="6979527">&#34;-1&#34;</span><span class="op" id="6979531">,</span>&nbsp;<span class="string" id="6979533">&#34;-1&#34;</span><span class="op" id="6979537">,</span>&nbsp;<span class="builtintype" id="6979539">true</span><span class="op" id="6979543">}</span><span class="op" id="6979544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979547">{</span><span class="string" id="6979548">&#34;1.&#34;</span><span class="op" id="6979552">,</span>&nbsp;<span class="string" id="6979554">&#34;1&#34;</span><span class="op" id="6979557">,</span>&nbsp;<span class="builtintype" id="6979559">true</span><span class="op" id="6979563">}</span><span class="op" id="6979564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979567">{</span><span class="string" id="6979568">&#34;1e0&#34;</span><span class="op" id="6979573">,</span>&nbsp;<span class="string" id="6979575">&#34;1&#34;</span><span class="op" id="6979578">,</span>&nbsp;<span class="builtintype" id="6979580">true</span><span class="op" id="6979584">}</span><span class="op" id="6979585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979588">{</span><span class="string" id="6979589">&#34;1.e1&#34;</span><span class="op" id="6979595">,</span>&nbsp;<span class="string" id="6979597">&#34;10&#34;</span><span class="op" id="6979601">,</span>&nbsp;<span class="builtintype" id="6979603">true</span><span class="op" id="6979607">}</span><span class="op" id="6979608">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979611">{</span><span class="ident" id="6979612">in</span><span class="op" id="6979614">:</span>&nbsp;<span class="string" id="6979616">&#34;1e&#34;</span><span class="op" id="6979620">,</span>&nbsp;<span class="ident" id="6979622">ok</span><span class="op" id="6979624">:</span>&nbsp;<span class="builtintype" id="6979626">false</span><span class="op" id="6979631">}</span><span class="op" id="6979632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979635">{</span><span class="ident" id="6979636">in</span><span class="op" id="6979638">:</span>&nbsp;<span class="string" id="6979640">&#34;1.e&#34;</span><span class="op" id="6979645">,</span>&nbsp;<span class="ident" id="6979647">ok</span><span class="op" id="6979649">:</span>&nbsp;<span class="builtintype" id="6979651">false</span><span class="op" id="6979656">}</span><span class="op" id="6979657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979660">{</span><span class="ident" id="6979661">in</span><span class="op" id="6979663">:</span>&nbsp;<span class="string" id="6979665">&#34;1e+14e-5&#34;</span><span class="op" id="6979675">,</span>&nbsp;<span class="ident" id="6979677">ok</span><span class="op" id="6979679">:</span>&nbsp;<span class="builtintype" id="6979681">false</span><span class="op" id="6979686">}</span><span class="op" id="6979687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979690">{</span><span class="ident" id="6979691">in</span><span class="op" id="6979693">:</span>&nbsp;<span class="string" id="6979695">&#34;1e4.5&#34;</span><span class="op" id="6979702">,</span>&nbsp;<span class="ident" id="6979704">ok</span><span class="op" id="6979706">:</span>&nbsp;<span class="builtintype" id="6979708">false</span><span class="op" id="6979713">}</span><span class="op" id="6979714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979717">{</span><span class="ident" id="6979718">in</span><span class="op" id="6979720">:</span>&nbsp;<span class="string" id="6979722">&#34;r&#34;</span><span class="op" id="6979725">,</span>&nbsp;<span class="ident" id="6979727">ok</span><span class="op" id="6979729">:</span>&nbsp;<span class="builtintype" id="6979731">false</span><span class="op" id="6979736">}</span><span class="op" id="6979737">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979740">{</span><span class="ident" id="6979741">in</span><span class="op" id="6979743">:</span>&nbsp;<span class="string" id="6979745">&#34;a/b&#34;</span><span class="op" id="6979750">,</span>&nbsp;<span class="ident" id="6979752">ok</span><span class="op" id="6979754">:</span>&nbsp;<span class="builtintype" id="6979756">false</span><span class="op" id="6979761">}</span><span class="op" id="6979762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979765">{</span><span class="ident" id="6979766">in</span><span class="op" id="6979768">:</span>&nbsp;<span class="string" id="6979770">&#34;a.b&#34;</span><span class="op" id="6979775">,</span>&nbsp;<span class="ident" id="6979777">ok</span><span class="op" id="6979779">:</span>&nbsp;<span class="builtintype" id="6979781">false</span><span class="op" id="6979786">}</span><span class="op" id="6979787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979790">{</span><span class="string" id="6979791">&#34;-0.1&#34;</span><span class="op" id="6979797">,</span>&nbsp;<span class="string" id="6979799">&#34;-1/10&#34;</span><span class="op" id="6979806">,</span>&nbsp;<span class="builtintype" id="6979808">true</span><span class="op" id="6979812">}</span><span class="op" id="6979813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979816">{</span><span class="string" id="6979817">&#34;-.1&#34;</span><span class="op" id="6979822">,</span>&nbsp;<span class="string" id="6979824">&#34;-1/10&#34;</span><span class="op" id="6979831">,</span>&nbsp;<span class="builtintype" id="6979833">true</span><span class="op" id="6979837">}</span><span class="op" id="6979838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979841">{</span><span class="string" id="6979842">&#34;2/4&#34;</span><span class="op" id="6979847">,</span>&nbsp;<span class="string" id="6979849">&#34;1/2&#34;</span><span class="op" id="6979854">,</span>&nbsp;<span class="builtintype" id="6979856">true</span><span class="op" id="6979860">}</span><span class="op" id="6979861">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979864">{</span><span class="string" id="6979865">&#34;.25&#34;</span><span class="op" id="6979870">,</span>&nbsp;<span class="string" id="6979872">&#34;1/4&#34;</span><span class="op" id="6979877">,</span>&nbsp;<span class="builtintype" id="6979879">true</span><span class="op" id="6979883">}</span><span class="op" id="6979884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979887">{</span><span class="string" id="6979888">&#34;-1/5&#34;</span><span class="op" id="6979894">,</span>&nbsp;<span class="string" id="6979896">&#34;-1/5&#34;</span><span class="op" id="6979902">,</span>&nbsp;<span class="builtintype" id="6979904">true</span><span class="op" id="6979908">}</span><span class="op" id="6979909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979912">{</span><span class="string" id="6979913">&#34;8129567.7690E14&#34;</span><span class="op" id="6979930">,</span>&nbsp;<span class="string" id="6979932">&#34;812956776900000000000&#34;</span><span class="op" id="6979955">,</span>&nbsp;<span class="builtintype" id="6979957">true</span><span class="op" id="6979961">}</span><span class="op" id="6979962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979965">{</span><span class="string" id="6979966">&#34;78189e+4&#34;</span><span class="op" id="6979976">,</span>&nbsp;<span class="string" id="6979978">&#34;781890000&#34;</span><span class="op" id="6979989">,</span>&nbsp;<span class="builtintype" id="6979991">true</span><span class="op" id="6979995">}</span><span class="op" id="6979996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979999">{</span><span class="string" id="6980000">&#34;553019.8935e+8&#34;</span><span class="op" id="6980016">,</span>&nbsp;<span class="string" id="6980018">&#34;55301989350000&#34;</span><span class="op" id="6980034">,</span>&nbsp;<span class="builtintype" id="6980036">true</span><span class="op" id="6980040">}</span><span class="op" id="6980041">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980044">{</span><span class="string" id="6980045">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="6980080">,</span>&nbsp;<span class="string" id="6980082">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="6980125">,</span>&nbsp;<span class="builtintype" id="6980127">true</span><span class="op" id="6980131">}</span><span class="op" id="6980132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980135">{</span><span class="string" id="6980136">&#34;9877861857500000E-7&#34;</span><span class="op" id="6980157">,</span>&nbsp;<span class="string" id="6980159">&#34;3951144743/4&#34;</span><span class="op" id="6980173">,</span>&nbsp;<span class="builtintype" id="6980175">true</span><span class="op" id="6980179">}</span><span class="op" id="6980180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980183">{</span><span class="string" id="6980184">&#34;2169378.417e-3&#34;</span><span class="op" id="6980200">,</span>&nbsp;<span class="string" id="6980202">&#34;2169378417/1000000&#34;</span><span class="op" id="6980222">,</span>&nbsp;<span class="builtintype" id="6980224">true</span><span class="op" id="6980228">}</span><span class="op" id="6980229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980232">{</span><span class="string" id="6980233">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="6980271">,</span>&nbsp;<span class="string" id="6980273">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="6980311">,</span>&nbsp;<span class="builtintype" id="6980313">true</span><span class="op" id="6980317">}</span><span class="op" id="6980318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980321">{</span><span class="string" id="6980322">&#34;53/70893980658822810696&#34;</span><span class="op" id="6980347">,</span>&nbsp;<span class="string" id="6980349">&#34;53/70893980658822810696&#34;</span><span class="op" id="6980374">,</span>&nbsp;<span class="builtintype" id="6980376">true</span><span class="op" id="6980380">}</span><span class="op" id="6980381">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980384">{</span><span class="string" id="6980385">&#34;106/141787961317645621392&#34;</span><span class="op" id="6980412">,</span>&nbsp;<span class="string" id="6980414">&#34;53/70893980658822810696&#34;</span><span class="op" id="6980439">,</span>&nbsp;<span class="builtintype" id="6980441">true</span><span class="op" id="6980445">}</span><span class="op" id="6980446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980449">{</span><span class="string" id="6980450">&#34;204211327800791583.81095&#34;</span><span class="op" id="6980476">,</span>&nbsp;<span class="string" id="6980478">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="6980508">,</span>&nbsp;<span class="builtintype" id="6980510">true</span><span class="op" id="6980514">}</span><span class="op" id="6980515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980518">{</span><span class="ident" id="6980519">in</span><span class="op" id="6980521">:</span>&nbsp;<span class="string" id="6980523">&#34;1/0&#34;</span><span class="op" id="6980528">,</span>&nbsp;<span class="ident" id="6980530">ok</span><span class="op" id="6980532">:</span>&nbsp;<span class="builtintype" id="6980534">false</span><span class="op" id="6980539">}</span><span class="op" id="6980540">,</span><br>
<span class="lineno"></span><span class="op" id="6980542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6980545">func</span>&nbsp;<span class="ident" id="6980550">TestRatSetString</span><span class="op" id="6980566">(</span><span class="ident" id="6980567">t</span>&nbsp;<span class="op" id="6980569">*</span><span class="ident" id="6980570">testing</span><span class="op" id="6980577">.</span><span class="ident" id="6980578">T</span><span class="op" id="6980579">)</span>&nbsp;<span class="op" id="6980581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980584">for</span>&nbsp;<span class="ident" id="6980588">i</span><span class="op" id="6980589">,</span>&nbsp;<span class="ident" id="6980591">test</span>&nbsp;<span class="op" id="6980596">:=</span>&nbsp;<span class="keyword" id="6980599">range</span>&nbsp;<span class="ident" id="6980605">setStringTests</span>&nbsp;<span class="op" id="6980620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980624">x</span><span class="op" id="6980625">,</span>&nbsp;<span class="ident" id="6980627">ok</span>&nbsp;<span class="op" id="6980630">:=</span>&nbsp;<span class="builtinfunc" id="6980633">new</span><span class="op" id="6980636">(</span><span class="ident" id="6980637">Rat</span><span class="op" id="6980640">)</span><span class="op" id="6980641">.</span><span class="ident" id="6980642">SetString</span><span class="op" id="6980651">(</span><span class="ident" id="6980652">test</span><span class="op" id="6980656">.</span><span class="ident" id="6980657">in</span><span class="op" id="6980659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980664">if</span>&nbsp;<span class="ident" id="6980667">ok</span>&nbsp;<span class="op" id="6980670">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980675">if</span>&nbsp;<span class="op" id="6980678">!</span><span class="ident" id="6980679">test</span><span class="op" id="6980683">.</span><span class="ident" id="6980684">ok</span>&nbsp;<span class="op" id="6980687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980693">t</span><span class="op" id="6980694">.</span><span class="ident" id="6980695">Errorf</span><span class="op" id="6980701">(</span><span class="string" id="6980702">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="6980738">,</span>&nbsp;<span class="ident" id="6980740">i</span><span class="op" id="6980741">,</span>&nbsp;<span class="ident" id="6980743">test</span><span class="op" id="6980747">.</span><span class="ident" id="6980748">in</span><span class="op" id="6980750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980755">}</span>&nbsp;<span class="keyword" id="6980757">else</span>&nbsp;<span class="keyword" id="6980762">if</span>&nbsp;<span class="ident" id="6980765">x</span><span class="op" id="6980766">.</span><span class="ident" id="6980767">RatString</span><span class="op" id="6980776">(</span><span class="op" id="6980777">)</span>&nbsp;<span class="op" id="6980779">!=</span>&nbsp;<span class="ident" id="6980782">test</span><span class="op" id="6980786">.</span><span class="ident" id="6980787">out</span>&nbsp;<span class="op" id="6980791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980797">t</span><span class="op" id="6980798">.</span><span class="ident" id="6980799">Errorf</span><span class="op" id="6980805">(</span><span class="string" id="6980806">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6980840">,</span>&nbsp;<span class="ident" id="6980842">i</span><span class="op" id="6980843">,</span>&nbsp;<span class="ident" id="6980845">test</span><span class="op" id="6980849">.</span><span class="ident" id="6980850">in</span><span class="op" id="6980852">,</span>&nbsp;<span class="ident" id="6980854">x</span><span class="op" id="6980855">.</span><span class="ident" id="6980856">RatString</span><span class="op" id="6980865">(</span><span class="op" id="6980866">)</span><span class="op" id="6980867">,</span>&nbsp;<span class="ident" id="6980869">test</span><span class="op" id="6980873">.</span><span class="ident" id="6980874">out</span><span class="op" id="6980877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980882">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980886">}</span>&nbsp;<span class="keyword" id="6980888">else</span>&nbsp;<span class="keyword" id="6980893">if</span>&nbsp;<span class="ident" id="6980896">x</span>&nbsp;<span class="op" id="6980898">!=</span>&nbsp;<span class="builtintype" id="6980901">nil</span>&nbsp;<span class="op" id="6980905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980910">t</span><span class="op" id="6980911">.</span><span class="ident" id="6980912">Errorf</span><span class="op" id="6980918">(</span><span class="string" id="6980919">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="6980954">,</span>&nbsp;<span class="ident" id="6980956">i</span><span class="op" id="6980957">,</span>&nbsp;<span class="ident" id="6980959">test</span><span class="op" id="6980963">.</span><span class="ident" id="6980964">in</span><span class="op" id="6980966">,</span>&nbsp;<span class="ident" id="6980968">x</span><span class="op" id="6980969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980976">}</span><br>
<span class="lineno"></span><span class="op" id="6980978">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="6980981">func</span>&nbsp;<span class="ident" id="6980986">TestRatScan</span><span class="op" id="6980997">(</span><span class="ident" id="6980998">t</span>&nbsp;<span class="op" id="6981000">*</span><span class="ident" id="6981001">testing</span><span class="op" id="6981008">.</span><span class="ident" id="6981009">T</span><span class="op" id="6981010">)</span>&nbsp;<span class="op" id="6981012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981015">var</span>&nbsp;<span class="ident" id="6981019">buf</span>&nbsp;<span class="ident" id="6981023">bytes</span><span class="op" id="6981028">.</span><span class="ident" id="6981029">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981037">for</span>&nbsp;<span class="ident" id="6981041">i</span><span class="op" id="6981042">,</span>&nbsp;<span class="ident" id="6981044">test</span>&nbsp;<span class="op" id="6981049">:=</span>&nbsp;<span class="keyword" id="6981052">range</span>&nbsp;<span class="ident" id="6981058">setStringTests</span>&nbsp;<span class="op" id="6981073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981077">x</span>&nbsp;<span class="op" id="6981079">:=</span>&nbsp;<span class="builtinfunc" id="6981082">new</span><span class="op" id="6981085">(</span><span class="ident" id="6981086">Rat</span><span class="op" id="6981089">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981093">buf</span><span class="op" id="6981096">.</span><span class="ident" id="6981097">Reset</span><span class="op" id="6981102">(</span><span class="op" id="6981103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981107">buf</span><span class="op" id="6981110">.</span><span class="ident" id="6981111">WriteString</span><span class="op" id="6981122">(</span><span class="ident" id="6981123">test</span><span class="op" id="6981127">.</span><span class="ident" id="6981128">in</span><span class="op" id="6981130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981135">_</span><span class="op" id="6981136">,</span>&nbsp;<span class="ident" id="6981138">err</span>&nbsp;<span class="op" id="6981142">:=</span>&nbsp;<span class="ident" id="6981145">fmt</span><span class="op" id="6981148">.</span><span class="ident" id="6981149">Fscanf</span><span class="op" id="6981155">(</span><span class="op" id="6981156">&amp;</span><span class="ident" id="6981157">buf</span><span class="op" id="6981160">,</span>&nbsp;<span class="string" id="6981162">&#34;%v&#34;</span><span class="op" id="6981166">,</span>&nbsp;<span class="ident" id="6981168">x</span><span class="op" id="6981169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981173">if</span>&nbsp;<span class="ident" id="6981176">err</span>&nbsp;<span class="op" id="6981180">==</span>&nbsp;<span class="builtintype" id="6981183">nil</span>&nbsp;<span class="op" id="6981187">!=</span>&nbsp;<span class="ident" id="6981190">test</span><span class="op" id="6981194">.</span><span class="ident" id="6981195">ok</span>&nbsp;<span class="op" id="6981198">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981203">if</span>&nbsp;<span class="ident" id="6981206">test</span><span class="op" id="6981210">.</span><span class="ident" id="6981211">ok</span>&nbsp;<span class="op" id="6981214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981220">t</span><span class="op" id="6981221">.</span><span class="ident" id="6981222">Errorf</span><span class="op" id="6981228">(</span><span class="string" id="6981229">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6981244">,</span>&nbsp;<span class="ident" id="6981246">i</span><span class="op" id="6981247">,</span>&nbsp;<span class="ident" id="6981249">err</span><span class="op" id="6981252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981257">}</span>&nbsp;<span class="keyword" id="6981259">else</span>&nbsp;<span class="op" id="6981264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981270">t</span><span class="op" id="6981271">.</span><span class="ident" id="6981272">Errorf</span><span class="op" id="6981278">(</span><span class="string" id="6981279">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="6981299">,</span>&nbsp;<span class="ident" id="6981301">i</span><span class="op" id="6981302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981307">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981327">if</span>&nbsp;<span class="ident" id="6981330">err</span>&nbsp;<span class="op" id="6981334">==</span>&nbsp;<span class="builtintype" id="6981337">nil</span>&nbsp;<span class="op" id="6981341">&amp;&amp;</span>&nbsp;<span class="ident" id="6981344">x</span><span class="op" id="6981345">.</span><span class="ident" id="6981346">RatString</span><span class="op" id="6981355">(</span><span class="op" id="6981356">)</span>&nbsp;<span class="op" id="6981358">!=</span>&nbsp;<span class="ident" id="6981361">test</span><span class="op" id="6981365">.</span><span class="ident" id="6981366">out</span>&nbsp;<span class="op" id="6981370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981375">t</span><span class="op" id="6981376">.</span><span class="ident" id="6981377">Errorf</span><span class="op" id="6981383">(</span><span class="string" id="6981384">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6981404">,</span>&nbsp;<span class="ident" id="6981406">i</span><span class="op" id="6981407">,</span>&nbsp;<span class="ident" id="6981409">x</span><span class="op" id="6981410">.</span><span class="ident" id="6981411">RatString</span><span class="op" id="6981420">(</span><span class="op" id="6981421">)</span><span class="op" id="6981422">,</span>&nbsp;<span class="ident" id="6981424">test</span><span class="op" id="6981428">.</span><span class="ident" id="6981429">out</span><span class="op" id="6981432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981436">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981439">}</span><br>
<span class="lineno"></span><span class="op" id="6981441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6981444">var</span>&nbsp;<span class="ident" id="6981448">floatStringTests</span>&nbsp;<span class="op" id="6981465">=</span>&nbsp;<span class="op" id="6981467">[</span><span class="op" id="6981468">]</span><span class="keyword" id="6981469">struct</span>&nbsp;<span class="op" id="6981476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981479">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6981484">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981492">prec</span>&nbsp;<span class="builtintype" id="6981497">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981502">out</span>&nbsp;&nbsp;<span class="builtintype" id="6981507">string</span><br>
<span class="lineno"></span><span class="op" id="6981514">}</span><span class="op" id="6981515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981518">{</span><span class="string" id="6981519">&#34;0&#34;</span><span class="op" id="6981522">,</span>&nbsp;<span class="num" id="6981524">0</span><span class="op" id="6981525">,</span>&nbsp;<span class="string" id="6981527">&#34;0&#34;</span><span class="op" id="6981530">}</span><span class="op" id="6981531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981534">{</span><span class="string" id="6981535">&#34;0&#34;</span><span class="op" id="6981538">,</span>&nbsp;<span class="num" id="6981540">4</span><span class="op" id="6981541">,</span>&nbsp;<span class="string" id="6981543">&#34;0.0000&#34;</span><span class="op" id="6981551">}</span><span class="op" id="6981552">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981555">{</span><span class="string" id="6981556">&#34;1&#34;</span><span class="op" id="6981559">,</span>&nbsp;<span class="num" id="6981561">0</span><span class="op" id="6981562">,</span>&nbsp;<span class="string" id="6981564">&#34;1&#34;</span><span class="op" id="6981567">}</span><span class="op" id="6981568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981571">{</span><span class="string" id="6981572">&#34;1&#34;</span><span class="op" id="6981575">,</span>&nbsp;<span class="num" id="6981577">2</span><span class="op" id="6981578">,</span>&nbsp;<span class="string" id="6981580">&#34;1.00&#34;</span><span class="op" id="6981586">}</span><span class="op" id="6981587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981590">{</span><span class="string" id="6981591">&#34;-1&#34;</span><span class="op" id="6981595">,</span>&nbsp;<span class="num" id="6981597">0</span><span class="op" id="6981598">,</span>&nbsp;<span class="string" id="6981600">&#34;-1&#34;</span><span class="op" id="6981604">}</span><span class="op" id="6981605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981608">{</span><span class="string" id="6981609">&#34;.25&#34;</span><span class="op" id="6981614">,</span>&nbsp;<span class="num" id="6981616">2</span><span class="op" id="6981617">,</span>&nbsp;<span class="string" id="6981619">&#34;0.25&#34;</span><span class="op" id="6981625">}</span><span class="op" id="6981626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981629">{</span><span class="string" id="6981630">&#34;.25&#34;</span><span class="op" id="6981635">,</span>&nbsp;<span class="num" id="6981637">1</span><span class="op" id="6981638">,</span>&nbsp;<span class="string" id="6981640">&#34;0.3&#34;</span><span class="op" id="6981645">}</span><span class="op" id="6981646">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981649">{</span><span class="string" id="6981650">&#34;.25&#34;</span><span class="op" id="6981655">,</span>&nbsp;<span class="num" id="6981657">3</span><span class="op" id="6981658">,</span>&nbsp;<span class="string" id="6981660">&#34;0.250&#34;</span><span class="op" id="6981667">}</span><span class="op" id="6981668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981671">{</span><span class="string" id="6981672">&#34;-1/3&#34;</span><span class="op" id="6981678">,</span>&nbsp;<span class="num" id="6981680">3</span><span class="op" id="6981681">,</span>&nbsp;<span class="string" id="6981683">&#34;-0.333&#34;</span><span class="op" id="6981691">}</span><span class="op" id="6981692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981695">{</span><span class="string" id="6981696">&#34;-2/3&#34;</span><span class="op" id="6981702">,</span>&nbsp;<span class="num" id="6981704">4</span><span class="op" id="6981705">,</span>&nbsp;<span class="string" id="6981707">&#34;-0.6667&#34;</span><span class="op" id="6981716">}</span><span class="op" id="6981717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981720">{</span><span class="string" id="6981721">&#34;0.96&#34;</span><span class="op" id="6981727">,</span>&nbsp;<span class="num" id="6981729">1</span><span class="op" id="6981730">,</span>&nbsp;<span class="string" id="6981732">&#34;1.0&#34;</span><span class="op" id="6981737">}</span><span class="op" id="6981738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981741">{</span><span class="string" id="6981742">&#34;0.999&#34;</span><span class="op" id="6981749">,</span>&nbsp;<span class="num" id="6981751">2</span><span class="op" id="6981752">,</span>&nbsp;<span class="string" id="6981754">&#34;1.00&#34;</span><span class="op" id="6981760">}</span><span class="op" id="6981761">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981764">{</span><span class="string" id="6981765">&#34;0.9&#34;</span><span class="op" id="6981770">,</span>&nbsp;<span class="num" id="6981772">0</span><span class="op" id="6981773">,</span>&nbsp;<span class="string" id="6981775">&#34;1&#34;</span><span class="op" id="6981778">}</span><span class="op" id="6981779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981782">{</span><span class="string" id="6981783">&#34;.25&#34;</span><span class="op" id="6981788">,</span>&nbsp;<span class="op" id="6981790">-</span><span class="num" id="6981791">1</span><span class="op" id="6981792">,</span>&nbsp;<span class="string" id="6981794">&#34;0&#34;</span><span class="op" id="6981797">}</span><span class="op" id="6981798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981801">{</span><span class="string" id="6981802">&#34;.55&#34;</span><span class="op" id="6981807">,</span>&nbsp;<span class="op" id="6981809">-</span><span class="num" id="6981810">1</span><span class="op" id="6981811">,</span>&nbsp;<span class="string" id="6981813">&#34;1&#34;</span><span class="op" id="6981816">}</span><span class="op" id="6981817">,</span><br>
<span class="lineno"></span><span class="op" id="6981819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6981822">func</span>&nbsp;<span class="ident" id="6981827">TestFloatString</span><span class="op" id="6981842">(</span><span class="ident" id="6981843">t</span>&nbsp;<span class="op" id="6981845">*</span><span class="ident" id="6981846">testing</span><span class="op" id="6981853">.</span><span class="ident" id="6981854">T</span><span class="op" id="6981855">)</span>&nbsp;<span class="op" id="6981857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981860">for</span>&nbsp;<span class="ident" id="6981864">i</span><span class="op" id="6981865">,</span>&nbsp;<span class="ident" id="6981867">test</span>&nbsp;<span class="op" id="6981872">:=</span>&nbsp;<span class="keyword" id="6981875">range</span>&nbsp;<span class="ident" id="6981881">floatStringTests</span>&nbsp;<span class="op" id="6981898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981902">x</span><span class="op" id="6981903">,</span>&nbsp;<span class="ident" id="6981905">_</span>&nbsp;<span class="op" id="6981907">:=</span>&nbsp;<span class="builtinfunc" id="6981910">new</span><span class="op" id="6981913">(</span><span class="ident" id="6981914">Rat</span><span class="op" id="6981917">)</span><span class="op" id="6981918">.</span><span class="ident" id="6981919">SetString</span><span class="op" id="6981928">(</span><span class="ident" id="6981929">test</span><span class="op" id="6981933">.</span><span class="ident" id="6981934">in</span><span class="op" id="6981936">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981941">if</span>&nbsp;<span class="ident" id="6981944">x</span><span class="op" id="6981945">.</span><span class="ident" id="6981946">FloatString</span><span class="op" id="6981957">(</span><span class="ident" id="6981958">test</span><span class="op" id="6981962">.</span><span class="ident" id="6981963">prec</span><span class="op" id="6981967">)</span>&nbsp;<span class="op" id="6981969">!=</span>&nbsp;<span class="ident" id="6981972">test</span><span class="op" id="6981976">.</span><span class="ident" id="6981977">out</span>&nbsp;<span class="op" id="6981981">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981986">t</span><span class="op" id="6981987">.</span><span class="ident" id="6981988">Errorf</span><span class="op" id="6981994">(</span><span class="string" id="6981995">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6982015">,</span>&nbsp;<span class="ident" id="6982017">i</span><span class="op" id="6982018">,</span>&nbsp;<span class="ident" id="6982020">x</span><span class="op" id="6982021">.</span><span class="ident" id="6982022">FloatString</span><span class="op" id="6982033">(</span><span class="ident" id="6982034">test</span><span class="op" id="6982038">.</span><span class="ident" id="6982039">prec</span><span class="op" id="6982043">)</span><span class="op" id="6982044">,</span>&nbsp;<span class="ident" id="6982046">test</span><span class="op" id="6982050">.</span><span class="ident" id="6982051">out</span><span class="op" id="6982054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982061">}</span><br>
<span class="lineno"></span><span class="op" id="6982063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6982066">func</span>&nbsp;<span class="ident" id="6982071">TestRatSign</span><span class="op" id="6982082">(</span><span class="ident" id="6982083">t</span>&nbsp;<span class="op" id="6982085">*</span><span class="ident" id="6982086">testing</span><span class="op" id="6982093">.</span><span class="ident" id="6982094">T</span><span class="op" id="6982095">)</span>&nbsp;<span class="op" id="6982097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982100">zero</span>&nbsp;<span class="op" id="6982105">:=</span>&nbsp;<span class="ident" id="6982108">NewRat</span><span class="op" id="6982114">(</span><span class="num" id="6982115">0</span><span class="op" id="6982116">,</span>&nbsp;<span class="num" id="6982118">1</span><span class="op" id="6982119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982122">for</span>&nbsp;<span class="ident" id="6982126">_</span><span class="op" id="6982127">,</span>&nbsp;<span class="ident" id="6982129">a</span>&nbsp;<span class="op" id="6982131">:=</span>&nbsp;<span class="keyword" id="6982134">range</span>&nbsp;<span class="ident" id="6982140">setStringTests</span>&nbsp;<span class="op" id="6982155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982159">x</span><span class="op" id="6982160">,</span>&nbsp;<span class="ident" id="6982162">ok</span>&nbsp;<span class="op" id="6982165">:=</span>&nbsp;<span class="builtinfunc" id="6982168">new</span><span class="op" id="6982171">(</span><span class="ident" id="6982172">Rat</span><span class="op" id="6982175">)</span><span class="op" id="6982176">.</span><span class="ident" id="6982177">SetString</span><span class="op" id="6982186">(</span><span class="ident" id="6982187">a</span><span class="op" id="6982188">.</span><span class="ident" id="6982189">in</span><span class="op" id="6982191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982195">if</span>&nbsp;<span class="op" id="6982198">!</span><span class="ident" id="6982199">ok</span>&nbsp;<span class="op" id="6982202">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982207">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982222">s</span>&nbsp;<span class="op" id="6982224">:=</span>&nbsp;<span class="ident" id="6982227">x</span><span class="op" id="6982228">.</span><span class="ident" id="6982229">Sign</span><span class="op" id="6982233">(</span><span class="op" id="6982234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982238">e</span>&nbsp;<span class="op" id="6982240">:=</span>&nbsp;<span class="ident" id="6982243">x</span><span class="op" id="6982244">.</span><span class="ident" id="6982245">Cmp</span><span class="op" id="6982248">(</span><span class="ident" id="6982249">zero</span><span class="op" id="6982253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982257">if</span>&nbsp;<span class="ident" id="6982260">s</span>&nbsp;<span class="op" id="6982262">!=</span>&nbsp;<span class="ident" id="6982265">e</span>&nbsp;<span class="op" id="6982267">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982272">t</span><span class="op" id="6982273">.</span><span class="ident" id="6982274">Errorf</span><span class="op" id="6982280">(</span><span class="string" id="6982281">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6982309">,</span>&nbsp;<span class="ident" id="6982311">s</span><span class="op" id="6982312">,</span>&nbsp;<span class="ident" id="6982314">e</span><span class="op" id="6982315">,</span>&nbsp;<span class="op" id="6982317">&amp;</span><span class="ident" id="6982318">x</span><span class="op" id="6982319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982326">}</span><br>
<span class="lineno"></span><span class="op" id="6982328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="6982331">var</span>&nbsp;<span class="ident" id="6982335">ratCmpTests</span>&nbsp;<span class="op" id="6982347">=</span>&nbsp;<span class="op" id="6982349">[</span><span class="op" id="6982350">]</span><span class="keyword" id="6982351">struct</span>&nbsp;<span class="op" id="6982358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982361">rat1</span><span class="op" id="6982365">,</span>&nbsp;<span class="ident" id="6982367">rat2</span>&nbsp;<span class="builtintype" id="6982372">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982380">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6982391">int</span><br>
<span class="lineno"></span><span class="op" id="6982395">}</span><span class="op" id="6982396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982399">{</span><span class="string" id="6982400">&#34;0&#34;</span><span class="op" id="6982403">,</span>&nbsp;<span class="string" id="6982405">&#34;0/1&#34;</span><span class="op" id="6982410">,</span>&nbsp;<span class="num" id="6982412">0</span><span class="op" id="6982413">}</span><span class="op" id="6982414">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982417">{</span><span class="string" id="6982418">&#34;1/1&#34;</span><span class="op" id="6982423">,</span>&nbsp;<span class="string" id="6982425">&#34;1&#34;</span><span class="op" id="6982428">,</span>&nbsp;<span class="num" id="6982430">0</span><span class="op" id="6982431">}</span><span class="op" id="6982432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982435">{</span><span class="string" id="6982436">&#34;-1&#34;</span><span class="op" id="6982440">,</span>&nbsp;<span class="string" id="6982442">&#34;-2/2&#34;</span><span class="op" id="6982448">,</span>&nbsp;<span class="num" id="6982450">0</span><span class="op" id="6982451">}</span><span class="op" id="6982452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982455">{</span><span class="string" id="6982456">&#34;1&#34;</span><span class="op" id="6982459">,</span>&nbsp;<span class="string" id="6982461">&#34;0&#34;</span><span class="op" id="6982464">,</span>&nbsp;<span class="num" id="6982466">1</span><span class="op" id="6982467">}</span><span class="op" id="6982468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982471">{</span><span class="string" id="6982472">&#34;0/1&#34;</span><span class="op" id="6982477">,</span>&nbsp;<span class="string" id="6982479">&#34;1/1&#34;</span><span class="op" id="6982484">,</span>&nbsp;<span class="op" id="6982486">-</span><span class="num" id="6982487">1</span><span class="op" id="6982488">}</span><span class="op" id="6982489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982492">{</span><span class="string" id="6982493">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="6982520">,</span>&nbsp;<span class="string" id="6982522">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="6982549">,</span>&nbsp;<span class="op" id="6982551">-</span><span class="num" id="6982552">1</span><span class="op" id="6982553">}</span><span class="op" id="6982554">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982557">{</span><span class="string" id="6982558">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="6982591">,</span>&nbsp;<span class="string" id="6982593">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="6982626">,</span>&nbsp;<span class="op" id="6982628">-</span><span class="num" id="6982629">1</span><span class="op" id="6982630">}</span><span class="op" id="6982631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982634">{</span><span class="string" id="6982635">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="6982672">,</span>&nbsp;<span class="string" id="6982674">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="6982710">,</span>&nbsp;<span class="op" id="6982712">-</span><span class="num" id="6982713">1</span><span class="op" id="6982714">}</span><span class="op" id="6982715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982718">{</span><span class="string" id="6982719">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="6982755">,</span>&nbsp;<span class="string" id="6982757">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="6982794">,</span>&nbsp;<span class="num" id="6982796">0</span><span class="op" id="6982797">}</span><span class="op" id="6982798">,</span><br>
<span class="lineno"></span><span class="op" id="6982800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="6982803">func</span>&nbsp;<span class="ident" id="6982808">TestRatCmp</span><span class="op" id="6982818">(</span><span class="ident" id="6982819">t</span>&nbsp;<span class="op" id="6982821">*</span><span class="ident" id="6982822">testing</span><span class="op" id="6982829">.</span><span class="ident" id="6982830">T</span><span class="op" id="6982831">)</span>&nbsp;<span class="op" id="6982833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982836">for</span>&nbsp;<span class="ident" id="6982840">i</span><span class="op" id="6982841">,</span>&nbsp;<span class="ident" id="6982843">test</span>&nbsp;<span class="op" id="6982848">:=</span>&nbsp;<span class="keyword" id="6982851">range</span>&nbsp;<span class="ident" id="6982857">ratCmpTests</span>&nbsp;<span class="op" id="6982869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982873">x</span><span class="op" id="6982874">,</span>&nbsp;<span class="ident" id="6982876">_</span>&nbsp;<span class="op" id="6982878">:=</span>&nbsp;<span class="builtinfunc" id="6982881">new</span><span class="op" id="6982884">(</span><span class="ident" id="6982885">Rat</span><span class="op" id="6982888">)</span><span class="op" id="6982889">.</span><span class="ident" id="6982890">SetString</span><span class="op" id="6982899">(</span><span class="ident" id="6982900">test</span><span class="op" id="6982904">.</span><span class="ident" id="6982905">rat1</span><span class="op" id="6982909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982913">y</span><span class="op" id="6982914">,</span>&nbsp;<span class="ident" id="6982916">_</span>&nbsp;<span class="op" id="6982918">:=</span>&nbsp;<span class="builtinfunc" id="6982921">new</span><span class="op" id="6982924">(</span><span class="ident" id="6982925">Rat</span><span class="op" id="6982928">)</span><span class="op" id="6982929">.</span><span class="ident" id="6982930">SetString</span><span class="op" id="6982939">(</span><span class="ident" id="6982940">test</span><span class="op" id="6982944">.</span><span class="ident" id="6982945">rat2</span><span class="op" id="6982949">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982954">out</span>&nbsp;<span class="op" id="6982958">:=</span>&nbsp;<span class="ident" id="6982961">x</span><span class="op" id="6982962">.</span><span class="ident" id="6982963">Cmp</span><span class="op" id="6982966">(</span><span class="ident" id="6982967">y</span><span class="op" id="6982968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982972">if</span>&nbsp;<span class="ident" id="6982975">out</span>&nbsp;<span class="op" id="6982979">!=</span>&nbsp;<span class="ident" id="6982982">test</span><span class="op" id="6982986">.</span><span class="ident" id="6982987">out</span>&nbsp;<span class="op" id="6982991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982996">t</span><span class="op" id="6982997">.</span><span class="ident" id="6982998">Errorf</span><span class="op" id="6983004">(</span><span class="string" id="6983005">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6983032">,</span>&nbsp;<span class="ident" id="6983034">i</span><span class="op" id="6983035">,</span>&nbsp;<span class="ident" id="6983037">out</span><span class="op" id="6983040">,</span>&nbsp;<span class="ident" id="6983042">test</span><span class="op" id="6983046">.</span><span class="ident" id="6983047">out</span><span class="op" id="6983050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983057">}</span><br>
<span class="lineno">205</span><span class="op" id="6983059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6983062">func</span>&nbsp;<span class="ident" id="6983067">TestIsInt</span><span class="op" id="6983076">(</span><span class="ident" id="6983077">t</span>&nbsp;<span class="op" id="6983079">*</span><span class="ident" id="6983080">testing</span><span class="op" id="6983087">.</span><span class="ident" id="6983088">T</span><span class="op" id="6983089">)</span>&nbsp;<span class="op" id="6983091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983094">one</span>&nbsp;<span class="op" id="6983098">:=</span>&nbsp;<span class="ident" id="6983101">NewInt</span><span class="op" id="6983107">(</span><span class="num" id="6983108">1</span><span class="op" id="6983109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983112">for</span>&nbsp;<span class="ident" id="6983116">_</span><span class="op" id="6983117">,</span>&nbsp;<span class="ident" id="6983119">a</span>&nbsp;<span class="op" id="6983121">:=</span>&nbsp;<span class="keyword" id="6983124">range</span>&nbsp;<span class="ident" id="6983130">setStringTests</span>&nbsp;<span class="op" id="6983145">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983149">x</span><span class="op" id="6983150">,</span>&nbsp;<span class="ident" id="6983152">ok</span>&nbsp;<span class="op" id="6983155">:=</span>&nbsp;<span class="builtinfunc" id="6983158">new</span><span class="op" id="6983161">(</span><span class="ident" id="6983162">Rat</span><span class="op" id="6983165">)</span><span class="op" id="6983166">.</span><span class="ident" id="6983167">SetString</span><span class="op" id="6983176">(</span><span class="ident" id="6983177">a</span><span class="op" id="6983178">.</span><span class="ident" id="6983179">in</span><span class="op" id="6983181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983185">if</span>&nbsp;<span class="op" id="6983188">!</span><span class="ident" id="6983189">ok</span>&nbsp;<span class="op" id="6983192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983197">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983212">i</span>&nbsp;<span class="op" id="6983214">:=</span>&nbsp;<span class="ident" id="6983217">x</span><span class="op" id="6983218">.</span><span class="ident" id="6983219">IsInt</span><span class="op" id="6983224">(</span><span class="op" id="6983225">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983229">e</span>&nbsp;<span class="op" id="6983231">:=</span>&nbsp;<span class="ident" id="6983234">x</span><span class="op" id="6983235">.</span><span class="ident" id="6983236">Denom</span><span class="op" id="6983241">(</span><span class="op" id="6983242">)</span><span class="op" id="6983243">.</span><span class="ident" id="6983244">Cmp</span><span class="op" id="6983247">(</span><span class="ident" id="6983248">one</span><span class="op" id="6983251">)</span>&nbsp;<span class="op" id="6983253">==</span>&nbsp;<span class="num" id="6983256">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983260">if</span>&nbsp;<span class="ident" id="6983263">i</span>&nbsp;<span class="op" id="6983265">!=</span>&nbsp;<span class="ident" id="6983268">e</span>&nbsp;<span class="op" id="6983270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983275">t</span><span class="op" id="6983276">.</span><span class="ident" id="6983277">Errorf</span><span class="op" id="6983283">(</span><span class="string" id="6983284">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6983314">,</span>&nbsp;<span class="ident" id="6983316">x</span><span class="op" id="6983317">,</span>&nbsp;<span class="ident" id="6983319">i</span><span class="op" id="6983320">,</span>&nbsp;<span class="ident" id="6983322">e</span><span class="op" id="6983323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983330">}</span><br>
<span class="lineno">220</span><span class="op" id="6983332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6983335">func</span>&nbsp;<span class="ident" id="6983340">TestRatAbs</span><span class="op" id="6983350">(</span><span class="ident" id="6983351">t</span>&nbsp;<span class="op" id="6983353">*</span><span class="ident" id="6983354">testing</span><span class="op" id="6983361">.</span><span class="ident" id="6983362">T</span><span class="op" id="6983363">)</span>&nbsp;<span class="op" id="6983365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983368">zero</span>&nbsp;<span class="op" id="6983373">:=</span>&nbsp;<span class="builtinfunc" id="6983376">new</span><span class="op" id="6983379">(</span><span class="ident" id="6983380">Rat</span><span class="op" id="6983383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983386">for</span>&nbsp;<span class="ident" id="6983390">_</span><span class="op" id="6983391">,</span>&nbsp;<span class="ident" id="6983393">a</span>&nbsp;<span class="op" id="6983395">:=</span>&nbsp;<span class="keyword" id="6983398">range</span>&nbsp;<span class="ident" id="6983404">setStringTests</span>&nbsp;<span class="op" id="6983419">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983423">x</span><span class="op" id="6983424">,</span>&nbsp;<span class="ident" id="6983426">ok</span>&nbsp;<span class="op" id="6983429">:=</span>&nbsp;<span class="builtinfunc" id="6983432">new</span><span class="op" id="6983435">(</span><span class="ident" id="6983436">Rat</span><span class="op" id="6983439">)</span><span class="op" id="6983440">.</span><span class="ident" id="6983441">SetString</span><span class="op" id="6983450">(</span><span class="ident" id="6983451">a</span><span class="op" id="6983452">.</span><span class="ident" id="6983453">in</span><span class="op" id="6983455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983459">if</span>&nbsp;<span class="op" id="6983462">!</span><span class="ident" id="6983463">ok</span>&nbsp;<span class="op" id="6983466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983471">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983486">e</span>&nbsp;<span class="op" id="6983488">:=</span>&nbsp;<span class="builtinfunc" id="6983491">new</span><span class="op" id="6983494">(</span><span class="ident" id="6983495">Rat</span><span class="op" id="6983498">)</span><span class="op" id="6983499">.</span><span class="ident" id="6983500">Set</span><span class="op" id="6983503">(</span><span class="ident" id="6983504">x</span><span class="op" id="6983505">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983509">if</span>&nbsp;<span class="ident" id="6983512">e</span><span class="op" id="6983513">.</span><span class="ident" id="6983514">Cmp</span><span class="op" id="6983517">(</span><span class="ident" id="6983518">zero</span><span class="op" id="6983522">)</span>&nbsp;<span class="op" id="6983524">&lt;</span>&nbsp;<span class="num" id="6983526">0</span>&nbsp;<span class="op" id="6983528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983533">e</span><span class="op" id="6983534">.</span><span class="ident" id="6983535">Sub</span><span class="op" id="6983538">(</span><span class="ident" id="6983539">zero</span><span class="op" id="6983543">,</span>&nbsp;<span class="ident" id="6983545">e</span><span class="op" id="6983546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983554">z</span>&nbsp;<span class="op" id="6983556">:=</span>&nbsp;<span class="builtinfunc" id="6983559">new</span><span class="op" id="6983562">(</span><span class="ident" id="6983563">Rat</span><span class="op" id="6983566">)</span><span class="op" id="6983567">.</span><span class="ident" id="6983568">Abs</span><span class="op" id="6983571">(</span><span class="ident" id="6983572">x</span><span class="op" id="6983573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983577">if</span>&nbsp;<span class="ident" id="6983580">z</span><span class="op" id="6983581">.</span><span class="ident" id="6983582">Cmp</span><span class="op" id="6983585">(</span><span class="ident" id="6983586">e</span><span class="op" id="6983587">)</span>&nbsp;<span class="op" id="6983589">!=</span>&nbsp;<span class="num" id="6983592">0</span>&nbsp;<span class="op" id="6983594">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983599">t</span><span class="op" id="6983600">.</span><span class="ident" id="6983601">Errorf</span><span class="op" id="6983607">(</span><span class="string" id="6983608">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6983635">,</span>&nbsp;<span class="ident" id="6983637">x</span><span class="op" id="6983638">,</span>&nbsp;<span class="ident" id="6983640">z</span><span class="op" id="6983641">,</span>&nbsp;<span class="ident" id="6983643">e</span><span class="op" id="6983644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983651">}</span><br>
<span class="lineno"></span><span class="op" id="6983653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6983656">func</span>&nbsp;<span class="ident" id="6983661">TestRatNeg</span><span class="op" id="6983671">(</span><span class="ident" id="6983672">t</span>&nbsp;<span class="op" id="6983674">*</span><span class="ident" id="6983675">testing</span><span class="op" id="6983682">.</span><span class="ident" id="6983683">T</span><span class="op" id="6983684">)</span>&nbsp;<span class="op" id="6983686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983689">zero</span>&nbsp;<span class="op" id="6983694">:=</span>&nbsp;<span class="builtinfunc" id="6983697">new</span><span class="op" id="6983700">(</span><span class="ident" id="6983701">Rat</span><span class="op" id="6983704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983707">for</span>&nbsp;<span class="ident" id="6983711">_</span><span class="op" id="6983712">,</span>&nbsp;<span class="ident" id="6983714">a</span>&nbsp;<span class="op" id="6983716">:=</span>&nbsp;<span class="keyword" id="6983719">range</span>&nbsp;<span class="ident" id="6983725">setStringTests</span>&nbsp;<span class="op" id="6983740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983744">x</span><span class="op" id="6983745">,</span>&nbsp;<span class="ident" id="6983747">ok</span>&nbsp;<span class="op" id="6983750">:=</span>&nbsp;<span class="builtinfunc" id="6983753">new</span><span class="op" id="6983756">(</span><span class="ident" id="6983757">Rat</span><span class="op" id="6983760">)</span><span class="op" id="6983761">.</span><span class="ident" id="6983762">SetString</span><span class="op" id="6983771">(</span><span class="ident" id="6983772">a</span><span class="op" id="6983773">.</span><span class="ident" id="6983774">in</span><span class="op" id="6983776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983780">if</span>&nbsp;<span class="op" id="6983783">!</span><span class="ident" id="6983784">ok</span>&nbsp;<span class="op" id="6983787">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983792">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983807">e</span>&nbsp;<span class="op" id="6983809">:=</span>&nbsp;<span class="builtinfunc" id="6983812">new</span><span class="op" id="6983815">(</span><span class="ident" id="6983816">Rat</span><span class="op" id="6983819">)</span><span class="op" id="6983820">.</span><span class="ident" id="6983821">Sub</span><span class="op" id="6983824">(</span><span class="ident" id="6983825">zero</span><span class="op" id="6983829">,</span>&nbsp;<span class="ident" id="6983831">x</span><span class="op" id="6983832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983836">z</span>&nbsp;<span class="op" id="6983838">:=</span>&nbsp;<span class="builtinfunc" id="6983841">new</span><span class="op" id="6983844">(</span><span class="ident" id="6983845">Rat</span><span class="op" id="6983848">)</span><span class="op" id="6983849">.</span><span class="ident" id="6983850">Neg</span><span class="op" id="6983853">(</span><span class="ident" id="6983854">x</span><span class="op" id="6983855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983859">if</span>&nbsp;<span class="ident" id="6983862">z</span><span class="op" id="6983863">.</span><span class="ident" id="6983864">Cmp</span><span class="op" id="6983867">(</span><span class="ident" id="6983868">e</span><span class="op" id="6983869">)</span>&nbsp;<span class="op" id="6983871">!=</span>&nbsp;<span class="num" id="6983874">0</span>&nbsp;<span class="op" id="6983876">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983881">t</span><span class="op" id="6983882">.</span><span class="ident" id="6983883">Errorf</span><span class="op" id="6983889">(</span><span class="string" id="6983890">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6983917">,</span>&nbsp;<span class="ident" id="6983919">x</span><span class="op" id="6983920">,</span>&nbsp;<span class="ident" id="6983922">z</span><span class="op" id="6983923">,</span>&nbsp;<span class="ident" id="6983925">e</span><span class="op" id="6983926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983933">}</span><br>
<span class="lineno"></span><span class="op" id="6983935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="6983938">func</span>&nbsp;<span class="ident" id="6983943">TestRatInv</span><span class="op" id="6983953">(</span><span class="ident" id="6983954">t</span>&nbsp;<span class="op" id="6983956">*</span><span class="ident" id="6983957">testing</span><span class="op" id="6983964">.</span><span class="ident" id="6983965">T</span><span class="op" id="6983966">)</span>&nbsp;<span class="op" id="6983968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983971">zero</span>&nbsp;<span class="op" id="6983976">:=</span>&nbsp;<span class="builtinfunc" id="6983979">new</span><span class="op" id="6983982">(</span><span class="ident" id="6983983">Rat</span><span class="op" id="6983986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983989">for</span>&nbsp;<span class="ident" id="6983993">_</span><span class="op" id="6983994">,</span>&nbsp;<span class="ident" id="6983996">a</span>&nbsp;<span class="op" id="6983998">:=</span>&nbsp;<span class="keyword" id="6984001">range</span>&nbsp;<span class="ident" id="6984007">setStringTests</span>&nbsp;<span class="op" id="6984022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984026">x</span><span class="op" id="6984027">,</span>&nbsp;<span class="ident" id="6984029">ok</span>&nbsp;<span class="op" id="6984032">:=</span>&nbsp;<span class="builtinfunc" id="6984035">new</span><span class="op" id="6984038">(</span><span class="ident" id="6984039">Rat</span><span class="op" id="6984042">)</span><span class="op" id="6984043">.</span><span class="ident" id="6984044">SetString</span><span class="op" id="6984053">(</span><span class="ident" id="6984054">a</span><span class="op" id="6984055">.</span><span class="ident" id="6984056">in</span><span class="op" id="6984058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984062">if</span>&nbsp;<span class="op" id="6984065">!</span><span class="ident" id="6984066">ok</span>&nbsp;<span class="op" id="6984069">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984074">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984089">if</span>&nbsp;<span class="ident" id="6984092">x</span><span class="op" id="6984093">.</span><span class="ident" id="6984094">Cmp</span><span class="op" id="6984097">(</span><span class="ident" id="6984098">zero</span><span class="op" id="6984102">)</span>&nbsp;<span class="op" id="6984104">==</span>&nbsp;<span class="num" id="6984107">0</span>&nbsp;<span class="op" id="6984109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984114">continue</span>&nbsp;<span class="comment" id="6984123">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984151">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984155">e</span>&nbsp;<span class="op" id="6984157">:=</span>&nbsp;<span class="builtinfunc" id="6984160">new</span><span class="op" id="6984163">(</span><span class="ident" id="6984164">Rat</span><span class="op" id="6984167">)</span><span class="op" id="6984168">.</span><span class="ident" id="6984169">SetFrac</span><span class="op" id="6984176">(</span><span class="ident" id="6984177">x</span><span class="op" id="6984178">.</span><span class="ident" id="6984179">Denom</span><span class="op" id="6984184">(</span><span class="op" id="6984185">)</span><span class="op" id="6984186">,</span>&nbsp;<span class="ident" id="6984188">x</span><span class="op" id="6984189">.</span><span class="ident" id="6984190">Num</span><span class="op" id="6984193">(</span><span class="op" id="6984194">)</span><span class="op" id="6984195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984199">z</span>&nbsp;<span class="op" id="6984201">:=</span>&nbsp;<span class="builtinfunc" id="6984204">new</span><span class="op" id="6984207">(</span><span class="ident" id="6984208">Rat</span><span class="op" id="6984211">)</span><span class="op" id="6984212">.</span><span class="ident" id="6984213">Inv</span><span class="op" id="6984216">(</span><span class="ident" id="6984217">x</span><span class="op" id="6984218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984222">if</span>&nbsp;<span class="ident" id="6984225">z</span><span class="op" id="6984226">.</span><span class="ident" id="6984227">Cmp</span><span class="op" id="6984230">(</span><span class="ident" id="6984231">e</span><span class="op" id="6984232">)</span>&nbsp;<span class="op" id="6984234">!=</span>&nbsp;<span class="num" id="6984237">0</span>&nbsp;<span class="op" id="6984239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984244">t</span><span class="op" id="6984245">.</span><span class="ident" id="6984246">Errorf</span><span class="op" id="6984252">(</span><span class="string" id="6984253">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6984280">,</span>&nbsp;<span class="ident" id="6984282">x</span><span class="op" id="6984283">,</span>&nbsp;<span class="ident" id="6984285">z</span><span class="op" id="6984286">,</span>&nbsp;<span class="ident" id="6984288">e</span><span class="op" id="6984289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984293">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984296">}</span><br>
<span class="lineno"></span><span class="op" id="6984298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6984301">type</span>&nbsp;<span class="ident" id="6984306">ratBinFun</span>&nbsp;<span class="keyword" id="6984316">func</span><span class="op" id="6984320">(</span><span class="ident" id="6984321">z</span><span class="op" id="6984322">,</span>&nbsp;<span class="ident" id="6984324">x</span><span class="op" id="6984325">,</span>&nbsp;<span class="ident" id="6984327">y</span>&nbsp;<span class="op" id="6984329">*</span><span class="ident" id="6984330">Rat</span><span class="op" id="6984333">)</span>&nbsp;<span class="op" id="6984335">*</span><span class="ident" id="6984336">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="6984340">type</span>&nbsp;<span class="ident" id="6984345">ratBinArg</span>&nbsp;<span class="keyword" id="6984355">struct</span>&nbsp;<span class="op" id="6984362">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984365">x</span><span class="op" id="6984366">,</span>&nbsp;<span class="ident" id="6984368">y</span><span class="op" id="6984369">,</span>&nbsp;<span class="ident" id="6984371">z</span>&nbsp;<span class="builtintype" id="6984373">string</span><br>
<span class="lineno"></span><span class="op" id="6984380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6984383">func</span>&nbsp;<span class="ident" id="6984388">testRatBin</span><span class="op" id="6984398">(</span><span class="ident" id="6984399">t</span>&nbsp;<span class="op" id="6984401">*</span><span class="ident" id="6984402">testing</span><span class="op" id="6984409">.</span><span class="ident" id="6984410">T</span><span class="op" id="6984411">,</span>&nbsp;<span class="ident" id="6984413">i</span>&nbsp;<span class="builtintype" id="6984415">int</span><span class="op" id="6984418">,</span>&nbsp;<span class="ident" id="6984420">name</span>&nbsp;<span class="builtintype" id="6984425">string</span><span class="op" id="6984431">,</span>&nbsp;<span class="ident" id="6984433">f</span>&nbsp;<span class="ident" id="6984435">ratBinFun</span><span class="op" id="6984444">,</span>&nbsp;<span class="ident" id="6984446">a</span>&nbsp;<span class="ident" id="6984448">ratBinArg</span><span class="op" id="6984457">)</span>&nbsp;<span class="op" id="6984459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984462">x</span><span class="op" id="6984463">,</span>&nbsp;<span class="ident" id="6984465">_</span>&nbsp;<span class="op" id="6984467">:=</span>&nbsp;<span class="builtinfunc" id="6984470">new</span><span class="op" id="6984473">(</span><span class="ident" id="6984474">Rat</span><span class="op" id="6984477">)</span><span class="op" id="6984478">.</span><span class="ident" id="6984479">SetString</span><span class="op" id="6984488">(</span><span class="ident" id="6984489">a</span><span class="op" id="6984490">.</span><span class="ident" id="6984491">x</span><span class="op" id="6984492">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984495">y</span><span class="op" id="6984496">,</span>&nbsp;<span class="ident" id="6984498">_</span>&nbsp;<span class="op" id="6984500">:=</span>&nbsp;<span class="builtinfunc" id="6984503">new</span><span class="op" id="6984506">(</span><span class="ident" id="6984507">Rat</span><span class="op" id="6984510">)</span><span class="op" id="6984511">.</span><span class="ident" id="6984512">SetString</span><span class="op" id="6984521">(</span><span class="ident" id="6984522">a</span><span class="op" id="6984523">.</span><span class="ident" id="6984524">y</span><span class="op" id="6984525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984528">z</span><span class="op" id="6984529">,</span>&nbsp;<span class="ident" id="6984531">_</span>&nbsp;<span class="op" id="6984533">:=</span>&nbsp;<span class="builtinfunc" id="6984536">new</span><span class="op" id="6984539">(</span><span class="ident" id="6984540">Rat</span><span class="op" id="6984543">)</span><span class="op" id="6984544">.</span><span class="ident" id="6984545">SetString</span><span class="op" id="6984554">(</span><span class="ident" id="6984555">a</span><span class="op" id="6984556">.</span><span class="ident" id="6984557">z</span><span class="op" id="6984558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984561">out</span>&nbsp;<span class="op" id="6984565">:=</span>&nbsp;<span class="ident" id="6984568">f</span><span class="op" id="6984569">(</span><span class="builtinfunc" id="6984570">new</span><span class="op" id="6984573">(</span><span class="ident" id="6984574">Rat</span><span class="op" id="6984577">)</span><span class="op" id="6984578">,</span>&nbsp;<span class="ident" id="6984580">x</span><span class="op" id="6984581">,</span>&nbsp;<span class="ident" id="6984583">y</span><span class="op" id="6984584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6984588">if</span>&nbsp;<span class="ident" id="6984591">out</span><span class="op" id="6984594">.</span><span class="ident" id="6984595">Cmp</span><span class="op" id="6984598">(</span><span class="ident" id="6984599">z</span><span class="op" id="6984600">)</span>&nbsp;<span class="op" id="6984602">!=</span>&nbsp;<span class="num" id="6984605">0</span>&nbsp;<span class="op" id="6984607">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984611">t</span><span class="op" id="6984612">.</span><span class="ident" id="6984613">Errorf</span><span class="op" id="6984619">(</span><span class="string" id="6984620">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6984643">,</span>&nbsp;<span class="ident" id="6984645">name</span><span class="op" id="6984649">,</span>&nbsp;<span class="ident" id="6984651">i</span><span class="op" id="6984652">,</span>&nbsp;<span class="ident" id="6984654">out</span><span class="op" id="6984657">,</span>&nbsp;<span class="ident" id="6984659">z</span><span class="op" id="6984660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984663">}</span><br>
<span class="lineno"></span><span class="op" id="6984665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6984668">var</span>&nbsp;<span class="ident" id="6984672">ratBinTests</span>&nbsp;<span class="op" id="6984684">=</span>&nbsp;<span class="op" id="6984686">[</span><span class="op" id="6984687">]</span><span class="keyword" id="6984688">struct</span>&nbsp;<span class="op" id="6984695">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984698">x</span><span class="op" id="6984699">,</span>&nbsp;<span class="ident" id="6984701">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6984708">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6984716">sum</span><span class="op" id="6984719">,</span>&nbsp;<span class="ident" id="6984721">prod</span>&nbsp;<span class="builtintype" id="6984726">string</span><br>
<span class="lineno"></span><span class="op" id="6984733">}</span><span class="op" id="6984734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984737">{</span><span class="string" id="6984738">&#34;0&#34;</span><span class="op" id="6984741">,</span>&nbsp;<span class="string" id="6984743">&#34;0&#34;</span><span class="op" id="6984746">,</span>&nbsp;<span class="string" id="6984748">&#34;0&#34;</span><span class="op" id="6984751">,</span>&nbsp;<span class="string" id="6984753">&#34;0&#34;</span><span class="op" id="6984756">}</span><span class="op" id="6984757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984760">{</span><span class="string" id="6984761">&#34;0&#34;</span><span class="op" id="6984764">,</span>&nbsp;<span class="string" id="6984766">&#34;1&#34;</span><span class="op" id="6984769">,</span>&nbsp;<span class="string" id="6984771">&#34;1&#34;</span><span class="op" id="6984774">,</span>&nbsp;<span class="string" id="6984776">&#34;0&#34;</span><span class="op" id="6984779">}</span><span class="op" id="6984780">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984783">{</span><span class="string" id="6984784">&#34;-1&#34;</span><span class="op" id="6984788">,</span>&nbsp;<span class="string" id="6984790">&#34;0&#34;</span><span class="op" id="6984793">,</span>&nbsp;<span class="string" id="6984795">&#34;-1&#34;</span><span class="op" id="6984799">,</span>&nbsp;<span class="string" id="6984801">&#34;0&#34;</span><span class="op" id="6984804">}</span><span class="op" id="6984805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984808">{</span><span class="string" id="6984809">&#34;-1&#34;</span><span class="op" id="6984813">,</span>&nbsp;<span class="string" id="6984815">&#34;1&#34;</span><span class="op" id="6984818">,</span>&nbsp;<span class="string" id="6984820">&#34;0&#34;</span><span class="op" id="6984823">,</span>&nbsp;<span class="string" id="6984825">&#34;-1&#34;</span><span class="op" id="6984829">}</span><span class="op" id="6984830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984833">{</span><span class="string" id="6984834">&#34;1&#34;</span><span class="op" id="6984837">,</span>&nbsp;<span class="string" id="6984839">&#34;1&#34;</span><span class="op" id="6984842">,</span>&nbsp;<span class="string" id="6984844">&#34;2&#34;</span><span class="op" id="6984847">,</span>&nbsp;<span class="string" id="6984849">&#34;1&#34;</span><span class="op" id="6984852">}</span><span class="op" id="6984853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984856">{</span><span class="string" id="6984857">&#34;1/2&#34;</span><span class="op" id="6984862">,</span>&nbsp;<span class="string" id="6984864">&#34;1/2&#34;</span><span class="op" id="6984869">,</span>&nbsp;<span class="string" id="6984871">&#34;1&#34;</span><span class="op" id="6984874">,</span>&nbsp;<span class="string" id="6984876">&#34;1/4&#34;</span><span class="op" id="6984881">}</span><span class="op" id="6984882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984885">{</span><span class="string" id="6984886">&#34;1/4&#34;</span><span class="op" id="6984891">,</span>&nbsp;<span class="string" id="6984893">&#34;1/3&#34;</span><span class="op" id="6984898">,</span>&nbsp;<span class="string" id="6984900">&#34;7/12&#34;</span><span class="op" id="6984906">,</span>&nbsp;<span class="string" id="6984908">&#34;1/12&#34;</span><span class="op" id="6984914">}</span><span class="op" id="6984915">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984918">{</span><span class="string" id="6984919">&#34;2/5&#34;</span><span class="op" id="6984924">,</span>&nbsp;<span class="string" id="6984926">&#34;-14/3&#34;</span><span class="op" id="6984933">,</span>&nbsp;<span class="string" id="6984935">&#34;-64/15&#34;</span><span class="op" id="6984943">,</span>&nbsp;<span class="string" id="6984945">&#34;-28/15&#34;</span><span class="op" id="6984953">}</span><span class="op" id="6984954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6984957">{</span><span class="string" id="6984958">&#34;4707/49292519774798173060&#34;</span><span class="op" id="6984985">,</span>&nbsp;<span class="string" id="6984987">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="6985015">,</span>&nbsp;<span class="string" id="6985017">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="6985083">,</span>&nbsp;<span class="string" id="6985085">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="6985135">}</span><span class="op" id="6985136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6985139">{</span><span class="string" id="6985140">&#34;-61204110018146728334/3&#34;</span><span class="op" id="6985165">,</span>&nbsp;<span class="string" id="6985167">&#34;-31052192278051565633/2&#34;</span><span class="op" id="6985192">,</span>&nbsp;<span class="string" id="6985194">&#34;-215564796870448153567/6&#34;</span><span class="op" id="6985220">,</span>&nbsp;<span class="string" id="6985222">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="6985265">}</span><span class="op" id="6985266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6985269">{</span><span class="string" id="6985270">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="6985332">,</span>&nbsp;<span class="string" id="6985334">&#34;-18/31750379913563777419&#34;</span><span class="op" id="6985360">,</span>&nbsp;<span class="string" id="6985362">&#34;-27/133467566250814981&#34;</span><span class="op" id="6985386">,</span>&nbsp;<span class="string" id="6985388">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="6985471">}</span><span class="op" id="6985472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6985475">{</span><span class="string" id="6985476">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="6985535">,</span>&nbsp;<span class="string" id="6985537">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="6985570">,</span>&nbsp;<span class="string" id="6985572">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="6985606">,</span>&nbsp;<span class="string" id="6985608">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="6985695">}</span><span class="op" id="6985696">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6985699">{</span><span class="string" id="6985700">&#34;-3/26206484091896184128&#34;</span><span class="op" id="6985725">,</span>&nbsp;<span class="string" id="6985727">&#34;5/2848423294177090248&#34;</span><span class="op" id="6985750">,</span>&nbsp;<span class="string" id="6985752">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="6985812">,</span>&nbsp;<span class="string" id="6985814">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="6985857">}</span><span class="op" id="6985858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6985861">{</span><span class="string" id="6985862">&#34;26946729/330400702820&#34;</span><span class="op" id="6985885">,</span>&nbsp;<span class="string" id="6985887">&#34;41563965/225583428284&#34;</span><span class="op" id="6985910">,</span>&nbsp;<span class="string" id="6985912">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="6985956">,</span>&nbsp;<span class="string" id="6985958">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="6985999">}</span><span class="op" id="6986000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6986003">{</span><span class="string" id="6986004">&#34;-8259900599013409474/7&#34;</span><span class="op" id="6986028">,</span>&nbsp;<span class="string" id="6986030">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="6986074">,</span>&nbsp;<span class="string" id="6986076">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="6986140">,</span>&nbsp;<span class="string" id="6986142">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="6986205">}</span><span class="op" id="6986206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6986209">{</span><span class="string" id="6986210">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="6986250">,</span>&nbsp;<span class="string" id="6986252">&#34;29/712593081308&#34;</span><span class="op" id="6986269">,</span>&nbsp;<span class="string" id="6986271">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="6986334">,</span>&nbsp;<span class="string" id="6986336">&#34;808/45524274987585732633&#34;</span><span class="op" id="6986362">}</span><span class="op" id="6986363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6986366">{</span><span class="string" id="6986367">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="6986408">,</span>&nbsp;<span class="string" id="6986410">&#34;6269770/1992362624741777&#34;</span><span class="op" id="6986436">,</span>&nbsp;<span class="string" id="6986438">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="6986509">,</span>&nbsp;<span class="string" id="6986511">&#34;8967230/3296219033&#34;</span><span class="op" id="6986531">}</span><span class="op" id="6986532">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6986535">{</span><span class="string" id="6986536">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="6986583">,</span>&nbsp;<span class="string" id="6986585">&#34;9381566963714/9633539&#34;</span><span class="op" id="6986608">,</span>&nbsp;<span class="string" id="6986610">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="6986679">,</span>&nbsp;<span class="string" id="6986681">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="6986708">}</span><span class="op" id="6986709">,</span><br>
<span class="lineno"></span><span class="op" id="6986711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6986714">func</span>&nbsp;<span class="ident" id="6986719">TestRatBin</span><span class="op" id="6986729">(</span><span class="ident" id="6986730">t</span>&nbsp;<span class="op" id="6986732">*</span><span class="ident" id="6986733">testing</span><span class="op" id="6986740">.</span><span class="ident" id="6986741">T</span><span class="op" id="6986742">)</span>&nbsp;<span class="op" id="6986744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6986747">for</span>&nbsp;<span class="ident" id="6986751">i</span><span class="op" id="6986752">,</span>&nbsp;<span class="ident" id="6986754">test</span>&nbsp;<span class="op" id="6986759">:=</span>&nbsp;<span class="keyword" id="6986762">range</span>&nbsp;<span class="ident" id="6986768">ratBinTests</span>&nbsp;<span class="op" id="6986780">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6986784">arg</span>&nbsp;<span class="op" id="6986788">:=</span>&nbsp;<span class="ident" id="6986791">ratBinArg</span><span class="op" id="6986800">{</span><span class="ident" id="6986801">test</span><span class="op" id="6986805">.</span><span class="ident" id="6986806">x</span><span class="op" id="6986807">,</span>&nbsp;<span class="ident" id="6986809">test</span><span class="op" id="6986813">.</span><span class="ident" id="6986814">y</span><span class="op" id="6986815">,</span>&nbsp;<span class="ident" id="6986817">test</span><span class="op" id="6986821">.</span><span class="ident" id="6986822">sum</span><span class="op" id="6986825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6986829">testRatBin</span><span class="op" id="6986839">(</span><span class="ident" id="6986840">t</span><span class="op" id="6986841">,</span>&nbsp;<span class="ident" id="6986843">i</span><span class="op" id="6986844">,</span>&nbsp;<span class="string" id="6986846">&#34;Add&#34;</span><span class="op" id="6986851">,</span>&nbsp;<span class="op" id="6986853">(</span><span class="op" id="6986854">*</span><span class="ident" id="6986855">Rat</span><span class="op" id="6986858">)</span><span class="op" id="6986859">.</span><span class="ident" id="6986860">Add</span><span class="op" id="6986863">,</span>&nbsp;<span class="ident" id="6986865">arg</span><span class="op" id="6986868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6986873">arg</span>&nbsp;<span class="op" id="6986877">=</span>&nbsp;<span class="ident" id="6986879">ratBinArg</span><span class="op" id="6986888">{</span><span class="ident" id="6986889">test</span><span class="op" id="6986893">.</span><span class="ident" id="6986894">y</span><span class="op" id="6986895">,</span>&nbsp;<span class="ident" id="6986897">test</span><span class="op" id="6986901">.</span><span class="ident" id="6986902">x</span><span class="op" id="6986903">,</span>&nbsp;<span class="ident" id="6986905">test</span><span class="op" id="6986909">.</span><span class="ident" id="6986910">sum</span><span class="op" id="6986913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6986917">testRatBin</span><span class="op" id="6986927">(</span><span class="ident" id="6986928">t</span><span class="op" id="6986929">,</span>&nbsp;<span class="ident" id="6986931">i</span><span class="op" id="6986932">,</span>&nbsp;<span class="string" id="6986934">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="6986949">,</span>&nbsp;<span class="op" id="6986951">(</span><span class="op" id="6986952">*</span><span class="ident" id="6986953">Rat</span><span class="op" id="6986956">)</span><span class="op" id="6986957">.</span><span class="ident" id="6986958">Add</span><span class="op" id="6986961">,</span>&nbsp;<span class="ident" id="6986963">arg</span><span class="op" id="6986966">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6986971">arg</span>&nbsp;<span class="op" id="6986975">=</span>&nbsp;<span class="ident" id="6986977">ratBinArg</span><span class="op" id="6986986">{</span><span class="ident" id="6986987">test</span><span class="op" id="6986991">.</span><span class="ident" id="6986992">sum</span><span class="op" id="6986995">,</span>&nbsp;<span class="ident" id="6986997">test</span><span class="op" id="6987001">.</span><span class="ident" id="6987002">x</span><span class="op" id="6987003">,</span>&nbsp;<span class="ident" id="6987005">test</span><span class="op" id="6987009">.</span><span class="ident" id="6987010">y</span><span class="op" id="6987011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987015">testRatBin</span><span class="op" id="6987025">(</span><span class="ident" id="6987026">t</span><span class="op" id="6987027">,</span>&nbsp;<span class="ident" id="6987029">i</span><span class="op" id="6987030">,</span>&nbsp;<span class="string" id="6987032">&#34;Sub&#34;</span><span class="op" id="6987037">,</span>&nbsp;<span class="op" id="6987039">(</span><span class="op" id="6987040">*</span><span class="ident" id="6987041">Rat</span><span class="op" id="6987044">)</span><span class="op" id="6987045">.</span><span class="ident" id="6987046">Sub</span><span class="op" id="6987049">,</span>&nbsp;<span class="ident" id="6987051">arg</span><span class="op" id="6987054">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987059">arg</span>&nbsp;<span class="op" id="6987063">=</span>&nbsp;<span class="ident" id="6987065">ratBinArg</span><span class="op" id="6987074">{</span><span class="ident" id="6987075">test</span><span class="op" id="6987079">.</span><span class="ident" id="6987080">sum</span><span class="op" id="6987083">,</span>&nbsp;<span class="ident" id="6987085">test</span><span class="op" id="6987089">.</span><span class="ident" id="6987090">y</span><span class="op" id="6987091">,</span>&nbsp;<span class="ident" id="6987093">test</span><span class="op" id="6987097">.</span><span class="ident" id="6987098">x</span><span class="op" id="6987099">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987103">testRatBin</span><span class="op" id="6987113">(</span><span class="ident" id="6987114">t</span><span class="op" id="6987115">,</span>&nbsp;<span class="ident" id="6987117">i</span><span class="op" id="6987118">,</span>&nbsp;<span class="string" id="6987120">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="6987135">,</span>&nbsp;<span class="op" id="6987137">(</span><span class="op" id="6987138">*</span><span class="ident" id="6987139">Rat</span><span class="op" id="6987142">)</span><span class="op" id="6987143">.</span><span class="ident" id="6987144">Sub</span><span class="op" id="6987147">,</span>&nbsp;<span class="ident" id="6987149">arg</span><span class="op" id="6987152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987157">arg</span>&nbsp;<span class="op" id="6987161">=</span>&nbsp;<span class="ident" id="6987163">ratBinArg</span><span class="op" id="6987172">{</span><span class="ident" id="6987173">test</span><span class="op" id="6987177">.</span><span class="ident" id="6987178">x</span><span class="op" id="6987179">,</span>&nbsp;<span class="ident" id="6987181">test</span><span class="op" id="6987185">.</span><span class="ident" id="6987186">y</span><span class="op" id="6987187">,</span>&nbsp;<span class="ident" id="6987189">test</span><span class="op" id="6987193">.</span><span class="ident" id="6987194">prod</span><span class="op" id="6987198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987202">testRatBin</span><span class="op" id="6987212">(</span><span class="ident" id="6987213">t</span><span class="op" id="6987214">,</span>&nbsp;<span class="ident" id="6987216">i</span><span class="op" id="6987217">,</span>&nbsp;<span class="string" id="6987219">&#34;Mul&#34;</span><span class="op" id="6987224">,</span>&nbsp;<span class="op" id="6987226">(</span><span class="op" id="6987227">*</span><span class="ident" id="6987228">Rat</span><span class="op" id="6987231">)</span><span class="op" id="6987232">.</span><span class="ident" id="6987233">Mul</span><span class="op" id="6987236">,</span>&nbsp;<span class="ident" id="6987238">arg</span><span class="op" id="6987241">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987246">arg</span>&nbsp;<span class="op" id="6987250">=</span>&nbsp;<span class="ident" id="6987252">ratBinArg</span><span class="op" id="6987261">{</span><span class="ident" id="6987262">test</span><span class="op" id="6987266">.</span><span class="ident" id="6987267">y</span><span class="op" id="6987268">,</span>&nbsp;<span class="ident" id="6987270">test</span><span class="op" id="6987274">.</span><span class="ident" id="6987275">x</span><span class="op" id="6987276">,</span>&nbsp;<span class="ident" id="6987278">test</span><span class="op" id="6987282">.</span><span class="ident" id="6987283">prod</span><span class="op" id="6987287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987291">testRatBin</span><span class="op" id="6987301">(</span><span class="ident" id="6987302">t</span><span class="op" id="6987303">,</span>&nbsp;<span class="ident" id="6987305">i</span><span class="op" id="6987306">,</span>&nbsp;<span class="string" id="6987308">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="6987323">,</span>&nbsp;<span class="op" id="6987325">(</span><span class="op" id="6987326">*</span><span class="ident" id="6987327">Rat</span><span class="op" id="6987330">)</span><span class="op" id="6987331">.</span><span class="ident" id="6987332">Mul</span><span class="op" id="6987335">,</span>&nbsp;<span class="ident" id="6987337">arg</span><span class="op" id="6987340">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6987345">if</span>&nbsp;<span class="ident" id="6987348">test</span><span class="op" id="6987352">.</span><span class="ident" id="6987353">x</span>&nbsp;<span class="op" id="6987355">!=</span>&nbsp;<span class="string" id="6987358">&#34;0&#34;</span>&nbsp;<span class="op" id="6987362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987367">arg</span>&nbsp;<span class="op" id="6987371">=</span>&nbsp;<span class="ident" id="6987373">ratBinArg</span><span class="op" id="6987382">{</span><span class="ident" id="6987383">test</span><span class="op" id="6987387">.</span><span class="ident" id="6987388">prod</span><span class="op" id="6987392">,</span>&nbsp;<span class="ident" id="6987394">test</span><span class="op" id="6987398">.</span><span class="ident" id="6987399">x</span><span class="op" id="6987400">,</span>&nbsp;<span class="ident" id="6987402">test</span><span class="op" id="6987406">.</span><span class="ident" id="6987407">y</span><span class="op" id="6987408">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987413">testRatBin</span><span class="op" id="6987423">(</span><span class="ident" id="6987424">t</span><span class="op" id="6987425">,</span>&nbsp;<span class="ident" id="6987427">i</span><span class="op" id="6987428">,</span>&nbsp;<span class="string" id="6987430">&#34;Quo&#34;</span><span class="op" id="6987435">,</span>&nbsp;<span class="op" id="6987437">(</span><span class="op" id="6987438">*</span><span class="ident" id="6987439">Rat</span><span class="op" id="6987442">)</span><span class="op" id="6987443">.</span><span class="ident" id="6987444">Quo</span><span class="op" id="6987447">,</span>&nbsp;<span class="ident" id="6987449">arg</span><span class="op" id="6987452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6987461">if</span>&nbsp;<span class="ident" id="6987464">test</span><span class="op" id="6987468">.</span><span class="ident" id="6987469">y</span>&nbsp;<span class="op" id="6987471">!=</span>&nbsp;<span class="string" id="6987474">&#34;0&#34;</span>&nbsp;<span class="op" id="6987478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987483">arg</span>&nbsp;<span class="op" id="6987487">=</span>&nbsp;<span class="ident" id="6987489">ratBinArg</span><span class="op" id="6987498">{</span><span class="ident" id="6987499">test</span><span class="op" id="6987503">.</span><span class="ident" id="6987504">prod</span><span class="op" id="6987508">,</span>&nbsp;<span class="ident" id="6987510">test</span><span class="op" id="6987514">.</span><span class="ident" id="6987515">y</span><span class="op" id="6987516">,</span>&nbsp;<span class="ident" id="6987518">test</span><span class="op" id="6987522">.</span><span class="ident" id="6987523">x</span><span class="op" id="6987524">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987529">testRatBin</span><span class="op" id="6987539">(</span><span class="ident" id="6987540">t</span><span class="op" id="6987541">,</span>&nbsp;<span class="ident" id="6987543">i</span><span class="op" id="6987544">,</span>&nbsp;<span class="string" id="6987546">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="6987561">,</span>&nbsp;<span class="op" id="6987563">(</span><span class="op" id="6987564">*</span><span class="ident" id="6987565">Rat</span><span class="op" id="6987568">)</span><span class="op" id="6987569">.</span><span class="ident" id="6987570">Quo</span><span class="op" id="6987573">,</span>&nbsp;<span class="ident" id="6987575">arg</span><span class="op" id="6987578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987585">}</span><br>
<span class="lineno"></span><span class="op" id="6987587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="6987590">func</span>&nbsp;<span class="ident" id="6987595">TestIssue820</span><span class="op" id="6987607">(</span><span class="ident" id="6987608">t</span>&nbsp;<span class="op" id="6987610">*</span><span class="ident" id="6987611">testing</span><span class="op" id="6987618">.</span><span class="ident" id="6987619">T</span><span class="op" id="6987620">)</span>&nbsp;<span class="op" id="6987622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987625">x</span>&nbsp;<span class="op" id="6987627">:=</span>&nbsp;<span class="ident" id="6987630">NewRat</span><span class="op" id="6987636">(</span><span class="num" id="6987637">3</span><span class="op" id="6987638">,</span>&nbsp;<span class="num" id="6987640">1</span><span class="op" id="6987641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987644">y</span>&nbsp;<span class="op" id="6987646">:=</span>&nbsp;<span class="ident" id="6987649">NewRat</span><span class="op" id="6987655">(</span><span class="num" id="6987656">2</span><span class="op" id="6987657">,</span>&nbsp;<span class="num" id="6987659">1</span><span class="op" id="6987660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987663">z</span>&nbsp;<span class="op" id="6987665">:=</span>&nbsp;<span class="ident" id="6987668">y</span><span class="op" id="6987669">.</span><span class="ident" id="6987670">Quo</span><span class="op" id="6987673">(</span><span class="ident" id="6987674">x</span><span class="op" id="6987675">,</span>&nbsp;<span class="ident" id="6987677">y</span><span class="op" id="6987678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987681">q</span>&nbsp;<span class="op" id="6987683">:=</span>&nbsp;<span class="ident" id="6987686">NewRat</span><span class="op" id="6987692">(</span><span class="num" id="6987693">3</span><span class="op" id="6987694">,</span>&nbsp;<span class="num" id="6987696">2</span><span class="op" id="6987697">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6987700">if</span>&nbsp;<span class="ident" id="6987703">z</span><span class="op" id="6987704">.</span><span class="ident" id="6987705">Cmp</span><span class="op" id="6987708">(</span><span class="ident" id="6987709">q</span><span class="op" id="6987710">)</span>&nbsp;<span class="op" id="6987712">!=</span>&nbsp;<span class="num" id="6987715">0</span>&nbsp;<span class="op" id="6987717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987721">t</span><span class="op" id="6987722">.</span><span class="ident" id="6987723">Errorf</span><span class="op" id="6987729">(</span><span class="string" id="6987730">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6987746">,</span>&nbsp;<span class="ident" id="6987748">z</span><span class="op" id="6987749">,</span>&nbsp;<span class="ident" id="6987751">q</span><span class="op" id="6987752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987759">y</span>&nbsp;<span class="op" id="6987761">=</span>&nbsp;<span class="ident" id="6987763">NewRat</span><span class="op" id="6987769">(</span><span class="num" id="6987770">3</span><span class="op" id="6987771">,</span>&nbsp;<span class="num" id="6987773">1</span><span class="op" id="6987774">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987777">x</span>&nbsp;<span class="op" id="6987779">=</span>&nbsp;<span class="ident" id="6987781">NewRat</span><span class="op" id="6987787">(</span><span class="num" id="6987788">2</span><span class="op" id="6987789">,</span>&nbsp;<span class="num" id="6987791">1</span><span class="op" id="6987792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987795">z</span>&nbsp;<span class="op" id="6987797">=</span>&nbsp;<span class="ident" id="6987799">y</span><span class="op" id="6987800">.</span><span class="ident" id="6987801">Quo</span><span class="op" id="6987804">(</span><span class="ident" id="6987805">x</span><span class="op" id="6987806">,</span>&nbsp;<span class="ident" id="6987808">y</span><span class="op" id="6987809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987812">q</span>&nbsp;<span class="op" id="6987814">=</span>&nbsp;<span class="ident" id="6987816">NewRat</span><span class="op" id="6987822">(</span><span class="num" id="6987823">2</span><span class="op" id="6987824">,</span>&nbsp;<span class="num" id="6987826">3</span><span class="op" id="6987827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6987830">if</span>&nbsp;<span class="ident" id="6987833">z</span><span class="op" id="6987834">.</span><span class="ident" id="6987835">Cmp</span><span class="op" id="6987838">(</span><span class="ident" id="6987839">q</span><span class="op" id="6987840">)</span>&nbsp;<span class="op" id="6987842">!=</span>&nbsp;<span class="num" id="6987845">0</span>&nbsp;<span class="op" id="6987847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987851">t</span><span class="op" id="6987852">.</span><span class="ident" id="6987853">Errorf</span><span class="op" id="6987859">(</span><span class="string" id="6987860">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6987876">,</span>&nbsp;<span class="ident" id="6987878">z</span><span class="op" id="6987879">,</span>&nbsp;<span class="ident" id="6987881">q</span><span class="op" id="6987882">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987889">x</span>&nbsp;<span class="op" id="6987891">=</span>&nbsp;<span class="ident" id="6987893">NewRat</span><span class="op" id="6987899">(</span><span class="num" id="6987900">3</span><span class="op" id="6987901">,</span>&nbsp;<span class="num" id="6987903">1</span><span class="op" id="6987904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987907">z</span>&nbsp;<span class="op" id="6987909">=</span>&nbsp;<span class="ident" id="6987911">x</span><span class="op" id="6987912">.</span><span class="ident" id="6987913">Quo</span><span class="op" id="6987916">(</span><span class="ident" id="6987917">x</span><span class="op" id="6987918">,</span>&nbsp;<span class="ident" id="6987920">x</span><span class="op" id="6987921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987924">q</span>&nbsp;<span class="op" id="6987926">=</span>&nbsp;<span class="ident" id="6987928">NewRat</span><span class="op" id="6987934">(</span><span class="num" id="6987935">3</span><span class="op" id="6987936">,</span>&nbsp;<span class="num" id="6987938">3</span><span class="op" id="6987939">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6987942">if</span>&nbsp;<span class="ident" id="6987945">z</span><span class="op" id="6987946">.</span><span class="ident" id="6987947">Cmp</span><span class="op" id="6987950">(</span><span class="ident" id="6987951">q</span><span class="op" id="6987952">)</span>&nbsp;<span class="op" id="6987954">!=</span>&nbsp;<span class="num" id="6987957">0</span>&nbsp;<span class="op" id="6987959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6987963">t</span><span class="op" id="6987964">.</span><span class="ident" id="6987965">Errorf</span><span class="op" id="6987971">(</span><span class="string" id="6987972">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6987988">,</span>&nbsp;<span class="ident" id="6987990">z</span><span class="op" id="6987991">,</span>&nbsp;<span class="ident" id="6987993">q</span><span class="op" id="6987994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6987997">}</span><br>
<span class="lineno"></span><span class="op" id="6987999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="6988002">var</span>&nbsp;<span class="ident" id="6988006">setFrac64Tests</span>&nbsp;<span class="op" id="6988021">=</span>&nbsp;<span class="op" id="6988023">[</span><span class="op" id="6988024">]</span><span class="keyword" id="6988025">struct</span>&nbsp;<span class="op" id="6988032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988035">a</span><span class="op" id="6988036">,</span>&nbsp;<span class="ident" id="6988038">b</span>&nbsp;<span class="builtintype" id="6988040">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988047">out</span>&nbsp;&nbsp;<span class="builtintype" id="6988052">string</span><br>
<span class="lineno"></span><span class="op" id="6988059">}</span><span class="op" id="6988060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988063">{</span><span class="num" id="6988064">0</span><span class="op" id="6988065">,</span>&nbsp;<span class="num" id="6988067">1</span><span class="op" id="6988068">,</span>&nbsp;<span class="string" id="6988070">&#34;0&#34;</span><span class="op" id="6988073">}</span><span class="op" id="6988074">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988077">{</span><span class="num" id="6988078">0</span><span class="op" id="6988079">,</span>&nbsp;<span class="op" id="6988081">-</span><span class="num" id="6988082">1</span><span class="op" id="6988083">,</span>&nbsp;<span class="string" id="6988085">&#34;0&#34;</span><span class="op" id="6988088">}</span><span class="op" id="6988089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988092">{</span><span class="num" id="6988093">1</span><span class="op" id="6988094">,</span>&nbsp;<span class="num" id="6988096">1</span><span class="op" id="6988097">,</span>&nbsp;<span class="string" id="6988099">&#34;1&#34;</span><span class="op" id="6988102">}</span><span class="op" id="6988103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988106">{</span><span class="op" id="6988107">-</span><span class="num" id="6988108">1</span><span class="op" id="6988109">,</span>&nbsp;<span class="num" id="6988111">1</span><span class="op" id="6988112">,</span>&nbsp;<span class="string" id="6988114">&#34;-1&#34;</span><span class="op" id="6988118">}</span><span class="op" id="6988119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988122">{</span><span class="num" id="6988123">1</span><span class="op" id="6988124">,</span>&nbsp;<span class="op" id="6988126">-</span><span class="num" id="6988127">1</span><span class="op" id="6988128">,</span>&nbsp;<span class="string" id="6988130">&#34;-1&#34;</span><span class="op" id="6988134">}</span><span class="op" id="6988135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988138">{</span><span class="op" id="6988139">-</span><span class="num" id="6988140">1</span><span class="op" id="6988141">,</span>&nbsp;<span class="op" id="6988143">-</span><span class="num" id="6988144">1</span><span class="op" id="6988145">,</span>&nbsp;<span class="string" id="6988147">&#34;1&#34;</span><span class="op" id="6988150">}</span><span class="op" id="6988151">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988154">{</span><span class="op" id="6988155">-</span><span class="num" id="6988156">9223372036854775808</span><span class="op" id="6988175">,</span>&nbsp;<span class="op" id="6988177">-</span><span class="num" id="6988178">9223372036854775808</span><span class="op" id="6988197">,</span>&nbsp;<span class="string" id="6988199">&#34;1&#34;</span><span class="op" id="6988202">}</span><span class="op" id="6988203">,</span><br>
<span class="lineno"></span><span class="op" id="6988205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6988208">func</span>&nbsp;<span class="ident" id="6988213">TestRatSetFrac64Rat</span><span class="op" id="6988232">(</span><span class="ident" id="6988233">t</span>&nbsp;<span class="op" id="6988235">*</span><span class="ident" id="6988236">testing</span><span class="op" id="6988243">.</span><span class="ident" id="6988244">T</span><span class="op" id="6988245">)</span>&nbsp;<span class="op" id="6988247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988250">for</span>&nbsp;<span class="ident" id="6988254">i</span><span class="op" id="6988255">,</span>&nbsp;<span class="ident" id="6988257">test</span>&nbsp;<span class="op" id="6988262">:=</span>&nbsp;<span class="keyword" id="6988265">range</span>&nbsp;<span class="ident" id="6988271">setFrac64Tests</span>&nbsp;<span class="op" id="6988286">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988290">x</span>&nbsp;<span class="op" id="6988292">:=</span>&nbsp;<span class="builtinfunc" id="6988295">new</span><span class="op" id="6988298">(</span><span class="ident" id="6988299">Rat</span><span class="op" id="6988302">)</span><span class="op" id="6988303">.</span><span class="ident" id="6988304">SetFrac64</span><span class="op" id="6988313">(</span><span class="ident" id="6988314">test</span><span class="op" id="6988318">.</span><span class="ident" id="6988319">a</span><span class="op" id="6988320">,</span>&nbsp;<span class="ident" id="6988322">test</span><span class="op" id="6988326">.</span><span class="ident" id="6988327">b</span><span class="op" id="6988328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988332">if</span>&nbsp;<span class="ident" id="6988335">x</span><span class="op" id="6988336">.</span><span class="ident" id="6988337">RatString</span><span class="op" id="6988346">(</span><span class="op" id="6988347">)</span>&nbsp;<span class="op" id="6988349">!=</span>&nbsp;<span class="ident" id="6988352">test</span><span class="op" id="6988356">.</span><span class="ident" id="6988357">out</span>&nbsp;<span class="op" id="6988361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988366">t</span><span class="op" id="6988367">.</span><span class="ident" id="6988368">Errorf</span><span class="op" id="6988374">(</span><span class="string" id="6988375">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6988395">,</span>&nbsp;<span class="ident" id="6988397">i</span><span class="op" id="6988398">,</span>&nbsp;<span class="ident" id="6988400">x</span><span class="op" id="6988401">.</span><span class="ident" id="6988402">RatString</span><span class="op" id="6988411">(</span><span class="op" id="6988412">)</span><span class="op" id="6988413">,</span>&nbsp;<span class="ident" id="6988415">test</span><span class="op" id="6988419">.</span><span class="ident" id="6988420">out</span><span class="op" id="6988423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988430">}</span><br>
<span class="lineno">390</span><span class="op" id="6988432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6988435">func</span>&nbsp;<span class="ident" id="6988440">TestRatGobEncoding</span><span class="op" id="6988458">(</span><span class="ident" id="6988459">t</span>&nbsp;<span class="op" id="6988461">*</span><span class="ident" id="6988462">testing</span><span class="op" id="6988469">.</span><span class="ident" id="6988470">T</span><span class="op" id="6988471">)</span>&nbsp;<span class="op" id="6988473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988476">var</span>&nbsp;<span class="ident" id="6988480">medium</span>&nbsp;<span class="ident" id="6988487">bytes</span><span class="op" id="6988492">.</span><span class="ident" id="6988493">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988501">enc</span>&nbsp;<span class="op" id="6988505">:=</span>&nbsp;<span class="ident" id="6988508">gob</span><span class="op" id="6988511">.</span><span class="ident" id="6988512">NewEncoder</span><span class="op" id="6988522">(</span><span class="op" id="6988523">&amp;</span><span class="ident" id="6988524">medium</span><span class="op" id="6988530">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988533">dec</span>&nbsp;<span class="op" id="6988537">:=</span>&nbsp;<span class="ident" id="6988540">gob</span><span class="op" id="6988543">.</span><span class="ident" id="6988544">NewDecoder</span><span class="op" id="6988554">(</span><span class="op" id="6988555">&amp;</span><span class="ident" id="6988556">medium</span><span class="op" id="6988562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988565">for</span>&nbsp;<span class="ident" id="6988569">_</span><span class="op" id="6988570">,</span>&nbsp;<span class="ident" id="6988572">test</span>&nbsp;<span class="op" id="6988577">:=</span>&nbsp;<span class="keyword" id="6988580">range</span>&nbsp;<span class="ident" id="6988586">encodingTests</span>&nbsp;<span class="op" id="6988600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988604">medium</span><span class="op" id="6988610">.</span><span class="ident" id="6988611">Reset</span><span class="op" id="6988616">(</span><span class="op" id="6988617">)</span>&nbsp;<span class="comment" id="6988619">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988678">var</span>&nbsp;<span class="ident" id="6988682">tx</span>&nbsp;<span class="ident" id="6988685">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988691">tx</span><span class="op" id="6988693">.</span><span class="ident" id="6988694">SetString</span><span class="op" id="6988703">(</span><span class="ident" id="6988704">test</span>&nbsp;<span class="op" id="6988709">+</span>&nbsp;<span class="string" id="6988711">&#34;.14159265&#34;</span><span class="op" id="6988722">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988726">if</span>&nbsp;<span class="ident" id="6988729">err</span>&nbsp;<span class="op" id="6988733">:=</span>&nbsp;<span class="ident" id="6988736">enc</span><span class="op" id="6988739">.</span><span class="ident" id="6988740">Encode</span><span class="op" id="6988746">(</span><span class="op" id="6988747">&amp;</span><span class="ident" id="6988748">tx</span><span class="op" id="6988750">)</span><span class="op" id="6988751">;</span>&nbsp;<span class="ident" id="6988753">err</span>&nbsp;<span class="op" id="6988757">!=</span>&nbsp;<span class="builtintype" id="6988760">nil</span>&nbsp;<span class="op" id="6988764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988769">t</span><span class="op" id="6988770">.</span><span class="ident" id="6988771">Errorf</span><span class="op" id="6988777">(</span><span class="string" id="6988778">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6988805">,</span>&nbsp;<span class="op" id="6988807">&amp;</span><span class="ident" id="6988808">tx</span><span class="op" id="6988810">,</span>&nbsp;<span class="ident" id="6988812">err</span><span class="op" id="6988815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988823">var</span>&nbsp;<span class="ident" id="6988827">rx</span>&nbsp;<span class="ident" id="6988830">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988836">if</span>&nbsp;<span class="ident" id="6988839">err</span>&nbsp;<span class="op" id="6988843">:=</span>&nbsp;<span class="ident" id="6988846">dec</span><span class="op" id="6988849">.</span><span class="ident" id="6988850">Decode</span><span class="op" id="6988856">(</span><span class="op" id="6988857">&amp;</span><span class="ident" id="6988858">rx</span><span class="op" id="6988860">)</span><span class="op" id="6988861">;</span>&nbsp;<span class="ident" id="6988863">err</span>&nbsp;<span class="op" id="6988867">!=</span>&nbsp;<span class="builtintype" id="6988870">nil</span>&nbsp;<span class="op" id="6988874">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988879">t</span><span class="op" id="6988880">.</span><span class="ident" id="6988881">Errorf</span><span class="op" id="6988887">(</span><span class="string" id="6988888">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6988915">,</span>&nbsp;<span class="op" id="6988917">&amp;</span><span class="ident" id="6988918">tx</span><span class="op" id="6988920">,</span>&nbsp;<span class="ident" id="6988922">err</span><span class="op" id="6988925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6988929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6988933">if</span>&nbsp;<span class="ident" id="6988936">rx</span><span class="op" id="6988938">.</span><span class="ident" id="6988939">Cmp</span><span class="op" id="6988942">(</span><span class="op" id="6988943">&amp;</span><span class="ident" id="6988944">tx</span><span class="op" id="6988946">)</span>&nbsp;<span class="op" id="6988948">!=</span>&nbsp;<span class="num" id="6988951">0</span>&nbsp;<span class="op" id="6988953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6988958">t</span><span class="op" id="6988959">.</span><span class="ident" id="6988960">Errorf</span><span class="op" id="6988966">(</span><span class="string" id="6988967">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6989010">,</span>&nbsp;<span class="op" id="6989012">&amp;</span><span class="ident" id="6989013">tx</span><span class="op" id="6989015">,</span>&nbsp;<span class="op" id="6989017">&amp;</span><span class="ident" id="6989018">rx</span><span class="op" id="6989020">,</span>&nbsp;<span class="op" id="6989022">&amp;</span><span class="ident" id="6989023">tx</span><span class="op" id="6989025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989029">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989032">}</span><br>
<span class="lineno"></span><span class="op" id="6989034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6989037">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="6989132">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="6989157">func</span>&nbsp;<span class="ident" id="6989162">TestGobEncodingNilRatInSlice</span><span class="op" id="6989190">(</span><span class="ident" id="6989191">t</span>&nbsp;<span class="op" id="6989193">*</span><span class="ident" id="6989194">testing</span><span class="op" id="6989201">.</span><span class="ident" id="6989202">T</span><span class="op" id="6989203">)</span>&nbsp;<span class="op" id="6989205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989208">buf</span>&nbsp;<span class="op" id="6989212">:=</span>&nbsp;<span class="builtinfunc" id="6989215">new</span><span class="op" id="6989218">(</span><span class="ident" id="6989219">bytes</span><span class="op" id="6989224">.</span><span class="ident" id="6989225">Buffer</span><span class="op" id="6989231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989234">enc</span>&nbsp;<span class="op" id="6989238">:=</span>&nbsp;<span class="ident" id="6989241">gob</span><span class="op" id="6989244">.</span><span class="ident" id="6989245">NewEncoder</span><span class="op" id="6989255">(</span><span class="ident" id="6989256">buf</span><span class="op" id="6989259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989262">dec</span>&nbsp;<span class="op" id="6989266">:=</span>&nbsp;<span class="ident" id="6989269">gob</span><span class="op" id="6989272">.</span><span class="ident" id="6989273">NewDecoder</span><span class="op" id="6989283">(</span><span class="ident" id="6989284">buf</span><span class="op" id="6989287">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989291">var</span>&nbsp;<span class="ident" id="6989295">in</span>&nbsp;<span class="op" id="6989298">=</span>&nbsp;<span class="builtinfunc" id="6989300">make</span><span class="op" id="6989304">(</span><span class="op" id="6989305">[</span><span class="op" id="6989306">]</span><span class="op" id="6989307">*</span><span class="ident" id="6989308">Rat</span><span class="op" id="6989311">,</span>&nbsp;<span class="num" id="6989313">1</span><span class="op" id="6989314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989317">err</span>&nbsp;<span class="op" id="6989321">:=</span>&nbsp;<span class="ident" id="6989324">enc</span><span class="op" id="6989327">.</span><span class="ident" id="6989328">Encode</span><span class="op" id="6989334">(</span><span class="op" id="6989335">&amp;</span><span class="ident" id="6989336">in</span><span class="op" id="6989338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989341">if</span>&nbsp;<span class="ident" id="6989344">err</span>&nbsp;<span class="op" id="6989348">!=</span>&nbsp;<span class="builtintype" id="6989351">nil</span>&nbsp;<span class="op" id="6989355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989359">t</span><span class="op" id="6989360">.</span><span class="ident" id="6989361">Errorf</span><span class="op" id="6989367">(</span><span class="string" id="6989368">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="6989391">,</span>&nbsp;<span class="ident" id="6989393">err</span><span class="op" id="6989396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989399">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989402">var</span>&nbsp;<span class="ident" id="6989406">out</span>&nbsp;<span class="op" id="6989410">[</span><span class="op" id="6989411">]</span><span class="op" id="6989412">*</span><span class="ident" id="6989413">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989418">err</span>&nbsp;<span class="op" id="6989422">=</span>&nbsp;<span class="ident" id="6989424">dec</span><span class="op" id="6989427">.</span><span class="ident" id="6989428">Decode</span><span class="op" id="6989434">(</span><span class="op" id="6989435">&amp;</span><span class="ident" id="6989436">out</span><span class="op" id="6989439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989442">if</span>&nbsp;<span class="ident" id="6989445">err</span>&nbsp;<span class="op" id="6989449">!=</span>&nbsp;<span class="builtintype" id="6989452">nil</span>&nbsp;<span class="op" id="6989456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989460">t</span><span class="op" id="6989461">.</span><span class="ident" id="6989462">Fatalf</span><span class="op" id="6989468">(</span><span class="string" id="6989469">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="6989492">,</span>&nbsp;<span class="ident" id="6989494">err</span><span class="op" id="6989497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989500">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989503">if</span>&nbsp;<span class="builtinfunc" id="6989506">len</span><span class="op" id="6989509">(</span><span class="ident" id="6989510">out</span><span class="op" id="6989513">)</span>&nbsp;<span class="op" id="6989515">!=</span>&nbsp;<span class="num" id="6989518">1</span>&nbsp;<span class="op" id="6989520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989524">t</span><span class="op" id="6989525">.</span><span class="ident" id="6989526">Fatalf</span><span class="op" id="6989532">(</span><span class="string" id="6989533">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6989559">,</span>&nbsp;<span class="builtinfunc" id="6989561">len</span><span class="op" id="6989564">(</span><span class="ident" id="6989565">out</span><span class="op" id="6989568">)</span><span class="op" id="6989569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989575">var</span>&nbsp;<span class="ident" id="6989579">zero</span>&nbsp;<span class="ident" id="6989584">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6989589">if</span>&nbsp;<span class="ident" id="6989592">out</span><span class="op" id="6989595">[</span><span class="num" id="6989596">0</span><span class="op" id="6989597">]</span><span class="op" id="6989598">.</span><span class="ident" id="6989599">Cmp</span><span class="op" id="6989602">(</span><span class="op" id="6989603">&amp;</span><span class="ident" id="6989604">zero</span><span class="op" id="6989608">)</span>&nbsp;<span class="op" id="6989610">!=</span>&nbsp;<span class="num" id="6989613">0</span>&nbsp;<span class="op" id="6989615">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6989619">t</span><span class="op" id="6989620">.</span><span class="ident" id="6989621">Errorf</span><span class="op" id="6989627">(</span><span class="string" id="6989628">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="6989680">,</span>&nbsp;<span class="ident" id="6989682">out</span><span class="op" id="6989685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6989688">}</span><br>
<span class="lineno"></span><span class="op" id="6989690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6989693">var</span>&nbsp;<span class="ident" id="6989697">ratNums</span>&nbsp;<span class="op" id="6989705">=</span>&nbsp;<span class="op" id="6989707">[</span><span class="op" id="6989708">]</span><span class="builtintype" id="6989709">string</span><span class="op" id="6989715">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989718">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="6989796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989799">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="6989842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989845">&#34;-141592653589793&#34;</span><span class="op" id="6989863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989866">&#34;-1&#34;</span><span class="op" id="6989870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989873">&#34;0&#34;</span><span class="op" id="6989876">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989879">&#34;1&#34;</span><span class="op" id="6989882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989885">&#34;141592653589793&#34;</span><span class="op" id="6989902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989905">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="6989947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6989950">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="6990027">,</span><br>
<span class="lineno"></span><span class="op" id="6990029">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="6990032">var</span>&nbsp;<span class="ident" id="6990036">ratDenoms</span>&nbsp;<span class="op" id="6990046">=</span>&nbsp;<span class="op" id="6990048">[</span><span class="op" id="6990049">]</span><span class="builtintype" id="6990050">string</span><span class="op" id="6990056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6990059">&#34;1&#34;</span><span class="op" id="6990062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6990065">&#34;718281828459045&#34;</span><span class="op" id="6990082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6990085">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="6990127">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6990130">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="6990207">,</span><br>
<span class="lineno"></span><span class="op" id="6990209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6990212">func</span>&nbsp;<span class="ident" id="6990217">TestRatJSONEncoding</span><span class="op" id="6990236">(</span><span class="ident" id="6990237">t</span>&nbsp;<span class="op" id="6990239">*</span><span class="ident" id="6990240">testing</span><span class="op" id="6990247">.</span><span class="ident" id="6990248">T</span><span class="op" id="6990249">)</span>&nbsp;<span class="op" id="6990251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990254">for</span>&nbsp;<span class="ident" id="6990258">_</span><span class="op" id="6990259">,</span>&nbsp;<span class="ident" id="6990261">num</span>&nbsp;<span class="op" id="6990265">:=</span>&nbsp;<span class="keyword" id="6990268">range</span>&nbsp;<span class="ident" id="6990274">ratNums</span>&nbsp;<span class="op" id="6990282">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990286">for</span>&nbsp;<span class="ident" id="6990290">_</span><span class="op" id="6990291">,</span>&nbsp;<span class="ident" id="6990293">denom</span>&nbsp;<span class="op" id="6990299">:=</span>&nbsp;<span class="keyword" id="6990302">range</span>&nbsp;<span class="ident" id="6990308">ratDenoms</span>&nbsp;<span class="op" id="6990318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990323">var</span>&nbsp;<span class="ident" id="6990327">tx</span>&nbsp;<span class="ident" id="6990330">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990337">tx</span><span class="op" id="6990339">.</span><span class="ident" id="6990340">SetString</span><span class="op" id="6990349">(</span><span class="ident" id="6990350">num</span>&nbsp;<span class="op" id="6990354">+</span>&nbsp;<span class="string" id="6990356">&#34;/&#34;</span>&nbsp;<span class="op" id="6990360">+</span>&nbsp;<span class="ident" id="6990362">denom</span><span class="op" id="6990367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990372">b</span><span class="op" id="6990373">,</span>&nbsp;<span class="ident" id="6990375">err</span>&nbsp;<span class="op" id="6990379">:=</span>&nbsp;<span class="ident" id="6990382">json</span><span class="op" id="6990386">.</span><span class="ident" id="6990387">Marshal</span><span class="op" id="6990394">(</span><span class="op" id="6990395">&amp;</span><span class="ident" id="6990396">tx</span><span class="op" id="6990398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990403">if</span>&nbsp;<span class="ident" id="6990406">err</span>&nbsp;<span class="op" id="6990410">!=</span>&nbsp;<span class="builtintype" id="6990413">nil</span>&nbsp;<span class="op" id="6990417">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990423">t</span><span class="op" id="6990424">.</span><span class="ident" id="6990425">Errorf</span><span class="op" id="6990431">(</span><span class="string" id="6990432">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6990461">,</span>&nbsp;<span class="op" id="6990463">&amp;</span><span class="ident" id="6990464">tx</span><span class="op" id="6990466">,</span>&nbsp;<span class="ident" id="6990468">err</span><span class="op" id="6990471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990477">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6990489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990494">var</span>&nbsp;<span class="ident" id="6990498">rx</span>&nbsp;<span class="ident" id="6990501">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990508">if</span>&nbsp;<span class="ident" id="6990511">err</span>&nbsp;<span class="op" id="6990515">:=</span>&nbsp;<span class="ident" id="6990518">json</span><span class="op" id="6990522">.</span><span class="ident" id="6990523">Unmarshal</span><span class="op" id="6990532">(</span><span class="ident" id="6990533">b</span><span class="op" id="6990534">,</span>&nbsp;<span class="op" id="6990536">&amp;</span><span class="ident" id="6990537">rx</span><span class="op" id="6990539">)</span><span class="op" id="6990540">;</span>&nbsp;<span class="ident" id="6990542">err</span>&nbsp;<span class="op" id="6990546">!=</span>&nbsp;<span class="builtintype" id="6990549">nil</span>&nbsp;<span class="op" id="6990553">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990559">t</span><span class="op" id="6990560">.</span><span class="ident" id="6990561">Errorf</span><span class="op" id="6990567">(</span><span class="string" id="6990568">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6990599">,</span>&nbsp;<span class="op" id="6990601">&amp;</span><span class="ident" id="6990602">tx</span><span class="op" id="6990604">,</span>&nbsp;<span class="ident" id="6990606">err</span><span class="op" id="6990609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990615">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6990627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990632">if</span>&nbsp;<span class="ident" id="6990635">rx</span><span class="op" id="6990637">.</span><span class="ident" id="6990638">Cmp</span><span class="op" id="6990641">(</span><span class="op" id="6990642">&amp;</span><span class="ident" id="6990643">tx</span><span class="op" id="6990645">)</span>&nbsp;<span class="op" id="6990647">!=</span>&nbsp;<span class="num" id="6990650">0</span>&nbsp;<span class="op" id="6990652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990658">t</span><span class="op" id="6990659">.</span><span class="ident" id="6990660">Errorf</span><span class="op" id="6990666">(</span><span class="string" id="6990667">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6990711">,</span>&nbsp;<span class="op" id="6990713">&amp;</span><span class="ident" id="6990714">tx</span><span class="op" id="6990716">,</span>&nbsp;<span class="op" id="6990718">&amp;</span><span class="ident" id="6990719">rx</span><span class="op" id="6990721">,</span>&nbsp;<span class="op" id="6990723">&amp;</span><span class="ident" id="6990724">tx</span><span class="op" id="6990726">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6990731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6990735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6990738">}</span><br>
<span class="lineno"></span><span class="op" id="6990740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="6990743">func</span>&nbsp;<span class="ident" id="6990748">TestRatXMLEncoding</span><span class="op" id="6990766">(</span><span class="ident" id="6990767">t</span>&nbsp;<span class="op" id="6990769">*</span><span class="ident" id="6990770">testing</span><span class="op" id="6990777">.</span><span class="ident" id="6990778">T</span><span class="op" id="6990779">)</span>&nbsp;<span class="op" id="6990781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990784">for</span>&nbsp;<span class="ident" id="6990788">_</span><span class="op" id="6990789">,</span>&nbsp;<span class="ident" id="6990791">num</span>&nbsp;<span class="op" id="6990795">:=</span>&nbsp;<span class="keyword" id="6990798">range</span>&nbsp;<span class="ident" id="6990804">ratNums</span>&nbsp;<span class="op" id="6990812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990816">for</span>&nbsp;<span class="ident" id="6990820">_</span><span class="op" id="6990821">,</span>&nbsp;<span class="ident" id="6990823">denom</span>&nbsp;<span class="op" id="6990829">:=</span>&nbsp;<span class="keyword" id="6990832">range</span>&nbsp;<span class="ident" id="6990838">ratDenoms</span>&nbsp;<span class="op" id="6990848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990853">var</span>&nbsp;<span class="ident" id="6990857">tx</span>&nbsp;<span class="ident" id="6990860">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990867">tx</span><span class="op" id="6990869">.</span><span class="ident" id="6990870">SetString</span><span class="op" id="6990879">(</span><span class="ident" id="6990880">num</span>&nbsp;<span class="op" id="6990884">+</span>&nbsp;<span class="string" id="6990886">&#34;/&#34;</span>&nbsp;<span class="op" id="6990890">+</span>&nbsp;<span class="ident" id="6990892">denom</span><span class="op" id="6990897">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990902">b</span><span class="op" id="6990903">,</span>&nbsp;<span class="ident" id="6990905">err</span>&nbsp;<span class="op" id="6990909">:=</span>&nbsp;<span class="ident" id="6990912">xml</span><span class="op" id="6990915">.</span><span class="ident" id="6990916">Marshal</span><span class="op" id="6990923">(</span><span class="op" id="6990924">&amp;</span><span class="ident" id="6990925">tx</span><span class="op" id="6990927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6990932">if</span>&nbsp;<span class="ident" id="6990935">err</span>&nbsp;<span class="op" id="6990939">!=</span>&nbsp;<span class="builtintype" id="6990942">nil</span>&nbsp;<span class="op" id="6990946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6990952">t</span><span class="op" id="6990953">.</span><span class="ident" id="6990954">Errorf</span><span class="op" id="6990960">(</span><span class="string" id="6990961">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6990990">,</span>&nbsp;<span class="op" id="6990992">&amp;</span><span class="ident" id="6990993">tx</span><span class="op" id="6990995">,</span>&nbsp;<span class="ident" id="6990997">err</span><span class="op" id="6991000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991006">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991018">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991023">var</span>&nbsp;<span class="ident" id="6991027">rx</span>&nbsp;<span class="ident" id="6991030">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991037">if</span>&nbsp;<span class="ident" id="6991040">err</span>&nbsp;<span class="op" id="6991044">:=</span>&nbsp;<span class="ident" id="6991047">xml</span><span class="op" id="6991050">.</span><span class="ident" id="6991051">Unmarshal</span><span class="op" id="6991060">(</span><span class="ident" id="6991061">b</span><span class="op" id="6991062">,</span>&nbsp;<span class="op" id="6991064">&amp;</span><span class="ident" id="6991065">rx</span><span class="op" id="6991067">)</span><span class="op" id="6991068">;</span>&nbsp;<span class="ident" id="6991070">err</span>&nbsp;<span class="op" id="6991074">!=</span>&nbsp;<span class="builtintype" id="6991077">nil</span>&nbsp;<span class="op" id="6991081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991087">t</span><span class="op" id="6991088">.</span><span class="ident" id="6991089">Errorf</span><span class="op" id="6991095">(</span><span class="string" id="6991096">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6991127">,</span>&nbsp;<span class="op" id="6991129">&amp;</span><span class="ident" id="6991130">tx</span><span class="op" id="6991132">,</span>&nbsp;<span class="ident" id="6991134">err</span><span class="op" id="6991137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991143">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991155">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991160">if</span>&nbsp;<span class="ident" id="6991163">rx</span><span class="op" id="6991165">.</span><span class="ident" id="6991166">Cmp</span><span class="op" id="6991169">(</span><span class="op" id="6991170">&amp;</span><span class="ident" id="6991171">tx</span><span class="op" id="6991173">)</span>&nbsp;<span class="op" id="6991175">!=</span>&nbsp;<span class="num" id="6991178">0</span>&nbsp;<span class="op" id="6991180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991186">t</span><span class="op" id="6991187">.</span><span class="ident" id="6991188">Errorf</span><span class="op" id="6991194">(</span><span class="string" id="6991195">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6991238">,</span>&nbsp;<span class="op" id="6991240">&amp;</span><span class="ident" id="6991241">tx</span><span class="op" id="6991243">,</span>&nbsp;<span class="op" id="6991245">&amp;</span><span class="ident" id="6991246">rx</span><span class="op" id="6991248">,</span>&nbsp;<span class="op" id="6991250">&amp;</span><span class="ident" id="6991251">tx</span><span class="op" id="6991253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991265">}</span><br>
<span class="lineno">500</span><span class="op" id="6991267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6991270">func</span>&nbsp;<span class="ident" id="6991275">TestIssue2379</span><span class="op" id="6991288">(</span><span class="ident" id="6991289">t</span>&nbsp;<span class="op" id="6991291">*</span><span class="ident" id="6991292">testing</span><span class="op" id="6991299">.</span><span class="ident" id="6991300">T</span><span class="op" id="6991301">)</span>&nbsp;<span class="op" id="6991303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6991306">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991325">q</span>&nbsp;<span class="op" id="6991327">:=</span>&nbsp;<span class="ident" id="6991330">NewRat</span><span class="op" id="6991336">(</span><span class="num" id="6991337">3</span><span class="op" id="6991338">,</span>&nbsp;<span class="num" id="6991340">2</span><span class="op" id="6991341">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991344">x</span>&nbsp;<span class="op" id="6991346">:=</span>&nbsp;<span class="builtinfunc" id="6991349">new</span><span class="op" id="6991352">(</span><span class="ident" id="6991353">Rat</span><span class="op" id="6991356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991359">x</span><span class="op" id="6991360">.</span><span class="ident" id="6991361">SetFrac</span><span class="op" id="6991368">(</span><span class="ident" id="6991369">NewInt</span><span class="op" id="6991375">(</span><span class="num" id="6991376">3</span><span class="op" id="6991377">)</span><span class="op" id="6991378">,</span>&nbsp;<span class="ident" id="6991380">NewInt</span><span class="op" id="6991386">(</span><span class="num" id="6991387">2</span><span class="op" id="6991388">)</span><span class="op" id="6991389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991392">if</span>&nbsp;<span class="ident" id="6991395">x</span><span class="op" id="6991396">.</span><span class="ident" id="6991397">Cmp</span><span class="op" id="6991400">(</span><span class="ident" id="6991401">q</span><span class="op" id="6991402">)</span>&nbsp;<span class="op" id="6991404">!=</span>&nbsp;<span class="num" id="6991407">0</span>&nbsp;<span class="op" id="6991409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991413">t</span><span class="op" id="6991414">.</span><span class="ident" id="6991415">Errorf</span><span class="op" id="6991421">(</span><span class="string" id="6991422">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6991441">,</span>&nbsp;<span class="ident" id="6991443">x</span><span class="op" id="6991444">,</span>&nbsp;<span class="ident" id="6991446">q</span><span class="op" id="6991447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991450">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6991454">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991483">x</span>&nbsp;<span class="op" id="6991485">=</span>&nbsp;<span class="ident" id="6991487">NewRat</span><span class="op" id="6991493">(</span><span class="num" id="6991494">2</span><span class="op" id="6991495">,</span>&nbsp;<span class="num" id="6991497">3</span><span class="op" id="6991498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991501">x</span><span class="op" id="6991502">.</span><span class="ident" id="6991503">SetFrac</span><span class="op" id="6991510">(</span><span class="ident" id="6991511">NewInt</span><span class="op" id="6991517">(</span><span class="num" id="6991518">3</span><span class="op" id="6991519">)</span><span class="op" id="6991520">,</span>&nbsp;<span class="ident" id="6991522">x</span><span class="op" id="6991523">.</span><span class="ident" id="6991524">Num</span><span class="op" id="6991527">(</span><span class="op" id="6991528">)</span><span class="op" id="6991529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991532">if</span>&nbsp;<span class="ident" id="6991535">x</span><span class="op" id="6991536">.</span><span class="ident" id="6991537">Cmp</span><span class="op" id="6991540">(</span><span class="ident" id="6991541">q</span><span class="op" id="6991542">)</span>&nbsp;<span class="op" id="6991544">!=</span>&nbsp;<span class="num" id="6991547">0</span>&nbsp;<span class="op" id="6991549">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991553">t</span><span class="op" id="6991554">.</span><span class="ident" id="6991555">Errorf</span><span class="op" id="6991561">(</span><span class="string" id="6991562">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6991581">,</span>&nbsp;<span class="ident" id="6991583">x</span><span class="op" id="6991584">,</span>&nbsp;<span class="ident" id="6991586">q</span><span class="op" id="6991587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6991594">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991625">x</span>&nbsp;<span class="op" id="6991627">=</span>&nbsp;<span class="ident" id="6991629">NewRat</span><span class="op" id="6991635">(</span><span class="num" id="6991636">2</span><span class="op" id="6991637">,</span>&nbsp;<span class="num" id="6991639">3</span><span class="op" id="6991640">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991643">x</span><span class="op" id="6991644">.</span><span class="ident" id="6991645">SetFrac</span><span class="op" id="6991652">(</span><span class="ident" id="6991653">x</span><span class="op" id="6991654">.</span><span class="ident" id="6991655">Denom</span><span class="op" id="6991660">(</span><span class="op" id="6991661">)</span><span class="op" id="6991662">,</span>&nbsp;<span class="ident" id="6991664">NewInt</span><span class="op" id="6991670">(</span><span class="num" id="6991671">2</span><span class="op" id="6991672">)</span><span class="op" id="6991673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991676">if</span>&nbsp;<span class="ident" id="6991679">x</span><span class="op" id="6991680">.</span><span class="ident" id="6991681">Cmp</span><span class="op" id="6991684">(</span><span class="ident" id="6991685">q</span><span class="op" id="6991686">)</span>&nbsp;<span class="op" id="6991688">!=</span>&nbsp;<span class="num" id="6991691">0</span>&nbsp;<span class="op" id="6991693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991697">t</span><span class="op" id="6991698">.</span><span class="ident" id="6991699">Errorf</span><span class="op" id="6991705">(</span><span class="string" id="6991706">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6991725">,</span>&nbsp;<span class="ident" id="6991727">x</span><span class="op" id="6991728">,</span>&nbsp;<span class="ident" id="6991730">q</span><span class="op" id="6991731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6991738">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991783">x</span>&nbsp;<span class="op" id="6991785">=</span>&nbsp;<span class="ident" id="6991787">NewRat</span><span class="op" id="6991793">(</span><span class="num" id="6991794">2</span><span class="op" id="6991795">,</span>&nbsp;<span class="num" id="6991797">3</span><span class="op" id="6991798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991801">x</span><span class="op" id="6991802">.</span><span class="ident" id="6991803">SetFrac</span><span class="op" id="6991810">(</span><span class="ident" id="6991811">x</span><span class="op" id="6991812">.</span><span class="ident" id="6991813">Denom</span><span class="op" id="6991818">(</span><span class="op" id="6991819">)</span><span class="op" id="6991820">,</span>&nbsp;<span class="ident" id="6991822">x</span><span class="op" id="6991823">.</span><span class="ident" id="6991824">Num</span><span class="op" id="6991827">(</span><span class="op" id="6991828">)</span><span class="op" id="6991829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6991832">if</span>&nbsp;<span class="ident" id="6991835">x</span><span class="op" id="6991836">.</span><span class="ident" id="6991837">Cmp</span><span class="op" id="6991840">(</span><span class="ident" id="6991841">q</span><span class="op" id="6991842">)</span>&nbsp;<span class="op" id="6991844">!=</span>&nbsp;<span class="num" id="6991847">0</span>&nbsp;<span class="op" id="6991849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991853">t</span><span class="op" id="6991854">.</span><span class="ident" id="6991855">Errorf</span><span class="op" id="6991861">(</span><span class="string" id="6991862">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6991881">,</span>&nbsp;<span class="ident" id="6991883">x</span><span class="op" id="6991884">,</span>&nbsp;<span class="ident" id="6991886">q</span><span class="op" id="6991887">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6991890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6991894">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991940">q</span>&nbsp;<span class="op" id="6991942">=</span>&nbsp;<span class="ident" id="6991944">NewRat</span><span class="op" id="6991950">(</span><span class="num" id="6991951">1</span><span class="op" id="6991952">,</span>&nbsp;<span class="num" id="6991954">1</span><span class="op" id="6991955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991958">x</span>&nbsp;<span class="op" id="6991960">=</span>&nbsp;<span class="builtinfunc" id="6991962">new</span><span class="op" id="6991965">(</span><span class="ident" id="6991966">Rat</span><span class="op" id="6991969">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991972">n</span>&nbsp;<span class="op" id="6991974">:=</span>&nbsp;<span class="ident" id="6991977">NewInt</span><span class="op" id="6991983">(</span><span class="num" id="6991984">7</span><span class="op" id="6991985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6991988">x</span><span class="op" id="6991989">.</span><span class="ident" id="6991990">SetFrac</span><span class="op" id="6991997">(</span><span class="ident" id="6991998">n</span><span class="op" id="6991999">,</span>&nbsp;<span class="ident" id="6992001">n</span><span class="op" id="6992002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6992005">if</span>&nbsp;<span class="ident" id="6992008">x</span><span class="op" id="6992009">.</span><span class="ident" id="6992010">Cmp</span><span class="op" id="6992013">(</span><span class="ident" id="6992014">q</span><span class="op" id="6992015">)</span>&nbsp;<span class="op" id="6992017">!=</span>&nbsp;<span class="num" id="6992020">0</span>&nbsp;<span class="op" id="6992022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992026">t</span><span class="op" id="6992027">.</span><span class="ident" id="6992028">Errorf</span><span class="op" id="6992034">(</span><span class="string" id="6992035">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6992054">,</span>&nbsp;<span class="ident" id="6992056">x</span><span class="op" id="6992057">,</span>&nbsp;<span class="ident" id="6992059">q</span><span class="op" id="6992060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6992063">}</span><br>
<span class="lineno">540</span><span class="op" id="6992065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6992068">func</span>&nbsp;<span class="ident" id="6992073">TestIssue3521</span><span class="op" id="6992086">(</span><span class="ident" id="6992087">t</span>&nbsp;<span class="op" id="6992089">*</span><span class="ident" id="6992090">testing</span><span class="op" id="6992097">.</span><span class="ident" id="6992098">T</span><span class="op" id="6992099">)</span>&nbsp;<span class="op" id="6992101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992104">a</span>&nbsp;<span class="op" id="6992106">:=</span>&nbsp;<span class="builtinfunc" id="6992109">new</span><span class="op" id="6992112">(</span><span class="ident" id="6992113">Int</span><span class="op" id="6992116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992119">b</span>&nbsp;<span class="op" id="6992121">:=</span>&nbsp;<span class="builtinfunc" id="6992124">new</span><span class="op" id="6992127">(</span><span class="ident" id="6992128">Int</span><span class="op" id="6992131">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992134">a</span><span class="op" id="6992135">.</span><span class="ident" id="6992136">SetString</span><span class="op" id="6992145">(</span><span class="string" id="6992146">&#34;64375784358435883458348587&#34;</span><span class="op" id="6992174">,</span>&nbsp;<span class="num" id="6992176">0</span><span class="op" id="6992177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992180">b</span><span class="op" id="6992181">.</span><span class="ident" id="6992182">SetString</span><span class="op" id="6992191">(</span><span class="string" id="6992192">&#34;4789759874531&#34;</span><span class="op" id="6992207">,</span>&nbsp;<span class="num" id="6992209">0</span><span class="op" id="6992210">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6992214">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992259">zero</span>&nbsp;<span class="op" id="6992264">:=</span>&nbsp;<span class="builtinfunc" id="6992267">new</span><span class="op" id="6992270">(</span><span class="ident" id="6992271">Rat</span><span class="op" id="6992274">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992277">one</span>&nbsp;<span class="op" id="6992281">:=</span>&nbsp;<span class="ident" id="6992284">NewInt</span><span class="op" id="6992290">(</span><span class="num" id="6992291">1</span><span class="op" id="6992292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6992295">if</span>&nbsp;<span class="ident" id="6992298">zero</span><span class="op" id="6992302">.</span><span class="ident" id="6992303">Denom</span><span class="op" id="6992308">(</span><span class="op" id="6992309">)</span><span class="op" id="6992310">.</span><span class="ident" id="6992311">Cmp</span><span class="op" id="6992314">(</span><span class="ident" id="6992315">one</span><span class="op" id="6992318">)</span>&nbsp;<span class="op" id="6992320">!=</span>&nbsp;<span class="num" id="6992323">0</span>&nbsp;<span class="op" id="6992325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992329">t</span><span class="op" id="6992330">.</span><span class="ident" id="6992331">Errorf</span><span class="op" id="6992337">(</span><span class="string" id="6992338">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6992357">,</span>&nbsp;<span class="ident" id="6992359">zero</span><span class="op" id="6992363">.</span><span class="ident" id="6992364">Denom</span><span class="op" id="6992369">(</span><span class="op" id="6992370">)</span><span class="op" id="6992371">,</span>&nbsp;<span class="ident" id="6992373">one</span><span class="op" id="6992376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6992379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6992383">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992444">x</span>&nbsp;<span class="op" id="6992446">:=</span>&nbsp;<span class="builtinfunc" id="6992449">new</span><span class="op" id="6992452">(</span><span class="ident" id="6992453">Rat</span><span class="op" id="6992456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992459">x</span><span class="op" id="6992460">.</span><span class="ident" id="6992461">Denom</span><span class="op" id="6992466">(</span><span class="op" id="6992467">)</span><span class="op" id="6992468">.</span><span class="ident" id="6992469">Set</span><span class="op" id="6992472">(</span><span class="builtinfunc" id="6992473">new</span><span class="op" id="6992476">(</span><span class="ident" id="6992477">Int</span><span class="op" id="6992480">)</span><span class="op" id="6992481">.</span><span class="ident" id="6992482">Neg</span><span class="op" id="6992485">(</span><span class="ident" id="6992486">b</span><span class="op" id="6992487">)</span><span class="op" id="6992488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6992491">if</span>&nbsp;<span class="ident" id="6992494">x</span><span class="op" id="6992495">.</span><span class="ident" id="6992496">Cmp</span><span class="op" id="6992499">(</span><span class="ident" id="6992500">zero</span><span class="op" id="6992504">)</span>&nbsp;<span class="op" id="6992506">!=</span>&nbsp;<span class="num" id="6992509">0</span>&nbsp;<span class="op" id="6992511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992515">t</span><span class="op" id="6992516">.</span><span class="ident" id="6992517">Errorf</span><span class="op" id="6992523">(</span><span class="string" id="6992524">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6992544">,</span>&nbsp;<span class="ident" id="6992546">x</span><span class="op" id="6992547">,</span>&nbsp;<span class="ident" id="6992549">zero</span><span class="op" id="6992553">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6992556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6992560">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992618">x</span><span class="op" id="6992619">.</span><span class="ident" id="6992620">Num</span><span class="op" id="6992623">(</span><span class="op" id="6992624">)</span><span class="op" id="6992625">.</span><span class="ident" id="6992626">Set</span><span class="op" id="6992629">(</span><span class="ident" id="6992630">a</span><span class="op" id="6992631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992634">qab</span>&nbsp;<span class="op" id="6992638">:=</span>&nbsp;<span class="builtinfunc" id="6992641">new</span><span class="op" id="6992644">(</span><span class="ident" id="6992645">Rat</span><span class="op" id="6992648">)</span><span class="op" id="6992649">.</span><span class="ident" id="6992650">SetFrac</span><span class="op" id="6992657">(</span><span class="ident" id="6992658">a</span><span class="op" id="6992659">,</span>&nbsp;<span class="ident" id="6992661">b</span><span class="op" id="6992662">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6992665">if</span>&nbsp;<span class="ident" id="6992668">x</span><span class="op" id="6992669">.</span><span class="ident" id="6992670">Cmp</span><span class="op" id="6992673">(</span><span class="ident" id="6992674">qab</span><span class="op" id="6992677">)</span>&nbsp;<span class="op" id="6992679">!=</span>&nbsp;<span class="num" id="6992682">0</span>&nbsp;<span class="op" id="6992684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992688">t</span><span class="op" id="6992689">.</span><span class="ident" id="6992690">Errorf</span><span class="op" id="6992696">(</span><span class="string" id="6992697">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6992717">,</span>&nbsp;<span class="ident" id="6992719">x</span><span class="op" id="6992720">,</span>&nbsp;<span class="ident" id="6992722">qab</span><span class="op" id="6992725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6992728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6992732">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992802">x</span><span class="op" id="6992803">.</span><span class="ident" id="6992804">SetFrac64</span><span class="op" id="6992813">(</span><span class="num" id="6992814">10</span><span class="op" id="6992816">,</span>&nbsp;<span class="num" id="6992818">2</span><span class="op" id="6992819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992822">x</span><span class="op" id="6992823">.</span><span class="ident" id="6992824">Denom</span><span class="op" id="6992829">(</span><span class="op" id="6992830">)</span><span class="op" id="6992831">.</span><span class="ident" id="6992832">SetInt64</span><span class="op" id="6992840">(</span><span class="num" id="6992841">3</span><span class="op" id="6992842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992845">q53</span>&nbsp;<span class="op" id="6992849">:=</span>&nbsp;<span class="ident" id="6992852">NewRat</span><span class="op" id="6992858">(</span><span class="num" id="6992859">5</span><span class="op" id="6992860">,</span>&nbsp;<span class="num" id="6992862">3</span><span class="op" id="6992863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6992866">if</span>&nbsp;<span class="ident" id="6992869">x</span><span class="op" id="6992870">.</span><span class="ident" id="6992871">Cmp</span><span class="op" id="6992874">(</span><span class="ident" id="6992875">q53</span><span class="op" id="6992878">)</span>&nbsp;<span class="op" id="6992880">!=</span>&nbsp;<span class="num" id="6992883">0</span>&nbsp;<span class="op" id="6992885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6992889">t</span><span class="op" id="6992890">.</span><span class="ident" id="6992891">Errorf</span><span class="op" id="6992897">(</span><span class="string" id="6992898">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6992918">,</span>&nbsp;<span class="ident" id="6992920">x</span><span class="op" id="6992921">,</span>&nbsp;<span class="ident" id="6992923">q53</span><span class="op" id="6992926">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6992929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6992933">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993003">x</span>&nbsp;<span class="op" id="6993005">=</span>&nbsp;<span class="ident" id="6993007">NewRat</span><span class="op" id="6993013">(</span><span class="num" id="6993014">10</span><span class="op" id="6993016">,</span>&nbsp;<span class="num" id="6993018">2</span><span class="op" id="6993019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993022">x</span><span class="op" id="6993023">.</span><span class="ident" id="6993024">Denom</span><span class="op" id="6993029">(</span><span class="op" id="6993030">)</span><span class="op" id="6993031">.</span><span class="ident" id="6993032">SetInt64</span><span class="op" id="6993040">(</span><span class="num" id="6993041">3</span><span class="op" id="6993042">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6993045">if</span>&nbsp;<span class="ident" id="6993048">x</span><span class="op" id="6993049">.</span><span class="ident" id="6993050">Cmp</span><span class="op" id="6993053">(</span><span class="ident" id="6993054">q53</span><span class="op" id="6993057">)</span>&nbsp;<span class="op" id="6993059">!=</span>&nbsp;<span class="num" id="6993062">0</span>&nbsp;<span class="op" id="6993064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993068">t</span><span class="op" id="6993069">.</span><span class="ident" id="6993070">Errorf</span><span class="op" id="6993076">(</span><span class="string" id="6993077">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6993097">,</span>&nbsp;<span class="ident" id="6993099">x</span><span class="op" id="6993100">,</span>&nbsp;<span class="ident" id="6993102">q53</span><span class="op" id="6993105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6993108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6993112">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993179">x</span><span class="op" id="6993180">.</span><span class="ident" id="6993181">SetFrac</span><span class="op" id="6993188">(</span><span class="ident" id="6993189">a</span><span class="op" id="6993190">,</span>&nbsp;<span class="ident" id="6993192">b</span><span class="op" id="6993193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993196">a</span>&nbsp;<span class="op" id="6993198">=</span>&nbsp;<span class="ident" id="6993200">x</span><span class="op" id="6993201">.</span><span class="ident" id="6993202">Num</span><span class="op" id="6993205">(</span><span class="op" id="6993206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993209">b</span>&nbsp;<span class="op" id="6993211">=</span>&nbsp;<span class="ident" id="6993213">x</span><span class="op" id="6993214">.</span><span class="ident" id="6993215">Denom</span><span class="op" id="6993220">(</span><span class="op" id="6993221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993224">a</span><span class="op" id="6993225">.</span><span class="ident" id="6993226">SetInt64</span><span class="op" id="6993234">(</span><span class="num" id="6993235">5</span><span class="op" id="6993236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993239">b</span><span class="op" id="6993240">.</span><span class="ident" id="6993241">SetInt64</span><span class="op" id="6993249">(</span><span class="num" id="6993250">3</span><span class="op" id="6993251">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6993254">if</span>&nbsp;<span class="ident" id="6993257">x</span><span class="op" id="6993258">.</span><span class="ident" id="6993259">Cmp</span><span class="op" id="6993262">(</span><span class="ident" id="6993263">q53</span><span class="op" id="6993266">)</span>&nbsp;<span class="op" id="6993268">!=</span>&nbsp;<span class="num" id="6993271">0</span>&nbsp;<span class="op" id="6993273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6993277">t</span><span class="op" id="6993278">.</span><span class="ident" id="6993279">Errorf</span><span class="op" id="6993285">(</span><span class="string" id="6993286">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6993305">,</span>&nbsp;<span class="ident" id="6993307">x</span><span class="op" id="6993308">,</span>&nbsp;<span class="ident" id="6993310">q53</span><span class="op" id="6993313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6993316">}</span><br>
<span class="lineno"></span><span class="op" id="6993318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="6993321">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6993390">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="6993462">var</span>&nbsp;<span class="ident" id="6993466">float64inputs</span>&nbsp;<span class="op" id="6993480">=</span>&nbsp;<span class="op" id="6993482">[</span><span class="op" id="6993483">]</span><span class="builtintype" id="6993484">string</span><span class="op" id="6993490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6993493">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6993543">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993613">&#34;5e+125&#34;</span><span class="op" id="6993621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993624">&#34;69e+267&#34;</span><span class="op" id="6993633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993636">&#34;999e-026&#34;</span><span class="op" id="6993646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993649">&#34;7861e-034&#34;</span><span class="op" id="6993660">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993663">&#34;75569e-254&#34;</span><span class="op" id="6993675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993678">&#34;928609e-261&#34;</span><span class="op" id="6993691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993694">&#34;9210917e+080&#34;</span><span class="op" id="6993708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993711">&#34;84863171e+114&#34;</span><span class="op" id="6993726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993729">&#34;653777767e+273&#34;</span><span class="op" id="6993745">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993748">&#34;5232604057e-298&#34;</span><span class="op" id="6993765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993768">&#34;27235667517e-109&#34;</span><span class="op" id="6993786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993789">&#34;653532977297e-123&#34;</span><span class="op" id="6993808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993811">&#34;3142213164987e-294&#34;</span><span class="op" id="6993831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993834">&#34;46202199371337e-072&#34;</span><span class="op" id="6993855">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993858">&#34;231010996856685e-073&#34;</span><span class="op" id="6993880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993883">&#34;9324754620109615e+212&#34;</span><span class="op" id="6993906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993909">&#34;78459735791271921e+049&#34;</span><span class="op" id="6993933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993936">&#34;272104041512242479e+200&#34;</span><span class="op" id="6993961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993964">&#34;6802601037806061975e+198&#34;</span><span class="op" id="6993990">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6993993">&#34;20505426358836677347e-221&#34;</span><span class="op" id="6994020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994023">&#34;836168422905420598437e-234&#34;</span><span class="op" id="6994051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994054">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="6994083">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6994087">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994157">&#34;9e-265&#34;</span><span class="op" id="6994165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994168">&#34;85e-037&#34;</span><span class="op" id="6994177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994180">&#34;623e+100&#34;</span><span class="op" id="6994190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994193">&#34;3571e+263&#34;</span><span class="op" id="6994204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994207">&#34;81661e+153&#34;</span><span class="op" id="6994219">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994222">&#34;920657e-023&#34;</span><span class="op" id="6994235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994238">&#34;4603285e-024&#34;</span><span class="op" id="6994252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994255">&#34;87575437e-309&#34;</span><span class="op" id="6994270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994273">&#34;245540327e+122&#34;</span><span class="op" id="6994289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994292">&#34;6138508175e+120&#34;</span><span class="op" id="6994309">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994312">&#34;83356057653e+193&#34;</span><span class="op" id="6994330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994333">&#34;619534293513e+124&#34;</span><span class="op" id="6994352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994355">&#34;2335141086879e+218&#34;</span><span class="op" id="6994375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994378">&#34;36167929443327e-159&#34;</span><span class="op" id="6994399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994402">&#34;609610927149051e-255&#34;</span><span class="op" id="6994424">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994427">&#34;3743626360493413e-165&#34;</span><span class="op" id="6994450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994453">&#34;94080055902682397e-242&#34;</span><span class="op" id="6994477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994480">&#34;899810892172646163e+283&#34;</span><span class="op" id="6994505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994508">&#34;7120190517612959703e+120&#34;</span><span class="op" id="6994534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994537">&#34;25188282901709339043e-252&#34;</span><span class="op" id="6994564">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994567">&#34;308984926168550152811e-052&#34;</span><span class="op" id="6994595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994598">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="6994627">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6994631">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994701">&#34;5e-20&#34;</span><span class="op" id="6994708">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994711">&#34;67e+14&#34;</span><span class="op" id="6994719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994722">&#34;985e+15&#34;</span><span class="op" id="6994731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994734">&#34;7693e-42&#34;</span><span class="op" id="6994744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994747">&#34;55895e-16&#34;</span><span class="op" id="6994758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994761">&#34;996622e-44&#34;</span><span class="op" id="6994773">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994776">&#34;7038531e-32&#34;</span><span class="op" id="6994789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994792">&#34;60419369e-46&#34;</span><span class="op" id="6994806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994809">&#34;702990899e-20&#34;</span><span class="op" id="6994824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994827">&#34;6930161142e-48&#34;</span><span class="op" id="6994843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994846">&#34;25933168707e+13&#34;</span><span class="op" id="6994863">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994866">&#34;596428896559e+20&#34;</span><span class="op" id="6994884">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6994888">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994958">&#34;3e-23&#34;</span><span class="op" id="6994965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994968">&#34;57e+18&#34;</span><span class="op" id="6994976">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994979">&#34;789e-35&#34;</span><span class="op" id="6994988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6994991">&#34;2539e-18&#34;</span><span class="op" id="6995001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995004">&#34;76173e+28&#34;</span><span class="op" id="6995015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995018">&#34;887745e-11&#34;</span><span class="op" id="6995030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995033">&#34;5382571e-37&#34;</span><span class="op" id="6995046">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995049">&#34;82381273e-35&#34;</span><span class="op" id="6995063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995066">&#34;750486563e-38&#34;</span><span class="op" id="6995081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995084">&#34;3752432815e-39&#34;</span><span class="op" id="6995100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995103">&#34;75224575729e-45&#34;</span><span class="op" id="6995120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995123">&#34;459926601011e+15&#34;</span><span class="op" id="6995141">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995145">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995197">&#34;0&#34;</span><span class="op" id="6995200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995203">&#34;1&#34;</span><span class="op" id="6995206">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995209">&#34;+1&#34;</span><span class="op" id="6995213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995216">&#34;1e23&#34;</span><span class="op" id="6995222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995225">&#34;1E23&#34;</span><span class="op" id="6995231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995234">&#34;100000000000000000000000&#34;</span><span class="op" id="6995260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995263">&#34;1e-100&#34;</span><span class="op" id="6995271">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995274">&#34;123456700&#34;</span><span class="op" id="6995285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995288">&#34;99999999999999974834176&#34;</span><span class="op" id="6995313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995316">&#34;100000000000000000000001&#34;</span><span class="op" id="6995342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995345">&#34;100000000000000008388608&#34;</span><span class="op" id="6995371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995374">&#34;100000000000000016777215&#34;</span><span class="op" id="6995400">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995403">&#34;100000000000000016777216&#34;</span><span class="op" id="6995429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995432">&#34;-1&#34;</span><span class="op" id="6995436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995439">&#34;-0.1&#34;</span><span class="op" id="6995445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995448">&#34;-0&#34;</span><span class="op" id="6995452">,</span>&nbsp;<span class="comment" id="6995454">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995492">&#34;1e-20&#34;</span><span class="op" id="6995499">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995502">&#34;625e-3&#34;</span><span class="op" id="6995510">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995514">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995534">&#34;1.7976931348623157e308&#34;</span><span class="op" id="6995558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995561">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="6995586">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995589">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995618">&#34;1.7976931348623159e308&#34;</span><span class="op" id="6995642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995645">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="6995670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995673">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995701">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995723">&#34;1.7976931348623158e308&#34;</span><span class="op" id="6995747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995750">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="6995775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995778">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995805">&#34;1.797693134862315808e308&#34;</span><span class="op" id="6995831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995834">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="6995861">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995865">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995888">&#34;1e308&#34;</span><span class="op" id="6995895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995898">&#34;2e308&#34;</span><span class="op" id="6995905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995908">&#34;1e309&#34;</span><span class="op" id="6995915">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6995919">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995937">&#34;1e310&#34;</span><span class="op" id="6995944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995947">&#34;-1e310&#34;</span><span class="op" id="6995955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995958">&#34;1e400&#34;</span><span class="op" id="6995965">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995968">&#34;-1e400&#34;</span><span class="op" id="6995976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995979">&#34;long:1e400000&#34;</span><span class="op" id="6995994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6995997">&#34;long:-1e400000&#34;</span><span class="op" id="6996013">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996017">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996034">&#34;1e-305&#34;</span><span class="op" id="6996042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996045">&#34;1e-306&#34;</span><span class="op" id="6996053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996056">&#34;1e-307&#34;</span><span class="op" id="6996064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996067">&#34;1e-308&#34;</span><span class="op" id="6996075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996078">&#34;1e-309&#34;</span><span class="op" id="6996086">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996089">&#34;1e-310&#34;</span><span class="op" id="6996097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996100">&#34;1e-322&#34;</span><span class="op" id="6996108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996111">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996133">&#34;5e-324&#34;</span><span class="op" id="6996141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996144">&#34;4e-324&#34;</span><span class="op" id="6996152">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996155">&#34;3e-324&#34;</span><span class="op" id="6996163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996166">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996180">&#34;2e-324&#34;</span><span class="op" id="6996188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996191">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996209">&#34;1e-350&#34;</span><span class="op" id="6996217">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996220">&#34;long:1e-400000&#34;</span><span class="op" id="6996236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996239">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996267">&#34;-1e-350&#34;</span><span class="op" id="6996276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996279">&#34;long:-1e-400000&#34;</span><span class="op" id="6996296">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996300">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996329">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996388">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996409">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996430">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996461">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996493">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996580">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="6996605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996608">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996695">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="6996720">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996724">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996798">&#34;4.630813248087435e+307&#34;</span><span class="op" id="6996822">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996826">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996869">&#34;22.222222222222222&#34;</span><span class="op" id="6996889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6996892">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="6996902">+</span>&nbsp;<span class="ident" id="6996904">strings</span><span class="op" id="6996911">.</span><span class="ident" id="6996912">Repeat</span><span class="op" id="6996918">(</span><span class="string" id="6996919">&#34;2&#34;</span><span class="op" id="6996922">,</span>&nbsp;<span class="num" id="6996924">4000</span><span class="op" id="6996928">)</span>&nbsp;<span class="op" id="6996930">+</span>&nbsp;<span class="string" id="6996932">&#34;e+1&#34;</span><span class="op" id="6996937">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996941">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6996997">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997023">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="6997080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997083">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997121">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="6997178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997181">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997212">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="6997269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997272">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997338">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="6997401">+</span>&nbsp;<span class="ident" id="6997403">strings</span><span class="op" id="6997410">.</span><span class="ident" id="6997411">Repeat</span><span class="op" id="6997417">(</span><span class="string" id="6997418">&#34;0&#34;</span><span class="op" id="6997421">,</span>&nbsp;<span class="num" id="6997423">10000</span><span class="op" id="6997428">)</span>&nbsp;<span class="op" id="6997430">+</span>&nbsp;<span class="string" id="6997432">&#34;1&#34;</span><span class="op" id="6997435">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997439">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997475">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="6997523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997526">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997570">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="6997618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997621">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997680">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997725">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="6997773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997776">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6997844">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997889">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="6997937">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997941">&#34;1152921504606846975&#34;</span><span class="op" id="6997962">,</span>&nbsp;&nbsp;<span class="comment" id="6997965">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6997981">&#34;-1152921504606846975&#34;</span><span class="op" id="6998003">,</span>&nbsp;<span class="comment" id="6998005">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6998022">&#34;1152921504606846977&#34;</span><span class="op" id="6998043">,</span>&nbsp;&nbsp;<span class="comment" id="6998046">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6998062">&#34;-1152921504606846977&#34;</span><span class="op" id="6998084">,</span>&nbsp;<span class="comment" id="6998086">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6998104">&#34;1/3&#34;</span><span class="op" id="6998109">,</span><br>
<span class="lineno"></span><span class="op" id="6998111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6998114">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6998180">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="6998240">func</span>&nbsp;<span class="ident" id="6998245">isFinite</span><span class="op" id="6998253">(</span><span class="ident" id="6998254">f</span>&nbsp;<span class="builtintype" id="6998256">float64</span><span class="op" id="6998263">)</span>&nbsp;<span class="builtintype" id="6998265">bool</span>&nbsp;<span class="op" id="6998270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998273">return</span>&nbsp;<span class="ident" id="6998280">math</span><span class="op" id="6998284">.</span><span class="ident" id="6998285">Abs</span><span class="op" id="6998288">(</span><span class="ident" id="6998289">f</span><span class="op" id="6998290">)</span>&nbsp;<span class="op" id="6998292">&lt;=</span>&nbsp;<span class="ident" id="6998295">math</span><span class="op" id="6998299">.</span><span class="ident" id="6998300">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="6998311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6998314">func</span>&nbsp;<span class="ident" id="6998319">TestFloat32SpecialCases</span><span class="op" id="6998342">(</span><span class="ident" id="6998343">t</span>&nbsp;<span class="op" id="6998345">*</span><span class="ident" id="6998346">testing</span><span class="op" id="6998353">.</span><span class="ident" id="6998354">T</span><span class="op" id="6998355">)</span>&nbsp;<span class="op" id="6998357">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998360">for</span>&nbsp;<span class="ident" id="6998364">_</span><span class="op" id="6998365">,</span>&nbsp;<span class="ident" id="6998367">input</span>&nbsp;<span class="op" id="6998373">:=</span>&nbsp;<span class="keyword" id="6998376">range</span>&nbsp;<span class="ident" id="6998382">float64inputs</span>&nbsp;<span class="op" id="6998396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998400">if</span>&nbsp;<span class="ident" id="6998403">strings</span><span class="op" id="6998410">.</span><span class="ident" id="6998411">HasPrefix</span><span class="op" id="6998420">(</span><span class="ident" id="6998421">input</span><span class="op" id="6998426">,</span>&nbsp;<span class="string" id="6998428">&#34;long:&#34;</span><span class="op" id="6998435">)</span>&nbsp;<span class="op" id="6998437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998442">if</span>&nbsp;<span class="ident" id="6998445">testing</span><span class="op" id="6998452">.</span><span class="ident" id="6998453">Short</span><span class="op" id="6998458">(</span><span class="op" id="6998459">)</span>&nbsp;<span class="op" id="6998461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998467">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6998479">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998484">input</span>&nbsp;<span class="op" id="6998490">=</span>&nbsp;<span class="ident" id="6998492">input</span><span class="op" id="6998497">[</span><span class="builtinfunc" id="6998498">len</span><span class="op" id="6998501">(</span><span class="string" id="6998502">&#34;long:&#34;</span><span class="op" id="6998509">)</span><span class="op" id="6998510">:</span><span class="op" id="6998511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6998515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998520">r</span><span class="op" id="6998521">,</span>&nbsp;<span class="ident" id="6998523">ok</span>&nbsp;<span class="op" id="6998526">:=</span>&nbsp;<span class="builtinfunc" id="6998529">new</span><span class="op" id="6998532">(</span><span class="ident" id="6998533">Rat</span><span class="op" id="6998536">)</span><span class="op" id="6998537">.</span><span class="ident" id="6998538">SetString</span><span class="op" id="6998547">(</span><span class="ident" id="6998548">input</span><span class="op" id="6998553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998557">if</span>&nbsp;<span class="op" id="6998560">!</span><span class="ident" id="6998561">ok</span>&nbsp;<span class="op" id="6998564">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998569">t</span><span class="op" id="6998570">.</span><span class="ident" id="6998571">Errorf</span><span class="op" id="6998577">(</span><span class="string" id="6998578">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="6998604">,</span>&nbsp;<span class="ident" id="6998606">input</span><span class="op" id="6998611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998616">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6998627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998631">f</span><span class="op" id="6998632">,</span>&nbsp;<span class="ident" id="6998634">exact</span>&nbsp;<span class="op" id="6998640">:=</span>&nbsp;<span class="ident" id="6998643">r</span><span class="op" id="6998644">.</span><span class="ident" id="6998645">Float32</span><span class="op" id="6998652">(</span><span class="op" id="6998653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6998658">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6998713">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6998754">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6998816">if</span>&nbsp;<span class="op" id="6998819">!</span><span class="ident" id="6998820">strings</span><span class="op" id="6998827">.</span><span class="ident" id="6998828">Contains</span><span class="op" id="6998836">(</span><span class="ident" id="6998837">input</span><span class="op" id="6998842">,</span>&nbsp;<span class="string" id="6998844">&#34;/&#34;</span><span class="op" id="6998847">)</span>&nbsp;<span class="op" id="6998849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998854">e64</span><span class="op" id="6998857">,</span>&nbsp;<span class="ident" id="6998859">_</span>&nbsp;<span class="op" id="6998861">:=</span>&nbsp;<span class="ident" id="6998864">strconv</span><span class="op" id="6998871">.</span><span class="ident" id="6998872">ParseFloat</span><span class="op" id="6998882">(</span><span class="ident" id="6998883">input</span><span class="op" id="6998888">,</span>&nbsp;<span class="num" id="6998890">32</span><span class="op" id="6998892">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6998897">e</span>&nbsp;<span class="op" id="6998899">:=</span>&nbsp;<span class="builtintype" id="6998902">float32</span><span class="op" id="6998909">(</span><span class="ident" id="6998910">e64</span><span class="op" id="6998913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6998919">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6998962">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999012">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999058">switch</span>&nbsp;<span class="op" id="6999065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999070">case</span>&nbsp;<span class="ident" id="6999075">math</span><span class="op" id="6999079">.</span><span class="ident" id="6999080">Float32bits</span><span class="op" id="6999091">(</span><span class="ident" id="6999092">e</span><span class="op" id="6999093">)</span>&nbsp;<span class="op" id="6999095">==</span>&nbsp;<span class="ident" id="6999098">math</span><span class="op" id="6999102">.</span><span class="ident" id="6999103">Float32bits</span><span class="op" id="6999114">(</span><span class="ident" id="6999115">f</span><span class="op" id="6999116">)</span><span class="op" id="6999117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999123">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999148">case</span>&nbsp;<span class="ident" id="6999153">f</span>&nbsp;<span class="op" id="6999155">==</span>&nbsp;<span class="num" id="6999158">0</span>&nbsp;<span class="op" id="6999160">&amp;&amp;</span>&nbsp;<span class="ident" id="6999163">r</span><span class="op" id="6999164">.</span><span class="ident" id="6999165">Num</span><span class="op" id="6999168">(</span><span class="op" id="6999169">)</span><span class="op" id="6999170">.</span><span class="ident" id="6999171">BitLen</span><span class="op" id="6999177">(</span><span class="op" id="6999178">)</span>&nbsp;<span class="op" id="6999180">==</span>&nbsp;<span class="num" id="6999183">0</span><span class="op" id="6999184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999190">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999245">default</span><span class="op" id="6999252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6999258">t</span><span class="op" id="6999259">.</span><span class="ident" id="6999260">Errorf</span><span class="op" id="6999266">(</span><span class="string" id="6999267">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="6999327">,</span>&nbsp;<span class="ident" id="6999329">input</span><span class="op" id="6999334">,</span>&nbsp;<span class="ident" id="6999336">e</span><span class="op" id="6999337">,</span>&nbsp;<span class="ident" id="6999339">e</span><span class="op" id="6999340">,</span>&nbsp;<span class="ident" id="6999342">f</span><span class="op" id="6999343">,</span>&nbsp;<span class="ident" id="6999345">f</span><span class="op" id="6999346">,</span>&nbsp;<span class="ident" id="6999348">f</span><span class="op" id="6999349">-</span><span class="ident" id="6999350">e</span><span class="op" id="6999351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999365">if</span>&nbsp;<span class="op" id="6999368">!</span><span class="ident" id="6999369">isFinite</span><span class="op" id="6999377">(</span><span class="builtintype" id="6999378">float64</span><span class="op" id="6999385">(</span><span class="ident" id="6999386">f</span><span class="op" id="6999387">)</span><span class="op" id="6999388">)</span>&nbsp;<span class="op" id="6999390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999395">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999411">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999455">if</span>&nbsp;<span class="op" id="6999458">!</span><span class="ident" id="6999459">checkIsBestApprox32</span><span class="op" id="6999478">(</span><span class="ident" id="6999479">t</span><span class="op" id="6999480">,</span>&nbsp;<span class="ident" id="6999482">f</span><span class="op" id="6999483">,</span>&nbsp;<span class="ident" id="6999485">r</span><span class="op" id="6999486">)</span>&nbsp;<span class="op" id="6999488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999493">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6999527">t</span><span class="op" id="6999528">.</span><span class="ident" id="6999529">Errorf</span><span class="op" id="6999535">(</span><span class="string" id="6999536">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="6999552">,</span>&nbsp;<span class="ident" id="6999554">input</span><span class="op" id="6999559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999568">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6999614">checkNonLossyRoundtrip32</span><span class="op" id="6999638">(</span><span class="ident" id="6999639">t</span><span class="op" id="6999640">,</span>&nbsp;<span class="ident" id="6999642">f</span><span class="op" id="6999643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6999648">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999694">if</span>&nbsp;<span class="ident" id="6999697">wasExact</span>&nbsp;<span class="op" id="6999706">:=</span>&nbsp;<span class="builtinfunc" id="6999709">new</span><span class="op" id="6999712">(</span><span class="ident" id="6999713">Rat</span><span class="op" id="6999716">)</span><span class="op" id="6999717">.</span><span class="ident" id="6999718">SetFloat64</span><span class="op" id="6999728">(</span><span class="builtintype" id="6999729">float64</span><span class="op" id="6999736">(</span><span class="ident" id="6999737">f</span><span class="op" id="6999738">)</span><span class="op" id="6999739">)</span><span class="op" id="6999740">.</span><span class="ident" id="6999741">Cmp</span><span class="op" id="6999744">(</span><span class="ident" id="6999745">r</span><span class="op" id="6999746">)</span>&nbsp;<span class="op" id="6999748">==</span>&nbsp;<span class="num" id="6999751">0</span><span class="op" id="6999752">;</span>&nbsp;<span class="ident" id="6999754">wasExact</span>&nbsp;<span class="op" id="6999763">!=</span>&nbsp;<span class="ident" id="6999766">exact</span>&nbsp;<span class="op" id="6999772">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6999777">t</span><span class="op" id="6999778">.</span><span class="ident" id="6999779">Errorf</span><span class="op" id="6999785">(</span><span class="string" id="6999786">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="6999835">,</span>&nbsp;<span class="ident" id="6999837">input</span><span class="op" id="6999842">,</span>&nbsp;<span class="ident" id="6999844">exact</span><span class="op" id="6999849">,</span>&nbsp;<span class="ident" id="6999851">wasExact</span><span class="op" id="6999859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999866">}</span><br>
<span class="lineno"></span><span class="op" id="6999868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="6999871">func</span>&nbsp;<span class="ident" id="6999876">TestFloat64SpecialCases</span><span class="op" id="6999899">(</span><span class="ident" id="6999900">t</span>&nbsp;<span class="op" id="6999902">*</span><span class="ident" id="6999903">testing</span><span class="op" id="6999910">.</span><span class="ident" id="6999911">T</span><span class="op" id="6999912">)</span>&nbsp;<span class="op" id="6999914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999917">for</span>&nbsp;<span class="ident" id="6999921">_</span><span class="op" id="6999922">,</span>&nbsp;<span class="ident" id="6999924">input</span>&nbsp;<span class="op" id="6999930">:=</span>&nbsp;<span class="keyword" id="6999933">range</span>&nbsp;<span class="ident" id="6999939">float64inputs</span>&nbsp;<span class="op" id="6999953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999957">if</span>&nbsp;<span class="ident" id="6999960">strings</span><span class="op" id="6999967">.</span><span class="ident" id="6999968">HasPrefix</span><span class="op" id="6999977">(</span><span class="ident" id="6999978">input</span><span class="op" id="6999983">,</span>&nbsp;<span class="string" id="6999985">&#34;long:&#34;</span><span class="op" id="6999992">)</span>&nbsp;<span class="op" id="6999994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6999999">if</span>&nbsp;<span class="ident" id="7000002">testing</span><span class="op" id="7000009">.</span><span class="ident" id="7000010">Short</span><span class="op" id="7000015">(</span><span class="op" id="7000016">)</span>&nbsp;<span class="op" id="7000018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000024">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000041">input</span>&nbsp;<span class="op" id="7000047">=</span>&nbsp;<span class="ident" id="7000049">input</span><span class="op" id="7000054">[</span><span class="builtinfunc" id="7000055">len</span><span class="op" id="7000058">(</span><span class="string" id="7000059">&#34;long:&#34;</span><span class="op" id="7000066">)</span><span class="op" id="7000067">:</span><span class="op" id="7000068">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000077">r</span><span class="op" id="7000078">,</span>&nbsp;<span class="ident" id="7000080">ok</span>&nbsp;<span class="op" id="7000083">:=</span>&nbsp;<span class="builtinfunc" id="7000086">new</span><span class="op" id="7000089">(</span><span class="ident" id="7000090">Rat</span><span class="op" id="7000093">)</span><span class="op" id="7000094">.</span><span class="ident" id="7000095">SetString</span><span class="op" id="7000104">(</span><span class="ident" id="7000105">input</span><span class="op" id="7000110">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000114">if</span>&nbsp;<span class="op" id="7000117">!</span><span class="ident" id="7000118">ok</span>&nbsp;<span class="op" id="7000121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000126">t</span><span class="op" id="7000127">.</span><span class="ident" id="7000128">Errorf</span><span class="op" id="7000134">(</span><span class="string" id="7000135">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7000161">,</span>&nbsp;<span class="ident" id="7000163">input</span><span class="op" id="7000168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000173">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000188">f</span><span class="op" id="7000189">,</span>&nbsp;<span class="ident" id="7000191">exact</span>&nbsp;<span class="op" id="7000197">:=</span>&nbsp;<span class="ident" id="7000200">r</span><span class="op" id="7000201">.</span><span class="ident" id="7000202">Float64</span><span class="op" id="7000209">(</span><span class="op" id="7000210">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000215">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000270">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000311">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000373">if</span>&nbsp;<span class="op" id="7000376">!</span><span class="ident" id="7000377">strings</span><span class="op" id="7000384">.</span><span class="ident" id="7000385">Contains</span><span class="op" id="7000393">(</span><span class="ident" id="7000394">input</span><span class="op" id="7000399">,</span>&nbsp;<span class="string" id="7000401">&#34;/&#34;</span><span class="op" id="7000404">)</span>&nbsp;<span class="op" id="7000406">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000411">e</span><span class="op" id="7000412">,</span>&nbsp;<span class="ident" id="7000414">_</span>&nbsp;<span class="op" id="7000416">:=</span>&nbsp;<span class="ident" id="7000419">strconv</span><span class="op" id="7000426">.</span><span class="ident" id="7000427">ParseFloat</span><span class="op" id="7000437">(</span><span class="ident" id="7000438">input</span><span class="op" id="7000443">,</span>&nbsp;<span class="num" id="7000445">64</span><span class="op" id="7000447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000453">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000496">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000546">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000592">switch</span>&nbsp;<span class="op" id="7000599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000604">case</span>&nbsp;<span class="ident" id="7000609">math</span><span class="op" id="7000613">.</span><span class="ident" id="7000614">Float64bits</span><span class="op" id="7000625">(</span><span class="ident" id="7000626">e</span><span class="op" id="7000627">)</span>&nbsp;<span class="op" id="7000629">==</span>&nbsp;<span class="ident" id="7000632">math</span><span class="op" id="7000636">.</span><span class="ident" id="7000637">Float64bits</span><span class="op" id="7000648">(</span><span class="ident" id="7000649">f</span><span class="op" id="7000650">)</span><span class="op" id="7000651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000657">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000682">case</span>&nbsp;<span class="ident" id="7000687">f</span>&nbsp;<span class="op" id="7000689">==</span>&nbsp;<span class="num" id="7000692">0</span>&nbsp;<span class="op" id="7000694">&amp;&amp;</span>&nbsp;<span class="ident" id="7000697">r</span><span class="op" id="7000698">.</span><span class="ident" id="7000699">Num</span><span class="op" id="7000702">(</span><span class="op" id="7000703">)</span><span class="op" id="7000704">.</span><span class="ident" id="7000705">BitLen</span><span class="op" id="7000711">(</span><span class="op" id="7000712">)</span>&nbsp;<span class="op" id="7000714">==</span>&nbsp;<span class="num" id="7000717">0</span><span class="op" id="7000718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000724">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000779">default</span><span class="op" id="7000786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7000792">t</span><span class="op" id="7000793">.</span><span class="ident" id="7000794">Errorf</span><span class="op" id="7000800">(</span><span class="string" id="7000801">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7000861">,</span>&nbsp;<span class="ident" id="7000863">input</span><span class="op" id="7000868">,</span>&nbsp;<span class="ident" id="7000870">e</span><span class="op" id="7000871">,</span>&nbsp;<span class="ident" id="7000873">e</span><span class="op" id="7000874">,</span>&nbsp;<span class="ident" id="7000876">f</span><span class="op" id="7000877">,</span>&nbsp;<span class="ident" id="7000879">f</span><span class="op" id="7000880">,</span>&nbsp;<span class="ident" id="7000882">f</span><span class="op" id="7000883">-</span><span class="ident" id="7000884">e</span><span class="op" id="7000885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000899">if</span>&nbsp;<span class="op" id="7000902">!</span><span class="ident" id="7000903">isFinite</span><span class="op" id="7000911">(</span><span class="ident" id="7000912">f</span><span class="op" id="7000913">)</span>&nbsp;<span class="op" id="7000915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000920">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7000931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7000936">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7000980">if</span>&nbsp;<span class="op" id="7000983">!</span><span class="ident" id="7000984">checkIsBestApprox64</span><span class="op" id="7001003">(</span><span class="ident" id="7001004">t</span><span class="op" id="7001005">,</span>&nbsp;<span class="ident" id="7001007">f</span><span class="op" id="7001008">,</span>&nbsp;<span class="ident" id="7001010">r</span><span class="op" id="7001011">)</span>&nbsp;<span class="op" id="7001013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001018">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001052">t</span><span class="op" id="7001053">.</span><span class="ident" id="7001054">Errorf</span><span class="op" id="7001060">(</span><span class="string" id="7001061">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7001077">,</span>&nbsp;<span class="ident" id="7001079">input</span><span class="op" id="7001084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001093">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001139">checkNonLossyRoundtrip64</span><span class="op" id="7001163">(</span><span class="ident" id="7001164">t</span><span class="op" id="7001165">,</span>&nbsp;<span class="ident" id="7001167">f</span><span class="op" id="7001168">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001173">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001219">if</span>&nbsp;<span class="ident" id="7001222">wasExact</span>&nbsp;<span class="op" id="7001231">:=</span>&nbsp;<span class="builtinfunc" id="7001234">new</span><span class="op" id="7001237">(</span><span class="ident" id="7001238">Rat</span><span class="op" id="7001241">)</span><span class="op" id="7001242">.</span><span class="ident" id="7001243">SetFloat64</span><span class="op" id="7001253">(</span><span class="ident" id="7001254">f</span><span class="op" id="7001255">)</span><span class="op" id="7001256">.</span><span class="ident" id="7001257">Cmp</span><span class="op" id="7001260">(</span><span class="ident" id="7001261">r</span><span class="op" id="7001262">)</span>&nbsp;<span class="op" id="7001264">==</span>&nbsp;<span class="num" id="7001267">0</span><span class="op" id="7001268">;</span>&nbsp;<span class="ident" id="7001270">wasExact</span>&nbsp;<span class="op" id="7001279">!=</span>&nbsp;<span class="ident" id="7001282">exact</span>&nbsp;<span class="op" id="7001288">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001293">t</span><span class="op" id="7001294">.</span><span class="ident" id="7001295">Errorf</span><span class="op" id="7001301">(</span><span class="string" id="7001302">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7001351">,</span>&nbsp;<span class="ident" id="7001353">input</span><span class="op" id="7001358">,</span>&nbsp;<span class="ident" id="7001360">exact</span><span class="op" id="7001365">,</span>&nbsp;<span class="ident" id="7001367">wasExact</span><span class="op" id="7001375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001382">}</span><br>
<span class="lineno"></span><span class="op" id="7001384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7001387">func</span>&nbsp;<span class="ident" id="7001392">TestFloat32Distribution</span><span class="op" id="7001415">(</span><span class="ident" id="7001416">t</span>&nbsp;<span class="op" id="7001418">*</span><span class="ident" id="7001419">testing</span><span class="op" id="7001426">.</span><span class="ident" id="7001427">T</span><span class="op" id="7001428">)</span>&nbsp;<span class="op" id="7001430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001433">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001493">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7001553">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001605">var</span>&nbsp;<span class="ident" id="7001609">add</span>&nbsp;<span class="op" id="7001613">=</span>&nbsp;<span class="op" id="7001615">[</span><span class="op" id="7001616">]</span><span class="builtintype" id="7001617">int64</span><span class="op" id="7001622">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001626">0</span><span class="op" id="7001627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001631">1</span><span class="op" id="7001632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001636">3</span><span class="op" id="7001637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001641">5</span><span class="op" id="7001642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001646">7</span><span class="op" id="7001647">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001651">9</span><span class="op" id="7001652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001656">11</span><span class="op" id="7001658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001664">var</span>&nbsp;<span class="ident" id="7001668">winc</span><span class="op" id="7001672">,</span>&nbsp;<span class="ident" id="7001674">einc</span>&nbsp;<span class="op" id="7001679">=</span>&nbsp;<span class="builtintype" id="7001681">uint64</span><span class="op" id="7001687">(</span><span class="num" id="7001688">1</span><span class="op" id="7001689">)</span><span class="op" id="7001690">,</span>&nbsp;<span class="num" id="7001692">1</span>&nbsp;<span class="comment" id="7001694">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001726">if</span>&nbsp;<span class="ident" id="7001729">testing</span><span class="op" id="7001736">.</span><span class="ident" id="7001737">Short</span><span class="op" id="7001742">(</span><span class="op" id="7001743">)</span>&nbsp;<span class="op" id="7001745">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001749">winc</span><span class="op" id="7001753">,</span>&nbsp;<span class="ident" id="7001755">einc</span>&nbsp;<span class="op" id="7001760">=</span>&nbsp;<span class="num" id="7001762">5</span><span class="op" id="7001763">,</span>&nbsp;<span class="num" id="7001765">15</span>&nbsp;<span class="comment" id="7001768">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001805">for</span>&nbsp;<span class="ident" id="7001809">_</span><span class="op" id="7001810">,</span>&nbsp;<span class="ident" id="7001812">sign</span>&nbsp;<span class="op" id="7001817">:=</span>&nbsp;<span class="keyword" id="7001820">range</span>&nbsp;<span class="string" id="7001826">&#34;+-&#34;</span>&nbsp;<span class="op" id="7001831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001835">for</span>&nbsp;<span class="ident" id="7001839">_</span><span class="op" id="7001840">,</span>&nbsp;<span class="ident" id="7001842">a</span>&nbsp;<span class="op" id="7001844">:=</span>&nbsp;<span class="keyword" id="7001847">range</span>&nbsp;<span class="ident" id="7001853">add</span>&nbsp;<span class="op" id="7001857">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001862">for</span>&nbsp;<span class="ident" id="7001866">wid</span>&nbsp;<span class="op" id="7001870">:=</span>&nbsp;<span class="builtintype" id="7001873">uint64</span><span class="op" id="7001879">(</span><span class="num" id="7001880">0</span><span class="op" id="7001881">)</span><span class="op" id="7001882">;</span>&nbsp;<span class="ident" id="7001884">wid</span>&nbsp;<span class="op" id="7001888">&lt;</span>&nbsp;<span class="num" id="7001890">30</span><span class="op" id="7001892">;</span>&nbsp;<span class="ident" id="7001894">wid</span>&nbsp;<span class="op" id="7001898">+=</span>&nbsp;<span class="ident" id="7001901">winc</span>&nbsp;<span class="op" id="7001906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001912">b</span>&nbsp;<span class="op" id="7001914">:=</span>&nbsp;<span class="num" id="7001917">1</span><span class="op" id="7001918">&lt;&lt;</span><span class="ident" id="7001920">wid</span>&nbsp;<span class="op" id="7001924">+</span>&nbsp;<span class="ident" id="7001926">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001932">if</span>&nbsp;<span class="ident" id="7001935">sign</span>&nbsp;<span class="op" id="7001940">==</span>&nbsp;<span class="string" id="7001943">&#39;-&#39;</span>&nbsp;<span class="op" id="7001947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7001954">b</span>&nbsp;<span class="op" id="7001956">=</span>&nbsp;<span class="op" id="7001958">-</span><span class="ident" id="7001959">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7001965">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7001971">for</span>&nbsp;<span class="ident" id="7001975">exp</span>&nbsp;<span class="op" id="7001979">:=</span>&nbsp;<span class="op" id="7001982">-</span><span class="num" id="7001983">150</span><span class="op" id="7001986">;</span>&nbsp;<span class="ident" id="7001988">exp</span>&nbsp;<span class="op" id="7001992">&lt;</span>&nbsp;<span class="num" id="7001994">150</span><span class="op" id="7001997">;</span>&nbsp;<span class="ident" id="7001999">exp</span>&nbsp;<span class="op" id="7002003">+=</span>&nbsp;<span class="ident" id="7002006">einc</span>&nbsp;<span class="op" id="7002011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002018">num</span><span class="op" id="7002021">,</span>&nbsp;<span class="ident" id="7002023">den</span>&nbsp;<span class="op" id="7002027">:=</span>&nbsp;<span class="ident" id="7002030">NewInt</span><span class="op" id="7002036">(</span><span class="ident" id="7002037">b</span><span class="op" id="7002038">)</span><span class="op" id="7002039">,</span>&nbsp;<span class="ident" id="7002041">NewInt</span><span class="op" id="7002047">(</span><span class="num" id="7002048">1</span><span class="op" id="7002049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002056">if</span>&nbsp;<span class="ident" id="7002059">exp</span>&nbsp;<span class="op" id="7002063">&gt;</span>&nbsp;<span class="num" id="7002065">0</span>&nbsp;<span class="op" id="7002067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002075">num</span><span class="op" id="7002078">.</span><span class="ident" id="7002079">Lsh</span><span class="op" id="7002082">(</span><span class="ident" id="7002083">num</span><span class="op" id="7002086">,</span>&nbsp;<span class="builtintype" id="7002088">uint</span><span class="op" id="7002092">(</span><span class="ident" id="7002093">exp</span><span class="op" id="7002096">)</span><span class="op" id="7002097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002104">}</span>&nbsp;<span class="keyword" id="7002106">else</span>&nbsp;<span class="op" id="7002111">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002119">den</span><span class="op" id="7002122">.</span><span class="ident" id="7002123">Lsh</span><span class="op" id="7002126">(</span><span class="ident" id="7002127">den</span><span class="op" id="7002130">,</span>&nbsp;<span class="builtintype" id="7002132">uint</span><span class="op" id="7002136">(</span><span class="op" id="7002137">-</span><span class="ident" id="7002138">exp</span><span class="op" id="7002141">)</span><span class="op" id="7002142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002156">r</span>&nbsp;<span class="op" id="7002158">:=</span>&nbsp;<span class="builtinfunc" id="7002161">new</span><span class="op" id="7002164">(</span><span class="ident" id="7002165">Rat</span><span class="op" id="7002168">)</span><span class="op" id="7002169">.</span><span class="ident" id="7002170">SetFrac</span><span class="op" id="7002177">(</span><span class="ident" id="7002178">num</span><span class="op" id="7002181">,</span>&nbsp;<span class="ident" id="7002183">den</span><span class="op" id="7002186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002193">f</span><span class="op" id="7002194">,</span>&nbsp;<span class="ident" id="7002196">_</span>&nbsp;<span class="op" id="7002198">:=</span>&nbsp;<span class="ident" id="7002201">r</span><span class="op" id="7002202">.</span><span class="ident" id="7002203">Float32</span><span class="op" id="7002210">(</span><span class="op" id="7002211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002219">if</span>&nbsp;<span class="op" id="7002222">!</span><span class="ident" id="7002223">checkIsBestApprox32</span><span class="op" id="7002242">(</span><span class="ident" id="7002243">t</span><span class="op" id="7002244">,</span>&nbsp;<span class="ident" id="7002246">f</span><span class="op" id="7002247">,</span>&nbsp;<span class="ident" id="7002249">r</span><span class="op" id="7002250">)</span>&nbsp;<span class="op" id="7002252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7002260">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002297">t</span><span class="op" id="7002298">.</span><span class="ident" id="7002299">Errorf</span><span class="op" id="7002305">(</span><span class="string" id="7002306">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7002369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002378">b</span><span class="op" id="7002379">,</span>&nbsp;<span class="ident" id="7002381">exp</span><span class="op" id="7002384">,</span>&nbsp;<span class="ident" id="7002386">f</span><span class="op" id="7002387">,</span>&nbsp;<span class="ident" id="7002389">f</span><span class="op" id="7002390">,</span>&nbsp;<span class="ident" id="7002392">math</span><span class="op" id="7002396">.</span><span class="ident" id="7002397">Ldexp</span><span class="op" id="7002402">(</span><span class="builtintype" id="7002403">float64</span><span class="op" id="7002410">(</span><span class="ident" id="7002411">b</span><span class="op" id="7002412">)</span><span class="op" id="7002413">,</span>&nbsp;<span class="ident" id="7002415">exp</span><span class="op" id="7002418">)</span><span class="op" id="7002419">,</span>&nbsp;<span class="ident" id="7002421">r</span><span class="op" id="7002422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002429">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002437">checkNonLossyRoundtrip32</span><span class="op" id="7002461">(</span><span class="ident" id="7002462">t</span><span class="op" id="7002463">,</span>&nbsp;<span class="ident" id="7002465">f</span><span class="op" id="7002466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002481">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002484">}</span><br>
<span class="lineno"></span><span class="op" id="7002486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7002489">func</span>&nbsp;<span class="ident" id="7002494">TestFloat64Distribution</span><span class="op" id="7002517">(</span><span class="ident" id="7002518">t</span>&nbsp;<span class="op" id="7002520">*</span><span class="ident" id="7002521">testing</span><span class="op" id="7002528">.</span><span class="ident" id="7002529">T</span><span class="op" id="7002530">)</span>&nbsp;<span class="op" id="7002532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7002535">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7002595">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7002655">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002707">var</span>&nbsp;<span class="ident" id="7002711">add</span>&nbsp;<span class="op" id="7002715">=</span>&nbsp;<span class="op" id="7002717">[</span><span class="op" id="7002718">]</span><span class="builtintype" id="7002719">int64</span><span class="op" id="7002724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002728">0</span><span class="op" id="7002729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002733">1</span><span class="op" id="7002734">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002738">3</span><span class="op" id="7002739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002743">5</span><span class="op" id="7002744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002748">7</span><span class="op" id="7002749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002753">9</span><span class="op" id="7002754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002758">11</span><span class="op" id="7002760">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002766">var</span>&nbsp;<span class="ident" id="7002770">winc</span><span class="op" id="7002774">,</span>&nbsp;<span class="ident" id="7002776">einc</span>&nbsp;<span class="op" id="7002781">=</span>&nbsp;<span class="builtintype" id="7002783">uint64</span><span class="op" id="7002789">(</span><span class="num" id="7002790">1</span><span class="op" id="7002791">)</span><span class="op" id="7002792">,</span>&nbsp;<span class="num" id="7002794">1</span>&nbsp;<span class="comment" id="7002796">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002827">if</span>&nbsp;<span class="ident" id="7002830">testing</span><span class="op" id="7002837">.</span><span class="ident" id="7002838">Short</span><span class="op" id="7002843">(</span><span class="op" id="7002844">)</span>&nbsp;<span class="op" id="7002846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7002850">winc</span><span class="op" id="7002854">,</span>&nbsp;<span class="ident" id="7002856">einc</span>&nbsp;<span class="op" id="7002861">=</span>&nbsp;<span class="num" id="7002863">10</span><span class="op" id="7002865">,</span>&nbsp;<span class="num" id="7002867">500</span>&nbsp;<span class="comment" id="7002871">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002904">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002908">for</span>&nbsp;<span class="ident" id="7002912">_</span><span class="op" id="7002913">,</span>&nbsp;<span class="ident" id="7002915">sign</span>&nbsp;<span class="op" id="7002920">:=</span>&nbsp;<span class="keyword" id="7002923">range</span>&nbsp;<span class="string" id="7002929">&#34;+-&#34;</span>&nbsp;<span class="op" id="7002934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002938">for</span>&nbsp;<span class="ident" id="7002942">_</span><span class="op" id="7002943">,</span>&nbsp;<span class="ident" id="7002945">a</span>&nbsp;<span class="op" id="7002947">:=</span>&nbsp;<span class="keyword" id="7002950">range</span>&nbsp;<span class="ident" id="7002956">add</span>&nbsp;<span class="op" id="7002960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7002965">for</span>&nbsp;<span class="ident" id="7002969">wid</span>&nbsp;<span class="op" id="7002973">:=</span>&nbsp;<span class="builtintype" id="7002976">uint64</span><span class="op" id="7002982">(</span><span class="num" id="7002983">0</span><span class="op" id="7002984">)</span><span class="op" id="7002985">;</span>&nbsp;<span class="ident" id="7002987">wid</span>&nbsp;<span class="op" id="7002991">&lt;</span>&nbsp;<span class="num" id="7002993">60</span><span class="op" id="7002995">;</span>&nbsp;<span class="ident" id="7002997">wid</span>&nbsp;<span class="op" id="7003001">+=</span>&nbsp;<span class="ident" id="7003004">winc</span>&nbsp;<span class="op" id="7003009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003015">b</span>&nbsp;<span class="op" id="7003017">:=</span>&nbsp;<span class="num" id="7003020">1</span><span class="op" id="7003021">&lt;&lt;</span><span class="ident" id="7003023">wid</span>&nbsp;<span class="op" id="7003027">+</span>&nbsp;<span class="ident" id="7003029">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003035">if</span>&nbsp;<span class="ident" id="7003038">sign</span>&nbsp;<span class="op" id="7003043">==</span>&nbsp;<span class="string" id="7003046">&#39;-&#39;</span>&nbsp;<span class="op" id="7003050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003057">b</span>&nbsp;<span class="op" id="7003059">=</span>&nbsp;<span class="op" id="7003061">-</span><span class="ident" id="7003062">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003074">for</span>&nbsp;<span class="ident" id="7003078">exp</span>&nbsp;<span class="op" id="7003082">:=</span>&nbsp;<span class="op" id="7003085">-</span><span class="num" id="7003086">1100</span><span class="op" id="7003090">;</span>&nbsp;<span class="ident" id="7003092">exp</span>&nbsp;<span class="op" id="7003096">&lt;</span>&nbsp;<span class="num" id="7003098">1100</span><span class="op" id="7003102">;</span>&nbsp;<span class="ident" id="7003104">exp</span>&nbsp;<span class="op" id="7003108">+=</span>&nbsp;<span class="ident" id="7003111">einc</span>&nbsp;<span class="op" id="7003116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003123">num</span><span class="op" id="7003126">,</span>&nbsp;<span class="ident" id="7003128">den</span>&nbsp;<span class="op" id="7003132">:=</span>&nbsp;<span class="ident" id="7003135">NewInt</span><span class="op" id="7003141">(</span><span class="ident" id="7003142">b</span><span class="op" id="7003143">)</span><span class="op" id="7003144">,</span>&nbsp;<span class="ident" id="7003146">NewInt</span><span class="op" id="7003152">(</span><span class="num" id="7003153">1</span><span class="op" id="7003154">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003161">if</span>&nbsp;<span class="ident" id="7003164">exp</span>&nbsp;<span class="op" id="7003168">&gt;</span>&nbsp;<span class="num" id="7003170">0</span>&nbsp;<span class="op" id="7003172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003180">num</span><span class="op" id="7003183">.</span><span class="ident" id="7003184">Lsh</span><span class="op" id="7003187">(</span><span class="ident" id="7003188">num</span><span class="op" id="7003191">,</span>&nbsp;<span class="builtintype" id="7003193">uint</span><span class="op" id="7003197">(</span><span class="ident" id="7003198">exp</span><span class="op" id="7003201">)</span><span class="op" id="7003202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003209">}</span>&nbsp;<span class="keyword" id="7003211">else</span>&nbsp;<span class="op" id="7003216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003224">den</span><span class="op" id="7003227">.</span><span class="ident" id="7003228">Lsh</span><span class="op" id="7003231">(</span><span class="ident" id="7003232">den</span><span class="op" id="7003235">,</span>&nbsp;<span class="builtintype" id="7003237">uint</span><span class="op" id="7003241">(</span><span class="op" id="7003242">-</span><span class="ident" id="7003243">exp</span><span class="op" id="7003246">)</span><span class="op" id="7003247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003254">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003261">r</span>&nbsp;<span class="op" id="7003263">:=</span>&nbsp;<span class="builtinfunc" id="7003266">new</span><span class="op" id="7003269">(</span><span class="ident" id="7003270">Rat</span><span class="op" id="7003273">)</span><span class="op" id="7003274">.</span><span class="ident" id="7003275">SetFrac</span><span class="op" id="7003282">(</span><span class="ident" id="7003283">num</span><span class="op" id="7003286">,</span>&nbsp;<span class="ident" id="7003288">den</span><span class="op" id="7003291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003298">f</span><span class="op" id="7003299">,</span>&nbsp;<span class="ident" id="7003301">_</span>&nbsp;<span class="op" id="7003303">:=</span>&nbsp;<span class="ident" id="7003306">r</span><span class="op" id="7003307">.</span><span class="ident" id="7003308">Float64</span><span class="op" id="7003315">(</span><span class="op" id="7003316">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003324">if</span>&nbsp;<span class="op" id="7003327">!</span><span class="ident" id="7003328">checkIsBestApprox64</span><span class="op" id="7003347">(</span><span class="ident" id="7003348">t</span><span class="op" id="7003349">,</span>&nbsp;<span class="ident" id="7003351">f</span><span class="op" id="7003352">,</span>&nbsp;<span class="ident" id="7003354">r</span><span class="op" id="7003355">)</span>&nbsp;<span class="op" id="7003357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7003365">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003402">t</span><span class="op" id="7003403">.</span><span class="ident" id="7003404">Errorf</span><span class="op" id="7003410">(</span><span class="string" id="7003411">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7003474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003483">b</span><span class="op" id="7003484">,</span>&nbsp;<span class="ident" id="7003486">exp</span><span class="op" id="7003489">,</span>&nbsp;<span class="ident" id="7003491">f</span><span class="op" id="7003492">,</span>&nbsp;<span class="ident" id="7003494">f</span><span class="op" id="7003495">,</span>&nbsp;<span class="ident" id="7003497">math</span><span class="op" id="7003501">.</span><span class="ident" id="7003502">Ldexp</span><span class="op" id="7003507">(</span><span class="builtintype" id="7003508">float64</span><span class="op" id="7003515">(</span><span class="ident" id="7003516">b</span><span class="op" id="7003517">)</span><span class="op" id="7003518">,</span>&nbsp;<span class="ident" id="7003520">exp</span><span class="op" id="7003523">)</span><span class="op" id="7003524">,</span>&nbsp;<span class="ident" id="7003526">r</span><span class="op" id="7003527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003542">checkNonLossyRoundtrip64</span><span class="op" id="7003566">(</span><span class="ident" id="7003567">t</span><span class="op" id="7003568">,</span>&nbsp;<span class="ident" id="7003570">f</span><span class="op" id="7003571">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003589">}</span><br>
<span class="lineno"></span><span class="op" id="7003591">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7003594">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7003666">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7003682">func</span>&nbsp;<span class="ident" id="7003687">TestSetFloat64NonFinite</span><span class="op" id="7003710">(</span><span class="ident" id="7003711">t</span>&nbsp;<span class="op" id="7003713">*</span><span class="ident" id="7003714">testing</span><span class="op" id="7003721">.</span><span class="ident" id="7003722">T</span><span class="op" id="7003723">)</span>&nbsp;<span class="op" id="7003725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003728">for</span>&nbsp;<span class="ident" id="7003732">_</span><span class="op" id="7003733">,</span>&nbsp;<span class="ident" id="7003735">f</span>&nbsp;<span class="op" id="7003737">:=</span>&nbsp;<span class="keyword" id="7003740">range</span>&nbsp;<span class="op" id="7003746">[</span><span class="op" id="7003747">]</span><span class="builtintype" id="7003748">float64</span><span class="op" id="7003755">{</span><span class="ident" id="7003756">math</span><span class="op" id="7003760">.</span><span class="ident" id="7003761">NaN</span><span class="op" id="7003764">(</span><span class="op" id="7003765">)</span><span class="op" id="7003766">,</span>&nbsp;<span class="ident" id="7003768">math</span><span class="op" id="7003772">.</span><span class="ident" id="7003773">Inf</span><span class="op" id="7003776">(</span><span class="op" id="7003777">+</span><span class="num" id="7003778">1</span><span class="op" id="7003779">)</span><span class="op" id="7003780">,</span>&nbsp;<span class="ident" id="7003782">math</span><span class="op" id="7003786">.</span><span class="ident" id="7003787">Inf</span><span class="op" id="7003790">(</span><span class="op" id="7003791">-</span><span class="num" id="7003792">1</span><span class="op" id="7003793">)</span><span class="op" id="7003794">}</span>&nbsp;<span class="op" id="7003796">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003800">var</span>&nbsp;<span class="ident" id="7003804">r</span>&nbsp;<span class="ident" id="7003806">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7003812">if</span>&nbsp;<span class="ident" id="7003815">r2</span>&nbsp;<span class="op" id="7003818">:=</span>&nbsp;<span class="ident" id="7003821">r</span><span class="op" id="7003822">.</span><span class="ident" id="7003823">SetFloat64</span><span class="op" id="7003833">(</span><span class="ident" id="7003834">f</span><span class="op" id="7003835">)</span><span class="op" id="7003836">;</span>&nbsp;<span class="ident" id="7003838">r2</span>&nbsp;<span class="op" id="7003841">!=</span>&nbsp;<span class="builtintype" id="7003844">nil</span>&nbsp;<span class="op" id="7003848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7003853">t</span><span class="op" id="7003854">.</span><span class="ident" id="7003855">Errorf</span><span class="op" id="7003861">(</span><span class="string" id="7003862">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7003895">,</span>&nbsp;<span class="ident" id="7003897">f</span><span class="op" id="7003898">,</span>&nbsp;<span class="ident" id="7003900">r2</span><span class="op" id="7003902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003909">}</span><br>
<span class="lineno">1015</span><span class="op" id="7003911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7003914">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7003987">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7004014">func</span>&nbsp;<span class="ident" id="7004019">checkNonLossyRoundtrip32</span><span class="op" id="7004043">(</span><span class="ident" id="7004044">t</span>&nbsp;<span class="op" id="7004046">*</span><span class="ident" id="7004047">testing</span><span class="op" id="7004054">.</span><span class="ident" id="7004055">T</span><span class="op" id="7004056">,</span>&nbsp;<span class="ident" id="7004058">f</span>&nbsp;<span class="builtintype" id="7004060">float32</span><span class="op" id="7004067">)</span>&nbsp;<span class="op" id="7004069">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004072">if</span>&nbsp;<span class="op" id="7004075">!</span><span class="ident" id="7004076">isFinite</span><span class="op" id="7004084">(</span><span class="builtintype" id="7004085">float64</span><span class="op" id="7004092">(</span><span class="ident" id="7004093">f</span><span class="op" id="7004094">)</span><span class="op" id="7004095">)</span>&nbsp;<span class="op" id="7004097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004101">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004112">r</span>&nbsp;<span class="op" id="7004114">:=</span>&nbsp;<span class="builtinfunc" id="7004117">new</span><span class="op" id="7004120">(</span><span class="ident" id="7004121">Rat</span><span class="op" id="7004124">)</span><span class="op" id="7004125">.</span><span class="ident" id="7004126">SetFloat64</span><span class="op" id="7004136">(</span><span class="builtintype" id="7004137">float64</span><span class="op" id="7004144">(</span><span class="ident" id="7004145">f</span><span class="op" id="7004146">)</span><span class="op" id="7004147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004150">if</span>&nbsp;<span class="ident" id="7004153">r</span>&nbsp;<span class="op" id="7004155">==</span>&nbsp;<span class="builtintype" id="7004158">nil</span>&nbsp;<span class="op" id="7004162">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004166">t</span><span class="op" id="7004167">.</span><span class="ident" id="7004168">Errorf</span><span class="op" id="7004174">(</span><span class="string" id="7004175">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7004216">,</span>&nbsp;<span class="ident" id="7004218">f</span><span class="op" id="7004219">,</span>&nbsp;<span class="ident" id="7004221">f</span><span class="op" id="7004222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004226">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004237">f2</span><span class="op" id="7004239">,</span>&nbsp;<span class="ident" id="7004241">exact</span>&nbsp;<span class="op" id="7004247">:=</span>&nbsp;<span class="ident" id="7004250">r</span><span class="op" id="7004251">.</span><span class="ident" id="7004252">Float32</span><span class="op" id="7004259">(</span><span class="op" id="7004260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004263">if</span>&nbsp;<span class="ident" id="7004266">f</span>&nbsp;<span class="op" id="7004268">!=</span>&nbsp;<span class="ident" id="7004271">f2</span>&nbsp;<span class="op" id="7004274">||</span>&nbsp;<span class="op" id="7004277">!</span><span class="ident" id="7004278">exact</span>&nbsp;<span class="op" id="7004284">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004288">t</span><span class="op" id="7004289">.</span><span class="ident" id="7004290">Errorf</span><span class="op" id="7004296">(</span><span class="string" id="7004297">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7004380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004385">f</span><span class="op" id="7004386">,</span>&nbsp;<span class="ident" id="7004388">f2</span><span class="op" id="7004390">,</span>&nbsp;<span class="ident" id="7004392">f2</span><span class="op" id="7004394">,</span>&nbsp;<span class="ident" id="7004396">exact</span><span class="op" id="7004401">,</span>&nbsp;<span class="ident" id="7004403">f</span><span class="op" id="7004404">,</span>&nbsp;<span class="ident" id="7004406">f</span><span class="op" id="7004407">,</span>&nbsp;<span class="builtintype" id="7004409">true</span><span class="op" id="7004413">,</span>&nbsp;<span class="ident" id="7004415">f2</span><span class="op" id="7004417">-</span><span class="ident" id="7004418">f</span><span class="op" id="7004419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004422">}</span><br>
<span class="lineno"></span><span class="op" id="7004424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7004427">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7004500">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7004527">func</span>&nbsp;<span class="ident" id="7004532">checkNonLossyRoundtrip64</span><span class="op" id="7004556">(</span><span class="ident" id="7004557">t</span>&nbsp;<span class="op" id="7004559">*</span><span class="ident" id="7004560">testing</span><span class="op" id="7004567">.</span><span class="ident" id="7004568">T</span><span class="op" id="7004569">,</span>&nbsp;<span class="ident" id="7004571">f</span>&nbsp;<span class="builtintype" id="7004573">float64</span><span class="op" id="7004580">)</span>&nbsp;<span class="op" id="7004582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004585">if</span>&nbsp;<span class="op" id="7004588">!</span><span class="ident" id="7004589">isFinite</span><span class="op" id="7004597">(</span><span class="ident" id="7004598">f</span><span class="op" id="7004599">)</span>&nbsp;<span class="op" id="7004601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004605">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004616">r</span>&nbsp;<span class="op" id="7004618">:=</span>&nbsp;<span class="builtinfunc" id="7004621">new</span><span class="op" id="7004624">(</span><span class="ident" id="7004625">Rat</span><span class="op" id="7004628">)</span><span class="op" id="7004629">.</span><span class="ident" id="7004630">SetFloat64</span><span class="op" id="7004640">(</span><span class="ident" id="7004641">f</span><span class="op" id="7004642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004645">if</span>&nbsp;<span class="ident" id="7004648">r</span>&nbsp;<span class="op" id="7004650">==</span>&nbsp;<span class="builtintype" id="7004653">nil</span>&nbsp;<span class="op" id="7004657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004661">t</span><span class="op" id="7004662">.</span><span class="ident" id="7004663">Errorf</span><span class="op" id="7004669">(</span><span class="string" id="7004670">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7004702">,</span>&nbsp;<span class="ident" id="7004704">f</span><span class="op" id="7004705">,</span>&nbsp;<span class="ident" id="7004707">f</span><span class="op" id="7004708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004712">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004723">f2</span><span class="op" id="7004725">,</span>&nbsp;<span class="ident" id="7004727">exact</span>&nbsp;<span class="op" id="7004733">:=</span>&nbsp;<span class="ident" id="7004736">r</span><span class="op" id="7004737">.</span><span class="ident" id="7004738">Float64</span><span class="op" id="7004745">(</span><span class="op" id="7004746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7004749">if</span>&nbsp;<span class="ident" id="7004752">f</span>&nbsp;<span class="op" id="7004754">!=</span>&nbsp;<span class="ident" id="7004757">f2</span>&nbsp;<span class="op" id="7004760">||</span>&nbsp;<span class="op" id="7004763">!</span><span class="ident" id="7004764">exact</span>&nbsp;<span class="op" id="7004770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004774">t</span><span class="op" id="7004775">.</span><span class="ident" id="7004776">Errorf</span><span class="op" id="7004782">(</span><span class="string" id="7004783">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7004857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004862">f</span><span class="op" id="7004863">,</span>&nbsp;<span class="ident" id="7004865">f2</span><span class="op" id="7004867">,</span>&nbsp;<span class="ident" id="7004869">f2</span><span class="op" id="7004871">,</span>&nbsp;<span class="ident" id="7004873">exact</span><span class="op" id="7004878">,</span>&nbsp;<span class="ident" id="7004880">f</span><span class="op" id="7004881">,</span>&nbsp;<span class="ident" id="7004883">f</span><span class="op" id="7004884">,</span>&nbsp;<span class="builtintype" id="7004886">true</span><span class="op" id="7004890">,</span>&nbsp;<span class="ident" id="7004892">f2</span><span class="op" id="7004894">-</span><span class="ident" id="7004895">f</span><span class="op" id="7004896">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7004899">}</span><br>
<span class="lineno"></span><span class="op" id="7004901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7004904">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7004962">func</span>&nbsp;<span class="ident" id="7004967">delta</span><span class="op" id="7004972">(</span><span class="ident" id="7004973">r</span>&nbsp;<span class="op" id="7004975">*</span><span class="ident" id="7004976">Rat</span><span class="op" id="7004979">,</span>&nbsp;<span class="ident" id="7004981">f</span>&nbsp;<span class="builtintype" id="7004983">float64</span><span class="op" id="7004990">)</span>&nbsp;<span class="op" id="7004992">*</span><span class="ident" id="7004993">Rat</span>&nbsp;<span class="op" id="7004997">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005000">d</span>&nbsp;<span class="op" id="7005002">:=</span>&nbsp;<span class="builtinfunc" id="7005005">new</span><span class="op" id="7005008">(</span><span class="ident" id="7005009">Rat</span><span class="op" id="7005012">)</span><span class="op" id="7005013">.</span><span class="ident" id="7005014">Sub</span><span class="op" id="7005017">(</span><span class="ident" id="7005018">r</span><span class="op" id="7005019">,</span>&nbsp;<span class="builtinfunc" id="7005021">new</span><span class="op" id="7005024">(</span><span class="ident" id="7005025">Rat</span><span class="op" id="7005028">)</span><span class="op" id="7005029">.</span><span class="ident" id="7005030">SetFloat64</span><span class="op" id="7005040">(</span><span class="ident" id="7005041">f</span><span class="op" id="7005042">)</span><span class="op" id="7005043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005046">return</span>&nbsp;<span class="ident" id="7005053">d</span><span class="op" id="7005054">.</span><span class="ident" id="7005055">Abs</span><span class="op" id="7005058">(</span><span class="ident" id="7005059">d</span><span class="op" id="7005060">)</span><br>
<span class="lineno"></span><span class="op" id="7005062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7005065">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7005131">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7005154">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7005182">func</span>&nbsp;<span class="ident" id="7005187">checkIsBestApprox32</span><span class="op" id="7005206">(</span><span class="ident" id="7005207">t</span>&nbsp;<span class="op" id="7005209">*</span><span class="ident" id="7005210">testing</span><span class="op" id="7005217">.</span><span class="ident" id="7005218">T</span><span class="op" id="7005219">,</span>&nbsp;<span class="ident" id="7005221">f</span>&nbsp;<span class="builtintype" id="7005223">float32</span><span class="op" id="7005230">,</span>&nbsp;<span class="ident" id="7005232">r</span>&nbsp;<span class="op" id="7005234">*</span><span class="ident" id="7005235">Rat</span><span class="op" id="7005238">)</span>&nbsp;<span class="builtintype" id="7005240">bool</span>&nbsp;<span class="op" id="7005245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005248">if</span>&nbsp;<span class="ident" id="7005251">math</span><span class="op" id="7005255">.</span><span class="ident" id="7005256">Abs</span><span class="op" id="7005259">(</span><span class="builtintype" id="7005260">float64</span><span class="op" id="7005267">(</span><span class="ident" id="7005268">f</span><span class="op" id="7005269">)</span><span class="op" id="7005270">)</span>&nbsp;<span class="op" id="7005272">&gt;=</span>&nbsp;<span class="ident" id="7005275">math</span><span class="op" id="7005279">.</span><span class="ident" id="7005280">MaxFloat32</span>&nbsp;<span class="op" id="7005291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7005295">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7005366">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005414">return</span>&nbsp;<span class="builtintype" id="7005421">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7005427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7005431">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005498">f0</span>&nbsp;<span class="op" id="7005501">:=</span>&nbsp;<span class="ident" id="7005504">math</span><span class="op" id="7005508">.</span><span class="ident" id="7005509">Nextafter32</span><span class="op" id="7005520">(</span><span class="ident" id="7005521">f</span><span class="op" id="7005522">,</span>&nbsp;<span class="builtintype" id="7005524">float32</span><span class="op" id="7005531">(</span><span class="ident" id="7005532">math</span><span class="op" id="7005536">.</span><span class="ident" id="7005537">Inf</span><span class="op" id="7005540">(</span><span class="op" id="7005541">-</span><span class="num" id="7005542">1</span><span class="op" id="7005543">)</span><span class="op" id="7005544">)</span><span class="op" id="7005545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005548">f1</span>&nbsp;<span class="op" id="7005551">:=</span>&nbsp;<span class="ident" id="7005554">math</span><span class="op" id="7005558">.</span><span class="ident" id="7005559">Nextafter32</span><span class="op" id="7005570">(</span><span class="ident" id="7005571">f</span><span class="op" id="7005572">,</span>&nbsp;<span class="builtintype" id="7005574">float32</span><span class="op" id="7005581">(</span><span class="ident" id="7005582">math</span><span class="op" id="7005586">.</span><span class="ident" id="7005587">Inf</span><span class="op" id="7005590">(</span><span class="op" id="7005591">+</span><span class="num" id="7005592">1</span><span class="op" id="7005593">)</span><span class="op" id="7005594">)</span><span class="op" id="7005595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7005599">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005664">df</span>&nbsp;<span class="op" id="7005667">:=</span>&nbsp;<span class="ident" id="7005670">delta</span><span class="op" id="7005675">(</span><span class="ident" id="7005676">r</span><span class="op" id="7005677">,</span>&nbsp;<span class="builtintype" id="7005679">float64</span><span class="op" id="7005686">(</span><span class="ident" id="7005687">f</span><span class="op" id="7005688">)</span><span class="op" id="7005689">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005692">df0</span>&nbsp;<span class="op" id="7005696">:=</span>&nbsp;<span class="ident" id="7005699">delta</span><span class="op" id="7005704">(</span><span class="ident" id="7005705">r</span><span class="op" id="7005706">,</span>&nbsp;<span class="builtintype" id="7005708">float64</span><span class="op" id="7005715">(</span><span class="ident" id="7005716">f0</span><span class="op" id="7005718">)</span><span class="op" id="7005719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005722">df1</span>&nbsp;<span class="op" id="7005726">:=</span>&nbsp;<span class="ident" id="7005729">delta</span><span class="op" id="7005734">(</span><span class="ident" id="7005735">r</span><span class="op" id="7005736">,</span>&nbsp;<span class="builtintype" id="7005738">float64</span><span class="op" id="7005745">(</span><span class="ident" id="7005746">f1</span><span class="op" id="7005748">)</span><span class="op" id="7005749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005752">if</span>&nbsp;<span class="ident" id="7005755">df</span><span class="op" id="7005757">.</span><span class="ident" id="7005758">Cmp</span><span class="op" id="7005761">(</span><span class="ident" id="7005762">df0</span><span class="op" id="7005765">)</span>&nbsp;<span class="op" id="7005767">&gt;</span>&nbsp;<span class="num" id="7005769">0</span>&nbsp;<span class="op" id="7005771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005775">t</span><span class="op" id="7005776">.</span><span class="ident" id="7005777">Errorf</span><span class="op" id="7005783">(</span><span class="string" id="7005784">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7005853">,</span>&nbsp;<span class="ident" id="7005855">r</span><span class="op" id="7005856">,</span>&nbsp;<span class="ident" id="7005858">f</span><span class="op" id="7005859">,</span>&nbsp;<span class="ident" id="7005861">f</span><span class="op" id="7005862">,</span>&nbsp;<span class="ident" id="7005864">f0</span><span class="op" id="7005866">,</span>&nbsp;<span class="ident" id="7005868">f0</span><span class="op" id="7005870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005874">return</span>&nbsp;<span class="builtintype" id="7005881">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7005888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7005891">if</span>&nbsp;<span class="ident" id="7005894">df</span><span class="op" id="7005896">.</span><span class="ident" id="7005897">Cmp</span><span class="op" id="7005900">(</span><span class="ident" id="7005901">df1</span><span class="op" id="7005904">)</span>&nbsp;<span class="op" id="7005906">&gt;</span>&nbsp;<span class="num" id="7005908">0</span>&nbsp;<span class="op" id="7005910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7005914">t</span><span class="op" id="7005915">.</span><span class="ident" id="7005916">Errorf</span><span class="op" id="7005922">(</span><span class="string" id="7005923">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7005988">,</span>&nbsp;<span class="ident" id="7005990">r</span><span class="op" id="7005991">,</span>&nbsp;<span class="ident" id="7005993">f</span><span class="op" id="7005994">,</span>&nbsp;<span class="ident" id="7005996">f</span><span class="op" id="7005997">,</span>&nbsp;<span class="ident" id="7005999">f1</span><span class="op" id="7006001">,</span>&nbsp;<span class="ident" id="7006003">f1</span><span class="op" id="7006005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006009">return</span>&nbsp;<span class="builtintype" id="7006016">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7006023">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006026">if</span>&nbsp;<span class="ident" id="7006029">df</span><span class="op" id="7006031">.</span><span class="ident" id="7006032">Cmp</span><span class="op" id="7006035">(</span><span class="ident" id="7006036">df0</span><span class="op" id="7006039">)</span>&nbsp;<span class="op" id="7006041">==</span>&nbsp;<span class="num" id="7006044">0</span>&nbsp;<span class="op" id="7006046">&amp;&amp;</span>&nbsp;<span class="op" id="7006049">!</span><span class="ident" id="7006050">isEven32</span><span class="op" id="7006058">(</span><span class="ident" id="7006059">f</span><span class="op" id="7006060">)</span>&nbsp;<span class="op" id="7006062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006066">t</span><span class="op" id="7006067">.</span><span class="ident" id="7006068">Errorf</span><span class="op" id="7006074">(</span><span class="string" id="7006075">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7006152">,</span>&nbsp;<span class="ident" id="7006154">r</span><span class="op" id="7006155">,</span>&nbsp;<span class="ident" id="7006157">f</span><span class="op" id="7006158">,</span>&nbsp;<span class="ident" id="7006160">f</span><span class="op" id="7006161">,</span>&nbsp;<span class="ident" id="7006163">f0</span><span class="op" id="7006165">,</span>&nbsp;<span class="ident" id="7006167">f0</span><span class="op" id="7006169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006173">return</span>&nbsp;<span class="builtintype" id="7006180">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7006187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006190">if</span>&nbsp;<span class="ident" id="7006193">df</span><span class="op" id="7006195">.</span><span class="ident" id="7006196">Cmp</span><span class="op" id="7006199">(</span><span class="ident" id="7006200">df1</span><span class="op" id="7006203">)</span>&nbsp;<span class="op" id="7006205">==</span>&nbsp;<span class="num" id="7006208">0</span>&nbsp;<span class="op" id="7006210">&amp;&amp;</span>&nbsp;<span class="op" id="7006213">!</span><span class="ident" id="7006214">isEven32</span><span class="op" id="7006222">(</span><span class="ident" id="7006223">f</span><span class="op" id="7006224">)</span>&nbsp;<span class="op" id="7006226">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006230">t</span><span class="op" id="7006231">.</span><span class="ident" id="7006232">Errorf</span><span class="op" id="7006238">(</span><span class="string" id="7006239">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7006316">,</span>&nbsp;<span class="ident" id="7006318">r</span><span class="op" id="7006319">,</span>&nbsp;<span class="ident" id="7006321">f</span><span class="op" id="7006322">,</span>&nbsp;<span class="ident" id="7006324">f</span><span class="op" id="7006325">,</span>&nbsp;<span class="ident" id="7006327">f1</span><span class="op" id="7006329">,</span>&nbsp;<span class="ident" id="7006331">f1</span><span class="op" id="7006333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006337">return</span>&nbsp;<span class="builtintype" id="7006344">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7006351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006354">return</span>&nbsp;<span class="builtintype" id="7006361">true</span><br>
<span class="lineno"></span><span class="op" id="7006366">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7006369">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7006435">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7006458">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7006486">func</span>&nbsp;<span class="ident" id="7006491">checkIsBestApprox64</span><span class="op" id="7006510">(</span><span class="ident" id="7006511">t</span>&nbsp;<span class="op" id="7006513">*</span><span class="ident" id="7006514">testing</span><span class="op" id="7006521">.</span><span class="ident" id="7006522">T</span><span class="op" id="7006523">,</span>&nbsp;<span class="ident" id="7006525">f</span>&nbsp;<span class="builtintype" id="7006527">float64</span><span class="op" id="7006534">,</span>&nbsp;<span class="ident" id="7006536">r</span>&nbsp;<span class="op" id="7006538">*</span><span class="ident" id="7006539">Rat</span><span class="op" id="7006542">)</span>&nbsp;<span class="builtintype" id="7006544">bool</span>&nbsp;<span class="op" id="7006549">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006552">if</span>&nbsp;<span class="ident" id="7006555">math</span><span class="op" id="7006559">.</span><span class="ident" id="7006560">Abs</span><span class="op" id="7006563">(</span><span class="ident" id="7006564">f</span><span class="op" id="7006565">)</span>&nbsp;<span class="op" id="7006567">&gt;=</span>&nbsp;<span class="ident" id="7006570">math</span><span class="op" id="7006574">.</span><span class="ident" id="7006575">MaxFloat64</span>&nbsp;<span class="op" id="7006586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7006590">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7006661">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006709">return</span>&nbsp;<span class="builtintype" id="7006716">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7006722">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7006726">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006793">f0</span>&nbsp;<span class="op" id="7006796">:=</span>&nbsp;<span class="ident" id="7006799">math</span><span class="op" id="7006803">.</span><span class="ident" id="7006804">Nextafter</span><span class="op" id="7006813">(</span><span class="ident" id="7006814">f</span><span class="op" id="7006815">,</span>&nbsp;<span class="ident" id="7006817">math</span><span class="op" id="7006821">.</span><span class="ident" id="7006822">Inf</span><span class="op" id="7006825">(</span><span class="op" id="7006826">-</span><span class="num" id="7006827">1</span><span class="op" id="7006828">)</span><span class="op" id="7006829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006832">f1</span>&nbsp;<span class="op" id="7006835">:=</span>&nbsp;<span class="ident" id="7006838">math</span><span class="op" id="7006842">.</span><span class="ident" id="7006843">Nextafter</span><span class="op" id="7006852">(</span><span class="ident" id="7006853">f</span><span class="op" id="7006854">,</span>&nbsp;<span class="ident" id="7006856">math</span><span class="op" id="7006860">.</span><span class="ident" id="7006861">Inf</span><span class="op" id="7006864">(</span><span class="op" id="7006865">+</span><span class="num" id="7006866">1</span><span class="op" id="7006867">)</span><span class="op" id="7006868">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7006872">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006937">df</span>&nbsp;<span class="op" id="7006940">:=</span>&nbsp;<span class="ident" id="7006943">delta</span><span class="op" id="7006948">(</span><span class="ident" id="7006949">r</span><span class="op" id="7006950">,</span>&nbsp;<span class="ident" id="7006952">f</span><span class="op" id="7006953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006956">df0</span>&nbsp;<span class="op" id="7006960">:=</span>&nbsp;<span class="ident" id="7006963">delta</span><span class="op" id="7006968">(</span><span class="ident" id="7006969">r</span><span class="op" id="7006970">,</span>&nbsp;<span class="ident" id="7006972">f0</span><span class="op" id="7006974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7006977">df1</span>&nbsp;<span class="op" id="7006981">:=</span>&nbsp;<span class="ident" id="7006984">delta</span><span class="op" id="7006989">(</span><span class="ident" id="7006990">r</span><span class="op" id="7006991">,</span>&nbsp;<span class="ident" id="7006993">f1</span><span class="op" id="7006995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7006998">if</span>&nbsp;<span class="ident" id="7007001">df</span><span class="op" id="7007003">.</span><span class="ident" id="7007004">Cmp</span><span class="op" id="7007007">(</span><span class="ident" id="7007008">df0</span><span class="op" id="7007011">)</span>&nbsp;<span class="op" id="7007013">&gt;</span>&nbsp;<span class="num" id="7007015">0</span>&nbsp;<span class="op" id="7007017">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007021">t</span><span class="op" id="7007022">.</span><span class="ident" id="7007023">Errorf</span><span class="op" id="7007029">(</span><span class="string" id="7007030">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7007099">,</span>&nbsp;<span class="ident" id="7007101">r</span><span class="op" id="7007102">,</span>&nbsp;<span class="ident" id="7007104">f</span><span class="op" id="7007105">,</span>&nbsp;<span class="ident" id="7007107">f</span><span class="op" id="7007108">,</span>&nbsp;<span class="ident" id="7007110">f0</span><span class="op" id="7007112">,</span>&nbsp;<span class="ident" id="7007114">f0</span><span class="op" id="7007116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007120">return</span>&nbsp;<span class="builtintype" id="7007127">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007137">if</span>&nbsp;<span class="ident" id="7007140">df</span><span class="op" id="7007142">.</span><span class="ident" id="7007143">Cmp</span><span class="op" id="7007146">(</span><span class="ident" id="7007147">df1</span><span class="op" id="7007150">)</span>&nbsp;<span class="op" id="7007152">&gt;</span>&nbsp;<span class="num" id="7007154">0</span>&nbsp;<span class="op" id="7007156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007160">t</span><span class="op" id="7007161">.</span><span class="ident" id="7007162">Errorf</span><span class="op" id="7007168">(</span><span class="string" id="7007169">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7007234">,</span>&nbsp;<span class="ident" id="7007236">r</span><span class="op" id="7007237">,</span>&nbsp;<span class="ident" id="7007239">f</span><span class="op" id="7007240">,</span>&nbsp;<span class="ident" id="7007242">f</span><span class="op" id="7007243">,</span>&nbsp;<span class="ident" id="7007245">f1</span><span class="op" id="7007247">,</span>&nbsp;<span class="ident" id="7007249">f1</span><span class="op" id="7007251">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007255">return</span>&nbsp;<span class="builtintype" id="7007262">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007272">if</span>&nbsp;<span class="ident" id="7007275">df</span><span class="op" id="7007277">.</span><span class="ident" id="7007278">Cmp</span><span class="op" id="7007281">(</span><span class="ident" id="7007282">df0</span><span class="op" id="7007285">)</span>&nbsp;<span class="op" id="7007287">==</span>&nbsp;<span class="num" id="7007290">0</span>&nbsp;<span class="op" id="7007292">&amp;&amp;</span>&nbsp;<span class="op" id="7007295">!</span><span class="ident" id="7007296">isEven64</span><span class="op" id="7007304">(</span><span class="ident" id="7007305">f</span><span class="op" id="7007306">)</span>&nbsp;<span class="op" id="7007308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007312">t</span><span class="op" id="7007313">.</span><span class="ident" id="7007314">Errorf</span><span class="op" id="7007320">(</span><span class="string" id="7007321">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7007398">,</span>&nbsp;<span class="ident" id="7007400">r</span><span class="op" id="7007401">,</span>&nbsp;<span class="ident" id="7007403">f</span><span class="op" id="7007404">,</span>&nbsp;<span class="ident" id="7007406">f</span><span class="op" id="7007407">,</span>&nbsp;<span class="ident" id="7007409">f0</span><span class="op" id="7007411">,</span>&nbsp;<span class="ident" id="7007413">f0</span><span class="op" id="7007415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007419">return</span>&nbsp;<span class="builtintype" id="7007426">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007436">if</span>&nbsp;<span class="ident" id="7007439">df</span><span class="op" id="7007441">.</span><span class="ident" id="7007442">Cmp</span><span class="op" id="7007445">(</span><span class="ident" id="7007446">df1</span><span class="op" id="7007449">)</span>&nbsp;<span class="op" id="7007451">==</span>&nbsp;<span class="num" id="7007454">0</span>&nbsp;<span class="op" id="7007456">&amp;&amp;</span>&nbsp;<span class="op" id="7007459">!</span><span class="ident" id="7007460">isEven64</span><span class="op" id="7007468">(</span><span class="ident" id="7007469">f</span><span class="op" id="7007470">)</span>&nbsp;<span class="op" id="7007472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007476">t</span><span class="op" id="7007477">.</span><span class="ident" id="7007478">Errorf</span><span class="op" id="7007484">(</span><span class="string" id="7007485">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7007562">,</span>&nbsp;<span class="ident" id="7007564">r</span><span class="op" id="7007565">,</span>&nbsp;<span class="ident" id="7007567">f</span><span class="op" id="7007568">,</span>&nbsp;<span class="ident" id="7007570">f</span><span class="op" id="7007571">,</span>&nbsp;<span class="ident" id="7007573">f1</span><span class="op" id="7007575">,</span>&nbsp;<span class="ident" id="7007577">f1</span><span class="op" id="7007579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007583">return</span>&nbsp;<span class="builtintype" id="7007590">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007597">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007600">return</span>&nbsp;<span class="builtintype" id="7007607">true</span><br>
<span class="lineno"></span><span class="op" id="7007612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007615">func</span>&nbsp;<span class="ident" id="7007620">isEven32</span><span class="op" id="7007628">(</span><span class="ident" id="7007629">f</span>&nbsp;<span class="builtintype" id="7007631">float32</span><span class="op" id="7007638">)</span>&nbsp;<span class="builtintype" id="7007640">bool</span>&nbsp;<span class="op" id="7007645">{</span>&nbsp;<span class="keyword" id="7007647">return</span>&nbsp;<span class="ident" id="7007654">math</span><span class="op" id="7007658">.</span><span class="ident" id="7007659">Float32bits</span><span class="op" id="7007670">(</span><span class="ident" id="7007671">f</span><span class="op" id="7007672">)</span><span class="op" id="7007673">&amp;</span><span class="num" id="7007674">1</span>&nbsp;<span class="op" id="7007676">==</span>&nbsp;<span class="num" id="7007679">0</span>&nbsp;<span class="op" id="7007681">}</span><br>
<span class="lineno"></span><span class="keyword" id="7007683">func</span>&nbsp;<span class="ident" id="7007688">isEven64</span><span class="op" id="7007696">(</span><span class="ident" id="7007697">f</span>&nbsp;<span class="builtintype" id="7007699">float64</span><span class="op" id="7007706">)</span>&nbsp;<span class="builtintype" id="7007708">bool</span>&nbsp;<span class="op" id="7007713">{</span>&nbsp;<span class="keyword" id="7007715">return</span>&nbsp;<span class="ident" id="7007722">math</span><span class="op" id="7007726">.</span><span class="ident" id="7007727">Float64bits</span><span class="op" id="7007738">(</span><span class="ident" id="7007739">f</span><span class="op" id="7007740">)</span><span class="op" id="7007741">&amp;</span><span class="num" id="7007742">1</span>&nbsp;<span class="op" id="7007744">==</span>&nbsp;<span class="num" id="7007747">0</span>&nbsp;<span class="op" id="7007749">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7007752">func</span>&nbsp;<span class="ident" id="7007757">TestIsFinite</span><span class="op" id="7007769">(</span><span class="ident" id="7007770">t</span>&nbsp;<span class="op" id="7007772">*</span><span class="ident" id="7007773">testing</span><span class="op" id="7007780">.</span><span class="ident" id="7007781">T</span><span class="op" id="7007782">)</span>&nbsp;<span class="op" id="7007784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007787">finites</span>&nbsp;<span class="op" id="7007795">:=</span>&nbsp;<span class="op" id="7007798">[</span><span class="op" id="7007799">]</span><span class="builtintype" id="7007800">float64</span><span class="op" id="7007807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7007811">1.0</span>&nbsp;<span class="op" id="7007815">/</span>&nbsp;<span class="num" id="7007817">3</span><span class="op" id="7007818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7007822">4891559871276714924261e+222</span><span class="op" id="7007849">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007853">math</span><span class="op" id="7007857">.</span><span class="ident" id="7007858">MaxFloat64</span><span class="op" id="7007868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7007872">math</span><span class="op" id="7007876">.</span><span class="ident" id="7007877">SmallestNonzeroFloat64</span><span class="op" id="7007899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007903">-</span><span class="ident" id="7007904">math</span><span class="op" id="7007908">.</span><span class="ident" id="7007909">MaxFloat64</span><span class="op" id="7007919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007923">-</span><span class="ident" id="7007924">math</span><span class="op" id="7007928">.</span><span class="ident" id="7007929">SmallestNonzeroFloat64</span><span class="op" id="7007951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7007954">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007957">for</span>&nbsp;<span class="ident" id="7007961">_</span><span class="op" id="7007962">,</span>&nbsp;<span class="ident" id="7007964">f</span>&nbsp;<span class="op" id="7007966">:=</span>&nbsp;<span class="keyword" id="7007969">range</span>&nbsp;<span class="ident" id="7007975">finites</span>&nbsp;<span class="op" id="7007983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7007987">if</span>&nbsp;<span class="op" id="7007990">!</span><span class="ident" id="7007991">isFinite</span><span class="op" id="7007999">(</span><span class="ident" id="7008000">f</span><span class="op" id="7008001">)</span>&nbsp;<span class="op" id="7008003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008008">t</span><span class="op" id="7008009">.</span><span class="ident" id="7008010">Errorf</span><span class="op" id="7008016">(</span><span class="string" id="7008017">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7008037">,</span>&nbsp;<span class="ident" id="7008039">f</span><span class="op" id="7008040">,</span>&nbsp;<span class="ident" id="7008042">f</span><span class="op" id="7008043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7008047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7008050">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008053">nonfinites</span>&nbsp;<span class="op" id="7008064">:=</span>&nbsp;<span class="op" id="7008067">[</span><span class="op" id="7008068">]</span><span class="builtintype" id="7008069">float64</span><span class="op" id="7008076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008080">math</span><span class="op" id="7008084">.</span><span class="ident" id="7008085">NaN</span><span class="op" id="7008088">(</span><span class="op" id="7008089">)</span><span class="op" id="7008090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008094">math</span><span class="op" id="7008098">.</span><span class="ident" id="7008099">Inf</span><span class="op" id="7008102">(</span><span class="op" id="7008103">-</span><span class="num" id="7008104">1</span><span class="op" id="7008105">)</span><span class="op" id="7008106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008110">math</span><span class="op" id="7008114">.</span><span class="ident" id="7008115">Inf</span><span class="op" id="7008118">(</span><span class="op" id="7008119">+</span><span class="num" id="7008120">1</span><span class="op" id="7008121">)</span><span class="op" id="7008122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7008125">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7008128">for</span>&nbsp;<span class="ident" id="7008132">_</span><span class="op" id="7008133">,</span>&nbsp;<span class="ident" id="7008135">f</span>&nbsp;<span class="op" id="7008137">:=</span>&nbsp;<span class="keyword" id="7008140">range</span>&nbsp;<span class="ident" id="7008146">nonfinites</span>&nbsp;<span class="op" id="7008157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7008161">if</span>&nbsp;<span class="ident" id="7008164">isFinite</span><span class="op" id="7008172">(</span><span class="ident" id="7008173">f</span><span class="op" id="7008174">)</span>&nbsp;<span class="op" id="7008176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7008181">t</span><span class="op" id="7008182">.</span><span class="ident" id="7008183">Errorf</span><span class="op" id="7008189">(</span><span class="string" id="7008190">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7008210">,</span>&nbsp;<span class="ident" id="7008212">f</span><span class="op" id="7008213">,</span>&nbsp;<span class="ident" id="7008215">f</span><span class="op" id="7008216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7008220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7008223">}</span><br>
<span class="lineno">1160</span><span class="op" id="7008225">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
