<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html" class="current">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8201995">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8202051">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8202105">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8202156">package</span>&nbsp;<span class="ident" id="8202164">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202171">import</span>&nbsp;<span class="op" id="8202178">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202181">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202187">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202198">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8202208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202211">const</span>&nbsp;<span class="ident" id="8202217">quote</span>&nbsp;<span class="op" id="8202223">=</span>&nbsp;<span class="string" id="8202225">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8202230">type</span>&nbsp;<span class="ident" id="8202235">readTest</span>&nbsp;<span class="keyword" id="8202244">struct</span>&nbsp;<span class="op" id="8202251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8202254">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202313">in</span>&nbsp;&nbsp;<span class="builtintype" id="8202317">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202325">err</span>&nbsp;<span class="builtintype" id="8202329">string</span><br>
<span class="lineno"></span><span class="op" id="8202336">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8202339">var</span>&nbsp;<span class="ident" id="8202343">readImportsTests</span>&nbsp;<span class="op" id="8202360">=</span>&nbsp;<span class="op" id="8202362">[</span><span class="op" id="8202363">]</span><span class="ident" id="8202364">readTest</span><span class="op" id="8202372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202379">`package&nbsp;p`</span><span class="op" id="8202390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202394">&#34;&#34;</span><span class="op" id="8202396">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202399">}</span><span class="op" id="8202400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202407">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8202430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202434">&#34;&#34;</span><span class="op" id="8202436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202439">}</span><span class="op" id="8202440">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202447">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8202472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202476">&#34;&#34;</span><span class="op" id="8202478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202481">}</span><span class="op" id="8202482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202485">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202489">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="8202525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202529">&#34;&#34;</span><span class="op" id="8202531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202534">}</span><span class="op" id="8202535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202542">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="8202703">+</span>&nbsp;<span class="ident" id="8202705">quote</span>&nbsp;<span class="op" id="8202711">+</span>&nbsp;<span class="string" id="8202713">`x`</span>&nbsp;<span class="op" id="8202717">+</span>&nbsp;<span class="ident" id="8202719">quote</span>&nbsp;<span class="op" id="8202725">+</span>&nbsp;<span class="string" id="8202727">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="8202748">+</span>&nbsp;<span class="ident" id="8202750">quote</span>&nbsp;<span class="op" id="8202756">+</span>&nbsp;<span class="string" id="8202758">`x`</span>&nbsp;<span class="op" id="8202762">+</span>&nbsp;<span class="ident" id="8202764">quote</span>&nbsp;<span class="op" id="8202770">+</span>&nbsp;<span class="string" id="8202772">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="8202781">+</span>&nbsp;<span class="ident" id="8202783">quote</span>&nbsp;<span class="op" id="8202789">+</span>&nbsp;<span class="string" id="8202791">`x`</span>&nbsp;<span class="op" id="8202795">+</span>&nbsp;<span class="ident" id="8202797">quote</span>&nbsp;<span class="op" id="8202803">+</span>&nbsp;<span class="string" id="8202805">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="8202915">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202919">&#34;&#34;</span><span class="op" id="8202921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202924">}</span><span class="op" id="8202925">,</span><br>
<span class="lineno"></span><span class="op" id="8202927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8202930">var</span>&nbsp;<span class="ident" id="8202934">readCommentsTests</span>&nbsp;<span class="op" id="8202952">=</span>&nbsp;<span class="op" id="8202954">[</span><span class="op" id="8202955">]</span><span class="ident" id="8202956">readTest</span><span class="op" id="8202964">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202971">`ℙpackage&nbsp;p`</span><span class="op" id="8202985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202989">&#34;&#34;</span><span class="op" id="8202991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202994">}</span><span class="op" id="8202995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202998">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203002">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="8203028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203032">&#34;&#34;</span><span class="op" id="8203034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203037">}</span><span class="op" id="8203038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203045">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="8203073">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203077">&#34;&#34;</span><span class="op" id="8203079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203082">}</span><span class="op" id="8203083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203090">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="8203177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203181">&#34;&#34;</span><span class="op" id="8203183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203186">}</span><span class="op" id="8203187">,</span><br>
<span class="lineno">95</span><span class="op" id="8203189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8203192">func</span>&nbsp;<span class="ident" id="8203197">testRead</span><span class="op" id="8203205">(</span><span class="ident" id="8203206">t</span>&nbsp;<span class="op" id="8203208">*</span><span class="ident" id="8203209">testing</span><span class="op" id="8203216">.</span><span class="ident" id="8203217">T</span><span class="op" id="8203218">,</span>&nbsp;<span class="ident" id="8203220">tests</span>&nbsp;<span class="op" id="8203226">[</span><span class="op" id="8203227">]</span><span class="ident" id="8203228">readTest</span><span class="op" id="8203236">,</span>&nbsp;<span class="ident" id="8203238">read</span>&nbsp;<span class="keyword" id="8203243">func</span><span class="op" id="8203247">(</span><span class="ident" id="8203248">io</span><span class="op" id="8203250">.</span><span class="ident" id="8203251">Reader</span><span class="op" id="8203257">)</span>&nbsp;<span class="op" id="8203259">(</span><span class="op" id="8203260">[</span><span class="op" id="8203261">]</span><span class="builtintype" id="8203262">byte</span><span class="op" id="8203266">,</span>&nbsp;<span class="builtintype" id="8203268">error</span><span class="op" id="8203273">)</span><span class="op" id="8203274">)</span>&nbsp;<span class="op" id="8203276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203279">for</span>&nbsp;<span class="ident" id="8203283">i</span><span class="op" id="8203284">,</span>&nbsp;<span class="ident" id="8203286">tt</span>&nbsp;<span class="op" id="8203289">:=</span>&nbsp;<span class="keyword" id="8203292">range</span>&nbsp;<span class="ident" id="8203298">tests</span>&nbsp;<span class="op" id="8203304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203308">var</span>&nbsp;<span class="ident" id="8203312">in</span><span class="op" id="8203314">,</span>&nbsp;<span class="ident" id="8203316">testOut</span>&nbsp;<span class="builtintype" id="8203324">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203333">j</span>&nbsp;<span class="op" id="8203335">:=</span>&nbsp;<span class="ident" id="8203338">strings</span><span class="op" id="8203345">.</span><span class="ident" id="8203346">Index</span><span class="op" id="8203351">(</span><span class="ident" id="8203352">tt</span><span class="op" id="8203354">.</span><span class="ident" id="8203355">in</span><span class="op" id="8203357">,</span>&nbsp;<span class="string" id="8203359">&#34;ℙ&#34;</span><span class="op" id="8203364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203368">if</span>&nbsp;<span class="ident" id="8203371">j</span>&nbsp;<span class="op" id="8203373">&lt;</span>&nbsp;<span class="num" id="8203375">0</span>&nbsp;<span class="op" id="8203377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203382">in</span>&nbsp;<span class="op" id="8203385">=</span>&nbsp;<span class="ident" id="8203387">tt</span><span class="op" id="8203389">.</span><span class="ident" id="8203390">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203396">testOut</span>&nbsp;<span class="op" id="8203404">=</span>&nbsp;<span class="ident" id="8203406">tt</span><span class="op" id="8203408">.</span><span class="ident" id="8203409">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203414">}</span>&nbsp;<span class="keyword" id="8203416">else</span>&nbsp;<span class="op" id="8203421">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203426">in</span>&nbsp;<span class="op" id="8203429">=</span>&nbsp;<span class="ident" id="8203431">tt</span><span class="op" id="8203433">.</span><span class="ident" id="8203434">in</span><span class="op" id="8203436">[</span><span class="op" id="8203437">:</span><span class="ident" id="8203438">j</span><span class="op" id="8203439">]</span>&nbsp;<span class="op" id="8203441">+</span>&nbsp;<span class="ident" id="8203443">tt</span><span class="op" id="8203445">.</span><span class="ident" id="8203446">in</span><span class="op" id="8203448">[</span><span class="ident" id="8203449">j</span><span class="op" id="8203450">+</span><span class="builtinfunc" id="8203451">len</span><span class="op" id="8203454">(</span><span class="string" id="8203455">&#34;ℙ&#34;</span><span class="op" id="8203460">)</span><span class="op" id="8203461">:</span><span class="op" id="8203462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203467">testOut</span>&nbsp;<span class="op" id="8203475">=</span>&nbsp;<span class="ident" id="8203477">tt</span><span class="op" id="8203479">.</span><span class="ident" id="8203480">in</span><span class="op" id="8203482">[</span><span class="op" id="8203483">:</span><span class="ident" id="8203484">j</span><span class="op" id="8203485">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203493">r</span>&nbsp;<span class="op" id="8203495">:=</span>&nbsp;<span class="ident" id="8203498">strings</span><span class="op" id="8203505">.</span><span class="ident" id="8203506">NewReader</span><span class="op" id="8203515">(</span><span class="ident" id="8203516">in</span><span class="op" id="8203518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203522">buf</span><span class="op" id="8203525">,</span>&nbsp;<span class="ident" id="8203527">err</span>&nbsp;<span class="op" id="8203531">:=</span>&nbsp;<span class="ident" id="8203534">read</span><span class="op" id="8203538">(</span><span class="ident" id="8203539">r</span><span class="op" id="8203540">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203544">if</span>&nbsp;<span class="ident" id="8203547">err</span>&nbsp;<span class="op" id="8203551">!=</span>&nbsp;<span class="ident" id="8203554">nil</span>&nbsp;<span class="op" id="8203558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203563">if</span>&nbsp;<span class="ident" id="8203566">tt</span><span class="op" id="8203568">.</span><span class="ident" id="8203569">err</span>&nbsp;<span class="op" id="8203573">==</span>&nbsp;<span class="string" id="8203576">&#34;&#34;</span>&nbsp;<span class="op" id="8203579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203585">t</span><span class="op" id="8203586">.</span><span class="ident" id="8203587">Errorf</span><span class="op" id="8203593">(</span><span class="string" id="8203594">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="8203630">,</span>&nbsp;<span class="ident" id="8203632">i</span><span class="op" id="8203633">,</span>&nbsp;<span class="ident" id="8203635">err</span><span class="op" id="8203638">,</span>&nbsp;<span class="builtintype" id="8203640">string</span><span class="op" id="8203646">(</span><span class="ident" id="8203647">buf</span><span class="op" id="8203650">)</span><span class="op" id="8203651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203657">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203669">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203674">if</span>&nbsp;<span class="op" id="8203677">!</span><span class="ident" id="8203678">strings</span><span class="op" id="8203685">.</span><span class="ident" id="8203686">Contains</span><span class="op" id="8203694">(</span><span class="ident" id="8203695">err</span><span class="op" id="8203698">.</span><span class="ident" id="8203699">Error</span><span class="op" id="8203704">(</span><span class="op" id="8203705">)</span><span class="op" id="8203706">,</span>&nbsp;<span class="ident" id="8203708">tt</span><span class="op" id="8203710">.</span><span class="ident" id="8203711">err</span><span class="op" id="8203714">)</span>&nbsp;<span class="op" id="8203716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203722">t</span><span class="op" id="8203723">.</span><span class="ident" id="8203724">Errorf</span><span class="op" id="8203730">(</span><span class="string" id="8203731">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8203757">,</span>&nbsp;<span class="ident" id="8203759">i</span><span class="op" id="8203760">,</span>&nbsp;<span class="ident" id="8203762">err</span><span class="op" id="8203765">,</span>&nbsp;<span class="ident" id="8203767">tt</span><span class="op" id="8203769">.</span><span class="ident" id="8203770">err</span><span class="op" id="8203773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203779">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203796">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203811">if</span>&nbsp;<span class="ident" id="8203814">err</span>&nbsp;<span class="op" id="8203818">==</span>&nbsp;<span class="ident" id="8203821">nil</span>&nbsp;<span class="op" id="8203825">&amp;&amp;</span>&nbsp;<span class="ident" id="8203828">tt</span><span class="op" id="8203830">.</span><span class="ident" id="8203831">err</span>&nbsp;<span class="op" id="8203835">!=</span>&nbsp;<span class="string" id="8203838">&#34;&#34;</span>&nbsp;<span class="op" id="8203841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203846">t</span><span class="op" id="8203847">.</span><span class="ident" id="8203848">Errorf</span><span class="op" id="8203854">(</span><span class="string" id="8203855">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8203882">,</span>&nbsp;<span class="ident" id="8203884">i</span><span class="op" id="8203885">,</span>&nbsp;<span class="ident" id="8203887">tt</span><span class="op" id="8203889">.</span><span class="ident" id="8203890">err</span><span class="op" id="8203893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203898">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203909">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203914">out</span>&nbsp;<span class="op" id="8203918">:=</span>&nbsp;<span class="builtintype" id="8203921">string</span><span class="op" id="8203927">(</span><span class="ident" id="8203928">buf</span><span class="op" id="8203931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8203935">if</span>&nbsp;<span class="ident" id="8203938">out</span>&nbsp;<span class="op" id="8203942">!=</span>&nbsp;<span class="ident" id="8203945">testOut</span>&nbsp;<span class="op" id="8203953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203958">t</span><span class="op" id="8203959">.</span><span class="ident" id="8203960">Errorf</span><span class="op" id="8203966">(</span><span class="string" id="8203967">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="8204007">,</span>&nbsp;<span class="ident" id="8204009">i</span><span class="op" id="8204010">,</span>&nbsp;<span class="ident" id="8204012">out</span><span class="op" id="8204015">,</span>&nbsp;<span class="ident" id="8204017">testOut</span><span class="op" id="8204024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204028">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204031">}</span><br>
<span class="lineno"></span><span class="op" id="8204033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8204036">func</span>&nbsp;<span class="ident" id="8204041">TestReadImports</span><span class="op" id="8204056">(</span><span class="ident" id="8204057">t</span>&nbsp;<span class="op" id="8204059">*</span><span class="ident" id="8204060">testing</span><span class="op" id="8204067">.</span><span class="ident" id="8204068">T</span><span class="op" id="8204069">)</span>&nbsp;<span class="op" id="8204071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204074">testRead</span><span class="op" id="8204082">(</span><span class="ident" id="8204083">t</span><span class="op" id="8204084">,</span>&nbsp;<span class="ident" id="8204086">readImportsTests</span><span class="op" id="8204102">,</span>&nbsp;<span class="keyword" id="8204104">func</span><span class="op" id="8204108">(</span><span class="ident" id="8204109">r</span>&nbsp;<span class="ident" id="8204111">io</span><span class="op" id="8204113">.</span><span class="ident" id="8204114">Reader</span><span class="op" id="8204120">)</span>&nbsp;<span class="op" id="8204122">(</span><span class="op" id="8204123">[</span><span class="op" id="8204124">]</span><span class="builtintype" id="8204125">byte</span><span class="op" id="8204129">,</span>&nbsp;<span class="builtintype" id="8204131">error</span><span class="op" id="8204136">)</span>&nbsp;<span class="op" id="8204138">{</span>&nbsp;<span class="keyword" id="8204140">return</span>&nbsp;<span class="ident" id="8204147">readImports</span><span class="op" id="8204158">(</span><span class="ident" id="8204159">r</span><span class="op" id="8204160">,</span>&nbsp;<span class="builtintype" id="8204162">true</span><span class="op" id="8204166">)</span>&nbsp;<span class="op" id="8204168">}</span><span class="op" id="8204169">)</span><br>
<span class="lineno">135</span><span class="op" id="8204171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8204174">func</span>&nbsp;<span class="ident" id="8204179">TestReadComments</span><span class="op" id="8204195">(</span><span class="ident" id="8204196">t</span>&nbsp;<span class="op" id="8204198">*</span><span class="ident" id="8204199">testing</span><span class="op" id="8204206">.</span><span class="ident" id="8204207">T</span><span class="op" id="8204208">)</span>&nbsp;<span class="op" id="8204210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204213">testRead</span><span class="op" id="8204221">(</span><span class="ident" id="8204222">t</span><span class="op" id="8204223">,</span>&nbsp;<span class="ident" id="8204225">readCommentsTests</span><span class="op" id="8204242">,</span>&nbsp;<span class="ident" id="8204244">readComments</span><span class="op" id="8204256">)</span><br>
<span class="lineno"></span><span class="op" id="8204258">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8204261">var</span>&nbsp;<span class="ident" id="8204265">readFailuresTests</span>&nbsp;<span class="op" id="8204283">=</span>&nbsp;<span class="op" id="8204285">[</span><span class="op" id="8204286">]</span><span class="ident" id="8204287">readTest</span><span class="op" id="8204295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204302">`package`</span><span class="op" id="8204311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204315">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204329">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204332">}</span><span class="op" id="8204333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204340">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="8204374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204378">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="8204403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204406">}</span><span class="op" id="8204407">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204414">`package&nbsp;p;&nbsp;import`</span><span class="op" id="8204433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204437">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204454">}</span><span class="op" id="8204455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204458">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204462">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="8204483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204487">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204504">}</span><span class="op" id="8204505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204512">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="8204538">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204542">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204559">}</span><span class="op" id="8204560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204567">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="8204589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204593">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204607">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204610">}</span><span class="op" id="8204611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204618">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="8204639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204643">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204660">}</span><span class="op" id="8204661">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204668">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="8204691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204695">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204712">}</span><span class="op" id="8204713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204716">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204720">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="8204744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204748">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204765">}</span><span class="op" id="8204766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204773">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="8204794">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204798">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204815">}</span><span class="op" id="8204816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204823">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="8204846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204850">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204864">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204867">}</span><span class="op" id="8204868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204875">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="8204899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204903">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204920">}</span><span class="op" id="8204921">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204928">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="8204949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204953">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8204967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204970">}</span><span class="op" id="8204971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204974">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204978">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="8205000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205004">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8205018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205021">}</span><span class="op" id="8205022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205029">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="8205052">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205056">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8205070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205073">}</span><span class="op" id="8205074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205081">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="8205105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205109">&#34;syntax&nbsp;error&#34;</span><span class="op" id="8205123">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205126">}</span><span class="op" id="8205127">,</span><br>
<span class="lineno"></span><span class="op" id="8205129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8205132">func</span>&nbsp;<span class="ident" id="8205137">TestReadFailures</span><span class="op" id="8205153">(</span><span class="ident" id="8205154">t</span>&nbsp;<span class="op" id="8205156">*</span><span class="ident" id="8205157">testing</span><span class="op" id="8205164">.</span><span class="ident" id="8205165">T</span><span class="op" id="8205166">)</span>&nbsp;<span class="op" id="8205168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205171">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205228">testRead</span><span class="op" id="8205236">(</span><span class="ident" id="8205237">t</span><span class="op" id="8205238">,</span>&nbsp;<span class="ident" id="8205240">readFailuresTests</span><span class="op" id="8205257">,</span>&nbsp;<span class="keyword" id="8205259">func</span><span class="op" id="8205263">(</span><span class="ident" id="8205264">r</span>&nbsp;<span class="ident" id="8205266">io</span><span class="op" id="8205268">.</span><span class="ident" id="8205269">Reader</span><span class="op" id="8205275">)</span>&nbsp;<span class="op" id="8205277">(</span><span class="op" id="8205278">[</span><span class="op" id="8205279">]</span><span class="builtintype" id="8205280">byte</span><span class="op" id="8205284">,</span>&nbsp;<span class="builtintype" id="8205286">error</span><span class="op" id="8205291">)</span>&nbsp;<span class="op" id="8205293">{</span>&nbsp;<span class="keyword" id="8205295">return</span>&nbsp;<span class="ident" id="8205302">readImports</span><span class="op" id="8205313">(</span><span class="ident" id="8205314">r</span><span class="op" id="8205315">,</span>&nbsp;<span class="builtintype" id="8205317">true</span><span class="op" id="8205321">)</span>&nbsp;<span class="op" id="8205323">}</span><span class="op" id="8205324">)</span><br>
<span class="lineno"></span><span class="op" id="8205326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8205329">func</span>&nbsp;<span class="ident" id="8205334">TestReadFailuresIgnored</span><span class="op" id="8205357">(</span><span class="ident" id="8205358">t</span>&nbsp;<span class="op" id="8205360">*</span><span class="ident" id="8205361">testing</span><span class="op" id="8205368">.</span><span class="ident" id="8205369">T</span><span class="op" id="8205370">)</span>&nbsp;<span class="op" id="8205372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205375">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205444">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205504">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205551">tests</span>&nbsp;<span class="op" id="8205557">:=</span>&nbsp;<span class="builtinfunc" id="8205560">make</span><span class="op" id="8205564">(</span><span class="op" id="8205565">[</span><span class="op" id="8205566">]</span><span class="ident" id="8205567">readTest</span><span class="op" id="8205575">,</span>&nbsp;<span class="builtinfunc" id="8205577">len</span><span class="op" id="8205580">(</span><span class="ident" id="8205581">readFailuresTests</span><span class="op" id="8205598">)</span><span class="op" id="8205599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8205602">copy</span><span class="op" id="8205606">(</span><span class="ident" id="8205607">tests</span><span class="op" id="8205612">,</span>&nbsp;<span class="ident" id="8205614">readFailuresTests</span><span class="op" id="8205631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8205634">for</span>&nbsp;<span class="ident" id="8205638">i</span>&nbsp;<span class="op" id="8205640">:=</span>&nbsp;<span class="keyword" id="8205643">range</span>&nbsp;<span class="ident" id="8205649">tests</span>&nbsp;<span class="op" id="8205655">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205659">tt</span>&nbsp;<span class="op" id="8205662">:=</span>&nbsp;<span class="op" id="8205665">&amp;</span><span class="ident" id="8205666">tests</span><span class="op" id="8205671">[</span><span class="ident" id="8205672">i</span><span class="op" id="8205673">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8205677">if</span>&nbsp;<span class="op" id="8205680">!</span><span class="ident" id="8205681">strings</span><span class="op" id="8205688">.</span><span class="ident" id="8205689">Contains</span><span class="op" id="8205697">(</span><span class="ident" id="8205698">tt</span><span class="op" id="8205700">.</span><span class="ident" id="8205701">err</span><span class="op" id="8205704">,</span>&nbsp;<span class="string" id="8205706">&#34;NUL&#34;</span><span class="op" id="8205711">)</span>&nbsp;<span class="op" id="8205713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205718">tt</span><span class="op" id="8205720">.</span><span class="ident" id="8205721">err</span>&nbsp;<span class="op" id="8205725">=</span>&nbsp;<span class="string" id="8205727">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205735">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205738">testRead</span><span class="op" id="8205746">(</span><span class="ident" id="8205747">t</span><span class="op" id="8205748">,</span>&nbsp;<span class="ident" id="8205750">tests</span><span class="op" id="8205755">,</span>&nbsp;<span class="keyword" id="8205757">func</span><span class="op" id="8205761">(</span><span class="ident" id="8205762">r</span>&nbsp;<span class="ident" id="8205764">io</span><span class="op" id="8205766">.</span><span class="ident" id="8205767">Reader</span><span class="op" id="8205773">)</span>&nbsp;<span class="op" id="8205775">(</span><span class="op" id="8205776">[</span><span class="op" id="8205777">]</span><span class="builtintype" id="8205778">byte</span><span class="op" id="8205782">,</span>&nbsp;<span class="builtintype" id="8205784">error</span><span class="op" id="8205789">)</span>&nbsp;<span class="op" id="8205791">{</span>&nbsp;<span class="keyword" id="8205793">return</span>&nbsp;<span class="ident" id="8205800">readImports</span><span class="op" id="8205811">(</span><span class="ident" id="8205812">r</span><span class="op" id="8205813">,</span>&nbsp;<span class="builtintype" id="8205815">false</span><span class="op" id="8205820">)</span>&nbsp;<span class="op" id="8205822">}</span><span class="op" id="8205823">)</span><br>
<span class="lineno"></span><span class="op" id="8205825">}</span>
</div>
</body>
</html>
