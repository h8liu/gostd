<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4865467">package</span>&nbsp;<span class="ident" id="4865475">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4865482">//&nbsp;InstJmp&nbsp;executes&nbsp;jump&nbsp;instruction</span><br>
<span class="lineno"></span><span class="keyword" id="4865519">type</span>&nbsp;<span class="ident" id="4865524">instJmp</span>&nbsp;<span class="keyword" id="4865532">struct</span><span class="op" id="4865538">{</span><span class="op" id="4865539">}</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="4865542">//&nbsp;I&nbsp;executes&nbsp;the&nbsp;jump&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="4865578">//&nbsp;Might&nbsp;return&nbsp;invalid&nbsp;instruction&nbsp;exception.</span><br>
<span class="lineno"></span><span class="keyword" id="4865625">func</span>&nbsp;<span class="op" id="4865630">(</span><span class="ident" id="4865631">i</span>&nbsp;<span class="op" id="4865633">*</span><span class="ident" id="4865634">instJmp</span><span class="op" id="4865641">)</span>&nbsp;<span class="ident" id="4865643">I</span><span class="op" id="4865644">(</span><span class="ident" id="4865645">cpu</span>&nbsp;<span class="op" id="4865649">*</span><span class="ident" id="4865650">cpu</span><span class="op" id="4865653">,</span>&nbsp;<span class="ident" id="4865655">in</span>&nbsp;<span class="builtintype" id="4865658">uint32</span><span class="op" id="4865664">)</span>&nbsp;<span class="op" id="4865666">*</span><span class="ident" id="4865667">Excep</span>&nbsp;<span class="op" id="4865673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865676">op</span>&nbsp;<span class="op" id="4865679">:=</span>&nbsp;<span class="op" id="4865682">(</span><span class="ident" id="4865683">in</span>&nbsp;<span class="op" id="4865686">&gt;&gt;</span>&nbsp;<span class="num" id="4865689">30</span><span class="op" id="4865691">)</span>&nbsp;<span class="op" id="4865693">&amp;</span>&nbsp;<span class="num" id="4865695">0x3</span>&nbsp;<span class="comment" id="4865699">//&nbsp;(32:30]</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865711">off</span>&nbsp;<span class="op" id="4865715">:=</span>&nbsp;<span class="ident" id="4865718">in</span>&nbsp;<span class="op" id="4865721">&amp;</span>&nbsp;<span class="num" id="4865723">0x3fffffff</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865736">pc</span>&nbsp;<span class="op" id="4865739">:=</span>&nbsp;<span class="ident" id="4865742">cpu</span><span class="op" id="4865745">.</span><span class="ident" id="4865746">regs</span><span class="op" id="4865750">[</span><span class="ident" id="4865751">PC</span><span class="op" id="4865753">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865756">to</span>&nbsp;<span class="op" id="4865759">:=</span>&nbsp;<span class="ident" id="4865762">pc</span>&nbsp;<span class="op" id="4865765">+</span>&nbsp;<span class="op" id="4865767">(</span><span class="ident" id="4865768">off</span>&nbsp;<span class="op" id="4865772">&lt;&lt;</span>&nbsp;<span class="num" id="4865775">2</span><span class="op" id="4865776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865780">switch</span>&nbsp;<span class="ident" id="4865787">op</span>&nbsp;<span class="op" id="4865790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865793">case</span>&nbsp;<span class="num" id="4865798">2</span><span class="op" id="4865799">:</span>&nbsp;<span class="comment" id="4865801">//&nbsp;j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865808">/*&nbsp;do&nbsp;nothing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865826">case</span>&nbsp;<span class="num" id="4865831">3</span><span class="op" id="4865832">:</span>&nbsp;<span class="comment" id="4865834">//&nbsp;jal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865843">cpu</span><span class="op" id="4865846">.</span><span class="ident" id="4865847">regs</span><span class="op" id="4865851">[</span><span class="ident" id="4865852">RET</span><span class="op" id="4865855">]</span>&nbsp;<span class="op" id="4865857">=</span>&nbsp;<span class="ident" id="4865859">pc</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865863">default</span><span class="op" id="4865870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865874">return</span>&nbsp;<span class="ident" id="4865881">errInvalidInst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4865897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865901">cpu</span><span class="op" id="4865904">.</span><span class="ident" id="4865905">regs</span><span class="op" id="4865909">[</span><span class="ident" id="4865910">PC</span><span class="op" id="4865912">]</span>&nbsp;<span class="op" id="4865914">=</span>&nbsp;<span class="ident" id="4865916">to</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865920">return</span>&nbsp;<span class="ident" id="4865927">nil</span><br>
<span class="lineno"></span><span class="op" id="4865931">}</span>
</div>
</body>
</html>
