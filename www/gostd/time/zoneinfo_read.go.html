<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2478408">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2478463">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2478517">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2478568">//&nbsp;Parse&nbsp;&#34;zoneinfo&#34;&nbsp;time&nbsp;zone&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2478604">//&nbsp;This&nbsp;is&nbsp;a&nbsp;fairly&nbsp;standard&nbsp;file&nbsp;format&nbsp;used&nbsp;on&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;BSD,&nbsp;Sun,&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span><span class="comment" id="2478688">//&nbsp;See&nbsp;tzfile(5),&nbsp;http://en.wikipedia.org/wiki/Zoneinfo,</span><br>
<span class="lineno"></span><span class="comment" id="2478745">//&nbsp;and&nbsp;ftp://munnari.oz.au/pub/oldtz/</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2478784">package</span>&nbsp;<span class="ident" id="2478792">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2478798">import</span>&nbsp;<span class="string" id="2478805">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2478815">//&nbsp;Simple&nbsp;I/O&nbsp;interface&nbsp;to&nbsp;binary&nbsp;blob&nbsp;of&nbsp;data.</span><br>
<span class="lineno">15</span><span class="keyword" id="2478863">type</span>&nbsp;<span class="ident" id="2478868">data</span>&nbsp;<span class="keyword" id="2478873">struct</span>&nbsp;<span class="op" id="2478880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2478883">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478889">[</span><span class="op" id="2478890">]</span><span class="builtintype" id="2478891">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2478897">error</span>&nbsp;<span class="builtintype" id="2478903">bool</span><br>
<span class="lineno"></span><span class="op" id="2478908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="2478911">func</span>&nbsp;<span class="op" id="2478916">(</span><span class="ident" id="2478917">d</span>&nbsp;<span class="op" id="2478919">*</span><span class="ident" id="2478920">data</span><span class="op" id="2478924">)</span>&nbsp;<span class="ident" id="2478926">read</span><span class="op" id="2478930">(</span><span class="ident" id="2478931">n</span>&nbsp;<span class="builtintype" id="2478933">int</span><span class="op" id="2478936">)</span>&nbsp;<span class="op" id="2478938">[</span><span class="op" id="2478939">]</span><span class="builtintype" id="2478940">byte</span>&nbsp;<span class="op" id="2478945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2478948">if</span>&nbsp;<span class="builtinfunc" id="2478951">len</span><span class="op" id="2478954">(</span><span class="ident" id="2478955">d</span><span class="op" id="2478956">.</span><span class="ident" id="2478957">p</span><span class="op" id="2478958">)</span>&nbsp;<span class="op" id="2478960">&lt;</span>&nbsp;<span class="ident" id="2478962">n</span>&nbsp;<span class="op" id="2478964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2478968">d</span><span class="op" id="2478969">.</span><span class="ident" id="2478970">p</span>&nbsp;<span class="op" id="2478972">=</span>&nbsp;<span class="ident" id="2478974">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2478980">d</span><span class="op" id="2478981">.</span><span class="builtintype" id="2478982">error</span>&nbsp;<span class="op" id="2478988">=</span>&nbsp;<span class="builtintype" id="2478990">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2478997">return</span>&nbsp;<span class="ident" id="2479004">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479012">p</span>&nbsp;<span class="op" id="2479014">:=</span>&nbsp;<span class="ident" id="2479017">d</span><span class="op" id="2479018">.</span><span class="ident" id="2479019">p</span><span class="op" id="2479020">[</span><span class="num" id="2479021">0</span><span class="op" id="2479022">:</span><span class="ident" id="2479023">n</span><span class="op" id="2479024">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479027">d</span><span class="op" id="2479028">.</span><span class="ident" id="2479029">p</span>&nbsp;<span class="op" id="2479031">=</span>&nbsp;<span class="ident" id="2479033">d</span><span class="op" id="2479034">.</span><span class="ident" id="2479035">p</span><span class="op" id="2479036">[</span><span class="ident" id="2479037">n</span><span class="op" id="2479038">:</span><span class="op" id="2479039">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479042">return</span>&nbsp;<span class="ident" id="2479049">p</span><br>
<span class="lineno"></span><span class="op" id="2479051">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2479054">func</span>&nbsp;<span class="op" id="2479059">(</span><span class="ident" id="2479060">d</span>&nbsp;<span class="op" id="2479062">*</span><span class="ident" id="2479063">data</span><span class="op" id="2479067">)</span>&nbsp;<span class="ident" id="2479069">big4</span><span class="op" id="2479073">(</span><span class="op" id="2479074">)</span>&nbsp;<span class="op" id="2479076">(</span><span class="ident" id="2479077">n</span>&nbsp;<span class="builtintype" id="2479079">uint32</span><span class="op" id="2479085">,</span>&nbsp;<span class="ident" id="2479087">ok</span>&nbsp;<span class="builtintype" id="2479090">bool</span><span class="op" id="2479094">)</span>&nbsp;<span class="op" id="2479096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479099">p</span>&nbsp;<span class="op" id="2479101">:=</span>&nbsp;<span class="ident" id="2479104">d</span><span class="op" id="2479105">.</span><span class="ident" id="2479106">read</span><span class="op" id="2479110">(</span><span class="num" id="2479111">4</span><span class="op" id="2479112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479115">if</span>&nbsp;<span class="builtinfunc" id="2479118">len</span><span class="op" id="2479121">(</span><span class="ident" id="2479122">p</span><span class="op" id="2479123">)</span>&nbsp;<span class="op" id="2479125">&lt;</span>&nbsp;<span class="num" id="2479127">4</span>&nbsp;<span class="op" id="2479129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479133">d</span><span class="op" id="2479134">.</span><span class="builtintype" id="2479135">error</span>&nbsp;<span class="op" id="2479141">=</span>&nbsp;<span class="builtintype" id="2479143">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479150">return</span>&nbsp;<span class="num" id="2479157">0</span><span class="op" id="2479158">,</span>&nbsp;<span class="builtintype" id="2479160">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479170">return</span>&nbsp;<span class="builtintype" id="2479177">uint32</span><span class="op" id="2479183">(</span><span class="ident" id="2479184">p</span><span class="op" id="2479185">[</span><span class="num" id="2479186">0</span><span class="op" id="2479187">]</span><span class="op" id="2479188">)</span><span class="op" id="2479189">&lt;&lt;</span><span class="num" id="2479191">24</span>&nbsp;<span class="op" id="2479194">|</span>&nbsp;<span class="builtintype" id="2479196">uint32</span><span class="op" id="2479202">(</span><span class="ident" id="2479203">p</span><span class="op" id="2479204">[</span><span class="num" id="2479205">1</span><span class="op" id="2479206">]</span><span class="op" id="2479207">)</span><span class="op" id="2479208">&lt;&lt;</span><span class="num" id="2479210">16</span>&nbsp;<span class="op" id="2479213">|</span>&nbsp;<span class="builtintype" id="2479215">uint32</span><span class="op" id="2479221">(</span><span class="ident" id="2479222">p</span><span class="op" id="2479223">[</span><span class="num" id="2479224">2</span><span class="op" id="2479225">]</span><span class="op" id="2479226">)</span><span class="op" id="2479227">&lt;&lt;</span><span class="num" id="2479229">8</span>&nbsp;<span class="op" id="2479231">|</span>&nbsp;<span class="builtintype" id="2479233">uint32</span><span class="op" id="2479239">(</span><span class="ident" id="2479240">p</span><span class="op" id="2479241">[</span><span class="num" id="2479242">3</span><span class="op" id="2479243">]</span><span class="op" id="2479244">)</span><span class="op" id="2479245">,</span>&nbsp;<span class="builtintype" id="2479247">true</span><br>
<span class="lineno"></span><span class="op" id="2479252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="2479255">func</span>&nbsp;<span class="op" id="2479260">(</span><span class="ident" id="2479261">d</span>&nbsp;<span class="op" id="2479263">*</span><span class="ident" id="2479264">data</span><span class="op" id="2479268">)</span>&nbsp;<span class="builtintype" id="2479270">byte</span><span class="op" id="2479274">(</span><span class="op" id="2479275">)</span>&nbsp;<span class="op" id="2479277">(</span><span class="ident" id="2479278">n</span>&nbsp;<span class="builtintype" id="2479280">byte</span><span class="op" id="2479284">,</span>&nbsp;<span class="ident" id="2479286">ok</span>&nbsp;<span class="builtintype" id="2479289">bool</span><span class="op" id="2479293">)</span>&nbsp;<span class="op" id="2479295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479298">p</span>&nbsp;<span class="op" id="2479300">:=</span>&nbsp;<span class="ident" id="2479303">d</span><span class="op" id="2479304">.</span><span class="ident" id="2479305">read</span><span class="op" id="2479309">(</span><span class="num" id="2479310">1</span><span class="op" id="2479311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479314">if</span>&nbsp;<span class="builtinfunc" id="2479317">len</span><span class="op" id="2479320">(</span><span class="ident" id="2479321">p</span><span class="op" id="2479322">)</span>&nbsp;<span class="op" id="2479324">&lt;</span>&nbsp;<span class="num" id="2479326">1</span>&nbsp;<span class="op" id="2479328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479332">d</span><span class="op" id="2479333">.</span><span class="builtintype" id="2479334">error</span>&nbsp;<span class="op" id="2479340">=</span>&nbsp;<span class="builtintype" id="2479342">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479349">return</span>&nbsp;<span class="num" id="2479356">0</span><span class="op" id="2479357">,</span>&nbsp;<span class="builtintype" id="2479359">false</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479369">return</span>&nbsp;<span class="ident" id="2479376">p</span><span class="op" id="2479377">[</span><span class="num" id="2479378">0</span><span class="op" id="2479379">]</span><span class="op" id="2479380">,</span>&nbsp;<span class="builtintype" id="2479382">true</span><br>
<span class="lineno"></span><span class="op" id="2479387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2479390">//&nbsp;Make&nbsp;a&nbsp;string&nbsp;by&nbsp;stopping&nbsp;at&nbsp;the&nbsp;first&nbsp;NUL</span><br>
<span class="lineno">50</span><span class="keyword" id="2479436">func</span>&nbsp;<span class="ident" id="2479441">byteString</span><span class="op" id="2479451">(</span><span class="ident" id="2479452">p</span>&nbsp;<span class="op" id="2479454">[</span><span class="op" id="2479455">]</span><span class="builtintype" id="2479456">byte</span><span class="op" id="2479460">)</span>&nbsp;<span class="builtintype" id="2479462">string</span>&nbsp;<span class="op" id="2479469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479472">for</span>&nbsp;<span class="ident" id="2479476">i</span>&nbsp;<span class="op" id="2479478">:=</span>&nbsp;<span class="num" id="2479481">0</span><span class="op" id="2479482">;</span>&nbsp;<span class="ident" id="2479484">i</span>&nbsp;<span class="op" id="2479486">&lt;</span>&nbsp;<span class="builtinfunc" id="2479488">len</span><span class="op" id="2479491">(</span><span class="ident" id="2479492">p</span><span class="op" id="2479493">)</span><span class="op" id="2479494">;</span>&nbsp;<span class="ident" id="2479496">i</span><span class="op" id="2479497">++</span>&nbsp;<span class="op" id="2479500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479504">if</span>&nbsp;<span class="ident" id="2479507">p</span><span class="op" id="2479508">[</span><span class="ident" id="2479509">i</span><span class="op" id="2479510">]</span>&nbsp;<span class="op" id="2479512">==</span>&nbsp;<span class="num" id="2479515">0</span>&nbsp;<span class="op" id="2479517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479522">return</span>&nbsp;<span class="builtintype" id="2479529">string</span><span class="op" id="2479535">(</span><span class="ident" id="2479536">p</span><span class="op" id="2479537">[</span><span class="num" id="2479538">0</span><span class="op" id="2479539">:</span><span class="ident" id="2479540">i</span><span class="op" id="2479541">]</span><span class="op" id="2479542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479546">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479552">return</span>&nbsp;<span class="builtintype" id="2479559">string</span><span class="op" id="2479565">(</span><span class="ident" id="2479566">p</span><span class="op" id="2479567">)</span><br>
<span class="lineno"></span><span class="op" id="2479569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2479572">var</span>&nbsp;<span class="ident" id="2479576">badData</span>&nbsp;<span class="op" id="2479584">=</span>&nbsp;<span class="ident" id="2479586">errors</span><span class="op" id="2479592">.</span><span class="ident" id="2479593">New</span><span class="op" id="2479596">(</span><span class="string" id="2479597">&#34;malformed&nbsp;time&nbsp;zone&nbsp;information&#34;</span><span class="op" id="2479630">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2479633">func</span>&nbsp;<span class="ident" id="2479638">loadZoneData</span><span class="op" id="2479650">(</span><span class="ident" id="2479651">bytes</span>&nbsp;<span class="op" id="2479657">[</span><span class="op" id="2479658">]</span><span class="builtintype" id="2479659">byte</span><span class="op" id="2479663">)</span>&nbsp;<span class="op" id="2479665">(</span><span class="ident" id="2479666">l</span>&nbsp;<span class="op" id="2479668">*</span><span class="ident" id="2479669">Location</span><span class="op" id="2479677">,</span>&nbsp;<span class="ident" id="2479679">err</span>&nbsp;<span class="builtintype" id="2479683">error</span><span class="op" id="2479688">)</span>&nbsp;<span class="op" id="2479690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2479693">d</span>&nbsp;<span class="op" id="2479695">:=</span>&nbsp;<span class="ident" id="2479698">data</span><span class="op" id="2479702">{</span><span class="ident" id="2479703">bytes</span><span class="op" id="2479708">,</span>&nbsp;<span class="builtintype" id="2479710">false</span><span class="op" id="2479715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2479719">//&nbsp;4-byte&nbsp;magic&nbsp;&#34;TZif&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479743">if</span>&nbsp;<span class="ident" id="2479746">magic</span>&nbsp;<span class="op" id="2479752">:=</span>&nbsp;<span class="ident" id="2479755">d</span><span class="op" id="2479756">.</span><span class="ident" id="2479757">read</span><span class="op" id="2479761">(</span><span class="num" id="2479762">4</span><span class="op" id="2479763">)</span><span class="op" id="2479764">;</span>&nbsp;<span class="builtintype" id="2479766">string</span><span class="op" id="2479772">(</span><span class="ident" id="2479773">magic</span><span class="op" id="2479778">)</span>&nbsp;<span class="op" id="2479780">!=</span>&nbsp;<span class="string" id="2479783">&#34;TZif&#34;</span>&nbsp;<span class="op" id="2479790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479794">return</span>&nbsp;<span class="ident" id="2479801">nil</span><span class="op" id="2479804">,</span>&nbsp;<span class="ident" id="2479806">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2479819">//&nbsp;1-byte&nbsp;version,&nbsp;then&nbsp;15&nbsp;bytes&nbsp;of&nbsp;padding</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479864">var</span>&nbsp;<span class="ident" id="2479868">p</span>&nbsp;<span class="op" id="2479870">[</span><span class="op" id="2479871">]</span><span class="builtintype" id="2479872">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479878">if</span>&nbsp;<span class="ident" id="2479881">p</span>&nbsp;<span class="op" id="2479883">=</span>&nbsp;<span class="ident" id="2479885">d</span><span class="op" id="2479886">.</span><span class="ident" id="2479887">read</span><span class="op" id="2479891">(</span><span class="num" id="2479892">16</span><span class="op" id="2479894">)</span><span class="op" id="2479895">;</span>&nbsp;<span class="builtinfunc" id="2479897">len</span><span class="op" id="2479900">(</span><span class="ident" id="2479901">p</span><span class="op" id="2479902">)</span>&nbsp;<span class="op" id="2479904">!=</span>&nbsp;<span class="num" id="2479907">16</span>&nbsp;<span class="op" id="2479910">||</span>&nbsp;<span class="ident" id="2479913">p</span><span class="op" id="2479914">[</span><span class="num" id="2479915">0</span><span class="op" id="2479916">]</span>&nbsp;<span class="op" id="2479918">!=</span>&nbsp;<span class="num" id="2479921">0</span>&nbsp;<span class="op" id="2479923">&amp;&amp;</span>&nbsp;<span class="ident" id="2479926">p</span><span class="op" id="2479927">[</span><span class="num" id="2479928">0</span><span class="op" id="2479929">]</span>&nbsp;<span class="op" id="2479931">!=</span>&nbsp;<span class="string" id="2479934">&#39;2&#39;</span>&nbsp;<span class="op" id="2479938">&amp;&amp;</span>&nbsp;<span class="ident" id="2479941">p</span><span class="op" id="2479942">[</span><span class="num" id="2479943">0</span><span class="op" id="2479944">]</span>&nbsp;<span class="op" id="2479946">!=</span>&nbsp;<span class="string" id="2479949">&#39;3&#39;</span>&nbsp;<span class="op" id="2479953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2479957">return</span>&nbsp;<span class="ident" id="2479964">nil</span><span class="op" id="2479967">,</span>&nbsp;<span class="ident" id="2479969">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2479978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2479982">//&nbsp;six&nbsp;big-endian&nbsp;32-bit&nbsp;integers:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480018">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;UTC/local&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480053">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;standard/wall&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480092">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;leap&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480119">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;transition&nbsp;times</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480150">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;local&nbsp;time&nbsp;zones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480181">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;characters&nbsp;of&nbsp;time&nbsp;zone&nbsp;abbrev&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2480234">const</span>&nbsp;<span class="op" id="2480240">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480244">NUTCLocal</span>&nbsp;<span class="op" id="2480254">=</span>&nbsp;<span class="ident" id="2480256">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480263">NStdWall</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480274">NLeap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480282">NTime</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480290">NZone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480298">NChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2480305">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2480308">var</span>&nbsp;<span class="ident" id="2480312">n</span>&nbsp;<span class="op" id="2480314">[</span><span class="num" id="2480315">6</span><span class="op" id="2480316">]</span><span class="builtintype" id="2480317">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2480322">for</span>&nbsp;<span class="ident" id="2480326">i</span>&nbsp;<span class="op" id="2480328">:=</span>&nbsp;<span class="num" id="2480331">0</span><span class="op" id="2480332">;</span>&nbsp;<span class="ident" id="2480334">i</span>&nbsp;<span class="op" id="2480336">&lt;</span>&nbsp;<span class="num" id="2480338">6</span><span class="op" id="2480339">;</span>&nbsp;<span class="ident" id="2480341">i</span><span class="op" id="2480342">++</span>&nbsp;<span class="op" id="2480345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480349">nn</span><span class="op" id="2480351">,</span>&nbsp;<span class="ident" id="2480353">ok</span>&nbsp;<span class="op" id="2480356">:=</span>&nbsp;<span class="ident" id="2480359">d</span><span class="op" id="2480360">.</span><span class="ident" id="2480361">big4</span><span class="op" id="2480365">(</span><span class="op" id="2480366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2480370">if</span>&nbsp;<span class="op" id="2480373">!</span><span class="ident" id="2480374">ok</span>&nbsp;<span class="op" id="2480377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2480382">return</span>&nbsp;<span class="ident" id="2480389">nil</span><span class="op" id="2480392">,</span>&nbsp;<span class="ident" id="2480394">badData</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2480404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480408">n</span><span class="op" id="2480409">[</span><span class="ident" id="2480410">i</span><span class="op" id="2480411">]</span>&nbsp;<span class="op" id="2480413">=</span>&nbsp;<span class="builtintype" id="2480415">int</span><span class="op" id="2480418">(</span><span class="ident" id="2480419">nn</span><span class="op" id="2480421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2480424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480428">//&nbsp;Transition&nbsp;times.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480450">txtimes</span>&nbsp;<span class="op" id="2480458">:=</span>&nbsp;<span class="ident" id="2480461">data</span><span class="op" id="2480465">{</span><span class="ident" id="2480466">d</span><span class="op" id="2480467">.</span><span class="ident" id="2480468">read</span><span class="op" id="2480472">(</span><span class="ident" id="2480473">n</span><span class="op" id="2480474">[</span><span class="ident" id="2480475">NTime</span><span class="op" id="2480480">]</span>&nbsp;<span class="op" id="2480482">*</span>&nbsp;<span class="num" id="2480484">4</span><span class="op" id="2480485">)</span><span class="op" id="2480486">,</span>&nbsp;<span class="builtintype" id="2480488">false</span><span class="op" id="2480493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480497">//&nbsp;Time&nbsp;zone&nbsp;indices&nbsp;for&nbsp;transition&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480541">txzones</span>&nbsp;<span class="op" id="2480549">:=</span>&nbsp;<span class="ident" id="2480552">d</span><span class="op" id="2480553">.</span><span class="ident" id="2480554">read</span><span class="op" id="2480558">(</span><span class="ident" id="2480559">n</span><span class="op" id="2480560">[</span><span class="ident" id="2480561">NTime</span><span class="op" id="2480566">]</span><span class="op" id="2480567">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480571">//&nbsp;Zone&nbsp;info&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480596">zonedata</span>&nbsp;<span class="op" id="2480605">:=</span>&nbsp;<span class="ident" id="2480608">data</span><span class="op" id="2480612">{</span><span class="ident" id="2480613">d</span><span class="op" id="2480614">.</span><span class="ident" id="2480615">read</span><span class="op" id="2480619">(</span><span class="ident" id="2480620">n</span><span class="op" id="2480621">[</span><span class="ident" id="2480622">NZone</span><span class="op" id="2480627">]</span>&nbsp;<span class="op" id="2480629">*</span>&nbsp;<span class="num" id="2480631">6</span><span class="op" id="2480632">)</span><span class="op" id="2480633">,</span>&nbsp;<span class="builtintype" id="2480635">false</span><span class="op" id="2480640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480644">//&nbsp;Time&nbsp;zone&nbsp;abbreviations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480673">abbrev</span>&nbsp;<span class="op" id="2480680">:=</span>&nbsp;<span class="ident" id="2480683">d</span><span class="op" id="2480684">.</span><span class="ident" id="2480685">read</span><span class="op" id="2480689">(</span><span class="ident" id="2480690">n</span><span class="op" id="2480691">[</span><span class="ident" id="2480692">NChar</span><span class="op" id="2480697">]</span><span class="op" id="2480698">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480702">//&nbsp;Leap-second&nbsp;time&nbsp;pairs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480729">d</span><span class="op" id="2480730">.</span><span class="ident" id="2480731">read</span><span class="op" id="2480735">(</span><span class="ident" id="2480736">n</span><span class="op" id="2480737">[</span><span class="ident" id="2480738">NLeap</span><span class="op" id="2480743">]</span>&nbsp;<span class="op" id="2480745">*</span>&nbsp;<span class="num" id="2480747">8</span><span class="op" id="2480748">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480752">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480806">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;standard&nbsp;time&nbsp;or&nbsp;wall&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480855">isstd</span>&nbsp;<span class="op" id="2480861">:=</span>&nbsp;<span class="ident" id="2480864">d</span><span class="op" id="2480865">.</span><span class="ident" id="2480866">read</span><span class="op" id="2480870">(</span><span class="ident" id="2480871">n</span><span class="op" id="2480872">[</span><span class="ident" id="2480873">NStdWall</span><span class="op" id="2480881">]</span><span class="op" id="2480882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480886">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2480940">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;UTC&nbsp;or&nbsp;local&nbsp;time.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2480980">isutc</span>&nbsp;<span class="op" id="2480986">:=</span>&nbsp;<span class="ident" id="2480989">d</span><span class="op" id="2480990">.</span><span class="ident" id="2480991">read</span><span class="op" id="2480995">(</span><span class="ident" id="2480996">n</span><span class="op" id="2480997">[</span><span class="ident" id="2480998">NUTCLocal</span><span class="op" id="2481007">]</span><span class="op" id="2481008">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481012">if</span>&nbsp;<span class="ident" id="2481015">d</span><span class="op" id="2481016">.</span><span class="builtintype" id="2481017">error</span>&nbsp;<span class="op" id="2481023">{</span>&nbsp;<span class="comment" id="2481025">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481046">return</span>&nbsp;<span class="ident" id="2481053">nil</span><span class="op" id="2481056">,</span>&nbsp;<span class="ident" id="2481058">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481067">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481071">//&nbsp;If&nbsp;version&nbsp;==&nbsp;2&nbsp;or&nbsp;3,&nbsp;the&nbsp;entire&nbsp;file&nbsp;repeats,&nbsp;this&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481138">//&nbsp;8-byte&nbsp;ints&nbsp;for&nbsp;txtimes&nbsp;and&nbsp;leap&nbsp;seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481184">//&nbsp;We&nbsp;won&#39;t&nbsp;need&nbsp;those&nbsp;until&nbsp;2106.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481221">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;build&nbsp;up&nbsp;a&nbsp;useful&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481270">//&nbsp;First&nbsp;the&nbsp;zone&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481302">//&nbsp;&nbsp;&nbsp;&nbsputcoff[4]&nbsp;isdst[1]&nbsp;nameindex[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481338">zone</span>&nbsp;<span class="op" id="2481343">:=</span>&nbsp;<span class="builtinfunc" id="2481346">make</span><span class="op" id="2481350">(</span><span class="op" id="2481351">[</span><span class="op" id="2481352">]</span><span class="ident" id="2481353">zone</span><span class="op" id="2481357">,</span>&nbsp;<span class="ident" id="2481359">n</span><span class="op" id="2481360">[</span><span class="ident" id="2481361">NZone</span><span class="op" id="2481366">]</span><span class="op" id="2481367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481370">for</span>&nbsp;<span class="ident" id="2481374">i</span>&nbsp;<span class="op" id="2481376">:=</span>&nbsp;<span class="keyword" id="2481379">range</span>&nbsp;<span class="ident" id="2481385">zone</span>&nbsp;<span class="op" id="2481390">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481394">var</span>&nbsp;<span class="ident" id="2481398">ok</span>&nbsp;<span class="builtintype" id="2481401">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481408">var</span>&nbsp;<span class="ident" id="2481412">n</span>&nbsp;<span class="builtintype" id="2481414">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481423">if</span>&nbsp;<span class="ident" id="2481426">n</span><span class="op" id="2481427">,</span>&nbsp;<span class="ident" id="2481429">ok</span>&nbsp;<span class="op" id="2481432">=</span>&nbsp;<span class="ident" id="2481434">zonedata</span><span class="op" id="2481442">.</span><span class="ident" id="2481443">big4</span><span class="op" id="2481447">(</span><span class="op" id="2481448">)</span><span class="op" id="2481449">;</span>&nbsp;<span class="op" id="2481451">!</span><span class="ident" id="2481452">ok</span>&nbsp;<span class="op" id="2481455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481460">return</span>&nbsp;<span class="ident" id="2481467">nil</span><span class="op" id="2481470">,</span>&nbsp;<span class="ident" id="2481472">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481482">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481486">zone</span><span class="op" id="2481490">[</span><span class="ident" id="2481491">i</span><span class="op" id="2481492">]</span><span class="op" id="2481493">.</span><span class="ident" id="2481494">offset</span>&nbsp;<span class="op" id="2481501">=</span>&nbsp;<span class="builtintype" id="2481503">int</span><span class="op" id="2481506">(</span><span class="builtintype" id="2481507">int32</span><span class="op" id="2481512">(</span><span class="ident" id="2481513">n</span><span class="op" id="2481514">)</span><span class="op" id="2481515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481519">var</span>&nbsp;<span class="ident" id="2481523">b</span>&nbsp;<span class="builtintype" id="2481525">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481532">if</span>&nbsp;<span class="ident" id="2481535">b</span><span class="op" id="2481536">,</span>&nbsp;<span class="ident" id="2481538">ok</span>&nbsp;<span class="op" id="2481541">=</span>&nbsp;<span class="ident" id="2481543">zonedata</span><span class="op" id="2481551">.</span><span class="builtintype" id="2481552">byte</span><span class="op" id="2481556">(</span><span class="op" id="2481557">)</span><span class="op" id="2481558">;</span>&nbsp;<span class="op" id="2481560">!</span><span class="ident" id="2481561">ok</span>&nbsp;<span class="op" id="2481564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481569">return</span>&nbsp;<span class="ident" id="2481576">nil</span><span class="op" id="2481579">,</span>&nbsp;<span class="ident" id="2481581">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481591">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481595">zone</span><span class="op" id="2481599">[</span><span class="ident" id="2481600">i</span><span class="op" id="2481601">]</span><span class="op" id="2481602">.</span><span class="ident" id="2481603">isDST</span>&nbsp;<span class="op" id="2481609">=</span>&nbsp;<span class="ident" id="2481611">b</span>&nbsp;<span class="op" id="2481613">!=</span>&nbsp;<span class="num" id="2481616">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481620">if</span>&nbsp;<span class="ident" id="2481623">b</span><span class="op" id="2481624">,</span>&nbsp;<span class="ident" id="2481626">ok</span>&nbsp;<span class="op" id="2481629">=</span>&nbsp;<span class="ident" id="2481631">zonedata</span><span class="op" id="2481639">.</span><span class="builtintype" id="2481640">byte</span><span class="op" id="2481644">(</span><span class="op" id="2481645">)</span><span class="op" id="2481646">;</span>&nbsp;<span class="op" id="2481648">!</span><span class="ident" id="2481649">ok</span>&nbsp;<span class="op" id="2481652">||</span>&nbsp;<span class="builtintype" id="2481655">int</span><span class="op" id="2481658">(</span><span class="ident" id="2481659">b</span><span class="op" id="2481660">)</span>&nbsp;<span class="op" id="2481662">&gt;=</span>&nbsp;<span class="builtinfunc" id="2481665">len</span><span class="op" id="2481668">(</span><span class="ident" id="2481669">abbrev</span><span class="op" id="2481675">)</span>&nbsp;<span class="op" id="2481677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481682">return</span>&nbsp;<span class="ident" id="2481689">nil</span><span class="op" id="2481692">,</span>&nbsp;<span class="ident" id="2481694">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481708">zone</span><span class="op" id="2481712">[</span><span class="ident" id="2481713">i</span><span class="op" id="2481714">]</span><span class="op" id="2481715">.</span><span class="ident" id="2481716">name</span>&nbsp;<span class="op" id="2481721">=</span>&nbsp;<span class="ident" id="2481723">byteString</span><span class="op" id="2481733">(</span><span class="ident" id="2481734">abbrev</span><span class="op" id="2481740">[</span><span class="ident" id="2481741">b</span><span class="op" id="2481742">:</span><span class="op" id="2481743">]</span><span class="op" id="2481744">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2481751">//&nbsp;Now&nbsp;the&nbsp;transition&nbsp;time&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481785">tx</span>&nbsp;<span class="op" id="2481788">:=</span>&nbsp;<span class="builtinfunc" id="2481791">make</span><span class="op" id="2481795">(</span><span class="op" id="2481796">[</span><span class="op" id="2481797">]</span><span class="ident" id="2481798">zoneTrans</span><span class="op" id="2481807">,</span>&nbsp;<span class="ident" id="2481809">n</span><span class="op" id="2481810">[</span><span class="ident" id="2481811">NTime</span><span class="op" id="2481816">]</span><span class="op" id="2481817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481820">for</span>&nbsp;<span class="ident" id="2481824">i</span>&nbsp;<span class="op" id="2481826">:=</span>&nbsp;<span class="keyword" id="2481829">range</span>&nbsp;<span class="ident" id="2481835">tx</span>&nbsp;<span class="op" id="2481838">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481842">var</span>&nbsp;<span class="ident" id="2481846">ok</span>&nbsp;<span class="builtintype" id="2481849">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481856">var</span>&nbsp;<span class="ident" id="2481860">n</span>&nbsp;<span class="builtintype" id="2481862">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481871">if</span>&nbsp;<span class="ident" id="2481874">n</span><span class="op" id="2481875">,</span>&nbsp;<span class="ident" id="2481877">ok</span>&nbsp;<span class="op" id="2481880">=</span>&nbsp;<span class="ident" id="2481882">txtimes</span><span class="op" id="2481889">.</span><span class="ident" id="2481890">big4</span><span class="op" id="2481894">(</span><span class="op" id="2481895">)</span><span class="op" id="2481896">;</span>&nbsp;<span class="op" id="2481898">!</span><span class="ident" id="2481899">ok</span>&nbsp;<span class="op" id="2481902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481907">return</span>&nbsp;<span class="ident" id="2481914">nil</span><span class="op" id="2481917">,</span>&nbsp;<span class="ident" id="2481919">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481929">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481933">tx</span><span class="op" id="2481935">[</span><span class="ident" id="2481936">i</span><span class="op" id="2481937">]</span><span class="op" id="2481938">.</span><span class="ident" id="2481939">when</span>&nbsp;<span class="op" id="2481944">=</span>&nbsp;<span class="ident" id="2481946">int64</span><span class="op" id="2481951">(</span><span class="builtintype" id="2481952">int32</span><span class="op" id="2481957">(</span><span class="ident" id="2481958">n</span><span class="op" id="2481959">)</span><span class="op" id="2481960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481964">if</span>&nbsp;<span class="builtintype" id="2481967">int</span><span class="op" id="2481970">(</span><span class="ident" id="2481971">txzones</span><span class="op" id="2481978">[</span><span class="ident" id="2481979">i</span><span class="op" id="2481980">]</span><span class="op" id="2481981">)</span>&nbsp;<span class="op" id="2481983">&gt;=</span>&nbsp;<span class="builtinfunc" id="2481986">len</span><span class="op" id="2481989">(</span><span class="ident" id="2481990">zone</span><span class="op" id="2481994">)</span>&nbsp;<span class="op" id="2481996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482001">return</span>&nbsp;<span class="ident" id="2482008">nil</span><span class="op" id="2482011">,</span>&nbsp;<span class="ident" id="2482013">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482027">tx</span><span class="op" id="2482029">[</span><span class="ident" id="2482030">i</span><span class="op" id="2482031">]</span><span class="op" id="2482032">.</span><span class="ident" id="2482033">index</span>&nbsp;<span class="op" id="2482039">=</span>&nbsp;<span class="ident" id="2482041">txzones</span><span class="op" id="2482048">[</span><span class="ident" id="2482049">i</span><span class="op" id="2482050">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482054">if</span>&nbsp;<span class="ident" id="2482057">i</span>&nbsp;<span class="op" id="2482059">&lt;</span>&nbsp;<span class="builtinfunc" id="2482061">len</span><span class="op" id="2482064">(</span><span class="ident" id="2482065">isstd</span><span class="op" id="2482070">)</span>&nbsp;<span class="op" id="2482072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482077">tx</span><span class="op" id="2482079">[</span><span class="ident" id="2482080">i</span><span class="op" id="2482081">]</span><span class="op" id="2482082">.</span><span class="ident" id="2482083">isstd</span>&nbsp;<span class="op" id="2482089">=</span>&nbsp;<span class="ident" id="2482091">isstd</span><span class="op" id="2482096">[</span><span class="ident" id="2482097">i</span><span class="op" id="2482098">]</span>&nbsp;<span class="op" id="2482100">!=</span>&nbsp;<span class="num" id="2482103">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482111">if</span>&nbsp;<span class="ident" id="2482114">i</span>&nbsp;<span class="op" id="2482116">&lt;</span>&nbsp;<span class="builtinfunc" id="2482118">len</span><span class="op" id="2482121">(</span><span class="ident" id="2482122">isutc</span><span class="op" id="2482127">)</span>&nbsp;<span class="op" id="2482129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482134">tx</span><span class="op" id="2482136">[</span><span class="ident" id="2482137">i</span><span class="op" id="2482138">]</span><span class="op" id="2482139">.</span><span class="ident" id="2482140">isutc</span>&nbsp;<span class="op" id="2482146">=</span>&nbsp;<span class="ident" id="2482148">isutc</span><span class="op" id="2482153">[</span><span class="ident" id="2482154">i</span><span class="op" id="2482155">]</span>&nbsp;<span class="op" id="2482157">!=</span>&nbsp;<span class="num" id="2482160">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482171">if</span>&nbsp;<span class="builtinfunc" id="2482174">len</span><span class="op" id="2482177">(</span><span class="ident" id="2482178">tx</span><span class="op" id="2482180">)</span>&nbsp;<span class="op" id="2482182">==</span>&nbsp;<span class="num" id="2482185">0</span>&nbsp;<span class="op" id="2482187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482191">//&nbsp;Build&nbsp;fake&nbsp;transition&nbsp;to&nbsp;cover&nbsp;all&nbsp;time.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482237">//&nbsp;This&nbsp;happens&nbsp;in&nbsp;fixed&nbsp;locations&nbsp;like&nbsp;&#34;Etc/GMT0&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482291">tx</span>&nbsp;<span class="op" id="2482294">=</span>&nbsp;<span class="builtinfunc" id="2482296">append</span><span class="op" id="2482302">(</span><span class="ident" id="2482303">tx</span><span class="op" id="2482305">,</span>&nbsp;<span class="ident" id="2482307">zoneTrans</span><span class="op" id="2482316">{</span><span class="ident" id="2482317">when</span><span class="op" id="2482321">:</span>&nbsp;<span class="ident" id="2482323">alpha</span><span class="op" id="2482328">,</span>&nbsp;<span class="ident" id="2482330">index</span><span class="op" id="2482335">:</span>&nbsp;<span class="num" id="2482337">0</span><span class="op" id="2482338">}</span><span class="op" id="2482339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482346">//&nbsp;Committed&nbsp;to&nbsp;succeed.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482372">l</span>&nbsp;<span class="op" id="2482374">=</span>&nbsp;<span class="op" id="2482376">&amp;</span><span class="ident" id="2482377">Location</span><span class="op" id="2482385">{</span><span class="ident" id="2482386">zone</span><span class="op" id="2482390">:</span>&nbsp;<span class="ident" id="2482392">zone</span><span class="op" id="2482396">,</span>&nbsp;<span class="ident" id="2482398">tx</span><span class="op" id="2482400">:</span>&nbsp;<span class="ident" id="2482402">tx</span><span class="op" id="2482404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482408">//&nbsp;Fill&nbsp;in&nbsp;the&nbsp;cache&nbsp;with&nbsp;information&nbsp;about&nbsp;right&nbsp;now,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482464">//&nbsp;since&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;common&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482511">sec</span><span class="op" id="2482514">,</span>&nbsp;<span class="ident" id="2482516">_</span>&nbsp;<span class="op" id="2482518">:=</span>&nbsp;<span class="ident" id="2482521">now</span><span class="op" id="2482524">(</span><span class="op" id="2482525">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482528">for</span>&nbsp;<span class="ident" id="2482532">i</span>&nbsp;<span class="op" id="2482534">:=</span>&nbsp;<span class="keyword" id="2482537">range</span>&nbsp;<span class="ident" id="2482543">tx</span>&nbsp;<span class="op" id="2482546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482550">if</span>&nbsp;<span class="ident" id="2482553">tx</span><span class="op" id="2482555">[</span><span class="ident" id="2482556">i</span><span class="op" id="2482557">]</span><span class="op" id="2482558">.</span><span class="ident" id="2482559">when</span>&nbsp;<span class="op" id="2482564">&lt;=</span>&nbsp;<span class="ident" id="2482567">sec</span>&nbsp;<span class="op" id="2482571">&amp;&amp;</span>&nbsp;<span class="op" id="2482574">(</span><span class="ident" id="2482575">i</span><span class="op" id="2482576">+</span><span class="num" id="2482577">1</span>&nbsp;<span class="op" id="2482579">==</span>&nbsp;<span class="builtinfunc" id="2482582">len</span><span class="op" id="2482585">(</span><span class="ident" id="2482586">tx</span><span class="op" id="2482588">)</span>&nbsp;<span class="op" id="2482590">||</span>&nbsp;<span class="ident" id="2482593">sec</span>&nbsp;<span class="op" id="2482597">&lt;</span>&nbsp;<span class="ident" id="2482599">tx</span><span class="op" id="2482601">[</span><span class="ident" id="2482602">i</span><span class="op" id="2482603">+</span><span class="num" id="2482604">1</span><span class="op" id="2482605">]</span><span class="op" id="2482606">.</span><span class="ident" id="2482607">when</span><span class="op" id="2482611">)</span>&nbsp;<span class="op" id="2482613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482618">l</span><span class="op" id="2482619">.</span><span class="ident" id="2482620">cacheStart</span>&nbsp;<span class="op" id="2482631">=</span>&nbsp;<span class="ident" id="2482633">tx</span><span class="op" id="2482635">[</span><span class="ident" id="2482636">i</span><span class="op" id="2482637">]</span><span class="op" id="2482638">.</span><span class="ident" id="2482639">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482647">l</span><span class="op" id="2482648">.</span><span class="ident" id="2482649">cacheEnd</span>&nbsp;<span class="op" id="2482658">=</span>&nbsp;<span class="ident" id="2482660">omega</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482669">if</span>&nbsp;<span class="ident" id="2482672">i</span><span class="op" id="2482673">+</span><span class="num" id="2482674">1</span>&nbsp;<span class="op" id="2482676">&lt;</span>&nbsp;<span class="builtinfunc" id="2482678">len</span><span class="op" id="2482681">(</span><span class="ident" id="2482682">tx</span><span class="op" id="2482684">)</span>&nbsp;<span class="op" id="2482686">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482692">l</span><span class="op" id="2482693">.</span><span class="ident" id="2482694">cacheEnd</span>&nbsp;<span class="op" id="2482703">=</span>&nbsp;<span class="ident" id="2482705">tx</span><span class="op" id="2482707">[</span><span class="ident" id="2482708">i</span><span class="op" id="2482709">+</span><span class="num" id="2482710">1</span><span class="op" id="2482711">]</span><span class="op" id="2482712">.</span><span class="ident" id="2482713">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482726">l</span><span class="op" id="2482727">.</span><span class="ident" id="2482728">cacheZone</span>&nbsp;<span class="op" id="2482738">=</span>&nbsp;<span class="op" id="2482740">&amp;</span><span class="ident" id="2482741">l</span><span class="op" id="2482742">.</span><span class="ident" id="2482743">zone</span><span class="op" id="2482747">[</span><span class="ident" id="2482748">tx</span><span class="op" id="2482750">[</span><span class="ident" id="2482751">i</span><span class="op" id="2482752">]</span><span class="op" id="2482753">.</span><span class="ident" id="2482754">index</span><span class="op" id="2482759">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482766">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482770">return</span>&nbsp;<span class="ident" id="2482777">l</span><span class="op" id="2482778">,</span>&nbsp;<span class="ident" id="2482780">nil</span><br>
<span class="lineno"></span><span class="op" id="2482784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2482787">func</span>&nbsp;<span class="ident" id="2482792">loadZoneFile</span><span class="op" id="2482804">(</span><span class="ident" id="2482805">dir</span><span class="op" id="2482808">,</span>&nbsp;<span class="ident" id="2482810">name</span>&nbsp;<span class="builtintype" id="2482815">string</span><span class="op" id="2482821">)</span>&nbsp;<span class="op" id="2482823">(</span><span class="ident" id="2482824">l</span>&nbsp;<span class="op" id="2482826">*</span><span class="ident" id="2482827">Location</span><span class="op" id="2482835">,</span>&nbsp;<span class="ident" id="2482837">err</span>&nbsp;<span class="builtintype" id="2482841">error</span><span class="op" id="2482846">)</span>&nbsp;<span class="op" id="2482848">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482851">if</span>&nbsp;<span class="builtinfunc" id="2482854">len</span><span class="op" id="2482857">(</span><span class="ident" id="2482858">dir</span><span class="op" id="2482861">)</span>&nbsp;<span class="op" id="2482863">&gt;</span>&nbsp;<span class="num" id="2482865">4</span>&nbsp;<span class="op" id="2482867">&amp;&amp;</span>&nbsp;<span class="ident" id="2482870">dir</span><span class="op" id="2482873">[</span><span class="builtinfunc" id="2482874">len</span><span class="op" id="2482877">(</span><span class="ident" id="2482878">dir</span><span class="op" id="2482881">)</span><span class="op" id="2482882">-</span><span class="num" id="2482883">4</span><span class="op" id="2482884">:</span><span class="op" id="2482885">]</span>&nbsp;<span class="op" id="2482887">==</span>&nbsp;<span class="string" id="2482890">&#34;.zip&#34;</span>&nbsp;<span class="op" id="2482897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482901">return</span>&nbsp;<span class="ident" id="2482908">loadZoneZip</span><span class="op" id="2482919">(</span><span class="ident" id="2482920">dir</span><span class="op" id="2482923">,</span>&nbsp;<span class="ident" id="2482925">name</span><span class="op" id="2482929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482935">if</span>&nbsp;<span class="ident" id="2482938">dir</span>&nbsp;<span class="op" id="2482942">!=</span>&nbsp;<span class="string" id="2482945">&#34;&#34;</span>&nbsp;<span class="op" id="2482948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482952">name</span>&nbsp;<span class="op" id="2482957">=</span>&nbsp;<span class="ident" id="2482959">dir</span>&nbsp;<span class="op" id="2482963">+</span>&nbsp;<span class="string" id="2482965">&#34;/&#34;</span>&nbsp;<span class="op" id="2482969">+</span>&nbsp;<span class="ident" id="2482971">name</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482980">buf</span><span class="op" id="2482983">,</span>&nbsp;<span class="ident" id="2482985">err</span>&nbsp;<span class="op" id="2482989">:=</span>&nbsp;<span class="ident" id="2482992">readFile</span><span class="op" id="2483000">(</span><span class="ident" id="2483001">name</span><span class="op" id="2483005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483008">if</span>&nbsp;<span class="ident" id="2483011">err</span>&nbsp;<span class="op" id="2483015">!=</span>&nbsp;<span class="ident" id="2483018">nil</span>&nbsp;<span class="op" id="2483022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483026">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483034">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483037">return</span>&nbsp;<span class="ident" id="2483044">loadZoneData</span><span class="op" id="2483056">(</span><span class="ident" id="2483057">buf</span><span class="op" id="2483060">)</span><br>
<span class="lineno"></span><span class="op" id="2483062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2483065">//&nbsp;There&nbsp;are&nbsp;500+&nbsp;zoneinfo&nbsp;files.&nbsp;&nbsp;Rather&nbsp;than&nbsp;distribute&nbsp;them&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2483132">//&nbsp;individually,&nbsp;we&nbsp;ship&nbsp;them&nbsp;in&nbsp;an&nbsp;uncompressed&nbsp;zip&nbsp;file.</span><br>
<span class="lineno">215</span><span class="comment" id="2483191">//&nbsp;Used&nbsp;this&nbsp;way,&nbsp;the&nbsp;zip&nbsp;file&nbsp;format&nbsp;serves&nbsp;as&nbsp;a&nbsp;commonly&nbsp;readable</span><br>
<span class="lineno"></span><span class="comment" id="2483259">//&nbsp;container&nbsp;for&nbsp;the&nbsp;individual&nbsp;small&nbsp;files.&nbsp;&nbsp;We&nbsp;choose&nbsp;zip&nbsp;over&nbsp;tar</span><br>
<span class="lineno"></span><span class="comment" id="2483328">//&nbsp;because&nbsp;zip&nbsp;files&nbsp;have&nbsp;a&nbsp;contiguous&nbsp;table&nbsp;of&nbsp;contents,&nbsp;making</span><br>
<span class="lineno"></span><span class="comment" id="2483393">//&nbsp;individual&nbsp;file&nbsp;lookups&nbsp;faster,&nbsp;and&nbsp;because&nbsp;the&nbsp;per-file&nbsp;overhead</span><br>
<span class="lineno"></span><span class="comment" id="2483462">//&nbsp;in&nbsp;a&nbsp;zip&nbsp;file&nbsp;is&nbsp;considerably&nbsp;less&nbsp;than&nbsp;tar&#39;s&nbsp;512&nbsp;bytes.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2483523">//&nbsp;get4&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;32-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2483576">func</span>&nbsp;<span class="ident" id="2483581">get4</span><span class="op" id="2483585">(</span><span class="ident" id="2483586">b</span>&nbsp;<span class="op" id="2483588">[</span><span class="op" id="2483589">]</span><span class="builtintype" id="2483590">byte</span><span class="op" id="2483594">)</span>&nbsp;<span class="builtintype" id="2483596">int</span>&nbsp;<span class="op" id="2483600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483603">if</span>&nbsp;<span class="builtinfunc" id="2483606">len</span><span class="op" id="2483609">(</span><span class="ident" id="2483610">b</span><span class="op" id="2483611">)</span>&nbsp;<span class="op" id="2483613">&lt;</span>&nbsp;<span class="num" id="2483615">4</span>&nbsp;<span class="op" id="2483617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483621">return</span>&nbsp;<span class="num" id="2483628">0</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483634">return</span>&nbsp;<span class="builtintype" id="2483641">int</span><span class="op" id="2483644">(</span><span class="ident" id="2483645">b</span><span class="op" id="2483646">[</span><span class="num" id="2483647">0</span><span class="op" id="2483648">]</span><span class="op" id="2483649">)</span>&nbsp;<span class="op" id="2483651">|</span>&nbsp;<span class="builtintype" id="2483653">int</span><span class="op" id="2483656">(</span><span class="ident" id="2483657">b</span><span class="op" id="2483658">[</span><span class="num" id="2483659">1</span><span class="op" id="2483660">]</span><span class="op" id="2483661">)</span><span class="op" id="2483662">&lt;&lt;</span><span class="num" id="2483664">8</span>&nbsp;<span class="op" id="2483666">|</span>&nbsp;<span class="builtintype" id="2483668">int</span><span class="op" id="2483671">(</span><span class="ident" id="2483672">b</span><span class="op" id="2483673">[</span><span class="num" id="2483674">2</span><span class="op" id="2483675">]</span><span class="op" id="2483676">)</span><span class="op" id="2483677">&lt;&lt;</span><span class="num" id="2483679">16</span>&nbsp;<span class="op" id="2483682">|</span>&nbsp;<span class="builtintype" id="2483684">int</span><span class="op" id="2483687">(</span><span class="ident" id="2483688">b</span><span class="op" id="2483689">[</span><span class="num" id="2483690">3</span><span class="op" id="2483691">]</span><span class="op" id="2483692">)</span><span class="op" id="2483693">&lt;&lt;</span><span class="num" id="2483695">24</span><br>
<span class="lineno"></span><span class="op" id="2483698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2483701">//&nbsp;get2&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;16-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno">230</span><span class="keyword" id="2483754">func</span>&nbsp;<span class="ident" id="2483759">get2</span><span class="op" id="2483763">(</span><span class="ident" id="2483764">b</span>&nbsp;<span class="op" id="2483766">[</span><span class="op" id="2483767">]</span><span class="builtintype" id="2483768">byte</span><span class="op" id="2483772">)</span>&nbsp;<span class="builtintype" id="2483774">int</span>&nbsp;<span class="op" id="2483778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483781">if</span>&nbsp;<span class="builtinfunc" id="2483784">len</span><span class="op" id="2483787">(</span><span class="ident" id="2483788">b</span><span class="op" id="2483789">)</span>&nbsp;<span class="op" id="2483791">&lt;</span>&nbsp;<span class="num" id="2483793">2</span>&nbsp;<span class="op" id="2483795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483799">return</span>&nbsp;<span class="num" id="2483806">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483812">return</span>&nbsp;<span class="builtintype" id="2483819">int</span><span class="op" id="2483822">(</span><span class="ident" id="2483823">b</span><span class="op" id="2483824">[</span><span class="num" id="2483825">0</span><span class="op" id="2483826">]</span><span class="op" id="2483827">)</span>&nbsp;<span class="op" id="2483829">|</span>&nbsp;<span class="builtintype" id="2483831">int</span><span class="op" id="2483834">(</span><span class="ident" id="2483835">b</span><span class="op" id="2483836">[</span><span class="num" id="2483837">1</span><span class="op" id="2483838">]</span><span class="op" id="2483839">)</span><span class="op" id="2483840">&lt;&lt;</span><span class="num" id="2483842">8</span><br>
<span class="lineno">235</span><span class="op" id="2483844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2483847">func</span>&nbsp;<span class="ident" id="2483852">loadZoneZip</span><span class="op" id="2483863">(</span><span class="ident" id="2483864">zipfile</span><span class="op" id="2483871">,</span>&nbsp;<span class="ident" id="2483873">name</span>&nbsp;<span class="builtintype" id="2483878">string</span><span class="op" id="2483884">)</span>&nbsp;<span class="op" id="2483886">(</span><span class="ident" id="2483887">l</span>&nbsp;<span class="op" id="2483889">*</span><span class="ident" id="2483890">Location</span><span class="op" id="2483898">,</span>&nbsp;<span class="ident" id="2483900">err</span>&nbsp;<span class="builtintype" id="2483904">error</span><span class="op" id="2483909">)</span>&nbsp;<span class="op" id="2483911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483914">fd</span><span class="op" id="2483916">,</span>&nbsp;<span class="ident" id="2483918">err</span>&nbsp;<span class="op" id="2483922">:=</span>&nbsp;<span class="ident" id="2483925">open</span><span class="op" id="2483929">(</span><span class="ident" id="2483930">zipfile</span><span class="op" id="2483937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483940">if</span>&nbsp;<span class="ident" id="2483943">err</span>&nbsp;<span class="op" id="2483947">!=</span>&nbsp;<span class="ident" id="2483950">nil</span>&nbsp;<span class="op" id="2483954">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483958">return</span>&nbsp;<span class="ident" id="2483965">nil</span><span class="op" id="2483968">,</span>&nbsp;<span class="ident" id="2483970">errors</span><span class="op" id="2483976">.</span><span class="ident" id="2483977">New</span><span class="op" id="2483980">(</span><span class="string" id="2483981">&#34;open&nbsp;&#34;</span>&nbsp;<span class="op" id="2483989">+</span>&nbsp;<span class="ident" id="2483991">zipfile</span>&nbsp;<span class="op" id="2483999">+</span>&nbsp;<span class="string" id="2484001">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2484006">+</span>&nbsp;<span class="ident" id="2484008">err</span><span class="op" id="2484011">.</span><span class="ident" id="2484012">Error</span><span class="op" id="2484017">(</span><span class="op" id="2484018">)</span><span class="op" id="2484019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484025">defer</span>&nbsp;<span class="ident" id="2484031">closefd</span><span class="op" id="2484038">(</span><span class="ident" id="2484039">fd</span><span class="op" id="2484041">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484045">const</span>&nbsp;<span class="op" id="2484051">(</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484055">zecheader</span>&nbsp;<span class="op" id="2484065">=</span>&nbsp;<span class="num" id="2484067">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484080">zcheader</span>&nbsp;&nbsp;<span class="op" id="2484090">=</span>&nbsp;<span class="num" id="2484092">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484105">ztailsize</span>&nbsp;<span class="op" id="2484115">=</span>&nbsp;<span class="num" id="2484117">22</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484123">zheadersize</span>&nbsp;<span class="op" id="2484135">=</span>&nbsp;<span class="num" id="2484137">30</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484142">zheader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2484154">=</span>&nbsp;<span class="num" id="2484156">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484168">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484172">buf</span>&nbsp;<span class="op" id="2484176">:=</span>&nbsp;<span class="builtinfunc" id="2484179">make</span><span class="op" id="2484183">(</span><span class="op" id="2484184">[</span><span class="op" id="2484185">]</span><span class="builtintype" id="2484186">byte</span><span class="op" id="2484190">,</span>&nbsp;<span class="ident" id="2484192">ztailsize</span><span class="op" id="2484201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484204">if</span>&nbsp;<span class="ident" id="2484207">err</span>&nbsp;<span class="op" id="2484211">:=</span>&nbsp;<span class="ident" id="2484214">preadn</span><span class="op" id="2484220">(</span><span class="ident" id="2484221">fd</span><span class="op" id="2484223">,</span>&nbsp;<span class="ident" id="2484225">buf</span><span class="op" id="2484228">,</span>&nbsp;<span class="op" id="2484230">-</span><span class="ident" id="2484231">ztailsize</span><span class="op" id="2484240">)</span><span class="op" id="2484241">;</span>&nbsp;<span class="ident" id="2484243">err</span>&nbsp;<span class="op" id="2484247">!=</span>&nbsp;<span class="ident" id="2484250">nil</span>&nbsp;<span class="op" id="2484254">||</span>&nbsp;<span class="ident" id="2484257">get4</span><span class="op" id="2484261">(</span><span class="ident" id="2484262">buf</span><span class="op" id="2484265">)</span>&nbsp;<span class="op" id="2484267">!=</span>&nbsp;<span class="ident" id="2484270">zecheader</span>&nbsp;<span class="op" id="2484280">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484284">return</span>&nbsp;<span class="ident" id="2484291">nil</span><span class="op" id="2484294">,</span>&nbsp;<span class="ident" id="2484296">errors</span><span class="op" id="2484302">.</span><span class="ident" id="2484303">New</span><span class="op" id="2484306">(</span><span class="string" id="2484307">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2484327">+</span>&nbsp;<span class="ident" id="2484329">zipfile</span><span class="op" id="2484336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484342">n</span>&nbsp;<span class="op" id="2484344">:=</span>&nbsp;<span class="ident" id="2484347">get2</span><span class="op" id="2484351">(</span><span class="ident" id="2484352">buf</span><span class="op" id="2484355">[</span><span class="num" id="2484356">10</span><span class="op" id="2484358">:</span><span class="op" id="2484359">]</span><span class="op" id="2484360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484363">size</span>&nbsp;<span class="op" id="2484368">:=</span>&nbsp;<span class="ident" id="2484371">get4</span><span class="op" id="2484375">(</span><span class="ident" id="2484376">buf</span><span class="op" id="2484379">[</span><span class="num" id="2484380">12</span><span class="op" id="2484382">:</span><span class="op" id="2484383">]</span><span class="op" id="2484384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484387">off</span>&nbsp;<span class="op" id="2484391">:=</span>&nbsp;<span class="ident" id="2484394">get4</span><span class="op" id="2484398">(</span><span class="ident" id="2484399">buf</span><span class="op" id="2484402">[</span><span class="num" id="2484403">16</span><span class="op" id="2484405">:</span><span class="op" id="2484406">]</span><span class="op" id="2484407">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484411">buf</span>&nbsp;<span class="op" id="2484415">=</span>&nbsp;<span class="builtinfunc" id="2484417">make</span><span class="op" id="2484421">(</span><span class="op" id="2484422">[</span><span class="op" id="2484423">]</span><span class="builtintype" id="2484424">byte</span><span class="op" id="2484428">,</span>&nbsp;<span class="ident" id="2484430">size</span><span class="op" id="2484434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484437">if</span>&nbsp;<span class="ident" id="2484440">err</span>&nbsp;<span class="op" id="2484444">:=</span>&nbsp;<span class="ident" id="2484447">preadn</span><span class="op" id="2484453">(</span><span class="ident" id="2484454">fd</span><span class="op" id="2484456">,</span>&nbsp;<span class="ident" id="2484458">buf</span><span class="op" id="2484461">,</span>&nbsp;<span class="ident" id="2484463">off</span><span class="op" id="2484466">)</span><span class="op" id="2484467">;</span>&nbsp;<span class="ident" id="2484469">err</span>&nbsp;<span class="op" id="2484473">!=</span>&nbsp;<span class="ident" id="2484476">nil</span>&nbsp;<span class="op" id="2484480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484484">return</span>&nbsp;<span class="ident" id="2484491">nil</span><span class="op" id="2484494">,</span>&nbsp;<span class="ident" id="2484496">errors</span><span class="op" id="2484502">.</span><span class="ident" id="2484503">New</span><span class="op" id="2484506">(</span><span class="string" id="2484507">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2484527">+</span>&nbsp;<span class="ident" id="2484529">zipfile</span><span class="op" id="2484536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484539">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484543">for</span>&nbsp;<span class="ident" id="2484547">i</span>&nbsp;<span class="op" id="2484549">:=</span>&nbsp;<span class="num" id="2484552">0</span><span class="op" id="2484553">;</span>&nbsp;<span class="ident" id="2484555">i</span>&nbsp;<span class="op" id="2484557">&lt;</span>&nbsp;<span class="ident" id="2484559">n</span><span class="op" id="2484560">;</span>&nbsp;<span class="ident" id="2484562">i</span><span class="op" id="2484563">++</span>&nbsp;<span class="op" id="2484566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484570">//&nbsp;zip&nbsp;entry&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484593">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484609">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspmadevers[1]</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484628">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspmadeos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484645">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484663">//&nbsp;&nbsp;&nbsp;&nbsp7&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484679">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484695">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484711">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484730">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484749">//&nbsp;&nbsp;&nbsp;&nbsp16&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484764">//&nbsp;&nbsp;&nbsp;&nbsp20&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484781">//&nbsp;&nbsp;&nbsp;&nbsp24&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484800">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484819">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484835">//&nbsp;&nbsp;&nbsp;&nbsp32&nbsp;&nbsp;&nbsp;&nbspfclen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484852">//&nbsp;&nbsp;&nbsp;&nbsp34&nbsp;&nbsp;&nbsp;&nbspdisknum[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484871">//&nbsp;&nbsp;&nbsp;&nbsp36&nbsp;&nbsp;&nbsp;&nbspiattr[2]</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484888">//&nbsp;&nbsp;&nbsp;&nbsp38&nbsp;&nbsp;&nbsp;&nbspeattr[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484905">//&nbsp;&nbsp;&nbsp;&nbsp42&nbsp;&nbsp;&nbsp;&nbspoff[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484920">//&nbsp;&nbsp;&nbsp;&nbsp46&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484942">//&nbsp;&nbsp;&nbsp;&nbsp46+namelen+xlen+fclen&nbsp;-&nbsp;next&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2484983">//</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484988">if</span>&nbsp;<span class="ident" id="2484991">get4</span><span class="op" id="2484995">(</span><span class="ident" id="2484996">buf</span><span class="op" id="2484999">)</span>&nbsp;<span class="op" id="2485001">!=</span>&nbsp;<span class="ident" id="2485004">zcheader</span>&nbsp;<span class="op" id="2485013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485018">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485030">meth</span>&nbsp;<span class="op" id="2485035">:=</span>&nbsp;<span class="ident" id="2485038">get2</span><span class="op" id="2485042">(</span><span class="ident" id="2485043">buf</span><span class="op" id="2485046">[</span><span class="num" id="2485047">10</span><span class="op" id="2485049">:</span><span class="op" id="2485050">]</span><span class="op" id="2485051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485055">size</span>&nbsp;<span class="op" id="2485060">:=</span>&nbsp;<span class="ident" id="2485063">get4</span><span class="op" id="2485067">(</span><span class="ident" id="2485068">buf</span><span class="op" id="2485071">[</span><span class="num" id="2485072">24</span><span class="op" id="2485074">:</span><span class="op" id="2485075">]</span><span class="op" id="2485076">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485080">namelen</span>&nbsp;<span class="op" id="2485088">:=</span>&nbsp;<span class="ident" id="2485091">get2</span><span class="op" id="2485095">(</span><span class="ident" id="2485096">buf</span><span class="op" id="2485099">[</span><span class="num" id="2485100">28</span><span class="op" id="2485102">:</span><span class="op" id="2485103">]</span><span class="op" id="2485104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485108">xlen</span>&nbsp;<span class="op" id="2485113">:=</span>&nbsp;<span class="ident" id="2485116">get2</span><span class="op" id="2485120">(</span><span class="ident" id="2485121">buf</span><span class="op" id="2485124">[</span><span class="num" id="2485125">30</span><span class="op" id="2485127">:</span><span class="op" id="2485128">]</span><span class="op" id="2485129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485133">fclen</span>&nbsp;<span class="op" id="2485139">:=</span>&nbsp;<span class="ident" id="2485142">get2</span><span class="op" id="2485146">(</span><span class="ident" id="2485147">buf</span><span class="op" id="2485150">[</span><span class="num" id="2485151">32</span><span class="op" id="2485153">:</span><span class="op" id="2485154">]</span><span class="op" id="2485155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485159">off</span>&nbsp;<span class="op" id="2485163">:=</span>&nbsp;<span class="ident" id="2485166">get4</span><span class="op" id="2485170">(</span><span class="ident" id="2485171">buf</span><span class="op" id="2485174">[</span><span class="num" id="2485175">42</span><span class="op" id="2485177">:</span><span class="op" id="2485178">]</span><span class="op" id="2485179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485183">zname</span>&nbsp;<span class="op" id="2485189">:=</span>&nbsp;<span class="ident" id="2485192">buf</span><span class="op" id="2485195">[</span><span class="num" id="2485196">46</span>&nbsp;<span class="op" id="2485199">:</span>&nbsp;<span class="num" id="2485201">46</span><span class="op" id="2485203">+</span><span class="ident" id="2485204">namelen</span><span class="op" id="2485211">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485215">buf</span>&nbsp;<span class="op" id="2485219">=</span>&nbsp;<span class="ident" id="2485221">buf</span><span class="op" id="2485224">[</span><span class="num" id="2485225">46</span><span class="op" id="2485227">+</span><span class="ident" id="2485228">namelen</span><span class="op" id="2485235">+</span><span class="ident" id="2485236">xlen</span><span class="op" id="2485240">+</span><span class="ident" id="2485241">fclen</span><span class="op" id="2485246">:</span><span class="op" id="2485247">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485251">if</span>&nbsp;<span class="builtintype" id="2485254">string</span><span class="op" id="2485260">(</span><span class="ident" id="2485261">zname</span><span class="op" id="2485266">)</span>&nbsp;<span class="op" id="2485268">!=</span>&nbsp;<span class="ident" id="2485271">name</span>&nbsp;<span class="op" id="2485276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485281">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485296">if</span>&nbsp;<span class="ident" id="2485299">meth</span>&nbsp;<span class="op" id="2485304">!=</span>&nbsp;<span class="num" id="2485307">0</span>&nbsp;<span class="op" id="2485309">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485314">return</span>&nbsp;<span class="ident" id="2485321">nil</span><span class="op" id="2485324">,</span>&nbsp;<span class="ident" id="2485326">errors</span><span class="op" id="2485332">.</span><span class="ident" id="2485333">New</span><span class="op" id="2485336">(</span><span class="string" id="2485337">&#34;unsupported&nbsp;compression&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2485368">+</span>&nbsp;<span class="ident" id="2485370">name</span>&nbsp;<span class="op" id="2485375">+</span>&nbsp;<span class="string" id="2485377">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2485384">+</span>&nbsp;<span class="ident" id="2485386">zipfile</span><span class="op" id="2485393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485402">//&nbsp;zip&nbsp;per-file&nbsp;header&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485435">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485451">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485469">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485485">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485501">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485516">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485535">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485554">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485569">//&nbsp;&nbsp;&nbsp;&nbsp18&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485586">//&nbsp;&nbsp;&nbsp;&nbsp22&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485605">//&nbsp;&nbsp;&nbsp;&nbsp26&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485624">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485640">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485662">//&nbsp;&nbsp;&nbsp;&nbsp30+namelen+xlen&nbsp;-&nbsp;file&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485695">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485700">buf</span>&nbsp;<span class="op" id="2485704">=</span>&nbsp;<span class="builtinfunc" id="2485706">make</span><span class="op" id="2485710">(</span><span class="op" id="2485711">[</span><span class="op" id="2485712">]</span><span class="builtintype" id="2485713">byte</span><span class="op" id="2485717">,</span>&nbsp;<span class="ident" id="2485719">zheadersize</span><span class="op" id="2485730">+</span><span class="ident" id="2485731">namelen</span><span class="op" id="2485738">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485742">if</span>&nbsp;<span class="ident" id="2485745">err</span>&nbsp;<span class="op" id="2485749">:=</span>&nbsp;<span class="ident" id="2485752">preadn</span><span class="op" id="2485758">(</span><span class="ident" id="2485759">fd</span><span class="op" id="2485761">,</span>&nbsp;<span class="ident" id="2485763">buf</span><span class="op" id="2485766">,</span>&nbsp;<span class="ident" id="2485768">off</span><span class="op" id="2485771">)</span><span class="op" id="2485772">;</span>&nbsp;<span class="ident" id="2485774">err</span>&nbsp;<span class="op" id="2485778">!=</span>&nbsp;<span class="ident" id="2485781">nil</span>&nbsp;<span class="op" id="2485785">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485791">get4</span><span class="op" id="2485795">(</span><span class="ident" id="2485796">buf</span><span class="op" id="2485799">)</span>&nbsp;<span class="op" id="2485801">!=</span>&nbsp;<span class="ident" id="2485804">zheader</span>&nbsp;<span class="op" id="2485812">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485818">get2</span><span class="op" id="2485822">(</span><span class="ident" id="2485823">buf</span><span class="op" id="2485826">[</span><span class="num" id="2485827">8</span><span class="op" id="2485828">:</span><span class="op" id="2485829">]</span><span class="op" id="2485830">)</span>&nbsp;<span class="op" id="2485832">!=</span>&nbsp;<span class="ident" id="2485835">meth</span>&nbsp;<span class="op" id="2485840">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485846">get2</span><span class="op" id="2485850">(</span><span class="ident" id="2485851">buf</span><span class="op" id="2485854">[</span><span class="num" id="2485855">26</span><span class="op" id="2485857">:</span><span class="op" id="2485858">]</span><span class="op" id="2485859">)</span>&nbsp;<span class="op" id="2485861">!=</span>&nbsp;<span class="ident" id="2485864">namelen</span>&nbsp;<span class="op" id="2485872">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2485878">string</span><span class="op" id="2485884">(</span><span class="ident" id="2485885">buf</span><span class="op" id="2485888">[</span><span class="num" id="2485889">30</span><span class="op" id="2485891">:</span><span class="num" id="2485892">30</span><span class="op" id="2485894">+</span><span class="ident" id="2485895">namelen</span><span class="op" id="2485902">]</span><span class="op" id="2485903">)</span>&nbsp;<span class="op" id="2485905">!=</span>&nbsp;<span class="ident" id="2485908">name</span>&nbsp;<span class="op" id="2485913">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485918">return</span>&nbsp;<span class="ident" id="2485925">nil</span><span class="op" id="2485928">,</span>&nbsp;<span class="ident" id="2485930">errors</span><span class="op" id="2485936">.</span><span class="ident" id="2485937">New</span><span class="op" id="2485940">(</span><span class="string" id="2485941">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2485961">+</span>&nbsp;<span class="ident" id="2485963">zipfile</span><span class="op" id="2485970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485978">xlen</span>&nbsp;<span class="op" id="2485983">=</span>&nbsp;<span class="ident" id="2485985">get2</span><span class="op" id="2485989">(</span><span class="ident" id="2485990">buf</span><span class="op" id="2485993">[</span><span class="num" id="2485994">28</span><span class="op" id="2485996">:</span><span class="op" id="2485997">]</span><span class="op" id="2485998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2486003">buf</span>&nbsp;<span class="op" id="2486007">=</span>&nbsp;<span class="builtinfunc" id="2486009">make</span><span class="op" id="2486013">(</span><span class="op" id="2486014">[</span><span class="op" id="2486015">]</span><span class="builtintype" id="2486016">byte</span><span class="op" id="2486020">,</span>&nbsp;<span class="ident" id="2486022">size</span><span class="op" id="2486026">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2486030">if</span>&nbsp;<span class="ident" id="2486033">err</span>&nbsp;<span class="op" id="2486037">:=</span>&nbsp;<span class="ident" id="2486040">preadn</span><span class="op" id="2486046">(</span><span class="ident" id="2486047">fd</span><span class="op" id="2486049">,</span>&nbsp;<span class="ident" id="2486051">buf</span><span class="op" id="2486054">,</span>&nbsp;<span class="ident" id="2486056">off</span><span class="op" id="2486059">+</span><span class="num" id="2486060">30</span><span class="op" id="2486062">+</span><span class="ident" id="2486063">namelen</span><span class="op" id="2486070">+</span><span class="ident" id="2486071">xlen</span><span class="op" id="2486075">)</span><span class="op" id="2486076">;</span>&nbsp;<span class="ident" id="2486078">err</span>&nbsp;<span class="op" id="2486082">!=</span>&nbsp;<span class="ident" id="2486085">nil</span>&nbsp;<span class="op" id="2486089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2486094">return</span>&nbsp;<span class="ident" id="2486101">nil</span><span class="op" id="2486104">,</span>&nbsp;<span class="ident" id="2486106">errors</span><span class="op" id="2486112">.</span><span class="ident" id="2486113">New</span><span class="op" id="2486116">(</span><span class="string" id="2486117">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2486137">+</span>&nbsp;<span class="ident" id="2486139">zipfile</span><span class="op" id="2486146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2486150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2486155">return</span>&nbsp;<span class="ident" id="2486162">loadZoneData</span><span class="op" id="2486174">(</span><span class="ident" id="2486175">buf</span><span class="op" id="2486178">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2486181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2486185">return</span>&nbsp;<span class="ident" id="2486192">nil</span><span class="op" id="2486195">,</span>&nbsp;<span class="ident" id="2486197">errors</span><span class="op" id="2486203">.</span><span class="ident" id="2486204">New</span><span class="op" id="2486207">(</span><span class="string" id="2486208">&#34;cannot&nbsp;find&nbsp;&#34;</span>&nbsp;<span class="op" id="2486223">+</span>&nbsp;<span class="ident" id="2486225">name</span>&nbsp;<span class="op" id="2486230">+</span>&nbsp;<span class="string" id="2486232">&#34;&nbsp;in&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2486248">+</span>&nbsp;<span class="ident" id="2486250">zipfile</span><span class="op" id="2486257">)</span><br>
<span class="lineno"></span><span class="op" id="2486259">}</span>
</div>
</body>
</html>
