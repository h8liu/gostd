<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6966386">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6966441">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6966495">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6966546">package</span>&nbsp;<span class="ident" id="6966554">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6966559">import</span>&nbsp;<span class="op" id="6966566">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966569">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966578">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966592">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966599">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966605">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966618">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966624">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966635">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966646">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966657">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6966664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6966667">type</span>&nbsp;<span class="ident" id="6966672">untarTest</span>&nbsp;<span class="keyword" id="6966682">struct</span>&nbsp;<span class="op" id="6966689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966692">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6966700">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966708">headers</span>&nbsp;<span class="op" id="6966716">[</span><span class="op" id="6966717">]</span><span class="op" id="6966718">*</span><span class="ident" id="6966719">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966727">cksums</span>&nbsp;&nbsp;<span class="op" id="6966735">[</span><span class="op" id="6966736">]</span><span class="builtintype" id="6966737">string</span><br>
<span class="lineno"></span><span class="op" id="6966744">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6966747">var</span>&nbsp;<span class="ident" id="6966751">gnuTarTest</span>&nbsp;<span class="op" id="6966762">=</span>&nbsp;<span class="op" id="6966764">&amp;</span><span class="ident" id="6966765">untarTest</span><span class="op" id="6966774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966777">file</span><span class="op" id="6966781">:</span>&nbsp;<span class="string" id="6966783">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6966801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966804">headers</span><span class="op" id="6966811">:</span>&nbsp;<span class="op" id="6966813">[</span><span class="op" id="6966814">]</span><span class="op" id="6966815">*</span><span class="ident" id="6966816">Header</span><span class="op" id="6966822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6966826">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966831">Name</span><span class="op" id="6966835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966841">&#34;small.txt&#34;</span><span class="op" id="6966852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966857">Mode</span><span class="op" id="6966861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6966867">0640</span><span class="op" id="6966871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966876">Uid</span><span class="op" id="6966879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6966886">73025</span><span class="op" id="6966891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966896">Gid</span><span class="op" id="6966899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6966906">5000</span><span class="op" id="6966910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966915">Size</span><span class="op" id="6966919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6966925">5</span><span class="op" id="6966926">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966931">ModTime</span><span class="op" id="6966938">:</span>&nbsp;&nbsp;<span class="ident" id="6966941">time</span><span class="op" id="6966945">.</span><span class="ident" id="6966946">Unix</span><span class="op" id="6966950">(</span><span class="num" id="6966951">1244428340</span><span class="op" id="6966961">,</span>&nbsp;<span class="num" id="6966963">0</span><span class="op" id="6966964">)</span><span class="op" id="6966965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966970">Typeflag</span><span class="op" id="6966978">:</span>&nbsp;<span class="string" id="6966980">&#39;0&#39;</span><span class="op" id="6966983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6966988">Uname</span><span class="op" id="6966993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6966998">&#34;dsymonds&#34;</span><span class="op" id="6967008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967013">Gname</span><span class="op" id="6967018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967023">&#34;eng&#34;</span><span class="op" id="6967028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967032">}</span><span class="op" id="6967033">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967042">Name</span><span class="op" id="6967046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967052">&#34;small2.txt&#34;</span><span class="op" id="6967064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967069">Mode</span><span class="op" id="6967073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967079">0640</span><span class="op" id="6967083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967088">Uid</span><span class="op" id="6967091">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967098">73025</span><span class="op" id="6967103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967108">Gid</span><span class="op" id="6967111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967118">5000</span><span class="op" id="6967122">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967127">Size</span><span class="op" id="6967131">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967137">11</span><span class="op" id="6967139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967144">ModTime</span><span class="op" id="6967151">:</span>&nbsp;&nbsp;<span class="ident" id="6967154">time</span><span class="op" id="6967158">.</span><span class="ident" id="6967159">Unix</span><span class="op" id="6967163">(</span><span class="num" id="6967164">1244436044</span><span class="op" id="6967174">,</span>&nbsp;<span class="num" id="6967176">0</span><span class="op" id="6967177">)</span><span class="op" id="6967178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967183">Typeflag</span><span class="op" id="6967191">:</span>&nbsp;<span class="string" id="6967193">&#39;0&#39;</span><span class="op" id="6967196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967201">Uname</span><span class="op" id="6967206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967211">&#34;dsymonds&#34;</span><span class="op" id="6967221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967226">Gname</span><span class="op" id="6967231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967236">&#34;eng&#34;</span><span class="op" id="6967241">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967245">}</span><span class="op" id="6967246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967249">}</span><span class="op" id="6967250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967253">cksums</span><span class="op" id="6967259">:</span>&nbsp;<span class="op" id="6967261">[</span><span class="op" id="6967262">]</span><span class="builtintype" id="6967263">string</span><span class="op" id="6967269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967273">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6967307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967311">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6967345">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967348">}</span><span class="op" id="6967349">,</span><br>
<span class="lineno"></span><span class="op" id="6967351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6967354">var</span>&nbsp;<span class="ident" id="6967358">sparseTarTest</span>&nbsp;<span class="op" id="6967372">=</span>&nbsp;<span class="op" id="6967374">&amp;</span><span class="ident" id="6967375">untarTest</span><span class="op" id="6967384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967387">file</span><span class="op" id="6967391">:</span>&nbsp;<span class="string" id="6967393">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6967422">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967425">headers</span><span class="op" id="6967432">:</span>&nbsp;<span class="op" id="6967434">[</span><span class="op" id="6967435">]</span><span class="op" id="6967436">*</span><span class="ident" id="6967437">Header</span><span class="op" id="6967443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967452">Name</span><span class="op" id="6967456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967462">&#34;sparse-gnu&#34;</span><span class="op" id="6967474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967479">Mode</span><span class="op" id="6967483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967489">420</span><span class="op" id="6967492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967497">Uid</span><span class="op" id="6967500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967507">1000</span><span class="op" id="6967511">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967516">Gid</span><span class="op" id="6967519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967526">1000</span><span class="op" id="6967530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967535">Size</span><span class="op" id="6967539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967545">200</span><span class="op" id="6967548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967553">ModTime</span><span class="op" id="6967560">:</span>&nbsp;&nbsp;<span class="ident" id="6967563">time</span><span class="op" id="6967567">.</span><span class="ident" id="6967568">Unix</span><span class="op" id="6967572">(</span><span class="num" id="6967573">1392395740</span><span class="op" id="6967583">,</span>&nbsp;<span class="num" id="6967585">0</span><span class="op" id="6967586">)</span><span class="op" id="6967587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967592">Typeflag</span><span class="op" id="6967600">:</span>&nbsp;<span class="num" id="6967602">0x53</span><span class="op" id="6967606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967611">Linkname</span><span class="op" id="6967619">:</span>&nbsp;<span class="string" id="6967621">&#34;&#34;</span><span class="op" id="6967623">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967628">Uname</span><span class="op" id="6967633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967638">&#34;david&#34;</span><span class="op" id="6967645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967650">Gname</span><span class="op" id="6967655">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967660">&#34;david&#34;</span><span class="op" id="6967667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967672">Devmajor</span><span class="op" id="6967680">:</span>&nbsp;<span class="num" id="6967682">0</span><span class="op" id="6967683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967688">Devminor</span><span class="op" id="6967696">:</span>&nbsp;<span class="num" id="6967698">0</span><span class="op" id="6967699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967703">}</span><span class="op" id="6967704">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967713">Name</span><span class="op" id="6967717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967723">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6967741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967746">Mode</span><span class="op" id="6967750">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967756">420</span><span class="op" id="6967759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967764">Uid</span><span class="op" id="6967767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967774">1000</span><span class="op" id="6967778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967783">Gid</span><span class="op" id="6967786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967793">1000</span><span class="op" id="6967797">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967802">Size</span><span class="op" id="6967806">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6967812">200</span><span class="op" id="6967815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967820">ModTime</span><span class="op" id="6967827">:</span>&nbsp;&nbsp;<span class="ident" id="6967830">time</span><span class="op" id="6967834">.</span><span class="ident" id="6967835">Unix</span><span class="op" id="6967839">(</span><span class="num" id="6967840">1392342187</span><span class="op" id="6967850">,</span>&nbsp;<span class="num" id="6967852">0</span><span class="op" id="6967853">)</span><span class="op" id="6967854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967859">Typeflag</span><span class="op" id="6967867">:</span>&nbsp;<span class="num" id="6967869">0x30</span><span class="op" id="6967873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967878">Linkname</span><span class="op" id="6967886">:</span>&nbsp;<span class="string" id="6967888">&#34;&#34;</span><span class="op" id="6967890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967895">Uname</span><span class="op" id="6967900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967905">&#34;david&#34;</span><span class="op" id="6967912">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967917">Gname</span><span class="op" id="6967922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967927">&#34;david&#34;</span><span class="op" id="6967934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967939">Devmajor</span><span class="op" id="6967947">:</span>&nbsp;<span class="num" id="6967949">0</span><span class="op" id="6967950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967955">Devminor</span><span class="op" id="6967963">:</span>&nbsp;<span class="num" id="6967965">0</span><span class="op" id="6967966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967970">}</span><span class="op" id="6967971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6967975">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6967980">Name</span><span class="op" id="6967984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6967990">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6968008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968013">Mode</span><span class="op" id="6968017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968023">420</span><span class="op" id="6968026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968031">Uid</span><span class="op" id="6968034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968041">1000</span><span class="op" id="6968045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968050">Gid</span><span class="op" id="6968053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968060">1000</span><span class="op" id="6968064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968069">Size</span><span class="op" id="6968073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968079">200</span><span class="op" id="6968082">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968087">ModTime</span><span class="op" id="6968094">:</span>&nbsp;&nbsp;<span class="ident" id="6968097">time</span><span class="op" id="6968101">.</span><span class="ident" id="6968102">Unix</span><span class="op" id="6968106">(</span><span class="num" id="6968107">1392340456</span><span class="op" id="6968117">,</span>&nbsp;<span class="num" id="6968119">0</span><span class="op" id="6968120">)</span><span class="op" id="6968121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968126">Typeflag</span><span class="op" id="6968134">:</span>&nbsp;<span class="num" id="6968136">0x30</span><span class="op" id="6968140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968145">Linkname</span><span class="op" id="6968153">:</span>&nbsp;<span class="string" id="6968155">&#34;&#34;</span><span class="op" id="6968157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968162">Uname</span><span class="op" id="6968167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968172">&#34;david&#34;</span><span class="op" id="6968179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968184">Gname</span><span class="op" id="6968189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968194">&#34;david&#34;</span><span class="op" id="6968201">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968206">Devmajor</span><span class="op" id="6968214">:</span>&nbsp;<span class="num" id="6968216">0</span><span class="op" id="6968217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968222">Devminor</span><span class="op" id="6968230">:</span>&nbsp;<span class="num" id="6968232">0</span><span class="op" id="6968233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968237">}</span><span class="op" id="6968238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968247">Name</span><span class="op" id="6968251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968257">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6968275">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968280">Mode</span><span class="op" id="6968284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968290">420</span><span class="op" id="6968293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968298">Uid</span><span class="op" id="6968301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968308">1000</span><span class="op" id="6968312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968317">Gid</span><span class="op" id="6968320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968327">1000</span><span class="op" id="6968331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968336">Size</span><span class="op" id="6968340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968346">200</span><span class="op" id="6968349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968354">ModTime</span><span class="op" id="6968361">:</span>&nbsp;&nbsp;<span class="ident" id="6968364">time</span><span class="op" id="6968368">.</span><span class="ident" id="6968369">Unix</span><span class="op" id="6968373">(</span><span class="num" id="6968374">1392337404</span><span class="op" id="6968384">,</span>&nbsp;<span class="num" id="6968386">0</span><span class="op" id="6968387">)</span><span class="op" id="6968388">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968393">Typeflag</span><span class="op" id="6968401">:</span>&nbsp;<span class="num" id="6968403">0x30</span><span class="op" id="6968407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968412">Linkname</span><span class="op" id="6968420">:</span>&nbsp;<span class="string" id="6968422">&#34;&#34;</span><span class="op" id="6968424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968429">Uname</span><span class="op" id="6968434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968439">&#34;david&#34;</span><span class="op" id="6968446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968451">Gname</span><span class="op" id="6968456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968461">&#34;david&#34;</span><span class="op" id="6968468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968473">Devmajor</span><span class="op" id="6968481">:</span>&nbsp;<span class="num" id="6968483">0</span><span class="op" id="6968484">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968489">Devminor</span><span class="op" id="6968497">:</span>&nbsp;<span class="num" id="6968499">0</span><span class="op" id="6968500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968504">}</span><span class="op" id="6968505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968514">Name</span><span class="op" id="6968518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968524">&#34;end&#34;</span><span class="op" id="6968529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968534">Mode</span><span class="op" id="6968538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968544">420</span><span class="op" id="6968547">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968552">Uid</span><span class="op" id="6968555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968562">1000</span><span class="op" id="6968566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968571">Gid</span><span class="op" id="6968574">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968581">1000</span><span class="op" id="6968585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968590">Size</span><span class="op" id="6968594">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6968600">4</span><span class="op" id="6968601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968606">ModTime</span><span class="op" id="6968613">:</span>&nbsp;&nbsp;<span class="ident" id="6968616">time</span><span class="op" id="6968620">.</span><span class="ident" id="6968621">Unix</span><span class="op" id="6968625">(</span><span class="num" id="6968626">1392398319</span><span class="op" id="6968636">,</span>&nbsp;<span class="num" id="6968638">0</span><span class="op" id="6968639">)</span><span class="op" id="6968640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968645">Typeflag</span><span class="op" id="6968653">:</span>&nbsp;<span class="num" id="6968655">0x30</span><span class="op" id="6968659">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968664">Linkname</span><span class="op" id="6968672">:</span>&nbsp;<span class="string" id="6968674">&#34;&#34;</span><span class="op" id="6968676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968681">Uname</span><span class="op" id="6968686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968691">&#34;david&#34;</span><span class="op" id="6968698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968703">Gname</span><span class="op" id="6968708">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968713">&#34;david&#34;</span><span class="op" id="6968720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968725">Devmajor</span><span class="op" id="6968733">:</span>&nbsp;<span class="num" id="6968735">0</span><span class="op" id="6968736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968741">Devminor</span><span class="op" id="6968749">:</span>&nbsp;<span class="num" id="6968751">0</span><span class="op" id="6968752">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968756">}</span><span class="op" id="6968757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968760">}</span><span class="op" id="6968761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6968764">cksums</span><span class="op" id="6968770">:</span>&nbsp;<span class="op" id="6968772">[</span><span class="op" id="6968773">]</span><span class="builtintype" id="6968774">string</span><span class="op" id="6968780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968784">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6968818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968822">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6968856">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968860">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6968894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968898">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6968932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6968936">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6968970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6968973">}</span><span class="op" id="6968974">,</span><br>
<span class="lineno"></span><span class="op" id="6968976">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6968979">var</span>&nbsp;<span class="ident" id="6968983">untarTests</span>&nbsp;<span class="op" id="6968994">=</span>&nbsp;<span class="op" id="6968996">[</span><span class="op" id="6968997">]</span><span class="op" id="6968998">*</span><span class="ident" id="6968999">untarTest</span><span class="op" id="6969008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969011">gnuTarTest</span><span class="op" id="6969021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969024">sparseTarTest</span><span class="op" id="6969037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969040">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969044">file</span><span class="op" id="6969048">:</span>&nbsp;<span class="string" id="6969050">&#34;testdata/star.tar&#34;</span><span class="op" id="6969069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969073">headers</span><span class="op" id="6969080">:</span>&nbsp;<span class="op" id="6969082">[</span><span class="op" id="6969083">]</span><span class="op" id="6969084">*</span><span class="ident" id="6969085">Header</span><span class="op" id="6969091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969102">Name</span><span class="op" id="6969106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969114">&#34;small.txt&#34;</span><span class="op" id="6969125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969131">Mode</span><span class="op" id="6969135">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969143">0640</span><span class="op" id="6969147">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969153">Uid</span><span class="op" id="6969156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969165">73025</span><span class="op" id="6969170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969176">Gid</span><span class="op" id="6969179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969188">5000</span><span class="op" id="6969192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969198">Size</span><span class="op" id="6969202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969210">5</span><span class="op" id="6969211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969217">ModTime</span><span class="op" id="6969224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969229">time</span><span class="op" id="6969233">.</span><span class="ident" id="6969234">Unix</span><span class="op" id="6969238">(</span><span class="num" id="6969239">1244592783</span><span class="op" id="6969249">,</span>&nbsp;<span class="num" id="6969251">0</span><span class="op" id="6969252">)</span><span class="op" id="6969253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969259">Typeflag</span><span class="op" id="6969267">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6969271">&#39;0&#39;</span><span class="op" id="6969274">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969280">Uname</span><span class="op" id="6969285">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969292">&#34;dsymonds&#34;</span><span class="op" id="6969302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969308">Gname</span><span class="op" id="6969313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969320">&#34;eng&#34;</span><span class="op" id="6969325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969331">AccessTime</span><span class="op" id="6969341">:</span>&nbsp;<span class="ident" id="6969343">time</span><span class="op" id="6969347">.</span><span class="ident" id="6969348">Unix</span><span class="op" id="6969352">(</span><span class="num" id="6969353">1244592783</span><span class="op" id="6969363">,</span>&nbsp;<span class="num" id="6969365">0</span><span class="op" id="6969366">)</span><span class="op" id="6969367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969373">ChangeTime</span><span class="op" id="6969383">:</span>&nbsp;<span class="ident" id="6969385">time</span><span class="op" id="6969389">.</span><span class="ident" id="6969390">Unix</span><span class="op" id="6969394">(</span><span class="num" id="6969395">1244592783</span><span class="op" id="6969405">,</span>&nbsp;<span class="num" id="6969407">0</span><span class="op" id="6969408">)</span><span class="op" id="6969409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969414">}</span><span class="op" id="6969415">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969426">Name</span><span class="op" id="6969430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969438">&#34;small2.txt&#34;</span><span class="op" id="6969450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969456">Mode</span><span class="op" id="6969460">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969468">0640</span><span class="op" id="6969472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969478">Uid</span><span class="op" id="6969481">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969490">73025</span><span class="op" id="6969495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969501">Gid</span><span class="op" id="6969504">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969513">5000</span><span class="op" id="6969517">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969523">Size</span><span class="op" id="6969527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969535">11</span><span class="op" id="6969537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969543">ModTime</span><span class="op" id="6969550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969555">time</span><span class="op" id="6969559">.</span><span class="ident" id="6969560">Unix</span><span class="op" id="6969564">(</span><span class="num" id="6969565">1244592783</span><span class="op" id="6969575">,</span>&nbsp;<span class="num" id="6969577">0</span><span class="op" id="6969578">)</span><span class="op" id="6969579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969585">Typeflag</span><span class="op" id="6969593">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6969597">&#39;0&#39;</span><span class="op" id="6969600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969606">Uname</span><span class="op" id="6969611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969618">&#34;dsymonds&#34;</span><span class="op" id="6969628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969634">Gname</span><span class="op" id="6969639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969646">&#34;eng&#34;</span><span class="op" id="6969651">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969657">AccessTime</span><span class="op" id="6969667">:</span>&nbsp;<span class="ident" id="6969669">time</span><span class="op" id="6969673">.</span><span class="ident" id="6969674">Unix</span><span class="op" id="6969678">(</span><span class="num" id="6969679">1244592783</span><span class="op" id="6969689">,</span>&nbsp;<span class="num" id="6969691">0</span><span class="op" id="6969692">)</span><span class="op" id="6969693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969699">ChangeTime</span><span class="op" id="6969709">:</span>&nbsp;<span class="ident" id="6969711">time</span><span class="op" id="6969715">.</span><span class="ident" id="6969716">Unix</span><span class="op" id="6969720">(</span><span class="num" id="6969721">1244592783</span><span class="op" id="6969731">,</span>&nbsp;<span class="num" id="6969733">0</span><span class="op" id="6969734">)</span><span class="op" id="6969735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969740">}</span><span class="op" id="6969741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969745">}</span><span class="op" id="6969746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969749">}</span><span class="op" id="6969750">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969757">file</span><span class="op" id="6969761">:</span>&nbsp;<span class="string" id="6969763">&#34;testdata/v7.tar&#34;</span><span class="op" id="6969780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969784">headers</span><span class="op" id="6969791">:</span>&nbsp;<span class="op" id="6969793">[</span><span class="op" id="6969794">]</span><span class="op" id="6969795">*</span><span class="ident" id="6969796">Header</span><span class="op" id="6969802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969813">Name</span><span class="op" id="6969817">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6969823">&#34;small.txt&#34;</span><span class="op" id="6969834">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969840">Mode</span><span class="op" id="6969844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969850">0444</span><span class="op" id="6969854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969860">Uid</span><span class="op" id="6969863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969870">73025</span><span class="op" id="6969875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969881">Gid</span><span class="op" id="6969884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969891">5000</span><span class="op" id="6969895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969901">Size</span><span class="op" id="6969905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6969911">5</span><span class="op" id="6969912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969918">ModTime</span><span class="op" id="6969925">:</span>&nbsp;&nbsp;<span class="ident" id="6969928">time</span><span class="op" id="6969932">.</span><span class="ident" id="6969933">Unix</span><span class="op" id="6969937">(</span><span class="num" id="6969938">1244593104</span><span class="op" id="6969948">,</span>&nbsp;<span class="num" id="6969950">0</span><span class="op" id="6969951">)</span><span class="op" id="6969952">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969958">Typeflag</span><span class="op" id="6969966">:</span>&nbsp;<span class="string" id="6969968">&#39;\x00&#39;</span><span class="op" id="6969974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969979">}</span><span class="op" id="6969980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6969985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6969991">Name</span><span class="op" id="6969995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970001">&#34;small2.txt&#34;</span><span class="op" id="6970013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970019">Mode</span><span class="op" id="6970023">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970029">0444</span><span class="op" id="6970033">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970039">Uid</span><span class="op" id="6970042">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970049">73025</span><span class="op" id="6970054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970060">Gid</span><span class="op" id="6970063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970070">5000</span><span class="op" id="6970074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970080">Size</span><span class="op" id="6970084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970090">11</span><span class="op" id="6970092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970098">ModTime</span><span class="op" id="6970105">:</span>&nbsp;&nbsp;<span class="ident" id="6970108">time</span><span class="op" id="6970112">.</span><span class="ident" id="6970113">Unix</span><span class="op" id="6970117">(</span><span class="num" id="6970118">1244593104</span><span class="op" id="6970128">,</span>&nbsp;<span class="num" id="6970130">0</span><span class="op" id="6970131">)</span><span class="op" id="6970132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970138">Typeflag</span><span class="op" id="6970146">:</span>&nbsp;<span class="string" id="6970148">&#39;\x00&#39;</span><span class="op" id="6970154">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970159">}</span><span class="op" id="6970160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970164">}</span><span class="op" id="6970165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970168">}</span><span class="op" id="6970169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970176">file</span><span class="op" id="6970180">:</span>&nbsp;<span class="string" id="6970182">&#34;testdata/pax.tar&#34;</span><span class="op" id="6970200">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970204">headers</span><span class="op" id="6970211">:</span>&nbsp;<span class="op" id="6970213">[</span><span class="op" id="6970214">]</span><span class="op" id="6970215">*</span><span class="ident" id="6970216">Header</span><span class="op" id="6970222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970233">Name</span><span class="op" id="6970237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970245">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6970441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970447">Mode</span><span class="op" id="6970451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970459">0664</span><span class="op" id="6970463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970469">Uid</span><span class="op" id="6970472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970481">1000</span><span class="op" id="6970485">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970491">Gid</span><span class="op" id="6970494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970503">1000</span><span class="op" id="6970507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970513">Uname</span><span class="op" id="6970518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970525">&#34;shane&#34;</span><span class="op" id="6970532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970538">Gname</span><span class="op" id="6970543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970550">&#34;shane&#34;</span><span class="op" id="6970557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970563">Size</span><span class="op" id="6970567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970575">7</span><span class="op" id="6970576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970582">ModTime</span><span class="op" id="6970589">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970594">time</span><span class="op" id="6970598">.</span><span class="ident" id="6970599">Unix</span><span class="op" id="6970603">(</span><span class="num" id="6970604">1350244992</span><span class="op" id="6970614">,</span>&nbsp;<span class="num" id="6970616">23960108</span><span class="op" id="6970624">)</span><span class="op" id="6970625">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970631">ChangeTime</span><span class="op" id="6970641">:</span>&nbsp;<span class="ident" id="6970643">time</span><span class="op" id="6970647">.</span><span class="ident" id="6970648">Unix</span><span class="op" id="6970652">(</span><span class="num" id="6970653">1350244992</span><span class="op" id="6970663">,</span>&nbsp;<span class="num" id="6970665">23960108</span><span class="op" id="6970673">)</span><span class="op" id="6970674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970680">AccessTime</span><span class="op" id="6970690">:</span>&nbsp;<span class="ident" id="6970692">time</span><span class="op" id="6970696">.</span><span class="ident" id="6970697">Unix</span><span class="op" id="6970701">(</span><span class="num" id="6970702">1350244992</span><span class="op" id="6970712">,</span>&nbsp;<span class="num" id="6970714">23960108</span><span class="op" id="6970722">)</span><span class="op" id="6970723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970729">Typeflag</span><span class="op" id="6970737">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6970741">TypeReg</span><span class="op" id="6970748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970753">}</span><span class="op" id="6970754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6970759">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970765">Name</span><span class="op" id="6970769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970777">&#34;a/b&#34;</span><span class="op" id="6970782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970788">Mode</span><span class="op" id="6970792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970800">0777</span><span class="op" id="6970804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970810">Uid</span><span class="op" id="6970813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970822">1000</span><span class="op" id="6970826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970832">Gid</span><span class="op" id="6970835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970844">1000</span><span class="op" id="6970848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970854">Uname</span><span class="op" id="6970859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970866">&#34;shane&#34;</span><span class="op" id="6970873">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970879">Gname</span><span class="op" id="6970884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6970891">&#34;shane&#34;</span><span class="op" id="6970898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970904">Size</span><span class="op" id="6970908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6970916">0</span><span class="op" id="6970917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970923">ModTime</span><span class="op" id="6970930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970935">time</span><span class="op" id="6970939">.</span><span class="ident" id="6970940">Unix</span><span class="op" id="6970944">(</span><span class="num" id="6970945">1350266320</span><span class="op" id="6970955">,</span>&nbsp;<span class="num" id="6970957">910238425</span><span class="op" id="6970966">)</span><span class="op" id="6970967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6970973">ChangeTime</span><span class="op" id="6970983">:</span>&nbsp;<span class="ident" id="6970985">time</span><span class="op" id="6970989">.</span><span class="ident" id="6970990">Unix</span><span class="op" id="6970994">(</span><span class="num" id="6970995">1350266320</span><span class="op" id="6971005">,</span>&nbsp;<span class="num" id="6971007">910238425</span><span class="op" id="6971016">)</span><span class="op" id="6971017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971023">AccessTime</span><span class="op" id="6971033">:</span>&nbsp;<span class="ident" id="6971035">time</span><span class="op" id="6971039">.</span><span class="ident" id="6971040">Unix</span><span class="op" id="6971044">(</span><span class="num" id="6971045">1350266320</span><span class="op" id="6971055">,</span>&nbsp;<span class="num" id="6971057">910238425</span><span class="op" id="6971066">)</span><span class="op" id="6971067">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971073">Typeflag</span><span class="op" id="6971081">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6971085">TypeSymlink</span><span class="op" id="6971096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971102">Linkname</span><span class="op" id="6971110">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6971114">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6971308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971313">}</span><span class="op" id="6971314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971318">}</span><span class="op" id="6971319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971322">}</span><span class="op" id="6971323">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971330">file</span><span class="op" id="6971334">:</span>&nbsp;<span class="string" id="6971336">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6971358">,</span>&nbsp;<span class="comment" id="6971360">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971387">headers</span><span class="op" id="6971394">:</span>&nbsp;<span class="op" id="6971396">[</span><span class="op" id="6971397">]</span><span class="op" id="6971398">*</span><span class="ident" id="6971399">Header</span><span class="op" id="6971405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971416">Name</span><span class="op" id="6971420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971426">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6971444">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971450">Mode</span><span class="op" id="6971454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971460">0664</span><span class="op" id="6971464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971470">Uid</span><span class="op" id="6971473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971480">0</span><span class="op" id="6971481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971487">Gid</span><span class="op" id="6971490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971497">0</span><span class="op" id="6971498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971504">Size</span><span class="op" id="6971508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971514">14</span><span class="op" id="6971516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971522">ModTime</span><span class="op" id="6971529">:</span>&nbsp;&nbsp;<span class="ident" id="6971532">time</span><span class="op" id="6971536">.</span><span class="ident" id="6971537">Unix</span><span class="op" id="6971541">(</span><span class="num" id="6971542">1365454838</span><span class="op" id="6971552">,</span>&nbsp;<span class="num" id="6971554">0</span><span class="op" id="6971555">)</span><span class="op" id="6971556">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971562">Typeflag</span><span class="op" id="6971570">:</span>&nbsp;<span class="ident" id="6971572">TypeReg</span><span class="op" id="6971579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971585">Linkname</span><span class="op" id="6971593">:</span>&nbsp;<span class="string" id="6971595">&#34;&#34;</span><span class="op" id="6971597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971603">Uname</span><span class="op" id="6971608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971613">&#34;eyefi&#34;</span><span class="op" id="6971620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971626">Gname</span><span class="op" id="6971631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971636">&#34;eyefi&#34;</span><span class="op" id="6971643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971649">Devmajor</span><span class="op" id="6971657">:</span>&nbsp;<span class="num" id="6971659">0</span><span class="op" id="6971660">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971666">Devminor</span><span class="op" id="6971674">:</span>&nbsp;<span class="num" id="6971676">0</span><span class="op" id="6971677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971682">}</span><span class="op" id="6971683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971687">}</span><span class="op" id="6971688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971691">}</span><span class="op" id="6971692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971695">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971699">file</span><span class="op" id="6971703">:</span>&nbsp;<span class="string" id="6971705">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6971726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971730">headers</span><span class="op" id="6971737">:</span>&nbsp;<span class="op" id="6971739">[</span><span class="op" id="6971740">]</span><span class="op" id="6971741">*</span><span class="ident" id="6971742">Header</span><span class="op" id="6971748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6971753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971759">Name</span><span class="op" id="6971763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971771">&#34;small.txt&#34;</span><span class="op" id="6971782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971788">Mode</span><span class="op" id="6971792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971800">0644</span><span class="op" id="6971804">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971810">Uid</span><span class="op" id="6971813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971822">1000</span><span class="op" id="6971826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971832">Gid</span><span class="op" id="6971835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971844">10</span><span class="op" id="6971846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971852">Size</span><span class="op" id="6971856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6971864">5</span><span class="op" id="6971865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971871">ModTime</span><span class="op" id="6971878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971883">time</span><span class="op" id="6971887">.</span><span class="ident" id="6971888">Unix</span><span class="op" id="6971892">(</span><span class="num" id="6971893">1386065770</span><span class="op" id="6971903">,</span>&nbsp;<span class="num" id="6971905">448252320</span><span class="op" id="6971914">)</span><span class="op" id="6971915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971921">Typeflag</span><span class="op" id="6971929">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6971933">&#39;0&#39;</span><span class="op" id="6971936">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971942">Uname</span><span class="op" id="6971947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971954">&#34;alex&#34;</span><span class="op" id="6971960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971966">Gname</span><span class="op" id="6971971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6971978">&#34;wheel&#34;</span><span class="op" id="6971985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6971991">AccessTime</span><span class="op" id="6972001">:</span>&nbsp;<span class="ident" id="6972003">time</span><span class="op" id="6972007">.</span><span class="ident" id="6972008">Unix</span><span class="op" id="6972012">(</span><span class="num" id="6972013">1389782991</span><span class="op" id="6972023">,</span>&nbsp;<span class="num" id="6972025">419875220</span><span class="op" id="6972034">)</span><span class="op" id="6972035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972041">ChangeTime</span><span class="op" id="6972051">:</span>&nbsp;<span class="ident" id="6972053">time</span><span class="op" id="6972057">.</span><span class="ident" id="6972058">Unix</span><span class="op" id="6972062">(</span><span class="num" id="6972063">1389782956</span><span class="op" id="6972073">,</span>&nbsp;<span class="num" id="6972075">794414986</span><span class="op" id="6972084">)</span><span class="op" id="6972085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972091">Xattrs</span><span class="op" id="6972097">:</span>&nbsp;<span class="keyword" id="6972099">map</span><span class="op" id="6972102">[</span><span class="builtintype" id="6972103">string</span><span class="op" id="6972109">]</span><span class="builtintype" id="6972110">string</span><span class="op" id="6972116">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972123">&#34;user.key&#34;</span><span class="op" id="6972133">:</span>&nbsp;&nbsp;<span class="string" id="6972136">&#34;value&#34;</span><span class="op" id="6972143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972150">&#34;user.key2&#34;</span><span class="op" id="6972161">:</span>&nbsp;<span class="string" id="6972163">&#34;value2&#34;</span><span class="op" id="6972171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6972178">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972255">&#34;security.selinux&#34;</span><span class="op" id="6972273">:</span>&nbsp;<span class="string" id="6972275">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6972315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972321">}</span><span class="op" id="6972322">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972327">}</span><span class="op" id="6972328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972339">Name</span><span class="op" id="6972343">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972351">&#34;small2.txt&#34;</span><span class="op" id="6972363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972369">Mode</span><span class="op" id="6972373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6972381">0644</span><span class="op" id="6972385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972391">Uid</span><span class="op" id="6972394">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6972403">1000</span><span class="op" id="6972407">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972413">Gid</span><span class="op" id="6972416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6972425">10</span><span class="op" id="6972427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972433">Size</span><span class="op" id="6972437">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6972445">11</span><span class="op" id="6972447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972453">ModTime</span><span class="op" id="6972460">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972465">time</span><span class="op" id="6972469">.</span><span class="ident" id="6972470">Unix</span><span class="op" id="6972474">(</span><span class="num" id="6972475">1386065770</span><span class="op" id="6972485">,</span>&nbsp;<span class="num" id="6972487">449252304</span><span class="op" id="6972496">)</span><span class="op" id="6972497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972503">Typeflag</span><span class="op" id="6972511">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6972515">&#39;0&#39;</span><span class="op" id="6972518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972524">Uname</span><span class="op" id="6972529">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972536">&#34;alex&#34;</span><span class="op" id="6972542">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972548">Gname</span><span class="op" id="6972553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972560">&#34;wheel&#34;</span><span class="op" id="6972567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972573">AccessTime</span><span class="op" id="6972583">:</span>&nbsp;<span class="ident" id="6972585">time</span><span class="op" id="6972589">.</span><span class="ident" id="6972590">Unix</span><span class="op" id="6972594">(</span><span class="num" id="6972595">1389782991</span><span class="op" id="6972605">,</span>&nbsp;<span class="num" id="6972607">419875220</span><span class="op" id="6972616">)</span><span class="op" id="6972617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972623">ChangeTime</span><span class="op" id="6972633">:</span>&nbsp;<span class="ident" id="6972635">time</span><span class="op" id="6972639">.</span><span class="ident" id="6972640">Unix</span><span class="op" id="6972644">(</span><span class="num" id="6972645">1386065770</span><span class="op" id="6972655">,</span>&nbsp;<span class="num" id="6972657">449252304</span><span class="op" id="6972666">)</span><span class="op" id="6972667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972673">Xattrs</span><span class="op" id="6972679">:</span>&nbsp;<span class="keyword" id="6972681">map</span><span class="op" id="6972684">[</span><span class="builtintype" id="6972685">string</span><span class="op" id="6972691">]</span><span class="builtintype" id="6972692">string</span><span class="op" id="6972698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6972705">&#34;security.selinux&#34;</span><span class="op" id="6972723">:</span>&nbsp;<span class="string" id="6972725">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6972765">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972771">}</span><span class="op" id="6972772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972777">}</span><span class="op" id="6972778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972782">}</span><span class="op" id="6972783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972786">}</span><span class="op" id="6972787">,</span><br>
<span class="lineno"></span><span class="op" id="6972789">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6972792">func</span>&nbsp;<span class="ident" id="6972797">TestReader</span><span class="op" id="6972807">(</span><span class="ident" id="6972808">t</span>&nbsp;<span class="op" id="6972810">*</span><span class="ident" id="6972811">testing</span><span class="op" id="6972818">.</span><span class="ident" id="6972819">T</span><span class="op" id="6972820">)</span>&nbsp;<span class="op" id="6972822">{</span><br>
<span class="lineno"></span><span class="ident" id="6972824">testLoop</span><span class="op" id="6972832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972835">for</span>&nbsp;<span class="ident" id="6972839">i</span><span class="op" id="6972840">,</span>&nbsp;<span class="ident" id="6972842">test</span>&nbsp;<span class="op" id="6972847">:=</span>&nbsp;<span class="keyword" id="6972850">range</span>&nbsp;<span class="ident" id="6972856">untarTests</span>&nbsp;<span class="op" id="6972867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972871">f</span><span class="op" id="6972872">,</span>&nbsp;<span class="ident" id="6972874">err</span>&nbsp;<span class="op" id="6972878">:=</span>&nbsp;<span class="ident" id="6972881">os</span><span class="op" id="6972883">.</span><span class="ident" id="6972884">Open</span><span class="op" id="6972888">(</span><span class="ident" id="6972889">test</span><span class="op" id="6972893">.</span><span class="ident" id="6972894">file</span><span class="op" id="6972898">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972902">if</span>&nbsp;<span class="ident" id="6972905">err</span>&nbsp;<span class="op" id="6972909">!=</span>&nbsp;<span class="builtintype" id="6972912">nil</span>&nbsp;<span class="op" id="6972916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6972921">t</span><span class="op" id="6972922">.</span><span class="ident" id="6972923">Errorf</span><span class="op" id="6972929">(</span><span class="string" id="6972930">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6972961">,</span>&nbsp;<span class="ident" id="6972963">i</span><span class="op" id="6972964">,</span>&nbsp;<span class="ident" id="6972966">err</span><span class="op" id="6972969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972974">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6972985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6972989">defer</span>&nbsp;<span class="ident" id="6972995">f</span><span class="op" id="6972996">.</span><span class="ident" id="6972997">Close</span><span class="op" id="6973002">(</span><span class="op" id="6973003">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973007">tr</span>&nbsp;<span class="op" id="6973010">:=</span>&nbsp;<span class="ident" id="6973013">NewReader</span><span class="op" id="6973022">(</span><span class="ident" id="6973023">f</span><span class="op" id="6973024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973028">for</span>&nbsp;<span class="ident" id="6973032">j</span><span class="op" id="6973033">,</span>&nbsp;<span class="ident" id="6973035">header</span>&nbsp;<span class="op" id="6973042">:=</span>&nbsp;<span class="keyword" id="6973045">range</span>&nbsp;<span class="ident" id="6973051">test</span><span class="op" id="6973055">.</span><span class="ident" id="6973056">headers</span>&nbsp;<span class="op" id="6973064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973069">hdr</span><span class="op" id="6973072">,</span>&nbsp;<span class="ident" id="6973074">err</span>&nbsp;<span class="op" id="6973078">:=</span>&nbsp;<span class="ident" id="6973081">tr</span><span class="op" id="6973083">.</span><span class="ident" id="6973084">Next</span><span class="op" id="6973088">(</span><span class="op" id="6973089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973094">if</span>&nbsp;<span class="ident" id="6973097">err</span>&nbsp;<span class="op" id="6973101">!=</span>&nbsp;<span class="builtintype" id="6973104">nil</span>&nbsp;<span class="op" id="6973108">||</span>&nbsp;<span class="ident" id="6973111">hdr</span>&nbsp;<span class="op" id="6973115">==</span>&nbsp;<span class="builtintype" id="6973118">nil</span>&nbsp;<span class="op" id="6973122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973128">t</span><span class="op" id="6973129">.</span><span class="ident" id="6973130">Errorf</span><span class="op" id="6973136">(</span><span class="string" id="6973137">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6973178">,</span>&nbsp;<span class="ident" id="6973180">i</span><span class="op" id="6973181">,</span>&nbsp;<span class="ident" id="6973183">j</span><span class="op" id="6973184">,</span>&nbsp;<span class="ident" id="6973186">err</span><span class="op" id="6973189">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973195">f</span><span class="op" id="6973196">.</span><span class="ident" id="6973197">Close</span><span class="op" id="6973202">(</span><span class="op" id="6973203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973209">continue</span>&nbsp;<span class="ident" id="6973218">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973235">if</span>&nbsp;<span class="op" id="6973238">!</span><span class="ident" id="6973239">reflect</span><span class="op" id="6973246">.</span><span class="ident" id="6973247">DeepEqual</span><span class="op" id="6973256">(</span><span class="op" id="6973257">*</span><span class="ident" id="6973258">hdr</span><span class="op" id="6973261">,</span>&nbsp;<span class="op" id="6973263">*</span><span class="ident" id="6973264">header</span><span class="op" id="6973270">)</span>&nbsp;<span class="op" id="6973272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973278">t</span><span class="op" id="6973279">.</span><span class="ident" id="6973280">Errorf</span><span class="op" id="6973286">(</span><span class="string" id="6973287">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6973345">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973352">i</span><span class="op" id="6973353">,</span>&nbsp;<span class="ident" id="6973355">j</span><span class="op" id="6973356">,</span>&nbsp;<span class="op" id="6973358">*</span><span class="ident" id="6973359">hdr</span><span class="op" id="6973362">,</span>&nbsp;<span class="op" id="6973364">*</span><span class="ident" id="6973365">header</span><span class="op" id="6973371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973384">hdr</span><span class="op" id="6973387">,</span>&nbsp;<span class="ident" id="6973389">err</span>&nbsp;<span class="op" id="6973393">:=</span>&nbsp;<span class="ident" id="6973396">tr</span><span class="op" id="6973398">.</span><span class="ident" id="6973399">Next</span><span class="op" id="6973403">(</span><span class="op" id="6973404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973408">if</span>&nbsp;<span class="ident" id="6973411">err</span>&nbsp;<span class="op" id="6973415">==</span>&nbsp;<span class="ident" id="6973418">io</span><span class="op" id="6973420">.</span><span class="ident" id="6973421">EOF</span>&nbsp;<span class="op" id="6973425">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973430">continue</span>&nbsp;<span class="ident" id="6973439">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973454">if</span>&nbsp;<span class="ident" id="6973457">hdr</span>&nbsp;<span class="op" id="6973461">!=</span>&nbsp;<span class="builtintype" id="6973464">nil</span>&nbsp;<span class="op" id="6973468">||</span>&nbsp;<span class="ident" id="6973471">err</span>&nbsp;<span class="op" id="6973475">!=</span>&nbsp;<span class="builtintype" id="6973478">nil</span>&nbsp;<span class="op" id="6973482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973487">t</span><span class="op" id="6973488">.</span><span class="ident" id="6973489">Errorf</span><span class="op" id="6973495">(</span><span class="string" id="6973496">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6973547">,</span>&nbsp;<span class="ident" id="6973549">i</span><span class="op" id="6973550">,</span>&nbsp;<span class="ident" id="6973552">hdr</span><span class="op" id="6973555">,</span>&nbsp;<span class="ident" id="6973557">err</span><span class="op" id="6973560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973564">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973567">}</span><br>
<span class="lineno"></span><span class="op" id="6973569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6973572">func</span>&nbsp;<span class="ident" id="6973577">TestPartialRead</span><span class="op" id="6973592">(</span><span class="ident" id="6973593">t</span>&nbsp;<span class="op" id="6973595">*</span><span class="ident" id="6973596">testing</span><span class="op" id="6973603">.</span><span class="ident" id="6973604">T</span><span class="op" id="6973605">)</span>&nbsp;<span class="op" id="6973607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973610">f</span><span class="op" id="6973611">,</span>&nbsp;<span class="ident" id="6973613">err</span>&nbsp;<span class="op" id="6973617">:=</span>&nbsp;<span class="ident" id="6973620">os</span><span class="op" id="6973622">.</span><span class="ident" id="6973623">Open</span><span class="op" id="6973627">(</span><span class="string" id="6973628">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6973646">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973649">if</span>&nbsp;<span class="ident" id="6973652">err</span>&nbsp;<span class="op" id="6973656">!=</span>&nbsp;<span class="builtintype" id="6973659">nil</span>&nbsp;<span class="op" id="6973663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973667">t</span><span class="op" id="6973668">.</span><span class="ident" id="6973669">Fatalf</span><span class="op" id="6973675">(</span><span class="string" id="6973676">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6973698">,</span>&nbsp;<span class="ident" id="6973700">err</span><span class="op" id="6973703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973709">defer</span>&nbsp;<span class="ident" id="6973715">f</span><span class="op" id="6973716">.</span><span class="ident" id="6973717">Close</span><span class="op" id="6973722">(</span><span class="op" id="6973723">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973727">tr</span>&nbsp;<span class="op" id="6973730">:=</span>&nbsp;<span class="ident" id="6973733">NewReader</span><span class="op" id="6973742">(</span><span class="ident" id="6973743">f</span><span class="op" id="6973744">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6973748">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973813">hdr</span><span class="op" id="6973816">,</span>&nbsp;<span class="ident" id="6973818">err</span>&nbsp;<span class="op" id="6973822">:=</span>&nbsp;<span class="ident" id="6973825">tr</span><span class="op" id="6973827">.</span><span class="ident" id="6973828">Next</span><span class="op" id="6973832">(</span><span class="op" id="6973833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973836">if</span>&nbsp;<span class="ident" id="6973839">err</span>&nbsp;<span class="op" id="6973843">!=</span>&nbsp;<span class="builtintype" id="6973846">nil</span>&nbsp;<span class="op" id="6973850">||</span>&nbsp;<span class="ident" id="6973853">hdr</span>&nbsp;<span class="op" id="6973857">==</span>&nbsp;<span class="builtintype" id="6973860">nil</span>&nbsp;<span class="op" id="6973864">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973868">t</span><span class="op" id="6973869">.</span><span class="ident" id="6973870">Fatalf</span><span class="op" id="6973876">(</span><span class="string" id="6973877">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6973904">,</span>&nbsp;<span class="ident" id="6973906">err</span><span class="op" id="6973909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973915">buf</span>&nbsp;<span class="op" id="6973919">:=</span>&nbsp;<span class="builtinfunc" id="6973922">make</span><span class="op" id="6973926">(</span><span class="op" id="6973927">[</span><span class="op" id="6973928">]</span><span class="builtintype" id="6973929">byte</span><span class="op" id="6973933">,</span>&nbsp;<span class="num" id="6973935">4</span><span class="op" id="6973936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6973939">if</span>&nbsp;<span class="ident" id="6973942">_</span><span class="op" id="6973943">,</span>&nbsp;<span class="ident" id="6973945">err</span>&nbsp;<span class="op" id="6973949">:=</span>&nbsp;<span class="ident" id="6973952">io</span><span class="op" id="6973954">.</span><span class="ident" id="6973955">ReadFull</span><span class="op" id="6973963">(</span><span class="ident" id="6973964">tr</span><span class="op" id="6973966">,</span>&nbsp;<span class="ident" id="6973968">buf</span><span class="op" id="6973971">)</span><span class="op" id="6973972">;</span>&nbsp;<span class="ident" id="6973974">err</span>&nbsp;<span class="op" id="6973978">!=</span>&nbsp;<span class="builtintype" id="6973981">nil</span>&nbsp;<span class="op" id="6973985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6973989">t</span><span class="op" id="6973990">.</span><span class="ident" id="6973991">Fatalf</span><span class="op" id="6973997">(</span><span class="string" id="6973998">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6974020">,</span>&nbsp;<span class="ident" id="6974022">err</span><span class="op" id="6974025">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974031">if</span>&nbsp;<span class="ident" id="6974034">expected</span>&nbsp;<span class="op" id="6974043">:=</span>&nbsp;<span class="op" id="6974046">[</span><span class="op" id="6974047">]</span><span class="builtintype" id="6974048">byte</span><span class="op" id="6974052">(</span><span class="string" id="6974053">&#34;Kilt&#34;</span><span class="op" id="6974059">)</span><span class="op" id="6974060">;</span>&nbsp;<span class="op" id="6974062">!</span><span class="ident" id="6974063">bytes</span><span class="op" id="6974068">.</span><span class="ident" id="6974069">Equal</span><span class="op" id="6974074">(</span><span class="ident" id="6974075">buf</span><span class="op" id="6974078">,</span>&nbsp;<span class="ident" id="6974080">expected</span><span class="op" id="6974088">)</span>&nbsp;<span class="op" id="6974090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974094">t</span><span class="op" id="6974095">.</span><span class="ident" id="6974096">Errorf</span><span class="op" id="6974102">(</span><span class="string" id="6974103">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6974127">,</span>&nbsp;<span class="ident" id="6974129">buf</span><span class="op" id="6974132">,</span>&nbsp;<span class="ident" id="6974134">expected</span><span class="op" id="6974142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6974149">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974165">hdr</span><span class="op" id="6974168">,</span>&nbsp;<span class="ident" id="6974170">err</span>&nbsp;<span class="op" id="6974174">=</span>&nbsp;<span class="ident" id="6974176">tr</span><span class="op" id="6974178">.</span><span class="ident" id="6974179">Next</span><span class="op" id="6974183">(</span><span class="op" id="6974184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974187">if</span>&nbsp;<span class="ident" id="6974190">err</span>&nbsp;<span class="op" id="6974194">!=</span>&nbsp;<span class="builtintype" id="6974197">nil</span>&nbsp;<span class="op" id="6974201">||</span>&nbsp;<span class="ident" id="6974204">hdr</span>&nbsp;<span class="op" id="6974208">==</span>&nbsp;<span class="builtintype" id="6974211">nil</span>&nbsp;<span class="op" id="6974215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974219">t</span><span class="op" id="6974220">.</span><span class="ident" id="6974221">Fatalf</span><span class="op" id="6974227">(</span><span class="string" id="6974228">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6974256">,</span>&nbsp;<span class="ident" id="6974258">err</span><span class="op" id="6974261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974264">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974267">buf</span>&nbsp;<span class="op" id="6974271">=</span>&nbsp;<span class="builtinfunc" id="6974273">make</span><span class="op" id="6974277">(</span><span class="op" id="6974278">[</span><span class="op" id="6974279">]</span><span class="builtintype" id="6974280">byte</span><span class="op" id="6974284">,</span>&nbsp;<span class="num" id="6974286">6</span><span class="op" id="6974287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974290">if</span>&nbsp;<span class="ident" id="6974293">_</span><span class="op" id="6974294">,</span>&nbsp;<span class="ident" id="6974296">err</span>&nbsp;<span class="op" id="6974300">:=</span>&nbsp;<span class="ident" id="6974303">io</span><span class="op" id="6974305">.</span><span class="ident" id="6974306">ReadFull</span><span class="op" id="6974314">(</span><span class="ident" id="6974315">tr</span><span class="op" id="6974317">,</span>&nbsp;<span class="ident" id="6974319">buf</span><span class="op" id="6974322">)</span><span class="op" id="6974323">;</span>&nbsp;<span class="ident" id="6974325">err</span>&nbsp;<span class="op" id="6974329">!=</span>&nbsp;<span class="builtintype" id="6974332">nil</span>&nbsp;<span class="op" id="6974336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974340">t</span><span class="op" id="6974341">.</span><span class="ident" id="6974342">Fatalf</span><span class="op" id="6974348">(</span><span class="string" id="6974349">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6974371">,</span>&nbsp;<span class="ident" id="6974373">err</span><span class="op" id="6974376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974382">if</span>&nbsp;<span class="ident" id="6974385">expected</span>&nbsp;<span class="op" id="6974394">:=</span>&nbsp;<span class="op" id="6974397">[</span><span class="op" id="6974398">]</span><span class="builtintype" id="6974399">byte</span><span class="op" id="6974403">(</span><span class="string" id="6974404">&#34;Google&#34;</span><span class="op" id="6974412">)</span><span class="op" id="6974413">;</span>&nbsp;<span class="op" id="6974415">!</span><span class="ident" id="6974416">bytes</span><span class="op" id="6974421">.</span><span class="ident" id="6974422">Equal</span><span class="op" id="6974427">(</span><span class="ident" id="6974428">buf</span><span class="op" id="6974431">,</span>&nbsp;<span class="ident" id="6974433">expected</span><span class="op" id="6974441">)</span>&nbsp;<span class="op" id="6974443">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974447">t</span><span class="op" id="6974448">.</span><span class="ident" id="6974449">Errorf</span><span class="op" id="6974455">(</span><span class="string" id="6974456">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6974480">,</span>&nbsp;<span class="ident" id="6974482">buf</span><span class="op" id="6974485">,</span>&nbsp;<span class="ident" id="6974487">expected</span><span class="op" id="6974495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974498">}</span><br>
<span class="lineno"></span><span class="op" id="6974500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6974503">func</span>&nbsp;<span class="ident" id="6974508">TestIncrementalRead</span><span class="op" id="6974527">(</span><span class="ident" id="6974528">t</span>&nbsp;<span class="op" id="6974530">*</span><span class="ident" id="6974531">testing</span><span class="op" id="6974538">.</span><span class="ident" id="6974539">T</span><span class="op" id="6974540">)</span>&nbsp;<span class="op" id="6974542">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974545">test</span>&nbsp;<span class="op" id="6974550">:=</span>&nbsp;<span class="ident" id="6974553">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974565">f</span><span class="op" id="6974566">,</span>&nbsp;<span class="ident" id="6974568">err</span>&nbsp;<span class="op" id="6974572">:=</span>&nbsp;<span class="ident" id="6974575">os</span><span class="op" id="6974577">.</span><span class="ident" id="6974578">Open</span><span class="op" id="6974582">(</span><span class="ident" id="6974583">test</span><span class="op" id="6974587">.</span><span class="ident" id="6974588">file</span><span class="op" id="6974592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974595">if</span>&nbsp;<span class="ident" id="6974598">err</span>&nbsp;<span class="op" id="6974602">!=</span>&nbsp;<span class="builtintype" id="6974605">nil</span>&nbsp;<span class="op" id="6974609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974613">t</span><span class="op" id="6974614">.</span><span class="ident" id="6974615">Fatalf</span><span class="op" id="6974621">(</span><span class="string" id="6974622">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6974644">,</span>&nbsp;<span class="ident" id="6974646">err</span><span class="op" id="6974649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974652">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974655">defer</span>&nbsp;<span class="ident" id="6974661">f</span><span class="op" id="6974662">.</span><span class="ident" id="6974663">Close</span><span class="op" id="6974668">(</span><span class="op" id="6974669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974673">tr</span>&nbsp;<span class="op" id="6974676">:=</span>&nbsp;<span class="ident" id="6974679">NewReader</span><span class="op" id="6974688">(</span><span class="ident" id="6974689">f</span><span class="op" id="6974690">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974694">headers</span>&nbsp;<span class="op" id="6974702">:=</span>&nbsp;<span class="ident" id="6974705">test</span><span class="op" id="6974709">.</span><span class="ident" id="6974710">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974719">cksums</span>&nbsp;<span class="op" id="6974726">:=</span>&nbsp;<span class="ident" id="6974729">test</span><span class="op" id="6974733">.</span><span class="ident" id="6974734">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974742">nread</span>&nbsp;<span class="op" id="6974748">:=</span>&nbsp;<span class="num" id="6974751">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6974755">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974779">for</span>&nbsp;<span class="op" id="6974783">;</span>&nbsp;<span class="op" id="6974785">;</span>&nbsp;<span class="ident" id="6974787">nread</span><span class="op" id="6974792">++</span>&nbsp;<span class="op" id="6974795">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974799">hdr</span><span class="op" id="6974802">,</span>&nbsp;<span class="ident" id="6974804">err</span>&nbsp;<span class="op" id="6974808">:=</span>&nbsp;<span class="ident" id="6974811">tr</span><span class="op" id="6974813">.</span><span class="ident" id="6974814">Next</span><span class="op" id="6974818">(</span><span class="op" id="6974819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974823">if</span>&nbsp;<span class="ident" id="6974826">hdr</span>&nbsp;<span class="op" id="6974830">==</span>&nbsp;<span class="builtintype" id="6974833">nil</span>&nbsp;<span class="op" id="6974837">||</span>&nbsp;<span class="ident" id="6974840">err</span>&nbsp;<span class="op" id="6974844">==</span>&nbsp;<span class="ident" id="6974847">io</span><span class="op" id="6974849">.</span><span class="ident" id="6974850">EOF</span>&nbsp;<span class="op" id="6974854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974859">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6974872">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6974894">if</span>&nbsp;<span class="op" id="6974897">!</span><span class="ident" id="6974898">reflect</span><span class="op" id="6974905">.</span><span class="ident" id="6974906">DeepEqual</span><span class="op" id="6974915">(</span><span class="op" id="6974916">*</span><span class="ident" id="6974917">hdr</span><span class="op" id="6974920">,</span>&nbsp;<span class="op" id="6974922">*</span><span class="ident" id="6974923">headers</span><span class="op" id="6974930">[</span><span class="ident" id="6974931">nread</span><span class="op" id="6974936">]</span><span class="op" id="6974937">)</span>&nbsp;<span class="op" id="6974939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6974944">t</span><span class="op" id="6974945">.</span><span class="ident" id="6974946">Errorf</span><span class="op" id="6974952">(</span><span class="string" id="6974953">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6974992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6974998">*</span><span class="ident" id="6974999">hdr</span><span class="op" id="6975002">,</span>&nbsp;<span class="ident" id="6975004">headers</span><span class="op" id="6975011">[</span><span class="ident" id="6975012">nread</span><span class="op" id="6975017">]</span><span class="op" id="6975018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975022">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6975027">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6975073">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975103">h</span>&nbsp;<span class="op" id="6975105">:=</span>&nbsp;<span class="ident" id="6975108">md5</span><span class="op" id="6975111">.</span><span class="ident" id="6975112">New</span><span class="op" id="6975115">(</span><span class="op" id="6975116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975120">rdbuf</span>&nbsp;<span class="op" id="6975126">:=</span>&nbsp;<span class="builtinfunc" id="6975129">make</span><span class="op" id="6975133">(</span><span class="op" id="6975134">[</span><span class="op" id="6975135">]</span><span class="builtintype" id="6975136">uint8</span><span class="op" id="6975141">,</span>&nbsp;<span class="num" id="6975143">8</span><span class="op" id="6975144">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975148">for</span>&nbsp;<span class="op" id="6975152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975157">nr</span><span class="op" id="6975159">,</span>&nbsp;<span class="ident" id="6975161">err</span>&nbsp;<span class="op" id="6975165">:=</span>&nbsp;<span class="ident" id="6975168">tr</span><span class="op" id="6975170">.</span><span class="ident" id="6975171">Read</span><span class="op" id="6975175">(</span><span class="ident" id="6975176">rdbuf</span><span class="op" id="6975181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975186">if</span>&nbsp;<span class="ident" id="6975189">err</span>&nbsp;<span class="op" id="6975193">==</span>&nbsp;<span class="ident" id="6975196">io</span><span class="op" id="6975198">.</span><span class="ident" id="6975199">EOF</span>&nbsp;<span class="op" id="6975203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975209">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975218">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975223">if</span>&nbsp;<span class="ident" id="6975226">err</span>&nbsp;<span class="op" id="6975230">!=</span>&nbsp;<span class="builtintype" id="6975233">nil</span>&nbsp;<span class="op" id="6975237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975243">t</span><span class="op" id="6975244">.</span><span class="ident" id="6975245">Errorf</span><span class="op" id="6975251">(</span><span class="string" id="6975252">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6975281">,</span>&nbsp;<span class="ident" id="6975283">err</span><span class="op" id="6975286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975292">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975306">h</span><span class="op" id="6975307">.</span><span class="ident" id="6975308">Write</span><span class="op" id="6975313">(</span><span class="ident" id="6975314">rdbuf</span><span class="op" id="6975319">[</span><span class="num" id="6975320">0</span><span class="op" id="6975321">:</span><span class="ident" id="6975322">nr</span><span class="op" id="6975324">]</span><span class="op" id="6975325">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6975333">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975354">have</span>&nbsp;<span class="op" id="6975359">:=</span>&nbsp;<span class="ident" id="6975362">fmt</span><span class="op" id="6975365">.</span><span class="ident" id="6975366">Sprintf</span><span class="op" id="6975373">(</span><span class="string" id="6975374">&#34;%x&#34;</span><span class="op" id="6975378">,</span>&nbsp;<span class="ident" id="6975380">h</span><span class="op" id="6975381">.</span><span class="ident" id="6975382">Sum</span><span class="op" id="6975385">(</span><span class="builtintype" id="6975386">nil</span><span class="op" id="6975389">)</span><span class="op" id="6975390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975394">want</span>&nbsp;<span class="op" id="6975399">:=</span>&nbsp;<span class="ident" id="6975402">cksums</span><span class="op" id="6975408">[</span><span class="ident" id="6975409">nread</span><span class="op" id="6975414">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975418">if</span>&nbsp;<span class="ident" id="6975421">want</span>&nbsp;<span class="op" id="6975426">!=</span>&nbsp;<span class="ident" id="6975429">have</span>&nbsp;<span class="op" id="6975434">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975439">t</span><span class="op" id="6975440">.</span><span class="ident" id="6975441">Errorf</span><span class="op" id="6975447">(</span><span class="string" id="6975448">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6975494">,</span>&nbsp;<span class="ident" id="6975496">hdr</span><span class="op" id="6975499">.</span><span class="ident" id="6975500">Name</span><span class="op" id="6975504">,</span>&nbsp;<span class="ident" id="6975506">have</span><span class="op" id="6975510">,</span>&nbsp;<span class="ident" id="6975512">want</span><span class="op" id="6975516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975526">if</span>&nbsp;<span class="ident" id="6975529">nread</span>&nbsp;<span class="op" id="6975535">!=</span>&nbsp;<span class="builtinfunc" id="6975538">len</span><span class="op" id="6975541">(</span><span class="ident" id="6975542">headers</span><span class="op" id="6975549">)</span>&nbsp;<span class="op" id="6975551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975555">t</span><span class="op" id="6975556">.</span><span class="ident" id="6975557">Errorf</span><span class="op" id="6975563">(</span><span class="string" id="6975564">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6975620">,</span>&nbsp;<span class="builtinfunc" id="6975622">len</span><span class="op" id="6975625">(</span><span class="ident" id="6975626">headers</span><span class="op" id="6975633">)</span><span class="op" id="6975634">,</span>&nbsp;<span class="ident" id="6975636">nread</span><span class="op" id="6975641">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975644">}</span><br>
<span class="lineno"></span><span class="op" id="6975646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6975649">func</span>&nbsp;<span class="ident" id="6975654">TestNonSeekable</span><span class="op" id="6975669">(</span><span class="ident" id="6975670">t</span>&nbsp;<span class="op" id="6975672">*</span><span class="ident" id="6975673">testing</span><span class="op" id="6975680">.</span><span class="ident" id="6975681">T</span><span class="op" id="6975682">)</span>&nbsp;<span class="op" id="6975684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975687">test</span>&nbsp;<span class="op" id="6975692">:=</span>&nbsp;<span class="ident" id="6975695">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975707">f</span><span class="op" id="6975708">,</span>&nbsp;<span class="ident" id="6975710">err</span>&nbsp;<span class="op" id="6975714">:=</span>&nbsp;<span class="ident" id="6975717">os</span><span class="op" id="6975719">.</span><span class="ident" id="6975720">Open</span><span class="op" id="6975724">(</span><span class="ident" id="6975725">test</span><span class="op" id="6975729">.</span><span class="ident" id="6975730">file</span><span class="op" id="6975734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975737">if</span>&nbsp;<span class="ident" id="6975740">err</span>&nbsp;<span class="op" id="6975744">!=</span>&nbsp;<span class="builtintype" id="6975747">nil</span>&nbsp;<span class="op" id="6975751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975755">t</span><span class="op" id="6975756">.</span><span class="ident" id="6975757">Fatalf</span><span class="op" id="6975763">(</span><span class="string" id="6975764">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6975786">,</span>&nbsp;<span class="ident" id="6975788">err</span><span class="op" id="6975791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975797">defer</span>&nbsp;<span class="ident" id="6975803">f</span><span class="op" id="6975804">.</span><span class="ident" id="6975805">Close</span><span class="op" id="6975810">(</span><span class="op" id="6975811">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975815">type</span>&nbsp;<span class="ident" id="6975820">readerOnly</span>&nbsp;<span class="keyword" id="6975831">struct</span>&nbsp;<span class="op" id="6975838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975842">io</span><span class="op" id="6975844">.</span><span class="ident" id="6975845">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975856">tr</span>&nbsp;<span class="op" id="6975859">:=</span>&nbsp;<span class="ident" id="6975862">NewReader</span><span class="op" id="6975871">(</span><span class="ident" id="6975872">readerOnly</span><span class="op" id="6975882">{</span><span class="ident" id="6975883">f</span><span class="op" id="6975884">}</span><span class="op" id="6975885">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975888">nread</span>&nbsp;<span class="op" id="6975894">:=</span>&nbsp;<span class="num" id="6975897">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975901">for</span>&nbsp;<span class="op" id="6975905">;</span>&nbsp;<span class="op" id="6975907">;</span>&nbsp;<span class="ident" id="6975909">nread</span><span class="op" id="6975914">++</span>&nbsp;<span class="op" id="6975917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975921">_</span><span class="op" id="6975922">,</span>&nbsp;<span class="ident" id="6975924">err</span>&nbsp;<span class="op" id="6975928">:=</span>&nbsp;<span class="ident" id="6975931">tr</span><span class="op" id="6975933">.</span><span class="ident" id="6975934">Next</span><span class="op" id="6975938">(</span><span class="op" id="6975939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975943">if</span>&nbsp;<span class="ident" id="6975946">err</span>&nbsp;<span class="op" id="6975950">==</span>&nbsp;<span class="ident" id="6975953">io</span><span class="op" id="6975955">.</span><span class="ident" id="6975956">EOF</span>&nbsp;<span class="op" id="6975960">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975965">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6975973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6975977">if</span>&nbsp;<span class="ident" id="6975980">err</span>&nbsp;<span class="op" id="6975984">!=</span>&nbsp;<span class="builtintype" id="6975987">nil</span>&nbsp;<span class="op" id="6975991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975996">t</span><span class="op" id="6975997">.</span><span class="ident" id="6975998">Fatalf</span><span class="op" id="6976004">(</span><span class="string" id="6976005">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6976027">,</span>&nbsp;<span class="ident" id="6976029">err</span><span class="op" id="6976032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976036">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976043">if</span>&nbsp;<span class="ident" id="6976046">nread</span>&nbsp;<span class="op" id="6976052">!=</span>&nbsp;<span class="builtinfunc" id="6976055">len</span><span class="op" id="6976058">(</span><span class="ident" id="6976059">test</span><span class="op" id="6976063">.</span><span class="ident" id="6976064">headers</span><span class="op" id="6976071">)</span>&nbsp;<span class="op" id="6976073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976077">t</span><span class="op" id="6976078">.</span><span class="ident" id="6976079">Errorf</span><span class="op" id="6976085">(</span><span class="string" id="6976086">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6976142">,</span>&nbsp;<span class="builtinfunc" id="6976144">len</span><span class="op" id="6976147">(</span><span class="ident" id="6976148">test</span><span class="op" id="6976152">.</span><span class="ident" id="6976153">headers</span><span class="op" id="6976160">)</span><span class="op" id="6976161">,</span>&nbsp;<span class="ident" id="6976163">nread</span><span class="op" id="6976168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976171">}</span><br>
<span class="lineno">440</span><span class="op" id="6976173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6976176">func</span>&nbsp;<span class="ident" id="6976181">TestParsePAXHeader</span><span class="op" id="6976199">(</span><span class="ident" id="6976200">t</span>&nbsp;<span class="op" id="6976202">*</span><span class="ident" id="6976203">testing</span><span class="op" id="6976210">.</span><span class="ident" id="6976211">T</span><span class="op" id="6976212">)</span>&nbsp;<span class="op" id="6976214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976217">paxTests</span>&nbsp;<span class="op" id="6976226">:=</span>&nbsp;<span class="op" id="6976229">[</span><span class="op" id="6976230">]</span><span class="op" id="6976231">[</span><span class="num" id="6976232">3</span><span class="op" id="6976233">]</span><span class="builtintype" id="6976234">string</span><span class="op" id="6976240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976244">{</span><span class="string" id="6976245">&#34;a&#34;</span><span class="op" id="6976248">,</span>&nbsp;<span class="string" id="6976250">&#34;a=name&#34;</span><span class="op" id="6976258">,</span>&nbsp;<span class="string" id="6976260">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6976273">}</span><span class="op" id="6976274">,</span>&nbsp;<span class="comment" id="6976276">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976329">{</span><span class="string" id="6976330">&#34;a&#34;</span><span class="op" id="6976333">,</span>&nbsp;<span class="string" id="6976335">&#34;a=name&#34;</span><span class="op" id="6976343">,</span>&nbsp;<span class="string" id="6976345">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6976357">}</span><span class="op" id="6976358">,</span>&nbsp;&nbsp;<span class="comment" id="6976361">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976413">{</span><span class="string" id="6976414">&#34;mtime&#34;</span><span class="op" id="6976421">,</span>&nbsp;<span class="string" id="6976423">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6976451">,</span>&nbsp;<span class="string" id="6976453">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6976486">}</span><span class="op" id="6976487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976490">for</span>&nbsp;<span class="ident" id="6976494">_</span><span class="op" id="6976495">,</span>&nbsp;<span class="ident" id="6976497">test</span>&nbsp;<span class="op" id="6976502">:=</span>&nbsp;<span class="keyword" id="6976505">range</span>&nbsp;<span class="ident" id="6976511">paxTests</span>&nbsp;<span class="op" id="6976520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976524">key</span><span class="op" id="6976527">,</span>&nbsp;<span class="ident" id="6976529">expected</span><span class="op" id="6976537">,</span>&nbsp;<span class="ident" id="6976539">raw</span>&nbsp;<span class="op" id="6976543">:=</span>&nbsp;<span class="ident" id="6976546">test</span><span class="op" id="6976550">[</span><span class="num" id="6976551">0</span><span class="op" id="6976552">]</span><span class="op" id="6976553">,</span>&nbsp;<span class="ident" id="6976555">test</span><span class="op" id="6976559">[</span><span class="num" id="6976560">1</span><span class="op" id="6976561">]</span><span class="op" id="6976562">,</span>&nbsp;<span class="ident" id="6976564">test</span><span class="op" id="6976568">[</span><span class="num" id="6976569">2</span><span class="op" id="6976570">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976574">reader</span>&nbsp;<span class="op" id="6976581">:=</span>&nbsp;<span class="ident" id="6976584">bytes</span><span class="op" id="6976589">.</span><span class="ident" id="6976590">NewReader</span><span class="op" id="6976599">(</span><span class="op" id="6976600">[</span><span class="op" id="6976601">]</span><span class="builtintype" id="6976602">byte</span><span class="op" id="6976606">(</span><span class="ident" id="6976607">raw</span><span class="op" id="6976610">)</span><span class="op" id="6976611">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976615">headers</span><span class="op" id="6976622">,</span>&nbsp;<span class="ident" id="6976624">err</span>&nbsp;<span class="op" id="6976628">:=</span>&nbsp;<span class="ident" id="6976631">parsePAX</span><span class="op" id="6976639">(</span><span class="ident" id="6976640">reader</span><span class="op" id="6976646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976650">if</span>&nbsp;<span class="ident" id="6976653">err</span>&nbsp;<span class="op" id="6976657">!=</span>&nbsp;<span class="builtintype" id="6976660">nil</span>&nbsp;<span class="op" id="6976664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976669">t</span><span class="op" id="6976670">.</span><span class="ident" id="6976671">Errorf</span><span class="op" id="6976677">(</span><span class="string" id="6976678">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6976726">,</span>&nbsp;<span class="ident" id="6976728">err</span><span class="op" id="6976731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976736">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976747">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976751">if</span>&nbsp;<span class="ident" id="6976754">strings</span><span class="op" id="6976761">.</span><span class="ident" id="6976762">EqualFold</span><span class="op" id="6976771">(</span><span class="ident" id="6976772">headers</span><span class="op" id="6976779">[</span><span class="ident" id="6976780">key</span><span class="op" id="6976783">]</span><span class="op" id="6976784">,</span>&nbsp;<span class="ident" id="6976786">expected</span><span class="op" id="6976794">)</span>&nbsp;<span class="op" id="6976796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976801">t</span><span class="op" id="6976802">.</span><span class="ident" id="6976803">Errorf</span><span class="op" id="6976809">(</span><span class="string" id="6976810">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6976862">,</span>&nbsp;<span class="ident" id="6976864">headers</span><span class="op" id="6976871">[</span><span class="ident" id="6976872">key</span><span class="op" id="6976875">]</span><span class="op" id="6976876">,</span>&nbsp;<span class="ident" id="6976878">expected</span><span class="op" id="6976886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976891">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976906">trailer</span>&nbsp;<span class="op" id="6976914">:=</span>&nbsp;<span class="builtinfunc" id="6976917">make</span><span class="op" id="6976921">(</span><span class="op" id="6976922">[</span><span class="op" id="6976923">]</span><span class="builtintype" id="6976924">byte</span><span class="op" id="6976928">,</span>&nbsp;<span class="num" id="6976930">100</span><span class="op" id="6976933">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976937">n</span><span class="op" id="6976938">,</span>&nbsp;<span class="ident" id="6976940">err</span>&nbsp;<span class="op" id="6976944">:=</span>&nbsp;<span class="ident" id="6976947">reader</span><span class="op" id="6976953">.</span><span class="ident" id="6976954">Read</span><span class="op" id="6976958">(</span><span class="ident" id="6976959">trailer</span><span class="op" id="6976966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976970">if</span>&nbsp;<span class="ident" id="6976973">err</span>&nbsp;<span class="op" id="6976977">!=</span>&nbsp;<span class="ident" id="6976980">io</span><span class="op" id="6976982">.</span><span class="ident" id="6976983">EOF</span>&nbsp;<span class="op" id="6976987">||</span>&nbsp;<span class="ident" id="6976990">n</span>&nbsp;<span class="op" id="6976992">!=</span>&nbsp;<span class="num" id="6976995">0</span>&nbsp;<span class="op" id="6976997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977002">t</span><span class="op" id="6977003">.</span><span class="ident" id="6977004">Error</span><span class="op" id="6977009">(</span><span class="string" id="6977010">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6977034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977041">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977044">badHeader</span>&nbsp;<span class="op" id="6977054">:=</span>&nbsp;<span class="ident" id="6977057">bytes</span><span class="op" id="6977062">.</span><span class="ident" id="6977063">NewReader</span><span class="op" id="6977072">(</span><span class="op" id="6977073">[</span><span class="op" id="6977074">]</span><span class="builtintype" id="6977075">byte</span><span class="op" id="6977079">(</span><span class="string" id="6977080">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6977096">)</span><span class="op" id="6977097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977100">if</span>&nbsp;<span class="ident" id="6977103">_</span><span class="op" id="6977104">,</span>&nbsp;<span class="ident" id="6977106">err</span>&nbsp;<span class="op" id="6977110">:=</span>&nbsp;<span class="ident" id="6977113">parsePAX</span><span class="op" id="6977121">(</span><span class="ident" id="6977122">badHeader</span><span class="op" id="6977131">)</span><span class="op" id="6977132">;</span>&nbsp;<span class="ident" id="6977134">err</span>&nbsp;<span class="op" id="6977138">!=</span>&nbsp;<span class="ident" id="6977141">ErrHeader</span>&nbsp;<span class="op" id="6977151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977155">t</span><span class="op" id="6977156">.</span><span class="ident" id="6977157">Fatal</span><span class="op" id="6977162">(</span><span class="string" id="6977163">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6977207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977210">}</span><br>
<span class="lineno"></span><span class="op" id="6977212">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6977215">func</span>&nbsp;<span class="ident" id="6977220">TestParsePAXTime</span><span class="op" id="6977236">(</span><span class="ident" id="6977237">t</span>&nbsp;<span class="op" id="6977239">*</span><span class="ident" id="6977240">testing</span><span class="op" id="6977247">.</span><span class="ident" id="6977248">T</span><span class="op" id="6977249">)</span>&nbsp;<span class="op" id="6977251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6977254">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977285">timestamps</span>&nbsp;<span class="op" id="6977296">:=</span>&nbsp;<span class="keyword" id="6977299">map</span><span class="op" id="6977302">[</span><span class="builtintype" id="6977303">string</span><span class="op" id="6977309">]</span><span class="ident" id="6977310">time</span><span class="op" id="6977314">.</span><span class="ident" id="6977315">Time</span><span class="op" id="6977319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6977323">&#34;1350244992.023960108&#34;</span><span class="op" id="6977345">:</span>&nbsp;&nbsp;<span class="ident" id="6977348">time</span><span class="op" id="6977352">.</span><span class="ident" id="6977353">Unix</span><span class="op" id="6977357">(</span><span class="num" id="6977358">1350244992</span><span class="op" id="6977368">,</span>&nbsp;<span class="num" id="6977370">23960108</span><span class="op" id="6977378">)</span><span class="op" id="6977379">,</span>&nbsp;<span class="comment" id="6977381">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6977402">&#34;1350244992.02396010&#34;</span><span class="op" id="6977423">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6977427">time</span><span class="op" id="6977431">.</span><span class="ident" id="6977432">Unix</span><span class="op" id="6977436">(</span><span class="num" id="6977437">1350244992</span><span class="op" id="6977447">,</span>&nbsp;<span class="num" id="6977449">23960100</span><span class="op" id="6977457">)</span><span class="op" id="6977458">,</span>&nbsp;<span class="comment" id="6977460">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6977487">&#34;1350244992.0239601089&#34;</span><span class="op" id="6977510">:</span>&nbsp;<span class="ident" id="6977512">time</span><span class="op" id="6977516">.</span><span class="ident" id="6977517">Unix</span><span class="op" id="6977521">(</span><span class="num" id="6977522">1350244992</span><span class="op" id="6977532">,</span>&nbsp;<span class="num" id="6977534">23960108</span><span class="op" id="6977542">)</span><span class="op" id="6977543">,</span>&nbsp;<span class="comment" id="6977545">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6977573">&#34;1350244992&#34;</span><span class="op" id="6977585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977598">time</span><span class="op" id="6977602">.</span><span class="ident" id="6977603">Unix</span><span class="op" id="6977607">(</span><span class="num" id="6977608">1350244992</span><span class="op" id="6977618">,</span>&nbsp;<span class="num" id="6977620">0</span><span class="op" id="6977621">)</span><span class="op" id="6977622">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6977631">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977658">for</span>&nbsp;<span class="ident" id="6977662">input</span><span class="op" id="6977667">,</span>&nbsp;<span class="ident" id="6977669">expected</span>&nbsp;<span class="op" id="6977678">:=</span>&nbsp;<span class="keyword" id="6977681">range</span>&nbsp;<span class="ident" id="6977687">timestamps</span>&nbsp;<span class="op" id="6977698">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977702">ts</span><span class="op" id="6977704">,</span>&nbsp;<span class="ident" id="6977706">err</span>&nbsp;<span class="op" id="6977710">:=</span>&nbsp;<span class="ident" id="6977713">parsePAXTime</span><span class="op" id="6977725">(</span><span class="ident" id="6977726">input</span><span class="op" id="6977731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977735">if</span>&nbsp;<span class="ident" id="6977738">err</span>&nbsp;<span class="op" id="6977742">!=</span>&nbsp;<span class="builtintype" id="6977745">nil</span>&nbsp;<span class="op" id="6977749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977754">t</span><span class="op" id="6977755">.</span><span class="ident" id="6977756">Fatal</span><span class="op" id="6977761">(</span><span class="ident" id="6977762">err</span><span class="op" id="6977765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977773">if</span>&nbsp;<span class="op" id="6977776">!</span><span class="ident" id="6977777">ts</span><span class="op" id="6977779">.</span><span class="ident" id="6977780">Equal</span><span class="op" id="6977785">(</span><span class="ident" id="6977786">expected</span><span class="op" id="6977794">)</span>&nbsp;<span class="op" id="6977796">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977801">t</span><span class="op" id="6977802">.</span><span class="ident" id="6977803">Fatalf</span><span class="op" id="6977809">(</span><span class="string" id="6977810">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6977838">,</span>&nbsp;<span class="ident" id="6977840">ts</span><span class="op" id="6977842">,</span>&nbsp;<span class="ident" id="6977844">expected</span><span class="op" id="6977852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977859">}</span><br>
<span class="lineno"></span><span class="op" id="6977861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6977864">func</span>&nbsp;<span class="ident" id="6977869">TestMergePAX</span><span class="op" id="6977881">(</span><span class="ident" id="6977882">t</span>&nbsp;<span class="op" id="6977884">*</span><span class="ident" id="6977885">testing</span><span class="op" id="6977892">.</span><span class="ident" id="6977893">T</span><span class="op" id="6977894">)</span>&nbsp;<span class="op" id="6977896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977899">hdr</span>&nbsp;<span class="op" id="6977903">:=</span>&nbsp;<span class="builtinfunc" id="6977906">new</span><span class="op" id="6977909">(</span><span class="ident" id="6977910">Header</span><span class="op" id="6977916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6977919">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977969">headers</span>&nbsp;<span class="op" id="6977977">:=</span>&nbsp;<span class="keyword" id="6977980">map</span><span class="op" id="6977983">[</span><span class="builtintype" id="6977984">string</span><span class="op" id="6977990">]</span><span class="builtintype" id="6977991">string</span><span class="op" id="6977997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978001">&#34;path&#34;</span><span class="op" id="6978007">:</span>&nbsp;&nbsp;<span class="string" id="6978010">&#34;a/b/c&#34;</span><span class="op" id="6978017">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978021">&#34;uid&#34;</span><span class="op" id="6978026">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6978030">&#34;1000&#34;</span><span class="op" id="6978036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978040">&#34;mtime&#34;</span><span class="op" id="6978047">:</span>&nbsp;<span class="string" id="6978049">&#34;1350244992.023960108&#34;</span><span class="op" id="6978071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978077">err</span>&nbsp;<span class="op" id="6978081">:=</span>&nbsp;<span class="ident" id="6978084">mergePAX</span><span class="op" id="6978092">(</span><span class="ident" id="6978093">hdr</span><span class="op" id="6978096">,</span>&nbsp;<span class="ident" id="6978098">headers</span><span class="op" id="6978105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978108">if</span>&nbsp;<span class="ident" id="6978111">err</span>&nbsp;<span class="op" id="6978115">!=</span>&nbsp;<span class="builtintype" id="6978118">nil</span>&nbsp;<span class="op" id="6978122">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978126">t</span><span class="op" id="6978127">.</span><span class="ident" id="6978128">Fatal</span><span class="op" id="6978133">(</span><span class="ident" id="6978134">err</span><span class="op" id="6978137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978143">want</span>&nbsp;<span class="op" id="6978148">:=</span>&nbsp;<span class="op" id="6978151">&amp;</span><span class="ident" id="6978152">Header</span><span class="op" id="6978158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978162">Name</span><span class="op" id="6978166">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6978171">&#34;a/b/c&#34;</span><span class="op" id="6978178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978182">Uid</span><span class="op" id="6978185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6978191">1000</span><span class="op" id="6978195">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978199">ModTime</span><span class="op" id="6978206">:</span>&nbsp;<span class="ident" id="6978208">time</span><span class="op" id="6978212">.</span><span class="ident" id="6978213">Unix</span><span class="op" id="6978217">(</span><span class="num" id="6978218">1350244992</span><span class="op" id="6978228">,</span>&nbsp;<span class="num" id="6978230">23960108</span><span class="op" id="6978238">)</span><span class="op" id="6978239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978245">if</span>&nbsp;<span class="op" id="6978248">!</span><span class="ident" id="6978249">reflect</span><span class="op" id="6978256">.</span><span class="ident" id="6978257">DeepEqual</span><span class="op" id="6978266">(</span><span class="ident" id="6978267">hdr</span><span class="op" id="6978270">,</span>&nbsp;<span class="ident" id="6978272">want</span><span class="op" id="6978276">)</span>&nbsp;<span class="op" id="6978278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978282">t</span><span class="op" id="6978283">.</span><span class="ident" id="6978284">Errorf</span><span class="op" id="6978290">(</span><span class="string" id="6978291">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6978327">,</span>&nbsp;<span class="ident" id="6978329">hdr</span><span class="op" id="6978332">,</span>&nbsp;<span class="ident" id="6978334">want</span><span class="op" id="6978338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978341">}</span><br>
<span class="lineno">510</span><span class="op" id="6978343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6978346">func</span>&nbsp;<span class="ident" id="6978351">TestSparseEndToEnd</span><span class="op" id="6978369">(</span><span class="ident" id="6978370">t</span>&nbsp;<span class="op" id="6978372">*</span><span class="ident" id="6978373">testing</span><span class="op" id="6978380">.</span><span class="ident" id="6978381">T</span><span class="op" id="6978382">)</span>&nbsp;<span class="op" id="6978384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978387">test</span>&nbsp;<span class="op" id="6978392">:=</span>&nbsp;<span class="ident" id="6978395">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978410">f</span><span class="op" id="6978411">,</span>&nbsp;<span class="ident" id="6978413">err</span>&nbsp;<span class="op" id="6978417">:=</span>&nbsp;<span class="ident" id="6978420">os</span><span class="op" id="6978422">.</span><span class="ident" id="6978423">Open</span><span class="op" id="6978427">(</span><span class="ident" id="6978428">test</span><span class="op" id="6978432">.</span><span class="ident" id="6978433">file</span><span class="op" id="6978437">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978440">if</span>&nbsp;<span class="ident" id="6978443">err</span>&nbsp;<span class="op" id="6978447">!=</span>&nbsp;<span class="builtintype" id="6978450">nil</span>&nbsp;<span class="op" id="6978454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978458">t</span><span class="op" id="6978459">.</span><span class="ident" id="6978460">Fatalf</span><span class="op" id="6978466">(</span><span class="string" id="6978467">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6978489">,</span>&nbsp;<span class="ident" id="6978491">err</span><span class="op" id="6978494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978500">defer</span>&nbsp;<span class="ident" id="6978506">f</span><span class="op" id="6978507">.</span><span class="ident" id="6978508">Close</span><span class="op" id="6978513">(</span><span class="op" id="6978514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978518">tr</span>&nbsp;<span class="op" id="6978521">:=</span>&nbsp;<span class="ident" id="6978524">NewReader</span><span class="op" id="6978533">(</span><span class="ident" id="6978534">f</span><span class="op" id="6978535">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978539">headers</span>&nbsp;<span class="op" id="6978547">:=</span>&nbsp;<span class="ident" id="6978550">test</span><span class="op" id="6978554">.</span><span class="ident" id="6978555">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978564">cksums</span>&nbsp;<span class="op" id="6978571">:=</span>&nbsp;<span class="ident" id="6978574">test</span><span class="op" id="6978578">.</span><span class="ident" id="6978579">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978587">nread</span>&nbsp;<span class="op" id="6978593">:=</span>&nbsp;<span class="num" id="6978596">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6978600">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978624">for</span>&nbsp;<span class="op" id="6978628">;</span>&nbsp;<span class="op" id="6978630">;</span>&nbsp;<span class="ident" id="6978632">nread</span><span class="op" id="6978637">++</span>&nbsp;<span class="op" id="6978640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978644">hdr</span><span class="op" id="6978647">,</span>&nbsp;<span class="ident" id="6978649">err</span>&nbsp;<span class="op" id="6978653">:=</span>&nbsp;<span class="ident" id="6978656">tr</span><span class="op" id="6978658">.</span><span class="ident" id="6978659">Next</span><span class="op" id="6978663">(</span><span class="op" id="6978664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978668">if</span>&nbsp;<span class="ident" id="6978671">hdr</span>&nbsp;<span class="op" id="6978675">==</span>&nbsp;<span class="builtintype" id="6978678">nil</span>&nbsp;<span class="op" id="6978682">||</span>&nbsp;<span class="ident" id="6978685">err</span>&nbsp;<span class="op" id="6978689">==</span>&nbsp;<span class="ident" id="6978692">io</span><span class="op" id="6978694">.</span><span class="ident" id="6978695">EOF</span>&nbsp;<span class="op" id="6978699">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978704">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6978717">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978739">if</span>&nbsp;<span class="op" id="6978742">!</span><span class="ident" id="6978743">reflect</span><span class="op" id="6978750">.</span><span class="ident" id="6978751">DeepEqual</span><span class="op" id="6978760">(</span><span class="op" id="6978761">*</span><span class="ident" id="6978762">hdr</span><span class="op" id="6978765">,</span>&nbsp;<span class="op" id="6978767">*</span><span class="ident" id="6978768">headers</span><span class="op" id="6978775">[</span><span class="ident" id="6978776">nread</span><span class="op" id="6978781">]</span><span class="op" id="6978782">)</span>&nbsp;<span class="op" id="6978784">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978789">t</span><span class="op" id="6978790">.</span><span class="ident" id="6978791">Errorf</span><span class="op" id="6978797">(</span><span class="string" id="6978798">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6978837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978843">*</span><span class="ident" id="6978844">hdr</span><span class="op" id="6978847">,</span>&nbsp;<span class="ident" id="6978849">headers</span><span class="op" id="6978856">[</span><span class="ident" id="6978857">nread</span><span class="op" id="6978862">]</span><span class="op" id="6978863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6978867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6978872">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978909">h</span>&nbsp;<span class="op" id="6978911">:=</span>&nbsp;<span class="ident" id="6978914">md5</span><span class="op" id="6978917">.</span><span class="ident" id="6978918">New</span><span class="op" id="6978921">(</span><span class="op" id="6978922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978926">_</span><span class="op" id="6978927">,</span>&nbsp;<span class="ident" id="6978929">err</span>&nbsp;<span class="op" id="6978933">=</span>&nbsp;<span class="ident" id="6978935">io</span><span class="op" id="6978937">.</span><span class="ident" id="6978938">Copy</span><span class="op" id="6978942">(</span><span class="ident" id="6978943">h</span><span class="op" id="6978944">,</span>&nbsp;<span class="ident" id="6978946">tr</span><span class="op" id="6978948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6978952">if</span>&nbsp;<span class="ident" id="6978955">err</span>&nbsp;<span class="op" id="6978959">!=</span>&nbsp;<span class="builtintype" id="6978962">nil</span>&nbsp;<span class="op" id="6978966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6978971">t</span><span class="op" id="6978972">.</span><span class="ident" id="6978973">Fatalf</span><span class="op" id="6978979">(</span><span class="string" id="6978980">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6979002">,</span>&nbsp;<span class="ident" id="6979004">err</span><span class="op" id="6979007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979011">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6979016">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979037">have</span>&nbsp;<span class="op" id="6979042">:=</span>&nbsp;<span class="ident" id="6979045">fmt</span><span class="op" id="6979048">.</span><span class="ident" id="6979049">Sprintf</span><span class="op" id="6979056">(</span><span class="string" id="6979057">&#34;%x&#34;</span><span class="op" id="6979061">,</span>&nbsp;<span class="ident" id="6979063">h</span><span class="op" id="6979064">.</span><span class="ident" id="6979065">Sum</span><span class="op" id="6979068">(</span><span class="builtintype" id="6979069">nil</span><span class="op" id="6979072">)</span><span class="op" id="6979073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979077">want</span>&nbsp;<span class="op" id="6979082">:=</span>&nbsp;<span class="ident" id="6979085">cksums</span><span class="op" id="6979091">[</span><span class="ident" id="6979092">nread</span><span class="op" id="6979097">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979101">if</span>&nbsp;<span class="ident" id="6979104">want</span>&nbsp;<span class="op" id="6979109">!=</span>&nbsp;<span class="ident" id="6979112">have</span>&nbsp;<span class="op" id="6979117">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979122">t</span><span class="op" id="6979123">.</span><span class="ident" id="6979124">Errorf</span><span class="op" id="6979130">(</span><span class="string" id="6979131">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6979177">,</span>&nbsp;<span class="ident" id="6979179">hdr</span><span class="op" id="6979182">.</span><span class="ident" id="6979183">Name</span><span class="op" id="6979187">,</span>&nbsp;<span class="ident" id="6979189">have</span><span class="op" id="6979193">,</span>&nbsp;<span class="ident" id="6979195">want</span><span class="op" id="6979199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6979209">if</span>&nbsp;<span class="ident" id="6979212">nread</span>&nbsp;<span class="op" id="6979218">!=</span>&nbsp;<span class="builtinfunc" id="6979221">len</span><span class="op" id="6979224">(</span><span class="ident" id="6979225">headers</span><span class="op" id="6979232">)</span>&nbsp;<span class="op" id="6979234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979238">t</span><span class="op" id="6979239">.</span><span class="ident" id="6979240">Errorf</span><span class="op" id="6979246">(</span><span class="string" id="6979247">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6979303">,</span>&nbsp;<span class="builtinfunc" id="6979305">len</span><span class="op" id="6979308">(</span><span class="ident" id="6979309">headers</span><span class="op" id="6979316">)</span><span class="op" id="6979317">,</span>&nbsp;<span class="ident" id="6979319">nread</span><span class="op" id="6979324">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979327">}</span><br>
<span class="lineno"></span><span class="op" id="6979329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6979332">type</span>&nbsp;<span class="ident" id="6979337">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6979356">struct</span>&nbsp;<span class="op" id="6979363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979366">sparseData</span>&nbsp;<span class="op" id="6979377">[</span><span class="op" id="6979378">]</span><span class="builtintype" id="6979379">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979385">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6979396">[</span><span class="op" id="6979397">]</span><span class="ident" id="6979398">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979411">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6979422">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979429">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6979440">[</span><span class="op" id="6979441">]</span><span class="builtintype" id="6979442">byte</span><br>
<span class="lineno"></span><span class="op" id="6979447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6979450">var</span>&nbsp;<span class="ident" id="6979454">sparseFileReadTests</span>&nbsp;<span class="op" id="6979474">=</span>&nbsp;<span class="op" id="6979476">[</span><span class="op" id="6979477">]</span><span class="ident" id="6979478">sparseFileReadTest</span><span class="op" id="6979496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979503">sparseData</span><span class="op" id="6979513">:</span>&nbsp;<span class="op" id="6979515">[</span><span class="op" id="6979516">]</span><span class="builtintype" id="6979517">byte</span><span class="op" id="6979521">(</span><span class="string" id="6979522">&#34;abcde&#34;</span><span class="op" id="6979529">)</span><span class="op" id="6979530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979534">sparseMap</span><span class="op" id="6979543">:</span>&nbsp;<span class="op" id="6979545">[</span><span class="op" id="6979546">]</span><span class="ident" id="6979547">sparseEntry</span><span class="op" id="6979558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979563">{</span><span class="ident" id="6979564">offset</span><span class="op" id="6979570">:</span>&nbsp;<span class="num" id="6979572">0</span><span class="op" id="6979573">,</span>&nbsp;<span class="ident" id="6979575">numBytes</span><span class="op" id="6979583">:</span>&nbsp;<span class="num" id="6979585">2</span><span class="op" id="6979586">}</span><span class="op" id="6979587">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979592">{</span><span class="ident" id="6979593">offset</span><span class="op" id="6979599">:</span>&nbsp;<span class="num" id="6979601">5</span><span class="op" id="6979602">,</span>&nbsp;<span class="ident" id="6979604">numBytes</span><span class="op" id="6979612">:</span>&nbsp;<span class="num" id="6979614">3</span><span class="op" id="6979615">}</span><span class="op" id="6979616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979620">}</span><span class="op" id="6979621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979625">realSize</span><span class="op" id="6979633">:</span>&nbsp;<span class="num" id="6979635">8</span><span class="op" id="6979636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979640">expected</span><span class="op" id="6979648">:</span>&nbsp;<span class="op" id="6979650">[</span><span class="op" id="6979651">]</span><span class="builtintype" id="6979652">byte</span><span class="op" id="6979656">(</span><span class="string" id="6979657">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6979676">)</span><span class="op" id="6979677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979680">}</span><span class="op" id="6979681">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979688">sparseData</span><span class="op" id="6979698">:</span>&nbsp;<span class="op" id="6979700">[</span><span class="op" id="6979701">]</span><span class="builtintype" id="6979702">byte</span><span class="op" id="6979706">(</span><span class="string" id="6979707">&#34;abcde&#34;</span><span class="op" id="6979714">)</span><span class="op" id="6979715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979719">sparseMap</span><span class="op" id="6979728">:</span>&nbsp;<span class="op" id="6979730">[</span><span class="op" id="6979731">]</span><span class="ident" id="6979732">sparseEntry</span><span class="op" id="6979743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979748">{</span><span class="ident" id="6979749">offset</span><span class="op" id="6979755">:</span>&nbsp;<span class="num" id="6979757">0</span><span class="op" id="6979758">,</span>&nbsp;<span class="ident" id="6979760">numBytes</span><span class="op" id="6979768">:</span>&nbsp;<span class="num" id="6979770">2</span><span class="op" id="6979771">}</span><span class="op" id="6979772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979777">{</span><span class="ident" id="6979778">offset</span><span class="op" id="6979784">:</span>&nbsp;<span class="num" id="6979786">5</span><span class="op" id="6979787">,</span>&nbsp;<span class="ident" id="6979789">numBytes</span><span class="op" id="6979797">:</span>&nbsp;<span class="num" id="6979799">3</span><span class="op" id="6979800">}</span><span class="op" id="6979801">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979805">}</span><span class="op" id="6979806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979810">realSize</span><span class="op" id="6979818">:</span>&nbsp;<span class="num" id="6979820">10</span><span class="op" id="6979822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979826">expected</span><span class="op" id="6979834">:</span>&nbsp;<span class="op" id="6979836">[</span><span class="op" id="6979837">]</span><span class="builtintype" id="6979838">byte</span><span class="op" id="6979842">(</span><span class="string" id="6979843">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6979870">)</span><span class="op" id="6979871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979874">}</span><span class="op" id="6979875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979878">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979882">sparseData</span><span class="op" id="6979892">:</span>&nbsp;<span class="op" id="6979894">[</span><span class="op" id="6979895">]</span><span class="builtintype" id="6979896">byte</span><span class="op" id="6979900">(</span><span class="string" id="6979901">&#34;abcde&#34;</span><span class="op" id="6979908">)</span><span class="op" id="6979909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6979913">sparseMap</span><span class="op" id="6979922">:</span>&nbsp;<span class="op" id="6979924">[</span><span class="op" id="6979925">]</span><span class="ident" id="6979926">sparseEntry</span><span class="op" id="6979937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979942">{</span><span class="ident" id="6979943">offset</span><span class="op" id="6979949">:</span>&nbsp;<span class="num" id="6979951">1</span><span class="op" id="6979952">,</span>&nbsp;<span class="ident" id="6979954">numBytes</span><span class="op" id="6979962">:</span>&nbsp;<span class="num" id="6979964">3</span><span class="op" id="6979965">}</span><span class="op" id="6979966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979971">{</span><span class="ident" id="6979972">offset</span><span class="op" id="6979978">:</span>&nbsp;<span class="num" id="6979980">6</span><span class="op" id="6979981">,</span>&nbsp;<span class="ident" id="6979983">numBytes</span><span class="op" id="6979991">:</span>&nbsp;<span class="num" id="6979993">2</span><span class="op" id="6979994">}</span><span class="op" id="6979995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6979999">}</span><span class="op" id="6980000">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980004">realSize</span><span class="op" id="6980012">:</span>&nbsp;<span class="num" id="6980014">8</span><span class="op" id="6980015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980019">expected</span><span class="op" id="6980027">:</span>&nbsp;<span class="op" id="6980029">[</span><span class="op" id="6980030">]</span><span class="builtintype" id="6980031">byte</span><span class="op" id="6980035">(</span><span class="string" id="6980036">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6980055">)</span><span class="op" id="6980056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980059">}</span><span class="op" id="6980060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980067">sparseData</span><span class="op" id="6980077">:</span>&nbsp;<span class="op" id="6980079">[</span><span class="op" id="6980080">]</span><span class="builtintype" id="6980081">byte</span><span class="op" id="6980085">(</span><span class="string" id="6980086">&#34;abcde&#34;</span><span class="op" id="6980093">)</span><span class="op" id="6980094">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980098">sparseMap</span><span class="op" id="6980107">:</span>&nbsp;<span class="op" id="6980109">[</span><span class="op" id="6980110">]</span><span class="ident" id="6980111">sparseEntry</span><span class="op" id="6980122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980127">{</span><span class="ident" id="6980128">offset</span><span class="op" id="6980134">:</span>&nbsp;<span class="num" id="6980136">1</span><span class="op" id="6980137">,</span>&nbsp;<span class="ident" id="6980139">numBytes</span><span class="op" id="6980147">:</span>&nbsp;<span class="num" id="6980149">3</span><span class="op" id="6980150">}</span><span class="op" id="6980151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980156">{</span><span class="ident" id="6980157">offset</span><span class="op" id="6980163">:</span>&nbsp;<span class="num" id="6980165">6</span><span class="op" id="6980166">,</span>&nbsp;<span class="ident" id="6980168">numBytes</span><span class="op" id="6980176">:</span>&nbsp;<span class="num" id="6980178">2</span><span class="op" id="6980179">}</span><span class="op" id="6980180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980184">}</span><span class="op" id="6980185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980189">realSize</span><span class="op" id="6980197">:</span>&nbsp;<span class="num" id="6980199">10</span><span class="op" id="6980201">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980205">expected</span><span class="op" id="6980213">:</span>&nbsp;<span class="op" id="6980215">[</span><span class="op" id="6980216">]</span><span class="builtintype" id="6980217">byte</span><span class="op" id="6980221">(</span><span class="string" id="6980222">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6980249">)</span><span class="op" id="6980250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980253">}</span><span class="op" id="6980254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980261">sparseData</span><span class="op" id="6980271">:</span>&nbsp;<span class="op" id="6980273">[</span><span class="op" id="6980274">]</span><span class="builtintype" id="6980275">byte</span><span class="op" id="6980279">(</span><span class="string" id="6980280">&#34;&#34;</span><span class="op" id="6980282">)</span><span class="op" id="6980283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980287">sparseMap</span><span class="op" id="6980296">:</span>&nbsp;&nbsp;<span class="builtintype" id="6980299">nil</span><span class="op" id="6980302">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980306">realSize</span><span class="op" id="6980314">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6980318">2</span><span class="op" id="6980319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980323">expected</span><span class="op" id="6980331">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6980335">[</span><span class="op" id="6980336">]</span><span class="builtintype" id="6980337">byte</span><span class="op" id="6980341">(</span><span class="string" id="6980342">&#34;\x00\x00&#34;</span><span class="op" id="6980352">)</span><span class="op" id="6980353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980356">}</span><span class="op" id="6980357">,</span><br>
<span class="lineno"></span><span class="op" id="6980359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6980362">func</span>&nbsp;<span class="ident" id="6980367">TestSparseFileReader</span><span class="op" id="6980387">(</span><span class="ident" id="6980388">t</span>&nbsp;<span class="op" id="6980390">*</span><span class="ident" id="6980391">testing</span><span class="op" id="6980398">.</span><span class="ident" id="6980399">T</span><span class="op" id="6980400">)</span>&nbsp;<span class="op" id="6980402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980405">for</span>&nbsp;<span class="ident" id="6980409">i</span><span class="op" id="6980410">,</span>&nbsp;<span class="ident" id="6980412">test</span>&nbsp;<span class="op" id="6980417">:=</span>&nbsp;<span class="keyword" id="6980420">range</span>&nbsp;<span class="ident" id="6980426">sparseFileReadTests</span>&nbsp;<span class="op" id="6980446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980450">r</span>&nbsp;<span class="op" id="6980452">:=</span>&nbsp;<span class="ident" id="6980455">bytes</span><span class="op" id="6980460">.</span><span class="ident" id="6980461">NewReader</span><span class="op" id="6980470">(</span><span class="ident" id="6980471">test</span><span class="op" id="6980475">.</span><span class="ident" id="6980476">sparseData</span><span class="op" id="6980486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980490">nb</span>&nbsp;<span class="op" id="6980493">:=</span>&nbsp;<span class="ident" id="6980496">int64</span><span class="op" id="6980501">(</span><span class="ident" id="6980502">r</span><span class="op" id="6980503">.</span><span class="ident" id="6980504">Len</span><span class="op" id="6980507">(</span><span class="op" id="6980508">)</span><span class="op" id="6980509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980513">sfr</span>&nbsp;<span class="op" id="6980517">:=</span>&nbsp;<span class="op" id="6980520">&amp;</span><span class="ident" id="6980521">sparseFileReader</span><span class="op" id="6980537">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980542">rfr</span><span class="op" id="6980545">:</span>&nbsp;<span class="op" id="6980547">&amp;</span><span class="ident" id="6980548">regFileReader</span><span class="op" id="6980561">{</span><span class="ident" id="6980562">r</span><span class="op" id="6980563">:</span>&nbsp;<span class="ident" id="6980565">r</span><span class="op" id="6980566">,</span>&nbsp;<span class="ident" id="6980568">nb</span><span class="op" id="6980570">:</span>&nbsp;<span class="ident" id="6980572">nb</span><span class="op" id="6980574">}</span><span class="op" id="6980575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980580">sp</span><span class="op" id="6980582">:</span>&nbsp;&nbsp;<span class="ident" id="6980585">test</span><span class="op" id="6980589">.</span><span class="ident" id="6980590">sparseMap</span><span class="op" id="6980599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980604">pos</span><span class="op" id="6980607">:</span>&nbsp;<span class="num" id="6980609">0</span><span class="op" id="6980610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980615">tot</span><span class="op" id="6980618">:</span>&nbsp;<span class="ident" id="6980620">test</span><span class="op" id="6980624">.</span><span class="ident" id="6980625">realSize</span><span class="op" id="6980633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980637">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980641">if</span>&nbsp;<span class="ident" id="6980644">sfr</span><span class="op" id="6980647">.</span><span class="ident" id="6980648">numBytes</span><span class="op" id="6980656">(</span><span class="op" id="6980657">)</span>&nbsp;<span class="op" id="6980659">!=</span>&nbsp;<span class="ident" id="6980662">nb</span>&nbsp;<span class="op" id="6980665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980670">t</span><span class="op" id="6980671">.</span><span class="ident" id="6980672">Errorf</span><span class="op" id="6980678">(</span><span class="string" id="6980679">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6980734">,</span>&nbsp;<span class="ident" id="6980736">i</span><span class="op" id="6980737">,</span>&nbsp;<span class="ident" id="6980739">sfr</span><span class="op" id="6980742">.</span><span class="ident" id="6980743">numBytes</span><span class="op" id="6980751">(</span><span class="op" id="6980752">)</span><span class="op" id="6980753">,</span>&nbsp;<span class="ident" id="6980755">nb</span><span class="op" id="6980757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980765">buf</span><span class="op" id="6980768">,</span>&nbsp;<span class="ident" id="6980770">err</span>&nbsp;<span class="op" id="6980774">:=</span>&nbsp;<span class="ident" id="6980777">ioutil</span><span class="op" id="6980783">.</span><span class="ident" id="6980784">ReadAll</span><span class="op" id="6980791">(</span><span class="ident" id="6980792">sfr</span><span class="op" id="6980795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980799">if</span>&nbsp;<span class="ident" id="6980802">err</span>&nbsp;<span class="op" id="6980806">!=</span>&nbsp;<span class="builtintype" id="6980809">nil</span>&nbsp;<span class="op" id="6980813">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980818">t</span><span class="op" id="6980819">.</span><span class="ident" id="6980820">Errorf</span><span class="op" id="6980826">(</span><span class="string" id="6980827">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6980858">,</span>&nbsp;<span class="ident" id="6980860">i</span><span class="op" id="6980861">,</span>&nbsp;<span class="ident" id="6980863">err</span><span class="op" id="6980866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980874">if</span>&nbsp;<span class="ident" id="6980877">e</span>&nbsp;<span class="op" id="6980879">:=</span>&nbsp;<span class="ident" id="6980882">test</span><span class="op" id="6980886">.</span><span class="ident" id="6980887">expected</span><span class="op" id="6980895">;</span>&nbsp;<span class="op" id="6980897">!</span><span class="ident" id="6980898">bytes</span><span class="op" id="6980903">.</span><span class="ident" id="6980904">Equal</span><span class="op" id="6980909">(</span><span class="ident" id="6980910">buf</span><span class="op" id="6980913">,</span>&nbsp;<span class="ident" id="6980915">e</span><span class="op" id="6980916">)</span>&nbsp;<span class="op" id="6980918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6980923">t</span><span class="op" id="6980924">.</span><span class="ident" id="6980925">Errorf</span><span class="op" id="6980931">(</span><span class="string" id="6980932">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6980965">,</span>&nbsp;<span class="ident" id="6980967">i</span><span class="op" id="6980968">,</span>&nbsp;<span class="ident" id="6980970">buf</span><span class="op" id="6980973">,</span>&nbsp;<span class="ident" id="6980975">e</span><span class="op" id="6980976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6980980">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6980984">if</span>&nbsp;<span class="ident" id="6980987">sfr</span><span class="op" id="6980990">.</span><span class="ident" id="6980991">numBytes</span><span class="op" id="6980999">(</span><span class="op" id="6981000">)</span>&nbsp;<span class="op" id="6981002">!=</span>&nbsp;<span class="num" id="6981005">0</span>&nbsp;<span class="op" id="6981007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981012">t</span><span class="op" id="6981013">.</span><span class="ident" id="6981014">Errorf</span><span class="op" id="6981020">(</span><span class="string" id="6981021">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6981081">,</span>&nbsp;<span class="ident" id="6981083">i</span><span class="op" id="6981084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981091">}</span><br>
<span class="lineno"></span><span class="op" id="6981093">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6981096">func</span>&nbsp;<span class="ident" id="6981101">TestSparseIncrementalRead</span><span class="op" id="6981126">(</span><span class="ident" id="6981127">t</span>&nbsp;<span class="op" id="6981129">*</span><span class="ident" id="6981130">testing</span><span class="op" id="6981137">.</span><span class="ident" id="6981138">T</span><span class="op" id="6981139">)</span>&nbsp;<span class="op" id="6981141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981144">sparseMap</span>&nbsp;<span class="op" id="6981154">:=</span>&nbsp;<span class="op" id="6981157">[</span><span class="op" id="6981158">]</span><span class="ident" id="6981159">sparseEntry</span><span class="op" id="6981170">{</span><span class="op" id="6981171">{</span><span class="num" id="6981172">10</span><span class="op" id="6981174">,</span>&nbsp;<span class="num" id="6981176">2</span><span class="op" id="6981177">}</span><span class="op" id="6981178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981181">sparseData</span>&nbsp;<span class="op" id="6981192">:=</span>&nbsp;<span class="op" id="6981195">[</span><span class="op" id="6981196">]</span><span class="builtintype" id="6981197">byte</span><span class="op" id="6981201">(</span><span class="string" id="6981202">&#34;Go&#34;</span><span class="op" id="6981206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981209">expected</span>&nbsp;<span class="op" id="6981218">:=</span>&nbsp;<span class="string" id="6981221">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981300">r</span>&nbsp;<span class="op" id="6981302">:=</span>&nbsp;<span class="ident" id="6981305">bytes</span><span class="op" id="6981310">.</span><span class="ident" id="6981311">NewReader</span><span class="op" id="6981320">(</span><span class="ident" id="6981321">sparseData</span><span class="op" id="6981331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981334">nb</span>&nbsp;<span class="op" id="6981337">:=</span>&nbsp;<span class="ident" id="6981340">int64</span><span class="op" id="6981345">(</span><span class="ident" id="6981346">r</span><span class="op" id="6981347">.</span><span class="ident" id="6981348">Len</span><span class="op" id="6981351">(</span><span class="op" id="6981352">)</span><span class="op" id="6981353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981356">sfr</span>&nbsp;<span class="op" id="6981360">:=</span>&nbsp;<span class="op" id="6981363">&amp;</span><span class="ident" id="6981364">sparseFileReader</span><span class="op" id="6981380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981384">rfr</span><span class="op" id="6981387">:</span>&nbsp;<span class="op" id="6981389">&amp;</span><span class="ident" id="6981390">regFileReader</span><span class="op" id="6981403">{</span><span class="ident" id="6981404">r</span><span class="op" id="6981405">:</span>&nbsp;<span class="ident" id="6981407">r</span><span class="op" id="6981408">,</span>&nbsp;<span class="ident" id="6981410">nb</span><span class="op" id="6981412">:</span>&nbsp;<span class="ident" id="6981414">nb</span><span class="op" id="6981416">}</span><span class="op" id="6981417">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981421">sp</span><span class="op" id="6981423">:</span>&nbsp;&nbsp;<span class="ident" id="6981426">sparseMap</span><span class="op" id="6981435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981439">pos</span><span class="op" id="6981442">:</span>&nbsp;<span class="num" id="6981444">0</span><span class="op" id="6981445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981449">tot</span><span class="op" id="6981452">:</span>&nbsp;<span class="ident" id="6981454">int64</span><span class="op" id="6981459">(</span><span class="builtinfunc" id="6981460">len</span><span class="op" id="6981463">(</span><span class="ident" id="6981464">expected</span><span class="op" id="6981472">)</span><span class="op" id="6981473">)</span><span class="op" id="6981474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6981481">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6981550">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981598">var</span>&nbsp;<span class="ident" id="6981602">outputBuf</span>&nbsp;<span class="ident" id="6981612">bytes</span><span class="op" id="6981617">.</span><span class="ident" id="6981618">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981626">buf</span>&nbsp;<span class="op" id="6981630">:=</span>&nbsp;<span class="builtinfunc" id="6981633">make</span><span class="op" id="6981637">(</span><span class="op" id="6981638">[</span><span class="op" id="6981639">]</span><span class="builtintype" id="6981640">byte</span><span class="op" id="6981644">,</span>&nbsp;<span class="num" id="6981646">6</span><span class="op" id="6981647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981650">for</span>&nbsp;<span class="op" id="6981654">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981658">n</span><span class="op" id="6981659">,</span>&nbsp;<span class="ident" id="6981661">err</span>&nbsp;<span class="op" id="6981665">:=</span>&nbsp;<span class="ident" id="6981668">sfr</span><span class="op" id="6981671">.</span><span class="ident" id="6981672">Read</span><span class="op" id="6981676">(</span><span class="ident" id="6981677">buf</span><span class="op" id="6981680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981684">if</span>&nbsp;<span class="ident" id="6981687">err</span>&nbsp;<span class="op" id="6981691">==</span>&nbsp;<span class="ident" id="6981694">io</span><span class="op" id="6981696">.</span><span class="ident" id="6981697">EOF</span>&nbsp;<span class="op" id="6981701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981706">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981718">if</span>&nbsp;<span class="ident" id="6981721">err</span>&nbsp;<span class="op" id="6981725">!=</span>&nbsp;<span class="builtintype" id="6981728">nil</span>&nbsp;<span class="op" id="6981732">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981737">t</span><span class="op" id="6981738">.</span><span class="ident" id="6981739">Errorf</span><span class="op" id="6981745">(</span><span class="string" id="6981746">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6981775">,</span>&nbsp;<span class="ident" id="6981777">err</span><span class="op" id="6981780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981788">if</span>&nbsp;<span class="ident" id="6981791">n</span>&nbsp;<span class="op" id="6981793">&gt;</span>&nbsp;<span class="num" id="6981795">0</span>&nbsp;<span class="op" id="6981797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981802">_</span><span class="op" id="6981803">,</span>&nbsp;<span class="ident" id="6981805">err</span>&nbsp;<span class="op" id="6981809">:=</span>&nbsp;<span class="ident" id="6981812">outputBuf</span><span class="op" id="6981821">.</span><span class="ident" id="6981822">Write</span><span class="op" id="6981827">(</span><span class="ident" id="6981828">buf</span><span class="op" id="6981831">[</span><span class="op" id="6981832">:</span><span class="ident" id="6981833">n</span><span class="op" id="6981834">]</span><span class="op" id="6981835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981840">if</span>&nbsp;<span class="ident" id="6981843">err</span>&nbsp;<span class="op" id="6981847">!=</span>&nbsp;<span class="builtintype" id="6981850">nil</span>&nbsp;<span class="op" id="6981854">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981860">t</span><span class="op" id="6981861">.</span><span class="ident" id="6981862">Errorf</span><span class="op" id="6981868">(</span><span class="string" id="6981869">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6981899">,</span>&nbsp;<span class="ident" id="6981901">err</span><span class="op" id="6981904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6981916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981919">got</span>&nbsp;<span class="op" id="6981923">:=</span>&nbsp;<span class="ident" id="6981926">outputBuf</span><span class="op" id="6981935">.</span><span class="ident" id="6981936">String</span><span class="op" id="6981942">(</span><span class="op" id="6981943">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6981946">if</span>&nbsp;<span class="ident" id="6981949">got</span>&nbsp;<span class="op" id="6981953">!=</span>&nbsp;<span class="ident" id="6981956">expected</span>&nbsp;<span class="op" id="6981965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6981969">t</span><span class="op" id="6981970">.</span><span class="ident" id="6981971">Errorf</span><span class="op" id="6981977">(</span><span class="string" id="6981978">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6982002">,</span>&nbsp;<span class="ident" id="6982004">got</span><span class="op" id="6982007">,</span>&nbsp;<span class="ident" id="6982009">expected</span><span class="op" id="6982017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982020">}</span><br>
<span class="lineno"></span><span class="op" id="6982022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6982025">func</span>&nbsp;<span class="ident" id="6982030">TestReadGNUSparseMap0x1</span><span class="op" id="6982053">(</span><span class="ident" id="6982054">t</span>&nbsp;<span class="op" id="6982056">*</span><span class="ident" id="6982057">testing</span><span class="op" id="6982064">.</span><span class="ident" id="6982065">T</span><span class="op" id="6982066">)</span>&nbsp;<span class="op" id="6982068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982071">headers</span>&nbsp;<span class="op" id="6982079">:=</span>&nbsp;<span class="keyword" id="6982082">map</span><span class="op" id="6982085">[</span><span class="builtintype" id="6982086">string</span><span class="op" id="6982092">]</span><span class="builtintype" id="6982093">string</span><span class="op" id="6982099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982103">paxGNUSparseNumBlocks</span><span class="op" id="6982124">:</span>&nbsp;<span class="string" id="6982126">&#34;4&#34;</span><span class="op" id="6982129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982133">paxGNUSparseMap</span><span class="op" id="6982148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6982156">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6982176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982179">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982182">expected</span>&nbsp;<span class="op" id="6982191">:=</span>&nbsp;<span class="op" id="6982194">[</span><span class="op" id="6982195">]</span><span class="ident" id="6982196">sparseEntry</span><span class="op" id="6982207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982211">{</span><span class="ident" id="6982212">offset</span><span class="op" id="6982218">:</span>&nbsp;<span class="num" id="6982220">0</span><span class="op" id="6982221">,</span>&nbsp;<span class="ident" id="6982223">numBytes</span><span class="op" id="6982231">:</span>&nbsp;<span class="num" id="6982233">5</span><span class="op" id="6982234">}</span><span class="op" id="6982235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982239">{</span><span class="ident" id="6982240">offset</span><span class="op" id="6982246">:</span>&nbsp;<span class="num" id="6982248">10</span><span class="op" id="6982250">,</span>&nbsp;<span class="ident" id="6982252">numBytes</span><span class="op" id="6982260">:</span>&nbsp;<span class="num" id="6982262">5</span><span class="op" id="6982263">}</span><span class="op" id="6982264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982268">{</span><span class="ident" id="6982269">offset</span><span class="op" id="6982275">:</span>&nbsp;<span class="num" id="6982277">20</span><span class="op" id="6982279">,</span>&nbsp;<span class="ident" id="6982281">numBytes</span><span class="op" id="6982289">:</span>&nbsp;<span class="num" id="6982291">5</span><span class="op" id="6982292">}</span><span class="op" id="6982293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982297">{</span><span class="ident" id="6982298">offset</span><span class="op" id="6982304">:</span>&nbsp;<span class="num" id="6982306">30</span><span class="op" id="6982308">,</span>&nbsp;<span class="ident" id="6982310">numBytes</span><span class="op" id="6982318">:</span>&nbsp;<span class="num" id="6982320">5</span><span class="op" id="6982321">}</span><span class="op" id="6982322">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982329">sp</span><span class="op" id="6982331">,</span>&nbsp;<span class="ident" id="6982333">err</span>&nbsp;<span class="op" id="6982337">:=</span>&nbsp;<span class="ident" id="6982340">readGNUSparseMap0x1</span><span class="op" id="6982359">(</span><span class="ident" id="6982360">headers</span><span class="op" id="6982367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982370">if</span>&nbsp;<span class="ident" id="6982373">err</span>&nbsp;<span class="op" id="6982377">!=</span>&nbsp;<span class="builtintype" id="6982380">nil</span>&nbsp;<span class="op" id="6982384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982388">t</span><span class="op" id="6982389">.</span><span class="ident" id="6982390">Errorf</span><span class="op" id="6982396">(</span><span class="string" id="6982397">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6982419">,</span>&nbsp;<span class="ident" id="6982421">err</span><span class="op" id="6982424">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982430">if</span>&nbsp;<span class="op" id="6982433">!</span><span class="ident" id="6982434">reflect</span><span class="op" id="6982441">.</span><span class="ident" id="6982442">DeepEqual</span><span class="op" id="6982451">(</span><span class="ident" id="6982452">sp</span><span class="op" id="6982454">,</span>&nbsp;<span class="ident" id="6982456">expected</span><span class="op" id="6982464">)</span>&nbsp;<span class="op" id="6982466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982470">t</span><span class="op" id="6982471">.</span><span class="ident" id="6982472">Errorf</span><span class="op" id="6982478">(</span><span class="string" id="6982479">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6982520">,</span>&nbsp;<span class="ident" id="6982522">sp</span><span class="op" id="6982524">,</span>&nbsp;<span class="ident" id="6982526">expected</span><span class="op" id="6982534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6982537">}</span><br>
<span class="lineno"></span><span class="op" id="6982539">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6982542">func</span>&nbsp;<span class="ident" id="6982547">TestReadGNUSparseMap1x0</span><span class="op" id="6982570">(</span><span class="ident" id="6982571">t</span>&nbsp;<span class="op" id="6982573">*</span><span class="ident" id="6982574">testing</span><span class="op" id="6982581">.</span><span class="ident" id="6982582">T</span><span class="op" id="6982583">)</span>&nbsp;<span class="op" id="6982585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6982588">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982672">numEntries</span>&nbsp;<span class="op" id="6982683">:=</span>&nbsp;<span class="num" id="6982686">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982691">expected</span>&nbsp;<span class="op" id="6982700">:=</span>&nbsp;<span class="builtinfunc" id="6982703">make</span><span class="op" id="6982707">(</span><span class="op" id="6982708">[</span><span class="op" id="6982709">]</span><span class="ident" id="6982710">sparseEntry</span><span class="op" id="6982721">,</span>&nbsp;<span class="num" id="6982723">0</span><span class="op" id="6982724">,</span>&nbsp;<span class="ident" id="6982726">numEntries</span><span class="op" id="6982736">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982739">sparseMap</span>&nbsp;<span class="op" id="6982749">:=</span>&nbsp;<span class="builtinfunc" id="6982752">new</span><span class="op" id="6982755">(</span><span class="ident" id="6982756">bytes</span><span class="op" id="6982761">.</span><span class="ident" id="6982762">Buffer</span><span class="op" id="6982768">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982772">fmt</span><span class="op" id="6982775">.</span><span class="ident" id="6982776">Fprintf</span><span class="op" id="6982783">(</span><span class="ident" id="6982784">sparseMap</span><span class="op" id="6982793">,</span>&nbsp;<span class="string" id="6982795">&#34;%d\n&#34;</span><span class="op" id="6982801">,</span>&nbsp;<span class="ident" id="6982803">numEntries</span><span class="op" id="6982813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6982816">for</span>&nbsp;<span class="ident" id="6982820">i</span>&nbsp;<span class="op" id="6982822">:=</span>&nbsp;<span class="num" id="6982825">0</span><span class="op" id="6982826">;</span>&nbsp;<span class="ident" id="6982828">i</span>&nbsp;<span class="op" id="6982830">&lt;</span>&nbsp;<span class="ident" id="6982832">numEntries</span><span class="op" id="6982842">;</span>&nbsp;<span class="ident" id="6982844">i</span><span class="op" id="6982845">++</span>&nbsp;<span class="op" id="6982848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982852">offset</span>&nbsp;<span class="op" id="6982859">:=</span>&nbsp;<span class="ident" id="6982862">int64</span><span class="op" id="6982867">(</span><span class="num" id="6982868">2048</span>&nbsp;<span class="op" id="6982873">*</span>&nbsp;<span class="ident" id="6982875">i</span><span class="op" id="6982876">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982880">numBytes</span>&nbsp;<span class="op" id="6982889">:=</span>&nbsp;<span class="ident" id="6982892">int64</span><span class="op" id="6982897">(</span><span class="num" id="6982898">1024</span><span class="op" id="6982902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982906">expected</span>&nbsp;<span class="op" id="6982915">=</span>&nbsp;<span class="builtinfunc" id="6982917">append</span><span class="op" id="6982923">(</span><span class="ident" id="6982924">expected</span><span class="op" id="6982932">,</span>&nbsp;<span class="ident" id="6982934">sparseEntry</span><span class="op" id="6982945">{</span><span class="ident" id="6982946">offset</span><span class="op" id="6982952">:</span>&nbsp;<span class="ident" id="6982954">offset</span><span class="op" id="6982960">,</span>&nbsp;<span class="ident" id="6982962">numBytes</span><span class="op" id="6982970">:</span>&nbsp;<span class="ident" id="6982972">numBytes</span><span class="op" id="6982980">}</span><span class="op" id="6982981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6982985">fmt</span><span class="op" id="6982988">.</span><span class="ident" id="6982989">Fprintf</span><span class="op" id="6982996">(</span><span class="ident" id="6982997">sparseMap</span><span class="op" id="6983006">,</span>&nbsp;<span class="string" id="6983008">&#34;%d\n%d\n&#34;</span><span class="op" id="6983018">,</span>&nbsp;<span class="ident" id="6983020">offset</span><span class="op" id="6983026">,</span>&nbsp;<span class="ident" id="6983028">numBytes</span><span class="op" id="6983036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6983043">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983122">headerBlocks</span>&nbsp;<span class="op" id="6983135">:=</span>&nbsp;<span class="op" id="6983138">(</span><span class="ident" id="6983139">sparseMap</span><span class="op" id="6983148">.</span><span class="ident" id="6983149">Len</span><span class="op" id="6983152">(</span><span class="op" id="6983153">)</span>&nbsp;<span class="op" id="6983155">+</span>&nbsp;<span class="ident" id="6983157">blockSize</span>&nbsp;<span class="op" id="6983167">-</span>&nbsp;<span class="num" id="6983169">1</span><span class="op" id="6983170">)</span>&nbsp;<span class="op" id="6983172">/</span>&nbsp;<span class="ident" id="6983174">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983185">bufLen</span>&nbsp;<span class="op" id="6983192">:=</span>&nbsp;<span class="ident" id="6983195">blockSize</span>&nbsp;<span class="op" id="6983205">*</span>&nbsp;<span class="ident" id="6983207">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983221">buf</span>&nbsp;<span class="op" id="6983225">:=</span>&nbsp;<span class="builtinfunc" id="6983228">make</span><span class="op" id="6983232">(</span><span class="op" id="6983233">[</span><span class="op" id="6983234">]</span><span class="builtintype" id="6983235">byte</span><span class="op" id="6983239">,</span>&nbsp;<span class="ident" id="6983241">bufLen</span><span class="op" id="6983247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6983250">copy</span><span class="op" id="6983254">(</span><span class="ident" id="6983255">buf</span><span class="op" id="6983258">,</span>&nbsp;<span class="ident" id="6983260">sparseMap</span><span class="op" id="6983269">.</span><span class="ident" id="6983270">Bytes</span><span class="op" id="6983275">(</span><span class="op" id="6983276">)</span><span class="op" id="6983277">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6983281">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983322">r</span>&nbsp;<span class="op" id="6983324">:=</span>&nbsp;<span class="ident" id="6983327">bytes</span><span class="op" id="6983332">.</span><span class="ident" id="6983333">NewReader</span><span class="op" id="6983342">(</span><span class="ident" id="6983343">buf</span><span class="op" id="6983346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6983350">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983374">sp</span><span class="op" id="6983376">,</span>&nbsp;<span class="ident" id="6983378">err</span>&nbsp;<span class="op" id="6983382">:=</span>&nbsp;<span class="ident" id="6983385">readGNUSparseMap1x0</span><span class="op" id="6983404">(</span><span class="ident" id="6983405">r</span><span class="op" id="6983406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983409">if</span>&nbsp;<span class="ident" id="6983412">err</span>&nbsp;<span class="op" id="6983416">!=</span>&nbsp;<span class="builtintype" id="6983419">nil</span>&nbsp;<span class="op" id="6983423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983427">t</span><span class="op" id="6983428">.</span><span class="ident" id="6983429">Errorf</span><span class="op" id="6983435">(</span><span class="string" id="6983436">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6983458">,</span>&nbsp;<span class="ident" id="6983460">err</span><span class="op" id="6983463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983469">if</span>&nbsp;<span class="op" id="6983472">!</span><span class="ident" id="6983473">reflect</span><span class="op" id="6983480">.</span><span class="ident" id="6983481">DeepEqual</span><span class="op" id="6983490">(</span><span class="ident" id="6983491">sp</span><span class="op" id="6983493">,</span>&nbsp;<span class="ident" id="6983495">expected</span><span class="op" id="6983503">)</span>&nbsp;<span class="op" id="6983505">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983509">t</span><span class="op" id="6983510">.</span><span class="ident" id="6983511">Errorf</span><span class="op" id="6983517">(</span><span class="string" id="6983518">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6983559">,</span>&nbsp;<span class="ident" id="6983561">sp</span><span class="op" id="6983563">,</span>&nbsp;<span class="ident" id="6983565">expected</span><span class="op" id="6983573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983576">}</span><br>
<span class="lineno"></span><span class="op" id="6983578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6983581">func</span>&nbsp;<span class="ident" id="6983586">TestUninitializedRead</span><span class="op" id="6983607">(</span><span class="ident" id="6983608">t</span>&nbsp;<span class="op" id="6983610">*</span><span class="ident" id="6983611">testing</span><span class="op" id="6983618">.</span><span class="ident" id="6983619">T</span><span class="op" id="6983620">)</span>&nbsp;<span class="op" id="6983622">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983625">test</span>&nbsp;<span class="op" id="6983630">:=</span>&nbsp;<span class="ident" id="6983633">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983645">f</span><span class="op" id="6983646">,</span>&nbsp;<span class="ident" id="6983648">err</span>&nbsp;<span class="op" id="6983652">:=</span>&nbsp;<span class="ident" id="6983655">os</span><span class="op" id="6983657">.</span><span class="ident" id="6983658">Open</span><span class="op" id="6983662">(</span><span class="ident" id="6983663">test</span><span class="op" id="6983667">.</span><span class="ident" id="6983668">file</span><span class="op" id="6983672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983675">if</span>&nbsp;<span class="ident" id="6983678">err</span>&nbsp;<span class="op" id="6983682">!=</span>&nbsp;<span class="builtintype" id="6983685">nil</span>&nbsp;<span class="op" id="6983689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983693">t</span><span class="op" id="6983694">.</span><span class="ident" id="6983695">Fatalf</span><span class="op" id="6983701">(</span><span class="string" id="6983702">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6983724">,</span>&nbsp;<span class="ident" id="6983726">err</span><span class="op" id="6983729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983732">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983735">defer</span>&nbsp;<span class="ident" id="6983741">f</span><span class="op" id="6983742">.</span><span class="ident" id="6983743">Close</span><span class="op" id="6983748">(</span><span class="op" id="6983749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983753">tr</span>&nbsp;<span class="op" id="6983756">:=</span>&nbsp;<span class="ident" id="6983759">NewReader</span><span class="op" id="6983768">(</span><span class="ident" id="6983769">f</span><span class="op" id="6983770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983773">_</span><span class="op" id="6983774">,</span>&nbsp;<span class="ident" id="6983776">err</span>&nbsp;<span class="op" id="6983780">=</span>&nbsp;<span class="ident" id="6983782">tr</span><span class="op" id="6983784">.</span><span class="ident" id="6983785">Read</span><span class="op" id="6983789">(</span><span class="op" id="6983790">[</span><span class="op" id="6983791">]</span><span class="builtintype" id="6983792">byte</span><span class="op" id="6983796">{</span><span class="op" id="6983797">}</span><span class="op" id="6983798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6983801">if</span>&nbsp;<span class="ident" id="6983804">err</span>&nbsp;<span class="op" id="6983808">==</span>&nbsp;<span class="builtintype" id="6983811">nil</span>&nbsp;<span class="op" id="6983815">||</span>&nbsp;<span class="ident" id="6983818">err</span>&nbsp;<span class="op" id="6983822">!=</span>&nbsp;<span class="ident" id="6983825">io</span><span class="op" id="6983827">.</span><span class="ident" id="6983828">EOF</span>&nbsp;<span class="op" id="6983832">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6983836">t</span><span class="op" id="6983837">.</span><span class="ident" id="6983838">Errorf</span><span class="op" id="6983844">(</span><span class="string" id="6983845">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6983878">,</span>&nbsp;<span class="ident" id="6983880">err</span><span class="op" id="6983883">,</span>&nbsp;<span class="ident" id="6983885">io</span><span class="op" id="6983887">.</span><span class="ident" id="6983888">EOF</span><span class="op" id="6983891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6983894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6983897">}</span>
</div>
</body>
</html>
