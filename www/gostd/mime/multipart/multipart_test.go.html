<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html" class="current">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7747513">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7747568">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7747622">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7747673">package</span>&nbsp;<span class="ident" id="7747681">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7747692">import</span>&nbsp;<span class="op" id="7747699">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747702">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747711">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747728">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747735">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747741">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747754">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747771">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747777">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747788">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747799">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7747809">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7747812">func</span>&nbsp;<span class="ident" id="7747817">TestBoundaryLine</span><span class="op" id="7747833">(</span><span class="ident" id="7747834">t</span>&nbsp;<span class="op" id="7747836">*</span><span class="ident" id="7747837"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7747844">.</span><span class="ident" id="7747845"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7747846">)</span>&nbsp;<span class="op" id="7747848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747851">mr</span>&nbsp;<span class="op" id="7747854">:=</span>&nbsp;<span class="ident" id="7747857"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7747866">(</span><span class="ident" id="7747867"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7747874">.</span><span class="ident" id="7747875"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7747884">(</span><span class="string" id="7747885">&#34;&#34;</span><span class="op" id="7747887">)</span><span class="op" id="7747888">,</span>&nbsp;<span class="string" id="7747890">&#34;myBoundary&#34;</span><span class="op" id="7747902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747905">if</span>&nbsp;<span class="op" id="7747908">!</span><span class="ident" id="7747909"><a href="/gostd/mime/multipart/multipart_test.go.html#7747851">mr</a></span><span class="op" id="7747911">.</span><span class="ident" id="7747912"><a href="/gostd/mime/multipart/multipart.go.html#4318797">isBoundaryDelimiterLine</a></span><span class="op" id="7747935">(</span><span class="op" id="7747936">[</span><span class="op" id="7747937">]</span><span class="builtintype" id="7747938">byte</span><span class="op" id="7747942">(</span><span class="string" id="7747943">&#34;--myBoundary\r\n&#34;</span><span class="op" id="7747961">)</span><span class="op" id="7747962">)</span>&nbsp;<span class="op" id="7747964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747968"><a href="/gostd/mime/multipart/multipart_test.go.html#7747834">t</a></span><span class="op" id="7747969">.</span><span class="ident" id="7747970"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7747975">(</span><span class="string" id="7747976">&#34;expected&#34;</span><span class="op" id="7747986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747989">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747992">if</span>&nbsp;<span class="op" id="7747995">!</span><span class="ident" id="7747996"><a href="/gostd/mime/multipart/multipart_test.go.html#7747851">mr</a></span><span class="op" id="7747998">.</span><span class="ident" id="7747999"><a href="/gostd/mime/multipart/multipart.go.html#4318797">isBoundaryDelimiterLine</a></span><span class="op" id="7748022">(</span><span class="op" id="7748023">[</span><span class="op" id="7748024">]</span><span class="builtintype" id="7748025">byte</span><span class="op" id="7748029">(</span><span class="string" id="7748030">&#34;--myBoundary&nbsp;\r\n&#34;</span><span class="op" id="7748049">)</span><span class="op" id="7748050">)</span>&nbsp;<span class="op" id="7748052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748056"><a href="/gostd/mime/multipart/multipart_test.go.html#7747834">t</a></span><span class="op" id="7748057">.</span><span class="ident" id="7748058"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7748063">(</span><span class="string" id="7748064">&#34;expected&#34;</span><span class="op" id="7748074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748080">if</span>&nbsp;<span class="op" id="7748083">!</span><span class="ident" id="7748084"><a href="/gostd/mime/multipart/multipart_test.go.html#7747851">mr</a></span><span class="op" id="7748086">.</span><span class="ident" id="7748087"><a href="/gostd/mime/multipart/multipart.go.html#4318797">isBoundaryDelimiterLine</a></span><span class="op" id="7748110">(</span><span class="op" id="7748111">[</span><span class="op" id="7748112">]</span><span class="builtintype" id="7748113">byte</span><span class="op" id="7748117">(</span><span class="string" id="7748118">&#34;--myBoundary&nbsp;\n&#34;</span><span class="op" id="7748135">)</span><span class="op" id="7748136">)</span>&nbsp;<span class="op" id="7748138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748142"><a href="/gostd/mime/multipart/multipart_test.go.html#7747834">t</a></span><span class="op" id="7748143">.</span><span class="ident" id="7748144"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7748149">(</span><span class="string" id="7748150">&#34;expected&#34;</span><span class="op" id="7748160">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748166">if</span>&nbsp;<span class="ident" id="7748169"><a href="/gostd/mime/multipart/multipart_test.go.html#7747851">mr</a></span><span class="op" id="7748171">.</span><span class="ident" id="7748172"><a href="/gostd/mime/multipart/multipart.go.html#4318797">isBoundaryDelimiterLine</a></span><span class="op" id="7748195">(</span><span class="op" id="7748196">[</span><span class="op" id="7748197">]</span><span class="builtintype" id="7748198">byte</span><span class="op" id="7748202">(</span><span class="string" id="7748203">&#34;--myBoundary&nbsp;bogus&nbsp;\n&#34;</span><span class="op" id="7748226">)</span><span class="op" id="7748227">)</span>&nbsp;<span class="op" id="7748229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748233"><a href="/gostd/mime/multipart/multipart_test.go.html#7747834">t</a></span><span class="op" id="7748234">.</span><span class="ident" id="7748235"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7748240">(</span><span class="string" id="7748241">&#34;expected&nbsp;fail&#34;</span><span class="op" id="7748256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748262">if</span>&nbsp;<span class="ident" id="7748265"><a href="/gostd/mime/multipart/multipart_test.go.html#7747851">mr</a></span><span class="op" id="7748267">.</span><span class="ident" id="7748268"><a href="/gostd/mime/multipart/multipart.go.html#4318797">isBoundaryDelimiterLine</a></span><span class="op" id="7748291">(</span><span class="op" id="7748292">[</span><span class="op" id="7748293">]</span><span class="builtintype" id="7748294">byte</span><span class="op" id="7748298">(</span><span class="string" id="7748299">&#34;--myBoundary&nbsp;bogus--&#34;</span><span class="op" id="7748321">)</span><span class="op" id="7748322">)</span>&nbsp;<span class="op" id="7748324">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748328"><a href="/gostd/mime/multipart/multipart_test.go.html#7747834">t</a></span><span class="op" id="7748329">.</span><span class="ident" id="7748330"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7748335">(</span><span class="string" id="7748336">&#34;expected&nbsp;fail&#34;</span><span class="op" id="7748351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748354">}</span><br>
<span class="lineno"></span><span class="op" id="7748356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748359">func</span>&nbsp;<span class="ident" id="7748364">escapeString</span><span class="op" id="7748376">(</span><span class="ident" id="7748377">v</span>&nbsp;<span class="builtintype" id="7748379">string</span><span class="op" id="7748385">)</span>&nbsp;<span class="builtintype" id="7748387">string</span>&nbsp;<span class="op" id="7748394">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748397">bytes</span><span class="op" id="7748402">,</span>&nbsp;<span class="ident" id="7748404">_</span>&nbsp;<span class="op" id="7748406">:=</span>&nbsp;<span class="ident" id="7748409"><a href="/gostd/mime/multipart/multipart_test.go.html#7747711">json</a></span><span class="op" id="7748413">.</span><span class="ident" id="7748414"><a href="/gostd/encoding/json/encode.go.html#3995033">Marshal</a></span><span class="op" id="7748421">(</span><span class="ident" id="7748422"><a href="/gostd/mime/multipart/multipart_test.go.html#7748377">v</a></span><span class="op" id="7748423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748426">return</span>&nbsp;<span class="builtintype" id="7748433">string</span><span class="op" id="7748439">(</span><span class="ident" id="7748440"><a href="/gostd/mime/multipart/multipart_test.go.html#7748397">bytes</a></span><span class="op" id="7748445">)</span><br>
<span class="lineno"></span><span class="op" id="7748447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748450">func</span>&nbsp;<span class="ident" id="7748455">expectEq</span><span class="op" id="7748463">(</span><span class="ident" id="7748464">t</span>&nbsp;<span class="op" id="7748466">*</span><span class="ident" id="7748467"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7748474">.</span><span class="ident" id="7748475"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7748476">,</span>&nbsp;<span class="ident" id="7748478">expected</span><span class="op" id="7748486">,</span>&nbsp;<span class="ident" id="7748488">actual</span><span class="op" id="7748494">,</span>&nbsp;<span class="ident" id="7748496">what</span>&nbsp;<span class="builtintype" id="7748501">string</span><span class="op" id="7748507">)</span>&nbsp;<span class="op" id="7748509">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748512">if</span>&nbsp;<span class="ident" id="7748515"><a href="/gostd/mime/multipart/multipart_test.go.html#7748478">expected</a></span>&nbsp;<span class="op" id="7748524">==</span>&nbsp;<span class="ident" id="7748527"><a href="/gostd/mime/multipart/multipart_test.go.html#7748488">actual</a></span>&nbsp;<span class="op" id="7748534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748538">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748549"><a href="/gostd/mime/multipart/multipart_test.go.html#7748464">t</a></span><span class="op" id="7748550">.</span><span class="ident" id="7748551"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7748557">(</span><span class="string" id="7748558">&#34;Unexpected&nbsp;value&nbsp;for&nbsp;%s;&nbsp;got&nbsp;%s&nbsp;(len&nbsp;%d)&nbsp;but&nbsp;expected:&nbsp;%s&nbsp;(len&nbsp;%d)&#34;</span><span class="op" id="7748626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748630"><a href="/gostd/mime/multipart/multipart_test.go.html#7748496">what</a></span><span class="op" id="7748634">,</span>&nbsp;<span class="ident" id="7748636"><a href="/gostd/mime/multipart/multipart_test.go.html#7748364">escapeString</a></span><span class="op" id="7748648">(</span><span class="ident" id="7748649"><a href="/gostd/mime/multipart/multipart_test.go.html#7748488">actual</a></span><span class="op" id="7748655">)</span><span class="op" id="7748656">,</span>&nbsp;<span class="builtinfunc" id="7748658">len</span><span class="op" id="7748661">(</span><span class="ident" id="7748662"><a href="/gostd/mime/multipart/multipart_test.go.html#7748488">actual</a></span><span class="op" id="7748668">)</span><span class="op" id="7748669">,</span>&nbsp;<span class="ident" id="7748671"><a href="/gostd/mime/multipart/multipart_test.go.html#7748364">escapeString</a></span><span class="op" id="7748683">(</span><span class="ident" id="7748684"><a href="/gostd/mime/multipart/multipart_test.go.html#7748478">expected</a></span><span class="op" id="7748692">)</span><span class="op" id="7748693">,</span>&nbsp;<span class="builtinfunc" id="7748695">len</span><span class="op" id="7748698">(</span><span class="ident" id="7748699"><a href="/gostd/mime/multipart/multipart_test.go.html#7748478">expected</a></span><span class="op" id="7748707">)</span><span class="op" id="7748708">)</span><br>
<span class="lineno">50</span><span class="op" id="7748710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748713">func</span>&nbsp;<span class="ident" id="7748718">TestNameAccessors</span><span class="op" id="7748735">(</span><span class="ident" id="7748736">t</span>&nbsp;<span class="op" id="7748738">*</span><span class="ident" id="7748739"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7748746">.</span><span class="ident" id="7748747"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7748748">)</span>&nbsp;<span class="op" id="7748750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748753">tests</span>&nbsp;<span class="op" id="7748759">:=</span>&nbsp;<span class="op" id="7748762">[</span><span class="op" id="7748763">...</span><span class="op" id="7748766">]</span><span class="op" id="7748767">[</span><span class="num" id="7748768">3</span><span class="op" id="7748769">]</span><span class="builtintype" id="7748770">string</span><span class="op" id="7748776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748780">{</span><span class="string" id="7748781">`form-data;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7748804">,</span>&nbsp;<span class="string" id="7748806">&#34;foo&#34;</span><span class="op" id="7748811">,</span>&nbsp;<span class="string" id="7748813">&#34;&#34;</span><span class="op" id="7748815">}</span><span class="op" id="7748816">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748820">{</span><span class="string" id="7748821">`&nbsp;form-data&nbsp;;&nbsp;name=foo`</span><span class="op" id="7748844">,</span>&nbsp;<span class="string" id="7748846">&#34;foo&#34;</span><span class="op" id="7748851">,</span>&nbsp;<span class="string" id="7748853">&#34;&#34;</span><span class="op" id="7748855">}</span><span class="op" id="7748856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748860">{</span><span class="string" id="7748861">`FORM-DATA;name=&#34;foo&#34;`</span><span class="op" id="7748883">,</span>&nbsp;<span class="string" id="7748885">&#34;foo&#34;</span><span class="op" id="7748890">,</span>&nbsp;<span class="string" id="7748892">&#34;&#34;</span><span class="op" id="7748894">}</span><span class="op" id="7748895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748899">{</span><span class="string" id="7748900">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7748925">,</span>&nbsp;<span class="string" id="7748927">&#34;foo&#34;</span><span class="op" id="7748932">,</span>&nbsp;<span class="string" id="7748934">&#34;&#34;</span><span class="op" id="7748936">}</span><span class="op" id="7748937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748941">{</span><span class="string" id="7748942">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7748967">,</span>&nbsp;<span class="string" id="7748969">&#34;foo&#34;</span><span class="op" id="7748974">,</span>&nbsp;<span class="string" id="7748976">&#34;&#34;</span><span class="op" id="7748978">}</span><span class="op" id="7748979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748983">{</span><span class="string" id="7748984">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=foo`</span><span class="op" id="7749007">,</span>&nbsp;<span class="string" id="7749009">&#34;foo&#34;</span><span class="op" id="7749014">,</span>&nbsp;<span class="string" id="7749016">&#34;&#34;</span><span class="op" id="7749018">}</span><span class="op" id="7749019">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749023">{</span><span class="string" id="7749024">`&nbsp;FORM-DATA&nbsp;;&nbsp;filename=&#34;foo.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="7749077">,</span>&nbsp;<span class="string" id="7749079">&#34;foo&#34;</span><span class="op" id="7749084">,</span>&nbsp;<span class="string" id="7749086">&#34;foo.txt&#34;</span><span class="op" id="7749095">}</span><span class="op" id="7749096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749100">{</span><span class="string" id="7749101">`&nbsp;not-form-data&nbsp;;&nbsp;filename=&#34;bar.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="7749158">,</span>&nbsp;<span class="string" id="7749160">&#34;&#34;</span><span class="op" id="7749162">,</span>&nbsp;<span class="string" id="7749164">&#34;bar.txt&#34;</span><span class="op" id="7749173">}</span><span class="op" id="7749174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7749180">for</span>&nbsp;<span class="ident" id="7749184">i</span><span class="op" id="7749185">,</span>&nbsp;<span class="ident" id="7749187">test</span>&nbsp;<span class="op" id="7749192">:=</span>&nbsp;<span class="keyword" id="7749195">range</span>&nbsp;<span class="ident" id="7749201"><a href="/gostd/mime/multipart/multipart_test.go.html#7748753">tests</a></span>&nbsp;<span class="op" id="7749207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7749211">p</span>&nbsp;<span class="op" id="7749213">:=</span>&nbsp;<span class="op" id="7749216">&amp;</span><span class="ident" id="7749217"><a href="/gostd/mime/multipart/multipart.go.html#4311475">Part</a></span><span class="op" id="7749221">{</span><span class="ident" id="7749222"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7749228">:</span>&nbsp;<span class="builtinfunc" id="7749230">make</span><span class="op" id="7749234">(</span><span class="keyword" id="7749235">map</span><span class="op" id="7749238">[</span><span class="builtintype" id="7749239">string</span><span class="op" id="7749245">]</span><span class="op" id="7749246">[</span><span class="op" id="7749247">]</span><span class="builtintype" id="7749248">string</span><span class="op" id="7749254">)</span><span class="op" id="7749255">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7749259"><a href="/gostd/mime/multipart/multipart_test.go.html#7749211">p</a></span><span class="op" id="7749260">.</span><span class="ident" id="7749261"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7749267">.</span><span class="ident" id="7749268"><a href="/gostd/net/textproto/header.go.html#4329038">Set</a></span><span class="op" id="7749271">(</span><span class="string" id="7749272">&#34;Content-Disposition&#34;</span><span class="op" id="7749293">,</span>&nbsp;<span class="ident" id="7749295"><a href="/gostd/mime/multipart/multipart_test.go.html#7749187">test</a></span><span class="op" id="7749299">[</span><span class="num" id="7749300">0</span><span class="op" id="7749301">]</span><span class="op" id="7749302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7749306">if</span>&nbsp;<span class="ident" id="7749309">g</span><span class="op" id="7749310">,</span>&nbsp;<span class="ident" id="7749312">e</span>&nbsp;<span class="op" id="7749314">:=</span>&nbsp;<span class="ident" id="7749317"><a href="/gostd/mime/multipart/multipart_test.go.html#7749211">p</a></span><span class="op" id="7749318">.</span><span class="ident" id="7749319"><a href="/gostd/mime/multipart/multipart.go.html#4312343">FormName</a></span><span class="op" id="7749327">(</span><span class="op" id="7749328">)</span><span class="op" id="7749329">,</span>&nbsp;<span class="ident" id="7749331"><a href="/gostd/mime/multipart/multipart_test.go.html#7749187">test</a></span><span class="op" id="7749335">[</span><span class="num" id="7749336">1</span><span class="op" id="7749337">]</span><span class="op" id="7749338">;</span>&nbsp;<span class="ident" id="7749340"><a href="/gostd/mime/multipart/multipart_test.go.html#7749309">g</a></span>&nbsp;<span class="op" id="7749342">!=</span>&nbsp;<span class="ident" id="7749345"><a href="/gostd/mime/multipart/multipart_test.go.html#7749312">e</a></span>&nbsp;<span class="op" id="7749347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7749352"><a href="/gostd/mime/multipart/multipart_test.go.html#7748736">t</a></span><span class="op" id="7749353">.</span><span class="ident" id="7749354"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7749360">(</span><span class="string" id="7749361">&#34;test&nbsp;%d:&nbsp;FormName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7749396">,</span>&nbsp;<span class="ident" id="7749398"><a href="/gostd/mime/multipart/multipart_test.go.html#7749184">i</a></span><span class="op" id="7749399">,</span>&nbsp;<span class="ident" id="7749401"><a href="/gostd/mime/multipart/multipart_test.go.html#7749309">g</a></span><span class="op" id="7749402">,</span>&nbsp;<span class="ident" id="7749404"><a href="/gostd/mime/multipart/multipart_test.go.html#7749312">e</a></span><span class="op" id="7749405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7749413">if</span>&nbsp;<span class="ident" id="7749416">g</span><span class="op" id="7749417">,</span>&nbsp;<span class="ident" id="7749419">e</span>&nbsp;<span class="op" id="7749421">:=</span>&nbsp;<span class="ident" id="7749424"><a href="/gostd/mime/multipart/multipart_test.go.html#7749211">p</a></span><span class="op" id="7749425">.</span><span class="ident" id="7749426"><a href="/gostd/mime/multipart/multipart.go.html#4312724">FileName</a></span><span class="op" id="7749434">(</span><span class="op" id="7749435">)</span><span class="op" id="7749436">,</span>&nbsp;<span class="ident" id="7749438"><a href="/gostd/mime/multipart/multipart_test.go.html#7749187">test</a></span><span class="op" id="7749442">[</span><span class="num" id="7749443">2</span><span class="op" id="7749444">]</span><span class="op" id="7749445">;</span>&nbsp;<span class="ident" id="7749447"><a href="/gostd/mime/multipart/multipart_test.go.html#7749416">g</a></span>&nbsp;<span class="op" id="7749449">!=</span>&nbsp;<span class="ident" id="7749452"><a href="/gostd/mime/multipart/multipart_test.go.html#7749419">e</a></span>&nbsp;<span class="op" id="7749454">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7749459"><a href="/gostd/mime/multipart/multipart_test.go.html#7748736">t</a></span><span class="op" id="7749460">.</span><span class="ident" id="7749461"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7749467">(</span><span class="string" id="7749468">&#34;test&nbsp;%d:&nbsp;FileName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7749503">,</span>&nbsp;<span class="ident" id="7749505"><a href="/gostd/mime/multipart/multipart_test.go.html#7749184">i</a></span><span class="op" id="7749506">,</span>&nbsp;<span class="ident" id="7749508"><a href="/gostd/mime/multipart/multipart_test.go.html#7749416">g</a></span><span class="op" id="7749509">,</span>&nbsp;<span class="ident" id="7749511"><a href="/gostd/mime/multipart/multipart_test.go.html#7749419">e</a></span><span class="op" id="7749512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7749519">}</span><br>
<span class="lineno"></span><span class="op" id="7749521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7749524">var</span>&nbsp;<span class="ident" id="7749528">longLine</span>&nbsp;<span class="op" id="7749537">=</span>&nbsp;<span class="ident" id="7749539"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7749546">.</span><span class="ident" id="7749547"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7749553">(</span><span class="string" id="7749554">&#34;\n\n\r\r\r\n\r\000&#34;</span><span class="op" id="7749574">,</span>&nbsp;<span class="op" id="7749576">(</span><span class="num" id="7749577">1</span><span class="op" id="7749578">&lt;&lt;</span><span class="num" id="7749580">20</span><span class="op" id="7749582">)</span><span class="op" id="7749583">/</span><span class="num" id="7749584">8</span><span class="op" id="7749585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7749588">func</span>&nbsp;<span class="ident" id="7749593">testMultipartBody</span><span class="op" id="7749610">(</span><span class="ident" id="7749611">sep</span>&nbsp;<span class="builtintype" id="7749615">string</span><span class="op" id="7749621">)</span>&nbsp;<span class="builtintype" id="7749623">string</span>&nbsp;<span class="op" id="7749630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7749633">testBody</span>&nbsp;<span class="op" id="7749642">:=</span>&nbsp;<span class="string" id="7749645">`<br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno">80</span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1<br>
<span class="lineno"></span>HEADER2:&nbsp;value2<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>My&nbsp;value<br>
<span class="lineno"></span>The&nbsp;end.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>name:&nbsp;bigsection<br>
<span class="lineno"></span><br>
<span class="lineno">90</span>[longline]<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1b<br>
<span class="lineno"></span>HEADER2:&nbsp;value2b<br>
<span class="lineno"></span>foo-bar:&nbsp;bazb<br>
<span class="lineno">95</span><br>
<span class="lineno"></span>Line&nbsp;1<br>
<span class="lineno"></span>Line&nbsp;2<br>
<span class="lineno"></span>Line&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.<br>
<span class="lineno"></span><br>
<span class="lineno">100</span>--MyBoundary<br>
<span class="lineno"></span><br>
<span class="lineno"></span>never&nbsp;read&nbsp;data<br>
<span class="lineno"></span>--MyBoundary--<br>
<span class="lineno"></span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>useless&nbsp;trailer<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750002"><a href="/gostd/mime/multipart/multipart_test.go.html#7749633">testBody</a></span>&nbsp;<span class="op" id="7750011">=</span>&nbsp;<span class="ident" id="7750013"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7750020">.</span><span class="ident" id="7750021"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="7750028">(</span><span class="ident" id="7750029"><a href="/gostd/mime/multipart/multipart_test.go.html#7749633">testBody</a></span><span class="op" id="7750037">,</span>&nbsp;<span class="string" id="7750039">&#34;\n&#34;</span><span class="op" id="7750043">,</span>&nbsp;<span class="ident" id="7750045"><a href="/gostd/mime/multipart/multipart_test.go.html#7749611">sep</a></span><span class="op" id="7750048">,</span>&nbsp;<span class="op" id="7750050">-</span><span class="num" id="7750051">1</span><span class="op" id="7750052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7750055">return</span>&nbsp;<span class="ident" id="7750062"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7750069">.</span><span class="ident" id="7750070"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="7750077">(</span><span class="ident" id="7750078"><a href="/gostd/mime/multipart/multipart_test.go.html#7749633">testBody</a></span><span class="op" id="7750086">,</span>&nbsp;<span class="string" id="7750088">&#34;[longline]&#34;</span><span class="op" id="7750100">,</span>&nbsp;<span class="ident" id="7750102"><a href="/gostd/mime/multipart/multipart_test.go.html#7749528">longLine</a></span><span class="op" id="7750110">,</span>&nbsp;<span class="num" id="7750112">1</span><span class="op" id="7750113">)</span><br>
<span class="lineno">110</span><span class="op" id="7750115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7750118">func</span>&nbsp;<span class="ident" id="7750123">TestMultipart</span><span class="op" id="7750136">(</span><span class="ident" id="7750137">t</span>&nbsp;<span class="op" id="7750139">*</span><span class="ident" id="7750140"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7750147">.</span><span class="ident" id="7750148"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7750149">)</span>&nbsp;<span class="op" id="7750151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750154">bodyReader</span>&nbsp;<span class="op" id="7750165">:=</span>&nbsp;<span class="ident" id="7750168"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7750175">.</span><span class="ident" id="7750176"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7750185">(</span><span class="ident" id="7750186"><a href="/gostd/mime/multipart/multipart_test.go.html#7749593">testMultipartBody</a></span><span class="op" id="7750203">(</span><span class="string" id="7750204">&#34;\r\n&#34;</span><span class="op" id="7750210">)</span><span class="op" id="7750211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750214"><a href="/gostd/mime/multipart/multipart_test.go.html#7750559">testMultipart</a></span><span class="op" id="7750227">(</span><span class="ident" id="7750228"><a href="/gostd/mime/multipart/multipart_test.go.html#7750137">t</a></span><span class="op" id="7750229">,</span>&nbsp;<span class="ident" id="7750231"><a href="/gostd/mime/multipart/multipart_test.go.html#7750154">bodyReader</a></span><span class="op" id="7750241">,</span>&nbsp;<span class="builtintype" id="7750243">false</span><span class="op" id="7750248">)</span><br>
<span class="lineno">115</span><span class="op" id="7750250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7750253">func</span>&nbsp;<span class="ident" id="7750258">TestMultipartOnlyNewlines</span><span class="op" id="7750283">(</span><span class="ident" id="7750284">t</span>&nbsp;<span class="op" id="7750286">*</span><span class="ident" id="7750287"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7750294">.</span><span class="ident" id="7750295"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7750296">)</span>&nbsp;<span class="op" id="7750298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750301">bodyReader</span>&nbsp;<span class="op" id="7750312">:=</span>&nbsp;<span class="ident" id="7750315"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7750322">.</span><span class="ident" id="7750323"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7750332">(</span><span class="ident" id="7750333"><a href="/gostd/mime/multipart/multipart_test.go.html#7749593">testMultipartBody</a></span><span class="op" id="7750350">(</span><span class="string" id="7750351">&#34;\n&#34;</span><span class="op" id="7750355">)</span><span class="op" id="7750356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750359"><a href="/gostd/mime/multipart/multipart_test.go.html#7750559">testMultipart</a></span><span class="op" id="7750372">(</span><span class="ident" id="7750373"><a href="/gostd/mime/multipart/multipart_test.go.html#7750284">t</a></span><span class="op" id="7750374">,</span>&nbsp;<span class="ident" id="7750376"><a href="/gostd/mime/multipart/multipart_test.go.html#7750301">bodyReader</a></span><span class="op" id="7750386">,</span>&nbsp;<span class="builtintype" id="7750388">true</span><span class="op" id="7750392">)</span><br>
<span class="lineno">120</span><span class="op" id="7750394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7750397">func</span>&nbsp;<span class="ident" id="7750402">TestMultipartSlowInput</span><span class="op" id="7750424">(</span><span class="ident" id="7750425">t</span>&nbsp;<span class="op" id="7750427">*</span><span class="ident" id="7750428"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7750435">.</span><span class="ident" id="7750436"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7750437">)</span>&nbsp;<span class="op" id="7750439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750442">bodyReader</span>&nbsp;<span class="op" id="7750453">:=</span>&nbsp;<span class="ident" id="7750456"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7750463">.</span><span class="ident" id="7750464"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7750473">(</span><span class="ident" id="7750474"><a href="/gostd/mime/multipart/multipart_test.go.html#7749593">testMultipartBody</a></span><span class="op" id="7750491">(</span><span class="string" id="7750492">&#34;\r\n&#34;</span><span class="op" id="7750498">)</span><span class="op" id="7750499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750502"><a href="/gostd/mime/multipart/multipart_test.go.html#7750559">testMultipart</a></span><span class="op" id="7750515">(</span><span class="ident" id="7750516"><a href="/gostd/mime/multipart/multipart_test.go.html#7750425">t</a></span><span class="op" id="7750517">,</span>&nbsp;<span class="op" id="7750519">&amp;</span><span class="ident" id="7750520"><a href="/gostd/mime/multipart/multipart_test.go.html#7755094">slowReader</a></span><span class="op" id="7750530">{</span><span class="ident" id="7750531"><a href="/gostd/mime/multipart/multipart_test.go.html#7750442">bodyReader</a></span><span class="op" id="7750541">}</span><span class="op" id="7750542">,</span>&nbsp;<span class="builtintype" id="7750544">false</span><span class="op" id="7750549">)</span><br>
<span class="lineno">125</span><span class="op" id="7750551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7750554">func</span>&nbsp;<span class="ident" id="7750559">testMultipart</span><span class="op" id="7750572">(</span><span class="ident" id="7750573">t</span>&nbsp;<span class="op" id="7750575">*</span><span class="ident" id="7750576"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7750583">.</span><span class="ident" id="7750584"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7750585">,</span>&nbsp;<span class="ident" id="7750587">r</span>&nbsp;<span class="ident" id="7750589"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7750591">.</span><span class="ident" id="7750592"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="7750598">,</span>&nbsp;<span class="ident" id="7750600">onlyNewlines</span>&nbsp;<span class="builtintype" id="7750613">bool</span><span class="op" id="7750617">)</span>&nbsp;<span class="op" id="7750619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750622">reader</span>&nbsp;<span class="op" id="7750629">:=</span>&nbsp;<span class="ident" id="7750632"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7750641">(</span><span class="ident" id="7750642"><a href="/gostd/mime/multipart/multipart_test.go.html#7750587">r</a></span><span class="op" id="7750643">,</span>&nbsp;<span class="string" id="7750645">&#34;MyBoundary&#34;</span><span class="op" id="7750657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750660">buf</span>&nbsp;<span class="op" id="7750664">:=</span>&nbsp;<span class="builtinfunc" id="7750667">new</span><span class="op" id="7750670">(</span><span class="ident" id="7750671"><a href="/gostd/mime/multipart/multipart_test.go.html#7747702">bytes</a></span><span class="op" id="7750676">.</span><span class="ident" id="7750677"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7750683">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7750687">//&nbsp;Part1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750697">part</span><span class="op" id="7750701">,</span>&nbsp;<span class="ident" id="7750703">err</span>&nbsp;<span class="op" id="7750707">:=</span>&nbsp;<span class="ident" id="7750710"><a href="/gostd/mime/multipart/multipart_test.go.html#7750622">reader</a></span><span class="op" id="7750716">.</span><span class="ident" id="7750717"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7750725">(</span><span class="op" id="7750726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7750729">if</span>&nbsp;<span class="ident" id="7750732"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span>&nbsp;<span class="op" id="7750737">==</span>&nbsp;<span class="builtintype" id="7750740">nil</span>&nbsp;<span class="op" id="7750744">||</span>&nbsp;<span class="ident" id="7750747"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7750751">!=</span>&nbsp;<span class="builtintype" id="7750754">nil</span>&nbsp;<span class="op" id="7750758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750762"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7750763">.</span><span class="ident" id="7750764"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7750769">(</span><span class="string" id="7750770">&#34;Expected&nbsp;part1&#34;</span><span class="op" id="7750786">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7750790">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7750798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7750801">if</span>&nbsp;<span class="ident" id="7750804">x</span>&nbsp;<span class="op" id="7750806">:=</span>&nbsp;<span class="ident" id="7750809"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7750813">.</span><span class="ident" id="7750814"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7750820">.</span><span class="ident" id="7750821"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="7750824">(</span><span class="string" id="7750825">&#34;Header1&#34;</span><span class="op" id="7750834">)</span><span class="op" id="7750835">;</span>&nbsp;<span class="ident" id="7750837"><a href="/gostd/mime/multipart/multipart_test.go.html#7750804">x</a></span>&nbsp;<span class="op" id="7750839">!=</span>&nbsp;<span class="string" id="7750842">&#34;value1&#34;</span>&nbsp;<span class="op" id="7750851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750855"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7750856">.</span><span class="ident" id="7750857"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7750863">(</span><span class="string" id="7750864">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7750899">,</span>&nbsp;<span class="string" id="7750901">&#34;Header1&#34;</span><span class="op" id="7750910">,</span>&nbsp;<span class="ident" id="7750912"><a href="/gostd/mime/multipart/multipart_test.go.html#7750804">x</a></span><span class="op" id="7750913">,</span>&nbsp;<span class="string" id="7750915">&#34;value1&#34;</span><span class="op" id="7750923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7750926">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7750929">if</span>&nbsp;<span class="ident" id="7750932">x</span>&nbsp;<span class="op" id="7750934">:=</span>&nbsp;<span class="ident" id="7750937"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7750941">.</span><span class="ident" id="7750942"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7750948">.</span><span class="ident" id="7750949"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="7750952">(</span><span class="string" id="7750953">&#34;foo-bar&#34;</span><span class="op" id="7750962">)</span><span class="op" id="7750963">;</span>&nbsp;<span class="ident" id="7750965"><a href="/gostd/mime/multipart/multipart_test.go.html#7750932">x</a></span>&nbsp;<span class="op" id="7750967">!=</span>&nbsp;<span class="string" id="7750970">&#34;baz&#34;</span>&nbsp;<span class="op" id="7750976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7750980"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7750981">.</span><span class="ident" id="7750982"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7750988">(</span><span class="string" id="7750989">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7751024">,</span>&nbsp;<span class="string" id="7751026">&#34;foo-bar&#34;</span><span class="op" id="7751035">,</span>&nbsp;<span class="ident" id="7751037"><a href="/gostd/mime/multipart/multipart_test.go.html#7750932">x</a></span><span class="op" id="7751038">,</span>&nbsp;<span class="string" id="7751040">&#34;baz&#34;</span><span class="op" id="7751045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751051">if</span>&nbsp;<span class="ident" id="7751054">x</span>&nbsp;<span class="op" id="7751056">:=</span>&nbsp;<span class="ident" id="7751059"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7751063">.</span><span class="ident" id="7751064"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7751070">.</span><span class="ident" id="7751071"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="7751074">(</span><span class="string" id="7751075">&#34;Foo-Bar&#34;</span><span class="op" id="7751084">)</span><span class="op" id="7751085">;</span>&nbsp;<span class="ident" id="7751087"><a href="/gostd/mime/multipart/multipart_test.go.html#7751054">x</a></span>&nbsp;<span class="op" id="7751089">!=</span>&nbsp;<span class="string" id="7751092">&#34;baz&#34;</span>&nbsp;<span class="op" id="7751098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751102"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751103">.</span><span class="ident" id="7751104"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7751110">(</span><span class="string" id="7751111">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7751146">,</span>&nbsp;<span class="string" id="7751148">&#34;Foo-Bar&#34;</span><span class="op" id="7751157">,</span>&nbsp;<span class="ident" id="7751159"><a href="/gostd/mime/multipart/multipart_test.go.html#7751054">x</a></span><span class="op" id="7751160">,</span>&nbsp;<span class="string" id="7751162">&#34;baz&#34;</span><span class="op" id="7751167">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751173"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751176">.</span><span class="ident" id="7751177"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="7751182">(</span><span class="op" id="7751183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751186">if</span>&nbsp;<span class="ident" id="7751189">_</span><span class="op" id="7751190">,</span>&nbsp;<span class="ident" id="7751192">err</span>&nbsp;<span class="op" id="7751196">:=</span>&nbsp;<span class="ident" id="7751199"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7751201">.</span><span class="ident" id="7751202"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7751206">(</span><span class="ident" id="7751207"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751210">,</span>&nbsp;<span class="ident" id="7751212"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7751216">)</span><span class="op" id="7751217">;</span>&nbsp;<span class="ident" id="7751219"><a href="/gostd/mime/multipart/multipart_test.go.html#7751192">err</a></span>&nbsp;<span class="op" id="7751223">!=</span>&nbsp;<span class="builtintype" id="7751226">nil</span>&nbsp;<span class="op" id="7751230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751234"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751235">.</span><span class="ident" id="7751236"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7751242">(</span><span class="string" id="7751243">&#34;part&nbsp;1&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7751260">,</span>&nbsp;<span class="ident" id="7751262"><a href="/gostd/mime/multipart/multipart_test.go.html#7751192">err</a></span><span class="op" id="7751265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751268">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751272">adjustNewlines</span>&nbsp;<span class="op" id="7751287">:=</span>&nbsp;<span class="keyword" id="7751290">func</span><span class="op" id="7751294">(</span><span class="ident" id="7751295">s</span>&nbsp;<span class="builtintype" id="7751297">string</span><span class="op" id="7751303">)</span>&nbsp;<span class="builtintype" id="7751305">string</span>&nbsp;<span class="op" id="7751312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751316">if</span>&nbsp;<span class="ident" id="7751319"><a href="/gostd/mime/multipart/multipart_test.go.html#7750600">onlyNewlines</a></span>&nbsp;<span class="op" id="7751332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751337">return</span>&nbsp;<span class="ident" id="7751344"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7751351">.</span><span class="ident" id="7751352"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="7751359">(</span><span class="ident" id="7751360"><a href="/gostd/mime/multipart/multipart_test.go.html#7751295">s</a></span><span class="op" id="7751361">,</span>&nbsp;<span class="string" id="7751363">&#34;\r\n&#34;</span><span class="op" id="7751369">,</span>&nbsp;<span class="string" id="7751371">&#34;\n&#34;</span><span class="op" id="7751375">,</span>&nbsp;<span class="op" id="7751377">-</span><span class="num" id="7751378">1</span><span class="op" id="7751379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751383">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751387">return</span>&nbsp;<span class="ident" id="7751394"><a href="/gostd/mime/multipart/multipart_test.go.html#7751295">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751401"><a href="/gostd/mime/multipart/multipart_test.go.html#7748455">expectEq</a></span><span class="op" id="7751409">(</span><span class="ident" id="7751410"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751411">,</span>&nbsp;<span class="ident" id="7751413"><a href="/gostd/mime/multipart/multipart_test.go.html#7751272">adjustNewlines</a></span><span class="op" id="7751427">(</span><span class="string" id="7751428">&#34;My&nbsp;value\r\nThe&nbsp;end.&#34;</span><span class="op" id="7751450">)</span><span class="op" id="7751451">,</span>&nbsp;<span class="ident" id="7751453"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751456">.</span><span class="ident" id="7751457"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7751463">(</span><span class="op" id="7751464">)</span><span class="op" id="7751465">,</span>&nbsp;<span class="string" id="7751467">&#34;Value&nbsp;of&nbsp;first&nbsp;part&#34;</span><span class="op" id="7751488">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7751492">//&nbsp;Part2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751502"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7751506">,</span>&nbsp;<span class="ident" id="7751508"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7751512">=</span>&nbsp;<span class="ident" id="7751514"><a href="/gostd/mime/multipart/multipart_test.go.html#7750622">reader</a></span><span class="op" id="7751520">.</span><span class="ident" id="7751521"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7751529">(</span><span class="op" id="7751530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751533">if</span>&nbsp;<span class="ident" id="7751536"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7751540">!=</span>&nbsp;<span class="builtintype" id="7751543">nil</span>&nbsp;<span class="op" id="7751547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751551"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751552">.</span><span class="ident" id="7751553"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7751559">(</span><span class="string" id="7751560">&#34;Expected&nbsp;part2;&nbsp;got:&nbsp;%v&#34;</span><span class="op" id="7751585">,</span>&nbsp;<span class="ident" id="7751587"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span><span class="op" id="7751590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751594">return</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751605">if</span>&nbsp;<span class="ident" id="7751608">e</span><span class="op" id="7751609">,</span>&nbsp;<span class="ident" id="7751611">g</span>&nbsp;<span class="op" id="7751613">:=</span>&nbsp;<span class="string" id="7751616">&#34;bigsection&#34;</span><span class="op" id="7751628">,</span>&nbsp;<span class="ident" id="7751630"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7751634">.</span><span class="ident" id="7751635"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7751641">.</span><span class="ident" id="7751642"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="7751645">(</span><span class="string" id="7751646">&#34;name&#34;</span><span class="op" id="7751652">)</span><span class="op" id="7751653">;</span>&nbsp;<span class="ident" id="7751655"><a href="/gostd/mime/multipart/multipart_test.go.html#7751608">e</a></span>&nbsp;<span class="op" id="7751657">!=</span>&nbsp;<span class="ident" id="7751660"><a href="/gostd/mime/multipart/multipart_test.go.html#7751611">g</a></span>&nbsp;<span class="op" id="7751662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751666"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751667">.</span><span class="ident" id="7751668"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7751674">(</span><span class="string" id="7751675">&#34;part2&#39;s&nbsp;name&nbsp;header:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7751717">,</span>&nbsp;<span class="ident" id="7751719"><a href="/gostd/mime/multipart/multipart_test.go.html#7751608">e</a></span><span class="op" id="7751720">,</span>&nbsp;<span class="ident" id="7751722"><a href="/gostd/mime/multipart/multipart_test.go.html#7751611">g</a></span><span class="op" id="7751723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751729"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751732">.</span><span class="ident" id="7751733"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="7751738">(</span><span class="op" id="7751739">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751742">if</span>&nbsp;<span class="ident" id="7751745">_</span><span class="op" id="7751746">,</span>&nbsp;<span class="ident" id="7751748">err</span>&nbsp;<span class="op" id="7751752">:=</span>&nbsp;<span class="ident" id="7751755"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7751757">.</span><span class="ident" id="7751758"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7751762">(</span><span class="ident" id="7751763"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751766">,</span>&nbsp;<span class="ident" id="7751768"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7751772">)</span><span class="op" id="7751773">;</span>&nbsp;<span class="ident" id="7751775"><a href="/gostd/mime/multipart/multipart_test.go.html#7751748">err</a></span>&nbsp;<span class="op" id="7751779">!=</span>&nbsp;<span class="builtintype" id="7751782">nil</span>&nbsp;<span class="op" id="7751786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751790"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751791">.</span><span class="ident" id="7751792"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7751798">(</span><span class="string" id="7751799">&#34;part&nbsp;2&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7751816">,</span>&nbsp;<span class="ident" id="7751818"><a href="/gostd/mime/multipart/multipart_test.go.html#7751748">err</a></span><span class="op" id="7751821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751827">s</span>&nbsp;<span class="op" id="7751829">:=</span>&nbsp;<span class="ident" id="7751832"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7751835">.</span><span class="ident" id="7751836"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7751842">(</span><span class="op" id="7751843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751846">if</span>&nbsp;<span class="builtinfunc" id="7751849">len</span><span class="op" id="7751852">(</span><span class="ident" id="7751853"><a href="/gostd/mime/multipart/multipart_test.go.html#7751827">s</a></span><span class="op" id="7751854">)</span>&nbsp;<span class="op" id="7751856">!=</span>&nbsp;<span class="builtinfunc" id="7751859">len</span><span class="op" id="7751862">(</span><span class="ident" id="7751863"><a href="/gostd/mime/multipart/multipart_test.go.html#7749528">longLine</a></span><span class="op" id="7751871">)</span>&nbsp;<span class="op" id="7751873">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751877"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751878">.</span><span class="ident" id="7751879"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7751885">(</span><span class="string" id="7751886">&#34;part2&nbsp;body&nbsp;expected&nbsp;long&nbsp;line&nbsp;of&nbsp;length&nbsp;%d;&nbsp;got&nbsp;length&nbsp;%d&#34;</span><span class="op" id="7751945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7751950">len</span><span class="op" id="7751953">(</span><span class="ident" id="7751954"><a href="/gostd/mime/multipart/multipart_test.go.html#7749528">longLine</a></span><span class="op" id="7751962">)</span><span class="op" id="7751963">,</span>&nbsp;<span class="builtinfunc" id="7751965">len</span><span class="op" id="7751968">(</span><span class="ident" id="7751969"><a href="/gostd/mime/multipart/multipart_test.go.html#7751827">s</a></span><span class="op" id="7751970">)</span><span class="op" id="7751971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7751974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7751977">if</span>&nbsp;<span class="ident" id="7751980"><a href="/gostd/mime/multipart/multipart_test.go.html#7751827">s</a></span>&nbsp;<span class="op" id="7751982">!=</span>&nbsp;<span class="ident" id="7751985"><a href="/gostd/mime/multipart/multipart_test.go.html#7749528">longLine</a></span>&nbsp;<span class="op" id="7751994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7751998"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7751999">.</span><span class="ident" id="7752000"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7752006">(</span><span class="string" id="7752007">&#34;part2&nbsp;long&nbsp;body&nbsp;didn&#39;t&nbsp;match&#34;</span><span class="op" id="7752037">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7752044">//&nbsp;Part3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752054"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7752058">,</span>&nbsp;<span class="ident" id="7752060"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752064">=</span>&nbsp;<span class="ident" id="7752066"><a href="/gostd/mime/multipart/multipart_test.go.html#7750622">reader</a></span><span class="op" id="7752072">.</span><span class="ident" id="7752073"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7752081">(</span><span class="op" id="7752082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752085">if</span>&nbsp;<span class="ident" id="7752088"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span>&nbsp;<span class="op" id="7752093">==</span>&nbsp;<span class="builtintype" id="7752096">nil</span>&nbsp;<span class="op" id="7752100">||</span>&nbsp;<span class="ident" id="7752103"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752107">!=</span>&nbsp;<span class="builtintype" id="7752110">nil</span>&nbsp;<span class="op" id="7752114">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752118"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752119">.</span><span class="ident" id="7752120"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7752125">(</span><span class="string" id="7752126">&#34;Expected&nbsp;part3&#34;</span><span class="op" id="7752142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752157">if</span>&nbsp;<span class="ident" id="7752160"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7752164">.</span><span class="ident" id="7752165"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7752171">.</span><span class="ident" id="7752172"><a href="/gostd/net/textproto/header.go.html#4329349">Get</a></span><span class="op" id="7752175">(</span><span class="string" id="7752176">&#34;foo-bar&#34;</span><span class="op" id="7752185">)</span>&nbsp;<span class="op" id="7752187">!=</span>&nbsp;<span class="string" id="7752190">&#34;bazb&#34;</span>&nbsp;<span class="op" id="7752197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752201"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752202">.</span><span class="ident" id="7752203"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7752208">(</span><span class="string" id="7752209">&#34;Expected&nbsp;foo-bar:&nbsp;bazb&#34;</span><span class="op" id="7752233">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752239"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7752242">.</span><span class="ident" id="7752243"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="7752248">(</span><span class="op" id="7752249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752252">if</span>&nbsp;<span class="ident" id="7752255">_</span><span class="op" id="7752256">,</span>&nbsp;<span class="ident" id="7752258">err</span>&nbsp;<span class="op" id="7752262">:=</span>&nbsp;<span class="ident" id="7752265"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7752267">.</span><span class="ident" id="7752268"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7752272">(</span><span class="ident" id="7752273"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7752276">,</span>&nbsp;<span class="ident" id="7752278"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7752282">)</span><span class="op" id="7752283">;</span>&nbsp;<span class="ident" id="7752285"><a href="/gostd/mime/multipart/multipart_test.go.html#7752258">err</a></span>&nbsp;<span class="op" id="7752289">!=</span>&nbsp;<span class="builtintype" id="7752292">nil</span>&nbsp;<span class="op" id="7752296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752300"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752301">.</span><span class="ident" id="7752302"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7752308">(</span><span class="string" id="7752309">&#34;part&nbsp;3&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7752326">,</span>&nbsp;<span class="ident" id="7752328"><a href="/gostd/mime/multipart/multipart_test.go.html#7752258">err</a></span><span class="op" id="7752331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752334">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752337"><a href="/gostd/mime/multipart/multipart_test.go.html#7748455">expectEq</a></span><span class="op" id="7752345">(</span><span class="ident" id="7752346"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752347">,</span>&nbsp;<span class="ident" id="7752349"><a href="/gostd/mime/multipart/multipart_test.go.html#7751272">adjustNewlines</a></span><span class="op" id="7752363">(</span><span class="string" id="7752364">&#34;Line&nbsp;1\r\nLine&nbsp;2\r\nLine&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.\r\n&#34;</span><span class="op" id="7752429">)</span><span class="op" id="7752430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752434"><a href="/gostd/mime/multipart/multipart_test.go.html#7750660">buf</a></span><span class="op" id="7752437">.</span><span class="ident" id="7752438"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7752444">(</span><span class="op" id="7752445">)</span><span class="op" id="7752446">,</span>&nbsp;<span class="string" id="7752448">&#34;body&nbsp;of&nbsp;part&nbsp;3&#34;</span><span class="op" id="7752464">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7752468">//&nbsp;Part4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752478"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7752482">,</span>&nbsp;<span class="ident" id="7752484"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752488">=</span>&nbsp;<span class="ident" id="7752490"><a href="/gostd/mime/multipart/multipart_test.go.html#7750622">reader</a></span><span class="op" id="7752496">.</span><span class="ident" id="7752497"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7752505">(</span><span class="op" id="7752506">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752509">if</span>&nbsp;<span class="ident" id="7752512"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span>&nbsp;<span class="op" id="7752517">==</span>&nbsp;<span class="builtintype" id="7752520">nil</span>&nbsp;<span class="op" id="7752524">||</span>&nbsp;<span class="ident" id="7752527"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752531">!=</span>&nbsp;<span class="builtintype" id="7752534">nil</span>&nbsp;<span class="op" id="7752538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752542"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752543">.</span><span class="ident" id="7752544"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7752549">(</span><span class="string" id="7752550">&#34;Expected&nbsp;part&nbsp;4&nbsp;without&nbsp;errors&#34;</span><span class="op" id="7752582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752586">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7752598">//&nbsp;Non-existent&nbsp;part5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752621"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span><span class="op" id="7752625">,</span>&nbsp;<span class="ident" id="7752627"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752631">=</span>&nbsp;<span class="ident" id="7752633"><a href="/gostd/mime/multipart/multipart_test.go.html#7750622">reader</a></span><span class="op" id="7752639">.</span><span class="ident" id="7752640"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7752648">(</span><span class="op" id="7752649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752652">if</span>&nbsp;<span class="ident" id="7752655"><a href="/gostd/mime/multipart/multipart_test.go.html#7750697">part</a></span>&nbsp;<span class="op" id="7752660">!=</span>&nbsp;<span class="builtintype" id="7752663">nil</span>&nbsp;<span class="op" id="7752667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752671"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752672">.</span><span class="ident" id="7752673"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7752678">(</span><span class="string" id="7752679">&#34;Didn&#39;t&nbsp;expect&nbsp;a&nbsp;fifth&nbsp;part.&#34;</span><span class="op" id="7752708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752711">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7752714">if</span>&nbsp;<span class="ident" id="7752717"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span>&nbsp;<span class="op" id="7752721">!=</span>&nbsp;<span class="ident" id="7752724"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7752726">.</span><span class="ident" id="7752727"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7752731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752735"><a href="/gostd/mime/multipart/multipart_test.go.html#7750573">t</a></span><span class="op" id="7752736">.</span><span class="ident" id="7752737"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7752743">(</span><span class="string" id="7752744">&#34;On&nbsp;fifth&nbsp;part&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7752783">,</span>&nbsp;<span class="ident" id="7752785"><a href="/gostd/mime/multipart/multipart_test.go.html#7750703">err</a></span><span class="op" id="7752788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7752791">}</span><br>
<span class="lineno"></span><span class="op" id="7752793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7752796">func</span>&nbsp;<span class="ident" id="7752801">TestVariousTextLineEndings</span><span class="op" id="7752827">(</span><span class="ident" id="7752828">t</span>&nbsp;<span class="op" id="7752830">*</span><span class="ident" id="7752831"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7752838">.</span><span class="ident" id="7752839"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7752840">)</span>&nbsp;<span class="op" id="7752842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7752845">tests</span>&nbsp;<span class="op" id="7752851">:=</span>&nbsp;<span class="op" id="7752854">[</span><span class="op" id="7752855">...</span><span class="op" id="7752858">]</span><span class="builtintype" id="7752859">string</span><span class="op" id="7752865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752869">&#34;Foo\nBar&#34;</span><span class="op" id="7752879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752883">&#34;Foo\nBar\n&#34;</span><span class="op" id="7752895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752899">&#34;Foo\r\nBar&#34;</span><span class="op" id="7752911">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752915">&#34;Foo\r\nBar\r\n&#34;</span><span class="op" id="7752931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752935">&#34;Foo\rBar&#34;</span><span class="op" id="7752945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752949">&#34;Foo\rBar\r&#34;</span><span class="op" id="7752961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7752965">&#34;\x00\x01\x02\x09\x0a\x0b\x0c\x0d\x0e\x0f\x10&#34;</span><span class="op" id="7753011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753014">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753018">for</span>&nbsp;<span class="ident" id="7753022">testNum</span><span class="op" id="7753029">,</span>&nbsp;<span class="ident" id="7753031">expectedBody</span>&nbsp;<span class="op" id="7753044">:=</span>&nbsp;<span class="keyword" id="7753047">range</span>&nbsp;<span class="ident" id="7753053"><a href="/gostd/mime/multipart/multipart_test.go.html#7752845">tests</a></span>&nbsp;<span class="op" id="7753059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753063">body</span>&nbsp;<span class="op" id="7753068">:=</span>&nbsp;<span class="string" id="7753071">&#34;--BOUNDARY\r\n&#34;</span>&nbsp;<span class="op" id="7753088">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7753093">&#34;Content-Disposition:&nbsp;form-data;&nbsp;name=\&#34;value\&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7753146">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7753151">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7753158">+</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753163"><a href="/gostd/mime/multipart/multipart_test.go.html#7753031">expectedBody</a></span>&nbsp;<span class="op" id="7753176">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7753181">&#34;\r\n--BOUNDARY--\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753206">bodyReader</span>&nbsp;<span class="op" id="7753217">:=</span>&nbsp;<span class="ident" id="7753220"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7753227">.</span><span class="ident" id="7753228"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7753237">(</span><span class="ident" id="7753238"><a href="/gostd/mime/multipart/multipart_test.go.html#7753063">body</a></span><span class="op" id="7753242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753247">reader</span>&nbsp;<span class="op" id="7753254">:=</span>&nbsp;<span class="ident" id="7753257"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7753266">(</span><span class="ident" id="7753267"><a href="/gostd/mime/multipart/multipart_test.go.html#7753206">bodyReader</a></span><span class="op" id="7753277">,</span>&nbsp;<span class="string" id="7753279">&#34;BOUNDARY&#34;</span><span class="op" id="7753289">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753293">buf</span>&nbsp;<span class="op" id="7753297">:=</span>&nbsp;<span class="builtinfunc" id="7753300">new</span><span class="op" id="7753303">(</span><span class="ident" id="7753304"><a href="/gostd/mime/multipart/multipart_test.go.html#7747702">bytes</a></span><span class="op" id="7753309">.</span><span class="ident" id="7753310"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7753316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753320">part</span><span class="op" id="7753324">,</span>&nbsp;<span class="ident" id="7753326">err</span>&nbsp;<span class="op" id="7753330">:=</span>&nbsp;<span class="ident" id="7753333"><a href="/gostd/mime/multipart/multipart_test.go.html#7753247">reader</a></span><span class="op" id="7753339">.</span><span class="ident" id="7753340"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7753348">(</span><span class="op" id="7753349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753353">if</span>&nbsp;<span class="ident" id="7753356"><a href="/gostd/mime/multipart/multipart_test.go.html#7753320">part</a></span>&nbsp;<span class="op" id="7753361">==</span>&nbsp;<span class="builtintype" id="7753364">nil</span>&nbsp;<span class="op" id="7753368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753373"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753374">.</span><span class="ident" id="7753375"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7753381">(</span><span class="string" id="7753382">&#34;Expected&nbsp;a&nbsp;body&nbsp;part&nbsp;on&nbsp;text&nbsp;%d&#34;</span><span class="op" id="7753415">,</span>&nbsp;<span class="ident" id="7753417"><a href="/gostd/mime/multipart/multipart_test.go.html#7753022">testNum</a></span><span class="op" id="7753424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753429">continue</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753444">if</span>&nbsp;<span class="ident" id="7753447"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span>&nbsp;<span class="op" id="7753451">!=</span>&nbsp;<span class="builtintype" id="7753454">nil</span>&nbsp;<span class="op" id="7753458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753463"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753464">.</span><span class="ident" id="7753465"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7753471">(</span><span class="string" id="7753472">&#34;Unexpected&nbsp;error&nbsp;on&nbsp;text&nbsp;%d:&nbsp;%v&#34;</span><span class="op" id="7753505">,</span>&nbsp;<span class="ident" id="7753507"><a href="/gostd/mime/multipart/multipart_test.go.html#7753022">testNum</a></span><span class="op" id="7753514">,</span>&nbsp;<span class="ident" id="7753516"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span><span class="op" id="7753519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753524">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753535">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753539">written</span><span class="op" id="7753546">,</span>&nbsp;<span class="ident" id="7753548"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span>&nbsp;<span class="op" id="7753552">:=</span>&nbsp;<span class="ident" id="7753555"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7753557">.</span><span class="ident" id="7753558"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7753562">(</span><span class="ident" id="7753563"><a href="/gostd/mime/multipart/multipart_test.go.html#7753293">buf</a></span><span class="op" id="7753566">,</span>&nbsp;<span class="ident" id="7753568"><a href="/gostd/mime/multipart/multipart_test.go.html#7753320">part</a></span><span class="op" id="7753572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753576"><a href="/gostd/mime/multipart/multipart_test.go.html#7748455">expectEq</a></span><span class="op" id="7753584">(</span><span class="ident" id="7753585"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753586">,</span>&nbsp;<span class="ident" id="7753588"><a href="/gostd/mime/multipart/multipart_test.go.html#7753031">expectedBody</a></span><span class="op" id="7753600">,</span>&nbsp;<span class="ident" id="7753602"><a href="/gostd/mime/multipart/multipart_test.go.html#7753293">buf</a></span><span class="op" id="7753605">.</span><span class="ident" id="7753606"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7753612">(</span><span class="op" id="7753613">)</span><span class="op" id="7753614">,</span>&nbsp;<span class="ident" id="7753616"><a href="/gostd/mime/multipart/multipart_test.go.html#7747728">fmt</a></span><span class="op" id="7753619">.</span><span class="ident" id="7753620"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7753627">(</span><span class="string" id="7753628">&#34;test&nbsp;%d&#34;</span><span class="op" id="7753637">,</span>&nbsp;<span class="ident" id="7753639"><a href="/gostd/mime/multipart/multipart_test.go.html#7753022">testNum</a></span><span class="op" id="7753646">)</span><span class="op" id="7753647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753651">if</span>&nbsp;<span class="ident" id="7753654"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span>&nbsp;<span class="op" id="7753658">!=</span>&nbsp;<span class="builtintype" id="7753661">nil</span>&nbsp;<span class="op" id="7753665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753670"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753671">.</span><span class="ident" id="7753672"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7753678">(</span><span class="string" id="7753679">&#34;Error&nbsp;copying&nbsp;multipart;&nbsp;bytes=%v,&nbsp;error=%v&#34;</span><span class="op" id="7753724">,</span>&nbsp;<span class="ident" id="7753726"><a href="/gostd/mime/multipart/multipart_test.go.html#7753539">written</a></span><span class="op" id="7753733">,</span>&nbsp;<span class="ident" id="7753735"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span><span class="op" id="7753738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753742">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753747"><a href="/gostd/mime/multipart/multipart_test.go.html#7753320">part</a></span><span class="op" id="7753751">,</span>&nbsp;<span class="ident" id="7753753"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span>&nbsp;<span class="op" id="7753757">=</span>&nbsp;<span class="ident" id="7753759"><a href="/gostd/mime/multipart/multipart_test.go.html#7753247">reader</a></span><span class="op" id="7753765">.</span><span class="ident" id="7753766"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7753774">(</span><span class="op" id="7753775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753779">if</span>&nbsp;<span class="ident" id="7753782"><a href="/gostd/mime/multipart/multipart_test.go.html#7753320">part</a></span>&nbsp;<span class="op" id="7753787">!=</span>&nbsp;<span class="builtintype" id="7753790">nil</span>&nbsp;<span class="op" id="7753794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753799"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753800">.</span><span class="ident" id="7753801"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7753807">(</span><span class="string" id="7753808">&#34;Unexpected&nbsp;part&nbsp;in&nbsp;test&nbsp;%d&#34;</span><span class="op" id="7753836">,</span>&nbsp;<span class="ident" id="7753838"><a href="/gostd/mime/multipart/multipart_test.go.html#7753022">testNum</a></span><span class="op" id="7753845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753849">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7753853">if</span>&nbsp;<span class="ident" id="7753856"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span>&nbsp;<span class="op" id="7753860">!=</span>&nbsp;<span class="ident" id="7753863"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7753865">.</span><span class="ident" id="7753866"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7753870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753875"><a href="/gostd/mime/multipart/multipart_test.go.html#7752828">t</a></span><span class="op" id="7753876">.</span><span class="ident" id="7753877"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7753883">(</span><span class="string" id="7753884">&#34;On&nbsp;test&nbsp;%d&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7753920">,</span>&nbsp;<span class="ident" id="7753922"><a href="/gostd/mime/multipart/multipart_test.go.html#7753022">testNum</a></span><span class="op" id="7753929">,</span>&nbsp;<span class="ident" id="7753931"><a href="/gostd/mime/multipart/multipart_test.go.html#7753326">err</a></span><span class="op" id="7753934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7753942">}</span><br>
<span class="lineno">260</span><span class="op" id="7753944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7753947">type</span>&nbsp;<span class="ident" id="7753952">maliciousReader</span>&nbsp;<span class="keyword" id="7753968">struct</span>&nbsp;<span class="op" id="7753975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753978">t</span>&nbsp;<span class="op" id="7753980">*</span><span class="ident" id="7753981"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7753988">.</span><span class="ident" id="7753989"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7753992">n</span>&nbsp;<span class="builtintype" id="7753994">int</span><br>
<span class="lineno">265</span><span class="op" id="7753998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7754001">const</span>&nbsp;<span class="ident" id="7754007">maxReadThreshold</span>&nbsp;<span class="op" id="7754024">=</span>&nbsp;<span class="num" id="7754026">1</span>&nbsp;<span class="op" id="7754028">&lt;&lt;</span>&nbsp;<span class="num" id="7754031">20</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7754035">func</span>&nbsp;<span class="op" id="7754040">(</span><span class="ident" id="7754041">mr</span>&nbsp;<span class="op" id="7754044">*</span><span class="ident" id="7754045"><a href="/gostd/mime/multipart/multipart_test.go.html#7753952">maliciousReader</a></span><span class="op" id="7754060">)</span>&nbsp;<span class="ident" id="7754062">Read</span><span class="op" id="7754066">(</span><span class="ident" id="7754067">b</span>&nbsp;<span class="op" id="7754069">[</span><span class="op" id="7754070">]</span><span class="builtintype" id="7754071">byte</span><span class="op" id="7754075">)</span>&nbsp;<span class="op" id="7754077">(</span><span class="ident" id="7754078">n</span>&nbsp;<span class="builtintype" id="7754080">int</span><span class="op" id="7754083">,</span>&nbsp;<span class="ident" id="7754085">err</span>&nbsp;<span class="builtintype" id="7754089">error</span><span class="op" id="7754094">)</span>&nbsp;<span class="op" id="7754096">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754099"><a href="/gostd/mime/multipart/multipart_test.go.html#7754041">mr</a></span><span class="op" id="7754101">.</span><span class="ident" id="7754102"><a href="/gostd/mime/multipart/multipart_test.go.html#7753992">n</a></span>&nbsp;<span class="op" id="7754104">+=</span>&nbsp;<span class="builtinfunc" id="7754107">len</span><span class="op" id="7754110">(</span><span class="ident" id="7754111"><a href="/gostd/mime/multipart/multipart_test.go.html#7754067">b</a></span><span class="op" id="7754112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754115">if</span>&nbsp;<span class="ident" id="7754118"><a href="/gostd/mime/multipart/multipart_test.go.html#7754041">mr</a></span><span class="op" id="7754120">.</span><span class="ident" id="7754121"><a href="/gostd/mime/multipart/multipart_test.go.html#7753992">n</a></span>&nbsp;<span class="op" id="7754123">&gt;=</span>&nbsp;<span class="ident" id="7754126"><a href="/gostd/mime/multipart/multipart_test.go.html#7754007">maxReadThreshold</a></span>&nbsp;<span class="op" id="7754143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754147"><a href="/gostd/mime/multipart/multipart_test.go.html#7754041">mr</a></span><span class="op" id="7754149">.</span><span class="ident" id="7754150"><a href="/gostd/mime/multipart/multipart_test.go.html#7753978">t</a></span><span class="op" id="7754151">.</span><span class="ident" id="7754152"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7754157">(</span><span class="string" id="7754158">&#34;too&nbsp;much&nbsp;was&nbsp;read&#34;</span><span class="op" id="7754177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754181">return</span>&nbsp;<span class="num" id="7754188">0</span><span class="op" id="7754189">,</span>&nbsp;<span class="ident" id="7754191"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7754193">.</span><span class="ident" id="7754194"><a href="/gostd/io/io.go.html#1419950">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7754199">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754202">return</span>&nbsp;<span class="builtinfunc" id="7754209">len</span><span class="op" id="7754212">(</span><span class="ident" id="7754213"><a href="/gostd/mime/multipart/multipart_test.go.html#7754067">b</a></span><span class="op" id="7754214">)</span><span class="op" id="7754215">,</span>&nbsp;<span class="builtintype" id="7754217">nil</span><br>
<span class="lineno"></span><span class="op" id="7754221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7754224">func</span>&nbsp;<span class="ident" id="7754229">TestLineLimit</span><span class="op" id="7754242">(</span><span class="ident" id="7754243">t</span>&nbsp;<span class="op" id="7754245">*</span><span class="ident" id="7754246"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7754253">.</span><span class="ident" id="7754254"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7754255">)</span>&nbsp;<span class="op" id="7754257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754260">mr</span>&nbsp;<span class="op" id="7754263">:=</span>&nbsp;<span class="op" id="7754266">&amp;</span><span class="ident" id="7754267"><a href="/gostd/mime/multipart/multipart_test.go.html#7753952">maliciousReader</a></span><span class="op" id="7754282">{</span><span class="ident" id="7754283"><a href="/gostd/mime/multipart/multipart_test.go.html#7753978">t</a></span><span class="op" id="7754284">:</span>&nbsp;<span class="ident" id="7754286"><a href="/gostd/mime/multipart/multipart_test.go.html#7754243">t</a></span><span class="op" id="7754287">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754290">r</span>&nbsp;<span class="op" id="7754292">:=</span>&nbsp;<span class="ident" id="7754295"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7754304">(</span><span class="ident" id="7754305"><a href="/gostd/mime/multipart/multipart_test.go.html#7754260">mr</a></span><span class="op" id="7754307">,</span>&nbsp;<span class="string" id="7754309">&#34;fooBoundary&#34;</span><span class="op" id="7754322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754325">part</span><span class="op" id="7754329">,</span>&nbsp;<span class="ident" id="7754331">err</span>&nbsp;<span class="op" id="7754335">:=</span>&nbsp;<span class="ident" id="7754338"><a href="/gostd/mime/multipart/multipart_test.go.html#7754290">r</a></span><span class="op" id="7754339">.</span><span class="ident" id="7754340"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7754348">(</span><span class="op" id="7754349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754352">if</span>&nbsp;<span class="ident" id="7754355"><a href="/gostd/mime/multipart/multipart_test.go.html#7754325">part</a></span>&nbsp;<span class="op" id="7754360">!=</span>&nbsp;<span class="builtintype" id="7754363">nil</span>&nbsp;<span class="op" id="7754367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754371"><a href="/gostd/mime/multipart/multipart_test.go.html#7754243">t</a></span><span class="op" id="7754372">.</span><span class="ident" id="7754373"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7754379">(</span><span class="string" id="7754380">&#34;unexpected&nbsp;part&nbsp;read&#34;</span><span class="op" id="7754402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7754405">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754408">if</span>&nbsp;<span class="ident" id="7754411"><a href="/gostd/mime/multipart/multipart_test.go.html#7754331">err</a></span>&nbsp;<span class="op" id="7754415">==</span>&nbsp;<span class="builtintype" id="7754418">nil</span>&nbsp;<span class="op" id="7754422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754426"><a href="/gostd/mime/multipart/multipart_test.go.html#7754243">t</a></span><span class="op" id="7754427">.</span><span class="ident" id="7754428"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7754434">(</span><span class="string" id="7754435">&#34;expected&nbsp;an&nbsp;error&#34;</span><span class="op" id="7754454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7754457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754460">if</span>&nbsp;<span class="ident" id="7754463"><a href="/gostd/mime/multipart/multipart_test.go.html#7754260">mr</a></span><span class="op" id="7754465">.</span><span class="ident" id="7754466"><a href="/gostd/mime/multipart/multipart_test.go.html#7753992">n</a></span>&nbsp;<span class="op" id="7754468">&gt;=</span>&nbsp;<span class="ident" id="7754471"><a href="/gostd/mime/multipart/multipart_test.go.html#7754007">maxReadThreshold</a></span>&nbsp;<span class="op" id="7754488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754492"><a href="/gostd/mime/multipart/multipart_test.go.html#7754243">t</a></span><span class="op" id="7754493">.</span><span class="ident" id="7754494"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7754500">(</span><span class="string" id="7754501">&#34;expected&nbsp;to&nbsp;read&nbsp;&lt;&nbsp;%d&nbsp;bytes;&nbsp;read&nbsp;%d&#34;</span><span class="op" id="7754539">,</span>&nbsp;<span class="ident" id="7754541"><a href="/gostd/mime/multipart/multipart_test.go.html#7754007">maxReadThreshold</a></span><span class="op" id="7754557">,</span>&nbsp;<span class="ident" id="7754559"><a href="/gostd/mime/multipart/multipart_test.go.html#7754260">mr</a></span><span class="op" id="7754561">.</span><span class="ident" id="7754562"><a href="/gostd/mime/multipart/multipart_test.go.html#7753992">n</a></span><span class="op" id="7754563">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7754566">}</span><br>
<span class="lineno"></span><span class="op" id="7754568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7754571">func</span>&nbsp;<span class="ident" id="7754576">TestMultipartTruncated</span><span class="op" id="7754598">(</span><span class="ident" id="7754599">t</span>&nbsp;<span class="op" id="7754601">*</span><span class="ident" id="7754602"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7754609">.</span><span class="ident" id="7754610"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7754611">)</span>&nbsp;<span class="op" id="7754613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754616">testBody</span>&nbsp;<span class="op" id="7754625">:=</span>&nbsp;<span class="string" id="7754628">`<br>
<span class="lineno">295</span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Oh&nbsp;no,&nbsp;premature&nbsp;EOF!<br>
<span class="lineno">300</span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754735">body</span>&nbsp;<span class="op" id="7754740">:=</span>&nbsp;<span class="ident" id="7754743"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7754750">.</span><span class="ident" id="7754751"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="7754758">(</span><span class="ident" id="7754759"><a href="/gostd/mime/multipart/multipart_test.go.html#7754616">testBody</a></span><span class="op" id="7754767">,</span>&nbsp;<span class="string" id="7754769">&#34;\n&#34;</span><span class="op" id="7754773">,</span>&nbsp;<span class="string" id="7754775">&#34;\r\n&#34;</span><span class="op" id="7754781">,</span>&nbsp;<span class="op" id="7754783">-</span><span class="num" id="7754784">1</span><span class="op" id="7754785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754788">bodyReader</span>&nbsp;<span class="op" id="7754799">:=</span>&nbsp;<span class="ident" id="7754802"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7754809">.</span><span class="ident" id="7754810"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7754819">(</span><span class="ident" id="7754820"><a href="/gostd/mime/multipart/multipart_test.go.html#7754735">body</a></span><span class="op" id="7754824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754827">r</span>&nbsp;<span class="op" id="7754829">:=</span>&nbsp;<span class="ident" id="7754832"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7754841">(</span><span class="ident" id="7754842"><a href="/gostd/mime/multipart/multipart_test.go.html#7754788">bodyReader</a></span><span class="op" id="7754852">,</span>&nbsp;<span class="string" id="7754854">&#34;MyBoundary&#34;</span><span class="op" id="7754866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754870">part</span><span class="op" id="7754874">,</span>&nbsp;<span class="ident" id="7754876">err</span>&nbsp;<span class="op" id="7754880">:=</span>&nbsp;<span class="ident" id="7754883"><a href="/gostd/mime/multipart/multipart_test.go.html#7754827">r</a></span><span class="op" id="7754884">.</span><span class="ident" id="7754885"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7754893">(</span><span class="op" id="7754894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754897">if</span>&nbsp;<span class="ident" id="7754900"><a href="/gostd/mime/multipart/multipart_test.go.html#7754876">err</a></span>&nbsp;<span class="op" id="7754904">!=</span>&nbsp;<span class="builtintype" id="7754907">nil</span>&nbsp;<span class="op" id="7754911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754915"><a href="/gostd/mime/multipart/multipart_test.go.html#7754599">t</a></span><span class="op" id="7754916">.</span><span class="ident" id="7754917"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7754923">(</span><span class="string" id="7754924">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="7754943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7754946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7754949">_</span><span class="op" id="7754950">,</span>&nbsp;<span class="ident" id="7754952"><a href="/gostd/mime/multipart/multipart_test.go.html#7754876">err</a></span>&nbsp;<span class="op" id="7754956">=</span>&nbsp;<span class="ident" id="7754958"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7754960">.</span><span class="ident" id="7754961"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7754965">(</span><span class="ident" id="7754966"><a href="/gostd/mime/multipart/multipart_test.go.html#7747741">ioutil</a></span><span class="op" id="7754972">.</span><span class="ident" id="7754973"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7754980">,</span>&nbsp;<span class="ident" id="7754982"><a href="/gostd/mime/multipart/multipart_test.go.html#7754870">part</a></span><span class="op" id="7754986">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7754989">if</span>&nbsp;<span class="ident" id="7754992"><a href="/gostd/mime/multipart/multipart_test.go.html#7754876">err</a></span>&nbsp;<span class="op" id="7754996">!=</span>&nbsp;<span class="ident" id="7754999"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7755001">.</span><span class="ident" id="7755002"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span>&nbsp;<span class="op" id="7755019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7755023"><a href="/gostd/mime/multipart/multipart_test.go.html#7754599">t</a></span><span class="op" id="7755024">.</span><span class="ident" id="7755025"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7755031">(</span><span class="string" id="7755032">&#34;expected&nbsp;error&nbsp;io.ErrUnexpectedEOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7755076">,</span>&nbsp;<span class="ident" id="7755078"><a href="/gostd/mime/multipart/multipart_test.go.html#7754876">err</a></span><span class="op" id="7755081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7755084">}</span><br>
<span class="lineno"></span><span class="op" id="7755086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="7755089">type</span>&nbsp;<span class="ident" id="7755094">slowReader</span>&nbsp;<span class="keyword" id="7755105">struct</span>&nbsp;<span class="op" id="7755112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7755115">r</span>&nbsp;<span class="ident" id="7755117"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7755119">.</span><span class="ident" id="7755120"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span><span class="op" id="7755127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7755130">func</span>&nbsp;<span class="op" id="7755135">(</span><span class="ident" id="7755136">s</span>&nbsp;<span class="op" id="7755138">*</span><span class="ident" id="7755139"><a href="/gostd/mime/multipart/multipart_test.go.html#7755094">slowReader</a></span><span class="op" id="7755149">)</span>&nbsp;<span class="ident" id="7755151">Read</span><span class="op" id="7755155">(</span><span class="ident" id="7755156">p</span>&nbsp;<span class="op" id="7755158">[</span><span class="op" id="7755159">]</span><span class="builtintype" id="7755160">byte</span><span class="op" id="7755164">)</span>&nbsp;<span class="op" id="7755166">(</span><span class="builtintype" id="7755167">int</span><span class="op" id="7755170">,</span>&nbsp;<span class="builtintype" id="7755172">error</span><span class="op" id="7755177">)</span>&nbsp;<span class="op" id="7755179">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7755182">if</span>&nbsp;<span class="builtinfunc" id="7755185">len</span><span class="op" id="7755188">(</span><span class="ident" id="7755189"><a href="/gostd/mime/multipart/multipart_test.go.html#7755156">p</a></span><span class="op" id="7755190">)</span>&nbsp;<span class="op" id="7755192">==</span>&nbsp;<span class="num" id="7755195">0</span>&nbsp;<span class="op" id="7755197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7755201">return</span>&nbsp;<span class="ident" id="7755208"><a href="/gostd/mime/multipart/multipart_test.go.html#7755136">s</a></span><span class="op" id="7755209">.</span><span class="ident" id="7755210"><a href="/gostd/mime/multipart/multipart_test.go.html#7755115">r</a></span><span class="op" id="7755211">.</span><span class="ident" id="7755212"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7755216">(</span><span class="ident" id="7755217"><a href="/gostd/mime/multipart/multipart_test.go.html#7755156">p</a></span><span class="op" id="7755218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7755221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7755224">return</span>&nbsp;<span class="ident" id="7755231"><a href="/gostd/mime/multipart/multipart_test.go.html#7755136">s</a></span><span class="op" id="7755232">.</span><span class="ident" id="7755233"><a href="/gostd/mime/multipart/multipart_test.go.html#7755115">r</a></span><span class="op" id="7755234">.</span><span class="ident" id="7755235"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7755239">(</span><span class="ident" id="7755240"><a href="/gostd/mime/multipart/multipart_test.go.html#7755156">p</a></span><span class="op" id="7755241">[</span><span class="op" id="7755242">:</span><span class="num" id="7755243">1</span><span class="op" id="7755244">]</span><span class="op" id="7755245">)</span><br>
<span class="lineno"></span><span class="op" id="7755247">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="7755250">func</span>&nbsp;<span class="ident" id="7755255">TestLineContinuation</span><span class="op" id="7755275">(</span><span class="ident" id="7755276">t</span>&nbsp;<span class="op" id="7755278">*</span><span class="ident" id="7755279"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7755286">.</span><span class="ident" id="7755287"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7755288">)</span>&nbsp;<span class="op" id="7755290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7755293">//&nbsp;This&nbsp;body,&nbsp;extracted&nbsp;from&nbsp;an&nbsp;email,&nbsp;contains&nbsp;headers&nbsp;that&nbsp;span&nbsp;multiple</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7755369">//&nbsp;lines.</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7755381">//&nbsp;TODO:&nbsp;The&nbsp;original&nbsp;mail&nbsp;ended&nbsp;with&nbsp;a&nbsp;double-newline&nbsp;before&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7755448">//&nbsp;final&nbsp;delimiter;&nbsp;this&nbsp;was&nbsp;manually&nbsp;edited&nbsp;to&nbsp;use&nbsp;a&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7755509">testBody</span>&nbsp;<span class="op" id="7755518">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7755523">&#34;\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;7bit\nContent-Type:&nbsp;text/plain;\n\tcharset=US-ASCII;\n\tdelsp=yes;\n\tformat=flowed\n\nI&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;happening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).\n\n\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;quoted-printable\nContent-Type:&nbsp;text/html;\n\tcharset=ISO-8859-1\n\n&lt;HTML&gt;&lt;BODY&gt;I&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;=\nhappening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).=A0&nbsp;But&nbsp;I&nbsp;built&nbsp;it&nbsp;with&nbsp;XCode&nbsp;=\n2.0.&lt;/BODY&gt;&lt;/=\nHTML&gt;=\n\r\n--Apple-Mail-2-292336769--\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756019">r</span>&nbsp;<span class="op" id="7756021">:=</span>&nbsp;<span class="ident" id="7756024"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7756033">(</span><span class="ident" id="7756034"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7756041">.</span><span class="ident" id="7756042"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7756051">(</span><span class="ident" id="7756052"><a href="/gostd/mime/multipart/multipart_test.go.html#7755509">testBody</a></span><span class="op" id="7756060">)</span><span class="op" id="7756061">,</span>&nbsp;<span class="string" id="7756063">&#34;Apple-Mail-2-292336769&#34;</span><span class="op" id="7756087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7756091">for</span>&nbsp;<span class="ident" id="7756095">i</span>&nbsp;<span class="op" id="7756097">:=</span>&nbsp;<span class="num" id="7756100">0</span><span class="op" id="7756101">;</span>&nbsp;<span class="ident" id="7756103"><a href="/gostd/mime/multipart/multipart_test.go.html#7756095">i</a></span>&nbsp;<span class="op" id="7756105">&lt;</span>&nbsp;<span class="num" id="7756107">2</span><span class="op" id="7756108">;</span>&nbsp;<span class="ident" id="7756110"><a href="/gostd/mime/multipart/multipart_test.go.html#7756095">i</a></span><span class="op" id="7756111">++</span>&nbsp;<span class="op" id="7756114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756118">part</span><span class="op" id="7756122">,</span>&nbsp;<span class="ident" id="7756124">err</span>&nbsp;<span class="op" id="7756128">:=</span>&nbsp;<span class="ident" id="7756131"><a href="/gostd/mime/multipart/multipart_test.go.html#7756019">r</a></span><span class="op" id="7756132">.</span><span class="ident" id="7756133"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7756141">(</span><span class="op" id="7756142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7756146">if</span>&nbsp;<span class="ident" id="7756149"><a href="/gostd/mime/multipart/multipart_test.go.html#7756124">err</a></span>&nbsp;<span class="op" id="7756153">!=</span>&nbsp;<span class="builtintype" id="7756156">nil</span>&nbsp;<span class="op" id="7756160">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756165"><a href="/gostd/mime/multipart/multipart_test.go.html#7755276">t</a></span><span class="op" id="7756166">.</span><span class="ident" id="7756167"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7756173">(</span><span class="string" id="7756174">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="7756193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7756197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7756201">var</span>&nbsp;<span class="ident" id="7756205">buf</span>&nbsp;<span class="ident" id="7756209"><a href="/gostd/mime/multipart/multipart_test.go.html#7747702">bytes</a></span><span class="op" id="7756214">.</span><span class="ident" id="7756215"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756224">n</span><span class="op" id="7756225">,</span>&nbsp;<span class="ident" id="7756227"><a href="/gostd/mime/multipart/multipart_test.go.html#7756124">err</a></span>&nbsp;<span class="op" id="7756231">:=</span>&nbsp;<span class="ident" id="7756234"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7756236">.</span><span class="ident" id="7756237"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7756241">(</span><span class="op" id="7756242">&amp;</span><span class="ident" id="7756243"><a href="/gostd/mime/multipart/multipart_test.go.html#7756205">buf</a></span><span class="op" id="7756246">,</span>&nbsp;<span class="ident" id="7756248"><a href="/gostd/mime/multipart/multipart_test.go.html#7756118">part</a></span><span class="op" id="7756252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7756256">if</span>&nbsp;<span class="ident" id="7756259"><a href="/gostd/mime/multipart/multipart_test.go.html#7756124">err</a></span>&nbsp;<span class="op" id="7756263">!=</span>&nbsp;<span class="builtintype" id="7756266">nil</span>&nbsp;<span class="op" id="7756270">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756275"><a href="/gostd/mime/multipart/multipart_test.go.html#7755276">t</a></span><span class="op" id="7756276">.</span><span class="ident" id="7756277"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7756283">(</span><span class="string" id="7756284">&#34;error&nbsp;reading&nbsp;part:&nbsp;%v\nread&nbsp;so&nbsp;far:&nbsp;%q&#34;</span><span class="op" id="7756325">,</span>&nbsp;<span class="ident" id="7756327"><a href="/gostd/mime/multipart/multipart_test.go.html#7756124">err</a></span><span class="op" id="7756330">,</span>&nbsp;<span class="ident" id="7756332"><a href="/gostd/mime/multipart/multipart_test.go.html#7756205">buf</a></span><span class="op" id="7756335">.</span><span class="ident" id="7756336"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7756342">(</span><span class="op" id="7756343">)</span><span class="op" id="7756344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7756348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7756352">if</span>&nbsp;<span class="ident" id="7756355"><a href="/gostd/mime/multipart/multipart_test.go.html#7756224">n</a></span>&nbsp;<span class="op" id="7756357">&lt;=</span>&nbsp;<span class="num" id="7756360">0</span>&nbsp;<span class="op" id="7756362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756367"><a href="/gostd/mime/multipart/multipart_test.go.html#7755276">t</a></span><span class="op" id="7756368">.</span><span class="ident" id="7756369"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7756375">(</span><span class="string" id="7756376">&#34;read&nbsp;%d&nbsp;bytes;&nbsp;expected&nbsp;&gt;0&#34;</span><span class="op" id="7756404">,</span>&nbsp;<span class="ident" id="7756406"><a href="/gostd/mime/multipart/multipart_test.go.html#7756224">n</a></span><span class="op" id="7756407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7756411">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7756414">}</span><br>
<span class="lineno"></span><span class="op" id="7756416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7756419">func</span>&nbsp;<span class="ident" id="7756424">TestQuotedPrintableEncoding</span><span class="op" id="7756451">(</span><span class="ident" id="7756452">t</span>&nbsp;<span class="op" id="7756454">*</span><span class="ident" id="7756455"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7756462">.</span><span class="ident" id="7756463"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7756464">)</span>&nbsp;<span class="op" id="7756466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7756469">//&nbsp;From&nbsp;http://golang.org/issue/4411</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7756507">body</span>&nbsp;<span class="op" id="7756512">:=</span>&nbsp;<span class="string" id="7756515">&#34;--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=text\r\nContent-Transfer-Encoding:&nbsp;quoted-printable\r\n\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words\r\n--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--0016e68ee29c5d515f04cedf6733--&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757249">r</span>&nbsp;<span class="op" id="7757251">:=</span>&nbsp;<span class="ident" id="7757254"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7757263">(</span><span class="ident" id="7757264"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7757271">.</span><span class="ident" id="7757272"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7757281">(</span><span class="ident" id="7757282"><a href="/gostd/mime/multipart/multipart_test.go.html#7756507">body</a></span><span class="op" id="7757286">)</span><span class="op" id="7757287">,</span>&nbsp;<span class="string" id="7757289">&#34;0016e68ee29c5d515f04cedf6733&#34;</span><span class="op" id="7757319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757322">part</span><span class="op" id="7757326">,</span>&nbsp;<span class="ident" id="7757328">err</span>&nbsp;<span class="op" id="7757332">:=</span>&nbsp;<span class="ident" id="7757335"><a href="/gostd/mime/multipart/multipart_test.go.html#7757249">r</a></span><span class="op" id="7757336">.</span><span class="ident" id="7757337"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7757345">(</span><span class="op" id="7757346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7757349">if</span>&nbsp;<span class="ident" id="7757352"><a href="/gostd/mime/multipart/multipart_test.go.html#7757328">err</a></span>&nbsp;<span class="op" id="7757356">!=</span>&nbsp;<span class="builtintype" id="7757359">nil</span>&nbsp;<span class="op" id="7757363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757367"><a href="/gostd/mime/multipart/multipart_test.go.html#7756452">t</a></span><span class="op" id="7757368">.</span><span class="ident" id="7757369"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7757374">(</span><span class="ident" id="7757375"><a href="/gostd/mime/multipart/multipart_test.go.html#7757328">err</a></span><span class="op" id="7757378">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7757381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7757384">if</span>&nbsp;<span class="ident" id="7757387">te</span><span class="op" id="7757389">,</span>&nbsp;<span class="ident" id="7757391">ok</span>&nbsp;<span class="op" id="7757394">:=</span>&nbsp;<span class="ident" id="7757397"><a href="/gostd/mime/multipart/multipart_test.go.html#7757322">part</a></span><span class="op" id="7757401">.</span><span class="ident" id="7757402"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7757408">[</span><span class="string" id="7757409">&#34;Content-Transfer-Encoding&#34;</span><span class="op" id="7757436">]</span><span class="op" id="7757437">;</span>&nbsp;<span class="ident" id="7757439"><a href="/gostd/mime/multipart/multipart_test.go.html#7757391">ok</a></span>&nbsp;<span class="op" id="7757442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757446"><a href="/gostd/mime/multipart/multipart_test.go.html#7756452">t</a></span><span class="op" id="7757447">.</span><span class="ident" id="7757448"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7757454">(</span><span class="string" id="7757455">&#34;unexpected&nbsp;Content-Transfer-Encoding&nbsp;of&nbsp;%q&#34;</span><span class="op" id="7757499">,</span>&nbsp;<span class="ident" id="7757501"><a href="/gostd/mime/multipart/multipart_test.go.html#7757387">te</a></span><span class="op" id="7757503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7757506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7757509">var</span>&nbsp;<span class="ident" id="7757513">buf</span>&nbsp;<span class="ident" id="7757517"><a href="/gostd/mime/multipart/multipart_test.go.html#7747702">bytes</a></span><span class="op" id="7757522">.</span><span class="ident" id="7757523"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757531">_</span><span class="op" id="7757532">,</span>&nbsp;<span class="ident" id="7757534"><a href="/gostd/mime/multipart/multipart_test.go.html#7757328">err</a></span>&nbsp;<span class="op" id="7757538">=</span>&nbsp;<span class="ident" id="7757540"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7757542">.</span><span class="ident" id="7757543"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="7757547">(</span><span class="op" id="7757548">&amp;</span><span class="ident" id="7757549"><a href="/gostd/mime/multipart/multipart_test.go.html#7757513">buf</a></span><span class="op" id="7757552">,</span>&nbsp;<span class="ident" id="7757554"><a href="/gostd/mime/multipart/multipart_test.go.html#7757322">part</a></span><span class="op" id="7757558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7757561">if</span>&nbsp;<span class="ident" id="7757564"><a href="/gostd/mime/multipart/multipart_test.go.html#7757328">err</a></span>&nbsp;<span class="op" id="7757568">!=</span>&nbsp;<span class="builtintype" id="7757571">nil</span>&nbsp;<span class="op" id="7757575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757579"><a href="/gostd/mime/multipart/multipart_test.go.html#7756452">t</a></span><span class="op" id="7757580">.</span><span class="ident" id="7757581"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7757586">(</span><span class="ident" id="7757587"><a href="/gostd/mime/multipart/multipart_test.go.html#7757328">err</a></span><span class="op" id="7757590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7757593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757596">got</span>&nbsp;<span class="op" id="7757600">:=</span>&nbsp;<span class="ident" id="7757603"><a href="/gostd/mime/multipart/multipart_test.go.html#7757513">buf</a></span><span class="op" id="7757606">.</span><span class="ident" id="7757607"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7757613">(</span><span class="op" id="7757614">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7757617">want</span>&nbsp;<span class="op" id="7757622">:=</span>&nbsp;<span class="string" id="7757625">&#34;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7757982">if</span>&nbsp;<span class="ident" id="7757985"><a href="/gostd/mime/multipart/multipart_test.go.html#7757596">got</a></span>&nbsp;<span class="op" id="7757989">!=</span>&nbsp;<span class="ident" id="7757992"><a href="/gostd/mime/multipart/multipart_test.go.html#7757617">want</a></span>&nbsp;<span class="op" id="7757997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758001"><a href="/gostd/mime/multipart/multipart_test.go.html#7756452">t</a></span><span class="op" id="7758002">.</span><span class="ident" id="7758003"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7758009">(</span><span class="string" id="7758010">&#34;wrong&nbsp;part&nbsp;value:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7758049">,</span>&nbsp;<span class="ident" id="7758051"><a href="/gostd/mime/multipart/multipart_test.go.html#7757596">got</a></span><span class="op" id="7758054">,</span>&nbsp;<span class="ident" id="7758056"><a href="/gostd/mime/multipart/multipart_test.go.html#7757617">want</a></span><span class="op" id="7758060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758063">}</span><br>
<span class="lineno"></span><span class="op" id="7758065">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="comment" id="7758068">//&nbsp;Test&nbsp;parsing&nbsp;an&nbsp;image&nbsp;attachment&nbsp;from&nbsp;gmail,&nbsp;which&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="7758141">func</span>&nbsp;<span class="ident" id="7758146">TestNested</span><span class="op" id="7758156">(</span><span class="ident" id="7758157">t</span>&nbsp;<span class="op" id="7758159">*</span><span class="ident" id="7758160"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7758167">.</span><span class="ident" id="7758168"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7758169">)</span>&nbsp;<span class="op" id="7758171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7758174">//&nbsp;nested-mime&nbsp;is&nbsp;the&nbsp;body&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart/mixed&nbsp;email</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7758234">//&nbsp;with&nbsp;boundary&nbsp;e89a8ff1c1e83553e304be640612</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758281">f</span><span class="op" id="7758282">,</span>&nbsp;<span class="ident" id="7758284">err</span>&nbsp;<span class="op" id="7758288">:=</span>&nbsp;<span class="ident" id="7758291"><a href="/gostd/mime/multipart/multipart_test.go.html#7747771">os</a></span><span class="op" id="7758293">.</span><span class="ident" id="7758294"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="7758298">(</span><span class="string" id="7758299">&#34;testdata/nested-mime&#34;</span><span class="op" id="7758321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758324">if</span>&nbsp;<span class="ident" id="7758327"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758331">!=</span>&nbsp;<span class="builtintype" id="7758334">nil</span>&nbsp;<span class="op" id="7758338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758342"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7758343">.</span><span class="ident" id="7758344"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7758349">(</span><span class="ident" id="7758350"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7758353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758359">defer</span>&nbsp;<span class="ident" id="7758365"><a href="/gostd/mime/multipart/multipart_test.go.html#7758281">f</a></span><span class="op" id="7758366">.</span><span class="ident" id="7758367"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7758372">(</span><span class="op" id="7758373">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758376">mr</span>&nbsp;<span class="op" id="7758379">:=</span>&nbsp;<span class="ident" id="7758382"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7758391">(</span><span class="ident" id="7758392"><a href="/gostd/mime/multipart/multipart_test.go.html#7758281">f</a></span><span class="op" id="7758393">,</span>&nbsp;<span class="string" id="7758395">&#34;e89a8ff1c1e83553e304be640612&#34;</span><span class="op" id="7758425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758428">p</span><span class="op" id="7758429">,</span>&nbsp;<span class="ident" id="7758431"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758435">:=</span>&nbsp;<span class="ident" id="7758438"><a href="/gostd/mime/multipart/multipart_test.go.html#7758376">mr</a></span><span class="op" id="7758440">.</span><span class="ident" id="7758441"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7758449">(</span><span class="op" id="7758450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758453">if</span>&nbsp;<span class="ident" id="7758456"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758460">!=</span>&nbsp;<span class="builtintype" id="7758463">nil</span>&nbsp;<span class="op" id="7758467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758471"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7758472">.</span><span class="ident" id="7758473"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7758479">(</span><span class="string" id="7758480">&#34;error&nbsp;reading&nbsp;first&nbsp;section&nbsp;(alternative):&nbsp;%v&#34;</span><span class="op" id="7758527">,</span>&nbsp;<span class="ident" id="7758529"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7758532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758535">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7758539">//&nbsp;Read&nbsp;the&nbsp;inner&nbsp;text/plain&nbsp;and&nbsp;text/html&nbsp;sections&nbsp;of&nbsp;the&nbsp;multipart/alternative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758622">mr2</span>&nbsp;<span class="op" id="7758626">:=</span>&nbsp;<span class="ident" id="7758629"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7758638">(</span><span class="ident" id="7758639"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7758640">,</span>&nbsp;<span class="string" id="7758642">&#34;e89a8ff1c1e83553e004be640610&#34;</span><span class="op" id="7758672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758675"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7758676">,</span>&nbsp;<span class="ident" id="7758678"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758682">=</span>&nbsp;<span class="ident" id="7758684"><a href="/gostd/mime/multipart/multipart_test.go.html#7758622">mr2</a></span><span class="op" id="7758687">.</span><span class="ident" id="7758688"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7758696">(</span><span class="op" id="7758697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758700">if</span>&nbsp;<span class="ident" id="7758703"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758707">!=</span>&nbsp;<span class="builtintype" id="7758710">nil</span>&nbsp;<span class="op" id="7758714">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758718"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7758719">.</span><span class="ident" id="7758720"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7758726">(</span><span class="string" id="7758727">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7758756">,</span>&nbsp;<span class="ident" id="7758758"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7758761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758767">if</span>&nbsp;<span class="ident" id="7758770">b</span><span class="op" id="7758771">,</span>&nbsp;<span class="ident" id="7758773">err</span>&nbsp;<span class="op" id="7758777">:=</span>&nbsp;<span class="ident" id="7758780"><a href="/gostd/mime/multipart/multipart_test.go.html#7747741">ioutil</a></span><span class="op" id="7758786">.</span><span class="ident" id="7758787"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7758794">(</span><span class="ident" id="7758795"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7758796">)</span><span class="op" id="7758797">;</span>&nbsp;<span class="builtintype" id="7758799">string</span><span class="op" id="7758805">(</span><span class="ident" id="7758806"><a href="/gostd/mime/multipart/multipart_test.go.html#7758770">b</a></span><span class="op" id="7758807">)</span>&nbsp;<span class="op" id="7758809">!=</span>&nbsp;<span class="string" id="7758812">&#34;*body*\r\n&#34;</span>&nbsp;<span class="op" id="7758825">||</span>&nbsp;<span class="ident" id="7758828"><a href="/gostd/mime/multipart/multipart_test.go.html#7758773">err</a></span>&nbsp;<span class="op" id="7758832">!=</span>&nbsp;<span class="builtintype" id="7758835">nil</span>&nbsp;<span class="op" id="7758839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758843"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7758844">.</span><span class="ident" id="7758845"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7758851">(</span><span class="string" id="7758852">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7758889">,</span>&nbsp;<span class="ident" id="7758891"><a href="/gostd/mime/multipart/multipart_test.go.html#7758770">b</a></span><span class="op" id="7758892">,</span>&nbsp;<span class="ident" id="7758894"><a href="/gostd/mime/multipart/multipart_test.go.html#7758773">err</a></span><span class="op" id="7758897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758900">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758903"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7758904">,</span>&nbsp;<span class="ident" id="7758906"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758910">=</span>&nbsp;<span class="ident" id="7758912"><a href="/gostd/mime/multipart/multipart_test.go.html#7758622">mr2</a></span><span class="op" id="7758915">.</span><span class="ident" id="7758916"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7758924">(</span><span class="op" id="7758925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758928">if</span>&nbsp;<span class="ident" id="7758931"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7758935">!=</span>&nbsp;<span class="builtintype" id="7758938">nil</span>&nbsp;<span class="op" id="7758942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7758946"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7758947">.</span><span class="ident" id="7758948"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7758954">(</span><span class="string" id="7758955">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7758983">,</span>&nbsp;<span class="ident" id="7758985"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7758988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7758991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7758994">if</span>&nbsp;<span class="ident" id="7758997">b</span><span class="op" id="7758998">,</span>&nbsp;<span class="ident" id="7759000">err</span>&nbsp;<span class="op" id="7759004">:=</span>&nbsp;<span class="ident" id="7759007"><a href="/gostd/mime/multipart/multipart_test.go.html#7747741">ioutil</a></span><span class="op" id="7759013">.</span><span class="ident" id="7759014"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7759021">(</span><span class="ident" id="7759022"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7759023">)</span><span class="op" id="7759024">;</span>&nbsp;<span class="builtintype" id="7759026">string</span><span class="op" id="7759032">(</span><span class="ident" id="7759033"><a href="/gostd/mime/multipart/multipart_test.go.html#7758997">b</a></span><span class="op" id="7759034">)</span>&nbsp;<span class="op" id="7759036">!=</span>&nbsp;<span class="string" id="7759039">&#34;&lt;b&gt;body&lt;/b&gt;\r\n&#34;</span>&nbsp;<span class="op" id="7759057">||</span>&nbsp;<span class="ident" id="7759060"><a href="/gostd/mime/multipart/multipart_test.go.html#7759000">err</a></span>&nbsp;<span class="op" id="7759064">!=</span>&nbsp;<span class="builtintype" id="7759067">nil</span>&nbsp;<span class="op" id="7759071">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759075"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7759076">.</span><span class="ident" id="7759077"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7759083">(</span><span class="string" id="7759084">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7759120">,</span>&nbsp;<span class="ident" id="7759122"><a href="/gostd/mime/multipart/multipart_test.go.html#7758997">b</a></span><span class="op" id="7759123">,</span>&nbsp;<span class="ident" id="7759125"><a href="/gostd/mime/multipart/multipart_test.go.html#7759000">err</a></span><span class="op" id="7759128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759135"><a href="/gostd/mime/multipart/multipart_test.go.html#7758428">p</a></span><span class="op" id="7759136">,</span>&nbsp;<span class="ident" id="7759138"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759142">=</span>&nbsp;<span class="ident" id="7759144"><a href="/gostd/mime/multipart/multipart_test.go.html#7758622">mr2</a></span><span class="op" id="7759147">.</span><span class="ident" id="7759148"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7759156">(</span><span class="op" id="7759157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7759160">if</span>&nbsp;<span class="ident" id="7759163"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759167">!=</span>&nbsp;<span class="ident" id="7759170"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7759172">.</span><span class="ident" id="7759173"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7759177">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759181"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7759182">.</span><span class="ident" id="7759183"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7759189">(</span><span class="string" id="7759190">&#34;final&nbsp;inner&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="7759230">,</span>&nbsp;<span class="ident" id="7759232"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7759235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7759242">//&nbsp;Back&nbsp;to&nbsp;the&nbsp;outer&nbsp;multipart/mixed,&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759311">_</span><span class="op" id="7759312">,</span>&nbsp;<span class="ident" id="7759314"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759318">=</span>&nbsp;<span class="ident" id="7759320"><a href="/gostd/mime/multipart/multipart_test.go.html#7758376">mr</a></span><span class="op" id="7759322">.</span><span class="ident" id="7759323"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7759331">(</span><span class="op" id="7759332">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7759335">if</span>&nbsp;<span class="ident" id="7759338"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759342">!=</span>&nbsp;<span class="builtintype" id="7759345">nil</span>&nbsp;<span class="op" id="7759349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759353"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7759354">.</span><span class="ident" id="7759355"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7759361">(</span><span class="string" id="7759362">&#34;error&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment&nbsp;at&nbsp;the&nbsp;end:&nbsp;%v&#34;</span><span class="op" id="7759413">,</span>&nbsp;<span class="ident" id="7759415"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7759418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759425">_</span><span class="op" id="7759426">,</span>&nbsp;<span class="ident" id="7759428"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759432">=</span>&nbsp;<span class="ident" id="7759434"><a href="/gostd/mime/multipart/multipart_test.go.html#7758376">mr</a></span><span class="op" id="7759436">.</span><span class="ident" id="7759437"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7759445">(</span><span class="op" id="7759446">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7759449">if</span>&nbsp;<span class="ident" id="7759452"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span>&nbsp;<span class="op" id="7759456">!=</span>&nbsp;<span class="ident" id="7759459"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7759461">.</span><span class="ident" id="7759462"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7759466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759470"><a href="/gostd/mime/multipart/multipart_test.go.html#7758157">t</a></span><span class="op" id="7759471">.</span><span class="ident" id="7759472"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7759478">(</span><span class="string" id="7759479">&#34;final&nbsp;outer&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="7759519">,</span>&nbsp;<span class="ident" id="7759521"><a href="/gostd/mime/multipart/multipart_test.go.html#7758284">err</a></span><span class="op" id="7759524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759527">}</span><br>
<span class="lineno"></span><span class="op" id="7759529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span><span class="keyword" id="7759532">type</span>&nbsp;<span class="ident" id="7759537">headerBody</span>&nbsp;<span class="keyword" id="7759548">struct</span>&nbsp;<span class="op" id="7759555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759558">header</span>&nbsp;<span class="ident" id="7759565"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7759574">.</span><span class="ident" id="7759575"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759587">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7759594">string</span><br>
<span class="lineno"></span><span class="op" id="7759601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="keyword" id="7759604">func</span>&nbsp;<span class="ident" id="7759609">formData</span><span class="op" id="7759617">(</span><span class="ident" id="7759618">key</span><span class="op" id="7759621">,</span>&nbsp;<span class="ident" id="7759623">value</span>&nbsp;<span class="builtintype" id="7759629">string</span><span class="op" id="7759635">)</span>&nbsp;<span class="ident" id="7759637"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span>&nbsp;<span class="op" id="7759648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7759651">return</span>&nbsp;<span class="ident" id="7759658"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7759668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759672"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7759681">.</span><span class="ident" id="7759682"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7759692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7759697">&#34;Content-Type&#34;</span><span class="op" id="7759711">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759720">{</span><span class="string" id="7759721">&#34;text/plain;&nbsp;charset=ISO-8859-1&#34;</span><span class="op" id="7759753">}</span><span class="op" id="7759754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7759759">&#34;Content-Disposition&#34;</span><span class="op" id="7759780">:</span>&nbsp;<span class="op" id="7759782">{</span><span class="string" id="7759783">&#34;form-data;&nbsp;name=&#34;</span>&nbsp;<span class="op" id="7759802">+</span>&nbsp;<span class="ident" id="7759804"><a href="/gostd/mime/multipart/multipart_test.go.html#7759618">key</a></span><span class="op" id="7759807">}</span><span class="op" id="7759808">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759812">}</span><span class="op" id="7759813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759817"><a href="/gostd/mime/multipart/multipart_test.go.html#7759623">value</a></span><span class="op" id="7759822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759825">}</span><br>
<span class="lineno"></span><span class="op" id="7759827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="7759830">type</span>&nbsp;<span class="ident" id="7759835">parseTest</span>&nbsp;<span class="keyword" id="7759845">struct</span>&nbsp;<span class="op" id="7759852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759855">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7759863">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759871">in</span><span class="op" id="7759873">,</span>&nbsp;<span class="ident" id="7759875">sep</span>&nbsp;<span class="builtintype" id="7759879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7759887">want</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7759895">[</span><span class="op" id="7759896">]</span><span class="ident" id="7759897"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><br>
<span class="lineno"></span><span class="op" id="7759908">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span><span class="keyword" id="7759911">var</span>&nbsp;<span class="ident" id="7759915">parseTests</span>&nbsp;<span class="op" id="7759926">=</span>&nbsp;<span class="op" id="7759928">[</span><span class="op" id="7759929">]</span><span class="ident" id="7759930"><a href="/gostd/mime/multipart/multipart_test.go.html#7759835">parseTest</a></span><span class="op" id="7759939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7759942">//&nbsp;Actual&nbsp;body&nbsp;from&nbsp;App&nbsp;Engine&nbsp;on&nbsp;a&nbsp;blob&nbsp;upload.&nbsp;The&nbsp;final&nbsp;part&nbsp;(the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7760012">//&nbsp;Content-Type:&nbsp;message/external-body)&nbsp;is&nbsp;what&nbsp;App&nbsp;Engine&nbsp;replaces</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7760081">//&nbsp;the&nbsp;uploaded&nbsp;file&nbsp;with.&nbsp;&nbsp;The&nbsp;other&nbsp;form&nbsp;fields&nbsp;(prefixed&nbsp;with</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7760147">//&nbsp;&#34;other&#34;&nbsp;in&nbsp;their&nbsp;form-data&nbsp;name)&nbsp;are&nbsp;unchanged.&nbsp;&nbsp;A&nbsp;bug&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7760210">//&nbsp;reported&nbsp;with&nbsp;blob&nbsp;uploads&nbsp;failing&nbsp;when&nbsp;the&nbsp;other&nbsp;fields&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7760276">//&nbsp;empty.&nbsp;This&nbsp;was&nbsp;the&nbsp;MIME&nbsp;POST&nbsp;body&nbsp;that&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7760339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7760343"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7760347">:</span>&nbsp;<span class="string" id="7760349">&#34;App&nbsp;Engine&nbsp;post&#34;</span><span class="op" id="7760366">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7760370"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7760373">:</span>&nbsp;&nbsp;<span class="string" id="7760376">&#34;00151757727e9583fd04bfbca4c6&#34;</span><span class="op" id="7760406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7760410"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7760412">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7760416">&#34;--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty1\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo1\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo2\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty2\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\nContent-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n\r\n--00151757727e9583fd04bfbca4c6--&#34;</span><span class="op" id="7762324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762328"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7762332">:</span>&nbsp;<span class="op" id="7762334">[</span><span class="op" id="7762335">]</span><span class="ident" id="7762336"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7762346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762351"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762359">(</span><span class="string" id="7762360">&#34;otherEmpty1&#34;</span><span class="op" id="7762373">,</span>&nbsp;<span class="string" id="7762375">&#34;&#34;</span><span class="op" id="7762377">)</span><span class="op" id="7762378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762383"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762391">(</span><span class="string" id="7762392">&#34;otherFoo1&#34;</span><span class="op" id="7762403">,</span>&nbsp;<span class="string" id="7762405">&#34;foo&#34;</span><span class="op" id="7762410">)</span><span class="op" id="7762411">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762416"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762424">(</span><span class="string" id="7762425">&#34;otherFoo2&#34;</span><span class="op" id="7762436">,</span>&nbsp;<span class="string" id="7762438">&#34;foo&#34;</span><span class="op" id="7762443">)</span><span class="op" id="7762444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762449"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762457">(</span><span class="string" id="7762458">&#34;otherEmpty2&#34;</span><span class="op" id="7762471">,</span>&nbsp;<span class="string" id="7762473">&#34;&#34;</span><span class="op" id="7762475">)</span><span class="op" id="7762476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762481"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762489">(</span><span class="string" id="7762490">&#34;otherRepeatFoo&#34;</span><span class="op" id="7762506">,</span>&nbsp;<span class="string" id="7762508">&#34;foo&#34;</span><span class="op" id="7762513">)</span><span class="op" id="7762514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762519"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762527">(</span><span class="string" id="7762528">&#34;otherRepeatFoo&#34;</span><span class="op" id="7762544">,</span>&nbsp;<span class="string" id="7762546">&#34;foo&#34;</span><span class="op" id="7762551">)</span><span class="op" id="7762552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762557"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762565">(</span><span class="string" id="7762566">&#34;otherRepeatEmpty&#34;</span><span class="op" id="7762584">,</span>&nbsp;<span class="string" id="7762586">&#34;&#34;</span><span class="op" id="7762588">)</span><span class="op" id="7762589">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762594"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762602">(</span><span class="string" id="7762603">&#34;otherRepeatEmpty&#34;</span><span class="op" id="7762621">,</span>&nbsp;<span class="string" id="7762623">&#34;&#34;</span><span class="op" id="7762625">)</span><span class="op" id="7762626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7762631"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7762639">(</span><span class="string" id="7762640">&#34;submit&#34;</span><span class="op" id="7762648">,</span>&nbsp;<span class="string" id="7762650">&#34;Submit&#34;</span><span class="op" id="7762658">)</span><span class="op" id="7762659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7762664">{</span><span class="ident" id="7762665"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7762674">.</span><span class="ident" id="7762675"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7762685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7762691">&#34;Content-Type&#34;</span><span class="op" id="7762705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7762714">{</span><span class="string" id="7762715">&#34;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q&#34;</span><span class="op" id="7762931">}</span><span class="op" id="7762932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7762938">&#34;Content-Disposition&#34;</span><span class="op" id="7762959">:</span>&nbsp;<span class="op" id="7762961">{</span><span class="string" id="7762962">&#34;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;&#34;</span><span class="op" id="7763007">}</span><span class="op" id="7763008">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763013">}</span><span class="op" id="7763014">,</span>&nbsp;<span class="string" id="7763016">&#34;Content-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n&#34;</span><span class="op" id="7763263">}</span><span class="op" id="7763264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763268">}</span><span class="op" id="7763269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763272">}</span><span class="op" id="7763273">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7763277">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763353"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7763357">:</span>&nbsp;<span class="string" id="7763359">&#34;single&nbsp;empty&nbsp;part,&nbsp;--boundary&#34;</span><span class="op" id="7763390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763394"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7763397">:</span>&nbsp;&nbsp;<span class="string" id="7763400">&#34;abc&#34;</span><span class="op" id="7763405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763409"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7763411">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7763415">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&#34;</span><span class="op" id="7763449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763453"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7763457">:</span>&nbsp;<span class="op" id="7763459">[</span><span class="op" id="7763460">]</span><span class="ident" id="7763461"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7763471">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763476">{</span><span class="ident" id="7763477"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7763486">.</span><span class="ident" id="7763487"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7763497">{</span><span class="string" id="7763498">&#34;Foo&#34;</span><span class="op" id="7763503">:</span>&nbsp;<span class="op" id="7763505">{</span><span class="string" id="7763506">&#34;bar&#34;</span><span class="op" id="7763511">}</span><span class="op" id="7763512">}</span><span class="op" id="7763513">,</span>&nbsp;<span class="string" id="7763515">&#34;&#34;</span><span class="op" id="7763517">}</span><span class="op" id="7763518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763522">}</span><span class="op" id="7763523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763526">}</span><span class="op" id="7763527">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7763531">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;\r\n--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763611"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7763615">:</span>&nbsp;<span class="string" id="7763617">&#34;single&nbsp;empty&nbsp;part,&nbsp;\r\n--boundary&#34;</span><span class="op" id="7763652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763656"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7763659">:</span>&nbsp;&nbsp;<span class="string" id="7763662">&#34;abc&#34;</span><span class="op" id="7763667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763671"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7763673">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7763677">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n\r\n--abc--&#34;</span><span class="op" id="7763715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763719"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7763723">:</span>&nbsp;<span class="op" id="7763725">[</span><span class="op" id="7763726">]</span><span class="ident" id="7763727"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7763737">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763742">{</span><span class="ident" id="7763743"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7763752">.</span><span class="ident" id="7763753"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7763763">{</span><span class="string" id="7763764">&#34;Foo&#34;</span><span class="op" id="7763769">:</span>&nbsp;<span class="op" id="7763771">{</span><span class="string" id="7763772">&#34;bar&#34;</span><span class="op" id="7763777">}</span><span class="op" id="7763778">}</span><span class="op" id="7763779">,</span>&nbsp;<span class="string" id="7763781">&#34;&#34;</span><span class="op" id="7763783">}</span><span class="op" id="7763784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763788">}</span><span class="op" id="7763789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763792">}</span><span class="op" id="7763793">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7763797">//&nbsp;Final&nbsp;part&nbsp;empty.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763823"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7763827">:</span>&nbsp;<span class="string" id="7763829">&#34;final&nbsp;part&nbsp;empty&#34;</span><span class="op" id="7763847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763851"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7763854">:</span>&nbsp;&nbsp;<span class="string" id="7763857">&#34;abc&#34;</span><span class="op" id="7763862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763866"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7763868">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7763872">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc\r\nFoo2:&nbsp;bar2\r\n\r\n--abc--&#34;</span><span class="op" id="7763933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7763937"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7763941">:</span>&nbsp;<span class="op" id="7763943">[</span><span class="op" id="7763944">]</span><span class="ident" id="7763945"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7763955">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7763960">{</span><span class="ident" id="7763961"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7763970">.</span><span class="ident" id="7763971"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7763981">{</span><span class="string" id="7763982">&#34;Foo&#34;</span><span class="op" id="7763987">:</span>&nbsp;<span class="op" id="7763989">{</span><span class="string" id="7763990">&#34;bar&#34;</span><span class="op" id="7763995">}</span><span class="op" id="7763996">}</span><span class="op" id="7763997">,</span>&nbsp;<span class="string" id="7763999">&#34;&#34;</span><span class="op" id="7764001">}</span><span class="op" id="7764002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764007">{</span><span class="ident" id="7764008"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7764017">.</span><span class="ident" id="7764018"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7764028">{</span><span class="string" id="7764029">&#34;Foo2&#34;</span><span class="op" id="7764035">:</span>&nbsp;<span class="op" id="7764037">{</span><span class="string" id="7764038">&#34;bar2&#34;</span><span class="op" id="7764044">}</span><span class="op" id="7764045">}</span><span class="op" id="7764046">,</span>&nbsp;<span class="string" id="7764048">&#34;&#34;</span><span class="op" id="7764050">}</span><span class="op" id="7764051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764055">}</span><span class="op" id="7764056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764059">}</span><span class="op" id="7764060">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7764064">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;newlines&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764126"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7764130">:</span>&nbsp;<span class="string" id="7764132">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;crlf&#34;</span><span class="op" id="7764160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764164"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7764167">:</span>&nbsp;&nbsp;<span class="string" id="7764170">&#34;abc&#34;</span><span class="op" id="7764175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764179"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7764181">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7764185">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--\r\n&#34;</span><span class="op" id="7764223">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764227"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7764231">:</span>&nbsp;<span class="op" id="7764233">[</span><span class="op" id="7764234">]</span><span class="ident" id="7764235"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7764245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764250">{</span><span class="ident" id="7764251"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7764260">.</span><span class="ident" id="7764261"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7764271">{</span><span class="string" id="7764272">&#34;Foo&#34;</span><span class="op" id="7764277">:</span>&nbsp;<span class="op" id="7764279">{</span><span class="string" id="7764280">&#34;bar&#34;</span><span class="op" id="7764285">}</span><span class="op" id="7764286">}</span><span class="op" id="7764287">,</span>&nbsp;<span class="string" id="7764289">&#34;&#34;</span><span class="op" id="7764291">}</span><span class="op" id="7764292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764296">}</span><span class="op" id="7764297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764300">}</span><span class="op" id="7764301">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7764305">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;lwsp-chars&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764369"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7764373">:</span>&nbsp;<span class="string" id="7764375">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;lwsp&#34;</span><span class="op" id="7764403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764407"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7764410">:</span>&nbsp;&nbsp;<span class="string" id="7764413">&#34;abc&#34;</span><span class="op" id="7764418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764422"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7764424">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7764428">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&nbsp;\t&#34;</span><span class="op" id="7764465">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764469"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7764473">:</span>&nbsp;<span class="op" id="7764475">[</span><span class="op" id="7764476">]</span><span class="ident" id="7764477"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7764487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764492">{</span><span class="ident" id="7764493"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7764502">.</span><span class="ident" id="7764503"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7764513">{</span><span class="string" id="7764514">&#34;Foo&#34;</span><span class="op" id="7764519">:</span>&nbsp;<span class="op" id="7764521">{</span><span class="string" id="7764522">&#34;bar&#34;</span><span class="op" id="7764527">}</span><span class="op" id="7764528">}</span><span class="op" id="7764529">,</span>&nbsp;<span class="string" id="7764531">&#34;&#34;</span><span class="op" id="7764533">}</span><span class="op" id="7764534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764538">}</span><span class="op" id="7764539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764542">}</span><span class="op" id="7764543">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7764547">//&nbsp;No&nbsp;parts&nbsp;(empty&nbsp;form&nbsp;as&nbsp;submitted&nbsp;by&nbsp;Chrome)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764600"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7764604">:</span>&nbsp;<span class="string" id="7764606">&#34;no&nbsp;parts&#34;</span><span class="op" id="7764616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764620"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7764623">:</span>&nbsp;&nbsp;<span class="string" id="7764626">&#34;----WebKitFormBoundaryQfEAfzFOiSemeHfA&#34;</span><span class="op" id="7764666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764670"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7764672">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7764676">&#34;------WebKitFormBoundaryQfEAfzFOiSemeHfA--\r\n&#34;</span><span class="op" id="7764724">,</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764728"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7764732">:</span>&nbsp;<span class="op" id="7764734">[</span><span class="op" id="7764735">]</span><span class="ident" id="7764736"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7764746">{</span><span class="op" id="7764747">}</span><span class="op" id="7764748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764751">}</span><span class="op" id="7764752">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7764756">//&nbsp;Part&nbsp;containing&nbsp;data&nbsp;starting&nbsp;with&nbsp;the&nbsp;boundary,&nbsp;but&nbsp;with&nbsp;additional&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764837">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764841"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7764845">:</span>&nbsp;<span class="string" id="7764847">&#34;fake&nbsp;separator&nbsp;as&nbsp;data&#34;</span><span class="op" id="7764871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764875"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7764878">:</span>&nbsp;&nbsp;<span class="string" id="7764881">&#34;sep&#34;</span><span class="op" id="7764886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764890"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7764892">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7764896">&#34;--sep\r\nFoo:&nbsp;bar\r\n\r\n--sepFAKE\r\n--sep--&#34;</span><span class="op" id="7764943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7764947"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7764951">:</span>&nbsp;<span class="op" id="7764953">[</span><span class="op" id="7764954">]</span><span class="ident" id="7764955"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7764965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7764970">{</span><span class="ident" id="7764971"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7764980">.</span><span class="ident" id="7764981"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7764991">{</span><span class="string" id="7764992">&#34;Foo&#34;</span><span class="op" id="7764997">:</span>&nbsp;<span class="op" id="7764999">{</span><span class="string" id="7765000">&#34;bar&#34;</span><span class="op" id="7765005">}</span><span class="op" id="7765006">}</span><span class="op" id="7765007">,</span>&nbsp;<span class="string" id="7765009">&#34;--sepFAKE&#34;</span><span class="op" id="7765020">}</span><span class="op" id="7765021">,</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765025">}</span><span class="op" id="7765026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765029">}</span><span class="op" id="7765030">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7765034">//&nbsp;Part&nbsp;containing&nbsp;a&nbsp;boundary&nbsp;with&nbsp;whitespace&nbsp;following&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765095">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765099"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7765103">:</span>&nbsp;<span class="string" id="7765105">&#34;boundary&nbsp;with&nbsp;whitespace&#34;</span><span class="op" id="7765131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765135"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7765138">:</span>&nbsp;&nbsp;<span class="string" id="7765141">&#34;sep&#34;</span><span class="op" id="7765146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765150"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7765152">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7765156">&#34;--sep&nbsp;\r\nFoo:&nbsp;bar\r\n\r\ntext\r\n--sep--&#34;</span><span class="op" id="7765199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765203"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7765207">:</span>&nbsp;<span class="op" id="7765209">[</span><span class="op" id="7765210">]</span><span class="ident" id="7765211"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7765221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765226">{</span><span class="ident" id="7765227"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7765236">.</span><span class="ident" id="7765237"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7765247">{</span><span class="string" id="7765248">&#34;Foo&#34;</span><span class="op" id="7765253">:</span>&nbsp;<span class="op" id="7765255">{</span><span class="string" id="7765256">&#34;bar&#34;</span><span class="op" id="7765261">}</span><span class="op" id="7765262">}</span><span class="op" id="7765263">,</span>&nbsp;<span class="string" id="7765265">&#34;text&#34;</span><span class="op" id="7765271">}</span><span class="op" id="7765272">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765276">}</span><span class="op" id="7765277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765280">}</span><span class="op" id="7765281">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7765285">//&nbsp;With&nbsp;ignored&nbsp;leading&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765316">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765320"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7765324">:</span>&nbsp;<span class="string" id="7765326">&#34;leading&nbsp;line&#34;</span><span class="op" id="7765340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765344"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7765347">:</span>&nbsp;&nbsp;<span class="string" id="7765350">&#34;MyBoundary&#34;</span><span class="op" id="7765362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765366"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7765368">:</span>&nbsp;<span class="ident" id="7765370"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7765377">.</span><span class="ident" id="7765378"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="7765385">(</span><span class="string" id="7765386">`This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo:&nbsp;bar<br>
<span class="lineno">560</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>--MyBoundary--`</span><span class="op" id="7765479">,</span>&nbsp;<span class="string" id="7765481">&#34;\n&#34;</span><span class="op" id="7765485">,</span>&nbsp;<span class="string" id="7765487">&#34;\r\n&#34;</span><span class="op" id="7765493">,</span>&nbsp;<span class="op" id="7765495">-</span><span class="num" id="7765496">1</span><span class="op" id="7765497">)</span><span class="op" id="7765498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765502"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7765506">:</span>&nbsp;<span class="op" id="7765508">[</span><span class="op" id="7765509">]</span><span class="ident" id="7765510"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7765520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765525">{</span><span class="ident" id="7765526"><a href="/gostd/mime/multipart/multipart_test.go.html#7747754">textproto</a></span><span class="op" id="7765535">.</span><span class="ident" id="7765536"><a href="/gostd/net/textproto/header.go.html#4328626">MIMEHeader</a></span><span class="op" id="7765546">{</span><span class="string" id="7765547">&#34;Foo&#34;</span><span class="op" id="7765552">:</span>&nbsp;<span class="op" id="7765554">{</span><span class="string" id="7765555">&#34;bar&#34;</span><span class="op" id="7765560">}</span><span class="op" id="7765561">}</span><span class="op" id="7765562">,</span>&nbsp;<span class="string" id="7765564">&#34;&#34;</span><span class="op" id="7765566">}</span><span class="op" id="7765567">,</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765571">}</span><span class="op" id="7765572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765575">}</span><span class="op" id="7765576">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765580"><a href="/gostd/mime/multipart/multipart_test.go.html#7766582">roundTripParseTest</a></span><span class="op" id="7765598">(</span><span class="op" id="7765599">)</span><span class="op" id="7765600">,</span><br>
<span class="lineno"></span><span class="op" id="7765602">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="keyword" id="7765605">func</span>&nbsp;<span class="ident" id="7765610">TestParse</span><span class="op" id="7765619">(</span><span class="ident" id="7765620">t</span>&nbsp;<span class="op" id="7765622">*</span><span class="ident" id="7765623"><a href="/gostd/mime/multipart/multipart_test.go.html#7747799">testing</a></span><span class="op" id="7765630">.</span><span class="ident" id="7765631"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7765632">)</span>&nbsp;<span class="op" id="7765634">{</span><br>
<span class="lineno"></span><span class="ident" id="7765636">Cases</span><span class="op" id="7765641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765644">for</span>&nbsp;<span class="ident" id="7765648">_</span><span class="op" id="7765649">,</span>&nbsp;<span class="ident" id="7765651">tt</span>&nbsp;<span class="op" id="7765654">:=</span>&nbsp;<span class="keyword" id="7765657">range</span>&nbsp;<span class="ident" id="7765663"><a href="/gostd/mime/multipart/multipart_test.go.html#7759915">parseTests</a></span>&nbsp;<span class="op" id="7765674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765678">r</span>&nbsp;<span class="op" id="7765680">:=</span>&nbsp;<span class="ident" id="7765683"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="7765692">(</span><span class="ident" id="7765693"><a href="/gostd/mime/multipart/multipart_test.go.html#7747788">strings</a></span><span class="op" id="7765700">.</span><span class="ident" id="7765701"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7765710">(</span><span class="ident" id="7765711"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7765713">.</span><span class="ident" id="7765714"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span><span class="op" id="7765716">)</span><span class="op" id="7765717">,</span>&nbsp;<span class="ident" id="7765719"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7765721">.</span><span class="ident" id="7765722"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span><span class="op" id="7765725">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765729">got</span>&nbsp;<span class="op" id="7765733">:=</span>&nbsp;<span class="op" id="7765736">[</span><span class="op" id="7765737">]</span><span class="ident" id="7765738"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7765748">{</span><span class="op" id="7765749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765753">for</span>&nbsp;<span class="op" id="7765757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765762">p</span><span class="op" id="7765763">,</span>&nbsp;<span class="ident" id="7765765">err</span>&nbsp;<span class="op" id="7765769">:=</span>&nbsp;<span class="ident" id="7765772"><a href="/gostd/mime/multipart/multipart_test.go.html#7765678">r</a></span><span class="op" id="7765773">.</span><span class="ident" id="7765774"><a href="/gostd/mime/multipart/multipart.go.html#4317068">NextPart</a></span><span class="op" id="7765782">(</span><span class="op" id="7765783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765788">if</span>&nbsp;<span class="ident" id="7765791"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span>&nbsp;<span class="op" id="7765795">==</span>&nbsp;<span class="ident" id="7765798"><a href="/gostd/mime/multipart/multipart_test.go.html#7747735">io</a></span><span class="op" id="7765800">.</span><span class="ident" id="7765801"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7765805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765811">break</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765825">if</span>&nbsp;<span class="ident" id="7765828"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span>&nbsp;<span class="op" id="7765832">!=</span>&nbsp;<span class="builtintype" id="7765835">nil</span>&nbsp;<span class="op" id="7765839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765845"><a href="/gostd/mime/multipart/multipart_test.go.html#7765620">t</a></span><span class="op" id="7765846">.</span><span class="ident" id="7765847"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7765853">(</span><span class="string" id="7765854">&#34;in&nbsp;test&nbsp;%q,&nbsp;NextPart:&nbsp;%v&#34;</span><span class="op" id="7765880">,</span>&nbsp;<span class="ident" id="7765882"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7765884">.</span><span class="ident" id="7765885"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7765889">,</span>&nbsp;<span class="ident" id="7765891"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span><span class="op" id="7765894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765900">continue</span>&nbsp;<span class="ident" id="7765909"><a href="/gostd/mime/multipart/multipart_test.go.html#7765636">Cases</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7765918">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765923">pbody</span><span class="op" id="7765928">,</span>&nbsp;<span class="ident" id="7765930"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span>&nbsp;<span class="op" id="7765934">:=</span>&nbsp;<span class="ident" id="7765937"><a href="/gostd/mime/multipart/multipart_test.go.html#7747741">ioutil</a></span><span class="op" id="7765943">.</span><span class="ident" id="7765944"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7765951">(</span><span class="ident" id="7765952"><a href="/gostd/mime/multipart/multipart_test.go.html#7765762">p</a></span><span class="op" id="7765953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7765958">if</span>&nbsp;<span class="ident" id="7765961"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span>&nbsp;<span class="op" id="7765965">!=</span>&nbsp;<span class="builtintype" id="7765968">nil</span>&nbsp;<span class="op" id="7765972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7765978"><a href="/gostd/mime/multipart/multipart_test.go.html#7765620">t</a></span><span class="op" id="7765979">.</span><span class="ident" id="7765980"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7765986">(</span><span class="string" id="7765987">&#34;in&nbsp;test&nbsp;%q,&nbsp;error&nbsp;reading&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7766023">,</span>&nbsp;<span class="ident" id="7766025"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766027">.</span><span class="ident" id="7766028"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7766032">,</span>&nbsp;<span class="ident" id="7766034"><a href="/gostd/mime/multipart/multipart_test.go.html#7765765">err</a></span><span class="op" id="7766037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766043">continue</span>&nbsp;<span class="ident" id="7766052"><a href="/gostd/mime/multipart/multipart_test.go.html#7765636">Cases</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766061">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766066"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span>&nbsp;<span class="op" id="7766070">=</span>&nbsp;<span class="builtinfunc" id="7766072">append</span><span class="op" id="7766078">(</span><span class="ident" id="7766079"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766082">,</span>&nbsp;<span class="ident" id="7766084"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7766094">{</span><span class="ident" id="7766095"><a href="/gostd/mime/multipart/multipart_test.go.html#7765762">p</a></span><span class="op" id="7766096">.</span><span class="ident" id="7766097"><a href="/gostd/mime/multipart/multipart.go.html#4311887">Header</a></span><span class="op" id="7766103">,</span>&nbsp;<span class="builtintype" id="7766105">string</span><span class="op" id="7766111">(</span><span class="ident" id="7766112"><a href="/gostd/mime/multipart/multipart_test.go.html#7765923">pbody</a></span><span class="op" id="7766117">)</span><span class="op" id="7766118">}</span><span class="op" id="7766119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766127">if</span>&nbsp;<span class="op" id="7766130">!</span><span class="ident" id="7766131"><a href="/gostd/mime/multipart/multipart_test.go.html#7747777">reflect</a></span><span class="op" id="7766138">.</span><span class="ident" id="7766139"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7766148">(</span><span class="ident" id="7766149"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766151">.</span><span class="ident" id="7766152"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7766156">,</span>&nbsp;<span class="ident" id="7766158"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766161">)</span>&nbsp;<span class="op" id="7766163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766168"><a href="/gostd/mime/multipart/multipart_test.go.html#7765620">t</a></span><span class="op" id="7766169">.</span><span class="ident" id="7766170"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7766176">(</span><span class="string" id="7766177">&#34;test&nbsp;%q:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7766207">,</span>&nbsp;<span class="ident" id="7766209"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766211">.</span><span class="ident" id="7766212"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7766216">,</span>&nbsp;<span class="ident" id="7766218"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766221">,</span>&nbsp;<span class="ident" id="7766223"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766225">.</span><span class="ident" id="7766226"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7766230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766235">if</span>&nbsp;<span class="builtinfunc" id="7766238">len</span><span class="op" id="7766241">(</span><span class="ident" id="7766242"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766244">.</span><span class="ident" id="7766245"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7766249">)</span>&nbsp;<span class="op" id="7766251">!=</span>&nbsp;<span class="builtinfunc" id="7766254">len</span><span class="op" id="7766257">(</span><span class="ident" id="7766258"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766261">)</span>&nbsp;<span class="op" id="7766263">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766269"><a href="/gostd/mime/multipart/multipart_test.go.html#7765620">t</a></span><span class="op" id="7766270">.</span><span class="ident" id="7766271"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7766277">(</span><span class="string" id="7766278">&#34;test&nbsp;%q:&nbsp;got&nbsp;%d&nbsp;parts,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7766310">,</span>&nbsp;<span class="ident" id="7766312"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766314">.</span><span class="ident" id="7766315"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7766319">,</span>&nbsp;<span class="builtinfunc" id="7766321">len</span><span class="op" id="7766324">(</span><span class="ident" id="7766325"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766328">)</span><span class="op" id="7766329">,</span>&nbsp;<span class="builtinfunc" id="7766331">len</span><span class="op" id="7766334">(</span><span class="ident" id="7766335"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766337">.</span><span class="ident" id="7766338"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7766342">)</span><span class="op" id="7766343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766348">}</span>&nbsp;<span class="keyword" id="7766350">else</span>&nbsp;<span class="keyword" id="7766355">if</span>&nbsp;<span class="builtinfunc" id="7766358">len</span><span class="op" id="7766361">(</span><span class="ident" id="7766362"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766365">)</span>&nbsp;<span class="op" id="7766367">&gt;</span>&nbsp;<span class="num" id="7766369">1</span>&nbsp;<span class="op" id="7766371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766377">for</span>&nbsp;<span class="ident" id="7766381">pi</span><span class="op" id="7766383">,</span>&nbsp;<span class="ident" id="7766385">wantPart</span>&nbsp;<span class="op" id="7766394">:=</span>&nbsp;<span class="keyword" id="7766397">range</span>&nbsp;<span class="ident" id="7766403"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766405">.</span><span class="ident" id="7766406"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span>&nbsp;<span class="op" id="7766411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766418">if</span>&nbsp;<span class="op" id="7766421">!</span><span class="ident" id="7766422"><a href="/gostd/mime/multipart/multipart_test.go.html#7747777">reflect</a></span><span class="op" id="7766429">.</span><span class="ident" id="7766430"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7766439">(</span><span class="ident" id="7766440"><a href="/gostd/mime/multipart/multipart_test.go.html#7766385">wantPart</a></span><span class="op" id="7766448">,</span>&nbsp;<span class="ident" id="7766450"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766453">[</span><span class="ident" id="7766454"><a href="/gostd/mime/multipart/multipart_test.go.html#7766381">pi</a></span><span class="op" id="7766456">]</span><span class="op" id="7766457">)</span>&nbsp;<span class="op" id="7766459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766467"><a href="/gostd/mime/multipart/multipart_test.go.html#7765620">t</a></span><span class="op" id="7766468">.</span><span class="ident" id="7766469"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7766475">(</span><span class="string" id="7766476">&#34;test&nbsp;%q,&nbsp;part&nbsp;%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7766515">,</span>&nbsp;<span class="ident" id="7766517"><a href="/gostd/mime/multipart/multipart_test.go.html#7765651">tt</a></span><span class="op" id="7766519">.</span><span class="ident" id="7766520"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7766524">,</span>&nbsp;<span class="ident" id="7766526"><a href="/gostd/mime/multipart/multipart_test.go.html#7766381">pi</a></span><span class="op" id="7766528">,</span>&nbsp;<span class="ident" id="7766530"><a href="/gostd/mime/multipart/multipart_test.go.html#7765729">got</a></span><span class="op" id="7766533">[</span><span class="ident" id="7766534"><a href="/gostd/mime/multipart/multipart_test.go.html#7766381">pi</a></span><span class="op" id="7766536">]</span><span class="op" id="7766537">,</span>&nbsp;<span class="ident" id="7766539"><a href="/gostd/mime/multipart/multipart_test.go.html#7766385">wantPart</a></span><span class="op" id="7766547">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766572">}</span><br>
<span class="lineno">605</span><span class="op" id="7766574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7766577">func</span>&nbsp;<span class="ident" id="7766582">roundTripParseTest</span><span class="op" id="7766600">(</span><span class="op" id="7766601">)</span>&nbsp;<span class="ident" id="7766603"><a href="/gostd/mime/multipart/multipart_test.go.html#7759835">parseTest</a></span>&nbsp;<span class="op" id="7766613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766616">t</span>&nbsp;<span class="op" id="7766618">:=</span>&nbsp;<span class="ident" id="7766621"><a href="/gostd/mime/multipart/multipart_test.go.html#7759835">parseTest</a></span><span class="op" id="7766630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766634"><a href="/gostd/mime/multipart/multipart_test.go.html#7759855">name</a></span><span class="op" id="7766638">:</span>&nbsp;<span class="string" id="7766640">&#34;round&nbsp;trip&#34;</span><span class="op" id="7766652">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766656"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span><span class="op" id="7766660">:</span>&nbsp;<span class="op" id="7766662">[</span><span class="op" id="7766663">]</span><span class="ident" id="7766664"><a href="/gostd/mime/multipart/multipart_test.go.html#7759537">headerBody</a></span><span class="op" id="7766674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766679"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7766687">(</span><span class="string" id="7766688">&#34;empty&#34;</span><span class="op" id="7766695">,</span>&nbsp;<span class="string" id="7766697">&#34;&#34;</span><span class="op" id="7766699">)</span><span class="op" id="7766700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766705"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7766713">(</span><span class="string" id="7766714">&#34;lf&#34;</span><span class="op" id="7766718">,</span>&nbsp;<span class="string" id="7766720">&#34;\n&#34;</span><span class="op" id="7766724">)</span><span class="op" id="7766725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766730"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7766738">(</span><span class="string" id="7766739">&#34;cr&#34;</span><span class="op" id="7766743">,</span>&nbsp;<span class="string" id="7766745">&#34;\r&#34;</span><span class="op" id="7766749">)</span><span class="op" id="7766750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766755"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7766763">(</span><span class="string" id="7766764">&#34;crlf&#34;</span><span class="op" id="7766770">,</span>&nbsp;<span class="string" id="7766772">&#34;\r\n&#34;</span><span class="op" id="7766778">)</span><span class="op" id="7766779">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766784"><a href="/gostd/mime/multipart/multipart_test.go.html#7759609">formData</a></span><span class="op" id="7766792">(</span><span class="string" id="7766793">&#34;foo&#34;</span><span class="op" id="7766798">,</span>&nbsp;<span class="string" id="7766800">&#34;bar&#34;</span><span class="op" id="7766805">)</span><span class="op" id="7766806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766810">}</span><span class="op" id="7766811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766817">var</span>&nbsp;<span class="ident" id="7766821">buf</span>&nbsp;<span class="ident" id="7766825"><a href="/gostd/mime/multipart/multipart_test.go.html#7747702">bytes</a></span><span class="op" id="7766830">.</span><span class="ident" id="7766831"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766839">w</span>&nbsp;<span class="op" id="7766841">:=</span>&nbsp;<span class="ident" id="7766844"><a href="/gostd/mime/multipart/writer.go.html#4324179">NewWriter</a></span><span class="op" id="7766853">(</span><span class="op" id="7766854">&amp;</span><span class="ident" id="7766855"><a href="/gostd/mime/multipart/multipart_test.go.html#7766821">buf</a></span><span class="op" id="7766858">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766861">for</span>&nbsp;<span class="ident" id="7766865">_</span><span class="op" id="7766866">,</span>&nbsp;<span class="ident" id="7766868">p</span>&nbsp;<span class="op" id="7766870">:=</span>&nbsp;<span class="keyword" id="7766873">range</span>&nbsp;<span class="ident" id="7766879"><a href="/gostd/mime/multipart/multipart_test.go.html#7766616">t</a></span><span class="op" id="7766880">.</span><span class="ident" id="7766881"><a href="/gostd/mime/multipart/multipart_test.go.html#7759887">want</a></span>&nbsp;<span class="op" id="7766886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766890">pw</span><span class="op" id="7766892">,</span>&nbsp;<span class="ident" id="7766894">err</span>&nbsp;<span class="op" id="7766898">:=</span>&nbsp;<span class="ident" id="7766901"><a href="/gostd/mime/multipart/multipart_test.go.html#7766839">w</a></span><span class="op" id="7766902">.</span><span class="ident" id="7766903"><a href="/gostd/mime/multipart/writer.go.html#4325830">CreatePart</a></span><span class="op" id="7766913">(</span><span class="ident" id="7766914"><a href="/gostd/mime/multipart/multipart_test.go.html#7766868">p</a></span><span class="op" id="7766915">.</span><span class="ident" id="7766916"><a href="/gostd/mime/multipart/multipart_test.go.html#7759558">header</a></span><span class="op" id="7766922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766926">if</span>&nbsp;<span class="ident" id="7766929"><a href="/gostd/mime/multipart/multipart_test.go.html#7766894">err</a></span>&nbsp;<span class="op" id="7766933">!=</span>&nbsp;<span class="builtintype" id="7766936">nil</span>&nbsp;<span class="op" id="7766940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7766945">panic</span><span class="op" id="7766950">(</span><span class="ident" id="7766951"><a href="/gostd/mime/multipart/multipart_test.go.html#7766894">err</a></span><span class="op" id="7766954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7766958">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7766962">_</span><span class="op" id="7766963">,</span>&nbsp;<span class="ident" id="7766965"><a href="/gostd/mime/multipart/multipart_test.go.html#7766894">err</a></span>&nbsp;<span class="op" id="7766969">=</span>&nbsp;<span class="ident" id="7766971"><a href="/gostd/mime/multipart/multipart_test.go.html#7766890">pw</a></span><span class="op" id="7766973">.</span><span class="ident" id="7766974"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7766979">(</span><span class="op" id="7766980">[</span><span class="op" id="7766981">]</span><span class="builtintype" id="7766982">byte</span><span class="op" id="7766986">(</span><span class="ident" id="7766987"><a href="/gostd/mime/multipart/multipart_test.go.html#7766868">p</a></span><span class="op" id="7766988">.</span><span class="ident" id="7766989"><a href="/gostd/mime/multipart/multipart_test.go.html#7759587">body</a></span><span class="op" id="7766993">)</span><span class="op" id="7766994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7766998">if</span>&nbsp;<span class="ident" id="7767001"><a href="/gostd/mime/multipart/multipart_test.go.html#7766894">err</a></span>&nbsp;<span class="op" id="7767005">!=</span>&nbsp;<span class="builtintype" id="7767008">nil</span>&nbsp;<span class="op" id="7767012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7767017">panic</span><span class="op" id="7767022">(</span><span class="ident" id="7767023"><a href="/gostd/mime/multipart/multipart_test.go.html#7766894">err</a></span><span class="op" id="7767026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7767030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7767033">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7767036"><a href="/gostd/mime/multipart/multipart_test.go.html#7766839">w</a></span><span class="op" id="7767037">.</span><span class="ident" id="7767038"><a href="/gostd/mime/multipart/writer.go.html#4327790">Close</a></span><span class="op" id="7767043">(</span><span class="op" id="7767044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7767047"><a href="/gostd/mime/multipart/multipart_test.go.html#7766616">t</a></span><span class="op" id="7767048">.</span><span class="ident" id="7767049"><a href="/gostd/mime/multipart/multipart_test.go.html#7759871">in</a></span>&nbsp;<span class="op" id="7767052">=</span>&nbsp;<span class="ident" id="7767054"><a href="/gostd/mime/multipart/multipart_test.go.html#7766821">buf</a></span><span class="op" id="7767057">.</span><span class="ident" id="7767058"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7767064">(</span><span class="op" id="7767065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7767068"><a href="/gostd/mime/multipart/multipart_test.go.html#7766616">t</a></span><span class="op" id="7767069">.</span><span class="ident" id="7767070"><a href="/gostd/mime/multipart/multipart_test.go.html#7759875">sep</a></span>&nbsp;<span class="op" id="7767074">=</span>&nbsp;<span class="ident" id="7767076"><a href="/gostd/mime/multipart/multipart_test.go.html#7766839">w</a></span><span class="op" id="7767077">.</span><span class="ident" id="7767078"><a href="/gostd/mime/multipart/writer.go.html#4324340">Boundary</a></span><span class="op" id="7767086">(</span><span class="op" id="7767087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7767090">return</span>&nbsp;<span class="ident" id="7767097"><a href="/gostd/mime/multipart/multipart_test.go.html#7766616">t</a></span><br>
<span class="lineno"></span><span class="op" id="7767099">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
