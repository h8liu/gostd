<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6768843">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6768898">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6768952">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6769003">package</span>&nbsp;<span class="ident" id="6769011">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6769018">import</span>&nbsp;<span class="op" id="6769025">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769028">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769037">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769043">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6769053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6769056">func</span>&nbsp;<span class="ident" id="6769061">TestReset</span><span class="op" id="6769070">(</span><span class="ident" id="6769071">t</span>&nbsp;<span class="op" id="6769073">*</span><span class="ident" id="6769074">testing</span><span class="op" id="6769081">.</span><span class="ident" id="6769082">T</span><span class="op" id="6769083">)</span>&nbsp;<span class="op" id="6769085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769088">ss</span>&nbsp;<span class="op" id="6769091">:=</span>&nbsp;<span class="op" id="6769094">[</span><span class="op" id="6769095">]</span><span class="builtintype" id="6769096">string</span><span class="op" id="6769102">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769106">&#34;lorem&nbsp;ipsum&nbsp;izzle&nbsp;fo&nbsp;rizzle&#34;</span><span class="op" id="6769135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769139">&#34;the&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&#34;</span><span class="op" id="6769172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769179">deflated</span>&nbsp;<span class="op" id="6769188">:=</span>&nbsp;<span class="builtinfunc" id="6769191">make</span><span class="op" id="6769195">(</span><span class="op" id="6769196">[</span><span class="op" id="6769197">]</span><span class="ident" id="6769198">bytes</span><span class="op" id="6769203">.</span><span class="ident" id="6769204">Buffer</span><span class="op" id="6769210">,</span>&nbsp;<span class="num" id="6769212">2</span><span class="op" id="6769213">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769216">for</span>&nbsp;<span class="ident" id="6769220">i</span><span class="op" id="6769221">,</span>&nbsp;<span class="ident" id="6769223">s</span>&nbsp;<span class="op" id="6769225">:=</span>&nbsp;<span class="keyword" id="6769228">range</span>&nbsp;<span class="ident" id="6769234">ss</span>&nbsp;<span class="op" id="6769237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769241">w</span><span class="op" id="6769242">,</span>&nbsp;<span class="ident" id="6769244">_</span>&nbsp;<span class="op" id="6769246">:=</span>&nbsp;<span class="ident" id="6769249">NewWriter</span><span class="op" id="6769258">(</span><span class="op" id="6769259">&amp;</span><span class="ident" id="6769260">deflated</span><span class="op" id="6769268">[</span><span class="ident" id="6769269">i</span><span class="op" id="6769270">]</span><span class="op" id="6769271">,</span>&nbsp;<span class="num" id="6769273">1</span><span class="op" id="6769274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769278">w</span><span class="op" id="6769279">.</span><span class="ident" id="6769280">Write</span><span class="op" id="6769285">(</span><span class="op" id="6769286">[</span><span class="op" id="6769287">]</span><span class="builtintype" id="6769288">byte</span><span class="op" id="6769292">(</span><span class="ident" id="6769293">s</span><span class="op" id="6769294">)</span><span class="op" id="6769295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769299">w</span><span class="op" id="6769300">.</span><span class="ident" id="6769301">Close</span><span class="op" id="6769306">(</span><span class="op" id="6769307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769310">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769314">inflated</span>&nbsp;<span class="op" id="6769323">:=</span>&nbsp;<span class="builtinfunc" id="6769326">make</span><span class="op" id="6769330">(</span><span class="op" id="6769331">[</span><span class="op" id="6769332">]</span><span class="ident" id="6769333">bytes</span><span class="op" id="6769338">.</span><span class="ident" id="6769339">Buffer</span><span class="op" id="6769345">,</span>&nbsp;<span class="num" id="6769347">2</span><span class="op" id="6769348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769352">f</span>&nbsp;<span class="op" id="6769354">:=</span>&nbsp;<span class="ident" id="6769357">NewReader</span><span class="op" id="6769366">(</span><span class="op" id="6769367">&amp;</span><span class="ident" id="6769368">deflated</span><span class="op" id="6769376">[</span><span class="num" id="6769377">0</span><span class="op" id="6769378">]</span><span class="op" id="6769379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769382">io</span><span class="op" id="6769384">.</span><span class="ident" id="6769385">Copy</span><span class="op" id="6769389">(</span><span class="op" id="6769390">&amp;</span><span class="ident" id="6769391">inflated</span><span class="op" id="6769399">[</span><span class="num" id="6769400">0</span><span class="op" id="6769401">]</span><span class="op" id="6769402">,</span>&nbsp;<span class="ident" id="6769404">f</span><span class="op" id="6769405">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769408">f</span><span class="op" id="6769409">.</span><span class="op" id="6769410">(</span><span class="ident" id="6769411">Resetter</span><span class="op" id="6769419">)</span><span class="op" id="6769420">.</span><span class="ident" id="6769421">Reset</span><span class="op" id="6769426">(</span><span class="op" id="6769427">&amp;</span><span class="ident" id="6769428">deflated</span><span class="op" id="6769436">[</span><span class="num" id="6769437">1</span><span class="op" id="6769438">]</span><span class="op" id="6769439">,</span>&nbsp;<span class="ident" id="6769441">nil</span><span class="op" id="6769444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769447">io</span><span class="op" id="6769449">.</span><span class="ident" id="6769450">Copy</span><span class="op" id="6769454">(</span><span class="op" id="6769455">&amp;</span><span class="ident" id="6769456">inflated</span><span class="op" id="6769464">[</span><span class="num" id="6769465">1</span><span class="op" id="6769466">]</span><span class="op" id="6769467">,</span>&nbsp;<span class="ident" id="6769469">f</span><span class="op" id="6769470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769473">f</span><span class="op" id="6769474">.</span><span class="ident" id="6769475">Close</span><span class="op" id="6769480">(</span><span class="op" id="6769481">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769485">for</span>&nbsp;<span class="ident" id="6769489">i</span><span class="op" id="6769490">,</span>&nbsp;<span class="ident" id="6769492">s</span>&nbsp;<span class="op" id="6769494">:=</span>&nbsp;<span class="keyword" id="6769497">range</span>&nbsp;<span class="ident" id="6769503">ss</span>&nbsp;<span class="op" id="6769506">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769510">if</span>&nbsp;<span class="ident" id="6769513">s</span>&nbsp;<span class="op" id="6769515">!=</span>&nbsp;<span class="ident" id="6769518">inflated</span><span class="op" id="6769526">[</span><span class="ident" id="6769527">i</span><span class="op" id="6769528">]</span><span class="op" id="6769529">.</span><span class="ident" id="6769530">String</span><span class="op" id="6769536">(</span><span class="op" id="6769537">)</span>&nbsp;<span class="op" id="6769539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769544">t</span><span class="op" id="6769545">.</span><span class="ident" id="6769546">Errorf</span><span class="op" id="6769552">(</span><span class="string" id="6769553">&#34;inflated[%d]:\ngot&nbsp;&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="6769586">,</span>&nbsp;<span class="ident" id="6769588">i</span><span class="op" id="6769589">,</span>&nbsp;<span class="ident" id="6769591">inflated</span><span class="op" id="6769599">[</span><span class="ident" id="6769600">i</span><span class="op" id="6769601">]</span><span class="op" id="6769602">,</span>&nbsp;<span class="ident" id="6769604">s</span><span class="op" id="6769605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769612">}</span><br>
<span class="lineno"></span><span class="op" id="6769614">}</span>
</div>
</body>
</html>
