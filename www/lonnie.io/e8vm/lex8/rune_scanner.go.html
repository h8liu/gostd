<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5365075">package</span>&nbsp;<span class="ident" id="5365083">lex8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5365089">import</span>&nbsp;<span class="op" id="5365096">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5365099">&#34;bufio&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5365108">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5365113">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5365116">//&nbsp;RuneScanner&nbsp;is&nbsp;a&nbsp;rune&nbsp;scanner&nbsp;that&nbsp;scans&nbsp;runes&nbsp;from&nbsp;a&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5365179">//&nbsp;and&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;tracks&nbsp;the&nbsp;reading&nbsp;position.</span><br>
<span class="lineno">10</span><span class="keyword" id="5365232">type</span>&nbsp;<span class="ident" id="5365237">RuneScanner</span>&nbsp;<span class="keyword" id="5365249">struct</span>&nbsp;<span class="op" id="5365256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365259">file</span>&nbsp;<span class="builtintype" id="5365264">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365272">line</span>&nbsp;<span class="builtintype" id="5365277">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365283">rc</span>&nbsp;<span class="ident" id="5365286"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365108">io</a></span><span class="op" id="5365288">.</span><span class="ident" id="5365289">ReadCloser</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365301">r</span>&nbsp;&nbsp;<span class="op" id="5365304">*</span><span class="ident" id="5365305"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365099">bufio</a></span><span class="op" id="5365310">.</span><span class="ident" id="5365311">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365320">Err</span>&nbsp;&nbsp;<span class="builtintype" id="5365325">error</span>&nbsp;<span class="comment" id="5365331">//&nbsp;any&nbsp;error&nbsp;encountered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365357">Rune</span>&nbsp;<span class="builtintype" id="5365362">rune</span>&nbsp;&nbsp;<span class="comment" id="5365368">//&nbsp;the&nbsp;rune&nbsp;just&nbsp;read</span><br>
<span class="lineno"></span><span class="op" id="5365390">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5365393">//&nbsp;NewRuneScanner&nbsp;creates&nbsp;a&nbsp;scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="5365430">func</span>&nbsp;<span class="ident" id="5365435">NewRuneScanner</span><span class="op" id="5365449">(</span><span class="ident" id="5365450">file</span>&nbsp;<span class="builtintype" id="5365455">string</span><span class="op" id="5365461">,</span>&nbsp;<span class="ident" id="5365463">rc</span>&nbsp;<span class="ident" id="5365466"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365108">io</a></span><span class="op" id="5365468">.</span><span class="ident" id="5365469">ReadCloser</span><span class="op" id="5365479">)</span>&nbsp;<span class="op" id="5365481">*</span><span class="ident" id="5365482"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365237">RuneScanner</a></span>&nbsp;<span class="op" id="5365494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365497">ret</span>&nbsp;<span class="op" id="5365501">:=</span>&nbsp;<span class="builtinfunc" id="5365504">new</span><span class="op" id="5365507">(</span><span class="ident" id="5365508"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365237">RuneScanner</a></span><span class="op" id="5365519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365522"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365497">ret</a></span><span class="op" id="5365525">.</span><span class="ident" id="5365526">file</span>&nbsp;<span class="op" id="5365531">=</span>&nbsp;<span class="ident" id="5365533"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365450">file</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365539"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365497">ret</a></span><span class="op" id="5365542">.</span><span class="ident" id="5365543">rc</span>&nbsp;<span class="op" id="5365546">=</span>&nbsp;<span class="ident" id="5365548"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365463">rc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365552"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365497">ret</a></span><span class="op" id="5365555">.</span><span class="ident" id="5365556">r</span>&nbsp;<span class="op" id="5365558">=</span>&nbsp;<span class="ident" id="5365560"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365099">bufio</a></span><span class="op" id="5365565">.</span><span class="ident" id="5365566">NewReader</span><span class="op" id="5365575">(</span><span class="ident" id="5365576"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365463">rc</a></span><span class="op" id="5365578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365581"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365497">ret</a></span><span class="op" id="5365584">.</span><span class="ident" id="5365585">line</span>&nbsp;<span class="op" id="5365590">=</span>&nbsp;<span class="num" id="5365592">1</span>&nbsp;<span class="comment" id="5365594">//&nbsp;natural&nbsp;counting</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365616">return</span>&nbsp;<span class="ident" id="5365623"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365497">ret</a></span><br>
<span class="lineno">30</span><span class="op" id="5365627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5365630">//&nbsp;Scan&nbsp;reads&nbsp;in&nbsp;the&nbsp;next&nbsp;rune&nbsp;to&nbsp;s.Rune.</span><br>
<span class="lineno"></span><span class="comment" id="5365672">//&nbsp;It&nbsp;closes&nbsp;the&nbsp;reader&nbsp;automatically&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="5365742">//&nbsp;or&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">35</span><span class="keyword" id="5365770">func</span>&nbsp;<span class="op" id="5365775">(</span><span class="ident" id="5365776">s</span>&nbsp;<span class="op" id="5365778">*</span><span class="ident" id="5365779"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365237">RuneScanner</a></span><span class="op" id="5365790">)</span>&nbsp;<span class="ident" id="5365792">Scan</span><span class="op" id="5365796">(</span><span class="op" id="5365797">)</span>&nbsp;<span class="builtintype" id="5365799">bool</span>&nbsp;<span class="op" id="5365804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365807">wasEndline</span>&nbsp;<span class="op" id="5365818">:=</span>&nbsp;<span class="ident" id="5365821"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365822">.</span><span class="ident" id="5365823">Rune</span>&nbsp;<span class="op" id="5365828">==</span>&nbsp;<span class="string" id="5365831">&#39;\n&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365838"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365839">.</span><span class="ident" id="5365840">Rune</span><span class="op" id="5365844">,</span>&nbsp;<span class="ident" id="5365846">_</span><span class="op" id="5365847">,</span>&nbsp;<span class="ident" id="5365849"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365850">.</span><span class="ident" id="5365851">Err</span>&nbsp;<span class="op" id="5365855">=</span>&nbsp;<span class="ident" id="5365857"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365858">.</span><span class="ident" id="5365859">r</span><span class="op" id="5365860">.</span><span class="ident" id="5365861">ReadRune</span><span class="op" id="5365869">(</span><span class="op" id="5365870">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365874">if</span>&nbsp;<span class="ident" id="5365877"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365878">.</span><span class="ident" id="5365879">Err</span>&nbsp;<span class="op" id="5365883">!=</span>&nbsp;<span class="ident" id="5365886">nil</span>&nbsp;<span class="op" id="5365890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365894">closeErr</span>&nbsp;<span class="op" id="5365903">:=</span>&nbsp;<span class="ident" id="5365906"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365907">.</span><span class="ident" id="5365908">rc</span><span class="op" id="5365910">.</span><span class="ident" id="5365911">Close</span><span class="op" id="5365916">(</span><span class="op" id="5365917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365921">if</span>&nbsp;<span class="ident" id="5365924"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365925">.</span><span class="ident" id="5365926">Err</span>&nbsp;<span class="op" id="5365930">==</span>&nbsp;<span class="ident" id="5365933"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365108">io</a></span><span class="op" id="5365935">.</span><span class="ident" id="5365936">EOF</span>&nbsp;<span class="op" id="5365940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5365945"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5365946">.</span><span class="ident" id="5365947">Err</span>&nbsp;<span class="op" id="5365951">=</span>&nbsp;<span class="ident" id="5365953"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365894">closeErr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365964">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365968">return</span>&nbsp;<span class="ident" id="5365975">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5365982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5365986">if</span>&nbsp;<span class="ident" id="5365989"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365807">wasEndline</a></span>&nbsp;<span class="op" id="5366000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5366004"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365776">s</a></span><span class="op" id="5366005">.</span><span class="ident" id="5366006">line</span><span class="op" id="5366010">++</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5366014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366018">return</span>&nbsp;<span class="ident" id="5366025">true</span><br>
<span class="lineno"></span><span class="op" id="5366030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="5366033">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5366082">func</span>&nbsp;<span class="op" id="5366087">(</span><span class="ident" id="5366088">s</span>&nbsp;<span class="op" id="5366090">*</span><span class="ident" id="5366091"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365237">RuneScanner</a></span><span class="op" id="5366102">)</span>&nbsp;<span class="ident" id="5366104">Pos</span><span class="op" id="5366107">(</span><span class="op" id="5366108">)</span>&nbsp;<span class="op" id="5366110">*</span><span class="ident" id="5366111"><a href="/lonnie.io/e8vm/lex8/pos.go.html#5365036">Pos</a></span>&nbsp;<span class="op" id="5366115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5366118">return</span>&nbsp;<span class="op" id="5366125">&amp;</span><span class="ident" id="5366126"><a href="/lonnie.io/e8vm/lex8/pos.go.html#5365036">Pos</a></span><span class="op" id="5366129">{</span><span class="ident" id="5366130"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5366088">s</a></span><span class="op" id="5366131">.</span><span class="ident" id="5366132">file</span><span class="op" id="5366136">,</span>&nbsp;<span class="ident" id="5366138"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5366088">s</a></span><span class="op" id="5366139">.</span><span class="ident" id="5366140">line</span><span class="op" id="5366144">}</span><br>
<span class="lineno"></span><span class="op" id="5366146">}</span>
</div>
</body>
</html>
