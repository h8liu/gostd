<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5086868">package</span>&nbsp;<span class="ident" id="5086876">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5086882">import</span>&nbsp;<span class="op" id="5086889">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5086892">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5086915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5086918">func</span>&nbsp;<span class="ident" id="5086923">varSize</span><span class="op" id="5086930">(</span><span class="ident" id="5086931">v</span>&nbsp;<span class="op" id="5086933">*</span><span class="ident" id="5086934">varDecl</span><span class="op" id="5086941">)</span>&nbsp;<span class="builtintype" id="5086943">int</span>&nbsp;<span class="op" id="5086947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086950">ret</span>&nbsp;<span class="op" id="5086954">:=</span>&nbsp;<span class="num" id="5086957">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086960">for</span>&nbsp;<span class="ident" id="5086964">_</span><span class="op" id="5086965">,</span>&nbsp;<span class="ident" id="5086967">stmt</span>&nbsp;<span class="op" id="5086972">:=</span>&nbsp;<span class="keyword" id="5086975">range</span>&nbsp;<span class="ident" id="5086981">v</span><span class="op" id="5086982">.</span><span class="ident" id="5086983">stmts</span>&nbsp;<span class="op" id="5086989">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086993">ret</span>&nbsp;<span class="op" id="5086997">+=</span>&nbsp;<span class="builtinfunc" id="5087000">len</span><span class="op" id="5087003">(</span><span class="ident" id="5087004">stmt</span><span class="op" id="5087008">.</span><span class="ident" id="5087009">data</span><span class="op" id="5087013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087020">return</span>&nbsp;<span class="ident" id="5087027">ret</span><br>
<span class="lineno"></span><span class="op" id="5087031">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5087034">func</span>&nbsp;<span class="ident" id="5087039">varAlign</span><span class="op" id="5087047">(</span><span class="ident" id="5087048">v</span>&nbsp;<span class="op" id="5087050">*</span><span class="ident" id="5087051">varDecl</span><span class="op" id="5087058">)</span>&nbsp;<span class="builtintype" id="5087060">uint32</span>&nbsp;<span class="op" id="5087067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087070">for</span>&nbsp;<span class="ident" id="5087074">_</span><span class="op" id="5087075">,</span>&nbsp;<span class="ident" id="5087077">stmt</span>&nbsp;<span class="op" id="5087082">:=</span>&nbsp;<span class="keyword" id="5087085">range</span>&nbsp;<span class="ident" id="5087091">v</span><span class="op" id="5087092">.</span><span class="ident" id="5087093">stmts</span>&nbsp;<span class="op" id="5087099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087103">if</span>&nbsp;<span class="ident" id="5087106">stmt</span><span class="op" id="5087110">.</span><span class="ident" id="5087111">align</span>&nbsp;<span class="op" id="5087117">==</span>&nbsp;<span class="num" id="5087120">4</span>&nbsp;<span class="op" id="5087122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087127">return</span>&nbsp;<span class="num" id="5087134">4</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087144">return</span>&nbsp;<span class="num" id="5087151">1</span><br>
<span class="lineno"></span><span class="op" id="5087153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5087156">func</span>&nbsp;<span class="ident" id="5087161">buildVar</span><span class="op" id="5087169">(</span><span class="ident" id="5087170">b</span>&nbsp;<span class="op" id="5087172">*</span><span class="ident" id="5087173">builder</span><span class="op" id="5087180">,</span>&nbsp;<span class="ident" id="5087182">v</span>&nbsp;<span class="op" id="5087184">*</span><span class="ident" id="5087185">varDecl</span><span class="op" id="5087192">)</span>&nbsp;<span class="op" id="5087194">*</span><span class="ident" id="5087195">link8</span><span class="op" id="5087200">.</span><span class="ident" id="5087201">Var</span>&nbsp;<span class="op" id="5087205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087208">if</span>&nbsp;<span class="ident" id="5087211">varSize</span><span class="op" id="5087218">(</span><span class="ident" id="5087219">v</span><span class="op" id="5087220">)</span>&nbsp;<span class="op" id="5087222">==</span>&nbsp;<span class="num" id="5087225">0</span>&nbsp;<span class="op" id="5087227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087231">b</span><span class="op" id="5087232">.</span><span class="ident" id="5087233">err</span><span class="op" id="5087236">(</span><span class="ident" id="5087237">v</span><span class="op" id="5087238">.</span><span class="ident" id="5087239">name</span><span class="op" id="5087243">.</span><span class="ident" id="5087244">Pos</span><span class="op" id="5087247">,</span>&nbsp;<span class="string" id="5087249">&#34;var&nbsp;%q&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="5087269">,</span>&nbsp;<span class="ident" id="5087271">v</span><span class="op" id="5087272">.</span><span class="ident" id="5087273">name</span><span class="op" id="5087277">.</span><span class="ident" id="5087278">Lit</span><span class="op" id="5087281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087285">return</span>&nbsp;<span class="ident" id="5087292">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087297">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087301">ret</span>&nbsp;<span class="op" id="5087305">:=</span>&nbsp;<span class="ident" id="5087308">link8</span><span class="op" id="5087313">.</span><span class="ident" id="5087314">NewVar</span><span class="op" id="5087320">(</span><span class="ident" id="5087321">varAlign</span><span class="op" id="5087329">(</span><span class="ident" id="5087330">v</span><span class="op" id="5087331">)</span><span class="op" id="5087332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087335">for</span>&nbsp;<span class="ident" id="5087339">_</span><span class="op" id="5087340">,</span>&nbsp;<span class="ident" id="5087342">stmt</span>&nbsp;<span class="op" id="5087347">:=</span>&nbsp;<span class="keyword" id="5087350">range</span>&nbsp;<span class="ident" id="5087356">v</span><span class="op" id="5087357">.</span><span class="ident" id="5087358">stmts</span>&nbsp;<span class="op" id="5087364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087368">n</span>&nbsp;<span class="op" id="5087370">:=</span>&nbsp;<span class="ident" id="5087373">ret</span><span class="op" id="5087376">.</span><span class="ident" id="5087377">Size</span><span class="op" id="5087381">(</span><span class="op" id="5087382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087386">if</span>&nbsp;<span class="ident" id="5087389">stmt</span><span class="op" id="5087393">.</span><span class="ident" id="5087394">align</span>&nbsp;<span class="op" id="5087400">==</span>&nbsp;<span class="num" id="5087403">4</span>&nbsp;<span class="op" id="5087405">&amp;&amp;</span>&nbsp;<span class="ident" id="5087408">n</span><span class="op" id="5087409">%</span><span class="num" id="5087410">4</span>&nbsp;<span class="op" id="5087412">!=</span>&nbsp;<span class="num" id="5087415">0</span>&nbsp;<span class="op" id="5087417">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087422">ret</span><span class="op" id="5087425">.</span><span class="ident" id="5087426">Pad</span><span class="op" id="5087429">(</span><span class="num" id="5087430">4</span>&nbsp;<span class="op" id="5087432">-</span>&nbsp;<span class="ident" id="5087434">n</span><span class="op" id="5087435">%</span><span class="num" id="5087436">4</span><span class="op" id="5087437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087446">ret</span><span class="op" id="5087449">.</span><span class="ident" id="5087450">Write</span><span class="op" id="5087455">(</span><span class="ident" id="5087456">stmt</span><span class="op" id="5087460">.</span><span class="ident" id="5087461">data</span><span class="op" id="5087465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087468">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087472">if</span>&nbsp;<span class="ident" id="5087475">ret</span><span class="op" id="5087478">.</span><span class="ident" id="5087479">TooLarge</span><span class="op" id="5087487">(</span><span class="op" id="5087488">)</span>&nbsp;<span class="op" id="5087490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087494">b</span><span class="op" id="5087495">.</span><span class="ident" id="5087496">err</span><span class="op" id="5087499">(</span><span class="ident" id="5087500">v</span><span class="op" id="5087501">.</span><span class="ident" id="5087502">name</span><span class="op" id="5087506">.</span><span class="ident" id="5087507">Pos</span><span class="op" id="5087510">,</span>&nbsp;<span class="string" id="5087512">&#34;var&nbsp;%q&nbsp;too&nbsp;large&#34;</span><span class="op" id="5087530">,</span>&nbsp;<span class="ident" id="5087532">v</span><span class="op" id="5087533">.</span><span class="ident" id="5087534">name</span><span class="op" id="5087538">.</span><span class="ident" id="5087539">Lit</span><span class="op" id="5087542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087546">return</span>&nbsp;<span class="ident" id="5087553">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087558">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087562">return</span>&nbsp;<span class="ident" id="5087569">ret</span><br>
<span class="lineno"></span><span class="op" id="5087573">}</span>
</div>
</body>
</html>
