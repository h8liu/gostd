<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7186332">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7186387">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7186441">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7186492">package</span>&nbsp;<span class="ident" id="7186500">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186505">import</span>&nbsp;<span class="op" id="7186512">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186515">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186524">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186543">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186559">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186565">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186578">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186584">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186601">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186611">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186622">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7186633">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7186640">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7186643">type</span>&nbsp;<span class="ident" id="7186648">ZipTest</span>&nbsp;<span class="keyword" id="7186656">struct</span>&nbsp;<span class="op" id="7186663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186666">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7186674">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186682">Source</span>&nbsp;&nbsp;<span class="keyword" id="7186690">func</span><span class="op" id="7186694">(</span><span class="op" id="7186695">)</span>&nbsp;<span class="op" id="7186697">(</span><span class="ident" id="7186698">r</span>&nbsp;<span class="ident" id="7186700">io</span><span class="op" id="7186702">.</span><span class="ident" id="7186703">ReaderAt</span><span class="op" id="7186711">,</span>&nbsp;<span class="ident" id="7186713">size</span>&nbsp;<span class="builtintype" id="7186718">int64</span><span class="op" id="7186723">)</span>&nbsp;<span class="comment" id="7186725">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186778">Comment</span>&nbsp;<span class="builtintype" id="7186786">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186794">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7186802">[</span><span class="op" id="7186803">]</span><span class="ident" id="7186804">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186817">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7186825">error</span>&nbsp;<span class="comment" id="7186831">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7186881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7186884">type</span>&nbsp;<span class="ident" id="7186889">ZipTestFile</span>&nbsp;<span class="keyword" id="7186901">struct</span>&nbsp;<span class="op" id="7186908">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186911">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7186922">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186930">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7186941">[</span><span class="op" id="7186942">]</span><span class="builtintype" id="7186943">byte</span>&nbsp;<span class="comment" id="7186948">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7186999">ContentErr</span>&nbsp;<span class="builtintype" id="7187010">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187017">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7187028">string</span>&nbsp;<span class="comment" id="7187035">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187090">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7187101">string</span>&nbsp;<span class="comment" id="7187108">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187156">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187167">os</span><span class="op" id="7187169">.</span><span class="ident" id="7187170">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7187179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7187182">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7187257">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7187332">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7187406">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7187480">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7187556">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7187630">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7187710">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7187789">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7187837">var</span>&nbsp;<span class="ident" id="7187841">tests</span>&nbsp;<span class="op" id="7187847">=</span>&nbsp;<span class="op" id="7187849">[</span><span class="op" id="7187850">]</span><span class="ident" id="7187851">ZipTest</span><span class="op" id="7187858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7187861">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187865">Name</span><span class="op" id="7187869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187874">&#34;test.zip&#34;</span><span class="op" id="7187884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187888">Comment</span><span class="op" id="7187895">:</span>&nbsp;<span class="string" id="7187897">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7187925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187929">File</span><span class="op" id="7187933">:</span>&nbsp;<span class="op" id="7187935">[</span><span class="op" id="7187936">]</span><span class="ident" id="7187937">ZipTestFile</span><span class="op" id="7187948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7187953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187959">Name</span><span class="op" id="7187963">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7187968">&#34;test.txt&#34;</span><span class="op" id="7187978">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7187984">Content</span><span class="op" id="7187991">:</span>&nbsp;<span class="op" id="7187993">[</span><span class="op" id="7187994">]</span><span class="builtintype" id="7187995">byte</span><span class="op" id="7187999">(</span><span class="string" id="7188000">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7188029">)</span><span class="op" id="7188030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188036">Mtime</span><span class="op" id="7188041">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7188045">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7188064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188070">Mode</span><span class="op" id="7188074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7188079">0644</span><span class="op" id="7188083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188088">}</span><span class="op" id="7188089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188094">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188100">Name</span><span class="op" id="7188104">:</span>&nbsp;&nbsp;<span class="string" id="7188107">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7188129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188135">File</span><span class="op" id="7188139">:</span>&nbsp;&nbsp;<span class="string" id="7188142">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7188164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188170">Mtime</span><span class="op" id="7188175">:</span>&nbsp;<span class="string" id="7188177">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7188196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188202">Mode</span><span class="op" id="7188206">:</span>&nbsp;&nbsp;<span class="num" id="7188209">0644</span><span class="op" id="7188213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188218">}</span><span class="op" id="7188219">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188223">}</span><span class="op" id="7188224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188227">}</span><span class="op" id="7188228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188235">Name</span><span class="op" id="7188239">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7188244">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7188268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188272">Comment</span><span class="op" id="7188279">:</span>&nbsp;<span class="string" id="7188281">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7188309">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188313">File</span><span class="op" id="7188317">:</span>&nbsp;<span class="op" id="7188319">[</span><span class="op" id="7188320">]</span><span class="ident" id="7188321">ZipTestFile</span><span class="op" id="7188332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188343">Name</span><span class="op" id="7188347">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7188352">&#34;test.txt&#34;</span><span class="op" id="7188362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188368">Content</span><span class="op" id="7188375">:</span>&nbsp;<span class="op" id="7188377">[</span><span class="op" id="7188378">]</span><span class="builtintype" id="7188379">byte</span><span class="op" id="7188383">(</span><span class="string" id="7188384">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7188413">)</span><span class="op" id="7188414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188420">Mtime</span><span class="op" id="7188425">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7188429">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7188448">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188454">Mode</span><span class="op" id="7188458">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7188463">0644</span><span class="op" id="7188467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188472">}</span><span class="op" id="7188473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188484">Name</span><span class="op" id="7188488">:</span>&nbsp;&nbsp;<span class="string" id="7188491">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7188513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188519">File</span><span class="op" id="7188523">:</span>&nbsp;&nbsp;<span class="string" id="7188526">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7188548">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188554">Mtime</span><span class="op" id="7188559">:</span>&nbsp;<span class="string" id="7188561">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7188580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188586">Mode</span><span class="op" id="7188590">:</span>&nbsp;&nbsp;<span class="num" id="7188593">0644</span><span class="op" id="7188597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188602">}</span><span class="op" id="7188603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188607">}</span><span class="op" id="7188608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188611">}</span><span class="op" id="7188612">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188619">Name</span><span class="op" id="7188623">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7188627">&#34;r.zip&#34;</span><span class="op" id="7188634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188638">Source</span><span class="op" id="7188644">:</span>&nbsp;<span class="ident" id="7188646">returnRecursiveZip</span><span class="op" id="7188664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188668">File</span><span class="op" id="7188672">:</span>&nbsp;<span class="op" id="7188674">[</span><span class="op" id="7188675">]</span><span class="ident" id="7188676">ZipTestFile</span><span class="op" id="7188687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188692">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188698">Name</span><span class="op" id="7188702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7188707">&#34;r/r.zip&#34;</span><span class="op" id="7188716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188722">Content</span><span class="op" id="7188729">:</span>&nbsp;<span class="ident" id="7188731">rZipBytes</span><span class="op" id="7188740">(</span><span class="op" id="7188741">)</span><span class="op" id="7188742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188748">Mtime</span><span class="op" id="7188753">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7188757">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7188776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188782">Mode</span><span class="op" id="7188786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7188791">0666</span><span class="op" id="7188795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188800">}</span><span class="op" id="7188801">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188805">}</span><span class="op" id="7188806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188809">}</span><span class="op" id="7188810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188817">Name</span><span class="op" id="7188821">:</span>&nbsp;<span class="string" id="7188823">&#34;symlink.zip&#34;</span><span class="op" id="7188836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188840">File</span><span class="op" id="7188844">:</span>&nbsp;<span class="op" id="7188846">[</span><span class="op" id="7188847">]</span><span class="ident" id="7188848">ZipTestFile</span><span class="op" id="7188859">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188870">Name</span><span class="op" id="7188874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7188879">&#34;symlink&#34;</span><span class="op" id="7188888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188894">Content</span><span class="op" id="7188901">:</span>&nbsp;<span class="op" id="7188903">[</span><span class="op" id="7188904">]</span><span class="builtintype" id="7188905">byte</span><span class="op" id="7188909">(</span><span class="string" id="7188910">&#34;../target&#34;</span><span class="op" id="7188921">)</span><span class="op" id="7188922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188928">Mode</span><span class="op" id="7188932">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7188937">0777</span>&nbsp;<span class="op" id="7188942">|</span>&nbsp;<span class="ident" id="7188944">os</span><span class="op" id="7188946">.</span><span class="ident" id="7188947">ModeSymlink</span><span class="op" id="7188958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188963">}</span><span class="op" id="7188964">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188968">}</span><span class="op" id="7188969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188972">}</span><span class="op" id="7188973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7188976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7188980">Name</span><span class="op" id="7188984">:</span>&nbsp;<span class="string" id="7188986">&#34;readme.zip&#34;</span><span class="op" id="7188998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189001">}</span><span class="op" id="7189002">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189009">Name</span><span class="op" id="7189013">:</span>&nbsp;&nbsp;<span class="string" id="7189016">&#34;readme.notzip&#34;</span><span class="op" id="7189031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189035">Error</span><span class="op" id="7189040">:</span>&nbsp;<span class="ident" id="7189042">ErrFormat</span><span class="op" id="7189051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189054">}</span><span class="op" id="7189055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189058">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189062">Name</span><span class="op" id="7189066">:</span>&nbsp;<span class="string" id="7189068">&#34;dd.zip&#34;</span><span class="op" id="7189076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189080">File</span><span class="op" id="7189084">:</span>&nbsp;<span class="op" id="7189086">[</span><span class="op" id="7189087">]</span><span class="ident" id="7189088">ZipTestFile</span><span class="op" id="7189099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189110">Name</span><span class="op" id="7189114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7189119">&#34;filename&#34;</span><span class="op" id="7189129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189135">Content</span><span class="op" id="7189142">:</span>&nbsp;<span class="op" id="7189144">[</span><span class="op" id="7189145">]</span><span class="builtintype" id="7189146">byte</span><span class="op" id="7189150">(</span><span class="string" id="7189151">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7189179">)</span><span class="op" id="7189180">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189186">Mtime</span><span class="op" id="7189191">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7189195">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7189214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189220">Mode</span><span class="op" id="7189224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7189229">0666</span><span class="op" id="7189233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189238">}</span><span class="op" id="7189239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189243">}</span><span class="op" id="7189244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189247">}</span><span class="op" id="7189248">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189255">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189296">Name</span><span class="op" id="7189300">:</span>&nbsp;<span class="string" id="7189302">&#34;winxp.zip&#34;</span><span class="op" id="7189313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189317">File</span><span class="op" id="7189321">:</span>&nbsp;<span class="ident" id="7189323">crossPlatform</span><span class="op" id="7189336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189339">}</span><span class="op" id="7189340">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189347">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189383">Name</span><span class="op" id="7189387">:</span>&nbsp;<span class="string" id="7189389">&#34;unix.zip&#34;</span><span class="op" id="7189399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189403">File</span><span class="op" id="7189407">:</span>&nbsp;<span class="ident" id="7189409">crossPlatform</span><span class="op" id="7189422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189425">}</span><span class="op" id="7189426">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189433">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189489">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189545">Name</span><span class="op" id="7189549">:</span>&nbsp;<span class="string" id="7189551">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7189575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189579">File</span><span class="op" id="7189583">:</span>&nbsp;<span class="op" id="7189585">[</span><span class="op" id="7189586">]</span><span class="ident" id="7189587">ZipTestFile</span><span class="op" id="7189598">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189609">Name</span><span class="op" id="7189613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7189618">&#34;foo.txt&#34;</span><span class="op" id="7189627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189633">Content</span><span class="op" id="7189640">:</span>&nbsp;<span class="op" id="7189642">[</span><span class="op" id="7189643">]</span><span class="builtintype" id="7189644">byte</span><span class="op" id="7189648">(</span><span class="string" id="7189649">&#34;foo\n&#34;</span><span class="op" id="7189656">)</span><span class="op" id="7189657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189663">Mtime</span><span class="op" id="7189668">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7189672">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7189691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189697">Mode</span><span class="op" id="7189701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7189706">0644</span><span class="op" id="7189710">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189715">}</span><span class="op" id="7189716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189727">Name</span><span class="op" id="7189731">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7189736">&#34;bar.txt&#34;</span><span class="op" id="7189745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189751">Content</span><span class="op" id="7189758">:</span>&nbsp;<span class="op" id="7189760">[</span><span class="op" id="7189761">]</span><span class="builtintype" id="7189762">byte</span><span class="op" id="7189766">(</span><span class="string" id="7189767">&#34;bar\n&#34;</span><span class="op" id="7189774">)</span><span class="op" id="7189775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189781">Mtime</span><span class="op" id="7189786">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7189790">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7189809">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189815">Mode</span><span class="op" id="7189819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7189824">0644</span><span class="op" id="7189828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189833">}</span><span class="op" id="7189834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189838">}</span><span class="op" id="7189839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189842">}</span><span class="op" id="7189843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7189846">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189850">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7189905">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189961">Name</span><span class="op" id="7189965">:</span>&nbsp;<span class="string" id="7189967">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7189993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7189997">File</span><span class="op" id="7190001">:</span>&nbsp;<span class="op" id="7190003">[</span><span class="op" id="7190004">]</span><span class="ident" id="7190005">ZipTestFile</span><span class="op" id="7190016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190021">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190027">Name</span><span class="op" id="7190031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190036">&#34;foo.txt&#34;</span><span class="op" id="7190045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190051">Content</span><span class="op" id="7190058">:</span>&nbsp;<span class="op" id="7190060">[</span><span class="op" id="7190061">]</span><span class="builtintype" id="7190062">byte</span><span class="op" id="7190066">(</span><span class="string" id="7190067">&#34;foo\n&#34;</span><span class="op" id="7190074">)</span><span class="op" id="7190075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190081">Mode</span><span class="op" id="7190085">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190090">0666</span><span class="op" id="7190094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190099">}</span><span class="op" id="7190100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190105">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190111">Name</span><span class="op" id="7190115">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190120">&#34;bar.txt&#34;</span><span class="op" id="7190129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190135">Content</span><span class="op" id="7190142">:</span>&nbsp;<span class="op" id="7190144">[</span><span class="op" id="7190145">]</span><span class="builtintype" id="7190146">byte</span><span class="op" id="7190150">(</span><span class="string" id="7190151">&#34;bar\n&#34;</span><span class="op" id="7190158">)</span><span class="op" id="7190159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190165">Mode</span><span class="op" id="7190169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190174">0666</span><span class="op" id="7190178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190183">}</span><span class="op" id="7190184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190188">}</span><span class="op" id="7190189">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190192">}</span><span class="op" id="7190193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190200">Name</span><span class="op" id="7190204">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7190208">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7190238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190242">Source</span><span class="op" id="7190248">:</span>&nbsp;<span class="ident" id="7190250">returnCorruptCRC32Zip</span><span class="op" id="7190271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190275">File</span><span class="op" id="7190279">:</span>&nbsp;<span class="op" id="7190281">[</span><span class="op" id="7190282">]</span><span class="ident" id="7190283">ZipTestFile</span><span class="op" id="7190294">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190305">Name</span><span class="op" id="7190309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190317">&#34;foo.txt&#34;</span><span class="op" id="7190326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190332">Content</span><span class="op" id="7190339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190344">[</span><span class="op" id="7190345">]</span><span class="builtintype" id="7190346">byte</span><span class="op" id="7190350">(</span><span class="string" id="7190351">&#34;foo\n&#34;</span><span class="op" id="7190358">)</span><span class="op" id="7190359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190365">Mode</span><span class="op" id="7190369">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190377">0666</span><span class="op" id="7190381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190387">ContentErr</span><span class="op" id="7190397">:</span>&nbsp;<span class="ident" id="7190399">ErrChecksum</span><span class="op" id="7190410">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190415">}</span><span class="op" id="7190416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190427">Name</span><span class="op" id="7190431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190436">&#34;bar.txt&#34;</span><span class="op" id="7190445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190451">Content</span><span class="op" id="7190458">:</span>&nbsp;<span class="op" id="7190460">[</span><span class="op" id="7190461">]</span><span class="builtintype" id="7190462">byte</span><span class="op" id="7190466">(</span><span class="string" id="7190467">&#34;bar\n&#34;</span><span class="op" id="7190474">)</span><span class="op" id="7190475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190481">Mode</span><span class="op" id="7190485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190490">0666</span><span class="op" id="7190494">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190499">}</span><span class="op" id="7190500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190504">}</span><span class="op" id="7190505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190508">}</span><span class="op" id="7190509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7190512">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7190572">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190639">Name</span><span class="op" id="7190643">:</span>&nbsp;<span class="string" id="7190645">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7190669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190673">File</span><span class="op" id="7190677">:</span>&nbsp;<span class="op" id="7190679">[</span><span class="op" id="7190680">]</span><span class="ident" id="7190681">ZipTestFile</span><span class="op" id="7190692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190703">Name</span><span class="op" id="7190707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190712">&#34;foo.txt&#34;</span><span class="op" id="7190721">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190727">Content</span><span class="op" id="7190734">:</span>&nbsp;<span class="op" id="7190736">[</span><span class="op" id="7190737">]</span><span class="builtintype" id="7190738">byte</span><span class="op" id="7190742">(</span><span class="string" id="7190743">&#34;foo\n&#34;</span><span class="op" id="7190750">)</span><span class="op" id="7190751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190757">Mtime</span><span class="op" id="7190762">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7190766">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7190785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190791">Mode</span><span class="op" id="7190795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190800">0644</span><span class="op" id="7190804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190809">}</span><span class="op" id="7190810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190815">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190821">Name</span><span class="op" id="7190825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190830">&#34;bar.txt&#34;</span><span class="op" id="7190839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190845">Content</span><span class="op" id="7190852">:</span>&nbsp;<span class="op" id="7190854">[</span><span class="op" id="7190855">]</span><span class="builtintype" id="7190856">byte</span><span class="op" id="7190860">(</span><span class="string" id="7190861">&#34;bar\n&#34;</span><span class="op" id="7190868">)</span><span class="op" id="7190869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190875">Mtime</span><span class="op" id="7190880">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7190884">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7190903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190909">Mode</span><span class="op" id="7190913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7190918">0644</span><span class="op" id="7190922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190927">}</span><span class="op" id="7190928">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190932">}</span><span class="op" id="7190933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190936">}</span><span class="op" id="7190937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7190940">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7191002">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191065">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191069">Name</span><span class="op" id="7191073">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7191077">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7191101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191105">Source</span><span class="op" id="7191111">:</span>&nbsp;<span class="ident" id="7191113">returnCorruptNotStreamedZip</span><span class="op" id="7191140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191144">File</span><span class="op" id="7191148">:</span>&nbsp;<span class="op" id="7191150">[</span><span class="op" id="7191151">]</span><span class="ident" id="7191152">ZipTestFile</span><span class="op" id="7191163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191174">Name</span><span class="op" id="7191178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191186">&#34;foo.txt&#34;</span><span class="op" id="7191195">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191201">Content</span><span class="op" id="7191208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191213">[</span><span class="op" id="7191214">]</span><span class="builtintype" id="7191215">byte</span><span class="op" id="7191219">(</span><span class="string" id="7191220">&#34;foo\n&#34;</span><span class="op" id="7191227">)</span><span class="op" id="7191228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191234">Mtime</span><span class="op" id="7191239">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191246">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7191265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191271">Mode</span><span class="op" id="7191275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7191283">0644</span><span class="op" id="7191287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191293">ContentErr</span><span class="op" id="7191303">:</span>&nbsp;<span class="ident" id="7191305">ErrChecksum</span><span class="op" id="7191316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191321">}</span><span class="op" id="7191322">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191333">Name</span><span class="op" id="7191337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191342">&#34;bar.txt&#34;</span><span class="op" id="7191351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191357">Content</span><span class="op" id="7191364">:</span>&nbsp;<span class="op" id="7191366">[</span><span class="op" id="7191367">]</span><span class="builtintype" id="7191368">byte</span><span class="op" id="7191372">(</span><span class="string" id="7191373">&#34;bar\n&#34;</span><span class="op" id="7191380">)</span><span class="op" id="7191381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191387">Mtime</span><span class="op" id="7191392">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7191396">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7191415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191421">Mode</span><span class="op" id="7191425">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7191430">0644</span><span class="op" id="7191434">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191439">}</span><span class="op" id="7191440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191444">}</span><span class="op" id="7191445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191448">}</span><span class="op" id="7191449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191456">Name</span><span class="op" id="7191460">:</span>&nbsp;<span class="string" id="7191462">&#34;zip64.zip&#34;</span><span class="op" id="7191473">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191477">File</span><span class="op" id="7191481">:</span>&nbsp;<span class="op" id="7191483">[</span><span class="op" id="7191484">]</span><span class="ident" id="7191485">ZipTestFile</span><span class="op" id="7191496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191507">Name</span><span class="op" id="7191511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191516">&#34;README&#34;</span><span class="op" id="7191524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191530">Content</span><span class="op" id="7191537">:</span>&nbsp;<span class="op" id="7191539">[</span><span class="op" id="7191540">]</span><span class="builtintype" id="7191541">byte</span><span class="op" id="7191545">(</span><span class="string" id="7191546">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7191585">)</span><span class="op" id="7191586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191592">Mtime</span><span class="op" id="7191597">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7191601">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7191620">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191626">Mode</span><span class="op" id="7191630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7191635">0644</span><span class="op" id="7191639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191644">}</span><span class="op" id="7191645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191649">}</span><span class="op" id="7191650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191653">}</span><span class="op" id="7191654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7191657">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191738">Name</span><span class="op" id="7191742">:</span>&nbsp;<span class="string" id="7191744">&#34;zip64-2.zip&#34;</span><span class="op" id="7191757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191761">File</span><span class="op" id="7191765">:</span>&nbsp;<span class="op" id="7191767">[</span><span class="op" id="7191768">]</span><span class="ident" id="7191769">ZipTestFile</span><span class="op" id="7191780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191791">Name</span><span class="op" id="7191795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191800">&#34;README&#34;</span><span class="op" id="7191808">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191814">Content</span><span class="op" id="7191821">:</span>&nbsp;<span class="op" id="7191823">[</span><span class="op" id="7191824">]</span><span class="builtintype" id="7191825">byte</span><span class="op" id="7191829">(</span><span class="string" id="7191830">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7191869">)</span><span class="op" id="7191870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191876">Mtime</span><span class="op" id="7191881">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7191885">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7191904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191910">Mode</span><span class="op" id="7191914">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7191919">0644</span><span class="op" id="7191923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191928">}</span><span class="op" id="7191929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191933">}</span><span class="op" id="7191934">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191937">}</span><span class="op" id="7191938">,</span><br>
<span class="lineno"></span><span class="op" id="7191940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191943">var</span>&nbsp;<span class="ident" id="7191947">crossPlatform</span>&nbsp;<span class="op" id="7191961">=</span>&nbsp;<span class="op" id="7191963">[</span><span class="op" id="7191964">]</span><span class="ident" id="7191965">ZipTestFile</span><span class="op" id="7191976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191979">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191983">Name</span><span class="op" id="7191987">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7191992">&#34;hello&#34;</span><span class="op" id="7191999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192003">Content</span><span class="op" id="7192010">:</span>&nbsp;<span class="op" id="7192012">[</span><span class="op" id="7192013">]</span><span class="builtintype" id="7192014">byte</span><span class="op" id="7192018">(</span><span class="string" id="7192019">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7192031">)</span><span class="op" id="7192032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192036">Mode</span><span class="op" id="7192040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7192045">0666</span><span class="op" id="7192049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192052">}</span><span class="op" id="7192053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192056">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192060">Name</span><span class="op" id="7192064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192069">&#34;dir/bar&#34;</span><span class="op" id="7192078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192082">Content</span><span class="op" id="7192089">:</span>&nbsp;<span class="op" id="7192091">[</span><span class="op" id="7192092">]</span><span class="builtintype" id="7192093">byte</span><span class="op" id="7192097">(</span><span class="string" id="7192098">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7192108">)</span><span class="op" id="7192109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192113">Mode</span><span class="op" id="7192117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7192122">0666</span><span class="op" id="7192126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192129">}</span><span class="op" id="7192130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192133">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192137">Name</span><span class="op" id="7192141">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192146">&#34;dir/empty/&#34;</span><span class="op" id="7192158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192162">Content</span><span class="op" id="7192169">:</span>&nbsp;<span class="op" id="7192171">[</span><span class="op" id="7192172">]</span><span class="builtintype" id="7192173">byte</span><span class="op" id="7192177">{</span><span class="op" id="7192178">}</span><span class="op" id="7192179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192183">Mode</span><span class="op" id="7192187">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192192">os</span><span class="op" id="7192194">.</span><span class="ident" id="7192195">ModeDir</span>&nbsp;<span class="op" id="7192203">|</span>&nbsp;<span class="num" id="7192205">0777</span><span class="op" id="7192209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192212">}</span><span class="op" id="7192213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192216">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192220">Name</span><span class="op" id="7192224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192229">&#34;readonly&#34;</span><span class="op" id="7192239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192243">Content</span><span class="op" id="7192250">:</span>&nbsp;<span class="op" id="7192252">[</span><span class="op" id="7192253">]</span><span class="builtintype" id="7192254">byte</span><span class="op" id="7192258">(</span><span class="string" id="7192259">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7192275">)</span><span class="op" id="7192276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192280">Mode</span><span class="op" id="7192284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7192289">0444</span><span class="op" id="7192293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192296">}</span><span class="op" id="7192297">,</span><br>
<span class="lineno"></span><span class="op" id="7192299">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7192302">func</span>&nbsp;<span class="ident" id="7192307">TestReader</span><span class="op" id="7192317">(</span><span class="ident" id="7192318">t</span>&nbsp;<span class="op" id="7192320">*</span><span class="ident" id="7192321">testing</span><span class="op" id="7192328">.</span><span class="ident" id="7192329">T</span><span class="op" id="7192330">)</span>&nbsp;<span class="op" id="7192332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192335">for</span>&nbsp;<span class="ident" id="7192339">_</span><span class="op" id="7192340">,</span>&nbsp;<span class="ident" id="7192342">zt</span>&nbsp;<span class="op" id="7192345">:=</span>&nbsp;<span class="keyword" id="7192348">range</span>&nbsp;<span class="ident" id="7192354">tests</span>&nbsp;<span class="op" id="7192360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192364">readTestZip</span><span class="op" id="7192375">(</span><span class="ident" id="7192376">t</span><span class="op" id="7192377">,</span>&nbsp;<span class="ident" id="7192379">zt</span><span class="op" id="7192381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192384">}</span><br>
<span class="lineno">280</span><span class="op" id="7192386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7192389">func</span>&nbsp;<span class="ident" id="7192394">readTestZip</span><span class="op" id="7192405">(</span><span class="ident" id="7192406">t</span>&nbsp;<span class="op" id="7192408">*</span><span class="ident" id="7192409">testing</span><span class="op" id="7192416">.</span><span class="ident" id="7192417">T</span><span class="op" id="7192418">,</span>&nbsp;<span class="ident" id="7192420">zt</span>&nbsp;<span class="ident" id="7192423">ZipTest</span><span class="op" id="7192430">)</span>&nbsp;<span class="op" id="7192432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192435">var</span>&nbsp;<span class="ident" id="7192439">z</span>&nbsp;<span class="op" id="7192441">*</span><span class="ident" id="7192442">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192450">var</span>&nbsp;<span class="ident" id="7192454">err</span>&nbsp;<span class="builtintype" id="7192458">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192465">if</span>&nbsp;<span class="ident" id="7192468">zt</span><span class="op" id="7192470">.</span><span class="ident" id="7192471">Source</span>&nbsp;<span class="op" id="7192478">!=</span>&nbsp;<span class="builtintype" id="7192481">nil</span>&nbsp;<span class="op" id="7192485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192489">rat</span><span class="op" id="7192492">,</span>&nbsp;<span class="ident" id="7192494">size</span>&nbsp;<span class="op" id="7192499">:=</span>&nbsp;<span class="ident" id="7192502">zt</span><span class="op" id="7192504">.</span><span class="ident" id="7192505">Source</span><span class="op" id="7192511">(</span><span class="op" id="7192512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192516">z</span><span class="op" id="7192517">,</span>&nbsp;<span class="ident" id="7192519">err</span>&nbsp;<span class="op" id="7192523">=</span>&nbsp;<span class="ident" id="7192525">NewReader</span><span class="op" id="7192534">(</span><span class="ident" id="7192535">rat</span><span class="op" id="7192538">,</span>&nbsp;<span class="ident" id="7192540">size</span><span class="op" id="7192544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192547">}</span>&nbsp;<span class="keyword" id="7192549">else</span>&nbsp;<span class="op" id="7192554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192558">var</span>&nbsp;<span class="ident" id="7192562">rc</span>&nbsp;<span class="op" id="7192565">*</span><span class="ident" id="7192566">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192579">rc</span><span class="op" id="7192581">,</span>&nbsp;<span class="ident" id="7192583">err</span>&nbsp;<span class="op" id="7192587">=</span>&nbsp;<span class="ident" id="7192589">OpenReader</span><span class="op" id="7192599">(</span><span class="ident" id="7192600">filepath</span><span class="op" id="7192608">.</span><span class="ident" id="7192609">Join</span><span class="op" id="7192613">(</span><span class="string" id="7192614">&#34;testdata&#34;</span><span class="op" id="7192624">,</span>&nbsp;<span class="ident" id="7192626">zt</span><span class="op" id="7192628">.</span><span class="ident" id="7192629">Name</span><span class="op" id="7192633">)</span><span class="op" id="7192634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192638">if</span>&nbsp;<span class="ident" id="7192641">err</span>&nbsp;<span class="op" id="7192645">==</span>&nbsp;<span class="builtintype" id="7192648">nil</span>&nbsp;<span class="op" id="7192652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192657">defer</span>&nbsp;<span class="ident" id="7192663">rc</span><span class="op" id="7192665">.</span><span class="ident" id="7192666">Close</span><span class="op" id="7192671">(</span><span class="op" id="7192672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192677">z</span>&nbsp;<span class="op" id="7192679">=</span>&nbsp;<span class="op" id="7192681">&amp;</span><span class="ident" id="7192682">rc</span><span class="op" id="7192684">.</span><span class="ident" id="7192685">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192694">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192700">if</span>&nbsp;<span class="ident" id="7192703">err</span>&nbsp;<span class="op" id="7192707">!=</span>&nbsp;<span class="ident" id="7192710">zt</span><span class="op" id="7192712">.</span><span class="ident" id="7192713">Error</span>&nbsp;<span class="op" id="7192719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192723">t</span><span class="op" id="7192724">.</span><span class="ident" id="7192725">Errorf</span><span class="op" id="7192731">(</span><span class="string" id="7192732">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7192755">,</span>&nbsp;<span class="ident" id="7192757">zt</span><span class="op" id="7192759">.</span><span class="ident" id="7192760">Name</span><span class="op" id="7192764">,</span>&nbsp;<span class="ident" id="7192766">err</span><span class="op" id="7192769">,</span>&nbsp;<span class="ident" id="7192771">zt</span><span class="op" id="7192773">.</span><span class="ident" id="7192774">Error</span><span class="op" id="7192779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192783">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192791">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192795">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192823">if</span>&nbsp;<span class="ident" id="7192826">err</span>&nbsp;<span class="op" id="7192830">==</span>&nbsp;<span class="ident" id="7192833">ErrFormat</span>&nbsp;<span class="op" id="7192843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192847">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192855">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192859">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192907">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192971">if</span>&nbsp;<span class="ident" id="7192974">zt</span><span class="op" id="7192976">.</span><span class="ident" id="7192977">File</span>&nbsp;<span class="op" id="7192982">==</span>&nbsp;<span class="builtintype" id="7192985">nil</span>&nbsp;<span class="op" id="7192989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192993">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193005">if</span>&nbsp;<span class="ident" id="7193008">z</span><span class="op" id="7193009">.</span><span class="ident" id="7193010">Comment</span>&nbsp;<span class="op" id="7193018">!=</span>&nbsp;<span class="ident" id="7193021">zt</span><span class="op" id="7193023">.</span><span class="ident" id="7193024">Comment</span>&nbsp;<span class="op" id="7193032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193036">t</span><span class="op" id="7193037">.</span><span class="ident" id="7193038">Errorf</span><span class="op" id="7193044">(</span><span class="string" id="7193045">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7193070">,</span>&nbsp;<span class="ident" id="7193072">zt</span><span class="op" id="7193074">.</span><span class="ident" id="7193075">Name</span><span class="op" id="7193079">,</span>&nbsp;<span class="ident" id="7193081">z</span><span class="op" id="7193082">.</span><span class="ident" id="7193083">Comment</span><span class="op" id="7193090">,</span>&nbsp;<span class="ident" id="7193092">zt</span><span class="op" id="7193094">.</span><span class="ident" id="7193095">Comment</span><span class="op" id="7193102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193105">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193108">if</span>&nbsp;<span class="builtinfunc" id="7193111">len</span><span class="op" id="7193114">(</span><span class="ident" id="7193115">z</span><span class="op" id="7193116">.</span><span class="ident" id="7193117">File</span><span class="op" id="7193121">)</span>&nbsp;<span class="op" id="7193123">!=</span>&nbsp;<span class="builtinfunc" id="7193126">len</span><span class="op" id="7193129">(</span><span class="ident" id="7193130">zt</span><span class="op" id="7193132">.</span><span class="ident" id="7193133">File</span><span class="op" id="7193137">)</span>&nbsp;<span class="op" id="7193139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193143">t</span><span class="op" id="7193144">.</span><span class="ident" id="7193145">Fatalf</span><span class="op" id="7193151">(</span><span class="string" id="7193152">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7193180">,</span>&nbsp;<span class="ident" id="7193182">zt</span><span class="op" id="7193184">.</span><span class="ident" id="7193185">Name</span><span class="op" id="7193189">,</span>&nbsp;<span class="builtinfunc" id="7193191">len</span><span class="op" id="7193194">(</span><span class="ident" id="7193195">z</span><span class="op" id="7193196">.</span><span class="ident" id="7193197">File</span><span class="op" id="7193201">)</span><span class="op" id="7193202">,</span>&nbsp;<span class="builtinfunc" id="7193204">len</span><span class="op" id="7193207">(</span><span class="ident" id="7193208">zt</span><span class="op" id="7193210">.</span><span class="ident" id="7193211">File</span><span class="op" id="7193215">)</span><span class="op" id="7193216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193223">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193250">for</span>&nbsp;<span class="ident" id="7193254">i</span><span class="op" id="7193255">,</span>&nbsp;<span class="ident" id="7193257">ft</span>&nbsp;<span class="op" id="7193260">:=</span>&nbsp;<span class="keyword" id="7193263">range</span>&nbsp;<span class="ident" id="7193269">zt</span><span class="op" id="7193271">.</span><span class="ident" id="7193272">File</span>&nbsp;<span class="op" id="7193277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193281">readTestFile</span><span class="op" id="7193293">(</span><span class="ident" id="7193294">t</span><span class="op" id="7193295">,</span>&nbsp;<span class="ident" id="7193297">zt</span><span class="op" id="7193299">,</span>&nbsp;<span class="ident" id="7193301">ft</span><span class="op" id="7193303">,</span>&nbsp;<span class="ident" id="7193305">z</span><span class="op" id="7193306">.</span><span class="ident" id="7193307">File</span><span class="op" id="7193311">[</span><span class="ident" id="7193312">i</span><span class="op" id="7193313">]</span><span class="op" id="7193314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193321">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193349">n</span>&nbsp;<span class="op" id="7193351">:=</span>&nbsp;<span class="num" id="7193354">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193357">done</span>&nbsp;<span class="op" id="7193362">:=</span>&nbsp;<span class="builtinfunc" id="7193365">make</span><span class="op" id="7193369">(</span><span class="keyword" id="7193370">chan</span>&nbsp;<span class="builtintype" id="7193375">bool</span><span class="op" id="7193379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193382">for</span>&nbsp;<span class="ident" id="7193386">i</span>&nbsp;<span class="op" id="7193388">:=</span>&nbsp;<span class="num" id="7193391">0</span><span class="op" id="7193392">;</span>&nbsp;<span class="ident" id="7193394">i</span>&nbsp;<span class="op" id="7193396">&lt;</span>&nbsp;<span class="num" id="7193398">5</span><span class="op" id="7193399">;</span>&nbsp;<span class="ident" id="7193401">i</span><span class="op" id="7193402">++</span>&nbsp;<span class="op" id="7193405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193409">for</span>&nbsp;<span class="ident" id="7193413">j</span><span class="op" id="7193414">,</span>&nbsp;<span class="ident" id="7193416">ft</span>&nbsp;<span class="op" id="7193419">:=</span>&nbsp;<span class="keyword" id="7193422">range</span>&nbsp;<span class="ident" id="7193428">zt</span><span class="op" id="7193430">.</span><span class="ident" id="7193431">File</span>&nbsp;<span class="op" id="7193436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193441">go</span>&nbsp;<span class="keyword" id="7193444">func</span><span class="op" id="7193448">(</span><span class="ident" id="7193449">j</span>&nbsp;<span class="builtintype" id="7193451">int</span><span class="op" id="7193454">,</span>&nbsp;<span class="ident" id="7193456">ft</span>&nbsp;<span class="ident" id="7193459">ZipTestFile</span><span class="op" id="7193470">)</span>&nbsp;<span class="op" id="7193472">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193478">readTestFile</span><span class="op" id="7193490">(</span><span class="ident" id="7193491">t</span><span class="op" id="7193492">,</span>&nbsp;<span class="ident" id="7193494">zt</span><span class="op" id="7193496">,</span>&nbsp;<span class="ident" id="7193498">ft</span><span class="op" id="7193500">,</span>&nbsp;<span class="ident" id="7193502">z</span><span class="op" id="7193503">.</span><span class="ident" id="7193504">File</span><span class="op" id="7193508">[</span><span class="ident" id="7193509">j</span><span class="op" id="7193510">]</span><span class="op" id="7193511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193517">done</span>&nbsp;<span class="op" id="7193522">&lt;-</span>&nbsp;<span class="builtintype" id="7193525">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193533">}</span><span class="op" id="7193534">(</span><span class="ident" id="7193535">j</span><span class="op" id="7193536">,</span>&nbsp;<span class="ident" id="7193538">ft</span><span class="op" id="7193540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193545">n</span><span class="op" id="7193546">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193551">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193557">for</span>&nbsp;<span class="op" id="7193561">;</span>&nbsp;<span class="ident" id="7193563">n</span>&nbsp;<span class="op" id="7193565">&gt;</span>&nbsp;<span class="num" id="7193567">0</span><span class="op" id="7193568">;</span>&nbsp;<span class="ident" id="7193570">n</span><span class="op" id="7193571">--</span>&nbsp;<span class="op" id="7193574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193578">&lt;-</span><span class="ident" id="7193580">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193586">}</span><br>
<span class="lineno"></span><span class="op" id="7193588">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7193591">func</span>&nbsp;<span class="ident" id="7193596">readTestFile</span><span class="op" id="7193608">(</span><span class="ident" id="7193609">t</span>&nbsp;<span class="op" id="7193611">*</span><span class="ident" id="7193612">testing</span><span class="op" id="7193619">.</span><span class="ident" id="7193620">T</span><span class="op" id="7193621">,</span>&nbsp;<span class="ident" id="7193623">zt</span>&nbsp;<span class="ident" id="7193626">ZipTest</span><span class="op" id="7193633">,</span>&nbsp;<span class="ident" id="7193635">ft</span>&nbsp;<span class="ident" id="7193638">ZipTestFile</span><span class="op" id="7193649">,</span>&nbsp;<span class="ident" id="7193651">f</span>&nbsp;<span class="op" id="7193653">*</span><span class="ident" id="7193654">File</span><span class="op" id="7193658">)</span>&nbsp;<span class="op" id="7193660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193663">if</span>&nbsp;<span class="ident" id="7193666">f</span><span class="op" id="7193667">.</span><span class="ident" id="7193668">Name</span>&nbsp;<span class="op" id="7193673">!=</span>&nbsp;<span class="ident" id="7193676">ft</span><span class="op" id="7193678">.</span><span class="ident" id="7193679">Name</span>&nbsp;<span class="op" id="7193684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193688">t</span><span class="op" id="7193689">.</span><span class="ident" id="7193690">Errorf</span><span class="op" id="7193696">(</span><span class="string" id="7193697">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7193719">,</span>&nbsp;<span class="ident" id="7193721">zt</span><span class="op" id="7193723">.</span><span class="ident" id="7193724">Name</span><span class="op" id="7193728">,</span>&nbsp;<span class="ident" id="7193730">f</span><span class="op" id="7193731">.</span><span class="ident" id="7193732">Name</span><span class="op" id="7193736">,</span>&nbsp;<span class="ident" id="7193738">ft</span><span class="op" id="7193740">.</span><span class="ident" id="7193741">Name</span><span class="op" id="7193745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193748">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193752">if</span>&nbsp;<span class="ident" id="7193755">ft</span><span class="op" id="7193757">.</span><span class="ident" id="7193758">Mtime</span>&nbsp;<span class="op" id="7193764">!=</span>&nbsp;<span class="string" id="7193767">&#34;&#34;</span>&nbsp;<span class="op" id="7193770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193774">mtime</span><span class="op" id="7193779">,</span>&nbsp;<span class="ident" id="7193781">err</span>&nbsp;<span class="op" id="7193785">:=</span>&nbsp;<span class="ident" id="7193788">time</span><span class="op" id="7193792">.</span><span class="ident" id="7193793">Parse</span><span class="op" id="7193798">(</span><span class="string" id="7193799">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7193818">,</span>&nbsp;<span class="ident" id="7193820">ft</span><span class="op" id="7193822">.</span><span class="ident" id="7193823">Mtime</span><span class="op" id="7193828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193832">if</span>&nbsp;<span class="ident" id="7193835">err</span>&nbsp;<span class="op" id="7193839">!=</span>&nbsp;<span class="builtintype" id="7193842">nil</span>&nbsp;<span class="op" id="7193846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193851">t</span><span class="op" id="7193852">.</span><span class="ident" id="7193853">Error</span><span class="op" id="7193858">(</span><span class="ident" id="7193859">err</span><span class="op" id="7193862">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7193880">if</span>&nbsp;<span class="ident" id="7193883">ft</span>&nbsp;<span class="op" id="7193886">:=</span>&nbsp;<span class="ident" id="7193889">f</span><span class="op" id="7193890">.</span><span class="ident" id="7193891">ModTime</span><span class="op" id="7193898">(</span><span class="op" id="7193899">)</span><span class="op" id="7193900">;</span>&nbsp;<span class="op" id="7193902">!</span><span class="ident" id="7193903">ft</span><span class="op" id="7193905">.</span><span class="ident" id="7193906">Equal</span><span class="op" id="7193911">(</span><span class="ident" id="7193912">mtime</span><span class="op" id="7193917">)</span>&nbsp;<span class="op" id="7193919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193924">t</span><span class="op" id="7193925">.</span><span class="ident" id="7193926">Errorf</span><span class="op" id="7193932">(</span><span class="string" id="7193933">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7193960">,</span>&nbsp;<span class="ident" id="7193962">zt</span><span class="op" id="7193964">.</span><span class="ident" id="7193965">Name</span><span class="op" id="7193969">,</span>&nbsp;<span class="ident" id="7193971">f</span><span class="op" id="7193972">.</span><span class="ident" id="7193973">Name</span><span class="op" id="7193977">,</span>&nbsp;<span class="ident" id="7193979">ft</span><span class="op" id="7193981">,</span>&nbsp;<span class="ident" id="7193983">mtime</span><span class="op" id="7193988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193992">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193999">testFileMode</span><span class="op" id="7194011">(</span><span class="ident" id="7194012">t</span><span class="op" id="7194013">,</span>&nbsp;<span class="ident" id="7194015">zt</span><span class="op" id="7194017">.</span><span class="ident" id="7194018">Name</span><span class="op" id="7194022">,</span>&nbsp;<span class="ident" id="7194024">f</span><span class="op" id="7194025">,</span>&nbsp;<span class="ident" id="7194027">ft</span><span class="op" id="7194029">.</span><span class="ident" id="7194030">Mode</span><span class="op" id="7194034">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194038">var</span>&nbsp;<span class="ident" id="7194042">b</span>&nbsp;<span class="ident" id="7194044">bytes</span><span class="op" id="7194049">.</span><span class="ident" id="7194050">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194058">r</span><span class="op" id="7194059">,</span>&nbsp;<span class="ident" id="7194061">err</span>&nbsp;<span class="op" id="7194065">:=</span>&nbsp;<span class="ident" id="7194068">f</span><span class="op" id="7194069">.</span><span class="ident" id="7194070">Open</span><span class="op" id="7194074">(</span><span class="op" id="7194075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194078">if</span>&nbsp;<span class="ident" id="7194081">err</span>&nbsp;<span class="op" id="7194085">!=</span>&nbsp;<span class="builtintype" id="7194088">nil</span>&nbsp;<span class="op" id="7194092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194096">t</span><span class="op" id="7194097">.</span><span class="ident" id="7194098">Errorf</span><span class="op" id="7194104">(</span><span class="string" id="7194105">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7194113">,</span>&nbsp;<span class="ident" id="7194115">zt</span><span class="op" id="7194117">.</span><span class="ident" id="7194118">Name</span><span class="op" id="7194122">,</span>&nbsp;<span class="ident" id="7194124">err</span><span class="op" id="7194127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194131">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194139">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194143">_</span><span class="op" id="7194144">,</span>&nbsp;<span class="ident" id="7194146">err</span>&nbsp;<span class="op" id="7194150">=</span>&nbsp;<span class="ident" id="7194152">io</span><span class="op" id="7194154">.</span><span class="ident" id="7194155">Copy</span><span class="op" id="7194159">(</span><span class="op" id="7194160">&amp;</span><span class="ident" id="7194161">b</span><span class="op" id="7194162">,</span>&nbsp;<span class="ident" id="7194164">r</span><span class="op" id="7194165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194168">if</span>&nbsp;<span class="ident" id="7194171">err</span>&nbsp;<span class="op" id="7194175">!=</span>&nbsp;<span class="ident" id="7194178">ft</span><span class="op" id="7194180">.</span><span class="ident" id="7194181">ContentErr</span>&nbsp;<span class="op" id="7194192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194196">t</span><span class="op" id="7194197">.</span><span class="ident" id="7194198">Errorf</span><span class="op" id="7194204">(</span><span class="string" id="7194205">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7194241">,</span>&nbsp;<span class="ident" id="7194243">zt</span><span class="op" id="7194245">.</span><span class="ident" id="7194246">Name</span><span class="op" id="7194250">,</span>&nbsp;<span class="ident" id="7194252">err</span><span class="op" id="7194255">,</span>&nbsp;<span class="ident" id="7194257">ft</span><span class="op" id="7194259">.</span><span class="ident" id="7194260">ContentErr</span><span class="op" id="7194270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194273">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194276">if</span>&nbsp;<span class="ident" id="7194279">err</span>&nbsp;<span class="op" id="7194283">!=</span>&nbsp;<span class="builtintype" id="7194286">nil</span>&nbsp;<span class="op" id="7194290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194294">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194305">r</span><span class="op" id="7194306">.</span><span class="ident" id="7194307">Close</span><span class="op" id="7194312">(</span><span class="op" id="7194313">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194317">size</span>&nbsp;<span class="op" id="7194322">:=</span>&nbsp;<span class="builtintype" id="7194325">uint64</span><span class="op" id="7194331">(</span><span class="ident" id="7194332">f</span><span class="op" id="7194333">.</span><span class="ident" id="7194334">UncompressedSize</span><span class="op" id="7194350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194353">if</span>&nbsp;<span class="ident" id="7194356">size</span>&nbsp;<span class="op" id="7194361">==</span>&nbsp;<span class="ident" id="7194364">uint32max</span>&nbsp;<span class="op" id="7194374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194378">size</span>&nbsp;<span class="op" id="7194383">=</span>&nbsp;<span class="ident" id="7194385">f</span><span class="op" id="7194386">.</span><span class="ident" id="7194387">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194410">if</span>&nbsp;<span class="ident" id="7194413">g</span>&nbsp;<span class="op" id="7194415">:=</span>&nbsp;<span class="builtintype" id="7194418">uint64</span><span class="op" id="7194424">(</span><span class="ident" id="7194425">b</span><span class="op" id="7194426">.</span><span class="ident" id="7194427">Len</span><span class="op" id="7194430">(</span><span class="op" id="7194431">)</span><span class="op" id="7194432">)</span><span class="op" id="7194433">;</span>&nbsp;<span class="ident" id="7194435">g</span>&nbsp;<span class="op" id="7194437">!=</span>&nbsp;<span class="ident" id="7194440">size</span>&nbsp;<span class="op" id="7194445">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194449">t</span><span class="op" id="7194450">.</span><span class="ident" id="7194451">Errorf</span><span class="op" id="7194457">(</span><span class="string" id="7194458">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7194506">,</span>&nbsp;<span class="ident" id="7194508">f</span><span class="op" id="7194509">.</span><span class="ident" id="7194510">Name</span><span class="op" id="7194514">,</span>&nbsp;<span class="ident" id="7194516">g</span><span class="op" id="7194517">,</span>&nbsp;<span class="ident" id="7194519">size</span><span class="op" id="7194523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194530">var</span>&nbsp;<span class="ident" id="7194534">c</span>&nbsp;<span class="op" id="7194536">[</span><span class="op" id="7194537">]</span><span class="builtintype" id="7194538">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194544">if</span>&nbsp;<span class="ident" id="7194547">ft</span><span class="op" id="7194549">.</span><span class="ident" id="7194550">Content</span>&nbsp;<span class="op" id="7194558">!=</span>&nbsp;<span class="builtintype" id="7194561">nil</span>&nbsp;<span class="op" id="7194565">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194569">c</span>&nbsp;<span class="op" id="7194571">=</span>&nbsp;<span class="ident" id="7194573">ft</span><span class="op" id="7194575">.</span><span class="ident" id="7194576">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194585">}</span>&nbsp;<span class="keyword" id="7194587">else</span>&nbsp;<span class="keyword" id="7194592">if</span>&nbsp;<span class="ident" id="7194595">c</span><span class="op" id="7194596">,</span>&nbsp;<span class="ident" id="7194598">err</span>&nbsp;<span class="op" id="7194602">=</span>&nbsp;<span class="ident" id="7194604">ioutil</span><span class="op" id="7194610">.</span><span class="ident" id="7194611">ReadFile</span><span class="op" id="7194619">(</span><span class="string" id="7194620">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7194632">+</span>&nbsp;<span class="ident" id="7194634">ft</span><span class="op" id="7194636">.</span><span class="ident" id="7194637">File</span><span class="op" id="7194641">)</span><span class="op" id="7194642">;</span>&nbsp;<span class="ident" id="7194644">err</span>&nbsp;<span class="op" id="7194648">!=</span>&nbsp;<span class="builtintype" id="7194651">nil</span>&nbsp;<span class="op" id="7194655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194659">t</span><span class="op" id="7194660">.</span><span class="ident" id="7194661">Error</span><span class="op" id="7194666">(</span><span class="ident" id="7194667">err</span><span class="op" id="7194670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194674">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194682">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194686">if</span>&nbsp;<span class="ident" id="7194689">b</span><span class="op" id="7194690">.</span><span class="ident" id="7194691">Len</span><span class="op" id="7194694">(</span><span class="op" id="7194695">)</span>&nbsp;<span class="op" id="7194697">!=</span>&nbsp;<span class="builtinfunc" id="7194700">len</span><span class="op" id="7194703">(</span><span class="ident" id="7194704">c</span><span class="op" id="7194705">)</span>&nbsp;<span class="op" id="7194707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194711">t</span><span class="op" id="7194712">.</span><span class="ident" id="7194713">Errorf</span><span class="op" id="7194719">(</span><span class="string" id="7194720">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7194741">,</span>&nbsp;<span class="ident" id="7194743">f</span><span class="op" id="7194744">.</span><span class="ident" id="7194745">Name</span><span class="op" id="7194749">,</span>&nbsp;<span class="ident" id="7194751">b</span><span class="op" id="7194752">.</span><span class="ident" id="7194753">Len</span><span class="op" id="7194756">(</span><span class="op" id="7194757">)</span><span class="op" id="7194758">,</span>&nbsp;<span class="builtinfunc" id="7194760">len</span><span class="op" id="7194763">(</span><span class="ident" id="7194764">c</span><span class="op" id="7194765">)</span><span class="op" id="7194766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194770">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194778">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194782">for</span>&nbsp;<span class="ident" id="7194786">i</span><span class="op" id="7194787">,</span>&nbsp;<span class="ident" id="7194789">b</span>&nbsp;<span class="op" id="7194791">:=</span>&nbsp;<span class="keyword" id="7194794">range</span>&nbsp;<span class="ident" id="7194800">b</span><span class="op" id="7194801">.</span><span class="ident" id="7194802">Bytes</span><span class="op" id="7194807">(</span><span class="op" id="7194808">)</span>&nbsp;<span class="op" id="7194810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194814">if</span>&nbsp;<span class="ident" id="7194817">b</span>&nbsp;<span class="op" id="7194819">!=</span>&nbsp;<span class="ident" id="7194822">c</span><span class="op" id="7194823">[</span><span class="ident" id="7194824">i</span><span class="op" id="7194825">]</span>&nbsp;<span class="op" id="7194827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194832">t</span><span class="op" id="7194833">.</span><span class="ident" id="7194834">Errorf</span><span class="op" id="7194840">(</span><span class="string" id="7194841">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7194869">,</span>&nbsp;<span class="ident" id="7194871">f</span><span class="op" id="7194872">.</span><span class="ident" id="7194873">Name</span><span class="op" id="7194877">,</span>&nbsp;<span class="ident" id="7194879">i</span><span class="op" id="7194880">,</span>&nbsp;<span class="ident" id="7194882">b</span><span class="op" id="7194883">,</span>&nbsp;<span class="ident" id="7194885">c</span><span class="op" id="7194886">[</span><span class="ident" id="7194887">i</span><span class="op" id="7194888">]</span><span class="op" id="7194889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7194894">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194906">}</span><br>
<span class="lineno"></span><span class="op" id="7194908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7194911">func</span>&nbsp;<span class="ident" id="7194916">testFileMode</span><span class="op" id="7194928">(</span><span class="ident" id="7194929">t</span>&nbsp;<span class="op" id="7194931">*</span><span class="ident" id="7194932">testing</span><span class="op" id="7194939">.</span><span class="ident" id="7194940">T</span><span class="op" id="7194941">,</span>&nbsp;<span class="ident" id="7194943">zipName</span>&nbsp;<span class="builtintype" id="7194951">string</span><span class="op" id="7194957">,</span>&nbsp;<span class="ident" id="7194959">f</span>&nbsp;<span class="op" id="7194961">*</span><span class="ident" id="7194962">File</span><span class="op" id="7194966">,</span>&nbsp;<span class="ident" id="7194968">want</span>&nbsp;<span class="ident" id="7194973">os</span><span class="op" id="7194975">.</span><span class="ident" id="7194976">FileMode</span><span class="op" id="7194984">)</span>&nbsp;<span class="op" id="7194986">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194989">mode</span>&nbsp;<span class="op" id="7194994">:=</span>&nbsp;<span class="ident" id="7194997">f</span><span class="op" id="7194998">.</span><span class="ident" id="7194999">Mode</span><span class="op" id="7195003">(</span><span class="op" id="7195004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195007">if</span>&nbsp;<span class="ident" id="7195010">want</span>&nbsp;<span class="op" id="7195015">==</span>&nbsp;<span class="num" id="7195018">0</span>&nbsp;<span class="op" id="7195020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195024">t</span><span class="op" id="7195025">.</span><span class="ident" id="7195026">Errorf</span><span class="op" id="7195032">(</span><span class="string" id="7195033">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7195065">,</span>&nbsp;<span class="ident" id="7195067">zipName</span><span class="op" id="7195074">,</span>&nbsp;<span class="ident" id="7195076">f</span><span class="op" id="7195077">.</span><span class="ident" id="7195078">Name</span><span class="op" id="7195082">,</span>&nbsp;<span class="ident" id="7195084">mode</span><span class="op" id="7195088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195091">}</span>&nbsp;<span class="keyword" id="7195093">else</span>&nbsp;<span class="keyword" id="7195098">if</span>&nbsp;<span class="ident" id="7195101">mode</span>&nbsp;<span class="op" id="7195106">!=</span>&nbsp;<span class="ident" id="7195109">want</span>&nbsp;<span class="op" id="7195114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195118">t</span><span class="op" id="7195119">.</span><span class="ident" id="7195120">Errorf</span><span class="op" id="7195126">(</span><span class="string" id="7195127">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7195157">,</span>&nbsp;<span class="ident" id="7195159">zipName</span><span class="op" id="7195166">,</span>&nbsp;<span class="ident" id="7195168">f</span><span class="op" id="7195169">.</span><span class="ident" id="7195170">Name</span><span class="op" id="7195174">,</span>&nbsp;<span class="ident" id="7195176">want</span><span class="op" id="7195180">,</span>&nbsp;<span class="ident" id="7195182">mode</span><span class="op" id="7195186">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195189">}</span><br>
<span class="lineno"></span><span class="op" id="7195191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7195194">func</span>&nbsp;<span class="ident" id="7195199">TestInvalidFiles</span><span class="op" id="7195215">(</span><span class="ident" id="7195216">t</span>&nbsp;<span class="op" id="7195218">*</span><span class="ident" id="7195219">testing</span><span class="op" id="7195226">.</span><span class="ident" id="7195227">T</span><span class="op" id="7195228">)</span>&nbsp;<span class="op" id="7195230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195233">const</span>&nbsp;<span class="ident" id="7195239">size</span>&nbsp;<span class="op" id="7195244">=</span>&nbsp;<span class="num" id="7195246">1024</span>&nbsp;<span class="op" id="7195251">*</span>&nbsp;<span class="num" id="7195253">70</span>&nbsp;<span class="comment" id="7195256">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195265">b</span>&nbsp;<span class="op" id="7195267">:=</span>&nbsp;<span class="builtinfunc" id="7195270">make</span><span class="op" id="7195274">(</span><span class="op" id="7195275">[</span><span class="op" id="7195276">]</span><span class="builtintype" id="7195277">byte</span><span class="op" id="7195281">,</span>&nbsp;<span class="ident" id="7195283">size</span><span class="op" id="7195287">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7195291">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195302">_</span><span class="op" id="7195303">,</span>&nbsp;<span class="ident" id="7195305">err</span>&nbsp;<span class="op" id="7195309">:=</span>&nbsp;<span class="ident" id="7195312">NewReader</span><span class="op" id="7195321">(</span><span class="ident" id="7195322">bytes</span><span class="op" id="7195327">.</span><span class="ident" id="7195328">NewReader</span><span class="op" id="7195337">(</span><span class="ident" id="7195338">b</span><span class="op" id="7195339">)</span><span class="op" id="7195340">,</span>&nbsp;<span class="ident" id="7195342">size</span><span class="op" id="7195346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195349">if</span>&nbsp;<span class="ident" id="7195352">err</span>&nbsp;<span class="op" id="7195356">!=</span>&nbsp;<span class="ident" id="7195359">ErrFormat</span>&nbsp;<span class="op" id="7195369">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195373">t</span><span class="op" id="7195374">.</span><span class="ident" id="7195375">Errorf</span><span class="op" id="7195381">(</span><span class="string" id="7195382">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7195409">,</span>&nbsp;<span class="ident" id="7195411">err</span><span class="op" id="7195414">,</span>&nbsp;<span class="ident" id="7195416">ErrFormat</span><span class="op" id="7195425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7195432">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195468">sig</span>&nbsp;<span class="op" id="7195472">:=</span>&nbsp;<span class="builtinfunc" id="7195475">make</span><span class="op" id="7195479">(</span><span class="op" id="7195480">[</span><span class="op" id="7195481">]</span><span class="builtintype" id="7195482">byte</span><span class="op" id="7195486">,</span>&nbsp;<span class="num" id="7195488">4</span><span class="op" id="7195489">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195492">binary</span><span class="op" id="7195498">.</span><span class="ident" id="7195499">LittleEndian</span><span class="op" id="7195511">.</span><span class="ident" id="7195512">PutUint32</span><span class="op" id="7195521">(</span><span class="ident" id="7195522">sig</span><span class="op" id="7195525">,</span>&nbsp;<span class="ident" id="7195527">directoryEndSignature</span><span class="op" id="7195548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195551">for</span>&nbsp;<span class="ident" id="7195555">i</span>&nbsp;<span class="op" id="7195557">:=</span>&nbsp;<span class="num" id="7195560">0</span><span class="op" id="7195561">;</span>&nbsp;<span class="ident" id="7195563">i</span>&nbsp;<span class="op" id="7195565">&lt;</span>&nbsp;<span class="ident" id="7195567">size</span><span class="op" id="7195571">-</span><span class="num" id="7195572">4</span><span class="op" id="7195573">;</span>&nbsp;<span class="ident" id="7195575">i</span>&nbsp;<span class="op" id="7195577">+=</span>&nbsp;<span class="num" id="7195580">4</span>&nbsp;<span class="op" id="7195582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7195586">copy</span><span class="op" id="7195590">(</span><span class="ident" id="7195591">b</span><span class="op" id="7195592">[</span><span class="ident" id="7195593">i</span><span class="op" id="7195594">:</span><span class="ident" id="7195595">i</span><span class="op" id="7195596">+</span><span class="num" id="7195597">4</span><span class="op" id="7195598">]</span><span class="op" id="7195599">,</span>&nbsp;<span class="ident" id="7195601">sig</span><span class="op" id="7195604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195610">_</span><span class="op" id="7195611">,</span>&nbsp;<span class="ident" id="7195613">err</span>&nbsp;<span class="op" id="7195617">=</span>&nbsp;<span class="ident" id="7195619">NewReader</span><span class="op" id="7195628">(</span><span class="ident" id="7195629">bytes</span><span class="op" id="7195634">.</span><span class="ident" id="7195635">NewReader</span><span class="op" id="7195644">(</span><span class="ident" id="7195645">b</span><span class="op" id="7195646">)</span><span class="op" id="7195647">,</span>&nbsp;<span class="ident" id="7195649">size</span><span class="op" id="7195653">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195656">if</span>&nbsp;<span class="ident" id="7195659">err</span>&nbsp;<span class="op" id="7195663">!=</span>&nbsp;<span class="ident" id="7195666">ErrFormat</span>&nbsp;<span class="op" id="7195676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195680">t</span><span class="op" id="7195681">.</span><span class="ident" id="7195682">Errorf</span><span class="op" id="7195688">(</span><span class="string" id="7195689">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7195714">,</span>&nbsp;<span class="ident" id="7195716">err</span><span class="op" id="7195719">,</span>&nbsp;<span class="ident" id="7195721">ErrFormat</span><span class="op" id="7195730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195733">}</span><br>
<span class="lineno"></span><span class="op" id="7195735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7195738">func</span>&nbsp;<span class="ident" id="7195743">messWith</span><span class="op" id="7195751">(</span><span class="ident" id="7195752">fileName</span>&nbsp;<span class="builtintype" id="7195761">string</span><span class="op" id="7195767">,</span>&nbsp;<span class="ident" id="7195769">corrupter</span>&nbsp;<span class="keyword" id="7195779">func</span><span class="op" id="7195783">(</span><span class="ident" id="7195784">b</span>&nbsp;<span class="op" id="7195786">[</span><span class="op" id="7195787">]</span><span class="builtintype" id="7195788">byte</span><span class="op" id="7195792">)</span><span class="op" id="7195793">)</span>&nbsp;<span class="op" id="7195795">(</span><span class="ident" id="7195796">r</span>&nbsp;<span class="ident" id="7195798">io</span><span class="op" id="7195800">.</span><span class="ident" id="7195801">ReaderAt</span><span class="op" id="7195809">,</span>&nbsp;<span class="ident" id="7195811">size</span>&nbsp;<span class="builtintype" id="7195816">int64</span><span class="op" id="7195821">)</span>&nbsp;<span class="op" id="7195823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195826">data</span><span class="op" id="7195830">,</span>&nbsp;<span class="ident" id="7195832">err</span>&nbsp;<span class="op" id="7195836">:=</span>&nbsp;<span class="ident" id="7195839">ioutil</span><span class="op" id="7195845">.</span><span class="ident" id="7195846">ReadFile</span><span class="op" id="7195854">(</span><span class="ident" id="7195855">filepath</span><span class="op" id="7195863">.</span><span class="ident" id="7195864">Join</span><span class="op" id="7195868">(</span><span class="string" id="7195869">&#34;testdata&#34;</span><span class="op" id="7195879">,</span>&nbsp;<span class="ident" id="7195881">fileName</span><span class="op" id="7195889">)</span><span class="op" id="7195890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195893">if</span>&nbsp;<span class="ident" id="7195896">err</span>&nbsp;<span class="op" id="7195900">!=</span>&nbsp;<span class="builtintype" id="7195903">nil</span>&nbsp;<span class="op" id="7195907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7195911">panic</span><span class="op" id="7195916">(</span><span class="string" id="7195917">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7195934">+</span>&nbsp;<span class="ident" id="7195936">fileName</span>&nbsp;<span class="op" id="7195945">+</span>&nbsp;<span class="string" id="7195947">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7195952">+</span>&nbsp;<span class="ident" id="7195954">err</span><span class="op" id="7195957">.</span><span class="ident" id="7195958">Error</span><span class="op" id="7195963">(</span><span class="op" id="7195964">)</span><span class="op" id="7195965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195968">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195971">corrupter</span><span class="op" id="7195980">(</span><span class="ident" id="7195981">data</span><span class="op" id="7195985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195988">return</span>&nbsp;<span class="ident" id="7195995">bytes</span><span class="op" id="7196000">.</span><span class="ident" id="7196001">NewReader</span><span class="op" id="7196010">(</span><span class="ident" id="7196011">data</span><span class="op" id="7196015">)</span><span class="op" id="7196016">,</span>&nbsp;<span class="builtintype" id="7196018">int64</span><span class="op" id="7196023">(</span><span class="builtinfunc" id="7196024">len</span><span class="op" id="7196027">(</span><span class="ident" id="7196028">data</span><span class="op" id="7196032">)</span><span class="op" id="7196033">)</span><br>
<span class="lineno"></span><span class="op" id="7196035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7196038">func</span>&nbsp;<span class="ident" id="7196043">returnCorruptCRC32Zip</span><span class="op" id="7196064">(</span><span class="op" id="7196065">)</span>&nbsp;<span class="op" id="7196067">(</span><span class="ident" id="7196068">r</span>&nbsp;<span class="ident" id="7196070">io</span><span class="op" id="7196072">.</span><span class="ident" id="7196073">ReaderAt</span><span class="op" id="7196081">,</span>&nbsp;<span class="ident" id="7196083">size</span>&nbsp;<span class="builtintype" id="7196088">int64</span><span class="op" id="7196093">)</span>&nbsp;<span class="op" id="7196095">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196098">return</span>&nbsp;<span class="ident" id="7196105">messWith</span><span class="op" id="7196113">(</span><span class="string" id="7196114">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7196140">,</span>&nbsp;<span class="keyword" id="7196142">func</span><span class="op" id="7196146">(</span><span class="ident" id="7196147">b</span>&nbsp;<span class="op" id="7196149">[</span><span class="op" id="7196150">]</span><span class="builtintype" id="7196151">byte</span><span class="op" id="7196155">)</span>&nbsp;<span class="op" id="7196157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196161">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196216">b</span><span class="op" id="7196217">[</span><span class="num" id="7196218">0x2d</span><span class="op" id="7196222">]</span><span class="op" id="7196223">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196227">}</span><span class="op" id="7196228">)</span><br>
<span class="lineno"></span><span class="op" id="7196230">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7196233">func</span>&nbsp;<span class="ident" id="7196238">returnCorruptNotStreamedZip</span><span class="op" id="7196265">(</span><span class="op" id="7196266">)</span>&nbsp;<span class="op" id="7196268">(</span><span class="ident" id="7196269">r</span>&nbsp;<span class="ident" id="7196271">io</span><span class="op" id="7196273">.</span><span class="ident" id="7196274">ReaderAt</span><span class="op" id="7196282">,</span>&nbsp;<span class="ident" id="7196284">size</span>&nbsp;<span class="builtintype" id="7196289">int64</span><span class="op" id="7196294">)</span>&nbsp;<span class="op" id="7196296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196299">return</span>&nbsp;<span class="ident" id="7196306">messWith</span><span class="op" id="7196314">(</span><span class="string" id="7196315">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7196339">,</span>&nbsp;<span class="keyword" id="7196341">func</span><span class="op" id="7196345">(</span><span class="ident" id="7196346">b</span>&nbsp;<span class="op" id="7196348">[</span><span class="op" id="7196349">]</span><span class="builtintype" id="7196350">byte</span><span class="op" id="7196354">)</span>&nbsp;<span class="op" id="7196356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196360">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196409">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196454">b</span><span class="op" id="7196455">[</span><span class="num" id="7196456">0x11</span><span class="op" id="7196460">]</span><span class="op" id="7196461">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196466">b</span><span class="op" id="7196467">[</span><span class="num" id="7196468">0x9d</span><span class="op" id="7196472">]</span><span class="op" id="7196473">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196479">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196534">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196591">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196649">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196703">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196758">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196779">}</span><span class="op" id="7196780">)</span><br>
<span class="lineno">465</span><span class="op" id="7196782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7196785">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7196849">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7196910">func</span>&nbsp;<span class="ident" id="7196915">rZipBytes</span><span class="op" id="7196924">(</span><span class="op" id="7196925">)</span>&nbsp;<span class="op" id="7196927">[</span><span class="op" id="7196928">]</span><span class="builtintype" id="7196929">byte</span>&nbsp;<span class="op" id="7196934">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196937">s</span>&nbsp;<span class="op" id="7196939">:=</span>&nbsp;<span class="string" id="7196942">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7198490">s</span>&nbsp;<span class="op" id="7198492">=</span>&nbsp;<span class="ident" id="7198494">regexp</span><span class="op" id="7198500">.</span><span class="ident" id="7198501">MustCompile</span><span class="op" id="7198512">(</span><span class="string" id="7198513">`[0-9a-f]{7}`</span><span class="op" id="7198526">)</span><span class="op" id="7198527">.</span><span class="ident" id="7198528">ReplaceAllString</span><span class="op" id="7198544">(</span><span class="ident" id="7198545">s</span><span class="op" id="7198546">,</span>&nbsp;<span class="string" id="7198548">&#34;&#34;</span><span class="op" id="7198550">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7198553">s</span>&nbsp;<span class="op" id="7198555">=</span>&nbsp;<span class="ident" id="7198557">regexp</span><span class="op" id="7198563">.</span><span class="ident" id="7198564">MustCompile</span><span class="op" id="7198575">(</span><span class="string" id="7198576">`\s+`</span><span class="op" id="7198581">)</span><span class="op" id="7198582">.</span><span class="ident" id="7198583">ReplaceAllString</span><span class="op" id="7198599">(</span><span class="ident" id="7198600">s</span><span class="op" id="7198601">,</span>&nbsp;<span class="string" id="7198603">&#34;&#34;</span><span class="op" id="7198605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7198608">b</span><span class="op" id="7198609">,</span>&nbsp;<span class="ident" id="7198611">err</span>&nbsp;<span class="op" id="7198615">:=</span>&nbsp;<span class="ident" id="7198618">hex</span><span class="op" id="7198621">.</span><span class="ident" id="7198622">DecodeString</span><span class="op" id="7198634">(</span><span class="ident" id="7198635">s</span><span class="op" id="7198636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7198639">if</span>&nbsp;<span class="ident" id="7198642">err</span>&nbsp;<span class="op" id="7198646">!=</span>&nbsp;<span class="builtintype" id="7198649">nil</span>&nbsp;<span class="op" id="7198653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7198657">panic</span><span class="op" id="7198662">(</span><span class="ident" id="7198663">err</span><span class="op" id="7198666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7198669">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7198672">return</span>&nbsp;<span class="ident" id="7198679">b</span><br>
<span class="lineno"></span><span class="op" id="7198681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7198684">func</span>&nbsp;<span class="ident" id="7198689">returnRecursiveZip</span><span class="op" id="7198707">(</span><span class="op" id="7198708">)</span>&nbsp;<span class="op" id="7198710">(</span><span class="ident" id="7198711">r</span>&nbsp;<span class="ident" id="7198713">io</span><span class="op" id="7198715">.</span><span class="ident" id="7198716">ReaderAt</span><span class="op" id="7198724">,</span>&nbsp;<span class="ident" id="7198726">size</span>&nbsp;<span class="builtintype" id="7198731">int64</span><span class="op" id="7198736">)</span>&nbsp;<span class="op" id="7198738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7198741">b</span>&nbsp;<span class="op" id="7198743">:=</span>&nbsp;<span class="ident" id="7198746">rZipBytes</span><span class="op" id="7198755">(</span><span class="op" id="7198756">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7198759">return</span>&nbsp;<span class="ident" id="7198766">bytes</span><span class="op" id="7198771">.</span><span class="ident" id="7198772">NewReader</span><span class="op" id="7198781">(</span><span class="ident" id="7198782">b</span><span class="op" id="7198783">)</span><span class="op" id="7198784">,</span>&nbsp;<span class="builtintype" id="7198786">int64</span><span class="op" id="7198791">(</span><span class="builtinfunc" id="7198792">len</span><span class="op" id="7198795">(</span><span class="ident" id="7198796">b</span><span class="op" id="7198797">)</span><span class="op" id="7198798">)</span><br>
<span class="lineno"></span><span class="op" id="7198800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7198803">func</span>&nbsp;<span class="ident" id="7198808">TestIssue8186</span><span class="op" id="7198821">(</span><span class="ident" id="7198822">t</span>&nbsp;<span class="op" id="7198824">*</span><span class="ident" id="7198825">testing</span><span class="op" id="7198832">.</span><span class="ident" id="7198833">T</span><span class="op" id="7198834">)</span>&nbsp;<span class="op" id="7198836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7198839">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7198900">dirEnts</span>&nbsp;<span class="op" id="7198908">:=</span>&nbsp;<span class="op" id="7198911">[</span><span class="op" id="7198912">]</span><span class="builtintype" id="7198913">string</span><span class="op" id="7198919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7198923">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7199150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7199154">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7199332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7199336">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7199507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7199511">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7199679">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7199683">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7199866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7199870">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7200052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7200056">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7200226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7200230">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98o\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7200399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7200403">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7200576">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7200579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7200582">for</span>&nbsp;<span class="ident" id="7200586">i</span><span class="op" id="7200587">,</span>&nbsp;<span class="ident" id="7200589">s</span>&nbsp;<span class="op" id="7200591">:=</span>&nbsp;<span class="keyword" id="7200594">range</span>&nbsp;<span class="ident" id="7200600">dirEnts</span>&nbsp;<span class="op" id="7200608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7200612">var</span>&nbsp;<span class="ident" id="7200616">f</span>&nbsp;<span class="ident" id="7200618">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7200625">err</span>&nbsp;<span class="op" id="7200629">:=</span>&nbsp;<span class="ident" id="7200632">readDirectoryHeader</span><span class="op" id="7200651">(</span><span class="op" id="7200652">&amp;</span><span class="ident" id="7200653">f</span><span class="op" id="7200654">,</span>&nbsp;<span class="ident" id="7200656">strings</span><span class="op" id="7200663">.</span><span class="ident" id="7200664">NewReader</span><span class="op" id="7200673">(</span><span class="ident" id="7200674">s</span><span class="op" id="7200675">)</span><span class="op" id="7200676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7200680">if</span>&nbsp;<span class="ident" id="7200683">err</span>&nbsp;<span class="op" id="7200687">!=</span>&nbsp;<span class="builtintype" id="7200690">nil</span>&nbsp;<span class="op" id="7200694">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7200699">t</span><span class="op" id="7200700">.</span><span class="ident" id="7200701">Errorf</span><span class="op" id="7200707">(</span><span class="string" id="7200708">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7200731">,</span>&nbsp;<span class="ident" id="7200733">i</span><span class="op" id="7200734">,</span>&nbsp;<span class="ident" id="7200736">err</span><span class="op" id="7200739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7200743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7200746">}</span><br>
<span class="lineno"></span><span class="op" id="7200748">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
