<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="4782412">package</span>&nbsp;<span class="ident" id="4782420">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782427">import</span>&nbsp;<span class="op" id="4782434">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4782437">&#34;errors&#34;</span><br>
<span class="lineno">5</span><span class="op" id="4782446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782449">//&nbsp;Excep&nbsp;defines&nbsp;an&nbsp;exception&nbsp;error&nbsp;with&nbsp;a&nbsp;code</span><br>
<span class="lineno"></span><span class="keyword" id="4782497">type</span>&nbsp;<span class="ident" id="4782502">Excep</span>&nbsp;<span class="keyword" id="4782508">struct</span>&nbsp;<span class="op" id="4782515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782518">Code</span>&nbsp;<span class="builtintype" id="4782523">byte</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782529">Arg</span>&nbsp;&nbsp;<span class="builtintype" id="4782534">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782542">Err</span>&nbsp;&nbsp;<span class="builtintype" id="4782547">error</span><br>
<span class="lineno"></span><span class="op" id="4782553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4782556">//&nbsp;NewExcep&nbsp;creates&nbsp;a&nbsp;new&nbsp;Exception&nbsp;with&nbsp;a&nbsp;particular&nbsp;code&nbsp;and&nbsp;message.</span><br>
<span class="lineno">15</span><span class="keyword" id="4782628">func</span>&nbsp;<span class="ident" id="4782633">newExcep</span><span class="op" id="4782641">(</span><span class="ident" id="4782642">c</span>&nbsp;<span class="builtintype" id="4782644">byte</span><span class="op" id="4782648">,</span>&nbsp;<span class="ident" id="4782650">s</span>&nbsp;<span class="builtintype" id="4782652">string</span><span class="op" id="4782658">)</span>&nbsp;<span class="op" id="4782660">*</span><span class="ident" id="4782661">Excep</span>&nbsp;<span class="op" id="4782667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782670">ret</span>&nbsp;<span class="op" id="4782674">:=</span>&nbsp;<span class="builtinfunc" id="4782677">new</span><span class="op" id="4782680">(</span><span class="ident" id="4782681">Excep</span><span class="op" id="4782686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782689">ret</span><span class="op" id="4782692">.</span><span class="ident" id="4782693">Code</span>&nbsp;<span class="op" id="4782698">=</span>&nbsp;<span class="ident" id="4782700">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782703">ret</span><span class="op" id="4782706">.</span><span class="ident" id="4782707">Err</span>&nbsp;<span class="op" id="4782711">=</span>&nbsp;<span class="ident" id="4782713">errors</span><span class="op" id="4782719">.</span><span class="ident" id="4782720">New</span><span class="op" id="4782723">(</span><span class="ident" id="4782724">s</span><span class="op" id="4782725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782728">return</span>&nbsp;<span class="ident" id="4782735">ret</span><br>
<span class="lineno">20</span><span class="op" id="4782739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782742">func</span>&nbsp;<span class="op" id="4782747">(</span><span class="ident" id="4782748">e</span>&nbsp;<span class="op" id="4782750">*</span><span class="ident" id="4782751">Excep</span><span class="op" id="4782756">)</span>&nbsp;<span class="ident" id="4782758">Error</span><span class="op" id="4782763">(</span><span class="op" id="4782764">)</span>&nbsp;<span class="builtintype" id="4782766">string</span>&nbsp;<span class="op" id="4782773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4782776">return</span>&nbsp;<span class="ident" id="4782783">e</span><span class="op" id="4782784">.</span><span class="ident" id="4782785">Err</span><span class="op" id="4782788">.</span><span class="ident" id="4782789">Error</span><span class="op" id="4782794">(</span><span class="op" id="4782795">)</span><br>
<span class="lineno"></span><span class="op" id="4782797">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="4782800">//&nbsp;Exception&nbsp;codes</span><br>
<span class="lineno"></span><span class="keyword" id="4782819">const</span>&nbsp;<span class="op" id="4782825">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782828">ErrHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782844">=</span>&nbsp;<span class="num" id="4782846">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782849">ErrTimer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782865">=</span>&nbsp;<span class="num" id="4782867">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782870">ErrInvalidInst</span>&nbsp;&nbsp;<span class="op" id="4782886">=</span>&nbsp;<span class="num" id="4782888">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782891">ErrOutOfRange</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4782907">=</span>&nbsp;<span class="num" id="4782909">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782912">ErrMisalign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782928">=</span>&nbsp;<span class="num" id="4782930">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782933">ErrPageFault</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782949">=</span>&nbsp;<span class="num" id="4782951">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782954">ErrPageReadonly</span>&nbsp;<span class="op" id="4782970">=</span>&nbsp;<span class="num" id="4782972">7</span><br>
<span class="lineno">35</span><span class="op" id="4782974">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782977">var</span>&nbsp;<span class="op" id="4782981">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4782984">errHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782999">=</span>&nbsp;<span class="ident" id="4783001">newExcep</span><span class="op" id="4783009">(</span><span class="ident" id="4783010">ErrHalt</span><span class="op" id="4783017">,</span>&nbsp;<span class="string" id="4783019">&#34;halt&#34;</span><span class="op" id="4783025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783028">errTimeInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783043">=</span>&nbsp;<span class="ident" id="4783045">newExcep</span><span class="op" id="4783053">(</span><span class="ident" id="4783054">ErrTimer</span><span class="op" id="4783062">,</span>&nbsp;<span class="string" id="4783064">&#34;time&nbsp;interrupt&#34;</span><span class="op" id="4783080">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783083">errInvalidInst</span>&nbsp;<span class="op" id="4783098">=</span>&nbsp;<span class="ident" id="4783100">newExcep</span><span class="op" id="4783108">(</span><span class="ident" id="4783109">ErrInvalidInst</span><span class="op" id="4783123">,</span>&nbsp;<span class="string" id="4783125">&#34;invalid&nbsp;instruction&#34;</span><span class="op" id="4783146">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783150">errOutOfRange</span>&nbsp;<span class="op" id="4783164">=</span>&nbsp;<span class="ident" id="4783166">newExcep</span><span class="op" id="4783174">(</span><span class="ident" id="4783175">ErrOutOfRange</span><span class="op" id="4783188">,</span>&nbsp;<span class="string" id="4783190">&#34;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="4783204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783207">errMisalign</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4783221">=</span>&nbsp;<span class="ident" id="4783223">newExcep</span><span class="op" id="4783231">(</span><span class="ident" id="4783232">ErrMisalign</span><span class="op" id="4783243">,</span>&nbsp;<span class="string" id="4783245">&#34;address&nbsp;misalign&#34;</span><span class="op" id="4783263">)</span><br>
<span class="lineno"></span><span class="op" id="4783265">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="4783268">func</span>&nbsp;<span class="ident" id="4783273">newPageFault</span><span class="op" id="4783285">(</span><span class="ident" id="4783286">va</span>&nbsp;<span class="builtintype" id="4783289">uint32</span><span class="op" id="4783295">)</span>&nbsp;<span class="op" id="4783297">*</span><span class="ident" id="4783298">Excep</span>&nbsp;<span class="op" id="4783304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783307">ret</span>&nbsp;<span class="op" id="4783311">:=</span>&nbsp;<span class="ident" id="4783314">newExcep</span><span class="op" id="4783322">(</span><span class="ident" id="4783323">ErrPageFault</span><span class="op" id="4783335">,</span>&nbsp;<span class="string" id="4783337">&#34;page&nbsp;fault&#34;</span><span class="op" id="4783349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783352">ret</span><span class="op" id="4783355">.</span><span class="ident" id="4783356">Arg</span>&nbsp;<span class="op" id="4783360">=</span>&nbsp;<span class="ident" id="4783362">va</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783366">return</span>&nbsp;<span class="ident" id="4783373">ret</span><br>
<span class="lineno">50</span><span class="op" id="4783377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4783380">func</span>&nbsp;<span class="ident" id="4783385">newPageReadonly</span><span class="op" id="4783400">(</span><span class="ident" id="4783401">va</span>&nbsp;<span class="builtintype" id="4783404">uint32</span><span class="op" id="4783410">)</span>&nbsp;<span class="op" id="4783412">*</span><span class="ident" id="4783413">Excep</span>&nbsp;<span class="op" id="4783419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783422">ret</span>&nbsp;<span class="op" id="4783426">:=</span>&nbsp;<span class="ident" id="4783429">newExcep</span><span class="op" id="4783437">(</span><span class="ident" id="4783438">ErrPageReadonly</span><span class="op" id="4783453">,</span>&nbsp;<span class="string" id="4783455">&#34;page&nbsp;read-only&#34;</span><span class="op" id="4783471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4783474">ret</span><span class="op" id="4783477">.</span><span class="ident" id="4783478">Arg</span>&nbsp;<span class="op" id="4783482">=</span>&nbsp;<span class="ident" id="4783484">va</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4783488">return</span>&nbsp;<span class="ident" id="4783495">ret</span><br>
<span class="lineno"></span><span class="op" id="4783499">}</span>
</div>
</body>
</html>
