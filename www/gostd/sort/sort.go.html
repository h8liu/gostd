<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html" class="current">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2932355">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2932410">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2932464">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2932515">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2932587">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2932603">package</span>&nbsp;<span class="ident" id="2932611">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932617">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2932689">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2932762">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2932827">type</span>&nbsp;<span class="ident" id="2932832">Interface</span>&nbsp;<span class="keyword" id="2932842">interface</span>&nbsp;<span class="op" id="2932852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2932855">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2932908">Len</span><span class="op" id="2932911">(</span><span class="op" id="2932912">)</span>&nbsp;<span class="builtintype" id="2932914">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2932919">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2932961">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933018">Less</span><span class="op" id="2933022">(</span><span class="ident" id="2933023">i</span><span class="op" id="2933024">,</span>&nbsp;<span class="ident" id="2933026">j</span>&nbsp;<span class="builtintype" id="2933028">int</span><span class="op" id="2933031">)</span>&nbsp;<span class="builtintype" id="2933033">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2933039">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933089">Swap</span><span class="op" id="2933093">(</span><span class="ident" id="2933094">i</span><span class="op" id="2933095">,</span>&nbsp;<span class="ident" id="2933097">j</span>&nbsp;<span class="builtintype" id="2933099">int</span><span class="op" id="2933102">)</span><br>
<span class="lineno">20</span><span class="op" id="2933104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2933107">func</span>&nbsp;<span class="ident" id="2933112">min</span><span class="op" id="2933115">(</span><span class="ident" id="2933116">a</span><span class="op" id="2933117">,</span>&nbsp;<span class="ident" id="2933119">b</span>&nbsp;<span class="builtintype" id="2933121">int</span><span class="op" id="2933124">)</span>&nbsp;<span class="builtintype" id="2933126">int</span>&nbsp;<span class="op" id="2933130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933133">if</span>&nbsp;<span class="ident" id="2933136">a</span>&nbsp;<span class="op" id="2933138">&lt;</span>&nbsp;<span class="ident" id="2933140">b</span>&nbsp;<span class="op" id="2933142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933146">return</span>&nbsp;<span class="ident" id="2933153">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933159">return</span>&nbsp;<span class="ident" id="2933166">b</span><br>
<span class="lineno"></span><span class="op" id="2933168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933171">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2933189">func</span>&nbsp;<span class="ident" id="2933194">insertionSort</span><span class="op" id="2933207">(</span><span class="ident" id="2933208">data</span>&nbsp;<span class="ident" id="2933213">Interface</span><span class="op" id="2933222">,</span>&nbsp;<span class="ident" id="2933224">a</span><span class="op" id="2933225">,</span>&nbsp;<span class="ident" id="2933227">b</span>&nbsp;<span class="builtintype" id="2933229">int</span><span class="op" id="2933232">)</span>&nbsp;<span class="op" id="2933234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933237">for</span>&nbsp;<span class="ident" id="2933241">i</span>&nbsp;<span class="op" id="2933243">:=</span>&nbsp;<span class="ident" id="2933246">a</span>&nbsp;<span class="op" id="2933248">+</span>&nbsp;<span class="num" id="2933250">1</span><span class="op" id="2933251">;</span>&nbsp;<span class="ident" id="2933253">i</span>&nbsp;<span class="op" id="2933255">&lt;</span>&nbsp;<span class="ident" id="2933257">b</span><span class="op" id="2933258">;</span>&nbsp;<span class="ident" id="2933260">i</span><span class="op" id="2933261">++</span>&nbsp;<span class="op" id="2933264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933268">for</span>&nbsp;<span class="ident" id="2933272">j</span>&nbsp;<span class="op" id="2933274">:=</span>&nbsp;<span class="ident" id="2933277">i</span><span class="op" id="2933278">;</span>&nbsp;<span class="ident" id="2933280">j</span>&nbsp;<span class="op" id="2933282">&gt;</span>&nbsp;<span class="ident" id="2933284">a</span>&nbsp;<span class="op" id="2933286">&amp;&amp;</span>&nbsp;<span class="ident" id="2933289">data</span><span class="op" id="2933293">.</span><span class="ident" id="2933294">Less</span><span class="op" id="2933298">(</span><span class="ident" id="2933299">j</span><span class="op" id="2933300">,</span>&nbsp;<span class="ident" id="2933302">j</span><span class="op" id="2933303">-</span><span class="num" id="2933304">1</span><span class="op" id="2933305">)</span><span class="op" id="2933306">;</span>&nbsp;<span class="ident" id="2933308">j</span><span class="op" id="2933309">--</span>&nbsp;<span class="op" id="2933312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933317">data</span><span class="op" id="2933321">.</span><span class="ident" id="2933322">Swap</span><span class="op" id="2933326">(</span><span class="ident" id="2933327">j</span><span class="op" id="2933328">,</span>&nbsp;<span class="ident" id="2933330">j</span><span class="op" id="2933331">-</span><span class="num" id="2933332">1</span><span class="op" id="2933333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933337">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933340">}</span><br>
<span class="lineno"></span><span class="op" id="2933342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933345">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2933403">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2933473">func</span>&nbsp;<span class="ident" id="2933478">siftDown</span><span class="op" id="2933486">(</span><span class="ident" id="2933487">data</span>&nbsp;<span class="ident" id="2933492">Interface</span><span class="op" id="2933501">,</span>&nbsp;<span class="ident" id="2933503">lo</span><span class="op" id="2933505">,</span>&nbsp;<span class="ident" id="2933507">hi</span><span class="op" id="2933509">,</span>&nbsp;<span class="ident" id="2933511">first</span>&nbsp;<span class="builtintype" id="2933517">int</span><span class="op" id="2933520">)</span>&nbsp;<span class="op" id="2933522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933525">root</span>&nbsp;<span class="op" id="2933530">:=</span>&nbsp;<span class="ident" id="2933533">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933537">for</span>&nbsp;<span class="op" id="2933541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933545">child</span>&nbsp;<span class="op" id="2933551">:=</span>&nbsp;<span class="num" id="2933554">2</span><span class="op" id="2933555">*</span><span class="ident" id="2933556">root</span>&nbsp;<span class="op" id="2933561">+</span>&nbsp;<span class="num" id="2933563">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933567">if</span>&nbsp;<span class="ident" id="2933570">child</span>&nbsp;<span class="op" id="2933576">&gt;=</span>&nbsp;<span class="ident" id="2933579">hi</span>&nbsp;<span class="op" id="2933582">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933587">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933599">if</span>&nbsp;<span class="ident" id="2933602">child</span><span class="op" id="2933607">+</span><span class="num" id="2933608">1</span>&nbsp;<span class="op" id="2933610">&lt;</span>&nbsp;<span class="ident" id="2933612">hi</span>&nbsp;<span class="op" id="2933615">&amp;&amp;</span>&nbsp;<span class="ident" id="2933618">data</span><span class="op" id="2933622">.</span><span class="ident" id="2933623">Less</span><span class="op" id="2933627">(</span><span class="ident" id="2933628">first</span><span class="op" id="2933633">+</span><span class="ident" id="2933634">child</span><span class="op" id="2933639">,</span>&nbsp;<span class="ident" id="2933641">first</span><span class="op" id="2933646">+</span><span class="ident" id="2933647">child</span><span class="op" id="2933652">+</span><span class="num" id="2933653">1</span><span class="op" id="2933654">)</span>&nbsp;<span class="op" id="2933656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933661">child</span><span class="op" id="2933666">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933671">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933675">if</span>&nbsp;<span class="op" id="2933678">!</span><span class="ident" id="2933679">data</span><span class="op" id="2933683">.</span><span class="ident" id="2933684">Less</span><span class="op" id="2933688">(</span><span class="ident" id="2933689">first</span><span class="op" id="2933694">+</span><span class="ident" id="2933695">root</span><span class="op" id="2933699">,</span>&nbsp;<span class="ident" id="2933701">first</span><span class="op" id="2933706">+</span><span class="ident" id="2933707">child</span><span class="op" id="2933712">)</span>&nbsp;<span class="op" id="2933714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933719">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933732">data</span><span class="op" id="2933736">.</span><span class="ident" id="2933737">Swap</span><span class="op" id="2933741">(</span><span class="ident" id="2933742">first</span><span class="op" id="2933747">+</span><span class="ident" id="2933748">root</span><span class="op" id="2933752">,</span>&nbsp;<span class="ident" id="2933754">first</span><span class="op" id="2933759">+</span><span class="ident" id="2933760">child</span><span class="op" id="2933765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933769">root</span>&nbsp;<span class="op" id="2933774">=</span>&nbsp;<span class="ident" id="2933776">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933783">}</span><br>
<span class="lineno"></span><span class="op" id="2933785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2933788">func</span>&nbsp;<span class="ident" id="2933793">heapSort</span><span class="op" id="2933801">(</span><span class="ident" id="2933802">data</span>&nbsp;<span class="ident" id="2933807">Interface</span><span class="op" id="2933816">,</span>&nbsp;<span class="ident" id="2933818">a</span><span class="op" id="2933819">,</span>&nbsp;<span class="ident" id="2933821">b</span>&nbsp;<span class="builtintype" id="2933823">int</span><span class="op" id="2933826">)</span>&nbsp;<span class="op" id="2933828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933831">first</span>&nbsp;<span class="op" id="2933837">:=</span>&nbsp;<span class="ident" id="2933840">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933843">lo</span>&nbsp;<span class="op" id="2933846">:=</span>&nbsp;<span class="num" id="2933849">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933852">hi</span>&nbsp;<span class="op" id="2933855">:=</span>&nbsp;<span class="ident" id="2933858">b</span>&nbsp;<span class="op" id="2933860">-</span>&nbsp;<span class="ident" id="2933862">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2933866">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933911">for</span>&nbsp;<span class="ident" id="2933915">i</span>&nbsp;<span class="op" id="2933917">:=</span>&nbsp;<span class="op" id="2933920">(</span><span class="ident" id="2933921">hi</span>&nbsp;<span class="op" id="2933924">-</span>&nbsp;<span class="num" id="2933926">1</span><span class="op" id="2933927">)</span>&nbsp;<span class="op" id="2933929">/</span>&nbsp;<span class="num" id="2933931">2</span><span class="op" id="2933932">;</span>&nbsp;<span class="ident" id="2933934">i</span>&nbsp;<span class="op" id="2933936">&gt;=</span>&nbsp;<span class="num" id="2933939">0</span><span class="op" id="2933940">;</span>&nbsp;<span class="ident" id="2933942">i</span><span class="op" id="2933943">--</span>&nbsp;<span class="op" id="2933946">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933950">siftDown</span><span class="op" id="2933958">(</span><span class="ident" id="2933959">data</span><span class="op" id="2933963">,</span>&nbsp;<span class="ident" id="2933965">i</span><span class="op" id="2933966">,</span>&nbsp;<span class="ident" id="2933968">hi</span><span class="op" id="2933970">,</span>&nbsp;<span class="ident" id="2933972">first</span><span class="op" id="2933977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2933984">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934035">for</span>&nbsp;<span class="ident" id="2934039">i</span>&nbsp;<span class="op" id="2934041">:=</span>&nbsp;<span class="ident" id="2934044">hi</span>&nbsp;<span class="op" id="2934047">-</span>&nbsp;<span class="num" id="2934049">1</span><span class="op" id="2934050">;</span>&nbsp;<span class="ident" id="2934052">i</span>&nbsp;<span class="op" id="2934054">&gt;=</span>&nbsp;<span class="num" id="2934057">0</span><span class="op" id="2934058">;</span>&nbsp;<span class="ident" id="2934060">i</span><span class="op" id="2934061">--</span>&nbsp;<span class="op" id="2934064">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934068">data</span><span class="op" id="2934072">.</span><span class="ident" id="2934073">Swap</span><span class="op" id="2934077">(</span><span class="ident" id="2934078">first</span><span class="op" id="2934083">,</span>&nbsp;<span class="ident" id="2934085">first</span><span class="op" id="2934090">+</span><span class="ident" id="2934091">i</span><span class="op" id="2934092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934096">siftDown</span><span class="op" id="2934104">(</span><span class="ident" id="2934105">data</span><span class="op" id="2934109">,</span>&nbsp;<span class="ident" id="2934111">lo</span><span class="op" id="2934113">,</span>&nbsp;<span class="ident" id="2934115">i</span><span class="op" id="2934116">,</span>&nbsp;<span class="ident" id="2934118">first</span><span class="op" id="2934123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2934126">}</span><br>
<span class="lineno"></span><span class="op" id="2934128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2934131">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2934176">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934233">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2934327">func</span>&nbsp;<span class="ident" id="2934332">medianOfThree</span><span class="op" id="2934345">(</span><span class="ident" id="2934346">data</span>&nbsp;<span class="ident" id="2934351">Interface</span><span class="op" id="2934360">,</span>&nbsp;<span class="ident" id="2934362">a</span><span class="op" id="2934363">,</span>&nbsp;<span class="ident" id="2934365">b</span><span class="op" id="2934366">,</span>&nbsp;<span class="ident" id="2934368">c</span>&nbsp;<span class="builtintype" id="2934370">int</span><span class="op" id="2934373">)</span>&nbsp;<span class="op" id="2934375">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934378">m0</span>&nbsp;<span class="op" id="2934381">:=</span>&nbsp;<span class="ident" id="2934384">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934387">m1</span>&nbsp;<span class="op" id="2934390">:=</span>&nbsp;<span class="ident" id="2934393">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934396">m2</span>&nbsp;<span class="op" id="2934399">:=</span>&nbsp;<span class="ident" id="2934402">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2934405">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934435">if</span>&nbsp;<span class="ident" id="2934438">data</span><span class="op" id="2934442">.</span><span class="ident" id="2934443">Less</span><span class="op" id="2934447">(</span><span class="ident" id="2934448">m1</span><span class="op" id="2934450">,</span>&nbsp;<span class="ident" id="2934452">m0</span><span class="op" id="2934454">)</span>&nbsp;<span class="op" id="2934456">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934460">data</span><span class="op" id="2934464">.</span><span class="ident" id="2934465">Swap</span><span class="op" id="2934469">(</span><span class="ident" id="2934470">m1</span><span class="op" id="2934472">,</span>&nbsp;<span class="ident" id="2934474">m0</span><span class="op" id="2934476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2934479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934482">if</span>&nbsp;<span class="ident" id="2934485">data</span><span class="op" id="2934489">.</span><span class="ident" id="2934490">Less</span><span class="op" id="2934494">(</span><span class="ident" id="2934495">m2</span><span class="op" id="2934497">,</span>&nbsp;<span class="ident" id="2934499">m1</span><span class="op" id="2934501">)</span>&nbsp;<span class="op" id="2934503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934507">data</span><span class="op" id="2934511">.</span><span class="ident" id="2934512">Swap</span><span class="op" id="2934516">(</span><span class="ident" id="2934517">m2</span><span class="op" id="2934519">,</span>&nbsp;<span class="ident" id="2934521">m1</span><span class="op" id="2934523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2934526">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934529">if</span>&nbsp;<span class="ident" id="2934532">data</span><span class="op" id="2934536">.</span><span class="ident" id="2934537">Less</span><span class="op" id="2934541">(</span><span class="ident" id="2934542">m1</span><span class="op" id="2934544">,</span>&nbsp;<span class="ident" id="2934546">m0</span><span class="op" id="2934548">)</span>&nbsp;<span class="op" id="2934550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934554">data</span><span class="op" id="2934558">.</span><span class="ident" id="2934559">Swap</span><span class="op" id="2934563">(</span><span class="ident" id="2934564">m1</span><span class="op" id="2934566">,</span>&nbsp;<span class="ident" id="2934568">m0</span><span class="op" id="2934570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2934573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2934576">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2934616">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2934619">func</span>&nbsp;<span class="ident" id="2934624">swapRange</span><span class="op" id="2934633">(</span><span class="ident" id="2934634">data</span>&nbsp;<span class="ident" id="2934639">Interface</span><span class="op" id="2934648">,</span>&nbsp;<span class="ident" id="2934650">a</span><span class="op" id="2934651">,</span>&nbsp;<span class="ident" id="2934653">b</span><span class="op" id="2934654">,</span>&nbsp;<span class="ident" id="2934656">n</span>&nbsp;<span class="builtintype" id="2934658">int</span><span class="op" id="2934661">)</span>&nbsp;<span class="op" id="2934663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934666">for</span>&nbsp;<span class="ident" id="2934670">i</span>&nbsp;<span class="op" id="2934672">:=</span>&nbsp;<span class="num" id="2934675">0</span><span class="op" id="2934676">;</span>&nbsp;<span class="ident" id="2934678">i</span>&nbsp;<span class="op" id="2934680">&lt;</span>&nbsp;<span class="ident" id="2934682">n</span><span class="op" id="2934683">;</span>&nbsp;<span class="ident" id="2934685">i</span><span class="op" id="2934686">++</span>&nbsp;<span class="op" id="2934689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934693">data</span><span class="op" id="2934697">.</span><span class="ident" id="2934698">Swap</span><span class="op" id="2934702">(</span><span class="ident" id="2934703">a</span><span class="op" id="2934704">+</span><span class="ident" id="2934705">i</span><span class="op" id="2934706">,</span>&nbsp;<span class="ident" id="2934708">b</span><span class="op" id="2934709">+</span><span class="ident" id="2934710">i</span><span class="op" id="2934711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2934714">}</span><br>
<span class="lineno">100</span><span class="op" id="2934716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2934719">func</span>&nbsp;<span class="ident" id="2934724">doPivot</span><span class="op" id="2934731">(</span><span class="ident" id="2934732">data</span>&nbsp;<span class="ident" id="2934737">Interface</span><span class="op" id="2934746">,</span>&nbsp;<span class="ident" id="2934748">lo</span><span class="op" id="2934750">,</span>&nbsp;<span class="ident" id="2934752">hi</span>&nbsp;<span class="builtintype" id="2934755">int</span><span class="op" id="2934758">)</span>&nbsp;<span class="op" id="2934760">(</span><span class="ident" id="2934761">midlo</span><span class="op" id="2934766">,</span>&nbsp;<span class="ident" id="2934768">midhi</span>&nbsp;<span class="builtintype" id="2934774">int</span><span class="op" id="2934777">)</span>&nbsp;<span class="op" id="2934779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934782">m</span>&nbsp;<span class="op" id="2934784">:=</span>&nbsp;<span class="ident" id="2934787">lo</span>&nbsp;<span class="op" id="2934790">+</span>&nbsp;<span class="op" id="2934792">(</span><span class="ident" id="2934793">hi</span><span class="op" id="2934795">-</span><span class="ident" id="2934796">lo</span><span class="op" id="2934798">)</span><span class="op" id="2934799">/</span><span class="num" id="2934800">2</span>&nbsp;<span class="comment" id="2934802">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934851">if</span>&nbsp;<span class="ident" id="2934854">hi</span><span class="op" id="2934856">-</span><span class="ident" id="2934857">lo</span>&nbsp;<span class="op" id="2934860">&gt;</span>&nbsp;<span class="num" id="2934862">40</span>&nbsp;<span class="op" id="2934865">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2934869">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934929">s</span>&nbsp;<span class="op" id="2934931">:=</span>&nbsp;<span class="op" id="2934934">(</span><span class="ident" id="2934935">hi</span>&nbsp;<span class="op" id="2934938">-</span>&nbsp;<span class="ident" id="2934940">lo</span><span class="op" id="2934942">)</span>&nbsp;<span class="op" id="2934944">/</span>&nbsp;<span class="num" id="2934946">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934950">medianOfThree</span><span class="op" id="2934963">(</span><span class="ident" id="2934964">data</span><span class="op" id="2934968">,</span>&nbsp;<span class="ident" id="2934970">lo</span><span class="op" id="2934972">,</span>&nbsp;<span class="ident" id="2934974">lo</span><span class="op" id="2934976">+</span><span class="ident" id="2934977">s</span><span class="op" id="2934978">,</span>&nbsp;<span class="ident" id="2934980">lo</span><span class="op" id="2934982">+</span><span class="num" id="2934983">2</span><span class="op" id="2934984">*</span><span class="ident" id="2934985">s</span><span class="op" id="2934986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934990">medianOfThree</span><span class="op" id="2935003">(</span><span class="ident" id="2935004">data</span><span class="op" id="2935008">,</span>&nbsp;<span class="ident" id="2935010">m</span><span class="op" id="2935011">,</span>&nbsp;<span class="ident" id="2935013">m</span><span class="op" id="2935014">-</span><span class="ident" id="2935015">s</span><span class="op" id="2935016">,</span>&nbsp;<span class="ident" id="2935018">m</span><span class="op" id="2935019">+</span><span class="ident" id="2935020">s</span><span class="op" id="2935021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935025">medianOfThree</span><span class="op" id="2935038">(</span><span class="ident" id="2935039">data</span><span class="op" id="2935043">,</span>&nbsp;<span class="ident" id="2935045">hi</span><span class="op" id="2935047">-</span><span class="num" id="2935048">1</span><span class="op" id="2935049">,</span>&nbsp;<span class="ident" id="2935051">hi</span><span class="op" id="2935053">-</span><span class="num" id="2935054">1</span><span class="op" id="2935055">-</span><span class="ident" id="2935056">s</span><span class="op" id="2935057">,</span>&nbsp;<span class="ident" id="2935059">hi</span><span class="op" id="2935061">-</span><span class="num" id="2935062">1</span><span class="op" id="2935063">-</span><span class="num" id="2935064">2</span><span class="op" id="2935065">*</span><span class="ident" id="2935066">s</span><span class="op" id="2935067">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935073">medianOfThree</span><span class="op" id="2935086">(</span><span class="ident" id="2935087">data</span><span class="op" id="2935091">,</span>&nbsp;<span class="ident" id="2935093">lo</span><span class="op" id="2935095">,</span>&nbsp;<span class="ident" id="2935097">m</span><span class="op" id="2935098">,</span>&nbsp;<span class="ident" id="2935100">hi</span><span class="op" id="2935102">-</span><span class="num" id="2935103">1</span><span class="op" id="2935104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935108">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935128">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935173">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935203">//&nbsp;&nbsp;&nbsp;&nbsp;data[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935232">//&nbsp;&nbsp;&nbsp;&nbsp;data[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935267">//&nbsp;&nbsp;&nbsp;&nbsp;data[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935296">//&nbsp;&nbsp;&nbsp;&nbsp;data[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935326">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935330">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935382">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935416">pivot</span>&nbsp;<span class="op" id="2935422">:=</span>&nbsp;<span class="ident" id="2935425">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935429">a</span><span class="op" id="2935430">,</span>&nbsp;<span class="ident" id="2935432">b</span><span class="op" id="2935433">,</span>&nbsp;<span class="ident" id="2935435">c</span><span class="op" id="2935436">,</span>&nbsp;<span class="ident" id="2935438">d</span>&nbsp;<span class="op" id="2935440">:=</span>&nbsp;<span class="ident" id="2935443">lo</span><span class="op" id="2935445">+</span><span class="num" id="2935446">1</span><span class="op" id="2935447">,</span>&nbsp;<span class="ident" id="2935449">lo</span><span class="op" id="2935451">+</span><span class="num" id="2935452">1</span><span class="op" id="2935453">,</span>&nbsp;<span class="ident" id="2935455">hi</span><span class="op" id="2935457">,</span>&nbsp;<span class="ident" id="2935459">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935463">for</span>&nbsp;<span class="op" id="2935467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935471">for</span>&nbsp;<span class="ident" id="2935475">b</span>&nbsp;<span class="op" id="2935477">&lt;</span>&nbsp;<span class="ident" id="2935479">c</span>&nbsp;<span class="op" id="2935481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935486">if</span>&nbsp;<span class="ident" id="2935489">data</span><span class="op" id="2935493">.</span><span class="ident" id="2935494">Less</span><span class="op" id="2935498">(</span><span class="ident" id="2935499">b</span><span class="op" id="2935500">,</span>&nbsp;<span class="ident" id="2935502">pivot</span><span class="op" id="2935507">)</span>&nbsp;<span class="op" id="2935509">{</span>&nbsp;<span class="comment" id="2935511">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935534">b</span><span class="op" id="2935535">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935541">}</span>&nbsp;<span class="keyword" id="2935543">else</span>&nbsp;<span class="keyword" id="2935548">if</span>&nbsp;<span class="op" id="2935551">!</span><span class="ident" id="2935552">data</span><span class="op" id="2935556">.</span><span class="ident" id="2935557">Less</span><span class="op" id="2935561">(</span><span class="ident" id="2935562">pivot</span><span class="op" id="2935567">,</span>&nbsp;<span class="ident" id="2935569">b</span><span class="op" id="2935570">)</span>&nbsp;<span class="op" id="2935572">{</span>&nbsp;<span class="comment" id="2935574">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935597">data</span><span class="op" id="2935601">.</span><span class="ident" id="2935602">Swap</span><span class="op" id="2935606">(</span><span class="ident" id="2935607">a</span><span class="op" id="2935608">,</span>&nbsp;<span class="ident" id="2935610">b</span><span class="op" id="2935611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935617">a</span><span class="op" id="2935618">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935625">b</span><span class="op" id="2935626">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935632">}</span>&nbsp;<span class="keyword" id="2935634">else</span>&nbsp;<span class="op" id="2935639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935645">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935662">for</span>&nbsp;<span class="ident" id="2935666">b</span>&nbsp;<span class="op" id="2935668">&lt;</span>&nbsp;<span class="ident" id="2935670">c</span>&nbsp;<span class="op" id="2935672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935677">if</span>&nbsp;<span class="ident" id="2935680">data</span><span class="op" id="2935684">.</span><span class="ident" id="2935685">Less</span><span class="op" id="2935689">(</span><span class="ident" id="2935690">pivot</span><span class="op" id="2935695">,</span>&nbsp;<span class="ident" id="2935697">c</span><span class="op" id="2935698">-</span><span class="num" id="2935699">1</span><span class="op" id="2935700">)</span>&nbsp;<span class="op" id="2935702">{</span>&nbsp;<span class="comment" id="2935704">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935729">c</span><span class="op" id="2935730">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935736">}</span>&nbsp;<span class="keyword" id="2935738">else</span>&nbsp;<span class="keyword" id="2935743">if</span>&nbsp;<span class="op" id="2935746">!</span><span class="ident" id="2935747">data</span><span class="op" id="2935751">.</span><span class="ident" id="2935752">Less</span><span class="op" id="2935756">(</span><span class="ident" id="2935757">c</span><span class="op" id="2935758">-</span><span class="num" id="2935759">1</span><span class="op" id="2935760">,</span>&nbsp;<span class="ident" id="2935762">pivot</span><span class="op" id="2935767">)</span>&nbsp;<span class="op" id="2935769">{</span>&nbsp;<span class="comment" id="2935771">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935796">data</span><span class="op" id="2935800">.</span><span class="ident" id="2935801">Swap</span><span class="op" id="2935805">(</span><span class="ident" id="2935806">c</span><span class="op" id="2935807">-</span><span class="num" id="2935808">1</span><span class="op" id="2935809">,</span>&nbsp;<span class="ident" id="2935811">d</span><span class="op" id="2935812">-</span><span class="num" id="2935813">1</span><span class="op" id="2935814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935820">c</span><span class="op" id="2935821">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935828">d</span><span class="op" id="2935829">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935835">}</span>&nbsp;<span class="keyword" id="2935837">else</span>&nbsp;<span class="op" id="2935842">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935848">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935865">if</span>&nbsp;<span class="ident" id="2935868">b</span>&nbsp;<span class="op" id="2935870">&gt;=</span>&nbsp;<span class="ident" id="2935873">c</span>&nbsp;<span class="op" id="2935875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935880">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2935892">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935932">data</span><span class="op" id="2935936">.</span><span class="ident" id="2935937">Swap</span><span class="op" id="2935941">(</span><span class="ident" id="2935942">b</span><span class="op" id="2935943">,</span>&nbsp;<span class="ident" id="2935945">c</span><span class="op" id="2935946">-</span><span class="num" id="2935947">1</span><span class="op" id="2935948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935952">b</span><span class="op" id="2935953">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935958">c</span><span class="op" id="2935959">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2935963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935967">n</span>&nbsp;<span class="op" id="2935969">:=</span>&nbsp;<span class="ident" id="2935972">min</span><span class="op" id="2935975">(</span><span class="ident" id="2935976">b</span><span class="op" id="2935977">-</span><span class="ident" id="2935978">a</span><span class="op" id="2935979">,</span>&nbsp;<span class="ident" id="2935981">a</span><span class="op" id="2935982">-</span><span class="ident" id="2935983">lo</span><span class="op" id="2935985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2935988">swapRange</span><span class="op" id="2935997">(</span><span class="ident" id="2935998">data</span><span class="op" id="2936002">,</span>&nbsp;<span class="ident" id="2936004">lo</span><span class="op" id="2936006">,</span>&nbsp;<span class="ident" id="2936008">b</span><span class="op" id="2936009">-</span><span class="ident" id="2936010">n</span><span class="op" id="2936011">,</span>&nbsp;<span class="ident" id="2936013">n</span><span class="op" id="2936014">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936018">n</span>&nbsp;<span class="op" id="2936020">=</span>&nbsp;<span class="ident" id="2936022">min</span><span class="op" id="2936025">(</span><span class="ident" id="2936026">hi</span><span class="op" id="2936028">-</span><span class="ident" id="2936029">d</span><span class="op" id="2936030">,</span>&nbsp;<span class="ident" id="2936032">d</span><span class="op" id="2936033">-</span><span class="ident" id="2936034">c</span><span class="op" id="2936035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936038">swapRange</span><span class="op" id="2936047">(</span><span class="ident" id="2936048">data</span><span class="op" id="2936052">,</span>&nbsp;<span class="ident" id="2936054">c</span><span class="op" id="2936055">,</span>&nbsp;<span class="ident" id="2936057">hi</span><span class="op" id="2936059">-</span><span class="ident" id="2936060">n</span><span class="op" id="2936061">,</span>&nbsp;<span class="ident" id="2936063">n</span><span class="op" id="2936064">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936068">return</span>&nbsp;<span class="ident" id="2936075">lo</span>&nbsp;<span class="op" id="2936078">+</span>&nbsp;<span class="ident" id="2936080">b</span>&nbsp;<span class="op" id="2936082">-</span>&nbsp;<span class="ident" id="2936084">a</span><span class="op" id="2936085">,</span>&nbsp;<span class="ident" id="2936087">hi</span>&nbsp;<span class="op" id="2936090">-</span>&nbsp;<span class="op" id="2936092">(</span><span class="ident" id="2936093">d</span>&nbsp;<span class="op" id="2936095">-</span>&nbsp;<span class="ident" id="2936097">c</span><span class="op" id="2936098">)</span><br>
<span class="lineno"></span><span class="op" id="2936100">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2936103">func</span>&nbsp;<span class="ident" id="2936108">quickSort</span><span class="op" id="2936117">(</span><span class="ident" id="2936118">data</span>&nbsp;<span class="ident" id="2936123">Interface</span><span class="op" id="2936132">,</span>&nbsp;<span class="ident" id="2936134">a</span><span class="op" id="2936135">,</span>&nbsp;<span class="ident" id="2936137">b</span><span class="op" id="2936138">,</span>&nbsp;<span class="ident" id="2936140">maxDepth</span>&nbsp;<span class="builtintype" id="2936149">int</span><span class="op" id="2936152">)</span>&nbsp;<span class="op" id="2936154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936157">for</span>&nbsp;<span class="ident" id="2936161">b</span><span class="op" id="2936162">-</span><span class="ident" id="2936163">a</span>&nbsp;<span class="op" id="2936165">&gt;</span>&nbsp;<span class="num" id="2936167">7</span>&nbsp;<span class="op" id="2936169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936173">if</span>&nbsp;<span class="ident" id="2936176">maxDepth</span>&nbsp;<span class="op" id="2936185">==</span>&nbsp;<span class="num" id="2936188">0</span>&nbsp;<span class="op" id="2936190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936195">heapSort</span><span class="op" id="2936203">(</span><span class="ident" id="2936204">data</span><span class="op" id="2936208">,</span>&nbsp;<span class="ident" id="2936210">a</span><span class="op" id="2936211">,</span>&nbsp;<span class="ident" id="2936213">b</span><span class="op" id="2936214">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936219">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936232">maxDepth</span><span class="op" id="2936240">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936245">mlo</span><span class="op" id="2936248">,</span>&nbsp;<span class="ident" id="2936250">mhi</span>&nbsp;<span class="op" id="2936254">:=</span>&nbsp;<span class="ident" id="2936257">doPivot</span><span class="op" id="2936264">(</span><span class="ident" id="2936265">data</span><span class="op" id="2936269">,</span>&nbsp;<span class="ident" id="2936271">a</span><span class="op" id="2936272">,</span>&nbsp;<span class="ident" id="2936274">b</span><span class="op" id="2936275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2936279">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2936339">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936378">if</span>&nbsp;<span class="ident" id="2936381">mlo</span><span class="op" id="2936384">-</span><span class="ident" id="2936385">a</span>&nbsp;<span class="op" id="2936387">&lt;</span>&nbsp;<span class="ident" id="2936389">b</span><span class="op" id="2936390">-</span><span class="ident" id="2936391">mhi</span>&nbsp;<span class="op" id="2936395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936400">quickSort</span><span class="op" id="2936409">(</span><span class="ident" id="2936410">data</span><span class="op" id="2936414">,</span>&nbsp;<span class="ident" id="2936416">a</span><span class="op" id="2936417">,</span>&nbsp;<span class="ident" id="2936419">mlo</span><span class="op" id="2936422">,</span>&nbsp;<span class="ident" id="2936424">maxDepth</span><span class="op" id="2936432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936437">a</span>&nbsp;<span class="op" id="2936439">=</span>&nbsp;<span class="ident" id="2936441">mhi</span>&nbsp;<span class="comment" id="2936445">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936480">}</span>&nbsp;<span class="keyword" id="2936482">else</span>&nbsp;<span class="op" id="2936487">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936492">quickSort</span><span class="op" id="2936501">(</span><span class="ident" id="2936502">data</span><span class="op" id="2936506">,</span>&nbsp;<span class="ident" id="2936508">mhi</span><span class="op" id="2936511">,</span>&nbsp;<span class="ident" id="2936513">b</span><span class="op" id="2936514">,</span>&nbsp;<span class="ident" id="2936516">maxDepth</span><span class="op" id="2936524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936529">b</span>&nbsp;<span class="op" id="2936531">=</span>&nbsp;<span class="ident" id="2936533">mlo</span>&nbsp;<span class="comment" id="2936537">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936578">if</span>&nbsp;<span class="ident" id="2936581">b</span><span class="op" id="2936582">-</span><span class="ident" id="2936583">a</span>&nbsp;<span class="op" id="2936585">&gt;</span>&nbsp;<span class="num" id="2936587">1</span>&nbsp;<span class="op" id="2936589">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936593">insertionSort</span><span class="op" id="2936606">(</span><span class="ident" id="2936607">data</span><span class="op" id="2936611">,</span>&nbsp;<span class="ident" id="2936613">a</span><span class="op" id="2936614">,</span>&nbsp;<span class="ident" id="2936616">b</span><span class="op" id="2936617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936620">}</span><br>
<span class="lineno"></span><span class="op" id="2936622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936625">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2936645">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2936719">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2936788">func</span>&nbsp;<span class="ident" id="2936793">Sort</span><span class="op" id="2936797">(</span><span class="ident" id="2936798">data</span>&nbsp;<span class="ident" id="2936803">Interface</span><span class="op" id="2936812">)</span>&nbsp;<span class="op" id="2936814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2936817">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936880">n</span>&nbsp;<span class="op" id="2936882">:=</span>&nbsp;<span class="ident" id="2936885">data</span><span class="op" id="2936889">.</span><span class="ident" id="2936890">Len</span><span class="op" id="2936893">(</span><span class="op" id="2936894">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936897">maxDepth</span>&nbsp;<span class="op" id="2936906">:=</span>&nbsp;<span class="num" id="2936909">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936912">for</span>&nbsp;<span class="ident" id="2936916">i</span>&nbsp;<span class="op" id="2936918">:=</span>&nbsp;<span class="ident" id="2936921">n</span><span class="op" id="2936922">;</span>&nbsp;<span class="ident" id="2936924">i</span>&nbsp;<span class="op" id="2936926">&gt;</span>&nbsp;<span class="num" id="2936928">0</span><span class="op" id="2936929">;</span>&nbsp;<span class="ident" id="2936931">i</span>&nbsp;<span class="op" id="2936933">&gt;&gt;=</span>&nbsp;<span class="num" id="2936937">1</span>&nbsp;<span class="op" id="2936939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936943">maxDepth</span><span class="op" id="2936951">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936958">maxDepth</span>&nbsp;<span class="op" id="2936967">*=</span>&nbsp;<span class="num" id="2936970">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936973">quickSort</span><span class="op" id="2936982">(</span><span class="ident" id="2936983">data</span><span class="op" id="2936987">,</span>&nbsp;<span class="num" id="2936989">0</span><span class="op" id="2936990">,</span>&nbsp;<span class="ident" id="2936992">n</span><span class="op" id="2936993">,</span>&nbsp;<span class="ident" id="2936995">maxDepth</span><span class="op" id="2937003">)</span><br>
<span class="lineno"></span><span class="op" id="2937005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2937008">type</span>&nbsp;<span class="ident" id="2937013">reverse</span>&nbsp;<span class="keyword" id="2937021">struct</span>&nbsp;<span class="op" id="2937028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2937031">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2937097">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2937135">Interface</span><br>
<span class="lineno"></span><span class="op" id="2937145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937148">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2937223">func</span>&nbsp;<span class="op" id="2937228">(</span><span class="ident" id="2937229">r</span>&nbsp;<span class="ident" id="2937231">reverse</span><span class="op" id="2937238">)</span>&nbsp;<span class="ident" id="2937240">Less</span><span class="op" id="2937244">(</span><span class="ident" id="2937245">i</span><span class="op" id="2937246">,</span>&nbsp;<span class="ident" id="2937248">j</span>&nbsp;<span class="builtintype" id="2937250">int</span><span class="op" id="2937253">)</span>&nbsp;<span class="builtintype" id="2937255">bool</span>&nbsp;<span class="op" id="2937260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937263">return</span>&nbsp;<span class="ident" id="2937270">r</span><span class="op" id="2937271">.</span><span class="ident" id="2937272">Interface</span><span class="op" id="2937281">.</span><span class="ident" id="2937282">Less</span><span class="op" id="2937286">(</span><span class="ident" id="2937287">j</span><span class="op" id="2937288">,</span>&nbsp;<span class="ident" id="2937290">i</span><span class="op" id="2937291">)</span><br>
<span class="lineno"></span><span class="op" id="2937293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937296">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2937343">func</span>&nbsp;<span class="ident" id="2937348">Reverse</span><span class="op" id="2937355">(</span><span class="ident" id="2937356">data</span>&nbsp;<span class="ident" id="2937361">Interface</span><span class="op" id="2937370">)</span>&nbsp;<span class="ident" id="2937372">Interface</span>&nbsp;<span class="op" id="2937382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937385">return</span>&nbsp;<span class="op" id="2937392">&amp;</span><span class="ident" id="2937393">reverse</span><span class="op" id="2937400">{</span><span class="ident" id="2937401">data</span><span class="op" id="2937405">}</span><br>
<span class="lineno"></span><span class="op" id="2937407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937410">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2937454">func</span>&nbsp;<span class="ident" id="2937459">IsSorted</span><span class="op" id="2937467">(</span><span class="ident" id="2937468">data</span>&nbsp;<span class="ident" id="2937473">Interface</span><span class="op" id="2937482">)</span>&nbsp;<span class="builtintype" id="2937484">bool</span>&nbsp;<span class="op" id="2937489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2937492">n</span>&nbsp;<span class="op" id="2937494">:=</span>&nbsp;<span class="ident" id="2937497">data</span><span class="op" id="2937501">.</span><span class="ident" id="2937502">Len</span><span class="op" id="2937505">(</span><span class="op" id="2937506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937509">for</span>&nbsp;<span class="ident" id="2937513">i</span>&nbsp;<span class="op" id="2937515">:=</span>&nbsp;<span class="ident" id="2937518">n</span>&nbsp;<span class="op" id="2937520">-</span>&nbsp;<span class="num" id="2937522">1</span><span class="op" id="2937523">;</span>&nbsp;<span class="ident" id="2937525">i</span>&nbsp;<span class="op" id="2937527">&gt;</span>&nbsp;<span class="num" id="2937529">0</span><span class="op" id="2937530">;</span>&nbsp;<span class="ident" id="2937532">i</span><span class="op" id="2937533">--</span>&nbsp;<span class="op" id="2937536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937540">if</span>&nbsp;<span class="ident" id="2937543">data</span><span class="op" id="2937547">.</span><span class="ident" id="2937548">Less</span><span class="op" id="2937552">(</span><span class="ident" id="2937553">i</span><span class="op" id="2937554">,</span>&nbsp;<span class="ident" id="2937556">i</span><span class="op" id="2937557">-</span><span class="num" id="2937558">1</span><span class="op" id="2937559">)</span>&nbsp;<span class="op" id="2937561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937566">return</span>&nbsp;<span class="builtintype" id="2937573">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937587">return</span>&nbsp;<span class="builtintype" id="2937594">true</span><br>
<span class="lineno"></span><span class="op" id="2937599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2937602">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937641">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2937726">type</span>&nbsp;<span class="ident" id="2937731">IntSlice</span>&nbsp;<span class="op" id="2937740">[</span><span class="op" id="2937741">]</span><span class="builtintype" id="2937742">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2937747">func</span>&nbsp;<span class="op" id="2937752">(</span><span class="ident" id="2937753">p</span>&nbsp;<span class="ident" id="2937755">IntSlice</span><span class="op" id="2937763">)</span>&nbsp;<span class="ident" id="2937765">Len</span><span class="op" id="2937768">(</span><span class="op" id="2937769">)</span>&nbsp;<span class="builtintype" id="2937771">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937785">{</span>&nbsp;<span class="keyword" id="2937787">return</span>&nbsp;<span class="builtinfunc" id="2937794">len</span><span class="op" id="2937797">(</span><span class="ident" id="2937798">p</span><span class="op" id="2937799">)</span>&nbsp;<span class="op" id="2937801">}</span><br>
<span class="lineno"></span><span class="keyword" id="2937803">func</span>&nbsp;<span class="op" id="2937808">(</span><span class="ident" id="2937809">p</span>&nbsp;<span class="ident" id="2937811">IntSlice</span><span class="op" id="2937819">)</span>&nbsp;<span class="ident" id="2937821">Less</span><span class="op" id="2937825">(</span><span class="ident" id="2937826">i</span><span class="op" id="2937827">,</span>&nbsp;<span class="ident" id="2937829">j</span>&nbsp;<span class="builtintype" id="2937831">int</span><span class="op" id="2937834">)</span>&nbsp;<span class="builtintype" id="2937836">bool</span>&nbsp;<span class="op" id="2937841">{</span>&nbsp;<span class="keyword" id="2937843">return</span>&nbsp;<span class="ident" id="2937850">p</span><span class="op" id="2937851">[</span><span class="ident" id="2937852">i</span><span class="op" id="2937853">]</span>&nbsp;<span class="op" id="2937855">&lt;</span>&nbsp;<span class="ident" id="2937857">p</span><span class="op" id="2937858">[</span><span class="ident" id="2937859">j</span><span class="op" id="2937860">]</span>&nbsp;<span class="op" id="2937862">}</span><br>
<span class="lineno"></span><span class="keyword" id="2937864">func</span>&nbsp;<span class="op" id="2937869">(</span><span class="ident" id="2937870">p</span>&nbsp;<span class="ident" id="2937872">IntSlice</span><span class="op" id="2937880">)</span>&nbsp;<span class="ident" id="2937882">Swap</span><span class="op" id="2937886">(</span><span class="ident" id="2937887">i</span><span class="op" id="2937888">,</span>&nbsp;<span class="ident" id="2937890">j</span>&nbsp;<span class="builtintype" id="2937892">int</span><span class="op" id="2937895">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937902">{</span>&nbsp;<span class="ident" id="2937904">p</span><span class="op" id="2937905">[</span><span class="ident" id="2937906">i</span><span class="op" id="2937907">]</span><span class="op" id="2937908">,</span>&nbsp;<span class="ident" id="2937910">p</span><span class="op" id="2937911">[</span><span class="ident" id="2937912">j</span><span class="op" id="2937913">]</span>&nbsp;<span class="op" id="2937915">=</span>&nbsp;<span class="ident" id="2937917">p</span><span class="op" id="2937918">[</span><span class="ident" id="2937919">j</span><span class="op" id="2937920">]</span><span class="op" id="2937921">,</span>&nbsp;<span class="ident" id="2937923">p</span><span class="op" id="2937924">[</span><span class="ident" id="2937925">i</span><span class="op" id="2937926">]</span>&nbsp;<span class="op" id="2937928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937931">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2937964">func</span>&nbsp;<span class="op" id="2937969">(</span><span class="ident" id="2937970">p</span>&nbsp;<span class="ident" id="2937972">IntSlice</span><span class="op" id="2937980">)</span>&nbsp;<span class="ident" id="2937982">Sort</span><span class="op" id="2937986">(</span><span class="op" id="2937987">)</span>&nbsp;<span class="op" id="2937989">{</span>&nbsp;<span class="ident" id="2937991">Sort</span><span class="op" id="2937995">(</span><span class="ident" id="2937996">p</span><span class="op" id="2937997">)</span>&nbsp;<span class="op" id="2937999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938002">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2938095">type</span>&nbsp;<span class="ident" id="2938100">Float64Slice</span>&nbsp;<span class="op" id="2938113">[</span><span class="op" id="2938114">]</span><span class="builtintype" id="2938115">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2938124">func</span>&nbsp;<span class="op" id="2938129">(</span><span class="ident" id="2938130">p</span>&nbsp;<span class="ident" id="2938132">Float64Slice</span><span class="op" id="2938144">)</span>&nbsp;<span class="ident" id="2938146">Len</span><span class="op" id="2938149">(</span><span class="op" id="2938150">)</span>&nbsp;<span class="builtintype" id="2938152">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938166">{</span>&nbsp;<span class="keyword" id="2938168">return</span>&nbsp;<span class="builtinfunc" id="2938175">len</span><span class="op" id="2938178">(</span><span class="ident" id="2938179">p</span><span class="op" id="2938180">)</span>&nbsp;<span class="op" id="2938182">}</span><br>
<span class="lineno"></span><span class="keyword" id="2938184">func</span>&nbsp;<span class="op" id="2938189">(</span><span class="ident" id="2938190">p</span>&nbsp;<span class="ident" id="2938192">Float64Slice</span><span class="op" id="2938204">)</span>&nbsp;<span class="ident" id="2938206">Less</span><span class="op" id="2938210">(</span><span class="ident" id="2938211">i</span><span class="op" id="2938212">,</span>&nbsp;<span class="ident" id="2938214">j</span>&nbsp;<span class="builtintype" id="2938216">int</span><span class="op" id="2938219">)</span>&nbsp;<span class="builtintype" id="2938221">bool</span>&nbsp;<span class="op" id="2938226">{</span>&nbsp;<span class="keyword" id="2938228">return</span>&nbsp;<span class="ident" id="2938235">p</span><span class="op" id="2938236">[</span><span class="ident" id="2938237">i</span><span class="op" id="2938238">]</span>&nbsp;<span class="op" id="2938240">&lt;</span>&nbsp;<span class="ident" id="2938242">p</span><span class="op" id="2938243">[</span><span class="ident" id="2938244">j</span><span class="op" id="2938245">]</span>&nbsp;<span class="op" id="2938247">||</span>&nbsp;<span class="ident" id="2938250">isNaN</span><span class="op" id="2938255">(</span><span class="ident" id="2938256">p</span><span class="op" id="2938257">[</span><span class="ident" id="2938258">i</span><span class="op" id="2938259">]</span><span class="op" id="2938260">)</span>&nbsp;<span class="op" id="2938262">&amp;&amp;</span>&nbsp;<span class="op" id="2938265">!</span><span class="ident" id="2938266">isNaN</span><span class="op" id="2938271">(</span><span class="ident" id="2938272">p</span><span class="op" id="2938273">[</span><span class="ident" id="2938274">j</span><span class="op" id="2938275">]</span><span class="op" id="2938276">)</span>&nbsp;<span class="op" id="2938278">}</span><br>
<span class="lineno"></span><span class="keyword" id="2938280">func</span>&nbsp;<span class="op" id="2938285">(</span><span class="ident" id="2938286">p</span>&nbsp;<span class="ident" id="2938288">Float64Slice</span><span class="op" id="2938300">)</span>&nbsp;<span class="ident" id="2938302">Swap</span><span class="op" id="2938306">(</span><span class="ident" id="2938307">i</span><span class="op" id="2938308">,</span>&nbsp;<span class="ident" id="2938310">j</span>&nbsp;<span class="builtintype" id="2938312">int</span><span class="op" id="2938315">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938322">{</span>&nbsp;<span class="ident" id="2938324">p</span><span class="op" id="2938325">[</span><span class="ident" id="2938326">i</span><span class="op" id="2938327">]</span><span class="op" id="2938328">,</span>&nbsp;<span class="ident" id="2938330">p</span><span class="op" id="2938331">[</span><span class="ident" id="2938332">j</span><span class="op" id="2938333">]</span>&nbsp;<span class="op" id="2938335">=</span>&nbsp;<span class="ident" id="2938337">p</span><span class="op" id="2938338">[</span><span class="ident" id="2938339">j</span><span class="op" id="2938340">]</span><span class="op" id="2938341">,</span>&nbsp;<span class="ident" id="2938343">p</span><span class="op" id="2938344">[</span><span class="ident" id="2938345">i</span><span class="op" id="2938346">]</span>&nbsp;<span class="op" id="2938348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938351">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2938427">func</span>&nbsp;<span class="ident" id="2938432">isNaN</span><span class="op" id="2938437">(</span><span class="ident" id="2938438">f</span>&nbsp;<span class="builtintype" id="2938440">float64</span><span class="op" id="2938447">)</span>&nbsp;<span class="builtintype" id="2938449">bool</span>&nbsp;<span class="op" id="2938454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2938457">return</span>&nbsp;<span class="ident" id="2938464">f</span>&nbsp;<span class="op" id="2938466">!=</span>&nbsp;<span class="ident" id="2938469">f</span><br>
<span class="lineno"></span><span class="op" id="2938471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938474">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2938507">func</span>&nbsp;<span class="op" id="2938512">(</span><span class="ident" id="2938513">p</span>&nbsp;<span class="ident" id="2938515">Float64Slice</span><span class="op" id="2938527">)</span>&nbsp;<span class="ident" id="2938529">Sort</span><span class="op" id="2938533">(</span><span class="op" id="2938534">)</span>&nbsp;<span class="op" id="2938536">{</span>&nbsp;<span class="ident" id="2938538">Sort</span><span class="op" id="2938542">(</span><span class="ident" id="2938543">p</span><span class="op" id="2938544">)</span>&nbsp;<span class="op" id="2938546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938549">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2938640">type</span>&nbsp;<span class="ident" id="2938645">StringSlice</span>&nbsp;<span class="op" id="2938657">[</span><span class="op" id="2938658">]</span><span class="builtintype" id="2938659">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2938667">func</span>&nbsp;<span class="op" id="2938672">(</span><span class="ident" id="2938673">p</span>&nbsp;<span class="ident" id="2938675">StringSlice</span><span class="op" id="2938686">)</span>&nbsp;<span class="ident" id="2938688">Len</span><span class="op" id="2938691">(</span><span class="op" id="2938692">)</span>&nbsp;<span class="builtintype" id="2938694">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938708">{</span>&nbsp;<span class="keyword" id="2938710">return</span>&nbsp;<span class="builtinfunc" id="2938717">len</span><span class="op" id="2938720">(</span><span class="ident" id="2938721">p</span><span class="op" id="2938722">)</span>&nbsp;<span class="op" id="2938724">}</span><br>
<span class="lineno"></span><span class="keyword" id="2938726">func</span>&nbsp;<span class="op" id="2938731">(</span><span class="ident" id="2938732">p</span>&nbsp;<span class="ident" id="2938734">StringSlice</span><span class="op" id="2938745">)</span>&nbsp;<span class="ident" id="2938747">Less</span><span class="op" id="2938751">(</span><span class="ident" id="2938752">i</span><span class="op" id="2938753">,</span>&nbsp;<span class="ident" id="2938755">j</span>&nbsp;<span class="builtintype" id="2938757">int</span><span class="op" id="2938760">)</span>&nbsp;<span class="builtintype" id="2938762">bool</span>&nbsp;<span class="op" id="2938767">{</span>&nbsp;<span class="keyword" id="2938769">return</span>&nbsp;<span class="ident" id="2938776">p</span><span class="op" id="2938777">[</span><span class="ident" id="2938778">i</span><span class="op" id="2938779">]</span>&nbsp;<span class="op" id="2938781">&lt;</span>&nbsp;<span class="ident" id="2938783">p</span><span class="op" id="2938784">[</span><span class="ident" id="2938785">j</span><span class="op" id="2938786">]</span>&nbsp;<span class="op" id="2938788">}</span><br>
<span class="lineno"></span><span class="keyword" id="2938790">func</span>&nbsp;<span class="op" id="2938795">(</span><span class="ident" id="2938796">p</span>&nbsp;<span class="ident" id="2938798">StringSlice</span><span class="op" id="2938809">)</span>&nbsp;<span class="ident" id="2938811">Swap</span><span class="op" id="2938815">(</span><span class="ident" id="2938816">i</span><span class="op" id="2938817">,</span>&nbsp;<span class="ident" id="2938819">j</span>&nbsp;<span class="builtintype" id="2938821">int</span><span class="op" id="2938824">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938831">{</span>&nbsp;<span class="ident" id="2938833">p</span><span class="op" id="2938834">[</span><span class="ident" id="2938835">i</span><span class="op" id="2938836">]</span><span class="op" id="2938837">,</span>&nbsp;<span class="ident" id="2938839">p</span><span class="op" id="2938840">[</span><span class="ident" id="2938841">j</span><span class="op" id="2938842">]</span>&nbsp;<span class="op" id="2938844">=</span>&nbsp;<span class="ident" id="2938846">p</span><span class="op" id="2938847">[</span><span class="ident" id="2938848">j</span><span class="op" id="2938849">]</span><span class="op" id="2938850">,</span>&nbsp;<span class="ident" id="2938852">p</span><span class="op" id="2938853">[</span><span class="ident" id="2938854">i</span><span class="op" id="2938855">]</span>&nbsp;<span class="op" id="2938857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938860">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2938893">func</span>&nbsp;<span class="op" id="2938898">(</span><span class="ident" id="2938899">p</span>&nbsp;<span class="ident" id="2938901">StringSlice</span><span class="op" id="2938912">)</span>&nbsp;<span class="ident" id="2938914">Sort</span><span class="op" id="2938918">(</span><span class="op" id="2938919">)</span>&nbsp;<span class="op" id="2938921">{</span>&nbsp;<span class="ident" id="2938923">Sort</span><span class="op" id="2938927">(</span><span class="ident" id="2938928">p</span><span class="op" id="2938929">)</span>&nbsp;<span class="op" id="2938931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938934">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938976">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2939027">func</span>&nbsp;<span class="ident" id="2939032">Ints</span><span class="op" id="2939036">(</span><span class="ident" id="2939037">a</span>&nbsp;<span class="op" id="2939039">[</span><span class="op" id="2939040">]</span><span class="builtintype" id="2939041">int</span><span class="op" id="2939044">)</span>&nbsp;<span class="op" id="2939046">{</span>&nbsp;<span class="ident" id="2939048">Sort</span><span class="op" id="2939052">(</span><span class="ident" id="2939053">IntSlice</span><span class="op" id="2939061">(</span><span class="ident" id="2939062">a</span><span class="op" id="2939063">)</span><span class="op" id="2939064">)</span>&nbsp;<span class="op" id="2939066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939069">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2939128">func</span>&nbsp;<span class="ident" id="2939133">Float64s</span><span class="op" id="2939141">(</span><span class="ident" id="2939142">a</span>&nbsp;<span class="op" id="2939144">[</span><span class="op" id="2939145">]</span><span class="builtintype" id="2939146">float64</span><span class="op" id="2939153">)</span>&nbsp;<span class="op" id="2939155">{</span>&nbsp;<span class="ident" id="2939157">Sort</span><span class="op" id="2939161">(</span><span class="ident" id="2939162">Float64Slice</span><span class="op" id="2939174">(</span><span class="ident" id="2939175">a</span><span class="op" id="2939176">)</span><span class="op" id="2939177">)</span>&nbsp;<span class="op" id="2939179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2939182">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2939239">func</span>&nbsp;<span class="ident" id="2939244">Strings</span><span class="op" id="2939251">(</span><span class="ident" id="2939252">a</span>&nbsp;<span class="op" id="2939254">[</span><span class="op" id="2939255">]</span><span class="builtintype" id="2939256">string</span><span class="op" id="2939262">)</span>&nbsp;<span class="op" id="2939264">{</span>&nbsp;<span class="ident" id="2939266">Sort</span><span class="op" id="2939270">(</span><span class="ident" id="2939271">StringSlice</span><span class="op" id="2939282">(</span><span class="ident" id="2939283">a</span><span class="op" id="2939284">)</span><span class="op" id="2939285">)</span>&nbsp;<span class="op" id="2939287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939290">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2939368">func</span>&nbsp;<span class="ident" id="2939373">IntsAreSorted</span><span class="op" id="2939386">(</span><span class="ident" id="2939387">a</span>&nbsp;<span class="op" id="2939389">[</span><span class="op" id="2939390">]</span><span class="builtintype" id="2939391">int</span><span class="op" id="2939394">)</span>&nbsp;<span class="builtintype" id="2939396">bool</span>&nbsp;<span class="op" id="2939401">{</span>&nbsp;<span class="keyword" id="2939403">return</span>&nbsp;<span class="ident" id="2939410">IsSorted</span><span class="op" id="2939418">(</span><span class="ident" id="2939419">IntSlice</span><span class="op" id="2939427">(</span><span class="ident" id="2939428">a</span><span class="op" id="2939429">)</span><span class="op" id="2939430">)</span>&nbsp;<span class="op" id="2939432">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2939435">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2939521">func</span>&nbsp;<span class="ident" id="2939526">Float64sAreSorted</span><span class="op" id="2939543">(</span><span class="ident" id="2939544">a</span>&nbsp;<span class="op" id="2939546">[</span><span class="op" id="2939547">]</span><span class="builtintype" id="2939548">float64</span><span class="op" id="2939555">)</span>&nbsp;<span class="builtintype" id="2939557">bool</span>&nbsp;<span class="op" id="2939562">{</span>&nbsp;<span class="keyword" id="2939564">return</span>&nbsp;<span class="ident" id="2939571">IsSorted</span><span class="op" id="2939579">(</span><span class="ident" id="2939580">Float64Slice</span><span class="op" id="2939592">(</span><span class="ident" id="2939593">a</span><span class="op" id="2939594">)</span><span class="op" id="2939595">)</span>&nbsp;<span class="op" id="2939597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939600">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2939684">func</span>&nbsp;<span class="ident" id="2939689">StringsAreSorted</span><span class="op" id="2939705">(</span><span class="ident" id="2939706">a</span>&nbsp;<span class="op" id="2939708">[</span><span class="op" id="2939709">]</span><span class="builtintype" id="2939710">string</span><span class="op" id="2939716">)</span>&nbsp;<span class="builtintype" id="2939718">bool</span>&nbsp;<span class="op" id="2939723">{</span>&nbsp;<span class="keyword" id="2939725">return</span>&nbsp;<span class="ident" id="2939732">IsSorted</span><span class="op" id="2939740">(</span><span class="ident" id="2939741">StringSlice</span><span class="op" id="2939752">(</span><span class="ident" id="2939753">a</span><span class="op" id="2939754">)</span><span class="op" id="2939755">)</span>&nbsp;<span class="op" id="2939757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2939760">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2939788">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2939864">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2939939">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2940002">//</span><br>
<span class="lineno"></span><span class="comment" id="2940005">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2940047">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2940119">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2940137">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2940191">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2940268">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2940340">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2940412">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2940467">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2940540">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2940591">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2940667">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2940741">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2940807">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2940884">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2940963">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2941041">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2941115">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2941163">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2941237">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2941286">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2941359">//</span><br>
<span class="lineno">315</span><span class="comment" id="2941362">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2941432">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2941488">func</span>&nbsp;<span class="ident" id="2941493">Stable</span><span class="op" id="2941499">(</span><span class="ident" id="2941500">data</span>&nbsp;<span class="ident" id="2941505">Interface</span><span class="op" id="2941514">)</span>&nbsp;<span class="op" id="2941516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941519">n</span>&nbsp;<span class="op" id="2941521">:=</span>&nbsp;<span class="ident" id="2941524">data</span><span class="op" id="2941528">.</span><span class="ident" id="2941529">Len</span><span class="op" id="2941532">(</span><span class="op" id="2941533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941536">blockSize</span>&nbsp;<span class="op" id="2941546">:=</span>&nbsp;<span class="num" id="2941549">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941553">a</span><span class="op" id="2941554">,</span>&nbsp;<span class="ident" id="2941556">b</span>&nbsp;<span class="op" id="2941558">:=</span>&nbsp;<span class="num" id="2941561">0</span><span class="op" id="2941562">,</span>&nbsp;<span class="ident" id="2941564">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2941575">for</span>&nbsp;<span class="ident" id="2941579">b</span>&nbsp;<span class="op" id="2941581">&lt;=</span>&nbsp;<span class="ident" id="2941584">n</span>&nbsp;<span class="op" id="2941586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941590">insertionSort</span><span class="op" id="2941603">(</span><span class="ident" id="2941604">data</span><span class="op" id="2941608">,</span>&nbsp;<span class="ident" id="2941610">a</span><span class="op" id="2941611">,</span>&nbsp;<span class="ident" id="2941613">b</span><span class="op" id="2941614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941618">a</span>&nbsp;<span class="op" id="2941620">=</span>&nbsp;<span class="ident" id="2941622">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941626">b</span>&nbsp;<span class="op" id="2941628">+=</span>&nbsp;<span class="ident" id="2941631">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2941642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941645">insertionSort</span><span class="op" id="2941658">(</span><span class="ident" id="2941659">data</span><span class="op" id="2941663">,</span>&nbsp;<span class="ident" id="2941665">a</span><span class="op" id="2941666">,</span>&nbsp;<span class="ident" id="2941668">n</span><span class="op" id="2941669">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2941673">for</span>&nbsp;<span class="ident" id="2941677">blockSize</span>&nbsp;<span class="op" id="2941687">&lt;</span>&nbsp;<span class="ident" id="2941689">n</span>&nbsp;<span class="op" id="2941691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941695">a</span><span class="op" id="2941696">,</span>&nbsp;<span class="ident" id="2941698">b</span>&nbsp;<span class="op" id="2941700">=</span>&nbsp;<span class="num" id="2941702">0</span><span class="op" id="2941703">,</span>&nbsp;<span class="num" id="2941705">2</span><span class="op" id="2941706">*</span><span class="ident" id="2941707">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2941719">for</span>&nbsp;<span class="ident" id="2941723">b</span>&nbsp;<span class="op" id="2941725">&lt;=</span>&nbsp;<span class="ident" id="2941728">n</span>&nbsp;<span class="op" id="2941730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941735">symMerge</span><span class="op" id="2941743">(</span><span class="ident" id="2941744">data</span><span class="op" id="2941748">,</span>&nbsp;<span class="ident" id="2941750">a</span><span class="op" id="2941751">,</span>&nbsp;<span class="ident" id="2941753">a</span><span class="op" id="2941754">+</span><span class="ident" id="2941755">blockSize</span><span class="op" id="2941764">,</span>&nbsp;<span class="ident" id="2941766">b</span><span class="op" id="2941767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941772">a</span>&nbsp;<span class="op" id="2941774">=</span>&nbsp;<span class="ident" id="2941776">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941781">b</span>&nbsp;<span class="op" id="2941783">+=</span>&nbsp;<span class="num" id="2941786">2</span>&nbsp;<span class="op" id="2941788">*</span>&nbsp;<span class="ident" id="2941790">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2941802">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941806">symMerge</span><span class="op" id="2941814">(</span><span class="ident" id="2941815">data</span><span class="op" id="2941819">,</span>&nbsp;<span class="ident" id="2941821">a</span><span class="op" id="2941822">,</span>&nbsp;<span class="ident" id="2941824">a</span><span class="op" id="2941825">+</span><span class="ident" id="2941826">blockSize</span><span class="op" id="2941835">,</span>&nbsp;<span class="ident" id="2941837">n</span><span class="op" id="2941838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2941842">blockSize</span>&nbsp;<span class="op" id="2941852">*=</span>&nbsp;<span class="num" id="2941855">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2941858">}</span><br>
<span class="lineno"></span><span class="op" id="2941860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2941863">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2941940">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2942017">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2942092">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2942167">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2942219">//</span><br>
<span class="lineno"></span><span class="comment" id="2942222">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2942263">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2942314">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2942375">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2942434">//</span><br>
<span class="lineno"></span><span class="comment" id="2942437">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2942512">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2942592">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2942669">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2942712">func</span>&nbsp;<span class="ident" id="2942717">symMerge</span><span class="op" id="2942725">(</span><span class="ident" id="2942726">data</span>&nbsp;<span class="ident" id="2942731">Interface</span><span class="op" id="2942740">,</span>&nbsp;<span class="ident" id="2942742">a</span><span class="op" id="2942743">,</span>&nbsp;<span class="ident" id="2942745">m</span><span class="op" id="2942746">,</span>&nbsp;<span class="ident" id="2942748">b</span>&nbsp;<span class="builtintype" id="2942750">int</span><span class="op" id="2942753">)</span>&nbsp;<span class="op" id="2942755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2942758">if</span>&nbsp;<span class="ident" id="2942761">a</span>&nbsp;<span class="op" id="2942763">&gt;=</span>&nbsp;<span class="ident" id="2942766">m</span>&nbsp;<span class="op" id="2942768">||</span>&nbsp;<span class="ident" id="2942771">m</span>&nbsp;<span class="op" id="2942773">&gt;=</span>&nbsp;<span class="ident" id="2942776">b</span>&nbsp;<span class="op" id="2942778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2942782">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2942790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942794">mid</span>&nbsp;<span class="op" id="2942798">:=</span>&nbsp;<span class="ident" id="2942801">a</span>&nbsp;<span class="op" id="2942803">+</span>&nbsp;<span class="op" id="2942805">(</span><span class="ident" id="2942806">b</span><span class="op" id="2942807">-</span><span class="ident" id="2942808">a</span><span class="op" id="2942809">)</span><span class="op" id="2942810">/</span><span class="num" id="2942811">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942814">n</span>&nbsp;<span class="op" id="2942816">:=</span>&nbsp;<span class="ident" id="2942819">mid</span>&nbsp;<span class="op" id="2942823">+</span>&nbsp;<span class="ident" id="2942825">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942828">start</span>&nbsp;<span class="op" id="2942834">:=</span>&nbsp;<span class="num" id="2942837">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2942840">if</span>&nbsp;<span class="ident" id="2942843">m</span>&nbsp;<span class="op" id="2942845">&gt;</span>&nbsp;<span class="ident" id="2942847">mid</span>&nbsp;<span class="op" id="2942851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942855">start</span>&nbsp;<span class="op" id="2942861">=</span>&nbsp;<span class="ident" id="2942863">n</span>&nbsp;<span class="op" id="2942865">-</span>&nbsp;<span class="ident" id="2942867">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942871">r</span><span class="op" id="2942872">,</span>&nbsp;<span class="ident" id="2942874">p</span>&nbsp;<span class="op" id="2942876">:=</span>&nbsp;<span class="ident" id="2942879">mid</span><span class="op" id="2942882">,</span>&nbsp;<span class="ident" id="2942884">n</span><span class="op" id="2942885">-</span><span class="num" id="2942886">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2942890">for</span>&nbsp;<span class="ident" id="2942894">start</span>&nbsp;<span class="op" id="2942900">&lt;</span>&nbsp;<span class="ident" id="2942902">r</span>&nbsp;<span class="op" id="2942904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942909">c</span>&nbsp;<span class="op" id="2942911">:=</span>&nbsp;<span class="ident" id="2942914">start</span>&nbsp;<span class="op" id="2942920">+</span>&nbsp;<span class="op" id="2942922">(</span><span class="ident" id="2942923">r</span><span class="op" id="2942924">-</span><span class="ident" id="2942925">start</span><span class="op" id="2942930">)</span><span class="op" id="2942931">/</span><span class="num" id="2942932">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2942937">if</span>&nbsp;<span class="op" id="2942940">!</span><span class="ident" id="2942941">data</span><span class="op" id="2942945">.</span><span class="ident" id="2942946">Less</span><span class="op" id="2942950">(</span><span class="ident" id="2942951">p</span><span class="op" id="2942952">-</span><span class="ident" id="2942953">c</span><span class="op" id="2942954">,</span>&nbsp;<span class="ident" id="2942956">c</span><span class="op" id="2942957">)</span>&nbsp;<span class="op" id="2942959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942965">start</span>&nbsp;<span class="op" id="2942971">=</span>&nbsp;<span class="ident" id="2942973">c</span>&nbsp;<span class="op" id="2942975">+</span>&nbsp;<span class="num" id="2942977">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2942982">}</span>&nbsp;<span class="keyword" id="2942984">else</span>&nbsp;<span class="op" id="2942989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2942995">r</span>&nbsp;<span class="op" id="2942997">=</span>&nbsp;<span class="ident" id="2942999">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943011">}</span>&nbsp;<span class="keyword" id="2943013">else</span>&nbsp;<span class="op" id="2943018">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943022">start</span>&nbsp;<span class="op" id="2943028">=</span>&nbsp;<span class="ident" id="2943030">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943034">r</span><span class="op" id="2943035">,</span>&nbsp;<span class="ident" id="2943037">p</span>&nbsp;<span class="op" id="2943039">:=</span>&nbsp;<span class="ident" id="2943042">m</span><span class="op" id="2943043">,</span>&nbsp;<span class="ident" id="2943045">n</span><span class="op" id="2943046">-</span><span class="num" id="2943047">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943051">for</span>&nbsp;<span class="ident" id="2943055">start</span>&nbsp;<span class="op" id="2943061">&lt;</span>&nbsp;<span class="ident" id="2943063">r</span>&nbsp;<span class="op" id="2943065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943070">c</span>&nbsp;<span class="op" id="2943072">:=</span>&nbsp;<span class="ident" id="2943075">start</span>&nbsp;<span class="op" id="2943081">+</span>&nbsp;<span class="op" id="2943083">(</span><span class="ident" id="2943084">r</span><span class="op" id="2943085">-</span><span class="ident" id="2943086">start</span><span class="op" id="2943091">)</span><span class="op" id="2943092">/</span><span class="num" id="2943093">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943098">if</span>&nbsp;<span class="op" id="2943101">!</span><span class="ident" id="2943102">data</span><span class="op" id="2943106">.</span><span class="ident" id="2943107">Less</span><span class="op" id="2943111">(</span><span class="ident" id="2943112">p</span><span class="op" id="2943113">-</span><span class="ident" id="2943114">c</span><span class="op" id="2943115">,</span>&nbsp;<span class="ident" id="2943117">c</span><span class="op" id="2943118">)</span>&nbsp;<span class="op" id="2943120">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943126">start</span>&nbsp;<span class="op" id="2943132">=</span>&nbsp;<span class="ident" id="2943134">c</span>&nbsp;<span class="op" id="2943136">+</span>&nbsp;<span class="num" id="2943138">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943143">}</span>&nbsp;<span class="keyword" id="2943145">else</span>&nbsp;<span class="op" id="2943150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943156">r</span>&nbsp;<span class="op" id="2943158">=</span>&nbsp;<span class="ident" id="2943160">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943169">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943175">end</span>&nbsp;<span class="op" id="2943179">:=</span>&nbsp;<span class="ident" id="2943182">n</span>&nbsp;<span class="op" id="2943184">-</span>&nbsp;<span class="ident" id="2943186">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943193">rotate</span><span class="op" id="2943199">(</span><span class="ident" id="2943200">data</span><span class="op" id="2943204">,</span>&nbsp;<span class="ident" id="2943206">start</span><span class="op" id="2943211">,</span>&nbsp;<span class="ident" id="2943213">m</span><span class="op" id="2943214">,</span>&nbsp;<span class="ident" id="2943216">end</span><span class="op" id="2943219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943222">symMerge</span><span class="op" id="2943230">(</span><span class="ident" id="2943231">data</span><span class="op" id="2943235">,</span>&nbsp;<span class="ident" id="2943237">a</span><span class="op" id="2943238">,</span>&nbsp;<span class="ident" id="2943240">start</span><span class="op" id="2943245">,</span>&nbsp;<span class="ident" id="2943247">mid</span><span class="op" id="2943250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943253">symMerge</span><span class="op" id="2943261">(</span><span class="ident" id="2943262">data</span><span class="op" id="2943266">,</span>&nbsp;<span class="ident" id="2943268">mid</span><span class="op" id="2943271">,</span>&nbsp;<span class="ident" id="2943273">end</span><span class="op" id="2943276">,</span>&nbsp;<span class="ident" id="2943278">b</span><span class="op" id="2943279">)</span><br>
<span class="lineno">390</span><span class="op" id="2943281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943284">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2943359">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2943414">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2943470">func</span>&nbsp;<span class="ident" id="2943475">rotate</span><span class="op" id="2943481">(</span><span class="ident" id="2943482">data</span>&nbsp;<span class="ident" id="2943487">Interface</span><span class="op" id="2943496">,</span>&nbsp;<span class="ident" id="2943498">a</span><span class="op" id="2943499">,</span>&nbsp;<span class="ident" id="2943501">m</span><span class="op" id="2943502">,</span>&nbsp;<span class="ident" id="2943504">b</span>&nbsp;<span class="builtintype" id="2943506">int</span><span class="op" id="2943509">)</span>&nbsp;<span class="op" id="2943511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943514">i</span>&nbsp;<span class="op" id="2943516">:=</span>&nbsp;<span class="ident" id="2943519">m</span>&nbsp;<span class="op" id="2943521">-</span>&nbsp;<span class="ident" id="2943523">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943526">if</span>&nbsp;<span class="ident" id="2943529">i</span>&nbsp;<span class="op" id="2943531">==</span>&nbsp;<span class="num" id="2943534">0</span>&nbsp;<span class="op" id="2943536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943540">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943548">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943551">j</span>&nbsp;<span class="op" id="2943553">:=</span>&nbsp;<span class="ident" id="2943556">b</span>&nbsp;<span class="op" id="2943558">-</span>&nbsp;<span class="ident" id="2943560">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943563">if</span>&nbsp;<span class="ident" id="2943566">j</span>&nbsp;<span class="op" id="2943568">==</span>&nbsp;<span class="num" id="2943571">0</span>&nbsp;<span class="op" id="2943573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943577">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943589">if</span>&nbsp;<span class="ident" id="2943592">i</span>&nbsp;<span class="op" id="2943594">==</span>&nbsp;<span class="ident" id="2943597">j</span>&nbsp;<span class="op" id="2943599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943603">swapRange</span><span class="op" id="2943612">(</span><span class="ident" id="2943613">data</span><span class="op" id="2943617">,</span>&nbsp;<span class="ident" id="2943619">a</span><span class="op" id="2943620">,</span>&nbsp;<span class="ident" id="2943622">m</span><span class="op" id="2943623">,</span>&nbsp;<span class="ident" id="2943625">i</span><span class="op" id="2943626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943642">p</span>&nbsp;<span class="op" id="2943644">:=</span>&nbsp;<span class="ident" id="2943647">a</span>&nbsp;<span class="op" id="2943649">+</span>&nbsp;<span class="ident" id="2943651">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943654">for</span>&nbsp;<span class="ident" id="2943658">i</span>&nbsp;<span class="op" id="2943660">!=</span>&nbsp;<span class="ident" id="2943663">j</span>&nbsp;<span class="op" id="2943665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943669">if</span>&nbsp;<span class="ident" id="2943672">i</span>&nbsp;<span class="op" id="2943674">&gt;</span>&nbsp;<span class="ident" id="2943676">j</span>&nbsp;<span class="op" id="2943678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943683">swapRange</span><span class="op" id="2943692">(</span><span class="ident" id="2943693">data</span><span class="op" id="2943697">,</span>&nbsp;<span class="ident" id="2943699">p</span><span class="op" id="2943700">-</span><span class="ident" id="2943701">i</span><span class="op" id="2943702">,</span>&nbsp;<span class="ident" id="2943704">p</span><span class="op" id="2943705">,</span>&nbsp;<span class="ident" id="2943707">j</span><span class="op" id="2943708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943713">i</span>&nbsp;<span class="op" id="2943715">-=</span>&nbsp;<span class="ident" id="2943718">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943722">}</span>&nbsp;<span class="keyword" id="2943724">else</span>&nbsp;<span class="op" id="2943729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943734">swapRange</span><span class="op" id="2943743">(</span><span class="ident" id="2943744">data</span><span class="op" id="2943748">,</span>&nbsp;<span class="ident" id="2943750">p</span><span class="op" id="2943751">-</span><span class="ident" id="2943752">i</span><span class="op" id="2943753">,</span>&nbsp;<span class="ident" id="2943755">p</span><span class="op" id="2943756">+</span><span class="ident" id="2943757">j</span><span class="op" id="2943758">-</span><span class="ident" id="2943759">i</span><span class="op" id="2943760">,</span>&nbsp;<span class="ident" id="2943762">i</span><span class="op" id="2943763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943768">j</span>&nbsp;<span class="op" id="2943770">-=</span>&nbsp;<span class="ident" id="2943773">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943780">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943783">swapRange</span><span class="op" id="2943792">(</span><span class="ident" id="2943793">data</span><span class="op" id="2943797">,</span>&nbsp;<span class="ident" id="2943799">p</span><span class="op" id="2943800">-</span><span class="ident" id="2943801">i</span><span class="op" id="2943802">,</span>&nbsp;<span class="ident" id="2943804">p</span><span class="op" id="2943805">,</span>&nbsp;<span class="ident" id="2943807">i</span><span class="op" id="2943808">)</span><br>
<span class="lineno"></span><span class="op" id="2943810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943813">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
