<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6897637">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6897692">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6897746">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6897797">package</span>&nbsp;<span class="ident" id="6897805">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6897810">import</span>&nbsp;<span class="op" id="6897817">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897820">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897828">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897834">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897840">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897851">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6897862">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6897869">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6897872">func</span>&nbsp;<span class="ident" id="6897877">skipServerTest</span><span class="op" id="6897891">(</span><span class="ident" id="6897892">net</span><span class="op" id="6897895">,</span>&nbsp;<span class="ident" id="6897897">unixsotype</span><span class="op" id="6897907">,</span>&nbsp;<span class="ident" id="6897909">addr</span>&nbsp;<span class="builtintype" id="6897914">string</span><span class="op" id="6897920">,</span>&nbsp;<span class="ident" id="6897922">ipv6</span><span class="op" id="6897926">,</span>&nbsp;<span class="ident" id="6897928">ipv4map</span><span class="op" id="6897935">,</span>&nbsp;<span class="ident" id="6897937">linuxOnly</span>&nbsp;<span class="builtintype" id="6897947">bool</span><span class="op" id="6897951">)</span>&nbsp;<span class="builtintype" id="6897953">bool</span>&nbsp;<span class="op" id="6897958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897961">switch</span>&nbsp;<span class="ident" id="6897968"><a href="/net/server_test.go.html#6897840">runtime</a></span><span class="op" id="6897975">.</span><span class="ident" id="6897976">GOOS</span>&nbsp;<span class="op" id="6897981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897984">case</span>&nbsp;<span class="string" id="6897989">&#34;linux&#34;</span><span class="op" id="6897996">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897999">case</span>&nbsp;<span class="string" id="6898004">&#34;nacl&#34;</span><span class="op" id="6898010">,</span>&nbsp;<span class="string" id="6898012">&#34;plan9&#34;</span><span class="op" id="6898019">,</span>&nbsp;<span class="string" id="6898021">&#34;windows&#34;</span><span class="op" id="6898030">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6898034">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898095">if</span>&nbsp;<span class="ident" id="6898098"><a href="/net/server_test.go.html#6897892">net</a></span>&nbsp;<span class="op" id="6898102">==</span>&nbsp;<span class="ident" id="6898105"><a href="/net/server_test.go.html#6897897">unixsotype</a></span>&nbsp;<span class="op" id="6898116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898121">return</span>&nbsp;<span class="ident" id="6898128">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898138">default</span><span class="op" id="6898145">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898149">if</span>&nbsp;<span class="ident" id="6898152"><a href="/net/server_test.go.html#6897892">net</a></span>&nbsp;<span class="op" id="6898156">==</span>&nbsp;<span class="ident" id="6898159"><a href="/net/server_test.go.html#6897897">unixsotype</a></span>&nbsp;<span class="op" id="6898170">&amp;&amp;</span>&nbsp;<span class="ident" id="6898173"><a href="/net/server_test.go.html#6897937">linuxOnly</a></span>&nbsp;<span class="op" id="6898183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898188">return</span>&nbsp;<span class="ident" id="6898195">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898208">switch</span>&nbsp;<span class="ident" id="6898215"><a href="/net/server_test.go.html#6897909">addr</a></span>&nbsp;<span class="op" id="6898220">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898223">case</span>&nbsp;<span class="string" id="6898228">&#34;&#34;</span><span class="op" id="6898230">,</span>&nbsp;<span class="string" id="6898232">&#34;0.0.0.0&#34;</span><span class="op" id="6898241">,</span>&nbsp;<span class="string" id="6898243">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6898261">,</span>&nbsp;<span class="string" id="6898263">&#34;[::]&#34;</span><span class="op" id="6898269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898273">if</span>&nbsp;<span class="ident" id="6898276"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6898283">.</span><span class="ident" id="6898284">Short</span><span class="op" id="6898289">(</span><span class="op" id="6898290">)</span>&nbsp;<span class="op" id="6898292">||</span>&nbsp;<span class="op" id="6898295">!</span><span class="op" id="6898296">*</span><span class="ident" id="6898297"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6898310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898315">return</span>&nbsp;<span class="ident" id="6898322">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898332">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898335">if</span>&nbsp;<span class="ident" id="6898338"><a href="/net/server_test.go.html#6897922">ipv6</a></span>&nbsp;<span class="op" id="6898343">&amp;&amp;</span>&nbsp;<span class="op" id="6898346">!</span><span class="ident" id="6898347"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6898360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898364">return</span>&nbsp;<span class="ident" id="6898371">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898380">if</span>&nbsp;<span class="ident" id="6898383"><a href="/net/server_test.go.html#6897928">ipv4map</a></span>&nbsp;<span class="op" id="6898391">&amp;&amp;</span>&nbsp;<span class="op" id="6898394">!</span><span class="ident" id="6898395"><a href="/net/ipsock.go.html#2627970">supportsIPv4map</a></span>&nbsp;<span class="op" id="6898411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898415">return</span>&nbsp;<span class="ident" id="6898422">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898431">return</span>&nbsp;<span class="ident" id="6898438">false</span><br>
<span class="lineno"></span><span class="op" id="6898444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6898447">var</span>&nbsp;<span class="ident" id="6898451">streamConnServerTests</span>&nbsp;<span class="op" id="6898473">=</span>&nbsp;<span class="op" id="6898475">[</span><span class="op" id="6898476">]</span><span class="keyword" id="6898477">struct</span>&nbsp;<span class="op" id="6898484">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898487">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898497">string</span>&nbsp;<span class="comment" id="6898504">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898520">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898530">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898538">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898548">string</span>&nbsp;<span class="comment" id="6898555">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898571">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898581">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898589">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898599">bool</span>&nbsp;<span class="comment" id="6898604">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898645">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898655">bool</span>&nbsp;<span class="comment" id="6898660">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898706">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6898716">bool</span>&nbsp;<span class="comment" id="6898721">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898746">linuxOnly</span>&nbsp;<span class="builtintype" id="6898756">bool</span>&nbsp;<span class="comment" id="6898761">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6898815">}</span><span class="op" id="6898816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898819">{</span><span class="ident" id="6898820">snet</span><span class="op" id="6898824">:</span>&nbsp;<span class="string" id="6898826">&#34;tcp&#34;</span><span class="op" id="6898831">,</span>&nbsp;<span class="ident" id="6898833">saddr</span><span class="op" id="6898838">:</span>&nbsp;<span class="string" id="6898840">&#34;&#34;</span><span class="op" id="6898842">,</span>&nbsp;<span class="ident" id="6898844">cnet</span><span class="op" id="6898848">:</span>&nbsp;<span class="string" id="6898850">&#34;tcp&#34;</span><span class="op" id="6898855">,</span>&nbsp;<span class="ident" id="6898857">caddr</span><span class="op" id="6898862">:</span>&nbsp;<span class="string" id="6898864">&#34;127.0.0.1&#34;</span><span class="op" id="6898875">}</span><span class="op" id="6898876">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898879">{</span><span class="ident" id="6898880">snet</span><span class="op" id="6898884">:</span>&nbsp;<span class="string" id="6898886">&#34;tcp&#34;</span><span class="op" id="6898891">,</span>&nbsp;<span class="ident" id="6898893">saddr</span><span class="op" id="6898898">:</span>&nbsp;<span class="string" id="6898900">&#34;0.0.0.0&#34;</span><span class="op" id="6898909">,</span>&nbsp;<span class="ident" id="6898911">cnet</span><span class="op" id="6898915">:</span>&nbsp;<span class="string" id="6898917">&#34;tcp&#34;</span><span class="op" id="6898922">,</span>&nbsp;<span class="ident" id="6898924">caddr</span><span class="op" id="6898929">:</span>&nbsp;<span class="string" id="6898931">&#34;127.0.0.1&#34;</span><span class="op" id="6898942">}</span><span class="op" id="6898943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898946">{</span><span class="ident" id="6898947">snet</span><span class="op" id="6898951">:</span>&nbsp;<span class="string" id="6898953">&#34;tcp&#34;</span><span class="op" id="6898958">,</span>&nbsp;<span class="ident" id="6898960">saddr</span><span class="op" id="6898965">:</span>&nbsp;<span class="string" id="6898967">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6898985">,</span>&nbsp;<span class="ident" id="6898987">cnet</span><span class="op" id="6898991">:</span>&nbsp;<span class="string" id="6898993">&#34;tcp&#34;</span><span class="op" id="6898998">,</span>&nbsp;<span class="ident" id="6899000">caddr</span><span class="op" id="6899005">:</span>&nbsp;<span class="string" id="6899007">&#34;127.0.0.1&#34;</span><span class="op" id="6899018">}</span><span class="op" id="6899019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899022">{</span><span class="ident" id="6899023">snet</span><span class="op" id="6899027">:</span>&nbsp;<span class="string" id="6899029">&#34;tcp&#34;</span><span class="op" id="6899034">,</span>&nbsp;<span class="ident" id="6899036">saddr</span><span class="op" id="6899041">:</span>&nbsp;<span class="string" id="6899043">&#34;[::]&#34;</span><span class="op" id="6899049">,</span>&nbsp;<span class="ident" id="6899051">cnet</span><span class="op" id="6899055">:</span>&nbsp;<span class="string" id="6899057">&#34;tcp&#34;</span><span class="op" id="6899062">,</span>&nbsp;<span class="ident" id="6899064">caddr</span><span class="op" id="6899069">:</span>&nbsp;<span class="string" id="6899071">&#34;[::1]&#34;</span><span class="op" id="6899078">,</span>&nbsp;<span class="ident" id="6899080">ipv6</span><span class="op" id="6899084">:</span>&nbsp;<span class="ident" id="6899086">true</span><span class="op" id="6899090">}</span><span class="op" id="6899091">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899095">{</span><span class="ident" id="6899096">snet</span><span class="op" id="6899100">:</span>&nbsp;<span class="string" id="6899102">&#34;tcp&#34;</span><span class="op" id="6899107">,</span>&nbsp;<span class="ident" id="6899109">saddr</span><span class="op" id="6899114">:</span>&nbsp;<span class="string" id="6899116">&#34;&#34;</span><span class="op" id="6899118">,</span>&nbsp;<span class="ident" id="6899120">cnet</span><span class="op" id="6899124">:</span>&nbsp;<span class="string" id="6899126">&#34;tcp&#34;</span><span class="op" id="6899131">,</span>&nbsp;<span class="ident" id="6899133">caddr</span><span class="op" id="6899138">:</span>&nbsp;<span class="string" id="6899140">&#34;[::1]&#34;</span><span class="op" id="6899147">,</span>&nbsp;<span class="ident" id="6899149">ipv4map</span><span class="op" id="6899156">:</span>&nbsp;<span class="ident" id="6899158">true</span><span class="op" id="6899162">}</span><span class="op" id="6899163">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899166">{</span><span class="ident" id="6899167">snet</span><span class="op" id="6899171">:</span>&nbsp;<span class="string" id="6899173">&#34;tcp&#34;</span><span class="op" id="6899178">,</span>&nbsp;<span class="ident" id="6899180">saddr</span><span class="op" id="6899185">:</span>&nbsp;<span class="string" id="6899187">&#34;0.0.0.0&#34;</span><span class="op" id="6899196">,</span>&nbsp;<span class="ident" id="6899198">cnet</span><span class="op" id="6899202">:</span>&nbsp;<span class="string" id="6899204">&#34;tcp&#34;</span><span class="op" id="6899209">,</span>&nbsp;<span class="ident" id="6899211">caddr</span><span class="op" id="6899216">:</span>&nbsp;<span class="string" id="6899218">&#34;[::1]&#34;</span><span class="op" id="6899225">,</span>&nbsp;<span class="ident" id="6899227">ipv4map</span><span class="op" id="6899234">:</span>&nbsp;<span class="ident" id="6899236">true</span><span class="op" id="6899240">}</span><span class="op" id="6899241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899244">{</span><span class="ident" id="6899245">snet</span><span class="op" id="6899249">:</span>&nbsp;<span class="string" id="6899251">&#34;tcp&#34;</span><span class="op" id="6899256">,</span>&nbsp;<span class="ident" id="6899258">saddr</span><span class="op" id="6899263">:</span>&nbsp;<span class="string" id="6899265">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6899283">,</span>&nbsp;<span class="ident" id="6899285">cnet</span><span class="op" id="6899289">:</span>&nbsp;<span class="string" id="6899291">&#34;tcp&#34;</span><span class="op" id="6899296">,</span>&nbsp;<span class="ident" id="6899298">caddr</span><span class="op" id="6899303">:</span>&nbsp;<span class="string" id="6899305">&#34;[::1]&#34;</span><span class="op" id="6899312">,</span>&nbsp;<span class="ident" id="6899314">ipv4map</span><span class="op" id="6899321">:</span>&nbsp;<span class="ident" id="6899323">true</span><span class="op" id="6899327">}</span><span class="op" id="6899328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899331">{</span><span class="ident" id="6899332">snet</span><span class="op" id="6899336">:</span>&nbsp;<span class="string" id="6899338">&#34;tcp&#34;</span><span class="op" id="6899343">,</span>&nbsp;<span class="ident" id="6899345">saddr</span><span class="op" id="6899350">:</span>&nbsp;<span class="string" id="6899352">&#34;[::]&#34;</span><span class="op" id="6899358">,</span>&nbsp;<span class="ident" id="6899360">cnet</span><span class="op" id="6899364">:</span>&nbsp;<span class="string" id="6899366">&#34;tcp&#34;</span><span class="op" id="6899371">,</span>&nbsp;<span class="ident" id="6899373">caddr</span><span class="op" id="6899378">:</span>&nbsp;<span class="string" id="6899380">&#34;127.0.0.1&#34;</span><span class="op" id="6899391">,</span>&nbsp;<span class="ident" id="6899393">ipv4map</span><span class="op" id="6899400">:</span>&nbsp;<span class="ident" id="6899402">true</span><span class="op" id="6899406">}</span><span class="op" id="6899407">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899411">{</span><span class="ident" id="6899412">snet</span><span class="op" id="6899416">:</span>&nbsp;<span class="string" id="6899418">&#34;tcp&#34;</span><span class="op" id="6899423">,</span>&nbsp;<span class="ident" id="6899425">saddr</span><span class="op" id="6899430">:</span>&nbsp;<span class="string" id="6899432">&#34;&#34;</span><span class="op" id="6899434">,</span>&nbsp;<span class="ident" id="6899436">cnet</span><span class="op" id="6899440">:</span>&nbsp;<span class="string" id="6899442">&#34;tcp4&#34;</span><span class="op" id="6899448">,</span>&nbsp;<span class="ident" id="6899450">caddr</span><span class="op" id="6899455">:</span>&nbsp;<span class="string" id="6899457">&#34;127.0.0.1&#34;</span><span class="op" id="6899468">}</span><span class="op" id="6899469">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899472">{</span><span class="ident" id="6899473">snet</span><span class="op" id="6899477">:</span>&nbsp;<span class="string" id="6899479">&#34;tcp&#34;</span><span class="op" id="6899484">,</span>&nbsp;<span class="ident" id="6899486">saddr</span><span class="op" id="6899491">:</span>&nbsp;<span class="string" id="6899493">&#34;0.0.0.0&#34;</span><span class="op" id="6899502">,</span>&nbsp;<span class="ident" id="6899504">cnet</span><span class="op" id="6899508">:</span>&nbsp;<span class="string" id="6899510">&#34;tcp4&#34;</span><span class="op" id="6899516">,</span>&nbsp;<span class="ident" id="6899518">caddr</span><span class="op" id="6899523">:</span>&nbsp;<span class="string" id="6899525">&#34;127.0.0.1&#34;</span><span class="op" id="6899536">}</span><span class="op" id="6899537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899540">{</span><span class="ident" id="6899541">snet</span><span class="op" id="6899545">:</span>&nbsp;<span class="string" id="6899547">&#34;tcp&#34;</span><span class="op" id="6899552">,</span>&nbsp;<span class="ident" id="6899554">saddr</span><span class="op" id="6899559">:</span>&nbsp;<span class="string" id="6899561">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6899579">,</span>&nbsp;<span class="ident" id="6899581">cnet</span><span class="op" id="6899585">:</span>&nbsp;<span class="string" id="6899587">&#34;tcp4&#34;</span><span class="op" id="6899593">,</span>&nbsp;<span class="ident" id="6899595">caddr</span><span class="op" id="6899600">:</span>&nbsp;<span class="string" id="6899602">&#34;127.0.0.1&#34;</span><span class="op" id="6899613">}</span><span class="op" id="6899614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899617">{</span><span class="ident" id="6899618">snet</span><span class="op" id="6899622">:</span>&nbsp;<span class="string" id="6899624">&#34;tcp&#34;</span><span class="op" id="6899629">,</span>&nbsp;<span class="ident" id="6899631">saddr</span><span class="op" id="6899636">:</span>&nbsp;<span class="string" id="6899638">&#34;[::]&#34;</span><span class="op" id="6899644">,</span>&nbsp;<span class="ident" id="6899646">cnet</span><span class="op" id="6899650">:</span>&nbsp;<span class="string" id="6899652">&#34;tcp6&#34;</span><span class="op" id="6899658">,</span>&nbsp;<span class="ident" id="6899660">caddr</span><span class="op" id="6899665">:</span>&nbsp;<span class="string" id="6899667">&#34;[::1]&#34;</span><span class="op" id="6899674">,</span>&nbsp;<span class="ident" id="6899676">ipv6</span><span class="op" id="6899680">:</span>&nbsp;<span class="ident" id="6899682">true</span><span class="op" id="6899686">}</span><span class="op" id="6899687">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899691">{</span><span class="ident" id="6899692">snet</span><span class="op" id="6899696">:</span>&nbsp;<span class="string" id="6899698">&#34;tcp&#34;</span><span class="op" id="6899703">,</span>&nbsp;<span class="ident" id="6899705">saddr</span><span class="op" id="6899710">:</span>&nbsp;<span class="string" id="6899712">&#34;&#34;</span><span class="op" id="6899714">,</span>&nbsp;<span class="ident" id="6899716">cnet</span><span class="op" id="6899720">:</span>&nbsp;<span class="string" id="6899722">&#34;tcp6&#34;</span><span class="op" id="6899728">,</span>&nbsp;<span class="ident" id="6899730">caddr</span><span class="op" id="6899735">:</span>&nbsp;<span class="string" id="6899737">&#34;[::1]&#34;</span><span class="op" id="6899744">,</span>&nbsp;<span class="ident" id="6899746">ipv4map</span><span class="op" id="6899753">:</span>&nbsp;<span class="ident" id="6899755">true</span><span class="op" id="6899759">}</span><span class="op" id="6899760">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899763">{</span><span class="ident" id="6899764">snet</span><span class="op" id="6899768">:</span>&nbsp;<span class="string" id="6899770">&#34;tcp&#34;</span><span class="op" id="6899775">,</span>&nbsp;<span class="ident" id="6899777">saddr</span><span class="op" id="6899782">:</span>&nbsp;<span class="string" id="6899784">&#34;0.0.0.0&#34;</span><span class="op" id="6899793">,</span>&nbsp;<span class="ident" id="6899795">cnet</span><span class="op" id="6899799">:</span>&nbsp;<span class="string" id="6899801">&#34;tcp6&#34;</span><span class="op" id="6899807">,</span>&nbsp;<span class="ident" id="6899809">caddr</span><span class="op" id="6899814">:</span>&nbsp;<span class="string" id="6899816">&#34;[::1]&#34;</span><span class="op" id="6899823">,</span>&nbsp;<span class="ident" id="6899825">ipv4map</span><span class="op" id="6899832">:</span>&nbsp;<span class="ident" id="6899834">true</span><span class="op" id="6899838">}</span><span class="op" id="6899839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899842">{</span><span class="ident" id="6899843">snet</span><span class="op" id="6899847">:</span>&nbsp;<span class="string" id="6899849">&#34;tcp&#34;</span><span class="op" id="6899854">,</span>&nbsp;<span class="ident" id="6899856">saddr</span><span class="op" id="6899861">:</span>&nbsp;<span class="string" id="6899863">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6899881">,</span>&nbsp;<span class="ident" id="6899883">cnet</span><span class="op" id="6899887">:</span>&nbsp;<span class="string" id="6899889">&#34;tcp6&#34;</span><span class="op" id="6899895">,</span>&nbsp;<span class="ident" id="6899897">caddr</span><span class="op" id="6899902">:</span>&nbsp;<span class="string" id="6899904">&#34;[::1]&#34;</span><span class="op" id="6899911">,</span>&nbsp;<span class="ident" id="6899913">ipv4map</span><span class="op" id="6899920">:</span>&nbsp;<span class="ident" id="6899922">true</span><span class="op" id="6899926">}</span><span class="op" id="6899927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899930">{</span><span class="ident" id="6899931">snet</span><span class="op" id="6899935">:</span>&nbsp;<span class="string" id="6899937">&#34;tcp&#34;</span><span class="op" id="6899942">,</span>&nbsp;<span class="ident" id="6899944">saddr</span><span class="op" id="6899949">:</span>&nbsp;<span class="string" id="6899951">&#34;[::]&#34;</span><span class="op" id="6899957">,</span>&nbsp;<span class="ident" id="6899959">cnet</span><span class="op" id="6899963">:</span>&nbsp;<span class="string" id="6899965">&#34;tcp4&#34;</span><span class="op" id="6899971">,</span>&nbsp;<span class="ident" id="6899973">caddr</span><span class="op" id="6899978">:</span>&nbsp;<span class="string" id="6899980">&#34;127.0.0.1&#34;</span><span class="op" id="6899991">,</span>&nbsp;<span class="ident" id="6899993">ipv4map</span><span class="op" id="6900000">:</span>&nbsp;<span class="ident" id="6900002">true</span><span class="op" id="6900006">}</span><span class="op" id="6900007">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900011">{</span><span class="ident" id="6900012">snet</span><span class="op" id="6900016">:</span>&nbsp;<span class="string" id="6900018">&#34;tcp&#34;</span><span class="op" id="6900023">,</span>&nbsp;<span class="ident" id="6900025">saddr</span><span class="op" id="6900030">:</span>&nbsp;<span class="string" id="6900032">&#34;127.0.0.1&#34;</span><span class="op" id="6900043">,</span>&nbsp;<span class="ident" id="6900045">cnet</span><span class="op" id="6900049">:</span>&nbsp;<span class="string" id="6900051">&#34;tcp&#34;</span><span class="op" id="6900056">,</span>&nbsp;<span class="ident" id="6900058">caddr</span><span class="op" id="6900063">:</span>&nbsp;<span class="string" id="6900065">&#34;127.0.0.1&#34;</span><span class="op" id="6900076">}</span><span class="op" id="6900077">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900080">{</span><span class="ident" id="6900081">snet</span><span class="op" id="6900085">:</span>&nbsp;<span class="string" id="6900087">&#34;tcp&#34;</span><span class="op" id="6900092">,</span>&nbsp;<span class="ident" id="6900094">saddr</span><span class="op" id="6900099">:</span>&nbsp;<span class="string" id="6900101">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6900121">,</span>&nbsp;<span class="ident" id="6900123">cnet</span><span class="op" id="6900127">:</span>&nbsp;<span class="string" id="6900129">&#34;tcp&#34;</span><span class="op" id="6900134">,</span>&nbsp;<span class="ident" id="6900136">caddr</span><span class="op" id="6900141">:</span>&nbsp;<span class="string" id="6900143">&#34;127.0.0.1&#34;</span><span class="op" id="6900154">}</span><span class="op" id="6900155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900158">{</span><span class="ident" id="6900159">snet</span><span class="op" id="6900163">:</span>&nbsp;<span class="string" id="6900165">&#34;tcp&#34;</span><span class="op" id="6900170">,</span>&nbsp;<span class="ident" id="6900172">saddr</span><span class="op" id="6900177">:</span>&nbsp;<span class="string" id="6900179">&#34;[::1]&#34;</span><span class="op" id="6900186">,</span>&nbsp;<span class="ident" id="6900188">cnet</span><span class="op" id="6900192">:</span>&nbsp;<span class="string" id="6900194">&#34;tcp&#34;</span><span class="op" id="6900199">,</span>&nbsp;<span class="ident" id="6900201">caddr</span><span class="op" id="6900206">:</span>&nbsp;<span class="string" id="6900208">&#34;[::1]&#34;</span><span class="op" id="6900215">,</span>&nbsp;<span class="ident" id="6900217">ipv6</span><span class="op" id="6900221">:</span>&nbsp;<span class="ident" id="6900223">true</span><span class="op" id="6900227">}</span><span class="op" id="6900228">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900232">{</span><span class="ident" id="6900233">snet</span><span class="op" id="6900237">:</span>&nbsp;<span class="string" id="6900239">&#34;tcp4&#34;</span><span class="op" id="6900245">,</span>&nbsp;<span class="ident" id="6900247">saddr</span><span class="op" id="6900252">:</span>&nbsp;<span class="string" id="6900254">&#34;&#34;</span><span class="op" id="6900256">,</span>&nbsp;<span class="ident" id="6900258">cnet</span><span class="op" id="6900262">:</span>&nbsp;<span class="string" id="6900264">&#34;tcp4&#34;</span><span class="op" id="6900270">,</span>&nbsp;<span class="ident" id="6900272">caddr</span><span class="op" id="6900277">:</span>&nbsp;<span class="string" id="6900279">&#34;127.0.0.1&#34;</span><span class="op" id="6900290">}</span><span class="op" id="6900291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900294">{</span><span class="ident" id="6900295">snet</span><span class="op" id="6900299">:</span>&nbsp;<span class="string" id="6900301">&#34;tcp4&#34;</span><span class="op" id="6900307">,</span>&nbsp;<span class="ident" id="6900309">saddr</span><span class="op" id="6900314">:</span>&nbsp;<span class="string" id="6900316">&#34;0.0.0.0&#34;</span><span class="op" id="6900325">,</span>&nbsp;<span class="ident" id="6900327">cnet</span><span class="op" id="6900331">:</span>&nbsp;<span class="string" id="6900333">&#34;tcp4&#34;</span><span class="op" id="6900339">,</span>&nbsp;<span class="ident" id="6900341">caddr</span><span class="op" id="6900346">:</span>&nbsp;<span class="string" id="6900348">&#34;127.0.0.1&#34;</span><span class="op" id="6900359">}</span><span class="op" id="6900360">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900363">{</span><span class="ident" id="6900364">snet</span><span class="op" id="6900368">:</span>&nbsp;<span class="string" id="6900370">&#34;tcp4&#34;</span><span class="op" id="6900376">,</span>&nbsp;<span class="ident" id="6900378">saddr</span><span class="op" id="6900383">:</span>&nbsp;<span class="string" id="6900385">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6900403">,</span>&nbsp;<span class="ident" id="6900405">cnet</span><span class="op" id="6900409">:</span>&nbsp;<span class="string" id="6900411">&#34;tcp4&#34;</span><span class="op" id="6900417">,</span>&nbsp;<span class="ident" id="6900419">caddr</span><span class="op" id="6900424">:</span>&nbsp;<span class="string" id="6900426">&#34;127.0.0.1&#34;</span><span class="op" id="6900437">}</span><span class="op" id="6900438">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900442">{</span><span class="ident" id="6900443">snet</span><span class="op" id="6900447">:</span>&nbsp;<span class="string" id="6900449">&#34;tcp4&#34;</span><span class="op" id="6900455">,</span>&nbsp;<span class="ident" id="6900457">saddr</span><span class="op" id="6900462">:</span>&nbsp;<span class="string" id="6900464">&#34;127.0.0.1&#34;</span><span class="op" id="6900475">,</span>&nbsp;<span class="ident" id="6900477">cnet</span><span class="op" id="6900481">:</span>&nbsp;<span class="string" id="6900483">&#34;tcp4&#34;</span><span class="op" id="6900489">,</span>&nbsp;<span class="ident" id="6900491">caddr</span><span class="op" id="6900496">:</span>&nbsp;<span class="string" id="6900498">&#34;127.0.0.1&#34;</span><span class="op" id="6900509">}</span><span class="op" id="6900510">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900514">{</span><span class="ident" id="6900515">snet</span><span class="op" id="6900519">:</span>&nbsp;<span class="string" id="6900521">&#34;tcp6&#34;</span><span class="op" id="6900527">,</span>&nbsp;<span class="ident" id="6900529">saddr</span><span class="op" id="6900534">:</span>&nbsp;<span class="string" id="6900536">&#34;&#34;</span><span class="op" id="6900538">,</span>&nbsp;<span class="ident" id="6900540">cnet</span><span class="op" id="6900544">:</span>&nbsp;<span class="string" id="6900546">&#34;tcp6&#34;</span><span class="op" id="6900552">,</span>&nbsp;<span class="ident" id="6900554">caddr</span><span class="op" id="6900559">:</span>&nbsp;<span class="string" id="6900561">&#34;[::1]&#34;</span><span class="op" id="6900568">,</span>&nbsp;<span class="ident" id="6900570">ipv6</span><span class="op" id="6900574">:</span>&nbsp;<span class="ident" id="6900576">true</span><span class="op" id="6900580">}</span><span class="op" id="6900581">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900584">{</span><span class="ident" id="6900585">snet</span><span class="op" id="6900589">:</span>&nbsp;<span class="string" id="6900591">&#34;tcp6&#34;</span><span class="op" id="6900597">,</span>&nbsp;<span class="ident" id="6900599">saddr</span><span class="op" id="6900604">:</span>&nbsp;<span class="string" id="6900606">&#34;[::]&#34;</span><span class="op" id="6900612">,</span>&nbsp;<span class="ident" id="6900614">cnet</span><span class="op" id="6900618">:</span>&nbsp;<span class="string" id="6900620">&#34;tcp6&#34;</span><span class="op" id="6900626">,</span>&nbsp;<span class="ident" id="6900628">caddr</span><span class="op" id="6900633">:</span>&nbsp;<span class="string" id="6900635">&#34;[::1]&#34;</span><span class="op" id="6900642">,</span>&nbsp;<span class="ident" id="6900644">ipv6</span><span class="op" id="6900648">:</span>&nbsp;<span class="ident" id="6900650">true</span><span class="op" id="6900654">}</span><span class="op" id="6900655">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900659">{</span><span class="ident" id="6900660">snet</span><span class="op" id="6900664">:</span>&nbsp;<span class="string" id="6900666">&#34;tcp6&#34;</span><span class="op" id="6900672">,</span>&nbsp;<span class="ident" id="6900674">saddr</span><span class="op" id="6900679">:</span>&nbsp;<span class="string" id="6900681">&#34;[::1]&#34;</span><span class="op" id="6900688">,</span>&nbsp;<span class="ident" id="6900690">cnet</span><span class="op" id="6900694">:</span>&nbsp;<span class="string" id="6900696">&#34;tcp6&#34;</span><span class="op" id="6900702">,</span>&nbsp;<span class="ident" id="6900704">caddr</span><span class="op" id="6900709">:</span>&nbsp;<span class="string" id="6900711">&#34;[::1]&#34;</span><span class="op" id="6900718">,</span>&nbsp;<span class="ident" id="6900720">ipv6</span><span class="op" id="6900724">:</span>&nbsp;<span class="ident" id="6900726">true</span><span class="op" id="6900730">}</span><span class="op" id="6900731">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900735">{</span><span class="ident" id="6900736">snet</span><span class="op" id="6900740">:</span>&nbsp;<span class="string" id="6900742">&#34;unix&#34;</span><span class="op" id="6900748">,</span>&nbsp;<span class="ident" id="6900750">saddr</span><span class="op" id="6900755">:</span>&nbsp;<span class="ident" id="6900757"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6900769">(</span><span class="op" id="6900770">)</span><span class="op" id="6900771">,</span>&nbsp;<span class="ident" id="6900773">cnet</span><span class="op" id="6900777">:</span>&nbsp;<span class="string" id="6900779">&#34;unix&#34;</span><span class="op" id="6900785">,</span>&nbsp;<span class="ident" id="6900787">caddr</span><span class="op" id="6900792">:</span>&nbsp;<span class="ident" id="6900794"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6900806">(</span><span class="op" id="6900807">)</span><span class="op" id="6900808">}</span><span class="op" id="6900809">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900812">{</span><span class="ident" id="6900813">snet</span><span class="op" id="6900817">:</span>&nbsp;<span class="string" id="6900819">&#34;unix&#34;</span><span class="op" id="6900825">,</span>&nbsp;<span class="ident" id="6900827">saddr</span><span class="op" id="6900832">:</span>&nbsp;<span class="string" id="6900834">&#34;@gotest2/net&#34;</span><span class="op" id="6900848">,</span>&nbsp;<span class="ident" id="6900850">cnet</span><span class="op" id="6900854">:</span>&nbsp;<span class="string" id="6900856">&#34;unix&#34;</span><span class="op" id="6900862">,</span>&nbsp;<span class="ident" id="6900864">caddr</span><span class="op" id="6900869">:</span>&nbsp;<span class="string" id="6900871">&#34;@gotest2/net.local&#34;</span><span class="op" id="6900891">,</span>&nbsp;<span class="ident" id="6900893">linuxOnly</span><span class="op" id="6900902">:</span>&nbsp;<span class="ident" id="6900904">true</span><span class="op" id="6900908">}</span><span class="op" id="6900909">,</span><br>
<span class="lineno"></span><span class="op" id="6900911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900914">func</span>&nbsp;<span class="ident" id="6900919">TestStreamConnServer</span><span class="op" id="6900939">(</span><span class="ident" id="6900940">t</span>&nbsp;<span class="op" id="6900942">*</span><span class="ident" id="6900943"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6900950">.</span><span class="ident" id="6900951">T</span><span class="op" id="6900952">)</span>&nbsp;<span class="op" id="6900954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900957">for</span>&nbsp;<span class="ident" id="6900961">_</span><span class="op" id="6900962">,</span>&nbsp;<span class="ident" id="6900964">tt</span>&nbsp;<span class="op" id="6900967">:=</span>&nbsp;<span class="keyword" id="6900970">range</span>&nbsp;<span class="ident" id="6900976"><a href="/net/server_test.go.html#6898451">streamConnServerTests</a></span>&nbsp;<span class="op" id="6900998">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901002">if</span>&nbsp;<span class="ident" id="6901005"><a href="/net/server_test.go.html#6897877">skipServerTest</a></span><span class="op" id="6901019">(</span><span class="ident" id="6901020"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901022">.</span><span class="ident" id="6901023">snet</span><span class="op" id="6901027">,</span>&nbsp;<span class="string" id="6901029">&#34;unix&#34;</span><span class="op" id="6901035">,</span>&nbsp;<span class="ident" id="6901037"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901039">.</span><span class="ident" id="6901040">saddr</span><span class="op" id="6901045">,</span>&nbsp;<span class="ident" id="6901047"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901049">.</span><span class="ident" id="6901050">ipv6</span><span class="op" id="6901054">,</span>&nbsp;<span class="ident" id="6901056"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901058">.</span><span class="ident" id="6901059">ipv4map</span><span class="op" id="6901066">,</span>&nbsp;<span class="ident" id="6901068"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901070">.</span><span class="ident" id="6901071">linuxOnly</span><span class="op" id="6901080">)</span>&nbsp;<span class="op" id="6901082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901087">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901103">listening</span>&nbsp;<span class="op" id="6901113">:=</span>&nbsp;<span class="builtinfunc" id="6901116">make</span><span class="op" id="6901120">(</span><span class="keyword" id="6901121">chan</span>&nbsp;<span class="builtintype" id="6901126">string</span><span class="op" id="6901132">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901136">done</span>&nbsp;<span class="op" id="6901141">:=</span>&nbsp;<span class="builtinfunc" id="6901144">make</span><span class="op" id="6901148">(</span><span class="keyword" id="6901149">chan</span>&nbsp;<span class="builtintype" id="6901154">int</span><span class="op" id="6901157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901161">switch</span>&nbsp;<span class="ident" id="6901168"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901170">.</span><span class="ident" id="6901171">snet</span>&nbsp;<span class="op" id="6901176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901180">case</span>&nbsp;<span class="string" id="6901185">&#34;tcp&#34;</span><span class="op" id="6901190">,</span>&nbsp;<span class="string" id="6901192">&#34;tcp4&#34;</span><span class="op" id="6901198">,</span>&nbsp;<span class="string" id="6901200">&#34;tcp6&#34;</span><span class="op" id="6901206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901211"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901213">.</span><span class="ident" id="6901214">saddr</span>&nbsp;<span class="op" id="6901220">+=</span>&nbsp;<span class="string" id="6901223">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901230">case</span>&nbsp;<span class="string" id="6901235">&#34;unix&#34;</span><span class="op" id="6901241">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901246"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6901248">.</span><span class="ident" id="6901249">Remove</span><span class="op" id="6901255">(</span><span class="ident" id="6901256"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901258">.</span><span class="ident" id="6901259">saddr</span><span class="op" id="6901264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901269"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6901271">.</span><span class="ident" id="6901272">Remove</span><span class="op" id="6901278">(</span><span class="ident" id="6901279"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901281">.</span><span class="ident" id="6901282">caddr</span><span class="op" id="6901287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901296">go</span>&nbsp;<span class="ident" id="6901299"><a href="/net/server_test.go.html#6903014">runStreamConnServer</a></span><span class="op" id="6901318">(</span><span class="ident" id="6901319"><a href="/net/server_test.go.html#6900940">t</a></span><span class="op" id="6901320">,</span>&nbsp;<span class="ident" id="6901322"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901324">.</span><span class="ident" id="6901325">snet</span><span class="op" id="6901329">,</span>&nbsp;<span class="ident" id="6901331"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901333">.</span><span class="ident" id="6901334">saddr</span><span class="op" id="6901339">,</span>&nbsp;<span class="ident" id="6901341"><a href="/net/server_test.go.html#6901103">listening</a></span><span class="op" id="6901350">,</span>&nbsp;<span class="ident" id="6901352"><a href="/net/server_test.go.html#6901136">done</a></span><span class="op" id="6901356">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901360">taddr</span>&nbsp;<span class="op" id="6901366">:=</span>&nbsp;<span class="op" id="6901369">&lt;-</span><span class="ident" id="6901371"><a href="/net/server_test.go.html#6901103">listening</a></span>&nbsp;<span class="comment" id="6901381">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901412">switch</span>&nbsp;<span class="ident" id="6901419"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901421">.</span><span class="ident" id="6901422">cnet</span>&nbsp;<span class="op" id="6901427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901431">case</span>&nbsp;<span class="string" id="6901436">&#34;tcp&#34;</span><span class="op" id="6901441">,</span>&nbsp;<span class="string" id="6901443">&#34;tcp4&#34;</span><span class="op" id="6901449">,</span>&nbsp;<span class="string" id="6901451">&#34;tcp6&#34;</span><span class="op" id="6901457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901462">_</span><span class="op" id="6901463">,</span>&nbsp;<span class="ident" id="6901465">port</span><span class="op" id="6901469">,</span>&nbsp;<span class="ident" id="6901471">err</span>&nbsp;<span class="op" id="6901475">:=</span>&nbsp;<span class="ident" id="6901478"><a href="/net/ipsock.go.html#2631267">SplitHostPort</a></span><span class="op" id="6901491">(</span><span class="ident" id="6901492"><a href="/net/server_test.go.html#6901360">taddr</a></span><span class="op" id="6901497">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901502">if</span>&nbsp;<span class="ident" id="6901505"><a href="/net/server_test.go.html#6901471">err</a></span>&nbsp;<span class="op" id="6901509">!=</span>&nbsp;<span class="ident" id="6901512">nil</span>&nbsp;<span class="op" id="6901516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901522"><a href="/net/server_test.go.html#6900940">t</a></span><span class="op" id="6901523">.</span><span class="ident" id="6901524">Fatalf</span><span class="op" id="6901530">(</span><span class="string" id="6901531">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6901561">,</span>&nbsp;<span class="ident" id="6901563"><a href="/net/server_test.go.html#6901360">taddr</a></span><span class="op" id="6901568">,</span>&nbsp;<span class="ident" id="6901570"><a href="/net/server_test.go.html#6901471">err</a></span><span class="op" id="6901573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901583"><a href="/net/server_test.go.html#6901360">taddr</a></span>&nbsp;<span class="op" id="6901589">=</span>&nbsp;<span class="ident" id="6901591"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901593">.</span><span class="ident" id="6901594">caddr</span>&nbsp;<span class="op" id="6901600">+</span>&nbsp;<span class="string" id="6901602">&#34;:&#34;</span>&nbsp;<span class="op" id="6901606">+</span>&nbsp;<span class="ident" id="6901608"><a href="/net/server_test.go.html#6901465">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901615">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901620"><a href="/net/server_test.go.html#6903787">runStreamConnClient</a></span><span class="op" id="6901639">(</span><span class="ident" id="6901640"><a href="/net/server_test.go.html#6900940">t</a></span><span class="op" id="6901641">,</span>&nbsp;<span class="ident" id="6901643"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901645">.</span><span class="ident" id="6901646">cnet</span><span class="op" id="6901650">,</span>&nbsp;<span class="ident" id="6901652"><a href="/net/server_test.go.html#6901360">taddr</a></span><span class="op" id="6901657">,</span>&nbsp;<span class="ident" id="6901659"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901661">.</span><span class="ident" id="6901662">empty</span><span class="op" id="6901667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901671">&lt;-</span><span class="ident" id="6901673"><a href="/net/server_test.go.html#6901136">done</a></span>&nbsp;<span class="comment" id="6901678">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901709">switch</span>&nbsp;<span class="ident" id="6901716"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901718">.</span><span class="ident" id="6901719">snet</span>&nbsp;<span class="op" id="6901724">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901728">case</span>&nbsp;<span class="string" id="6901733">&#34;unix&#34;</span><span class="op" id="6901739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901744"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6901746">.</span><span class="ident" id="6901747">Remove</span><span class="op" id="6901753">(</span><span class="ident" id="6901754"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901756">.</span><span class="ident" id="6901757">saddr</span><span class="op" id="6901762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901767"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6901769">.</span><span class="ident" id="6901770">Remove</span><span class="op" id="6901776">(</span><span class="ident" id="6901777"><a href="/net/server_test.go.html#6900964">tt</a></span><span class="op" id="6901779">.</span><span class="ident" id="6901780">caddr</span><span class="op" id="6901785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901792">}</span><br>
<span class="lineno">130</span><span class="op" id="6901794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6901797">var</span>&nbsp;<span class="ident" id="6901801">seqpacketConnServerTests</span>&nbsp;<span class="op" id="6901826">=</span>&nbsp;<span class="op" id="6901828">[</span><span class="op" id="6901829">]</span><span class="keyword" id="6901830">struct</span>&nbsp;<span class="op" id="6901837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901840">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6901850">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901858">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6901868">string</span>&nbsp;<span class="comment" id="6901875">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901894">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6901904">string</span>&nbsp;<span class="comment" id="6901911">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901930">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6901940">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6901947">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901972">linuxOnly</span>&nbsp;<span class="builtintype" id="6901982">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6901989">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="6902043">}</span><span class="op" id="6902044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902047">{</span><span class="ident" id="6902048">net</span><span class="op" id="6902051">:</span>&nbsp;<span class="string" id="6902053">&#34;unixpacket&#34;</span><span class="op" id="6902065">,</span>&nbsp;<span class="ident" id="6902067">saddr</span><span class="op" id="6902072">:</span>&nbsp;<span class="ident" id="6902074"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6902086">(</span><span class="op" id="6902087">)</span><span class="op" id="6902088">,</span>&nbsp;<span class="ident" id="6902090">caddr</span><span class="op" id="6902095">:</span>&nbsp;<span class="ident" id="6902097"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6902109">(</span><span class="op" id="6902110">)</span><span class="op" id="6902111">}</span><span class="op" id="6902112">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902115">{</span><span class="ident" id="6902116">net</span><span class="op" id="6902119">:</span>&nbsp;<span class="string" id="6902121">&#34;unixpacket&#34;</span><span class="op" id="6902133">,</span>&nbsp;<span class="ident" id="6902135">saddr</span><span class="op" id="6902140">:</span>&nbsp;<span class="string" id="6902142">&#34;@gotest4/net&#34;</span><span class="op" id="6902156">,</span>&nbsp;<span class="ident" id="6902158">caddr</span><span class="op" id="6902163">:</span>&nbsp;<span class="string" id="6902165">&#34;@gotest4/net.local&#34;</span><span class="op" id="6902185">,</span>&nbsp;<span class="ident" id="6902187">linuxOnly</span><span class="op" id="6902196">:</span>&nbsp;<span class="ident" id="6902198">true</span><span class="op" id="6902202">}</span><span class="op" id="6902203">,</span><br>
<span class="lineno"></span><span class="op" id="6902205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6902208">func</span>&nbsp;<span class="ident" id="6902213">TestSeqpacketConnServer</span><span class="op" id="6902236">(</span><span class="ident" id="6902237">t</span>&nbsp;<span class="op" id="6902239">*</span><span class="ident" id="6902240"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6902247">.</span><span class="ident" id="6902248">T</span><span class="op" id="6902249">)</span>&nbsp;<span class="op" id="6902251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902254">switch</span>&nbsp;<span class="ident" id="6902261"><a href="/net/server_test.go.html#6897840">runtime</a></span><span class="op" id="6902268">.</span><span class="ident" id="6902269">GOOS</span>&nbsp;<span class="op" id="6902274">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902277">case</span>&nbsp;<span class="string" id="6902282">&#34;darwin&#34;</span><span class="op" id="6902290">,</span>&nbsp;<span class="string" id="6902292">&#34;nacl&#34;</span><span class="op" id="6902298">,</span>&nbsp;<span class="string" id="6902300">&#34;openbsd&#34;</span><span class="op" id="6902309">,</span>&nbsp;<span class="string" id="6902311">&#34;plan9&#34;</span><span class="op" id="6902318">,</span>&nbsp;<span class="string" id="6902320">&#34;windows&#34;</span><span class="op" id="6902329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902333">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902346">case</span>&nbsp;<span class="string" id="6902351">&#34;freebsd&#34;</span><span class="op" id="6902360">:</span>&nbsp;<span class="comment" id="6902362">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902404"><a href="/net/server_test.go.html#6902237">t</a></span><span class="op" id="6902405">.</span><span class="ident" id="6902406">Skipf</span><span class="op" id="6902411">(</span><span class="string" id="6902412">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6902433">,</span>&nbsp;<span class="ident" id="6902435"><a href="/net/server_test.go.html#6897840">runtime</a></span><span class="op" id="6902442">.</span><span class="ident" id="6902443">GOOS</span><span class="op" id="6902447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902450">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902454">for</span>&nbsp;<span class="ident" id="6902458">_</span><span class="op" id="6902459">,</span>&nbsp;<span class="ident" id="6902461">tt</span>&nbsp;<span class="op" id="6902464">:=</span>&nbsp;<span class="keyword" id="6902467">range</span>&nbsp;<span class="ident" id="6902473"><a href="/net/server_test.go.html#6901801">seqpacketConnServerTests</a></span>&nbsp;<span class="op" id="6902498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902502">if</span>&nbsp;<span class="ident" id="6902505"><a href="/net/server_test.go.html#6897840">runtime</a></span><span class="op" id="6902512">.</span><span class="ident" id="6902513">GOOS</span>&nbsp;<span class="op" id="6902518">!=</span>&nbsp;<span class="string" id="6902521">&#34;linux&#34;</span>&nbsp;<span class="op" id="6902529">&amp;&amp;</span>&nbsp;<span class="ident" id="6902532"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902534">.</span><span class="ident" id="6902535">linuxOnly</span>&nbsp;<span class="op" id="6902545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902550">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902561">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902565">listening</span>&nbsp;<span class="op" id="6902575">:=</span>&nbsp;<span class="builtinfunc" id="6902578">make</span><span class="op" id="6902582">(</span><span class="keyword" id="6902583">chan</span>&nbsp;<span class="builtintype" id="6902588">string</span><span class="op" id="6902594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902598">done</span>&nbsp;<span class="op" id="6902603">:=</span>&nbsp;<span class="builtinfunc" id="6902606">make</span><span class="op" id="6902610">(</span><span class="keyword" id="6902611">chan</span>&nbsp;<span class="builtintype" id="6902616">int</span><span class="op" id="6902619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902623">switch</span>&nbsp;<span class="ident" id="6902630"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902632">.</span><span class="ident" id="6902633">net</span>&nbsp;<span class="op" id="6902637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902641">case</span>&nbsp;<span class="string" id="6902646">&#34;unixpacket&#34;</span><span class="op" id="6902658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902663"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6902665">.</span><span class="ident" id="6902666">Remove</span><span class="op" id="6902672">(</span><span class="ident" id="6902673"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902675">.</span><span class="ident" id="6902676">saddr</span><span class="op" id="6902681">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902686"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6902688">.</span><span class="ident" id="6902689">Remove</span><span class="op" id="6902695">(</span><span class="ident" id="6902696"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902698">.</span><span class="ident" id="6902699">caddr</span><span class="op" id="6902704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902713">go</span>&nbsp;<span class="ident" id="6902716"><a href="/net/server_test.go.html#6903014">runStreamConnServer</a></span><span class="op" id="6902735">(</span><span class="ident" id="6902736"><a href="/net/server_test.go.html#6902237">t</a></span><span class="op" id="6902737">,</span>&nbsp;<span class="ident" id="6902739"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902741">.</span><span class="ident" id="6902742">net</span><span class="op" id="6902745">,</span>&nbsp;<span class="ident" id="6902747"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902749">.</span><span class="ident" id="6902750">saddr</span><span class="op" id="6902755">,</span>&nbsp;<span class="ident" id="6902757"><a href="/net/server_test.go.html#6902565">listening</a></span><span class="op" id="6902766">,</span>&nbsp;<span class="ident" id="6902768"><a href="/net/server_test.go.html#6902598">done</a></span><span class="op" id="6902772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902776">taddr</span>&nbsp;<span class="op" id="6902782">:=</span>&nbsp;<span class="op" id="6902785">&lt;-</span><span class="ident" id="6902787"><a href="/net/server_test.go.html#6902565">listening</a></span>&nbsp;<span class="comment" id="6902797">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902828"><a href="/net/server_test.go.html#6903787">runStreamConnClient</a></span><span class="op" id="6902847">(</span><span class="ident" id="6902848"><a href="/net/server_test.go.html#6902237">t</a></span><span class="op" id="6902849">,</span>&nbsp;<span class="ident" id="6902851"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902853">.</span><span class="ident" id="6902854">net</span><span class="op" id="6902857">,</span>&nbsp;<span class="ident" id="6902859"><a href="/net/server_test.go.html#6902776">taddr</a></span><span class="op" id="6902864">,</span>&nbsp;<span class="ident" id="6902866"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902868">.</span><span class="ident" id="6902869">empty</span><span class="op" id="6902874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6902878">&lt;-</span><span class="ident" id="6902880"><a href="/net/server_test.go.html#6902598">done</a></span>&nbsp;<span class="comment" id="6902885">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902916">switch</span>&nbsp;<span class="ident" id="6902923"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902925">.</span><span class="ident" id="6902926">net</span>&nbsp;<span class="op" id="6902930">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6902934">case</span>&nbsp;<span class="string" id="6902939">&#34;unixpacket&#34;</span><span class="op" id="6902951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902956"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6902958">.</span><span class="ident" id="6902959">Remove</span><span class="op" id="6902965">(</span><span class="ident" id="6902966"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902968">.</span><span class="ident" id="6902969">saddr</span><span class="op" id="6902974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6902979"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6902981">.</span><span class="ident" id="6902982">Remove</span><span class="op" id="6902988">(</span><span class="ident" id="6902989"><a href="/net/server_test.go.html#6902461">tt</a></span><span class="op" id="6902991">.</span><span class="ident" id="6902992">caddr</span><span class="op" id="6902997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903004">}</span><br>
<span class="lineno">175</span><span class="op" id="6903006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6903009">func</span>&nbsp;<span class="ident" id="6903014">runStreamConnServer</span><span class="op" id="6903033">(</span><span class="ident" id="6903034">t</span>&nbsp;<span class="op" id="6903036">*</span><span class="ident" id="6903037"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6903044">.</span><span class="ident" id="6903045">T</span><span class="op" id="6903046">,</span>&nbsp;<span class="ident" id="6903048">net</span><span class="op" id="6903051">,</span>&nbsp;<span class="ident" id="6903053">laddr</span>&nbsp;<span class="builtintype" id="6903059">string</span><span class="op" id="6903065">,</span>&nbsp;<span class="ident" id="6903067">listening</span>&nbsp;<span class="keyword" id="6903077">chan</span><span class="op" id="6903081">&lt;-</span>&nbsp;<span class="builtintype" id="6903084">string</span><span class="op" id="6903090">,</span>&nbsp;<span class="ident" id="6903092">done</span>&nbsp;<span class="keyword" id="6903097">chan</span><span class="op" id="6903101">&lt;-</span>&nbsp;<span class="builtintype" id="6903104">int</span><span class="op" id="6903107">)</span>&nbsp;<span class="op" id="6903109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903112">defer</span>&nbsp;<span class="builtinfunc" id="6903118">close</span><span class="op" id="6903123">(</span><span class="ident" id="6903124"><a href="/net/server_test.go.html#6903092">done</a></span><span class="op" id="6903128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903131">l</span><span class="op" id="6903132">,</span>&nbsp;<span class="ident" id="6903134">err</span>&nbsp;<span class="op" id="6903138">:=</span>&nbsp;<span class="ident" id="6903141"><a href="/net/dial.go.html#2525176">Listen</a></span><span class="op" id="6903147">(</span><span class="ident" id="6903148"><a href="/net/server_test.go.html#6903048">net</a></span><span class="op" id="6903151">,</span>&nbsp;<span class="ident" id="6903153"><a href="/net/server_test.go.html#6903053">laddr</a></span><span class="op" id="6903158">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903161">if</span>&nbsp;<span class="ident" id="6903164"><a href="/net/server_test.go.html#6903134">err</a></span>&nbsp;<span class="op" id="6903168">!=</span>&nbsp;<span class="ident" id="6903171">nil</span>&nbsp;<span class="op" id="6903175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903179"><a href="/net/server_test.go.html#6903034">t</a></span><span class="op" id="6903180">.</span><span class="ident" id="6903181">Errorf</span><span class="op" id="6903187">(</span><span class="string" id="6903188">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6903215">,</span>&nbsp;<span class="ident" id="6903217"><a href="/net/server_test.go.html#6903048">net</a></span><span class="op" id="6903220">,</span>&nbsp;<span class="ident" id="6903222"><a href="/net/server_test.go.html#6903053">laddr</a></span><span class="op" id="6903227">,</span>&nbsp;<span class="ident" id="6903229"><a href="/net/server_test.go.html#6903134">err</a></span><span class="op" id="6903232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903236"><a href="/net/server_test.go.html#6903067">listening</a></span>&nbsp;<span class="op" id="6903246">&lt;-</span>&nbsp;<span class="string" id="6903249">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903259">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903267">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903270">defer</span>&nbsp;<span class="ident" id="6903276"><a href="/net/server_test.go.html#6903131">l</a></span><span class="op" id="6903277">.</span><span class="ident" id="6903278">Close</span><span class="op" id="6903283">(</span><span class="op" id="6903284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903287"><a href="/net/server_test.go.html#6903067">listening</a></span>&nbsp;<span class="op" id="6903297">&lt;-</span>&nbsp;<span class="ident" id="6903300"><a href="/net/server_test.go.html#6903131">l</a></span><span class="op" id="6903301">.</span><span class="ident" id="6903302">Addr</span><span class="op" id="6903306">(</span><span class="op" id="6903307">)</span><span class="op" id="6903308">.</span><span class="ident" id="6903309">String</span><span class="op" id="6903315">(</span><span class="op" id="6903316">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903320">echo</span>&nbsp;<span class="op" id="6903325">:=</span>&nbsp;<span class="keyword" id="6903328">func</span><span class="op" id="6903332">(</span><span class="ident" id="6903333">rw</span>&nbsp;<span class="ident" id="6903336"><a href="/net/server_test.go.html#6897828">io</a></span><span class="op" id="6903338">.</span><span class="ident" id="6903339">ReadWriter</span><span class="op" id="6903349">,</span>&nbsp;<span class="ident" id="6903351">done</span>&nbsp;<span class="keyword" id="6903356">chan</span><span class="op" id="6903360">&lt;-</span>&nbsp;<span class="builtintype" id="6903363">int</span><span class="op" id="6903366">)</span>&nbsp;<span class="op" id="6903368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903372">buf</span>&nbsp;<span class="op" id="6903376">:=</span>&nbsp;<span class="builtinfunc" id="6903379">make</span><span class="op" id="6903383">(</span><span class="op" id="6903384">[</span><span class="op" id="6903385">]</span><span class="builtintype" id="6903386">byte</span><span class="op" id="6903390">,</span>&nbsp;<span class="num" id="6903392">1024</span><span class="op" id="6903396">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903400">for</span>&nbsp;<span class="op" id="6903404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903409">n</span><span class="op" id="6903410">,</span>&nbsp;<span class="ident" id="6903412">err</span>&nbsp;<span class="op" id="6903416">:=</span>&nbsp;<span class="ident" id="6903419"><a href="/net/server_test.go.html#6903333">rw</a></span><span class="op" id="6903421">.</span><span class="ident" id="6903422">Read</span><span class="op" id="6903426">(</span><span class="ident" id="6903427"><a href="/net/server_test.go.html#6903372">buf</a></span><span class="op" id="6903430">[</span><span class="num" id="6903431">0</span><span class="op" id="6903432">:</span><span class="op" id="6903433">]</span><span class="op" id="6903434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903439">if</span>&nbsp;<span class="ident" id="6903442"><a href="/net/server_test.go.html#6903412">err</a></span>&nbsp;<span class="op" id="6903446">!=</span>&nbsp;<span class="ident" id="6903449">nil</span>&nbsp;<span class="op" id="6903453">||</span>&nbsp;<span class="ident" id="6903456"><a href="/net/server_test.go.html#6903409">n</a></span>&nbsp;<span class="op" id="6903458">==</span>&nbsp;<span class="num" id="6903461">0</span>&nbsp;<span class="op" id="6903463">||</span>&nbsp;<span class="builtintype" id="6903466">string</span><span class="op" id="6903472">(</span><span class="ident" id="6903473"><a href="/net/server_test.go.html#6903372">buf</a></span><span class="op" id="6903476">[</span><span class="op" id="6903477">:</span><span class="ident" id="6903478"><a href="/net/server_test.go.html#6903409">n</a></span><span class="op" id="6903479">]</span><span class="op" id="6903480">)</span>&nbsp;<span class="op" id="6903482">==</span>&nbsp;<span class="string" id="6903485">&#34;END&#34;</span>&nbsp;<span class="op" id="6903491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903497">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903506">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903511"><a href="/net/server_test.go.html#6903333">rw</a></span><span class="op" id="6903513">.</span><span class="ident" id="6903514">Write</span><span class="op" id="6903519">(</span><span class="ident" id="6903520"><a href="/net/server_test.go.html#6903372">buf</a></span><span class="op" id="6903523">[</span><span class="num" id="6903524">0</span><span class="op" id="6903525">:</span><span class="ident" id="6903526"><a href="/net/server_test.go.html#6903409">n</a></span><span class="op" id="6903527">]</span><span class="op" id="6903528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6903536">close</span><span class="op" id="6903541">(</span><span class="ident" id="6903542"><a href="/net/server_test.go.html#6903351">done</a></span><span class="op" id="6903546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="6903552">run</span><span class="op" id="6903555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903558">for</span>&nbsp;<span class="op" id="6903562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903566">c</span><span class="op" id="6903567">,</span>&nbsp;<span class="ident" id="6903569">err</span>&nbsp;<span class="op" id="6903573">:=</span>&nbsp;<span class="ident" id="6903576"><a href="/net/server_test.go.html#6903131">l</a></span><span class="op" id="6903577">.</span><span class="ident" id="6903578">Accept</span><span class="op" id="6903584">(</span><span class="op" id="6903585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903589">if</span>&nbsp;<span class="ident" id="6903592"><a href="/net/server_test.go.html#6903569">err</a></span>&nbsp;<span class="op" id="6903596">!=</span>&nbsp;<span class="ident" id="6903599">nil</span>&nbsp;<span class="op" id="6903603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903608"><a href="/net/server_test.go.html#6903034">t</a></span><span class="op" id="6903609">.</span><span class="ident" id="6903610">Logf</span><span class="op" id="6903614">(</span><span class="string" id="6903615">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6903634">,</span>&nbsp;<span class="ident" id="6903636"><a href="/net/server_test.go.html#6903569">err</a></span><span class="op" id="6903639">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903644">continue</span>&nbsp;<span class="ident" id="6903653">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903663">echodone</span>&nbsp;<span class="op" id="6903672">:=</span>&nbsp;<span class="builtinfunc" id="6903675">make</span><span class="op" id="6903679">(</span><span class="keyword" id="6903680">chan</span>&nbsp;<span class="builtintype" id="6903685">int</span><span class="op" id="6903688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903692">go</span>&nbsp;<span class="ident" id="6903695"><a href="/net/server_test.go.html#6903320">echo</a></span><span class="op" id="6903699">(</span><span class="ident" id="6903700"><a href="/net/server_test.go.html#6903566">c</a></span><span class="op" id="6903701">,</span>&nbsp;<span class="ident" id="6903703"><a href="/net/server_test.go.html#6903663">echodone</a></span><span class="op" id="6903711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903715">&lt;-</span><span class="ident" id="6903717"><a href="/net/server_test.go.html#6903663">echodone</a></span>&nbsp;<span class="comment" id="6903726">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903754"><a href="/net/server_test.go.html#6903566">c</a></span><span class="op" id="6903755">.</span><span class="ident" id="6903756">Close</span><span class="op" id="6903761">(</span><span class="op" id="6903762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903766">break</span>&nbsp;<span class="ident" id="6903772">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903777">}</span><br>
<span class="lineno"></span><span class="op" id="6903779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6903782">func</span>&nbsp;<span class="ident" id="6903787">runStreamConnClient</span><span class="op" id="6903806">(</span><span class="ident" id="6903807">t</span>&nbsp;<span class="op" id="6903809">*</span><span class="ident" id="6903810"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6903817">.</span><span class="ident" id="6903818">T</span><span class="op" id="6903819">,</span>&nbsp;<span class="ident" id="6903821">net</span><span class="op" id="6903824">,</span>&nbsp;<span class="ident" id="6903826">taddr</span>&nbsp;<span class="builtintype" id="6903832">string</span><span class="op" id="6903838">,</span>&nbsp;<span class="ident" id="6903840">isEmpty</span>&nbsp;<span class="builtintype" id="6903848">bool</span><span class="op" id="6903852">)</span>&nbsp;<span class="op" id="6903854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903857">c</span><span class="op" id="6903858">,</span>&nbsp;<span class="ident" id="6903860">err</span>&nbsp;<span class="op" id="6903864">:=</span>&nbsp;<span class="ident" id="6903867"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6903871">(</span><span class="ident" id="6903872"><a href="/net/server_test.go.html#6903821">net</a></span><span class="op" id="6903875">,</span>&nbsp;<span class="ident" id="6903877"><a href="/net/server_test.go.html#6903826">taddr</a></span><span class="op" id="6903882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903885">if</span>&nbsp;<span class="ident" id="6903888"><a href="/net/server_test.go.html#6903860">err</a></span>&nbsp;<span class="op" id="6903892">!=</span>&nbsp;<span class="ident" id="6903895">nil</span>&nbsp;<span class="op" id="6903899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903903"><a href="/net/server_test.go.html#6903807">t</a></span><span class="op" id="6903904">.</span><span class="ident" id="6903905">Fatalf</span><span class="op" id="6903911">(</span><span class="string" id="6903912">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6903937">,</span>&nbsp;<span class="ident" id="6903939"><a href="/net/server_test.go.html#6903821">net</a></span><span class="op" id="6903942">,</span>&nbsp;<span class="ident" id="6903944"><a href="/net/server_test.go.html#6903826">taddr</a></span><span class="op" id="6903949">,</span>&nbsp;<span class="ident" id="6903951"><a href="/net/server_test.go.html#6903860">err</a></span><span class="op" id="6903954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6903957">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6903960">defer</span>&nbsp;<span class="ident" id="6903966"><a href="/net/server_test.go.html#6903857">c</a></span><span class="op" id="6903967">.</span><span class="ident" id="6903968">Close</span><span class="op" id="6903973">(</span><span class="op" id="6903974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6903977"><a href="/net/server_test.go.html#6903857">c</a></span><span class="op" id="6903978">.</span><span class="ident" id="6903979">SetReadDeadline</span><span class="op" id="6903994">(</span><span class="ident" id="6903995"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6903999">.</span><span class="ident" id="6904000">Now</span><span class="op" id="6904003">(</span><span class="op" id="6904004">)</span><span class="op" id="6904005">.</span><span class="ident" id="6904006">Add</span><span class="op" id="6904009">(</span><span class="num" id="6904010">1</span>&nbsp;<span class="op" id="6904012">*</span>&nbsp;<span class="ident" id="6904014"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6904018">.</span><span class="ident" id="6904019">Second</span><span class="op" id="6904025">)</span><span class="op" id="6904026">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904030">var</span>&nbsp;<span class="ident" id="6904034">wb</span>&nbsp;<span class="op" id="6904037">[</span><span class="op" id="6904038">]</span><span class="builtintype" id="6904039">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904045">if</span>&nbsp;<span class="op" id="6904048">!</span><span class="ident" id="6904049"><a href="/net/server_test.go.html#6903840">isEmpty</a></span>&nbsp;<span class="op" id="6904057">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904061"><a href="/net/server_test.go.html#6904034">wb</a></span>&nbsp;<span class="op" id="6904064">=</span>&nbsp;<span class="op" id="6904066">[</span><span class="op" id="6904067">]</span><span class="builtintype" id="6904068">byte</span><span class="op" id="6904072">(</span><span class="string" id="6904073">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6904101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904107">if</span>&nbsp;<span class="ident" id="6904110">n</span><span class="op" id="6904111">,</span>&nbsp;<span class="ident" id="6904113">err</span>&nbsp;<span class="op" id="6904117">:=</span>&nbsp;<span class="ident" id="6904120"><a href="/net/server_test.go.html#6903857">c</a></span><span class="op" id="6904121">.</span><span class="ident" id="6904122">Write</span><span class="op" id="6904127">(</span><span class="ident" id="6904128"><a href="/net/server_test.go.html#6904034">wb</a></span><span class="op" id="6904130">)</span><span class="op" id="6904131">;</span>&nbsp;<span class="ident" id="6904133"><a href="/net/server_test.go.html#6904113">err</a></span>&nbsp;<span class="op" id="6904137">!=</span>&nbsp;<span class="ident" id="6904140">nil</span>&nbsp;<span class="op" id="6904144">||</span>&nbsp;<span class="ident" id="6904147"><a href="/net/server_test.go.html#6904110">n</a></span>&nbsp;<span class="op" id="6904149">!=</span>&nbsp;<span class="builtinfunc" id="6904152">len</span><span class="op" id="6904155">(</span><span class="ident" id="6904156"><a href="/net/server_test.go.html#6904034">wb</a></span><span class="op" id="6904158">)</span>&nbsp;<span class="op" id="6904160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904164"><a href="/net/server_test.go.html#6903807">t</a></span><span class="op" id="6904165">.</span><span class="ident" id="6904166">Fatalf</span><span class="op" id="6904172">(</span><span class="string" id="6904173">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6904211">,</span>&nbsp;<span class="ident" id="6904213"><a href="/net/server_test.go.html#6904110">n</a></span><span class="op" id="6904214">,</span>&nbsp;<span class="ident" id="6904216"><a href="/net/server_test.go.html#6904113">err</a></span><span class="op" id="6904219">,</span>&nbsp;<span class="builtinfunc" id="6904221">len</span><span class="op" id="6904224">(</span><span class="ident" id="6904225"><a href="/net/server_test.go.html#6904034">wb</a></span><span class="op" id="6904227">)</span><span class="op" id="6904228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904231">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904235">rb</span>&nbsp;<span class="op" id="6904238">:=</span>&nbsp;<span class="builtinfunc" id="6904241">make</span><span class="op" id="6904245">(</span><span class="op" id="6904246">[</span><span class="op" id="6904247">]</span><span class="builtintype" id="6904248">byte</span><span class="op" id="6904252">,</span>&nbsp;<span class="num" id="6904254">1024</span><span class="op" id="6904258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904261">if</span>&nbsp;<span class="ident" id="6904264">n</span><span class="op" id="6904265">,</span>&nbsp;<span class="ident" id="6904267">err</span>&nbsp;<span class="op" id="6904271">:=</span>&nbsp;<span class="ident" id="6904274"><a href="/net/server_test.go.html#6903857">c</a></span><span class="op" id="6904275">.</span><span class="ident" id="6904276">Read</span><span class="op" id="6904280">(</span><span class="ident" id="6904281"><a href="/net/server_test.go.html#6904235">rb</a></span><span class="op" id="6904283">[</span><span class="num" id="6904284">0</span><span class="op" id="6904285">:</span><span class="op" id="6904286">]</span><span class="op" id="6904287">)</span><span class="op" id="6904288">;</span>&nbsp;<span class="ident" id="6904290"><a href="/net/server_test.go.html#6904267">err</a></span>&nbsp;<span class="op" id="6904294">!=</span>&nbsp;<span class="ident" id="6904297">nil</span>&nbsp;<span class="op" id="6904301">||</span>&nbsp;<span class="ident" id="6904304"><a href="/net/server_test.go.html#6904264">n</a></span>&nbsp;<span class="op" id="6904306">!=</span>&nbsp;<span class="builtinfunc" id="6904309">len</span><span class="op" id="6904312">(</span><span class="ident" id="6904313"><a href="/net/server_test.go.html#6904034">wb</a></span><span class="op" id="6904315">)</span>&nbsp;<span class="op" id="6904317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904321"><a href="/net/server_test.go.html#6903807">t</a></span><span class="op" id="6904322">.</span><span class="ident" id="6904323">Fatalf</span><span class="op" id="6904329">(</span><span class="string" id="6904330">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6904367">,</span>&nbsp;<span class="ident" id="6904369"><a href="/net/server_test.go.html#6904264">n</a></span><span class="op" id="6904370">,</span>&nbsp;<span class="ident" id="6904372"><a href="/net/server_test.go.html#6904267">err</a></span><span class="op" id="6904375">,</span>&nbsp;<span class="builtinfunc" id="6904377">len</span><span class="op" id="6904380">(</span><span class="ident" id="6904381"><a href="/net/server_test.go.html#6904034">wb</a></span><span class="op" id="6904383">)</span><span class="op" id="6904384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904387">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6904391">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6904432">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904484">switch</span>&nbsp;<span class="ident" id="6904491"><a href="/net/server_test.go.html#6903821">net</a></span>&nbsp;<span class="op" id="6904495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6904498">case</span>&nbsp;<span class="string" id="6904503">&#34;unixpacket&#34;</span><span class="op" id="6904515">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904519"><a href="/net/server_test.go.html#6903857">c</a></span><span class="op" id="6904520">.</span><span class="ident" id="6904521">Write</span><span class="op" id="6904526">(</span><span class="op" id="6904527">[</span><span class="op" id="6904528">]</span><span class="builtintype" id="6904529">byte</span><span class="op" id="6904533">(</span><span class="string" id="6904534">&#34;END&#34;</span><span class="op" id="6904539">)</span><span class="op" id="6904540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6904543">}</span><br>
<span class="lineno"></span><span class="op" id="6904545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6904548">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="6904591">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="6904642">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="6904694">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="6904724">var</span>&nbsp;<span class="ident" id="6904728">testDatagram</span>&nbsp;<span class="op" id="6904741">=</span>&nbsp;<span class="ident" id="6904743"><a href="/net/server_test.go.html#6897820">flag</a></span><span class="op" id="6904747">.</span><span class="ident" id="6904748">Bool</span><span class="op" id="6904752">(</span><span class="string" id="6904753">&#34;datagram&#34;</span><span class="op" id="6904763">,</span>&nbsp;<span class="ident" id="6904765">false</span><span class="op" id="6904770">,</span>&nbsp;<span class="string" id="6904772">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="6904806">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6904809">var</span>&nbsp;<span class="ident" id="6904813">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="6904843">=</span>&nbsp;<span class="op" id="6904845">[</span><span class="op" id="6904846">]</span><span class="keyword" id="6904847">struct</span>&nbsp;<span class="op" id="6904854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904857">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6904867">string</span>&nbsp;<span class="comment" id="6904874">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904890">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6904900">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904908">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6904918">string</span>&nbsp;<span class="comment" id="6904925">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904941">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6904951">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6904959">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6904969">bool</span>&nbsp;<span class="comment" id="6904974">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905015">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6905025">bool</span>&nbsp;<span class="comment" id="6905030">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905076">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6905086">bool</span>&nbsp;<span class="comment" id="6905091">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905122">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6905132">bool</span>&nbsp;<span class="comment" id="6905137">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6905162">linuxOnly</span>&nbsp;<span class="builtintype" id="6905172">bool</span>&nbsp;<span class="comment" id="6905177">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="6905231">}</span><span class="op" id="6905232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905235">{</span><span class="ident" id="6905236">snet</span><span class="op" id="6905240">:</span>&nbsp;<span class="string" id="6905242">&#34;udp&#34;</span><span class="op" id="6905247">,</span>&nbsp;<span class="ident" id="6905249">saddr</span><span class="op" id="6905254">:</span>&nbsp;<span class="string" id="6905256">&#34;&#34;</span><span class="op" id="6905258">,</span>&nbsp;<span class="ident" id="6905260">cnet</span><span class="op" id="6905264">:</span>&nbsp;<span class="string" id="6905266">&#34;udp&#34;</span><span class="op" id="6905271">,</span>&nbsp;<span class="ident" id="6905273">caddr</span><span class="op" id="6905278">:</span>&nbsp;<span class="string" id="6905280">&#34;127.0.0.1&#34;</span><span class="op" id="6905291">}</span><span class="op" id="6905292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905295">{</span><span class="ident" id="6905296">snet</span><span class="op" id="6905300">:</span>&nbsp;<span class="string" id="6905302">&#34;udp&#34;</span><span class="op" id="6905307">,</span>&nbsp;<span class="ident" id="6905309">saddr</span><span class="op" id="6905314">:</span>&nbsp;<span class="string" id="6905316">&#34;0.0.0.0&#34;</span><span class="op" id="6905325">,</span>&nbsp;<span class="ident" id="6905327">cnet</span><span class="op" id="6905331">:</span>&nbsp;<span class="string" id="6905333">&#34;udp&#34;</span><span class="op" id="6905338">,</span>&nbsp;<span class="ident" id="6905340">caddr</span><span class="op" id="6905345">:</span>&nbsp;<span class="string" id="6905347">&#34;127.0.0.1&#34;</span><span class="op" id="6905358">}</span><span class="op" id="6905359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905362">{</span><span class="ident" id="6905363">snet</span><span class="op" id="6905367">:</span>&nbsp;<span class="string" id="6905369">&#34;udp&#34;</span><span class="op" id="6905374">,</span>&nbsp;<span class="ident" id="6905376">saddr</span><span class="op" id="6905381">:</span>&nbsp;<span class="string" id="6905383">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6905401">,</span>&nbsp;<span class="ident" id="6905403">cnet</span><span class="op" id="6905407">:</span>&nbsp;<span class="string" id="6905409">&#34;udp&#34;</span><span class="op" id="6905414">,</span>&nbsp;<span class="ident" id="6905416">caddr</span><span class="op" id="6905421">:</span>&nbsp;<span class="string" id="6905423">&#34;127.0.0.1&#34;</span><span class="op" id="6905434">}</span><span class="op" id="6905435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905438">{</span><span class="ident" id="6905439">snet</span><span class="op" id="6905443">:</span>&nbsp;<span class="string" id="6905445">&#34;udp&#34;</span><span class="op" id="6905450">,</span>&nbsp;<span class="ident" id="6905452">saddr</span><span class="op" id="6905457">:</span>&nbsp;<span class="string" id="6905459">&#34;[::]&#34;</span><span class="op" id="6905465">,</span>&nbsp;<span class="ident" id="6905467">cnet</span><span class="op" id="6905471">:</span>&nbsp;<span class="string" id="6905473">&#34;udp&#34;</span><span class="op" id="6905478">,</span>&nbsp;<span class="ident" id="6905480">caddr</span><span class="op" id="6905485">:</span>&nbsp;<span class="string" id="6905487">&#34;[::1]&#34;</span><span class="op" id="6905494">,</span>&nbsp;<span class="ident" id="6905496">ipv6</span><span class="op" id="6905500">:</span>&nbsp;<span class="ident" id="6905502">true</span><span class="op" id="6905506">}</span><span class="op" id="6905507">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905511">{</span><span class="ident" id="6905512">snet</span><span class="op" id="6905516">:</span>&nbsp;<span class="string" id="6905518">&#34;udp&#34;</span><span class="op" id="6905523">,</span>&nbsp;<span class="ident" id="6905525">saddr</span><span class="op" id="6905530">:</span>&nbsp;<span class="string" id="6905532">&#34;&#34;</span><span class="op" id="6905534">,</span>&nbsp;<span class="ident" id="6905536">cnet</span><span class="op" id="6905540">:</span>&nbsp;<span class="string" id="6905542">&#34;udp&#34;</span><span class="op" id="6905547">,</span>&nbsp;<span class="ident" id="6905549">caddr</span><span class="op" id="6905554">:</span>&nbsp;<span class="string" id="6905556">&#34;[::1]&#34;</span><span class="op" id="6905563">,</span>&nbsp;<span class="ident" id="6905565">ipv4map</span><span class="op" id="6905572">:</span>&nbsp;<span class="ident" id="6905574">true</span><span class="op" id="6905578">}</span><span class="op" id="6905579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905582">{</span><span class="ident" id="6905583">snet</span><span class="op" id="6905587">:</span>&nbsp;<span class="string" id="6905589">&#34;udp&#34;</span><span class="op" id="6905594">,</span>&nbsp;<span class="ident" id="6905596">saddr</span><span class="op" id="6905601">:</span>&nbsp;<span class="string" id="6905603">&#34;0.0.0.0&#34;</span><span class="op" id="6905612">,</span>&nbsp;<span class="ident" id="6905614">cnet</span><span class="op" id="6905618">:</span>&nbsp;<span class="string" id="6905620">&#34;udp&#34;</span><span class="op" id="6905625">,</span>&nbsp;<span class="ident" id="6905627">caddr</span><span class="op" id="6905632">:</span>&nbsp;<span class="string" id="6905634">&#34;[::1]&#34;</span><span class="op" id="6905641">,</span>&nbsp;<span class="ident" id="6905643">ipv4map</span><span class="op" id="6905650">:</span>&nbsp;<span class="ident" id="6905652">true</span><span class="op" id="6905656">}</span><span class="op" id="6905657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905660">{</span><span class="ident" id="6905661">snet</span><span class="op" id="6905665">:</span>&nbsp;<span class="string" id="6905667">&#34;udp&#34;</span><span class="op" id="6905672">,</span>&nbsp;<span class="ident" id="6905674">saddr</span><span class="op" id="6905679">:</span>&nbsp;<span class="string" id="6905681">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6905699">,</span>&nbsp;<span class="ident" id="6905701">cnet</span><span class="op" id="6905705">:</span>&nbsp;<span class="string" id="6905707">&#34;udp&#34;</span><span class="op" id="6905712">,</span>&nbsp;<span class="ident" id="6905714">caddr</span><span class="op" id="6905719">:</span>&nbsp;<span class="string" id="6905721">&#34;[::1]&#34;</span><span class="op" id="6905728">,</span>&nbsp;<span class="ident" id="6905730">ipv4map</span><span class="op" id="6905737">:</span>&nbsp;<span class="ident" id="6905739">true</span><span class="op" id="6905743">}</span><span class="op" id="6905744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905747">{</span><span class="ident" id="6905748">snet</span><span class="op" id="6905752">:</span>&nbsp;<span class="string" id="6905754">&#34;udp&#34;</span><span class="op" id="6905759">,</span>&nbsp;<span class="ident" id="6905761">saddr</span><span class="op" id="6905766">:</span>&nbsp;<span class="string" id="6905768">&#34;[::]&#34;</span><span class="op" id="6905774">,</span>&nbsp;<span class="ident" id="6905776">cnet</span><span class="op" id="6905780">:</span>&nbsp;<span class="string" id="6905782">&#34;udp&#34;</span><span class="op" id="6905787">,</span>&nbsp;<span class="ident" id="6905789">caddr</span><span class="op" id="6905794">:</span>&nbsp;<span class="string" id="6905796">&#34;127.0.0.1&#34;</span><span class="op" id="6905807">,</span>&nbsp;<span class="ident" id="6905809">ipv4map</span><span class="op" id="6905816">:</span>&nbsp;<span class="ident" id="6905818">true</span><span class="op" id="6905822">}</span><span class="op" id="6905823">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905827">{</span><span class="ident" id="6905828">snet</span><span class="op" id="6905832">:</span>&nbsp;<span class="string" id="6905834">&#34;udp&#34;</span><span class="op" id="6905839">,</span>&nbsp;<span class="ident" id="6905841">saddr</span><span class="op" id="6905846">:</span>&nbsp;<span class="string" id="6905848">&#34;&#34;</span><span class="op" id="6905850">,</span>&nbsp;<span class="ident" id="6905852">cnet</span><span class="op" id="6905856">:</span>&nbsp;<span class="string" id="6905858">&#34;udp4&#34;</span><span class="op" id="6905864">,</span>&nbsp;<span class="ident" id="6905866">caddr</span><span class="op" id="6905871">:</span>&nbsp;<span class="string" id="6905873">&#34;127.0.0.1&#34;</span><span class="op" id="6905884">}</span><span class="op" id="6905885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905888">{</span><span class="ident" id="6905889">snet</span><span class="op" id="6905893">:</span>&nbsp;<span class="string" id="6905895">&#34;udp&#34;</span><span class="op" id="6905900">,</span>&nbsp;<span class="ident" id="6905902">saddr</span><span class="op" id="6905907">:</span>&nbsp;<span class="string" id="6905909">&#34;0.0.0.0&#34;</span><span class="op" id="6905918">,</span>&nbsp;<span class="ident" id="6905920">cnet</span><span class="op" id="6905924">:</span>&nbsp;<span class="string" id="6905926">&#34;udp4&#34;</span><span class="op" id="6905932">,</span>&nbsp;<span class="ident" id="6905934">caddr</span><span class="op" id="6905939">:</span>&nbsp;<span class="string" id="6905941">&#34;127.0.0.1&#34;</span><span class="op" id="6905952">}</span><span class="op" id="6905953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6905956">{</span><span class="ident" id="6905957">snet</span><span class="op" id="6905961">:</span>&nbsp;<span class="string" id="6905963">&#34;udp&#34;</span><span class="op" id="6905968">,</span>&nbsp;<span class="ident" id="6905970">saddr</span><span class="op" id="6905975">:</span>&nbsp;<span class="string" id="6905977">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6905995">,</span>&nbsp;<span class="ident" id="6905997">cnet</span><span class="op" id="6906001">:</span>&nbsp;<span class="string" id="6906003">&#34;udp4&#34;</span><span class="op" id="6906009">,</span>&nbsp;<span class="ident" id="6906011">caddr</span><span class="op" id="6906016">:</span>&nbsp;<span class="string" id="6906018">&#34;127.0.0.1&#34;</span><span class="op" id="6906029">}</span><span class="op" id="6906030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906033">{</span><span class="ident" id="6906034">snet</span><span class="op" id="6906038">:</span>&nbsp;<span class="string" id="6906040">&#34;udp&#34;</span><span class="op" id="6906045">,</span>&nbsp;<span class="ident" id="6906047">saddr</span><span class="op" id="6906052">:</span>&nbsp;<span class="string" id="6906054">&#34;[::]&#34;</span><span class="op" id="6906060">,</span>&nbsp;<span class="ident" id="6906062">cnet</span><span class="op" id="6906066">:</span>&nbsp;<span class="string" id="6906068">&#34;udp6&#34;</span><span class="op" id="6906074">,</span>&nbsp;<span class="ident" id="6906076">caddr</span><span class="op" id="6906081">:</span>&nbsp;<span class="string" id="6906083">&#34;[::1]&#34;</span><span class="op" id="6906090">,</span>&nbsp;<span class="ident" id="6906092">ipv6</span><span class="op" id="6906096">:</span>&nbsp;<span class="ident" id="6906098">true</span><span class="op" id="6906102">}</span><span class="op" id="6906103">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906107">{</span><span class="ident" id="6906108">snet</span><span class="op" id="6906112">:</span>&nbsp;<span class="string" id="6906114">&#34;udp&#34;</span><span class="op" id="6906119">,</span>&nbsp;<span class="ident" id="6906121">saddr</span><span class="op" id="6906126">:</span>&nbsp;<span class="string" id="6906128">&#34;&#34;</span><span class="op" id="6906130">,</span>&nbsp;<span class="ident" id="6906132">cnet</span><span class="op" id="6906136">:</span>&nbsp;<span class="string" id="6906138">&#34;udp6&#34;</span><span class="op" id="6906144">,</span>&nbsp;<span class="ident" id="6906146">caddr</span><span class="op" id="6906151">:</span>&nbsp;<span class="string" id="6906153">&#34;[::1]&#34;</span><span class="op" id="6906160">,</span>&nbsp;<span class="ident" id="6906162">ipv4map</span><span class="op" id="6906169">:</span>&nbsp;<span class="ident" id="6906171">true</span><span class="op" id="6906175">}</span><span class="op" id="6906176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906179">{</span><span class="ident" id="6906180">snet</span><span class="op" id="6906184">:</span>&nbsp;<span class="string" id="6906186">&#34;udp&#34;</span><span class="op" id="6906191">,</span>&nbsp;<span class="ident" id="6906193">saddr</span><span class="op" id="6906198">:</span>&nbsp;<span class="string" id="6906200">&#34;0.0.0.0&#34;</span><span class="op" id="6906209">,</span>&nbsp;<span class="ident" id="6906211">cnet</span><span class="op" id="6906215">:</span>&nbsp;<span class="string" id="6906217">&#34;udp6&#34;</span><span class="op" id="6906223">,</span>&nbsp;<span class="ident" id="6906225">caddr</span><span class="op" id="6906230">:</span>&nbsp;<span class="string" id="6906232">&#34;[::1]&#34;</span><span class="op" id="6906239">,</span>&nbsp;<span class="ident" id="6906241">ipv4map</span><span class="op" id="6906248">:</span>&nbsp;<span class="ident" id="6906250">true</span><span class="op" id="6906254">}</span><span class="op" id="6906255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906258">{</span><span class="ident" id="6906259">snet</span><span class="op" id="6906263">:</span>&nbsp;<span class="string" id="6906265">&#34;udp&#34;</span><span class="op" id="6906270">,</span>&nbsp;<span class="ident" id="6906272">saddr</span><span class="op" id="6906277">:</span>&nbsp;<span class="string" id="6906279">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6906297">,</span>&nbsp;<span class="ident" id="6906299">cnet</span><span class="op" id="6906303">:</span>&nbsp;<span class="string" id="6906305">&#34;udp6&#34;</span><span class="op" id="6906311">,</span>&nbsp;<span class="ident" id="6906313">caddr</span><span class="op" id="6906318">:</span>&nbsp;<span class="string" id="6906320">&#34;[::1]&#34;</span><span class="op" id="6906327">,</span>&nbsp;<span class="ident" id="6906329">ipv4map</span><span class="op" id="6906336">:</span>&nbsp;<span class="ident" id="6906338">true</span><span class="op" id="6906342">}</span><span class="op" id="6906343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906346">{</span><span class="ident" id="6906347">snet</span><span class="op" id="6906351">:</span>&nbsp;<span class="string" id="6906353">&#34;udp&#34;</span><span class="op" id="6906358">,</span>&nbsp;<span class="ident" id="6906360">saddr</span><span class="op" id="6906365">:</span>&nbsp;<span class="string" id="6906367">&#34;[::]&#34;</span><span class="op" id="6906373">,</span>&nbsp;<span class="ident" id="6906375">cnet</span><span class="op" id="6906379">:</span>&nbsp;<span class="string" id="6906381">&#34;udp4&#34;</span><span class="op" id="6906387">,</span>&nbsp;<span class="ident" id="6906389">caddr</span><span class="op" id="6906394">:</span>&nbsp;<span class="string" id="6906396">&#34;127.0.0.1&#34;</span><span class="op" id="6906407">,</span>&nbsp;<span class="ident" id="6906409">ipv4map</span><span class="op" id="6906416">:</span>&nbsp;<span class="ident" id="6906418">true</span><span class="op" id="6906422">}</span><span class="op" id="6906423">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906427">{</span><span class="ident" id="6906428">snet</span><span class="op" id="6906432">:</span>&nbsp;<span class="string" id="6906434">&#34;udp&#34;</span><span class="op" id="6906439">,</span>&nbsp;<span class="ident" id="6906441">saddr</span><span class="op" id="6906446">:</span>&nbsp;<span class="string" id="6906448">&#34;127.0.0.1&#34;</span><span class="op" id="6906459">,</span>&nbsp;<span class="ident" id="6906461">cnet</span><span class="op" id="6906465">:</span>&nbsp;<span class="string" id="6906467">&#34;udp&#34;</span><span class="op" id="6906472">,</span>&nbsp;<span class="ident" id="6906474">caddr</span><span class="op" id="6906479">:</span>&nbsp;<span class="string" id="6906481">&#34;127.0.0.1&#34;</span><span class="op" id="6906492">}</span><span class="op" id="6906493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906496">{</span><span class="ident" id="6906497">snet</span><span class="op" id="6906501">:</span>&nbsp;<span class="string" id="6906503">&#34;udp&#34;</span><span class="op" id="6906508">,</span>&nbsp;<span class="ident" id="6906510">saddr</span><span class="op" id="6906515">:</span>&nbsp;<span class="string" id="6906517">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6906537">,</span>&nbsp;<span class="ident" id="6906539">cnet</span><span class="op" id="6906543">:</span>&nbsp;<span class="string" id="6906545">&#34;udp&#34;</span><span class="op" id="6906550">,</span>&nbsp;<span class="ident" id="6906552">caddr</span><span class="op" id="6906557">:</span>&nbsp;<span class="string" id="6906559">&#34;127.0.0.1&#34;</span><span class="op" id="6906570">}</span><span class="op" id="6906571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906574">{</span><span class="ident" id="6906575">snet</span><span class="op" id="6906579">:</span>&nbsp;<span class="string" id="6906581">&#34;udp&#34;</span><span class="op" id="6906586">,</span>&nbsp;<span class="ident" id="6906588">saddr</span><span class="op" id="6906593">:</span>&nbsp;<span class="string" id="6906595">&#34;[::1]&#34;</span><span class="op" id="6906602">,</span>&nbsp;<span class="ident" id="6906604">cnet</span><span class="op" id="6906608">:</span>&nbsp;<span class="string" id="6906610">&#34;udp&#34;</span><span class="op" id="6906615">,</span>&nbsp;<span class="ident" id="6906617">caddr</span><span class="op" id="6906622">:</span>&nbsp;<span class="string" id="6906624">&#34;[::1]&#34;</span><span class="op" id="6906631">,</span>&nbsp;<span class="ident" id="6906633">ipv6</span><span class="op" id="6906637">:</span>&nbsp;<span class="ident" id="6906639">true</span><span class="op" id="6906643">}</span><span class="op" id="6906644">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906648">{</span><span class="ident" id="6906649">snet</span><span class="op" id="6906653">:</span>&nbsp;<span class="string" id="6906655">&#34;udp4&#34;</span><span class="op" id="6906661">,</span>&nbsp;<span class="ident" id="6906663">saddr</span><span class="op" id="6906668">:</span>&nbsp;<span class="string" id="6906670">&#34;&#34;</span><span class="op" id="6906672">,</span>&nbsp;<span class="ident" id="6906674">cnet</span><span class="op" id="6906678">:</span>&nbsp;<span class="string" id="6906680">&#34;udp4&#34;</span><span class="op" id="6906686">,</span>&nbsp;<span class="ident" id="6906688">caddr</span><span class="op" id="6906693">:</span>&nbsp;<span class="string" id="6906695">&#34;127.0.0.1&#34;</span><span class="op" id="6906706">}</span><span class="op" id="6906707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906710">{</span><span class="ident" id="6906711">snet</span><span class="op" id="6906715">:</span>&nbsp;<span class="string" id="6906717">&#34;udp4&#34;</span><span class="op" id="6906723">,</span>&nbsp;<span class="ident" id="6906725">saddr</span><span class="op" id="6906730">:</span>&nbsp;<span class="string" id="6906732">&#34;0.0.0.0&#34;</span><span class="op" id="6906741">,</span>&nbsp;<span class="ident" id="6906743">cnet</span><span class="op" id="6906747">:</span>&nbsp;<span class="string" id="6906749">&#34;udp4&#34;</span><span class="op" id="6906755">,</span>&nbsp;<span class="ident" id="6906757">caddr</span><span class="op" id="6906762">:</span>&nbsp;<span class="string" id="6906764">&#34;127.0.0.1&#34;</span><span class="op" id="6906775">}</span><span class="op" id="6906776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906779">{</span><span class="ident" id="6906780">snet</span><span class="op" id="6906784">:</span>&nbsp;<span class="string" id="6906786">&#34;udp4&#34;</span><span class="op" id="6906792">,</span>&nbsp;<span class="ident" id="6906794">saddr</span><span class="op" id="6906799">:</span>&nbsp;<span class="string" id="6906801">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6906819">,</span>&nbsp;<span class="ident" id="6906821">cnet</span><span class="op" id="6906825">:</span>&nbsp;<span class="string" id="6906827">&#34;udp4&#34;</span><span class="op" id="6906833">,</span>&nbsp;<span class="ident" id="6906835">caddr</span><span class="op" id="6906840">:</span>&nbsp;<span class="string" id="6906842">&#34;127.0.0.1&#34;</span><span class="op" id="6906853">}</span><span class="op" id="6906854">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906858">{</span><span class="ident" id="6906859">snet</span><span class="op" id="6906863">:</span>&nbsp;<span class="string" id="6906865">&#34;udp4&#34;</span><span class="op" id="6906871">,</span>&nbsp;<span class="ident" id="6906873">saddr</span><span class="op" id="6906878">:</span>&nbsp;<span class="string" id="6906880">&#34;127.0.0.1&#34;</span><span class="op" id="6906891">,</span>&nbsp;<span class="ident" id="6906893">cnet</span><span class="op" id="6906897">:</span>&nbsp;<span class="string" id="6906899">&#34;udp4&#34;</span><span class="op" id="6906905">,</span>&nbsp;<span class="ident" id="6906907">caddr</span><span class="op" id="6906912">:</span>&nbsp;<span class="string" id="6906914">&#34;127.0.0.1&#34;</span><span class="op" id="6906925">}</span><span class="op" id="6906926">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6906930">{</span><span class="ident" id="6906931">snet</span><span class="op" id="6906935">:</span>&nbsp;<span class="string" id="6906937">&#34;udp6&#34;</span><span class="op" id="6906943">,</span>&nbsp;<span class="ident" id="6906945">saddr</span><span class="op" id="6906950">:</span>&nbsp;<span class="string" id="6906952">&#34;&#34;</span><span class="op" id="6906954">,</span>&nbsp;<span class="ident" id="6906956">cnet</span><span class="op" id="6906960">:</span>&nbsp;<span class="string" id="6906962">&#34;udp6&#34;</span><span class="op" id="6906968">,</span>&nbsp;<span class="ident" id="6906970">caddr</span><span class="op" id="6906975">:</span>&nbsp;<span class="string" id="6906977">&#34;[::1]&#34;</span><span class="op" id="6906984">,</span>&nbsp;<span class="ident" id="6906986">ipv6</span><span class="op" id="6906990">:</span>&nbsp;<span class="ident" id="6906992">true</span><span class="op" id="6906996">}</span><span class="op" id="6906997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907000">{</span><span class="ident" id="6907001">snet</span><span class="op" id="6907005">:</span>&nbsp;<span class="string" id="6907007">&#34;udp6&#34;</span><span class="op" id="6907013">,</span>&nbsp;<span class="ident" id="6907015">saddr</span><span class="op" id="6907020">:</span>&nbsp;<span class="string" id="6907022">&#34;[::]&#34;</span><span class="op" id="6907028">,</span>&nbsp;<span class="ident" id="6907030">cnet</span><span class="op" id="6907034">:</span>&nbsp;<span class="string" id="6907036">&#34;udp6&#34;</span><span class="op" id="6907042">,</span>&nbsp;<span class="ident" id="6907044">caddr</span><span class="op" id="6907049">:</span>&nbsp;<span class="string" id="6907051">&#34;[::1]&#34;</span><span class="op" id="6907058">,</span>&nbsp;<span class="ident" id="6907060">ipv6</span><span class="op" id="6907064">:</span>&nbsp;<span class="ident" id="6907066">true</span><span class="op" id="6907070">}</span><span class="op" id="6907071">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907075">{</span><span class="ident" id="6907076">snet</span><span class="op" id="6907080">:</span>&nbsp;<span class="string" id="6907082">&#34;udp6&#34;</span><span class="op" id="6907088">,</span>&nbsp;<span class="ident" id="6907090">saddr</span><span class="op" id="6907095">:</span>&nbsp;<span class="string" id="6907097">&#34;[::1]&#34;</span><span class="op" id="6907104">,</span>&nbsp;<span class="ident" id="6907106">cnet</span><span class="op" id="6907110">:</span>&nbsp;<span class="string" id="6907112">&#34;udp6&#34;</span><span class="op" id="6907118">,</span>&nbsp;<span class="ident" id="6907120">caddr</span><span class="op" id="6907125">:</span>&nbsp;<span class="string" id="6907127">&#34;[::1]&#34;</span><span class="op" id="6907134">,</span>&nbsp;<span class="ident" id="6907136">ipv6</span><span class="op" id="6907140">:</span>&nbsp;<span class="ident" id="6907142">true</span><span class="op" id="6907146">}</span><span class="op" id="6907147">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907151">{</span><span class="ident" id="6907152">snet</span><span class="op" id="6907156">:</span>&nbsp;<span class="string" id="6907158">&#34;udp&#34;</span><span class="op" id="6907163">,</span>&nbsp;<span class="ident" id="6907165">saddr</span><span class="op" id="6907170">:</span>&nbsp;<span class="string" id="6907172">&#34;127.0.0.1&#34;</span><span class="op" id="6907183">,</span>&nbsp;<span class="ident" id="6907185">cnet</span><span class="op" id="6907189">:</span>&nbsp;<span class="string" id="6907191">&#34;udp&#34;</span><span class="op" id="6907196">,</span>&nbsp;<span class="ident" id="6907198">caddr</span><span class="op" id="6907203">:</span>&nbsp;<span class="string" id="6907205">&#34;127.0.0.1&#34;</span><span class="op" id="6907216">,</span>&nbsp;<span class="ident" id="6907218">dial</span><span class="op" id="6907222">:</span>&nbsp;<span class="ident" id="6907224">true</span><span class="op" id="6907228">}</span><span class="op" id="6907229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907232">{</span><span class="ident" id="6907233">snet</span><span class="op" id="6907237">:</span>&nbsp;<span class="string" id="6907239">&#34;udp&#34;</span><span class="op" id="6907244">,</span>&nbsp;<span class="ident" id="6907246">saddr</span><span class="op" id="6907251">:</span>&nbsp;<span class="string" id="6907253">&#34;127.0.0.1&#34;</span><span class="op" id="6907264">,</span>&nbsp;<span class="ident" id="6907266">cnet</span><span class="op" id="6907270">:</span>&nbsp;<span class="string" id="6907272">&#34;udp&#34;</span><span class="op" id="6907277">,</span>&nbsp;<span class="ident" id="6907279">caddr</span><span class="op" id="6907284">:</span>&nbsp;<span class="string" id="6907286">&#34;127.0.0.1&#34;</span><span class="op" id="6907297">,</span>&nbsp;<span class="ident" id="6907299">empty</span><span class="op" id="6907304">:</span>&nbsp;<span class="ident" id="6907306">true</span><span class="op" id="6907310">}</span><span class="op" id="6907311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907314">{</span><span class="ident" id="6907315">snet</span><span class="op" id="6907319">:</span>&nbsp;<span class="string" id="6907321">&#34;udp&#34;</span><span class="op" id="6907326">,</span>&nbsp;<span class="ident" id="6907328">saddr</span><span class="op" id="6907333">:</span>&nbsp;<span class="string" id="6907335">&#34;127.0.0.1&#34;</span><span class="op" id="6907346">,</span>&nbsp;<span class="ident" id="6907348">cnet</span><span class="op" id="6907352">:</span>&nbsp;<span class="string" id="6907354">&#34;udp&#34;</span><span class="op" id="6907359">,</span>&nbsp;<span class="ident" id="6907361">caddr</span><span class="op" id="6907366">:</span>&nbsp;<span class="string" id="6907368">&#34;127.0.0.1&#34;</span><span class="op" id="6907379">,</span>&nbsp;<span class="ident" id="6907381">dial</span><span class="op" id="6907385">:</span>&nbsp;<span class="ident" id="6907387">true</span><span class="op" id="6907391">,</span>&nbsp;<span class="ident" id="6907393">empty</span><span class="op" id="6907398">:</span>&nbsp;<span class="ident" id="6907400">true</span><span class="op" id="6907404">}</span><span class="op" id="6907405">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907409">{</span><span class="ident" id="6907410">snet</span><span class="op" id="6907414">:</span>&nbsp;<span class="string" id="6907416">&#34;udp&#34;</span><span class="op" id="6907421">,</span>&nbsp;<span class="ident" id="6907423">saddr</span><span class="op" id="6907428">:</span>&nbsp;<span class="string" id="6907430">&#34;[::1]&#34;</span><span class="op" id="6907437">,</span>&nbsp;<span class="ident" id="6907439">cnet</span><span class="op" id="6907443">:</span>&nbsp;<span class="string" id="6907445">&#34;udp&#34;</span><span class="op" id="6907450">,</span>&nbsp;<span class="ident" id="6907452">caddr</span><span class="op" id="6907457">:</span>&nbsp;<span class="string" id="6907459">&#34;[::1]&#34;</span><span class="op" id="6907466">,</span>&nbsp;<span class="ident" id="6907468">ipv6</span><span class="op" id="6907472">:</span>&nbsp;<span class="ident" id="6907474">true</span><span class="op" id="6907478">,</span>&nbsp;<span class="ident" id="6907480">dial</span><span class="op" id="6907484">:</span>&nbsp;<span class="ident" id="6907486">true</span><span class="op" id="6907490">}</span><span class="op" id="6907491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907494">{</span><span class="ident" id="6907495">snet</span><span class="op" id="6907499">:</span>&nbsp;<span class="string" id="6907501">&#34;udp&#34;</span><span class="op" id="6907506">,</span>&nbsp;<span class="ident" id="6907508">saddr</span><span class="op" id="6907513">:</span>&nbsp;<span class="string" id="6907515">&#34;[::1]&#34;</span><span class="op" id="6907522">,</span>&nbsp;<span class="ident" id="6907524">cnet</span><span class="op" id="6907528">:</span>&nbsp;<span class="string" id="6907530">&#34;udp&#34;</span><span class="op" id="6907535">,</span>&nbsp;<span class="ident" id="6907537">caddr</span><span class="op" id="6907542">:</span>&nbsp;<span class="string" id="6907544">&#34;[::1]&#34;</span><span class="op" id="6907551">,</span>&nbsp;<span class="ident" id="6907553">ipv6</span><span class="op" id="6907557">:</span>&nbsp;<span class="ident" id="6907559">true</span><span class="op" id="6907563">,</span>&nbsp;<span class="ident" id="6907565">empty</span><span class="op" id="6907570">:</span>&nbsp;<span class="ident" id="6907572">true</span><span class="op" id="6907576">}</span><span class="op" id="6907577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907580">{</span><span class="ident" id="6907581">snet</span><span class="op" id="6907585">:</span>&nbsp;<span class="string" id="6907587">&#34;udp&#34;</span><span class="op" id="6907592">,</span>&nbsp;<span class="ident" id="6907594">saddr</span><span class="op" id="6907599">:</span>&nbsp;<span class="string" id="6907601">&#34;[::1]&#34;</span><span class="op" id="6907608">,</span>&nbsp;<span class="ident" id="6907610">cnet</span><span class="op" id="6907614">:</span>&nbsp;<span class="string" id="6907616">&#34;udp&#34;</span><span class="op" id="6907621">,</span>&nbsp;<span class="ident" id="6907623">caddr</span><span class="op" id="6907628">:</span>&nbsp;<span class="string" id="6907630">&#34;[::1]&#34;</span><span class="op" id="6907637">,</span>&nbsp;<span class="ident" id="6907639">ipv6</span><span class="op" id="6907643">:</span>&nbsp;<span class="ident" id="6907645">true</span><span class="op" id="6907649">,</span>&nbsp;<span class="ident" id="6907651">dial</span><span class="op" id="6907655">:</span>&nbsp;<span class="ident" id="6907657">true</span><span class="op" id="6907661">,</span>&nbsp;<span class="ident" id="6907663">empty</span><span class="op" id="6907668">:</span>&nbsp;<span class="ident" id="6907670">true</span><span class="op" id="6907674">}</span><span class="op" id="6907675">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907679">{</span><span class="ident" id="6907680">snet</span><span class="op" id="6907684">:</span>&nbsp;<span class="string" id="6907686">&#34;unixgram&#34;</span><span class="op" id="6907696">,</span>&nbsp;<span class="ident" id="6907698">saddr</span><span class="op" id="6907703">:</span>&nbsp;<span class="ident" id="6907705"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907717">(</span><span class="op" id="6907718">)</span><span class="op" id="6907719">,</span>&nbsp;<span class="ident" id="6907721">cnet</span><span class="op" id="6907725">:</span>&nbsp;<span class="string" id="6907727">&#34;unixgram&#34;</span><span class="op" id="6907737">,</span>&nbsp;<span class="ident" id="6907739">caddr</span><span class="op" id="6907744">:</span>&nbsp;<span class="ident" id="6907746"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907758">(</span><span class="op" id="6907759">)</span><span class="op" id="6907760">}</span><span class="op" id="6907761">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907764">{</span><span class="ident" id="6907765">snet</span><span class="op" id="6907769">:</span>&nbsp;<span class="string" id="6907771">&#34;unixgram&#34;</span><span class="op" id="6907781">,</span>&nbsp;<span class="ident" id="6907783">saddr</span><span class="op" id="6907788">:</span>&nbsp;<span class="ident" id="6907790"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907802">(</span><span class="op" id="6907803">)</span><span class="op" id="6907804">,</span>&nbsp;<span class="ident" id="6907806">cnet</span><span class="op" id="6907810">:</span>&nbsp;<span class="string" id="6907812">&#34;unixgram&#34;</span><span class="op" id="6907822">,</span>&nbsp;<span class="ident" id="6907824">caddr</span><span class="op" id="6907829">:</span>&nbsp;<span class="ident" id="6907831"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907843">(</span><span class="op" id="6907844">)</span><span class="op" id="6907845">,</span>&nbsp;<span class="ident" id="6907847">dial</span><span class="op" id="6907851">:</span>&nbsp;<span class="ident" id="6907853">true</span><span class="op" id="6907857">}</span><span class="op" id="6907858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907861">{</span><span class="ident" id="6907862">snet</span><span class="op" id="6907866">:</span>&nbsp;<span class="string" id="6907868">&#34;unixgram&#34;</span><span class="op" id="6907878">,</span>&nbsp;<span class="ident" id="6907880">saddr</span><span class="op" id="6907885">:</span>&nbsp;<span class="ident" id="6907887"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907899">(</span><span class="op" id="6907900">)</span><span class="op" id="6907901">,</span>&nbsp;<span class="ident" id="6907903">cnet</span><span class="op" id="6907907">:</span>&nbsp;<span class="string" id="6907909">&#34;unixgram&#34;</span><span class="op" id="6907919">,</span>&nbsp;<span class="ident" id="6907921">caddr</span><span class="op" id="6907926">:</span>&nbsp;<span class="ident" id="6907928"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907940">(</span><span class="op" id="6907941">)</span><span class="op" id="6907942">,</span>&nbsp;<span class="ident" id="6907944">empty</span><span class="op" id="6907949">:</span>&nbsp;<span class="ident" id="6907951">true</span><span class="op" id="6907955">}</span><span class="op" id="6907956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6907959">{</span><span class="ident" id="6907960">snet</span><span class="op" id="6907964">:</span>&nbsp;<span class="string" id="6907966">&#34;unixgram&#34;</span><span class="op" id="6907976">,</span>&nbsp;<span class="ident" id="6907978">saddr</span><span class="op" id="6907983">:</span>&nbsp;<span class="ident" id="6907985"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6907997">(</span><span class="op" id="6907998">)</span><span class="op" id="6907999">,</span>&nbsp;<span class="ident" id="6908001">cnet</span><span class="op" id="6908005">:</span>&nbsp;<span class="string" id="6908007">&#34;unixgram&#34;</span><span class="op" id="6908017">,</span>&nbsp;<span class="ident" id="6908019">caddr</span><span class="op" id="6908024">:</span>&nbsp;<span class="ident" id="6908026"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6908038">(</span><span class="op" id="6908039">)</span><span class="op" id="6908040">,</span>&nbsp;<span class="ident" id="6908042">dial</span><span class="op" id="6908046">:</span>&nbsp;<span class="ident" id="6908048">true</span><span class="op" id="6908052">,</span>&nbsp;<span class="ident" id="6908054">empty</span><span class="op" id="6908059">:</span>&nbsp;<span class="ident" id="6908061">true</span><span class="op" id="6908065">}</span><span class="op" id="6908066">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908070">{</span><span class="ident" id="6908071">snet</span><span class="op" id="6908075">:</span>&nbsp;<span class="string" id="6908077">&#34;unixgram&#34;</span><span class="op" id="6908087">,</span>&nbsp;<span class="ident" id="6908089">saddr</span><span class="op" id="6908094">:</span>&nbsp;<span class="string" id="6908096">&#34;@gotest6/net&#34;</span><span class="op" id="6908110">,</span>&nbsp;<span class="ident" id="6908112">cnet</span><span class="op" id="6908116">:</span>&nbsp;<span class="string" id="6908118">&#34;unixgram&#34;</span><span class="op" id="6908128">,</span>&nbsp;<span class="ident" id="6908130">caddr</span><span class="op" id="6908135">:</span>&nbsp;<span class="string" id="6908137">&#34;@gotest6/net.local&#34;</span><span class="op" id="6908157">,</span>&nbsp;<span class="ident" id="6908159">linuxOnly</span><span class="op" id="6908168">:</span>&nbsp;<span class="ident" id="6908170">true</span><span class="op" id="6908174">}</span><span class="op" id="6908175">,</span><br>
<span class="lineno">310</span><span class="op" id="6908177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6908180">func</span>&nbsp;<span class="ident" id="6908185">TestDatagramPacketConnServer</span><span class="op" id="6908213">(</span><span class="ident" id="6908214">t</span>&nbsp;<span class="op" id="6908216">*</span><span class="ident" id="6908217"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6908224">.</span><span class="ident" id="6908225">T</span><span class="op" id="6908226">)</span>&nbsp;<span class="op" id="6908228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908231">if</span>&nbsp;<span class="op" id="6908234">!</span><span class="op" id="6908235">*</span><span class="ident" id="6908236"><a href="/net/server_test.go.html#6904728">testDatagram</a></span>&nbsp;<span class="op" id="6908249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908253">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908265">for</span>&nbsp;<span class="ident" id="6908269">_</span><span class="op" id="6908270">,</span>&nbsp;<span class="ident" id="6908272">tt</span>&nbsp;<span class="op" id="6908275">:=</span>&nbsp;<span class="keyword" id="6908278">range</span>&nbsp;<span class="ident" id="6908284"><a href="/net/server_test.go.html#6904813">datagramPacketConnServerTests</a></span>&nbsp;<span class="op" id="6908314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908318">if</span>&nbsp;<span class="ident" id="6908321"><a href="/net/server_test.go.html#6897877">skipServerTest</a></span><span class="op" id="6908335">(</span><span class="ident" id="6908336"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908338">.</span><span class="ident" id="6908339">snet</span><span class="op" id="6908343">,</span>&nbsp;<span class="string" id="6908345">&#34;unixgram&#34;</span><span class="op" id="6908355">,</span>&nbsp;<span class="ident" id="6908357"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908359">.</span><span class="ident" id="6908360">saddr</span><span class="op" id="6908365">,</span>&nbsp;<span class="ident" id="6908367"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908369">.</span><span class="ident" id="6908370">ipv6</span><span class="op" id="6908374">,</span>&nbsp;<span class="ident" id="6908376"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908378">.</span><span class="ident" id="6908379">ipv4map</span><span class="op" id="6908386">,</span>&nbsp;<span class="ident" id="6908388"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908390">.</span><span class="ident" id="6908391">linuxOnly</span><span class="op" id="6908400">)</span>&nbsp;<span class="op" id="6908402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908407">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908423">listening</span>&nbsp;<span class="op" id="6908433">:=</span>&nbsp;<span class="builtinfunc" id="6908436">make</span><span class="op" id="6908440">(</span><span class="keyword" id="6908441">chan</span>&nbsp;<span class="builtintype" id="6908446">string</span><span class="op" id="6908452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908456">done</span>&nbsp;<span class="op" id="6908461">:=</span>&nbsp;<span class="builtinfunc" id="6908464">make</span><span class="op" id="6908468">(</span><span class="keyword" id="6908469">chan</span>&nbsp;<span class="builtintype" id="6908474">int</span><span class="op" id="6908477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908481">switch</span>&nbsp;<span class="ident" id="6908488"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908490">.</span><span class="ident" id="6908491">snet</span>&nbsp;<span class="op" id="6908496">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908500">case</span>&nbsp;<span class="string" id="6908505">&#34;udp&#34;</span><span class="op" id="6908510">,</span>&nbsp;<span class="string" id="6908512">&#34;udp4&#34;</span><span class="op" id="6908518">,</span>&nbsp;<span class="string" id="6908520">&#34;udp6&#34;</span><span class="op" id="6908526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908531"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908533">.</span><span class="ident" id="6908534">saddr</span>&nbsp;<span class="op" id="6908540">+=</span>&nbsp;<span class="string" id="6908543">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908550">case</span>&nbsp;<span class="string" id="6908555">&#34;unixgram&#34;</span><span class="op" id="6908565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908570"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6908572">.</span><span class="ident" id="6908573">Remove</span><span class="op" id="6908579">(</span><span class="ident" id="6908580"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908582">.</span><span class="ident" id="6908583">saddr</span><span class="op" id="6908588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908593"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6908595">.</span><span class="ident" id="6908596">Remove</span><span class="op" id="6908602">(</span><span class="ident" id="6908603"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908605">.</span><span class="ident" id="6908606">caddr</span><span class="op" id="6908611">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908620">go</span>&nbsp;<span class="ident" id="6908623"><a href="/net/server_test.go.html#6909302">runDatagramPacketConnServer</a></span><span class="op" id="6908650">(</span><span class="ident" id="6908651"><a href="/net/server_test.go.html#6908214">t</a></span><span class="op" id="6908652">,</span>&nbsp;<span class="ident" id="6908654"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908656">.</span><span class="ident" id="6908657">snet</span><span class="op" id="6908661">,</span>&nbsp;<span class="ident" id="6908663"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908665">.</span><span class="ident" id="6908666">saddr</span><span class="op" id="6908671">,</span>&nbsp;<span class="ident" id="6908673"><a href="/net/server_test.go.html#6908423">listening</a></span><span class="op" id="6908682">,</span>&nbsp;<span class="ident" id="6908684"><a href="/net/server_test.go.html#6908456">done</a></span><span class="op" id="6908688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908692">taddr</span>&nbsp;<span class="op" id="6908698">:=</span>&nbsp;<span class="op" id="6908701">&lt;-</span><span class="ident" id="6908703"><a href="/net/server_test.go.html#6908423">listening</a></span>&nbsp;<span class="comment" id="6908713">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908744">switch</span>&nbsp;<span class="ident" id="6908751"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908753">.</span><span class="ident" id="6908754">cnet</span>&nbsp;<span class="op" id="6908759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908763">case</span>&nbsp;<span class="string" id="6908768">&#34;udp&#34;</span><span class="op" id="6908773">,</span>&nbsp;<span class="string" id="6908775">&#34;udp4&#34;</span><span class="op" id="6908781">,</span>&nbsp;<span class="string" id="6908783">&#34;udp6&#34;</span><span class="op" id="6908789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908794">_</span><span class="op" id="6908795">,</span>&nbsp;<span class="ident" id="6908797">port</span><span class="op" id="6908801">,</span>&nbsp;<span class="ident" id="6908803">err</span>&nbsp;<span class="op" id="6908807">:=</span>&nbsp;<span class="ident" id="6908810"><a href="/net/ipsock.go.html#2631267">SplitHostPort</a></span><span class="op" id="6908823">(</span><span class="ident" id="6908824"><a href="/net/server_test.go.html#6908692">taddr</a></span><span class="op" id="6908829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908834">if</span>&nbsp;<span class="ident" id="6908837"><a href="/net/server_test.go.html#6908803">err</a></span>&nbsp;<span class="op" id="6908841">!=</span>&nbsp;<span class="ident" id="6908844">nil</span>&nbsp;<span class="op" id="6908848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908854"><a href="/net/server_test.go.html#6908214">t</a></span><span class="op" id="6908855">.</span><span class="ident" id="6908856">Fatalf</span><span class="op" id="6908862">(</span><span class="string" id="6908863">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6908893">,</span>&nbsp;<span class="ident" id="6908895"><a href="/net/server_test.go.html#6908692">taddr</a></span><span class="op" id="6908900">,</span>&nbsp;<span class="ident" id="6908902"><a href="/net/server_test.go.html#6908803">err</a></span><span class="op" id="6908905">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908915"><a href="/net/server_test.go.html#6908692">taddr</a></span>&nbsp;<span class="op" id="6908921">=</span>&nbsp;<span class="ident" id="6908923"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908925">.</span><span class="ident" id="6908926">caddr</span>&nbsp;<span class="op" id="6908932">+</span>&nbsp;<span class="string" id="6908934">&#34;:&#34;</span>&nbsp;<span class="op" id="6908938">+</span>&nbsp;<span class="ident" id="6908940"><a href="/net/server_test.go.html#6908797">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908948"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908950">.</span><span class="ident" id="6908951">caddr</span>&nbsp;<span class="op" id="6908957">+=</span>&nbsp;<span class="string" id="6908960">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6908967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6908971">if</span>&nbsp;<span class="ident" id="6908974"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6908976">.</span><span class="ident" id="6908977">dial</span>&nbsp;<span class="op" id="6908982">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6908987"><a href="/net/server_test.go.html#6910068">runDatagramConnClient</a></span><span class="op" id="6909008">(</span><span class="ident" id="6909009"><a href="/net/server_test.go.html#6908214">t</a></span><span class="op" id="6909010">,</span>&nbsp;<span class="ident" id="6909012"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909014">.</span><span class="ident" id="6909015">cnet</span><span class="op" id="6909019">,</span>&nbsp;<span class="ident" id="6909021"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909023">.</span><span class="ident" id="6909024">caddr</span><span class="op" id="6909029">,</span>&nbsp;<span class="ident" id="6909031"><a href="/net/server_test.go.html#6908692">taddr</a></span><span class="op" id="6909036">,</span>&nbsp;<span class="ident" id="6909038"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909040">.</span><span class="ident" id="6909041">empty</span><span class="op" id="6909046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909050">}</span>&nbsp;<span class="keyword" id="6909052">else</span>&nbsp;<span class="op" id="6909057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909062"><a href="/net/server_test.go.html#6910975">runDatagramPacketConnClient</a></span><span class="op" id="6909089">(</span><span class="ident" id="6909090"><a href="/net/server_test.go.html#6908214">t</a></span><span class="op" id="6909091">,</span>&nbsp;<span class="ident" id="6909093"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909095">.</span><span class="ident" id="6909096">cnet</span><span class="op" id="6909100">,</span>&nbsp;<span class="ident" id="6909102"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909104">.</span><span class="ident" id="6909105">caddr</span><span class="op" id="6909110">,</span>&nbsp;<span class="ident" id="6909112"><a href="/net/server_test.go.html#6908692">taddr</a></span><span class="op" id="6909117">,</span>&nbsp;<span class="ident" id="6909119"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909121">.</span><span class="ident" id="6909122">empty</span><span class="op" id="6909127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909135">&lt;-</span><span class="ident" id="6909137"><a href="/net/server_test.go.html#6908456">done</a></span>&nbsp;<span class="comment" id="6909142">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909167">&lt;-</span><span class="ident" id="6909169"><a href="/net/server_test.go.html#6908456">done</a></span>&nbsp;<span class="comment" id="6909174">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909205">switch</span>&nbsp;<span class="ident" id="6909212"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909214">.</span><span class="ident" id="6909215">snet</span>&nbsp;<span class="op" id="6909220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909224">case</span>&nbsp;<span class="string" id="6909229">&#34;unixgram&#34;</span><span class="op" id="6909239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909244"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6909246">.</span><span class="ident" id="6909247">Remove</span><span class="op" id="6909253">(</span><span class="ident" id="6909254"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909256">.</span><span class="ident" id="6909257">saddr</span><span class="op" id="6909262">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909267"><a href="/net/server_test.go.html#6897834">os</a></span><span class="op" id="6909269">.</span><span class="ident" id="6909270">Remove</span><span class="op" id="6909276">(</span><span class="ident" id="6909277"><a href="/net/server_test.go.html#6908272">tt</a></span><span class="op" id="6909279">.</span><span class="ident" id="6909280">caddr</span><span class="op" id="6909285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909292">}</span><br>
<span class="lineno"></span><span class="op" id="6909294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="6909297">func</span>&nbsp;<span class="ident" id="6909302">runDatagramPacketConnServer</span><span class="op" id="6909329">(</span><span class="ident" id="6909330">t</span>&nbsp;<span class="op" id="6909332">*</span><span class="ident" id="6909333"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6909340">.</span><span class="ident" id="6909341">T</span><span class="op" id="6909342">,</span>&nbsp;<span class="ident" id="6909344">net</span><span class="op" id="6909347">,</span>&nbsp;<span class="ident" id="6909349">laddr</span>&nbsp;<span class="builtintype" id="6909355">string</span><span class="op" id="6909361">,</span>&nbsp;<span class="ident" id="6909363">listening</span>&nbsp;<span class="keyword" id="6909373">chan</span><span class="op" id="6909377">&lt;-</span>&nbsp;<span class="builtintype" id="6909380">string</span><span class="op" id="6909386">,</span>&nbsp;<span class="ident" id="6909388">done</span>&nbsp;<span class="keyword" id="6909393">chan</span><span class="op" id="6909397">&lt;-</span>&nbsp;<span class="builtintype" id="6909400">int</span><span class="op" id="6909403">)</span>&nbsp;<span class="op" id="6909405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909408">c</span><span class="op" id="6909409">,</span>&nbsp;<span class="ident" id="6909411">err</span>&nbsp;<span class="op" id="6909415">:=</span>&nbsp;<span class="ident" id="6909418"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6909430">(</span><span class="ident" id="6909431"><a href="/net/server_test.go.html#6909344">net</a></span><span class="op" id="6909434">,</span>&nbsp;<span class="ident" id="6909436"><a href="/net/server_test.go.html#6909349">laddr</a></span><span class="op" id="6909441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909444">if</span>&nbsp;<span class="ident" id="6909447"><a href="/net/server_test.go.html#6909411">err</a></span>&nbsp;<span class="op" id="6909451">!=</span>&nbsp;<span class="ident" id="6909454">nil</span>&nbsp;<span class="op" id="6909458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909462"><a href="/net/server_test.go.html#6909330">t</a></span><span class="op" id="6909463">.</span><span class="ident" id="6909464">Errorf</span><span class="op" id="6909470">(</span><span class="string" id="6909471">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6909504">,</span>&nbsp;<span class="ident" id="6909506"><a href="/net/server_test.go.html#6909344">net</a></span><span class="op" id="6909509">,</span>&nbsp;<span class="ident" id="6909511"><a href="/net/server_test.go.html#6909349">laddr</a></span><span class="op" id="6909516">,</span>&nbsp;<span class="ident" id="6909518"><a href="/net/server_test.go.html#6909411">err</a></span><span class="op" id="6909521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909525"><a href="/net/server_test.go.html#6909363">listening</a></span>&nbsp;<span class="op" id="6909535">&lt;-</span>&nbsp;<span class="string" id="6909538">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909548"><a href="/net/server_test.go.html#6909388">done</a></span>&nbsp;<span class="op" id="6909553">&lt;-</span>&nbsp;<span class="num" id="6909556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909560">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909571">defer</span>&nbsp;<span class="ident" id="6909577"><a href="/net/server_test.go.html#6909408">c</a></span><span class="op" id="6909578">.</span><span class="ident" id="6909579">Close</span><span class="op" id="6909584">(</span><span class="op" id="6909585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909588"><a href="/net/server_test.go.html#6909363">listening</a></span>&nbsp;<span class="op" id="6909598">&lt;-</span>&nbsp;<span class="ident" id="6909601"><a href="/net/server_test.go.html#6909408">c</a></span><span class="op" id="6909602">.</span><span class="ident" id="6909603">LocalAddr</span><span class="op" id="6909612">(</span><span class="op" id="6909613">)</span><span class="op" id="6909614">.</span><span class="ident" id="6909615">String</span><span class="op" id="6909621">(</span><span class="op" id="6909622">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909626">buf</span>&nbsp;<span class="op" id="6909630">:=</span>&nbsp;<span class="builtinfunc" id="6909633">make</span><span class="op" id="6909637">(</span><span class="op" id="6909638">[</span><span class="op" id="6909639">]</span><span class="builtintype" id="6909640">byte</span><span class="op" id="6909644">,</span>&nbsp;<span class="num" id="6909646">1024</span><span class="op" id="6909650">)</span><br>
<span class="lineno"></span><span class="ident" id="6909652">run</span><span class="op" id="6909655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909658">for</span>&nbsp;<span class="op" id="6909662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909666"><a href="/net/server_test.go.html#6909408">c</a></span><span class="op" id="6909667">.</span><span class="ident" id="6909668">SetReadDeadline</span><span class="op" id="6909683">(</span><span class="ident" id="6909684"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6909688">.</span><span class="ident" id="6909689">Now</span><span class="op" id="6909692">(</span><span class="op" id="6909693">)</span><span class="op" id="6909694">.</span><span class="ident" id="6909695">Add</span><span class="op" id="6909698">(</span><span class="num" id="6909699">10</span>&nbsp;<span class="op" id="6909702">*</span>&nbsp;<span class="ident" id="6909704"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6909708">.</span><span class="ident" id="6909709">Millisecond</span><span class="op" id="6909720">)</span><span class="op" id="6909721">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909725">n</span><span class="op" id="6909726">,</span>&nbsp;<span class="ident" id="6909728">ra</span><span class="op" id="6909730">,</span>&nbsp;<span class="ident" id="6909732">err</span>&nbsp;<span class="op" id="6909736">:=</span>&nbsp;<span class="ident" id="6909739"><a href="/net/server_test.go.html#6909408">c</a></span><span class="op" id="6909740">.</span><span class="ident" id="6909741">ReadFrom</span><span class="op" id="6909749">(</span><span class="ident" id="6909750"><a href="/net/server_test.go.html#6909626">buf</a></span><span class="op" id="6909753">[</span><span class="num" id="6909754">0</span><span class="op" id="6909755">:</span><span class="op" id="6909756">]</span><span class="op" id="6909757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909761">if</span>&nbsp;<span class="ident" id="6909764">nerr</span><span class="op" id="6909768">,</span>&nbsp;<span class="ident" id="6909770">ok</span>&nbsp;<span class="op" id="6909773">:=</span>&nbsp;<span class="ident" id="6909776"><a href="/net/server_test.go.html#6909732">err</a></span><span class="op" id="6909779">.</span><span class="op" id="6909780">(</span><span class="ident" id="6909781"><a href="/net/net.go.html#2656629">Error</a></span><span class="op" id="6909786">)</span><span class="op" id="6909787">;</span>&nbsp;<span class="ident" id="6909789"><a href="/net/server_test.go.html#6909770">ok</a></span>&nbsp;<span class="op" id="6909792">&amp;&amp;</span>&nbsp;<span class="ident" id="6909795"><a href="/net/server_test.go.html#6909764">nerr</a></span><span class="op" id="6909799">.</span><span class="ident" id="6909800">Timeout</span><span class="op" id="6909807">(</span><span class="op" id="6909808">)</span>&nbsp;<span class="op" id="6909810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909815">select</span>&nbsp;<span class="op" id="6909822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909827">case</span>&nbsp;<span class="ident" id="6909832"><a href="/net/server_test.go.html#6909388">done</a></span>&nbsp;<span class="op" id="6909837">&lt;-</span>&nbsp;<span class="num" id="6909840">1</span><span class="op" id="6909841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909847">break</span>&nbsp;<span class="ident" id="6909853">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909860">default</span><span class="op" id="6909867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909873">continue</span>&nbsp;<span class="ident" id="6909882">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909897">if</span>&nbsp;<span class="ident" id="6909900"><a href="/net/server_test.go.html#6909732">err</a></span>&nbsp;<span class="op" id="6909904">!=</span>&nbsp;<span class="ident" id="6909907">nil</span>&nbsp;<span class="op" id="6909911">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909916">break</span>&nbsp;<span class="ident" id="6909922">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6909928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6909932">if</span>&nbsp;<span class="ident" id="6909935">_</span><span class="op" id="6909936">,</span>&nbsp;<span class="ident" id="6909938"><a href="/net/server_test.go.html#6909732">err</a></span>&nbsp;<span class="op" id="6909942">=</span>&nbsp;<span class="ident" id="6909944"><a href="/net/server_test.go.html#6909408">c</a></span><span class="op" id="6909945">.</span><span class="ident" id="6909946">WriteTo</span><span class="op" id="6909953">(</span><span class="ident" id="6909954"><a href="/net/server_test.go.html#6909626">buf</a></span><span class="op" id="6909957">[</span><span class="num" id="6909958">0</span><span class="op" id="6909959">:</span><span class="ident" id="6909960"><a href="/net/server_test.go.html#6909725">n</a></span><span class="op" id="6909961">]</span><span class="op" id="6909962">,</span>&nbsp;<span class="ident" id="6909964"><a href="/net/server_test.go.html#6909728">ra</a></span><span class="op" id="6909966">)</span><span class="op" id="6909967">;</span>&nbsp;<span class="ident" id="6909969"><a href="/net/server_test.go.html#6909732">err</a></span>&nbsp;<span class="op" id="6909973">!=</span>&nbsp;<span class="ident" id="6909976">nil</span>&nbsp;<span class="op" id="6909980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6909985"><a href="/net/server_test.go.html#6909330">t</a></span><span class="op" id="6909986">.</span><span class="ident" id="6909987">Errorf</span><span class="op" id="6909993">(</span><span class="string" id="6909994">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6910018">,</span>&nbsp;<span class="ident" id="6910020"><a href="/net/server_test.go.html#6909728">ra</a></span><span class="op" id="6910022">,</span>&nbsp;<span class="ident" id="6910024"><a href="/net/server_test.go.html#6909732">err</a></span><span class="op" id="6910027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910032">break</span>&nbsp;<span class="ident" id="6910038">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910050"><a href="/net/server_test.go.html#6909388">done</a></span>&nbsp;<span class="op" id="6910055">&lt;-</span>&nbsp;<span class="num" id="6910058">1</span><br>
<span class="lineno"></span><span class="op" id="6910060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="6910063">func</span>&nbsp;<span class="ident" id="6910068">runDatagramConnClient</span><span class="op" id="6910089">(</span><span class="ident" id="6910090">t</span>&nbsp;<span class="op" id="6910092">*</span><span class="ident" id="6910093"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6910100">.</span><span class="ident" id="6910101">T</span><span class="op" id="6910102">,</span>&nbsp;<span class="ident" id="6910104">net</span><span class="op" id="6910107">,</span>&nbsp;<span class="ident" id="6910109">laddr</span><span class="op" id="6910114">,</span>&nbsp;<span class="ident" id="6910116">taddr</span>&nbsp;<span class="builtintype" id="6910122">string</span><span class="op" id="6910128">,</span>&nbsp;<span class="ident" id="6910130">isEmpty</span>&nbsp;<span class="builtintype" id="6910138">bool</span><span class="op" id="6910142">)</span>&nbsp;<span class="op" id="6910144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910147">var</span>&nbsp;<span class="ident" id="6910151">c</span>&nbsp;<span class="ident" id="6910153"><a href="/net/net.go.html#2652476">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910159">var</span>&nbsp;<span class="ident" id="6910163">err</span>&nbsp;<span class="builtintype" id="6910167">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910174">switch</span>&nbsp;<span class="ident" id="6910181"><a href="/net/server_test.go.html#6910104">net</a></span>&nbsp;<span class="op" id="6910185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910188">case</span>&nbsp;<span class="string" id="6910193">&#34;udp&#34;</span><span class="op" id="6910198">,</span>&nbsp;<span class="string" id="6910200">&#34;udp4&#34;</span><span class="op" id="6910206">,</span>&nbsp;<span class="string" id="6910208">&#34;udp6&#34;</span><span class="op" id="6910214">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910218"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910219">,</span>&nbsp;<span class="ident" id="6910221"><a href="/net/server_test.go.html#6910163">err</a></span>&nbsp;<span class="op" id="6910225">=</span>&nbsp;<span class="ident" id="6910227"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6910231">(</span><span class="ident" id="6910232"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910235">,</span>&nbsp;<span class="ident" id="6910237"><a href="/net/server_test.go.html#6910116">taddr</a></span><span class="op" id="6910242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910246">if</span>&nbsp;<span class="ident" id="6910249"><a href="/net/server_test.go.html#6910163">err</a></span>&nbsp;<span class="op" id="6910253">!=</span>&nbsp;<span class="ident" id="6910256">nil</span>&nbsp;<span class="op" id="6910260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910265"><a href="/net/server_test.go.html#6910090">t</a></span><span class="op" id="6910266">.</span><span class="ident" id="6910267">Fatalf</span><span class="op" id="6910273">(</span><span class="string" id="6910274">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6910299">,</span>&nbsp;<span class="ident" id="6910301"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910304">,</span>&nbsp;<span class="ident" id="6910306"><a href="/net/server_test.go.html#6910116">taddr</a></span><span class="op" id="6910311">,</span>&nbsp;<span class="ident" id="6910313"><a href="/net/server_test.go.html#6910163">err</a></span><span class="op" id="6910316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910323">case</span>&nbsp;<span class="string" id="6910328">&#34;unixgram&#34;</span><span class="op" id="6910338">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910342"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910343">,</span>&nbsp;<span class="ident" id="6910345"><a href="/net/server_test.go.html#6910163">err</a></span>&nbsp;<span class="op" id="6910349">=</span>&nbsp;<span class="ident" id="6910351"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6910359">(</span><span class="ident" id="6910360"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910363">,</span>&nbsp;<span class="op" id="6910365">&amp;</span><span class="ident" id="6910366"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6910374">{</span><span class="ident" id="6910375">Name</span><span class="op" id="6910379">:</span>&nbsp;<span class="ident" id="6910381"><a href="/net/server_test.go.html#6910109">laddr</a></span><span class="op" id="6910386">,</span>&nbsp;<span class="ident" id="6910388">Net</span><span class="op" id="6910391">:</span>&nbsp;<span class="ident" id="6910393"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910396">}</span><span class="op" id="6910397">,</span>&nbsp;<span class="op" id="6910399">&amp;</span><span class="ident" id="6910400"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="6910408">{</span><span class="ident" id="6910409">Name</span><span class="op" id="6910413">:</span>&nbsp;<span class="ident" id="6910415"><a href="/net/server_test.go.html#6910116">taddr</a></span><span class="op" id="6910420">,</span>&nbsp;<span class="ident" id="6910422">Net</span><span class="op" id="6910425">:</span>&nbsp;<span class="ident" id="6910427"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910430">}</span><span class="op" id="6910431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910435">if</span>&nbsp;<span class="ident" id="6910438"><a href="/net/server_test.go.html#6910163">err</a></span>&nbsp;<span class="op" id="6910442">!=</span>&nbsp;<span class="ident" id="6910445">nil</span>&nbsp;<span class="op" id="6910449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910454"><a href="/net/server_test.go.html#6910090">t</a></span><span class="op" id="6910455">.</span><span class="ident" id="6910456">Fatalf</span><span class="op" id="6910462">(</span><span class="string" id="6910463">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6910498">,</span>&nbsp;<span class="ident" id="6910500"><a href="/net/server_test.go.html#6910104">net</a></span><span class="op" id="6910503">,</span>&nbsp;<span class="ident" id="6910505"><a href="/net/server_test.go.html#6910109">laddr</a></span><span class="op" id="6910510">,</span>&nbsp;<span class="ident" id="6910512"><a href="/net/server_test.go.html#6910116">taddr</a></span><span class="op" id="6910517">,</span>&nbsp;<span class="ident" id="6910519"><a href="/net/server_test.go.html#6910163">err</a></span><span class="op" id="6910522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910529">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910532">defer</span>&nbsp;<span class="ident" id="6910538"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910539">.</span><span class="ident" id="6910540">Close</span><span class="op" id="6910545">(</span><span class="op" id="6910546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910549"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910550">.</span><span class="ident" id="6910551">SetReadDeadline</span><span class="op" id="6910566">(</span><span class="ident" id="6910567"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6910571">.</span><span class="ident" id="6910572">Now</span><span class="op" id="6910575">(</span><span class="op" id="6910576">)</span><span class="op" id="6910577">.</span><span class="ident" id="6910578">Add</span><span class="op" id="6910581">(</span><span class="num" id="6910582">1</span>&nbsp;<span class="op" id="6910584">*</span>&nbsp;<span class="ident" id="6910586"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6910590">.</span><span class="ident" id="6910591">Second</span><span class="op" id="6910597">)</span><span class="op" id="6910598">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910602">var</span>&nbsp;<span class="ident" id="6910606">wb</span>&nbsp;<span class="op" id="6910609">[</span><span class="op" id="6910610">]</span><span class="builtintype" id="6910611">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910617">if</span>&nbsp;<span class="op" id="6910620">!</span><span class="ident" id="6910621"><a href="/net/server_test.go.html#6910130">isEmpty</a></span>&nbsp;<span class="op" id="6910629">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910633"><a href="/net/server_test.go.html#6910606">wb</a></span>&nbsp;<span class="op" id="6910636">=</span>&nbsp;<span class="op" id="6910638">[</span><span class="op" id="6910639">]</span><span class="builtintype" id="6910640">byte</span><span class="op" id="6910644">(</span><span class="string" id="6910645">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="6910675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910681">if</span>&nbsp;<span class="ident" id="6910684">n</span><span class="op" id="6910685">,</span>&nbsp;<span class="ident" id="6910687">err</span>&nbsp;<span class="op" id="6910691">:=</span>&nbsp;<span class="ident" id="6910694"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910695">.</span><span class="ident" id="6910696">Write</span><span class="op" id="6910701">(</span><span class="ident" id="6910702"><a href="/net/server_test.go.html#6910606">wb</a></span><span class="op" id="6910704">[</span><span class="num" id="6910705">0</span><span class="op" id="6910706">:</span><span class="op" id="6910707">]</span><span class="op" id="6910708">)</span><span class="op" id="6910709">;</span>&nbsp;<span class="ident" id="6910711"><a href="/net/server_test.go.html#6910687">err</a></span>&nbsp;<span class="op" id="6910715">!=</span>&nbsp;<span class="ident" id="6910718">nil</span>&nbsp;<span class="op" id="6910722">||</span>&nbsp;<span class="ident" id="6910725"><a href="/net/server_test.go.html#6910684">n</a></span>&nbsp;<span class="op" id="6910727">!=</span>&nbsp;<span class="builtinfunc" id="6910730">len</span><span class="op" id="6910733">(</span><span class="ident" id="6910734"><a href="/net/server_test.go.html#6910606">wb</a></span><span class="op" id="6910736">)</span>&nbsp;<span class="op" id="6910738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910742"><a href="/net/server_test.go.html#6910090">t</a></span><span class="op" id="6910743">.</span><span class="ident" id="6910744">Fatalf</span><span class="op" id="6910750">(</span><span class="string" id="6910751">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6910789">,</span>&nbsp;<span class="ident" id="6910791"><a href="/net/server_test.go.html#6910684">n</a></span><span class="op" id="6910792">,</span>&nbsp;<span class="ident" id="6910794"><a href="/net/server_test.go.html#6910687">err</a></span><span class="op" id="6910797">,</span>&nbsp;<span class="builtinfunc" id="6910799">len</span><span class="op" id="6910802">(</span><span class="ident" id="6910803"><a href="/net/server_test.go.html#6910606">wb</a></span><span class="op" id="6910805">)</span><span class="op" id="6910806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910809">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910813">rb</span>&nbsp;<span class="op" id="6910816">:=</span>&nbsp;<span class="builtinfunc" id="6910819">make</span><span class="op" id="6910823">(</span><span class="op" id="6910824">[</span><span class="op" id="6910825">]</span><span class="builtintype" id="6910826">byte</span><span class="op" id="6910830">,</span>&nbsp;<span class="num" id="6910832">1024</span><span class="op" id="6910836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6910839">if</span>&nbsp;<span class="ident" id="6910842">n</span><span class="op" id="6910843">,</span>&nbsp;<span class="ident" id="6910845">err</span>&nbsp;<span class="op" id="6910849">:=</span>&nbsp;<span class="ident" id="6910852"><a href="/net/server_test.go.html#6910151">c</a></span><span class="op" id="6910853">.</span><span class="ident" id="6910854">Read</span><span class="op" id="6910858">(</span><span class="ident" id="6910859"><a href="/net/server_test.go.html#6910813">rb</a></span><span class="op" id="6910861">[</span><span class="num" id="6910862">0</span><span class="op" id="6910863">:</span><span class="op" id="6910864">]</span><span class="op" id="6910865">)</span><span class="op" id="6910866">;</span>&nbsp;<span class="ident" id="6910868"><a href="/net/server_test.go.html#6910845">err</a></span>&nbsp;<span class="op" id="6910872">!=</span>&nbsp;<span class="ident" id="6910875">nil</span>&nbsp;<span class="op" id="6910879">||</span>&nbsp;<span class="ident" id="6910882"><a href="/net/server_test.go.html#6910842">n</a></span>&nbsp;<span class="op" id="6910884">!=</span>&nbsp;<span class="builtinfunc" id="6910887">len</span><span class="op" id="6910890">(</span><span class="ident" id="6910891"><a href="/net/server_test.go.html#6910606">wb</a></span><span class="op" id="6910893">)</span>&nbsp;<span class="op" id="6910895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6910899"><a href="/net/server_test.go.html#6910090">t</a></span><span class="op" id="6910900">.</span><span class="ident" id="6910901">Fatalf</span><span class="op" id="6910907">(</span><span class="string" id="6910908">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6910945">,</span>&nbsp;<span class="ident" id="6910947"><a href="/net/server_test.go.html#6910842">n</a></span><span class="op" id="6910948">,</span>&nbsp;<span class="ident" id="6910950"><a href="/net/server_test.go.html#6910845">err</a></span><span class="op" id="6910953">,</span>&nbsp;<span class="builtinfunc" id="6910955">len</span><span class="op" id="6910958">(</span><span class="ident" id="6910959"><a href="/net/server_test.go.html#6910606">wb</a></span><span class="op" id="6910961">)</span><span class="op" id="6910962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6910965">}</span><br>
<span class="lineno">425</span><span class="op" id="6910967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6910970">func</span>&nbsp;<span class="ident" id="6910975">runDatagramPacketConnClient</span><span class="op" id="6911002">(</span><span class="ident" id="6911003">t</span>&nbsp;<span class="op" id="6911005">*</span><span class="ident" id="6911006"><a href="/net/server_test.go.html#6897851">testing</a></span><span class="op" id="6911013">.</span><span class="ident" id="6911014">T</span><span class="op" id="6911015">,</span>&nbsp;<span class="ident" id="6911017">net</span><span class="op" id="6911020">,</span>&nbsp;<span class="ident" id="6911022">laddr</span><span class="op" id="6911027">,</span>&nbsp;<span class="ident" id="6911029">taddr</span>&nbsp;<span class="builtintype" id="6911035">string</span><span class="op" id="6911041">,</span>&nbsp;<span class="ident" id="6911043">isEmpty</span>&nbsp;<span class="builtintype" id="6911051">bool</span><span class="op" id="6911055">)</span>&nbsp;<span class="op" id="6911057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911060">var</span>&nbsp;<span class="ident" id="6911064">ra</span>&nbsp;<span class="ident" id="6911067"><a href="/net/net.go.html#2652238">Addr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911073">var</span>&nbsp;<span class="ident" id="6911077">err</span>&nbsp;<span class="builtintype" id="6911081">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911088">switch</span>&nbsp;<span class="ident" id="6911095"><a href="/net/server_test.go.html#6911017">net</a></span>&nbsp;<span class="op" id="6911099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911102">case</span>&nbsp;<span class="string" id="6911107">&#34;udp&#34;</span><span class="op" id="6911112">,</span>&nbsp;<span class="string" id="6911114">&#34;udp4&#34;</span><span class="op" id="6911120">,</span>&nbsp;<span class="string" id="6911122">&#34;udp6&#34;</span><span class="op" id="6911128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911132"><a href="/net/server_test.go.html#6911064">ra</a></span><span class="op" id="6911134">,</span>&nbsp;<span class="ident" id="6911136"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911140">=</span>&nbsp;<span class="ident" id="6911142"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6911156">(</span><span class="ident" id="6911157"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911160">,</span>&nbsp;<span class="ident" id="6911162"><a href="/net/server_test.go.html#6911029">taddr</a></span><span class="op" id="6911167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911171">if</span>&nbsp;<span class="ident" id="6911174"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911178">!=</span>&nbsp;<span class="ident" id="6911181">nil</span>&nbsp;<span class="op" id="6911185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911190"><a href="/net/server_test.go.html#6911003">t</a></span><span class="op" id="6911191">.</span><span class="ident" id="6911192">Fatalf</span><span class="op" id="6911198">(</span><span class="string" id="6911199">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6911234">,</span>&nbsp;<span class="ident" id="6911236"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911239">,</span>&nbsp;<span class="ident" id="6911241"><a href="/net/server_test.go.html#6911029">taddr</a></span><span class="op" id="6911246">,</span>&nbsp;<span class="ident" id="6911248"><a href="/net/server_test.go.html#6911077">err</a></span><span class="op" id="6911251">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911258">case</span>&nbsp;<span class="string" id="6911263">&#34;unixgram&#34;</span><span class="op" id="6911273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911277"><a href="/net/server_test.go.html#6911064">ra</a></span><span class="op" id="6911279">,</span>&nbsp;<span class="ident" id="6911281"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911285">=</span>&nbsp;<span class="ident" id="6911287"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6911302">(</span><span class="ident" id="6911303"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911306">,</span>&nbsp;<span class="ident" id="6911308"><a href="/net/server_test.go.html#6911029">taddr</a></span><span class="op" id="6911313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911317">if</span>&nbsp;<span class="ident" id="6911320"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911324">!=</span>&nbsp;<span class="ident" id="6911327">nil</span>&nbsp;<span class="op" id="6911331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911336"><a href="/net/server_test.go.html#6911003">t</a></span><span class="op" id="6911337">.</span><span class="ident" id="6911338">Fatalf</span><span class="op" id="6911344">(</span><span class="string" id="6911345">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6911381">,</span>&nbsp;<span class="ident" id="6911383"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911386">,</span>&nbsp;<span class="ident" id="6911388"><a href="/net/server_test.go.html#6911029">taddr</a></span><span class="op" id="6911393">,</span>&nbsp;<span class="ident" id="6911395"><a href="/net/server_test.go.html#6911077">err</a></span><span class="op" id="6911398">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911408">c</span><span class="op" id="6911409">,</span>&nbsp;<span class="ident" id="6911411"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911415">:=</span>&nbsp;<span class="ident" id="6911418"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6911430">(</span><span class="ident" id="6911431"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911434">,</span>&nbsp;<span class="ident" id="6911436"><a href="/net/server_test.go.html#6911022">laddr</a></span><span class="op" id="6911441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911444">if</span>&nbsp;<span class="ident" id="6911447"><a href="/net/server_test.go.html#6911077">err</a></span>&nbsp;<span class="op" id="6911451">!=</span>&nbsp;<span class="ident" id="6911454">nil</span>&nbsp;<span class="op" id="6911458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911462"><a href="/net/server_test.go.html#6911003">t</a></span><span class="op" id="6911463">.</span><span class="ident" id="6911464">Fatalf</span><span class="op" id="6911470">(</span><span class="string" id="6911471">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="6911503">,</span>&nbsp;<span class="ident" id="6911505"><a href="/net/server_test.go.html#6911017">net</a></span><span class="op" id="6911508">,</span>&nbsp;<span class="ident" id="6911510"><a href="/net/server_test.go.html#6911022">laddr</a></span><span class="op" id="6911515">,</span>&nbsp;<span class="ident" id="6911517"><a href="/net/server_test.go.html#6911077">err</a></span><span class="op" id="6911520">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911526">defer</span>&nbsp;<span class="ident" id="6911532"><a href="/net/server_test.go.html#6911408">c</a></span><span class="op" id="6911533">.</span><span class="ident" id="6911534">Close</span><span class="op" id="6911539">(</span><span class="op" id="6911540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911543"><a href="/net/server_test.go.html#6911408">c</a></span><span class="op" id="6911544">.</span><span class="ident" id="6911545">SetReadDeadline</span><span class="op" id="6911560">(</span><span class="ident" id="6911561"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6911565">.</span><span class="ident" id="6911566">Now</span><span class="op" id="6911569">(</span><span class="op" id="6911570">)</span><span class="op" id="6911571">.</span><span class="ident" id="6911572">Add</span><span class="op" id="6911575">(</span><span class="num" id="6911576">1</span>&nbsp;<span class="op" id="6911578">*</span>&nbsp;<span class="ident" id="6911580"><a href="/net/server_test.go.html#6897862">time</a></span><span class="op" id="6911584">.</span><span class="ident" id="6911585">Second</span><span class="op" id="6911591">)</span><span class="op" id="6911592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911596">var</span>&nbsp;<span class="ident" id="6911600">wb</span>&nbsp;<span class="op" id="6911603">[</span><span class="op" id="6911604">]</span><span class="builtintype" id="6911605">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911611">if</span>&nbsp;<span class="op" id="6911614">!</span><span class="ident" id="6911615"><a href="/net/server_test.go.html#6911043">isEmpty</a></span>&nbsp;<span class="op" id="6911623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911627"><a href="/net/server_test.go.html#6911600">wb</a></span>&nbsp;<span class="op" id="6911630">=</span>&nbsp;<span class="op" id="6911632">[</span><span class="op" id="6911633">]</span><span class="builtintype" id="6911634">byte</span><span class="op" id="6911638">(</span><span class="string" id="6911639">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="6911683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911689">if</span>&nbsp;<span class="ident" id="6911692">n</span><span class="op" id="6911693">,</span>&nbsp;<span class="ident" id="6911695">err</span>&nbsp;<span class="op" id="6911699">:=</span>&nbsp;<span class="ident" id="6911702"><a href="/net/server_test.go.html#6911408">c</a></span><span class="op" id="6911703">.</span><span class="ident" id="6911704">WriteTo</span><span class="op" id="6911711">(</span><span class="ident" id="6911712"><a href="/net/server_test.go.html#6911600">wb</a></span><span class="op" id="6911714">[</span><span class="num" id="6911715">0</span><span class="op" id="6911716">:</span><span class="op" id="6911717">]</span><span class="op" id="6911718">,</span>&nbsp;<span class="ident" id="6911720"><a href="/net/server_test.go.html#6911064">ra</a></span><span class="op" id="6911722">)</span><span class="op" id="6911723">;</span>&nbsp;<span class="ident" id="6911725"><a href="/net/server_test.go.html#6911695">err</a></span>&nbsp;<span class="op" id="6911729">!=</span>&nbsp;<span class="ident" id="6911732">nil</span>&nbsp;<span class="op" id="6911736">||</span>&nbsp;<span class="ident" id="6911739"><a href="/net/server_test.go.html#6911692">n</a></span>&nbsp;<span class="op" id="6911741">!=</span>&nbsp;<span class="builtinfunc" id="6911744">len</span><span class="op" id="6911747">(</span><span class="ident" id="6911748"><a href="/net/server_test.go.html#6911600">wb</a></span><span class="op" id="6911750">)</span>&nbsp;<span class="op" id="6911752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911756"><a href="/net/server_test.go.html#6911003">t</a></span><span class="op" id="6911757">.</span><span class="ident" id="6911758">Fatalf</span><span class="op" id="6911764">(</span><span class="string" id="6911765">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6911809">,</span>&nbsp;<span class="ident" id="6911811"><a href="/net/server_test.go.html#6911064">ra</a></span><span class="op" id="6911813">,</span>&nbsp;<span class="ident" id="6911815"><a href="/net/server_test.go.html#6911692">n</a></span><span class="op" id="6911816">,</span>&nbsp;<span class="ident" id="6911818"><a href="/net/server_test.go.html#6911695">err</a></span><span class="op" id="6911821">,</span>&nbsp;<span class="builtinfunc" id="6911823">len</span><span class="op" id="6911826">(</span><span class="ident" id="6911827"><a href="/net/server_test.go.html#6911600">wb</a></span><span class="op" id="6911829">)</span><span class="op" id="6911830">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6911833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911837">rb</span>&nbsp;<span class="op" id="6911840">:=</span>&nbsp;<span class="builtinfunc" id="6911843">make</span><span class="op" id="6911847">(</span><span class="op" id="6911848">[</span><span class="op" id="6911849">]</span><span class="builtintype" id="6911850">byte</span><span class="op" id="6911854">,</span>&nbsp;<span class="num" id="6911856">1024</span><span class="op" id="6911860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6911863">if</span>&nbsp;<span class="ident" id="6911866">n</span><span class="op" id="6911867">,</span>&nbsp;<span class="ident" id="6911869">_</span><span class="op" id="6911870">,</span>&nbsp;<span class="ident" id="6911872">err</span>&nbsp;<span class="op" id="6911876">:=</span>&nbsp;<span class="ident" id="6911879"><a href="/net/server_test.go.html#6911408">c</a></span><span class="op" id="6911880">.</span><span class="ident" id="6911881">ReadFrom</span><span class="op" id="6911889">(</span><span class="ident" id="6911890"><a href="/net/server_test.go.html#6911837">rb</a></span><span class="op" id="6911892">[</span><span class="num" id="6911893">0</span><span class="op" id="6911894">:</span><span class="op" id="6911895">]</span><span class="op" id="6911896">)</span><span class="op" id="6911897">;</span>&nbsp;<span class="ident" id="6911899"><a href="/net/server_test.go.html#6911872">err</a></span>&nbsp;<span class="op" id="6911903">!=</span>&nbsp;<span class="ident" id="6911906">nil</span>&nbsp;<span class="op" id="6911910">||</span>&nbsp;<span class="ident" id="6911913"><a href="/net/server_test.go.html#6911866">n</a></span>&nbsp;<span class="op" id="6911915">!=</span>&nbsp;<span class="builtinfunc" id="6911918">len</span><span class="op" id="6911921">(</span><span class="ident" id="6911922"><a href="/net/server_test.go.html#6911600">wb</a></span><span class="op" id="6911924">)</span>&nbsp;<span class="op" id="6911926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6911930"><a href="/net/server_test.go.html#6911003">t</a></span><span class="op" id="6911931">.</span><span class="ident" id="6911932">Fatalf</span><span class="op" id="6911938">(</span><span class="string" id="6911939">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="6911980">,</span>&nbsp;<span class="ident" id="6911982"><a href="/net/server_test.go.html#6911866">n</a></span><span class="op" id="6911983">,</span>&nbsp;<span class="ident" id="6911985"><a href="/net/server_test.go.html#6911872">err</a></span><span class="op" id="6911988">,</span>&nbsp;<span class="builtinfunc" id="6911990">len</span><span class="op" id="6911993">(</span><span class="ident" id="6911994"><a href="/net/server_test.go.html#6911600">wb</a></span><span class="op" id="6911996">)</span><span class="op" id="6911997">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6912000">}</span><br>
<span class="lineno"></span><span class="op" id="6912002">}</span>
</div>
</body>
</html>
