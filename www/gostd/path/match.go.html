<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3678152">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3678207">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3678261">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3678312">package</span>&nbsp;<span class="ident" id="3678320">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3678326">import</span>&nbsp;<span class="op" id="3678333">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3678336">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3678346">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3678357">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3678372">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3678375">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3678436">var</span>&nbsp;<span class="ident" id="3678440">ErrBadPattern</span>&nbsp;<span class="op" id="3678454">=</span>&nbsp;<span class="ident" id="3678456">errors</span><span class="op" id="3678462">.</span><span class="ident" id="3678463">New</span><span class="op" id="3678466">(</span><span class="string" id="3678467">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3678492">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3678495">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3678562">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3678588">//</span><br>
<span class="lineno"></span><span class="comment" id="3678591">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3678603">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3678616">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno"></span><span class="comment" id="3678625">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3678682">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3678733">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3678773">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3678825">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3678888">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3678924">//</span><br>
<span class="lineno"></span><span class="comment" id="3678927">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3678947">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3679005">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3679041">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3679095">//</span><br>
<span class="lineno"></span><span class="comment" id="3679098">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3679168">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3679235">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3679252">//</span><br>
<span class="lineno"></span><span class="keyword" id="3679255">func</span>&nbsp;<span class="ident" id="3679260">Match</span><span class="op" id="3679265">(</span><span class="ident" id="3679266">pattern</span><span class="op" id="3679273">,</span>&nbsp;<span class="ident" id="3679275">name</span>&nbsp;<span class="builtintype" id="3679280">string</span><span class="op" id="3679286">)</span>&nbsp;<span class="op" id="3679288">(</span><span class="ident" id="3679289">matched</span>&nbsp;<span class="builtintype" id="3679297">bool</span><span class="op" id="3679301">,</span>&nbsp;<span class="ident" id="3679303">err</span>&nbsp;<span class="builtintype" id="3679307">error</span><span class="op" id="3679312">)</span>&nbsp;<span class="op" id="3679314">{</span><br>
<span class="lineno"></span><span class="ident" id="3679316">Pattern</span><span class="op" id="3679323">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679326">for</span>&nbsp;<span class="builtinfunc" id="3679330">len</span><span class="op" id="3679333">(</span><span class="ident" id="3679334">pattern</span><span class="op" id="3679341">)</span>&nbsp;<span class="op" id="3679343">&gt;</span>&nbsp;<span class="num" id="3679345">0</span>&nbsp;<span class="op" id="3679347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679351">var</span>&nbsp;<span class="ident" id="3679355">star</span>&nbsp;<span class="builtintype" id="3679360">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679367">var</span>&nbsp;<span class="ident" id="3679371">chunk</span>&nbsp;<span class="builtintype" id="3679377">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3679386">star</span><span class="op" id="3679390">,</span>&nbsp;<span class="ident" id="3679392">chunk</span><span class="op" id="3679397">,</span>&nbsp;<span class="ident" id="3679399">pattern</span>&nbsp;<span class="op" id="3679407">=</span>&nbsp;<span class="ident" id="3679409">scanChunk</span><span class="op" id="3679418">(</span><span class="ident" id="3679419">pattern</span><span class="op" id="3679426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679430">if</span>&nbsp;<span class="ident" id="3679433">star</span>&nbsp;<span class="op" id="3679438">&amp;&amp;</span>&nbsp;<span class="ident" id="3679441">chunk</span>&nbsp;<span class="op" id="3679447">==</span>&nbsp;<span class="string" id="3679450">&#34;&#34;</span>&nbsp;<span class="op" id="3679453">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679458">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679517">return</span>&nbsp;<span class="ident" id="3679524">strings</span><span class="op" id="3679531">.</span><span class="ident" id="3679532">Index</span><span class="op" id="3679537">(</span><span class="ident" id="3679538">name</span><span class="op" id="3679542">,</span>&nbsp;<span class="string" id="3679544">&#34;/&#34;</span><span class="op" id="3679547">)</span>&nbsp;<span class="op" id="3679549">&lt;</span>&nbsp;<span class="num" id="3679551">0</span><span class="op" id="3679552">,</span>&nbsp;<span class="builtintype" id="3679554">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3679560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679564">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3679605">t</span><span class="op" id="3679606">,</span>&nbsp;<span class="ident" id="3679608">ok</span><span class="op" id="3679610">,</span>&nbsp;<span class="ident" id="3679612">err</span>&nbsp;<span class="op" id="3679616">:=</span>&nbsp;<span class="ident" id="3679619">matchChunk</span><span class="op" id="3679629">(</span><span class="ident" id="3679630">chunk</span><span class="op" id="3679635">,</span>&nbsp;<span class="ident" id="3679637">name</span><span class="op" id="3679641">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679645">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679710">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679780">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679800">if</span>&nbsp;<span class="ident" id="3679803">ok</span>&nbsp;<span class="op" id="3679806">&amp;&amp;</span>&nbsp;<span class="op" id="3679809">(</span><span class="builtinfunc" id="3679810">len</span><span class="op" id="3679813">(</span><span class="ident" id="3679814">t</span><span class="op" id="3679815">)</span>&nbsp;<span class="op" id="3679817">==</span>&nbsp;<span class="num" id="3679820">0</span>&nbsp;<span class="op" id="3679822">||</span>&nbsp;<span class="builtinfunc" id="3679825">len</span><span class="op" id="3679828">(</span><span class="ident" id="3679829">pattern</span><span class="op" id="3679836">)</span>&nbsp;<span class="op" id="3679838">&gt;</span>&nbsp;<span class="num" id="3679840">0</span><span class="op" id="3679841">)</span>&nbsp;<span class="op" id="3679843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3679848">name</span>&nbsp;<span class="op" id="3679853">=</span>&nbsp;<span class="ident" id="3679855">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679860">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3679871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679875">if</span>&nbsp;<span class="ident" id="3679878">err</span>&nbsp;<span class="op" id="3679882">!=</span>&nbsp;<span class="builtintype" id="3679885">nil</span>&nbsp;<span class="op" id="3679889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679894">return</span>&nbsp;<span class="builtintype" id="3679901">false</span><span class="op" id="3679906">,</span>&nbsp;<span class="ident" id="3679908">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3679914">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679918">if</span>&nbsp;<span class="ident" id="3679921">star</span>&nbsp;<span class="op" id="3679926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679931">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3679972">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3679993">for</span>&nbsp;<span class="ident" id="3679997">i</span>&nbsp;<span class="op" id="3679999">:=</span>&nbsp;<span class="num" id="3680002">0</span><span class="op" id="3680003">;</span>&nbsp;<span class="ident" id="3680005">i</span>&nbsp;<span class="op" id="3680007">&lt;</span>&nbsp;<span class="builtinfunc" id="3680009">len</span><span class="op" id="3680012">(</span><span class="ident" id="3680013">name</span><span class="op" id="3680017">)</span>&nbsp;<span class="op" id="3680019">&amp;&amp;</span>&nbsp;<span class="ident" id="3680022">name</span><span class="op" id="3680026">[</span><span class="ident" id="3680027">i</span><span class="op" id="3680028">]</span>&nbsp;<span class="op" id="3680030">!=</span>&nbsp;<span class="string" id="3680033">&#39;/&#39;</span><span class="op" id="3680036">;</span>&nbsp;<span class="ident" id="3680038">i</span><span class="op" id="3680039">++</span>&nbsp;<span class="op" id="3680042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680048">t</span><span class="op" id="3680049">,</span>&nbsp;<span class="ident" id="3680051">ok</span><span class="op" id="3680053">,</span>&nbsp;<span class="ident" id="3680055">err</span>&nbsp;<span class="op" id="3680059">:=</span>&nbsp;<span class="ident" id="3680062">matchChunk</span><span class="op" id="3680072">(</span><span class="ident" id="3680073">chunk</span><span class="op" id="3680078">,</span>&nbsp;<span class="ident" id="3680080">name</span><span class="op" id="3680084">[</span><span class="ident" id="3680085">i</span><span class="op" id="3680086">+</span><span class="num" id="3680087">1</span><span class="op" id="3680088">:</span><span class="op" id="3680089">]</span><span class="op" id="3680090">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680096">if</span>&nbsp;<span class="ident" id="3680099">ok</span>&nbsp;<span class="op" id="3680102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3680109">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680174">if</span>&nbsp;<span class="builtinfunc" id="3680177">len</span><span class="op" id="3680180">(</span><span class="ident" id="3680181">pattern</span><span class="op" id="3680188">)</span>&nbsp;<span class="op" id="3680190">==</span>&nbsp;<span class="num" id="3680193">0</span>&nbsp;<span class="op" id="3680195">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3680198">len</span><span class="op" id="3680201">(</span><span class="ident" id="3680202">t</span><span class="op" id="3680203">)</span>&nbsp;<span class="op" id="3680205">&gt;</span>&nbsp;<span class="num" id="3680207">0</span>&nbsp;<span class="op" id="3680209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680217">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680231">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680238">name</span>&nbsp;<span class="op" id="3680243">=</span>&nbsp;<span class="ident" id="3680245">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680252">continue</span>&nbsp;<span class="ident" id="3680261">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680279">if</span>&nbsp;<span class="ident" id="3680282">err</span>&nbsp;<span class="op" id="3680286">!=</span>&nbsp;<span class="builtintype" id="3680289">nil</span>&nbsp;<span class="op" id="3680293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680300">return</span>&nbsp;<span class="builtintype" id="3680307">false</span><span class="op" id="3680312">,</span>&nbsp;<span class="ident" id="3680314">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680335">return</span>&nbsp;<span class="builtintype" id="3680342">false</span><span class="op" id="3680347">,</span>&nbsp;<span class="builtintype" id="3680349">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680354">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680357">return</span>&nbsp;<span class="builtinfunc" id="3680364">len</span><span class="op" id="3680367">(</span><span class="ident" id="3680368">name</span><span class="op" id="3680372">)</span>&nbsp;<span class="op" id="3680374">==</span>&nbsp;<span class="num" id="3680377">0</span><span class="op" id="3680378">,</span>&nbsp;<span class="builtintype" id="3680380">nil</span><br>
<span class="lineno"></span><span class="op" id="3680384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3680387">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3680461">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3680493">func</span>&nbsp;<span class="ident" id="3680498">scanChunk</span><span class="op" id="3680507">(</span><span class="ident" id="3680508">pattern</span>&nbsp;<span class="builtintype" id="3680516">string</span><span class="op" id="3680522">)</span>&nbsp;<span class="op" id="3680524">(</span><span class="ident" id="3680525">star</span>&nbsp;<span class="builtintype" id="3680530">bool</span><span class="op" id="3680534">,</span>&nbsp;<span class="ident" id="3680536">chunk</span><span class="op" id="3680541">,</span>&nbsp;<span class="ident" id="3680543">rest</span>&nbsp;<span class="builtintype" id="3680548">string</span><span class="op" id="3680554">)</span>&nbsp;<span class="op" id="3680556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680559">for</span>&nbsp;<span class="builtinfunc" id="3680563">len</span><span class="op" id="3680566">(</span><span class="ident" id="3680567">pattern</span><span class="op" id="3680574">)</span>&nbsp;<span class="op" id="3680576">&gt;</span>&nbsp;<span class="num" id="3680578">0</span>&nbsp;<span class="op" id="3680580">&amp;&amp;</span>&nbsp;<span class="ident" id="3680583">pattern</span><span class="op" id="3680590">[</span><span class="num" id="3680591">0</span><span class="op" id="3680592">]</span>&nbsp;<span class="op" id="3680594">==</span>&nbsp;<span class="string" id="3680597">&#39;*&#39;</span>&nbsp;<span class="op" id="3680601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680605">pattern</span>&nbsp;<span class="op" id="3680613">=</span>&nbsp;<span class="ident" id="3680615">pattern</span><span class="op" id="3680622">[</span><span class="num" id="3680623">1</span><span class="op" id="3680624">:</span><span class="op" id="3680625">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680629">star</span>&nbsp;<span class="op" id="3680634">=</span>&nbsp;<span class="builtintype" id="3680636">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680642">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680645">inrange</span>&nbsp;<span class="op" id="3680653">:=</span>&nbsp;<span class="builtintype" id="3680656">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680663">var</span>&nbsp;<span class="ident" id="3680667">i</span>&nbsp;<span class="builtintype" id="3680669">int</span><br>
<span class="lineno"></span><span class="ident" id="3680673">Scan</span><span class="op" id="3680677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680680">for</span>&nbsp;<span class="ident" id="3680684">i</span>&nbsp;<span class="op" id="3680686">=</span>&nbsp;<span class="num" id="3680688">0</span><span class="op" id="3680689">;</span>&nbsp;<span class="ident" id="3680691">i</span>&nbsp;<span class="op" id="3680693">&lt;</span>&nbsp;<span class="builtinfunc" id="3680695">len</span><span class="op" id="3680698">(</span><span class="ident" id="3680699">pattern</span><span class="op" id="3680706">)</span><span class="op" id="3680707">;</span>&nbsp;<span class="ident" id="3680709">i</span><span class="op" id="3680710">++</span>&nbsp;<span class="op" id="3680713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680717">switch</span>&nbsp;<span class="ident" id="3680724">pattern</span><span class="op" id="3680731">[</span><span class="ident" id="3680732">i</span><span class="op" id="3680733">]</span>&nbsp;<span class="op" id="3680735">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680739">case</span>&nbsp;<span class="string" id="3680744">&#39;\\&#39;</span><span class="op" id="3680748">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3680753">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680807">if</span>&nbsp;<span class="ident" id="3680810">i</span><span class="op" id="3680811">+</span><span class="num" id="3680812">1</span>&nbsp;<span class="op" id="3680814">&lt;</span>&nbsp;<span class="builtinfunc" id="3680816">len</span><span class="op" id="3680819">(</span><span class="ident" id="3680820">pattern</span><span class="op" id="3680827">)</span>&nbsp;<span class="op" id="3680829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680835">i</span><span class="op" id="3680836">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680842">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680846">case</span>&nbsp;<span class="string" id="3680851">&#39;[&#39;</span><span class="op" id="3680854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680859">inrange</span>&nbsp;<span class="op" id="3680867">=</span>&nbsp;<span class="builtintype" id="3680869">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680876">case</span>&nbsp;<span class="string" id="3680881">&#39;]&#39;</span><span class="op" id="3680884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3680889">inrange</span>&nbsp;<span class="op" id="3680897">=</span>&nbsp;<span class="builtintype" id="3680899">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680907">case</span>&nbsp;<span class="string" id="3680912">&#39;*&#39;</span><span class="op" id="3680915">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680920">if</span>&nbsp;<span class="op" id="3680923">!</span><span class="ident" id="3680924">inrange</span>&nbsp;<span class="op" id="3680932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680938">break</span>&nbsp;<span class="ident" id="3680944">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3680959">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3680962">return</span>&nbsp;<span class="ident" id="3680969">star</span><span class="op" id="3680973">,</span>&nbsp;<span class="ident" id="3680975">pattern</span><span class="op" id="3680982">[</span><span class="num" id="3680983">0</span><span class="op" id="3680984">:</span><span class="ident" id="3680985">i</span><span class="op" id="3680986">]</span><span class="op" id="3680987">,</span>&nbsp;<span class="ident" id="3680989">pattern</span><span class="op" id="3680996">[</span><span class="ident" id="3680997">i</span><span class="op" id="3680998">:</span><span class="op" id="3680999">]</span><br>
<span class="lineno"></span><span class="op" id="3681001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3681004">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3681067">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3681126">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3681201">func</span>&nbsp;<span class="ident" id="3681206">matchChunk</span><span class="op" id="3681216">(</span><span class="ident" id="3681217">chunk</span><span class="op" id="3681222">,</span>&nbsp;<span class="ident" id="3681224">s</span>&nbsp;<span class="builtintype" id="3681226">string</span><span class="op" id="3681232">)</span>&nbsp;<span class="op" id="3681234">(</span><span class="ident" id="3681235">rest</span>&nbsp;<span class="builtintype" id="3681240">string</span><span class="op" id="3681246">,</span>&nbsp;<span class="ident" id="3681248">ok</span>&nbsp;<span class="builtintype" id="3681251">bool</span><span class="op" id="3681255">,</span>&nbsp;<span class="ident" id="3681257">err</span>&nbsp;<span class="builtintype" id="3681261">error</span><span class="op" id="3681266">)</span>&nbsp;<span class="op" id="3681268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681271">for</span>&nbsp;<span class="builtinfunc" id="3681275">len</span><span class="op" id="3681278">(</span><span class="ident" id="3681279">chunk</span><span class="op" id="3681284">)</span>&nbsp;<span class="op" id="3681286">&gt;</span>&nbsp;<span class="num" id="3681288">0</span>&nbsp;<span class="op" id="3681290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681294">if</span>&nbsp;<span class="builtinfunc" id="3681297">len</span><span class="op" id="3681300">(</span><span class="ident" id="3681301">s</span><span class="op" id="3681302">)</span>&nbsp;<span class="op" id="3681304">==</span>&nbsp;<span class="num" id="3681307">0</span>&nbsp;<span class="op" id="3681309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681314">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681327">switch</span>&nbsp;<span class="ident" id="3681334">chunk</span><span class="op" id="3681339">[</span><span class="num" id="3681340">0</span><span class="op" id="3681341">]</span>&nbsp;<span class="op" id="3681343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681347">case</span>&nbsp;<span class="string" id="3681352">&#39;[&#39;</span><span class="op" id="3681355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3681360">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681382">r</span><span class="op" id="3681383">,</span>&nbsp;<span class="ident" id="3681385">n</span>&nbsp;<span class="op" id="3681387">:=</span>&nbsp;<span class="ident" id="3681390">utf8</span><span class="op" id="3681394">.</span><span class="ident" id="3681395">DecodeRuneInString</span><span class="op" id="3681413">(</span><span class="ident" id="3681414">s</span><span class="op" id="3681415">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681420">s</span>&nbsp;<span class="op" id="3681422">=</span>&nbsp;<span class="ident" id="3681424">s</span><span class="op" id="3681425">[</span><span class="ident" id="3681426">n</span><span class="op" id="3681427">:</span><span class="op" id="3681428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681433">chunk</span>&nbsp;<span class="op" id="3681439">=</span>&nbsp;<span class="ident" id="3681441">chunk</span><span class="op" id="3681446">[</span><span class="num" id="3681447">1</span><span class="op" id="3681448">:</span><span class="op" id="3681449">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3681454">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681477">notNegated</span>&nbsp;<span class="op" id="3681488">:=</span>&nbsp;<span class="builtintype" id="3681491">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681499">if</span>&nbsp;<span class="builtinfunc" id="3681502">len</span><span class="op" id="3681505">(</span><span class="ident" id="3681506">chunk</span><span class="op" id="3681511">)</span>&nbsp;<span class="op" id="3681513">&gt;</span>&nbsp;<span class="num" id="3681515">0</span>&nbsp;<span class="op" id="3681517">&amp;&amp;</span>&nbsp;<span class="ident" id="3681520">chunk</span><span class="op" id="3681525">[</span><span class="num" id="3681526">0</span><span class="op" id="3681527">]</span>&nbsp;<span class="op" id="3681529">==</span>&nbsp;<span class="string" id="3681532">&#39;^&#39;</span>&nbsp;<span class="op" id="3681536">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681542">notNegated</span>&nbsp;<span class="op" id="3681553">=</span>&nbsp;<span class="builtintype" id="3681555">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681565">chunk</span>&nbsp;<span class="op" id="3681571">=</span>&nbsp;<span class="ident" id="3681573">chunk</span><span class="op" id="3681578">[</span><span class="num" id="3681579">1</span><span class="op" id="3681580">:</span><span class="op" id="3681581">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3681591">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681614">match</span>&nbsp;<span class="op" id="3681620">:=</span>&nbsp;<span class="builtintype" id="3681623">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681632">nrange</span>&nbsp;<span class="op" id="3681639">:=</span>&nbsp;<span class="num" id="3681642">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681647">for</span>&nbsp;<span class="op" id="3681651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681657">if</span>&nbsp;<span class="builtinfunc" id="3681660">len</span><span class="op" id="3681663">(</span><span class="ident" id="3681664">chunk</span><span class="op" id="3681669">)</span>&nbsp;<span class="op" id="3681671">&gt;</span>&nbsp;<span class="num" id="3681673">0</span>&nbsp;<span class="op" id="3681675">&amp;&amp;</span>&nbsp;<span class="ident" id="3681678">chunk</span><span class="op" id="3681683">[</span><span class="num" id="3681684">0</span><span class="op" id="3681685">]</span>&nbsp;<span class="op" id="3681687">==</span>&nbsp;<span class="string" id="3681690">&#39;]&#39;</span>&nbsp;<span class="op" id="3681694">&amp;&amp;</span>&nbsp;<span class="ident" id="3681697">nrange</span>&nbsp;<span class="op" id="3681704">&gt;</span>&nbsp;<span class="num" id="3681706">0</span>&nbsp;<span class="op" id="3681708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681715">chunk</span>&nbsp;<span class="op" id="3681721">=</span>&nbsp;<span class="ident" id="3681723">chunk</span><span class="op" id="3681728">[</span><span class="num" id="3681729">1</span><span class="op" id="3681730">:</span><span class="op" id="3681731">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681738">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681754">var</span>&nbsp;<span class="ident" id="3681758">lo</span><span class="op" id="3681760">,</span>&nbsp;<span class="ident" id="3681762">hi</span>&nbsp;<span class="builtintype" id="3681765">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681774">if</span>&nbsp;<span class="ident" id="3681777">lo</span><span class="op" id="3681779">,</span>&nbsp;<span class="ident" id="3681781">chunk</span><span class="op" id="3681786">,</span>&nbsp;<span class="ident" id="3681788">err</span>&nbsp;<span class="op" id="3681792">=</span>&nbsp;<span class="ident" id="3681794">getEsc</span><span class="op" id="3681800">(</span><span class="ident" id="3681801">chunk</span><span class="op" id="3681806">)</span><span class="op" id="3681807">;</span>&nbsp;<span class="ident" id="3681809">err</span>&nbsp;<span class="op" id="3681813">!=</span>&nbsp;<span class="builtintype" id="3681816">nil</span>&nbsp;<span class="op" id="3681820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681838">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681844">hi</span>&nbsp;<span class="op" id="3681847">=</span>&nbsp;<span class="ident" id="3681849">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681856">if</span>&nbsp;<span class="ident" id="3681859">chunk</span><span class="op" id="3681864">[</span><span class="num" id="3681865">0</span><span class="op" id="3681866">]</span>&nbsp;<span class="op" id="3681868">==</span>&nbsp;<span class="string" id="3681871">&#39;-&#39;</span>&nbsp;<span class="op" id="3681875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681882">if</span>&nbsp;<span class="ident" id="3681885">hi</span><span class="op" id="3681887">,</span>&nbsp;<span class="ident" id="3681889">chunk</span><span class="op" id="3681894">,</span>&nbsp;<span class="ident" id="3681896">err</span>&nbsp;<span class="op" id="3681900">=</span>&nbsp;<span class="ident" id="3681902">getEsc</span><span class="op" id="3681908">(</span><span class="ident" id="3681909">chunk</span><span class="op" id="3681914">[</span><span class="num" id="3681915">1</span><span class="op" id="3681916">:</span><span class="op" id="3681917">]</span><span class="op" id="3681918">)</span><span class="op" id="3681919">;</span>&nbsp;<span class="ident" id="3681921">err</span>&nbsp;<span class="op" id="3681925">!=</span>&nbsp;<span class="builtintype" id="3681928">nil</span>&nbsp;<span class="op" id="3681932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681940">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681952">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3681958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3681964">if</span>&nbsp;<span class="ident" id="3681967">lo</span>&nbsp;<span class="op" id="3681970">&lt;=</span>&nbsp;<span class="ident" id="3681973">r</span>&nbsp;<span class="op" id="3681975">&amp;&amp;</span>&nbsp;<span class="ident" id="3681978">r</span>&nbsp;<span class="op" id="3681980">&lt;=</span>&nbsp;<span class="ident" id="3681983">hi</span>&nbsp;<span class="op" id="3681986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3681993">match</span>&nbsp;<span class="op" id="3681999">=</span>&nbsp;<span class="builtintype" id="3682001">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682016">nrange</span><span class="op" id="3682022">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682033">if</span>&nbsp;<span class="ident" id="3682036">match</span>&nbsp;<span class="op" id="3682042">!=</span>&nbsp;<span class="ident" id="3682045">notNegated</span>&nbsp;<span class="op" id="3682056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682062">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682077">case</span>&nbsp;<span class="string" id="3682082">&#39;?&#39;</span><span class="op" id="3682085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682090">if</span>&nbsp;<span class="ident" id="3682093">s</span><span class="op" id="3682094">[</span><span class="num" id="3682095">0</span><span class="op" id="3682096">]</span>&nbsp;<span class="op" id="3682098">==</span>&nbsp;<span class="string" id="3682101">&#39;/&#39;</span>&nbsp;<span class="op" id="3682105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682111">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682126">_</span><span class="op" id="3682127">,</span>&nbsp;<span class="ident" id="3682129">n</span>&nbsp;<span class="op" id="3682131">:=</span>&nbsp;<span class="ident" id="3682134">utf8</span><span class="op" id="3682138">.</span><span class="ident" id="3682139">DecodeRuneInString</span><span class="op" id="3682157">(</span><span class="ident" id="3682158">s</span><span class="op" id="3682159">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682164">s</span>&nbsp;<span class="op" id="3682166">=</span>&nbsp;<span class="ident" id="3682168">s</span><span class="op" id="3682169">[</span><span class="ident" id="3682170">n</span><span class="op" id="3682171">:</span><span class="op" id="3682172">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682177">chunk</span>&nbsp;<span class="op" id="3682183">=</span>&nbsp;<span class="ident" id="3682185">chunk</span><span class="op" id="3682190">[</span><span class="num" id="3682191">1</span><span class="op" id="3682192">:</span><span class="op" id="3682193">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682198">case</span>&nbsp;<span class="string" id="3682203">&#39;\\&#39;</span><span class="op" id="3682207">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682212">chunk</span>&nbsp;<span class="op" id="3682218">=</span>&nbsp;<span class="ident" id="3682220">chunk</span><span class="op" id="3682225">[</span><span class="num" id="3682226">1</span><span class="op" id="3682227">:</span><span class="op" id="3682228">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682233">if</span>&nbsp;<span class="builtinfunc" id="3682236">len</span><span class="op" id="3682239">(</span><span class="ident" id="3682240">chunk</span><span class="op" id="3682245">)</span>&nbsp;<span class="op" id="3682247">==</span>&nbsp;<span class="num" id="3682250">0</span>&nbsp;<span class="op" id="3682252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682258">err</span>&nbsp;<span class="op" id="3682262">=</span>&nbsp;<span class="ident" id="3682264">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682282">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682297">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682312">default</span><span class="op" id="3682319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682324">if</span>&nbsp;<span class="ident" id="3682327">chunk</span><span class="op" id="3682332">[</span><span class="num" id="3682333">0</span><span class="op" id="3682334">]</span>&nbsp;<span class="op" id="3682336">!=</span>&nbsp;<span class="ident" id="3682339">s</span><span class="op" id="3682340">[</span><span class="num" id="3682341">0</span><span class="op" id="3682342">]</span>&nbsp;<span class="op" id="3682344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682350">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682360">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682365">s</span>&nbsp;<span class="op" id="3682367">=</span>&nbsp;<span class="ident" id="3682369">s</span><span class="op" id="3682370">[</span><span class="num" id="3682371">1</span><span class="op" id="3682372">:</span><span class="op" id="3682373">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682378">chunk</span>&nbsp;<span class="op" id="3682384">=</span>&nbsp;<span class="ident" id="3682386">chunk</span><span class="op" id="3682391">[</span><span class="num" id="3682392">1</span><span class="op" id="3682393">:</span><span class="op" id="3682394">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682404">return</span>&nbsp;<span class="ident" id="3682411">s</span><span class="op" id="3682412">,</span>&nbsp;<span class="builtintype" id="3682414">true</span><span class="op" id="3682418">,</span>&nbsp;<span class="builtintype" id="3682420">nil</span><br>
<span class="lineno">185</span><span class="op" id="3682424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3682427">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3682506">func</span>&nbsp;<span class="ident" id="3682511">getEsc</span><span class="op" id="3682517">(</span><span class="ident" id="3682518">chunk</span>&nbsp;<span class="builtintype" id="3682524">string</span><span class="op" id="3682530">)</span>&nbsp;<span class="op" id="3682532">(</span><span class="ident" id="3682533">r</span>&nbsp;<span class="builtintype" id="3682535">rune</span><span class="op" id="3682539">,</span>&nbsp;<span class="ident" id="3682541">nchunk</span>&nbsp;<span class="builtintype" id="3682548">string</span><span class="op" id="3682554">,</span>&nbsp;<span class="ident" id="3682556">err</span>&nbsp;<span class="builtintype" id="3682560">error</span><span class="op" id="3682565">)</span>&nbsp;<span class="op" id="3682567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682570">if</span>&nbsp;<span class="builtinfunc" id="3682573">len</span><span class="op" id="3682576">(</span><span class="ident" id="3682577">chunk</span><span class="op" id="3682582">)</span>&nbsp;<span class="op" id="3682584">==</span>&nbsp;<span class="num" id="3682587">0</span>&nbsp;<span class="op" id="3682589">||</span>&nbsp;<span class="ident" id="3682592">chunk</span><span class="op" id="3682597">[</span><span class="num" id="3682598">0</span><span class="op" id="3682599">]</span>&nbsp;<span class="op" id="3682601">==</span>&nbsp;<span class="string" id="3682604">&#39;-&#39;</span>&nbsp;<span class="op" id="3682608">||</span>&nbsp;<span class="ident" id="3682611">chunk</span><span class="op" id="3682616">[</span><span class="num" id="3682617">0</span><span class="op" id="3682618">]</span>&nbsp;<span class="op" id="3682620">==</span>&nbsp;<span class="string" id="3682623">&#39;]&#39;</span>&nbsp;<span class="op" id="3682627">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682631">err</span>&nbsp;<span class="op" id="3682635">=</span>&nbsp;<span class="ident" id="3682637">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682653">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682664">if</span>&nbsp;<span class="ident" id="3682667">chunk</span><span class="op" id="3682672">[</span><span class="num" id="3682673">0</span><span class="op" id="3682674">]</span>&nbsp;<span class="op" id="3682676">==</span>&nbsp;<span class="string" id="3682679">&#39;\\&#39;</span>&nbsp;<span class="op" id="3682684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682688">chunk</span>&nbsp;<span class="op" id="3682694">=</span>&nbsp;<span class="ident" id="3682696">chunk</span><span class="op" id="3682701">[</span><span class="num" id="3682702">1</span><span class="op" id="3682703">:</span><span class="op" id="3682704">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682708">if</span>&nbsp;<span class="builtinfunc" id="3682711">len</span><span class="op" id="3682714">(</span><span class="ident" id="3682715">chunk</span><span class="op" id="3682720">)</span>&nbsp;<span class="op" id="3682722">==</span>&nbsp;<span class="num" id="3682725">0</span>&nbsp;<span class="op" id="3682727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682732">err</span>&nbsp;<span class="op" id="3682736">=</span>&nbsp;<span class="ident" id="3682738">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682755">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682767">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682770">r</span><span class="op" id="3682771">,</span>&nbsp;<span class="ident" id="3682773">n</span>&nbsp;<span class="op" id="3682775">:=</span>&nbsp;<span class="ident" id="3682778">utf8</span><span class="op" id="3682782">.</span><span class="ident" id="3682783">DecodeRuneInString</span><span class="op" id="3682801">(</span><span class="ident" id="3682802">chunk</span><span class="op" id="3682807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682810">if</span>&nbsp;<span class="ident" id="3682813">r</span>&nbsp;<span class="op" id="3682815">==</span>&nbsp;<span class="ident" id="3682818">utf8</span><span class="op" id="3682822">.</span><span class="ident" id="3682823">RuneError</span>&nbsp;<span class="op" id="3682833">&amp;&amp;</span>&nbsp;<span class="ident" id="3682836">n</span>&nbsp;<span class="op" id="3682838">==</span>&nbsp;<span class="num" id="3682841">1</span>&nbsp;<span class="op" id="3682843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682847">err</span>&nbsp;<span class="op" id="3682851">=</span>&nbsp;<span class="ident" id="3682853">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682871">nchunk</span>&nbsp;<span class="op" id="3682878">=</span>&nbsp;<span class="ident" id="3682880">chunk</span><span class="op" id="3682885">[</span><span class="ident" id="3682886">n</span><span class="op" id="3682887">:</span><span class="op" id="3682888">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682891">if</span>&nbsp;<span class="builtinfunc" id="3682894">len</span><span class="op" id="3682897">(</span><span class="ident" id="3682898">nchunk</span><span class="op" id="3682904">)</span>&nbsp;<span class="op" id="3682906">==</span>&nbsp;<span class="num" id="3682909">0</span>&nbsp;<span class="op" id="3682911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3682915">err</span>&nbsp;<span class="op" id="3682919">=</span>&nbsp;<span class="ident" id="3682921">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3682936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3682939">return</span><br>
<span class="lineno"></span><span class="op" id="3682946">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
