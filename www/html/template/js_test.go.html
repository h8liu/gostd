<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6805892">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6805947">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6806001">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6806052">package</span>&nbsp;<span class="ident" id="6806060">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6806070">import</span>&nbsp;<span class="op" id="6806077">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6806080">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6806089">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6806097">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6806108">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6806118">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6806121">func</span>&nbsp;<span class="ident" id="6806126">TestNextJsCtx</span><span class="op" id="6806139">(</span><span class="ident" id="6806140">t</span>&nbsp;<span class="op" id="6806142">*</span><span class="ident" id="6806143">testing</span><span class="op" id="6806150">.</span><span class="ident" id="6806151">T</span><span class="op" id="6806152">)</span>&nbsp;<span class="op" id="6806154">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806157">tests</span>&nbsp;<span class="op" id="6806163">:=</span>&nbsp;<span class="op" id="6806166">[</span><span class="op" id="6806167">]</span><span class="keyword" id="6806168">struct</span>&nbsp;<span class="op" id="6806175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806179">jsCtx</span>&nbsp;<span class="ident" id="6806185">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806193">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6806199">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806207">}</span><span class="op" id="6806208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806212">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806256">{</span><span class="ident" id="6806257">jsCtxRegexp</span><span class="op" id="6806268">,</span>&nbsp;<span class="string" id="6806270">&#34;;&#34;</span><span class="op" id="6806273">}</span><span class="op" id="6806274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806278">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806305">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806358">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806421">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806484">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806507">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806557">{</span><span class="ident" id="6806558">jsCtxRegexp</span><span class="op" id="6806569">,</span>&nbsp;<span class="string" id="6806571">&#34;}&#34;</span><span class="op" id="6806574">}</span><span class="op" id="6806575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806579">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806645">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806667">{</span><span class="ident" id="6806668">jsCtxDivOp</span><span class="op" id="6806678">,</span>&nbsp;<span class="string" id="6806680">&#34;)&#34;</span><span class="op" id="6806683">}</span><span class="op" id="6806684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806688">{</span><span class="ident" id="6806689">jsCtxDivOp</span><span class="op" id="6806699">,</span>&nbsp;<span class="string" id="6806701">&#34;]&#34;</span><span class="op" id="6806704">}</span><span class="op" id="6806705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806709">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806773">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806806">{</span><span class="ident" id="6806807">jsCtxRegexp</span><span class="op" id="6806818">,</span>&nbsp;<span class="string" id="6806820">&#34;(&#34;</span><span class="op" id="6806823">}</span><span class="op" id="6806824">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806828">{</span><span class="ident" id="6806829">jsCtxRegexp</span><span class="op" id="6806840">,</span>&nbsp;<span class="string" id="6806842">&#34;[&#34;</span><span class="op" id="6806845">}</span><span class="op" id="6806846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806850">{</span><span class="ident" id="6806851">jsCtxRegexp</span><span class="op" id="6806862">,</span>&nbsp;<span class="string" id="6806864">&#34;{&#34;</span><span class="op" id="6806867">}</span><span class="op" id="6806868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806872">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6806936">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806970">{</span><span class="ident" id="6806971">jsCtxRegexp</span><span class="op" id="6806982">,</span>&nbsp;<span class="string" id="6806984">&#34;=&#34;</span><span class="op" id="6806987">}</span><span class="op" id="6806988">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806992">{</span><span class="ident" id="6806993">jsCtxRegexp</span><span class="op" id="6807004">,</span>&nbsp;<span class="string" id="6807006">&#34;+=&#34;</span><span class="op" id="6807010">}</span><span class="op" id="6807011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807015">{</span><span class="ident" id="6807016">jsCtxRegexp</span><span class="op" id="6807027">,</span>&nbsp;<span class="string" id="6807029">&#34;*=&#34;</span><span class="op" id="6807033">}</span><span class="op" id="6807034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807038">{</span><span class="ident" id="6807039">jsCtxRegexp</span><span class="op" id="6807050">,</span>&nbsp;<span class="string" id="6807052">&#34;*&#34;</span><span class="op" id="6807055">}</span><span class="op" id="6807056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807060">{</span><span class="ident" id="6807061">jsCtxRegexp</span><span class="op" id="6807072">,</span>&nbsp;<span class="string" id="6807074">&#34;!&#34;</span><span class="op" id="6807077">}</span><span class="op" id="6807078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807082">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807146">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807159">{</span><span class="ident" id="6807160">jsCtxRegexp</span><span class="op" id="6807171">,</span>&nbsp;<span class="string" id="6807173">&#34;+&#34;</span><span class="op" id="6807176">}</span><span class="op" id="6807177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807181">{</span><span class="ident" id="6807182">jsCtxRegexp</span><span class="op" id="6807193">,</span>&nbsp;<span class="string" id="6807195">&#34;-&#34;</span><span class="op" id="6807198">}</span><span class="op" id="6807199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807203">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807249">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807311">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807375">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807424">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807488">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807501">{</span><span class="ident" id="6807502">jsCtxDivOp</span><span class="op" id="6807512">,</span>&nbsp;<span class="string" id="6807514">&#34;--&#34;</span><span class="op" id="6807518">}</span><span class="op" id="6807519">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807523">{</span><span class="ident" id="6807524">jsCtxDivOp</span><span class="op" id="6807534">,</span>&nbsp;<span class="string" id="6807536">&#34;++&#34;</span><span class="op" id="6807540">}</span><span class="op" id="6807541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807545">{</span><span class="ident" id="6807546">jsCtxDivOp</span><span class="op" id="6807556">,</span>&nbsp;<span class="string" id="6807558">&#34;x--&#34;</span><span class="op" id="6807563">}</span><span class="op" id="6807564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807568">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807631">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807651">{</span><span class="ident" id="6807652">jsCtxRegexp</span><span class="op" id="6807663">,</span>&nbsp;<span class="string" id="6807665">&#34;x---&#34;</span><span class="op" id="6807671">}</span><span class="op" id="6807672">,</span>&nbsp;<span class="comment" id="6807674">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807702">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807768">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6807835">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807854">{</span><span class="ident" id="6807855">jsCtxRegexp</span><span class="op" id="6807866">,</span>&nbsp;<span class="string" id="6807868">&#34;return&#34;</span><span class="op" id="6807876">}</span><span class="op" id="6807877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807881">{</span><span class="ident" id="6807882">jsCtxRegexp</span><span class="op" id="6807893">,</span>&nbsp;<span class="string" id="6807895">&#34;return&nbsp;&#34;</span><span class="op" id="6807904">}</span><span class="op" id="6807905">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807909">{</span><span class="ident" id="6807910">jsCtxRegexp</span><span class="op" id="6807921">,</span>&nbsp;<span class="string" id="6807923">&#34;return\t&#34;</span><span class="op" id="6807933">}</span><span class="op" id="6807934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807938">{</span><span class="ident" id="6807939">jsCtxRegexp</span><span class="op" id="6807950">,</span>&nbsp;<span class="string" id="6807952">&#34;return\n&#34;</span><span class="op" id="6807962">}</span><span class="op" id="6807963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807967">{</span><span class="ident" id="6807968">jsCtxRegexp</span><span class="op" id="6807979">,</span>&nbsp;<span class="string" id="6807981">&#34;return\u2028&#34;</span><span class="op" id="6807995">}</span><span class="op" id="6807996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808000">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808066">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808128">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808194">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808259">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808325">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808336">{</span><span class="ident" id="6808337">jsCtxDivOp</span><span class="op" id="6808347">,</span>&nbsp;<span class="string" id="6808349">&#34;x&#34;</span><span class="op" id="6808352">}</span><span class="op" id="6808353">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808357">{</span><span class="ident" id="6808358">jsCtxDivOp</span><span class="op" id="6808368">,</span>&nbsp;<span class="string" id="6808370">&#34;x&nbsp;&#34;</span><span class="op" id="6808374">}</span><span class="op" id="6808375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808379">{</span><span class="ident" id="6808380">jsCtxDivOp</span><span class="op" id="6808390">,</span>&nbsp;<span class="string" id="6808392">&#34;x\t&#34;</span><span class="op" id="6808397">}</span><span class="op" id="6808398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808402">{</span><span class="ident" id="6808403">jsCtxDivOp</span><span class="op" id="6808413">,</span>&nbsp;<span class="string" id="6808415">&#34;x\n&#34;</span><span class="op" id="6808420">}</span><span class="op" id="6808421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808425">{</span><span class="ident" id="6808426">jsCtxDivOp</span><span class="op" id="6808436">,</span>&nbsp;<span class="string" id="6808438">&#34;x\u2028&#34;</span><span class="op" id="6808447">}</span><span class="op" id="6808448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808452">{</span><span class="ident" id="6808453">jsCtxDivOp</span><span class="op" id="6808463">,</span>&nbsp;<span class="string" id="6808465">&#34;preturn&#34;</span><span class="op" id="6808474">}</span><span class="op" id="6808475">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808479">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808509">{</span><span class="ident" id="6808510">jsCtxDivOp</span><span class="op" id="6808520">,</span>&nbsp;<span class="string" id="6808522">&#34;0&#34;</span><span class="op" id="6808525">}</span><span class="op" id="6808526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6808530">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808585">{</span><span class="ident" id="6808586">jsCtxDivOp</span><span class="op" id="6808596">,</span>&nbsp;<span class="string" id="6808598">&#34;0.&#34;</span><span class="op" id="6808602">}</span><span class="op" id="6808603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808606">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808610">for</span>&nbsp;<span class="ident" id="6808614">_</span><span class="op" id="6808615">,</span>&nbsp;<span class="ident" id="6808617">test</span>&nbsp;<span class="op" id="6808622">:=</span>&nbsp;<span class="keyword" id="6808625">range</span>&nbsp;<span class="ident" id="6808631">tests</span>&nbsp;<span class="op" id="6808637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808641">if</span>&nbsp;<span class="ident" id="6808644">nextJSCtx</span><span class="op" id="6808653">(</span><span class="op" id="6808654">[</span><span class="op" id="6808655">]</span><span class="builtintype" id="6808656">byte</span><span class="op" id="6808660">(</span><span class="ident" id="6808661">test</span><span class="op" id="6808665">.</span><span class="ident" id="6808666">s</span><span class="op" id="6808667">)</span><span class="op" id="6808668">,</span>&nbsp;<span class="ident" id="6808670">jsCtxRegexp</span><span class="op" id="6808681">)</span>&nbsp;<span class="op" id="6808683">!=</span>&nbsp;<span class="ident" id="6808686">test</span><span class="op" id="6808690">.</span><span class="ident" id="6808691">jsCtx</span>&nbsp;<span class="op" id="6808697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808702">t</span><span class="op" id="6808703">.</span><span class="ident" id="6808704">Errorf</span><span class="op" id="6808710">(</span><span class="string" id="6808711">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6808727">,</span>&nbsp;<span class="ident" id="6808729">test</span><span class="op" id="6808733">.</span><span class="ident" id="6808734">jsCtx</span><span class="op" id="6808739">,</span>&nbsp;<span class="ident" id="6808741">test</span><span class="op" id="6808745">.</span><span class="ident" id="6808746">s</span><span class="op" id="6808747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808751">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808755">if</span>&nbsp;<span class="ident" id="6808758">nextJSCtx</span><span class="op" id="6808767">(</span><span class="op" id="6808768">[</span><span class="op" id="6808769">]</span><span class="builtintype" id="6808770">byte</span><span class="op" id="6808774">(</span><span class="ident" id="6808775">test</span><span class="op" id="6808779">.</span><span class="ident" id="6808780">s</span><span class="op" id="6808781">)</span><span class="op" id="6808782">,</span>&nbsp;<span class="ident" id="6808784">jsCtxDivOp</span><span class="op" id="6808794">)</span>&nbsp;<span class="op" id="6808796">!=</span>&nbsp;<span class="ident" id="6808799">test</span><span class="op" id="6808803">.</span><span class="ident" id="6808804">jsCtx</span>&nbsp;<span class="op" id="6808810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808815">t</span><span class="op" id="6808816">.</span><span class="ident" id="6808817">Errorf</span><span class="op" id="6808823">(</span><span class="string" id="6808824">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6808840">,</span>&nbsp;<span class="ident" id="6808842">test</span><span class="op" id="6808846">.</span><span class="ident" id="6808847">jsCtx</span><span class="op" id="6808852">,</span>&nbsp;<span class="ident" id="6808854">test</span><span class="op" id="6808858">.</span><span class="ident" id="6808859">s</span><span class="op" id="6808860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808871">if</span>&nbsp;<span class="ident" id="6808874">nextJSCtx</span><span class="op" id="6808883">(</span><span class="op" id="6808884">[</span><span class="op" id="6808885">]</span><span class="builtintype" id="6808886">byte</span><span class="op" id="6808890">(</span><span class="string" id="6808891">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6808896">)</span><span class="op" id="6808897">,</span>&nbsp;<span class="ident" id="6808899">jsCtxRegexp</span><span class="op" id="6808910">)</span>&nbsp;<span class="op" id="6808912">!=</span>&nbsp;<span class="ident" id="6808915">jsCtxRegexp</span>&nbsp;<span class="op" id="6808927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808931">t</span><span class="op" id="6808932">.</span><span class="ident" id="6808933">Error</span><span class="op" id="6808938">(</span><span class="string" id="6808939">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6808953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808960">if</span>&nbsp;<span class="ident" id="6808963">nextJSCtx</span><span class="op" id="6808972">(</span><span class="op" id="6808973">[</span><span class="op" id="6808974">]</span><span class="builtintype" id="6808975">byte</span><span class="op" id="6808979">(</span><span class="string" id="6808980">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6808985">)</span><span class="op" id="6808986">,</span>&nbsp;<span class="ident" id="6808988">jsCtxDivOp</span><span class="op" id="6808998">)</span>&nbsp;<span class="op" id="6809000">!=</span>&nbsp;<span class="ident" id="6809003">jsCtxDivOp</span>&nbsp;<span class="op" id="6809014">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809018">t</span><span class="op" id="6809019">.</span><span class="ident" id="6809020">Error</span><span class="op" id="6809025">(</span><span class="string" id="6809026">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6809040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809043">}</span><br>
<span class="lineno"></span><span class="op" id="6809045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809048">func</span>&nbsp;<span class="ident" id="6809053">TestJSValEscaper</span><span class="op" id="6809069">(</span><span class="ident" id="6809070">t</span>&nbsp;<span class="op" id="6809072">*</span><span class="ident" id="6809073">testing</span><span class="op" id="6809080">.</span><span class="ident" id="6809081">T</span><span class="op" id="6809082">)</span>&nbsp;<span class="op" id="6809084">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809087">tests</span>&nbsp;<span class="op" id="6809093">:=</span>&nbsp;<span class="op" id="6809096">[</span><span class="op" id="6809097">]</span><span class="keyword" id="6809098">struct</span>&nbsp;<span class="op" id="6809105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809109">x</span>&nbsp;&nbsp;<span class="keyword" id="6809112">interface</span><span class="op" id="6809121">{</span><span class="op" id="6809122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809126">js</span>&nbsp;<span class="builtintype" id="6809129">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809137">}</span><span class="op" id="6809138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809142">{</span><span class="builtintype" id="6809143">int</span><span class="op" id="6809146">(</span><span class="num" id="6809147">42</span><span class="op" id="6809149">)</span><span class="op" id="6809150">,</span>&nbsp;<span class="string" id="6809152">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809158">}</span><span class="op" id="6809159">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809163">{</span><span class="builtintype" id="6809164">uint</span><span class="op" id="6809168">(</span><span class="num" id="6809169">42</span><span class="op" id="6809171">)</span><span class="op" id="6809172">,</span>&nbsp;<span class="string" id="6809174">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809180">}</span><span class="op" id="6809181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809185">{</span><span class="builtintype" id="6809186">int16</span><span class="op" id="6809191">(</span><span class="num" id="6809192">42</span><span class="op" id="6809194">)</span><span class="op" id="6809195">,</span>&nbsp;<span class="string" id="6809197">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809203">}</span><span class="op" id="6809204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809208">{</span><span class="builtintype" id="6809209">uint16</span><span class="op" id="6809215">(</span><span class="num" id="6809216">42</span><span class="op" id="6809218">)</span><span class="op" id="6809219">,</span>&nbsp;<span class="string" id="6809221">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809227">}</span><span class="op" id="6809228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809232">{</span><span class="builtintype" id="6809233">int32</span><span class="op" id="6809238">(</span><span class="op" id="6809239">-</span><span class="num" id="6809240">42</span><span class="op" id="6809242">)</span><span class="op" id="6809243">,</span>&nbsp;<span class="string" id="6809245">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6809252">}</span><span class="op" id="6809253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809257">{</span><span class="builtintype" id="6809258">uint32</span><span class="op" id="6809264">(</span><span class="num" id="6809265">42</span><span class="op" id="6809267">)</span><span class="op" id="6809268">,</span>&nbsp;<span class="string" id="6809270">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809276">}</span><span class="op" id="6809277">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809281">{</span><span class="builtintype" id="6809282">int16</span><span class="op" id="6809287">(</span><span class="op" id="6809288">-</span><span class="num" id="6809289">42</span><span class="op" id="6809291">)</span><span class="op" id="6809292">,</span>&nbsp;<span class="string" id="6809294">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6809301">}</span><span class="op" id="6809302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809306">{</span><span class="builtintype" id="6809307">uint16</span><span class="op" id="6809313">(</span><span class="num" id="6809314">42</span><span class="op" id="6809316">)</span><span class="op" id="6809317">,</span>&nbsp;<span class="string" id="6809319">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809325">}</span><span class="op" id="6809326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809330">{</span><span class="ident" id="6809331">int64</span><span class="op" id="6809336">(</span><span class="op" id="6809337">-</span><span class="num" id="6809338">42</span><span class="op" id="6809340">)</span><span class="op" id="6809341">,</span>&nbsp;<span class="string" id="6809343">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6809350">}</span><span class="op" id="6809351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809355">{</span><span class="ident" id="6809356">uint64</span><span class="op" id="6809362">(</span><span class="num" id="6809363">42</span><span class="op" id="6809365">)</span><span class="op" id="6809366">,</span>&nbsp;<span class="string" id="6809368">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6809374">}</span><span class="op" id="6809375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809379">{</span><span class="ident" id="6809380">uint64</span><span class="op" id="6809386">(</span><span class="num" id="6809387">1</span><span class="op" id="6809388">)</span>&nbsp;<span class="op" id="6809390">&lt;&lt;</span>&nbsp;<span class="num" id="6809393">53</span><span class="op" id="6809395">,</span>&nbsp;<span class="string" id="6809397">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="6809417">}</span><span class="op" id="6809418">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6809422">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6809474">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809528">{</span><span class="ident" id="6809529">uint64</span><span class="op" id="6809535">(</span><span class="num" id="6809536">1</span><span class="op" id="6809537">)</span><span class="op" id="6809538">&lt;&lt;</span><span class="num" id="6809540">53</span>&nbsp;<span class="op" id="6809543">+</span>&nbsp;<span class="num" id="6809545">1</span><span class="op" id="6809546">,</span>&nbsp;<span class="string" id="6809548">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="6809568">}</span><span class="op" id="6809569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809573">{</span><span class="builtintype" id="6809574">float32</span><span class="op" id="6809581">(</span><span class="num" id="6809582">1.0</span><span class="op" id="6809585">)</span><span class="op" id="6809586">,</span>&nbsp;<span class="string" id="6809588">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6809593">}</span><span class="op" id="6809594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809598">{</span><span class="builtintype" id="6809599">float32</span><span class="op" id="6809606">(</span><span class="op" id="6809607">-</span><span class="num" id="6809608">1.0</span><span class="op" id="6809611">)</span><span class="op" id="6809612">,</span>&nbsp;<span class="string" id="6809614">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6809620">}</span><span class="op" id="6809621">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809625">{</span><span class="builtintype" id="6809626">float32</span><span class="op" id="6809633">(</span><span class="num" id="6809634">0.5</span><span class="op" id="6809637">)</span><span class="op" id="6809638">,</span>&nbsp;<span class="string" id="6809640">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6809647">}</span><span class="op" id="6809648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809652">{</span><span class="builtintype" id="6809653">float32</span><span class="op" id="6809660">(</span><span class="op" id="6809661">-</span><span class="num" id="6809662">0.5</span><span class="op" id="6809665">)</span><span class="op" id="6809666">,</span>&nbsp;<span class="string" id="6809668">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6809676">}</span><span class="op" id="6809677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809681">{</span><span class="builtintype" id="6809682">float32</span><span class="op" id="6809689">(</span><span class="num" id="6809690">1.0</span><span class="op" id="6809693">)</span>&nbsp;<span class="op" id="6809695">/</span>&nbsp;<span class="builtintype" id="6809697">float32</span><span class="op" id="6809704">(</span><span class="num" id="6809705">256</span><span class="op" id="6809708">)</span><span class="op" id="6809709">,</span>&nbsp;<span class="string" id="6809711">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="6809725">}</span><span class="op" id="6809726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809730">{</span><span class="builtintype" id="6809731">float32</span><span class="op" id="6809738">(</span><span class="num" id="6809739">0</span><span class="op" id="6809740">)</span><span class="op" id="6809741">,</span>&nbsp;<span class="string" id="6809743">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6809748">}</span><span class="op" id="6809749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809753">{</span><span class="ident" id="6809754">math</span><span class="op" id="6809758">.</span><span class="ident" id="6809759">Copysign</span><span class="op" id="6809767">(</span><span class="num" id="6809768">0</span><span class="op" id="6809769">,</span>&nbsp;<span class="op" id="6809771">-</span><span class="num" id="6809772">1</span><span class="op" id="6809773">)</span><span class="op" id="6809774">,</span>&nbsp;<span class="string" id="6809776">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6809782">}</span><span class="op" id="6809783">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809787">{</span><span class="builtintype" id="6809788">float64</span><span class="op" id="6809795">(</span><span class="num" id="6809796">1.0</span><span class="op" id="6809799">)</span><span class="op" id="6809800">,</span>&nbsp;<span class="string" id="6809802">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6809807">}</span><span class="op" id="6809808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809812">{</span><span class="builtintype" id="6809813">float64</span><span class="op" id="6809820">(</span><span class="op" id="6809821">-</span><span class="num" id="6809822">1.0</span><span class="op" id="6809825">)</span><span class="op" id="6809826">,</span>&nbsp;<span class="string" id="6809828">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6809834">}</span><span class="op" id="6809835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809839">{</span><span class="builtintype" id="6809840">float64</span><span class="op" id="6809847">(</span><span class="num" id="6809848">0.5</span><span class="op" id="6809851">)</span><span class="op" id="6809852">,</span>&nbsp;<span class="string" id="6809854">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6809861">}</span><span class="op" id="6809862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809866">{</span><span class="builtintype" id="6809867">float64</span><span class="op" id="6809874">(</span><span class="op" id="6809875">-</span><span class="num" id="6809876">0.5</span><span class="op" id="6809879">)</span><span class="op" id="6809880">,</span>&nbsp;<span class="string" id="6809882">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6809890">}</span><span class="op" id="6809891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809895">{</span><span class="builtintype" id="6809896">float64</span><span class="op" id="6809903">(</span><span class="num" id="6809904">0</span><span class="op" id="6809905">)</span><span class="op" id="6809906">,</span>&nbsp;<span class="string" id="6809908">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6809913">}</span><span class="op" id="6809914">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809918">{</span><span class="ident" id="6809919">math</span><span class="op" id="6809923">.</span><span class="ident" id="6809924">Copysign</span><span class="op" id="6809932">(</span><span class="num" id="6809933">0</span><span class="op" id="6809934">,</span>&nbsp;<span class="op" id="6809936">-</span><span class="num" id="6809937">1</span><span class="op" id="6809938">)</span><span class="op" id="6809939">,</span>&nbsp;<span class="string" id="6809941">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6809947">}</span><span class="op" id="6809948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809952">{</span><span class="string" id="6809953">&#34;&#34;</span><span class="op" id="6809955">,</span>&nbsp;<span class="string" id="6809957">`&#34;&#34;`</span><span class="op" id="6809961">}</span><span class="op" id="6809962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809966">{</span><span class="string" id="6809967">&#34;foo&#34;</span><span class="op" id="6809972">,</span>&nbsp;<span class="string" id="6809974">`&#34;foo&#34;`</span><span class="op" id="6809981">}</span><span class="op" id="6809982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6809986">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810001">{</span><span class="string" id="6810002">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="6810020">,</span>&nbsp;<span class="string" id="6810022">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="6810042">}</span><span class="op" id="6810043">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6810047">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810095">{</span><span class="string" id="6810096">&#34;\t\x0b&#34;</span><span class="op" id="6810104">,</span>&nbsp;<span class="string" id="6810106">`&#34;\t\u000b&#34;`</span><span class="op" id="6810118">}</span><span class="op" id="6810119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810123">{</span><span class="keyword" id="6810124">struct</span><span class="op" id="6810130">{</span>&nbsp;<span class="ident" id="6810132">X</span><span class="op" id="6810133">,</span>&nbsp;<span class="ident" id="6810135">Y</span>&nbsp;<span class="builtintype" id="6810137">int</span>&nbsp;<span class="op" id="6810141">}</span><span class="op" id="6810142">{</span><span class="num" id="6810143">1</span><span class="op" id="6810144">,</span>&nbsp;<span class="num" id="6810146">2</span><span class="op" id="6810147">}</span><span class="op" id="6810148">,</span>&nbsp;<span class="string" id="6810150">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="6810165">}</span><span class="op" id="6810166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810170">{</span><span class="op" id="6810171">[</span><span class="op" id="6810172">]</span><span class="keyword" id="6810173">interface</span><span class="op" id="6810182">{</span><span class="op" id="6810183">}</span><span class="op" id="6810184">{</span><span class="op" id="6810185">}</span><span class="op" id="6810186">,</span>&nbsp;<span class="string" id="6810188">&#34;[]&#34;</span><span class="op" id="6810192">}</span><span class="op" id="6810193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810197">{</span><span class="op" id="6810198">[</span><span class="op" id="6810199">]</span><span class="keyword" id="6810200">interface</span><span class="op" id="6810209">{</span><span class="op" id="6810210">}</span><span class="op" id="6810211">{</span><span class="num" id="6810212">42</span><span class="op" id="6810214">,</span>&nbsp;<span class="string" id="6810216">&#34;foo&#34;</span><span class="op" id="6810221">,</span>&nbsp;<span class="ident" id="6810223">nil</span><span class="op" id="6810226">}</span><span class="op" id="6810227">,</span>&nbsp;<span class="string" id="6810229">`[42,&#34;foo&#34;,null]`</span><span class="op" id="6810246">}</span><span class="op" id="6810247">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810251">{</span><span class="op" id="6810252">[</span><span class="op" id="6810253">]</span><span class="builtintype" id="6810254">string</span><span class="op" id="6810260">{</span><span class="string" id="6810261">&#34;&lt;!--&#34;</span><span class="op" id="6810267">,</span>&nbsp;<span class="string" id="6810269">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6810280">,</span>&nbsp;<span class="string" id="6810282">&#34;--&gt;&#34;</span><span class="op" id="6810287">}</span><span class="op" id="6810288">,</span>&nbsp;<span class="string" id="6810290">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="6810338">}</span><span class="op" id="6810339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810343">{</span><span class="string" id="6810344">&#34;&lt;!--&#34;</span><span class="op" id="6810350">,</span>&nbsp;<span class="string" id="6810352">`&#34;\u003c!--&#34;`</span><span class="op" id="6810365">}</span><span class="op" id="6810366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810370">{</span><span class="string" id="6810371">&#34;--&gt;&#34;</span><span class="op" id="6810376">,</span>&nbsp;<span class="string" id="6810378">`&#34;--\u003e&#34;`</span><span class="op" id="6810390">}</span><span class="op" id="6810391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810395">{</span><span class="string" id="6810396">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6810407">,</span>&nbsp;<span class="string" id="6810409">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="6810427">}</span><span class="op" id="6810428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810432">{</span><span class="string" id="6810433">&#34;]]&gt;&#34;</span><span class="op" id="6810438">,</span>&nbsp;<span class="string" id="6810440">`&#34;]]\u003e&#34;`</span><span class="op" id="6810452">}</span><span class="op" id="6810453">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810457">{</span><span class="string" id="6810458">&#34;&lt;/script&#34;</span><span class="op" id="6810468">,</span>&nbsp;<span class="string" id="6810470">`&#34;\u003c/script&#34;`</span><span class="op" id="6810487">}</span><span class="op" id="6810488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810492">{</span><span class="string" id="6810493">&#34;\U0001D11E&#34;</span><span class="op" id="6810505">,</span>&nbsp;<span class="string" id="6810507">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="6810523">}</span><span class="op" id="6810524">,</span>&nbsp;<span class="comment" id="6810526">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810552">for</span>&nbsp;<span class="ident" id="6810556">_</span><span class="op" id="6810557">,</span>&nbsp;<span class="ident" id="6810559">test</span>&nbsp;<span class="op" id="6810564">:=</span>&nbsp;<span class="keyword" id="6810567">range</span>&nbsp;<span class="ident" id="6810573">tests</span>&nbsp;<span class="op" id="6810579">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810583">if</span>&nbsp;<span class="ident" id="6810586">js</span>&nbsp;<span class="op" id="6810589">:=</span>&nbsp;<span class="ident" id="6810592">jsValEscaper</span><span class="op" id="6810604">(</span><span class="ident" id="6810605">test</span><span class="op" id="6810609">.</span><span class="ident" id="6810610">x</span><span class="op" id="6810611">)</span><span class="op" id="6810612">;</span>&nbsp;<span class="ident" id="6810614">js</span>&nbsp;<span class="op" id="6810617">!=</span>&nbsp;<span class="ident" id="6810620">test</span><span class="op" id="6810624">.</span><span class="ident" id="6810625">js</span>&nbsp;<span class="op" id="6810628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810633">t</span><span class="op" id="6810634">.</span><span class="ident" id="6810635">Errorf</span><span class="op" id="6810641">(</span><span class="string" id="6810642">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6810670">,</span>&nbsp;<span class="ident" id="6810672">test</span><span class="op" id="6810676">.</span><span class="ident" id="6810677">x</span><span class="op" id="6810678">,</span>&nbsp;<span class="ident" id="6810680">test</span><span class="op" id="6810684">.</span><span class="ident" id="6810685">js</span><span class="op" id="6810687">,</span>&nbsp;<span class="ident" id="6810689">js</span><span class="op" id="6810691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6810699">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6810756">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810773">a</span>&nbsp;<span class="op" id="6810775">:=</span>&nbsp;<span class="op" id="6810778">[</span><span class="op" id="6810779">]</span><span class="keyword" id="6810780">interface</span><span class="op" id="6810789">{</span><span class="op" id="6810790">}</span><span class="op" id="6810791">{</span><span class="ident" id="6810792">test</span><span class="op" id="6810796">.</span><span class="ident" id="6810797">x</span><span class="op" id="6810798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810802">want</span>&nbsp;<span class="op" id="6810807">:=</span>&nbsp;<span class="string" id="6810810">&#34;[&#34;</span>&nbsp;<span class="op" id="6810814">+</span>&nbsp;<span class="ident" id="6810816">strings</span><span class="op" id="6810823">.</span><span class="ident" id="6810824">TrimSpace</span><span class="op" id="6810833">(</span><span class="ident" id="6810834">test</span><span class="op" id="6810838">.</span><span class="ident" id="6810839">js</span><span class="op" id="6810841">)</span>&nbsp;<span class="op" id="6810843">+</span>&nbsp;<span class="string" id="6810845">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810851">if</span>&nbsp;<span class="ident" id="6810854">js</span>&nbsp;<span class="op" id="6810857">:=</span>&nbsp;<span class="ident" id="6810860">jsValEscaper</span><span class="op" id="6810872">(</span><span class="ident" id="6810873">a</span><span class="op" id="6810874">)</span><span class="op" id="6810875">;</span>&nbsp;<span class="ident" id="6810877">js</span>&nbsp;<span class="op" id="6810880">!=</span>&nbsp;<span class="ident" id="6810883">want</span>&nbsp;<span class="op" id="6810888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810893">t</span><span class="op" id="6810894">.</span><span class="ident" id="6810895">Errorf</span><span class="op" id="6810901">(</span><span class="string" id="6810902">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6810930">,</span>&nbsp;<span class="ident" id="6810932">a</span><span class="op" id="6810933">,</span>&nbsp;<span class="ident" id="6810935">want</span><span class="op" id="6810939">,</span>&nbsp;<span class="ident" id="6810941">js</span><span class="op" id="6810943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810947">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810950">}</span><br>
<span class="lineno"></span><span class="op" id="6810952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6810955">func</span>&nbsp;<span class="ident" id="6810960">TestJSStrEscaper</span><span class="op" id="6810976">(</span><span class="ident" id="6810977">t</span>&nbsp;<span class="op" id="6810979">*</span><span class="ident" id="6810980">testing</span><span class="op" id="6810987">.</span><span class="ident" id="6810988">T</span><span class="op" id="6810989">)</span>&nbsp;<span class="op" id="6810991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810994">tests</span>&nbsp;<span class="op" id="6811000">:=</span>&nbsp;<span class="op" id="6811003">[</span><span class="op" id="6811004">]</span><span class="keyword" id="6811005">struct</span>&nbsp;<span class="op" id="6811012">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811016">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811020">interface</span><span class="op" id="6811029">{</span><span class="op" id="6811030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811034">esc</span>&nbsp;<span class="builtintype" id="6811038">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811046">}</span><span class="op" id="6811047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811051">{</span><span class="string" id="6811052">&#34;&#34;</span><span class="op" id="6811054">,</span>&nbsp;<span class="string" id="6811056">``</span><span class="op" id="6811058">}</span><span class="op" id="6811059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811063">{</span><span class="string" id="6811064">&#34;foo&#34;</span><span class="op" id="6811069">,</span>&nbsp;<span class="string" id="6811071">`foo`</span><span class="op" id="6811076">}</span><span class="op" id="6811077">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811081">{</span><span class="string" id="6811082">&#34;\u0000&#34;</span><span class="op" id="6811090">,</span>&nbsp;<span class="string" id="6811092">`\0`</span><span class="op" id="6811096">}</span><span class="op" id="6811097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811101">{</span><span class="string" id="6811102">&#34;\t&#34;</span><span class="op" id="6811106">,</span>&nbsp;<span class="string" id="6811108">`\t`</span><span class="op" id="6811112">}</span><span class="op" id="6811113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811117">{</span><span class="string" id="6811118">&#34;\n&#34;</span><span class="op" id="6811122">,</span>&nbsp;<span class="string" id="6811124">`\n`</span><span class="op" id="6811128">}</span><span class="op" id="6811129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811133">{</span><span class="string" id="6811134">&#34;\r&#34;</span><span class="op" id="6811138">,</span>&nbsp;<span class="string" id="6811140">`\r`</span><span class="op" id="6811144">}</span><span class="op" id="6811145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811149">{</span><span class="string" id="6811150">&#34;\u2028&#34;</span><span class="op" id="6811158">,</span>&nbsp;<span class="string" id="6811160">`\u2028`</span><span class="op" id="6811168">}</span><span class="op" id="6811169">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811173">{</span><span class="string" id="6811174">&#34;\u2029&#34;</span><span class="op" id="6811182">,</span>&nbsp;<span class="string" id="6811184">`\u2029`</span><span class="op" id="6811192">}</span><span class="op" id="6811193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811197">{</span><span class="string" id="6811198">&#34;\\&#34;</span><span class="op" id="6811202">,</span>&nbsp;<span class="string" id="6811204">`\\`</span><span class="op" id="6811208">}</span><span class="op" id="6811209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811213">{</span><span class="string" id="6811214">&#34;\\n&#34;</span><span class="op" id="6811219">,</span>&nbsp;<span class="string" id="6811221">`\\n`</span><span class="op" id="6811226">}</span><span class="op" id="6811227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811231">{</span><span class="string" id="6811232">&#34;foo\r\nbar&#34;</span><span class="op" id="6811244">,</span>&nbsp;<span class="string" id="6811246">`foo\r\nbar`</span><span class="op" id="6811258">}</span><span class="op" id="6811259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811263">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811299">{</span><span class="string" id="6811300">`&#34;`</span><span class="op" id="6811303">,</span>&nbsp;<span class="string" id="6811305">`\x22`</span><span class="op" id="6811311">}</span><span class="op" id="6811312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811316">{</span><span class="string" id="6811317">`&#39;`</span><span class="op" id="6811320">,</span>&nbsp;<span class="string" id="6811322">`\x27`</span><span class="op" id="6811328">}</span><span class="op" id="6811329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811333">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811388">{</span><span class="string" id="6811389">`&amp;amp;`</span><span class="op" id="6811396">,</span>&nbsp;<span class="string" id="6811398">`\x26amp;`</span><span class="op" id="6811408">}</span><span class="op" id="6811409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811413">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811476">{</span><span class="string" id="6811477">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6811488">,</span>&nbsp;<span class="string" id="6811490">`\x3c\/script\x3e`</span><span class="op" id="6811508">}</span><span class="op" id="6811509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811513">{</span><span class="string" id="6811514">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6811525">,</span>&nbsp;<span class="string" id="6811527">`\x3c![CDATA[`</span><span class="op" id="6811541">}</span><span class="op" id="6811542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811546">{</span><span class="string" id="6811547">&#34;]]&gt;&#34;</span><span class="op" id="6811552">,</span>&nbsp;<span class="string" id="6811554">`]]\x3e`</span><span class="op" id="6811562">}</span><span class="op" id="6811563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811567">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811639">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811703">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811764">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811811">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811875">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811942">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812008">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812068">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812132">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812183">{</span><span class="string" id="6812184">&#34;&lt;!--&#34;</span><span class="op" id="6812190">,</span>&nbsp;<span class="string" id="6812192">`\x3c!--`</span><span class="op" id="6812201">}</span><span class="op" id="6812202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812206">{</span><span class="string" id="6812207">&#34;--&gt;&#34;</span><span class="op" id="6812212">,</span>&nbsp;<span class="string" id="6812214">`--\x3e`</span><span class="op" id="6812222">}</span><span class="op" id="6812223">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812227">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812287">{</span><span class="string" id="6812288">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="6812331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6812336">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="6812392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812396">}</span><span class="op" id="6812397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812401">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812429">{</span><span class="string" id="6812430">&#34;foo\xA0bar&#34;</span><span class="op" id="6812442">,</span>&nbsp;<span class="string" id="6812444">&#34;foo\xA0bar&#34;</span><span class="op" id="6812456">}</span><span class="op" id="6812457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812461">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812496">{</span><span class="string" id="6812497">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6812517">,</span>&nbsp;<span class="string" id="6812519">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6812539">}</span><span class="op" id="6812540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812547">for</span>&nbsp;<span class="ident" id="6812551">_</span><span class="op" id="6812552">,</span>&nbsp;<span class="ident" id="6812554">test</span>&nbsp;<span class="op" id="6812559">:=</span>&nbsp;<span class="keyword" id="6812562">range</span>&nbsp;<span class="ident" id="6812568">tests</span>&nbsp;<span class="op" id="6812574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812578">esc</span>&nbsp;<span class="op" id="6812582">:=</span>&nbsp;<span class="ident" id="6812585">jsStrEscaper</span><span class="op" id="6812597">(</span><span class="ident" id="6812598">test</span><span class="op" id="6812602">.</span><span class="ident" id="6812603">x</span><span class="op" id="6812604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812608">if</span>&nbsp;<span class="ident" id="6812611">esc</span>&nbsp;<span class="op" id="6812615">!=</span>&nbsp;<span class="ident" id="6812618">test</span><span class="op" id="6812622">.</span><span class="ident" id="6812623">esc</span>&nbsp;<span class="op" id="6812627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812632">t</span><span class="op" id="6812633">.</span><span class="ident" id="6812634">Errorf</span><span class="op" id="6812640">(</span><span class="string" id="6812641">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6812661">,</span>&nbsp;<span class="ident" id="6812663">test</span><span class="op" id="6812667">.</span><span class="ident" id="6812668">x</span><span class="op" id="6812669">,</span>&nbsp;<span class="ident" id="6812671">test</span><span class="op" id="6812675">.</span><span class="ident" id="6812676">esc</span><span class="op" id="6812679">,</span>&nbsp;<span class="ident" id="6812681">esc</span><span class="op" id="6812684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812688">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812691">}</span><br>
<span class="lineno"></span><span class="op" id="6812693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6812696">func</span>&nbsp;<span class="ident" id="6812701">TestJSRegexpEscaper</span><span class="op" id="6812720">(</span><span class="ident" id="6812721">t</span>&nbsp;<span class="op" id="6812723">*</span><span class="ident" id="6812724">testing</span><span class="op" id="6812731">.</span><span class="ident" id="6812732">T</span><span class="op" id="6812733">)</span>&nbsp;<span class="op" id="6812735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812738">tests</span>&nbsp;<span class="op" id="6812744">:=</span>&nbsp;<span class="op" id="6812747">[</span><span class="op" id="6812748">]</span><span class="keyword" id="6812749">struct</span>&nbsp;<span class="op" id="6812756">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812760">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812764">interface</span><span class="op" id="6812773">{</span><span class="op" id="6812774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812778">esc</span>&nbsp;<span class="builtintype" id="6812782">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812790">}</span><span class="op" id="6812791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812795">{</span><span class="string" id="6812796">&#34;&#34;</span><span class="op" id="6812798">,</span>&nbsp;<span class="string" id="6812800">`(?:)`</span><span class="op" id="6812806">}</span><span class="op" id="6812807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812811">{</span><span class="string" id="6812812">&#34;foo&#34;</span><span class="op" id="6812817">,</span>&nbsp;<span class="string" id="6812819">`foo`</span><span class="op" id="6812824">}</span><span class="op" id="6812825">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812829">{</span><span class="string" id="6812830">&#34;\u0000&#34;</span><span class="op" id="6812838">,</span>&nbsp;<span class="string" id="6812840">`\0`</span><span class="op" id="6812844">}</span><span class="op" id="6812845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812849">{</span><span class="string" id="6812850">&#34;\t&#34;</span><span class="op" id="6812854">,</span>&nbsp;<span class="string" id="6812856">`\t`</span><span class="op" id="6812860">}</span><span class="op" id="6812861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812865">{</span><span class="string" id="6812866">&#34;\n&#34;</span><span class="op" id="6812870">,</span>&nbsp;<span class="string" id="6812872">`\n`</span><span class="op" id="6812876">}</span><span class="op" id="6812877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812881">{</span><span class="string" id="6812882">&#34;\r&#34;</span><span class="op" id="6812886">,</span>&nbsp;<span class="string" id="6812888">`\r`</span><span class="op" id="6812892">}</span><span class="op" id="6812893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812897">{</span><span class="string" id="6812898">&#34;\u2028&#34;</span><span class="op" id="6812906">,</span>&nbsp;<span class="string" id="6812908">`\u2028`</span><span class="op" id="6812916">}</span><span class="op" id="6812917">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812921">{</span><span class="string" id="6812922">&#34;\u2029&#34;</span><span class="op" id="6812930">,</span>&nbsp;<span class="string" id="6812932">`\u2029`</span><span class="op" id="6812940">}</span><span class="op" id="6812941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812945">{</span><span class="string" id="6812946">&#34;\\&#34;</span><span class="op" id="6812950">,</span>&nbsp;<span class="string" id="6812952">`\\`</span><span class="op" id="6812956">}</span><span class="op" id="6812957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812961">{</span><span class="string" id="6812962">&#34;\\n&#34;</span><span class="op" id="6812967">,</span>&nbsp;<span class="string" id="6812969">`\\n`</span><span class="op" id="6812974">}</span><span class="op" id="6812975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812979">{</span><span class="string" id="6812980">&#34;foo\r\nbar&#34;</span><span class="op" id="6812992">,</span>&nbsp;<span class="string" id="6812994">`foo\r\nbar`</span><span class="op" id="6813006">}</span><span class="op" id="6813007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6813011">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813047">{</span><span class="string" id="6813048">`&#34;`</span><span class="op" id="6813051">,</span>&nbsp;<span class="string" id="6813053">`\x22`</span><span class="op" id="6813059">}</span><span class="op" id="6813060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813064">{</span><span class="string" id="6813065">`&#39;`</span><span class="op" id="6813068">,</span>&nbsp;<span class="string" id="6813070">`\x27`</span><span class="op" id="6813076">}</span><span class="op" id="6813077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6813081">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813136">{</span><span class="string" id="6813137">`&amp;amp;`</span><span class="op" id="6813144">,</span>&nbsp;<span class="string" id="6813146">`\x26amp;`</span><span class="op" id="6813156">}</span><span class="op" id="6813157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6813161">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813224">{</span><span class="string" id="6813225">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6813236">,</span>&nbsp;<span class="string" id="6813238">`\x3c\/script\x3e`</span><span class="op" id="6813256">}</span><span class="op" id="6813257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813261">{</span><span class="string" id="6813262">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6813273">,</span>&nbsp;<span class="string" id="6813275">`\x3c!\[CDATA\[`</span><span class="op" id="6813291">}</span><span class="op" id="6813292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813296">{</span><span class="string" id="6813297">&#34;]]&gt;&#34;</span><span class="op" id="6813302">,</span>&nbsp;<span class="string" id="6813304">`\]\]\x3e`</span><span class="op" id="6813314">}</span><span class="op" id="6813315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6813319">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813345">{</span><span class="string" id="6813346">&#34;&lt;!--&#34;</span><span class="op" id="6813352">,</span>&nbsp;<span class="string" id="6813354">`\x3c!\-\-`</span><span class="op" id="6813365">}</span><span class="op" id="6813366">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813370">{</span><span class="string" id="6813371">&#34;--&gt;&#34;</span><span class="op" id="6813376">,</span>&nbsp;<span class="string" id="6813378">`\-\-\x3e`</span><span class="op" id="6813388">}</span><span class="op" id="6813389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813393">{</span><span class="string" id="6813394">&#34;*&#34;</span><span class="op" id="6813397">,</span>&nbsp;<span class="string" id="6813399">`\*`</span><span class="op" id="6813403">}</span><span class="op" id="6813404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813408">{</span><span class="string" id="6813409">&#34;+&#34;</span><span class="op" id="6813412">,</span>&nbsp;<span class="string" id="6813414">`\x2b`</span><span class="op" id="6813420">}</span><span class="op" id="6813421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813425">{</span><span class="string" id="6813426">&#34;?&#34;</span><span class="op" id="6813429">,</span>&nbsp;<span class="string" id="6813431">`\?`</span><span class="op" id="6813435">}</span><span class="op" id="6813436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813440">{</span><span class="string" id="6813441">&#34;[](){}&#34;</span><span class="op" id="6813449">,</span>&nbsp;<span class="string" id="6813451">`\[\]\(\)\{\}`</span><span class="op" id="6813465">}</span><span class="op" id="6813466">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813470">{</span><span class="string" id="6813471">&#34;$foo|x.y&#34;</span><span class="op" id="6813481">,</span>&nbsp;<span class="string" id="6813483">`\$foo\|x\.y`</span><span class="op" id="6813496">}</span><span class="op" id="6813497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813501">{</span><span class="string" id="6813502">&#34;x^y&#34;</span><span class="op" id="6813507">,</span>&nbsp;<span class="string" id="6813509">`x\^y`</span><span class="op" id="6813515">}</span><span class="op" id="6813516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813523">for</span>&nbsp;<span class="ident" id="6813527">_</span><span class="op" id="6813528">,</span>&nbsp;<span class="ident" id="6813530">test</span>&nbsp;<span class="op" id="6813535">:=</span>&nbsp;<span class="keyword" id="6813538">range</span>&nbsp;<span class="ident" id="6813544">tests</span>&nbsp;<span class="op" id="6813550">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813554">esc</span>&nbsp;<span class="op" id="6813558">:=</span>&nbsp;<span class="ident" id="6813561">jsRegexpEscaper</span><span class="op" id="6813576">(</span><span class="ident" id="6813577">test</span><span class="op" id="6813581">.</span><span class="ident" id="6813582">x</span><span class="op" id="6813583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6813587">if</span>&nbsp;<span class="ident" id="6813590">esc</span>&nbsp;<span class="op" id="6813594">!=</span>&nbsp;<span class="ident" id="6813597">test</span><span class="op" id="6813601">.</span><span class="ident" id="6813602">esc</span>&nbsp;<span class="op" id="6813606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813611">t</span><span class="op" id="6813612">.</span><span class="ident" id="6813613">Errorf</span><span class="op" id="6813619">(</span><span class="string" id="6813620">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6813640">,</span>&nbsp;<span class="ident" id="6813642">test</span><span class="op" id="6813646">.</span><span class="ident" id="6813647">x</span><span class="op" id="6813648">,</span>&nbsp;<span class="ident" id="6813650">test</span><span class="op" id="6813654">.</span><span class="ident" id="6813655">esc</span><span class="op" id="6813658">,</span>&nbsp;<span class="ident" id="6813660">esc</span><span class="op" id="6813663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6813670">}</span><br>
<span class="lineno">265</span><span class="op" id="6813672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6813675">func</span>&nbsp;<span class="ident" id="6813680">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="6813723">(</span><span class="ident" id="6813724">t</span>&nbsp;<span class="op" id="6813726">*</span><span class="ident" id="6813727">testing</span><span class="op" id="6813734">.</span><span class="ident" id="6813735">T</span><span class="op" id="6813736">)</span>&nbsp;<span class="op" id="6813738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6813741">input</span>&nbsp;<span class="op" id="6813747">:=</span>&nbsp;<span class="op" id="6813750">(</span><span class="string" id="6813751">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="6813812">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813816">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6813883">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813887">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="6813906">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813910">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="6813929">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813933">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6813952">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813956">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="6813975">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6813979">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6813998">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814002">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6814024">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814028">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6814070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814074">tests</span>&nbsp;<span class="op" id="6814080">:=</span>&nbsp;<span class="op" id="6814083">[</span><span class="op" id="6814084">]</span><span class="keyword" id="6814085">struct</span>&nbsp;<span class="op" id="6814092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814096">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6814104">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814113">escaper</span>&nbsp;<span class="keyword" id="6814121">func</span><span class="op" id="6814125">(</span><span class="op" id="6814126">...</span><span class="keyword" id="6814129">interface</span><span class="op" id="6814138">{</span><span class="op" id="6814139">}</span><span class="op" id="6814140">)</span>&nbsp;<span class="builtintype" id="6814142">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814151">escaped</span>&nbsp;<span class="builtintype" id="6814159">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814167">}</span><span class="op" id="6814168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814177">&#34;jsStrEscaper&#34;</span><span class="op" id="6814191">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814196">jsStrEscaper</span><span class="op" id="6814208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814213">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6814247">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814253">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6814285">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814291">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6814326">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814332">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6814367">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814373">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="6814405">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814411">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="6814436">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814442">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6814461">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814467">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="6814487">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814493">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6814512">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814518">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6814540">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814546">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6814590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814594">}</span><span class="op" id="6814595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814604">&#34;jsRegexpEscaper&#34;</span><span class="op" id="6814621">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814626">jsRegexpEscaper</span><span class="op" id="6814641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814646">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6814680">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814686">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6814718">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814724">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6814759">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814765">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6814800">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814806">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="6814844">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814850">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="6814876">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814882">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6814901">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814907">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="6814930">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814936">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6814955">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814961">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="6814982">+</span>&nbsp;<span class="string" id="6814984">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="6814993">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814999">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6815043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815047">}</span><span class="op" id="6815048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815055">for</span>&nbsp;<span class="ident" id="6815059">_</span><span class="op" id="6815060">,</span>&nbsp;<span class="ident" id="6815062">test</span>&nbsp;<span class="op" id="6815067">:=</span>&nbsp;<span class="keyword" id="6815070">range</span>&nbsp;<span class="ident" id="6815076">tests</span>&nbsp;<span class="op" id="6815082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815086">if</span>&nbsp;<span class="ident" id="6815089">s</span>&nbsp;<span class="op" id="6815091">:=</span>&nbsp;<span class="ident" id="6815094">test</span><span class="op" id="6815098">.</span><span class="ident" id="6815099">escaper</span><span class="op" id="6815106">(</span><span class="ident" id="6815107">input</span><span class="op" id="6815112">)</span><span class="op" id="6815113">;</span>&nbsp;<span class="ident" id="6815115">s</span>&nbsp;<span class="op" id="6815117">!=</span>&nbsp;<span class="ident" id="6815120">test</span><span class="op" id="6815124">.</span><span class="ident" id="6815125">escaped</span>&nbsp;<span class="op" id="6815133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815138">t</span><span class="op" id="6815139">.</span><span class="ident" id="6815140">Errorf</span><span class="op" id="6815146">(</span><span class="string" id="6815147">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6815179">,</span>&nbsp;<span class="ident" id="6815181">test</span><span class="op" id="6815185">.</span><span class="ident" id="6815186">name</span><span class="op" id="6815190">,</span>&nbsp;<span class="ident" id="6815192">test</span><span class="op" id="6815196">.</span><span class="ident" id="6815197">escaped</span><span class="op" id="6815204">,</span>&nbsp;<span class="ident" id="6815206">s</span><span class="op" id="6815207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815212">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815223">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815228">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815278">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815327">var</span>&nbsp;<span class="ident" id="6815331">buf</span>&nbsp;<span class="ident" id="6815335">bytes</span><span class="op" id="6815340">.</span><span class="ident" id="6815341">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815350">for</span>&nbsp;<span class="ident" id="6815354">_</span><span class="op" id="6815355">,</span>&nbsp;<span class="ident" id="6815357">c</span>&nbsp;<span class="op" id="6815359">:=</span>&nbsp;<span class="keyword" id="6815362">range</span>&nbsp;<span class="ident" id="6815368">input</span>&nbsp;<span class="op" id="6815374">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815379">buf</span><span class="op" id="6815382">.</span><span class="ident" id="6815383">WriteString</span><span class="op" id="6815394">(</span><span class="ident" id="6815395">test</span><span class="op" id="6815399">.</span><span class="ident" id="6815400">escaper</span><span class="op" id="6815407">(</span><span class="builtintype" id="6815408">string</span><span class="op" id="6815414">(</span><span class="ident" id="6815415">c</span><span class="op" id="6815416">)</span><span class="op" id="6815417">)</span><span class="op" id="6815418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815427">if</span>&nbsp;<span class="ident" id="6815430">s</span>&nbsp;<span class="op" id="6815432">:=</span>&nbsp;<span class="ident" id="6815435">buf</span><span class="op" id="6815438">.</span><span class="ident" id="6815439">String</span><span class="op" id="6815445">(</span><span class="op" id="6815446">)</span><span class="op" id="6815447">;</span>&nbsp;<span class="ident" id="6815449">s</span>&nbsp;<span class="op" id="6815451">!=</span>&nbsp;<span class="ident" id="6815454">test</span><span class="op" id="6815458">.</span><span class="ident" id="6815459">escaped</span>&nbsp;<span class="op" id="6815467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815472">t</span><span class="op" id="6815473">.</span><span class="ident" id="6815474">Errorf</span><span class="op" id="6815480">(</span><span class="string" id="6815481">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6815518">,</span>&nbsp;<span class="ident" id="6815520">test</span><span class="op" id="6815524">.</span><span class="ident" id="6815525">name</span><span class="op" id="6815529">,</span>&nbsp;<span class="ident" id="6815531">test</span><span class="op" id="6815535">.</span><span class="ident" id="6815536">escaped</span><span class="op" id="6815543">,</span>&nbsp;<span class="ident" id="6815545">s</span><span class="op" id="6815546">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815551">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815565">}</span><br>
<span class="lineno"></span><span class="op" id="6815567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6815570">func</span>&nbsp;<span class="ident" id="6815575">BenchmarkJSValEscaperWithNum</span><span class="op" id="6815603">(</span><span class="ident" id="6815604">b</span>&nbsp;<span class="op" id="6815606">*</span><span class="ident" id="6815607">testing</span><span class="op" id="6815614">.</span><span class="ident" id="6815615">B</span><span class="op" id="6815616">)</span>&nbsp;<span class="op" id="6815618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815621">for</span>&nbsp;<span class="ident" id="6815625">i</span>&nbsp;<span class="op" id="6815627">:=</span>&nbsp;<span class="num" id="6815630">0</span><span class="op" id="6815631">;</span>&nbsp;<span class="ident" id="6815633">i</span>&nbsp;<span class="op" id="6815635">&lt;</span>&nbsp;<span class="ident" id="6815637">b</span><span class="op" id="6815638">.</span><span class="ident" id="6815639">N</span><span class="op" id="6815640">;</span>&nbsp;<span class="ident" id="6815642">i</span><span class="op" id="6815643">++</span>&nbsp;<span class="op" id="6815646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815650">jsValEscaper</span><span class="op" id="6815662">(</span><span class="num" id="6815663">3.141592654</span><span class="op" id="6815674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815677">}</span><br>
<span class="lineno"></span><span class="op" id="6815679">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6815682">func</span>&nbsp;<span class="ident" id="6815687">BenchmarkJSValEscaperWithStr</span><span class="op" id="6815715">(</span><span class="ident" id="6815716">b</span>&nbsp;<span class="op" id="6815718">*</span><span class="ident" id="6815719">testing</span><span class="op" id="6815726">.</span><span class="ident" id="6815727">B</span><span class="op" id="6815728">)</span>&nbsp;<span class="op" id="6815730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815733">for</span>&nbsp;<span class="ident" id="6815737">i</span>&nbsp;<span class="op" id="6815739">:=</span>&nbsp;<span class="num" id="6815742">0</span><span class="op" id="6815743">;</span>&nbsp;<span class="ident" id="6815745">i</span>&nbsp;<span class="op" id="6815747">&lt;</span>&nbsp;<span class="ident" id="6815749">b</span><span class="op" id="6815750">.</span><span class="ident" id="6815751">N</span><span class="op" id="6815752">;</span>&nbsp;<span class="ident" id="6815754">i</span><span class="op" id="6815755">++</span>&nbsp;<span class="op" id="6815758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815762">jsValEscaper</span><span class="op" id="6815774">(</span><span class="string" id="6815775">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6815896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815899">}</span><br>
<span class="lineno">345</span><span class="op" id="6815901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6815904">func</span>&nbsp;<span class="ident" id="6815909">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="6815947">(</span><span class="ident" id="6815948">b</span>&nbsp;<span class="op" id="6815950">*</span><span class="ident" id="6815951">testing</span><span class="op" id="6815958">.</span><span class="ident" id="6815959">B</span><span class="op" id="6815960">)</span>&nbsp;<span class="op" id="6815962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815965">for</span>&nbsp;<span class="ident" id="6815969">i</span>&nbsp;<span class="op" id="6815971">:=</span>&nbsp;<span class="num" id="6815974">0</span><span class="op" id="6815975">;</span>&nbsp;<span class="ident" id="6815977">i</span>&nbsp;<span class="op" id="6815979">&lt;</span>&nbsp;<span class="ident" id="6815981">b</span><span class="op" id="6815982">.</span><span class="ident" id="6815983">N</span><span class="op" id="6815984">;</span>&nbsp;<span class="ident" id="6815986">i</span><span class="op" id="6815987">++</span>&nbsp;<span class="op" id="6815990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815994">jsValEscaper</span><span class="op" id="6816006">(</span><span class="string" id="6816007">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6816053">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816056">}</span><br>
<span class="lineno"></span><span class="op" id="6816058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6816061">func</span>&nbsp;<span class="ident" id="6816066">BenchmarkJSValEscaperWithObj</span><span class="op" id="6816094">(</span><span class="ident" id="6816095">b</span>&nbsp;<span class="op" id="6816097">*</span><span class="ident" id="6816098">testing</span><span class="op" id="6816105">.</span><span class="ident" id="6816106">B</span><span class="op" id="6816107">)</span>&nbsp;<span class="op" id="6816109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816112">o</span>&nbsp;<span class="op" id="6816114">:=</span>&nbsp;<span class="keyword" id="6816117">struct</span>&nbsp;<span class="op" id="6816124">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816128">S</span>&nbsp;<span class="builtintype" id="6816130">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816139">N</span>&nbsp;<span class="builtintype" id="6816141">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816146">}</span><span class="op" id="6816147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6816151">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="6816278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6816282">42</span><span class="op" id="6816284">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6816290">for</span>&nbsp;<span class="ident" id="6816294">i</span>&nbsp;<span class="op" id="6816296">:=</span>&nbsp;<span class="num" id="6816299">0</span><span class="op" id="6816300">;</span>&nbsp;<span class="ident" id="6816302">i</span>&nbsp;<span class="op" id="6816304">&lt;</span>&nbsp;<span class="ident" id="6816306">b</span><span class="op" id="6816307">.</span><span class="ident" id="6816308">N</span><span class="op" id="6816309">;</span>&nbsp;<span class="ident" id="6816311">i</span><span class="op" id="6816312">++</span>&nbsp;<span class="op" id="6816315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816319">jsValEscaper</span><span class="op" id="6816331">(</span><span class="ident" id="6816332">o</span><span class="op" id="6816333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816336">}</span><br>
<span class="lineno"></span><span class="op" id="6816338">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="6816341">func</span>&nbsp;<span class="ident" id="6816346">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="6816384">(</span><span class="ident" id="6816385">b</span>&nbsp;<span class="op" id="6816387">*</span><span class="ident" id="6816388">testing</span><span class="op" id="6816395">.</span><span class="ident" id="6816396">B</span><span class="op" id="6816397">)</span>&nbsp;<span class="op" id="6816399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816402">o</span>&nbsp;<span class="op" id="6816404">:=</span>&nbsp;<span class="keyword" id="6816407">struct</span>&nbsp;<span class="op" id="6816414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816418">S</span>&nbsp;<span class="builtintype" id="6816420">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816429">N</span>&nbsp;<span class="builtintype" id="6816431">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816436">}</span><span class="op" id="6816437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6816441">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6816487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6816491">42</span><span class="op" id="6816493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6816499">for</span>&nbsp;<span class="ident" id="6816503">i</span>&nbsp;<span class="op" id="6816505">:=</span>&nbsp;<span class="num" id="6816508">0</span><span class="op" id="6816509">;</span>&nbsp;<span class="ident" id="6816511">i</span>&nbsp;<span class="op" id="6816513">&lt;</span>&nbsp;<span class="ident" id="6816515">b</span><span class="op" id="6816516">.</span><span class="ident" id="6816517">N</span><span class="op" id="6816518">;</span>&nbsp;<span class="ident" id="6816520">i</span><span class="op" id="6816521">++</span>&nbsp;<span class="op" id="6816524">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816528">jsValEscaper</span><span class="op" id="6816540">(</span><span class="ident" id="6816541">o</span><span class="op" id="6816542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816545">}</span><br>
<span class="lineno"></span><span class="op" id="6816547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6816550">func</span>&nbsp;<span class="ident" id="6816555">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="6816586">(</span><span class="ident" id="6816587">b</span>&nbsp;<span class="op" id="6816589">*</span><span class="ident" id="6816590">testing</span><span class="op" id="6816597">.</span><span class="ident" id="6816598">B</span><span class="op" id="6816599">)</span>&nbsp;<span class="op" id="6816601">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6816604">for</span>&nbsp;<span class="ident" id="6816608">i</span>&nbsp;<span class="op" id="6816610">:=</span>&nbsp;<span class="num" id="6816613">0</span><span class="op" id="6816614">;</span>&nbsp;<span class="ident" id="6816616">i</span>&nbsp;<span class="op" id="6816618">&lt;</span>&nbsp;<span class="ident" id="6816620">b</span><span class="op" id="6816621">.</span><span class="ident" id="6816622">N</span><span class="op" id="6816623">;</span>&nbsp;<span class="ident" id="6816625">i</span><span class="op" id="6816626">++</span>&nbsp;<span class="op" id="6816629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816633">jsStrEscaper</span><span class="op" id="6816645">(</span><span class="string" id="6816646">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="6816693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816696">}</span><br>
<span class="lineno"></span><span class="op" id="6816698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="6816701">func</span>&nbsp;<span class="ident" id="6816706">BenchmarkJSStrEscaper</span><span class="op" id="6816727">(</span><span class="ident" id="6816728">b</span>&nbsp;<span class="op" id="6816730">*</span><span class="ident" id="6816731">testing</span><span class="op" id="6816738">.</span><span class="ident" id="6816739">B</span><span class="op" id="6816740">)</span>&nbsp;<span class="op" id="6816742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6816745">for</span>&nbsp;<span class="ident" id="6816749">i</span>&nbsp;<span class="op" id="6816751">:=</span>&nbsp;<span class="num" id="6816754">0</span><span class="op" id="6816755">;</span>&nbsp;<span class="ident" id="6816757">i</span>&nbsp;<span class="op" id="6816759">&lt;</span>&nbsp;<span class="ident" id="6816761">b</span><span class="op" id="6816762">.</span><span class="ident" id="6816763">N</span><span class="op" id="6816764">;</span>&nbsp;<span class="ident" id="6816766">i</span><span class="op" id="6816767">++</span>&nbsp;<span class="op" id="6816770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816774">jsStrEscaper</span><span class="op" id="6816786">(</span><span class="string" id="6816787">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6816908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816911">}</span><br>
<span class="lineno"></span><span class="op" id="6816913">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="6816916">func</span>&nbsp;<span class="ident" id="6816921">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="6816955">(</span><span class="ident" id="6816956">b</span>&nbsp;<span class="op" id="6816958">*</span><span class="ident" id="6816959">testing</span><span class="op" id="6816966">.</span><span class="ident" id="6816967">B</span><span class="op" id="6816968">)</span>&nbsp;<span class="op" id="6816970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6816973">for</span>&nbsp;<span class="ident" id="6816977">i</span>&nbsp;<span class="op" id="6816979">:=</span>&nbsp;<span class="num" id="6816982">0</span><span class="op" id="6816983">;</span>&nbsp;<span class="ident" id="6816985">i</span>&nbsp;<span class="op" id="6816987">&lt;</span>&nbsp;<span class="ident" id="6816989">b</span><span class="op" id="6816990">.</span><span class="ident" id="6816991">N</span><span class="op" id="6816992">;</span>&nbsp;<span class="ident" id="6816994">i</span><span class="op" id="6816995">++</span>&nbsp;<span class="op" id="6816998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6817002">jsRegexpEscaper</span><span class="op" id="6817017">(</span><span class="string" id="6817018">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6817064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6817067">}</span><br>
<span class="lineno">395</span><span class="op" id="6817069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6817072">func</span>&nbsp;<span class="ident" id="6817077">BenchmarkJSRegexpEscaper</span><span class="op" id="6817101">(</span><span class="ident" id="6817102">b</span>&nbsp;<span class="op" id="6817104">*</span><span class="ident" id="6817105">testing</span><span class="op" id="6817112">.</span><span class="ident" id="6817113">B</span><span class="op" id="6817114">)</span>&nbsp;<span class="op" id="6817116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6817119">for</span>&nbsp;<span class="ident" id="6817123">i</span>&nbsp;<span class="op" id="6817125">:=</span>&nbsp;<span class="num" id="6817128">0</span><span class="op" id="6817129">;</span>&nbsp;<span class="ident" id="6817131">i</span>&nbsp;<span class="op" id="6817133">&lt;</span>&nbsp;<span class="ident" id="6817135">b</span><span class="op" id="6817136">.</span><span class="ident" id="6817137">N</span><span class="op" id="6817138">;</span>&nbsp;<span class="ident" id="6817140">i</span><span class="op" id="6817141">++</span>&nbsp;<span class="op" id="6817144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6817148">jsRegexpEscaper</span><span class="op" id="6817163">(</span><span class="string" id="6817164">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6817285">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6817288">}</span><br>
<span class="lineno"></span><span class="op" id="6817290">}</span>
</div>
</body>
</html>
