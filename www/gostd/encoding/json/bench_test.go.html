<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html" class="current">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6839775">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6839831">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6839885">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6839936">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="6839961">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6840015">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="6840065">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6840114">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6840149">package</span>&nbsp;<span class="ident" id="6840157">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6840163">import</span>&nbsp;<span class="op" id="6840170">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840173">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840182">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840199">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840212">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840218">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6840228">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6840231">type</span>&nbsp;<span class="ident" id="6840236">codeResponse</span>&nbsp;<span class="keyword" id="6840249">struct</span>&nbsp;<span class="op" id="6840256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840259">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840268">*</span><span class="ident" id="6840269">codeNode</span>&nbsp;<span class="string" id="6840278">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840293">Username</span>&nbsp;<span class="builtintype" id="6840302">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840312">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6840330">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6840333">type</span>&nbsp;<span class="ident" id="6840338">codeNode</span>&nbsp;<span class="keyword" id="6840347">struct</span>&nbsp;<span class="op" id="6840354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840357">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6840366">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840378">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840393">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840402">[</span><span class="op" id="6840403">]</span><span class="op" id="6840404">*</span><span class="ident" id="6840405">codeNode</span>&nbsp;<span class="string" id="6840414">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840429">CLWeight</span>&nbsp;<span class="builtintype" id="6840438">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840450">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840470">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="6840479">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840491">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840509">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840518">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840530">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840546">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840555">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840567">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840583">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840592">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6840604">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6840620">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6840623">var</span>&nbsp;<span class="ident" id="6840627">codeJSON</span>&nbsp;<span class="op" id="6840636">[</span><span class="op" id="6840637">]</span><span class="builtintype" id="6840638">byte</span><br>
<span class="lineno"></span><span class="keyword" id="6840643">var</span>&nbsp;<span class="ident" id="6840647">codeStruct</span>&nbsp;<span class="ident" id="6840658">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6840672">func</span>&nbsp;<span class="ident" id="6840677">codeInit</span><span class="op" id="6840685">(</span><span class="op" id="6840686">)</span>&nbsp;<span class="op" id="6840688">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840691">f</span><span class="op" id="6840692">,</span>&nbsp;<span class="ident" id="6840694">err</span>&nbsp;<span class="op" id="6840698">:=</span>&nbsp;<span class="ident" id="6840701">os</span><span class="op" id="6840703">.</span><span class="ident" id="6840704">Open</span><span class="op" id="6840708">(</span><span class="string" id="6840709">&#34;testdata/code.json.gz&#34;</span><span class="op" id="6840732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6840735">if</span>&nbsp;<span class="ident" id="6840738">err</span>&nbsp;<span class="op" id="6840742">!=</span>&nbsp;<span class="builtintype" id="6840745">nil</span>&nbsp;<span class="op" id="6840749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6840753">panic</span><span class="op" id="6840758">(</span><span class="ident" id="6840759">err</span><span class="op" id="6840762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6840768">defer</span>&nbsp;<span class="ident" id="6840774">f</span><span class="op" id="6840775">.</span><span class="ident" id="6840776">Close</span><span class="op" id="6840781">(</span><span class="op" id="6840782">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840785">gz</span><span class="op" id="6840787">,</span>&nbsp;<span class="ident" id="6840789">err</span>&nbsp;<span class="op" id="6840793">:=</span>&nbsp;<span class="ident" id="6840796">gzip</span><span class="op" id="6840800">.</span><span class="ident" id="6840801">NewReader</span><span class="op" id="6840810">(</span><span class="ident" id="6840811">f</span><span class="op" id="6840812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6840815">if</span>&nbsp;<span class="ident" id="6840818">err</span>&nbsp;<span class="op" id="6840822">!=</span>&nbsp;<span class="builtintype" id="6840825">nil</span>&nbsp;<span class="op" id="6840829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6840833">panic</span><span class="op" id="6840838">(</span><span class="ident" id="6840839">err</span><span class="op" id="6840842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840848">data</span><span class="op" id="6840852">,</span>&nbsp;<span class="ident" id="6840854">err</span>&nbsp;<span class="op" id="6840858">:=</span>&nbsp;<span class="ident" id="6840861">ioutil</span><span class="op" id="6840867">.</span><span class="ident" id="6840868">ReadAll</span><span class="op" id="6840875">(</span><span class="ident" id="6840876">gz</span><span class="op" id="6840878">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6840881">if</span>&nbsp;<span class="ident" id="6840884">err</span>&nbsp;<span class="op" id="6840888">!=</span>&nbsp;<span class="builtintype" id="6840891">nil</span>&nbsp;<span class="op" id="6840895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6840899">panic</span><span class="op" id="6840904">(</span><span class="ident" id="6840905">err</span><span class="op" id="6840908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6840911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6840915">codeJSON</span>&nbsp;<span class="op" id="6840924">=</span>&nbsp;<span class="ident" id="6840926">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6840933">if</span>&nbsp;<span class="ident" id="6840936">err</span>&nbsp;<span class="op" id="6840940">:=</span>&nbsp;<span class="ident" id="6840943">Unmarshal</span><span class="op" id="6840952">(</span><span class="ident" id="6840953">codeJSON</span><span class="op" id="6840961">,</span>&nbsp;<span class="op" id="6840963">&amp;</span><span class="ident" id="6840964">codeStruct</span><span class="op" id="6840974">)</span><span class="op" id="6840975">;</span>&nbsp;<span class="ident" id="6840977">err</span>&nbsp;<span class="op" id="6840981">!=</span>&nbsp;<span class="builtintype" id="6840984">nil</span>&nbsp;<span class="op" id="6840988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6840992">panic</span><span class="op" id="6840997">(</span><span class="string" id="6840998">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="6841022">+</span>&nbsp;<span class="ident" id="6841024">err</span><span class="op" id="6841027">.</span><span class="ident" id="6841028">Error</span><span class="op" id="6841033">(</span><span class="op" id="6841034">)</span><span class="op" id="6841035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841042">if</span>&nbsp;<span class="ident" id="6841045">data</span><span class="op" id="6841049">,</span>&nbsp;<span class="ident" id="6841051">err</span>&nbsp;<span class="op" id="6841055">=</span>&nbsp;<span class="ident" id="6841057">Marshal</span><span class="op" id="6841064">(</span><span class="op" id="6841065">&amp;</span><span class="ident" id="6841066">codeStruct</span><span class="op" id="6841076">)</span><span class="op" id="6841077">;</span>&nbsp;<span class="ident" id="6841079">err</span>&nbsp;<span class="op" id="6841083">!=</span>&nbsp;<span class="builtintype" id="6841086">nil</span>&nbsp;<span class="op" id="6841090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841094">panic</span><span class="op" id="6841099">(</span><span class="string" id="6841100">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="6841122">+</span>&nbsp;<span class="ident" id="6841124">err</span><span class="op" id="6841127">.</span><span class="ident" id="6841128">Error</span><span class="op" id="6841133">(</span><span class="op" id="6841134">)</span><span class="op" id="6841135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841142">if</span>&nbsp;<span class="op" id="6841145">!</span><span class="ident" id="6841146">bytes</span><span class="op" id="6841151">.</span><span class="ident" id="6841152">Equal</span><span class="op" id="6841157">(</span><span class="ident" id="6841158">data</span><span class="op" id="6841162">,</span>&nbsp;<span class="ident" id="6841164">codeJSON</span><span class="op" id="6841172">)</span>&nbsp;<span class="op" id="6841174">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841178">println</span><span class="op" id="6841185">(</span><span class="string" id="6841186">&#34;different&nbsp;lengths&#34;</span><span class="op" id="6841205">,</span>&nbsp;<span class="builtinfunc" id="6841207">len</span><span class="op" id="6841210">(</span><span class="ident" id="6841211">data</span><span class="op" id="6841215">)</span><span class="op" id="6841216">,</span>&nbsp;<span class="builtinfunc" id="6841218">len</span><span class="op" id="6841221">(</span><span class="ident" id="6841222">codeJSON</span><span class="op" id="6841230">)</span><span class="op" id="6841231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841235">for</span>&nbsp;<span class="ident" id="6841239">i</span>&nbsp;<span class="op" id="6841241">:=</span>&nbsp;<span class="num" id="6841244">0</span><span class="op" id="6841245">;</span>&nbsp;<span class="ident" id="6841247">i</span>&nbsp;<span class="op" id="6841249">&lt;</span>&nbsp;<span class="builtinfunc" id="6841251">len</span><span class="op" id="6841254">(</span><span class="ident" id="6841255">data</span><span class="op" id="6841259">)</span>&nbsp;<span class="op" id="6841261">&amp;&amp;</span>&nbsp;<span class="ident" id="6841264">i</span>&nbsp;<span class="op" id="6841266">&lt;</span>&nbsp;<span class="builtinfunc" id="6841268">len</span><span class="op" id="6841271">(</span><span class="ident" id="6841272">codeJSON</span><span class="op" id="6841280">)</span><span class="op" id="6841281">;</span>&nbsp;<span class="ident" id="6841283">i</span><span class="op" id="6841284">++</span>&nbsp;<span class="op" id="6841287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841292">if</span>&nbsp;<span class="ident" id="6841295">data</span><span class="op" id="6841299">[</span><span class="ident" id="6841300">i</span><span class="op" id="6841301">]</span>&nbsp;<span class="op" id="6841303">!=</span>&nbsp;<span class="ident" id="6841306">codeJSON</span><span class="op" id="6841314">[</span><span class="ident" id="6841315">i</span><span class="op" id="6841316">]</span>&nbsp;<span class="op" id="6841318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841324">println</span><span class="op" id="6841331">(</span><span class="string" id="6841332">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="6841361">,</span>&nbsp;<span class="ident" id="6841363">i</span><span class="op" id="6841364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841370">println</span><span class="op" id="6841377">(</span><span class="string" id="6841378">&#34;orig:&nbsp;&#34;</span><span class="op" id="6841386">,</span>&nbsp;<span class="builtintype" id="6841388">string</span><span class="op" id="6841394">(</span><span class="ident" id="6841395">codeJSON</span><span class="op" id="6841403">[</span><span class="ident" id="6841404">i</span><span class="op" id="6841405">-</span><span class="num" id="6841406">10</span><span class="op" id="6841408">:</span><span class="ident" id="6841409">i</span><span class="op" id="6841410">+</span><span class="num" id="6841411">10</span><span class="op" id="6841413">]</span><span class="op" id="6841414">)</span><span class="op" id="6841415">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841421">println</span><span class="op" id="6841428">(</span><span class="string" id="6841429">&#34;new:&nbsp;&#34;</span><span class="op" id="6841436">,</span>&nbsp;<span class="builtintype" id="6841438">string</span><span class="op" id="6841444">(</span><span class="ident" id="6841445">data</span><span class="op" id="6841449">[</span><span class="ident" id="6841450">i</span><span class="op" id="6841451">-</span><span class="num" id="6841452">10</span><span class="op" id="6841454">:</span><span class="ident" id="6841455">i</span><span class="op" id="6841456">+</span><span class="num" id="6841457">10</span><span class="op" id="6841459">]</span><span class="op" id="6841460">)</span><span class="op" id="6841461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841467">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6841484">panic</span><span class="op" id="6841489">(</span><span class="string" id="6841490">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="6841530">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841533">}</span><br>
<span class="lineno"></span><span class="op" id="6841535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6841538">func</span>&nbsp;<span class="ident" id="6841543">BenchmarkCodeEncoder</span><span class="op" id="6841563">(</span><span class="ident" id="6841564">b</span>&nbsp;<span class="op" id="6841566">*</span><span class="ident" id="6841567">testing</span><span class="op" id="6841574">.</span><span class="ident" id="6841575">B</span><span class="op" id="6841576">)</span>&nbsp;<span class="op" id="6841578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841581">if</span>&nbsp;<span class="ident" id="6841584">codeJSON</span>&nbsp;<span class="op" id="6841593">==</span>&nbsp;<span class="builtintype" id="6841596">nil</span>&nbsp;<span class="op" id="6841600">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841604">b</span><span class="op" id="6841605">.</span><span class="ident" id="6841606">StopTimer</span><span class="op" id="6841615">(</span><span class="op" id="6841616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841620">codeInit</span><span class="op" id="6841628">(</span><span class="op" id="6841629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841633">b</span><span class="op" id="6841634">.</span><span class="ident" id="6841635">StartTimer</span><span class="op" id="6841645">(</span><span class="op" id="6841646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841652">enc</span>&nbsp;<span class="op" id="6841656">:=</span>&nbsp;<span class="ident" id="6841659">NewEncoder</span><span class="op" id="6841669">(</span><span class="ident" id="6841670">ioutil</span><span class="op" id="6841676">.</span><span class="ident" id="6841677">Discard</span><span class="op" id="6841684">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841687">for</span>&nbsp;<span class="ident" id="6841691">i</span>&nbsp;<span class="op" id="6841693">:=</span>&nbsp;<span class="num" id="6841696">0</span><span class="op" id="6841697">;</span>&nbsp;<span class="ident" id="6841699">i</span>&nbsp;<span class="op" id="6841701">&lt;</span>&nbsp;<span class="ident" id="6841703">b</span><span class="op" id="6841704">.</span><span class="ident" id="6841705">N</span><span class="op" id="6841706">;</span>&nbsp;<span class="ident" id="6841708">i</span><span class="op" id="6841709">++</span>&nbsp;<span class="op" id="6841712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841716">if</span>&nbsp;<span class="ident" id="6841719">err</span>&nbsp;<span class="op" id="6841723">:=</span>&nbsp;<span class="ident" id="6841726">enc</span><span class="op" id="6841729">.</span><span class="ident" id="6841730">Encode</span><span class="op" id="6841736">(</span><span class="op" id="6841737">&amp;</span><span class="ident" id="6841738">codeStruct</span><span class="op" id="6841748">)</span><span class="op" id="6841749">;</span>&nbsp;<span class="ident" id="6841751">err</span>&nbsp;<span class="op" id="6841755">!=</span>&nbsp;<span class="builtintype" id="6841758">nil</span>&nbsp;<span class="op" id="6841762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841767">b</span><span class="op" id="6841768">.</span><span class="ident" id="6841769">Fatal</span><span class="op" id="6841774">(</span><span class="string" id="6841775">&#34;Encode:&#34;</span><span class="op" id="6841784">,</span>&nbsp;<span class="ident" id="6841786">err</span><span class="op" id="6841789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841796">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841799">b</span><span class="op" id="6841800">.</span><span class="ident" id="6841801">SetBytes</span><span class="op" id="6841809">(</span><span class="ident" id="6841810">int64</span><span class="op" id="6841815">(</span><span class="builtinfunc" id="6841816">len</span><span class="op" id="6841819">(</span><span class="ident" id="6841820">codeJSON</span><span class="op" id="6841828">)</span><span class="op" id="6841829">)</span><span class="op" id="6841830">)</span><br>
<span class="lineno"></span><span class="op" id="6841832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6841835">func</span>&nbsp;<span class="ident" id="6841840">BenchmarkCodeMarshal</span><span class="op" id="6841860">(</span><span class="ident" id="6841861">b</span>&nbsp;<span class="op" id="6841863">*</span><span class="ident" id="6841864">testing</span><span class="op" id="6841871">.</span><span class="ident" id="6841872">B</span><span class="op" id="6841873">)</span>&nbsp;<span class="op" id="6841875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841878">if</span>&nbsp;<span class="ident" id="6841881">codeJSON</span>&nbsp;<span class="op" id="6841890">==</span>&nbsp;<span class="builtintype" id="6841893">nil</span>&nbsp;<span class="op" id="6841897">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841901">b</span><span class="op" id="6841902">.</span><span class="ident" id="6841903">StopTimer</span><span class="op" id="6841912">(</span><span class="op" id="6841913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841917">codeInit</span><span class="op" id="6841925">(</span><span class="op" id="6841926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6841930">b</span><span class="op" id="6841931">.</span><span class="ident" id="6841932">StartTimer</span><span class="op" id="6841942">(</span><span class="op" id="6841943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6841946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841949">for</span>&nbsp;<span class="ident" id="6841953">i</span>&nbsp;<span class="op" id="6841955">:=</span>&nbsp;<span class="num" id="6841958">0</span><span class="op" id="6841959">;</span>&nbsp;<span class="ident" id="6841961">i</span>&nbsp;<span class="op" id="6841963">&lt;</span>&nbsp;<span class="ident" id="6841965">b</span><span class="op" id="6841966">.</span><span class="ident" id="6841967">N</span><span class="op" id="6841968">;</span>&nbsp;<span class="ident" id="6841970">i</span><span class="op" id="6841971">++</span>&nbsp;<span class="op" id="6841974">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6841978">if</span>&nbsp;<span class="ident" id="6841981">_</span><span class="op" id="6841982">,</span>&nbsp;<span class="ident" id="6841984">err</span>&nbsp;<span class="op" id="6841988">:=</span>&nbsp;<span class="ident" id="6841991">Marshal</span><span class="op" id="6841998">(</span><span class="op" id="6841999">&amp;</span><span class="ident" id="6842000">codeStruct</span><span class="op" id="6842010">)</span><span class="op" id="6842011">;</span>&nbsp;<span class="ident" id="6842013">err</span>&nbsp;<span class="op" id="6842017">!=</span>&nbsp;<span class="builtintype" id="6842020">nil</span>&nbsp;<span class="op" id="6842024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842029">b</span><span class="op" id="6842030">.</span><span class="ident" id="6842031">Fatal</span><span class="op" id="6842036">(</span><span class="string" id="6842037">&#34;Marshal:&#34;</span><span class="op" id="6842047">,</span>&nbsp;<span class="ident" id="6842049">err</span><span class="op" id="6842052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842062">b</span><span class="op" id="6842063">.</span><span class="ident" id="6842064">SetBytes</span><span class="op" id="6842072">(</span><span class="ident" id="6842073">int64</span><span class="op" id="6842078">(</span><span class="builtinfunc" id="6842079">len</span><span class="op" id="6842082">(</span><span class="ident" id="6842083">codeJSON</span><span class="op" id="6842091">)</span><span class="op" id="6842092">)</span><span class="op" id="6842093">)</span><br>
<span class="lineno">105</span><span class="op" id="6842095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6842098">func</span>&nbsp;<span class="ident" id="6842103">BenchmarkCodeDecoder</span><span class="op" id="6842123">(</span><span class="ident" id="6842124">b</span>&nbsp;<span class="op" id="6842126">*</span><span class="ident" id="6842127">testing</span><span class="op" id="6842134">.</span><span class="ident" id="6842135">B</span><span class="op" id="6842136">)</span>&nbsp;<span class="op" id="6842138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842141">if</span>&nbsp;<span class="ident" id="6842144">codeJSON</span>&nbsp;<span class="op" id="6842153">==</span>&nbsp;<span class="builtintype" id="6842156">nil</span>&nbsp;<span class="op" id="6842160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842164">b</span><span class="op" id="6842165">.</span><span class="ident" id="6842166">StopTimer</span><span class="op" id="6842175">(</span><span class="op" id="6842176">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842180">codeInit</span><span class="op" id="6842188">(</span><span class="op" id="6842189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842193">b</span><span class="op" id="6842194">.</span><span class="ident" id="6842195">StartTimer</span><span class="op" id="6842205">(</span><span class="op" id="6842206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842212">var</span>&nbsp;<span class="ident" id="6842216">buf</span>&nbsp;<span class="ident" id="6842220">bytes</span><span class="op" id="6842225">.</span><span class="ident" id="6842226">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842234">dec</span>&nbsp;<span class="op" id="6842238">:=</span>&nbsp;<span class="ident" id="6842241">NewDecoder</span><span class="op" id="6842251">(</span><span class="op" id="6842252">&amp;</span><span class="ident" id="6842253">buf</span><span class="op" id="6842256">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842259">var</span>&nbsp;<span class="ident" id="6842263">r</span>&nbsp;<span class="ident" id="6842265">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842279">for</span>&nbsp;<span class="ident" id="6842283">i</span>&nbsp;<span class="op" id="6842285">:=</span>&nbsp;<span class="num" id="6842288">0</span><span class="op" id="6842289">;</span>&nbsp;<span class="ident" id="6842291">i</span>&nbsp;<span class="op" id="6842293">&lt;</span>&nbsp;<span class="ident" id="6842295">b</span><span class="op" id="6842296">.</span><span class="ident" id="6842297">N</span><span class="op" id="6842298">;</span>&nbsp;<span class="ident" id="6842300">i</span><span class="op" id="6842301">++</span>&nbsp;<span class="op" id="6842304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842308">buf</span><span class="op" id="6842311">.</span><span class="ident" id="6842312">Write</span><span class="op" id="6842317">(</span><span class="ident" id="6842318">codeJSON</span><span class="op" id="6842326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6842330">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842344">buf</span><span class="op" id="6842347">.</span><span class="ident" id="6842348">WriteByte</span><span class="op" id="6842357">(</span><span class="string" id="6842358">&#39;\n&#39;</span><span class="op" id="6842362">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842366">buf</span><span class="op" id="6842369">.</span><span class="ident" id="6842370">WriteByte</span><span class="op" id="6842379">(</span><span class="string" id="6842380">&#39;\n&#39;</span><span class="op" id="6842384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842388">buf</span><span class="op" id="6842391">.</span><span class="ident" id="6842392">WriteByte</span><span class="op" id="6842401">(</span><span class="string" id="6842402">&#39;\n&#39;</span><span class="op" id="6842406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842410">if</span>&nbsp;<span class="ident" id="6842413">err</span>&nbsp;<span class="op" id="6842417">:=</span>&nbsp;<span class="ident" id="6842420">dec</span><span class="op" id="6842423">.</span><span class="ident" id="6842424">Decode</span><span class="op" id="6842430">(</span><span class="op" id="6842431">&amp;</span><span class="ident" id="6842432">r</span><span class="op" id="6842433">)</span><span class="op" id="6842434">;</span>&nbsp;<span class="ident" id="6842436">err</span>&nbsp;<span class="op" id="6842440">!=</span>&nbsp;<span class="builtintype" id="6842443">nil</span>&nbsp;<span class="op" id="6842447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842452">b</span><span class="op" id="6842453">.</span><span class="ident" id="6842454">Fatal</span><span class="op" id="6842459">(</span><span class="string" id="6842460">&#34;Decode:&#34;</span><span class="op" id="6842469">,</span>&nbsp;<span class="ident" id="6842471">err</span><span class="op" id="6842474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842478">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842484">b</span><span class="op" id="6842485">.</span><span class="ident" id="6842486">SetBytes</span><span class="op" id="6842494">(</span><span class="ident" id="6842495">int64</span><span class="op" id="6842500">(</span><span class="builtinfunc" id="6842501">len</span><span class="op" id="6842504">(</span><span class="ident" id="6842505">codeJSON</span><span class="op" id="6842513">)</span><span class="op" id="6842514">)</span><span class="op" id="6842515">)</span><br>
<span class="lineno"></span><span class="op" id="6842517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6842520">func</span>&nbsp;<span class="ident" id="6842525">BenchmarkCodeUnmarshal</span><span class="op" id="6842547">(</span><span class="ident" id="6842548">b</span>&nbsp;<span class="op" id="6842550">*</span><span class="ident" id="6842551">testing</span><span class="op" id="6842558">.</span><span class="ident" id="6842559">B</span><span class="op" id="6842560">)</span>&nbsp;<span class="op" id="6842562">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842565">if</span>&nbsp;<span class="ident" id="6842568">codeJSON</span>&nbsp;<span class="op" id="6842577">==</span>&nbsp;<span class="builtintype" id="6842580">nil</span>&nbsp;<span class="op" id="6842584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842588">b</span><span class="op" id="6842589">.</span><span class="ident" id="6842590">StopTimer</span><span class="op" id="6842599">(</span><span class="op" id="6842600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842604">codeInit</span><span class="op" id="6842612">(</span><span class="op" id="6842613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842617">b</span><span class="op" id="6842618">.</span><span class="ident" id="6842619">StartTimer</span><span class="op" id="6842629">(</span><span class="op" id="6842630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842633">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842636">for</span>&nbsp;<span class="ident" id="6842640">i</span>&nbsp;<span class="op" id="6842642">:=</span>&nbsp;<span class="num" id="6842645">0</span><span class="op" id="6842646">;</span>&nbsp;<span class="ident" id="6842648">i</span>&nbsp;<span class="op" id="6842650">&lt;</span>&nbsp;<span class="ident" id="6842652">b</span><span class="op" id="6842653">.</span><span class="ident" id="6842654">N</span><span class="op" id="6842655">;</span>&nbsp;<span class="ident" id="6842657">i</span><span class="op" id="6842658">++</span>&nbsp;<span class="op" id="6842661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842665">var</span>&nbsp;<span class="ident" id="6842669">r</span>&nbsp;<span class="ident" id="6842671">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842686">if</span>&nbsp;<span class="ident" id="6842689">err</span>&nbsp;<span class="op" id="6842693">:=</span>&nbsp;<span class="ident" id="6842696">Unmarshal</span><span class="op" id="6842705">(</span><span class="ident" id="6842706">codeJSON</span><span class="op" id="6842714">,</span>&nbsp;<span class="op" id="6842716">&amp;</span><span class="ident" id="6842717">r</span><span class="op" id="6842718">)</span><span class="op" id="6842719">;</span>&nbsp;<span class="ident" id="6842721">err</span>&nbsp;<span class="op" id="6842725">!=</span>&nbsp;<span class="builtintype" id="6842728">nil</span>&nbsp;<span class="op" id="6842732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842737">b</span><span class="op" id="6842738">.</span><span class="ident" id="6842739">Fatal</span><span class="op" id="6842744">(</span><span class="string" id="6842745">&#34;Unmmarshal:&#34;</span><span class="op" id="6842758">,</span>&nbsp;<span class="ident" id="6842760">err</span><span class="op" id="6842763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842767">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842773">b</span><span class="op" id="6842774">.</span><span class="ident" id="6842775">SetBytes</span><span class="op" id="6842783">(</span><span class="ident" id="6842784">int64</span><span class="op" id="6842789">(</span><span class="builtinfunc" id="6842790">len</span><span class="op" id="6842793">(</span><span class="ident" id="6842794">codeJSON</span><span class="op" id="6842802">)</span><span class="op" id="6842803">)</span><span class="op" id="6842804">)</span><br>
<span class="lineno"></span><span class="op" id="6842806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6842809">func</span>&nbsp;<span class="ident" id="6842814">BenchmarkCodeUnmarshalReuse</span><span class="op" id="6842841">(</span><span class="ident" id="6842842">b</span>&nbsp;<span class="op" id="6842844">*</span><span class="ident" id="6842845">testing</span><span class="op" id="6842852">.</span><span class="ident" id="6842853">B</span><span class="op" id="6842854">)</span>&nbsp;<span class="op" id="6842856">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842859">if</span>&nbsp;<span class="ident" id="6842862">codeJSON</span>&nbsp;<span class="op" id="6842871">==</span>&nbsp;<span class="builtintype" id="6842874">nil</span>&nbsp;<span class="op" id="6842878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842882">b</span><span class="op" id="6842883">.</span><span class="ident" id="6842884">StopTimer</span><span class="op" id="6842893">(</span><span class="op" id="6842894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842898">codeInit</span><span class="op" id="6842906">(</span><span class="op" id="6842907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6842911">b</span><span class="op" id="6842912">.</span><span class="ident" id="6842913">StartTimer</span><span class="op" id="6842923">(</span><span class="op" id="6842924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6842927">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842930">var</span>&nbsp;<span class="ident" id="6842934">r</span>&nbsp;<span class="ident" id="6842936">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842950">for</span>&nbsp;<span class="ident" id="6842954">i</span>&nbsp;<span class="op" id="6842956">:=</span>&nbsp;<span class="num" id="6842959">0</span><span class="op" id="6842960">;</span>&nbsp;<span class="ident" id="6842962">i</span>&nbsp;<span class="op" id="6842964">&lt;</span>&nbsp;<span class="ident" id="6842966">b</span><span class="op" id="6842967">.</span><span class="ident" id="6842968">N</span><span class="op" id="6842969">;</span>&nbsp;<span class="ident" id="6842971">i</span><span class="op" id="6842972">++</span>&nbsp;<span class="op" id="6842975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6842979">if</span>&nbsp;<span class="ident" id="6842982">err</span>&nbsp;<span class="op" id="6842986">:=</span>&nbsp;<span class="ident" id="6842989">Unmarshal</span><span class="op" id="6842998">(</span><span class="ident" id="6842999">codeJSON</span><span class="op" id="6843007">,</span>&nbsp;<span class="op" id="6843009">&amp;</span><span class="ident" id="6843010">r</span><span class="op" id="6843011">)</span><span class="op" id="6843012">;</span>&nbsp;<span class="ident" id="6843014">err</span>&nbsp;<span class="op" id="6843018">!=</span>&nbsp;<span class="builtintype" id="6843021">nil</span>&nbsp;<span class="op" id="6843025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843030">b</span><span class="op" id="6843031">.</span><span class="ident" id="6843032">Fatal</span><span class="op" id="6843037">(</span><span class="string" id="6843038">&#34;Unmmarshal:&#34;</span><span class="op" id="6843051">,</span>&nbsp;<span class="ident" id="6843053">err</span><span class="op" id="6843056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843060">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843063">}</span><br>
<span class="lineno"></span><span class="op" id="6843065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6843068">func</span>&nbsp;<span class="ident" id="6843073">BenchmarkUnmarshalString</span><span class="op" id="6843097">(</span><span class="ident" id="6843098">b</span>&nbsp;<span class="op" id="6843100">*</span><span class="ident" id="6843101">testing</span><span class="op" id="6843108">.</span><span class="ident" id="6843109">B</span><span class="op" id="6843110">)</span>&nbsp;<span class="op" id="6843112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843115">data</span>&nbsp;<span class="op" id="6843120">:=</span>&nbsp;<span class="op" id="6843123">[</span><span class="op" id="6843124">]</span><span class="builtintype" id="6843125">byte</span><span class="op" id="6843129">(</span><span class="string" id="6843130">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="6843146">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843149">var</span>&nbsp;<span class="ident" id="6843153">s</span>&nbsp;<span class="builtintype" id="6843155">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843164">for</span>&nbsp;<span class="ident" id="6843168">i</span>&nbsp;<span class="op" id="6843170">:=</span>&nbsp;<span class="num" id="6843173">0</span><span class="op" id="6843174">;</span>&nbsp;<span class="ident" id="6843176">i</span>&nbsp;<span class="op" id="6843178">&lt;</span>&nbsp;<span class="ident" id="6843180">b</span><span class="op" id="6843181">.</span><span class="ident" id="6843182">N</span><span class="op" id="6843183">;</span>&nbsp;<span class="ident" id="6843185">i</span><span class="op" id="6843186">++</span>&nbsp;<span class="op" id="6843189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843193">if</span>&nbsp;<span class="ident" id="6843196">err</span>&nbsp;<span class="op" id="6843200">:=</span>&nbsp;<span class="ident" id="6843203">Unmarshal</span><span class="op" id="6843212">(</span><span class="ident" id="6843213">data</span><span class="op" id="6843217">,</span>&nbsp;<span class="op" id="6843219">&amp;</span><span class="ident" id="6843220">s</span><span class="op" id="6843221">)</span><span class="op" id="6843222">;</span>&nbsp;<span class="ident" id="6843224">err</span>&nbsp;<span class="op" id="6843228">!=</span>&nbsp;<span class="builtintype" id="6843231">nil</span>&nbsp;<span class="op" id="6843235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843240">b</span><span class="op" id="6843241">.</span><span class="ident" id="6843242">Fatal</span><span class="op" id="6843247">(</span><span class="string" id="6843248">&#34;Unmarshal:&#34;</span><span class="op" id="6843260">,</span>&nbsp;<span class="ident" id="6843262">err</span><span class="op" id="6843265">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843272">}</span><br>
<span class="lineno"></span><span class="op" id="6843274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6843277">func</span>&nbsp;<span class="ident" id="6843282">BenchmarkUnmarshalFloat64</span><span class="op" id="6843307">(</span><span class="ident" id="6843308">b</span>&nbsp;<span class="op" id="6843310">*</span><span class="ident" id="6843311">testing</span><span class="op" id="6843318">.</span><span class="ident" id="6843319">B</span><span class="op" id="6843320">)</span>&nbsp;<span class="op" id="6843322">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843325">var</span>&nbsp;<span class="ident" id="6843329">f</span>&nbsp;<span class="builtintype" id="6843331">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843340">data</span>&nbsp;<span class="op" id="6843345">:=</span>&nbsp;<span class="op" id="6843348">[</span><span class="op" id="6843349">]</span><span class="builtintype" id="6843350">byte</span><span class="op" id="6843354">(</span><span class="string" id="6843355">`3.14`</span><span class="op" id="6843361">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843365">for</span>&nbsp;<span class="ident" id="6843369">i</span>&nbsp;<span class="op" id="6843371">:=</span>&nbsp;<span class="num" id="6843374">0</span><span class="op" id="6843375">;</span>&nbsp;<span class="ident" id="6843377">i</span>&nbsp;<span class="op" id="6843379">&lt;</span>&nbsp;<span class="ident" id="6843381">b</span><span class="op" id="6843382">.</span><span class="ident" id="6843383">N</span><span class="op" id="6843384">;</span>&nbsp;<span class="ident" id="6843386">i</span><span class="op" id="6843387">++</span>&nbsp;<span class="op" id="6843390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843394">if</span>&nbsp;<span class="ident" id="6843397">err</span>&nbsp;<span class="op" id="6843401">:=</span>&nbsp;<span class="ident" id="6843404">Unmarshal</span><span class="op" id="6843413">(</span><span class="ident" id="6843414">data</span><span class="op" id="6843418">,</span>&nbsp;<span class="op" id="6843420">&amp;</span><span class="ident" id="6843421">f</span><span class="op" id="6843422">)</span><span class="op" id="6843423">;</span>&nbsp;<span class="ident" id="6843425">err</span>&nbsp;<span class="op" id="6843429">!=</span>&nbsp;<span class="builtintype" id="6843432">nil</span>&nbsp;<span class="op" id="6843436">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843441">b</span><span class="op" id="6843442">.</span><span class="ident" id="6843443">Fatal</span><span class="op" id="6843448">(</span><span class="string" id="6843449">&#34;Unmarshal:&#34;</span><span class="op" id="6843461">,</span>&nbsp;<span class="ident" id="6843463">err</span><span class="op" id="6843466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843473">}</span><br>
<span class="lineno"></span><span class="op" id="6843475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="6843478">func</span>&nbsp;<span class="ident" id="6843483">BenchmarkUnmarshalInt64</span><span class="op" id="6843506">(</span><span class="ident" id="6843507">b</span>&nbsp;<span class="op" id="6843509">*</span><span class="ident" id="6843510">testing</span><span class="op" id="6843517">.</span><span class="ident" id="6843518">B</span><span class="op" id="6843519">)</span>&nbsp;<span class="op" id="6843521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843524">var</span>&nbsp;<span class="ident" id="6843528">x</span>&nbsp;<span class="ident" id="6843530">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843537">data</span>&nbsp;<span class="op" id="6843542">:=</span>&nbsp;<span class="op" id="6843545">[</span><span class="op" id="6843546">]</span><span class="builtintype" id="6843547">byte</span><span class="op" id="6843551">(</span><span class="string" id="6843552">`3`</span><span class="op" id="6843555">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843559">for</span>&nbsp;<span class="ident" id="6843563">i</span>&nbsp;<span class="op" id="6843565">:=</span>&nbsp;<span class="num" id="6843568">0</span><span class="op" id="6843569">;</span>&nbsp;<span class="ident" id="6843571">i</span>&nbsp;<span class="op" id="6843573">&lt;</span>&nbsp;<span class="ident" id="6843575">b</span><span class="op" id="6843576">.</span><span class="ident" id="6843577">N</span><span class="op" id="6843578">;</span>&nbsp;<span class="ident" id="6843580">i</span><span class="op" id="6843581">++</span>&nbsp;<span class="op" id="6843584">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6843588">if</span>&nbsp;<span class="ident" id="6843591">err</span>&nbsp;<span class="op" id="6843595">:=</span>&nbsp;<span class="ident" id="6843598">Unmarshal</span><span class="op" id="6843607">(</span><span class="ident" id="6843608">data</span><span class="op" id="6843612">,</span>&nbsp;<span class="op" id="6843614">&amp;</span><span class="ident" id="6843615">x</span><span class="op" id="6843616">)</span><span class="op" id="6843617">;</span>&nbsp;<span class="ident" id="6843619">err</span>&nbsp;<span class="op" id="6843623">!=</span>&nbsp;<span class="builtintype" id="6843626">nil</span>&nbsp;<span class="op" id="6843630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6843635">b</span><span class="op" id="6843636">.</span><span class="ident" id="6843637">Fatal</span><span class="op" id="6843642">(</span><span class="string" id="6843643">&#34;Unmarshal:&#34;</span><span class="op" id="6843655">,</span>&nbsp;<span class="ident" id="6843657">err</span><span class="op" id="6843660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6843667">}</span><br>
<span class="lineno"></span><span class="op" id="6843669">}</span>
</div>
</body>
</html>
