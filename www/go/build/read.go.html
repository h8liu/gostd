<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5846743">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5846799">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5846853">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5846904">package</span>&nbsp;<span class="ident" id="5846912">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5846919">import</span>&nbsp;<span class="op" id="5846926">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5846929">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5846938">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5846948">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5846953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5846956">type</span>&nbsp;<span class="ident" id="5846961">importReader</span>&nbsp;<span class="keyword" id="5846974">struct</span>&nbsp;<span class="op" id="5846981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5846984">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846989">*</span><span class="ident" id="5846990"><a href="/go/build/read.go.html#5846929">bufio</a></span><span class="op" id="5846995">.</span><span class="ident" id="5846996">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847004">buf</span>&nbsp;&nbsp;<span class="op" id="5847009">[</span><span class="op" id="5847010">]</span><span class="builtintype" id="5847011">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847017">peek</span>&nbsp;<span class="builtintype" id="5847022">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847028">err</span>&nbsp;&nbsp;<span class="builtintype" id="5847033">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847040">eof</span>&nbsp;&nbsp;<span class="builtintype" id="5847045">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847051">nerr</span>&nbsp;<span class="builtintype" id="5847056">int</span><br>
<span class="lineno">20</span><span class="op" id="5847060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5847063">func</span>&nbsp;<span class="ident" id="5847068">isIdent</span><span class="op" id="5847075">(</span><span class="ident" id="5847076">c</span>&nbsp;<span class="builtintype" id="5847078">byte</span><span class="op" id="5847082">)</span>&nbsp;<span class="builtintype" id="5847084">bool</span>&nbsp;<span class="op" id="5847089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847092">return</span>&nbsp;<span class="string" id="5847099">&#39;A&#39;</span>&nbsp;<span class="op" id="5847103">&lt;=</span>&nbsp;<span class="ident" id="5847106"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847108">&amp;&amp;</span>&nbsp;<span class="ident" id="5847111"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847113">&lt;=</span>&nbsp;<span class="string" id="5847116">&#39;Z&#39;</span>&nbsp;<span class="op" id="5847120">||</span>&nbsp;<span class="string" id="5847123">&#39;a&#39;</span>&nbsp;<span class="op" id="5847127">&lt;=</span>&nbsp;<span class="ident" id="5847130"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847132">&amp;&amp;</span>&nbsp;<span class="ident" id="5847135"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847137">&lt;=</span>&nbsp;<span class="string" id="5847140">&#39;z&#39;</span>&nbsp;<span class="op" id="5847144">||</span>&nbsp;<span class="string" id="5847147">&#39;0&#39;</span>&nbsp;<span class="op" id="5847151">&lt;=</span>&nbsp;<span class="ident" id="5847154"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847156">&amp;&amp;</span>&nbsp;<span class="ident" id="5847159"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847161">&lt;=</span>&nbsp;<span class="string" id="5847164">&#39;9&#39;</span>&nbsp;<span class="op" id="5847168">||</span>&nbsp;<span class="ident" id="5847171"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847173">==</span>&nbsp;<span class="string" id="5847176">&#39;_&#39;</span>&nbsp;<span class="op" id="5847180">||</span>&nbsp;<span class="ident" id="5847183"><a href="/go/build/read.go.html#5847076">c</a></span>&nbsp;<span class="op" id="5847185">&gt;=</span>&nbsp;<span class="num" id="5847188">0x80</span><br>
<span class="lineno"></span><span class="op" id="5847193">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5847196">var</span>&nbsp;<span class="op" id="5847200">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847203">errSyntax</span>&nbsp;<span class="op" id="5847213">=</span>&nbsp;<span class="ident" id="5847215"><a href="/go/build/read.go.html#5846938">errors</a></span><span class="op" id="5847221">.</span><span class="ident" id="5847222">New</span><span class="op" id="5847225">(</span><span class="string" id="5847226">&#34;syntax&nbsp;error&#34;</span><span class="op" id="5847240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847243">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847253">=</span>&nbsp;<span class="ident" id="5847255"><a href="/go/build/read.go.html#5846938">errors</a></span><span class="op" id="5847261">.</span><span class="ident" id="5847262">New</span><span class="op" id="5847265">(</span><span class="string" id="5847266">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="5847291">)</span><br>
<span class="lineno"></span><span class="op" id="5847293">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5847296">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="5847391">func</span>&nbsp;<span class="op" id="5847396">(</span><span class="ident" id="5847397">r</span>&nbsp;<span class="op" id="5847399">*</span><span class="ident" id="5847400"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5847412">)</span>&nbsp;<span class="ident" id="5847414">syntaxError</span><span class="op" id="5847425">(</span><span class="op" id="5847426">)</span>&nbsp;<span class="op" id="5847428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847431">if</span>&nbsp;<span class="ident" id="5847434"><a href="/go/build/read.go.html#5847397">r</a></span><span class="op" id="5847435">.</span><span class="ident" id="5847436">err</span>&nbsp;<span class="op" id="5847440">==</span>&nbsp;<span class="ident" id="5847443">nil</span>&nbsp;<span class="op" id="5847447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847451"><a href="/go/build/read.go.html#5847397">r</a></span><span class="op" id="5847452">.</span><span class="ident" id="5847453">err</span>&nbsp;<span class="op" id="5847457">=</span>&nbsp;<span class="ident" id="5847459"><a href="/go/build/read.go.html#5847203">errSyntax</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847470">}</span><br>
<span class="lineno"></span><span class="op" id="5847472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5847475">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5847556">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="5847630">func</span>&nbsp;<span class="op" id="5847635">(</span><span class="ident" id="5847636">r</span>&nbsp;<span class="op" id="5847638">*</span><span class="ident" id="5847639"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5847651">)</span>&nbsp;<span class="ident" id="5847653">readByte</span><span class="op" id="5847661">(</span><span class="op" id="5847662">)</span>&nbsp;<span class="builtintype" id="5847664">byte</span>&nbsp;<span class="op" id="5847669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847672">c</span><span class="op" id="5847673">,</span>&nbsp;<span class="ident" id="5847675">err</span>&nbsp;<span class="op" id="5847679">:=</span>&nbsp;<span class="ident" id="5847682"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847683">.</span><span class="ident" id="5847684">b</span><span class="op" id="5847685">.</span><span class="ident" id="5847686">ReadByte</span><span class="op" id="5847694">(</span><span class="op" id="5847695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847698">if</span>&nbsp;<span class="ident" id="5847701"><a href="/go/build/read.go.html#5847675">err</a></span>&nbsp;<span class="op" id="5847705">==</span>&nbsp;<span class="ident" id="5847708">nil</span>&nbsp;<span class="op" id="5847712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847716"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847717">.</span><span class="ident" id="5847718">buf</span>&nbsp;<span class="op" id="5847722">=</span>&nbsp;<span class="builtinfunc" id="5847724">append</span><span class="op" id="5847730">(</span><span class="ident" id="5847731"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847732">.</span><span class="ident" id="5847733">buf</span><span class="op" id="5847736">,</span>&nbsp;<span class="ident" id="5847738"><a href="/go/build/read.go.html#5847672">c</a></span><span class="op" id="5847739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847743">if</span>&nbsp;<span class="ident" id="5847746"><a href="/go/build/read.go.html#5847672">c</a></span>&nbsp;<span class="op" id="5847748">==</span>&nbsp;<span class="num" id="5847751">0</span>&nbsp;<span class="op" id="5847753">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847758"><a href="/go/build/read.go.html#5847675">err</a></span>&nbsp;<span class="op" id="5847762">=</span>&nbsp;<span class="ident" id="5847764"><a href="/go/build/read.go.html#5847243">errNUL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847779">if</span>&nbsp;<span class="ident" id="5847782"><a href="/go/build/read.go.html#5847675">err</a></span>&nbsp;<span class="op" id="5847786">!=</span>&nbsp;<span class="ident" id="5847789">nil</span>&nbsp;<span class="op" id="5847793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847797">if</span>&nbsp;<span class="ident" id="5847800"><a href="/go/build/read.go.html#5847675">err</a></span>&nbsp;<span class="op" id="5847804">==</span>&nbsp;<span class="ident" id="5847807"><a href="/go/build/read.go.html#5846948">io</a></span><span class="op" id="5847809">.</span><span class="ident" id="5847810">EOF</span>&nbsp;<span class="op" id="5847814">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847819"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847820">.</span><span class="ident" id="5847821">eof</span>&nbsp;<span class="op" id="5847825">=</span>&nbsp;<span class="ident" id="5847827">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847834">}</span>&nbsp;<span class="keyword" id="5847836">else</span>&nbsp;<span class="keyword" id="5847841">if</span>&nbsp;<span class="ident" id="5847844"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847845">.</span><span class="ident" id="5847846">err</span>&nbsp;<span class="op" id="5847850">==</span>&nbsp;<span class="ident" id="5847853">nil</span>&nbsp;<span class="op" id="5847857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847862"><a href="/go/build/read.go.html#5847636">r</a></span><span class="op" id="5847863">.</span><span class="ident" id="5847864">err</span>&nbsp;<span class="op" id="5847868">=</span>&nbsp;<span class="ident" id="5847870"><a href="/go/build/read.go.html#5847675">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5847880"><a href="/go/build/read.go.html#5847672">c</a></span>&nbsp;<span class="op" id="5847882">=</span>&nbsp;<span class="num" id="5847884">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5847887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5847890">return</span>&nbsp;<span class="ident" id="5847897"><a href="/go/build/read.go.html#5847672">c</a></span><br>
<span class="lineno"></span><span class="op" id="5847899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5847902">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="5847990">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="5848058">func</span>&nbsp;<span class="op" id="5848063">(</span><span class="ident" id="5848064">r</span>&nbsp;<span class="op" id="5848066">*</span><span class="ident" id="5848067"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5848079">)</span>&nbsp;<span class="ident" id="5848081">peekByte</span><span class="op" id="5848089">(</span><span class="ident" id="5848090">skipSpace</span>&nbsp;<span class="builtintype" id="5848100">bool</span><span class="op" id="5848104">)</span>&nbsp;<span class="builtintype" id="5848106">byte</span>&nbsp;<span class="op" id="5848111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848114">if</span>&nbsp;<span class="ident" id="5848117"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848118">.</span><span class="ident" id="5848119">err</span>&nbsp;<span class="op" id="5848123">!=</span>&nbsp;<span class="ident" id="5848126">nil</span>&nbsp;<span class="op" id="5848130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848134">if</span>&nbsp;<span class="ident" id="5848137"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848138">.</span><span class="ident" id="5848139">nerr</span><span class="op" id="5848143">++</span><span class="op" id="5848145">;</span>&nbsp;<span class="ident" id="5848147"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848148">.</span><span class="ident" id="5848149">nerr</span>&nbsp;<span class="op" id="5848154">&gt;</span>&nbsp;<span class="num" id="5848156">10000</span>&nbsp;<span class="op" id="5848162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5848167">panic</span><span class="op" id="5848172">(</span><span class="string" id="5848173">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="5848206">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848214">return</span>&nbsp;<span class="num" id="5848221">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5848228">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5848264">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5848342">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848380">c</span>&nbsp;<span class="op" id="5848382">:=</span>&nbsp;<span class="ident" id="5848385"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848386">.</span><span class="ident" id="5848387">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848393">if</span>&nbsp;<span class="ident" id="5848396"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848398">==</span>&nbsp;<span class="num" id="5848401">0</span>&nbsp;<span class="op" id="5848403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848407"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848409">=</span>&nbsp;<span class="ident" id="5848411"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848412">.</span><span class="ident" id="5848413">readByte</span><span class="op" id="5848421">(</span><span class="op" id="5848422">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848428">for</span>&nbsp;<span class="ident" id="5848432"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848433">.</span><span class="ident" id="5848434">err</span>&nbsp;<span class="op" id="5848438">==</span>&nbsp;<span class="ident" id="5848441">nil</span>&nbsp;<span class="op" id="5848445">&amp;&amp;</span>&nbsp;<span class="op" id="5848448">!</span><span class="ident" id="5848449"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848450">.</span><span class="ident" id="5848451">eof</span>&nbsp;<span class="op" id="5848455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848459">if</span>&nbsp;<span class="ident" id="5848462"><a href="/go/build/read.go.html#5848090">skipSpace</a></span>&nbsp;<span class="op" id="5848472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5848477">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5848550">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848604">switch</span>&nbsp;<span class="ident" id="5848611"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848618">case</span>&nbsp;<span class="string" id="5848623">&#39;&nbsp;&#39;</span><span class="op" id="5848626">,</span>&nbsp;<span class="string" id="5848628">&#39;\f&#39;</span><span class="op" id="5848632">,</span>&nbsp;<span class="string" id="5848634">&#39;\t&#39;</span><span class="op" id="5848638">,</span>&nbsp;<span class="string" id="5848640">&#39;\r&#39;</span><span class="op" id="5848644">,</span>&nbsp;<span class="string" id="5848646">&#39;\n&#39;</span><span class="op" id="5848650">,</span>&nbsp;<span class="string" id="5848652">&#39;;&#39;</span><span class="op" id="5848655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848661"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848663">=</span>&nbsp;<span class="ident" id="5848665"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848666">.</span><span class="ident" id="5848667">readByte</span><span class="op" id="5848675">(</span><span class="op" id="5848676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848682">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848695">case</span>&nbsp;<span class="string" id="5848700">&#39;/&#39;</span><span class="op" id="5848703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848709"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848711">=</span>&nbsp;<span class="ident" id="5848713"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848714">.</span><span class="ident" id="5848715">readByte</span><span class="op" id="5848723">(</span><span class="op" id="5848724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848730">if</span>&nbsp;<span class="ident" id="5848733"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848735">==</span>&nbsp;<span class="string" id="5848738">&#39;/&#39;</span>&nbsp;<span class="op" id="5848742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848749">for</span>&nbsp;<span class="ident" id="5848753"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848755">!=</span>&nbsp;<span class="string" id="5848758">&#39;\n&#39;</span>&nbsp;<span class="op" id="5848763">&amp;&amp;</span>&nbsp;<span class="ident" id="5848766"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848767">.</span><span class="ident" id="5848768">err</span>&nbsp;<span class="op" id="5848772">==</span>&nbsp;<span class="ident" id="5848775">nil</span>&nbsp;<span class="op" id="5848779">&amp;&amp;</span>&nbsp;<span class="op" id="5848782">!</span><span class="ident" id="5848783"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848784">.</span><span class="ident" id="5848785">eof</span>&nbsp;<span class="op" id="5848789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848797"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848799">=</span>&nbsp;<span class="ident" id="5848801"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848802">.</span><span class="ident" id="5848803">readByte</span><span class="op" id="5848811">(</span><span class="op" id="5848812">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848825">}</span>&nbsp;<span class="keyword" id="5848827">else</span>&nbsp;<span class="keyword" id="5848832">if</span>&nbsp;<span class="ident" id="5848835"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848837">==</span>&nbsp;<span class="string" id="5848840">&#39;*&#39;</span>&nbsp;<span class="op" id="5848844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848851">var</span>&nbsp;<span class="ident" id="5848855">c1</span>&nbsp;<span class="builtintype" id="5848858">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848868">for</span>&nbsp;<span class="op" id="5848872">(</span><span class="ident" id="5848873"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5848875">!=</span>&nbsp;<span class="string" id="5848878">&#39;*&#39;</span>&nbsp;<span class="op" id="5848882">||</span>&nbsp;<span class="ident" id="5848885"><a href="/go/build/read.go.html#5848855">c1</a></span>&nbsp;<span class="op" id="5848888">!=</span>&nbsp;<span class="string" id="5848891">&#39;/&#39;</span><span class="op" id="5848894">)</span>&nbsp;<span class="op" id="5848896">&amp;&amp;</span>&nbsp;<span class="ident" id="5848899"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848900">.</span><span class="ident" id="5848901">err</span>&nbsp;<span class="op" id="5848905">==</span>&nbsp;<span class="ident" id="5848908">nil</span>&nbsp;<span class="op" id="5848912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5848920">if</span>&nbsp;<span class="ident" id="5848923"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848924">.</span><span class="ident" id="5848925">eof</span>&nbsp;<span class="op" id="5848929">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848938"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848939">.</span><span class="ident" id="5848940">syntaxError</span><span class="op" id="5848951">(</span><span class="op" id="5848952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5848968"><a href="/go/build/read.go.html#5848380">c</a></span><span class="op" id="5848969">,</span>&nbsp;<span class="ident" id="5848971"><a href="/go/build/read.go.html#5848855">c1</a></span>&nbsp;<span class="op" id="5848974">=</span>&nbsp;<span class="ident" id="5848976"><a href="/go/build/read.go.html#5848855">c1</a></span><span class="op" id="5848978">,</span>&nbsp;<span class="ident" id="5848980"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5848981">.</span><span class="ident" id="5848982">readByte</span><span class="op" id="5848990">(</span><span class="op" id="5848991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5848998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849004">}</span>&nbsp;<span class="keyword" id="5849006">else</span>&nbsp;<span class="op" id="5849011">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849018"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5849019">.</span><span class="ident" id="5849020">syntaxError</span><span class="op" id="5849031">(</span><span class="op" id="5849032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849044"><a href="/go/build/read.go.html#5848380">c</a></span>&nbsp;<span class="op" id="5849046">=</span>&nbsp;<span class="ident" id="5849048"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5849049">.</span><span class="ident" id="5849050">readByte</span><span class="op" id="5849058">(</span><span class="op" id="5849059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849065">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849077">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849085">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849095"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5849096">.</span><span class="ident" id="5849097">peek</span>&nbsp;<span class="op" id="5849102">=</span>&nbsp;<span class="ident" id="5849104"><a href="/go/build/read.go.html#5848380">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849107">return</span>&nbsp;<span class="ident" id="5849114"><a href="/go/build/read.go.html#5848064">r</a></span><span class="op" id="5849115">.</span><span class="ident" id="5849116">peek</span><br>
<span class="lineno">110</span><span class="op" id="5849121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849124">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5849192">func</span>&nbsp;<span class="op" id="5849197">(</span><span class="ident" id="5849198">r</span>&nbsp;<span class="op" id="5849200">*</span><span class="ident" id="5849201"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5849213">)</span>&nbsp;<span class="ident" id="5849215">nextByte</span><span class="op" id="5849223">(</span><span class="ident" id="5849224">skipSpace</span>&nbsp;<span class="builtintype" id="5849234">bool</span><span class="op" id="5849238">)</span>&nbsp;<span class="builtintype" id="5849240">byte</span>&nbsp;<span class="op" id="5849245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849248">c</span>&nbsp;<span class="op" id="5849250">:=</span>&nbsp;<span class="ident" id="5849253"><a href="/go/build/read.go.html#5849198">r</a></span><span class="op" id="5849254">.</span><span class="ident" id="5849255">peekByte</span><span class="op" id="5849263">(</span><span class="ident" id="5849264"><a href="/go/build/read.go.html#5849224">skipSpace</a></span><span class="op" id="5849273">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849276"><a href="/go/build/read.go.html#5849198">r</a></span><span class="op" id="5849277">.</span><span class="ident" id="5849278">peek</span>&nbsp;<span class="op" id="5849283">=</span>&nbsp;<span class="num" id="5849285">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849288">return</span>&nbsp;<span class="ident" id="5849295"><a href="/go/build/read.go.html#5849248">c</a></span><br>
<span class="lineno"></span><span class="op" id="5849297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849300">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="5849355">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5849425">func</span>&nbsp;<span class="op" id="5849430">(</span><span class="ident" id="5849431">r</span>&nbsp;<span class="op" id="5849433">*</span><span class="ident" id="5849434"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5849446">)</span>&nbsp;<span class="ident" id="5849448">readKeyword</span><span class="op" id="5849459">(</span><span class="ident" id="5849460">kw</span>&nbsp;<span class="builtintype" id="5849463">string</span><span class="op" id="5849469">)</span>&nbsp;<span class="op" id="5849471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849474"><a href="/go/build/read.go.html#5849431">r</a></span><span class="op" id="5849475">.</span><span class="ident" id="5849476">peekByte</span><span class="op" id="5849484">(</span><span class="ident" id="5849485">true</span><span class="op" id="5849489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849492">for</span>&nbsp;<span class="ident" id="5849496">i</span>&nbsp;<span class="op" id="5849498">:=</span>&nbsp;<span class="num" id="5849501">0</span><span class="op" id="5849502">;</span>&nbsp;<span class="ident" id="5849504"><a href="/go/build/read.go.html#5849496">i</a></span>&nbsp;<span class="op" id="5849506">&lt;</span>&nbsp;<span class="builtinfunc" id="5849508">len</span><span class="op" id="5849511">(</span><span class="ident" id="5849512"><a href="/go/build/read.go.html#5849460">kw</a></span><span class="op" id="5849514">)</span><span class="op" id="5849515">;</span>&nbsp;<span class="ident" id="5849517"><a href="/go/build/read.go.html#5849496">i</a></span><span class="op" id="5849518">++</span>&nbsp;<span class="op" id="5849521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849525">if</span>&nbsp;<span class="ident" id="5849528"><a href="/go/build/read.go.html#5849431">r</a></span><span class="op" id="5849529">.</span><span class="ident" id="5849530">nextByte</span><span class="op" id="5849538">(</span><span class="ident" id="5849539">false</span><span class="op" id="5849544">)</span>&nbsp;<span class="op" id="5849546">!=</span>&nbsp;<span class="ident" id="5849549"><a href="/go/build/read.go.html#5849460">kw</a></span><span class="op" id="5849551">[</span><span class="ident" id="5849552"><a href="/go/build/read.go.html#5849496">i</a></span><span class="op" id="5849553">]</span>&nbsp;<span class="op" id="5849555">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849560"><a href="/go/build/read.go.html#5849431">r</a></span><span class="op" id="5849561">.</span><span class="ident" id="5849562">syntaxError</span><span class="op" id="5849573">(</span><span class="op" id="5849574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849579">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849594">if</span>&nbsp;<span class="ident" id="5849597"><a href="/go/build/read.go.html#5847068">isIdent</a></span><span class="op" id="5849604">(</span><span class="ident" id="5849605"><a href="/go/build/read.go.html#5849431">r</a></span><span class="op" id="5849606">.</span><span class="ident" id="5849607">peekByte</span><span class="op" id="5849615">(</span><span class="ident" id="5849616">false</span><span class="op" id="5849621">)</span><span class="op" id="5849622">)</span>&nbsp;<span class="op" id="5849624">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849628"><a href="/go/build/read.go.html#5849431">r</a></span><span class="op" id="5849629">.</span><span class="ident" id="5849630">syntaxError</span><span class="op" id="5849641">(</span><span class="op" id="5849642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849645">}</span><br>
<span class="lineno"></span><span class="op" id="5849647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849650">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="5849699">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5849769">func</span>&nbsp;<span class="op" id="5849774">(</span><span class="ident" id="5849775">r</span>&nbsp;<span class="op" id="5849777">*</span><span class="ident" id="5849778"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5849790">)</span>&nbsp;<span class="ident" id="5849792">readIdent</span><span class="op" id="5849801">(</span><span class="op" id="5849802">)</span>&nbsp;<span class="op" id="5849804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849807">c</span>&nbsp;<span class="op" id="5849809">:=</span>&nbsp;<span class="ident" id="5849812"><a href="/go/build/read.go.html#5849775">r</a></span><span class="op" id="5849813">.</span><span class="ident" id="5849814">peekByte</span><span class="op" id="5849822">(</span><span class="ident" id="5849823">true</span><span class="op" id="5849827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849830">if</span>&nbsp;<span class="op" id="5849833">!</span><span class="ident" id="5849834"><a href="/go/build/read.go.html#5847068">isIdent</a></span><span class="op" id="5849841">(</span><span class="ident" id="5849842"><a href="/go/build/read.go.html#5849807">c</a></span><span class="op" id="5849843">)</span>&nbsp;<span class="op" id="5849845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849849"><a href="/go/build/read.go.html#5849775">r</a></span><span class="op" id="5849850">.</span><span class="ident" id="5849851">syntaxError</span><span class="op" id="5849862">(</span><span class="op" id="5849863">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5849878">for</span>&nbsp;<span class="ident" id="5849882"><a href="/go/build/read.go.html#5847068">isIdent</a></span><span class="op" id="5849889">(</span><span class="ident" id="5849890"><a href="/go/build/read.go.html#5849775">r</a></span><span class="op" id="5849891">.</span><span class="ident" id="5849892">peekByte</span><span class="op" id="5849900">(</span><span class="ident" id="5849901">false</span><span class="op" id="5849906">)</span><span class="op" id="5849907">)</span>&nbsp;<span class="op" id="5849909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5849913"><a href="/go/build/read.go.html#5849775">r</a></span><span class="op" id="5849914">.</span><span class="ident" id="5849915">peek</span>&nbsp;<span class="op" id="5849920">=</span>&nbsp;<span class="num" id="5849922">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5849925">}</span><br>
<span class="lineno">145</span><span class="op" id="5849927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849930">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5849990">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5850061">func</span>&nbsp;<span class="op" id="5850066">(</span><span class="ident" id="5850067">r</span>&nbsp;<span class="op" id="5850069">*</span><span class="ident" id="5850070"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5850082">)</span>&nbsp;<span class="ident" id="5850084">readString</span><span class="op" id="5850094">(</span><span class="op" id="5850095">)</span>&nbsp;<span class="op" id="5850097">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850100">switch</span>&nbsp;<span class="ident" id="5850107"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850108">.</span><span class="ident" id="5850109">nextByte</span><span class="op" id="5850117">(</span><span class="ident" id="5850118">true</span><span class="op" id="5850122">)</span>&nbsp;<span class="op" id="5850124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850127">case</span>&nbsp;<span class="string" id="5850132">&#39;`&#39;</span><span class="op" id="5850135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850139">for</span>&nbsp;<span class="ident" id="5850143"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850144">.</span><span class="ident" id="5850145">err</span>&nbsp;<span class="op" id="5850149">==</span>&nbsp;<span class="ident" id="5850152">nil</span>&nbsp;<span class="op" id="5850156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850161">if</span>&nbsp;<span class="ident" id="5850164"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850165">.</span><span class="ident" id="5850166">nextByte</span><span class="op" id="5850174">(</span><span class="ident" id="5850175">false</span><span class="op" id="5850180">)</span>&nbsp;<span class="op" id="5850182">==</span>&nbsp;<span class="string" id="5850185">&#39;`&#39;</span>&nbsp;<span class="op" id="5850189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850195">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850209">if</span>&nbsp;<span class="ident" id="5850212"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850213">.</span><span class="ident" id="5850214">eof</span>&nbsp;<span class="op" id="5850218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850224"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850225">.</span><span class="ident" id="5850226">syntaxError</span><span class="op" id="5850237">(</span><span class="op" id="5850238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850247">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850250">case</span>&nbsp;<span class="string" id="5850255">&#39;&#34;&#39;</span><span class="op" id="5850258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850262">for</span>&nbsp;<span class="ident" id="5850266"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850267">.</span><span class="ident" id="5850268">err</span>&nbsp;<span class="op" id="5850272">==</span>&nbsp;<span class="ident" id="5850275">nil</span>&nbsp;<span class="op" id="5850279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850284">c</span>&nbsp;<span class="op" id="5850286">:=</span>&nbsp;<span class="ident" id="5850289"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850290">.</span><span class="ident" id="5850291">nextByte</span><span class="op" id="5850299">(</span><span class="ident" id="5850300">false</span><span class="op" id="5850305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850310">if</span>&nbsp;<span class="ident" id="5850313"><a href="/go/build/read.go.html#5850284">c</a></span>&nbsp;<span class="op" id="5850315">==</span>&nbsp;<span class="string" id="5850318">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5850322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850328">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850342">if</span>&nbsp;<span class="ident" id="5850345"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850346">.</span><span class="ident" id="5850347">eof</span>&nbsp;<span class="op" id="5850351">||</span>&nbsp;<span class="ident" id="5850354"><a href="/go/build/read.go.html#5850284">c</a></span>&nbsp;<span class="op" id="5850356">==</span>&nbsp;<span class="string" id="5850359">&#39;\n&#39;</span>&nbsp;<span class="op" id="5850364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850370"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850371">.</span><span class="ident" id="5850372">syntaxError</span><span class="op" id="5850383">(</span><span class="op" id="5850384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850394">if</span>&nbsp;<span class="ident" id="5850397"><a href="/go/build/read.go.html#5850284">c</a></span>&nbsp;<span class="op" id="5850399">==</span>&nbsp;<span class="string" id="5850402">&#39;\\&#39;</span>&nbsp;<span class="op" id="5850407">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850413"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850414">.</span><span class="ident" id="5850415">nextByte</span><span class="op" id="5850423">(</span><span class="ident" id="5850424">false</span><span class="op" id="5850429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850441">default</span><span class="op" id="5850448">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850452"><a href="/go/build/read.go.html#5850067">r</a></span><span class="op" id="5850453">.</span><span class="ident" id="5850454">syntaxError</span><span class="op" id="5850465">(</span><span class="op" id="5850466">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850469">}</span><br>
<span class="lineno"></span><span class="op" id="5850471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850474">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5850561">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="5850580">func</span>&nbsp;<span class="op" id="5850585">(</span><span class="ident" id="5850586">r</span>&nbsp;<span class="op" id="5850588">*</span><span class="ident" id="5850589"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5850601">)</span>&nbsp;<span class="ident" id="5850603">readImport</span><span class="op" id="5850613">(</span><span class="op" id="5850614">)</span>&nbsp;<span class="op" id="5850616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850619">c</span>&nbsp;<span class="op" id="5850621">:=</span>&nbsp;<span class="ident" id="5850624"><a href="/go/build/read.go.html#5850586">r</a></span><span class="op" id="5850625">.</span><span class="ident" id="5850626">peekByte</span><span class="op" id="5850634">(</span><span class="ident" id="5850635">true</span><span class="op" id="5850639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850642">if</span>&nbsp;<span class="ident" id="5850645"><a href="/go/build/read.go.html#5850619">c</a></span>&nbsp;<span class="op" id="5850647">==</span>&nbsp;<span class="string" id="5850650">&#39;.&#39;</span>&nbsp;<span class="op" id="5850654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850658"><a href="/go/build/read.go.html#5850586">r</a></span><span class="op" id="5850659">.</span><span class="ident" id="5850660">peek</span>&nbsp;<span class="op" id="5850665">=</span>&nbsp;<span class="num" id="5850667">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850670">}</span>&nbsp;<span class="keyword" id="5850672">else</span>&nbsp;<span class="keyword" id="5850677">if</span>&nbsp;<span class="ident" id="5850680"><a href="/go/build/read.go.html#5847068">isIdent</a></span><span class="op" id="5850687">(</span><span class="ident" id="5850688"><a href="/go/build/read.go.html#5850619">c</a></span><span class="op" id="5850689">)</span>&nbsp;<span class="op" id="5850691">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850695"><a href="/go/build/read.go.html#5850586">r</a></span><span class="op" id="5850696">.</span><span class="ident" id="5850697">readIdent</span><span class="op" id="5850706">(</span><span class="op" id="5850707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5850710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850713"><a href="/go/build/read.go.html#5850586">r</a></span><span class="op" id="5850714">.</span><span class="ident" id="5850715">readString</span><span class="op" id="5850725">(</span><span class="op" id="5850726">)</span><br>
<span class="lineno"></span><span class="op" id="5850728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5850731">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="5850809">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5850843">func</span>&nbsp;<span class="ident" id="5850848">readComments</span><span class="op" id="5850860">(</span><span class="ident" id="5850861">f</span>&nbsp;<span class="ident" id="5850863"><a href="/go/build/read.go.html#5846948">io</a></span><span class="op" id="5850865">.</span><span class="ident" id="5850866">Reader</span><span class="op" id="5850872">)</span>&nbsp;<span class="op" id="5850874">(</span><span class="op" id="5850875">[</span><span class="op" id="5850876">]</span><span class="builtintype" id="5850877">byte</span><span class="op" id="5850881">,</span>&nbsp;<span class="builtintype" id="5850883">error</span><span class="op" id="5850888">)</span>&nbsp;<span class="op" id="5850890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850893">r</span>&nbsp;<span class="op" id="5850895">:=</span>&nbsp;<span class="op" id="5850898">&amp;</span><span class="ident" id="5850899"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5850911">{</span><span class="ident" id="5850912">b</span><span class="op" id="5850913">:</span>&nbsp;<span class="ident" id="5850915"><a href="/go/build/read.go.html#5846929">bufio</a></span><span class="op" id="5850920">.</span><span class="ident" id="5850921">NewReader</span><span class="op" id="5850930">(</span><span class="ident" id="5850931"><a href="/go/build/read.go.html#5850861">f</a></span><span class="op" id="5850932">)</span><span class="op" id="5850933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850936"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5850937">.</span><span class="ident" id="5850938">peekByte</span><span class="op" id="5850946">(</span><span class="ident" id="5850947">true</span><span class="op" id="5850951">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850954">if</span>&nbsp;<span class="ident" id="5850957"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5850958">.</span><span class="ident" id="5850959">err</span>&nbsp;<span class="op" id="5850963">==</span>&nbsp;<span class="ident" id="5850966">nil</span>&nbsp;<span class="op" id="5850970">&amp;&amp;</span>&nbsp;<span class="op" id="5850973">!</span><span class="ident" id="5850974"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5850975">.</span><span class="ident" id="5850976">eof</span>&nbsp;<span class="op" id="5850980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5850984">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851055"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5851056">.</span><span class="ident" id="5851057">buf</span>&nbsp;<span class="op" id="5851061">=</span>&nbsp;<span class="ident" id="5851063"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5851064">.</span><span class="ident" id="5851065">buf</span><span class="op" id="5851068">[</span><span class="op" id="5851069">:</span><span class="builtinfunc" id="5851070">len</span><span class="op" id="5851073">(</span><span class="ident" id="5851074"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5851075">.</span><span class="ident" id="5851076">buf</span><span class="op" id="5851079">)</span><span class="op" id="5851080">-</span><span class="num" id="5851081">1</span><span class="op" id="5851082">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851088">return</span>&nbsp;<span class="ident" id="5851095"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5851096">.</span><span class="ident" id="5851097">buf</span><span class="op" id="5851100">,</span>&nbsp;<span class="ident" id="5851102"><a href="/go/build/read.go.html#5850893">r</a></span><span class="op" id="5851103">.</span><span class="ident" id="5851104">err</span><br>
<span class="lineno">200</span><span class="op" id="5851108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5851111">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5851192">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="5851256">func</span>&nbsp;<span class="ident" id="5851261">readImports</span><span class="op" id="5851272">(</span><span class="ident" id="5851273">f</span>&nbsp;<span class="ident" id="5851275"><a href="/go/build/read.go.html#5846948">io</a></span><span class="op" id="5851277">.</span><span class="ident" id="5851278">Reader</span><span class="op" id="5851284">,</span>&nbsp;<span class="ident" id="5851286">reportSyntaxError</span>&nbsp;<span class="builtintype" id="5851304">bool</span><span class="op" id="5851308">)</span>&nbsp;<span class="op" id="5851310">(</span><span class="op" id="5851311">[</span><span class="op" id="5851312">]</span><span class="builtintype" id="5851313">byte</span><span class="op" id="5851317">,</span>&nbsp;<span class="builtintype" id="5851319">error</span><span class="op" id="5851324">)</span>&nbsp;<span class="op" id="5851326">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851329">r</span>&nbsp;<span class="op" id="5851331">:=</span>&nbsp;<span class="op" id="5851334">&amp;</span><span class="ident" id="5851335"><a href="/go/build/read.go.html#5846961">importReader</a></span><span class="op" id="5851347">{</span><span class="ident" id="5851348">b</span><span class="op" id="5851349">:</span>&nbsp;<span class="ident" id="5851351"><a href="/go/build/read.go.html#5846929">bufio</a></span><span class="op" id="5851356">.</span><span class="ident" id="5851357">NewReader</span><span class="op" id="5851366">(</span><span class="ident" id="5851367"><a href="/go/build/read.go.html#5851273">f</a></span><span class="op" id="5851368">)</span><span class="op" id="5851369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851373"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851374">.</span><span class="ident" id="5851375">readKeyword</span><span class="op" id="5851386">(</span><span class="string" id="5851387">&#34;package&#34;</span><span class="op" id="5851396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851399"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851400">.</span><span class="ident" id="5851401">readIdent</span><span class="op" id="5851410">(</span><span class="op" id="5851411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851414">for</span>&nbsp;<span class="ident" id="5851418"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851419">.</span><span class="ident" id="5851420">peekByte</span><span class="op" id="5851428">(</span><span class="ident" id="5851429">true</span><span class="op" id="5851433">)</span>&nbsp;<span class="op" id="5851435">==</span>&nbsp;<span class="string" id="5851438">&#39;i&#39;</span>&nbsp;<span class="op" id="5851442">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851446"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851447">.</span><span class="ident" id="5851448">readKeyword</span><span class="op" id="5851459">(</span><span class="string" id="5851460">&#34;import&#34;</span><span class="op" id="5851468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851472">if</span>&nbsp;<span class="ident" id="5851475"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851476">.</span><span class="ident" id="5851477">peekByte</span><span class="op" id="5851485">(</span><span class="ident" id="5851486">true</span><span class="op" id="5851490">)</span>&nbsp;<span class="op" id="5851492">==</span>&nbsp;<span class="string" id="5851495">&#39;(&#39;</span>&nbsp;<span class="op" id="5851499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851504"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851505">.</span><span class="ident" id="5851506">nextByte</span><span class="op" id="5851514">(</span><span class="ident" id="5851515">false</span><span class="op" id="5851520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851525">for</span>&nbsp;<span class="ident" id="5851529"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851530">.</span><span class="ident" id="5851531">peekByte</span><span class="op" id="5851539">(</span><span class="ident" id="5851540">true</span><span class="op" id="5851544">)</span>&nbsp;<span class="op" id="5851546">!=</span>&nbsp;<span class="string" id="5851549">&#39;)&#39;</span>&nbsp;<span class="op" id="5851553">&amp;&amp;</span>&nbsp;<span class="ident" id="5851556"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851557">.</span><span class="ident" id="5851558">err</span>&nbsp;<span class="op" id="5851562">==</span>&nbsp;<span class="ident" id="5851565">nil</span>&nbsp;<span class="op" id="5851569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851575"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851576">.</span><span class="ident" id="5851577">readImport</span><span class="op" id="5851587">(</span><span class="op" id="5851588">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851598"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851599">.</span><span class="ident" id="5851600">nextByte</span><span class="op" id="5851608">(</span><span class="ident" id="5851609">false</span><span class="op" id="5851614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851618">}</span>&nbsp;<span class="keyword" id="5851620">else</span>&nbsp;<span class="op" id="5851625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851630"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851631">.</span><span class="ident" id="5851632">readImport</span><span class="op" id="5851642">(</span><span class="op" id="5851643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851647">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5851654">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5851739">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851829">if</span>&nbsp;<span class="ident" id="5851832"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851833">.</span><span class="ident" id="5851834">err</span>&nbsp;<span class="op" id="5851838">==</span>&nbsp;<span class="ident" id="5851841">nil</span>&nbsp;<span class="op" id="5851845">&amp;&amp;</span>&nbsp;<span class="op" id="5851848">!</span><span class="ident" id="5851849"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851850">.</span><span class="ident" id="5851851">eof</span>&nbsp;<span class="op" id="5851855">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851859">return</span>&nbsp;<span class="ident" id="5851866"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851867">.</span><span class="ident" id="5851868">buf</span><span class="op" id="5851871">[</span><span class="op" id="5851872">:</span><span class="builtinfunc" id="5851873">len</span><span class="op" id="5851876">(</span><span class="ident" id="5851877"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5851878">.</span><span class="ident" id="5851879">buf</span><span class="op" id="5851882">)</span><span class="op" id="5851883">-</span><span class="num" id="5851884">1</span><span class="op" id="5851885">]</span><span class="op" id="5851886">,</span>&nbsp;<span class="ident" id="5851888">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5851897">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5851966">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852033">if</span>&nbsp;<span class="ident" id="5852036"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852037">.</span><span class="ident" id="5852038">err</span>&nbsp;<span class="op" id="5852042">==</span>&nbsp;<span class="ident" id="5852045"><a href="/go/build/read.go.html#5847203">errSyntax</a></span>&nbsp;<span class="op" id="5852055">&amp;&amp;</span>&nbsp;<span class="op" id="5852058">!</span><span class="ident" id="5852059"><a href="/go/build/read.go.html#5851286">reportSyntaxError</a></span>&nbsp;<span class="op" id="5852077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852081"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852082">.</span><span class="ident" id="5852083">err</span>&nbsp;<span class="op" id="5852087">=</span>&nbsp;<span class="ident" id="5852089">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852095">for</span>&nbsp;<span class="ident" id="5852099"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852100">.</span><span class="ident" id="5852101">err</span>&nbsp;<span class="op" id="5852105">==</span>&nbsp;<span class="ident" id="5852108">nil</span>&nbsp;<span class="op" id="5852112">&amp;&amp;</span>&nbsp;<span class="op" id="5852115">!</span><span class="ident" id="5852116"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852117">.</span><span class="ident" id="5852118">eof</span>&nbsp;<span class="op" id="5852122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852127"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852128">.</span><span class="ident" id="5852129">readByte</span><span class="op" id="5852137">(</span><span class="op" id="5852138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852142">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852149">return</span>&nbsp;<span class="ident" id="5852156"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852157">.</span><span class="ident" id="5852158">buf</span><span class="op" id="5852161">,</span>&nbsp;<span class="ident" id="5852163"><a href="/go/build/read.go.html#5851329">r</a></span><span class="op" id="5852164">.</span><span class="ident" id="5852165">err</span><br>
<span class="lineno"></span><span class="op" id="5852169">}</span>
</div>
</body>
</html>
