<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6323185">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6323240">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6323294">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6323345">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6323378">package</span>&nbsp;<span class="ident" id="6323386">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6323394">import</span>&nbsp;<span class="op" id="6323401">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6323404">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6323414">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6323420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6323423">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6323492">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6323538">func</span>&nbsp;<span class="ident" id="6323543">unixSyslog</span><span class="op" id="6323553">(</span><span class="op" id="6323554">)</span>&nbsp;<span class="op" id="6323556">(</span><span class="ident" id="6323557">conn</span>&nbsp;<span class="ident" id="6323562">serverConn</span><span class="op" id="6323572">,</span>&nbsp;<span class="ident" id="6323574">err</span>&nbsp;<span class="builtintype" id="6323578">error</span><span class="op" id="6323583">)</span>&nbsp;<span class="op" id="6323585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6323588">logTypes</span>&nbsp;<span class="op" id="6323597">:=</span>&nbsp;<span class="op" id="6323600">[</span><span class="op" id="6323601">]</span><span class="builtintype" id="6323602">string</span><span class="op" id="6323608">{</span><span class="string" id="6323609">&#34;unixgram&#34;</span><span class="op" id="6323619">,</span>&nbsp;<span class="string" id="6323621">&#34;unix&#34;</span><span class="op" id="6323627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6323630">logPaths</span>&nbsp;<span class="op" id="6323639">:=</span>&nbsp;<span class="op" id="6323642">[</span><span class="op" id="6323643">]</span><span class="builtintype" id="6323644">string</span><span class="op" id="6323650">{</span><span class="string" id="6323651">&#34;/dev/log&#34;</span><span class="op" id="6323661">,</span>&nbsp;<span class="string" id="6323663">&#34;/var/run/syslog&#34;</span><span class="op" id="6323680">,</span>&nbsp;<span class="string" id="6323682">&#34;/var/run/log&#34;</span><span class="op" id="6323696">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323699">for</span>&nbsp;<span class="ident" id="6323703">_</span><span class="op" id="6323704">,</span>&nbsp;<span class="ident" id="6323706">network</span>&nbsp;<span class="op" id="6323714">:=</span>&nbsp;<span class="keyword" id="6323717">range</span>&nbsp;<span class="ident" id="6323723">logTypes</span>&nbsp;<span class="op" id="6323732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323736">for</span>&nbsp;<span class="ident" id="6323740">_</span><span class="op" id="6323741">,</span>&nbsp;<span class="ident" id="6323743">path</span>&nbsp;<span class="op" id="6323748">:=</span>&nbsp;<span class="keyword" id="6323751">range</span>&nbsp;<span class="ident" id="6323757">logPaths</span>&nbsp;<span class="op" id="6323766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6323771">conn</span><span class="op" id="6323775">,</span>&nbsp;<span class="ident" id="6323777">err</span>&nbsp;<span class="op" id="6323781">:=</span>&nbsp;<span class="ident" id="6323784">net</span><span class="op" id="6323787">.</span><span class="ident" id="6323788">Dial</span><span class="op" id="6323792">(</span><span class="ident" id="6323793">network</span><span class="op" id="6323800">,</span>&nbsp;<span class="ident" id="6323802">path</span><span class="op" id="6323806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323811">if</span>&nbsp;<span class="ident" id="6323814">err</span>&nbsp;<span class="op" id="6323818">!=</span>&nbsp;<span class="builtintype" id="6323821">nil</span>&nbsp;<span class="op" id="6323825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323831">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6323843">}</span>&nbsp;<span class="keyword" id="6323845">else</span>&nbsp;<span class="op" id="6323850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323856">return</span>&nbsp;<span class="op" id="6323863">&amp;</span><span class="ident" id="6323864">netConn</span><span class="op" id="6323871">{</span><span class="ident" id="6323872">conn</span><span class="op" id="6323876">:</span>&nbsp;<span class="ident" id="6323878">conn</span><span class="op" id="6323882">,</span>&nbsp;<span class="ident" id="6323884">local</span><span class="op" id="6323889">:</span>&nbsp;<span class="builtintype" id="6323891">true</span><span class="op" id="6323895">}</span><span class="op" id="6323896">,</span>&nbsp;<span class="builtintype" id="6323898">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6323905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6323909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6323912">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6323915">return</span>&nbsp;<span class="builtintype" id="6323922">nil</span><span class="op" id="6323925">,</span>&nbsp;<span class="ident" id="6323927">errors</span><span class="op" id="6323933">.</span><span class="ident" id="6323934">New</span><span class="op" id="6323937">(</span><span class="string" id="6323938">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6323966">)</span><br>
<span class="lineno"></span><span class="op" id="6323968">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
