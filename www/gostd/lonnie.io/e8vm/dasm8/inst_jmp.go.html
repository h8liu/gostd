<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="5538116">package</span>&nbsp;<span class="ident" id="5538124">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5538131">import</span>&nbsp;<span class="op" id="5538138">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5538141">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5538147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5538150">var</span>&nbsp;<span class="op" id="5538154">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538157">opJmpMap</span>&nbsp;<span class="op" id="5538166">=</span>&nbsp;<span class="keyword" id="5538168">map</span><span class="op" id="5538171">[</span><span class="builtintype" id="5538172">uint32</span><span class="op" id="5538178">]</span><span class="builtintype" id="5538179">string</span><span class="op" id="5538185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5538189">2</span><span class="op" id="5538190">:</span>&nbsp;<span class="string" id="5538192">&#34;j&#34;</span><span class="op" id="5538195">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5538199">3</span><span class="op" id="5538200">:</span>&nbsp;<span class="string" id="5538202">&#34;jal&#34;</span><span class="op" id="5538207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538210">}</span><br>
<span class="lineno"></span><span class="op" id="5538212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5538215">func</span>&nbsp;<span class="ident" id="5538220">instJmp</span><span class="op" id="5538227">(</span><span class="ident" id="5538228">addr</span>&nbsp;<span class="builtintype" id="5538233">uint32</span><span class="op" id="5538239">,</span>&nbsp;<span class="ident" id="5538241">in</span>&nbsp;<span class="builtintype" id="5538244">uint32</span><span class="op" id="5538250">)</span>&nbsp;<span class="op" id="5538252">*</span><span class="ident" id="5538253">Line</span>&nbsp;<span class="op" id="5538258">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538261">op</span>&nbsp;<span class="op" id="5538264">:=</span>&nbsp;<span class="op" id="5538267">(</span><span class="ident" id="5538268">in</span>&nbsp;<span class="op" id="5538271">&gt;&gt;</span>&nbsp;<span class="num" id="5538274">30</span><span class="op" id="5538276">)</span>&nbsp;<span class="op" id="5538278">&amp;</span>&nbsp;<span class="num" id="5538280">0x3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538285">off</span>&nbsp;<span class="op" id="5538289">:=</span>&nbsp;<span class="builtintype" id="5538292">int32</span><span class="op" id="5538297">(</span><span class="op" id="5538298">(</span><span class="ident" id="5538299">in</span>&nbsp;<span class="op" id="5538302">&amp;</span>&nbsp;<span class="num" id="5538304">0x3fffffff</span><span class="op" id="5538314">)</span>&nbsp;<span class="op" id="5538316">&lt;&lt;</span>&nbsp;<span class="num" id="5538319">2</span><span class="op" id="5538320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538323">ret</span>&nbsp;<span class="op" id="5538327">:=</span>&nbsp;<span class="ident" id="5538330">newLine</span><span class="op" id="5538337">(</span><span class="ident" id="5538338">addr</span><span class="op" id="5538342">,</span>&nbsp;<span class="ident" id="5538344">in</span><span class="op" id="5538346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538350">if</span>&nbsp;<span class="ident" id="5538353">opStr</span><span class="op" id="5538358">,</span>&nbsp;<span class="ident" id="5538360">found</span>&nbsp;<span class="op" id="5538366">:=</span>&nbsp;<span class="ident" id="5538369">opJmpMap</span><span class="op" id="5538377">[</span><span class="ident" id="5538378">op</span><span class="op" id="5538380">]</span><span class="op" id="5538381">;</span>&nbsp;<span class="ident" id="5538383">found</span>&nbsp;<span class="op" id="5538389">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538393">s</span>&nbsp;<span class="op" id="5538395">:=</span>&nbsp;<span class="ident" id="5538398">fmt</span><span class="op" id="5538401">.</span><span class="ident" id="5538402">Sprintf</span><span class="op" id="5538409">(</span><span class="string" id="5538410">&#34;%s&nbsp;%d&#34;</span><span class="op" id="5538417">,</span>&nbsp;<span class="ident" id="5538419">opStr</span><span class="op" id="5538424">,</span>&nbsp;<span class="ident" id="5538426">off</span><span class="op" id="5538429">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538434">ret</span><span class="op" id="5538437">.</span><span class="ident" id="5538438">Str</span>&nbsp;<span class="op" id="5538442">=</span>&nbsp;<span class="ident" id="5538444">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538448">ret</span><span class="op" id="5538451">.</span><span class="ident" id="5538452">IsJump</span>&nbsp;<span class="op" id="5538459">=</span>&nbsp;<span class="builtintype" id="5538461">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5538468">ret</span><span class="op" id="5538471">.</span><span class="ident" id="5538472">To</span>&nbsp;<span class="op" id="5538475">=</span>&nbsp;<span class="ident" id="5538477">addr</span>&nbsp;<span class="op" id="5538482">+</span>&nbsp;<span class="num" id="5538484">4</span>&nbsp;<span class="op" id="5538486">+</span>&nbsp;<span class="builtintype" id="5538488">uint32</span><span class="op" id="5538494">(</span><span class="ident" id="5538495">off</span><span class="op" id="5538498">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5538501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5538505">return</span>&nbsp;<span class="ident" id="5538512">ret</span><br>
<span class="lineno"></span><span class="op" id="5538516">}</span>
</div>
</body>
</html>
