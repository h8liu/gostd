<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/mail</h2>
<ul>
<li><a href="/gostd/net/mail/message.go.html">message.go</a></li>
<li><a href="/gostd/net/mail/message_test.go.html" class="current">message_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7190034">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7190089">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7190143">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7190194">package</span>&nbsp;<span class="ident" id="7190202">mail</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7190208">import</span>&nbsp;<span class="op" id="7190215">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190218">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190227">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190240">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190251">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190262">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190273">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7190280">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7190283">var</span>&nbsp;<span class="ident" id="7190287">parseTests</span>&nbsp;<span class="op" id="7190298">=</span>&nbsp;<span class="op" id="7190300">[</span><span class="op" id="7190301">]</span><span class="keyword" id="7190302">struct</span>&nbsp;<span class="op" id="7190309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190312">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7190319">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190327">header</span>&nbsp;<span class="ident" id="7190334">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190342">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7190349">string</span><br>
<span class="lineno">20</span><span class="op" id="7190356">}</span><span class="op" id="7190357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7190364">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190394">in</span><span class="op" id="7190396">:</span>&nbsp;<span class="string" id="7190398">`From:&nbsp;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;<br>
<span class="lineno"></span>To:&nbsp;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;<br>
<span class="lineno">25</span>Subject:&nbsp;Saying&nbsp;Hello<br>
<span class="lineno"></span>Date:&nbsp;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600<br>
<span class="lineno"></span>Message-ID:&nbsp;&lt;1234@local.machine.example&gt;<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.<br>
<span class="lineno">30</span>So,&nbsp;&#34;Hello&#34;.<br>
<span class="lineno"></span>`</span><span class="op" id="7190624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190628">header</span><span class="op" id="7190634">:</span>&nbsp;<span class="ident" id="7190636">Header</span><span class="op" id="7190642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190647">&#34;From&#34;</span><span class="op" id="7190653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190661">[</span><span class="op" id="7190662">]</span><span class="builtintype" id="7190663">string</span><span class="op" id="7190669">{</span><span class="string" id="7190670">&#34;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;&#34;</span><span class="op" id="7190703">}</span><span class="op" id="7190704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190709">&#34;To&#34;</span><span class="op" id="7190713">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190723">[</span><span class="op" id="7190724">]</span><span class="builtintype" id="7190725">string</span><span class="op" id="7190731">{</span><span class="string" id="7190732">&#34;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;&#34;</span><span class="op" id="7190763">}</span><span class="op" id="7190764">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190769">&#34;Subject&#34;</span><span class="op" id="7190778">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190783">[</span><span class="op" id="7190784">]</span><span class="builtintype" id="7190785">string</span><span class="op" id="7190791">{</span><span class="string" id="7190792">&#34;Saying&nbsp;Hello&#34;</span><span class="op" id="7190806">}</span><span class="op" id="7190807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190812">&#34;Date&#34;</span><span class="op" id="7190818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190826">[</span><span class="op" id="7190827">]</span><span class="builtintype" id="7190828">string</span><span class="op" id="7190834">{</span><span class="string" id="7190835">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7190868">}</span><span class="op" id="7190869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7190874">&#34;Message-Id&#34;</span><span class="op" id="7190886">:</span>&nbsp;<span class="op" id="7190888">[</span><span class="op" id="7190889">]</span><span class="builtintype" id="7190890">string</span><span class="op" id="7190896">{</span><span class="string" id="7190897">&#34;&lt;1234@local.machine.example&gt;&#34;</span><span class="op" id="7190927">}</span><span class="op" id="7190928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7190932">}</span><span class="op" id="7190933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7190937">body</span><span class="op" id="7190941">:</span>&nbsp;<span class="string" id="7190943">&#34;This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.\nSo,&nbsp;\&#34;Hello\&#34;.\n&#34;</span><span class="op" id="7190999">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191002">}</span><span class="op" id="7191003">,</span><br>
<span class="lineno"></span><span class="op" id="7191005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191008">func</span>&nbsp;<span class="ident" id="7191013">TestParsing</span><span class="op" id="7191024">(</span><span class="ident" id="7191025">t</span>&nbsp;<span class="op" id="7191027">*</span><span class="ident" id="7191028">testing</span><span class="op" id="7191035">.</span><span class="ident" id="7191036">T</span><span class="op" id="7191037">)</span>&nbsp;<span class="op" id="7191039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191042">for</span>&nbsp;<span class="ident" id="7191046">i</span><span class="op" id="7191047">,</span>&nbsp;<span class="ident" id="7191049">test</span>&nbsp;<span class="op" id="7191054">:=</span>&nbsp;<span class="keyword" id="7191057">range</span>&nbsp;<span class="ident" id="7191063">parseTests</span>&nbsp;<span class="op" id="7191074">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191078">msg</span><span class="op" id="7191081">,</span>&nbsp;<span class="ident" id="7191083">err</span>&nbsp;<span class="op" id="7191087">:=</span>&nbsp;<span class="ident" id="7191090">ReadMessage</span><span class="op" id="7191101">(</span><span class="ident" id="7191102">bytes</span><span class="op" id="7191107">.</span><span class="ident" id="7191108">NewBuffer</span><span class="op" id="7191117">(</span><span class="op" id="7191118">[</span><span class="op" id="7191119">]</span><span class="builtintype" id="7191120">byte</span><span class="op" id="7191124">(</span><span class="ident" id="7191125">test</span><span class="op" id="7191129">.</span><span class="ident" id="7191130">in</span><span class="op" id="7191132">)</span><span class="op" id="7191133">)</span><span class="op" id="7191134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191138">if</span>&nbsp;<span class="ident" id="7191141">err</span>&nbsp;<span class="op" id="7191145">!=</span>&nbsp;<span class="builtintype" id="7191148">nil</span>&nbsp;<span class="op" id="7191152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191157">t</span><span class="op" id="7191158">.</span><span class="ident" id="7191159">Errorf</span><span class="op" id="7191165">(</span><span class="string" id="7191166">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;parsing&nbsp;message:&nbsp;%v&#34;</span><span class="op" id="7191204">,</span>&nbsp;<span class="ident" id="7191206">i</span><span class="op" id="7191207">,</span>&nbsp;<span class="ident" id="7191209">err</span><span class="op" id="7191212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191217">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191228">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191232">if</span>&nbsp;<span class="op" id="7191235">!</span><span class="ident" id="7191236">headerEq</span><span class="op" id="7191244">(</span><span class="ident" id="7191245">msg</span><span class="op" id="7191248">.</span><span class="ident" id="7191249">Header</span><span class="op" id="7191255">,</span>&nbsp;<span class="ident" id="7191257">test</span><span class="op" id="7191261">.</span><span class="ident" id="7191262">header</span><span class="op" id="7191268">)</span>&nbsp;<span class="op" id="7191270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191275">t</span><span class="op" id="7191276">.</span><span class="ident" id="7191277">Errorf</span><span class="op" id="7191283">(</span><span class="string" id="7191284">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;header.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7191353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191359">i</span><span class="op" id="7191360">,</span>&nbsp;<span class="ident" id="7191362">msg</span><span class="op" id="7191365">.</span><span class="ident" id="7191366">Header</span><span class="op" id="7191372">,</span>&nbsp;<span class="ident" id="7191374">test</span><span class="op" id="7191378">.</span><span class="ident" id="7191379">header</span><span class="op" id="7191385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191393">body</span><span class="op" id="7191397">,</span>&nbsp;<span class="ident" id="7191399">err</span>&nbsp;<span class="op" id="7191403">:=</span>&nbsp;<span class="ident" id="7191406">ioutil</span><span class="op" id="7191412">.</span><span class="ident" id="7191413">ReadAll</span><span class="op" id="7191420">(</span><span class="ident" id="7191421">msg</span><span class="op" id="7191424">.</span><span class="ident" id="7191425">Body</span><span class="op" id="7191429">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191433">if</span>&nbsp;<span class="ident" id="7191436">err</span>&nbsp;<span class="op" id="7191440">!=</span>&nbsp;<span class="builtintype" id="7191443">nil</span>&nbsp;<span class="op" id="7191447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191452">t</span><span class="op" id="7191453">.</span><span class="ident" id="7191454">Errorf</span><span class="op" id="7191460">(</span><span class="string" id="7191461">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;reading&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7191496">,</span>&nbsp;<span class="ident" id="7191498">i</span><span class="op" id="7191499">,</span>&nbsp;<span class="ident" id="7191501">err</span><span class="op" id="7191504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191509">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191524">bodyStr</span>&nbsp;<span class="op" id="7191532">:=</span>&nbsp;<span class="builtintype" id="7191535">string</span><span class="op" id="7191541">(</span><span class="ident" id="7191542">body</span><span class="op" id="7191546">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191550">if</span>&nbsp;<span class="ident" id="7191553">bodyStr</span>&nbsp;<span class="op" id="7191561">!=</span>&nbsp;<span class="ident" id="7191564">test</span><span class="op" id="7191568">.</span><span class="ident" id="7191569">body</span>&nbsp;<span class="op" id="7191574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191579">t</span><span class="op" id="7191580">.</span><span class="ident" id="7191581">Errorf</span><span class="op" id="7191587">(</span><span class="string" id="7191588">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;body.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7191655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191661">i</span><span class="op" id="7191662">,</span>&nbsp;<span class="ident" id="7191664">bodyStr</span><span class="op" id="7191671">,</span>&nbsp;<span class="ident" id="7191673">test</span><span class="op" id="7191677">.</span><span class="ident" id="7191678">body</span><span class="op" id="7191682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191689">}</span><br>
<span class="lineno">65</span><span class="op" id="7191691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191694">func</span>&nbsp;<span class="ident" id="7191699">headerEq</span><span class="op" id="7191707">(</span><span class="ident" id="7191708">a</span><span class="op" id="7191709">,</span>&nbsp;<span class="ident" id="7191711">b</span>&nbsp;<span class="ident" id="7191713">Header</span><span class="op" id="7191719">)</span>&nbsp;<span class="builtintype" id="7191721">bool</span>&nbsp;<span class="op" id="7191726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191729">if</span>&nbsp;<span class="builtinfunc" id="7191732">len</span><span class="op" id="7191735">(</span><span class="ident" id="7191736">a</span><span class="op" id="7191737">)</span>&nbsp;<span class="op" id="7191739">!=</span>&nbsp;<span class="builtinfunc" id="7191742">len</span><span class="op" id="7191745">(</span><span class="ident" id="7191746">b</span><span class="op" id="7191747">)</span>&nbsp;<span class="op" id="7191749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191753">return</span>&nbsp;<span class="builtintype" id="7191760">false</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191770">for</span>&nbsp;<span class="ident" id="7191774">k</span><span class="op" id="7191775">,</span>&nbsp;<span class="ident" id="7191777">as</span>&nbsp;<span class="op" id="7191780">:=</span>&nbsp;<span class="keyword" id="7191783">range</span>&nbsp;<span class="ident" id="7191789">a</span>&nbsp;<span class="op" id="7191791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191795">bs</span><span class="op" id="7191797">,</span>&nbsp;<span class="ident" id="7191799">ok</span>&nbsp;<span class="op" id="7191802">:=</span>&nbsp;<span class="ident" id="7191805">b</span><span class="op" id="7191806">[</span><span class="ident" id="7191807">k</span><span class="op" id="7191808">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191812">if</span>&nbsp;<span class="op" id="7191815">!</span><span class="ident" id="7191816">ok</span>&nbsp;<span class="op" id="7191819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191824">return</span>&nbsp;<span class="builtintype" id="7191831">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191843">if</span>&nbsp;<span class="op" id="7191846">!</span><span class="ident" id="7191847">reflect</span><span class="op" id="7191854">.</span><span class="ident" id="7191855">DeepEqual</span><span class="op" id="7191864">(</span><span class="ident" id="7191865">as</span><span class="op" id="7191867">,</span>&nbsp;<span class="ident" id="7191869">bs</span><span class="op" id="7191871">)</span>&nbsp;<span class="op" id="7191873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191878">return</span>&nbsp;<span class="builtintype" id="7191885">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7191896">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7191899">return</span>&nbsp;<span class="builtintype" id="7191906">true</span><br>
<span class="lineno"></span><span class="op" id="7191911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7191914">func</span>&nbsp;<span class="ident" id="7191919">TestDateParsing</span><span class="op" id="7191934">(</span><span class="ident" id="7191935">t</span>&nbsp;<span class="op" id="7191937">*</span><span class="ident" id="7191938">testing</span><span class="op" id="7191945">.</span><span class="ident" id="7191946">T</span><span class="op" id="7191947">)</span>&nbsp;<span class="op" id="7191949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191952">tests</span>&nbsp;<span class="op" id="7191958">:=</span>&nbsp;<span class="op" id="7191961">[</span><span class="op" id="7191962">]</span><span class="keyword" id="7191963">struct</span>&nbsp;<span class="op" id="7191970">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191974">dateStr</span>&nbsp;<span class="builtintype" id="7191982">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191991">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7191999">time</span><span class="op" id="7192003">.</span><span class="ident" id="7192004">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192010">}</span><span class="op" id="7192011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192015">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192045">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192050">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7192083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192088">time</span><span class="op" id="7192092">.</span><span class="ident" id="7192093">Date</span><span class="op" id="7192097">(</span><span class="num" id="7192098">1997</span><span class="op" id="7192102">,</span>&nbsp;<span class="num" id="7192104">11</span><span class="op" id="7192106">,</span>&nbsp;<span class="num" id="7192108">21</span><span class="op" id="7192110">,</span>&nbsp;<span class="num" id="7192112">9</span><span class="op" id="7192113">,</span>&nbsp;<span class="num" id="7192115">55</span><span class="op" id="7192117">,</span>&nbsp;<span class="num" id="7192119">6</span><span class="op" id="7192120">,</span>&nbsp;<span class="num" id="7192122">0</span><span class="op" id="7192123">,</span>&nbsp;<span class="ident" id="7192125">time</span><span class="op" id="7192129">.</span><span class="ident" id="7192130">FixedZone</span><span class="op" id="7192139">(</span><span class="string" id="7192140">&#34;&#34;</span><span class="op" id="7192142">,</span>&nbsp;<span class="op" id="7192144">-</span><span class="num" id="7192145">6</span><span class="op" id="7192146">*</span><span class="num" id="7192147">60</span><span class="op" id="7192149">*</span><span class="num" id="7192150">60</span><span class="op" id="7192152">)</span><span class="op" id="7192153">)</span><span class="op" id="7192154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192158">}</span><span class="op" id="7192159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192163">//&nbsp;RFC5322,&nbsp;Appendix&nbsp;A.6.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192192">//&nbsp;Obsolete&nbsp;date.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192217">&#34;21&nbsp;Nov&nbsp;97&nbsp;09:55:06&nbsp;GMT&#34;</span><span class="op" id="7192241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192246">time</span><span class="op" id="7192250">.</span><span class="ident" id="7192251">Date</span><span class="op" id="7192255">(</span><span class="num" id="7192256">1997</span><span class="op" id="7192260">,</span>&nbsp;<span class="num" id="7192262">11</span><span class="op" id="7192264">,</span>&nbsp;<span class="num" id="7192266">21</span><span class="op" id="7192268">,</span>&nbsp;<span class="num" id="7192270">9</span><span class="op" id="7192271">,</span>&nbsp;<span class="num" id="7192273">55</span><span class="op" id="7192275">,</span>&nbsp;<span class="num" id="7192277">6</span><span class="op" id="7192278">,</span>&nbsp;<span class="num" id="7192280">0</span><span class="op" id="7192281">,</span>&nbsp;<span class="ident" id="7192283">time</span><span class="op" id="7192287">.</span><span class="ident" id="7192288">FixedZone</span><span class="op" id="7192297">(</span><span class="string" id="7192298">&#34;GMT&#34;</span><span class="op" id="7192303">,</span>&nbsp;<span class="num" id="7192305">0</span><span class="op" id="7192306">)</span><span class="op" id="7192307">)</span><span class="op" id="7192308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192312">}</span><span class="op" id="7192313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7192317">//&nbsp;Commonly&nbsp;found&nbsp;format&nbsp;not&nbsp;specified&nbsp;by&nbsp;RFC&nbsp;5322.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192376">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&nbsp;(MDT)&#34;</span><span class="op" id="7192415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192420">time</span><span class="op" id="7192424">.</span><span class="ident" id="7192425">Date</span><span class="op" id="7192429">(</span><span class="num" id="7192430">1997</span><span class="op" id="7192434">,</span>&nbsp;<span class="num" id="7192436">11</span><span class="op" id="7192438">,</span>&nbsp;<span class="num" id="7192440">21</span><span class="op" id="7192442">,</span>&nbsp;<span class="num" id="7192444">9</span><span class="op" id="7192445">,</span>&nbsp;<span class="num" id="7192447">55</span><span class="op" id="7192449">,</span>&nbsp;<span class="num" id="7192451">6</span><span class="op" id="7192452">,</span>&nbsp;<span class="num" id="7192454">0</span><span class="op" id="7192455">,</span>&nbsp;<span class="ident" id="7192457">time</span><span class="op" id="7192461">.</span><span class="ident" id="7192462">FixedZone</span><span class="op" id="7192471">(</span><span class="string" id="7192472">&#34;&#34;</span><span class="op" id="7192474">,</span>&nbsp;<span class="op" id="7192476">-</span><span class="num" id="7192477">6</span><span class="op" id="7192478">*</span><span class="num" id="7192479">60</span><span class="op" id="7192481">*</span><span class="num" id="7192482">60</span><span class="op" id="7192484">)</span><span class="op" id="7192485">)</span><span class="op" id="7192486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192490">}</span><span class="op" id="7192491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192494">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192497">for</span>&nbsp;<span class="ident" id="7192501">_</span><span class="op" id="7192502">,</span>&nbsp;<span class="ident" id="7192504">test</span>&nbsp;<span class="op" id="7192509">:=</span>&nbsp;<span class="keyword" id="7192512">range</span>&nbsp;<span class="ident" id="7192518">tests</span>&nbsp;<span class="op" id="7192524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192528">hdr</span>&nbsp;<span class="op" id="7192532">:=</span>&nbsp;<span class="ident" id="7192535">Header</span><span class="op" id="7192541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7192546">&#34;Date&#34;</span><span class="op" id="7192552">:</span>&nbsp;<span class="op" id="7192554">[</span><span class="op" id="7192555">]</span><span class="builtintype" id="7192556">string</span><span class="op" id="7192562">{</span><span class="ident" id="7192563">test</span><span class="op" id="7192567">.</span><span class="ident" id="7192568">dateStr</span><span class="op" id="7192575">}</span><span class="op" id="7192576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192584">date</span><span class="op" id="7192588">,</span>&nbsp;<span class="ident" id="7192590">err</span>&nbsp;<span class="op" id="7192594">:=</span>&nbsp;<span class="ident" id="7192597">hdr</span><span class="op" id="7192600">.</span><span class="ident" id="7192601">Date</span><span class="op" id="7192605">(</span><span class="op" id="7192606">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192610">if</span>&nbsp;<span class="ident" id="7192613">err</span>&nbsp;<span class="op" id="7192617">!=</span>&nbsp;<span class="builtintype" id="7192620">nil</span>&nbsp;<span class="op" id="7192624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192629">t</span><span class="op" id="7192630">.</span><span class="ident" id="7192631">Errorf</span><span class="op" id="7192637">(</span><span class="string" id="7192638">&#34;Failed&nbsp;parsing&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7192661">,</span>&nbsp;<span class="ident" id="7192663">test</span><span class="op" id="7192667">.</span><span class="ident" id="7192668">dateStr</span><span class="op" id="7192675">,</span>&nbsp;<span class="ident" id="7192677">err</span><span class="op" id="7192680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192685">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192700">if</span>&nbsp;<span class="op" id="7192703">!</span><span class="ident" id="7192704">date</span><span class="op" id="7192708">.</span><span class="ident" id="7192709">Equal</span><span class="op" id="7192714">(</span><span class="ident" id="7192715">test</span><span class="op" id="7192719">.</span><span class="ident" id="7192720">exp</span><span class="op" id="7192723">)</span>&nbsp;<span class="op" id="7192725">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192730">t</span><span class="op" id="7192731">.</span><span class="ident" id="7192732">Errorf</span><span class="op" id="7192738">(</span><span class="string" id="7192739">&#34;Parse&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7192771">,</span>&nbsp;<span class="ident" id="7192773">test</span><span class="op" id="7192777">.</span><span class="ident" id="7192778">dateStr</span><span class="op" id="7192785">,</span>&nbsp;<span class="ident" id="7192787">date</span><span class="op" id="7192791">,</span>&nbsp;<span class="ident" id="7192793">test</span><span class="op" id="7192797">.</span><span class="ident" id="7192798">exp</span><span class="op" id="7192801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7192808">}</span><br>
<span class="lineno"></span><span class="op" id="7192810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7192813">func</span>&nbsp;<span class="ident" id="7192818">TestAddressParsingError</span><span class="op" id="7192841">(</span><span class="ident" id="7192842">t</span>&nbsp;<span class="op" id="7192844">*</span><span class="ident" id="7192845">testing</span><span class="op" id="7192852">.</span><span class="ident" id="7192853">T</span><span class="op" id="7192854">)</span>&nbsp;<span class="op" id="7192856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192859">const</span>&nbsp;<span class="ident" id="7192865">txt</span>&nbsp;<span class="op" id="7192869">=</span>&nbsp;<span class="string" id="7192871">&#34;=?iso-8859-2?Q?Bogl=E1rka_Tak=E1cs?=&nbsp;&lt;unknown@gmail.com&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7192931">_</span><span class="op" id="7192932">,</span>&nbsp;<span class="ident" id="7192934">err</span>&nbsp;<span class="op" id="7192938">:=</span>&nbsp;<span class="ident" id="7192941">ParseAddress</span><span class="op" id="7192953">(</span><span class="ident" id="7192954">txt</span><span class="op" id="7192957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7192960">if</span>&nbsp;<span class="ident" id="7192963">err</span>&nbsp;<span class="op" id="7192967">==</span>&nbsp;<span class="builtintype" id="7192970">nil</span>&nbsp;<span class="op" id="7192974">||</span>&nbsp;<span class="op" id="7192977">!</span><span class="ident" id="7192978">strings</span><span class="op" id="7192985">.</span><span class="ident" id="7192986">Contains</span><span class="op" id="7192994">(</span><span class="ident" id="7192995">err</span><span class="op" id="7192998">.</span><span class="ident" id="7192999">Error</span><span class="op" id="7193004">(</span><span class="op" id="7193005">)</span><span class="op" id="7193006">,</span>&nbsp;<span class="string" id="7193008">&#34;charset&nbsp;not&nbsp;supported&#34;</span><span class="op" id="7193031">)</span>&nbsp;<span class="op" id="7193033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193037">t</span><span class="op" id="7193038">.</span><span class="ident" id="7193039">Errorf</span><span class="op" id="7193045">(</span><span class="string" id="7193046">`mail.ParseAddress(%q)&nbsp;err:&nbsp;%q,&nbsp;want&nbsp;&#34;.*charset&nbsp;not&nbsp;supported.*&#34;`</span><span class="op" id="7193111">,</span>&nbsp;<span class="ident" id="7193113">txt</span><span class="op" id="7193116">,</span>&nbsp;<span class="ident" id="7193118">err</span><span class="op" id="7193121">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193124">}</span><br>
<span class="lineno"></span><span class="op" id="7193126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7193129">func</span>&nbsp;<span class="ident" id="7193134">TestAddressParsing</span><span class="op" id="7193152">(</span><span class="ident" id="7193153">t</span>&nbsp;<span class="op" id="7193155">*</span><span class="ident" id="7193156">testing</span><span class="op" id="7193163">.</span><span class="ident" id="7193164">T</span><span class="op" id="7193165">)</span>&nbsp;<span class="op" id="7193167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193170">tests</span>&nbsp;<span class="op" id="7193176">:=</span>&nbsp;<span class="op" id="7193179">[</span><span class="op" id="7193180">]</span><span class="keyword" id="7193181">struct</span>&nbsp;<span class="op" id="7193188">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193192">addrsStr</span>&nbsp;<span class="builtintype" id="7193201">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193210">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193219">[</span><span class="op" id="7193220">]</span><span class="op" id="7193221">*</span><span class="ident" id="7193222">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193231">}</span><span class="op" id="7193232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193236">//&nbsp;Bare&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193254">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193259">`jdoe@machine.example`</span><span class="op" id="7193281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193286">[</span><span class="op" id="7193287">]</span><span class="op" id="7193288">*</span><span class="ident" id="7193289">Address</span><span class="op" id="7193296">{</span><span class="op" id="7193297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193303">Address</span><span class="op" id="7193310">:</span>&nbsp;<span class="string" id="7193312">&#34;jdoe@machine.example&#34;</span><span class="op" id="7193334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193339">}</span><span class="op" id="7193340">}</span><span class="op" id="7193341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193345">}</span><span class="op" id="7193346">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193350">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193385">`John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;`</span><span class="op" id="7193418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193423">[</span><span class="op" id="7193424">]</span><span class="op" id="7193425">*</span><span class="ident" id="7193426">Address</span><span class="op" id="7193433">{</span><span class="op" id="7193434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193440">Name</span><span class="op" id="7193444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193449">&#34;John&nbsp;Doe&#34;</span><span class="op" id="7193459">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193465">Address</span><span class="op" id="7193472">:</span>&nbsp;<span class="string" id="7193474">&#34;jdoe@machine.example&#34;</span><span class="op" id="7193496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193501">}</span><span class="op" id="7193502">}</span><span class="op" id="7193503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193507">}</span><span class="op" id="7193508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7193512">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193542">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193547">`&#34;Joe&nbsp;Q.&nbsp;Public&#34;&nbsp;&lt;john.q.public@example.com&gt;`</span><span class="op" id="7193592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193597">[</span><span class="op" id="7193598">]</span><span class="op" id="7193599">*</span><span class="ident" id="7193600">Address</span><span class="op" id="7193607">{</span><span class="op" id="7193608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193614">Name</span><span class="op" id="7193618">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193623">&#34;Joe&nbsp;Q.&nbsp;Public&#34;</span><span class="op" id="7193638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193644">Address</span><span class="op" id="7193651">:</span>&nbsp;<span class="string" id="7193653">&#34;john.q.public@example.com&#34;</span><span class="op" id="7193680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193685">}</span><span class="op" id="7193686">}</span><span class="op" id="7193687">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193691">}</span><span class="op" id="7193692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193701">`Mary&nbsp;Smith&nbsp;&lt;mary@x.test&gt;,&nbsp;jdoe@example.org,&nbsp;Who?&nbsp;&lt;one@y.test&gt;`</span><span class="op" id="7193764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193769">[</span><span class="op" id="7193770">]</span><span class="op" id="7193771">*</span><span class="ident" id="7193772">Address</span><span class="op" id="7193779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193785">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193792">Name</span><span class="op" id="7193796">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193801">&#34;Mary&nbsp;Smith&#34;</span><span class="op" id="7193813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193820">Address</span><span class="op" id="7193827">:</span>&nbsp;<span class="string" id="7193829">&#34;mary@x.test&#34;</span><span class="op" id="7193842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193848">}</span><span class="op" id="7193849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193862">Address</span><span class="op" id="7193869">:</span>&nbsp;<span class="string" id="7193871">&#34;jdoe@example.org&#34;</span><span class="op" id="7193889">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193895">}</span><span class="op" id="7193896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193909">Name</span><span class="op" id="7193913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193918">&#34;Who?&#34;</span><span class="op" id="7193924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7193931">Address</span><span class="op" id="7193938">:</span>&nbsp;<span class="string" id="7193940">&#34;one@y.test&#34;</span><span class="op" id="7193952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193958">}</span><span class="op" id="7193959">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193964">}</span><span class="op" id="7193965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193969">}</span><span class="op" id="7193970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7193974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7193979">`&lt;boss@nil.test&gt;,&nbsp;&#34;Giant;&nbsp;\&#34;Big\&#34;&nbsp;Box&#34;&nbsp;&lt;sysservices@example.net&gt;`</span><span class="op" id="7194044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194049">[</span><span class="op" id="7194050">]</span><span class="op" id="7194051">*</span><span class="ident" id="7194052">Address</span><span class="op" id="7194059">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194072">Address</span><span class="op" id="7194079">:</span>&nbsp;<span class="string" id="7194081">&#34;boss@nil.test&#34;</span><span class="op" id="7194096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194102">}</span><span class="op" id="7194103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194116">Name</span><span class="op" id="7194120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194125">`Giant;&nbsp;&#34;Big&#34;&nbsp;Box`</span><span class="op" id="7194143">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194150">Address</span><span class="op" id="7194157">:</span>&nbsp;<span class="string" id="7194159">&#34;sysservices@example.net&#34;</span><span class="op" id="7194184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194190">}</span><span class="op" id="7194191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194196">}</span><span class="op" id="7194197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194201">}</span><span class="op" id="7194202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194206">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.3</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194236">//&nbsp;TODO(dsymonds):&nbsp;Group&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194275">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194326">`=?iso-8859-1?q?J=F6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7194375">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194380">[</span><span class="op" id="7194381">]</span><span class="op" id="7194382">*</span><span class="ident" id="7194383">Address</span><span class="op" id="7194390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194403">Name</span><span class="op" id="7194407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194412">`Jörg&nbsp;Doe`</span><span class="op" id="7194423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194430">Address</span><span class="op" id="7194437">:</span>&nbsp;<span class="string" id="7194439">&#34;joerg@example.com&#34;</span><span class="op" id="7194458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194464">}</span><span class="op" id="7194465">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194470">}</span><span class="op" id="7194471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194475">}</span><span class="op" id="7194476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194480">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;US-ASCII&nbsp;address.&nbsp;Dumb&nbsp;but&nbsp;legal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194545">`=?us-ascii?q?J=6Frg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7194592">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194597">[</span><span class="op" id="7194598">]</span><span class="op" id="7194599">*</span><span class="ident" id="7194600">Address</span><span class="op" id="7194607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194620">Name</span><span class="op" id="7194624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194629">`Jorg&nbsp;Doe`</span><span class="op" id="7194639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194646">Address</span><span class="op" id="7194653">:</span>&nbsp;<span class="string" id="7194655">&#34;joerg@example.com&#34;</span><span class="op" id="7194674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194680">}</span><span class="op" id="7194681">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194686">}</span><span class="op" id="7194687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194691">}</span><span class="op" id="7194692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194696">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194742">`=?utf-8?q?J=C3=B6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7194789">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194794">[</span><span class="op" id="7194795">]</span><span class="op" id="7194796">*</span><span class="ident" id="7194797">Address</span><span class="op" id="7194804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194817">Name</span><span class="op" id="7194821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194826">`Jörg&nbsp;Doe`</span><span class="op" id="7194837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7194844">Address</span><span class="op" id="7194851">:</span>&nbsp;<span class="string" id="7194853">&#34;joerg@example.com&#34;</span><span class="op" id="7194872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194878">}</span><span class="op" id="7194879">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194884">}</span><span class="op" id="7194885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194889">}</span><span class="op" id="7194890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7194894">//&nbsp;RFC&nbsp;2047,&nbsp;Section&nbsp;8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7194925">`=?ISO-8859-1?Q?Andr=E9?=&nbsp;Pirard&nbsp;&lt;PIRARD@vm1.ulg.ac.be&gt;`</span><span class="op" id="7194981">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7194986">[</span><span class="op" id="7194987">]</span><span class="op" id="7194988">*</span><span class="ident" id="7194989">Address</span><span class="op" id="7194996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195009">Name</span><span class="op" id="7195013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195018">`André&nbsp;Pirard`</span><span class="op" id="7195033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195040">Address</span><span class="op" id="7195047">:</span>&nbsp;<span class="string" id="7195049">&#34;PIRARD@vm1.ulg.ac.be&#34;</span><span class="op" id="7195071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195077">}</span><span class="op" id="7195078">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195083">}</span><span class="op" id="7195084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195088">}</span><span class="op" id="7195089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7195093">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195162">`=?ISO-8859-1?B?SvZyZw==?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7195209">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195214">[</span><span class="op" id="7195215">]</span><span class="op" id="7195216">*</span><span class="ident" id="7195217">Address</span><span class="op" id="7195224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195237">Name</span><span class="op" id="7195241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195246">`Jörg`</span><span class="op" id="7195253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195260">Address</span><span class="op" id="7195267">:</span>&nbsp;<span class="string" id="7195269">&#34;joerg@example.com&#34;</span><span class="op" id="7195288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195294">}</span><span class="op" id="7195295">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195300">}</span><span class="op" id="7195301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195305">}</span><span class="op" id="7195306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7195310">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195374">`=?UTF-8?B?SsO2cmc=?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7195416">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195421">[</span><span class="op" id="7195422">]</span><span class="op" id="7195423">*</span><span class="ident" id="7195424">Address</span><span class="op" id="7195431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195444">Name</span><span class="op" id="7195448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195453">`Jörg`</span><span class="op" id="7195460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195467">Address</span><span class="op" id="7195474">:</span>&nbsp;<span class="string" id="7195476">&#34;joerg@example.com&#34;</span><span class="op" id="7195495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195501">}</span><span class="op" id="7195502">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195507">}</span><span class="op" id="7195508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195512">}</span><span class="op" id="7195513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7195517">//&nbsp;Custom&nbsp;example&nbsp;with&nbsp;&#34;.&#34;&nbsp;in&nbsp;name.&nbsp;For&nbsp;issue&nbsp;4938</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195575">`Asem&nbsp;H.&nbsp;&lt;noreply@example.com&gt;`</span><span class="op" id="7195606">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195611">[</span><span class="op" id="7195612">]</span><span class="op" id="7195613">*</span><span class="ident" id="7195614">Address</span><span class="op" id="7195621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195634">Name</span><span class="op" id="7195638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7195643">`Asem&nbsp;H.`</span><span class="op" id="7195652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195659">Address</span><span class="op" id="7195666">:</span>&nbsp;<span class="string" id="7195668">&#34;noreply@example.com&#34;</span><span class="op" id="7195689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195695">}</span><span class="op" id="7195696">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195701">}</span><span class="op" id="7195702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195706">}</span><span class="op" id="7195707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195713">for</span>&nbsp;<span class="ident" id="7195717">_</span><span class="op" id="7195718">,</span>&nbsp;<span class="ident" id="7195720">test</span>&nbsp;<span class="op" id="7195725">:=</span>&nbsp;<span class="keyword" id="7195728">range</span>&nbsp;<span class="ident" id="7195734">tests</span>&nbsp;<span class="op" id="7195740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195744">if</span>&nbsp;<span class="builtinfunc" id="7195747">len</span><span class="op" id="7195750">(</span><span class="ident" id="7195751">test</span><span class="op" id="7195755">.</span><span class="ident" id="7195756">exp</span><span class="op" id="7195759">)</span>&nbsp;<span class="op" id="7195761">==</span>&nbsp;<span class="num" id="7195764">1</span>&nbsp;<span class="op" id="7195766">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195771">addr</span><span class="op" id="7195775">,</span>&nbsp;<span class="ident" id="7195777">err</span>&nbsp;<span class="op" id="7195781">:=</span>&nbsp;<span class="ident" id="7195784">ParseAddress</span><span class="op" id="7195796">(</span><span class="ident" id="7195797">test</span><span class="op" id="7195801">.</span><span class="ident" id="7195802">addrsStr</span><span class="op" id="7195810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195815">if</span>&nbsp;<span class="ident" id="7195818">err</span>&nbsp;<span class="op" id="7195822">!=</span>&nbsp;<span class="builtintype" id="7195825">nil</span>&nbsp;<span class="op" id="7195829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195835">t</span><span class="op" id="7195836">.</span><span class="ident" id="7195837">Errorf</span><span class="op" id="7195843">(</span><span class="string" id="7195844">&#34;Failed&nbsp;parsing&nbsp;(single)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7195876">,</span>&nbsp;<span class="ident" id="7195878">test</span><span class="op" id="7195882">.</span><span class="ident" id="7195883">addrsStr</span><span class="op" id="7195891">,</span>&nbsp;<span class="ident" id="7195893">err</span><span class="op" id="7195896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195902">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7195914">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7195919">if</span>&nbsp;<span class="op" id="7195922">!</span><span class="ident" id="7195923">reflect</span><span class="op" id="7195930">.</span><span class="ident" id="7195931">DeepEqual</span><span class="op" id="7195940">(</span><span class="op" id="7195941">[</span><span class="op" id="7195942">]</span><span class="op" id="7195943">*</span><span class="ident" id="7195944">Address</span><span class="op" id="7195951">{</span><span class="ident" id="7195952">addr</span><span class="op" id="7195956">}</span><span class="op" id="7195957">,</span>&nbsp;<span class="ident" id="7195959">test</span><span class="op" id="7195963">.</span><span class="ident" id="7195964">exp</span><span class="op" id="7195967">)</span>&nbsp;<span class="op" id="7195969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7195975">t</span><span class="op" id="7195976">.</span><span class="ident" id="7195977">Errorf</span><span class="op" id="7195983">(</span><span class="string" id="7195984">&#34;Parse&nbsp;(single)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7196025">,</span>&nbsp;<span class="ident" id="7196027">test</span><span class="op" id="7196031">.</span><span class="ident" id="7196032">addrsStr</span><span class="op" id="7196040">,</span>&nbsp;<span class="ident" id="7196042">addr</span><span class="op" id="7196046">,</span>&nbsp;<span class="ident" id="7196048">test</span><span class="op" id="7196052">.</span><span class="ident" id="7196053">exp</span><span class="op" id="7196056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196070">addrs</span><span class="op" id="7196075">,</span>&nbsp;<span class="ident" id="7196077">err</span>&nbsp;<span class="op" id="7196081">:=</span>&nbsp;<span class="ident" id="7196084">ParseAddressList</span><span class="op" id="7196100">(</span><span class="ident" id="7196101">test</span><span class="op" id="7196105">.</span><span class="ident" id="7196106">addrsStr</span><span class="op" id="7196114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196118">if</span>&nbsp;<span class="ident" id="7196121">err</span>&nbsp;<span class="op" id="7196125">!=</span>&nbsp;<span class="builtintype" id="7196128">nil</span>&nbsp;<span class="op" id="7196132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196137">t</span><span class="op" id="7196138">.</span><span class="ident" id="7196139">Errorf</span><span class="op" id="7196145">(</span><span class="string" id="7196146">&#34;Failed&nbsp;parsing&nbsp;(list)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7196176">,</span>&nbsp;<span class="ident" id="7196178">test</span><span class="op" id="7196182">.</span><span class="ident" id="7196183">addrsStr</span><span class="op" id="7196191">,</span>&nbsp;<span class="ident" id="7196193">err</span><span class="op" id="7196196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196201">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196212">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196216">if</span>&nbsp;<span class="op" id="7196219">!</span><span class="ident" id="7196220">reflect</span><span class="op" id="7196227">.</span><span class="ident" id="7196228">DeepEqual</span><span class="op" id="7196237">(</span><span class="ident" id="7196238">addrs</span><span class="op" id="7196243">,</span>&nbsp;<span class="ident" id="7196245">test</span><span class="op" id="7196249">.</span><span class="ident" id="7196250">exp</span><span class="op" id="7196253">)</span>&nbsp;<span class="op" id="7196255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196260">t</span><span class="op" id="7196261">.</span><span class="ident" id="7196262">Errorf</span><span class="op" id="7196268">(</span><span class="string" id="7196269">&#34;Parse&nbsp;(list)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7196308">,</span>&nbsp;<span class="ident" id="7196310">test</span><span class="op" id="7196314">.</span><span class="ident" id="7196315">addrsStr</span><span class="op" id="7196323">,</span>&nbsp;<span class="ident" id="7196325">addrs</span><span class="op" id="7196330">,</span>&nbsp;<span class="ident" id="7196332">test</span><span class="op" id="7196336">.</span><span class="ident" id="7196337">exp</span><span class="op" id="7196340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196347">}</span><br>
<span class="lineno"></span><span class="op" id="7196349">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7196352">func</span>&nbsp;<span class="ident" id="7196357">TestAddressFormatting</span><span class="op" id="7196378">(</span><span class="ident" id="7196379">t</span>&nbsp;<span class="op" id="7196381">*</span><span class="ident" id="7196382">testing</span><span class="op" id="7196389">.</span><span class="ident" id="7196390">T</span><span class="op" id="7196391">)</span>&nbsp;<span class="op" id="7196393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196396">tests</span>&nbsp;<span class="op" id="7196402">:=</span>&nbsp;<span class="op" id="7196405">[</span><span class="op" id="7196406">]</span><span class="keyword" id="7196407">struct</span>&nbsp;<span class="op" id="7196414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196418">addr</span>&nbsp;<span class="op" id="7196423">*</span><span class="ident" id="7196424">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7196434">exp</span>&nbsp;&nbsp;<span class="builtintype" id="7196439">string</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196447">}</span><span class="op" id="7196448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196457">&amp;</span><span class="ident" id="7196458">Address</span><span class="op" id="7196465">{</span><span class="ident" id="7196466">Address</span><span class="op" id="7196473">:</span>&nbsp;<span class="string" id="7196475">&#34;bob@example.com&#34;</span><span class="op" id="7196492">}</span><span class="op" id="7196493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7196498">&#34;&lt;bob@example.com&gt;&#34;</span><span class="op" id="7196517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196521">}</span><span class="op" id="7196522">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196531">&amp;</span><span class="ident" id="7196532">Address</span><span class="op" id="7196539">{</span><span class="ident" id="7196540">Name</span><span class="op" id="7196544">:</span>&nbsp;<span class="string" id="7196546">&#34;Bob&#34;</span><span class="op" id="7196551">,</span>&nbsp;<span class="ident" id="7196553">Address</span><span class="op" id="7196560">:</span>&nbsp;<span class="string" id="7196562">&#34;bob@example.com&#34;</span><span class="op" id="7196579">}</span><span class="op" id="7196580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7196585">`&#34;Bob&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7196610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196614">}</span><span class="op" id="7196615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196619">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7196624">//&nbsp;note&nbsp;the&nbsp;ö&nbsp;(o&nbsp;with&nbsp;an&nbsp;umlaut)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196661">&amp;</span><span class="ident" id="7196662">Address</span><span class="op" id="7196669">{</span><span class="ident" id="7196670">Name</span><span class="op" id="7196674">:</span>&nbsp;<span class="string" id="7196676">&#34;Böb&#34;</span><span class="op" id="7196682">,</span>&nbsp;<span class="ident" id="7196684">Address</span><span class="op" id="7196691">:</span>&nbsp;<span class="string" id="7196693">&#34;bob@example.com&#34;</span><span class="op" id="7196710">}</span><span class="op" id="7196711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7196716">`=?utf-8?q?B=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7196756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196760">}</span><span class="op" id="7196761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196765">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196770">&amp;</span><span class="ident" id="7196771">Address</span><span class="op" id="7196778">{</span><span class="ident" id="7196779">Name</span><span class="op" id="7196783">:</span>&nbsp;<span class="string" id="7196785">&#34;Bob&nbsp;Jane&#34;</span><span class="op" id="7196795">,</span>&nbsp;<span class="ident" id="7196797">Address</span><span class="op" id="7196804">:</span>&nbsp;<span class="string" id="7196806">&#34;bob@example.com&#34;</span><span class="op" id="7196823">}</span><span class="op" id="7196824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7196829">`&#34;Bob&nbsp;Jane&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7196859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196863">}</span><span class="op" id="7196864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196873">&amp;</span><span class="ident" id="7196874">Address</span><span class="op" id="7196881">{</span><span class="ident" id="7196882">Name</span><span class="op" id="7196886">:</span>&nbsp;<span class="string" id="7196888">&#34;Böb&nbsp;Jacöb&#34;</span><span class="op" id="7196901">,</span>&nbsp;<span class="ident" id="7196903">Address</span><span class="op" id="7196910">:</span>&nbsp;<span class="string" id="7196912">&#34;bob@example.com&#34;</span><span class="op" id="7196929">}</span><span class="op" id="7196930">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7196935">`=?utf-8?q?B=C3=B6b_Jac=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7196986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196990">}</span><span class="op" id="7196991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7196994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7196997">for</span>&nbsp;<span class="ident" id="7197001">_</span><span class="op" id="7197002">,</span>&nbsp;<span class="ident" id="7197004">test</span>&nbsp;<span class="op" id="7197009">:=</span>&nbsp;<span class="keyword" id="7197012">range</span>&nbsp;<span class="ident" id="7197018">tests</span>&nbsp;<span class="op" id="7197024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7197028">s</span>&nbsp;<span class="op" id="7197030">:=</span>&nbsp;<span class="ident" id="7197033">test</span><span class="op" id="7197037">.</span><span class="ident" id="7197038">addr</span><span class="op" id="7197042">.</span><span class="ident" id="7197043">String</span><span class="op" id="7197049">(</span><span class="op" id="7197050">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7197054">if</span>&nbsp;<span class="ident" id="7197057">s</span>&nbsp;<span class="op" id="7197059">!=</span>&nbsp;<span class="ident" id="7197062">test</span><span class="op" id="7197066">.</span><span class="ident" id="7197067">exp</span>&nbsp;<span class="op" id="7197071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7197076">t</span><span class="op" id="7197077">.</span><span class="ident" id="7197078">Errorf</span><span class="op" id="7197084">(</span><span class="string" id="7197085">&#34;Address%+v.String()&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7197120">,</span>&nbsp;<span class="op" id="7197122">*</span><span class="ident" id="7197123">test</span><span class="op" id="7197127">.</span><span class="ident" id="7197128">addr</span><span class="op" id="7197132">,</span>&nbsp;<span class="ident" id="7197134">s</span><span class="op" id="7197135">,</span>&nbsp;<span class="ident" id="7197137">test</span><span class="op" id="7197141">.</span><span class="ident" id="7197142">exp</span><span class="op" id="7197145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7197149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7197152">}</span><br>
<span class="lineno"></span><span class="op" id="7197154">}</span>
</div>
</body>
</html>
