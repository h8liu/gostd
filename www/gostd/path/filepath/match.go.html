<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3328064">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3328119">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3328173">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3328224">package</span>&nbsp;<span class="ident" id="3328232">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3328242">import</span>&nbsp;<span class="op" id="3328249">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328252">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328262">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328268">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328279">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328287">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3328298">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3328313">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3328316">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3328377">var</span>&nbsp;<span class="ident" id="3328381">ErrBadPattern</span>&nbsp;<span class="op" id="3328395">=</span>&nbsp;<span class="ident" id="3328397">errors</span><span class="op" id="3328403">.</span><span class="ident" id="3328404">New</span><span class="op" id="3328407">(</span><span class="string" id="3328408">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3328433">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3328436">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3328503">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3328529">//</span><br>
<span class="lineno"></span><span class="comment" id="3328532">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno"></span><span class="comment" id="3328544">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3328557">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno">25</span><span class="comment" id="3328566">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3328631">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3328690">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3328730">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3328782">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3328845">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3328881">//</span><br>
<span class="lineno"></span><span class="comment" id="3328884">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno"></span><span class="comment" id="3328904">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3328962">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3328998">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3329052">//</span><br>
<span class="lineno"></span><span class="comment" id="3329055">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3329125">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3329192">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3329209">//</span><br>
<span class="lineno"></span><span class="comment" id="3329212">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3329277">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3329296">//</span><br>
<span class="lineno"></span><span class="keyword" id="3329299">func</span>&nbsp;<span class="ident" id="3329304">Match</span><span class="op" id="3329309">(</span><span class="ident" id="3329310">pattern</span><span class="op" id="3329317">,</span>&nbsp;<span class="ident" id="3329319">name</span>&nbsp;<span class="builtintype" id="3329324">string</span><span class="op" id="3329330">)</span>&nbsp;<span class="op" id="3329332">(</span><span class="ident" id="3329333">matched</span>&nbsp;<span class="builtintype" id="3329341">bool</span><span class="op" id="3329345">,</span>&nbsp;<span class="ident" id="3329347">err</span>&nbsp;<span class="builtintype" id="3329351">error</span><span class="op" id="3329356">)</span>&nbsp;<span class="op" id="3329358">{</span><br>
<span class="lineno">45</span><span class="ident" id="3329360">Pattern</span><span class="op" id="3329367">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329370">for</span>&nbsp;<span class="builtinfunc" id="3329374">len</span><span class="op" id="3329377">(</span><span class="ident" id="3329378">pattern</span><span class="op" id="3329385">)</span>&nbsp;<span class="op" id="3329387">&gt;</span>&nbsp;<span class="num" id="3329389">0</span>&nbsp;<span class="op" id="3329391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329395">var</span>&nbsp;<span class="ident" id="3329399">star</span>&nbsp;<span class="builtintype" id="3329404">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329411">var</span>&nbsp;<span class="ident" id="3329415">chunk</span>&nbsp;<span class="builtintype" id="3329421">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329430">star</span><span class="op" id="3329434">,</span>&nbsp;<span class="ident" id="3329436">chunk</span><span class="op" id="3329441">,</span>&nbsp;<span class="ident" id="3329443">pattern</span>&nbsp;<span class="op" id="3329451">=</span>&nbsp;<span class="ident" id="3329453">scanChunk</span><span class="op" id="3329462">(</span><span class="ident" id="3329463">pattern</span><span class="op" id="3329470">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329474">if</span>&nbsp;<span class="ident" id="3329477">star</span>&nbsp;<span class="op" id="3329482">&amp;&amp;</span>&nbsp;<span class="ident" id="3329485">chunk</span>&nbsp;<span class="op" id="3329491">==</span>&nbsp;<span class="string" id="3329494">&#34;&#34;</span>&nbsp;<span class="op" id="3329497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329502">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329561">return</span>&nbsp;<span class="ident" id="3329568">strings</span><span class="op" id="3329575">.</span><span class="ident" id="3329576">Index</span><span class="op" id="3329581">(</span><span class="ident" id="3329582">name</span><span class="op" id="3329586">,</span>&nbsp;<span class="builtintype" id="3329588">string</span><span class="op" id="3329594">(</span><span class="ident" id="3329595">Separator</span><span class="op" id="3329604">)</span><span class="op" id="3329605">)</span>&nbsp;<span class="op" id="3329607">&lt;</span>&nbsp;<span class="num" id="3329609">0</span><span class="op" id="3329610">,</span>&nbsp;<span class="builtintype" id="3329612">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329622">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329663">t</span><span class="op" id="3329664">,</span>&nbsp;<span class="ident" id="3329666">ok</span><span class="op" id="3329668">,</span>&nbsp;<span class="ident" id="3329670">err</span>&nbsp;<span class="op" id="3329674">:=</span>&nbsp;<span class="ident" id="3329677">matchChunk</span><span class="op" id="3329687">(</span><span class="ident" id="3329688">chunk</span><span class="op" id="3329693">,</span>&nbsp;<span class="ident" id="3329695">name</span><span class="op" id="3329699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329703">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329768">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329838">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329858">if</span>&nbsp;<span class="ident" id="3329861">ok</span>&nbsp;<span class="op" id="3329864">&amp;&amp;</span>&nbsp;<span class="op" id="3329867">(</span><span class="builtinfunc" id="3329868">len</span><span class="op" id="3329871">(</span><span class="ident" id="3329872">t</span><span class="op" id="3329873">)</span>&nbsp;<span class="op" id="3329875">==</span>&nbsp;<span class="num" id="3329878">0</span>&nbsp;<span class="op" id="3329880">||</span>&nbsp;<span class="builtinfunc" id="3329883">len</span><span class="op" id="3329886">(</span><span class="ident" id="3329887">pattern</span><span class="op" id="3329894">)</span>&nbsp;<span class="op" id="3329896">&gt;</span>&nbsp;<span class="num" id="3329898">0</span><span class="op" id="3329899">)</span>&nbsp;<span class="op" id="3329901">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329906">name</span>&nbsp;<span class="op" id="3329911">=</span>&nbsp;<span class="ident" id="3329913">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329918">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329933">if</span>&nbsp;<span class="ident" id="3329936">err</span>&nbsp;<span class="op" id="3329940">!=</span>&nbsp;<span class="builtintype" id="3329943">nil</span>&nbsp;<span class="op" id="3329947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329952">return</span>&nbsp;<span class="builtintype" id="3329959">false</span><span class="op" id="3329964">,</span>&nbsp;<span class="ident" id="3329966">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329976">if</span>&nbsp;<span class="ident" id="3329979">star</span>&nbsp;<span class="op" id="3329984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329989">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3330030">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330051">for</span>&nbsp;<span class="ident" id="3330055">i</span>&nbsp;<span class="op" id="3330057">:=</span>&nbsp;<span class="num" id="3330060">0</span><span class="op" id="3330061">;</span>&nbsp;<span class="ident" id="3330063">i</span>&nbsp;<span class="op" id="3330065">&lt;</span>&nbsp;<span class="builtinfunc" id="3330067">len</span><span class="op" id="3330070">(</span><span class="ident" id="3330071">name</span><span class="op" id="3330075">)</span>&nbsp;<span class="op" id="3330077">&amp;&amp;</span>&nbsp;<span class="ident" id="3330080">name</span><span class="op" id="3330084">[</span><span class="ident" id="3330085">i</span><span class="op" id="3330086">]</span>&nbsp;<span class="op" id="3330088">!=</span>&nbsp;<span class="ident" id="3330091">Separator</span><span class="op" id="3330100">;</span>&nbsp;<span class="ident" id="3330102">i</span><span class="op" id="3330103">++</span>&nbsp;<span class="op" id="3330106">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330112">t</span><span class="op" id="3330113">,</span>&nbsp;<span class="ident" id="3330115">ok</span><span class="op" id="3330117">,</span>&nbsp;<span class="ident" id="3330119">err</span>&nbsp;<span class="op" id="3330123">:=</span>&nbsp;<span class="ident" id="3330126">matchChunk</span><span class="op" id="3330136">(</span><span class="ident" id="3330137">chunk</span><span class="op" id="3330142">,</span>&nbsp;<span class="ident" id="3330144">name</span><span class="op" id="3330148">[</span><span class="ident" id="3330149">i</span><span class="op" id="3330150">+</span><span class="num" id="3330151">1</span><span class="op" id="3330152">:</span><span class="op" id="3330153">]</span><span class="op" id="3330154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330160">if</span>&nbsp;<span class="ident" id="3330163">ok</span>&nbsp;<span class="op" id="3330166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3330173">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330238">if</span>&nbsp;<span class="builtinfunc" id="3330241">len</span><span class="op" id="3330244">(</span><span class="ident" id="3330245">pattern</span><span class="op" id="3330252">)</span>&nbsp;<span class="op" id="3330254">==</span>&nbsp;<span class="num" id="3330257">0</span>&nbsp;<span class="op" id="3330259">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3330262">len</span><span class="op" id="3330265">(</span><span class="ident" id="3330266">t</span><span class="op" id="3330267">)</span>&nbsp;<span class="op" id="3330269">&gt;</span>&nbsp;<span class="num" id="3330271">0</span>&nbsp;<span class="op" id="3330273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330281">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330302">name</span>&nbsp;<span class="op" id="3330307">=</span>&nbsp;<span class="ident" id="3330309">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330316">continue</span>&nbsp;<span class="ident" id="3330325">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330343">if</span>&nbsp;<span class="ident" id="3330346">err</span>&nbsp;<span class="op" id="3330350">!=</span>&nbsp;<span class="builtintype" id="3330353">nil</span>&nbsp;<span class="op" id="3330357">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330364">return</span>&nbsp;<span class="builtintype" id="3330371">false</span><span class="op" id="3330376">,</span>&nbsp;<span class="ident" id="3330378">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330399">return</span>&nbsp;<span class="builtintype" id="3330406">false</span><span class="op" id="3330411">,</span>&nbsp;<span class="builtintype" id="3330413">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330421">return</span>&nbsp;<span class="builtinfunc" id="3330428">len</span><span class="op" id="3330431">(</span><span class="ident" id="3330432">name</span><span class="op" id="3330436">)</span>&nbsp;<span class="op" id="3330438">==</span>&nbsp;<span class="num" id="3330441">0</span><span class="op" id="3330442">,</span>&nbsp;<span class="builtintype" id="3330444">nil</span><br>
<span class="lineno"></span><span class="op" id="3330448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3330451">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3330525">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3330557">func</span>&nbsp;<span class="ident" id="3330562">scanChunk</span><span class="op" id="3330571">(</span><span class="ident" id="3330572">pattern</span>&nbsp;<span class="builtintype" id="3330580">string</span><span class="op" id="3330586">)</span>&nbsp;<span class="op" id="3330588">(</span><span class="ident" id="3330589">star</span>&nbsp;<span class="builtintype" id="3330594">bool</span><span class="op" id="3330598">,</span>&nbsp;<span class="ident" id="3330600">chunk</span><span class="op" id="3330605">,</span>&nbsp;<span class="ident" id="3330607">rest</span>&nbsp;<span class="builtintype" id="3330612">string</span><span class="op" id="3330618">)</span>&nbsp;<span class="op" id="3330620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330623">for</span>&nbsp;<span class="builtinfunc" id="3330627">len</span><span class="op" id="3330630">(</span><span class="ident" id="3330631">pattern</span><span class="op" id="3330638">)</span>&nbsp;<span class="op" id="3330640">&gt;</span>&nbsp;<span class="num" id="3330642">0</span>&nbsp;<span class="op" id="3330644">&amp;&amp;</span>&nbsp;<span class="ident" id="3330647">pattern</span><span class="op" id="3330654">[</span><span class="num" id="3330655">0</span><span class="op" id="3330656">]</span>&nbsp;<span class="op" id="3330658">==</span>&nbsp;<span class="string" id="3330661">&#39;*&#39;</span>&nbsp;<span class="op" id="3330665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330669">pattern</span>&nbsp;<span class="op" id="3330677">=</span>&nbsp;<span class="ident" id="3330679">pattern</span><span class="op" id="3330686">[</span><span class="num" id="3330687">1</span><span class="op" id="3330688">:</span><span class="op" id="3330689">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330693">star</span>&nbsp;<span class="op" id="3330698">=</span>&nbsp;<span class="builtintype" id="3330700">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330709">inrange</span>&nbsp;<span class="op" id="3330717">:=</span>&nbsp;<span class="builtintype" id="3330720">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330727">var</span>&nbsp;<span class="ident" id="3330731">i</span>&nbsp;<span class="builtintype" id="3330733">int</span><br>
<span class="lineno"></span><span class="ident" id="3330737">Scan</span><span class="op" id="3330741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330744">for</span>&nbsp;<span class="ident" id="3330748">i</span>&nbsp;<span class="op" id="3330750">=</span>&nbsp;<span class="num" id="3330752">0</span><span class="op" id="3330753">;</span>&nbsp;<span class="ident" id="3330755">i</span>&nbsp;<span class="op" id="3330757">&lt;</span>&nbsp;<span class="builtinfunc" id="3330759">len</span><span class="op" id="3330762">(</span><span class="ident" id="3330763">pattern</span><span class="op" id="3330770">)</span><span class="op" id="3330771">;</span>&nbsp;<span class="ident" id="3330773">i</span><span class="op" id="3330774">++</span>&nbsp;<span class="op" id="3330777">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330781">switch</span>&nbsp;<span class="ident" id="3330788">pattern</span><span class="op" id="3330795">[</span><span class="ident" id="3330796">i</span><span class="op" id="3330797">]</span>&nbsp;<span class="op" id="3330799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330803">case</span>&nbsp;<span class="string" id="3330808">&#39;\\&#39;</span><span class="op" id="3330812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330817">if</span>&nbsp;<span class="ident" id="3330820">runtime</span><span class="op" id="3330827">.</span><span class="ident" id="3330828">GOOS</span>&nbsp;<span class="op" id="3330833">!=</span>&nbsp;<span class="string" id="3330836">&#34;windows&#34;</span>&nbsp;<span class="op" id="3330846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3330852">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330907">if</span>&nbsp;<span class="ident" id="3330910">i</span><span class="op" id="3330911">+</span><span class="num" id="3330912">1</span>&nbsp;<span class="op" id="3330914">&lt;</span>&nbsp;<span class="builtinfunc" id="3330916">len</span><span class="op" id="3330919">(</span><span class="ident" id="3330920">pattern</span><span class="op" id="3330927">)</span>&nbsp;<span class="op" id="3330929">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330936">i</span><span class="op" id="3330937">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330953">case</span>&nbsp;<span class="string" id="3330958">&#39;[&#39;</span><span class="op" id="3330961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330966">inrange</span>&nbsp;<span class="op" id="3330974">=</span>&nbsp;<span class="builtintype" id="3330976">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330983">case</span>&nbsp;<span class="string" id="3330988">&#39;]&#39;</span><span class="op" id="3330991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330996">inrange</span>&nbsp;<span class="op" id="3331004">=</span>&nbsp;<span class="builtintype" id="3331006">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331014">case</span>&nbsp;<span class="string" id="3331019">&#39;*&#39;</span><span class="op" id="3331022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331027">if</span>&nbsp;<span class="op" id="3331030">!</span><span class="ident" id="3331031">inrange</span>&nbsp;<span class="op" id="3331039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331045">break</span>&nbsp;<span class="ident" id="3331051">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331069">return</span>&nbsp;<span class="ident" id="3331076">star</span><span class="op" id="3331080">,</span>&nbsp;<span class="ident" id="3331082">pattern</span><span class="op" id="3331089">[</span><span class="num" id="3331090">0</span><span class="op" id="3331091">:</span><span class="ident" id="3331092">i</span><span class="op" id="3331093">]</span><span class="op" id="3331094">,</span>&nbsp;<span class="ident" id="3331096">pattern</span><span class="op" id="3331103">[</span><span class="ident" id="3331104">i</span><span class="op" id="3331105">:</span><span class="op" id="3331106">]</span><br>
<span class="lineno"></span><span class="op" id="3331108">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3331111">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3331174">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3331233">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3331308">func</span>&nbsp;<span class="ident" id="3331313">matchChunk</span><span class="op" id="3331323">(</span><span class="ident" id="3331324">chunk</span><span class="op" id="3331329">,</span>&nbsp;<span class="ident" id="3331331">s</span>&nbsp;<span class="builtintype" id="3331333">string</span><span class="op" id="3331339">)</span>&nbsp;<span class="op" id="3331341">(</span><span class="ident" id="3331342">rest</span>&nbsp;<span class="builtintype" id="3331347">string</span><span class="op" id="3331353">,</span>&nbsp;<span class="ident" id="3331355">ok</span>&nbsp;<span class="builtintype" id="3331358">bool</span><span class="op" id="3331362">,</span>&nbsp;<span class="ident" id="3331364">err</span>&nbsp;<span class="builtintype" id="3331368">error</span><span class="op" id="3331373">)</span>&nbsp;<span class="op" id="3331375">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331378">for</span>&nbsp;<span class="builtinfunc" id="3331382">len</span><span class="op" id="3331385">(</span><span class="ident" id="3331386">chunk</span><span class="op" id="3331391">)</span>&nbsp;<span class="op" id="3331393">&gt;</span>&nbsp;<span class="num" id="3331395">0</span>&nbsp;<span class="op" id="3331397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331401">if</span>&nbsp;<span class="builtinfunc" id="3331404">len</span><span class="op" id="3331407">(</span><span class="ident" id="3331408">s</span><span class="op" id="3331409">)</span>&nbsp;<span class="op" id="3331411">==</span>&nbsp;<span class="num" id="3331414">0</span>&nbsp;<span class="op" id="3331416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331421">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331434">switch</span>&nbsp;<span class="ident" id="3331441">chunk</span><span class="op" id="3331446">[</span><span class="num" id="3331447">0</span><span class="op" id="3331448">]</span>&nbsp;<span class="op" id="3331450">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331454">case</span>&nbsp;<span class="string" id="3331459">&#39;[&#39;</span><span class="op" id="3331462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331467">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331489">r</span><span class="op" id="3331490">,</span>&nbsp;<span class="ident" id="3331492">n</span>&nbsp;<span class="op" id="3331494">:=</span>&nbsp;<span class="ident" id="3331497">utf8</span><span class="op" id="3331501">.</span><span class="ident" id="3331502">DecodeRuneInString</span><span class="op" id="3331520">(</span><span class="ident" id="3331521">s</span><span class="op" id="3331522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331527">s</span>&nbsp;<span class="op" id="3331529">=</span>&nbsp;<span class="ident" id="3331531">s</span><span class="op" id="3331532">[</span><span class="ident" id="3331533">n</span><span class="op" id="3331534">:</span><span class="op" id="3331535">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331540">chunk</span>&nbsp;<span class="op" id="3331546">=</span>&nbsp;<span class="ident" id="3331548">chunk</span><span class="op" id="3331553">[</span><span class="num" id="3331554">1</span><span class="op" id="3331555">:</span><span class="op" id="3331556">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331561">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331622">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331668">if</span>&nbsp;<span class="builtinfunc" id="3331671">len</span><span class="op" id="3331674">(</span><span class="ident" id="3331675">chunk</span><span class="op" id="3331680">)</span>&nbsp;<span class="op" id="3331682">==</span>&nbsp;<span class="num" id="3331685">0</span>&nbsp;<span class="op" id="3331687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331693">err</span>&nbsp;<span class="op" id="3331697">=</span>&nbsp;<span class="ident" id="3331699">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331717">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331732">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331755">negated</span>&nbsp;<span class="op" id="3331763">:=</span>&nbsp;<span class="ident" id="3331766">chunk</span><span class="op" id="3331771">[</span><span class="num" id="3331772">0</span><span class="op" id="3331773">]</span>&nbsp;<span class="op" id="3331775">==</span>&nbsp;<span class="string" id="3331778">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331785">if</span>&nbsp;<span class="ident" id="3331788">negated</span>&nbsp;<span class="op" id="3331796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331802">chunk</span>&nbsp;<span class="op" id="3331808">=</span>&nbsp;<span class="ident" id="3331810">chunk</span><span class="op" id="3331815">[</span><span class="num" id="3331816">1</span><span class="op" id="3331817">:</span><span class="op" id="3331818">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331828">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331851">match</span>&nbsp;<span class="op" id="3331857">:=</span>&nbsp;<span class="builtintype" id="3331860">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331869">nrange</span>&nbsp;<span class="op" id="3331876">:=</span>&nbsp;<span class="num" id="3331879">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331884">for</span>&nbsp;<span class="op" id="3331888">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331894">if</span>&nbsp;<span class="builtinfunc" id="3331897">len</span><span class="op" id="3331900">(</span><span class="ident" id="3331901">chunk</span><span class="op" id="3331906">)</span>&nbsp;<span class="op" id="3331908">&gt;</span>&nbsp;<span class="num" id="3331910">0</span>&nbsp;<span class="op" id="3331912">&amp;&amp;</span>&nbsp;<span class="ident" id="3331915">chunk</span><span class="op" id="3331920">[</span><span class="num" id="3331921">0</span><span class="op" id="3331922">]</span>&nbsp;<span class="op" id="3331924">==</span>&nbsp;<span class="string" id="3331927">&#39;]&#39;</span>&nbsp;<span class="op" id="3331931">&amp;&amp;</span>&nbsp;<span class="ident" id="3331934">nrange</span>&nbsp;<span class="op" id="3331941">&gt;</span>&nbsp;<span class="num" id="3331943">0</span>&nbsp;<span class="op" id="3331945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331952">chunk</span>&nbsp;<span class="op" id="3331958">=</span>&nbsp;<span class="ident" id="3331960">chunk</span><span class="op" id="3331965">[</span><span class="num" id="3331966">1</span><span class="op" id="3331967">:</span><span class="op" id="3331968">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331975">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331991">var</span>&nbsp;<span class="ident" id="3331995">lo</span><span class="op" id="3331997">,</span>&nbsp;<span class="ident" id="3331999">hi</span>&nbsp;<span class="builtintype" id="3332002">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332011">if</span>&nbsp;<span class="ident" id="3332014">lo</span><span class="op" id="3332016">,</span>&nbsp;<span class="ident" id="3332018">chunk</span><span class="op" id="3332023">,</span>&nbsp;<span class="ident" id="3332025">err</span>&nbsp;<span class="op" id="3332029">=</span>&nbsp;<span class="ident" id="3332031">getEsc</span><span class="op" id="3332037">(</span><span class="ident" id="3332038">chunk</span><span class="op" id="3332043">)</span><span class="op" id="3332044">;</span>&nbsp;<span class="ident" id="3332046">err</span>&nbsp;<span class="op" id="3332050">!=</span>&nbsp;<span class="builtintype" id="3332053">nil</span>&nbsp;<span class="op" id="3332057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332064">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332081">hi</span>&nbsp;<span class="op" id="3332084">=</span>&nbsp;<span class="ident" id="3332086">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332093">if</span>&nbsp;<span class="ident" id="3332096">chunk</span><span class="op" id="3332101">[</span><span class="num" id="3332102">0</span><span class="op" id="3332103">]</span>&nbsp;<span class="op" id="3332105">==</span>&nbsp;<span class="string" id="3332108">&#39;-&#39;</span>&nbsp;<span class="op" id="3332112">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332119">if</span>&nbsp;<span class="ident" id="3332122">hi</span><span class="op" id="3332124">,</span>&nbsp;<span class="ident" id="3332126">chunk</span><span class="op" id="3332131">,</span>&nbsp;<span class="ident" id="3332133">err</span>&nbsp;<span class="op" id="3332137">=</span>&nbsp;<span class="ident" id="3332139">getEsc</span><span class="op" id="3332145">(</span><span class="ident" id="3332146">chunk</span><span class="op" id="3332151">[</span><span class="num" id="3332152">1</span><span class="op" id="3332153">:</span><span class="op" id="3332154">]</span><span class="op" id="3332155">)</span><span class="op" id="3332156">;</span>&nbsp;<span class="ident" id="3332158">err</span>&nbsp;<span class="op" id="3332162">!=</span>&nbsp;<span class="builtintype" id="3332165">nil</span>&nbsp;<span class="op" id="3332169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332177">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332201">if</span>&nbsp;<span class="ident" id="3332204">lo</span>&nbsp;<span class="op" id="3332207">&lt;=</span>&nbsp;<span class="ident" id="3332210">r</span>&nbsp;<span class="op" id="3332212">&amp;&amp;</span>&nbsp;<span class="ident" id="3332215">r</span>&nbsp;<span class="op" id="3332217">&lt;=</span>&nbsp;<span class="ident" id="3332220">hi</span>&nbsp;<span class="op" id="3332223">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332230">match</span>&nbsp;<span class="op" id="3332236">=</span>&nbsp;<span class="builtintype" id="3332238">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332253">nrange</span><span class="op" id="3332259">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332270">if</span>&nbsp;<span class="ident" id="3332273">match</span>&nbsp;<span class="op" id="3332279">==</span>&nbsp;<span class="ident" id="3332282">negated</span>&nbsp;<span class="op" id="3332290">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332296">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332311">case</span>&nbsp;<span class="string" id="3332316">&#39;?&#39;</span><span class="op" id="3332319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332324">if</span>&nbsp;<span class="ident" id="3332327">s</span><span class="op" id="3332328">[</span><span class="num" id="3332329">0</span><span class="op" id="3332330">]</span>&nbsp;<span class="op" id="3332332">==</span>&nbsp;<span class="ident" id="3332335">Separator</span>&nbsp;<span class="op" id="3332345">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332351">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332366">_</span><span class="op" id="3332367">,</span>&nbsp;<span class="ident" id="3332369">n</span>&nbsp;<span class="op" id="3332371">:=</span>&nbsp;<span class="ident" id="3332374">utf8</span><span class="op" id="3332378">.</span><span class="ident" id="3332379">DecodeRuneInString</span><span class="op" id="3332397">(</span><span class="ident" id="3332398">s</span><span class="op" id="3332399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332404">s</span>&nbsp;<span class="op" id="3332406">=</span>&nbsp;<span class="ident" id="3332408">s</span><span class="op" id="3332409">[</span><span class="ident" id="3332410">n</span><span class="op" id="3332411">:</span><span class="op" id="3332412">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332417">chunk</span>&nbsp;<span class="op" id="3332423">=</span>&nbsp;<span class="ident" id="3332425">chunk</span><span class="op" id="3332430">[</span><span class="num" id="3332431">1</span><span class="op" id="3332432">:</span><span class="op" id="3332433">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332438">case</span>&nbsp;<span class="string" id="3332443">&#39;\\&#39;</span><span class="op" id="3332447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332452">if</span>&nbsp;<span class="ident" id="3332455">runtime</span><span class="op" id="3332462">.</span><span class="ident" id="3332463">GOOS</span>&nbsp;<span class="op" id="3332468">!=</span>&nbsp;<span class="string" id="3332471">&#34;windows&#34;</span>&nbsp;<span class="op" id="3332481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332487">chunk</span>&nbsp;<span class="op" id="3332493">=</span>&nbsp;<span class="ident" id="3332495">chunk</span><span class="op" id="3332500">[</span><span class="num" id="3332501">1</span><span class="op" id="3332502">:</span><span class="op" id="3332503">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332509">if</span>&nbsp;<span class="builtinfunc" id="3332512">len</span><span class="op" id="3332515">(</span><span class="ident" id="3332516">chunk</span><span class="op" id="3332521">)</span>&nbsp;<span class="op" id="3332523">==</span>&nbsp;<span class="num" id="3332526">0</span>&nbsp;<span class="op" id="3332528">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332535">err</span>&nbsp;<span class="op" id="3332539">=</span>&nbsp;<span class="ident" id="3332541">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332560">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332581">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332596">default</span><span class="op" id="3332603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332608">if</span>&nbsp;<span class="ident" id="3332611">chunk</span><span class="op" id="3332616">[</span><span class="num" id="3332617">0</span><span class="op" id="3332618">]</span>&nbsp;<span class="op" id="3332620">!=</span>&nbsp;<span class="ident" id="3332623">s</span><span class="op" id="3332624">[</span><span class="num" id="3332625">0</span><span class="op" id="3332626">]</span>&nbsp;<span class="op" id="3332628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332634">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332644">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332649">s</span>&nbsp;<span class="op" id="3332651">=</span>&nbsp;<span class="ident" id="3332653">s</span><span class="op" id="3332654">[</span><span class="num" id="3332655">1</span><span class="op" id="3332656">:</span><span class="op" id="3332657">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332662">chunk</span>&nbsp;<span class="op" id="3332668">=</span>&nbsp;<span class="ident" id="3332670">chunk</span><span class="op" id="3332675">[</span><span class="num" id="3332676">1</span><span class="op" id="3332677">:</span><span class="op" id="3332678">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332688">return</span>&nbsp;<span class="ident" id="3332695">s</span><span class="op" id="3332696">,</span>&nbsp;<span class="builtintype" id="3332698">true</span><span class="op" id="3332702">,</span>&nbsp;<span class="builtintype" id="3332704">nil</span><br>
<span class="lineno">200</span><span class="op" id="3332708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3332711">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3332790">func</span>&nbsp;<span class="ident" id="3332795">getEsc</span><span class="op" id="3332801">(</span><span class="ident" id="3332802">chunk</span>&nbsp;<span class="builtintype" id="3332808">string</span><span class="op" id="3332814">)</span>&nbsp;<span class="op" id="3332816">(</span><span class="ident" id="3332817">r</span>&nbsp;<span class="builtintype" id="3332819">rune</span><span class="op" id="3332823">,</span>&nbsp;<span class="ident" id="3332825">nchunk</span>&nbsp;<span class="builtintype" id="3332832">string</span><span class="op" id="3332838">,</span>&nbsp;<span class="ident" id="3332840">err</span>&nbsp;<span class="builtintype" id="3332844">error</span><span class="op" id="3332849">)</span>&nbsp;<span class="op" id="3332851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332854">if</span>&nbsp;<span class="builtinfunc" id="3332857">len</span><span class="op" id="3332860">(</span><span class="ident" id="3332861">chunk</span><span class="op" id="3332866">)</span>&nbsp;<span class="op" id="3332868">==</span>&nbsp;<span class="num" id="3332871">0</span>&nbsp;<span class="op" id="3332873">||</span>&nbsp;<span class="ident" id="3332876">chunk</span><span class="op" id="3332881">[</span><span class="num" id="3332882">0</span><span class="op" id="3332883">]</span>&nbsp;<span class="op" id="3332885">==</span>&nbsp;<span class="string" id="3332888">&#39;-&#39;</span>&nbsp;<span class="op" id="3332892">||</span>&nbsp;<span class="ident" id="3332895">chunk</span><span class="op" id="3332900">[</span><span class="num" id="3332901">0</span><span class="op" id="3332902">]</span>&nbsp;<span class="op" id="3332904">==</span>&nbsp;<span class="string" id="3332907">&#39;]&#39;</span>&nbsp;<span class="op" id="3332911">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3332915">err</span>&nbsp;<span class="op" id="3332919">=</span>&nbsp;<span class="ident" id="3332921">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332937">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3332948">if</span>&nbsp;<span class="ident" id="3332951">chunk</span><span class="op" id="3332956">[</span><span class="num" id="3332957">0</span><span class="op" id="3332958">]</span>&nbsp;<span class="op" id="3332960">==</span>&nbsp;<span class="string" id="3332963">&#39;\\&#39;</span>&nbsp;<span class="op" id="3332968">&amp;&amp;</span>&nbsp;<span class="ident" id="3332971">runtime</span><span class="op" id="3332978">.</span><span class="ident" id="3332979">GOOS</span>&nbsp;<span class="op" id="3332984">!=</span>&nbsp;<span class="string" id="3332987">&#34;windows&#34;</span>&nbsp;<span class="op" id="3332997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333001">chunk</span>&nbsp;<span class="op" id="3333007">=</span>&nbsp;<span class="ident" id="3333009">chunk</span><span class="op" id="3333014">[</span><span class="num" id="3333015">1</span><span class="op" id="3333016">:</span><span class="op" id="3333017">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333021">if</span>&nbsp;<span class="builtinfunc" id="3333024">len</span><span class="op" id="3333027">(</span><span class="ident" id="3333028">chunk</span><span class="op" id="3333033">)</span>&nbsp;<span class="op" id="3333035">==</span>&nbsp;<span class="num" id="3333038">0</span>&nbsp;<span class="op" id="3333040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333045">err</span>&nbsp;<span class="op" id="3333049">=</span>&nbsp;<span class="ident" id="3333051">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333068">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333080">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333083">r</span><span class="op" id="3333084">,</span>&nbsp;<span class="ident" id="3333086">n</span>&nbsp;<span class="op" id="3333088">:=</span>&nbsp;<span class="ident" id="3333091">utf8</span><span class="op" id="3333095">.</span><span class="ident" id="3333096">DecodeRuneInString</span><span class="op" id="3333114">(</span><span class="ident" id="3333115">chunk</span><span class="op" id="3333120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333123">if</span>&nbsp;<span class="ident" id="3333126">r</span>&nbsp;<span class="op" id="3333128">==</span>&nbsp;<span class="ident" id="3333131">utf8</span><span class="op" id="3333135">.</span><span class="ident" id="3333136">RuneError</span>&nbsp;<span class="op" id="3333146">&amp;&amp;</span>&nbsp;<span class="ident" id="3333149">n</span>&nbsp;<span class="op" id="3333151">==</span>&nbsp;<span class="num" id="3333154">1</span>&nbsp;<span class="op" id="3333156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333160">err</span>&nbsp;<span class="op" id="3333164">=</span>&nbsp;<span class="ident" id="3333166">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333184">nchunk</span>&nbsp;<span class="op" id="3333191">=</span>&nbsp;<span class="ident" id="3333193">chunk</span><span class="op" id="3333198">[</span><span class="ident" id="3333199">n</span><span class="op" id="3333200">:</span><span class="op" id="3333201">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333204">if</span>&nbsp;<span class="builtinfunc" id="3333207">len</span><span class="op" id="3333210">(</span><span class="ident" id="3333211">nchunk</span><span class="op" id="3333217">)</span>&nbsp;<span class="op" id="3333219">==</span>&nbsp;<span class="num" id="3333222">0</span>&nbsp;<span class="op" id="3333224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333228">err</span>&nbsp;<span class="op" id="3333232">=</span>&nbsp;<span class="ident" id="3333234">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333252">return</span><br>
<span class="lineno"></span><span class="op" id="3333259">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3333262">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3333325">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3333393">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3333461">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3333511">//</span><br>
<span class="lineno"></span><span class="comment" id="3333514">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3333589">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3333656">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3333673">func</span>&nbsp;<span class="ident" id="3333678">Glob</span><span class="op" id="3333682">(</span><span class="ident" id="3333683">pattern</span>&nbsp;<span class="builtintype" id="3333691">string</span><span class="op" id="3333697">)</span>&nbsp;<span class="op" id="3333699">(</span><span class="ident" id="3333700">matches</span>&nbsp;<span class="op" id="3333708">[</span><span class="op" id="3333709">]</span><span class="builtintype" id="3333710">string</span><span class="op" id="3333716">,</span>&nbsp;<span class="ident" id="3333718">err</span>&nbsp;<span class="builtintype" id="3333722">error</span><span class="op" id="3333727">)</span>&nbsp;<span class="op" id="3333729">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333732">if</span>&nbsp;<span class="op" id="3333735">!</span><span class="ident" id="3333736">hasMeta</span><span class="op" id="3333743">(</span><span class="ident" id="3333744">pattern</span><span class="op" id="3333751">)</span>&nbsp;<span class="op" id="3333753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333757">if</span>&nbsp;<span class="ident" id="3333760">_</span><span class="op" id="3333761">,</span>&nbsp;<span class="ident" id="3333763">err</span>&nbsp;<span class="op" id="3333767">=</span>&nbsp;<span class="ident" id="3333769">os</span><span class="op" id="3333771">.</span><span class="ident" id="3333772">Lstat</span><span class="op" id="3333777">(</span><span class="ident" id="3333778">pattern</span><span class="op" id="3333785">)</span><span class="op" id="3333786">;</span>&nbsp;<span class="ident" id="3333788">err</span>&nbsp;<span class="op" id="3333792">!=</span>&nbsp;<span class="builtintype" id="3333795">nil</span>&nbsp;<span class="op" id="3333799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333804">return</span>&nbsp;<span class="builtintype" id="3333811">nil</span><span class="op" id="3333814">,</span>&nbsp;<span class="builtintype" id="3333816">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333826">return</span>&nbsp;<span class="op" id="3333833">[</span><span class="op" id="3333834">]</span><span class="builtintype" id="3333835">string</span><span class="op" id="3333841">{</span><span class="ident" id="3333842">pattern</span><span class="op" id="3333849">}</span><span class="op" id="3333850">,</span>&nbsp;<span class="builtintype" id="3333852">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3333857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333861">dir</span><span class="op" id="3333864">,</span>&nbsp;<span class="ident" id="3333866">file</span>&nbsp;<span class="op" id="3333871">:=</span>&nbsp;<span class="ident" id="3333874">Split</span><span class="op" id="3333879">(</span><span class="ident" id="3333880">pattern</span><span class="op" id="3333887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333890">switch</span>&nbsp;<span class="ident" id="3333897">dir</span>&nbsp;<span class="op" id="3333901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333904">case</span>&nbsp;<span class="string" id="3333909">&#34;&#34;</span><span class="op" id="3333911">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333915">dir</span>&nbsp;<span class="op" id="3333919">=</span>&nbsp;<span class="string" id="3333921">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333926">case</span>&nbsp;<span class="builtintype" id="3333931">string</span><span class="op" id="3333937">(</span><span class="ident" id="3333938">Separator</span><span class="op" id="3333947">)</span><span class="op" id="3333948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3333952">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3333964">default</span><span class="op" id="3333971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3333975">dir</span>&nbsp;<span class="op" id="3333979">=</span>&nbsp;<span class="ident" id="3333981">dir</span><span class="op" id="3333984">[</span><span class="num" id="3333985">0</span>&nbsp;<span class="op" id="3333987">:</span>&nbsp;<span class="builtinfunc" id="3333989">len</span><span class="op" id="3333992">(</span><span class="ident" id="3333993">dir</span><span class="op" id="3333996">)</span><span class="op" id="3333997">-</span><span class="num" id="3333998">1</span><span class="op" id="3333999">]</span>&nbsp;<span class="comment" id="3334001">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334037">if</span>&nbsp;<span class="op" id="3334040">!</span><span class="ident" id="3334041">hasMeta</span><span class="op" id="3334048">(</span><span class="ident" id="3334049">dir</span><span class="op" id="3334052">)</span>&nbsp;<span class="op" id="3334054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334058">return</span>&nbsp;<span class="ident" id="3334065">glob</span><span class="op" id="3334069">(</span><span class="ident" id="3334070">dir</span><span class="op" id="3334073">,</span>&nbsp;<span class="ident" id="3334075">file</span><span class="op" id="3334079">,</span>&nbsp;<span class="builtintype" id="3334081">nil</span><span class="op" id="3334084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334087">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334091">var</span>&nbsp;<span class="ident" id="3334095">m</span>&nbsp;<span class="op" id="3334097">[</span><span class="op" id="3334098">]</span><span class="builtintype" id="3334099">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334107">m</span><span class="op" id="3334108">,</span>&nbsp;<span class="ident" id="3334110">err</span>&nbsp;<span class="op" id="3334114">=</span>&nbsp;<span class="ident" id="3334116">Glob</span><span class="op" id="3334120">(</span><span class="ident" id="3334121">dir</span><span class="op" id="3334124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334127">if</span>&nbsp;<span class="ident" id="3334130">err</span>&nbsp;<span class="op" id="3334134">!=</span>&nbsp;<span class="builtintype" id="3334137">nil</span>&nbsp;<span class="op" id="3334141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334145">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334156">for</span>&nbsp;<span class="ident" id="3334160">_</span><span class="op" id="3334161">,</span>&nbsp;<span class="ident" id="3334163">d</span>&nbsp;<span class="op" id="3334165">:=</span>&nbsp;<span class="keyword" id="3334168">range</span>&nbsp;<span class="ident" id="3334174">m</span>&nbsp;<span class="op" id="3334176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334180">matches</span><span class="op" id="3334187">,</span>&nbsp;<span class="ident" id="3334189">err</span>&nbsp;<span class="op" id="3334193">=</span>&nbsp;<span class="ident" id="3334195">glob</span><span class="op" id="3334199">(</span><span class="ident" id="3334200">d</span><span class="op" id="3334201">,</span>&nbsp;<span class="ident" id="3334203">file</span><span class="op" id="3334207">,</span>&nbsp;<span class="ident" id="3334209">matches</span><span class="op" id="3334216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334220">if</span>&nbsp;<span class="ident" id="3334223">err</span>&nbsp;<span class="op" id="3334227">!=</span>&nbsp;<span class="builtintype" id="3334230">nil</span>&nbsp;<span class="op" id="3334234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334239">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334254">return</span><br>
<span class="lineno"></span><span class="op" id="3334261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3334264">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3334329">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3334388">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3334448">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3334483">func</span>&nbsp;<span class="ident" id="3334488">glob</span><span class="op" id="3334492">(</span><span class="ident" id="3334493">dir</span><span class="op" id="3334496">,</span>&nbsp;<span class="ident" id="3334498">pattern</span>&nbsp;<span class="builtintype" id="3334506">string</span><span class="op" id="3334512">,</span>&nbsp;<span class="ident" id="3334514">matches</span>&nbsp;<span class="op" id="3334522">[</span><span class="op" id="3334523">]</span><span class="builtintype" id="3334524">string</span><span class="op" id="3334530">)</span>&nbsp;<span class="op" id="3334532">(</span><span class="ident" id="3334533">m</span>&nbsp;<span class="op" id="3334535">[</span><span class="op" id="3334536">]</span><span class="builtintype" id="3334537">string</span><span class="op" id="3334543">,</span>&nbsp;<span class="ident" id="3334545">e</span>&nbsp;<span class="builtintype" id="3334547">error</span><span class="op" id="3334552">)</span>&nbsp;<span class="op" id="3334554">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334557">m</span>&nbsp;<span class="op" id="3334559">=</span>&nbsp;<span class="ident" id="3334561">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334570">fi</span><span class="op" id="3334572">,</span>&nbsp;<span class="ident" id="3334574">err</span>&nbsp;<span class="op" id="3334578">:=</span>&nbsp;<span class="ident" id="3334581">os</span><span class="op" id="3334583">.</span><span class="ident" id="3334584">Stat</span><span class="op" id="3334588">(</span><span class="ident" id="3334589">dir</span><span class="op" id="3334592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334595">if</span>&nbsp;<span class="ident" id="3334598">err</span>&nbsp;<span class="op" id="3334602">!=</span>&nbsp;<span class="builtintype" id="3334605">nil</span>&nbsp;<span class="op" id="3334609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334613">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334621">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334624">if</span>&nbsp;<span class="op" id="3334627">!</span><span class="ident" id="3334628">fi</span><span class="op" id="3334630">.</span><span class="ident" id="3334631">IsDir</span><span class="op" id="3334636">(</span><span class="op" id="3334637">)</span>&nbsp;<span class="op" id="3334639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334643">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334654">d</span><span class="op" id="3334655">,</span>&nbsp;<span class="ident" id="3334657">err</span>&nbsp;<span class="op" id="3334661">:=</span>&nbsp;<span class="ident" id="3334664">os</span><span class="op" id="3334666">.</span><span class="ident" id="3334667">Open</span><span class="op" id="3334671">(</span><span class="ident" id="3334672">dir</span><span class="op" id="3334675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334678">if</span>&nbsp;<span class="ident" id="3334681">err</span>&nbsp;<span class="op" id="3334685">!=</span>&nbsp;<span class="builtintype" id="3334688">nil</span>&nbsp;<span class="op" id="3334692">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334696">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334707">defer</span>&nbsp;<span class="ident" id="3334713">d</span><span class="op" id="3334714">.</span><span class="ident" id="3334715">Close</span><span class="op" id="3334720">(</span><span class="op" id="3334721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334725">names</span><span class="op" id="3334730">,</span>&nbsp;<span class="ident" id="3334732">_</span>&nbsp;<span class="op" id="3334734">:=</span>&nbsp;<span class="ident" id="3334737">d</span><span class="op" id="3334738">.</span><span class="ident" id="3334739">Readdirnames</span><span class="op" id="3334751">(</span><span class="op" id="3334752">-</span><span class="num" id="3334753">1</span><span class="op" id="3334754">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334757">sort</span><span class="op" id="3334761">.</span><span class="ident" id="3334762">Strings</span><span class="op" id="3334769">(</span><span class="ident" id="3334770">names</span><span class="op" id="3334775">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334779">for</span>&nbsp;<span class="ident" id="3334783">_</span><span class="op" id="3334784">,</span>&nbsp;<span class="ident" id="3334786">n</span>&nbsp;<span class="op" id="3334788">:=</span>&nbsp;<span class="keyword" id="3334791">range</span>&nbsp;<span class="ident" id="3334797">names</span>&nbsp;<span class="op" id="3334803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334807">matched</span><span class="op" id="3334814">,</span>&nbsp;<span class="ident" id="3334816">err</span>&nbsp;<span class="op" id="3334820">:=</span>&nbsp;<span class="ident" id="3334823">Match</span><span class="op" id="3334828">(</span><span class="ident" id="3334829">pattern</span><span class="op" id="3334836">,</span>&nbsp;<span class="ident" id="3334838">n</span><span class="op" id="3334839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334843">if</span>&nbsp;<span class="ident" id="3334846">err</span>&nbsp;<span class="op" id="3334850">!=</span>&nbsp;<span class="builtintype" id="3334853">nil</span>&nbsp;<span class="op" id="3334857">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334862">return</span>&nbsp;<span class="ident" id="3334869">m</span><span class="op" id="3334870">,</span>&nbsp;<span class="ident" id="3334872">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334882">if</span>&nbsp;<span class="ident" id="3334885">matched</span>&nbsp;<span class="op" id="3334893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3334898">m</span>&nbsp;<span class="op" id="3334900">=</span>&nbsp;<span class="builtinfunc" id="3334902">append</span><span class="op" id="3334908">(</span><span class="ident" id="3334909">m</span><span class="op" id="3334910">,</span>&nbsp;<span class="ident" id="3334912">Join</span><span class="op" id="3334916">(</span><span class="ident" id="3334917">dir</span><span class="op" id="3334920">,</span>&nbsp;<span class="ident" id="3334922">n</span><span class="op" id="3334923">)</span><span class="op" id="3334924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334928">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3334931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3334934">return</span><br>
<span class="lineno"></span><span class="op" id="3334941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3334944">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3335013">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3335037">func</span>&nbsp;<span class="ident" id="3335042">hasMeta</span><span class="op" id="3335049">(</span><span class="ident" id="3335050">path</span>&nbsp;<span class="builtintype" id="3335055">string</span><span class="op" id="3335061">)</span>&nbsp;<span class="builtintype" id="3335063">bool</span>&nbsp;<span class="op" id="3335068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3335071">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3335136">return</span>&nbsp;<span class="ident" id="3335143">strings</span><span class="op" id="3335150">.</span><span class="ident" id="3335151">IndexAny</span><span class="op" id="3335159">(</span><span class="ident" id="3335160">path</span><span class="op" id="3335164">,</span>&nbsp;<span class="string" id="3335166">&#34;*?[&#34;</span><span class="op" id="3335171">)</span>&nbsp;<span class="op" id="3335173">&gt;=</span>&nbsp;<span class="num" id="3335176">0</span><br>
<span class="lineno"></span><span class="op" id="3335178">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
