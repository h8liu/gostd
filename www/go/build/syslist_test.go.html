<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8047437">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8047493">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8047547">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8047598">package</span>&nbsp;<span class="ident" id="8047606">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8047613">import</span>&nbsp;<span class="op" id="8047620">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8047623">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8047634">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8047644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8047647">var</span>&nbsp;<span class="op" id="8047651">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047654">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8047664">=</span>&nbsp;<span class="ident" id="8047666"><a href="/go/build/syslist_test.go.html#8047623">runtime</a></span><span class="op" id="8047673">.</span><span class="ident" id="8047674">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047680">thisArch</span>&nbsp;&nbsp;<span class="op" id="8047690">=</span>&nbsp;<span class="ident" id="8047692"><a href="/go/build/syslist_test.go.html#8047623">runtime</a></span><span class="op" id="8047699">.</span><span class="ident" id="8047700">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047708">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8047718">=</span>&nbsp;<span class="ident" id="8047720"><a href="/go/build/syslist_test.go.html#8047767">anotherOS</a></span><span class="op" id="8047729">(</span><span class="op" id="8047730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047733">otherArch</span>&nbsp;<span class="op" id="8047743">=</span>&nbsp;<span class="ident" id="8047745"><a href="/go/build/syslist_test.go.html#8047858">anotherArch</a></span><span class="op" id="8047756">(</span><span class="op" id="8047757">)</span><br>
<span class="lineno"></span><span class="op" id="8047759">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8047762">func</span>&nbsp;<span class="ident" id="8047767">anotherOS</span><span class="op" id="8047776">(</span><span class="op" id="8047777">)</span>&nbsp;<span class="builtintype" id="8047779">string</span>&nbsp;<span class="op" id="8047786">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047789">if</span>&nbsp;<span class="ident" id="8047792"><a href="/go/build/syslist_test.go.html#8047654">thisOS</a></span>&nbsp;<span class="op" id="8047799">!=</span>&nbsp;<span class="string" id="8047802">&#34;darwin&#34;</span>&nbsp;<span class="op" id="8047811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047815">return</span>&nbsp;<span class="string" id="8047822">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047835">return</span>&nbsp;<span class="string" id="8047842">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="8047850">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8047853">func</span>&nbsp;<span class="ident" id="8047858">anotherArch</span><span class="op" id="8047869">(</span><span class="op" id="8047870">)</span>&nbsp;<span class="builtintype" id="8047872">string</span>&nbsp;<span class="op" id="8047879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047882">if</span>&nbsp;<span class="ident" id="8047885"><a href="/go/build/syslist_test.go.html#8047680">thisArch</a></span>&nbsp;<span class="op" id="8047894">!=</span>&nbsp;<span class="string" id="8047897">&#34;amd64&#34;</span>&nbsp;<span class="op" id="8047905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047909">return</span>&nbsp;<span class="string" id="8047916">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8047925">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8047928">return</span>&nbsp;<span class="string" id="8047935">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="8047941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8047944">type</span>&nbsp;<span class="ident" id="8047949">GoodFileTest</span>&nbsp;<span class="keyword" id="8047962">struct</span>&nbsp;<span class="op" id="8047969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047972">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8047979">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8047987">result</span>&nbsp;<span class="builtintype" id="8047994">bool</span><br>
<span class="lineno"></span><span class="op" id="8047999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8048002">var</span>&nbsp;<span class="ident" id="8048006">tests</span>&nbsp;<span class="op" id="8048012">=</span>&nbsp;<span class="op" id="8048014">[</span><span class="op" id="8048015">]</span><span class="ident" id="8048016"><a href="/go/build/syslist_test.go.html#8047949">GoodFileTest</a></span><span class="op" id="8048028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048031">{</span><span class="string" id="8048032">&#34;file.go&#34;</span><span class="op" id="8048041">,</span>&nbsp;<span class="ident" id="8048043">true</span><span class="op" id="8048047">}</span><span class="op" id="8048048">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048051">{</span><span class="string" id="8048052">&#34;file.c&#34;</span><span class="op" id="8048060">,</span>&nbsp;<span class="ident" id="8048062">true</span><span class="op" id="8048066">}</span><span class="op" id="8048067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048070">{</span><span class="string" id="8048071">&#34;file_foo.go&#34;</span><span class="op" id="8048084">,</span>&nbsp;<span class="ident" id="8048086">true</span><span class="op" id="8048090">}</span><span class="op" id="8048091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048094">{</span><span class="string" id="8048095">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048103">+</span>&nbsp;<span class="ident" id="8048105"><a href="/go/build/syslist_test.go.html#8047680">thisArch</a></span>&nbsp;<span class="op" id="8048114">+</span>&nbsp;<span class="string" id="8048116">&#34;.go&#34;</span><span class="op" id="8048121">,</span>&nbsp;<span class="ident" id="8048123">true</span><span class="op" id="8048127">}</span><span class="op" id="8048128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048131">{</span><span class="string" id="8048132">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048140">+</span>&nbsp;<span class="ident" id="8048142"><a href="/go/build/syslist_test.go.html#8047733">otherArch</a></span>&nbsp;<span class="op" id="8048152">+</span>&nbsp;<span class="string" id="8048154">&#34;.go&#34;</span><span class="op" id="8048159">,</span>&nbsp;<span class="ident" id="8048161">false</span><span class="op" id="8048166">}</span><span class="op" id="8048167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048170">{</span><span class="string" id="8048171">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048179">+</span>&nbsp;<span class="ident" id="8048181"><a href="/go/build/syslist_test.go.html#8047654">thisOS</a></span>&nbsp;<span class="op" id="8048188">+</span>&nbsp;<span class="string" id="8048190">&#34;.go&#34;</span><span class="op" id="8048195">,</span>&nbsp;<span class="ident" id="8048197">true</span><span class="op" id="8048201">}</span><span class="op" id="8048202">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048205">{</span><span class="string" id="8048206">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048214">+</span>&nbsp;<span class="ident" id="8048216"><a href="/go/build/syslist_test.go.html#8047708">otherOS</a></span>&nbsp;<span class="op" id="8048224">+</span>&nbsp;<span class="string" id="8048226">&#34;.go&#34;</span><span class="op" id="8048231">,</span>&nbsp;<span class="ident" id="8048233">false</span><span class="op" id="8048238">}</span><span class="op" id="8048239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048242">{</span><span class="string" id="8048243">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048251">+</span>&nbsp;<span class="ident" id="8048253"><a href="/go/build/syslist_test.go.html#8047654">thisOS</a></span>&nbsp;<span class="op" id="8048260">+</span>&nbsp;<span class="string" id="8048262">&#34;_&#34;</span>&nbsp;<span class="op" id="8048266">+</span>&nbsp;<span class="ident" id="8048268"><a href="/go/build/syslist_test.go.html#8047680">thisArch</a></span>&nbsp;<span class="op" id="8048277">+</span>&nbsp;<span class="string" id="8048279">&#34;.go&#34;</span><span class="op" id="8048284">,</span>&nbsp;<span class="ident" id="8048286">true</span><span class="op" id="8048290">}</span><span class="op" id="8048291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048294">{</span><span class="string" id="8048295">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048303">+</span>&nbsp;<span class="ident" id="8048305"><a href="/go/build/syslist_test.go.html#8047708">otherOS</a></span>&nbsp;<span class="op" id="8048313">+</span>&nbsp;<span class="string" id="8048315">&#34;_&#34;</span>&nbsp;<span class="op" id="8048319">+</span>&nbsp;<span class="ident" id="8048321"><a href="/go/build/syslist_test.go.html#8047680">thisArch</a></span>&nbsp;<span class="op" id="8048330">+</span>&nbsp;<span class="string" id="8048332">&#34;.go&#34;</span><span class="op" id="8048337">,</span>&nbsp;<span class="ident" id="8048339">false</span><span class="op" id="8048344">}</span><span class="op" id="8048345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048348">{</span><span class="string" id="8048349">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048357">+</span>&nbsp;<span class="ident" id="8048359"><a href="/go/build/syslist_test.go.html#8047654">thisOS</a></span>&nbsp;<span class="op" id="8048366">+</span>&nbsp;<span class="string" id="8048368">&#34;_&#34;</span>&nbsp;<span class="op" id="8048372">+</span>&nbsp;<span class="ident" id="8048374"><a href="/go/build/syslist_test.go.html#8047733">otherArch</a></span>&nbsp;<span class="op" id="8048384">+</span>&nbsp;<span class="string" id="8048386">&#34;.go&#34;</span><span class="op" id="8048391">,</span>&nbsp;<span class="ident" id="8048393">false</span><span class="op" id="8048398">}</span><span class="op" id="8048399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048402">{</span><span class="string" id="8048403">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048411">+</span>&nbsp;<span class="ident" id="8048413"><a href="/go/build/syslist_test.go.html#8047708">otherOS</a></span>&nbsp;<span class="op" id="8048421">+</span>&nbsp;<span class="string" id="8048423">&#34;_&#34;</span>&nbsp;<span class="op" id="8048427">+</span>&nbsp;<span class="ident" id="8048429"><a href="/go/build/syslist_test.go.html#8047733">otherArch</a></span>&nbsp;<span class="op" id="8048439">+</span>&nbsp;<span class="string" id="8048441">&#34;.go&#34;</span><span class="op" id="8048446">,</span>&nbsp;<span class="ident" id="8048448">false</span><span class="op" id="8048453">}</span><span class="op" id="8048454">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048457">{</span><span class="string" id="8048458">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8048470">+</span>&nbsp;<span class="ident" id="8048472"><a href="/go/build/syslist_test.go.html#8047680">thisArch</a></span>&nbsp;<span class="op" id="8048481">+</span>&nbsp;<span class="string" id="8048483">&#34;.go&#34;</span><span class="op" id="8048488">,</span>&nbsp;<span class="ident" id="8048490">true</span><span class="op" id="8048494">}</span><span class="op" id="8048495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048498">{</span><span class="string" id="8048499">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8048511">+</span>&nbsp;<span class="ident" id="8048513"><a href="/go/build/syslist_test.go.html#8047733">otherArch</a></span>&nbsp;<span class="op" id="8048523">+</span>&nbsp;<span class="string" id="8048525">&#34;.go&#34;</span><span class="op" id="8048530">,</span>&nbsp;<span class="ident" id="8048532">false</span><span class="op" id="8048537">}</span><span class="op" id="8048538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048541">{</span><span class="string" id="8048542">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048550">+</span>&nbsp;<span class="ident" id="8048552"><a href="/go/build/syslist_test.go.html#8047654">thisOS</a></span>&nbsp;<span class="op" id="8048559">+</span>&nbsp;<span class="string" id="8048561">&#34;.c&#34;</span><span class="op" id="8048565">,</span>&nbsp;<span class="ident" id="8048567">true</span><span class="op" id="8048571">}</span><span class="op" id="8048572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048575">{</span><span class="string" id="8048576">&#34;file_&#34;</span>&nbsp;<span class="op" id="8048584">+</span>&nbsp;<span class="ident" id="8048586"><a href="/go/build/syslist_test.go.html#8047708">otherOS</a></span>&nbsp;<span class="op" id="8048594">+</span>&nbsp;<span class="string" id="8048596">&#34;.c&#34;</span><span class="op" id="8048600">,</span>&nbsp;<span class="ident" id="8048602">false</span><span class="op" id="8048607">}</span><span class="op" id="8048608">,</span><br>
<span class="lineno"></span><span class="op" id="8048610">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8048613">func</span>&nbsp;<span class="ident" id="8048618">TestGoodOSArch</span><span class="op" id="8048632">(</span><span class="ident" id="8048633">t</span>&nbsp;<span class="op" id="8048635">*</span><span class="ident" id="8048636"><a href="/go/build/syslist_test.go.html#8047634">testing</a></span><span class="op" id="8048643">.</span><span class="ident" id="8048644">T</span><span class="op" id="8048645">)</span>&nbsp;<span class="op" id="8048647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8048650">for</span>&nbsp;<span class="ident" id="8048654">_</span><span class="op" id="8048655">,</span>&nbsp;<span class="ident" id="8048657">test</span>&nbsp;<span class="op" id="8048662">:=</span>&nbsp;<span class="keyword" id="8048665">range</span>&nbsp;<span class="ident" id="8048671"><a href="/go/build/syslist_test.go.html#8048006">tests</a></span>&nbsp;<span class="op" id="8048677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8048681">if</span>&nbsp;<span class="ident" id="8048684"><a href="/go/build/build.go.html#5810409">Default</a></span><span class="op" id="8048691">.</span><span class="ident" id="8048692">goodOSArchFile</span><span class="op" id="8048706">(</span><span class="ident" id="8048707"><a href="/go/build/syslist_test.go.html#8048657">test</a></span><span class="op" id="8048711">.</span><span class="ident" id="8048712">name</span><span class="op" id="8048716">,</span>&nbsp;<span class="builtinfunc" id="8048718">make</span><span class="op" id="8048722">(</span><span class="keyword" id="8048723">map</span><span class="op" id="8048726">[</span><span class="builtintype" id="8048727">string</span><span class="op" id="8048733">]</span><span class="builtintype" id="8048734">bool</span><span class="op" id="8048738">)</span><span class="op" id="8048739">)</span>&nbsp;<span class="op" id="8048741">!=</span>&nbsp;<span class="ident" id="8048744"><a href="/go/build/syslist_test.go.html#8048657">test</a></span><span class="op" id="8048748">.</span><span class="ident" id="8048749">result</span>&nbsp;<span class="op" id="8048756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8048761"><a href="/go/build/syslist_test.go.html#8048633">t</a></span><span class="op" id="8048762">.</span><span class="ident" id="8048763">Fatalf</span><span class="op" id="8048769">(</span><span class="string" id="8048770">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8048796">,</span>&nbsp;<span class="ident" id="8048798"><a href="/go/build/syslist_test.go.html#8048657">test</a></span><span class="op" id="8048802">.</span><span class="ident" id="8048803">name</span><span class="op" id="8048807">,</span>&nbsp;<span class="ident" id="8048809"><a href="/go/build/syslist_test.go.html#8048657">test</a></span><span class="op" id="8048813">.</span><span class="ident" id="8048814">result</span><span class="op" id="8048820">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048827">}</span><br>
<span class="lineno"></span><span class="op" id="8048829">}</span>
</div>
</body>
</html>
