<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5879331">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5879387">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5879441">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5879492">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5879562">package</span>&nbsp;<span class="ident" id="5879570">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5879576">import</span>&nbsp;<span class="op" id="5879583">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5879586">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5879596">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5879602">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5879612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5879615">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5879705">var</span>&nbsp;<span class="ident" id="5879709">ErrNotFound</span>&nbsp;<span class="op" id="5879721">=</span>&nbsp;<span class="ident" id="5879723">errors</span><span class="op" id="5879729">.</span><span class="ident" id="5879730">New</span><span class="op" id="5879733">(</span><span class="string" id="5879734">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5879770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5879773">func</span>&nbsp;<span class="ident" id="5879778">findExecutable</span><span class="op" id="5879792">(</span><span class="ident" id="5879793">file</span>&nbsp;<span class="builtintype" id="5879798">string</span><span class="op" id="5879804">)</span>&nbsp;<span class="builtintype" id="5879806">error</span>&nbsp;<span class="op" id="5879812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5879815">d</span><span class="op" id="5879816">,</span>&nbsp;<span class="ident" id="5879818">err</span>&nbsp;<span class="op" id="5879822">:=</span>&nbsp;<span class="ident" id="5879825">os</span><span class="op" id="5879827">.</span><span class="ident" id="5879828">Stat</span><span class="op" id="5879832">(</span><span class="ident" id="5879833">file</span><span class="op" id="5879837">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5879840">if</span>&nbsp;<span class="ident" id="5879843">err</span>&nbsp;<span class="op" id="5879847">!=</span>&nbsp;<span class="ident" id="5879850">nil</span>&nbsp;<span class="op" id="5879854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5879858">return</span>&nbsp;<span class="ident" id="5879865">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5879870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5879873">if</span>&nbsp;<span class="ident" id="5879876">m</span>&nbsp;<span class="op" id="5879878">:=</span>&nbsp;<span class="ident" id="5879881">d</span><span class="op" id="5879882">.</span><span class="ident" id="5879883">Mode</span><span class="op" id="5879887">(</span><span class="op" id="5879888">)</span><span class="op" id="5879889">;</span>&nbsp;<span class="op" id="5879891">!</span><span class="ident" id="5879892">m</span><span class="op" id="5879893">.</span><span class="ident" id="5879894">IsDir</span><span class="op" id="5879899">(</span><span class="op" id="5879900">)</span>&nbsp;<span class="op" id="5879902">&amp;&amp;</span>&nbsp;<span class="ident" id="5879905">m</span><span class="op" id="5879906">&amp;</span><span class="num" id="5879907">0111</span>&nbsp;<span class="op" id="5879912">!=</span>&nbsp;<span class="num" id="5879915">0</span>&nbsp;<span class="op" id="5879917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5879921">return</span>&nbsp;<span class="ident" id="5879928">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5879933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5879936">return</span>&nbsp;<span class="ident" id="5879943">os</span><span class="op" id="5879945">.</span><span class="ident" id="5879946">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5879960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5879963">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5880020">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5880082">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5880163">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5880246">func</span>&nbsp;<span class="ident" id="5880251">LookPath</span><span class="op" id="5880259">(</span><span class="ident" id="5880260">file</span>&nbsp;<span class="builtintype" id="5880265">string</span><span class="op" id="5880271">)</span>&nbsp;<span class="op" id="5880273">(</span><span class="builtintype" id="5880274">string</span><span class="op" id="5880280">,</span>&nbsp;<span class="builtintype" id="5880282">error</span><span class="op" id="5880287">)</span>&nbsp;<span class="op" id="5880289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5880292">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5880352">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5880414">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880465">if</span>&nbsp;<span class="ident" id="5880468">strings</span><span class="op" id="5880475">.</span><span class="ident" id="5880476">Contains</span><span class="op" id="5880484">(</span><span class="ident" id="5880485">file</span><span class="op" id="5880489">,</span>&nbsp;<span class="string" id="5880491">&#34;/&#34;</span><span class="op" id="5880494">)</span>&nbsp;<span class="op" id="5880496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5880500">err</span>&nbsp;<span class="op" id="5880504">:=</span>&nbsp;<span class="ident" id="5880507">findExecutable</span><span class="op" id="5880521">(</span><span class="ident" id="5880522">file</span><span class="op" id="5880526">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880530">if</span>&nbsp;<span class="ident" id="5880533">err</span>&nbsp;<span class="op" id="5880537">==</span>&nbsp;<span class="ident" id="5880540">nil</span>&nbsp;<span class="op" id="5880544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880549">return</span>&nbsp;<span class="ident" id="5880556">file</span><span class="op" id="5880560">,</span>&nbsp;<span class="ident" id="5880562">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880572">return</span>&nbsp;<span class="string" id="5880579">&#34;&#34;</span><span class="op" id="5880581">,</span>&nbsp;<span class="op" id="5880583">&amp;</span><span class="ident" id="5880584">Error</span><span class="op" id="5880589">{</span><span class="ident" id="5880590">file</span><span class="op" id="5880594">,</span>&nbsp;<span class="ident" id="5880596">err</span><span class="op" id="5880599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880602">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5880605">pathenv</span>&nbsp;<span class="op" id="5880613">:=</span>&nbsp;<span class="ident" id="5880616">os</span><span class="op" id="5880618">.</span><span class="ident" id="5880619">Getenv</span><span class="op" id="5880625">(</span><span class="string" id="5880626">&#34;PATH&#34;</span><span class="op" id="5880632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880635">if</span>&nbsp;<span class="ident" id="5880638">pathenv</span>&nbsp;<span class="op" id="5880646">==</span>&nbsp;<span class="string" id="5880649">&#34;&#34;</span>&nbsp;<span class="op" id="5880652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880656">return</span>&nbsp;<span class="string" id="5880663">&#34;&#34;</span><span class="op" id="5880665">,</span>&nbsp;<span class="op" id="5880667">&amp;</span><span class="ident" id="5880668">Error</span><span class="op" id="5880673">{</span><span class="ident" id="5880674">file</span><span class="op" id="5880678">,</span>&nbsp;<span class="ident" id="5880680">ErrNotFound</span><span class="op" id="5880691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880697">for</span>&nbsp;<span class="ident" id="5880701">_</span><span class="op" id="5880702">,</span>&nbsp;<span class="ident" id="5880704">dir</span>&nbsp;<span class="op" id="5880708">:=</span>&nbsp;<span class="keyword" id="5880711">range</span>&nbsp;<span class="ident" id="5880717">strings</span><span class="op" id="5880724">.</span><span class="ident" id="5880725">Split</span><span class="op" id="5880730">(</span><span class="ident" id="5880731">pathenv</span><span class="op" id="5880738">,</span>&nbsp;<span class="string" id="5880740">&#34;:&#34;</span><span class="op" id="5880743">)</span>&nbsp;<span class="op" id="5880745">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880749">if</span>&nbsp;<span class="ident" id="5880752">dir</span>&nbsp;<span class="op" id="5880756">==</span>&nbsp;<span class="string" id="5880759">&#34;&#34;</span>&nbsp;<span class="op" id="5880762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5880767">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5880821">dir</span>&nbsp;<span class="op" id="5880825">=</span>&nbsp;<span class="string" id="5880827">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5880837">path</span>&nbsp;<span class="op" id="5880842">:=</span>&nbsp;<span class="ident" id="5880845">dir</span>&nbsp;<span class="op" id="5880849">+</span>&nbsp;<span class="string" id="5880851">&#34;/&#34;</span>&nbsp;<span class="op" id="5880855">+</span>&nbsp;<span class="ident" id="5880857">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880864">if</span>&nbsp;<span class="ident" id="5880867">err</span>&nbsp;<span class="op" id="5880871">:=</span>&nbsp;<span class="ident" id="5880874">findExecutable</span><span class="op" id="5880888">(</span><span class="ident" id="5880889">path</span><span class="op" id="5880893">)</span><span class="op" id="5880894">;</span>&nbsp;<span class="ident" id="5880896">err</span>&nbsp;<span class="op" id="5880900">==</span>&nbsp;<span class="ident" id="5880903">nil</span>&nbsp;<span class="op" id="5880907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880912">return</span>&nbsp;<span class="ident" id="5880919">path</span><span class="op" id="5880923">,</span>&nbsp;<span class="ident" id="5880925">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5880934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5880937">return</span>&nbsp;<span class="string" id="5880944">&#34;&#34;</span><span class="op" id="5880946">,</span>&nbsp;<span class="op" id="5880948">&amp;</span><span class="ident" id="5880949">Error</span><span class="op" id="5880954">{</span><span class="ident" id="5880955">file</span><span class="op" id="5880959">,</span>&nbsp;<span class="ident" id="5880961">ErrNotFound</span><span class="op" id="5880972">}</span><br>
<span class="lineno">60</span><span class="op" id="5880974">}</span>
</div>
</body>
</html>
