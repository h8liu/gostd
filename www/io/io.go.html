<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1405401">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1405456">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1405510">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1405561">//&nbsp;Package&nbsp;io&nbsp;provides&nbsp;basic&nbsp;interfaces&nbsp;to&nbsp;I/O&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1405620">//&nbsp;Its&nbsp;primary&nbsp;job&nbsp;is&nbsp;to&nbsp;wrap&nbsp;existing&nbsp;implementations&nbsp;of&nbsp;such&nbsp;primitives,</span><br>
<span class="lineno"></span><span class="comment" id="1405695">//&nbsp;such&nbsp;as&nbsp;those&nbsp;in&nbsp;package&nbsp;os,&nbsp;into&nbsp;shared&nbsp;public&nbsp;interfaces&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1405762">//&nbsp;abstract&nbsp;the&nbsp;functionality,&nbsp;plus&nbsp;some&nbsp;other&nbsp;related&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1405829">//</span><br>
<span class="lineno">10</span><span class="comment" id="1405832">//&nbsp;Because&nbsp;these&nbsp;interfaces&nbsp;and&nbsp;primitives&nbsp;wrap&nbsp;lower-level&nbsp;operations&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1405908">//&nbsp;various&nbsp;implementations,&nbsp;unless&nbsp;otherwise&nbsp;informed&nbsp;clients&nbsp;should&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1405981">//&nbsp;assume&nbsp;they&nbsp;are&nbsp;safe&nbsp;for&nbsp;parallel&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="1406029">package</span>&nbsp;<span class="ident" id="1406037">io</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1406041">import</span>&nbsp;<span class="op" id="1406048">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1406051">&#34;errors&#34;</span><br>
<span class="lineno"></span><span class="op" id="1406060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1406063">//&nbsp;ErrShortWrite&nbsp;means&nbsp;that&nbsp;a&nbsp;write&nbsp;accepted&nbsp;fewer&nbsp;bytes&nbsp;than&nbsp;requested</span><br>
<span class="lineno">20</span><span class="comment" id="1406135">//&nbsp;but&nbsp;failed&nbsp;to&nbsp;return&nbsp;an&nbsp;explicit&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="1406178">var</span>&nbsp;<span class="ident" id="1406182">ErrShortWrite</span>&nbsp;<span class="op" id="1406196">=</span>&nbsp;<span class="ident" id="1406198">errors</span><span class="op" id="1406204">.</span><span class="ident" id="1406205">New</span><span class="op" id="1406208">(</span><span class="string" id="1406209">&#34;short&nbsp;write&#34;</span><span class="op" id="1406222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1406225">//&nbsp;ErrShortBuffer&nbsp;means&nbsp;that&nbsp;a&nbsp;read&nbsp;required&nbsp;a&nbsp;longer&nbsp;buffer&nbsp;than&nbsp;was&nbsp;provided.</span><br>
<span class="lineno"></span><span class="keyword" id="1406305">var</span>&nbsp;<span class="ident" id="1406309">ErrShortBuffer</span>&nbsp;<span class="op" id="1406324">=</span>&nbsp;<span class="ident" id="1406326">errors</span><span class="op" id="1406332">.</span><span class="ident" id="1406333">New</span><span class="op" id="1406336">(</span><span class="string" id="1406337">&#34;short&nbsp;buffer&#34;</span><span class="op" id="1406351">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1406354">//&nbsp;EOF&nbsp;is&nbsp;the&nbsp;error&nbsp;returned&nbsp;by&nbsp;Read&nbsp;when&nbsp;no&nbsp;more&nbsp;input&nbsp;is&nbsp;available.</span><br>
<span class="lineno"></span><span class="comment" id="1406424">//&nbsp;Functions&nbsp;should&nbsp;return&nbsp;EOF&nbsp;only&nbsp;to&nbsp;signal&nbsp;a&nbsp;graceful&nbsp;end&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1406495">//&nbsp;If&nbsp;the&nbsp;EOF&nbsp;occurs&nbsp;unexpectedly&nbsp;in&nbsp;a&nbsp;structured&nbsp;data&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="1406558">//&nbsp;the&nbsp;appropriate&nbsp;error&nbsp;is&nbsp;either&nbsp;ErrUnexpectedEOF&nbsp;or&nbsp;some&nbsp;other&nbsp;error</span><br>
<span class="lineno">30</span><span class="comment" id="1406630">//&nbsp;giving&nbsp;more&nbsp;detail.</span><br>
<span class="lineno"></span><span class="keyword" id="1406653">var</span>&nbsp;<span class="ident" id="1406657">EOF</span>&nbsp;<span class="op" id="1406661">=</span>&nbsp;<span class="ident" id="1406663">errors</span><span class="op" id="1406669">.</span><span class="ident" id="1406670">New</span><span class="op" id="1406673">(</span><span class="string" id="1406674">&#34;EOF&#34;</span><span class="op" id="1406679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1406682">//&nbsp;ErrUnexpectedEOF&nbsp;means&nbsp;that&nbsp;EOF&nbsp;was&nbsp;encountered&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1406740">//&nbsp;middle&nbsp;of&nbsp;reading&nbsp;a&nbsp;fixed-size&nbsp;block&nbsp;or&nbsp;data&nbsp;structure.</span><br>
<span class="lineno">35</span><span class="keyword" id="1406799">var</span>&nbsp;<span class="ident" id="1406803">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="1406820">=</span>&nbsp;<span class="ident" id="1406822">errors</span><span class="op" id="1406828">.</span><span class="ident" id="1406829">New</span><span class="op" id="1406832">(</span><span class="string" id="1406833">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="1406849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1406852">//&nbsp;ErrNoProgress&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;clients&nbsp;of&nbsp;an&nbsp;io.Reader&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="1406918">//&nbsp;many&nbsp;calls&nbsp;to&nbsp;Read&nbsp;have&nbsp;failed&nbsp;to&nbsp;return&nbsp;any&nbsp;data&nbsp;or&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="1406981">//&nbsp;usually&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;broken&nbsp;io.Reader&nbsp;implementation.</span><br>
<span class="lineno">40</span><span class="keyword" id="1407039">var</span>&nbsp;<span class="ident" id="1407043">ErrNoProgress</span>&nbsp;<span class="op" id="1407057">=</span>&nbsp;<span class="ident" id="1407059">errors</span><span class="op" id="1407065">.</span><span class="ident" id="1407066">New</span><span class="op" id="1407069">(</span><span class="string" id="1407070">&#34;multiple&nbsp;Read&nbsp;calls&nbsp;return&nbsp;no&nbsp;data&nbsp;or&nbsp;error&#34;</span><span class="op" id="1407115">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1407118">//&nbsp;Reader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1407179">//</span><br>
<span class="lineno"></span><span class="comment" id="1407182">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">45</span><span class="comment" id="1407255">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.&nbsp;&nbsp;Even&nbsp;if&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="1407323">//&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch&nbsp;space&nbsp;during&nbsp;the&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1407400">//&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,&nbsp;Read&nbsp;conventionally</span><br>
<span class="lineno"></span><span class="comment" id="1407471">//&nbsp;returns&nbsp;what&nbsp;is&nbsp;available&nbsp;instead&nbsp;of&nbsp;waiting&nbsp;for&nbsp;more.</span><br>
<span class="lineno"></span><span class="comment" id="1407529">//</span><br>
<span class="lineno">50</span><span class="comment" id="1407532">//&nbsp;When&nbsp;Read&nbsp;encounters&nbsp;an&nbsp;error&nbsp;or&nbsp;end-of-file&nbsp;condition&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="1407596">//&nbsp;successfully&nbsp;reading&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes,&nbsp;it&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1407658">//&nbsp;bytes&nbsp;read.&nbsp;&nbsp;It&nbsp;may&nbsp;return&nbsp;the&nbsp;(non-nil)&nbsp;error&nbsp;from&nbsp;the&nbsp;same&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="1407727">//&nbsp;or&nbsp;return&nbsp;the&nbsp;error&nbsp;(and&nbsp;n&nbsp;==&nbsp;0)&nbsp;from&nbsp;a&nbsp;subsequent&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1407787">//&nbsp;An&nbsp;instance&nbsp;of&nbsp;this&nbsp;general&nbsp;case&nbsp;is&nbsp;that&nbsp;a&nbsp;Reader&nbsp;returning</span><br>
<span class="lineno">55</span><span class="comment" id="1407850">//&nbsp;a&nbsp;non-zero&nbsp;number&nbsp;of&nbsp;bytes&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;stream&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="1407915">//&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.&nbsp;&nbsp;The&nbsp;next&nbsp;Read&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="1407980">//&nbsp;return&nbsp;0,&nbsp;EOF&nbsp;regardless.</span><br>
<span class="lineno"></span><span class="comment" id="1408009">//</span><br>
<span class="lineno"></span><span class="comment" id="1408012">//&nbsp;Callers&nbsp;should&nbsp;always&nbsp;process&nbsp;the&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes&nbsp;returned&nbsp;before</span><br>
<span class="lineno">60</span><span class="comment" id="1408077">//&nbsp;considering&nbsp;the&nbsp;error&nbsp;err.&nbsp;&nbsp;Doing&nbsp;so&nbsp;correctly&nbsp;handles&nbsp;I/O&nbsp;errors</span><br>
<span class="lineno"></span><span class="comment" id="1408146">//&nbsp;that&nbsp;happen&nbsp;after&nbsp;reading&nbsp;some&nbsp;bytes&nbsp;and&nbsp;also&nbsp;both&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1408207">//&nbsp;allowed&nbsp;EOF&nbsp;behaviors.</span><br>
<span class="lineno"></span><span class="comment" id="1408233">//</span><br>
<span class="lineno"></span><span class="comment" id="1408236">//&nbsp;Implementations&nbsp;of&nbsp;Read&nbsp;are&nbsp;discouraged&nbsp;from&nbsp;returning&nbsp;a</span><br>
<span class="lineno">65</span><span class="comment" id="1408296">//&nbsp;zero&nbsp;byte&nbsp;count&nbsp;with&nbsp;a&nbsp;nil&nbsp;error,&nbsp;except&nbsp;when&nbsp;len(p)&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="1408358">//&nbsp;Callers&nbsp;should&nbsp;treat&nbsp;a&nbsp;return&nbsp;of&nbsp;0&nbsp;and&nbsp;nil&nbsp;as&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1408423">//&nbsp;nothing&nbsp;happened;&nbsp;in&nbsp;particular&nbsp;it&nbsp;does&nbsp;not&nbsp;indicate&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1408484">//</span><br>
<span class="lineno"></span><span class="comment" id="1408487">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="1408525">type</span>&nbsp;<span class="ident" id="1408530">Reader</span>&nbsp;<span class="keyword" id="1408537">interface</span>&nbsp;<span class="op" id="1408547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1408550">Read</span><span class="op" id="1408554">(</span><span class="ident" id="1408555">p</span>&nbsp;<span class="op" id="1408557">[</span><span class="op" id="1408558">]</span><span class="builtintype" id="1408559">byte</span><span class="op" id="1408563">)</span>&nbsp;<span class="op" id="1408565">(</span><span class="ident" id="1408566">n</span>&nbsp;<span class="builtintype" id="1408568">int</span><span class="op" id="1408571">,</span>&nbsp;<span class="ident" id="1408573">err</span>&nbsp;<span class="builtintype" id="1408577">error</span><span class="op" id="1408582">)</span><br>
<span class="lineno"></span><span class="op" id="1408584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1408587">//&nbsp;Writer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">75</span><span class="comment" id="1408649">//</span><br>
<span class="lineno"></span><span class="comment" id="1408652">//&nbsp;Write&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="1408719">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno"></span><span class="comment" id="1408787">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1408853">//&nbsp;Write&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno">80</span><span class="comment" id="1408916">//&nbsp;Write&nbsp;must&nbsp;not&nbsp;modify&nbsp;the&nbsp;slice&nbsp;data,&nbsp;even&nbsp;temporarily.</span><br>
<span class="lineno"></span><span class="comment" id="1408975">//</span><br>
<span class="lineno"></span><span class="comment" id="1408978">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1409016">type</span>&nbsp;<span class="ident" id="1409021">Writer</span>&nbsp;<span class="keyword" id="1409028">interface</span>&nbsp;<span class="op" id="1409038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1409041">Write</span><span class="op" id="1409046">(</span><span class="ident" id="1409047">p</span>&nbsp;<span class="op" id="1409049">[</span><span class="op" id="1409050">]</span><span class="builtintype" id="1409051">byte</span><span class="op" id="1409055">)</span>&nbsp;<span class="op" id="1409057">(</span><span class="ident" id="1409058">n</span>&nbsp;<span class="builtintype" id="1409060">int</span><span class="op" id="1409063">,</span>&nbsp;<span class="ident" id="1409065">err</span>&nbsp;<span class="builtintype" id="1409069">error</span><span class="op" id="1409074">)</span><br>
<span class="lineno">85</span><span class="op" id="1409076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1409079">//&nbsp;Closer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Close&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1409141">//</span><br>
<span class="lineno"></span><span class="comment" id="1409144">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Close&nbsp;after&nbsp;the&nbsp;first&nbsp;call&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">90</span><span class="comment" id="1409204">//&nbsp;Specific&nbsp;implementations&nbsp;may&nbsp;document&nbsp;their&nbsp;own&nbsp;behavior.</span><br>
<span class="lineno"></span><span class="keyword" id="1409265">type</span>&nbsp;<span class="ident" id="1409270">Closer</span>&nbsp;<span class="keyword" id="1409277">interface</span>&nbsp;<span class="op" id="1409287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1409290">Close</span><span class="op" id="1409295">(</span><span class="op" id="1409296">)</span>&nbsp;<span class="builtintype" id="1409298">error</span><br>
<span class="lineno"></span><span class="op" id="1409304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="1409307">//&nbsp;Seeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Seek&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1409368">//</span><br>
<span class="lineno"></span><span class="comment" id="1409371">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;to&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1409433">//&nbsp;interpreted&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1409503">//&nbsp;the&nbsp;file,&nbsp;1&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means</span><br>
<span class="lineno">100</span><span class="comment" id="1409568">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.&nbsp;&nbsp;Seek&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1409638">//&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1409646">//</span><br>
<span class="lineno"></span><span class="comment" id="1409649">//&nbsp;Seeking&nbsp;to&nbsp;a&nbsp;negative&nbsp;offset&nbsp;is&nbsp;an&nbsp;error.&nbsp;Seeking&nbsp;to&nbsp;any&nbsp;positive</span><br>
<span class="lineno"></span><span class="comment" id="1409718">//&nbsp;offset&nbsp;is&nbsp;legal,&nbsp;but&nbsp;the&nbsp;behavior&nbsp;of&nbsp;subsequent&nbsp;I/O&nbsp;operations&nbsp;on</span><br>
<span class="lineno">105</span><span class="comment" id="1409787">//&nbsp;the&nbsp;underlying&nbsp;object&nbsp;is&nbsp;implementation-dependent.</span><br>
<span class="lineno"></span><span class="keyword" id="1409841">type</span>&nbsp;<span class="ident" id="1409846">Seeker</span>&nbsp;<span class="keyword" id="1409853">interface</span>&nbsp;<span class="op" id="1409863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1409866">Seek</span><span class="op" id="1409870">(</span><span class="ident" id="1409871">offset</span>&nbsp;<span class="ident" id="1409878">int64</span><span class="op" id="1409883">,</span>&nbsp;<span class="ident" id="1409885">whence</span>&nbsp;<span class="builtintype" id="1409892">int</span><span class="op" id="1409895">)</span>&nbsp;<span class="op" id="1409897">(</span><span class="ident" id="1409898">int64</span><span class="op" id="1409903">,</span>&nbsp;<span class="builtintype" id="1409905">error</span><span class="op" id="1409910">)</span><br>
<span class="lineno"></span><span class="op" id="1409912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="1409915">//&nbsp;ReadWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1409992">type</span>&nbsp;<span class="ident" id="1409997">ReadWriter</span>&nbsp;<span class="keyword" id="1410008">interface</span>&nbsp;<span class="op" id="1410018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410021">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410029">Writer</span><br>
<span class="lineno"></span><span class="op" id="1410036">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="1410039">//&nbsp;ReadCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410116">type</span>&nbsp;<span class="ident" id="1410121">ReadCloser</span>&nbsp;<span class="keyword" id="1410132">interface</span>&nbsp;<span class="op" id="1410142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410145">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410153">Closer</span><br>
<span class="lineno">120</span><span class="op" id="1410160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1410163">//&nbsp;WriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410242">type</span>&nbsp;<span class="ident" id="1410247">WriteCloser</span>&nbsp;<span class="keyword" id="1410259">interface</span>&nbsp;<span class="op" id="1410269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410272">Writer</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410280">Closer</span><br>
<span class="lineno"></span><span class="op" id="1410287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1410290">//&nbsp;ReadWriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410379">type</span>&nbsp;<span class="ident" id="1410384">ReadWriteCloser</span>&nbsp;<span class="keyword" id="1410400">interface</span>&nbsp;<span class="op" id="1410410">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410413">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410421">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410429">Closer</span><br>
<span class="lineno"></span><span class="op" id="1410436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="1410439">//&nbsp;ReadSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410515">type</span>&nbsp;<span class="ident" id="1410520">ReadSeeker</span>&nbsp;<span class="keyword" id="1410531">interface</span>&nbsp;<span class="op" id="1410541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410544">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410552">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1410559">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1410562">//&nbsp;WriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410640">type</span>&nbsp;<span class="ident" id="1410645">WriteSeeker</span>&nbsp;<span class="keyword" id="1410657">interface</span>&nbsp;<span class="op" id="1410667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410670">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410678">Seeker</span><br>
<span class="lineno">145</span><span class="op" id="1410685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1410688">//&nbsp;ReadWriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1410776">type</span>&nbsp;<span class="ident" id="1410781">ReadWriteSeeker</span>&nbsp;<span class="keyword" id="1410797">interface</span>&nbsp;<span class="op" id="1410807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410810">Reader</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410818">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1410826">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1410833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1410836">//&nbsp;ReaderFrom&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno">155</span><span class="comment" id="1410899">//</span><br>
<span class="lineno"></span><span class="comment" id="1410902">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;or&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1410952">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1411003">//&nbsp;Any&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="1411076">//</span><br>
<span class="lineno">160</span><span class="comment" id="1411079">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;ReaderFrom&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1411130">type</span>&nbsp;<span class="ident" id="1411135">ReaderFrom</span>&nbsp;<span class="keyword" id="1411146">interface</span>&nbsp;<span class="op" id="1411156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411159">ReadFrom</span><span class="op" id="1411167">(</span><span class="ident" id="1411168">r</span>&nbsp;<span class="ident" id="1411170">Reader</span><span class="op" id="1411176">)</span>&nbsp;<span class="op" id="1411178">(</span><span class="ident" id="1411179">n</span>&nbsp;<span class="ident" id="1411181">int64</span><span class="op" id="1411186">,</span>&nbsp;<span class="ident" id="1411188">err</span>&nbsp;<span class="builtintype" id="1411192">error</span><span class="op" id="1411197">)</span><br>
<span class="lineno"></span><span class="op" id="1411199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="1411202">//&nbsp;WriterTo&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1411262">//</span><br>
<span class="lineno"></span><span class="comment" id="1411265">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;there&#39;s&nbsp;no&nbsp;more&nbsp;data&nbsp;to&nbsp;write&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1411332">//&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="1411399">//&nbsp;written.&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno">170</span><span class="comment" id="1411468">//</span><br>
<span class="lineno"></span><span class="comment" id="1411471">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;WriterTo&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1411520">type</span>&nbsp;<span class="ident" id="1411525">WriterTo</span>&nbsp;<span class="keyword" id="1411534">interface</span>&nbsp;<span class="op" id="1411544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1411547">WriteTo</span><span class="op" id="1411554">(</span><span class="ident" id="1411555">w</span>&nbsp;<span class="ident" id="1411557">Writer</span><span class="op" id="1411563">)</span>&nbsp;<span class="op" id="1411565">(</span><span class="ident" id="1411566">n</span>&nbsp;<span class="ident" id="1411568">int64</span><span class="op" id="1411573">,</span>&nbsp;<span class="ident" id="1411575">err</span>&nbsp;<span class="builtintype" id="1411579">error</span><span class="op" id="1411584">)</span><br>
<span class="lineno"></span><span class="op" id="1411586">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="1411589">//&nbsp;ReaderAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1411654">//</span><br>
<span class="lineno"></span><span class="comment" id="1411657">//&nbsp;ReadAt&nbsp;reads&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1411723">//&nbsp;underlying&nbsp;input&nbsp;source.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">180</span><span class="comment" id="1411783">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="comment" id="1411837">//</span><br>
<span class="lineno"></span><span class="comment" id="1411840">//&nbsp;When&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="1411902">//&nbsp;explaining&nbsp;why&nbsp;more&nbsp;bytes&nbsp;were&nbsp;not&nbsp;returned.&nbsp;&nbsp;In&nbsp;this&nbsp;respect,</span><br>
<span class="lineno"></span><span class="comment" id="1411968">//&nbsp;ReadAt&nbsp;is&nbsp;stricter&nbsp;than&nbsp;Read.</span><br>
<span class="lineno">185</span><span class="comment" id="1412001">//</span><br>
<span class="lineno"></span><span class="comment" id="1412004">//&nbsp;Even&nbsp;if&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch</span><br>
<span class="lineno"></span><span class="comment" id="1412073">//&nbsp;space&nbsp;during&nbsp;the&nbsp;call.&nbsp;&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1412148">//&nbsp;ReadAt&nbsp;blocks&nbsp;until&nbsp;either&nbsp;all&nbsp;the&nbsp;data&nbsp;is&nbsp;available&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="1412224">//&nbsp;In&nbsp;this&nbsp;respect&nbsp;ReadAt&nbsp;is&nbsp;different&nbsp;from&nbsp;Read.</span><br>
<span class="lineno">190</span><span class="comment" id="1412274">//</span><br>
<span class="lineno"></span><span class="comment" id="1412277">//&nbsp;If&nbsp;the&nbsp;n&nbsp;=&nbsp;len(p)&nbsp;bytes&nbsp;returned&nbsp;by&nbsp;ReadAt&nbsp;are&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1412345">//&nbsp;input&nbsp;source,&nbsp;ReadAt&nbsp;may&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1412413">//</span><br>
<span class="lineno"></span><span class="comment" id="1412416">//&nbsp;If&nbsp;ReadAt&nbsp;is&nbsp;reading&nbsp;from&nbsp;an&nbsp;input&nbsp;source&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno">195</span><span class="comment" id="1412481">//&nbsp;ReadAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="1412543">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1412559">//</span><br>
<span class="lineno"></span><span class="comment" id="1412562">//&nbsp;Clients&nbsp;of&nbsp;ReadAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;ReadAt&nbsp;calls&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1412624">//&nbsp;same&nbsp;input&nbsp;source.</span><br>
<span class="lineno">200</span><span class="comment" id="1412646">//</span><br>
<span class="lineno"></span><span class="comment" id="1412649">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1412687">type</span>&nbsp;<span class="ident" id="1412692">ReaderAt</span>&nbsp;<span class="keyword" id="1412701">interface</span>&nbsp;<span class="op" id="1412711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1412714">ReadAt</span><span class="op" id="1412720">(</span><span class="ident" id="1412721">p</span>&nbsp;<span class="op" id="1412723">[</span><span class="op" id="1412724">]</span><span class="builtintype" id="1412725">byte</span><span class="op" id="1412729">,</span>&nbsp;<span class="ident" id="1412731">off</span>&nbsp;<span class="ident" id="1412735">int64</span><span class="op" id="1412740">)</span>&nbsp;<span class="op" id="1412742">(</span><span class="ident" id="1412743">n</span>&nbsp;<span class="builtintype" id="1412745">int</span><span class="op" id="1412748">,</span>&nbsp;<span class="ident" id="1412750">err</span>&nbsp;<span class="builtintype" id="1412754">error</span><span class="op" id="1412759">)</span><br>
<span class="lineno"></span><span class="op" id="1412761">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1412764">//&nbsp;WriterAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;WriteAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1412830">//</span><br>
<span class="lineno"></span><span class="comment" id="1412833">//&nbsp;WriteAt&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream</span><br>
<span class="lineno"></span><span class="comment" id="1412901">//&nbsp;at&nbsp;offset&nbsp;off.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno">210</span><span class="comment" id="1412985">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1413051">//&nbsp;WriteAt&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="1413116">//</span><br>
<span class="lineno"></span><span class="comment" id="1413119">//&nbsp;If&nbsp;WriteAt&nbsp;is&nbsp;writing&nbsp;to&nbsp;a&nbsp;destination&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1413181">//&nbsp;WriteAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno">215</span><span class="comment" id="1413244">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1413260">//</span><br>
<span class="lineno"></span><span class="comment" id="1413263">//&nbsp;Clients&nbsp;of&nbsp;WriteAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;WriteAt&nbsp;calls&nbsp;on&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="1413332">//&nbsp;destination&nbsp;if&nbsp;the&nbsp;ranges&nbsp;do&nbsp;not&nbsp;overlap.</span><br>
<span class="lineno"></span><span class="comment" id="1413377">//</span><br>
<span class="lineno">220</span><span class="comment" id="1413380">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1413418">type</span>&nbsp;<span class="ident" id="1413423">WriterAt</span>&nbsp;<span class="keyword" id="1413432">interface</span>&nbsp;<span class="op" id="1413442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413445">WriteAt</span><span class="op" id="1413452">(</span><span class="ident" id="1413453">p</span>&nbsp;<span class="op" id="1413455">[</span><span class="op" id="1413456">]</span><span class="builtintype" id="1413457">byte</span><span class="op" id="1413461">,</span>&nbsp;<span class="ident" id="1413463">off</span>&nbsp;<span class="ident" id="1413467">int64</span><span class="op" id="1413472">)</span>&nbsp;<span class="op" id="1413474">(</span><span class="ident" id="1413475">n</span>&nbsp;<span class="builtintype" id="1413477">int</span><span class="op" id="1413480">,</span>&nbsp;<span class="ident" id="1413482">err</span>&nbsp;<span class="builtintype" id="1413486">error</span><span class="op" id="1413491">)</span><br>
<span class="lineno"></span><span class="op" id="1413493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="comment" id="1413496">//&nbsp;ByteReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1413559">//</span><br>
<span class="lineno"></span><span class="comment" id="1413562">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1413622">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="1413667">type</span>&nbsp;<span class="ident" id="1413672">ByteReader</span>&nbsp;<span class="keyword" id="1413683">interface</span>&nbsp;<span class="op" id="1413693">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1413696">ReadByte</span><span class="op" id="1413704">(</span><span class="op" id="1413705">)</span>&nbsp;<span class="op" id="1413707">(</span><span class="ident" id="1413708">c</span>&nbsp;<span class="builtintype" id="1413710">byte</span><span class="op" id="1413714">,</span>&nbsp;<span class="ident" id="1413716">err</span>&nbsp;<span class="builtintype" id="1413720">error</span><span class="op" id="1413725">)</span><br>
<span class="lineno"></span><span class="op" id="1413727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1413730">//&nbsp;ByteScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadByte&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1413801">//&nbsp;basic&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno">235</span><span class="comment" id="1413827">//</span><br>
<span class="lineno"></span><span class="comment" id="1413830">//&nbsp;UnreadByte&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadByte&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1413901">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno"></span><span class="comment" id="1413938">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadByte&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno"></span><span class="comment" id="1414008">//&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno">240</span><span class="keyword" id="1414029">type</span>&nbsp;<span class="ident" id="1414034">ByteScanner</span>&nbsp;<span class="keyword" id="1414046">interface</span>&nbsp;<span class="op" id="1414056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414059">ByteReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414071">UnreadByte</span><span class="op" id="1414081">(</span><span class="op" id="1414082">)</span>&nbsp;<span class="builtintype" id="1414084">error</span><br>
<span class="lineno"></span><span class="op" id="1414090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="1414093">//&nbsp;ByteWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1414157">type</span>&nbsp;<span class="ident" id="1414162">ByteWriter</span>&nbsp;<span class="keyword" id="1414173">interface</span>&nbsp;<span class="op" id="1414183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414186">WriteByte</span><span class="op" id="1414195">(</span><span class="ident" id="1414196">c</span>&nbsp;<span class="builtintype" id="1414198">byte</span><span class="op" id="1414202">)</span>&nbsp;<span class="builtintype" id="1414204">error</span><br>
<span class="lineno"></span><span class="op" id="1414210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="1414213">//&nbsp;RuneReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1414276">//</span><br>
<span class="lineno"></span><span class="comment" id="1414279">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="1414338">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;no&nbsp;character&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1414404">//&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno">255</span><span class="keyword" id="1414435">type</span>&nbsp;<span class="ident" id="1414440">RuneReader</span>&nbsp;<span class="keyword" id="1414451">interface</span>&nbsp;<span class="op" id="1414461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414464">ReadRune</span><span class="op" id="1414472">(</span><span class="op" id="1414473">)</span>&nbsp;<span class="op" id="1414475">(</span><span class="ident" id="1414476">r</span>&nbsp;<span class="builtintype" id="1414478">rune</span><span class="op" id="1414482">,</span>&nbsp;<span class="ident" id="1414484">size</span>&nbsp;<span class="builtintype" id="1414489">int</span><span class="op" id="1414492">,</span>&nbsp;<span class="ident" id="1414494">err</span>&nbsp;<span class="builtintype" id="1414498">error</span><span class="op" id="1414503">)</span><br>
<span class="lineno"></span><span class="op" id="1414505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1414508">//&nbsp;RuneScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadRune&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="1414579">//&nbsp;basic&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1414605">//</span><br>
<span class="lineno"></span><span class="comment" id="1414608">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune</span><br>
<span class="lineno"></span><span class="comment" id="1414679">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="1414716">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadRune&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno">265</span><span class="comment" id="1414786">//&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="keyword" id="1414807">type</span>&nbsp;<span class="ident" id="1414812">RuneScanner</span>&nbsp;<span class="keyword" id="1414824">interface</span>&nbsp;<span class="op" id="1414834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414837">RuneReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414849">UnreadRune</span><span class="op" id="1414859">(</span><span class="op" id="1414860">)</span>&nbsp;<span class="builtintype" id="1414862">error</span><br>
<span class="lineno"></span><span class="op" id="1414868">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="1414871">//&nbsp;stringWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteString&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1414939">type</span>&nbsp;<span class="ident" id="1414944">stringWriter</span>&nbsp;<span class="keyword" id="1414957">interface</span>&nbsp;<span class="op" id="1414967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1414970">WriteString</span><span class="op" id="1414981">(</span><span class="ident" id="1414982">s</span>&nbsp;<span class="builtintype" id="1414984">string</span><span class="op" id="1414990">)</span>&nbsp;<span class="op" id="1414992">(</span><span class="ident" id="1414993">n</span>&nbsp;<span class="builtintype" id="1414995">int</span><span class="op" id="1414998">,</span>&nbsp;<span class="ident" id="1415000">err</span>&nbsp;<span class="builtintype" id="1415004">error</span><span class="op" id="1415009">)</span><br>
<span class="lineno"></span><span class="op" id="1415011">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="1415014">//&nbsp;WriteString&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;w,&nbsp;which&nbsp;accepts&nbsp;an&nbsp;array&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1415104">//&nbsp;If&nbsp;w&nbsp;already&nbsp;implements&nbsp;a&nbsp;WriteString&nbsp;method,&nbsp;it&nbsp;is&nbsp;invoked&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="1415177">func</span>&nbsp;<span class="ident" id="1415182">WriteString</span><span class="op" id="1415193">(</span><span class="ident" id="1415194">w</span>&nbsp;<span class="ident" id="1415196">Writer</span><span class="op" id="1415202">,</span>&nbsp;<span class="ident" id="1415204">s</span>&nbsp;<span class="builtintype" id="1415206">string</span><span class="op" id="1415212">)</span>&nbsp;<span class="op" id="1415214">(</span><span class="ident" id="1415215">n</span>&nbsp;<span class="builtintype" id="1415217">int</span><span class="op" id="1415220">,</span>&nbsp;<span class="ident" id="1415222">err</span>&nbsp;<span class="builtintype" id="1415226">error</span><span class="op" id="1415231">)</span>&nbsp;<span class="op" id="1415233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415236">if</span>&nbsp;<span class="ident" id="1415239">sw</span><span class="op" id="1415241">,</span>&nbsp;<span class="ident" id="1415243">ok</span>&nbsp;<span class="op" id="1415246">:=</span>&nbsp;<span class="ident" id="1415249">w</span><span class="op" id="1415250">.</span><span class="op" id="1415251">(</span><span class="ident" id="1415252">stringWriter</span><span class="op" id="1415264">)</span><span class="op" id="1415265">;</span>&nbsp;<span class="ident" id="1415267">ok</span>&nbsp;<span class="op" id="1415270">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415274">return</span>&nbsp;<span class="ident" id="1415281">sw</span><span class="op" id="1415283">.</span><span class="ident" id="1415284">WriteString</span><span class="op" id="1415295">(</span><span class="ident" id="1415296">s</span><span class="op" id="1415297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415303">return</span>&nbsp;<span class="ident" id="1415310">w</span><span class="op" id="1415311">.</span><span class="ident" id="1415312">Write</span><span class="op" id="1415317">(</span><span class="op" id="1415318">[</span><span class="op" id="1415319">]</span><span class="builtintype" id="1415320">byte</span><span class="op" id="1415324">(</span><span class="ident" id="1415325">s</span><span class="op" id="1415326">)</span><span class="op" id="1415327">)</span><br>
<span class="lineno"></span><span class="op" id="1415329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="1415332">//&nbsp;ReadAtLeast&nbsp;reads&nbsp;from&nbsp;r&nbsp;into&nbsp;buf&nbsp;until&nbsp;it&nbsp;has&nbsp;read&nbsp;at&nbsp;least&nbsp;min&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1415407">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1415487">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1415535">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;fewer&nbsp;than&nbsp;min&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1415592">//&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno">290</span><span class="comment" id="1415633">//&nbsp;If&nbsp;min&nbsp;is&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;buf,&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrShortBuffer.</span><br>
<span class="lineno"></span><span class="comment" id="1415714">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;&gt;=&nbsp;min&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1415764">func</span>&nbsp;<span class="ident" id="1415769">ReadAtLeast</span><span class="op" id="1415780">(</span><span class="ident" id="1415781">r</span>&nbsp;<span class="ident" id="1415783">Reader</span><span class="op" id="1415789">,</span>&nbsp;<span class="ident" id="1415791">buf</span>&nbsp;<span class="op" id="1415795">[</span><span class="op" id="1415796">]</span><span class="builtintype" id="1415797">byte</span><span class="op" id="1415801">,</span>&nbsp;<span class="ident" id="1415803">min</span>&nbsp;<span class="builtintype" id="1415807">int</span><span class="op" id="1415810">)</span>&nbsp;<span class="op" id="1415812">(</span><span class="ident" id="1415813">n</span>&nbsp;<span class="builtintype" id="1415815">int</span><span class="op" id="1415818">,</span>&nbsp;<span class="ident" id="1415820">err</span>&nbsp;<span class="builtintype" id="1415824">error</span><span class="op" id="1415829">)</span>&nbsp;<span class="op" id="1415831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415834">if</span>&nbsp;<span class="builtinfunc" id="1415837">len</span><span class="op" id="1415840">(</span><span class="ident" id="1415841">buf</span><span class="op" id="1415844">)</span>&nbsp;<span class="op" id="1415846">&lt;</span>&nbsp;<span class="ident" id="1415848">min</span>&nbsp;<span class="op" id="1415852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415856">return</span>&nbsp;<span class="num" id="1415863">0</span><span class="op" id="1415864">,</span>&nbsp;<span class="ident" id="1415866">ErrShortBuffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415885">for</span>&nbsp;<span class="ident" id="1415889">n</span>&nbsp;<span class="op" id="1415891">&lt;</span>&nbsp;<span class="ident" id="1415893">min</span>&nbsp;<span class="op" id="1415897">&amp;&amp;</span>&nbsp;<span class="ident" id="1415900">err</span>&nbsp;<span class="op" id="1415904">==</span>&nbsp;<span class="ident" id="1415907">nil</span>&nbsp;<span class="op" id="1415911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415915">var</span>&nbsp;<span class="ident" id="1415919">nn</span>&nbsp;<span class="builtintype" id="1415922">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415928">nn</span><span class="op" id="1415930">,</span>&nbsp;<span class="ident" id="1415932">err</span>&nbsp;<span class="op" id="1415936">=</span>&nbsp;<span class="ident" id="1415938">r</span><span class="op" id="1415939">.</span><span class="ident" id="1415940">Read</span><span class="op" id="1415944">(</span><span class="ident" id="1415945">buf</span><span class="op" id="1415948">[</span><span class="ident" id="1415949">n</span><span class="op" id="1415950">:</span><span class="op" id="1415951">]</span><span class="op" id="1415952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415956">n</span>&nbsp;<span class="op" id="1415958">+=</span>&nbsp;<span class="ident" id="1415961">nn</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1415968">if</span>&nbsp;<span class="ident" id="1415971">n</span>&nbsp;<span class="op" id="1415973">&gt;=</span>&nbsp;<span class="ident" id="1415976">min</span>&nbsp;<span class="op" id="1415980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1415984">err</span>&nbsp;<span class="op" id="1415988">=</span>&nbsp;<span class="ident" id="1415990">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1415995">}</span>&nbsp;<span class="keyword" id="1415997">else</span>&nbsp;<span class="keyword" id="1416002">if</span>&nbsp;<span class="ident" id="1416005">n</span>&nbsp;<span class="op" id="1416007">&gt;</span>&nbsp;<span class="num" id="1416009">0</span>&nbsp;<span class="op" id="1416011">&amp;&amp;</span>&nbsp;<span class="ident" id="1416014">err</span>&nbsp;<span class="op" id="1416018">==</span>&nbsp;<span class="ident" id="1416021">EOF</span>&nbsp;<span class="op" id="1416025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1416029">err</span>&nbsp;<span class="op" id="1416033">=</span>&nbsp;<span class="ident" id="1416035">ErrUnexpectedEOF</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1416053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416056">return</span><br>
<span class="lineno"></span><span class="op" id="1416063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1416066">//&nbsp;ReadFull&nbsp;reads&nbsp;exactly&nbsp;len(buf)&nbsp;bytes&nbsp;from&nbsp;r&nbsp;into&nbsp;buf.</span><br>
<span class="lineno">310</span><span class="comment" id="1416124">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1416204">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1416252">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;some&nbsp;but&nbsp;not&nbsp;all&nbsp;the&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1416315">//&nbsp;ReadFull&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno"></span><span class="comment" id="1416353">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;==&nbsp;len(buf)&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno">315</span><span class="keyword" id="1416408">func</span>&nbsp;<span class="ident" id="1416413">ReadFull</span><span class="op" id="1416421">(</span><span class="ident" id="1416422">r</span>&nbsp;<span class="ident" id="1416424">Reader</span><span class="op" id="1416430">,</span>&nbsp;<span class="ident" id="1416432">buf</span>&nbsp;<span class="op" id="1416436">[</span><span class="op" id="1416437">]</span><span class="builtintype" id="1416438">byte</span><span class="op" id="1416442">)</span>&nbsp;<span class="op" id="1416444">(</span><span class="ident" id="1416445">n</span>&nbsp;<span class="builtintype" id="1416447">int</span><span class="op" id="1416450">,</span>&nbsp;<span class="ident" id="1416452">err</span>&nbsp;<span class="builtintype" id="1416456">error</span><span class="op" id="1416461">)</span>&nbsp;<span class="op" id="1416463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416466">return</span>&nbsp;<span class="ident" id="1416473">ReadAtLeast</span><span class="op" id="1416484">(</span><span class="ident" id="1416485">r</span><span class="op" id="1416486">,</span>&nbsp;<span class="ident" id="1416488">buf</span><span class="op" id="1416491">,</span>&nbsp;<span class="builtinfunc" id="1416493">len</span><span class="op" id="1416496">(</span><span class="ident" id="1416497">buf</span><span class="op" id="1416500">)</span><span class="op" id="1416501">)</span><br>
<span class="lineno"></span><span class="op" id="1416503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1416506">//&nbsp;CopyN&nbsp;copies&nbsp;n&nbsp;bytes&nbsp;(or&nbsp;until&nbsp;an&nbsp;error)&nbsp;from&nbsp;src&nbsp;to&nbsp;dst.</span><br>
<span class="lineno">320</span><span class="comment" id="1416567">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;the&nbsp;earliest</span><br>
<span class="lineno"></span><span class="comment" id="1416625">//&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying.</span><br>
<span class="lineno"></span><span class="comment" id="1416661">//&nbsp;On&nbsp;return,&nbsp;written&nbsp;==&nbsp;n&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1416715">//</span><br>
<span class="lineno"></span><span class="comment" id="1416718">//&nbsp;If&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno">325</span><span class="comment" id="1416765">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;using&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1416802">func</span>&nbsp;<span class="ident" id="1416807">CopyN</span><span class="op" id="1416812">(</span><span class="ident" id="1416813">dst</span>&nbsp;<span class="ident" id="1416817">Writer</span><span class="op" id="1416823">,</span>&nbsp;<span class="ident" id="1416825">src</span>&nbsp;<span class="ident" id="1416829">Reader</span><span class="op" id="1416835">,</span>&nbsp;<span class="ident" id="1416837">n</span>&nbsp;<span class="ident" id="1416839">int64</span><span class="op" id="1416844">)</span>&nbsp;<span class="op" id="1416846">(</span><span class="ident" id="1416847">written</span>&nbsp;<span class="ident" id="1416855">int64</span><span class="op" id="1416860">,</span>&nbsp;<span class="ident" id="1416862">err</span>&nbsp;<span class="builtintype" id="1416866">error</span><span class="op" id="1416871">)</span>&nbsp;<span class="op" id="1416873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1416876">written</span><span class="op" id="1416883">,</span>&nbsp;<span class="ident" id="1416885">err</span>&nbsp;<span class="op" id="1416889">=</span>&nbsp;<span class="ident" id="1416891">Copy</span><span class="op" id="1416895">(</span><span class="ident" id="1416896">dst</span><span class="op" id="1416899">,</span>&nbsp;<span class="ident" id="1416901">LimitReader</span><span class="op" id="1416912">(</span><span class="ident" id="1416913">src</span><span class="op" id="1416916">,</span>&nbsp;<span class="ident" id="1416918">n</span><span class="op" id="1416919">)</span><span class="op" id="1416920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416923">if</span>&nbsp;<span class="ident" id="1416926">written</span>&nbsp;<span class="op" id="1416934">==</span>&nbsp;<span class="ident" id="1416937">n</span>&nbsp;<span class="op" id="1416939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416943">return</span>&nbsp;<span class="ident" id="1416950">n</span><span class="op" id="1416951">,</span>&nbsp;<span class="ident" id="1416953">nil</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1416958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1416961">if</span>&nbsp;<span class="ident" id="1416964">written</span>&nbsp;<span class="op" id="1416972">&lt;</span>&nbsp;<span class="ident" id="1416974">n</span>&nbsp;<span class="op" id="1416976">&amp;&amp;</span>&nbsp;<span class="ident" id="1416979">err</span>&nbsp;<span class="op" id="1416983">==</span>&nbsp;<span class="ident" id="1416986">nil</span>&nbsp;<span class="op" id="1416990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1416994">//&nbsp;src&nbsp;stopped&nbsp;early;&nbsp;must&nbsp;have&nbsp;been&nbsp;EOF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1417038">err</span>&nbsp;<span class="op" id="1417042">=</span>&nbsp;<span class="ident" id="1417044">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1417049">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417052">return</span><br>
<span class="lineno"></span><span class="op" id="1417059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1417062">//&nbsp;Copy&nbsp;copies&nbsp;from&nbsp;src&nbsp;to&nbsp;dst&nbsp;until&nbsp;either&nbsp;EOF&nbsp;is&nbsp;reached</span><br>
<span class="lineno"></span><span class="comment" id="1417121">//&nbsp;on&nbsp;src&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">340</span><span class="comment" id="1417183">//&nbsp;copied&nbsp;and&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1417248">//</span><br>
<span class="lineno"></span><span class="comment" id="1417251">//&nbsp;A&nbsp;successful&nbsp;Copy&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1417308">//&nbsp;Because&nbsp;Copy&nbsp;is&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="1417371">//&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno">345</span><span class="comment" id="1417429">//</span><br>
<span class="lineno"></span><span class="comment" id="1417432">//&nbsp;If&nbsp;src&nbsp;implements&nbsp;the&nbsp;WriterTo&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1417477">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;src.WriteTo(dst).</span><br>
<span class="lineno"></span><span class="comment" id="1417533">//&nbsp;Otherwise,&nbsp;if&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1417591">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;dst.ReadFrom(src).</span><br>
<span class="lineno">350</span><span class="keyword" id="1417648">func</span>&nbsp;<span class="ident" id="1417653">Copy</span><span class="op" id="1417657">(</span><span class="ident" id="1417658">dst</span>&nbsp;<span class="ident" id="1417662">Writer</span><span class="op" id="1417668">,</span>&nbsp;<span class="ident" id="1417670">src</span>&nbsp;<span class="ident" id="1417674">Reader</span><span class="op" id="1417680">)</span>&nbsp;<span class="op" id="1417682">(</span><span class="ident" id="1417683">written</span>&nbsp;<span class="ident" id="1417691">int64</span><span class="op" id="1417696">,</span>&nbsp;<span class="ident" id="1417698">err</span>&nbsp;<span class="builtintype" id="1417702">error</span><span class="op" id="1417707">)</span>&nbsp;<span class="op" id="1417709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1417712">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;has&nbsp;a&nbsp;WriteTo&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1417775">//&nbsp;Avoids&nbsp;an&nbsp;allocation&nbsp;and&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417812">if</span>&nbsp;<span class="ident" id="1417815">wt</span><span class="op" id="1417817">,</span>&nbsp;<span class="ident" id="1417819">ok</span>&nbsp;<span class="op" id="1417822">:=</span>&nbsp;<span class="ident" id="1417825">src</span><span class="op" id="1417828">.</span><span class="op" id="1417829">(</span><span class="ident" id="1417830">WriterTo</span><span class="op" id="1417838">)</span><span class="op" id="1417839">;</span>&nbsp;<span class="ident" id="1417841">ok</span>&nbsp;<span class="op" id="1417844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417848">return</span>&nbsp;<span class="ident" id="1417855">wt</span><span class="op" id="1417857">.</span><span class="ident" id="1417858">WriteTo</span><span class="op" id="1417865">(</span><span class="ident" id="1417866">dst</span><span class="op" id="1417869">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1417872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1417875">//&nbsp;Similarly,&nbsp;if&nbsp;the&nbsp;writer&nbsp;has&nbsp;a&nbsp;ReadFrom&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417950">if</span>&nbsp;<span class="ident" id="1417953">rt</span><span class="op" id="1417955">,</span>&nbsp;<span class="ident" id="1417957">ok</span>&nbsp;<span class="op" id="1417960">:=</span>&nbsp;<span class="ident" id="1417963">dst</span><span class="op" id="1417966">.</span><span class="op" id="1417967">(</span><span class="ident" id="1417968">ReaderFrom</span><span class="op" id="1417978">)</span><span class="op" id="1417979">;</span>&nbsp;<span class="ident" id="1417981">ok</span>&nbsp;<span class="op" id="1417984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1417988">return</span>&nbsp;<span class="ident" id="1417995">rt</span><span class="op" id="1417997">.</span><span class="ident" id="1417998">ReadFrom</span><span class="op" id="1418006">(</span><span class="ident" id="1418007">src</span><span class="op" id="1418010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418013">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418016">buf</span>&nbsp;<span class="op" id="1418020">:=</span>&nbsp;<span class="builtinfunc" id="1418023">make</span><span class="op" id="1418027">(</span><span class="op" id="1418028">[</span><span class="op" id="1418029">]</span><span class="builtintype" id="1418030">byte</span><span class="op" id="1418034">,</span>&nbsp;<span class="num" id="1418036">32</span><span class="op" id="1418038">*</span><span class="num" id="1418039">1024</span><span class="op" id="1418043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418046">for</span>&nbsp;<span class="op" id="1418050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418054">nr</span><span class="op" id="1418056">,</span>&nbsp;<span class="ident" id="1418058">er</span>&nbsp;<span class="op" id="1418061">:=</span>&nbsp;<span class="ident" id="1418064">src</span><span class="op" id="1418067">.</span><span class="ident" id="1418068">Read</span><span class="op" id="1418072">(</span><span class="ident" id="1418073">buf</span><span class="op" id="1418076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418080">if</span>&nbsp;<span class="ident" id="1418083">nr</span>&nbsp;<span class="op" id="1418086">&gt;</span>&nbsp;<span class="num" id="1418088">0</span>&nbsp;<span class="op" id="1418090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418095">nw</span><span class="op" id="1418097">,</span>&nbsp;<span class="ident" id="1418099">ew</span>&nbsp;<span class="op" id="1418102">:=</span>&nbsp;<span class="ident" id="1418105">dst</span><span class="op" id="1418108">.</span><span class="ident" id="1418109">Write</span><span class="op" id="1418114">(</span><span class="ident" id="1418115">buf</span><span class="op" id="1418118">[</span><span class="num" id="1418119">0</span><span class="op" id="1418120">:</span><span class="ident" id="1418121">nr</span><span class="op" id="1418123">]</span><span class="op" id="1418124">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418129">if</span>&nbsp;<span class="ident" id="1418132">nw</span>&nbsp;<span class="op" id="1418135">&gt;</span>&nbsp;<span class="num" id="1418137">0</span>&nbsp;<span class="op" id="1418139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418145">written</span>&nbsp;<span class="op" id="1418153">+=</span>&nbsp;<span class="ident" id="1418156">int64</span><span class="op" id="1418161">(</span><span class="ident" id="1418162">nw</span><span class="op" id="1418164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418174">if</span>&nbsp;<span class="ident" id="1418177">ew</span>&nbsp;<span class="op" id="1418180">!=</span>&nbsp;<span class="ident" id="1418183">nil</span>&nbsp;<span class="op" id="1418187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418193">err</span>&nbsp;<span class="op" id="1418197">=</span>&nbsp;<span class="ident" id="1418199">ew</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418206">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418220">if</span>&nbsp;<span class="ident" id="1418223">nr</span>&nbsp;<span class="op" id="1418226">!=</span>&nbsp;<span class="ident" id="1418229">nw</span>&nbsp;<span class="op" id="1418232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418238">err</span>&nbsp;<span class="op" id="1418242">=</span>&nbsp;<span class="ident" id="1418244">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418262">break</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418279">if</span>&nbsp;<span class="ident" id="1418282">er</span>&nbsp;<span class="op" id="1418285">==</span>&nbsp;<span class="ident" id="1418288">EOF</span>&nbsp;<span class="op" id="1418292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418297">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418305">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418309">if</span>&nbsp;<span class="ident" id="1418312">er</span>&nbsp;<span class="op" id="1418315">!=</span>&nbsp;<span class="ident" id="1418318">nil</span>&nbsp;<span class="op" id="1418322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418327">err</span>&nbsp;<span class="op" id="1418331">=</span>&nbsp;<span class="ident" id="1418333">er</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418339">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418350">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418353">return</span>&nbsp;<span class="ident" id="1418360">written</span><span class="op" id="1418367">,</span>&nbsp;<span class="ident" id="1418369">err</span><br>
<span class="lineno"></span><span class="op" id="1418373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1418376">//&nbsp;LimitReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1418426">//&nbsp;but&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">390</span><span class="comment" id="1418463">//&nbsp;The&nbsp;underlying&nbsp;implementation&nbsp;is&nbsp;a&nbsp;*LimitedReader.</span><br>
<span class="lineno"></span><span class="keyword" id="1418517">func</span>&nbsp;<span class="ident" id="1418522">LimitReader</span><span class="op" id="1418533">(</span><span class="ident" id="1418534">r</span>&nbsp;<span class="ident" id="1418536">Reader</span><span class="op" id="1418542">,</span>&nbsp;<span class="ident" id="1418544">n</span>&nbsp;<span class="ident" id="1418546">int64</span><span class="op" id="1418551">)</span>&nbsp;<span class="ident" id="1418553">Reader</span>&nbsp;<span class="op" id="1418560">{</span>&nbsp;<span class="keyword" id="1418562">return</span>&nbsp;<span class="op" id="1418569">&amp;</span><span class="ident" id="1418570">LimitedReader</span><span class="op" id="1418583">{</span><span class="ident" id="1418584">r</span><span class="op" id="1418585">,</span>&nbsp;<span class="ident" id="1418587">n</span><span class="op" id="1418588">}</span>&nbsp;<span class="op" id="1418590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1418593">//&nbsp;A&nbsp;LimitedReader&nbsp;reads&nbsp;from&nbsp;R&nbsp;but&nbsp;limits&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1418650">//&nbsp;data&nbsp;returned&nbsp;to&nbsp;just&nbsp;N&nbsp;bytes.&nbsp;Each&nbsp;call&nbsp;to&nbsp;Read</span><br>
<span class="lineno">395</span><span class="comment" id="1418702">//&nbsp;updates&nbsp;N&nbsp;to&nbsp;reflect&nbsp;the&nbsp;new&nbsp;amount&nbsp;remaining.</span><br>
<span class="lineno"></span><span class="keyword" id="1418752">type</span>&nbsp;<span class="ident" id="1418757">LimitedReader</span>&nbsp;<span class="keyword" id="1418771">struct</span>&nbsp;<span class="op" id="1418778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418781">R</span>&nbsp;<span class="ident" id="1418783">Reader</span>&nbsp;<span class="comment" id="1418790">//&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418812">N</span>&nbsp;<span class="ident" id="1418814">int64</span>&nbsp;&nbsp;<span class="comment" id="1418821">//&nbsp;max&nbsp;bytes&nbsp;remaining</span><br>
<span class="lineno"></span><span class="op" id="1418844">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="1418847">func</span>&nbsp;<span class="op" id="1418852">(</span><span class="ident" id="1418853">l</span>&nbsp;<span class="op" id="1418855">*</span><span class="ident" id="1418856">LimitedReader</span><span class="op" id="1418869">)</span>&nbsp;<span class="ident" id="1418871">Read</span><span class="op" id="1418875">(</span><span class="ident" id="1418876">p</span>&nbsp;<span class="op" id="1418878">[</span><span class="op" id="1418879">]</span><span class="builtintype" id="1418880">byte</span><span class="op" id="1418884">)</span>&nbsp;<span class="op" id="1418886">(</span><span class="ident" id="1418887">n</span>&nbsp;<span class="builtintype" id="1418889">int</span><span class="op" id="1418892">,</span>&nbsp;<span class="ident" id="1418894">err</span>&nbsp;<span class="builtintype" id="1418898">error</span><span class="op" id="1418903">)</span>&nbsp;<span class="op" id="1418905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418908">if</span>&nbsp;<span class="ident" id="1418911">l</span><span class="op" id="1418912">.</span><span class="ident" id="1418913">N</span>&nbsp;<span class="op" id="1418915">&lt;=</span>&nbsp;<span class="num" id="1418918">0</span>&nbsp;<span class="op" id="1418920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418924">return</span>&nbsp;<span class="num" id="1418931">0</span><span class="op" id="1418932">,</span>&nbsp;<span class="ident" id="1418934">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418939">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1418942">if</span>&nbsp;<span class="ident" id="1418945">int64</span><span class="op" id="1418950">(</span><span class="builtinfunc" id="1418951">len</span><span class="op" id="1418954">(</span><span class="ident" id="1418955">p</span><span class="op" id="1418956">)</span><span class="op" id="1418957">)</span>&nbsp;<span class="op" id="1418959">&gt;</span>&nbsp;<span class="ident" id="1418961">l</span><span class="op" id="1418962">.</span><span class="ident" id="1418963">N</span>&nbsp;<span class="op" id="1418965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418969">p</span>&nbsp;<span class="op" id="1418971">=</span>&nbsp;<span class="ident" id="1418973">p</span><span class="op" id="1418974">[</span><span class="num" id="1418975">0</span><span class="op" id="1418976">:</span><span class="ident" id="1418977">l</span><span class="op" id="1418978">.</span><span class="ident" id="1418979">N</span><span class="op" id="1418980">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1418983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1418986">n</span><span class="op" id="1418987">,</span>&nbsp;<span class="ident" id="1418989">err</span>&nbsp;<span class="op" id="1418993">=</span>&nbsp;<span class="ident" id="1418995">l</span><span class="op" id="1418996">.</span><span class="ident" id="1418997">R</span><span class="op" id="1418998">.</span><span class="ident" id="1418999">Read</span><span class="op" id="1419003">(</span><span class="ident" id="1419004">p</span><span class="op" id="1419005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419008">l</span><span class="op" id="1419009">.</span><span class="ident" id="1419010">N</span>&nbsp;<span class="op" id="1419012">-=</span>&nbsp;<span class="ident" id="1419015">int64</span><span class="op" id="1419020">(</span><span class="ident" id="1419021">n</span><span class="op" id="1419022">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419025">return</span><br>
<span class="lineno"></span><span class="op" id="1419032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1419035">//&nbsp;NewSectionReader&nbsp;returns&nbsp;a&nbsp;SectionReader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1419097">//&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;and&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">415</span><span class="keyword" id="1419157">func</span>&nbsp;<span class="ident" id="1419162">NewSectionReader</span><span class="op" id="1419178">(</span><span class="ident" id="1419179">r</span>&nbsp;<span class="ident" id="1419181">ReaderAt</span><span class="op" id="1419189">,</span>&nbsp;<span class="ident" id="1419191">off</span>&nbsp;<span class="ident" id="1419195">int64</span><span class="op" id="1419200">,</span>&nbsp;<span class="ident" id="1419202">n</span>&nbsp;<span class="ident" id="1419204">int64</span><span class="op" id="1419209">)</span>&nbsp;<span class="op" id="1419211">*</span><span class="ident" id="1419212">SectionReader</span>&nbsp;<span class="op" id="1419226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419229">return</span>&nbsp;<span class="op" id="1419236">&amp;</span><span class="ident" id="1419237">SectionReader</span><span class="op" id="1419250">{</span><span class="ident" id="1419251">r</span><span class="op" id="1419252">,</span>&nbsp;<span class="ident" id="1419254">off</span><span class="op" id="1419257">,</span>&nbsp;<span class="ident" id="1419259">off</span><span class="op" id="1419262">,</span>&nbsp;<span class="ident" id="1419264">off</span>&nbsp;<span class="op" id="1419268">+</span>&nbsp;<span class="ident" id="1419270">n</span><span class="op" id="1419271">}</span><br>
<span class="lineno"></span><span class="op" id="1419273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1419276">//&nbsp;SectionReader&nbsp;implements&nbsp;Read,&nbsp;Seek,&nbsp;and&nbsp;ReadAt&nbsp;on&nbsp;a&nbsp;section</span><br>
<span class="lineno">420</span><span class="comment" id="1419340">//&nbsp;of&nbsp;an&nbsp;underlying&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="1419370">type</span>&nbsp;<span class="ident" id="1419375">SectionReader</span>&nbsp;<span class="keyword" id="1419389">struct</span>&nbsp;<span class="op" id="1419396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419399">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1419405">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419415">base</span>&nbsp;&nbsp;<span class="ident" id="1419421">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419428">off</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1419434">int64</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419441">limit</span>&nbsp;<span class="ident" id="1419447">int64</span><br>
<span class="lineno"></span><span class="op" id="1419453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1419456">func</span>&nbsp;<span class="op" id="1419461">(</span><span class="ident" id="1419462">s</span>&nbsp;<span class="op" id="1419464">*</span><span class="ident" id="1419465">SectionReader</span><span class="op" id="1419478">)</span>&nbsp;<span class="ident" id="1419480">Read</span><span class="op" id="1419484">(</span><span class="ident" id="1419485">p</span>&nbsp;<span class="op" id="1419487">[</span><span class="op" id="1419488">]</span><span class="builtintype" id="1419489">byte</span><span class="op" id="1419493">)</span>&nbsp;<span class="op" id="1419495">(</span><span class="ident" id="1419496">n</span>&nbsp;<span class="builtintype" id="1419498">int</span><span class="op" id="1419501">,</span>&nbsp;<span class="ident" id="1419503">err</span>&nbsp;<span class="builtintype" id="1419507">error</span><span class="op" id="1419512">)</span>&nbsp;<span class="op" id="1419514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419517">if</span>&nbsp;<span class="ident" id="1419520">s</span><span class="op" id="1419521">.</span><span class="ident" id="1419522">off</span>&nbsp;<span class="op" id="1419526">&gt;=</span>&nbsp;<span class="ident" id="1419529">s</span><span class="op" id="1419530">.</span><span class="ident" id="1419531">limit</span>&nbsp;<span class="op" id="1419537">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419541">return</span>&nbsp;<span class="num" id="1419548">0</span><span class="op" id="1419549">,</span>&nbsp;<span class="ident" id="1419551">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419559">if</span>&nbsp;<span class="ident" id="1419562">max</span>&nbsp;<span class="op" id="1419566">:=</span>&nbsp;<span class="ident" id="1419569">s</span><span class="op" id="1419570">.</span><span class="ident" id="1419571">limit</span>&nbsp;<span class="op" id="1419577">-</span>&nbsp;<span class="ident" id="1419579">s</span><span class="op" id="1419580">.</span><span class="ident" id="1419581">off</span><span class="op" id="1419584">;</span>&nbsp;<span class="ident" id="1419586">int64</span><span class="op" id="1419591">(</span><span class="builtinfunc" id="1419592">len</span><span class="op" id="1419595">(</span><span class="ident" id="1419596">p</span><span class="op" id="1419597">)</span><span class="op" id="1419598">)</span>&nbsp;<span class="op" id="1419600">&gt;</span>&nbsp;<span class="ident" id="1419602">max</span>&nbsp;<span class="op" id="1419606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419610">p</span>&nbsp;<span class="op" id="1419612">=</span>&nbsp;<span class="ident" id="1419614">p</span><span class="op" id="1419615">[</span><span class="num" id="1419616">0</span><span class="op" id="1419617">:</span><span class="ident" id="1419618">max</span><span class="op" id="1419621">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419624">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419627">n</span><span class="op" id="1419628">,</span>&nbsp;<span class="ident" id="1419630">err</span>&nbsp;<span class="op" id="1419634">=</span>&nbsp;<span class="ident" id="1419636">s</span><span class="op" id="1419637">.</span><span class="ident" id="1419638">r</span><span class="op" id="1419639">.</span><span class="ident" id="1419640">ReadAt</span><span class="op" id="1419646">(</span><span class="ident" id="1419647">p</span><span class="op" id="1419648">,</span>&nbsp;<span class="ident" id="1419650">s</span><span class="op" id="1419651">.</span><span class="ident" id="1419652">off</span><span class="op" id="1419655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419658">s</span><span class="op" id="1419659">.</span><span class="ident" id="1419660">off</span>&nbsp;<span class="op" id="1419664">+=</span>&nbsp;<span class="ident" id="1419667">int64</span><span class="op" id="1419672">(</span><span class="ident" id="1419673">n</span><span class="op" id="1419674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419677">return</span><br>
<span class="lineno"></span><span class="op" id="1419684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="1419687">var</span>&nbsp;<span class="ident" id="1419691">errWhence</span>&nbsp;<span class="op" id="1419701">=</span>&nbsp;<span class="ident" id="1419703">errors</span><span class="op" id="1419709">.</span><span class="ident" id="1419710">New</span><span class="op" id="1419713">(</span><span class="string" id="1419714">&#34;Seek:&nbsp;invalid&nbsp;whence&#34;</span><span class="op" id="1419736">)</span><br>
<span class="lineno"></span><span class="keyword" id="1419738">var</span>&nbsp;<span class="ident" id="1419742">errOffset</span>&nbsp;<span class="op" id="1419752">=</span>&nbsp;<span class="ident" id="1419754">errors</span><span class="op" id="1419760">.</span><span class="ident" id="1419761">New</span><span class="op" id="1419764">(</span><span class="string" id="1419765">&#34;Seek:&nbsp;invalid&nbsp;offset&#34;</span><span class="op" id="1419787">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1419790">func</span>&nbsp;<span class="op" id="1419795">(</span><span class="ident" id="1419796">s</span>&nbsp;<span class="op" id="1419798">*</span><span class="ident" id="1419799">SectionReader</span><span class="op" id="1419812">)</span>&nbsp;<span class="ident" id="1419814">Seek</span><span class="op" id="1419818">(</span><span class="ident" id="1419819">offset</span>&nbsp;<span class="ident" id="1419826">int64</span><span class="op" id="1419831">,</span>&nbsp;<span class="ident" id="1419833">whence</span>&nbsp;<span class="builtintype" id="1419840">int</span><span class="op" id="1419843">)</span>&nbsp;<span class="op" id="1419845">(</span><span class="ident" id="1419846">int64</span><span class="op" id="1419851">,</span>&nbsp;<span class="builtintype" id="1419853">error</span><span class="op" id="1419858">)</span>&nbsp;<span class="op" id="1419860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419863">switch</span>&nbsp;<span class="ident" id="1419870">whence</span>&nbsp;<span class="op" id="1419877">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419880">default</span><span class="op" id="1419887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419891">return</span>&nbsp;<span class="num" id="1419898">0</span><span class="op" id="1419899">,</span>&nbsp;<span class="ident" id="1419901">errWhence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419912">case</span>&nbsp;<span class="num" id="1419917">0</span><span class="op" id="1419918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419922">offset</span>&nbsp;<span class="op" id="1419929">+=</span>&nbsp;<span class="ident" id="1419932">s</span><span class="op" id="1419933">.</span><span class="ident" id="1419934">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419940">case</span>&nbsp;<span class="num" id="1419945">1</span><span class="op" id="1419946">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419950">offset</span>&nbsp;<span class="op" id="1419957">+=</span>&nbsp;<span class="ident" id="1419960">s</span><span class="op" id="1419961">.</span><span class="ident" id="1419962">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419967">case</span>&nbsp;<span class="num" id="1419972">2</span><span class="op" id="1419973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419977">offset</span>&nbsp;<span class="op" id="1419984">+=</span>&nbsp;<span class="ident" id="1419987">s</span><span class="op" id="1419988">.</span><span class="ident" id="1419989">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419999">if</span>&nbsp;<span class="ident" id="1420002">offset</span>&nbsp;<span class="op" id="1420009">&lt;</span>&nbsp;<span class="ident" id="1420011">s</span><span class="op" id="1420012">.</span><span class="ident" id="1420013">base</span>&nbsp;<span class="op" id="1420018">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420022">return</span>&nbsp;<span class="num" id="1420029">0</span><span class="op" id="1420030">,</span>&nbsp;<span class="ident" id="1420032">errOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420046">s</span><span class="op" id="1420047">.</span><span class="ident" id="1420048">off</span>&nbsp;<span class="op" id="1420052">=</span>&nbsp;<span class="ident" id="1420054">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420062">return</span>&nbsp;<span class="ident" id="1420069">offset</span>&nbsp;<span class="op" id="1420076">-</span>&nbsp;<span class="ident" id="1420078">s</span><span class="op" id="1420079">.</span><span class="ident" id="1420080">base</span><span class="op" id="1420084">,</span>&nbsp;<span class="ident" id="1420086">nil</span><br>
<span class="lineno"></span><span class="op" id="1420090">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="keyword" id="1420093">func</span>&nbsp;<span class="op" id="1420098">(</span><span class="ident" id="1420099">s</span>&nbsp;<span class="op" id="1420101">*</span><span class="ident" id="1420102">SectionReader</span><span class="op" id="1420115">)</span>&nbsp;<span class="ident" id="1420117">ReadAt</span><span class="op" id="1420123">(</span><span class="ident" id="1420124">p</span>&nbsp;<span class="op" id="1420126">[</span><span class="op" id="1420127">]</span><span class="builtintype" id="1420128">byte</span><span class="op" id="1420132">,</span>&nbsp;<span class="ident" id="1420134">off</span>&nbsp;<span class="ident" id="1420138">int64</span><span class="op" id="1420143">)</span>&nbsp;<span class="op" id="1420145">(</span><span class="ident" id="1420146">n</span>&nbsp;<span class="builtintype" id="1420148">int</span><span class="op" id="1420151">,</span>&nbsp;<span class="ident" id="1420153">err</span>&nbsp;<span class="builtintype" id="1420157">error</span><span class="op" id="1420162">)</span>&nbsp;<span class="op" id="1420164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420167">if</span>&nbsp;<span class="ident" id="1420170">off</span>&nbsp;<span class="op" id="1420174">&lt;</span>&nbsp;<span class="num" id="1420176">0</span>&nbsp;<span class="op" id="1420178">||</span>&nbsp;<span class="ident" id="1420181">off</span>&nbsp;<span class="op" id="1420185">&gt;=</span>&nbsp;<span class="ident" id="1420188">s</span><span class="op" id="1420189">.</span><span class="ident" id="1420190">limit</span><span class="op" id="1420195">-</span><span class="ident" id="1420196">s</span><span class="op" id="1420197">.</span><span class="ident" id="1420198">base</span>&nbsp;<span class="op" id="1420203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420207">return</span>&nbsp;<span class="num" id="1420214">0</span><span class="op" id="1420215">,</span>&nbsp;<span class="ident" id="1420217">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420222">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420225">off</span>&nbsp;<span class="op" id="1420229">+=</span>&nbsp;<span class="ident" id="1420232">s</span><span class="op" id="1420233">.</span><span class="ident" id="1420234">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420240">if</span>&nbsp;<span class="ident" id="1420243">max</span>&nbsp;<span class="op" id="1420247">:=</span>&nbsp;<span class="ident" id="1420250">s</span><span class="op" id="1420251">.</span><span class="ident" id="1420252">limit</span>&nbsp;<span class="op" id="1420258">-</span>&nbsp;<span class="ident" id="1420260">off</span><span class="op" id="1420263">;</span>&nbsp;<span class="ident" id="1420265">int64</span><span class="op" id="1420270">(</span><span class="builtinfunc" id="1420271">len</span><span class="op" id="1420274">(</span><span class="ident" id="1420275">p</span><span class="op" id="1420276">)</span><span class="op" id="1420277">)</span>&nbsp;<span class="op" id="1420279">&gt;</span>&nbsp;<span class="ident" id="1420281">max</span>&nbsp;<span class="op" id="1420285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420289">p</span>&nbsp;<span class="op" id="1420291">=</span>&nbsp;<span class="ident" id="1420293">p</span><span class="op" id="1420294">[</span><span class="num" id="1420295">0</span><span class="op" id="1420296">:</span><span class="ident" id="1420297">max</span><span class="op" id="1420300">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420304">n</span><span class="op" id="1420305">,</span>&nbsp;<span class="ident" id="1420307">err</span>&nbsp;<span class="op" id="1420311">=</span>&nbsp;<span class="ident" id="1420313">s</span><span class="op" id="1420314">.</span><span class="ident" id="1420315">r</span><span class="op" id="1420316">.</span><span class="ident" id="1420317">ReadAt</span><span class="op" id="1420323">(</span><span class="ident" id="1420324">p</span><span class="op" id="1420325">,</span>&nbsp;<span class="ident" id="1420327">off</span><span class="op" id="1420330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420334">if</span>&nbsp;<span class="ident" id="1420337">err</span>&nbsp;<span class="op" id="1420341">==</span>&nbsp;<span class="ident" id="1420344">nil</span>&nbsp;<span class="op" id="1420348">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420353">err</span>&nbsp;<span class="op" id="1420357">=</span>&nbsp;<span class="ident" id="1420359">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420369">return</span>&nbsp;<span class="ident" id="1420376">n</span><span class="op" id="1420377">,</span>&nbsp;<span class="ident" id="1420379">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420387">return</span>&nbsp;<span class="ident" id="1420394">s</span><span class="op" id="1420395">.</span><span class="ident" id="1420396">r</span><span class="op" id="1420397">.</span><span class="ident" id="1420398">ReadAt</span><span class="op" id="1420404">(</span><span class="ident" id="1420405">p</span><span class="op" id="1420406">,</span>&nbsp;<span class="ident" id="1420408">off</span><span class="op" id="1420411">)</span><br>
<span class="lineno">475</span><span class="op" id="1420413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1420416">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;section&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="1420466">func</span>&nbsp;<span class="op" id="1420471">(</span><span class="ident" id="1420472">s</span>&nbsp;<span class="op" id="1420474">*</span><span class="ident" id="1420475">SectionReader</span><span class="op" id="1420488">)</span>&nbsp;<span class="ident" id="1420490">Size</span><span class="op" id="1420494">(</span><span class="op" id="1420495">)</span>&nbsp;<span class="ident" id="1420497">int64</span>&nbsp;<span class="op" id="1420503">{</span>&nbsp;<span class="keyword" id="1420505">return</span>&nbsp;<span class="ident" id="1420512">s</span><span class="op" id="1420513">.</span><span class="ident" id="1420514">limit</span>&nbsp;<span class="op" id="1420520">-</span>&nbsp;<span class="ident" id="1420522">s</span><span class="op" id="1420523">.</span><span class="ident" id="1420524">base</span>&nbsp;<span class="op" id="1420529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="comment" id="1420532">//&nbsp;TeeReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;writes&nbsp;to&nbsp;w&nbsp;what&nbsp;it&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="1420601">//&nbsp;All&nbsp;reads&nbsp;from&nbsp;r&nbsp;performed&nbsp;through&nbsp;it&nbsp;are&nbsp;matched&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1420659">//&nbsp;corresponding&nbsp;writes&nbsp;to&nbsp;w.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;internal&nbsp;buffering&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="1420723">//&nbsp;the&nbsp;write&nbsp;must&nbsp;complete&nbsp;before&nbsp;the&nbsp;read&nbsp;completes.</span><br>
<span class="lineno"></span><span class="comment" id="1420777">//&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;while&nbsp;writing&nbsp;is&nbsp;reported&nbsp;as&nbsp;a&nbsp;read&nbsp;error.</span><br>
<span class="lineno">485</span><span class="keyword" id="1420845">func</span>&nbsp;<span class="ident" id="1420850">TeeReader</span><span class="op" id="1420859">(</span><span class="ident" id="1420860">r</span>&nbsp;<span class="ident" id="1420862">Reader</span><span class="op" id="1420868">,</span>&nbsp;<span class="ident" id="1420870">w</span>&nbsp;<span class="ident" id="1420872">Writer</span><span class="op" id="1420878">)</span>&nbsp;<span class="ident" id="1420880">Reader</span>&nbsp;<span class="op" id="1420887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420890">return</span>&nbsp;<span class="op" id="1420897">&amp;</span><span class="ident" id="1420898">teeReader</span><span class="op" id="1420907">{</span><span class="ident" id="1420908">r</span><span class="op" id="1420909">,</span>&nbsp;<span class="ident" id="1420911">w</span><span class="op" id="1420912">}</span><br>
<span class="lineno"></span><span class="op" id="1420914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1420917">type</span>&nbsp;<span class="ident" id="1420922">teeReader</span>&nbsp;<span class="keyword" id="1420932">struct</span>&nbsp;<span class="op" id="1420939">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420942">r</span>&nbsp;<span class="ident" id="1420944">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420952">w</span>&nbsp;<span class="ident" id="1420954">Writer</span><br>
<span class="lineno"></span><span class="op" id="1420961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1420964">func</span>&nbsp;<span class="op" id="1420969">(</span><span class="ident" id="1420970">t</span>&nbsp;<span class="op" id="1420972">*</span><span class="ident" id="1420973">teeReader</span><span class="op" id="1420982">)</span>&nbsp;<span class="ident" id="1420984">Read</span><span class="op" id="1420988">(</span><span class="ident" id="1420989">p</span>&nbsp;<span class="op" id="1420991">[</span><span class="op" id="1420992">]</span><span class="builtintype" id="1420993">byte</span><span class="op" id="1420997">)</span>&nbsp;<span class="op" id="1420999">(</span><span class="ident" id="1421000">n</span>&nbsp;<span class="builtintype" id="1421002">int</span><span class="op" id="1421005">,</span>&nbsp;<span class="ident" id="1421007">err</span>&nbsp;<span class="builtintype" id="1421011">error</span><span class="op" id="1421016">)</span>&nbsp;<span class="op" id="1421018">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1421021">n</span><span class="op" id="1421022">,</span>&nbsp;<span class="ident" id="1421024">err</span>&nbsp;<span class="op" id="1421028">=</span>&nbsp;<span class="ident" id="1421030">t</span><span class="op" id="1421031">.</span><span class="ident" id="1421032">r</span><span class="op" id="1421033">.</span><span class="ident" id="1421034">Read</span><span class="op" id="1421038">(</span><span class="ident" id="1421039">p</span><span class="op" id="1421040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1421043">if</span>&nbsp;<span class="ident" id="1421046">n</span>&nbsp;<span class="op" id="1421048">&gt;</span>&nbsp;<span class="num" id="1421050">0</span>&nbsp;<span class="op" id="1421052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1421056">if</span>&nbsp;<span class="ident" id="1421059">n</span><span class="op" id="1421060">,</span>&nbsp;<span class="ident" id="1421062">err</span>&nbsp;<span class="op" id="1421066">:=</span>&nbsp;<span class="ident" id="1421069">t</span><span class="op" id="1421070">.</span><span class="ident" id="1421071">w</span><span class="op" id="1421072">.</span><span class="ident" id="1421073">Write</span><span class="op" id="1421078">(</span><span class="ident" id="1421079">p</span><span class="op" id="1421080">[</span><span class="op" id="1421081">:</span><span class="ident" id="1421082">n</span><span class="op" id="1421083">]</span><span class="op" id="1421084">)</span><span class="op" id="1421085">;</span>&nbsp;<span class="ident" id="1421087">err</span>&nbsp;<span class="op" id="1421091">!=</span>&nbsp;<span class="ident" id="1421094">nil</span>&nbsp;<span class="op" id="1421098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1421103">return</span>&nbsp;<span class="ident" id="1421110">n</span><span class="op" id="1421111">,</span>&nbsp;<span class="ident" id="1421113">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1421119">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1421122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1421125">return</span><br>
<span class="lineno"></span><span class="op" id="1421132">}</span>
</div>
</body>
</html>
