<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1792568">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1792623">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1792677">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1792728">package</span>&nbsp;<span class="ident" id="1792736">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1792745">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="1792817">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="1792891">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="1792918">func</span>&nbsp;<span class="ident" id="1792923">FormatUint</span><span class="op" id="1792933">(</span><span class="ident" id="1792934">i</span>&nbsp;<span class="ident" id="1792936">uint64</span><span class="op" id="1792942">,</span>&nbsp;<span class="ident" id="1792944">base</span>&nbsp;<span class="builtintype" id="1792949">int</span><span class="op" id="1792952">)</span>&nbsp;<span class="builtintype" id="1792954">string</span>&nbsp;<span class="op" id="1792961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1792964">_</span><span class="op" id="1792965">,</span>&nbsp;<span class="ident" id="1792967">s</span>&nbsp;<span class="op" id="1792969">:=</span>&nbsp;<span class="ident" id="1792972">formatBits</span><span class="op" id="1792982">(</span><span class="ident" id="1792983">nil</span><span class="op" id="1792986">,</span>&nbsp;<span class="ident" id="1792988">i</span><span class="op" id="1792989">,</span>&nbsp;<span class="ident" id="1792991">base</span><span class="op" id="1792995">,</span>&nbsp;<span class="builtintype" id="1792997">false</span><span class="op" id="1793002">,</span>&nbsp;<span class="builtintype" id="1793004">false</span><span class="op" id="1793009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1793012">return</span>&nbsp;<span class="ident" id="1793019">s</span><br>
<span class="lineno"></span><span class="op" id="1793021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1793024">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="1793095">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="1793169">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="1793196">func</span>&nbsp;<span class="ident" id="1793201">FormatInt</span><span class="op" id="1793210">(</span><span class="ident" id="1793211">i</span>&nbsp;<span class="ident" id="1793213">int64</span><span class="op" id="1793218">,</span>&nbsp;<span class="ident" id="1793220">base</span>&nbsp;<span class="builtintype" id="1793225">int</span><span class="op" id="1793228">)</span>&nbsp;<span class="builtintype" id="1793230">string</span>&nbsp;<span class="op" id="1793237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1793240">_</span><span class="op" id="1793241">,</span>&nbsp;<span class="ident" id="1793243">s</span>&nbsp;<span class="op" id="1793245">:=</span>&nbsp;<span class="ident" id="1793248">formatBits</span><span class="op" id="1793258">(</span><span class="ident" id="1793259">nil</span><span class="op" id="1793262">,</span>&nbsp;<span class="ident" id="1793264">uint64</span><span class="op" id="1793270">(</span><span class="ident" id="1793271">i</span><span class="op" id="1793272">)</span><span class="op" id="1793273">,</span>&nbsp;<span class="ident" id="1793275">base</span><span class="op" id="1793279">,</span>&nbsp;<span class="ident" id="1793281">i</span>&nbsp;<span class="op" id="1793283">&lt;</span>&nbsp;<span class="num" id="1793285">0</span><span class="op" id="1793286">,</span>&nbsp;<span class="builtintype" id="1793288">false</span><span class="op" id="1793293">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1793296">return</span>&nbsp;<span class="ident" id="1793303">s</span><br>
<span class="lineno"></span><span class="op" id="1793305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1793308">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="1793351">func</span>&nbsp;<span class="ident" id="1793356">Itoa</span><span class="op" id="1793360">(</span><span class="ident" id="1793361">i</span>&nbsp;<span class="builtintype" id="1793363">int</span><span class="op" id="1793366">)</span>&nbsp;<span class="builtintype" id="1793368">string</span>&nbsp;<span class="op" id="1793375">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1793378">return</span>&nbsp;<span class="ident" id="1793385">FormatInt</span><span class="op" id="1793394">(</span><span class="ident" id="1793395">int64</span><span class="op" id="1793400">(</span><span class="ident" id="1793401">i</span><span class="op" id="1793402">)</span><span class="op" id="1793403">,</span>&nbsp;<span class="num" id="1793405">10</span><span class="op" id="1793407">)</span><br>
<span class="lineno"></span><span class="op" id="1793409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1793412">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="1793467">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="1793537">func</span>&nbsp;<span class="ident" id="1793542">AppendInt</span><span class="op" id="1793551">(</span><span class="ident" id="1793552">dst</span>&nbsp;<span class="op" id="1793556">[</span><span class="op" id="1793557">]</span><span class="builtintype" id="1793558">byte</span><span class="op" id="1793562">,</span>&nbsp;<span class="ident" id="1793564">i</span>&nbsp;<span class="ident" id="1793566">int64</span><span class="op" id="1793571">,</span>&nbsp;<span class="ident" id="1793573">base</span>&nbsp;<span class="builtintype" id="1793578">int</span><span class="op" id="1793581">)</span>&nbsp;<span class="op" id="1793583">[</span><span class="op" id="1793584">]</span><span class="builtintype" id="1793585">byte</span>&nbsp;<span class="op" id="1793590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1793593">dst</span><span class="op" id="1793596">,</span>&nbsp;<span class="ident" id="1793598">_</span>&nbsp;<span class="op" id="1793600">=</span>&nbsp;<span class="ident" id="1793602">formatBits</span><span class="op" id="1793612">(</span><span class="ident" id="1793613">dst</span><span class="op" id="1793616">,</span>&nbsp;<span class="ident" id="1793618">uint64</span><span class="op" id="1793624">(</span><span class="ident" id="1793625">i</span><span class="op" id="1793626">)</span><span class="op" id="1793627">,</span>&nbsp;<span class="ident" id="1793629">base</span><span class="op" id="1793633">,</span>&nbsp;<span class="ident" id="1793635">i</span>&nbsp;<span class="op" id="1793637">&lt;</span>&nbsp;<span class="num" id="1793639">0</span><span class="op" id="1793640">,</span>&nbsp;<span class="builtintype" id="1793642">true</span><span class="op" id="1793646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1793649">return</span>&nbsp;<span class="ident" id="1793656">dst</span><br>
<span class="lineno"></span><span class="op" id="1793660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="1793663">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="1793728">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1793799">func</span>&nbsp;<span class="ident" id="1793804">AppendUint</span><span class="op" id="1793814">(</span><span class="ident" id="1793815">dst</span>&nbsp;<span class="op" id="1793819">[</span><span class="op" id="1793820">]</span><span class="builtintype" id="1793821">byte</span><span class="op" id="1793825">,</span>&nbsp;<span class="ident" id="1793827">i</span>&nbsp;<span class="ident" id="1793829">uint64</span><span class="op" id="1793835">,</span>&nbsp;<span class="ident" id="1793837">base</span>&nbsp;<span class="builtintype" id="1793842">int</span><span class="op" id="1793845">)</span>&nbsp;<span class="op" id="1793847">[</span><span class="op" id="1793848">]</span><span class="builtintype" id="1793849">byte</span>&nbsp;<span class="op" id="1793854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1793857">dst</span><span class="op" id="1793860">,</span>&nbsp;<span class="ident" id="1793862">_</span>&nbsp;<span class="op" id="1793864">=</span>&nbsp;<span class="ident" id="1793866">formatBits</span><span class="op" id="1793876">(</span><span class="ident" id="1793877">dst</span><span class="op" id="1793880">,</span>&nbsp;<span class="ident" id="1793882">i</span><span class="op" id="1793883">,</span>&nbsp;<span class="ident" id="1793885">base</span><span class="op" id="1793889">,</span>&nbsp;<span class="builtintype" id="1793891">false</span><span class="op" id="1793896">,</span>&nbsp;<span class="builtintype" id="1793898">true</span><span class="op" id="1793902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1793905">return</span>&nbsp;<span class="ident" id="1793912">dst</span><br>
<span class="lineno">40</span><span class="op" id="1793916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1793919">const</span>&nbsp;<span class="op" id="1793925">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1793928">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1793937">=</span>&nbsp;<span class="string" id="1793939">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1793979">digits01</span>&nbsp;<span class="op" id="1793988">=</span>&nbsp;<span class="string" id="1793990">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1794094">digits10</span>&nbsp;<span class="op" id="1794103">=</span>&nbsp;<span class="string" id="1794105">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="1794208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1794211">var</span>&nbsp;<span class="ident" id="1794215">shifts</span>&nbsp;<span class="op" id="1794222">=</span>&nbsp;<span class="op" id="1794224">[</span><span class="builtinfunc" id="1794225">len</span><span class="op" id="1794228">(</span><span class="ident" id="1794229">digits</span><span class="op" id="1794235">)</span>&nbsp;<span class="op" id="1794237">+</span>&nbsp;<span class="num" id="1794239">1</span><span class="op" id="1794240">]</span><span class="builtintype" id="1794241">uint</span><span class="op" id="1794245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1794248">1</span>&nbsp;<span class="op" id="1794250">&lt;&lt;</span>&nbsp;<span class="num" id="1794253">1</span><span class="op" id="1794254">:</span>&nbsp;<span class="num" id="1794256">1</span><span class="op" id="1794257">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1794260">1</span>&nbsp;<span class="op" id="1794262">&lt;&lt;</span>&nbsp;<span class="num" id="1794265">2</span><span class="op" id="1794266">:</span>&nbsp;<span class="num" id="1794268">2</span><span class="op" id="1794269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1794272">1</span>&nbsp;<span class="op" id="1794274">&lt;&lt;</span>&nbsp;<span class="num" id="1794277">3</span><span class="op" id="1794278">:</span>&nbsp;<span class="num" id="1794280">3</span><span class="op" id="1794281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1794284">1</span>&nbsp;<span class="op" id="1794286">&lt;&lt;</span>&nbsp;<span class="num" id="1794289">4</span><span class="op" id="1794290">:</span>&nbsp;<span class="num" id="1794292">4</span><span class="op" id="1794293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1794296">1</span>&nbsp;<span class="op" id="1794298">&lt;&lt;</span>&nbsp;<span class="num" id="1794301">5</span><span class="op" id="1794302">:</span>&nbsp;<span class="num" id="1794304">5</span><span class="op" id="1794305">,</span><br>
<span class="lineno"></span><span class="op" id="1794307">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="1794310">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="1794383">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1794453">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1794523">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="1794595">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="1794626">//</span><br>
<span class="lineno"></span><span class="keyword" id="1794629">func</span>&nbsp;<span class="ident" id="1794634">formatBits</span><span class="op" id="1794644">(</span><span class="ident" id="1794645">dst</span>&nbsp;<span class="op" id="1794649">[</span><span class="op" id="1794650">]</span><span class="builtintype" id="1794651">byte</span><span class="op" id="1794655">,</span>&nbsp;<span class="ident" id="1794657">u</span>&nbsp;<span class="ident" id="1794659">uint64</span><span class="op" id="1794665">,</span>&nbsp;<span class="ident" id="1794667">base</span>&nbsp;<span class="builtintype" id="1794672">int</span><span class="op" id="1794675">,</span>&nbsp;<span class="ident" id="1794677">neg</span><span class="op" id="1794680">,</span>&nbsp;<span class="ident" id="1794682">append_</span>&nbsp;<span class="builtintype" id="1794690">bool</span><span class="op" id="1794694">)</span>&nbsp;<span class="op" id="1794696">(</span><span class="ident" id="1794697">d</span>&nbsp;<span class="op" id="1794699">[</span><span class="op" id="1794700">]</span><span class="builtintype" id="1794701">byte</span><span class="op" id="1794705">,</span>&nbsp;<span class="ident" id="1794707">s</span>&nbsp;<span class="builtintype" id="1794709">string</span><span class="op" id="1794715">)</span>&nbsp;<span class="op" id="1794717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1794720">if</span>&nbsp;<span class="ident" id="1794723">base</span>&nbsp;<span class="op" id="1794728">&lt;</span>&nbsp;<span class="num" id="1794730">2</span>&nbsp;<span class="op" id="1794732">||</span>&nbsp;<span class="ident" id="1794735">base</span>&nbsp;<span class="op" id="1794740">&gt;</span>&nbsp;<span class="builtinfunc" id="1794742">len</span><span class="op" id="1794745">(</span><span class="ident" id="1794746">digits</span><span class="op" id="1794752">)</span>&nbsp;<span class="op" id="1794754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1794758">panic</span><span class="op" id="1794763">(</span><span class="string" id="1794764">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="1794807">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1794810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1794813">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1794851">var</span>&nbsp;<span class="ident" id="1794855">a</span>&nbsp;<span class="op" id="1794857">[</span><span class="num" id="1794858">64</span>&nbsp;<span class="op" id="1794861">+</span>&nbsp;<span class="num" id="1794863">1</span><span class="op" id="1794864">]</span><span class="builtintype" id="1794865">byte</span>&nbsp;<span class="comment" id="1794870">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1794911">i</span>&nbsp;<span class="op" id="1794913">:=</span>&nbsp;<span class="builtinfunc" id="1794916">len</span><span class="op" id="1794919">(</span><span class="ident" id="1794920">a</span><span class="op" id="1794921">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1794925">if</span>&nbsp;<span class="ident" id="1794928">neg</span>&nbsp;<span class="op" id="1794932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1794936">u</span>&nbsp;<span class="op" id="1794938">=</span>&nbsp;<span class="op" id="1794940">-</span><span class="ident" id="1794941">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1794944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1794948">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1794965">if</span>&nbsp;<span class="ident" id="1794968">base</span>&nbsp;<span class="op" id="1794973">==</span>&nbsp;<span class="num" id="1794976">10</span>&nbsp;<span class="op" id="1794979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1794983">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795035">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795092">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795113">for</span>&nbsp;<span class="ident" id="1795117">u</span>&nbsp;<span class="op" id="1795119">&gt;=</span>&nbsp;<span class="num" id="1795122">100</span>&nbsp;<span class="op" id="1795126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795131">i</span>&nbsp;<span class="op" id="1795133">-=</span>&nbsp;<span class="num" id="1795136">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795141">q</span>&nbsp;<span class="op" id="1795143">:=</span>&nbsp;<span class="ident" id="1795146">u</span>&nbsp;<span class="op" id="1795148">/</span>&nbsp;<span class="num" id="1795150">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795157">j</span>&nbsp;<span class="op" id="1795159">:=</span>&nbsp;<span class="builtintype" id="1795162">uintptr</span><span class="op" id="1795169">(</span><span class="ident" id="1795170">u</span>&nbsp;<span class="op" id="1795172">-</span>&nbsp;<span class="ident" id="1795174">q</span><span class="op" id="1795175">*</span><span class="num" id="1795176">100</span><span class="op" id="1795179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795184">a</span><span class="op" id="1795185">[</span><span class="ident" id="1795186">i</span><span class="op" id="1795187">+</span><span class="num" id="1795188">1</span><span class="op" id="1795189">]</span>&nbsp;<span class="op" id="1795191">=</span>&nbsp;<span class="ident" id="1795193">digits01</span><span class="op" id="1795201">[</span><span class="ident" id="1795202">j</span><span class="op" id="1795203">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795208">a</span><span class="op" id="1795209">[</span><span class="ident" id="1795210">i</span><span class="op" id="1795211">+</span><span class="num" id="1795212">0</span><span class="op" id="1795213">]</span>&nbsp;<span class="op" id="1795215">=</span>&nbsp;<span class="ident" id="1795217">digits10</span><span class="op" id="1795225">[</span><span class="ident" id="1795226">j</span><span class="op" id="1795227">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795232">u</span>&nbsp;<span class="op" id="1795234">=</span>&nbsp;<span class="ident" id="1795236">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795244">if</span>&nbsp;<span class="ident" id="1795247">u</span>&nbsp;<span class="op" id="1795249">&gt;=</span>&nbsp;<span class="num" id="1795252">10</span>&nbsp;<span class="op" id="1795255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795260">i</span><span class="op" id="1795261">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795267">q</span>&nbsp;<span class="op" id="1795269">:=</span>&nbsp;<span class="ident" id="1795272">u</span>&nbsp;<span class="op" id="1795274">/</span>&nbsp;<span class="num" id="1795276">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795282">a</span><span class="op" id="1795283">[</span><span class="ident" id="1795284">i</span><span class="op" id="1795285">]</span>&nbsp;<span class="op" id="1795287">=</span>&nbsp;<span class="ident" id="1795289">digits</span><span class="op" id="1795295">[</span><span class="builtintype" id="1795296">uintptr</span><span class="op" id="1795303">(</span><span class="ident" id="1795304">u</span><span class="op" id="1795305">-</span><span class="ident" id="1795306">q</span><span class="op" id="1795307">*</span><span class="num" id="1795308">10</span><span class="op" id="1795310">)</span><span class="op" id="1795311">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795316">u</span>&nbsp;<span class="op" id="1795318">=</span>&nbsp;<span class="ident" id="1795320">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795328">}</span>&nbsp;<span class="keyword" id="1795330">else</span>&nbsp;<span class="keyword" id="1795335">if</span>&nbsp;<span class="ident" id="1795338">s</span>&nbsp;<span class="op" id="1795340">:=</span>&nbsp;<span class="ident" id="1795343">shifts</span><span class="op" id="1795349">[</span><span class="ident" id="1795350">base</span><span class="op" id="1795354">]</span><span class="op" id="1795355">;</span>&nbsp;<span class="ident" id="1795357">s</span>&nbsp;<span class="op" id="1795359">&gt;</span>&nbsp;<span class="num" id="1795361">0</span>&nbsp;<span class="op" id="1795363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795367">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795432">b</span>&nbsp;<span class="op" id="1795434">:=</span>&nbsp;<span class="ident" id="1795437">uint64</span><span class="op" id="1795443">(</span><span class="ident" id="1795444">base</span><span class="op" id="1795448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795452">m</span>&nbsp;<span class="op" id="1795454">:=</span>&nbsp;<span class="builtintype" id="1795457">uintptr</span><span class="op" id="1795464">(</span><span class="ident" id="1795465">b</span><span class="op" id="1795466">)</span>&nbsp;<span class="op" id="1795468">-</span>&nbsp;<span class="num" id="1795470">1</span>&nbsp;<span class="comment" id="1795472">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795489">for</span>&nbsp;<span class="ident" id="1795493">u</span>&nbsp;<span class="op" id="1795495">&gt;=</span>&nbsp;<span class="ident" id="1795498">b</span>&nbsp;<span class="op" id="1795500">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795505">i</span><span class="op" id="1795506">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795512">a</span><span class="op" id="1795513">[</span><span class="ident" id="1795514">i</span><span class="op" id="1795515">]</span>&nbsp;<span class="op" id="1795517">=</span>&nbsp;<span class="ident" id="1795519">digits</span><span class="op" id="1795525">[</span><span class="builtintype" id="1795526">uintptr</span><span class="op" id="1795533">(</span><span class="ident" id="1795534">u</span><span class="op" id="1795535">)</span><span class="op" id="1795536">&amp;</span><span class="ident" id="1795537">m</span><span class="op" id="1795538">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795543">u</span>&nbsp;<span class="op" id="1795545">&gt;&gt;=</span>&nbsp;<span class="ident" id="1795549">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795557">}</span>&nbsp;<span class="keyword" id="1795559">else</span>&nbsp;<span class="op" id="1795564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795568">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795586">b</span>&nbsp;<span class="op" id="1795588">:=</span>&nbsp;<span class="ident" id="1795591">uint64</span><span class="op" id="1795597">(</span><span class="ident" id="1795598">base</span><span class="op" id="1795602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795606">for</span>&nbsp;<span class="ident" id="1795610">u</span>&nbsp;<span class="op" id="1795612">&gt;=</span>&nbsp;<span class="ident" id="1795615">b</span>&nbsp;<span class="op" id="1795617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795622">i</span><span class="op" id="1795623">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795629">a</span><span class="op" id="1795630">[</span><span class="ident" id="1795631">i</span><span class="op" id="1795632">]</span>&nbsp;<span class="op" id="1795634">=</span>&nbsp;<span class="ident" id="1795636">digits</span><span class="op" id="1795642">[</span><span class="builtintype" id="1795643">uintptr</span><span class="op" id="1795650">(</span><span class="ident" id="1795651">u</span><span class="op" id="1795652">%</span><span class="ident" id="1795653">b</span><span class="op" id="1795654">)</span><span class="op" id="1795655">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795660">u</span>&nbsp;<span class="op" id="1795662">/=</span>&nbsp;<span class="ident" id="1795665">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795676">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795689">i</span><span class="op" id="1795690">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795694">a</span><span class="op" id="1795695">[</span><span class="ident" id="1795696">i</span><span class="op" id="1795697">]</span>&nbsp;<span class="op" id="1795699">=</span>&nbsp;<span class="ident" id="1795701">digits</span><span class="op" id="1795707">[</span><span class="builtintype" id="1795708">uintptr</span><span class="op" id="1795715">(</span><span class="ident" id="1795716">u</span><span class="op" id="1795717">)</span><span class="op" id="1795718">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1795722">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795743">if</span>&nbsp;<span class="ident" id="1795746">neg</span>&nbsp;<span class="op" id="1795750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795754">i</span><span class="op" id="1795755">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795760">a</span><span class="op" id="1795761">[</span><span class="ident" id="1795762">i</span><span class="op" id="1795763">]</span>&nbsp;<span class="op" id="1795765">=</span>&nbsp;<span class="string" id="1795767">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795776">if</span>&nbsp;<span class="ident" id="1795779">append_</span>&nbsp;<span class="op" id="1795787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795791">d</span>&nbsp;<span class="op" id="1795793">=</span>&nbsp;<span class="builtinfunc" id="1795795">append</span><span class="op" id="1795801">(</span><span class="ident" id="1795802">dst</span><span class="op" id="1795805">,</span>&nbsp;<span class="ident" id="1795807">a</span><span class="op" id="1795808">[</span><span class="ident" id="1795809">i</span><span class="op" id="1795810">:</span><span class="op" id="1795811">]</span><span class="op" id="1795812">...</span><span class="op" id="1795815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795819">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1795827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1795830">s</span>&nbsp;<span class="op" id="1795832">=</span>&nbsp;<span class="builtintype" id="1795834">string</span><span class="op" id="1795840">(</span><span class="ident" id="1795841">a</span><span class="op" id="1795842">[</span><span class="ident" id="1795843">i</span><span class="op" id="1795844">:</span><span class="op" id="1795845">]</span><span class="op" id="1795846">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1795849">return</span><br>
<span class="lineno"></span><span class="op" id="1795856">}</span>
</div>
</body>
</html>
