<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2071296">//&nbsp;Copyright&nbsp;2009-2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2071356">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2071410">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2071461">package</span>&nbsp;<span class="ident" id="2071469">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2071475">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspFloating-point&nbsp;mod&nbsp;function.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2071512">//&nbsp;Mod&nbsp;returns&nbsp;the&nbsp;floating-point&nbsp;remainder&nbsp;of&nbsp;x/y.</span><br>
<span class="lineno"></span><span class="comment" id="2071564">//&nbsp;The&nbsp;magnitude&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;less&nbsp;than&nbsp;y&nbsp;and&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="2071618">//&nbsp;sign&nbsp;agrees&nbsp;with&nbsp;that&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2071649">//</span><br>
<span class="lineno">15</span><span class="comment" id="2071652">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2071674">//&nbsp;&nbsp;&nbsp;&nbspMod(±Inf,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2071697">//&nbsp;&nbsp;&nbsp;&nbspMod(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2071718">//&nbsp;&nbsp;&nbsp;&nbspMod(x,&nbsp;0)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2071737">//&nbsp;&nbsp;&nbsp;&nbspMod(x,&nbsp;±Inf)&nbsp;=&nbsp;x</span><br>
<span class="lineno">20</span><span class="comment" id="2071758">//&nbsp;&nbsp;&nbsp;&nbspMod(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="2071779">func</span>&nbsp;<span class="ident" id="2071784">Mod</span><span class="op" id="2071787">(</span><span class="ident" id="2071788">x</span><span class="op" id="2071789">,</span>&nbsp;<span class="ident" id="2071791">y</span>&nbsp;<span class="builtintype" id="2071793">float64</span><span class="op" id="2071800">)</span>&nbsp;<span class="builtintype" id="2071802">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2071811">func</span>&nbsp;<span class="ident" id="2071816">mod</span><span class="op" id="2071819">(</span><span class="ident" id="2071820">x</span><span class="op" id="2071821">,</span>&nbsp;<span class="ident" id="2071823">y</span>&nbsp;<span class="builtintype" id="2071825">float64</span><span class="op" id="2071832">)</span>&nbsp;<span class="builtintype" id="2071834">float64</span>&nbsp;<span class="op" id="2071842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071845">if</span>&nbsp;<span class="ident" id="2071848">y</span>&nbsp;<span class="op" id="2071850">==</span>&nbsp;<span class="num" id="2071853">0</span>&nbsp;<span class="op" id="2071855">||</span>&nbsp;<span class="ident" id="2071858">IsInf</span><span class="op" id="2071863">(</span><span class="ident" id="2071864">x</span><span class="op" id="2071865">,</span>&nbsp;<span class="num" id="2071867">0</span><span class="op" id="2071868">)</span>&nbsp;<span class="op" id="2071870">||</span>&nbsp;<span class="ident" id="2071873">IsNaN</span><span class="op" id="2071878">(</span><span class="ident" id="2071879">x</span><span class="op" id="2071880">)</span>&nbsp;<span class="op" id="2071882">||</span>&nbsp;<span class="ident" id="2071885">IsNaN</span><span class="op" id="2071890">(</span><span class="ident" id="2071891">y</span><span class="op" id="2071892">)</span>&nbsp;<span class="op" id="2071894">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071898">return</span>&nbsp;<span class="ident" id="2071905">NaN</span><span class="op" id="2071908">(</span><span class="op" id="2071909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2071912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071915">if</span>&nbsp;<span class="ident" id="2071918">y</span>&nbsp;<span class="op" id="2071920">&lt;</span>&nbsp;<span class="num" id="2071922">0</span>&nbsp;<span class="op" id="2071924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071928">y</span>&nbsp;<span class="op" id="2071930">=</span>&nbsp;<span class="op" id="2071932">-</span><span class="ident" id="2071933">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2071936">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071940">yfr</span><span class="op" id="2071943">,</span>&nbsp;<span class="ident" id="2071945">yexp</span>&nbsp;<span class="op" id="2071950">:=</span>&nbsp;<span class="ident" id="2071953">Frexp</span><span class="op" id="2071958">(</span><span class="ident" id="2071959">y</span><span class="op" id="2071960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071963">sign</span>&nbsp;<span class="op" id="2071968">:=</span>&nbsp;<span class="ident" id="2071971">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071978">r</span>&nbsp;<span class="op" id="2071980">:=</span>&nbsp;<span class="ident" id="2071983">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071986">if</span>&nbsp;<span class="ident" id="2071989">x</span>&nbsp;<span class="op" id="2071991">&lt;</span>&nbsp;<span class="num" id="2071993">0</span>&nbsp;<span class="op" id="2071995">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071999">r</span>&nbsp;<span class="op" id="2072001">=</span>&nbsp;<span class="op" id="2072003">-</span><span class="ident" id="2072004">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072008">sign</span>&nbsp;<span class="op" id="2072013">=</span>&nbsp;<span class="ident" id="2072015">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072025">for</span>&nbsp;<span class="ident" id="2072029">r</span>&nbsp;<span class="op" id="2072031">&gt;=</span>&nbsp;<span class="ident" id="2072034">y</span>&nbsp;<span class="op" id="2072036">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072040">rfr</span><span class="op" id="2072043">,</span>&nbsp;<span class="ident" id="2072045">rexp</span>&nbsp;<span class="op" id="2072050">:=</span>&nbsp;<span class="ident" id="2072053">Frexp</span><span class="op" id="2072058">(</span><span class="ident" id="2072059">r</span><span class="op" id="2072060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072064">if</span>&nbsp;<span class="ident" id="2072067">rfr</span>&nbsp;<span class="op" id="2072071">&lt;</span>&nbsp;<span class="ident" id="2072073">yfr</span>&nbsp;<span class="op" id="2072077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072082">rexp</span>&nbsp;<span class="op" id="2072087">=</span>&nbsp;<span class="ident" id="2072089">rexp</span>&nbsp;<span class="op" id="2072094">-</span>&nbsp;<span class="num" id="2072096">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072104">r</span>&nbsp;<span class="op" id="2072106">=</span>&nbsp;<span class="ident" id="2072108">r</span>&nbsp;<span class="op" id="2072110">-</span>&nbsp;<span class="ident" id="2072112">Ldexp</span><span class="op" id="2072117">(</span><span class="ident" id="2072118">y</span><span class="op" id="2072119">,</span>&nbsp;<span class="ident" id="2072121">rexp</span><span class="op" id="2072125">-</span><span class="ident" id="2072126">yexp</span><span class="op" id="2072130">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072136">if</span>&nbsp;<span class="ident" id="2072139">sign</span>&nbsp;<span class="op" id="2072144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2072148">r</span>&nbsp;<span class="op" id="2072150">=</span>&nbsp;<span class="op" id="2072152">-</span><span class="ident" id="2072153">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2072156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2072159">return</span>&nbsp;<span class="ident" id="2072166">r</span><br>
<span class="lineno">50</span><span class="op" id="2072168">}</span>
</div>
</body>
</html>
