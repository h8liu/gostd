<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7439094">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7439150">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7439204">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7439255">package</span>&nbsp;<span class="ident" id="7439263">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7439268">import</span>&nbsp;<span class="op" id="7439275">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7439278">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7439285">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7439296">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7439306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7439309">func</span>&nbsp;<span class="op" id="7439314">(</span><span class="ident" id="7439315">ti</span>&nbsp;<span class="op" id="7439318">*</span><span class="ident" id="7439319">testInterface</span><span class="op" id="7439332">)</span>&nbsp;<span class="ident" id="7439334">setBroadcast</span><span class="op" id="7439346">(</span><span class="ident" id="7439347">suffix</span>&nbsp;<span class="builtintype" id="7439354">int</span><span class="op" id="7439357">)</span>&nbsp;<span class="builtintype" id="7439359">error</span>&nbsp;<span class="op" id="7439365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439368">ti</span><span class="op" id="7439370">.</span><span class="ident" id="7439371">name</span>&nbsp;<span class="op" id="7439376">=</span>&nbsp;<span class="ident" id="7439378">fmt</span><span class="op" id="7439381">.</span><span class="ident" id="7439382">Sprintf</span><span class="op" id="7439389">(</span><span class="string" id="7439390">&#34;gotest%d&#34;</span><span class="op" id="7439400">,</span>&nbsp;<span class="ident" id="7439402">suffix</span><span class="op" id="7439408">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439411">xname</span><span class="op" id="7439416">,</span>&nbsp;<span class="ident" id="7439418">err</span>&nbsp;<span class="op" id="7439422">:=</span>&nbsp;<span class="ident" id="7439425">exec</span><span class="op" id="7439429">.</span><span class="ident" id="7439430">LookPath</span><span class="op" id="7439438">(</span><span class="string" id="7439439">&#34;ip&#34;</span><span class="op" id="7439443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7439446">if</span>&nbsp;<span class="ident" id="7439449">err</span>&nbsp;<span class="op" id="7439453">!=</span>&nbsp;<span class="ident" id="7439456">nil</span>&nbsp;<span class="op" id="7439460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7439464">return</span>&nbsp;<span class="ident" id="7439471">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439479">ti</span><span class="op" id="7439481">.</span><span class="ident" id="7439482">setupCmds</span>&nbsp;<span class="op" id="7439492">=</span>&nbsp;<span class="builtinfunc" id="7439494">append</span><span class="op" id="7439500">(</span><span class="ident" id="7439501">ti</span><span class="op" id="7439503">.</span><span class="ident" id="7439504">setupCmds</span><span class="op" id="7439513">,</span>&nbsp;<span class="op" id="7439515">&amp;</span><span class="ident" id="7439516">exec</span><span class="op" id="7439520">.</span><span class="ident" id="7439521">Cmd</span><span class="op" id="7439524">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439528">Path</span><span class="op" id="7439532">:</span>&nbsp;<span class="ident" id="7439534">xname</span><span class="op" id="7439539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439543">Args</span><span class="op" id="7439547">:</span>&nbsp;<span class="op" id="7439549">[</span><span class="op" id="7439550">]</span><span class="builtintype" id="7439551">string</span><span class="op" id="7439557">{</span><span class="string" id="7439558">&#34;ip&#34;</span><span class="op" id="7439562">,</span>&nbsp;<span class="string" id="7439564">&#34;link&#34;</span><span class="op" id="7439570">,</span>&nbsp;<span class="string" id="7439572">&#34;add&#34;</span><span class="op" id="7439577">,</span>&nbsp;<span class="ident" id="7439579">ti</span><span class="op" id="7439581">.</span><span class="ident" id="7439582">name</span><span class="op" id="7439586">,</span>&nbsp;<span class="string" id="7439588">&#34;type&#34;</span><span class="op" id="7439594">,</span>&nbsp;<span class="string" id="7439596">&#34;dummy&#34;</span><span class="op" id="7439603">}</span><span class="op" id="7439604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439607">}</span><span class="op" id="7439608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439611">ti</span><span class="op" id="7439613">.</span><span class="ident" id="7439614">teardownCmds</span>&nbsp;<span class="op" id="7439627">=</span>&nbsp;<span class="builtinfunc" id="7439629">append</span><span class="op" id="7439635">(</span><span class="ident" id="7439636">ti</span><span class="op" id="7439638">.</span><span class="ident" id="7439639">teardownCmds</span><span class="op" id="7439651">,</span>&nbsp;<span class="op" id="7439653">&amp;</span><span class="ident" id="7439654">exec</span><span class="op" id="7439658">.</span><span class="ident" id="7439659">Cmd</span><span class="op" id="7439662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439666">Path</span><span class="op" id="7439670">:</span>&nbsp;<span class="ident" id="7439672">xname</span><span class="op" id="7439677">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439681">Args</span><span class="op" id="7439685">:</span>&nbsp;<span class="op" id="7439687">[</span><span class="op" id="7439688">]</span><span class="builtintype" id="7439689">string</span><span class="op" id="7439695">{</span><span class="string" id="7439696">&#34;ip&#34;</span><span class="op" id="7439700">,</span>&nbsp;<span class="string" id="7439702">&#34;link&#34;</span><span class="op" id="7439708">,</span>&nbsp;<span class="string" id="7439710">&#34;delete&#34;</span><span class="op" id="7439718">,</span>&nbsp;<span class="ident" id="7439720">ti</span><span class="op" id="7439722">.</span><span class="ident" id="7439723">name</span><span class="op" id="7439727">,</span>&nbsp;<span class="string" id="7439729">&#34;type&#34;</span><span class="op" id="7439735">,</span>&nbsp;<span class="string" id="7439737">&#34;dummy&#34;</span><span class="op" id="7439744">}</span><span class="op" id="7439745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439748">}</span><span class="op" id="7439749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7439752">return</span>&nbsp;<span class="ident" id="7439759">nil</span><br>
<span class="lineno"></span><span class="op" id="7439763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7439766">func</span>&nbsp;<span class="op" id="7439771">(</span><span class="ident" id="7439772">ti</span>&nbsp;<span class="op" id="7439775">*</span><span class="ident" id="7439776">testInterface</span><span class="op" id="7439789">)</span>&nbsp;<span class="ident" id="7439791">setPointToPoint</span><span class="op" id="7439806">(</span><span class="ident" id="7439807">suffix</span>&nbsp;<span class="builtintype" id="7439814">int</span><span class="op" id="7439817">,</span>&nbsp;<span class="ident" id="7439819">local</span><span class="op" id="7439824">,</span>&nbsp;<span class="ident" id="7439826">remote</span>&nbsp;<span class="builtintype" id="7439833">string</span><span class="op" id="7439839">)</span>&nbsp;<span class="builtintype" id="7439841">error</span>&nbsp;<span class="op" id="7439847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439850">ti</span><span class="op" id="7439852">.</span><span class="ident" id="7439853">name</span>&nbsp;<span class="op" id="7439858">=</span>&nbsp;<span class="ident" id="7439860">fmt</span><span class="op" id="7439863">.</span><span class="ident" id="7439864">Sprintf</span><span class="op" id="7439871">(</span><span class="string" id="7439872">&#34;gotest%d&#34;</span><span class="op" id="7439882">,</span>&nbsp;<span class="ident" id="7439884">suffix</span><span class="op" id="7439890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439893">ti</span><span class="op" id="7439895">.</span><span class="ident" id="7439896">local</span>&nbsp;<span class="op" id="7439902">=</span>&nbsp;<span class="ident" id="7439904">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439911">ti</span><span class="op" id="7439913">.</span><span class="ident" id="7439914">remote</span>&nbsp;<span class="op" id="7439921">=</span>&nbsp;<span class="ident" id="7439923">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439931">xname</span><span class="op" id="7439936">,</span>&nbsp;<span class="ident" id="7439938">err</span>&nbsp;<span class="op" id="7439942">:=</span>&nbsp;<span class="ident" id="7439945">exec</span><span class="op" id="7439949">.</span><span class="ident" id="7439950">LookPath</span><span class="op" id="7439958">(</span><span class="string" id="7439959">&#34;ip&#34;</span><span class="op" id="7439963">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7439966">if</span>&nbsp;<span class="ident" id="7439969">err</span>&nbsp;<span class="op" id="7439973">!=</span>&nbsp;<span class="ident" id="7439976">nil</span>&nbsp;<span class="op" id="7439980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7439984">return</span>&nbsp;<span class="ident" id="7439991">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7439996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7439999">ti</span><span class="op" id="7440001">.</span><span class="ident" id="7440002">setupCmds</span>&nbsp;<span class="op" id="7440012">=</span>&nbsp;<span class="builtinfunc" id="7440014">append</span><span class="op" id="7440020">(</span><span class="ident" id="7440021">ti</span><span class="op" id="7440023">.</span><span class="ident" id="7440024">setupCmds</span><span class="op" id="7440033">,</span>&nbsp;<span class="op" id="7440035">&amp;</span><span class="ident" id="7440036">exec</span><span class="op" id="7440040">.</span><span class="ident" id="7440041">Cmd</span><span class="op" id="7440044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440048">Path</span><span class="op" id="7440052">:</span>&nbsp;<span class="ident" id="7440054">xname</span><span class="op" id="7440059">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440063">Args</span><span class="op" id="7440067">:</span>&nbsp;<span class="op" id="7440069">[</span><span class="op" id="7440070">]</span><span class="builtintype" id="7440071">string</span><span class="op" id="7440077">{</span><span class="string" id="7440078">&#34;ip&#34;</span><span class="op" id="7440082">,</span>&nbsp;<span class="string" id="7440084">&#34;tunnel&#34;</span><span class="op" id="7440092">,</span>&nbsp;<span class="string" id="7440094">&#34;add&#34;</span><span class="op" id="7440099">,</span>&nbsp;<span class="ident" id="7440101">ti</span><span class="op" id="7440103">.</span><span class="ident" id="7440104">name</span><span class="op" id="7440108">,</span>&nbsp;<span class="string" id="7440110">&#34;mode&#34;</span><span class="op" id="7440116">,</span>&nbsp;<span class="string" id="7440118">&#34;gre&#34;</span><span class="op" id="7440123">,</span>&nbsp;<span class="string" id="7440125">&#34;local&#34;</span><span class="op" id="7440132">,</span>&nbsp;<span class="ident" id="7440134">local</span><span class="op" id="7440139">,</span>&nbsp;<span class="string" id="7440141">&#34;remote&#34;</span><span class="op" id="7440149">,</span>&nbsp;<span class="ident" id="7440151">remote</span><span class="op" id="7440157">}</span><span class="op" id="7440158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440161">}</span><span class="op" id="7440162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440165">ti</span><span class="op" id="7440167">.</span><span class="ident" id="7440168">teardownCmds</span>&nbsp;<span class="op" id="7440181">=</span>&nbsp;<span class="builtinfunc" id="7440183">append</span><span class="op" id="7440189">(</span><span class="ident" id="7440190">ti</span><span class="op" id="7440192">.</span><span class="ident" id="7440193">teardownCmds</span><span class="op" id="7440205">,</span>&nbsp;<span class="op" id="7440207">&amp;</span><span class="ident" id="7440208">exec</span><span class="op" id="7440212">.</span><span class="ident" id="7440213">Cmd</span><span class="op" id="7440216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440220">Path</span><span class="op" id="7440224">:</span>&nbsp;<span class="ident" id="7440226">xname</span><span class="op" id="7440231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440235">Args</span><span class="op" id="7440239">:</span>&nbsp;<span class="op" id="7440241">[</span><span class="op" id="7440242">]</span><span class="builtintype" id="7440243">string</span><span class="op" id="7440249">{</span><span class="string" id="7440250">&#34;ip&#34;</span><span class="op" id="7440254">,</span>&nbsp;<span class="string" id="7440256">&#34;tunnel&#34;</span><span class="op" id="7440264">,</span>&nbsp;<span class="string" id="7440266">&#34;del&#34;</span><span class="op" id="7440271">,</span>&nbsp;<span class="ident" id="7440273">ti</span><span class="op" id="7440275">.</span><span class="ident" id="7440276">name</span><span class="op" id="7440280">,</span>&nbsp;<span class="string" id="7440282">&#34;mode&#34;</span><span class="op" id="7440288">,</span>&nbsp;<span class="string" id="7440290">&#34;gre&#34;</span><span class="op" id="7440295">,</span>&nbsp;<span class="string" id="7440297">&#34;local&#34;</span><span class="op" id="7440304">,</span>&nbsp;<span class="ident" id="7440306">local</span><span class="op" id="7440311">,</span>&nbsp;<span class="string" id="7440313">&#34;remote&#34;</span><span class="op" id="7440321">,</span>&nbsp;<span class="ident" id="7440323">remote</span><span class="op" id="7440329">}</span><span class="op" id="7440330">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440333">}</span><span class="op" id="7440334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440337">xname</span><span class="op" id="7440342">,</span>&nbsp;<span class="ident" id="7440344">err</span>&nbsp;<span class="op" id="7440348">=</span>&nbsp;<span class="ident" id="7440350">exec</span><span class="op" id="7440354">.</span><span class="ident" id="7440355">LookPath</span><span class="op" id="7440363">(</span><span class="string" id="7440364">&#34;ifconfig&#34;</span><span class="op" id="7440374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440377">if</span>&nbsp;<span class="ident" id="7440380">err</span>&nbsp;<span class="op" id="7440384">!=</span>&nbsp;<span class="ident" id="7440387">nil</span>&nbsp;<span class="op" id="7440391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440395">return</span>&nbsp;<span class="ident" id="7440402">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440407">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440410">ti</span><span class="op" id="7440412">.</span><span class="ident" id="7440413">setupCmds</span>&nbsp;<span class="op" id="7440423">=</span>&nbsp;<span class="builtinfunc" id="7440425">append</span><span class="op" id="7440431">(</span><span class="ident" id="7440432">ti</span><span class="op" id="7440434">.</span><span class="ident" id="7440435">setupCmds</span><span class="op" id="7440444">,</span>&nbsp;<span class="op" id="7440446">&amp;</span><span class="ident" id="7440447">exec</span><span class="op" id="7440451">.</span><span class="ident" id="7440452">Cmd</span><span class="op" id="7440455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440459">Path</span><span class="op" id="7440463">:</span>&nbsp;<span class="ident" id="7440465">xname</span><span class="op" id="7440470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440474">Args</span><span class="op" id="7440478">:</span>&nbsp;<span class="op" id="7440480">[</span><span class="op" id="7440481">]</span><span class="builtintype" id="7440482">string</span><span class="op" id="7440488">{</span><span class="string" id="7440489">&#34;ifconfig&#34;</span><span class="op" id="7440499">,</span>&nbsp;<span class="ident" id="7440501">ti</span><span class="op" id="7440503">.</span><span class="ident" id="7440504">name</span><span class="op" id="7440508">,</span>&nbsp;<span class="string" id="7440510">&#34;inet&#34;</span><span class="op" id="7440516">,</span>&nbsp;<span class="ident" id="7440518">local</span><span class="op" id="7440523">,</span>&nbsp;<span class="string" id="7440525">&#34;dstaddr&#34;</span><span class="op" id="7440534">,</span>&nbsp;<span class="ident" id="7440536">remote</span><span class="op" id="7440542">}</span><span class="op" id="7440543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440546">}</span><span class="op" id="7440547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7440550">return</span>&nbsp;<span class="ident" id="7440557">nil</span><br>
<span class="lineno">55</span><span class="op" id="7440561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7440564">const</span>&nbsp;<span class="op" id="7440570">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440573">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7440594">=</span>&nbsp;<span class="num" id="7440596">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440600">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7440621">=</span>&nbsp;<span class="num" id="7440623">18</span><br>
<span class="lineno">60</span><span class="op" id="7440626">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7440629">var</span>&nbsp;<span class="op" id="7440633">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440636">igmpInterfaceTable</span>&nbsp;<span class="op" id="7440655">=</span>&nbsp;<span class="op" id="7440657">[</span><span class="op" id="7440658">]</span><span class="ident" id="7440659">Interface</span><span class="op" id="7440668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440672">{</span><span class="ident" id="7440673">Name</span><span class="op" id="7440677">:</span>&nbsp;<span class="string" id="7440679">&#34;lo&#34;</span><span class="op" id="7440683">}</span><span class="op" id="7440684">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440688">{</span><span class="ident" id="7440689">Name</span><span class="op" id="7440693">:</span>&nbsp;<span class="string" id="7440695">&#34;eth0&#34;</span><span class="op" id="7440701">}</span><span class="op" id="7440702">,</span>&nbsp;<span class="op" id="7440704">{</span><span class="ident" id="7440705">Name</span><span class="op" id="7440709">:</span>&nbsp;<span class="string" id="7440711">&#34;eth1&#34;</span><span class="op" id="7440717">}</span><span class="op" id="7440718">,</span>&nbsp;<span class="op" id="7440720">{</span><span class="ident" id="7440721">Name</span><span class="op" id="7440725">:</span>&nbsp;<span class="string" id="7440727">&#34;eth2&#34;</span><span class="op" id="7440733">}</span><span class="op" id="7440734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440738">{</span><span class="ident" id="7440739">Name</span><span class="op" id="7440743">:</span>&nbsp;<span class="string" id="7440745">&#34;eth0.100&#34;</span><span class="op" id="7440755">}</span><span class="op" id="7440756">,</span>&nbsp;<span class="op" id="7440758">{</span><span class="ident" id="7440759">Name</span><span class="op" id="7440763">:</span>&nbsp;<span class="string" id="7440765">&#34;eth0.101&#34;</span><span class="op" id="7440775">}</span><span class="op" id="7440776">,</span>&nbsp;<span class="op" id="7440778">{</span><span class="ident" id="7440779">Name</span><span class="op" id="7440783">:</span>&nbsp;<span class="string" id="7440785">&#34;eth0.102&#34;</span><span class="op" id="7440795">}</span><span class="op" id="7440796">,</span>&nbsp;<span class="op" id="7440798">{</span><span class="ident" id="7440799">Name</span><span class="op" id="7440803">:</span>&nbsp;<span class="string" id="7440805">&#34;eth0.103&#34;</span><span class="op" id="7440815">}</span><span class="op" id="7440816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440820">{</span><span class="ident" id="7440821">Name</span><span class="op" id="7440825">:</span>&nbsp;<span class="string" id="7440827">&#34;device1tap2&#34;</span><span class="op" id="7440840">}</span><span class="op" id="7440841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7440847">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7440867">=</span>&nbsp;<span class="op" id="7440869">[</span><span class="op" id="7440870">]</span><span class="ident" id="7440871">Interface</span><span class="op" id="7440880">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440884">{</span><span class="ident" id="7440885">Name</span><span class="op" id="7440889">:</span>&nbsp;<span class="string" id="7440891">&#34;lo&#34;</span><span class="op" id="7440895">}</span><span class="op" id="7440896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440900">{</span><span class="ident" id="7440901">Name</span><span class="op" id="7440905">:</span>&nbsp;<span class="string" id="7440907">&#34;eth0&#34;</span><span class="op" id="7440913">}</span><span class="op" id="7440914">,</span>&nbsp;<span class="op" id="7440916">{</span><span class="ident" id="7440917">Name</span><span class="op" id="7440921">:</span>&nbsp;<span class="string" id="7440923">&#34;eth1&#34;</span><span class="op" id="7440929">}</span><span class="op" id="7440930">,</span>&nbsp;<span class="op" id="7440932">{</span><span class="ident" id="7440933">Name</span><span class="op" id="7440937">:</span>&nbsp;<span class="string" id="7440939">&#34;eth2&#34;</span><span class="op" id="7440945">}</span><span class="op" id="7440946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7440950">{</span><span class="ident" id="7440951">Name</span><span class="op" id="7440955">:</span>&nbsp;<span class="string" id="7440957">&#34;eth0.100&#34;</span><span class="op" id="7440967">}</span><span class="op" id="7440968">,</span>&nbsp;<span class="op" id="7440970">{</span><span class="ident" id="7440971">Name</span><span class="op" id="7440975">:</span>&nbsp;<span class="string" id="7440977">&#34;eth0.101&#34;</span><span class="op" id="7440987">}</span><span class="op" id="7440988">,</span>&nbsp;<span class="op" id="7440990">{</span><span class="ident" id="7440991">Name</span><span class="op" id="7440995">:</span>&nbsp;<span class="string" id="7440997">&#34;eth0.102&#34;</span><span class="op" id="7441007">}</span><span class="op" id="7441008">,</span>&nbsp;<span class="op" id="7441010">{</span><span class="ident" id="7441011">Name</span><span class="op" id="7441015">:</span>&nbsp;<span class="string" id="7441017">&#34;eth0.103&#34;</span><span class="op" id="7441027">}</span><span class="op" id="7441028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441032">{</span><span class="ident" id="7441033">Name</span><span class="op" id="7441037">:</span>&nbsp;<span class="string" id="7441039">&#34;device1tap2&#34;</span><span class="op" id="7441052">}</span><span class="op" id="7441053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441057">{</span><span class="ident" id="7441058">Name</span><span class="op" id="7441062">:</span>&nbsp;<span class="string" id="7441064">&#34;pan0&#34;</span><span class="op" id="7441070">}</span><span class="op" id="7441071">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441074">}</span><br>
<span class="lineno"></span><span class="op" id="7441076">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7441079">func</span>&nbsp;<span class="ident" id="7441084">TestParseProcNet</span><span class="op" id="7441100">(</span><span class="ident" id="7441101">t</span>&nbsp;<span class="op" id="7441103">*</span><span class="ident" id="7441104">testing</span><span class="op" id="7441111">.</span><span class="ident" id="7441112">T</span><span class="op" id="7441113">)</span>&nbsp;<span class="op" id="7441115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441118">defer</span>&nbsp;<span class="keyword" id="7441124">func</span><span class="op" id="7441128">(</span><span class="op" id="7441129">)</span>&nbsp;<span class="op" id="7441131">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441135">if</span>&nbsp;<span class="ident" id="7441138">p</span>&nbsp;<span class="op" id="7441140">:=</span>&nbsp;<span class="builtinfunc" id="7441143">recover</span><span class="op" id="7441150">(</span><span class="op" id="7441151">)</span><span class="op" id="7441152">;</span>&nbsp;<span class="ident" id="7441154">p</span>&nbsp;<span class="op" id="7441156">!=</span>&nbsp;<span class="ident" id="7441159">nil</span>&nbsp;<span class="op" id="7441163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441168">t</span><span class="op" id="7441169">.</span><span class="ident" id="7441170">Fatalf</span><span class="op" id="7441176">(</span><span class="string" id="7441177">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="7441229">,</span>&nbsp;<span class="ident" id="7441231">p</span><span class="op" id="7441232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441239">}</span><span class="op" id="7441240">(</span><span class="op" id="7441241">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441245">var</span>&nbsp;<span class="ident" id="7441249">ifmat4</span>&nbsp;<span class="op" id="7441256">[</span><span class="op" id="7441257">]</span><span class="ident" id="7441258">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441264">for</span>&nbsp;<span class="ident" id="7441268">_</span><span class="op" id="7441269">,</span>&nbsp;<span class="ident" id="7441271">ifi</span>&nbsp;<span class="op" id="7441275">:=</span>&nbsp;<span class="keyword" id="7441278">range</span>&nbsp;<span class="ident" id="7441284">igmpInterfaceTable</span>&nbsp;<span class="op" id="7441303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441307">ifmat</span>&nbsp;<span class="op" id="7441313">:=</span>&nbsp;<span class="ident" id="7441316">parseProcNetIGMP</span><span class="op" id="7441332">(</span><span class="string" id="7441333">&#34;testdata/igmp&#34;</span><span class="op" id="7441348">,</span>&nbsp;<span class="op" id="7441350">&amp;</span><span class="ident" id="7441351">ifi</span><span class="op" id="7441354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441358">ifmat4</span>&nbsp;<span class="op" id="7441365">=</span>&nbsp;<span class="builtinfunc" id="7441367">append</span><span class="op" id="7441373">(</span><span class="ident" id="7441374">ifmat4</span><span class="op" id="7441380">,</span>&nbsp;<span class="ident" id="7441382">ifmat</span><span class="op" id="7441387">...</span><span class="op" id="7441390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441393">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441396">if</span>&nbsp;<span class="builtinfunc" id="7441399">len</span><span class="op" id="7441402">(</span><span class="ident" id="7441403">ifmat4</span><span class="op" id="7441409">)</span>&nbsp;<span class="op" id="7441411">!=</span>&nbsp;<span class="ident" id="7441414">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="7441435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441439">t</span><span class="op" id="7441440">.</span><span class="ident" id="7441441">Fatalf</span><span class="op" id="7441447">(</span><span class="string" id="7441448">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7441500">,</span>&nbsp;<span class="builtinfunc" id="7441502">len</span><span class="op" id="7441505">(</span><span class="ident" id="7441506">ifmat4</span><span class="op" id="7441512">)</span><span class="op" id="7441513">,</span>&nbsp;<span class="ident" id="7441515">numOfTestIPv4MCAddrs</span><span class="op" id="7441535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441542">var</span>&nbsp;<span class="ident" id="7441546">ifmat6</span>&nbsp;<span class="op" id="7441553">[</span><span class="op" id="7441554">]</span><span class="ident" id="7441555">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441561">for</span>&nbsp;<span class="ident" id="7441565">_</span><span class="op" id="7441566">,</span>&nbsp;<span class="ident" id="7441568">ifi</span>&nbsp;<span class="op" id="7441572">:=</span>&nbsp;<span class="keyword" id="7441575">range</span>&nbsp;<span class="ident" id="7441581">igmp6InterfaceTable</span>&nbsp;<span class="op" id="7441601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441605">ifmat</span>&nbsp;<span class="op" id="7441611">:=</span>&nbsp;<span class="ident" id="7441614">parseProcNetIGMP6</span><span class="op" id="7441631">(</span><span class="string" id="7441632">&#34;testdata/igmp6&#34;</span><span class="op" id="7441648">,</span>&nbsp;<span class="op" id="7441650">&amp;</span><span class="ident" id="7441651">ifi</span><span class="op" id="7441654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441658">ifmat6</span>&nbsp;<span class="op" id="7441665">=</span>&nbsp;<span class="builtinfunc" id="7441667">append</span><span class="op" id="7441673">(</span><span class="ident" id="7441674">ifmat6</span><span class="op" id="7441680">,</span>&nbsp;<span class="ident" id="7441682">ifmat</span><span class="op" id="7441687">...</span><span class="op" id="7441690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7441696">if</span>&nbsp;<span class="builtinfunc" id="7441699">len</span><span class="op" id="7441702">(</span><span class="ident" id="7441703">ifmat6</span><span class="op" id="7441709">)</span>&nbsp;<span class="op" id="7441711">!=</span>&nbsp;<span class="ident" id="7441714">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="7441735">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7441739">t</span><span class="op" id="7441740">.</span><span class="ident" id="7441741">Fatalf</span><span class="op" id="7441747">(</span><span class="string" id="7441748">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7441801">,</span>&nbsp;<span class="builtinfunc" id="7441803">len</span><span class="op" id="7441806">(</span><span class="ident" id="7441807">ifmat6</span><span class="op" id="7441813">)</span><span class="op" id="7441814">,</span>&nbsp;<span class="ident" id="7441816">numOfTestIPv6MCAddrs</span><span class="op" id="7441836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7441839">}</span><br>
<span class="lineno"></span><span class="op" id="7441841">}</span>
</div>
</body>
</html>
