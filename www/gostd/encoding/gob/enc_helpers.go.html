<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3975882">//&nbsp;Created&nbsp;by&nbsp;encgen&nbsp;--output&nbsp;enc_helpers.go;&nbsp;DO&nbsp;NOT&nbsp;EDIT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3975941">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3975996">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno">5</span><span class="comment" id="3976050">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3976101">package</span>&nbsp;<span class="ident" id="3976109">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3976114">import</span>&nbsp;<span class="op" id="3976121">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3976124">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="3976134">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3976137">var</span>&nbsp;<span class="ident" id="3976141">encArrayHelper</span>&nbsp;<span class="op" id="3976156">=</span>&nbsp;<span class="keyword" id="3976158">map</span><span class="op" id="3976161">[</span><span class="ident" id="3976162">reflect</span><span class="op" id="3976169">.</span><span class="ident" id="3976170">Kind</span><span class="op" id="3976174">]</span><span class="ident" id="3976175">encHelper</span><span class="op" id="3976184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976187">reflect</span><span class="op" id="3976194">.</span><span class="ident" id="3976195">Bool</span><span class="op" id="3976199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976207">encBoolArray</span><span class="op" id="3976219">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976222">reflect</span><span class="op" id="3976229">.</span><span class="ident" id="3976230">Complex64</span><span class="op" id="3976239">:</span>&nbsp;&nbsp;<span class="ident" id="3976242">encComplex64Array</span><span class="op" id="3976259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976262">reflect</span><span class="op" id="3976269">.</span><span class="ident" id="3976270">Complex128</span><span class="op" id="3976280">:</span>&nbsp;<span class="ident" id="3976282">encComplex128Array</span><span class="op" id="3976300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976303">reflect</span><span class="op" id="3976310">.</span><span class="ident" id="3976311">Float32</span><span class="op" id="3976318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976323">encFloat32Array</span><span class="op" id="3976338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976341">reflect</span><span class="op" id="3976348">.</span><span class="ident" id="3976349">Float64</span><span class="op" id="3976356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976361">encFloat64Array</span><span class="op" id="3976376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976379">reflect</span><span class="op" id="3976386">.</span><span class="ident" id="3976387">Int</span><span class="op" id="3976390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976399">encIntArray</span><span class="op" id="3976410">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976413">reflect</span><span class="op" id="3976420">.</span><span class="ident" id="3976421">Int16</span><span class="op" id="3976426">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976433">encInt16Array</span><span class="op" id="3976446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976449">reflect</span><span class="op" id="3976456">.</span><span class="ident" id="3976457">Int32</span><span class="op" id="3976462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976469">encInt32Array</span><span class="op" id="3976482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976485">reflect</span><span class="op" id="3976492">.</span><span class="ident" id="3976493">Int64</span><span class="op" id="3976498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976505">encInt64Array</span><span class="op" id="3976518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976521">reflect</span><span class="op" id="3976528">.</span><span class="ident" id="3976529">Int8</span><span class="op" id="3976533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976541">encInt8Array</span><span class="op" id="3976553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976556">reflect</span><span class="op" id="3976563">.</span><span class="ident" id="3976564">String</span><span class="op" id="3976570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976576">encStringArray</span><span class="op" id="3976590">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976593">reflect</span><span class="op" id="3976600">.</span><span class="ident" id="3976601">Uint</span><span class="op" id="3976605">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976613">encUintArray</span><span class="op" id="3976625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976628">reflect</span><span class="op" id="3976635">.</span><span class="ident" id="3976636">Uint16</span><span class="op" id="3976642">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976648">encUint16Array</span><span class="op" id="3976662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976665">reflect</span><span class="op" id="3976672">.</span><span class="ident" id="3976673">Uint32</span><span class="op" id="3976679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976685">encUint32Array</span><span class="op" id="3976699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976702">reflect</span><span class="op" id="3976709">.</span><span class="ident" id="3976710">Uint64</span><span class="op" id="3976716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976722">encUint64Array</span><span class="op" id="3976736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976739">reflect</span><span class="op" id="3976746">.</span><span class="ident" id="3976747">Uintptr</span><span class="op" id="3976754">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976759">encUintptrArray</span><span class="op" id="3976774">,</span><br>
<span class="lineno">30</span><span class="op" id="3976776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3976779">var</span>&nbsp;<span class="ident" id="3976783">encSliceHelper</span>&nbsp;<span class="op" id="3976798">=</span>&nbsp;<span class="keyword" id="3976800">map</span><span class="op" id="3976803">[</span><span class="ident" id="3976804">reflect</span><span class="op" id="3976811">.</span><span class="ident" id="3976812">Kind</span><span class="op" id="3976816">]</span><span class="ident" id="3976817">encHelper</span><span class="op" id="3976826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976829">reflect</span><span class="op" id="3976836">.</span><span class="ident" id="3976837">Bool</span><span class="op" id="3976841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976849">encBoolSlice</span><span class="op" id="3976861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976864">reflect</span><span class="op" id="3976871">.</span><span class="ident" id="3976872">Complex64</span><span class="op" id="3976881">:</span>&nbsp;&nbsp;<span class="ident" id="3976884">encComplex64Slice</span><span class="op" id="3976901">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976904">reflect</span><span class="op" id="3976911">.</span><span class="ident" id="3976912">Complex128</span><span class="op" id="3976922">:</span>&nbsp;<span class="ident" id="3976924">encComplex128Slice</span><span class="op" id="3976942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976945">reflect</span><span class="op" id="3976952">.</span><span class="ident" id="3976953">Float32</span><span class="op" id="3976960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3976965">encFloat32Slice</span><span class="op" id="3976980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3976983">reflect</span><span class="op" id="3976990">.</span><span class="ident" id="3976991">Float64</span><span class="op" id="3976998">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977003">encFloat64Slice</span><span class="op" id="3977018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977021">reflect</span><span class="op" id="3977028">.</span><span class="ident" id="3977029">Int</span><span class="op" id="3977032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977041">encIntSlice</span><span class="op" id="3977052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977055">reflect</span><span class="op" id="3977062">.</span><span class="ident" id="3977063">Int16</span><span class="op" id="3977068">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977075">encInt16Slice</span><span class="op" id="3977088">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977091">reflect</span><span class="op" id="3977098">.</span><span class="ident" id="3977099">Int32</span><span class="op" id="3977104">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977111">encInt32Slice</span><span class="op" id="3977124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977127">reflect</span><span class="op" id="3977134">.</span><span class="ident" id="3977135">Int64</span><span class="op" id="3977140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977147">encInt64Slice</span><span class="op" id="3977160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977163">reflect</span><span class="op" id="3977170">.</span><span class="ident" id="3977171">Int8</span><span class="op" id="3977175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977183">encInt8Slice</span><span class="op" id="3977195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977198">reflect</span><span class="op" id="3977205">.</span><span class="ident" id="3977206">String</span><span class="op" id="3977212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977218">encStringSlice</span><span class="op" id="3977232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977235">reflect</span><span class="op" id="3977242">.</span><span class="ident" id="3977243">Uint</span><span class="op" id="3977247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977255">encUintSlice</span><span class="op" id="3977267">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977270">reflect</span><span class="op" id="3977277">.</span><span class="ident" id="3977278">Uint16</span><span class="op" id="3977284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977290">encUint16Slice</span><span class="op" id="3977304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977307">reflect</span><span class="op" id="3977314">.</span><span class="ident" id="3977315">Uint32</span><span class="op" id="3977321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977327">encUint32Slice</span><span class="op" id="3977341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977344">reflect</span><span class="op" id="3977351">.</span><span class="ident" id="3977352">Uint64</span><span class="op" id="3977358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977364">encUint64Slice</span><span class="op" id="3977378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977381">reflect</span><span class="op" id="3977388">.</span><span class="ident" id="3977389">Uintptr</span><span class="op" id="3977396">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3977401">encUintptrSlice</span><span class="op" id="3977416">,</span><br>
<span class="lineno"></span><span class="op" id="3977418">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3977421">func</span>&nbsp;<span class="ident" id="3977426">encBoolArray</span><span class="op" id="3977438">(</span><span class="ident" id="3977439">state</span>&nbsp;<span class="op" id="3977445">*</span><span class="ident" id="3977446">encoderState</span><span class="op" id="3977458">,</span>&nbsp;<span class="ident" id="3977460">v</span>&nbsp;<span class="ident" id="3977462">reflect</span><span class="op" id="3977469">.</span><span class="ident" id="3977470">Value</span><span class="op" id="3977475">)</span>&nbsp;<span class="builtintype" id="3977477">bool</span>&nbsp;<span class="op" id="3977482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3977485">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977526">if</span>&nbsp;<span class="op" id="3977529">!</span><span class="ident" id="3977530">v</span><span class="op" id="3977531">.</span><span class="ident" id="3977532">CanAddr</span><span class="op" id="3977539">(</span><span class="op" id="3977540">)</span>&nbsp;<span class="op" id="3977542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977546">return</span>&nbsp;<span class="builtintype" id="3977553">false</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977563">return</span>&nbsp;<span class="ident" id="3977570">encBoolSlice</span><span class="op" id="3977582">(</span><span class="ident" id="3977583">state</span><span class="op" id="3977588">,</span>&nbsp;<span class="ident" id="3977590">v</span><span class="op" id="3977591">.</span><span class="ident" id="3977592">Slice</span><span class="op" id="3977597">(</span><span class="num" id="3977598">0</span><span class="op" id="3977599">,</span>&nbsp;<span class="ident" id="3977601">v</span><span class="op" id="3977602">.</span><span class="ident" id="3977603">Len</span><span class="op" id="3977606">(</span><span class="op" id="3977607">)</span><span class="op" id="3977608">)</span><span class="op" id="3977609">)</span><br>
<span class="lineno"></span><span class="op" id="3977611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977614">func</span>&nbsp;<span class="ident" id="3977619">encBoolSlice</span><span class="op" id="3977631">(</span><span class="ident" id="3977632">state</span>&nbsp;<span class="op" id="3977638">*</span><span class="ident" id="3977639">encoderState</span><span class="op" id="3977651">,</span>&nbsp;<span class="ident" id="3977653">v</span>&nbsp;<span class="ident" id="3977655">reflect</span><span class="op" id="3977662">.</span><span class="ident" id="3977663">Value</span><span class="op" id="3977668">)</span>&nbsp;<span class="builtintype" id="3977670">bool</span>&nbsp;<span class="op" id="3977675">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977678">slice</span><span class="op" id="3977683">,</span>&nbsp;<span class="ident" id="3977685">ok</span>&nbsp;<span class="op" id="3977688">:=</span>&nbsp;<span class="ident" id="3977691">v</span><span class="op" id="3977692">.</span><span class="ident" id="3977693">Interface</span><span class="op" id="3977702">(</span><span class="op" id="3977703">)</span><span class="op" id="3977704">.</span><span class="op" id="3977705">(</span><span class="op" id="3977706">[</span><span class="op" id="3977707">]</span><span class="builtintype" id="3977708">bool</span><span class="op" id="3977712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977715">if</span>&nbsp;<span class="op" id="3977718">!</span><span class="ident" id="3977719">ok</span>&nbsp;<span class="op" id="3977722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3977726">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;bool&nbsp;but&nbsp;not&nbsp;type&nbsp;bool.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977801">return</span>&nbsp;<span class="builtintype" id="3977808">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977815">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977818">for</span>&nbsp;<span class="ident" id="3977822">_</span><span class="op" id="3977823">,</span>&nbsp;<span class="ident" id="3977825">x</span>&nbsp;<span class="op" id="3977827">:=</span>&nbsp;<span class="keyword" id="3977830">range</span>&nbsp;<span class="ident" id="3977836">slice</span>&nbsp;<span class="op" id="3977842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977846">if</span>&nbsp;<span class="ident" id="3977849">x</span>&nbsp;<span class="op" id="3977851">!=</span>&nbsp;<span class="builtintype" id="3977854">false</span>&nbsp;<span class="op" id="3977860">||</span>&nbsp;<span class="ident" id="3977863">state</span><span class="op" id="3977868">.</span><span class="ident" id="3977869">sendZero</span>&nbsp;<span class="op" id="3977878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977883">if</span>&nbsp;<span class="ident" id="3977886">x</span>&nbsp;<span class="op" id="3977888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977894">state</span><span class="op" id="3977899">.</span><span class="ident" id="3977900">encodeUint</span><span class="op" id="3977910">(</span><span class="num" id="3977911">1</span><span class="op" id="3977912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977917">}</span>&nbsp;<span class="keyword" id="3977919">else</span>&nbsp;<span class="op" id="3977924">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3977930">state</span><span class="op" id="3977935">.</span><span class="ident" id="3977936">encodeUint</span><span class="op" id="3977946">(</span><span class="num" id="3977947">0</span><span class="op" id="3977948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3977960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3977963">return</span>&nbsp;<span class="builtintype" id="3977970">true</span><br>
<span class="lineno">75</span><span class="op" id="3977975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3977978">func</span>&nbsp;<span class="ident" id="3977983">encComplex64Array</span><span class="op" id="3978000">(</span><span class="ident" id="3978001">state</span>&nbsp;<span class="op" id="3978007">*</span><span class="ident" id="3978008">encoderState</span><span class="op" id="3978020">,</span>&nbsp;<span class="ident" id="3978022">v</span>&nbsp;<span class="ident" id="3978024">reflect</span><span class="op" id="3978031">.</span><span class="ident" id="3978032">Value</span><span class="op" id="3978037">)</span>&nbsp;<span class="builtintype" id="3978039">bool</span>&nbsp;<span class="op" id="3978044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3978047">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978088">if</span>&nbsp;<span class="op" id="3978091">!</span><span class="ident" id="3978092">v</span><span class="op" id="3978093">.</span><span class="ident" id="3978094">CanAddr</span><span class="op" id="3978101">(</span><span class="op" id="3978102">)</span>&nbsp;<span class="op" id="3978104">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978108">return</span>&nbsp;<span class="builtintype" id="3978115">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3978122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978125">return</span>&nbsp;<span class="ident" id="3978132">encComplex64Slice</span><span class="op" id="3978149">(</span><span class="ident" id="3978150">state</span><span class="op" id="3978155">,</span>&nbsp;<span class="ident" id="3978157">v</span><span class="op" id="3978158">.</span><span class="ident" id="3978159">Slice</span><span class="op" id="3978164">(</span><span class="num" id="3978165">0</span><span class="op" id="3978166">,</span>&nbsp;<span class="ident" id="3978168">v</span><span class="op" id="3978169">.</span><span class="ident" id="3978170">Len</span><span class="op" id="3978173">(</span><span class="op" id="3978174">)</span><span class="op" id="3978175">)</span><span class="op" id="3978176">)</span><br>
<span class="lineno"></span><span class="op" id="3978178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3978181">func</span>&nbsp;<span class="ident" id="3978186">encComplex64Slice</span><span class="op" id="3978203">(</span><span class="ident" id="3978204">state</span>&nbsp;<span class="op" id="3978210">*</span><span class="ident" id="3978211">encoderState</span><span class="op" id="3978223">,</span>&nbsp;<span class="ident" id="3978225">v</span>&nbsp;<span class="ident" id="3978227">reflect</span><span class="op" id="3978234">.</span><span class="ident" id="3978235">Value</span><span class="op" id="3978240">)</span>&nbsp;<span class="builtintype" id="3978242">bool</span>&nbsp;<span class="op" id="3978247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978250">slice</span><span class="op" id="3978255">,</span>&nbsp;<span class="ident" id="3978257">ok</span>&nbsp;<span class="op" id="3978260">:=</span>&nbsp;<span class="ident" id="3978263">v</span><span class="op" id="3978264">.</span><span class="ident" id="3978265">Interface</span><span class="op" id="3978274">(</span><span class="op" id="3978275">)</span><span class="op" id="3978276">.</span><span class="op" id="3978277">(</span><span class="op" id="3978278">[</span><span class="op" id="3978279">]</span><span class="builtintype" id="3978280">complex64</span><span class="op" id="3978289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978292">if</span>&nbsp;<span class="op" id="3978295">!</span><span class="ident" id="3978296">ok</span>&nbsp;<span class="op" id="3978299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3978303">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex64&nbsp;but&nbsp;not&nbsp;type&nbsp;complex64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978388">return</span>&nbsp;<span class="builtintype" id="3978395">false</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3978402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978405">for</span>&nbsp;<span class="ident" id="3978409">_</span><span class="op" id="3978410">,</span>&nbsp;<span class="ident" id="3978412">x</span>&nbsp;<span class="op" id="3978414">:=</span>&nbsp;<span class="keyword" id="3978417">range</span>&nbsp;<span class="ident" id="3978423">slice</span>&nbsp;<span class="op" id="3978429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978433">if</span>&nbsp;<span class="ident" id="3978436">x</span>&nbsp;<span class="op" id="3978438">!=</span>&nbsp;<span class="num" id="3978441">0</span><span class="op" id="3978442">+</span><span class="num" id="3978443">0i</span>&nbsp;<span class="op" id="3978446">||</span>&nbsp;<span class="ident" id="3978449">state</span><span class="op" id="3978454">.</span><span class="ident" id="3978455">sendZero</span>&nbsp;<span class="op" id="3978464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978469">rpart</span>&nbsp;<span class="op" id="3978475">:=</span>&nbsp;<span class="ident" id="3978478">floatBits</span><span class="op" id="3978487">(</span><span class="builtintype" id="3978488">float64</span><span class="op" id="3978495">(</span><span class="builtinfunc" id="3978496">real</span><span class="op" id="3978500">(</span><span class="ident" id="3978501">x</span><span class="op" id="3978502">)</span><span class="op" id="3978503">)</span><span class="op" id="3978504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978509">ipart</span>&nbsp;<span class="op" id="3978515">:=</span>&nbsp;<span class="ident" id="3978518">floatBits</span><span class="op" id="3978527">(</span><span class="builtintype" id="3978528">float64</span><span class="op" id="3978535">(</span><span class="builtinfunc" id="3978536">imag</span><span class="op" id="3978540">(</span><span class="ident" id="3978541">x</span><span class="op" id="3978542">)</span><span class="op" id="3978543">)</span><span class="op" id="3978544">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978549">state</span><span class="op" id="3978554">.</span><span class="ident" id="3978555">encodeUint</span><span class="op" id="3978565">(</span><span class="ident" id="3978566">rpart</span><span class="op" id="3978571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978576">state</span><span class="op" id="3978581">.</span><span class="ident" id="3978582">encodeUint</span><span class="op" id="3978592">(</span><span class="ident" id="3978593">ipart</span><span class="op" id="3978598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3978602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3978605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978608">return</span>&nbsp;<span class="builtintype" id="3978615">true</span><br>
<span class="lineno">100</span><span class="op" id="3978620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3978623">func</span>&nbsp;<span class="ident" id="3978628">encComplex128Array</span><span class="op" id="3978646">(</span><span class="ident" id="3978647">state</span>&nbsp;<span class="op" id="3978653">*</span><span class="ident" id="3978654">encoderState</span><span class="op" id="3978666">,</span>&nbsp;<span class="ident" id="3978668">v</span>&nbsp;<span class="ident" id="3978670">reflect</span><span class="op" id="3978677">.</span><span class="ident" id="3978678">Value</span><span class="op" id="3978683">)</span>&nbsp;<span class="builtintype" id="3978685">bool</span>&nbsp;<span class="op" id="3978690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3978693">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978734">if</span>&nbsp;<span class="op" id="3978737">!</span><span class="ident" id="3978738">v</span><span class="op" id="3978739">.</span><span class="ident" id="3978740">CanAddr</span><span class="op" id="3978747">(</span><span class="op" id="3978748">)</span>&nbsp;<span class="op" id="3978750">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978754">return</span>&nbsp;<span class="builtintype" id="3978761">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3978768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978771">return</span>&nbsp;<span class="ident" id="3978778">encComplex128Slice</span><span class="op" id="3978796">(</span><span class="ident" id="3978797">state</span><span class="op" id="3978802">,</span>&nbsp;<span class="ident" id="3978804">v</span><span class="op" id="3978805">.</span><span class="ident" id="3978806">Slice</span><span class="op" id="3978811">(</span><span class="num" id="3978812">0</span><span class="op" id="3978813">,</span>&nbsp;<span class="ident" id="3978815">v</span><span class="op" id="3978816">.</span><span class="ident" id="3978817">Len</span><span class="op" id="3978820">(</span><span class="op" id="3978821">)</span><span class="op" id="3978822">)</span><span class="op" id="3978823">)</span><br>
<span class="lineno"></span><span class="op" id="3978825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="3978828">func</span>&nbsp;<span class="ident" id="3978833">encComplex128Slice</span><span class="op" id="3978851">(</span><span class="ident" id="3978852">state</span>&nbsp;<span class="op" id="3978858">*</span><span class="ident" id="3978859">encoderState</span><span class="op" id="3978871">,</span>&nbsp;<span class="ident" id="3978873">v</span>&nbsp;<span class="ident" id="3978875">reflect</span><span class="op" id="3978882">.</span><span class="ident" id="3978883">Value</span><span class="op" id="3978888">)</span>&nbsp;<span class="builtintype" id="3978890">bool</span>&nbsp;<span class="op" id="3978895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3978898">slice</span><span class="op" id="3978903">,</span>&nbsp;<span class="ident" id="3978905">ok</span>&nbsp;<span class="op" id="3978908">:=</span>&nbsp;<span class="ident" id="3978911">v</span><span class="op" id="3978912">.</span><span class="ident" id="3978913">Interface</span><span class="op" id="3978922">(</span><span class="op" id="3978923">)</span><span class="op" id="3978924">.</span><span class="op" id="3978925">(</span><span class="op" id="3978926">[</span><span class="op" id="3978927">]</span><span class="builtintype" id="3978928">complex128</span><span class="op" id="3978938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3978941">if</span>&nbsp;<span class="op" id="3978944">!</span><span class="ident" id="3978945">ok</span>&nbsp;<span class="op" id="3978948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3978952">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex128&nbsp;but&nbsp;not&nbsp;type&nbsp;complex128.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979039">return</span>&nbsp;<span class="builtintype" id="3979046">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979056">for</span>&nbsp;<span class="ident" id="3979060">_</span><span class="op" id="3979061">,</span>&nbsp;<span class="ident" id="3979063">x</span>&nbsp;<span class="op" id="3979065">:=</span>&nbsp;<span class="keyword" id="3979068">range</span>&nbsp;<span class="ident" id="3979074">slice</span>&nbsp;<span class="op" id="3979080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979084">if</span>&nbsp;<span class="ident" id="3979087">x</span>&nbsp;<span class="op" id="3979089">!=</span>&nbsp;<span class="num" id="3979092">0</span><span class="op" id="3979093">+</span><span class="num" id="3979094">0i</span>&nbsp;<span class="op" id="3979097">||</span>&nbsp;<span class="ident" id="3979100">state</span><span class="op" id="3979105">.</span><span class="ident" id="3979106">sendZero</span>&nbsp;<span class="op" id="3979115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979120">rpart</span>&nbsp;<span class="op" id="3979126">:=</span>&nbsp;<span class="ident" id="3979129">floatBits</span><span class="op" id="3979138">(</span><span class="builtinfunc" id="3979139">real</span><span class="op" id="3979143">(</span><span class="ident" id="3979144">x</span><span class="op" id="3979145">)</span><span class="op" id="3979146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979151">ipart</span>&nbsp;<span class="op" id="3979157">:=</span>&nbsp;<span class="ident" id="3979160">floatBits</span><span class="op" id="3979169">(</span><span class="builtinfunc" id="3979170">imag</span><span class="op" id="3979174">(</span><span class="ident" id="3979175">x</span><span class="op" id="3979176">)</span><span class="op" id="3979177">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979182">state</span><span class="op" id="3979187">.</span><span class="ident" id="3979188">encodeUint</span><span class="op" id="3979198">(</span><span class="ident" id="3979199">rpart</span><span class="op" id="3979204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979209">state</span><span class="op" id="3979214">.</span><span class="ident" id="3979215">encodeUint</span><span class="op" id="3979225">(</span><span class="ident" id="3979226">ipart</span><span class="op" id="3979231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979241">return</span>&nbsp;<span class="builtintype" id="3979248">true</span><br>
<span class="lineno">125</span><span class="op" id="3979253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3979256">func</span>&nbsp;<span class="ident" id="3979261">encFloat32Array</span><span class="op" id="3979276">(</span><span class="ident" id="3979277">state</span>&nbsp;<span class="op" id="3979283">*</span><span class="ident" id="3979284">encoderState</span><span class="op" id="3979296">,</span>&nbsp;<span class="ident" id="3979298">v</span>&nbsp;<span class="ident" id="3979300">reflect</span><span class="op" id="3979307">.</span><span class="ident" id="3979308">Value</span><span class="op" id="3979313">)</span>&nbsp;<span class="builtintype" id="3979315">bool</span>&nbsp;<span class="op" id="3979320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3979323">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979364">if</span>&nbsp;<span class="op" id="3979367">!</span><span class="ident" id="3979368">v</span><span class="op" id="3979369">.</span><span class="ident" id="3979370">CanAddr</span><span class="op" id="3979377">(</span><span class="op" id="3979378">)</span>&nbsp;<span class="op" id="3979380">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979384">return</span>&nbsp;<span class="builtintype" id="3979391">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979401">return</span>&nbsp;<span class="ident" id="3979408">encFloat32Slice</span><span class="op" id="3979423">(</span><span class="ident" id="3979424">state</span><span class="op" id="3979429">,</span>&nbsp;<span class="ident" id="3979431">v</span><span class="op" id="3979432">.</span><span class="ident" id="3979433">Slice</span><span class="op" id="3979438">(</span><span class="num" id="3979439">0</span><span class="op" id="3979440">,</span>&nbsp;<span class="ident" id="3979442">v</span><span class="op" id="3979443">.</span><span class="ident" id="3979444">Len</span><span class="op" id="3979447">(</span><span class="op" id="3979448">)</span><span class="op" id="3979449">)</span><span class="op" id="3979450">)</span><br>
<span class="lineno"></span><span class="op" id="3979452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="3979455">func</span>&nbsp;<span class="ident" id="3979460">encFloat32Slice</span><span class="op" id="3979475">(</span><span class="ident" id="3979476">state</span>&nbsp;<span class="op" id="3979482">*</span><span class="ident" id="3979483">encoderState</span><span class="op" id="3979495">,</span>&nbsp;<span class="ident" id="3979497">v</span>&nbsp;<span class="ident" id="3979499">reflect</span><span class="op" id="3979506">.</span><span class="ident" id="3979507">Value</span><span class="op" id="3979512">)</span>&nbsp;<span class="builtintype" id="3979514">bool</span>&nbsp;<span class="op" id="3979519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979522">slice</span><span class="op" id="3979527">,</span>&nbsp;<span class="ident" id="3979529">ok</span>&nbsp;<span class="op" id="3979532">:=</span>&nbsp;<span class="ident" id="3979535">v</span><span class="op" id="3979536">.</span><span class="ident" id="3979537">Interface</span><span class="op" id="3979546">(</span><span class="op" id="3979547">)</span><span class="op" id="3979548">.</span><span class="op" id="3979549">(</span><span class="op" id="3979550">[</span><span class="op" id="3979551">]</span><span class="builtintype" id="3979552">float32</span><span class="op" id="3979559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979562">if</span>&nbsp;<span class="op" id="3979565">!</span><span class="ident" id="3979566">ok</span>&nbsp;<span class="op" id="3979569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3979573">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float32&nbsp;but&nbsp;not&nbsp;type&nbsp;float32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979654">return</span>&nbsp;<span class="builtintype" id="3979661">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979671">for</span>&nbsp;<span class="ident" id="3979675">_</span><span class="op" id="3979676">,</span>&nbsp;<span class="ident" id="3979678">x</span>&nbsp;<span class="op" id="3979680">:=</span>&nbsp;<span class="keyword" id="3979683">range</span>&nbsp;<span class="ident" id="3979689">slice</span>&nbsp;<span class="op" id="3979695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979699">if</span>&nbsp;<span class="ident" id="3979702">x</span>&nbsp;<span class="op" id="3979704">!=</span>&nbsp;<span class="num" id="3979707">0</span>&nbsp;<span class="op" id="3979709">||</span>&nbsp;<span class="ident" id="3979712">state</span><span class="op" id="3979717">.</span><span class="ident" id="3979718">sendZero</span>&nbsp;<span class="op" id="3979727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979732">bits</span>&nbsp;<span class="op" id="3979737">:=</span>&nbsp;<span class="ident" id="3979740">floatBits</span><span class="op" id="3979749">(</span><span class="builtintype" id="3979750">float64</span><span class="op" id="3979757">(</span><span class="ident" id="3979758">x</span><span class="op" id="3979759">)</span><span class="op" id="3979760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3979765">state</span><span class="op" id="3979770">.</span><span class="ident" id="3979771">encodeUint</span><span class="op" id="3979781">(</span><span class="ident" id="3979782">bits</span><span class="op" id="3979786">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979796">return</span>&nbsp;<span class="builtintype" id="3979803">true</span><br>
<span class="lineno"></span><span class="op" id="3979808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="3979811">func</span>&nbsp;<span class="ident" id="3979816">encFloat64Array</span><span class="op" id="3979831">(</span><span class="ident" id="3979832">state</span>&nbsp;<span class="op" id="3979838">*</span><span class="ident" id="3979839">encoderState</span><span class="op" id="3979851">,</span>&nbsp;<span class="ident" id="3979853">v</span>&nbsp;<span class="ident" id="3979855">reflect</span><span class="op" id="3979862">.</span><span class="ident" id="3979863">Value</span><span class="op" id="3979868">)</span>&nbsp;<span class="builtintype" id="3979870">bool</span>&nbsp;<span class="op" id="3979875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3979878">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979919">if</span>&nbsp;<span class="op" id="3979922">!</span><span class="ident" id="3979923">v</span><span class="op" id="3979924">.</span><span class="ident" id="3979925">CanAddr</span><span class="op" id="3979932">(</span><span class="op" id="3979933">)</span>&nbsp;<span class="op" id="3979935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979939">return</span>&nbsp;<span class="builtintype" id="3979946">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3979953">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3979956">return</span>&nbsp;<span class="ident" id="3979963">encFloat64Slice</span><span class="op" id="3979978">(</span><span class="ident" id="3979979">state</span><span class="op" id="3979984">,</span>&nbsp;<span class="ident" id="3979986">v</span><span class="op" id="3979987">.</span><span class="ident" id="3979988">Slice</span><span class="op" id="3979993">(</span><span class="num" id="3979994">0</span><span class="op" id="3979995">,</span>&nbsp;<span class="ident" id="3979997">v</span><span class="op" id="3979998">.</span><span class="ident" id="3979999">Len</span><span class="op" id="3980002">(</span><span class="op" id="3980003">)</span><span class="op" id="3980004">)</span><span class="op" id="3980005">)</span><br>
<span class="lineno"></span><span class="op" id="3980007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3980010">func</span>&nbsp;<span class="ident" id="3980015">encFloat64Slice</span><span class="op" id="3980030">(</span><span class="ident" id="3980031">state</span>&nbsp;<span class="op" id="3980037">*</span><span class="ident" id="3980038">encoderState</span><span class="op" id="3980050">,</span>&nbsp;<span class="ident" id="3980052">v</span>&nbsp;<span class="ident" id="3980054">reflect</span><span class="op" id="3980061">.</span><span class="ident" id="3980062">Value</span><span class="op" id="3980067">)</span>&nbsp;<span class="builtintype" id="3980069">bool</span>&nbsp;<span class="op" id="3980074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3980077">slice</span><span class="op" id="3980082">,</span>&nbsp;<span class="ident" id="3980084">ok</span>&nbsp;<span class="op" id="3980087">:=</span>&nbsp;<span class="ident" id="3980090">v</span><span class="op" id="3980091">.</span><span class="ident" id="3980092">Interface</span><span class="op" id="3980101">(</span><span class="op" id="3980102">)</span><span class="op" id="3980103">.</span><span class="op" id="3980104">(</span><span class="op" id="3980105">[</span><span class="op" id="3980106">]</span><span class="builtintype" id="3980107">float64</span><span class="op" id="3980114">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980117">if</span>&nbsp;<span class="op" id="3980120">!</span><span class="ident" id="3980121">ok</span>&nbsp;<span class="op" id="3980124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3980128">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float64&nbsp;but&nbsp;not&nbsp;type&nbsp;float64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980209">return</span>&nbsp;<span class="builtintype" id="3980216">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980226">for</span>&nbsp;<span class="ident" id="3980230">_</span><span class="op" id="3980231">,</span>&nbsp;<span class="ident" id="3980233">x</span>&nbsp;<span class="op" id="3980235">:=</span>&nbsp;<span class="keyword" id="3980238">range</span>&nbsp;<span class="ident" id="3980244">slice</span>&nbsp;<span class="op" id="3980250">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980254">if</span>&nbsp;<span class="ident" id="3980257">x</span>&nbsp;<span class="op" id="3980259">!=</span>&nbsp;<span class="num" id="3980262">0</span>&nbsp;<span class="op" id="3980264">||</span>&nbsp;<span class="ident" id="3980267">state</span><span class="op" id="3980272">.</span><span class="ident" id="3980273">sendZero</span>&nbsp;<span class="op" id="3980282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3980287">bits</span>&nbsp;<span class="op" id="3980292">:=</span>&nbsp;<span class="ident" id="3980295">floatBits</span><span class="op" id="3980304">(</span><span class="ident" id="3980305">x</span><span class="op" id="3980306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3980311">state</span><span class="op" id="3980316">.</span><span class="ident" id="3980317">encodeUint</span><span class="op" id="3980327">(</span><span class="ident" id="3980328">bits</span><span class="op" id="3980332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980339">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980342">return</span>&nbsp;<span class="builtintype" id="3980349">true</span><br>
<span class="lineno"></span><span class="op" id="3980354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3980357">func</span>&nbsp;<span class="ident" id="3980362">encIntArray</span><span class="op" id="3980373">(</span><span class="ident" id="3980374">state</span>&nbsp;<span class="op" id="3980380">*</span><span class="ident" id="3980381">encoderState</span><span class="op" id="3980393">,</span>&nbsp;<span class="ident" id="3980395">v</span>&nbsp;<span class="ident" id="3980397">reflect</span><span class="op" id="3980404">.</span><span class="ident" id="3980405">Value</span><span class="op" id="3980410">)</span>&nbsp;<span class="builtintype" id="3980412">bool</span>&nbsp;<span class="op" id="3980417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3980420">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980461">if</span>&nbsp;<span class="op" id="3980464">!</span><span class="ident" id="3980465">v</span><span class="op" id="3980466">.</span><span class="ident" id="3980467">CanAddr</span><span class="op" id="3980474">(</span><span class="op" id="3980475">)</span>&nbsp;<span class="op" id="3980477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980481">return</span>&nbsp;<span class="builtintype" id="3980488">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980498">return</span>&nbsp;<span class="ident" id="3980505">encIntSlice</span><span class="op" id="3980516">(</span><span class="ident" id="3980517">state</span><span class="op" id="3980522">,</span>&nbsp;<span class="ident" id="3980524">v</span><span class="op" id="3980525">.</span><span class="ident" id="3980526">Slice</span><span class="op" id="3980531">(</span><span class="num" id="3980532">0</span><span class="op" id="3980533">,</span>&nbsp;<span class="ident" id="3980535">v</span><span class="op" id="3980536">.</span><span class="ident" id="3980537">Len</span><span class="op" id="3980540">(</span><span class="op" id="3980541">)</span><span class="op" id="3980542">)</span><span class="op" id="3980543">)</span><br>
<span class="lineno"></span><span class="op" id="3980545">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="3980548">func</span>&nbsp;<span class="ident" id="3980553">encIntSlice</span><span class="op" id="3980564">(</span><span class="ident" id="3980565">state</span>&nbsp;<span class="op" id="3980571">*</span><span class="ident" id="3980572">encoderState</span><span class="op" id="3980584">,</span>&nbsp;<span class="ident" id="3980586">v</span>&nbsp;<span class="ident" id="3980588">reflect</span><span class="op" id="3980595">.</span><span class="ident" id="3980596">Value</span><span class="op" id="3980601">)</span>&nbsp;<span class="builtintype" id="3980603">bool</span>&nbsp;<span class="op" id="3980608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3980611">slice</span><span class="op" id="3980616">,</span>&nbsp;<span class="ident" id="3980618">ok</span>&nbsp;<span class="op" id="3980621">:=</span>&nbsp;<span class="ident" id="3980624">v</span><span class="op" id="3980625">.</span><span class="ident" id="3980626">Interface</span><span class="op" id="3980635">(</span><span class="op" id="3980636">)</span><span class="op" id="3980637">.</span><span class="op" id="3980638">(</span><span class="op" id="3980639">[</span><span class="op" id="3980640">]</span><span class="builtintype" id="3980641">int</span><span class="op" id="3980644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980647">if</span>&nbsp;<span class="op" id="3980650">!</span><span class="ident" id="3980651">ok</span>&nbsp;<span class="op" id="3980654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3980658">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int&nbsp;but&nbsp;not&nbsp;type&nbsp;int.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980731">return</span>&nbsp;<span class="builtintype" id="3980738">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980748">for</span>&nbsp;<span class="ident" id="3980752">_</span><span class="op" id="3980753">,</span>&nbsp;<span class="ident" id="3980755">x</span>&nbsp;<span class="op" id="3980757">:=</span>&nbsp;<span class="keyword" id="3980760">range</span>&nbsp;<span class="ident" id="3980766">slice</span>&nbsp;<span class="op" id="3980772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980776">if</span>&nbsp;<span class="ident" id="3980779">x</span>&nbsp;<span class="op" id="3980781">!=</span>&nbsp;<span class="num" id="3980784">0</span>&nbsp;<span class="op" id="3980786">||</span>&nbsp;<span class="ident" id="3980789">state</span><span class="op" id="3980794">.</span><span class="ident" id="3980795">sendZero</span>&nbsp;<span class="op" id="3980804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3980809">state</span><span class="op" id="3980814">.</span><span class="ident" id="3980815">encodeInt</span><span class="op" id="3980824">(</span><span class="ident" id="3980825">int64</span><span class="op" id="3980830">(</span><span class="ident" id="3980831">x</span><span class="op" id="3980832">)</span><span class="op" id="3980833">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980843">return</span>&nbsp;<span class="builtintype" id="3980850">true</span><br>
<span class="lineno"></span><span class="op" id="3980855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="3980858">func</span>&nbsp;<span class="ident" id="3980863">encInt16Array</span><span class="op" id="3980876">(</span><span class="ident" id="3980877">state</span>&nbsp;<span class="op" id="3980883">*</span><span class="ident" id="3980884">encoderState</span><span class="op" id="3980896">,</span>&nbsp;<span class="ident" id="3980898">v</span>&nbsp;<span class="ident" id="3980900">reflect</span><span class="op" id="3980907">.</span><span class="ident" id="3980908">Value</span><span class="op" id="3980913">)</span>&nbsp;<span class="builtintype" id="3980915">bool</span>&nbsp;<span class="op" id="3980920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3980923">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980964">if</span>&nbsp;<span class="op" id="3980967">!</span><span class="ident" id="3980968">v</span><span class="op" id="3980969">.</span><span class="ident" id="3980970">CanAddr</span><span class="op" id="3980977">(</span><span class="op" id="3980978">)</span>&nbsp;<span class="op" id="3980980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3980984">return</span>&nbsp;<span class="builtintype" id="3980991">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3980998">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981001">return</span>&nbsp;<span class="ident" id="3981008">encInt16Slice</span><span class="op" id="3981021">(</span><span class="ident" id="3981022">state</span><span class="op" id="3981027">,</span>&nbsp;<span class="ident" id="3981029">v</span><span class="op" id="3981030">.</span><span class="ident" id="3981031">Slice</span><span class="op" id="3981036">(</span><span class="num" id="3981037">0</span><span class="op" id="3981038">,</span>&nbsp;<span class="ident" id="3981040">v</span><span class="op" id="3981041">.</span><span class="ident" id="3981042">Len</span><span class="op" id="3981045">(</span><span class="op" id="3981046">)</span><span class="op" id="3981047">)</span><span class="op" id="3981048">)</span><br>
<span class="lineno"></span><span class="op" id="3981050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3981053">func</span>&nbsp;<span class="ident" id="3981058">encInt16Slice</span><span class="op" id="3981071">(</span><span class="ident" id="3981072">state</span>&nbsp;<span class="op" id="3981078">*</span><span class="ident" id="3981079">encoderState</span><span class="op" id="3981091">,</span>&nbsp;<span class="ident" id="3981093">v</span>&nbsp;<span class="ident" id="3981095">reflect</span><span class="op" id="3981102">.</span><span class="ident" id="3981103">Value</span><span class="op" id="3981108">)</span>&nbsp;<span class="builtintype" id="3981110">bool</span>&nbsp;<span class="op" id="3981115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3981118">slice</span><span class="op" id="3981123">,</span>&nbsp;<span class="ident" id="3981125">ok</span>&nbsp;<span class="op" id="3981128">:=</span>&nbsp;<span class="ident" id="3981131">v</span><span class="op" id="3981132">.</span><span class="ident" id="3981133">Interface</span><span class="op" id="3981142">(</span><span class="op" id="3981143">)</span><span class="op" id="3981144">.</span><span class="op" id="3981145">(</span><span class="op" id="3981146">[</span><span class="op" id="3981147">]</span><span class="builtintype" id="3981148">int16</span><span class="op" id="3981153">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981156">if</span>&nbsp;<span class="op" id="3981159">!</span><span class="ident" id="3981160">ok</span>&nbsp;<span class="op" id="3981163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3981167">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int16&nbsp;but&nbsp;not&nbsp;type&nbsp;int16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981244">return</span>&nbsp;<span class="builtintype" id="3981251">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981261">for</span>&nbsp;<span class="ident" id="3981265">_</span><span class="op" id="3981266">,</span>&nbsp;<span class="ident" id="3981268">x</span>&nbsp;<span class="op" id="3981270">:=</span>&nbsp;<span class="keyword" id="3981273">range</span>&nbsp;<span class="ident" id="3981279">slice</span>&nbsp;<span class="op" id="3981285">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981289">if</span>&nbsp;<span class="ident" id="3981292">x</span>&nbsp;<span class="op" id="3981294">!=</span>&nbsp;<span class="num" id="3981297">0</span>&nbsp;<span class="op" id="3981299">||</span>&nbsp;<span class="ident" id="3981302">state</span><span class="op" id="3981307">.</span><span class="ident" id="3981308">sendZero</span>&nbsp;<span class="op" id="3981317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3981322">state</span><span class="op" id="3981327">.</span><span class="ident" id="3981328">encodeInt</span><span class="op" id="3981337">(</span><span class="ident" id="3981338">int64</span><span class="op" id="3981343">(</span><span class="ident" id="3981344">x</span><span class="op" id="3981345">)</span><span class="op" id="3981346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981356">return</span>&nbsp;<span class="builtintype" id="3981363">true</span><br>
<span class="lineno">215</span><span class="op" id="3981368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3981371">func</span>&nbsp;<span class="ident" id="3981376">encInt32Array</span><span class="op" id="3981389">(</span><span class="ident" id="3981390">state</span>&nbsp;<span class="op" id="3981396">*</span><span class="ident" id="3981397">encoderState</span><span class="op" id="3981409">,</span>&nbsp;<span class="ident" id="3981411">v</span>&nbsp;<span class="ident" id="3981413">reflect</span><span class="op" id="3981420">.</span><span class="ident" id="3981421">Value</span><span class="op" id="3981426">)</span>&nbsp;<span class="builtintype" id="3981428">bool</span>&nbsp;<span class="op" id="3981433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3981436">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981477">if</span>&nbsp;<span class="op" id="3981480">!</span><span class="ident" id="3981481">v</span><span class="op" id="3981482">.</span><span class="ident" id="3981483">CanAddr</span><span class="op" id="3981490">(</span><span class="op" id="3981491">)</span>&nbsp;<span class="op" id="3981493">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981497">return</span>&nbsp;<span class="builtintype" id="3981504">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981514">return</span>&nbsp;<span class="ident" id="3981521">encInt32Slice</span><span class="op" id="3981534">(</span><span class="ident" id="3981535">state</span><span class="op" id="3981540">,</span>&nbsp;<span class="ident" id="3981542">v</span><span class="op" id="3981543">.</span><span class="ident" id="3981544">Slice</span><span class="op" id="3981549">(</span><span class="num" id="3981550">0</span><span class="op" id="3981551">,</span>&nbsp;<span class="ident" id="3981553">v</span><span class="op" id="3981554">.</span><span class="ident" id="3981555">Len</span><span class="op" id="3981558">(</span><span class="op" id="3981559">)</span><span class="op" id="3981560">)</span><span class="op" id="3981561">)</span><br>
<span class="lineno"></span><span class="op" id="3981563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="3981566">func</span>&nbsp;<span class="ident" id="3981571">encInt32Slice</span><span class="op" id="3981584">(</span><span class="ident" id="3981585">state</span>&nbsp;<span class="op" id="3981591">*</span><span class="ident" id="3981592">encoderState</span><span class="op" id="3981604">,</span>&nbsp;<span class="ident" id="3981606">v</span>&nbsp;<span class="ident" id="3981608">reflect</span><span class="op" id="3981615">.</span><span class="ident" id="3981616">Value</span><span class="op" id="3981621">)</span>&nbsp;<span class="builtintype" id="3981623">bool</span>&nbsp;<span class="op" id="3981628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3981631">slice</span><span class="op" id="3981636">,</span>&nbsp;<span class="ident" id="3981638">ok</span>&nbsp;<span class="op" id="3981641">:=</span>&nbsp;<span class="ident" id="3981644">v</span><span class="op" id="3981645">.</span><span class="ident" id="3981646">Interface</span><span class="op" id="3981655">(</span><span class="op" id="3981656">)</span><span class="op" id="3981657">.</span><span class="op" id="3981658">(</span><span class="op" id="3981659">[</span><span class="op" id="3981660">]</span><span class="builtintype" id="3981661">int32</span><span class="op" id="3981666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981669">if</span>&nbsp;<span class="op" id="3981672">!</span><span class="ident" id="3981673">ok</span>&nbsp;<span class="op" id="3981676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3981680">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int32&nbsp;but&nbsp;not&nbsp;type&nbsp;int32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981757">return</span>&nbsp;<span class="builtintype" id="3981764">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981774">for</span>&nbsp;<span class="ident" id="3981778">_</span><span class="op" id="3981779">,</span>&nbsp;<span class="ident" id="3981781">x</span>&nbsp;<span class="op" id="3981783">:=</span>&nbsp;<span class="keyword" id="3981786">range</span>&nbsp;<span class="ident" id="3981792">slice</span>&nbsp;<span class="op" id="3981798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981802">if</span>&nbsp;<span class="ident" id="3981805">x</span>&nbsp;<span class="op" id="3981807">!=</span>&nbsp;<span class="num" id="3981810">0</span>&nbsp;<span class="op" id="3981812">||</span>&nbsp;<span class="ident" id="3981815">state</span><span class="op" id="3981820">.</span><span class="ident" id="3981821">sendZero</span>&nbsp;<span class="op" id="3981830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3981835">state</span><span class="op" id="3981840">.</span><span class="ident" id="3981841">encodeInt</span><span class="op" id="3981850">(</span><span class="ident" id="3981851">int64</span><span class="op" id="3981856">(</span><span class="ident" id="3981857">x</span><span class="op" id="3981858">)</span><span class="op" id="3981859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981863">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3981866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981869">return</span>&nbsp;<span class="builtintype" id="3981876">true</span><br>
<span class="lineno"></span><span class="op" id="3981881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3981884">func</span>&nbsp;<span class="ident" id="3981889">encInt64Array</span><span class="op" id="3981902">(</span><span class="ident" id="3981903">state</span>&nbsp;<span class="op" id="3981909">*</span><span class="ident" id="3981910">encoderState</span><span class="op" id="3981922">,</span>&nbsp;<span class="ident" id="3981924">v</span>&nbsp;<span class="ident" id="3981926">reflect</span><span class="op" id="3981933">.</span><span class="ident" id="3981934">Value</span><span class="op" id="3981939">)</span>&nbsp;<span class="builtintype" id="3981941">bool</span>&nbsp;<span class="op" id="3981946">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3981949">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3981990">if</span>&nbsp;<span class="op" id="3981993">!</span><span class="ident" id="3981994">v</span><span class="op" id="3981995">.</span><span class="ident" id="3981996">CanAddr</span><span class="op" id="3982003">(</span><span class="op" id="3982004">)</span>&nbsp;<span class="op" id="3982006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982010">return</span>&nbsp;<span class="builtintype" id="3982017">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982027">return</span>&nbsp;<span class="ident" id="3982034">encInt64Slice</span><span class="op" id="3982047">(</span><span class="ident" id="3982048">state</span><span class="op" id="3982053">,</span>&nbsp;<span class="ident" id="3982055">v</span><span class="op" id="3982056">.</span><span class="ident" id="3982057">Slice</span><span class="op" id="3982062">(</span><span class="num" id="3982063">0</span><span class="op" id="3982064">,</span>&nbsp;<span class="ident" id="3982066">v</span><span class="op" id="3982067">.</span><span class="ident" id="3982068">Len</span><span class="op" id="3982071">(</span><span class="op" id="3982072">)</span><span class="op" id="3982073">)</span><span class="op" id="3982074">)</span><br>
<span class="lineno">245</span><span class="op" id="3982076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3982079">func</span>&nbsp;<span class="ident" id="3982084">encInt64Slice</span><span class="op" id="3982097">(</span><span class="ident" id="3982098">state</span>&nbsp;<span class="op" id="3982104">*</span><span class="ident" id="3982105">encoderState</span><span class="op" id="3982117">,</span>&nbsp;<span class="ident" id="3982119">v</span>&nbsp;<span class="ident" id="3982121">reflect</span><span class="op" id="3982128">.</span><span class="ident" id="3982129">Value</span><span class="op" id="3982134">)</span>&nbsp;<span class="builtintype" id="3982136">bool</span>&nbsp;<span class="op" id="3982141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3982144">slice</span><span class="op" id="3982149">,</span>&nbsp;<span class="ident" id="3982151">ok</span>&nbsp;<span class="op" id="3982154">:=</span>&nbsp;<span class="ident" id="3982157">v</span><span class="op" id="3982158">.</span><span class="ident" id="3982159">Interface</span><span class="op" id="3982168">(</span><span class="op" id="3982169">)</span><span class="op" id="3982170">.</span><span class="op" id="3982171">(</span><span class="op" id="3982172">[</span><span class="op" id="3982173">]</span><span class="ident" id="3982174">int64</span><span class="op" id="3982179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982182">if</span>&nbsp;<span class="op" id="3982185">!</span><span class="ident" id="3982186">ok</span>&nbsp;<span class="op" id="3982189">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3982193">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int64&nbsp;but&nbsp;not&nbsp;type&nbsp;int64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982270">return</span>&nbsp;<span class="builtintype" id="3982277">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982287">for</span>&nbsp;<span class="ident" id="3982291">_</span><span class="op" id="3982292">,</span>&nbsp;<span class="ident" id="3982294">x</span>&nbsp;<span class="op" id="3982296">:=</span>&nbsp;<span class="keyword" id="3982299">range</span>&nbsp;<span class="ident" id="3982305">slice</span>&nbsp;<span class="op" id="3982311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982315">if</span>&nbsp;<span class="ident" id="3982318">x</span>&nbsp;<span class="op" id="3982320">!=</span>&nbsp;<span class="num" id="3982323">0</span>&nbsp;<span class="op" id="3982325">||</span>&nbsp;<span class="ident" id="3982328">state</span><span class="op" id="3982333">.</span><span class="ident" id="3982334">sendZero</span>&nbsp;<span class="op" id="3982343">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3982348">state</span><span class="op" id="3982353">.</span><span class="ident" id="3982354">encodeInt</span><span class="op" id="3982363">(</span><span class="ident" id="3982364">x</span><span class="op" id="3982365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982375">return</span>&nbsp;<span class="builtintype" id="3982382">true</span><br>
<span class="lineno"></span><span class="op" id="3982387">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="3982390">func</span>&nbsp;<span class="ident" id="3982395">encInt8Array</span><span class="op" id="3982407">(</span><span class="ident" id="3982408">state</span>&nbsp;<span class="op" id="3982414">*</span><span class="ident" id="3982415">encoderState</span><span class="op" id="3982427">,</span>&nbsp;<span class="ident" id="3982429">v</span>&nbsp;<span class="ident" id="3982431">reflect</span><span class="op" id="3982438">.</span><span class="ident" id="3982439">Value</span><span class="op" id="3982444">)</span>&nbsp;<span class="builtintype" id="3982446">bool</span>&nbsp;<span class="op" id="3982451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3982454">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982495">if</span>&nbsp;<span class="op" id="3982498">!</span><span class="ident" id="3982499">v</span><span class="op" id="3982500">.</span><span class="ident" id="3982501">CanAddr</span><span class="op" id="3982508">(</span><span class="op" id="3982509">)</span>&nbsp;<span class="op" id="3982511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982515">return</span>&nbsp;<span class="builtintype" id="3982522">false</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982532">return</span>&nbsp;<span class="ident" id="3982539">encInt8Slice</span><span class="op" id="3982551">(</span><span class="ident" id="3982552">state</span><span class="op" id="3982557">,</span>&nbsp;<span class="ident" id="3982559">v</span><span class="op" id="3982560">.</span><span class="ident" id="3982561">Slice</span><span class="op" id="3982566">(</span><span class="num" id="3982567">0</span><span class="op" id="3982568">,</span>&nbsp;<span class="ident" id="3982570">v</span><span class="op" id="3982571">.</span><span class="ident" id="3982572">Len</span><span class="op" id="3982575">(</span><span class="op" id="3982576">)</span><span class="op" id="3982577">)</span><span class="op" id="3982578">)</span><br>
<span class="lineno"></span><span class="op" id="3982580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3982583">func</span>&nbsp;<span class="ident" id="3982588">encInt8Slice</span><span class="op" id="3982600">(</span><span class="ident" id="3982601">state</span>&nbsp;<span class="op" id="3982607">*</span><span class="ident" id="3982608">encoderState</span><span class="op" id="3982620">,</span>&nbsp;<span class="ident" id="3982622">v</span>&nbsp;<span class="ident" id="3982624">reflect</span><span class="op" id="3982631">.</span><span class="ident" id="3982632">Value</span><span class="op" id="3982637">)</span>&nbsp;<span class="builtintype" id="3982639">bool</span>&nbsp;<span class="op" id="3982644">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3982647">slice</span><span class="op" id="3982652">,</span>&nbsp;<span class="ident" id="3982654">ok</span>&nbsp;<span class="op" id="3982657">:=</span>&nbsp;<span class="ident" id="3982660">v</span><span class="op" id="3982661">.</span><span class="ident" id="3982662">Interface</span><span class="op" id="3982671">(</span><span class="op" id="3982672">)</span><span class="op" id="3982673">.</span><span class="op" id="3982674">(</span><span class="op" id="3982675">[</span><span class="op" id="3982676">]</span><span class="builtintype" id="3982677">int8</span><span class="op" id="3982681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982684">if</span>&nbsp;<span class="op" id="3982687">!</span><span class="ident" id="3982688">ok</span>&nbsp;<span class="op" id="3982691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3982695">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int8&nbsp;but&nbsp;not&nbsp;type&nbsp;int8.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982770">return</span>&nbsp;<span class="builtintype" id="3982777">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982784">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982787">for</span>&nbsp;<span class="ident" id="3982791">_</span><span class="op" id="3982792">,</span>&nbsp;<span class="ident" id="3982794">x</span>&nbsp;<span class="op" id="3982796">:=</span>&nbsp;<span class="keyword" id="3982799">range</span>&nbsp;<span class="ident" id="3982805">slice</span>&nbsp;<span class="op" id="3982811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982815">if</span>&nbsp;<span class="ident" id="3982818">x</span>&nbsp;<span class="op" id="3982820">!=</span>&nbsp;<span class="num" id="3982823">0</span>&nbsp;<span class="op" id="3982825">||</span>&nbsp;<span class="ident" id="3982828">state</span><span class="op" id="3982833">.</span><span class="ident" id="3982834">sendZero</span>&nbsp;<span class="op" id="3982843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3982848">state</span><span class="op" id="3982853">.</span><span class="ident" id="3982854">encodeInt</span><span class="op" id="3982863">(</span><span class="ident" id="3982864">int64</span><span class="op" id="3982869">(</span><span class="ident" id="3982870">x</span><span class="op" id="3982871">)</span><span class="op" id="3982872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3982879">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3982882">return</span>&nbsp;<span class="builtintype" id="3982889">true</span><br>
<span class="lineno"></span><span class="op" id="3982894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3982897">func</span>&nbsp;<span class="ident" id="3982902">encStringArray</span><span class="op" id="3982916">(</span><span class="ident" id="3982917">state</span>&nbsp;<span class="op" id="3982923">*</span><span class="ident" id="3982924">encoderState</span><span class="op" id="3982936">,</span>&nbsp;<span class="ident" id="3982938">v</span>&nbsp;<span class="ident" id="3982940">reflect</span><span class="op" id="3982947">.</span><span class="ident" id="3982948">Value</span><span class="op" id="3982953">)</span>&nbsp;<span class="builtintype" id="3982955">bool</span>&nbsp;<span class="op" id="3982960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3982963">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983004">if</span>&nbsp;<span class="op" id="3983007">!</span><span class="ident" id="3983008">v</span><span class="op" id="3983009">.</span><span class="ident" id="3983010">CanAddr</span><span class="op" id="3983017">(</span><span class="op" id="3983018">)</span>&nbsp;<span class="op" id="3983020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983024">return</span>&nbsp;<span class="builtintype" id="3983031">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983041">return</span>&nbsp;<span class="ident" id="3983048">encStringSlice</span><span class="op" id="3983062">(</span><span class="ident" id="3983063">state</span><span class="op" id="3983068">,</span>&nbsp;<span class="ident" id="3983070">v</span><span class="op" id="3983071">.</span><span class="ident" id="3983072">Slice</span><span class="op" id="3983077">(</span><span class="num" id="3983078">0</span><span class="op" id="3983079">,</span>&nbsp;<span class="ident" id="3983081">v</span><span class="op" id="3983082">.</span><span class="ident" id="3983083">Len</span><span class="op" id="3983086">(</span><span class="op" id="3983087">)</span><span class="op" id="3983088">)</span><span class="op" id="3983089">)</span><br>
<span class="lineno"></span><span class="op" id="3983091">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="3983094">func</span>&nbsp;<span class="ident" id="3983099">encStringSlice</span><span class="op" id="3983113">(</span><span class="ident" id="3983114">state</span>&nbsp;<span class="op" id="3983120">*</span><span class="ident" id="3983121">encoderState</span><span class="op" id="3983133">,</span>&nbsp;<span class="ident" id="3983135">v</span>&nbsp;<span class="ident" id="3983137">reflect</span><span class="op" id="3983144">.</span><span class="ident" id="3983145">Value</span><span class="op" id="3983150">)</span>&nbsp;<span class="builtintype" id="3983152">bool</span>&nbsp;<span class="op" id="3983157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3983160">slice</span><span class="op" id="3983165">,</span>&nbsp;<span class="ident" id="3983167">ok</span>&nbsp;<span class="op" id="3983170">:=</span>&nbsp;<span class="ident" id="3983173">v</span><span class="op" id="3983174">.</span><span class="ident" id="3983175">Interface</span><span class="op" id="3983184">(</span><span class="op" id="3983185">)</span><span class="op" id="3983186">.</span><span class="op" id="3983187">(</span><span class="op" id="3983188">[</span><span class="op" id="3983189">]</span><span class="builtintype" id="3983190">string</span><span class="op" id="3983196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983199">if</span>&nbsp;<span class="op" id="3983202">!</span><span class="ident" id="3983203">ok</span>&nbsp;<span class="op" id="3983206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3983210">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;string&nbsp;but&nbsp;not&nbsp;type&nbsp;string.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983289">return</span>&nbsp;<span class="builtintype" id="3983296">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983306">for</span>&nbsp;<span class="ident" id="3983310">_</span><span class="op" id="3983311">,</span>&nbsp;<span class="ident" id="3983313">x</span>&nbsp;<span class="op" id="3983315">:=</span>&nbsp;<span class="keyword" id="3983318">range</span>&nbsp;<span class="ident" id="3983324">slice</span>&nbsp;<span class="op" id="3983330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983334">if</span>&nbsp;<span class="ident" id="3983337">x</span>&nbsp;<span class="op" id="3983339">!=</span>&nbsp;<span class="string" id="3983342">&#34;&#34;</span>&nbsp;<span class="op" id="3983345">||</span>&nbsp;<span class="ident" id="3983348">state</span><span class="op" id="3983353">.</span><span class="ident" id="3983354">sendZero</span>&nbsp;<span class="op" id="3983363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3983368">state</span><span class="op" id="3983373">.</span><span class="ident" id="3983374">encodeUint</span><span class="op" id="3983384">(</span><span class="ident" id="3983385">uint64</span><span class="op" id="3983391">(</span><span class="builtinfunc" id="3983392">len</span><span class="op" id="3983395">(</span><span class="ident" id="3983396">x</span><span class="op" id="3983397">)</span><span class="op" id="3983398">)</span><span class="op" id="3983399">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3983404">state</span><span class="op" id="3983409">.</span><span class="ident" id="3983410">b</span><span class="op" id="3983411">.</span><span class="ident" id="3983412">WriteString</span><span class="op" id="3983423">(</span><span class="ident" id="3983424">x</span><span class="op" id="3983425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983435">return</span>&nbsp;<span class="builtintype" id="3983442">true</span><br>
<span class="lineno"></span><span class="op" id="3983447">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="3983450">func</span>&nbsp;<span class="ident" id="3983455">encUintArray</span><span class="op" id="3983467">(</span><span class="ident" id="3983468">state</span>&nbsp;<span class="op" id="3983474">*</span><span class="ident" id="3983475">encoderState</span><span class="op" id="3983487">,</span>&nbsp;<span class="ident" id="3983489">v</span>&nbsp;<span class="ident" id="3983491">reflect</span><span class="op" id="3983498">.</span><span class="ident" id="3983499">Value</span><span class="op" id="3983504">)</span>&nbsp;<span class="builtintype" id="3983506">bool</span>&nbsp;<span class="op" id="3983511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3983514">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983555">if</span>&nbsp;<span class="op" id="3983558">!</span><span class="ident" id="3983559">v</span><span class="op" id="3983560">.</span><span class="ident" id="3983561">CanAddr</span><span class="op" id="3983568">(</span><span class="op" id="3983569">)</span>&nbsp;<span class="op" id="3983571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983575">return</span>&nbsp;<span class="builtintype" id="3983582">false</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983592">return</span>&nbsp;<span class="ident" id="3983599">encUintSlice</span><span class="op" id="3983611">(</span><span class="ident" id="3983612">state</span><span class="op" id="3983617">,</span>&nbsp;<span class="ident" id="3983619">v</span><span class="op" id="3983620">.</span><span class="ident" id="3983621">Slice</span><span class="op" id="3983626">(</span><span class="num" id="3983627">0</span><span class="op" id="3983628">,</span>&nbsp;<span class="ident" id="3983630">v</span><span class="op" id="3983631">.</span><span class="ident" id="3983632">Len</span><span class="op" id="3983635">(</span><span class="op" id="3983636">)</span><span class="op" id="3983637">)</span><span class="op" id="3983638">)</span><br>
<span class="lineno"></span><span class="op" id="3983640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3983643">func</span>&nbsp;<span class="ident" id="3983648">encUintSlice</span><span class="op" id="3983660">(</span><span class="ident" id="3983661">state</span>&nbsp;<span class="op" id="3983667">*</span><span class="ident" id="3983668">encoderState</span><span class="op" id="3983680">,</span>&nbsp;<span class="ident" id="3983682">v</span>&nbsp;<span class="ident" id="3983684">reflect</span><span class="op" id="3983691">.</span><span class="ident" id="3983692">Value</span><span class="op" id="3983697">)</span>&nbsp;<span class="builtintype" id="3983699">bool</span>&nbsp;<span class="op" id="3983704">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3983707">slice</span><span class="op" id="3983712">,</span>&nbsp;<span class="ident" id="3983714">ok</span>&nbsp;<span class="op" id="3983717">:=</span>&nbsp;<span class="ident" id="3983720">v</span><span class="op" id="3983721">.</span><span class="ident" id="3983722">Interface</span><span class="op" id="3983731">(</span><span class="op" id="3983732">)</span><span class="op" id="3983733">.</span><span class="op" id="3983734">(</span><span class="op" id="3983735">[</span><span class="op" id="3983736">]</span><span class="builtintype" id="3983737">uint</span><span class="op" id="3983741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983744">if</span>&nbsp;<span class="op" id="3983747">!</span><span class="ident" id="3983748">ok</span>&nbsp;<span class="op" id="3983751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3983755">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint&nbsp;but&nbsp;not&nbsp;type&nbsp;uint.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983830">return</span>&nbsp;<span class="builtintype" id="3983837">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983844">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983847">for</span>&nbsp;<span class="ident" id="3983851">_</span><span class="op" id="3983852">,</span>&nbsp;<span class="ident" id="3983854">x</span>&nbsp;<span class="op" id="3983856">:=</span>&nbsp;<span class="keyword" id="3983859">range</span>&nbsp;<span class="ident" id="3983865">slice</span>&nbsp;<span class="op" id="3983871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983875">if</span>&nbsp;<span class="ident" id="3983878">x</span>&nbsp;<span class="op" id="3983880">!=</span>&nbsp;<span class="num" id="3983883">0</span>&nbsp;<span class="op" id="3983885">||</span>&nbsp;<span class="ident" id="3983888">state</span><span class="op" id="3983893">.</span><span class="ident" id="3983894">sendZero</span>&nbsp;<span class="op" id="3983903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3983908">state</span><span class="op" id="3983913">.</span><span class="ident" id="3983914">encodeUint</span><span class="op" id="3983924">(</span><span class="ident" id="3983925">uint64</span><span class="op" id="3983931">(</span><span class="ident" id="3983932">x</span><span class="op" id="3983933">)</span><span class="op" id="3983934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3983941">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3983944">return</span>&nbsp;<span class="builtintype" id="3983951">true</span><br>
<span class="lineno"></span><span class="op" id="3983956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3983959">func</span>&nbsp;<span class="ident" id="3983964">encUint16Array</span><span class="op" id="3983978">(</span><span class="ident" id="3983979">state</span>&nbsp;<span class="op" id="3983985">*</span><span class="ident" id="3983986">encoderState</span><span class="op" id="3983998">,</span>&nbsp;<span class="ident" id="3984000">v</span>&nbsp;<span class="ident" id="3984002">reflect</span><span class="op" id="3984009">.</span><span class="ident" id="3984010">Value</span><span class="op" id="3984015">)</span>&nbsp;<span class="builtintype" id="3984017">bool</span>&nbsp;<span class="op" id="3984022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3984025">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984066">if</span>&nbsp;<span class="op" id="3984069">!</span><span class="ident" id="3984070">v</span><span class="op" id="3984071">.</span><span class="ident" id="3984072">CanAddr</span><span class="op" id="3984079">(</span><span class="op" id="3984080">)</span>&nbsp;<span class="op" id="3984082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984086">return</span>&nbsp;<span class="builtintype" id="3984093">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984103">return</span>&nbsp;<span class="ident" id="3984110">encUint16Slice</span><span class="op" id="3984124">(</span><span class="ident" id="3984125">state</span><span class="op" id="3984130">,</span>&nbsp;<span class="ident" id="3984132">v</span><span class="op" id="3984133">.</span><span class="ident" id="3984134">Slice</span><span class="op" id="3984139">(</span><span class="num" id="3984140">0</span><span class="op" id="3984141">,</span>&nbsp;<span class="ident" id="3984143">v</span><span class="op" id="3984144">.</span><span class="ident" id="3984145">Len</span><span class="op" id="3984148">(</span><span class="op" id="3984149">)</span><span class="op" id="3984150">)</span><span class="op" id="3984151">)</span><br>
<span class="lineno"></span><span class="op" id="3984153">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="3984156">func</span>&nbsp;<span class="ident" id="3984161">encUint16Slice</span><span class="op" id="3984175">(</span><span class="ident" id="3984176">state</span>&nbsp;<span class="op" id="3984182">*</span><span class="ident" id="3984183">encoderState</span><span class="op" id="3984195">,</span>&nbsp;<span class="ident" id="3984197">v</span>&nbsp;<span class="ident" id="3984199">reflect</span><span class="op" id="3984206">.</span><span class="ident" id="3984207">Value</span><span class="op" id="3984212">)</span>&nbsp;<span class="builtintype" id="3984214">bool</span>&nbsp;<span class="op" id="3984219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3984222">slice</span><span class="op" id="3984227">,</span>&nbsp;<span class="ident" id="3984229">ok</span>&nbsp;<span class="op" id="3984232">:=</span>&nbsp;<span class="ident" id="3984235">v</span><span class="op" id="3984236">.</span><span class="ident" id="3984237">Interface</span><span class="op" id="3984246">(</span><span class="op" id="3984247">)</span><span class="op" id="3984248">.</span><span class="op" id="3984249">(</span><span class="op" id="3984250">[</span><span class="op" id="3984251">]</span><span class="builtintype" id="3984252">uint16</span><span class="op" id="3984258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984261">if</span>&nbsp;<span class="op" id="3984264">!</span><span class="ident" id="3984265">ok</span>&nbsp;<span class="op" id="3984268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3984272">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint16&nbsp;but&nbsp;not&nbsp;type&nbsp;uint16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984351">return</span>&nbsp;<span class="builtintype" id="3984358">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984368">for</span>&nbsp;<span class="ident" id="3984372">_</span><span class="op" id="3984373">,</span>&nbsp;<span class="ident" id="3984375">x</span>&nbsp;<span class="op" id="3984377">:=</span>&nbsp;<span class="keyword" id="3984380">range</span>&nbsp;<span class="ident" id="3984386">slice</span>&nbsp;<span class="op" id="3984392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984396">if</span>&nbsp;<span class="ident" id="3984399">x</span>&nbsp;<span class="op" id="3984401">!=</span>&nbsp;<span class="num" id="3984404">0</span>&nbsp;<span class="op" id="3984406">||</span>&nbsp;<span class="ident" id="3984409">state</span><span class="op" id="3984414">.</span><span class="ident" id="3984415">sendZero</span>&nbsp;<span class="op" id="3984424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3984429">state</span><span class="op" id="3984434">.</span><span class="ident" id="3984435">encodeUint</span><span class="op" id="3984445">(</span><span class="ident" id="3984446">uint64</span><span class="op" id="3984452">(</span><span class="ident" id="3984453">x</span><span class="op" id="3984454">)</span><span class="op" id="3984455">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984465">return</span>&nbsp;<span class="builtintype" id="3984472">true</span><br>
<span class="lineno"></span><span class="op" id="3984477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="3984480">func</span>&nbsp;<span class="ident" id="3984485">encUint32Array</span><span class="op" id="3984499">(</span><span class="ident" id="3984500">state</span>&nbsp;<span class="op" id="3984506">*</span><span class="ident" id="3984507">encoderState</span><span class="op" id="3984519">,</span>&nbsp;<span class="ident" id="3984521">v</span>&nbsp;<span class="ident" id="3984523">reflect</span><span class="op" id="3984530">.</span><span class="ident" id="3984531">Value</span><span class="op" id="3984536">)</span>&nbsp;<span class="builtintype" id="3984538">bool</span>&nbsp;<span class="op" id="3984543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3984546">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984587">if</span>&nbsp;<span class="op" id="3984590">!</span><span class="ident" id="3984591">v</span><span class="op" id="3984592">.</span><span class="ident" id="3984593">CanAddr</span><span class="op" id="3984600">(</span><span class="op" id="3984601">)</span>&nbsp;<span class="op" id="3984603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984607">return</span>&nbsp;<span class="builtintype" id="3984614">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984621">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984624">return</span>&nbsp;<span class="ident" id="3984631">encUint32Slice</span><span class="op" id="3984645">(</span><span class="ident" id="3984646">state</span><span class="op" id="3984651">,</span>&nbsp;<span class="ident" id="3984653">v</span><span class="op" id="3984654">.</span><span class="ident" id="3984655">Slice</span><span class="op" id="3984660">(</span><span class="num" id="3984661">0</span><span class="op" id="3984662">,</span>&nbsp;<span class="ident" id="3984664">v</span><span class="op" id="3984665">.</span><span class="ident" id="3984666">Len</span><span class="op" id="3984669">(</span><span class="op" id="3984670">)</span><span class="op" id="3984671">)</span><span class="op" id="3984672">)</span><br>
<span class="lineno"></span><span class="op" id="3984674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3984677">func</span>&nbsp;<span class="ident" id="3984682">encUint32Slice</span><span class="op" id="3984696">(</span><span class="ident" id="3984697">state</span>&nbsp;<span class="op" id="3984703">*</span><span class="ident" id="3984704">encoderState</span><span class="op" id="3984716">,</span>&nbsp;<span class="ident" id="3984718">v</span>&nbsp;<span class="ident" id="3984720">reflect</span><span class="op" id="3984727">.</span><span class="ident" id="3984728">Value</span><span class="op" id="3984733">)</span>&nbsp;<span class="builtintype" id="3984735">bool</span>&nbsp;<span class="op" id="3984740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3984743">slice</span><span class="op" id="3984748">,</span>&nbsp;<span class="ident" id="3984750">ok</span>&nbsp;<span class="op" id="3984753">:=</span>&nbsp;<span class="ident" id="3984756">v</span><span class="op" id="3984757">.</span><span class="ident" id="3984758">Interface</span><span class="op" id="3984767">(</span><span class="op" id="3984768">)</span><span class="op" id="3984769">.</span><span class="op" id="3984770">(</span><span class="op" id="3984771">[</span><span class="op" id="3984772">]</span><span class="builtintype" id="3984773">uint32</span><span class="op" id="3984779">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984782">if</span>&nbsp;<span class="op" id="3984785">!</span><span class="ident" id="3984786">ok</span>&nbsp;<span class="op" id="3984789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3984793">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint32&nbsp;but&nbsp;not&nbsp;type&nbsp;uint32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984872">return</span>&nbsp;<span class="builtintype" id="3984879">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984889">for</span>&nbsp;<span class="ident" id="3984893">_</span><span class="op" id="3984894">,</span>&nbsp;<span class="ident" id="3984896">x</span>&nbsp;<span class="op" id="3984898">:=</span>&nbsp;<span class="keyword" id="3984901">range</span>&nbsp;<span class="ident" id="3984907">slice</span>&nbsp;<span class="op" id="3984913">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984917">if</span>&nbsp;<span class="ident" id="3984920">x</span>&nbsp;<span class="op" id="3984922">!=</span>&nbsp;<span class="num" id="3984925">0</span>&nbsp;<span class="op" id="3984927">||</span>&nbsp;<span class="ident" id="3984930">state</span><span class="op" id="3984935">.</span><span class="ident" id="3984936">sendZero</span>&nbsp;<span class="op" id="3984945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3984950">state</span><span class="op" id="3984955">.</span><span class="ident" id="3984956">encodeUint</span><span class="op" id="3984966">(</span><span class="ident" id="3984967">uint64</span><span class="op" id="3984973">(</span><span class="ident" id="3984974">x</span><span class="op" id="3984975">)</span><span class="op" id="3984976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3984983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3984986">return</span>&nbsp;<span class="builtintype" id="3984993">true</span><br>
<span class="lineno">370</span><span class="op" id="3984998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3985001">func</span>&nbsp;<span class="ident" id="3985006">encUint64Array</span><span class="op" id="3985020">(</span><span class="ident" id="3985021">state</span>&nbsp;<span class="op" id="3985027">*</span><span class="ident" id="3985028">encoderState</span><span class="op" id="3985040">,</span>&nbsp;<span class="ident" id="3985042">v</span>&nbsp;<span class="ident" id="3985044">reflect</span><span class="op" id="3985051">.</span><span class="ident" id="3985052">Value</span><span class="op" id="3985057">)</span>&nbsp;<span class="builtintype" id="3985059">bool</span>&nbsp;<span class="op" id="3985064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3985067">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985108">if</span>&nbsp;<span class="op" id="3985111">!</span><span class="ident" id="3985112">v</span><span class="op" id="3985113">.</span><span class="ident" id="3985114">CanAddr</span><span class="op" id="3985121">(</span><span class="op" id="3985122">)</span>&nbsp;<span class="op" id="3985124">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985128">return</span>&nbsp;<span class="builtintype" id="3985135">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985145">return</span>&nbsp;<span class="ident" id="3985152">encUint64Slice</span><span class="op" id="3985166">(</span><span class="ident" id="3985167">state</span><span class="op" id="3985172">,</span>&nbsp;<span class="ident" id="3985174">v</span><span class="op" id="3985175">.</span><span class="ident" id="3985176">Slice</span><span class="op" id="3985181">(</span><span class="num" id="3985182">0</span><span class="op" id="3985183">,</span>&nbsp;<span class="ident" id="3985185">v</span><span class="op" id="3985186">.</span><span class="ident" id="3985187">Len</span><span class="op" id="3985190">(</span><span class="op" id="3985191">)</span><span class="op" id="3985192">)</span><span class="op" id="3985193">)</span><br>
<span class="lineno"></span><span class="op" id="3985195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3985198">func</span>&nbsp;<span class="ident" id="3985203">encUint64Slice</span><span class="op" id="3985217">(</span><span class="ident" id="3985218">state</span>&nbsp;<span class="op" id="3985224">*</span><span class="ident" id="3985225">encoderState</span><span class="op" id="3985237">,</span>&nbsp;<span class="ident" id="3985239">v</span>&nbsp;<span class="ident" id="3985241">reflect</span><span class="op" id="3985248">.</span><span class="ident" id="3985249">Value</span><span class="op" id="3985254">)</span>&nbsp;<span class="builtintype" id="3985256">bool</span>&nbsp;<span class="op" id="3985261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3985264">slice</span><span class="op" id="3985269">,</span>&nbsp;<span class="ident" id="3985271">ok</span>&nbsp;<span class="op" id="3985274">:=</span>&nbsp;<span class="ident" id="3985277">v</span><span class="op" id="3985278">.</span><span class="ident" id="3985279">Interface</span><span class="op" id="3985288">(</span><span class="op" id="3985289">)</span><span class="op" id="3985290">.</span><span class="op" id="3985291">(</span><span class="op" id="3985292">[</span><span class="op" id="3985293">]</span><span class="ident" id="3985294">uint64</span><span class="op" id="3985300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985303">if</span>&nbsp;<span class="op" id="3985306">!</span><span class="ident" id="3985307">ok</span>&nbsp;<span class="op" id="3985310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3985314">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint64&nbsp;but&nbsp;not&nbsp;type&nbsp;uint64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985393">return</span>&nbsp;<span class="builtintype" id="3985400">false</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985410">for</span>&nbsp;<span class="ident" id="3985414">_</span><span class="op" id="3985415">,</span>&nbsp;<span class="ident" id="3985417">x</span>&nbsp;<span class="op" id="3985419">:=</span>&nbsp;<span class="keyword" id="3985422">range</span>&nbsp;<span class="ident" id="3985428">slice</span>&nbsp;<span class="op" id="3985434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985438">if</span>&nbsp;<span class="ident" id="3985441">x</span>&nbsp;<span class="op" id="3985443">!=</span>&nbsp;<span class="num" id="3985446">0</span>&nbsp;<span class="op" id="3985448">||</span>&nbsp;<span class="ident" id="3985451">state</span><span class="op" id="3985456">.</span><span class="ident" id="3985457">sendZero</span>&nbsp;<span class="op" id="3985466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3985471">state</span><span class="op" id="3985476">.</span><span class="ident" id="3985477">encodeUint</span><span class="op" id="3985487">(</span><span class="ident" id="3985488">x</span><span class="op" id="3985489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985493">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985499">return</span>&nbsp;<span class="builtintype" id="3985506">true</span><br>
<span class="lineno"></span><span class="op" id="3985511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3985514">func</span>&nbsp;<span class="ident" id="3985519">encUintptrArray</span><span class="op" id="3985534">(</span><span class="ident" id="3985535">state</span>&nbsp;<span class="op" id="3985541">*</span><span class="ident" id="3985542">encoderState</span><span class="op" id="3985554">,</span>&nbsp;<span class="ident" id="3985556">v</span>&nbsp;<span class="ident" id="3985558">reflect</span><span class="op" id="3985565">.</span><span class="ident" id="3985566">Value</span><span class="op" id="3985571">)</span>&nbsp;<span class="builtintype" id="3985573">bool</span>&nbsp;<span class="op" id="3985578">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3985581">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985622">if</span>&nbsp;<span class="op" id="3985625">!</span><span class="ident" id="3985626">v</span><span class="op" id="3985627">.</span><span class="ident" id="3985628">CanAddr</span><span class="op" id="3985635">(</span><span class="op" id="3985636">)</span>&nbsp;<span class="op" id="3985638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985642">return</span>&nbsp;<span class="builtintype" id="3985649">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985659">return</span>&nbsp;<span class="ident" id="3985666">encUintptrSlice</span><span class="op" id="3985681">(</span><span class="ident" id="3985682">state</span><span class="op" id="3985687">,</span>&nbsp;<span class="ident" id="3985689">v</span><span class="op" id="3985690">.</span><span class="ident" id="3985691">Slice</span><span class="op" id="3985696">(</span><span class="num" id="3985697">0</span><span class="op" id="3985698">,</span>&nbsp;<span class="ident" id="3985700">v</span><span class="op" id="3985701">.</span><span class="ident" id="3985702">Len</span><span class="op" id="3985705">(</span><span class="op" id="3985706">)</span><span class="op" id="3985707">)</span><span class="op" id="3985708">)</span><br>
<span class="lineno">400</span><span class="op" id="3985710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3985713">func</span>&nbsp;<span class="ident" id="3985718">encUintptrSlice</span><span class="op" id="3985733">(</span><span class="ident" id="3985734">state</span>&nbsp;<span class="op" id="3985740">*</span><span class="ident" id="3985741">encoderState</span><span class="op" id="3985753">,</span>&nbsp;<span class="ident" id="3985755">v</span>&nbsp;<span class="ident" id="3985757">reflect</span><span class="op" id="3985764">.</span><span class="ident" id="3985765">Value</span><span class="op" id="3985770">)</span>&nbsp;<span class="builtintype" id="3985772">bool</span>&nbsp;<span class="op" id="3985777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3985780">slice</span><span class="op" id="3985785">,</span>&nbsp;<span class="ident" id="3985787">ok</span>&nbsp;<span class="op" id="3985790">:=</span>&nbsp;<span class="ident" id="3985793">v</span><span class="op" id="3985794">.</span><span class="ident" id="3985795">Interface</span><span class="op" id="3985804">(</span><span class="op" id="3985805">)</span><span class="op" id="3985806">.</span><span class="op" id="3985807">(</span><span class="op" id="3985808">[</span><span class="op" id="3985809">]</span><span class="builtintype" id="3985810">uintptr</span><span class="op" id="3985817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985820">if</span>&nbsp;<span class="op" id="3985823">!</span><span class="ident" id="3985824">ok</span>&nbsp;<span class="op" id="3985827">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3985831">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uintptr&nbsp;but&nbsp;not&nbsp;type&nbsp;uintptr.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985912">return</span>&nbsp;<span class="builtintype" id="3985919">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3985926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985929">for</span>&nbsp;<span class="ident" id="3985933">_</span><span class="op" id="3985934">,</span>&nbsp;<span class="ident" id="3985936">x</span>&nbsp;<span class="op" id="3985938">:=</span>&nbsp;<span class="keyword" id="3985941">range</span>&nbsp;<span class="ident" id="3985947">slice</span>&nbsp;<span class="op" id="3985953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3985957">if</span>&nbsp;<span class="ident" id="3985960">x</span>&nbsp;<span class="op" id="3985962">!=</span>&nbsp;<span class="num" id="3985965">0</span>&nbsp;<span class="op" id="3985967">||</span>&nbsp;<span class="ident" id="3985970">state</span><span class="op" id="3985975">.</span><span class="ident" id="3985976">sendZero</span>&nbsp;<span class="op" id="3985985">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3985990">state</span><span class="op" id="3985995">.</span><span class="ident" id="3985996">encodeUint</span><span class="op" id="3986006">(</span><span class="ident" id="3986007">uint64</span><span class="op" id="3986013">(</span><span class="ident" id="3986014">x</span><span class="op" id="3986015">)</span><span class="op" id="3986016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3986020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3986023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3986026">return</span>&nbsp;<span class="builtintype" id="3986033">true</span><br>
<span class="lineno"></span><span class="op" id="3986038">}</span>
</div>
</body>
</html>
