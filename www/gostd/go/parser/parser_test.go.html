<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html" class="current">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7052093">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7052148">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7052202">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7052253">package</span>&nbsp;<span class="ident" id="7052261">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7052269">import</span>&nbsp;<span class="op" id="7052276">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052279">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052288">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052295">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052305">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052317">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052323">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052334">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7052344">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7052347">var</span>&nbsp;<span class="ident" id="7052351">fset</span>&nbsp;<span class="op" id="7052356">=</span>&nbsp;<span class="ident" id="7052358">token</span><span class="op" id="7052363">.</span><span class="ident" id="7052364">NewFileSet</span><span class="op" id="7052374">(</span><span class="op" id="7052375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7052378">var</span>&nbsp;<span class="ident" id="7052382">validFiles</span>&nbsp;<span class="op" id="7052393">=</span>&nbsp;<span class="op" id="7052395">[</span><span class="op" id="7052396">]</span><span class="builtintype" id="7052397">string</span><span class="op" id="7052403">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052406">&#34;parser.go&#34;</span><span class="op" id="7052417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052420">&#34;parser_test.go&#34;</span><span class="op" id="7052436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052439">&#34;error_test.go&#34;</span><span class="op" id="7052454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052457">&#34;short_test.go&#34;</span><span class="op" id="7052472">,</span><br>
<span class="lineno"></span><span class="op" id="7052474">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7052477">func</span>&nbsp;<span class="ident" id="7052482">TestParse</span><span class="op" id="7052491">(</span><span class="ident" id="7052492">t</span>&nbsp;<span class="op" id="7052494">*</span><span class="ident" id="7052495">testing</span><span class="op" id="7052502">.</span><span class="ident" id="7052503">T</span><span class="op" id="7052504">)</span>&nbsp;<span class="op" id="7052506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052509">for</span>&nbsp;<span class="ident" id="7052513">_</span><span class="op" id="7052514">,</span>&nbsp;<span class="ident" id="7052516">filename</span>&nbsp;<span class="op" id="7052525">:=</span>&nbsp;<span class="keyword" id="7052528">range</span>&nbsp;<span class="ident" id="7052534">validFiles</span>&nbsp;<span class="op" id="7052545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052549">_</span><span class="op" id="7052550">,</span>&nbsp;<span class="ident" id="7052552">err</span>&nbsp;<span class="op" id="7052556">:=</span>&nbsp;<span class="ident" id="7052559">ParseFile</span><span class="op" id="7052568">(</span><span class="ident" id="7052569">fset</span><span class="op" id="7052573">,</span>&nbsp;<span class="ident" id="7052575">filename</span><span class="op" id="7052583">,</span>&nbsp;<span class="ident" id="7052585">nil</span><span class="op" id="7052588">,</span>&nbsp;<span class="ident" id="7052590">DeclarationErrors</span><span class="op" id="7052607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052611">if</span>&nbsp;<span class="ident" id="7052614">err</span>&nbsp;<span class="op" id="7052618">!=</span>&nbsp;<span class="ident" id="7052621">nil</span>&nbsp;<span class="op" id="7052625">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052630">t</span><span class="op" id="7052631">.</span><span class="ident" id="7052632">Fatalf</span><span class="op" id="7052638">(</span><span class="string" id="7052639">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="7052658">,</span>&nbsp;<span class="ident" id="7052660">filename</span><span class="op" id="7052668">,</span>&nbsp;<span class="ident" id="7052670">err</span><span class="op" id="7052673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052680">}</span><br>
<span class="lineno"></span><span class="op" id="7052682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7052685">func</span>&nbsp;<span class="ident" id="7052690">nameFilter</span><span class="op" id="7052700">(</span><span class="ident" id="7052701">filename</span>&nbsp;<span class="builtintype" id="7052710">string</span><span class="op" id="7052716">)</span>&nbsp;<span class="builtintype" id="7052718">bool</span>&nbsp;<span class="op" id="7052723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052726">switch</span>&nbsp;<span class="ident" id="7052733">filename</span>&nbsp;<span class="op" id="7052742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052745">case</span>&nbsp;<span class="string" id="7052750">&#34;parser.go&#34;</span><span class="op" id="7052761">,</span>&nbsp;<span class="string" id="7052763">&#34;interface.go&#34;</span><span class="op" id="7052777">,</span>&nbsp;<span class="string" id="7052779">&#34;parser_test.go&#34;</span><span class="op" id="7052795">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052799">return</span>&nbsp;<span class="builtintype" id="7052806">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052812">case</span>&nbsp;<span class="string" id="7052817">&#34;parser.go.orig&#34;</span><span class="op" id="7052833">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052837">return</span>&nbsp;<span class="builtintype" id="7052844">true</span>&nbsp;<span class="comment" id="7052849">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7052897">return</span>&nbsp;<span class="builtintype" id="7052904">false</span><br>
<span class="lineno"></span><span class="op" id="7052910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7052913">func</span>&nbsp;<span class="ident" id="7052918">dirFilter</span><span class="op" id="7052927">(</span><span class="ident" id="7052928">f</span>&nbsp;<span class="ident" id="7052930">os</span><span class="op" id="7052932">.</span><span class="ident" id="7052933">FileInfo</span><span class="op" id="7052941">)</span>&nbsp;<span class="builtintype" id="7052943">bool</span>&nbsp;<span class="op" id="7052948">{</span>&nbsp;<span class="keyword" id="7052950">return</span>&nbsp;<span class="ident" id="7052957">nameFilter</span><span class="op" id="7052967">(</span><span class="ident" id="7052968">f</span><span class="op" id="7052969">.</span><span class="ident" id="7052970">Name</span><span class="op" id="7052974">(</span><span class="op" id="7052975">)</span><span class="op" id="7052976">)</span>&nbsp;<span class="op" id="7052978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7052981">func</span>&nbsp;<span class="ident" id="7052986">TestParseDir</span><span class="op" id="7052998">(</span><span class="ident" id="7052999">t</span>&nbsp;<span class="op" id="7053001">*</span><span class="ident" id="7053002">testing</span><span class="op" id="7053009">.</span><span class="ident" id="7053010">T</span><span class="op" id="7053011">)</span>&nbsp;<span class="op" id="7053013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053016">path</span>&nbsp;<span class="op" id="7053021">:=</span>&nbsp;<span class="string" id="7053024">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053029">pkgs</span><span class="op" id="7053033">,</span>&nbsp;<span class="ident" id="7053035">err</span>&nbsp;<span class="op" id="7053039">:=</span>&nbsp;<span class="ident" id="7053042">ParseDir</span><span class="op" id="7053050">(</span><span class="ident" id="7053051">fset</span><span class="op" id="7053055">,</span>&nbsp;<span class="ident" id="7053057">path</span><span class="op" id="7053061">,</span>&nbsp;<span class="ident" id="7053063">dirFilter</span><span class="op" id="7053072">,</span>&nbsp;<span class="num" id="7053074">0</span><span class="op" id="7053075">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053078">if</span>&nbsp;<span class="ident" id="7053081">err</span>&nbsp;<span class="op" id="7053085">!=</span>&nbsp;<span class="ident" id="7053088">nil</span>&nbsp;<span class="op" id="7053092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053096">t</span><span class="op" id="7053097">.</span><span class="ident" id="7053098">Fatalf</span><span class="op" id="7053104">(</span><span class="string" id="7053105">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="7053123">,</span>&nbsp;<span class="ident" id="7053125">path</span><span class="op" id="7053129">,</span>&nbsp;<span class="ident" id="7053131">err</span><span class="op" id="7053134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053140">if</span>&nbsp;<span class="ident" id="7053143">n</span>&nbsp;<span class="op" id="7053145">:=</span>&nbsp;<span class="builtinfunc" id="7053148">len</span><span class="op" id="7053151">(</span><span class="ident" id="7053152">pkgs</span><span class="op" id="7053156">)</span><span class="op" id="7053157">;</span>&nbsp;<span class="ident" id="7053159">n</span>&nbsp;<span class="op" id="7053161">!=</span>&nbsp;<span class="num" id="7053164">1</span>&nbsp;<span class="op" id="7053166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053170">t</span><span class="op" id="7053171">.</span><span class="ident" id="7053172">Errorf</span><span class="op" id="7053178">(</span><span class="string" id="7053179">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="7053204">,</span>&nbsp;<span class="ident" id="7053206">n</span><span class="op" id="7053207">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053213">pkg</span>&nbsp;<span class="op" id="7053217">:=</span>&nbsp;<span class="ident" id="7053220">pkgs</span><span class="op" id="7053224">[</span><span class="string" id="7053225">&#34;parser&#34;</span><span class="op" id="7053233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053236">if</span>&nbsp;<span class="ident" id="7053239">pkg</span>&nbsp;<span class="op" id="7053243">==</span>&nbsp;<span class="ident" id="7053246">nil</span>&nbsp;<span class="op" id="7053250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053254">t</span><span class="op" id="7053255">.</span><span class="ident" id="7053256">Errorf</span><span class="op" id="7053262">(</span><span class="string" id="7053263">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="7053291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053295">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053306">if</span>&nbsp;<span class="ident" id="7053309">n</span>&nbsp;<span class="op" id="7053311">:=</span>&nbsp;<span class="builtinfunc" id="7053314">len</span><span class="op" id="7053317">(</span><span class="ident" id="7053318">pkg</span><span class="op" id="7053321">.</span><span class="ident" id="7053322">Files</span><span class="op" id="7053327">)</span><span class="op" id="7053328">;</span>&nbsp;<span class="ident" id="7053330">n</span>&nbsp;<span class="op" id="7053332">!=</span>&nbsp;<span class="num" id="7053335">3</span>&nbsp;<span class="op" id="7053337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053341">t</span><span class="op" id="7053342">.</span><span class="ident" id="7053343">Errorf</span><span class="op" id="7053349">(</span><span class="string" id="7053350">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="7053380">,</span>&nbsp;<span class="ident" id="7053382">n</span><span class="op" id="7053383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053389">for</span>&nbsp;<span class="ident" id="7053393">filename</span>&nbsp;<span class="op" id="7053402">:=</span>&nbsp;<span class="keyword" id="7053405">range</span>&nbsp;<span class="ident" id="7053411">pkg</span><span class="op" id="7053414">.</span><span class="ident" id="7053415">Files</span>&nbsp;<span class="op" id="7053421">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053425">if</span>&nbsp;<span class="op" id="7053428">!</span><span class="ident" id="7053429">nameFilter</span><span class="op" id="7053439">(</span><span class="ident" id="7053440">filename</span><span class="op" id="7053448">)</span>&nbsp;<span class="op" id="7053450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053455">t</span><span class="op" id="7053456">.</span><span class="ident" id="7053457">Errorf</span><span class="op" id="7053463">(</span><span class="string" id="7053464">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="7053493">,</span>&nbsp;<span class="ident" id="7053495">filename</span><span class="op" id="7053503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053510">}</span><br>
<span class="lineno"></span><span class="op" id="7053512">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="7053515">func</span>&nbsp;<span class="ident" id="7053520">TestParseExpr</span><span class="op" id="7053533">(</span><span class="ident" id="7053534">t</span>&nbsp;<span class="op" id="7053536">*</span><span class="ident" id="7053537">testing</span><span class="op" id="7053544">.</span><span class="ident" id="7053545">T</span><span class="op" id="7053546">)</span>&nbsp;<span class="op" id="7053548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053551">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053579">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053613">src</span>&nbsp;<span class="op" id="7053617">:=</span>&nbsp;<span class="string" id="7053620">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053629">x</span><span class="op" id="7053630">,</span>&nbsp;<span class="ident" id="7053632">err</span>&nbsp;<span class="op" id="7053636">:=</span>&nbsp;<span class="ident" id="7053639">ParseExpr</span><span class="op" id="7053648">(</span><span class="ident" id="7053649">src</span><span class="op" id="7053652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053655">if</span>&nbsp;<span class="ident" id="7053658">err</span>&nbsp;<span class="op" id="7053662">!=</span>&nbsp;<span class="ident" id="7053665">nil</span>&nbsp;<span class="op" id="7053669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053673">t</span><span class="op" id="7053674">.</span><span class="ident" id="7053675">Errorf</span><span class="op" id="7053681">(</span><span class="string" id="7053682">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="7053701">,</span>&nbsp;<span class="ident" id="7053703">src</span><span class="op" id="7053706">,</span>&nbsp;<span class="ident" id="7053708">err</span><span class="op" id="7053711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053717">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053734">if</span>&nbsp;<span class="ident" id="7053737">_</span><span class="op" id="7053738">,</span>&nbsp;<span class="ident" id="7053740">ok</span>&nbsp;<span class="op" id="7053743">:=</span>&nbsp;<span class="ident" id="7053746">x</span><span class="op" id="7053747">.</span><span class="op" id="7053748">(</span><span class="op" id="7053749">*</span><span class="ident" id="7053750">ast</span><span class="op" id="7053753">.</span><span class="ident" id="7053754">BinaryExpr</span><span class="op" id="7053764">)</span><span class="op" id="7053765">;</span>&nbsp;<span class="op" id="7053767">!</span><span class="ident" id="7053768">ok</span>&nbsp;<span class="op" id="7053771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053775">t</span><span class="op" id="7053776">.</span><span class="ident" id="7053777">Errorf</span><span class="op" id="7053783">(</span><span class="string" id="7053784">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="7053829">,</span>&nbsp;<span class="ident" id="7053831">src</span><span class="op" id="7053834">,</span>&nbsp;<span class="ident" id="7053836">x</span><span class="op" id="7053837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053844">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053872">src</span>&nbsp;<span class="op" id="7053876">=</span>&nbsp;<span class="string" id="7053878">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053896">x</span><span class="op" id="7053897">,</span>&nbsp;<span class="ident" id="7053899">err</span>&nbsp;<span class="op" id="7053903">=</span>&nbsp;<span class="ident" id="7053905">ParseExpr</span><span class="op" id="7053914">(</span><span class="ident" id="7053915">src</span><span class="op" id="7053918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053921">if</span>&nbsp;<span class="ident" id="7053924">err</span>&nbsp;<span class="op" id="7053928">!=</span>&nbsp;<span class="ident" id="7053931">nil</span>&nbsp;<span class="op" id="7053935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053939">t</span><span class="op" id="7053940">.</span><span class="ident" id="7053941">Errorf</span><span class="op" id="7053947">(</span><span class="string" id="7053948">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="7053967">,</span>&nbsp;<span class="ident" id="7053969">src</span><span class="op" id="7053972">,</span>&nbsp;<span class="ident" id="7053974">err</span><span class="op" id="7053977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053980">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053983">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054000">if</span>&nbsp;<span class="ident" id="7054003">_</span><span class="op" id="7054004">,</span>&nbsp;<span class="ident" id="7054006">ok</span>&nbsp;<span class="op" id="7054009">:=</span>&nbsp;<span class="ident" id="7054012">x</span><span class="op" id="7054013">.</span><span class="op" id="7054014">(</span><span class="op" id="7054015">*</span><span class="ident" id="7054016">ast</span><span class="op" id="7054019">.</span><span class="ident" id="7054020">StructType</span><span class="op" id="7054030">)</span><span class="op" id="7054031">;</span>&nbsp;<span class="op" id="7054033">!</span><span class="ident" id="7054034">ok</span>&nbsp;<span class="op" id="7054037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054041">t</span><span class="op" id="7054042">.</span><span class="ident" id="7054043">Errorf</span><span class="op" id="7054049">(</span><span class="string" id="7054050">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="7054095">,</span>&nbsp;<span class="ident" id="7054097">src</span><span class="op" id="7054100">,</span>&nbsp;<span class="ident" id="7054102">x</span><span class="op" id="7054103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7054110">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054136">src</span>&nbsp;<span class="op" id="7054140">=</span>&nbsp;<span class="string" id="7054142">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054151">if</span>&nbsp;<span class="ident" id="7054154">_</span><span class="op" id="7054155">,</span>&nbsp;<span class="ident" id="7054157">err</span>&nbsp;<span class="op" id="7054161">:=</span>&nbsp;<span class="ident" id="7054164">ParseExpr</span><span class="op" id="7054173">(</span><span class="ident" id="7054174">src</span><span class="op" id="7054177">)</span><span class="op" id="7054178">;</span>&nbsp;<span class="ident" id="7054180">err</span>&nbsp;<span class="op" id="7054184">==</span>&nbsp;<span class="ident" id="7054187">nil</span>&nbsp;<span class="op" id="7054191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054195">t</span><span class="op" id="7054196">.</span><span class="ident" id="7054197">Errorf</span><span class="op" id="7054203">(</span><span class="string" id="7054204">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7054233">,</span>&nbsp;<span class="ident" id="7054235">src</span><span class="op" id="7054238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054241">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7054245">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054304">src</span>&nbsp;<span class="op" id="7054308">=</span>&nbsp;<span class="string" id="7054310">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054323">if</span>&nbsp;<span class="ident" id="7054326">_</span><span class="op" id="7054327">,</span>&nbsp;<span class="ident" id="7054329">err</span>&nbsp;<span class="op" id="7054333">:=</span>&nbsp;<span class="ident" id="7054336">ParseExpr</span><span class="op" id="7054345">(</span><span class="ident" id="7054346">src</span><span class="op" id="7054349">)</span><span class="op" id="7054350">;</span>&nbsp;<span class="ident" id="7054352">err</span>&nbsp;<span class="op" id="7054356">==</span>&nbsp;<span class="ident" id="7054359">nil</span>&nbsp;<span class="op" id="7054363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054367">t</span><span class="op" id="7054368">.</span><span class="ident" id="7054369">Errorf</span><span class="op" id="7054375">(</span><span class="string" id="7054376">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7054405">,</span>&nbsp;<span class="ident" id="7054407">src</span><span class="op" id="7054410">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7054417">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054480">src</span>&nbsp;<span class="op" id="7054484">=</span>&nbsp;<span class="string" id="7054486">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054497">if</span>&nbsp;<span class="ident" id="7054500">_</span><span class="op" id="7054501">,</span>&nbsp;<span class="ident" id="7054503">err</span>&nbsp;<span class="op" id="7054507">:=</span>&nbsp;<span class="ident" id="7054510">ParseExpr</span><span class="op" id="7054519">(</span><span class="ident" id="7054520">src</span><span class="op" id="7054523">)</span><span class="op" id="7054524">;</span>&nbsp;<span class="ident" id="7054526">err</span>&nbsp;<span class="op" id="7054530">!=</span>&nbsp;<span class="ident" id="7054533">nil</span>&nbsp;<span class="op" id="7054537">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054541">t</span><span class="op" id="7054542">.</span><span class="ident" id="7054543">Errorf</span><span class="op" id="7054549">(</span><span class="string" id="7054550">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7054579">,</span>&nbsp;<span class="ident" id="7054581">src</span><span class="op" id="7054584">,</span>&nbsp;<span class="ident" id="7054586">err</span><span class="op" id="7054589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054595">src</span>&nbsp;<span class="op" id="7054599">=</span>&nbsp;<span class="string" id="7054601">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054611">if</span>&nbsp;<span class="ident" id="7054614">_</span><span class="op" id="7054615">,</span>&nbsp;<span class="ident" id="7054617">err</span>&nbsp;<span class="op" id="7054621">:=</span>&nbsp;<span class="ident" id="7054624">ParseExpr</span><span class="op" id="7054633">(</span><span class="ident" id="7054634">src</span><span class="op" id="7054637">)</span><span class="op" id="7054638">;</span>&nbsp;<span class="ident" id="7054640">err</span>&nbsp;<span class="op" id="7054644">==</span>&nbsp;<span class="ident" id="7054647">nil</span>&nbsp;<span class="op" id="7054651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054655">t</span><span class="op" id="7054656">.</span><span class="ident" id="7054657">Errorf</span><span class="op" id="7054663">(</span><span class="string" id="7054664">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7054693">,</span>&nbsp;<span class="ident" id="7054695">src</span><span class="op" id="7054698">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7054705">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054758">const</span>&nbsp;<span class="ident" id="7054764">validExpr</span>&nbsp;<span class="op" id="7054774">=</span>&nbsp;<span class="string" id="7054776">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054785">const</span>&nbsp;<span class="ident" id="7054791">anything</span>&nbsp;<span class="op" id="7054800">=</span>&nbsp;<span class="string" id="7054802">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054815">for</span>&nbsp;<span class="ident" id="7054819">_</span><span class="op" id="7054820">,</span>&nbsp;<span class="ident" id="7054822">c</span>&nbsp;<span class="op" id="7054824">:=</span>&nbsp;<span class="keyword" id="7054827">range</span>&nbsp;<span class="string" id="7054833">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="7054842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054846">src</span>&nbsp;<span class="op" id="7054850">:=</span>&nbsp;<span class="ident" id="7054853">validExpr</span>&nbsp;<span class="op" id="7054863">+</span>&nbsp;<span class="builtintype" id="7054865">string</span><span class="op" id="7054871">(</span><span class="ident" id="7054872">c</span><span class="op" id="7054873">)</span>&nbsp;<span class="op" id="7054875">+</span>&nbsp;<span class="ident" id="7054877">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054888">if</span>&nbsp;<span class="ident" id="7054891">_</span><span class="op" id="7054892">,</span>&nbsp;<span class="ident" id="7054894">err</span>&nbsp;<span class="op" id="7054898">:=</span>&nbsp;<span class="ident" id="7054901">ParseExpr</span><span class="op" id="7054910">(</span><span class="ident" id="7054911">src</span><span class="op" id="7054914">)</span><span class="op" id="7054915">;</span>&nbsp;<span class="ident" id="7054917">err</span>&nbsp;<span class="op" id="7054921">==</span>&nbsp;<span class="ident" id="7054924">nil</span>&nbsp;<span class="op" id="7054928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054933">t</span><span class="op" id="7054934">.</span><span class="ident" id="7054935">Errorf</span><span class="op" id="7054941">(</span><span class="string" id="7054942">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7054971">,</span>&nbsp;<span class="ident" id="7054973">src</span><span class="op" id="7054976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054980">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7054987">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055016">for</span>&nbsp;<span class="ident" id="7055020">_</span><span class="op" id="7055021">,</span>&nbsp;<span class="ident" id="7055023">src</span>&nbsp;<span class="op" id="7055027">:=</span>&nbsp;<span class="keyword" id="7055030">range</span>&nbsp;<span class="ident" id="7055036">valids</span>&nbsp;<span class="op" id="7055043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055047">ParseExpr</span><span class="op" id="7055056">(</span><span class="ident" id="7055057">src</span><span class="op" id="7055060">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055063">}</span><br>
<span class="lineno"></span><span class="op" id="7055065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7055068">func</span>&nbsp;<span class="ident" id="7055073">TestColonEqualsScope</span><span class="op" id="7055093">(</span><span class="ident" id="7055094">t</span>&nbsp;<span class="op" id="7055096">*</span><span class="ident" id="7055097">testing</span><span class="op" id="7055104">.</span><span class="ident" id="7055105">T</span><span class="op" id="7055106">)</span>&nbsp;<span class="op" id="7055108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055111">f</span><span class="op" id="7055112">,</span>&nbsp;<span class="ident" id="7055114">err</span>&nbsp;<span class="op" id="7055118">:=</span>&nbsp;<span class="ident" id="7055121">ParseFile</span><span class="op" id="7055130">(</span><span class="ident" id="7055131">fset</span><span class="op" id="7055135">,</span>&nbsp;<span class="string" id="7055137">&#34;&#34;</span><span class="op" id="7055139">,</span>&nbsp;<span class="string" id="7055141">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="7055185">,</span>&nbsp;<span class="num" id="7055187">0</span><span class="op" id="7055188">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055191">if</span>&nbsp;<span class="ident" id="7055194">err</span>&nbsp;<span class="op" id="7055198">!=</span>&nbsp;<span class="ident" id="7055201">nil</span>&nbsp;<span class="op" id="7055205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055209">t</span><span class="op" id="7055210">.</span><span class="ident" id="7055211">Fatal</span><span class="op" id="7055216">(</span><span class="ident" id="7055217">err</span><span class="op" id="7055220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7055227">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055278">as</span>&nbsp;<span class="op" id="7055281">:=</span>&nbsp;<span class="ident" id="7055284">f</span><span class="op" id="7055285">.</span><span class="ident" id="7055286">Decls</span><span class="op" id="7055291">[</span><span class="num" id="7055292">0</span><span class="op" id="7055293">]</span><span class="op" id="7055294">.</span><span class="op" id="7055295">(</span><span class="op" id="7055296">*</span><span class="ident" id="7055297">ast</span><span class="op" id="7055300">.</span><span class="ident" id="7055301">FuncDecl</span><span class="op" id="7055309">)</span><span class="op" id="7055310">.</span><span class="ident" id="7055311">Body</span><span class="op" id="7055315">.</span><span class="ident" id="7055316">List</span><span class="op" id="7055320">[</span><span class="num" id="7055321">0</span><span class="op" id="7055322">]</span><span class="op" id="7055323">.</span><span class="op" id="7055324">(</span><span class="op" id="7055325">*</span><span class="ident" id="7055326">ast</span><span class="op" id="7055329">.</span><span class="ident" id="7055330">AssignStmt</span><span class="op" id="7055340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055343">for</span>&nbsp;<span class="ident" id="7055347">_</span><span class="op" id="7055348">,</span>&nbsp;<span class="ident" id="7055350">v</span>&nbsp;<span class="op" id="7055352">:=</span>&nbsp;<span class="keyword" id="7055355">range</span>&nbsp;<span class="ident" id="7055361">as</span><span class="op" id="7055363">.</span><span class="ident" id="7055364">Rhs</span>&nbsp;<span class="op" id="7055368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055372">id</span>&nbsp;<span class="op" id="7055375">:=</span>&nbsp;<span class="ident" id="7055378">v</span><span class="op" id="7055379">.</span><span class="op" id="7055380">(</span><span class="op" id="7055381">*</span><span class="ident" id="7055382">ast</span><span class="op" id="7055385">.</span><span class="ident" id="7055386">Ident</span><span class="op" id="7055391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055395">if</span>&nbsp;<span class="ident" id="7055398">id</span><span class="op" id="7055400">.</span><span class="ident" id="7055401">Obj</span>&nbsp;<span class="op" id="7055405">!=</span>&nbsp;<span class="ident" id="7055408">nil</span>&nbsp;<span class="op" id="7055412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055417">t</span><span class="op" id="7055418">.</span><span class="ident" id="7055419">Errorf</span><span class="op" id="7055425">(</span><span class="string" id="7055426">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="7055454">,</span>&nbsp;<span class="ident" id="7055456">id</span><span class="op" id="7055458">.</span><span class="ident" id="7055459">Name</span><span class="op" id="7055463">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055473">for</span>&nbsp;<span class="ident" id="7055477">_</span><span class="op" id="7055478">,</span>&nbsp;<span class="ident" id="7055480">v</span>&nbsp;<span class="op" id="7055482">:=</span>&nbsp;<span class="keyword" id="7055485">range</span>&nbsp;<span class="ident" id="7055491">as</span><span class="op" id="7055493">.</span><span class="ident" id="7055494">Lhs</span>&nbsp;<span class="op" id="7055498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055502">id</span>&nbsp;<span class="op" id="7055505">:=</span>&nbsp;<span class="ident" id="7055508">v</span><span class="op" id="7055509">.</span><span class="op" id="7055510">(</span><span class="op" id="7055511">*</span><span class="ident" id="7055512">ast</span><span class="op" id="7055515">.</span><span class="ident" id="7055516">Ident</span><span class="op" id="7055521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055525">if</span>&nbsp;<span class="ident" id="7055528">id</span><span class="op" id="7055530">.</span><span class="ident" id="7055531">Obj</span>&nbsp;<span class="op" id="7055535">==</span>&nbsp;<span class="ident" id="7055538">nil</span>&nbsp;<span class="op" id="7055542">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055547">t</span><span class="op" id="7055548">.</span><span class="ident" id="7055549">Errorf</span><span class="op" id="7055555">(</span><span class="string" id="7055556">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="7055590">,</span>&nbsp;<span class="ident" id="7055592">id</span><span class="op" id="7055594">.</span><span class="ident" id="7055595">Name</span><span class="op" id="7055599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055606">}</span><br>
<span class="lineno"></span><span class="op" id="7055608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7055611">func</span>&nbsp;<span class="ident" id="7055616">TestVarScope</span><span class="op" id="7055628">(</span><span class="ident" id="7055629">t</span>&nbsp;<span class="op" id="7055631">*</span><span class="ident" id="7055632">testing</span><span class="op" id="7055639">.</span><span class="ident" id="7055640">T</span><span class="op" id="7055641">)</span>&nbsp;<span class="op" id="7055643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055646">f</span><span class="op" id="7055647">,</span>&nbsp;<span class="ident" id="7055649">err</span>&nbsp;<span class="op" id="7055653">:=</span>&nbsp;<span class="ident" id="7055656">ParseFile</span><span class="op" id="7055665">(</span><span class="ident" id="7055666">fset</span><span class="op" id="7055670">,</span>&nbsp;<span class="string" id="7055672">&#34;&#34;</span><span class="op" id="7055674">,</span>&nbsp;<span class="string" id="7055676">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="7055723">,</span>&nbsp;<span class="num" id="7055725">0</span><span class="op" id="7055726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055729">if</span>&nbsp;<span class="ident" id="7055732">err</span>&nbsp;<span class="op" id="7055736">!=</span>&nbsp;<span class="ident" id="7055739">nil</span>&nbsp;<span class="op" id="7055743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055747">t</span><span class="op" id="7055748">.</span><span class="ident" id="7055749">Fatal</span><span class="op" id="7055754">(</span><span class="ident" id="7055755">err</span><span class="op" id="7055758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7055761">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7055765">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055816">as</span>&nbsp;<span class="op" id="7055819">:=</span>&nbsp;<span class="ident" id="7055822">f</span><span class="op" id="7055823">.</span><span class="ident" id="7055824">Decls</span><span class="op" id="7055829">[</span><span class="num" id="7055830">0</span><span class="op" id="7055831">]</span><span class="op" id="7055832">.</span><span class="op" id="7055833">(</span><span class="op" id="7055834">*</span><span class="ident" id="7055835">ast</span><span class="op" id="7055838">.</span><span class="ident" id="7055839">FuncDecl</span><span class="op" id="7055847">)</span><span class="op" id="7055848">.</span><span class="ident" id="7055849">Body</span><span class="op" id="7055853">.</span><span class="ident" id="7055854">List</span><span class="op" id="7055858">[</span><span class="num" id="7055859">0</span><span class="op" id="7055860">]</span><span class="op" id="7055861">.</span><span class="op" id="7055862">(</span><span class="op" id="7055863">*</span><span class="ident" id="7055864">ast</span><span class="op" id="7055867">.</span><span class="ident" id="7055868">DeclStmt</span><span class="op" id="7055876">)</span><span class="op" id="7055877">.</span><span class="ident" id="7055878">Decl</span><span class="op" id="7055882">.</span><span class="op" id="7055883">(</span><span class="op" id="7055884">*</span><span class="ident" id="7055885">ast</span><span class="op" id="7055888">.</span><span class="ident" id="7055889">GenDecl</span><span class="op" id="7055896">)</span><span class="op" id="7055897">.</span><span class="ident" id="7055898">Specs</span><span class="op" id="7055903">[</span><span class="num" id="7055904">0</span><span class="op" id="7055905">]</span><span class="op" id="7055906">.</span><span class="op" id="7055907">(</span><span class="op" id="7055908">*</span><span class="ident" id="7055909">ast</span><span class="op" id="7055912">.</span><span class="ident" id="7055913">ValueSpec</span><span class="op" id="7055922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055925">for</span>&nbsp;<span class="ident" id="7055929">_</span><span class="op" id="7055930">,</span>&nbsp;<span class="ident" id="7055932">v</span>&nbsp;<span class="op" id="7055934">:=</span>&nbsp;<span class="keyword" id="7055937">range</span>&nbsp;<span class="ident" id="7055943">as</span><span class="op" id="7055945">.</span><span class="ident" id="7055946">Values</span>&nbsp;<span class="op" id="7055953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7055957">id</span>&nbsp;<span class="op" id="7055960">:=</span>&nbsp;<span class="ident" id="7055963">v</span><span class="op" id="7055964">.</span><span class="op" id="7055965">(</span><span class="op" id="7055966">*</span><span class="ident" id="7055967">ast</span><span class="op" id="7055970">.</span><span class="ident" id="7055971">Ident</span><span class="op" id="7055976">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7055980">if</span>&nbsp;<span class="ident" id="7055983">id</span><span class="op" id="7055985">.</span><span class="ident" id="7055986">Obj</span>&nbsp;<span class="op" id="7055990">!=</span>&nbsp;<span class="ident" id="7055993">nil</span>&nbsp;<span class="op" id="7055997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056002">t</span><span class="op" id="7056003">.</span><span class="ident" id="7056004">Errorf</span><span class="op" id="7056010">(</span><span class="string" id="7056011">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="7056039">,</span>&nbsp;<span class="ident" id="7056041">id</span><span class="op" id="7056043">.</span><span class="ident" id="7056044">Name</span><span class="op" id="7056048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056058">for</span>&nbsp;<span class="ident" id="7056062">_</span><span class="op" id="7056063">,</span>&nbsp;<span class="ident" id="7056065">id</span>&nbsp;<span class="op" id="7056068">:=</span>&nbsp;<span class="keyword" id="7056071">range</span>&nbsp;<span class="ident" id="7056077">as</span><span class="op" id="7056079">.</span><span class="ident" id="7056080">Names</span>&nbsp;<span class="op" id="7056086">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056090">if</span>&nbsp;<span class="ident" id="7056093">id</span><span class="op" id="7056095">.</span><span class="ident" id="7056096">Obj</span>&nbsp;<span class="op" id="7056100">==</span>&nbsp;<span class="ident" id="7056103">nil</span>&nbsp;<span class="op" id="7056107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056112">t</span><span class="op" id="7056113">.</span><span class="ident" id="7056114">Errorf</span><span class="op" id="7056120">(</span><span class="string" id="7056121">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="7056155">,</span>&nbsp;<span class="ident" id="7056157">id</span><span class="op" id="7056159">.</span><span class="ident" id="7056160">Name</span><span class="op" id="7056164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056171">}</span><br>
<span class="lineno"></span><span class="op" id="7056173">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="7056176">func</span>&nbsp;<span class="ident" id="7056181">TestObjects</span><span class="op" id="7056192">(</span><span class="ident" id="7056193">t</span>&nbsp;<span class="op" id="7056195">*</span><span class="ident" id="7056196">testing</span><span class="op" id="7056203">.</span><span class="ident" id="7056204">T</span><span class="op" id="7056205">)</span>&nbsp;<span class="op" id="7056207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056210">const</span>&nbsp;<span class="ident" id="7056216">src</span>&nbsp;<span class="op" id="7056220">=</span>&nbsp;<span class="string" id="7056222">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056313">f</span><span class="op" id="7056314">,</span>&nbsp;<span class="ident" id="7056316">err</span>&nbsp;<span class="op" id="7056320">:=</span>&nbsp;<span class="ident" id="7056323">ParseFile</span><span class="op" id="7056332">(</span><span class="ident" id="7056333">fset</span><span class="op" id="7056337">,</span>&nbsp;<span class="string" id="7056339">&#34;&#34;</span><span class="op" id="7056341">,</span>&nbsp;<span class="ident" id="7056343">src</span><span class="op" id="7056346">,</span>&nbsp;<span class="num" id="7056348">0</span><span class="op" id="7056349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056352">if</span>&nbsp;<span class="ident" id="7056355">err</span>&nbsp;<span class="op" id="7056359">!=</span>&nbsp;<span class="ident" id="7056362">nil</span>&nbsp;<span class="op" id="7056366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056370">t</span><span class="op" id="7056371">.</span><span class="ident" id="7056372">Fatal</span><span class="op" id="7056377">(</span><span class="ident" id="7056378">err</span><span class="op" id="7056381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056384">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056388">objects</span>&nbsp;<span class="op" id="7056396">:=</span>&nbsp;<span class="keyword" id="7056399">map</span><span class="op" id="7056402">[</span><span class="builtintype" id="7056403">string</span><span class="op" id="7056409">]</span><span class="ident" id="7056410">ast</span><span class="op" id="7056413">.</span><span class="ident" id="7056414">ObjKind</span><span class="op" id="7056421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056425">&#34;p&#34;</span><span class="op" id="7056428">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7056432">ast</span><span class="op" id="7056435">.</span><span class="ident" id="7056436">Bad</span><span class="op" id="7056439">,</span>&nbsp;<span class="comment" id="7056441">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056461">&#34;fmt&#34;</span><span class="op" id="7056466">:</span>&nbsp;<span class="ident" id="7056468">ast</span><span class="op" id="7056471">.</span><span class="ident" id="7056472">Bad</span><span class="op" id="7056475">,</span>&nbsp;<span class="comment" id="7056477">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056499">&#34;pi&#34;</span><span class="op" id="7056503">:</span>&nbsp;&nbsp;<span class="ident" id="7056506">ast</span><span class="op" id="7056509">.</span><span class="ident" id="7056510">Con</span><span class="op" id="7056513">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056517">&#34;T&#34;</span><span class="op" id="7056520">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7056524">ast</span><span class="op" id="7056527">.</span><span class="ident" id="7056528">Typ</span><span class="op" id="7056531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056535">&#34;x&#34;</span><span class="op" id="7056538">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7056542">ast</span><span class="op" id="7056545">.</span><span class="ident" id="7056546">Var</span><span class="op" id="7056549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056553">&#34;int&#34;</span><span class="op" id="7056558">:</span>&nbsp;<span class="ident" id="7056560">ast</span><span class="op" id="7056563">.</span><span class="ident" id="7056564">Bad</span><span class="op" id="7056567">,</span>&nbsp;<span class="comment" id="7056569">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056591">&#34;f&#34;</span><span class="op" id="7056594">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7056598">ast</span><span class="op" id="7056601">.</span><span class="ident" id="7056602">Fun</span><span class="op" id="7056605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7056609">&#34;L&#34;</span><span class="op" id="7056612">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7056616">ast</span><span class="op" id="7056619">.</span><span class="ident" id="7056620">Lbl</span><span class="op" id="7056623">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056630">ast</span><span class="op" id="7056633">.</span><span class="ident" id="7056634">Inspect</span><span class="op" id="7056641">(</span><span class="ident" id="7056642">f</span><span class="op" id="7056643">,</span>&nbsp;<span class="keyword" id="7056645">func</span><span class="op" id="7056649">(</span><span class="ident" id="7056650">n</span>&nbsp;<span class="ident" id="7056652">ast</span><span class="op" id="7056655">.</span><span class="ident" id="7056656">Node</span><span class="op" id="7056660">)</span>&nbsp;<span class="builtintype" id="7056662">bool</span>&nbsp;<span class="op" id="7056667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056671">if</span>&nbsp;<span class="ident" id="7056674">ident</span><span class="op" id="7056679">,</span>&nbsp;<span class="ident" id="7056681">ok</span>&nbsp;<span class="op" id="7056684">:=</span>&nbsp;<span class="ident" id="7056687">n</span><span class="op" id="7056688">.</span><span class="op" id="7056689">(</span><span class="op" id="7056690">*</span><span class="ident" id="7056691">ast</span><span class="op" id="7056694">.</span><span class="ident" id="7056695">Ident</span><span class="op" id="7056700">)</span><span class="op" id="7056701">;</span>&nbsp;<span class="ident" id="7056703">ok</span>&nbsp;<span class="op" id="7056706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056711">obj</span>&nbsp;<span class="op" id="7056715">:=</span>&nbsp;<span class="ident" id="7056718">ident</span><span class="op" id="7056723">.</span><span class="ident" id="7056724">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056731">if</span>&nbsp;<span class="ident" id="7056734">obj</span>&nbsp;<span class="op" id="7056738">==</span>&nbsp;<span class="ident" id="7056741">nil</span>&nbsp;<span class="op" id="7056745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056751">if</span>&nbsp;<span class="ident" id="7056754">objects</span><span class="op" id="7056761">[</span><span class="ident" id="7056762">ident</span><span class="op" id="7056767">.</span><span class="ident" id="7056768">Name</span><span class="op" id="7056772">]</span>&nbsp;<span class="op" id="7056774">!=</span>&nbsp;<span class="ident" id="7056777">ast</span><span class="op" id="7056780">.</span><span class="ident" id="7056781">Bad</span>&nbsp;<span class="op" id="7056785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056792">t</span><span class="op" id="7056793">.</span><span class="ident" id="7056794">Errorf</span><span class="op" id="7056800">(</span><span class="string" id="7056801">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="7056819">,</span>&nbsp;<span class="ident" id="7056821">ident</span><span class="op" id="7056826">.</span><span class="ident" id="7056827">Name</span><span class="op" id="7056831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056843">return</span>&nbsp;<span class="builtintype" id="7056850">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7056863">if</span>&nbsp;<span class="ident" id="7056866">obj</span><span class="op" id="7056869">.</span><span class="ident" id="7056870">Name</span>&nbsp;<span class="op" id="7056875">!=</span>&nbsp;<span class="ident" id="7056878">ident</span><span class="op" id="7056883">.</span><span class="ident" id="7056884">Name</span>&nbsp;<span class="op" id="7056889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056895">t</span><span class="op" id="7056896">.</span><span class="ident" id="7056897">Errorf</span><span class="op" id="7056903">(</span><span class="string" id="7056904">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7056955">,</span>&nbsp;<span class="ident" id="7056957">obj</span><span class="op" id="7056960">.</span><span class="ident" id="7056961">Name</span><span class="op" id="7056965">,</span>&nbsp;<span class="ident" id="7056967">ident</span><span class="op" id="7056972">.</span><span class="ident" id="7056973">Name</span><span class="op" id="7056977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7056982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7056987">kind</span>&nbsp;<span class="op" id="7056992">:=</span>&nbsp;<span class="ident" id="7056995">objects</span><span class="op" id="7057002">[</span><span class="ident" id="7057003">ident</span><span class="op" id="7057008">.</span><span class="ident" id="7057009">Name</span><span class="op" id="7057013">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7057018">if</span>&nbsp;<span class="ident" id="7057021">obj</span><span class="op" id="7057024">.</span><span class="ident" id="7057025">Kind</span>&nbsp;<span class="op" id="7057030">!=</span>&nbsp;<span class="ident" id="7057033">kind</span>&nbsp;<span class="op" id="7057038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7057044">t</span><span class="op" id="7057045">.</span><span class="ident" id="7057046">Errorf</span><span class="op" id="7057052">(</span><span class="string" id="7057053">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7057081">,</span>&nbsp;<span class="ident" id="7057083">ident</span><span class="op" id="7057088">.</span><span class="ident" id="7057089">Name</span><span class="op" id="7057093">,</span>&nbsp;<span class="ident" id="7057095">obj</span><span class="op" id="7057098">.</span><span class="ident" id="7057099">Kind</span><span class="op" id="7057103">,</span>&nbsp;<span class="ident" id="7057105">kind</span><span class="op" id="7057109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7057122">return</span>&nbsp;<span class="builtintype" id="7057129">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057135">}</span><span class="op" id="7057136">)</span><br>
<span class="lineno"></span><span class="op" id="7057138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7057141">func</span>&nbsp;<span class="ident" id="7057146">TestUnresolved</span><span class="op" id="7057160">(</span><span class="ident" id="7057161">t</span>&nbsp;<span class="op" id="7057163">*</span><span class="ident" id="7057164">testing</span><span class="op" id="7057171">.</span><span class="ident" id="7057172">T</span><span class="op" id="7057173">)</span>&nbsp;<span class="op" id="7057175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7057178">f</span><span class="op" id="7057179">,</span>&nbsp;<span class="ident" id="7057181">err</span>&nbsp;<span class="op" id="7057185">:=</span>&nbsp;<span class="ident" id="7057188">ParseFile</span><span class="op" id="7057197">(</span><span class="ident" id="7057198">fset</span><span class="op" id="7057202">,</span>&nbsp;<span class="string" id="7057204">&#34;&#34;</span><span class="op" id="7057206">,</span>&nbsp;<span class="string" id="7057208">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="7057686">,</span>&nbsp;<span class="num" id="7057688">0</span><span class="op" id="7057689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7057692">if</span>&nbsp;<span class="ident" id="7057695">err</span>&nbsp;<span class="op" id="7057699">!=</span>&nbsp;<span class="ident" id="7057702">nil</span>&nbsp;<span class="op" id="7057706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7057710">t</span><span class="op" id="7057711">.</span><span class="ident" id="7057712">Fatal</span><span class="op" id="7057717">(</span><span class="ident" id="7057718">err</span><span class="op" id="7057721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7057724">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7057728">want</span>&nbsp;<span class="op" id="7057733">:=</span>&nbsp;<span class="string" id="7057736">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7057743">+</span>&nbsp;<span class="comment" id="7057745">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057754">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7057772">+</span>&nbsp;<span class="comment" id="7057774">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057783">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7057796">+</span>&nbsp;<span class="comment" id="7057798">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057807">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7057818">+</span>&nbsp;<span class="comment" id="7057820">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057829">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7057840">+</span>&nbsp;<span class="comment" id="7057842">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7057851">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057856">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7057863">+</span>&nbsp;<span class="comment" id="7057865">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057874">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7057892">+</span>&nbsp;<span class="comment" id="7057894">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057903">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7057916">+</span>&nbsp;<span class="comment" id="7057918">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057927">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7057938">+</span>&nbsp;<span class="comment" id="7057940">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057949">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7057960">+</span>&nbsp;<span class="comment" id="7057962">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7057971">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057976">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7057983">+</span>&nbsp;<span class="comment" id="7057985">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7057994">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7058006">+</span>&nbsp;<span class="comment" id="7058008">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058017">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7058030">+</span>&nbsp;<span class="comment" id="7058032">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058041">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058046">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7058053">+</span>&nbsp;<span class="comment" id="7058055">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058064">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7058082">+</span>&nbsp;<span class="comment" id="7058084">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058093">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="7058102">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058111">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7058146">var</span>&nbsp;<span class="ident" id="7058150">buf</span>&nbsp;<span class="ident" id="7058154">bytes</span><span class="op" id="7058159">.</span><span class="ident" id="7058160">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7058168">for</span>&nbsp;<span class="ident" id="7058172">_</span><span class="op" id="7058173">,</span>&nbsp;<span class="ident" id="7058175">u</span>&nbsp;<span class="op" id="7058177">:=</span>&nbsp;<span class="keyword" id="7058180">range</span>&nbsp;<span class="ident" id="7058186">f</span><span class="op" id="7058187">.</span><span class="ident" id="7058188">Unresolved</span>&nbsp;<span class="op" id="7058199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7058203">buf</span><span class="op" id="7058206">.</span><span class="ident" id="7058207">WriteString</span><span class="op" id="7058218">(</span><span class="ident" id="7058219">u</span><span class="op" id="7058220">.</span><span class="ident" id="7058221">Name</span><span class="op" id="7058225">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7058229">buf</span><span class="op" id="7058232">.</span><span class="ident" id="7058233">WriteByte</span><span class="op" id="7058242">(</span><span class="string" id="7058243">&#39;&nbsp;&#39;</span><span class="op" id="7058246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7058249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7058252">got</span>&nbsp;<span class="op" id="7058256">:=</span>&nbsp;<span class="ident" id="7058259">buf</span><span class="op" id="7058262">.</span><span class="ident" id="7058263">String</span><span class="op" id="7058269">(</span><span class="op" id="7058270">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7058274">if</span>&nbsp;<span class="ident" id="7058277">got</span>&nbsp;<span class="op" id="7058281">!=</span>&nbsp;<span class="ident" id="7058284">want</span>&nbsp;<span class="op" id="7058289">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7058293">t</span><span class="op" id="7058294">.</span><span class="ident" id="7058295">Errorf</span><span class="op" id="7058301">(</span><span class="string" id="7058302">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="7058324">,</span>&nbsp;<span class="ident" id="7058326">got</span><span class="op" id="7058329">,</span>&nbsp;<span class="ident" id="7058331">want</span><span class="op" id="7058335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7058338">}</span><br>
<span class="lineno"></span><span class="op" id="7058340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7058343">var</span>&nbsp;<span class="ident" id="7058347">imports</span>&nbsp;<span class="op" id="7058355">=</span>&nbsp;<span class="keyword" id="7058357">map</span><span class="op" id="7058360">[</span><span class="builtintype" id="7058361">string</span><span class="op" id="7058367">]</span><span class="builtintype" id="7058368">bool</span><span class="op" id="7058372">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058375">`&#34;a&#34;`</span><span class="op" id="7058380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058389">true</span><span class="op" id="7058393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058396">&#34;`a`&#34;</span><span class="op" id="7058401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058410">true</span><span class="op" id="7058414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058417">`&#34;a/b&#34;`</span><span class="op" id="7058424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058431">true</span><span class="op" id="7058435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058438">`&#34;a.b&#34;`</span><span class="op" id="7058445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058452">true</span><span class="op" id="7058456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058459">`&#34;m\x61th&#34;`</span><span class="op" id="7058470">:</span>&nbsp;&nbsp;<span class="builtintype" id="7058473">true</span><span class="op" id="7058477">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058480">`&#34;greek/αβ&#34;`</span><span class="op" id="7058494">:</span>&nbsp;<span class="builtintype" id="7058496">true</span><span class="op" id="7058500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058503">`&#34;&#34;`</span><span class="op" id="7058507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058517">false</span><span class="op" id="7058522">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058526">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058578">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058632">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058675">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7058720">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058773">`&#34;\x00&#34;`</span><span class="op" id="7058781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058787">false</span><span class="op" id="7058792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058795">&#34;`\x00`&#34;</span><span class="op" id="7058803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058809">false</span><span class="op" id="7058814">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058817">`&#34;\x7f&#34;`</span><span class="op" id="7058825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058831">false</span><span class="op" id="7058836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058839">&#34;`\x7f`&#34;</span><span class="op" id="7058847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058853">false</span><span class="op" id="7058858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058861">`&#34;a!&#34;`</span><span class="op" id="7058867">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058875">false</span><span class="op" id="7058880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058883">&#34;`a!`&#34;</span><span class="op" id="7058889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058897">false</span><span class="op" id="7058902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058905">`&#34;a&nbsp;b&#34;`</span><span class="op" id="7058912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058919">false</span><span class="op" id="7058924">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058927">&#34;`a&nbsp;b`&#34;</span><span class="op" id="7058934">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058941">false</span><span class="op" id="7058946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058949">`&#34;a\\b&#34;`</span><span class="op" id="7058957">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058963">false</span><span class="op" id="7058968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058971">&#34;`a\\b`&#34;</span><span class="op" id="7058979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7058985">false</span><span class="op" id="7058990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7058993">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="7059002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7059007">false</span><span class="op" id="7059012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7059015">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="7059024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7059029">false</span><span class="op" id="7059034">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7059037">`&#34;\x80\x80&#34;`</span><span class="op" id="7059049">:</span>&nbsp;<span class="builtintype" id="7059051">false</span><span class="op" id="7059056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7059059">&#34;`\x80\x80`&#34;</span><span class="op" id="7059071">:</span>&nbsp;<span class="builtintype" id="7059073">false</span><span class="op" id="7059078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7059081">`&#34;\xFFFD&#34;`</span><span class="op" id="7059091">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7059095">false</span><span class="op" id="7059100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7059103">&#34;`\xFFFD`&#34;</span><span class="op" id="7059113">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7059117">false</span><span class="op" id="7059122">,</span><br>
<span class="lineno"></span><span class="op" id="7059124">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="7059127">func</span>&nbsp;<span class="ident" id="7059132">TestImports</span><span class="op" id="7059143">(</span><span class="ident" id="7059144">t</span>&nbsp;<span class="op" id="7059146">*</span><span class="ident" id="7059147">testing</span><span class="op" id="7059154">.</span><span class="ident" id="7059155">T</span><span class="op" id="7059156">)</span>&nbsp;<span class="op" id="7059158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7059161">for</span>&nbsp;<span class="ident" id="7059165">path</span><span class="op" id="7059169">,</span>&nbsp;<span class="ident" id="7059171">isValid</span>&nbsp;<span class="op" id="7059179">:=</span>&nbsp;<span class="keyword" id="7059182">range</span>&nbsp;<span class="ident" id="7059188">imports</span>&nbsp;<span class="op" id="7059196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059200">src</span>&nbsp;<span class="op" id="7059204">:=</span>&nbsp;<span class="ident" id="7059207">fmt</span><span class="op" id="7059210">.</span><span class="ident" id="7059211">Sprintf</span><span class="op" id="7059218">(</span><span class="string" id="7059219">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="7059241">,</span>&nbsp;<span class="ident" id="7059243">path</span><span class="op" id="7059247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059251">_</span><span class="op" id="7059252">,</span>&nbsp;<span class="ident" id="7059254">err</span>&nbsp;<span class="op" id="7059258">:=</span>&nbsp;<span class="ident" id="7059261">ParseFile</span><span class="op" id="7059270">(</span><span class="ident" id="7059271">fset</span><span class="op" id="7059275">,</span>&nbsp;<span class="string" id="7059277">&#34;&#34;</span><span class="op" id="7059279">,</span>&nbsp;<span class="ident" id="7059281">src</span><span class="op" id="7059284">,</span>&nbsp;<span class="num" id="7059286">0</span><span class="op" id="7059287">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7059291">switch</span>&nbsp;<span class="op" id="7059298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7059302">case</span>&nbsp;<span class="ident" id="7059307">err</span>&nbsp;<span class="op" id="7059311">!=</span>&nbsp;<span class="ident" id="7059314">nil</span>&nbsp;<span class="op" id="7059318">&amp;&amp;</span>&nbsp;<span class="ident" id="7059321">isValid</span><span class="op" id="7059328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059333">t</span><span class="op" id="7059334">.</span><span class="ident" id="7059335">Errorf</span><span class="op" id="7059341">(</span><span class="string" id="7059342">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="7059384">,</span>&nbsp;<span class="ident" id="7059386">src</span><span class="op" id="7059389">,</span>&nbsp;<span class="ident" id="7059391">err</span><span class="op" id="7059394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7059398">case</span>&nbsp;<span class="ident" id="7059403">err</span>&nbsp;<span class="op" id="7059407">==</span>&nbsp;<span class="ident" id="7059410">nil</span>&nbsp;<span class="op" id="7059414">&amp;&amp;</span>&nbsp;<span class="op" id="7059417">!</span><span class="ident" id="7059418">isValid</span><span class="op" id="7059425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059430">t</span><span class="op" id="7059431">.</span><span class="ident" id="7059432">Errorf</span><span class="op" id="7059438">(</span><span class="string" id="7059439">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="7059482">,</span>&nbsp;<span class="ident" id="7059484">src</span><span class="op" id="7059487">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7059491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7059494">}</span><br>
<span class="lineno"></span><span class="op" id="7059496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7059499">func</span>&nbsp;<span class="ident" id="7059504">TestCommentGroups</span><span class="op" id="7059521">(</span><span class="ident" id="7059522">t</span>&nbsp;<span class="op" id="7059524">*</span><span class="ident" id="7059525">testing</span><span class="op" id="7059532">.</span><span class="ident" id="7059533">T</span><span class="op" id="7059534">)</span>&nbsp;<span class="op" id="7059536">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059539">f</span><span class="op" id="7059540">,</span>&nbsp;<span class="ident" id="7059542">err</span>&nbsp;<span class="op" id="7059546">:=</span>&nbsp;<span class="ident" id="7059549">ParseFile</span><span class="op" id="7059558">(</span><span class="ident" id="7059559">fset</span><span class="op" id="7059563">,</span>&nbsp;<span class="string" id="7059565">&#34;&#34;</span><span class="op" id="7059567">,</span>&nbsp;<span class="string" id="7059569">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="7059881">,</span>&nbsp;<span class="ident" id="7059883">ParseComments</span><span class="op" id="7059896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7059899">if</span>&nbsp;<span class="ident" id="7059902">err</span>&nbsp;<span class="op" id="7059906">!=</span>&nbsp;<span class="ident" id="7059909">nil</span>&nbsp;<span class="op" id="7059913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059917">t</span><span class="op" id="7059918">.</span><span class="ident" id="7059919">Fatal</span><span class="op" id="7059924">(</span><span class="ident" id="7059925">err</span><span class="op" id="7059928">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7059931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7059934">expected</span>&nbsp;<span class="op" id="7059943">:=</span>&nbsp;<span class="op" id="7059946">[</span><span class="op" id="7059947">]</span><span class="op" id="7059948">[</span><span class="op" id="7059949">]</span><span class="builtintype" id="7059950">string</span><span class="op" id="7059956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7059960">{</span><span class="string" id="7059961">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="7059971">,</span>&nbsp;<span class="string" id="7059973">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="7059983">,</span>&nbsp;<span class="string" id="7059985">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="7059995">,</span>&nbsp;<span class="string" id="7059997">&#34;//&nbsp;1d&#34;</span><span class="op" id="7060004">}</span><span class="op" id="7060005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060009">{</span><span class="string" id="7060010">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="7060021">,</span>&nbsp;<span class="string" id="7060023">&#34;//&nbsp;2b&#34;</span><span class="op" id="7060030">}</span><span class="op" id="7060031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060035">{</span><span class="string" id="7060036">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="7060046">,</span>&nbsp;<span class="string" id="7060048">&#34;//&nbsp;3b&#34;</span><span class="op" id="7060055">,</span>&nbsp;<span class="string" id="7060057">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="7060067">}</span><span class="op" id="7060068">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060072">{</span><span class="string" id="7060073">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="7060101">}</span><span class="op" id="7060102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060106">{</span><span class="string" id="7060107">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="7060136">}</span><span class="op" id="7060137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060141">{</span><span class="string" id="7060142">&#34;//&nbsp;Output:&#34;</span><span class="op" id="7060154">,</span>&nbsp;<span class="string" id="7060156">&#34;//&nbsp;3&#34;</span><span class="op" id="7060162">,</span>&nbsp;<span class="string" id="7060164">&#34;//&nbsp;5&#34;</span><span class="op" id="7060170">}</span><span class="op" id="7060171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060177">if</span>&nbsp;<span class="builtinfunc" id="7060180">len</span><span class="op" id="7060183">(</span><span class="ident" id="7060184">f</span><span class="op" id="7060185">.</span><span class="ident" id="7060186">Comments</span><span class="op" id="7060194">)</span>&nbsp;<span class="op" id="7060196">!=</span>&nbsp;<span class="builtinfunc" id="7060199">len</span><span class="op" id="7060202">(</span><span class="ident" id="7060203">expected</span><span class="op" id="7060211">)</span>&nbsp;<span class="op" id="7060213">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060217">t</span><span class="op" id="7060218">.</span><span class="ident" id="7060219">Fatalf</span><span class="op" id="7060225">(</span><span class="string" id="7060226">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="7060262">,</span>&nbsp;<span class="builtinfunc" id="7060264">len</span><span class="op" id="7060267">(</span><span class="ident" id="7060268">f</span><span class="op" id="7060269">.</span><span class="ident" id="7060270">Comments</span><span class="op" id="7060278">)</span><span class="op" id="7060279">,</span>&nbsp;<span class="builtinfunc" id="7060281">len</span><span class="op" id="7060284">(</span><span class="ident" id="7060285">expected</span><span class="op" id="7060293">)</span><span class="op" id="7060294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060300">for</span>&nbsp;<span class="ident" id="7060304">i</span><span class="op" id="7060305">,</span>&nbsp;<span class="ident" id="7060307">exp</span>&nbsp;<span class="op" id="7060311">:=</span>&nbsp;<span class="keyword" id="7060314">range</span>&nbsp;<span class="ident" id="7060320">expected</span>&nbsp;<span class="op" id="7060329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060333">got</span>&nbsp;<span class="op" id="7060337">:=</span>&nbsp;<span class="ident" id="7060340">f</span><span class="op" id="7060341">.</span><span class="ident" id="7060342">Comments</span><span class="op" id="7060350">[</span><span class="ident" id="7060351">i</span><span class="op" id="7060352">]</span><span class="op" id="7060353">.</span><span class="ident" id="7060354">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060361">if</span>&nbsp;<span class="builtinfunc" id="7060364">len</span><span class="op" id="7060367">(</span><span class="ident" id="7060368">got</span><span class="op" id="7060371">)</span>&nbsp;<span class="op" id="7060373">!=</span>&nbsp;<span class="builtinfunc" id="7060376">len</span><span class="op" id="7060379">(</span><span class="ident" id="7060380">exp</span><span class="op" id="7060383">)</span>&nbsp;<span class="op" id="7060385">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060390">t</span><span class="op" id="7060391">.</span><span class="ident" id="7060392">Errorf</span><span class="op" id="7060398">(</span><span class="string" id="7060399">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="7060441">,</span>&nbsp;<span class="builtinfunc" id="7060443">len</span><span class="op" id="7060446">(</span><span class="ident" id="7060447">got</span><span class="op" id="7060450">)</span><span class="op" id="7060451">,</span>&nbsp;<span class="ident" id="7060453">i</span><span class="op" id="7060454">,</span>&nbsp;<span class="builtinfunc" id="7060456">len</span><span class="op" id="7060459">(</span><span class="ident" id="7060460">exp</span><span class="op" id="7060463">)</span><span class="op" id="7060464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060469">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060484">for</span>&nbsp;<span class="ident" id="7060488">j</span><span class="op" id="7060489">,</span>&nbsp;<span class="ident" id="7060491">exp</span>&nbsp;<span class="op" id="7060495">:=</span>&nbsp;<span class="keyword" id="7060498">range</span>&nbsp;<span class="ident" id="7060504">exp</span>&nbsp;<span class="op" id="7060508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060513">got</span>&nbsp;<span class="op" id="7060517">:=</span>&nbsp;<span class="ident" id="7060520">got</span><span class="op" id="7060523">[</span><span class="ident" id="7060524">j</span><span class="op" id="7060525">]</span><span class="op" id="7060526">.</span><span class="ident" id="7060527">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060535">if</span>&nbsp;<span class="ident" id="7060538">got</span>&nbsp;<span class="op" id="7060542">!=</span>&nbsp;<span class="ident" id="7060545">exp</span>&nbsp;<span class="op" id="7060549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060555">t</span><span class="op" id="7060556">.</span><span class="ident" id="7060557">Errorf</span><span class="op" id="7060563">(</span><span class="string" id="7060564">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7060597">,</span>&nbsp;<span class="ident" id="7060599">got</span><span class="op" id="7060602">,</span>&nbsp;<span class="ident" id="7060604">i</span><span class="op" id="7060605">,</span>&nbsp;<span class="ident" id="7060607">exp</span><span class="op" id="7060610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7060622">}</span><br>
<span class="lineno">375</span><span class="op" id="7060624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7060627">func</span>&nbsp;<span class="ident" id="7060632">getField</span><span class="op" id="7060640">(</span><span class="ident" id="7060641">file</span>&nbsp;<span class="op" id="7060646">*</span><span class="ident" id="7060647">ast</span><span class="op" id="7060650">.</span><span class="ident" id="7060651">File</span><span class="op" id="7060655">,</span>&nbsp;<span class="ident" id="7060657">fieldname</span>&nbsp;<span class="builtintype" id="7060667">string</span><span class="op" id="7060673">)</span>&nbsp;<span class="op" id="7060675">*</span><span class="ident" id="7060676">ast</span><span class="op" id="7060679">.</span><span class="ident" id="7060680">Field</span>&nbsp;<span class="op" id="7060686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7060689">parts</span>&nbsp;<span class="op" id="7060695">:=</span>&nbsp;<span class="ident" id="7060698">strings</span><span class="op" id="7060705">.</span><span class="ident" id="7060706">Split</span><span class="op" id="7060711">(</span><span class="ident" id="7060712">fieldname</span><span class="op" id="7060721">,</span>&nbsp;<span class="string" id="7060723">&#34;.&#34;</span><span class="op" id="7060726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060729">for</span>&nbsp;<span class="ident" id="7060733">_</span><span class="op" id="7060734">,</span>&nbsp;<span class="ident" id="7060736">d</span>&nbsp;<span class="op" id="7060738">:=</span>&nbsp;<span class="keyword" id="7060741">range</span>&nbsp;<span class="ident" id="7060747">file</span><span class="op" id="7060751">.</span><span class="ident" id="7060752">Decls</span>&nbsp;<span class="op" id="7060758">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060762">if</span>&nbsp;<span class="ident" id="7060765">d</span><span class="op" id="7060766">,</span>&nbsp;<span class="ident" id="7060768">ok</span>&nbsp;<span class="op" id="7060771">:=</span>&nbsp;<span class="ident" id="7060774">d</span><span class="op" id="7060775">.</span><span class="op" id="7060776">(</span><span class="op" id="7060777">*</span><span class="ident" id="7060778">ast</span><span class="op" id="7060781">.</span><span class="ident" id="7060782">GenDecl</span><span class="op" id="7060789">)</span><span class="op" id="7060790">;</span>&nbsp;<span class="ident" id="7060792">ok</span>&nbsp;<span class="op" id="7060795">&amp;&amp;</span>&nbsp;<span class="ident" id="7060798">d</span><span class="op" id="7060799">.</span><span class="ident" id="7060800">Tok</span>&nbsp;<span class="op" id="7060804">==</span>&nbsp;<span class="ident" id="7060807">token</span><span class="op" id="7060812">.</span><span class="ident" id="7060813">TYPE</span>&nbsp;<span class="op" id="7060818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060823">for</span>&nbsp;<span class="ident" id="7060827">_</span><span class="op" id="7060828">,</span>&nbsp;<span class="ident" id="7060830">s</span>&nbsp;<span class="op" id="7060832">:=</span>&nbsp;<span class="keyword" id="7060835">range</span>&nbsp;<span class="ident" id="7060841">d</span><span class="op" id="7060842">.</span><span class="ident" id="7060843">Specs</span>&nbsp;<span class="op" id="7060849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060855">if</span>&nbsp;<span class="ident" id="7060858">s</span><span class="op" id="7060859">,</span>&nbsp;<span class="ident" id="7060861">ok</span>&nbsp;<span class="op" id="7060864">:=</span>&nbsp;<span class="ident" id="7060867">s</span><span class="op" id="7060868">.</span><span class="op" id="7060869">(</span><span class="op" id="7060870">*</span><span class="ident" id="7060871">ast</span><span class="op" id="7060874">.</span><span class="ident" id="7060875">TypeSpec</span><span class="op" id="7060883">)</span><span class="op" id="7060884">;</span>&nbsp;<span class="ident" id="7060886">ok</span>&nbsp;<span class="op" id="7060889">&amp;&amp;</span>&nbsp;<span class="ident" id="7060892">s</span><span class="op" id="7060893">.</span><span class="ident" id="7060894">Name</span><span class="op" id="7060898">.</span><span class="ident" id="7060899">Name</span>&nbsp;<span class="op" id="7060904">==</span>&nbsp;<span class="ident" id="7060907">parts</span><span class="op" id="7060912">[</span><span class="num" id="7060913">0</span><span class="op" id="7060914">]</span>&nbsp;<span class="op" id="7060916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060923">if</span>&nbsp;<span class="ident" id="7060926">s</span><span class="op" id="7060927">,</span>&nbsp;<span class="ident" id="7060929">ok</span>&nbsp;<span class="op" id="7060932">:=</span>&nbsp;<span class="ident" id="7060935">s</span><span class="op" id="7060936">.</span><span class="ident" id="7060937">Type</span><span class="op" id="7060941">.</span><span class="op" id="7060942">(</span><span class="op" id="7060943">*</span><span class="ident" id="7060944">ast</span><span class="op" id="7060947">.</span><span class="ident" id="7060948">StructType</span><span class="op" id="7060958">)</span><span class="op" id="7060959">;</span>&nbsp;<span class="ident" id="7060961">ok</span>&nbsp;<span class="op" id="7060964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7060972">for</span>&nbsp;<span class="ident" id="7060976">_</span><span class="op" id="7060977">,</span>&nbsp;<span class="ident" id="7060979">f</span>&nbsp;<span class="op" id="7060981">:=</span>&nbsp;<span class="keyword" id="7060984">range</span>&nbsp;<span class="ident" id="7060990">s</span><span class="op" id="7060991">.</span><span class="ident" id="7060992">Fields</span><span class="op" id="7060998">.</span><span class="ident" id="7060999">List</span>&nbsp;<span class="op" id="7061004">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061013">for</span>&nbsp;<span class="ident" id="7061017">_</span><span class="op" id="7061018">,</span>&nbsp;<span class="ident" id="7061020">name</span>&nbsp;<span class="op" id="7061025">:=</span>&nbsp;<span class="keyword" id="7061028">range</span>&nbsp;<span class="ident" id="7061034">f</span><span class="op" id="7061035">.</span><span class="ident" id="7061036">Names</span>&nbsp;<span class="op" id="7061042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061052">if</span>&nbsp;<span class="ident" id="7061055">name</span><span class="op" id="7061059">.</span><span class="ident" id="7061060">Name</span>&nbsp;<span class="op" id="7061065">==</span>&nbsp;<span class="ident" id="7061068">parts</span><span class="op" id="7061073">[</span><span class="num" id="7061074">1</span><span class="op" id="7061075">]</span>&nbsp;<span class="op" id="7061077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061088">return</span>&nbsp;<span class="ident" id="7061095">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061114">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061144">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061150">return</span>&nbsp;<span class="ident" id="7061157">nil</span><br>
<span class="lineno"></span><span class="op" id="7061161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7061164">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="7061238">func</span>&nbsp;<span class="ident" id="7061243">commentText</span><span class="op" id="7061254">(</span><span class="ident" id="7061255">c</span>&nbsp;<span class="op" id="7061257">*</span><span class="ident" id="7061258">ast</span><span class="op" id="7061261">.</span><span class="ident" id="7061262">CommentGroup</span><span class="op" id="7061274">)</span>&nbsp;<span class="builtintype" id="7061276">string</span>&nbsp;<span class="op" id="7061283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061286">var</span>&nbsp;<span class="ident" id="7061290">buf</span>&nbsp;<span class="ident" id="7061294">bytes</span><span class="op" id="7061299">.</span><span class="ident" id="7061300">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061308">if</span>&nbsp;<span class="ident" id="7061311">c</span>&nbsp;<span class="op" id="7061313">!=</span>&nbsp;<span class="ident" id="7061316">nil</span>&nbsp;<span class="op" id="7061320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061324">for</span>&nbsp;<span class="ident" id="7061328">_</span><span class="op" id="7061329">,</span>&nbsp;<span class="ident" id="7061331">c</span>&nbsp;<span class="op" id="7061333">:=</span>&nbsp;<span class="keyword" id="7061336">range</span>&nbsp;<span class="ident" id="7061342">c</span><span class="op" id="7061343">.</span><span class="ident" id="7061344">List</span>&nbsp;<span class="op" id="7061349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061354">buf</span><span class="op" id="7061357">.</span><span class="ident" id="7061358">WriteString</span><span class="op" id="7061369">(</span><span class="ident" id="7061370">c</span><span class="op" id="7061371">.</span><span class="ident" id="7061372">Text</span><span class="op" id="7061376">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061386">return</span>&nbsp;<span class="ident" id="7061393">buf</span><span class="op" id="7061396">.</span><span class="ident" id="7061397">String</span><span class="op" id="7061403">(</span><span class="op" id="7061404">)</span><br>
<span class="lineno"></span><span class="op" id="7061406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7061409">func</span>&nbsp;<span class="ident" id="7061414">checkFieldComments</span><span class="op" id="7061432">(</span><span class="ident" id="7061433">t</span>&nbsp;<span class="op" id="7061435">*</span><span class="ident" id="7061436">testing</span><span class="op" id="7061443">.</span><span class="ident" id="7061444">T</span><span class="op" id="7061445">,</span>&nbsp;<span class="ident" id="7061447">file</span>&nbsp;<span class="op" id="7061452">*</span><span class="ident" id="7061453">ast</span><span class="op" id="7061456">.</span><span class="ident" id="7061457">File</span><span class="op" id="7061461">,</span>&nbsp;<span class="ident" id="7061463">fieldname</span><span class="op" id="7061472">,</span>&nbsp;<span class="ident" id="7061474">lead</span><span class="op" id="7061478">,</span>&nbsp;<span class="ident" id="7061480">line</span>&nbsp;<span class="builtintype" id="7061485">string</span><span class="op" id="7061491">)</span>&nbsp;<span class="op" id="7061493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061496">f</span>&nbsp;<span class="op" id="7061498">:=</span>&nbsp;<span class="ident" id="7061501">getField</span><span class="op" id="7061509">(</span><span class="ident" id="7061510">file</span><span class="op" id="7061514">,</span>&nbsp;<span class="ident" id="7061516">fieldname</span><span class="op" id="7061525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061528">if</span>&nbsp;<span class="ident" id="7061531">f</span>&nbsp;<span class="op" id="7061533">==</span>&nbsp;<span class="ident" id="7061536">nil</span>&nbsp;<span class="op" id="7061540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061544">t</span><span class="op" id="7061545">.</span><span class="ident" id="7061546">Fatalf</span><span class="op" id="7061552">(</span><span class="string" id="7061553">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="7061574">,</span>&nbsp;<span class="ident" id="7061576">fieldname</span><span class="op" id="7061585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061588">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061591">if</span>&nbsp;<span class="ident" id="7061594">got</span>&nbsp;<span class="op" id="7061598">:=</span>&nbsp;<span class="ident" id="7061601">commentText</span><span class="op" id="7061612">(</span><span class="ident" id="7061613">f</span><span class="op" id="7061614">.</span><span class="ident" id="7061615">Doc</span><span class="op" id="7061618">)</span><span class="op" id="7061619">;</span>&nbsp;<span class="ident" id="7061621">got</span>&nbsp;<span class="op" id="7061625">!=</span>&nbsp;<span class="ident" id="7061628">lead</span>&nbsp;<span class="op" id="7061633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061637">t</span><span class="op" id="7061638">.</span><span class="ident" id="7061639">Errorf</span><span class="op" id="7061645">(</span><span class="string" id="7061646">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7061680">,</span>&nbsp;<span class="ident" id="7061682">got</span><span class="op" id="7061685">,</span>&nbsp;<span class="ident" id="7061687">lead</span><span class="op" id="7061691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7061697">if</span>&nbsp;<span class="ident" id="7061700">got</span>&nbsp;<span class="op" id="7061704">:=</span>&nbsp;<span class="ident" id="7061707">commentText</span><span class="op" id="7061718">(</span><span class="ident" id="7061719">f</span><span class="op" id="7061720">.</span><span class="ident" id="7061721">Comment</span><span class="op" id="7061728">)</span><span class="op" id="7061729">;</span>&nbsp;<span class="ident" id="7061731">got</span>&nbsp;<span class="op" id="7061735">!=</span>&nbsp;<span class="ident" id="7061738">line</span>&nbsp;<span class="op" id="7061743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061747">t</span><span class="op" id="7061748">.</span><span class="ident" id="7061749">Errorf</span><span class="op" id="7061755">(</span><span class="string" id="7061756">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7061790">,</span>&nbsp;<span class="ident" id="7061792">got</span><span class="op" id="7061795">,</span>&nbsp;<span class="ident" id="7061797">line</span><span class="op" id="7061801">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7061804">}</span><br>
<span class="lineno"></span><span class="op" id="7061806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7061809">func</span>&nbsp;<span class="ident" id="7061814">TestLeadAndLineComments</span><span class="op" id="7061837">(</span><span class="ident" id="7061838">t</span>&nbsp;<span class="op" id="7061840">*</span><span class="ident" id="7061841">testing</span><span class="op" id="7061848">.</span><span class="ident" id="7061849">T</span><span class="op" id="7061850">)</span>&nbsp;<span class="op" id="7061852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7061855">f</span><span class="op" id="7061856">,</span>&nbsp;<span class="ident" id="7061858">err</span>&nbsp;<span class="op" id="7061862">:=</span>&nbsp;<span class="ident" id="7061865">ParseFile</span><span class="op" id="7061874">(</span><span class="ident" id="7061875">fset</span><span class="op" id="7061879">,</span>&nbsp;<span class="string" id="7061881">&#34;&#34;</span><span class="op" id="7061883">,</span>&nbsp;<span class="string" id="7061885">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="7062077">,</span>&nbsp;<span class="ident" id="7062079">ParseComments</span><span class="op" id="7062092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7062095">if</span>&nbsp;<span class="ident" id="7062098">err</span>&nbsp;<span class="op" id="7062102">!=</span>&nbsp;<span class="ident" id="7062105">nil</span>&nbsp;<span class="op" id="7062109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062113">t</span><span class="op" id="7062114">.</span><span class="ident" id="7062115">Fatal</span><span class="op" id="7062120">(</span><span class="ident" id="7062121">err</span><span class="op" id="7062124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7062127">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062130">checkFieldComments</span><span class="op" id="7062148">(</span><span class="ident" id="7062149">t</span><span class="op" id="7062150">,</span>&nbsp;<span class="ident" id="7062152">f</span><span class="op" id="7062153">,</span>&nbsp;<span class="string" id="7062155">&#34;T.F1&#34;</span><span class="op" id="7062161">,</span>&nbsp;<span class="string" id="7062163">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="7062188">,</span>&nbsp;<span class="string" id="7062190">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7062215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062218">checkFieldComments</span><span class="op" id="7062236">(</span><span class="ident" id="7062237">t</span><span class="op" id="7062238">,</span>&nbsp;<span class="ident" id="7062240">f</span><span class="op" id="7062241">,</span>&nbsp;<span class="string" id="7062243">&#34;T.F2&#34;</span><span class="op" id="7062249">,</span>&nbsp;<span class="string" id="7062251">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="7062273">,</span>&nbsp;<span class="string" id="7062275">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7062295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062298">checkFieldComments</span><span class="op" id="7062316">(</span><span class="ident" id="7062317">t</span><span class="op" id="7062318">,</span>&nbsp;<span class="ident" id="7062320">f</span><span class="op" id="7062321">,</span>&nbsp;<span class="string" id="7062323">&#34;T.f3&#34;</span><span class="op" id="7062329">,</span>&nbsp;<span class="string" id="7062331">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="7062351">,</span>&nbsp;<span class="string" id="7062353">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7062373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062376">ast</span><span class="op" id="7062379">.</span><span class="ident" id="7062380">FileExports</span><span class="op" id="7062391">(</span><span class="ident" id="7062392">f</span><span class="op" id="7062393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062396">checkFieldComments</span><span class="op" id="7062414">(</span><span class="ident" id="7062415">t</span><span class="op" id="7062416">,</span>&nbsp;<span class="ident" id="7062418">f</span><span class="op" id="7062419">,</span>&nbsp;<span class="string" id="7062421">&#34;T.F1&#34;</span><span class="op" id="7062427">,</span>&nbsp;<span class="string" id="7062429">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="7062454">,</span>&nbsp;<span class="string" id="7062456">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7062481">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062484">checkFieldComments</span><span class="op" id="7062502">(</span><span class="ident" id="7062503">t</span><span class="op" id="7062504">,</span>&nbsp;<span class="ident" id="7062506">f</span><span class="op" id="7062507">,</span>&nbsp;<span class="string" id="7062509">&#34;T.F2&#34;</span><span class="op" id="7062515">,</span>&nbsp;<span class="string" id="7062517">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="7062539">,</span>&nbsp;<span class="string" id="7062541">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7062561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7062564">if</span>&nbsp;<span class="ident" id="7062567">getField</span><span class="op" id="7062575">(</span><span class="ident" id="7062576">f</span><span class="op" id="7062577">,</span>&nbsp;<span class="string" id="7062579">&#34;T.f3&#34;</span><span class="op" id="7062585">)</span>&nbsp;<span class="op" id="7062587">!=</span>&nbsp;<span class="ident" id="7062590">nil</span>&nbsp;<span class="op" id="7062594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062598">t</span><span class="op" id="7062599">.</span><span class="ident" id="7062600">Error</span><span class="op" id="7062605">(</span><span class="string" id="7062606">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="7062633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7062636">}</span><br>
<span class="lineno"></span><span class="op" id="7062638">}</span>
</div>
</body>
</html>
