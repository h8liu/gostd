<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5361736">package</span>&nbsp;<span class="ident" id="5361744">lex8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5361750">import</span>&nbsp;<span class="op" id="5361757">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5361760">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5361769">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5361774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5361777">//&nbsp;LexScanner&nbsp;parses&nbsp;a&nbsp;file&nbsp;input&nbsp;stream&nbsp;into&nbsp;tokens.</span><br>
<span class="lineno"></span><span class="keyword" id="5361831">type</span>&nbsp;<span class="ident" id="5361836">LexScanner</span>&nbsp;<span class="keyword" id="5361847">struct</span>&nbsp;<span class="op" id="5361854">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361857">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5361863">*</span><span class="ident" id="5361864"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365237">RuneScanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361877">errs</span>&nbsp;&nbsp;<span class="op" id="5361883">*</span><span class="ident" id="5361884"><a href="/lonnie.io/e8vm/lex8/error_list.go.html#5360845">ErrorList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361895">valid</span>&nbsp;<span class="builtintype" id="5361901">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361908">pos</span>&nbsp;<span class="op" id="5361912">*</span><span class="ident" id="5361913"><a href="/lonnie.io/e8vm/lex8/pos.go.html#5365036">Pos</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5361918">buf</span>&nbsp;<span class="op" id="5361922">*</span><span class="ident" id="5361923"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361760">bytes</a></span><span class="op" id="5361928">.</span><span class="ident" id="5361929">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5361936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5361939">//&nbsp;NewLexScanner&nbsp;creates&nbsp;a&nbsp;new&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="5361977">func</span>&nbsp;<span class="ident" id="5361982">NewLexScanner</span><span class="op" id="5361995">(</span><span class="ident" id="5361996">file</span>&nbsp;<span class="builtintype" id="5362001">string</span><span class="op" id="5362007">,</span>&nbsp;<span class="ident" id="5362009">rc</span>&nbsp;<span class="ident" id="5362012"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361769">io</a></span><span class="op" id="5362014">.</span><span class="ident" id="5362015">ReadCloser</span><span class="op" id="5362025">)</span>&nbsp;<span class="op" id="5362027">*</span><span class="ident" id="5362028"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361836">LexScanner</a></span>&nbsp;<span class="op" id="5362039">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362042">ret</span>&nbsp;<span class="op" id="5362046">:=</span>&nbsp;<span class="builtinfunc" id="5362049">new</span><span class="op" id="5362052">(</span><span class="ident" id="5362053"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361836">LexScanner</a></span><span class="op" id="5362063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362066"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><span class="op" id="5362069">.</span><span class="ident" id="5362070">s</span>&nbsp;<span class="op" id="5362072">=</span>&nbsp;<span class="ident" id="5362074"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#5365435">NewRuneScanner</a></span><span class="op" id="5362088">(</span><span class="ident" id="5362089"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361996">file</a></span><span class="op" id="5362093">,</span>&nbsp;<span class="ident" id="5362095"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362009">rc</a></span><span class="op" id="5362097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362100"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><span class="op" id="5362103">.</span><span class="ident" id="5362104">errs</span>&nbsp;<span class="op" id="5362109">=</span>&nbsp;<span class="ident" id="5362111"><a href="/lonnie.io/e8vm/lex8/error_list.go.html#5360982">NewErrList</a></span><span class="op" id="5362121">(</span><span class="op" id="5362122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362126"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><span class="op" id="5362129">.</span><span class="ident" id="5362130">buf</span>&nbsp;<span class="op" id="5362134">=</span>&nbsp;<span class="builtinfunc" id="5362136">new</span><span class="op" id="5362139">(</span><span class="ident" id="5362140"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361760">bytes</a></span><span class="op" id="5362145">.</span><span class="ident" id="5362146">Buffer</span><span class="op" id="5362152">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362155"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><span class="op" id="5362158">.</span><span class="ident" id="5362159">pos</span>&nbsp;<span class="op" id="5362163">=</span>&nbsp;<span class="ident" id="5362165"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><span class="op" id="5362168">.</span><span class="ident" id="5362169">s</span><span class="op" id="5362170">.</span><span class="ident" id="5362171">Pos</span><span class="op" id="5362174">(</span><span class="op" id="5362175">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362179">return</span>&nbsp;<span class="ident" id="5362186"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362042">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5362190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="5362193">//&nbsp;Next&nbsp;pushes&nbsp;the&nbsp;current&nbsp;rune&nbsp;(if&nbsp;valid)&nbsp;into&nbsp;the&nbsp;buffer,</span><br>
<span class="lineno"></span><span class="comment" id="5362253">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;or&nbsp;error&nbsp;from&nbsp;scanning&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5362315">//&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="5362326">func</span>&nbsp;<span class="op" id="5362331">(</span><span class="ident" id="5362332">s</span>&nbsp;<span class="op" id="5362334">*</span><span class="ident" id="5362335"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361836">LexScanner</a></span><span class="op" id="5362345">)</span>&nbsp;<span class="ident" id="5362347">Next</span><span class="op" id="5362351">(</span><span class="op" id="5362352">)</span>&nbsp;<span class="op" id="5362354">(</span><span class="builtintype" id="5362355">rune</span><span class="op" id="5362359">,</span>&nbsp;<span class="builtintype" id="5362361">error</span><span class="op" id="5362366">)</span>&nbsp;<span class="op" id="5362368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362371">if</span>&nbsp;<span class="ident" id="5362374"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362375">.</span><span class="ident" id="5362376">valid</span>&nbsp;<span class="op" id="5362382">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362386"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362387">.</span><span class="ident" id="5362388">buf</span><span class="op" id="5362391">.</span><span class="ident" id="5362392">WriteRune</span><span class="op" id="5362401">(</span><span class="ident" id="5362402"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362403">.</span><span class="ident" id="5362404">s</span><span class="op" id="5362405">.</span><span class="ident" id="5362406">Rune</span><span class="op" id="5362410">)</span>&nbsp;<span class="comment" id="5362412">//&nbsp;push&nbsp;into&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362438"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362439">.</span><span class="ident" id="5362440">valid</span>&nbsp;<span class="op" id="5362446">=</span>&nbsp;<span class="ident" id="5362448">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5362455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362459">if</span>&nbsp;<span class="op" id="5362462">!</span><span class="ident" id="5362463"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362464">.</span><span class="ident" id="5362465">s</span><span class="op" id="5362466">.</span><span class="ident" id="5362467">Scan</span><span class="op" id="5362471">(</span><span class="op" id="5362472">)</span>&nbsp;<span class="op" id="5362474">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362478">if</span>&nbsp;<span class="ident" id="5362481"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362482">.</span><span class="ident" id="5362483">s</span><span class="op" id="5362484">.</span><span class="ident" id="5362485">Err</span>&nbsp;<span class="op" id="5362489">!=</span>&nbsp;<span class="ident" id="5362492">nil</span>&nbsp;<span class="op" id="5362496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362501">return</span>&nbsp;<span class="num" id="5362508">0</span><span class="op" id="5362509">,</span>&nbsp;<span class="ident" id="5362511"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362512">.</span><span class="ident" id="5362513">s</span><span class="op" id="5362514">.</span><span class="ident" id="5362515">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5362521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362526">return</span>&nbsp;<span class="num" id="5362533">0</span><span class="op" id="5362534">,</span>&nbsp;<span class="ident" id="5362536"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361769">io</a></span><span class="op" id="5362538">.</span><span class="ident" id="5362539">EOF</span>&nbsp;<span class="comment" id="5362543">//&nbsp;signal&nbsp;end&nbsp;of&nbsp;file</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5362566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362570"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362571">.</span><span class="ident" id="5362572">valid</span>&nbsp;<span class="op" id="5362578">=</span>&nbsp;<span class="ident" id="5362580">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362586">return</span>&nbsp;<span class="ident" id="5362593"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362332">s</a></span><span class="op" id="5362594">.</span><span class="ident" id="5362595">s</span><span class="op" id="5362596">.</span><span class="ident" id="5362597">Rune</span><span class="op" id="5362601">,</span>&nbsp;<span class="ident" id="5362603">nil</span><br>
<span class="lineno"></span><span class="op" id="5362607">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="5362610">//&nbsp;Accept&nbsp;returns&nbsp;the&nbsp;string&nbsp;buffered,&nbsp;and&nbsp;the&nbsp;starting&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="5362675">//&nbsp;of&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5362693">func</span>&nbsp;<span class="op" id="5362698">(</span><span class="ident" id="5362699">s</span>&nbsp;<span class="op" id="5362701">*</span><span class="ident" id="5362702"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361836">LexScanner</a></span><span class="op" id="5362712">)</span>&nbsp;<span class="ident" id="5362714">Accept</span><span class="op" id="5362720">(</span><span class="op" id="5362721">)</span>&nbsp;<span class="op" id="5362723">(</span><span class="builtintype" id="5362724">string</span><span class="op" id="5362730">,</span>&nbsp;<span class="op" id="5362732">*</span><span class="ident" id="5362733"><a href="/lonnie.io/e8vm/lex8/pos.go.html#5365036">Pos</a></span><span class="op" id="5362736">)</span>&nbsp;<span class="op" id="5362738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362741">ret</span>&nbsp;<span class="op" id="5362745">:=</span>&nbsp;<span class="ident" id="5362748"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362699">s</a></span><span class="op" id="5362749">.</span><span class="ident" id="5362750">buf</span><span class="op" id="5362753">.</span><span class="ident" id="5362754">String</span><span class="op" id="5362760">(</span><span class="op" id="5362761">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362764"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362699">s</a></span><span class="op" id="5362765">.</span><span class="ident" id="5362766">buf</span><span class="op" id="5362769">.</span><span class="ident" id="5362770">Reset</span><span class="op" id="5362775">(</span><span class="op" id="5362776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362779">pos</span>&nbsp;<span class="op" id="5362783">:=</span>&nbsp;<span class="ident" id="5362786"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362699">s</a></span><span class="op" id="5362787">.</span><span class="ident" id="5362788">pos</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5362794"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362699">s</a></span><span class="op" id="5362795">.</span><span class="ident" id="5362796">pos</span>&nbsp;<span class="op" id="5362800">=</span>&nbsp;<span class="ident" id="5362802"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362699">s</a></span><span class="op" id="5362803">.</span><span class="ident" id="5362804">s</span><span class="op" id="5362805">.</span><span class="ident" id="5362806">Pos</span><span class="op" id="5362809">(</span><span class="op" id="5362810">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362814">return</span>&nbsp;<span class="ident" id="5362821"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362741">ret</a></span><span class="op" id="5362824">,</span>&nbsp;<span class="ident" id="5362826"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362779">pos</a></span><br>
<span class="lineno"></span><span class="op" id="5362830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5362833">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;buffer&nbsp;start.</span><br>
<span class="lineno"></span><span class="keyword" id="5362882">func</span>&nbsp;<span class="op" id="5362887">(</span><span class="ident" id="5362888">s</span>&nbsp;<span class="op" id="5362890">*</span><span class="ident" id="5362891"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5361836">LexScanner</a></span><span class="op" id="5362901">)</span>&nbsp;<span class="ident" id="5362903">Pos</span><span class="op" id="5362906">(</span><span class="op" id="5362907">)</span>&nbsp;<span class="op" id="5362909">*</span><span class="ident" id="5362910"><a href="/lonnie.io/e8vm/lex8/pos.go.html#5365036">Pos</a></span>&nbsp;<span class="op" id="5362914">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5362917">return</span>&nbsp;<span class="ident" id="5362924"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#5362888">s</a></span><span class="op" id="5362925">.</span><span class="ident" id="5362926">pos</span><br>
<span class="lineno"></span><span class="op" id="5362930">}</span>
</div>
</body>
</html>
