<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>fmt</h2>
<ul>
<li><a href="/gostd/fmt/doc.go.html">doc.go</a></li>
<li><a href="/gostd/fmt/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/fmt/fmt_test.go.html">fmt_test.go</a></li>
<li><a href="/gostd/fmt/format.go.html">format.go</a></li>
<li><a href="/gostd/fmt/print.go.html">print.go</a></li>
<li><a href="/gostd/fmt/scan.go.html" class="current">scan.go</a></li>
<li><a href="/gostd/fmt/scan_test.go.html">scan_test.go</a></li>
<li><a href="/gostd/fmt/stringer_test.go.html">stringer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2062223">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2062278">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2062332">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2062383">package</span>&nbsp;<span class="ident" id="2062391">fmt</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2062396">import</span>&nbsp;<span class="op" id="2062403">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062406">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062416">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062422">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062430">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062436">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062447">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062458">&#34;sync&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2062466">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2062481">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2062484">//&nbsp;runeUnreader&nbsp;is&nbsp;the&nbsp;interface&nbsp;to&nbsp;something&nbsp;that&nbsp;can&nbsp;unread&nbsp;runes.</span><br>
<span class="lineno"></span><span class="comment" id="2062553">//&nbsp;If&nbsp;the&nbsp;object&nbsp;provided&nbsp;to&nbsp;Scan&nbsp;does&nbsp;not&nbsp;satisfy&nbsp;this&nbsp;interface,</span><br>
<span class="lineno">20</span><span class="comment" id="2062620">//&nbsp;a&nbsp;local&nbsp;buffer&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;back&nbsp;up&nbsp;the&nbsp;input,&nbsp;but&nbsp;its&nbsp;contents</span><br>
<span class="lineno"></span><span class="comment" id="2062690">//&nbsp;will&nbsp;be&nbsp;lost&nbsp;when&nbsp;Scan&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="2062725">type</span>&nbsp;<span class="ident" id="2062730">runeUnreader</span>&nbsp;<span class="keyword" id="2062743">interface</span>&nbsp;<span class="op" id="2062753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2062756">UnreadRune</span><span class="op" id="2062766">(</span><span class="op" id="2062767">)</span>&nbsp;<span class="builtintype" id="2062769">error</span><br>
<span class="lineno"></span><span class="op" id="2062775">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="2062778">//&nbsp;ScanState&nbsp;represents&nbsp;the&nbsp;scanner&nbsp;state&nbsp;passed&nbsp;to&nbsp;custom&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="comment" id="2062847">//&nbsp;Scanners&nbsp;may&nbsp;do&nbsp;rune-at-a-time&nbsp;scanning&nbsp;or&nbsp;ask&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="2062911">//&nbsp;to&nbsp;discover&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2062958">type</span>&nbsp;<span class="ident" id="2062963">ScanState</span>&nbsp;<span class="keyword" id="2062973">interface</span>&nbsp;<span class="op" id="2062983">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2062986">//&nbsp;ReadRune&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;(Unicode&nbsp;code&nbsp;point)&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063056">//&nbsp;If&nbsp;invoked&nbsp;during&nbsp;Scanln,&nbsp;Fscanln,&nbsp;or&nbsp;Sscanln,&nbsp;ReadRune()&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063123">//&nbsp;return&nbsp;EOF&nbsp;after&nbsp;returning&nbsp;the&nbsp;first&nbsp;&#39;\n&#39;&nbsp;or&nbsp;when&nbsp;reading&nbsp;beyond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063192">//&nbsp;the&nbsp;specified&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2063217">ReadRune</span><span class="op" id="2063225">(</span><span class="op" id="2063226">)</span>&nbsp;<span class="op" id="2063228">(</span><span class="ident" id="2063229">r</span>&nbsp;<span class="builtintype" id="2063231">rune</span><span class="op" id="2063235">,</span>&nbsp;<span class="ident" id="2063237">size</span>&nbsp;<span class="builtintype" id="2063242">int</span><span class="op" id="2063245">,</span>&nbsp;<span class="ident" id="2063247">err</span>&nbsp;<span class="builtintype" id="2063251">error</span><span class="op" id="2063256">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063259">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2063332">UnreadRune</span><span class="op" id="2063342">(</span><span class="op" id="2063343">)</span>&nbsp;<span class="builtintype" id="2063345">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063352">//&nbsp;SkipSpace&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input.&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063422">//&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063497">//&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as&nbsp;EOF.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2063530">SkipSpace</span><span class="op" id="2063539">(</span><span class="op" id="2063540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063543">//&nbsp;Token&nbsp;skips&nbsp;space&nbsp;in&nbsp;the&nbsp;input&nbsp;if&nbsp;skipSpace&nbsp;is&nbsp;true,&nbsp;then&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063617">//&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c).&nbsp;&nbsp;If&nbsp;f&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063681">//&nbsp;!unicode.IsSpace(c)&nbsp;is&nbsp;used;&nbsp;that&nbsp;is,&nbsp;the&nbsp;token&nbsp;will&nbsp;hold&nbsp;non-space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063753">//&nbsp;characters.&nbsp;&nbsp;Newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;space&nbsp;unless&nbsp;the&nbsp;scan&nbsp;operation</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063826">//&nbsp;is&nbsp;Scanln,&nbsp;Fscanln&nbsp;or&nbsp;Sscanln,&nbsp;in&nbsp;which&nbsp;case&nbsp;a&nbsp;newline&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063899">//&nbsp;EOF.&nbsp;&nbsp;The&nbsp;returned&nbsp;slice&nbsp;points&nbsp;to&nbsp;shared&nbsp;data&nbsp;that&nbsp;may&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2063974">//&nbsp;by&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;Token,&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;Scan&nbsp;function&nbsp;using&nbsp;the&nbsp;ScanState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064051">//&nbsp;as&nbsp;input,&nbsp;or&nbsp;when&nbsp;the&nbsp;calling&nbsp;Scan&nbsp;method&nbsp;returns.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2064106">Token</span><span class="op" id="2064111">(</span><span class="ident" id="2064112">skipSpace</span>&nbsp;<span class="builtintype" id="2064122">bool</span><span class="op" id="2064126">,</span>&nbsp;<span class="ident" id="2064128">f</span>&nbsp;<span class="keyword" id="2064130">func</span><span class="op" id="2064134">(</span><span class="builtintype" id="2064135">rune</span><span class="op" id="2064139">)</span>&nbsp;<span class="builtintype" id="2064141">bool</span><span class="op" id="2064145">)</span>&nbsp;<span class="op" id="2064147">(</span><span class="ident" id="2064148">token</span>&nbsp;<span class="op" id="2064154">[</span><span class="op" id="2064155">]</span><span class="builtintype" id="2064156">byte</span><span class="op" id="2064160">,</span>&nbsp;<span class="ident" id="2064162">err</span>&nbsp;<span class="builtintype" id="2064166">error</span><span class="op" id="2064171">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064174">//&nbsp;Width&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;width&nbsp;option&nbsp;and&nbsp;whether&nbsp;it&nbsp;has&nbsp;been&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064251">//&nbsp;The&nbsp;unit&nbsp;is&nbsp;Unicode&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2064288">Width</span><span class="op" id="2064293">(</span><span class="op" id="2064294">)</span>&nbsp;<span class="op" id="2064296">(</span><span class="ident" id="2064297">wid</span>&nbsp;<span class="builtintype" id="2064301">int</span><span class="op" id="2064304">,</span>&nbsp;<span class="ident" id="2064306">ok</span>&nbsp;<span class="builtintype" id="2064309">bool</span><span class="op" id="2064313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064316">//&nbsp;Because&nbsp;ReadRune&nbsp;is&nbsp;implemented&nbsp;by&nbsp;the&nbsp;interface,&nbsp;Read&nbsp;should&nbsp;never&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064391">//&nbsp;called&nbsp;by&nbsp;the&nbsp;scanning&nbsp;routines&nbsp;and&nbsp;a&nbsp;valid&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2064457">//&nbsp;ScanState&nbsp;may&nbsp;choose&nbsp;always&nbsp;to&nbsp;return&nbsp;an&nbsp;error&nbsp;from&nbsp;Read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2064519">Read</span><span class="op" id="2064523">(</span><span class="ident" id="2064524">buf</span>&nbsp;<span class="op" id="2064528">[</span><span class="op" id="2064529">]</span><span class="builtintype" id="2064530">byte</span><span class="op" id="2064534">)</span>&nbsp;<span class="op" id="2064536">(</span><span class="ident" id="2064537">n</span>&nbsp;<span class="builtintype" id="2064539">int</span><span class="op" id="2064542">,</span>&nbsp;<span class="ident" id="2064544">err</span>&nbsp;<span class="builtintype" id="2064548">error</span><span class="op" id="2064553">)</span><br>
<span class="lineno"></span><span class="op" id="2064555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2064558">//&nbsp;Scanner&nbsp;is&nbsp;implemented&nbsp;by&nbsp;any&nbsp;value&nbsp;that&nbsp;has&nbsp;a&nbsp;Scan&nbsp;method,&nbsp;which&nbsp;scans</span><br>
<span class="lineno">60</span><span class="comment" id="2064633">//&nbsp;the&nbsp;input&nbsp;for&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;value&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2064709">//&nbsp;receiver,&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;be&nbsp;useful.&nbsp;&nbsp;The&nbsp;Scan&nbsp;method&nbsp;is&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="2064787">//&nbsp;for&nbsp;any&nbsp;argument&nbsp;to&nbsp;Scan,&nbsp;Scanf,&nbsp;or&nbsp;Scanln&nbsp;that&nbsp;implements&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2064853">type</span>&nbsp;<span class="ident" id="2064858">Scanner</span>&nbsp;<span class="keyword" id="2064866">interface</span>&nbsp;<span class="op" id="2064876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2064879">Scan</span><span class="op" id="2064883">(</span><span class="ident" id="2064884">state</span>&nbsp;<span class="ident" id="2064890">ScanState</span><span class="op" id="2064899">,</span>&nbsp;<span class="ident" id="2064901">verb</span>&nbsp;<span class="builtintype" id="2064906">rune</span><span class="op" id="2064910">)</span>&nbsp;<span class="builtintype" id="2064912">error</span><br>
<span class="lineno">65</span><span class="op" id="2064918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2064921">//&nbsp;Scan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="2064985">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count</span><br>
<span class="lineno"></span><span class="comment" id="2065054">//&nbsp;as&nbsp;space.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno">70</span><span class="comment" id="2065121">//&nbsp;If&nbsp;that&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2065191">func</span>&nbsp;<span class="ident" id="2065196">Scan</span><span class="op" id="2065200">(</span><span class="ident" id="2065201">a</span>&nbsp;<span class="op" id="2065203">...</span><span class="keyword" id="2065206">interface</span><span class="op" id="2065215">{</span><span class="op" id="2065216">}</span><span class="op" id="2065217">)</span>&nbsp;<span class="op" id="2065219">(</span><span class="ident" id="2065220">n</span>&nbsp;<span class="builtintype" id="2065222">int</span><span class="op" id="2065225">,</span>&nbsp;<span class="ident" id="2065227">err</span>&nbsp;<span class="builtintype" id="2065231">error</span><span class="op" id="2065236">)</span>&nbsp;<span class="op" id="2065238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2065241">return</span>&nbsp;<span class="ident" id="2065248">Fscan</span><span class="op" id="2065253">(</span><span class="ident" id="2065254">os</span><span class="op" id="2065256">.</span><span class="ident" id="2065257">Stdin</span><span class="op" id="2065262">,</span>&nbsp;<span class="ident" id="2065264">a</span><span class="op" id="2065265">...</span><span class="op" id="2065268">)</span><br>
<span class="lineno"></span><span class="op" id="2065270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2065273">//&nbsp;Scanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Scan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2065339">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2065395">func</span>&nbsp;<span class="ident" id="2065400">Scanln</span><span class="op" id="2065406">(</span><span class="ident" id="2065407">a</span>&nbsp;<span class="op" id="2065409">...</span><span class="keyword" id="2065412">interface</span><span class="op" id="2065421">{</span><span class="op" id="2065422">}</span><span class="op" id="2065423">)</span>&nbsp;<span class="op" id="2065425">(</span><span class="ident" id="2065426">n</span>&nbsp;<span class="builtintype" id="2065428">int</span><span class="op" id="2065431">,</span>&nbsp;<span class="ident" id="2065433">err</span>&nbsp;<span class="builtintype" id="2065437">error</span><span class="op" id="2065442">)</span>&nbsp;<span class="op" id="2065444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2065447">return</span>&nbsp;<span class="ident" id="2065454">Fscanln</span><span class="op" id="2065461">(</span><span class="ident" id="2065462">os</span><span class="op" id="2065464">.</span><span class="ident" id="2065465">Stdin</span><span class="op" id="2065470">,</span>&nbsp;<span class="ident" id="2065472">a</span><span class="op" id="2065473">...</span><span class="op" id="2065476">)</span><br>
<span class="lineno"></span><span class="op" id="2065478">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="2065481">//&nbsp;Scanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;standard&nbsp;input,&nbsp;storing&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="2065546">//&nbsp;space-separated&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2065615">//&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="2065684">func</span>&nbsp;<span class="ident" id="2065689">Scanf</span><span class="op" id="2065694">(</span><span class="ident" id="2065695">format</span>&nbsp;<span class="builtintype" id="2065702">string</span><span class="op" id="2065708">,</span>&nbsp;<span class="ident" id="2065710">a</span>&nbsp;<span class="op" id="2065712">...</span><span class="keyword" id="2065715">interface</span><span class="op" id="2065724">{</span><span class="op" id="2065725">}</span><span class="op" id="2065726">)</span>&nbsp;<span class="op" id="2065728">(</span><span class="ident" id="2065729">n</span>&nbsp;<span class="builtintype" id="2065731">int</span><span class="op" id="2065734">,</span>&nbsp;<span class="ident" id="2065736">err</span>&nbsp;<span class="builtintype" id="2065740">error</span><span class="op" id="2065745">)</span>&nbsp;<span class="op" id="2065747">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2065750">return</span>&nbsp;<span class="ident" id="2065757">Fscanf</span><span class="op" id="2065763">(</span><span class="ident" id="2065764">os</span><span class="op" id="2065766">.</span><span class="ident" id="2065767">Stdin</span><span class="op" id="2065772">,</span>&nbsp;<span class="ident" id="2065774">format</span><span class="op" id="2065780">,</span>&nbsp;<span class="ident" id="2065782">a</span><span class="op" id="2065783">...</span><span class="op" id="2065786">)</span><br>
<span class="lineno"></span><span class="op" id="2065788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2065791">type</span>&nbsp;<span class="ident" id="2065796">stringReader</span>&nbsp;<span class="builtintype" id="2065809">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="2065817">func</span>&nbsp;<span class="op" id="2065822">(</span><span class="ident" id="2065823">r</span>&nbsp;<span class="op" id="2065825">*</span><span class="ident" id="2065826">stringReader</span><span class="op" id="2065838">)</span>&nbsp;<span class="ident" id="2065840">Read</span><span class="op" id="2065844">(</span><span class="ident" id="2065845">b</span>&nbsp;<span class="op" id="2065847">[</span><span class="op" id="2065848">]</span><span class="builtintype" id="2065849">byte</span><span class="op" id="2065853">)</span>&nbsp;<span class="op" id="2065855">(</span><span class="ident" id="2065856">n</span>&nbsp;<span class="builtintype" id="2065858">int</span><span class="op" id="2065861">,</span>&nbsp;<span class="ident" id="2065863">err</span>&nbsp;<span class="builtintype" id="2065867">error</span><span class="op" id="2065872">)</span>&nbsp;<span class="op" id="2065874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2065877">n</span>&nbsp;<span class="op" id="2065879">=</span>&nbsp;<span class="builtinfunc" id="2065881">copy</span><span class="op" id="2065885">(</span><span class="ident" id="2065886">b</span><span class="op" id="2065887">,</span>&nbsp;<span class="op" id="2065889">*</span><span class="ident" id="2065890">r</span><span class="op" id="2065891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2065894">*</span><span class="ident" id="2065895">r</span>&nbsp;<span class="op" id="2065897">=</span>&nbsp;<span class="op" id="2065899">(</span><span class="op" id="2065900">*</span><span class="ident" id="2065901">r</span><span class="op" id="2065902">)</span><span class="op" id="2065903">[</span><span class="ident" id="2065904">n</span><span class="op" id="2065905">:</span><span class="op" id="2065906">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2065909">if</span>&nbsp;<span class="ident" id="2065912">n</span>&nbsp;<span class="op" id="2065914">==</span>&nbsp;<span class="num" id="2065917">0</span>&nbsp;<span class="op" id="2065919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2065923">err</span>&nbsp;<span class="op" id="2065927">=</span>&nbsp;<span class="ident" id="2065929">io</span><span class="op" id="2065931">.</span><span class="ident" id="2065932">EOF</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2065937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2065940">return</span><br>
<span class="lineno"></span><span class="op" id="2065947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2065950">//&nbsp;Sscan&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno">100</span><span class="comment" id="2066021">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2066088">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="2066158">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2066212">func</span>&nbsp;<span class="ident" id="2066217">Sscan</span><span class="op" id="2066222">(</span><span class="ident" id="2066223">str</span>&nbsp;<span class="builtintype" id="2066227">string</span><span class="op" id="2066233">,</span>&nbsp;<span class="ident" id="2066235">a</span>&nbsp;<span class="op" id="2066237">...</span><span class="keyword" id="2066240">interface</span><span class="op" id="2066249">{</span><span class="op" id="2066250">}</span><span class="op" id="2066251">)</span>&nbsp;<span class="op" id="2066253">(</span><span class="ident" id="2066254">n</span>&nbsp;<span class="builtintype" id="2066256">int</span><span class="op" id="2066259">,</span>&nbsp;<span class="ident" id="2066261">err</span>&nbsp;<span class="builtintype" id="2066265">error</span><span class="op" id="2066270">)</span>&nbsp;<span class="op" id="2066272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2066275">return</span>&nbsp;<span class="ident" id="2066282">Fscan</span><span class="op" id="2066287">(</span><span class="op" id="2066288">(</span><span class="op" id="2066289">*</span><span class="ident" id="2066290">stringReader</span><span class="op" id="2066302">)</span><span class="op" id="2066303">(</span><span class="op" id="2066304">&amp;</span><span class="ident" id="2066305">str</span><span class="op" id="2066308">)</span><span class="op" id="2066309">,</span>&nbsp;<span class="ident" id="2066311">a</span><span class="op" id="2066312">...</span><span class="op" id="2066315">)</span><br>
<span class="lineno">105</span><span class="op" id="2066317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2066320">//&nbsp;Sscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Sscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2066388">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2066444">func</span>&nbsp;<span class="ident" id="2066449">Sscanln</span><span class="op" id="2066456">(</span><span class="ident" id="2066457">str</span>&nbsp;<span class="builtintype" id="2066461">string</span><span class="op" id="2066467">,</span>&nbsp;<span class="ident" id="2066469">a</span>&nbsp;<span class="op" id="2066471">...</span><span class="keyword" id="2066474">interface</span><span class="op" id="2066483">{</span><span class="op" id="2066484">}</span><span class="op" id="2066485">)</span>&nbsp;<span class="op" id="2066487">(</span><span class="ident" id="2066488">n</span>&nbsp;<span class="builtintype" id="2066490">int</span><span class="op" id="2066493">,</span>&nbsp;<span class="ident" id="2066495">err</span>&nbsp;<span class="builtintype" id="2066499">error</span><span class="op" id="2066504">)</span>&nbsp;<span class="op" id="2066506">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2066509">return</span>&nbsp;<span class="ident" id="2066516">Fscanln</span><span class="op" id="2066523">(</span><span class="op" id="2066524">(</span><span class="op" id="2066525">*</span><span class="ident" id="2066526">stringReader</span><span class="op" id="2066538">)</span><span class="op" id="2066539">(</span><span class="op" id="2066540">&amp;</span><span class="ident" id="2066541">str</span><span class="op" id="2066544">)</span><span class="op" id="2066545">,</span>&nbsp;<span class="ident" id="2066547">a</span><span class="op" id="2066548">...</span><span class="op" id="2066551">)</span><br>
<span class="lineno"></span><span class="op" id="2066553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2066556">//&nbsp;Sscanf&nbsp;scans&nbsp;the&nbsp;argument&nbsp;string,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2066628">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno">115</span><span class="comment" id="2066697">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="2066749">func</span>&nbsp;<span class="ident" id="2066754">Sscanf</span><span class="op" id="2066760">(</span><span class="ident" id="2066761">str</span>&nbsp;<span class="builtintype" id="2066765">string</span><span class="op" id="2066771">,</span>&nbsp;<span class="ident" id="2066773">format</span>&nbsp;<span class="builtintype" id="2066780">string</span><span class="op" id="2066786">,</span>&nbsp;<span class="ident" id="2066788">a</span>&nbsp;<span class="op" id="2066790">...</span><span class="keyword" id="2066793">interface</span><span class="op" id="2066802">{</span><span class="op" id="2066803">}</span><span class="op" id="2066804">)</span>&nbsp;<span class="op" id="2066806">(</span><span class="ident" id="2066807">n</span>&nbsp;<span class="builtintype" id="2066809">int</span><span class="op" id="2066812">,</span>&nbsp;<span class="ident" id="2066814">err</span>&nbsp;<span class="builtintype" id="2066818">error</span><span class="op" id="2066823">)</span>&nbsp;<span class="op" id="2066825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2066828">return</span>&nbsp;<span class="ident" id="2066835">Fscanf</span><span class="op" id="2066841">(</span><span class="op" id="2066842">(</span><span class="op" id="2066843">*</span><span class="ident" id="2066844">stringReader</span><span class="op" id="2066856">)</span><span class="op" id="2066857">(</span><span class="op" id="2066858">&amp;</span><span class="ident" id="2066859">str</span><span class="op" id="2066862">)</span><span class="op" id="2066863">,</span>&nbsp;<span class="ident" id="2066865">format</span><span class="op" id="2066871">,</span>&nbsp;<span class="ident" id="2066873">a</span><span class="op" id="2066874">...</span><span class="op" id="2066877">)</span><br>
<span class="lineno"></span><span class="op" id="2066879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="2066882">//&nbsp;Fscan&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2066950">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments.&nbsp;&nbsp;Newlines&nbsp;count&nbsp;as&nbsp;space.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2067017">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;scanned.&nbsp;&nbsp;If&nbsp;that&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="2067087">//&nbsp;than&nbsp;the&nbsp;number&nbsp;of&nbsp;arguments,&nbsp;err&nbsp;will&nbsp;report&nbsp;why.</span><br>
<span class="lineno"></span><span class="keyword" id="2067141">func</span>&nbsp;<span class="ident" id="2067146">Fscan</span><span class="op" id="2067151">(</span><span class="ident" id="2067152">r</span>&nbsp;<span class="ident" id="2067154">io</span><span class="op" id="2067156">.</span><span class="ident" id="2067157">Reader</span><span class="op" id="2067163">,</span>&nbsp;<span class="ident" id="2067165">a</span>&nbsp;<span class="op" id="2067167">...</span><span class="keyword" id="2067170">interface</span><span class="op" id="2067179">{</span><span class="op" id="2067180">}</span><span class="op" id="2067181">)</span>&nbsp;<span class="op" id="2067183">(</span><span class="ident" id="2067184">n</span>&nbsp;<span class="builtintype" id="2067186">int</span><span class="op" id="2067189">,</span>&nbsp;<span class="ident" id="2067191">err</span>&nbsp;<span class="builtintype" id="2067195">error</span><span class="op" id="2067200">)</span>&nbsp;<span class="op" id="2067202">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067205">s</span><span class="op" id="2067206">,</span>&nbsp;<span class="ident" id="2067208">old</span>&nbsp;<span class="op" id="2067212">:=</span>&nbsp;<span class="ident" id="2067215">newScanState</span><span class="op" id="2067227">(</span><span class="ident" id="2067228">r</span><span class="op" id="2067229">,</span>&nbsp;<span class="builtintype" id="2067231">true</span><span class="op" id="2067235">,</span>&nbsp;<span class="builtintype" id="2067237">false</span><span class="op" id="2067242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067245">n</span><span class="op" id="2067246">,</span>&nbsp;<span class="ident" id="2067248">err</span>&nbsp;<span class="op" id="2067252">=</span>&nbsp;<span class="ident" id="2067254">s</span><span class="op" id="2067255">.</span><span class="ident" id="2067256">doScan</span><span class="op" id="2067262">(</span><span class="ident" id="2067263">a</span><span class="op" id="2067264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067267">s</span><span class="op" id="2067268">.</span><span class="ident" id="2067269">free</span><span class="op" id="2067273">(</span><span class="ident" id="2067274">old</span><span class="op" id="2067277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2067280">return</span><br>
<span class="lineno"></span><span class="op" id="2067287">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="2067290">//&nbsp;Fscanln&nbsp;is&nbsp;similar&nbsp;to&nbsp;Fscan,&nbsp;but&nbsp;stops&nbsp;scanning&nbsp;at&nbsp;a&nbsp;newline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2067358">//&nbsp;after&nbsp;the&nbsp;final&nbsp;item&nbsp;there&nbsp;must&nbsp;be&nbsp;a&nbsp;newline&nbsp;or&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2067414">func</span>&nbsp;<span class="ident" id="2067419">Fscanln</span><span class="op" id="2067426">(</span><span class="ident" id="2067427">r</span>&nbsp;<span class="ident" id="2067429">io</span><span class="op" id="2067431">.</span><span class="ident" id="2067432">Reader</span><span class="op" id="2067438">,</span>&nbsp;<span class="ident" id="2067440">a</span>&nbsp;<span class="op" id="2067442">...</span><span class="keyword" id="2067445">interface</span><span class="op" id="2067454">{</span><span class="op" id="2067455">}</span><span class="op" id="2067456">)</span>&nbsp;<span class="op" id="2067458">(</span><span class="ident" id="2067459">n</span>&nbsp;<span class="builtintype" id="2067461">int</span><span class="op" id="2067464">,</span>&nbsp;<span class="ident" id="2067466">err</span>&nbsp;<span class="builtintype" id="2067470">error</span><span class="op" id="2067475">)</span>&nbsp;<span class="op" id="2067477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067480">s</span><span class="op" id="2067481">,</span>&nbsp;<span class="ident" id="2067483">old</span>&nbsp;<span class="op" id="2067487">:=</span>&nbsp;<span class="ident" id="2067490">newScanState</span><span class="op" id="2067502">(</span><span class="ident" id="2067503">r</span><span class="op" id="2067504">,</span>&nbsp;<span class="builtintype" id="2067506">false</span><span class="op" id="2067511">,</span>&nbsp;<span class="builtintype" id="2067513">true</span><span class="op" id="2067517">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067520">n</span><span class="op" id="2067521">,</span>&nbsp;<span class="ident" id="2067523">err</span>&nbsp;<span class="op" id="2067527">=</span>&nbsp;<span class="ident" id="2067529">s</span><span class="op" id="2067530">.</span><span class="ident" id="2067531">doScan</span><span class="op" id="2067537">(</span><span class="ident" id="2067538">a</span><span class="op" id="2067539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067542">s</span><span class="op" id="2067543">.</span><span class="ident" id="2067544">free</span><span class="op" id="2067548">(</span><span class="ident" id="2067549">old</span><span class="op" id="2067552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2067555">return</span><br>
<span class="lineno"></span><span class="op" id="2067562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="2067565">//&nbsp;Fscanf&nbsp;scans&nbsp;text&nbsp;read&nbsp;from&nbsp;r,&nbsp;storing&nbsp;successive&nbsp;space-separated</span><br>
<span class="lineno"></span><span class="comment" id="2067634">//&nbsp;values&nbsp;into&nbsp;successive&nbsp;arguments&nbsp;as&nbsp;determined&nbsp;by&nbsp;the&nbsp;format.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2067703">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;items&nbsp;successfully&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="2067755">func</span>&nbsp;<span class="ident" id="2067760">Fscanf</span><span class="op" id="2067766">(</span><span class="ident" id="2067767">r</span>&nbsp;<span class="ident" id="2067769">io</span><span class="op" id="2067771">.</span><span class="ident" id="2067772">Reader</span><span class="op" id="2067778">,</span>&nbsp;<span class="ident" id="2067780">format</span>&nbsp;<span class="builtintype" id="2067787">string</span><span class="op" id="2067793">,</span>&nbsp;<span class="ident" id="2067795">a</span>&nbsp;<span class="op" id="2067797">...</span><span class="keyword" id="2067800">interface</span><span class="op" id="2067809">{</span><span class="op" id="2067810">}</span><span class="op" id="2067811">)</span>&nbsp;<span class="op" id="2067813">(</span><span class="ident" id="2067814">n</span>&nbsp;<span class="builtintype" id="2067816">int</span><span class="op" id="2067819">,</span>&nbsp;<span class="ident" id="2067821">err</span>&nbsp;<span class="builtintype" id="2067825">error</span><span class="op" id="2067830">)</span>&nbsp;<span class="op" id="2067832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067835">s</span><span class="op" id="2067836">,</span>&nbsp;<span class="ident" id="2067838">old</span>&nbsp;<span class="op" id="2067842">:=</span>&nbsp;<span class="ident" id="2067845">newScanState</span><span class="op" id="2067857">(</span><span class="ident" id="2067858">r</span><span class="op" id="2067859">,</span>&nbsp;<span class="builtintype" id="2067861">false</span><span class="op" id="2067866">,</span>&nbsp;<span class="builtintype" id="2067868">false</span><span class="op" id="2067873">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067876">n</span><span class="op" id="2067877">,</span>&nbsp;<span class="ident" id="2067879">err</span>&nbsp;<span class="op" id="2067883">=</span>&nbsp;<span class="ident" id="2067885">s</span><span class="op" id="2067886">.</span><span class="ident" id="2067887">doScanf</span><span class="op" id="2067894">(</span><span class="ident" id="2067895">format</span><span class="op" id="2067901">,</span>&nbsp;<span class="ident" id="2067903">a</span><span class="op" id="2067904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2067907">s</span><span class="op" id="2067908">.</span><span class="ident" id="2067909">free</span><span class="op" id="2067913">(</span><span class="ident" id="2067914">old</span><span class="op" id="2067917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2067920">return</span><br>
<span class="lineno"></span><span class="op" id="2067927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="2067930">//&nbsp;scanError&nbsp;represents&nbsp;an&nbsp;error&nbsp;generated&nbsp;by&nbsp;the&nbsp;scanning&nbsp;software.</span><br>
<span class="lineno"></span><span class="comment" id="2067999">//&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;unique&nbsp;signature&nbsp;to&nbsp;identify&nbsp;such&nbsp;errors&nbsp;when&nbsp;recovering.</span><br>
<span class="lineno"></span><span class="keyword" id="2068075">type</span>&nbsp;<span class="ident" id="2068080">scanError</span>&nbsp;<span class="keyword" id="2068090">struct</span>&nbsp;<span class="op" id="2068097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068100">err</span>&nbsp;<span class="builtintype" id="2068104">error</span><br>
<span class="lineno"></span><span class="op" id="2068110">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="2068113">const</span>&nbsp;<span class="ident" id="2068119">eof</span>&nbsp;<span class="op" id="2068123">=</span>&nbsp;<span class="op" id="2068125">-</span><span class="num" id="2068126">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2068129">//&nbsp;ss&nbsp;is&nbsp;the&nbsp;internal&nbsp;implementation&nbsp;of&nbsp;ScanState.</span><br>
<span class="lineno"></span><span class="keyword" id="2068180">type</span>&nbsp;<span class="ident" id="2068185">ss</span>&nbsp;<span class="keyword" id="2068188">struct</span>&nbsp;<span class="op" id="2068195">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068198">rr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068207">io</span><span class="op" id="2068209">.</span><span class="ident" id="2068210">RuneReader</span>&nbsp;<span class="comment" id="2068221">//&nbsp;where&nbsp;to&nbsp;read&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068245">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068254">buffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2068268">//&nbsp;token&nbsp;accumulator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068290">peekRune</span>&nbsp;<span class="builtintype" id="2068299">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2068313">//&nbsp;one-rune&nbsp;lookahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068336">prevRune</span>&nbsp;<span class="builtintype" id="2068345">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2068359">//&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068394">count</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2068403">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2068417">//&nbsp;runes&nbsp;consumed&nbsp;so&nbsp;far.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068444">atEOF</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2068453">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2068467">//&nbsp;already&nbsp;read&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068488">ssave</span><br>
<span class="lineno"></span><span class="op" id="2068494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2068497">//&nbsp;ssave&nbsp;holds&nbsp;the&nbsp;parts&nbsp;of&nbsp;ss&nbsp;that&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno">170</span><span class="comment" id="2068544">//&nbsp;saved&nbsp;and&nbsp;restored&nbsp;on&nbsp;recursive&nbsp;scans.</span><br>
<span class="lineno"></span><span class="keyword" id="2068586">type</span>&nbsp;<span class="ident" id="2068591">ssave</span>&nbsp;<span class="keyword" id="2068597">struct</span>&nbsp;<span class="op" id="2068604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068607">validSave</span>&nbsp;<span class="builtintype" id="2068617">bool</span>&nbsp;<span class="comment" id="2068622">//&nbsp;is&nbsp;or&nbsp;was&nbsp;a&nbsp;part&nbsp;of&nbsp;an&nbsp;actual&nbsp;ss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068660">nlIsEnd</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2068670">bool</span>&nbsp;<span class="comment" id="2068675">//&nbsp;whether&nbsp;newline&nbsp;terminates&nbsp;scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068711">nlIsSpace</span>&nbsp;<span class="builtintype" id="2068721">bool</span>&nbsp;<span class="comment" id="2068726">//&nbsp;whether&nbsp;newline&nbsp;counts&nbsp;as&nbsp;white&nbsp;space</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068768">argLimit</span>&nbsp;&nbsp;<span class="builtintype" id="2068778">int</span>&nbsp;&nbsp;<span class="comment" id="2068783">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count&nbsp;for&nbsp;this&nbsp;arg;&nbsp;argLimit&nbsp;&lt;=&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068841">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2068851">int</span>&nbsp;&nbsp;<span class="comment" id="2068856">//&nbsp;max&nbsp;value&nbsp;of&nbsp;ss.count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2068883">maxWid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2068893">int</span>&nbsp;&nbsp;<span class="comment" id="2068898">//&nbsp;width&nbsp;of&nbsp;this&nbsp;arg.</span><br>
<span class="lineno"></span><span class="op" id="2068920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2068923">//&nbsp;The&nbsp;Read&nbsp;method&nbsp;is&nbsp;only&nbsp;in&nbsp;ScanState&nbsp;so&nbsp;that&nbsp;ScanState</span><br>
<span class="lineno"></span><span class="comment" id="2068981">//&nbsp;satisfies&nbsp;io.Reader.&nbsp;It&nbsp;will&nbsp;never&nbsp;be&nbsp;called&nbsp;when&nbsp;used&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2069042">//&nbsp;intended,&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;make&nbsp;it&nbsp;actually&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="2069101">func</span>&nbsp;<span class="op" id="2069106">(</span><span class="ident" id="2069107">s</span>&nbsp;<span class="op" id="2069109">*</span><span class="ident" id="2069110">ss</span><span class="op" id="2069112">)</span>&nbsp;<span class="ident" id="2069114">Read</span><span class="op" id="2069118">(</span><span class="ident" id="2069119">buf</span>&nbsp;<span class="op" id="2069123">[</span><span class="op" id="2069124">]</span><span class="builtintype" id="2069125">byte</span><span class="op" id="2069129">)</span>&nbsp;<span class="op" id="2069131">(</span><span class="ident" id="2069132">n</span>&nbsp;<span class="builtintype" id="2069134">int</span><span class="op" id="2069137">,</span>&nbsp;<span class="ident" id="2069139">err</span>&nbsp;<span class="builtintype" id="2069143">error</span><span class="op" id="2069148">)</span>&nbsp;<span class="op" id="2069150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069153">return</span>&nbsp;<span class="num" id="2069160">0</span><span class="op" id="2069161">,</span>&nbsp;<span class="ident" id="2069163">errors</span><span class="op" id="2069169">.</span><span class="ident" id="2069170">New</span><span class="op" id="2069173">(</span><span class="string" id="2069174">&#34;ScanState&#39;s&nbsp;Read&nbsp;should&nbsp;not&nbsp;be&nbsp;called.&nbsp;Use&nbsp;ReadRune&#34;</span><span class="op" id="2069227">)</span><br>
<span class="lineno">185</span><span class="op" id="2069229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2069232">func</span>&nbsp;<span class="op" id="2069237">(</span><span class="ident" id="2069238">s</span>&nbsp;<span class="op" id="2069240">*</span><span class="ident" id="2069241">ss</span><span class="op" id="2069243">)</span>&nbsp;<span class="ident" id="2069245">ReadRune</span><span class="op" id="2069253">(</span><span class="op" id="2069254">)</span>&nbsp;<span class="op" id="2069256">(</span><span class="ident" id="2069257">r</span>&nbsp;<span class="builtintype" id="2069259">rune</span><span class="op" id="2069263">,</span>&nbsp;<span class="ident" id="2069265">size</span>&nbsp;<span class="builtintype" id="2069270">int</span><span class="op" id="2069273">,</span>&nbsp;<span class="ident" id="2069275">err</span>&nbsp;<span class="builtintype" id="2069279">error</span><span class="op" id="2069284">)</span>&nbsp;<span class="op" id="2069286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069289">if</span>&nbsp;<span class="ident" id="2069292">s</span><span class="op" id="2069293">.</span><span class="ident" id="2069294">peekRune</span>&nbsp;<span class="op" id="2069303">&gt;=</span>&nbsp;<span class="num" id="2069306">0</span>&nbsp;<span class="op" id="2069308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069312">s</span><span class="op" id="2069313">.</span><span class="ident" id="2069314">count</span><span class="op" id="2069319">++</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069324">r</span>&nbsp;<span class="op" id="2069326">=</span>&nbsp;<span class="ident" id="2069328">s</span><span class="op" id="2069329">.</span><span class="ident" id="2069330">peekRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069341">size</span>&nbsp;<span class="op" id="2069346">=</span>&nbsp;<span class="ident" id="2069348">utf8</span><span class="op" id="2069352">.</span><span class="ident" id="2069353">RuneLen</span><span class="op" id="2069360">(</span><span class="ident" id="2069361">r</span><span class="op" id="2069362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069366">s</span><span class="op" id="2069367">.</span><span class="ident" id="2069368">prevRune</span>&nbsp;<span class="op" id="2069377">=</span>&nbsp;<span class="ident" id="2069379">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069383">s</span><span class="op" id="2069384">.</span><span class="ident" id="2069385">peekRune</span>&nbsp;<span class="op" id="2069394">=</span>&nbsp;<span class="op" id="2069396">-</span><span class="num" id="2069397">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069401">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2069409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069412">if</span>&nbsp;<span class="ident" id="2069415">s</span><span class="op" id="2069416">.</span><span class="ident" id="2069417">atEOF</span>&nbsp;<span class="op" id="2069423">||</span>&nbsp;<span class="ident" id="2069426">s</span><span class="op" id="2069427">.</span><span class="ident" id="2069428">nlIsEnd</span>&nbsp;<span class="op" id="2069436">&amp;&amp;</span>&nbsp;<span class="ident" id="2069439">s</span><span class="op" id="2069440">.</span><span class="ident" id="2069441">prevRune</span>&nbsp;<span class="op" id="2069450">==</span>&nbsp;<span class="string" id="2069453">&#39;\n&#39;</span>&nbsp;<span class="op" id="2069458">||</span>&nbsp;<span class="ident" id="2069461">s</span><span class="op" id="2069462">.</span><span class="ident" id="2069463">count</span>&nbsp;<span class="op" id="2069469">&gt;=</span>&nbsp;<span class="ident" id="2069472">s</span><span class="op" id="2069473">.</span><span class="ident" id="2069474">argLimit</span>&nbsp;<span class="op" id="2069483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069487">err</span>&nbsp;<span class="op" id="2069491">=</span>&nbsp;<span class="ident" id="2069493">io</span><span class="op" id="2069495">.</span><span class="ident" id="2069496">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069502">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2069510">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069514">r</span><span class="op" id="2069515">,</span>&nbsp;<span class="ident" id="2069517">size</span><span class="op" id="2069521">,</span>&nbsp;<span class="ident" id="2069523">err</span>&nbsp;<span class="op" id="2069527">=</span>&nbsp;<span class="ident" id="2069529">s</span><span class="op" id="2069530">.</span><span class="ident" id="2069531">rr</span><span class="op" id="2069533">.</span><span class="ident" id="2069534">ReadRune</span><span class="op" id="2069542">(</span><span class="op" id="2069543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069546">if</span>&nbsp;<span class="ident" id="2069549">err</span>&nbsp;<span class="op" id="2069553">==</span>&nbsp;<span class="builtintype" id="2069556">nil</span>&nbsp;<span class="op" id="2069560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069564">s</span><span class="op" id="2069565">.</span><span class="ident" id="2069566">count</span><span class="op" id="2069571">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069576">s</span><span class="op" id="2069577">.</span><span class="ident" id="2069578">prevRune</span>&nbsp;<span class="op" id="2069587">=</span>&nbsp;<span class="ident" id="2069589">r</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2069592">}</span>&nbsp;<span class="keyword" id="2069594">else</span>&nbsp;<span class="keyword" id="2069599">if</span>&nbsp;<span class="ident" id="2069602">err</span>&nbsp;<span class="op" id="2069606">==</span>&nbsp;<span class="ident" id="2069609">io</span><span class="op" id="2069611">.</span><span class="ident" id="2069612">EOF</span>&nbsp;<span class="op" id="2069616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069620">s</span><span class="op" id="2069621">.</span><span class="ident" id="2069622">atEOF</span>&nbsp;<span class="op" id="2069628">=</span>&nbsp;<span class="builtintype" id="2069630">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2069636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069639">return</span><br>
<span class="lineno"></span><span class="op" id="2069646">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="2069649">func</span>&nbsp;<span class="op" id="2069654">(</span><span class="ident" id="2069655">s</span>&nbsp;<span class="op" id="2069657">*</span><span class="ident" id="2069658">ss</span><span class="op" id="2069660">)</span>&nbsp;<span class="ident" id="2069662">Width</span><span class="op" id="2069667">(</span><span class="op" id="2069668">)</span>&nbsp;<span class="op" id="2069670">(</span><span class="ident" id="2069671">wid</span>&nbsp;<span class="builtintype" id="2069675">int</span><span class="op" id="2069678">,</span>&nbsp;<span class="ident" id="2069680">ok</span>&nbsp;<span class="builtintype" id="2069683">bool</span><span class="op" id="2069687">)</span>&nbsp;<span class="op" id="2069689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069692">if</span>&nbsp;<span class="ident" id="2069695">s</span><span class="op" id="2069696">.</span><span class="ident" id="2069697">maxWid</span>&nbsp;<span class="op" id="2069704">==</span>&nbsp;<span class="ident" id="2069707">hugeWid</span>&nbsp;<span class="op" id="2069715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069719">return</span>&nbsp;<span class="num" id="2069726">0</span><span class="op" id="2069727">,</span>&nbsp;<span class="builtintype" id="2069729">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2069736">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069739">return</span>&nbsp;<span class="ident" id="2069746">s</span><span class="op" id="2069747">.</span><span class="ident" id="2069748">maxWid</span><span class="op" id="2069754">,</span>&nbsp;<span class="builtintype" id="2069756">true</span><br>
<span class="lineno"></span><span class="op" id="2069761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2069764">//&nbsp;The&nbsp;public&nbsp;method&nbsp;returns&nbsp;an&nbsp;error;&nbsp;this&nbsp;private&nbsp;one&nbsp;panics.</span><br>
<span class="lineno"></span><span class="comment" id="2069828">//&nbsp;If&nbsp;getRune&nbsp;reaches&nbsp;EOF,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;EOF&nbsp;(-1).</span><br>
<span class="lineno">220</span><span class="keyword" id="2069885">func</span>&nbsp;<span class="op" id="2069890">(</span><span class="ident" id="2069891">s</span>&nbsp;<span class="op" id="2069893">*</span><span class="ident" id="2069894">ss</span><span class="op" id="2069896">)</span>&nbsp;<span class="ident" id="2069898">getRune</span><span class="op" id="2069905">(</span><span class="op" id="2069906">)</span>&nbsp;<span class="op" id="2069908">(</span><span class="ident" id="2069909">r</span>&nbsp;<span class="builtintype" id="2069911">rune</span><span class="op" id="2069915">)</span>&nbsp;<span class="op" id="2069917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2069920">r</span><span class="op" id="2069921">,</span>&nbsp;<span class="ident" id="2069923">_</span><span class="op" id="2069924">,</span>&nbsp;<span class="ident" id="2069926">err</span>&nbsp;<span class="op" id="2069930">:=</span>&nbsp;<span class="ident" id="2069933">s</span><span class="op" id="2069934">.</span><span class="ident" id="2069935">ReadRune</span><span class="op" id="2069943">(</span><span class="op" id="2069944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069947">if</span>&nbsp;<span class="ident" id="2069950">err</span>&nbsp;<span class="op" id="2069954">!=</span>&nbsp;<span class="builtintype" id="2069957">nil</span>&nbsp;<span class="op" id="2069961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069965">if</span>&nbsp;<span class="ident" id="2069968">err</span>&nbsp;<span class="op" id="2069972">==</span>&nbsp;<span class="ident" id="2069975">io</span><span class="op" id="2069977">.</span><span class="ident" id="2069978">EOF</span>&nbsp;<span class="op" id="2069982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2069987">return</span>&nbsp;<span class="ident" id="2069994">eof</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070004">s</span><span class="op" id="2070005">.</span><span class="builtintype" id="2070006">error</span><span class="op" id="2070011">(</span><span class="ident" id="2070012">err</span><span class="op" id="2070015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070021">return</span><br>
<span class="lineno"></span><span class="op" id="2070028">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2070031">//&nbsp;mustReadRune&nbsp;turns&nbsp;io.EOF&nbsp;into&nbsp;a&nbsp;panic(io.ErrUnexpectedEOF).</span><br>
<span class="lineno"></span><span class="comment" id="2070095">//&nbsp;It&nbsp;is&nbsp;called&nbsp;in&nbsp;cases&nbsp;such&nbsp;as&nbsp;string&nbsp;scanning&nbsp;where&nbsp;an&nbsp;EOF&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2070162">//&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="2070179">func</span>&nbsp;<span class="op" id="2070184">(</span><span class="ident" id="2070185">s</span>&nbsp;<span class="op" id="2070187">*</span><span class="ident" id="2070188">ss</span><span class="op" id="2070190">)</span>&nbsp;<span class="ident" id="2070192">mustReadRune</span><span class="op" id="2070204">(</span><span class="op" id="2070205">)</span>&nbsp;<span class="op" id="2070207">(</span><span class="ident" id="2070208">r</span>&nbsp;<span class="builtintype" id="2070210">rune</span><span class="op" id="2070214">)</span>&nbsp;<span class="op" id="2070216">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070219">r</span>&nbsp;<span class="op" id="2070221">=</span>&nbsp;<span class="ident" id="2070223">s</span><span class="op" id="2070224">.</span><span class="ident" id="2070225">getRune</span><span class="op" id="2070232">(</span><span class="op" id="2070233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070236">if</span>&nbsp;<span class="ident" id="2070239">r</span>&nbsp;<span class="op" id="2070241">==</span>&nbsp;<span class="ident" id="2070244">eof</span>&nbsp;<span class="op" id="2070248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070252">s</span><span class="op" id="2070253">.</span><span class="builtintype" id="2070254">error</span><span class="op" id="2070259">(</span><span class="ident" id="2070260">io</span><span class="op" id="2070262">.</span><span class="ident" id="2070263">ErrUnexpectedEOF</span><span class="op" id="2070279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070285">return</span><br>
<span class="lineno">240</span><span class="op" id="2070292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2070295">func</span>&nbsp;<span class="op" id="2070300">(</span><span class="ident" id="2070301">s</span>&nbsp;<span class="op" id="2070303">*</span><span class="ident" id="2070304">ss</span><span class="op" id="2070306">)</span>&nbsp;<span class="ident" id="2070308">UnreadRune</span><span class="op" id="2070318">(</span><span class="op" id="2070319">)</span>&nbsp;<span class="builtintype" id="2070321">error</span>&nbsp;<span class="op" id="2070327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070330">if</span>&nbsp;<span class="ident" id="2070333">u</span><span class="op" id="2070334">,</span>&nbsp;<span class="ident" id="2070336">ok</span>&nbsp;<span class="op" id="2070339">:=</span>&nbsp;<span class="ident" id="2070342">s</span><span class="op" id="2070343">.</span><span class="ident" id="2070344">rr</span><span class="op" id="2070346">.</span><span class="op" id="2070347">(</span><span class="ident" id="2070348">runeUnreader</span><span class="op" id="2070360">)</span><span class="op" id="2070361">;</span>&nbsp;<span class="ident" id="2070363">ok</span>&nbsp;<span class="op" id="2070366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070370">u</span><span class="op" id="2070371">.</span><span class="ident" id="2070372">UnreadRune</span><span class="op" id="2070382">(</span><span class="op" id="2070383">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070386">}</span>&nbsp;<span class="keyword" id="2070388">else</span>&nbsp;<span class="op" id="2070393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070397">s</span><span class="op" id="2070398">.</span><span class="ident" id="2070399">peekRune</span>&nbsp;<span class="op" id="2070408">=</span>&nbsp;<span class="ident" id="2070410">s</span><span class="op" id="2070411">.</span><span class="ident" id="2070412">prevRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070425">s</span><span class="op" id="2070426">.</span><span class="ident" id="2070427">prevRune</span>&nbsp;<span class="op" id="2070436">=</span>&nbsp;<span class="op" id="2070438">-</span><span class="num" id="2070439">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070442">s</span><span class="op" id="2070443">.</span><span class="ident" id="2070444">count</span><span class="op" id="2070449">--</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070453">return</span>&nbsp;<span class="builtintype" id="2070460">nil</span><br>
<span class="lineno"></span><span class="op" id="2070464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2070467">func</span>&nbsp;<span class="op" id="2070472">(</span><span class="ident" id="2070473">s</span>&nbsp;<span class="op" id="2070475">*</span><span class="ident" id="2070476">ss</span><span class="op" id="2070478">)</span>&nbsp;<span class="builtintype" id="2070480">error</span><span class="op" id="2070485">(</span><span class="ident" id="2070486">err</span>&nbsp;<span class="builtintype" id="2070490">error</span><span class="op" id="2070495">)</span>&nbsp;<span class="op" id="2070497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2070500">panic</span><span class="op" id="2070505">(</span><span class="ident" id="2070506">scanError</span><span class="op" id="2070515">{</span><span class="ident" id="2070516">err</span><span class="op" id="2070519">}</span><span class="op" id="2070520">)</span><br>
<span class="lineno">255</span><span class="op" id="2070522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2070525">func</span>&nbsp;<span class="op" id="2070530">(</span><span class="ident" id="2070531">s</span>&nbsp;<span class="op" id="2070533">*</span><span class="ident" id="2070534">ss</span><span class="op" id="2070536">)</span>&nbsp;<span class="ident" id="2070538">errorString</span><span class="op" id="2070549">(</span><span class="ident" id="2070550">err</span>&nbsp;<span class="builtintype" id="2070554">string</span><span class="op" id="2070560">)</span>&nbsp;<span class="op" id="2070562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2070565">panic</span><span class="op" id="2070570">(</span><span class="ident" id="2070571">scanError</span><span class="op" id="2070580">{</span><span class="ident" id="2070581">errors</span><span class="op" id="2070587">.</span><span class="ident" id="2070588">New</span><span class="op" id="2070591">(</span><span class="ident" id="2070592">err</span><span class="op" id="2070595">)</span><span class="op" id="2070596">}</span><span class="op" id="2070597">)</span><br>
<span class="lineno"></span><span class="op" id="2070599">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="2070602">func</span>&nbsp;<span class="op" id="2070607">(</span><span class="ident" id="2070608">s</span>&nbsp;<span class="op" id="2070610">*</span><span class="ident" id="2070611">ss</span><span class="op" id="2070613">)</span>&nbsp;<span class="ident" id="2070615">Token</span><span class="op" id="2070620">(</span><span class="ident" id="2070621">skipSpace</span>&nbsp;<span class="builtintype" id="2070631">bool</span><span class="op" id="2070635">,</span>&nbsp;<span class="ident" id="2070637">f</span>&nbsp;<span class="keyword" id="2070639">func</span><span class="op" id="2070643">(</span><span class="builtintype" id="2070644">rune</span><span class="op" id="2070648">)</span>&nbsp;<span class="builtintype" id="2070650">bool</span><span class="op" id="2070654">)</span>&nbsp;<span class="op" id="2070656">(</span><span class="ident" id="2070657">tok</span>&nbsp;<span class="op" id="2070661">[</span><span class="op" id="2070662">]</span><span class="builtintype" id="2070663">byte</span><span class="op" id="2070667">,</span>&nbsp;<span class="ident" id="2070669">err</span>&nbsp;<span class="builtintype" id="2070673">error</span><span class="op" id="2070678">)</span>&nbsp;<span class="op" id="2070680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070683">defer</span>&nbsp;<span class="keyword" id="2070689">func</span><span class="op" id="2070693">(</span><span class="op" id="2070694">)</span>&nbsp;<span class="op" id="2070696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070700">if</span>&nbsp;<span class="ident" id="2070703">e</span>&nbsp;<span class="op" id="2070705">:=</span>&nbsp;<span class="builtinfunc" id="2070708">recover</span><span class="op" id="2070715">(</span><span class="op" id="2070716">)</span><span class="op" id="2070717">;</span>&nbsp;<span class="ident" id="2070719">e</span>&nbsp;<span class="op" id="2070721">!=</span>&nbsp;<span class="builtintype" id="2070724">nil</span>&nbsp;<span class="op" id="2070728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070733">if</span>&nbsp;<span class="ident" id="2070736">se</span><span class="op" id="2070738">,</span>&nbsp;<span class="ident" id="2070740">ok</span>&nbsp;<span class="op" id="2070743">:=</span>&nbsp;<span class="ident" id="2070746">e</span><span class="op" id="2070747">.</span><span class="op" id="2070748">(</span><span class="ident" id="2070749">scanError</span><span class="op" id="2070758">)</span><span class="op" id="2070759">;</span>&nbsp;<span class="ident" id="2070761">ok</span>&nbsp;<span class="op" id="2070764">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070770">err</span>&nbsp;<span class="op" id="2070774">=</span>&nbsp;<span class="ident" id="2070776">se</span><span class="op" id="2070778">.</span><span class="ident" id="2070779">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070786">}</span>&nbsp;<span class="keyword" id="2070788">else</span>&nbsp;<span class="op" id="2070793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2070799">panic</span><span class="op" id="2070804">(</span><span class="ident" id="2070805">e</span><span class="op" id="2070806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070815">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070818">}</span><span class="op" id="2070819">(</span><span class="op" id="2070820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070823">if</span>&nbsp;<span class="ident" id="2070826">f</span>&nbsp;<span class="op" id="2070828">==</span>&nbsp;<span class="builtintype" id="2070831">nil</span>&nbsp;<span class="op" id="2070835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070839">f</span>&nbsp;<span class="op" id="2070841">=</span>&nbsp;<span class="ident" id="2070843">notSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2070853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070856">s</span><span class="op" id="2070857">.</span><span class="ident" id="2070858">buf</span>&nbsp;<span class="op" id="2070862">=</span>&nbsp;<span class="ident" id="2070864">s</span><span class="op" id="2070865">.</span><span class="ident" id="2070866">buf</span><span class="op" id="2070869">[</span><span class="op" id="2070870">:</span><span class="num" id="2070871">0</span><span class="op" id="2070872">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2070875">tok</span>&nbsp;<span class="op" id="2070879">=</span>&nbsp;<span class="ident" id="2070881">s</span><span class="op" id="2070882">.</span><span class="ident" id="2070883">token</span><span class="op" id="2070888">(</span><span class="ident" id="2070889">skipSpace</span><span class="op" id="2070898">,</span>&nbsp;<span class="ident" id="2070900">f</span><span class="op" id="2070901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2070904">return</span><br>
<span class="lineno"></span><span class="op" id="2070911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2070914">//&nbsp;space&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;unicode.White_Space&nbsp;ranges,</span><br>
<span class="lineno">280</span><span class="comment" id="2070968">//&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;package&nbsp;unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="2071010">var</span>&nbsp;<span class="ident" id="2071014">space</span>&nbsp;<span class="op" id="2071020">=</span>&nbsp;<span class="op" id="2071022">[</span><span class="op" id="2071023">]</span><span class="op" id="2071024">[</span><span class="num" id="2071025">2</span><span class="op" id="2071026">]</span><span class="builtintype" id="2071027">uint16</span><span class="op" id="2071033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071036">{</span><span class="num" id="2071037">0x0009</span><span class="op" id="2071043">,</span>&nbsp;<span class="num" id="2071045">0x000d</span><span class="op" id="2071051">}</span><span class="op" id="2071052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071055">{</span><span class="num" id="2071056">0x0020</span><span class="op" id="2071062">,</span>&nbsp;<span class="num" id="2071064">0x0020</span><span class="op" id="2071070">}</span><span class="op" id="2071071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071074">{</span><span class="num" id="2071075">0x0085</span><span class="op" id="2071081">,</span>&nbsp;<span class="num" id="2071083">0x0085</span><span class="op" id="2071089">}</span><span class="op" id="2071090">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071093">{</span><span class="num" id="2071094">0x00a0</span><span class="op" id="2071100">,</span>&nbsp;<span class="num" id="2071102">0x00a0</span><span class="op" id="2071108">}</span><span class="op" id="2071109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071112">{</span><span class="num" id="2071113">0x1680</span><span class="op" id="2071119">,</span>&nbsp;<span class="num" id="2071121">0x1680</span><span class="op" id="2071127">}</span><span class="op" id="2071128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071131">{</span><span class="num" id="2071132">0x2000</span><span class="op" id="2071138">,</span>&nbsp;<span class="num" id="2071140">0x200a</span><span class="op" id="2071146">}</span><span class="op" id="2071147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071150">{</span><span class="num" id="2071151">0x2028</span><span class="op" id="2071157">,</span>&nbsp;<span class="num" id="2071159">0x2029</span><span class="op" id="2071165">}</span><span class="op" id="2071166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071169">{</span><span class="num" id="2071170">0x202f</span><span class="op" id="2071176">,</span>&nbsp;<span class="num" id="2071178">0x202f</span><span class="op" id="2071184">}</span><span class="op" id="2071185">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071188">{</span><span class="num" id="2071189">0x205f</span><span class="op" id="2071195">,</span>&nbsp;<span class="num" id="2071197">0x205f</span><span class="op" id="2071203">}</span><span class="op" id="2071204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071207">{</span><span class="num" id="2071208">0x3000</span><span class="op" id="2071214">,</span>&nbsp;<span class="num" id="2071216">0x3000</span><span class="op" id="2071222">}</span><span class="op" id="2071223">,</span><br>
<span class="lineno"></span><span class="op" id="2071225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2071228">func</span>&nbsp;<span class="ident" id="2071233">isSpace</span><span class="op" id="2071240">(</span><span class="ident" id="2071241">r</span>&nbsp;<span class="builtintype" id="2071243">rune</span><span class="op" id="2071247">)</span>&nbsp;<span class="builtintype" id="2071249">bool</span>&nbsp;<span class="op" id="2071254">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071257">if</span>&nbsp;<span class="ident" id="2071260">r</span>&nbsp;<span class="op" id="2071262">&gt;=</span>&nbsp;<span class="num" id="2071265">1</span><span class="op" id="2071266">&lt;&lt;</span><span class="num" id="2071268">16</span>&nbsp;<span class="op" id="2071271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071275">return</span>&nbsp;<span class="builtintype" id="2071282">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2071292">rx</span>&nbsp;<span class="op" id="2071295">:=</span>&nbsp;<span class="builtintype" id="2071298">uint16</span><span class="op" id="2071304">(</span><span class="ident" id="2071305">r</span><span class="op" id="2071306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071309">for</span>&nbsp;<span class="ident" id="2071313">_</span><span class="op" id="2071314">,</span>&nbsp;<span class="ident" id="2071316">rng</span>&nbsp;<span class="op" id="2071320">:=</span>&nbsp;<span class="keyword" id="2071323">range</span>&nbsp;<span class="ident" id="2071329">space</span>&nbsp;<span class="op" id="2071335">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071339">if</span>&nbsp;<span class="ident" id="2071342">rx</span>&nbsp;<span class="op" id="2071345">&lt;</span>&nbsp;<span class="ident" id="2071347">rng</span><span class="op" id="2071350">[</span><span class="num" id="2071351">0</span><span class="op" id="2071352">]</span>&nbsp;<span class="op" id="2071354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071359">return</span>&nbsp;<span class="builtintype" id="2071366">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071378">if</span>&nbsp;<span class="ident" id="2071381">rx</span>&nbsp;<span class="op" id="2071384">&lt;=</span>&nbsp;<span class="ident" id="2071387">rng</span><span class="op" id="2071390">[</span><span class="num" id="2071391">1</span><span class="op" id="2071392">]</span>&nbsp;<span class="op" id="2071394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071399">return</span>&nbsp;<span class="builtintype" id="2071406">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2071416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071419">return</span>&nbsp;<span class="builtintype" id="2071426">false</span><br>
<span class="lineno"></span><span class="op" id="2071432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="2071435">//&nbsp;notSpace&nbsp;is&nbsp;the&nbsp;default&nbsp;scanning&nbsp;function&nbsp;used&nbsp;in&nbsp;Token.</span><br>
<span class="lineno"></span><span class="keyword" id="2071495">func</span>&nbsp;<span class="ident" id="2071500">notSpace</span><span class="op" id="2071508">(</span><span class="ident" id="2071509">r</span>&nbsp;<span class="builtintype" id="2071511">rune</span><span class="op" id="2071515">)</span>&nbsp;<span class="builtintype" id="2071517">bool</span>&nbsp;<span class="op" id="2071522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2071525">return</span>&nbsp;<span class="op" id="2071532">!</span><span class="ident" id="2071533">isSpace</span><span class="op" id="2071540">(</span><span class="ident" id="2071541">r</span><span class="op" id="2071542">)</span><br>
<span class="lineno"></span><span class="op" id="2071544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="comment" id="2071547">//&nbsp;SkipSpace&nbsp;provides&nbsp;Scan&nbsp;methods&nbsp;the&nbsp;ability&nbsp;to&nbsp;skip&nbsp;space&nbsp;and&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="2071620">//&nbsp;characters&nbsp;in&nbsp;keeping&nbsp;with&nbsp;the&nbsp;current&nbsp;scanning&nbsp;mode&nbsp;set&nbsp;by&nbsp;format&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="2071698">//&nbsp;and&nbsp;Scan/Scanln.</span><br>
<span class="lineno"></span><span class="keyword" id="2071718">func</span>&nbsp;<span class="op" id="2071723">(</span><span class="ident" id="2071724">s</span>&nbsp;<span class="op" id="2071726">*</span><span class="ident" id="2071727">ss</span><span class="op" id="2071729">)</span>&nbsp;<span class="ident" id="2071731">SkipSpace</span><span class="op" id="2071740">(</span><span class="op" id="2071741">)</span>&nbsp;<span class="op" id="2071743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2071746">s</span><span class="op" id="2071747">.</span><span class="ident" id="2071748">skipSpace</span><span class="op" id="2071757">(</span><span class="builtintype" id="2071758">false</span><span class="op" id="2071763">)</span><br>
<span class="lineno">320</span><span class="op" id="2071765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2071768">//&nbsp;readRune&nbsp;is&nbsp;a&nbsp;structure&nbsp;to&nbsp;enable&nbsp;reading&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;points</span><br>
<span class="lineno"></span><span class="comment" id="2071839">//&nbsp;from&nbsp;an&nbsp;io.Reader.&nbsp;&nbsp;It&nbsp;is&nbsp;used&nbsp;if&nbsp;the&nbsp;Reader&nbsp;given&nbsp;to&nbsp;the&nbsp;scanner&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2071913">//&nbsp;not&nbsp;already&nbsp;implement&nbsp;io.RuneReader.</span><br>
<span class="lineno">325</span><span class="keyword" id="2071953">type</span>&nbsp;<span class="ident" id="2071958">readRune</span>&nbsp;<span class="keyword" id="2071967">struct</span>&nbsp;<span class="op" id="2071974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2071977">reader</span>&nbsp;&nbsp;<span class="ident" id="2071985">io</span><span class="op" id="2071987">.</span><span class="ident" id="2071988">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2071996">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2072004">[</span><span class="ident" id="2072005">utf8</span><span class="op" id="2072009">.</span><span class="ident" id="2072010">UTFMax</span><span class="op" id="2072016">]</span><span class="builtintype" id="2072017">byte</span>&nbsp;<span class="comment" id="2072022">//&nbsp;used&nbsp;only&nbsp;inside&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072052">pending</span>&nbsp;<span class="builtintype" id="2072060">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2072078">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;pendBuf;&nbsp;only&nbsp;&gt;0&nbsp;for&nbsp;bad&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072132">pendBuf</span>&nbsp;<span class="op" id="2072140">[</span><span class="ident" id="2072141">utf8</span><span class="op" id="2072145">.</span><span class="ident" id="2072146">UTFMax</span><span class="op" id="2072152">]</span><span class="builtintype" id="2072153">byte</span>&nbsp;<span class="comment" id="2072158">//&nbsp;bytes&nbsp;left&nbsp;over</span><br>
<span class="lineno">330</span><span class="op" id="2072177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2072180">//&nbsp;readByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;which&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2072243">//&nbsp;left&nbsp;over&nbsp;from&nbsp;a&nbsp;previous&nbsp;read&nbsp;if&nbsp;the&nbsp;UTF-8&nbsp;was&nbsp;ill-formed.</span><br>
<span class="lineno"></span><span class="keyword" id="2072306">func</span>&nbsp;<span class="op" id="2072311">(</span><span class="ident" id="2072312">r</span>&nbsp;<span class="op" id="2072314">*</span><span class="ident" id="2072315">readRune</span><span class="op" id="2072323">)</span>&nbsp;<span class="ident" id="2072325">readByte</span><span class="op" id="2072333">(</span><span class="op" id="2072334">)</span>&nbsp;<span class="op" id="2072336">(</span><span class="ident" id="2072337">b</span>&nbsp;<span class="builtintype" id="2072339">byte</span><span class="op" id="2072343">,</span>&nbsp;<span class="ident" id="2072345">err</span>&nbsp;<span class="builtintype" id="2072349">error</span><span class="op" id="2072354">)</span>&nbsp;<span class="op" id="2072356">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072359">if</span>&nbsp;<span class="ident" id="2072362">r</span><span class="op" id="2072363">.</span><span class="ident" id="2072364">pending</span>&nbsp;<span class="op" id="2072372">&gt;</span>&nbsp;<span class="num" id="2072374">0</span>&nbsp;<span class="op" id="2072376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072380">b</span>&nbsp;<span class="op" id="2072382">=</span>&nbsp;<span class="ident" id="2072384">r</span><span class="op" id="2072385">.</span><span class="ident" id="2072386">pendBuf</span><span class="op" id="2072393">[</span><span class="num" id="2072394">0</span><span class="op" id="2072395">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2072399">copy</span><span class="op" id="2072403">(</span><span class="ident" id="2072404">r</span><span class="op" id="2072405">.</span><span class="ident" id="2072406">pendBuf</span><span class="op" id="2072413">[</span><span class="num" id="2072414">0</span><span class="op" id="2072415">:</span><span class="op" id="2072416">]</span><span class="op" id="2072417">,</span>&nbsp;<span class="ident" id="2072419">r</span><span class="op" id="2072420">.</span><span class="ident" id="2072421">pendBuf</span><span class="op" id="2072428">[</span><span class="num" id="2072429">1</span><span class="op" id="2072430">:</span><span class="op" id="2072431">]</span><span class="op" id="2072432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072436">r</span><span class="op" id="2072437">.</span><span class="ident" id="2072438">pending</span><span class="op" id="2072445">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072450">return</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2072458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072461">n</span><span class="op" id="2072462">,</span>&nbsp;<span class="ident" id="2072464">err</span>&nbsp;<span class="op" id="2072468">:=</span>&nbsp;<span class="ident" id="2072471">io</span><span class="op" id="2072473">.</span><span class="ident" id="2072474">ReadFull</span><span class="op" id="2072482">(</span><span class="ident" id="2072483">r</span><span class="op" id="2072484">.</span><span class="ident" id="2072485">reader</span><span class="op" id="2072491">,</span>&nbsp;<span class="ident" id="2072493">r</span><span class="op" id="2072494">.</span><span class="ident" id="2072495">pendBuf</span><span class="op" id="2072502">[</span><span class="num" id="2072503">0</span><span class="op" id="2072504">:</span><span class="num" id="2072505">1</span><span class="op" id="2072506">]</span><span class="op" id="2072507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072510">if</span>&nbsp;<span class="ident" id="2072513">n</span>&nbsp;<span class="op" id="2072515">!=</span>&nbsp;<span class="num" id="2072518">1</span>&nbsp;<span class="op" id="2072520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072524">return</span>&nbsp;<span class="num" id="2072531">0</span><span class="op" id="2072532">,</span>&nbsp;<span class="ident" id="2072534">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2072539">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072542">return</span>&nbsp;<span class="ident" id="2072549">r</span><span class="op" id="2072550">.</span><span class="ident" id="2072551">pendBuf</span><span class="op" id="2072558">[</span><span class="num" id="2072559">0</span><span class="op" id="2072560">]</span><span class="op" id="2072561">,</span>&nbsp;<span class="ident" id="2072563">err</span><br>
<span class="lineno"></span><span class="op" id="2072567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2072570">//&nbsp;unread&nbsp;saves&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="2072615">func</span>&nbsp;<span class="op" id="2072620">(</span><span class="ident" id="2072621">r</span>&nbsp;<span class="op" id="2072623">*</span><span class="ident" id="2072624">readRune</span><span class="op" id="2072632">)</span>&nbsp;<span class="ident" id="2072634">unread</span><span class="op" id="2072640">(</span><span class="ident" id="2072641">buf</span>&nbsp;<span class="op" id="2072645">[</span><span class="op" id="2072646">]</span><span class="builtintype" id="2072647">byte</span><span class="op" id="2072651">)</span>&nbsp;<span class="op" id="2072653">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2072656">copy</span><span class="op" id="2072660">(</span><span class="ident" id="2072661">r</span><span class="op" id="2072662">.</span><span class="ident" id="2072663">pendBuf</span><span class="op" id="2072670">[</span><span class="ident" id="2072671">r</span><span class="op" id="2072672">.</span><span class="ident" id="2072673">pending</span><span class="op" id="2072680">:</span><span class="op" id="2072681">]</span><span class="op" id="2072682">,</span>&nbsp;<span class="ident" id="2072684">buf</span><span class="op" id="2072687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072690">r</span><span class="op" id="2072691">.</span><span class="ident" id="2072692">pending</span>&nbsp;<span class="op" id="2072700">+=</span>&nbsp;<span class="builtinfunc" id="2072703">len</span><span class="op" id="2072706">(</span><span class="ident" id="2072707">buf</span><span class="op" id="2072710">)</span><br>
<span class="lineno"></span><span class="op" id="2072712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2072715">//&nbsp;ReadRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8&nbsp;encoded&nbsp;code&nbsp;point&nbsp;from&nbsp;the</span><br>
<span class="lineno">355</span><span class="comment" id="2072778">//&nbsp;io.Reader&nbsp;inside&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="2072801">func</span>&nbsp;<span class="op" id="2072806">(</span><span class="ident" id="2072807">r</span>&nbsp;<span class="op" id="2072809">*</span><span class="ident" id="2072810">readRune</span><span class="op" id="2072818">)</span>&nbsp;<span class="ident" id="2072820">ReadRune</span><span class="op" id="2072828">(</span><span class="op" id="2072829">)</span>&nbsp;<span class="op" id="2072831">(</span><span class="ident" id="2072832">rr</span>&nbsp;<span class="builtintype" id="2072835">rune</span><span class="op" id="2072839">,</span>&nbsp;<span class="ident" id="2072841">size</span>&nbsp;<span class="builtintype" id="2072846">int</span><span class="op" id="2072849">,</span>&nbsp;<span class="ident" id="2072851">err</span>&nbsp;<span class="builtintype" id="2072855">error</span><span class="op" id="2072860">)</span>&nbsp;<span class="op" id="2072862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2072865">r</span><span class="op" id="2072866">.</span><span class="ident" id="2072867">buf</span><span class="op" id="2072870">[</span><span class="num" id="2072871">0</span><span class="op" id="2072872">]</span><span class="op" id="2072873">,</span>&nbsp;<span class="ident" id="2072875">err</span>&nbsp;<span class="op" id="2072879">=</span>&nbsp;<span class="ident" id="2072881">r</span><span class="op" id="2072882">.</span><span class="ident" id="2072883">readByte</span><span class="op" id="2072891">(</span><span class="op" id="2072892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072895">if</span>&nbsp;<span class="ident" id="2072898">err</span>&nbsp;<span class="op" id="2072902">!=</span>&nbsp;<span class="builtintype" id="2072905">nil</span>&nbsp;<span class="op" id="2072909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072913">return</span>&nbsp;<span class="num" id="2072920">0</span><span class="op" id="2072921">,</span>&nbsp;<span class="num" id="2072923">0</span><span class="op" id="2072924">,</span>&nbsp;<span class="ident" id="2072926">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2072931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2072934">if</span>&nbsp;<span class="ident" id="2072937">r</span><span class="op" id="2072938">.</span><span class="ident" id="2072939">buf</span><span class="op" id="2072942">[</span><span class="num" id="2072943">0</span><span class="op" id="2072944">]</span>&nbsp;<span class="op" id="2072946">&lt;</span>&nbsp;<span class="ident" id="2072948">utf8</span><span class="op" id="2072952">.</span><span class="ident" id="2072953">RuneSelf</span>&nbsp;<span class="op" id="2072962">{</span>&nbsp;<span class="comment" id="2072964">//&nbsp;fast&nbsp;check&nbsp;for&nbsp;common&nbsp;ASCII&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073002">rr</span>&nbsp;<span class="op" id="2073005">=</span>&nbsp;<span class="builtintype" id="2073007">rune</span><span class="op" id="2073011">(</span><span class="ident" id="2073012">r</span><span class="op" id="2073013">.</span><span class="ident" id="2073014">buf</span><span class="op" id="2073017">[</span><span class="num" id="2073018">0</span><span class="op" id="2073019">]</span><span class="op" id="2073020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073024">size</span>&nbsp;<span class="op" id="2073029">=</span>&nbsp;<span class="num" id="2073031">1</span>&nbsp;<span class="comment" id="2073033">//&nbsp;Known&nbsp;to&nbsp;be&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073053">return</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073064">var</span>&nbsp;<span class="ident" id="2073068">n</span>&nbsp;<span class="builtintype" id="2073070">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073075">for</span>&nbsp;<span class="ident" id="2073079">n</span>&nbsp;<span class="op" id="2073081">=</span>&nbsp;<span class="num" id="2073083">1</span><span class="op" id="2073084">;</span>&nbsp;<span class="op" id="2073086">!</span><span class="ident" id="2073087">utf8</span><span class="op" id="2073091">.</span><span class="ident" id="2073092">FullRune</span><span class="op" id="2073100">(</span><span class="ident" id="2073101">r</span><span class="op" id="2073102">.</span><span class="ident" id="2073103">buf</span><span class="op" id="2073106">[</span><span class="num" id="2073107">0</span><span class="op" id="2073108">:</span><span class="ident" id="2073109">n</span><span class="op" id="2073110">]</span><span class="op" id="2073111">)</span><span class="op" id="2073112">;</span>&nbsp;<span class="ident" id="2073114">n</span><span class="op" id="2073115">++</span>&nbsp;<span class="op" id="2073118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073122">r</span><span class="op" id="2073123">.</span><span class="ident" id="2073124">buf</span><span class="op" id="2073127">[</span><span class="ident" id="2073128">n</span><span class="op" id="2073129">]</span><span class="op" id="2073130">,</span>&nbsp;<span class="ident" id="2073132">err</span>&nbsp;<span class="op" id="2073136">=</span>&nbsp;<span class="ident" id="2073138">r</span><span class="op" id="2073139">.</span><span class="ident" id="2073140">readByte</span><span class="op" id="2073148">(</span><span class="op" id="2073149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073153">if</span>&nbsp;<span class="ident" id="2073156">err</span>&nbsp;<span class="op" id="2073160">!=</span>&nbsp;<span class="builtintype" id="2073163">nil</span>&nbsp;<span class="op" id="2073167">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073172">if</span>&nbsp;<span class="ident" id="2073175">err</span>&nbsp;<span class="op" id="2073179">==</span>&nbsp;<span class="ident" id="2073182">io</span><span class="op" id="2073184">.</span><span class="ident" id="2073185">EOF</span>&nbsp;<span class="op" id="2073189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073195">err</span>&nbsp;<span class="op" id="2073199">=</span>&nbsp;<span class="builtintype" id="2073201">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073209">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073223">return</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073238">rr</span><span class="op" id="2073240">,</span>&nbsp;<span class="ident" id="2073242">size</span>&nbsp;<span class="op" id="2073247">=</span>&nbsp;<span class="ident" id="2073249">utf8</span><span class="op" id="2073253">.</span><span class="ident" id="2073254">DecodeRune</span><span class="op" id="2073264">(</span><span class="ident" id="2073265">r</span><span class="op" id="2073266">.</span><span class="ident" id="2073267">buf</span><span class="op" id="2073270">[</span><span class="num" id="2073271">0</span><span class="op" id="2073272">:</span><span class="ident" id="2073273">n</span><span class="op" id="2073274">]</span><span class="op" id="2073275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073278">if</span>&nbsp;<span class="ident" id="2073281">size</span>&nbsp;<span class="op" id="2073286">&lt;</span>&nbsp;<span class="ident" id="2073288">n</span>&nbsp;<span class="op" id="2073290">{</span>&nbsp;<span class="comment" id="2073292">//&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073306">r</span><span class="op" id="2073307">.</span><span class="ident" id="2073308">unread</span><span class="op" id="2073314">(</span><span class="ident" id="2073315">r</span><span class="op" id="2073316">.</span><span class="ident" id="2073317">buf</span><span class="op" id="2073320">[</span><span class="ident" id="2073321">size</span><span class="op" id="2073325">:</span><span class="ident" id="2073326">n</span><span class="op" id="2073327">]</span><span class="op" id="2073328">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073334">return</span><br>
<span class="lineno"></span><span class="op" id="2073341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2073344">var</span>&nbsp;<span class="ident" id="2073348">ssFree</span>&nbsp;<span class="op" id="2073355">=</span>&nbsp;<span class="ident" id="2073357">sync</span><span class="op" id="2073361">.</span><span class="ident" id="2073362">Pool</span><span class="op" id="2073366">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073369">New</span><span class="op" id="2073372">:</span>&nbsp;<span class="keyword" id="2073374">func</span><span class="op" id="2073378">(</span><span class="op" id="2073379">)</span>&nbsp;<span class="keyword" id="2073381">interface</span><span class="op" id="2073390">{</span><span class="op" id="2073391">}</span>&nbsp;<span class="op" id="2073393">{</span>&nbsp;<span class="keyword" id="2073395">return</span>&nbsp;<span class="builtinfunc" id="2073402">new</span><span class="op" id="2073405">(</span><span class="ident" id="2073406">ss</span><span class="op" id="2073408">)</span>&nbsp;<span class="op" id="2073410">}</span><span class="op" id="2073411">,</span><br>
<span class="lineno"></span><span class="op" id="2073413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2073416">//&nbsp;newScanState&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ss&nbsp;struct&nbsp;or&nbsp;grab&nbsp;a&nbsp;cached&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="2073480">func</span>&nbsp;<span class="ident" id="2073485">newScanState</span><span class="op" id="2073497">(</span><span class="ident" id="2073498">r</span>&nbsp;<span class="ident" id="2073500">io</span><span class="op" id="2073502">.</span><span class="ident" id="2073503">Reader</span><span class="op" id="2073509">,</span>&nbsp;<span class="ident" id="2073511">nlIsSpace</span><span class="op" id="2073520">,</span>&nbsp;<span class="ident" id="2073522">nlIsEnd</span>&nbsp;<span class="builtintype" id="2073530">bool</span><span class="op" id="2073534">)</span>&nbsp;<span class="op" id="2073536">(</span><span class="ident" id="2073537">s</span>&nbsp;<span class="op" id="2073539">*</span><span class="ident" id="2073540">ss</span><span class="op" id="2073542">,</span>&nbsp;<span class="ident" id="2073544">old</span>&nbsp;<span class="ident" id="2073548">ssave</span><span class="op" id="2073553">)</span>&nbsp;<span class="op" id="2073555">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2073558">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;is&nbsp;a&nbsp;*ss,&nbsp;then&nbsp;we&#39;ve&nbsp;got&nbsp;a&nbsp;recursive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2073613">//&nbsp;call&nbsp;to&nbsp;Scan,&nbsp;so&nbsp;re-use&nbsp;the&nbsp;scan&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073657">s</span><span class="op" id="2073658">,</span>&nbsp;<span class="ident" id="2073660">ok</span>&nbsp;<span class="op" id="2073663">:=</span>&nbsp;<span class="ident" id="2073666">r</span><span class="op" id="2073667">.</span><span class="op" id="2073668">(</span><span class="op" id="2073669">*</span><span class="ident" id="2073670">ss</span><span class="op" id="2073672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073675">if</span>&nbsp;<span class="ident" id="2073678">ok</span>&nbsp;<span class="op" id="2073681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073685">old</span>&nbsp;<span class="op" id="2073689">=</span>&nbsp;<span class="ident" id="2073691">s</span><span class="op" id="2073692">.</span><span class="ident" id="2073693">ssave</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073701">s</span><span class="op" id="2073702">.</span><span class="ident" id="2073703">limit</span>&nbsp;<span class="op" id="2073709">=</span>&nbsp;<span class="ident" id="2073711">s</span><span class="op" id="2073712">.</span><span class="ident" id="2073713">argLimit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073724">s</span><span class="op" id="2073725">.</span><span class="ident" id="2073726">nlIsEnd</span>&nbsp;<span class="op" id="2073734">=</span>&nbsp;<span class="ident" id="2073736">nlIsEnd</span>&nbsp;<span class="op" id="2073744">||</span>&nbsp;<span class="ident" id="2073747">s</span><span class="op" id="2073748">.</span><span class="ident" id="2073749">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073759">s</span><span class="op" id="2073760">.</span><span class="ident" id="2073761">nlIsSpace</span>&nbsp;<span class="op" id="2073771">=</span>&nbsp;<span class="ident" id="2073773">nlIsSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073785">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073793">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073797">s</span>&nbsp;<span class="op" id="2073799">=</span>&nbsp;<span class="ident" id="2073801">ssFree</span><span class="op" id="2073807">.</span><span class="ident" id="2073808">Get</span><span class="op" id="2073811">(</span><span class="op" id="2073812">)</span><span class="op" id="2073813">.</span><span class="op" id="2073814">(</span><span class="op" id="2073815">*</span><span class="ident" id="2073816">ss</span><span class="op" id="2073818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2073821">if</span>&nbsp;<span class="ident" id="2073824">rr</span><span class="op" id="2073826">,</span>&nbsp;<span class="ident" id="2073828">ok</span>&nbsp;<span class="op" id="2073831">:=</span>&nbsp;<span class="ident" id="2073834">r</span><span class="op" id="2073835">.</span><span class="op" id="2073836">(</span><span class="ident" id="2073837">io</span><span class="op" id="2073839">.</span><span class="ident" id="2073840">RuneReader</span><span class="op" id="2073850">)</span><span class="op" id="2073851">;</span>&nbsp;<span class="ident" id="2073853">ok</span>&nbsp;<span class="op" id="2073856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073860">s</span><span class="op" id="2073861">.</span><span class="ident" id="2073862">rr</span>&nbsp;<span class="op" id="2073865">=</span>&nbsp;<span class="ident" id="2073867">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073871">}</span>&nbsp;<span class="keyword" id="2073873">else</span>&nbsp;<span class="op" id="2073878">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073882">s</span><span class="op" id="2073883">.</span><span class="ident" id="2073884">rr</span>&nbsp;<span class="op" id="2073887">=</span>&nbsp;<span class="op" id="2073889">&amp;</span><span class="ident" id="2073890">readRune</span><span class="op" id="2073898">{</span><span class="ident" id="2073899">reader</span><span class="op" id="2073905">:</span>&nbsp;<span class="ident" id="2073907">r</span><span class="op" id="2073908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2073911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073914">s</span><span class="op" id="2073915">.</span><span class="ident" id="2073916">nlIsSpace</span>&nbsp;<span class="op" id="2073926">=</span>&nbsp;<span class="ident" id="2073928">nlIsSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073939">s</span><span class="op" id="2073940">.</span><span class="ident" id="2073941">nlIsEnd</span>&nbsp;<span class="op" id="2073949">=</span>&nbsp;<span class="ident" id="2073951">nlIsEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073960">s</span><span class="op" id="2073961">.</span><span class="ident" id="2073962">prevRune</span>&nbsp;<span class="op" id="2073971">=</span>&nbsp;<span class="op" id="2073973">-</span><span class="num" id="2073974">1</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073977">s</span><span class="op" id="2073978">.</span><span class="ident" id="2073979">peekRune</span>&nbsp;<span class="op" id="2073988">=</span>&nbsp;<span class="op" id="2073990">-</span><span class="num" id="2073991">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2073994">s</span><span class="op" id="2073995">.</span><span class="ident" id="2073996">atEOF</span>&nbsp;<span class="op" id="2074002">=</span>&nbsp;<span class="builtintype" id="2074004">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074011">s</span><span class="op" id="2074012">.</span><span class="ident" id="2074013">limit</span>&nbsp;<span class="op" id="2074019">=</span>&nbsp;<span class="ident" id="2074021">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074030">s</span><span class="op" id="2074031">.</span><span class="ident" id="2074032">argLimit</span>&nbsp;<span class="op" id="2074041">=</span>&nbsp;<span class="ident" id="2074043">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074052">s</span><span class="op" id="2074053">.</span><span class="ident" id="2074054">maxWid</span>&nbsp;<span class="op" id="2074061">=</span>&nbsp;<span class="ident" id="2074063">hugeWid</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074072">s</span><span class="op" id="2074073">.</span><span class="ident" id="2074074">validSave</span>&nbsp;<span class="op" id="2074084">=</span>&nbsp;<span class="builtintype" id="2074086">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074092">s</span><span class="op" id="2074093">.</span><span class="ident" id="2074094">count</span>&nbsp;<span class="op" id="2074100">=</span>&nbsp;<span class="num" id="2074102">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074105">return</span><br>
<span class="lineno"></span><span class="op" id="2074112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2074115">//&nbsp;free&nbsp;saves&nbsp;used&nbsp;ss&nbsp;structs&nbsp;in&nbsp;ssFree;&nbsp;avoid&nbsp;an&nbsp;allocation&nbsp;per&nbsp;invocation.</span><br>
<span class="lineno"></span><span class="keyword" id="2074192">func</span>&nbsp;<span class="op" id="2074197">(</span><span class="ident" id="2074198">s</span>&nbsp;<span class="op" id="2074200">*</span><span class="ident" id="2074201">ss</span><span class="op" id="2074203">)</span>&nbsp;<span class="ident" id="2074205">free</span><span class="op" id="2074209">(</span><span class="ident" id="2074210">old</span>&nbsp;<span class="ident" id="2074214">ssave</span><span class="op" id="2074219">)</span>&nbsp;<span class="op" id="2074221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2074224">//&nbsp;If&nbsp;it&nbsp;was&nbsp;used&nbsp;recursively,&nbsp;just&nbsp;restore&nbsp;the&nbsp;old&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074284">if</span>&nbsp;<span class="ident" id="2074287">old</span><span class="op" id="2074290">.</span><span class="ident" id="2074291">validSave</span>&nbsp;<span class="op" id="2074301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074305">s</span><span class="op" id="2074306">.</span><span class="ident" id="2074307">ssave</span>&nbsp;<span class="op" id="2074313">=</span>&nbsp;<span class="ident" id="2074315">old</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074321">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2074332">//&nbsp;Don&#39;t&nbsp;hold&nbsp;on&nbsp;to&nbsp;ss&nbsp;structs&nbsp;with&nbsp;large&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074384">if</span>&nbsp;<span class="builtinfunc" id="2074387">cap</span><span class="op" id="2074390">(</span><span class="ident" id="2074391">s</span><span class="op" id="2074392">.</span><span class="ident" id="2074393">buf</span><span class="op" id="2074396">)</span>&nbsp;<span class="op" id="2074398">&gt;</span>&nbsp;<span class="num" id="2074400">1024</span>&nbsp;<span class="op" id="2074405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074409">return</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074420">s</span><span class="op" id="2074421">.</span><span class="ident" id="2074422">buf</span>&nbsp;<span class="op" id="2074426">=</span>&nbsp;<span class="ident" id="2074428">s</span><span class="op" id="2074429">.</span><span class="ident" id="2074430">buf</span><span class="op" id="2074433">[</span><span class="op" id="2074434">:</span><span class="num" id="2074435">0</span><span class="op" id="2074436">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074439">s</span><span class="op" id="2074440">.</span><span class="ident" id="2074441">rr</span>&nbsp;<span class="op" id="2074444">=</span>&nbsp;<span class="builtintype" id="2074446">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074451">ssFree</span><span class="op" id="2074457">.</span><span class="ident" id="2074458">Put</span><span class="op" id="2074461">(</span><span class="ident" id="2074462">s</span><span class="op" id="2074463">)</span><br>
<span class="lineno"></span><span class="op" id="2074465">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="2074468">//&nbsp;skipSpace&nbsp;skips&nbsp;spaces&nbsp;and&nbsp;maybe&nbsp;newlines.</span><br>
<span class="lineno"></span><span class="keyword" id="2074514">func</span>&nbsp;<span class="op" id="2074519">(</span><span class="ident" id="2074520">s</span>&nbsp;<span class="op" id="2074522">*</span><span class="ident" id="2074523">ss</span><span class="op" id="2074525">)</span>&nbsp;<span class="ident" id="2074527">skipSpace</span><span class="op" id="2074536">(</span><span class="ident" id="2074537">stopAtNewline</span>&nbsp;<span class="builtintype" id="2074551">bool</span><span class="op" id="2074555">)</span>&nbsp;<span class="op" id="2074557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074560">for</span>&nbsp;<span class="op" id="2074564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074568">r</span>&nbsp;<span class="op" id="2074570">:=</span>&nbsp;<span class="ident" id="2074573">s</span><span class="op" id="2074574">.</span><span class="ident" id="2074575">getRune</span><span class="op" id="2074582">(</span><span class="op" id="2074583">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074587">if</span>&nbsp;<span class="ident" id="2074590">r</span>&nbsp;<span class="op" id="2074592">==</span>&nbsp;<span class="ident" id="2074595">eof</span>&nbsp;<span class="op" id="2074599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074604">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074617">if</span>&nbsp;<span class="ident" id="2074620">r</span>&nbsp;<span class="op" id="2074622">==</span>&nbsp;<span class="string" id="2074625">&#39;\r&#39;</span>&nbsp;<span class="op" id="2074630">&amp;&amp;</span>&nbsp;<span class="ident" id="2074633">s</span><span class="op" id="2074634">.</span><span class="ident" id="2074635">peek</span><span class="op" id="2074639">(</span><span class="string" id="2074640">&#34;\n&#34;</span><span class="op" id="2074644">)</span>&nbsp;<span class="op" id="2074646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074651">continue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074666">if</span>&nbsp;<span class="ident" id="2074669">r</span>&nbsp;<span class="op" id="2074671">==</span>&nbsp;<span class="string" id="2074674">&#39;\n&#39;</span>&nbsp;<span class="op" id="2074679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074684">if</span>&nbsp;<span class="ident" id="2074687">stopAtNewline</span>&nbsp;<span class="op" id="2074701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074707">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074716">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074721">if</span>&nbsp;<span class="ident" id="2074724">s</span><span class="op" id="2074725">.</span><span class="ident" id="2074726">nlIsSpace</span>&nbsp;<span class="op" id="2074736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074742">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074759">s</span><span class="op" id="2074760">.</span><span class="ident" id="2074761">errorString</span><span class="op" id="2074772">(</span><span class="string" id="2074773">&#34;unexpected&nbsp;newline&#34;</span><span class="op" id="2074793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074798">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074811">if</span>&nbsp;<span class="op" id="2074814">!</span><span class="ident" id="2074815">isSpace</span><span class="op" id="2074822">(</span><span class="ident" id="2074823">r</span><span class="op" id="2074824">)</span>&nbsp;<span class="op" id="2074826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2074831">s</span><span class="op" id="2074832">.</span><span class="ident" id="2074833">UnreadRune</span><span class="op" id="2074843">(</span><span class="op" id="2074844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2074849">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074857">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2074860">}</span><br>
<span class="lineno"></span><span class="op" id="2074862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2074865">//&nbsp;token&nbsp;returns&nbsp;the&nbsp;next&nbsp;space-delimited&nbsp;string&nbsp;from&nbsp;the&nbsp;input.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2074934">//&nbsp;skips&nbsp;white&nbsp;space.&nbsp;&nbsp;For&nbsp;Scanln,&nbsp;it&nbsp;stops&nbsp;at&nbsp;newlines.&nbsp;&nbsp;For&nbsp;Scan,</span><br>
<span class="lineno">465</span><span class="comment" id="2075002">//&nbsp;newlines&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno"></span><span class="keyword" id="2075037">func</span>&nbsp;<span class="op" id="2075042">(</span><span class="ident" id="2075043">s</span>&nbsp;<span class="op" id="2075045">*</span><span class="ident" id="2075046">ss</span><span class="op" id="2075048">)</span>&nbsp;<span class="ident" id="2075050">token</span><span class="op" id="2075055">(</span><span class="ident" id="2075056">skipSpace</span>&nbsp;<span class="builtintype" id="2075066">bool</span><span class="op" id="2075070">,</span>&nbsp;<span class="ident" id="2075072">f</span>&nbsp;<span class="keyword" id="2075074">func</span><span class="op" id="2075078">(</span><span class="builtintype" id="2075079">rune</span><span class="op" id="2075083">)</span>&nbsp;<span class="builtintype" id="2075085">bool</span><span class="op" id="2075089">)</span>&nbsp;<span class="op" id="2075091">[</span><span class="op" id="2075092">]</span><span class="builtintype" id="2075093">byte</span>&nbsp;<span class="op" id="2075098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075101">if</span>&nbsp;<span class="ident" id="2075104">skipSpace</span>&nbsp;<span class="op" id="2075114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075118">s</span><span class="op" id="2075119">.</span><span class="ident" id="2075120">skipSpace</span><span class="op" id="2075129">(</span><span class="builtintype" id="2075130">false</span><span class="op" id="2075135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075138">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2075141">//&nbsp;read&nbsp;until&nbsp;white&nbsp;space&nbsp;or&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075179">for</span>&nbsp;<span class="op" id="2075183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075187">r</span>&nbsp;<span class="op" id="2075189">:=</span>&nbsp;<span class="ident" id="2075192">s</span><span class="op" id="2075193">.</span><span class="ident" id="2075194">getRune</span><span class="op" id="2075201">(</span><span class="op" id="2075202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075206">if</span>&nbsp;<span class="ident" id="2075209">r</span>&nbsp;<span class="op" id="2075211">==</span>&nbsp;<span class="ident" id="2075214">eof</span>&nbsp;<span class="op" id="2075218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075223">break</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075235">if</span>&nbsp;<span class="op" id="2075238">!</span><span class="ident" id="2075239">f</span><span class="op" id="2075240">(</span><span class="ident" id="2075241">r</span><span class="op" id="2075242">)</span>&nbsp;<span class="op" id="2075244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075249">s</span><span class="op" id="2075250">.</span><span class="ident" id="2075251">UnreadRune</span><span class="op" id="2075261">(</span><span class="op" id="2075262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075267">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075275">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075279">s</span><span class="op" id="2075280">.</span><span class="ident" id="2075281">buf</span><span class="op" id="2075284">.</span><span class="ident" id="2075285">WriteRune</span><span class="op" id="2075294">(</span><span class="ident" id="2075295">r</span><span class="op" id="2075296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075302">return</span>&nbsp;<span class="ident" id="2075309">s</span><span class="op" id="2075310">.</span><span class="ident" id="2075311">buf</span><br>
<span class="lineno"></span><span class="op" id="2075315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="2075318">var</span>&nbsp;<span class="ident" id="2075322">complexError</span>&nbsp;<span class="op" id="2075335">=</span>&nbsp;<span class="ident" id="2075337">errors</span><span class="op" id="2075343">.</span><span class="ident" id="2075344">New</span><span class="op" id="2075347">(</span><span class="string" id="2075348">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;complex&nbsp;number&#34;</span><span class="op" id="2075386">)</span><br>
<span class="lineno"></span><span class="keyword" id="2075388">var</span>&nbsp;<span class="ident" id="2075392">boolError</span>&nbsp;<span class="op" id="2075402">=</span>&nbsp;<span class="ident" id="2075404">errors</span><span class="op" id="2075410">.</span><span class="ident" id="2075411">New</span><span class="op" id="2075414">(</span><span class="string" id="2075415">&#34;syntax&nbsp;error&nbsp;scanning&nbsp;boolean&#34;</span><span class="op" id="2075446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2075449">func</span>&nbsp;<span class="ident" id="2075454">indexRune</span><span class="op" id="2075463">(</span><span class="ident" id="2075464">s</span>&nbsp;<span class="builtintype" id="2075466">string</span><span class="op" id="2075472">,</span>&nbsp;<span class="ident" id="2075474">r</span>&nbsp;<span class="builtintype" id="2075476">rune</span><span class="op" id="2075480">)</span>&nbsp;<span class="builtintype" id="2075482">int</span>&nbsp;<span class="op" id="2075486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075489">for</span>&nbsp;<span class="ident" id="2075493">i</span><span class="op" id="2075494">,</span>&nbsp;<span class="ident" id="2075496">c</span>&nbsp;<span class="op" id="2075498">:=</span>&nbsp;<span class="keyword" id="2075501">range</span>&nbsp;<span class="ident" id="2075507">s</span>&nbsp;<span class="op" id="2075509">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075513">if</span>&nbsp;<span class="ident" id="2075516">c</span>&nbsp;<span class="op" id="2075518">==</span>&nbsp;<span class="ident" id="2075521">r</span>&nbsp;<span class="op" id="2075523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075528">return</span>&nbsp;<span class="ident" id="2075535">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075545">return</span>&nbsp;<span class="op" id="2075552">-</span><span class="num" id="2075553">1</span><br>
<span class="lineno">495</span><span class="op" id="2075555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2075558">//&nbsp;consume&nbsp;reads&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2075646">//&nbsp;If&nbsp;accept&nbsp;is&nbsp;true,&nbsp;it&nbsp;puts&nbsp;the&nbsp;character&nbsp;into&nbsp;the&nbsp;input&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2075712">func</span>&nbsp;<span class="op" id="2075717">(</span><span class="ident" id="2075718">s</span>&nbsp;<span class="op" id="2075720">*</span><span class="ident" id="2075721">ss</span><span class="op" id="2075723">)</span>&nbsp;<span class="ident" id="2075725">consume</span><span class="op" id="2075732">(</span><span class="ident" id="2075733">ok</span>&nbsp;<span class="builtintype" id="2075736">string</span><span class="op" id="2075742">,</span>&nbsp;<span class="ident" id="2075744">accept</span>&nbsp;<span class="builtintype" id="2075751">bool</span><span class="op" id="2075755">)</span>&nbsp;<span class="builtintype" id="2075757">bool</span>&nbsp;<span class="op" id="2075762">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075765">r</span>&nbsp;<span class="op" id="2075767">:=</span>&nbsp;<span class="ident" id="2075770">s</span><span class="op" id="2075771">.</span><span class="ident" id="2075772">getRune</span><span class="op" id="2075779">(</span><span class="op" id="2075780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075783">if</span>&nbsp;<span class="ident" id="2075786">r</span>&nbsp;<span class="op" id="2075788">==</span>&nbsp;<span class="ident" id="2075791">eof</span>&nbsp;<span class="op" id="2075795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075799">return</span>&nbsp;<span class="builtintype" id="2075806">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075816">if</span>&nbsp;<span class="ident" id="2075819">indexRune</span><span class="op" id="2075828">(</span><span class="ident" id="2075829">ok</span><span class="op" id="2075831">,</span>&nbsp;<span class="ident" id="2075833">r</span><span class="op" id="2075834">)</span>&nbsp;<span class="op" id="2075836">&gt;=</span>&nbsp;<span class="num" id="2075839">0</span>&nbsp;<span class="op" id="2075841">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075845">if</span>&nbsp;<span class="ident" id="2075848">accept</span>&nbsp;<span class="op" id="2075855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075860">s</span><span class="op" id="2075861">.</span><span class="ident" id="2075862">buf</span><span class="op" id="2075865">.</span><span class="ident" id="2075866">WriteRune</span><span class="op" id="2075875">(</span><span class="ident" id="2075876">r</span><span class="op" id="2075877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075885">return</span>&nbsp;<span class="builtintype" id="2075892">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075898">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075901">if</span>&nbsp;<span class="ident" id="2075904">r</span>&nbsp;<span class="op" id="2075906">!=</span>&nbsp;<span class="ident" id="2075909">eof</span>&nbsp;<span class="op" id="2075913">&amp;&amp;</span>&nbsp;<span class="ident" id="2075916">accept</span>&nbsp;<span class="op" id="2075923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2075927">s</span><span class="op" id="2075928">.</span><span class="ident" id="2075929">UnreadRune</span><span class="op" id="2075939">(</span><span class="op" id="2075940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2075943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2075946">return</span>&nbsp;<span class="builtintype" id="2075953">false</span><br>
<span class="lineno"></span><span class="op" id="2075959">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span><span class="comment" id="2075962">//&nbsp;peek&nbsp;reports&nbsp;whether&nbsp;the&nbsp;next&nbsp;character&nbsp;is&nbsp;in&nbsp;the&nbsp;ok&nbsp;string,&nbsp;without&nbsp;consuming&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2076048">func</span>&nbsp;<span class="op" id="2076053">(</span><span class="ident" id="2076054">s</span>&nbsp;<span class="op" id="2076056">*</span><span class="ident" id="2076057">ss</span><span class="op" id="2076059">)</span>&nbsp;<span class="ident" id="2076061">peek</span><span class="op" id="2076065">(</span><span class="ident" id="2076066">ok</span>&nbsp;<span class="builtintype" id="2076069">string</span><span class="op" id="2076075">)</span>&nbsp;<span class="builtintype" id="2076077">bool</span>&nbsp;<span class="op" id="2076082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076085">r</span>&nbsp;<span class="op" id="2076087">:=</span>&nbsp;<span class="ident" id="2076090">s</span><span class="op" id="2076091">.</span><span class="ident" id="2076092">getRune</span><span class="op" id="2076099">(</span><span class="op" id="2076100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076103">if</span>&nbsp;<span class="ident" id="2076106">r</span>&nbsp;<span class="op" id="2076108">!=</span>&nbsp;<span class="ident" id="2076111">eof</span>&nbsp;<span class="op" id="2076115">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076119">s</span><span class="op" id="2076120">.</span><span class="ident" id="2076121">UnreadRune</span><span class="op" id="2076131">(</span><span class="op" id="2076132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2076135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076138">return</span>&nbsp;<span class="ident" id="2076145">indexRune</span><span class="op" id="2076154">(</span><span class="ident" id="2076155">ok</span><span class="op" id="2076157">,</span>&nbsp;<span class="ident" id="2076159">r</span><span class="op" id="2076160">)</span>&nbsp;<span class="op" id="2076162">&gt;=</span>&nbsp;<span class="num" id="2076165">0</span><br>
<span class="lineno"></span><span class="op" id="2076167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="keyword" id="2076170">func</span>&nbsp;<span class="op" id="2076175">(</span><span class="ident" id="2076176">s</span>&nbsp;<span class="op" id="2076178">*</span><span class="ident" id="2076179">ss</span><span class="op" id="2076181">)</span>&nbsp;<span class="ident" id="2076183">notEOF</span><span class="op" id="2076189">(</span><span class="op" id="2076190">)</span>&nbsp;<span class="op" id="2076192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2076195">//&nbsp;Guarantee&nbsp;there&nbsp;is&nbsp;data&nbsp;to&nbsp;be&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076235">if</span>&nbsp;<span class="ident" id="2076238">r</span>&nbsp;<span class="op" id="2076240">:=</span>&nbsp;<span class="ident" id="2076243">s</span><span class="op" id="2076244">.</span><span class="ident" id="2076245">getRune</span><span class="op" id="2076252">(</span><span class="op" id="2076253">)</span><span class="op" id="2076254">;</span>&nbsp;<span class="ident" id="2076256">r</span>&nbsp;<span class="op" id="2076258">==</span>&nbsp;<span class="ident" id="2076261">eof</span>&nbsp;<span class="op" id="2076265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2076269">panic</span><span class="op" id="2076274">(</span><span class="ident" id="2076275">io</span><span class="op" id="2076277">.</span><span class="ident" id="2076278">EOF</span><span class="op" id="2076281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2076284">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076287">s</span><span class="op" id="2076288">.</span><span class="ident" id="2076289">UnreadRune</span><span class="op" id="2076299">(</span><span class="op" id="2076300">)</span><br>
<span class="lineno"></span><span class="op" id="2076302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2076305">//&nbsp;accept&nbsp;checks&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.&nbsp;&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;byte&nbsp;(sic)&nbsp;in&nbsp;the&nbsp;string,&nbsp;it&nbsp;puts&nbsp;it&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2076405">//&nbsp;buffer&nbsp;and&nbsp;returns&nbsp;true.&nbsp;Otherwise&nbsp;it&nbsp;return&nbsp;false.</span><br>
<span class="lineno">535</span><span class="keyword" id="2076460">func</span>&nbsp;<span class="op" id="2076465">(</span><span class="ident" id="2076466">s</span>&nbsp;<span class="op" id="2076468">*</span><span class="ident" id="2076469">ss</span><span class="op" id="2076471">)</span>&nbsp;<span class="ident" id="2076473">accept</span><span class="op" id="2076479">(</span><span class="ident" id="2076480">ok</span>&nbsp;<span class="builtintype" id="2076483">string</span><span class="op" id="2076489">)</span>&nbsp;<span class="builtintype" id="2076491">bool</span>&nbsp;<span class="op" id="2076496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076499">return</span>&nbsp;<span class="ident" id="2076506">s</span><span class="op" id="2076507">.</span><span class="ident" id="2076508">consume</span><span class="op" id="2076515">(</span><span class="ident" id="2076516">ok</span><span class="op" id="2076518">,</span>&nbsp;<span class="builtintype" id="2076520">true</span><span class="op" id="2076524">)</span><br>
<span class="lineno"></span><span class="op" id="2076526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2076529">//&nbsp;okVerb&nbsp;verifies&nbsp;that&nbsp;the&nbsp;verb&nbsp;is&nbsp;present&nbsp;in&nbsp;the&nbsp;list,&nbsp;setting&nbsp;s.err&nbsp;appropriately&nbsp;if&nbsp;not.</span><br>
<span class="lineno">540</span><span class="keyword" id="2076622">func</span>&nbsp;<span class="op" id="2076627">(</span><span class="ident" id="2076628">s</span>&nbsp;<span class="op" id="2076630">*</span><span class="ident" id="2076631">ss</span><span class="op" id="2076633">)</span>&nbsp;<span class="ident" id="2076635">okVerb</span><span class="op" id="2076641">(</span><span class="ident" id="2076642">verb</span>&nbsp;<span class="builtintype" id="2076647">rune</span><span class="op" id="2076651">,</span>&nbsp;<span class="ident" id="2076653">okVerbs</span><span class="op" id="2076660">,</span>&nbsp;<span class="ident" id="2076662">typ</span>&nbsp;<span class="builtintype" id="2076666">string</span><span class="op" id="2076672">)</span>&nbsp;<span class="builtintype" id="2076674">bool</span>&nbsp;<span class="op" id="2076679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076682">for</span>&nbsp;<span class="ident" id="2076686">_</span><span class="op" id="2076687">,</span>&nbsp;<span class="ident" id="2076689">v</span>&nbsp;<span class="op" id="2076691">:=</span>&nbsp;<span class="keyword" id="2076694">range</span>&nbsp;<span class="ident" id="2076700">okVerbs</span>&nbsp;<span class="op" id="2076708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076712">if</span>&nbsp;<span class="ident" id="2076715">v</span>&nbsp;<span class="op" id="2076717">==</span>&nbsp;<span class="ident" id="2076720">verb</span>&nbsp;<span class="op" id="2076725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076730">return</span>&nbsp;<span class="builtintype" id="2076737">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2076744">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2076747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076750">s</span><span class="op" id="2076751">.</span><span class="ident" id="2076752">errorString</span><span class="op" id="2076763">(</span><span class="string" id="2076764">&#34;bad&nbsp;verb&nbsp;%&#34;</span>&nbsp;<span class="op" id="2076777">+</span>&nbsp;<span class="builtintype" id="2076779">string</span><span class="op" id="2076785">(</span><span class="ident" id="2076786">verb</span><span class="op" id="2076790">)</span>&nbsp;<span class="op" id="2076792">+</span>&nbsp;<span class="string" id="2076794">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2076802">+</span>&nbsp;<span class="ident" id="2076804">typ</span><span class="op" id="2076807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076810">return</span>&nbsp;<span class="builtintype" id="2076817">false</span><br>
<span class="lineno"></span><span class="op" id="2076823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="2076826">//&nbsp;scanBool&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="2076902">func</span>&nbsp;<span class="op" id="2076907">(</span><span class="ident" id="2076908">s</span>&nbsp;<span class="op" id="2076910">*</span><span class="ident" id="2076911">ss</span><span class="op" id="2076913">)</span>&nbsp;<span class="ident" id="2076915">scanBool</span><span class="op" id="2076923">(</span><span class="ident" id="2076924">verb</span>&nbsp;<span class="builtintype" id="2076929">rune</span><span class="op" id="2076933">)</span>&nbsp;<span class="builtintype" id="2076935">bool</span>&nbsp;<span class="op" id="2076940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076943">s</span><span class="op" id="2076944">.</span><span class="ident" id="2076945">skipSpace</span><span class="op" id="2076954">(</span><span class="builtintype" id="2076955">false</span><span class="op" id="2076960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076963">s</span><span class="op" id="2076964">.</span><span class="ident" id="2076965">notEOF</span><span class="op" id="2076971">(</span><span class="op" id="2076972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2076975">if</span>&nbsp;<span class="op" id="2076978">!</span><span class="ident" id="2076979">s</span><span class="op" id="2076980">.</span><span class="ident" id="2076981">okVerb</span><span class="op" id="2076987">(</span><span class="ident" id="2076988">verb</span><span class="op" id="2076992">,</span>&nbsp;<span class="string" id="2076994">&#34;tv&#34;</span><span class="op" id="2076998">,</span>&nbsp;<span class="string" id="2077000">&#34;boolean&#34;</span><span class="op" id="2077009">)</span>&nbsp;<span class="op" id="2077011">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077015">return</span>&nbsp;<span class="builtintype" id="2077022">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2077032">//&nbsp;Syntax-checking&nbsp;a&nbsp;boolean&nbsp;is&nbsp;annoying.&nbsp;&nbsp;We&#39;re&nbsp;not&nbsp;fastidious&nbsp;about&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077109">switch</span>&nbsp;<span class="ident" id="2077116">s</span><span class="op" id="2077117">.</span><span class="ident" id="2077118">getRune</span><span class="op" id="2077125">(</span><span class="op" id="2077126">)</span>&nbsp;<span class="op" id="2077128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077131">case</span>&nbsp;<span class="string" id="2077136">&#39;0&#39;</span><span class="op" id="2077139">:</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077143">return</span>&nbsp;<span class="builtintype" id="2077150">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077157">case</span>&nbsp;<span class="string" id="2077162">&#39;1&#39;</span><span class="op" id="2077165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077169">return</span>&nbsp;<span class="builtintype" id="2077176">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077182">case</span>&nbsp;<span class="string" id="2077187">&#39;t&#39;</span><span class="op" id="2077190">,</span>&nbsp;<span class="string" id="2077192">&#39;T&#39;</span><span class="op" id="2077195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077199">if</span>&nbsp;<span class="ident" id="2077202">s</span><span class="op" id="2077203">.</span><span class="ident" id="2077204">accept</span><span class="op" id="2077210">(</span><span class="string" id="2077211">&#34;rR&#34;</span><span class="op" id="2077215">)</span>&nbsp;<span class="op" id="2077217">&amp;&amp;</span>&nbsp;<span class="op" id="2077220">(</span><span class="op" id="2077221">!</span><span class="ident" id="2077222">s</span><span class="op" id="2077223">.</span><span class="ident" id="2077224">accept</span><span class="op" id="2077230">(</span><span class="string" id="2077231">&#34;uU&#34;</span><span class="op" id="2077235">)</span>&nbsp;<span class="op" id="2077237">||</span>&nbsp;<span class="op" id="2077240">!</span><span class="ident" id="2077241">s</span><span class="op" id="2077242">.</span><span class="ident" id="2077243">accept</span><span class="op" id="2077249">(</span><span class="string" id="2077250">&#34;eE&#34;</span><span class="op" id="2077254">)</span><span class="op" id="2077255">)</span>&nbsp;<span class="op" id="2077257">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077262">s</span><span class="op" id="2077263">.</span><span class="builtintype" id="2077264">error</span><span class="op" id="2077269">(</span><span class="ident" id="2077270">boolError</span><span class="op" id="2077279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077287">return</span>&nbsp;<span class="builtintype" id="2077294">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077300">case</span>&nbsp;<span class="string" id="2077305">&#39;f&#39;</span><span class="op" id="2077308">,</span>&nbsp;<span class="string" id="2077310">&#39;F&#39;</span><span class="op" id="2077313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077317">if</span>&nbsp;<span class="ident" id="2077320">s</span><span class="op" id="2077321">.</span><span class="ident" id="2077322">accept</span><span class="op" id="2077328">(</span><span class="string" id="2077329">&#34;aA&#34;</span><span class="op" id="2077333">)</span>&nbsp;<span class="op" id="2077335">&amp;&amp;</span>&nbsp;<span class="op" id="2077338">(</span><span class="op" id="2077339">!</span><span class="ident" id="2077340">s</span><span class="op" id="2077341">.</span><span class="ident" id="2077342">accept</span><span class="op" id="2077348">(</span><span class="string" id="2077349">&#34;lL&#34;</span><span class="op" id="2077353">)</span>&nbsp;<span class="op" id="2077355">||</span>&nbsp;<span class="op" id="2077358">!</span><span class="ident" id="2077359">s</span><span class="op" id="2077360">.</span><span class="ident" id="2077361">accept</span><span class="op" id="2077367">(</span><span class="string" id="2077368">&#34;sS&#34;</span><span class="op" id="2077372">)</span>&nbsp;<span class="op" id="2077374">||</span>&nbsp;<span class="op" id="2077377">!</span><span class="ident" id="2077378">s</span><span class="op" id="2077379">.</span><span class="ident" id="2077380">accept</span><span class="op" id="2077386">(</span><span class="string" id="2077387">&#34;eE&#34;</span><span class="op" id="2077391">)</span><span class="op" id="2077392">)</span>&nbsp;<span class="op" id="2077394">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077399">s</span><span class="op" id="2077400">.</span><span class="builtintype" id="2077401">error</span><span class="op" id="2077406">(</span><span class="ident" id="2077407">boolError</span><span class="op" id="2077416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077424">return</span>&nbsp;<span class="builtintype" id="2077431">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077441">return</span>&nbsp;<span class="builtintype" id="2077448">false</span><br>
<span class="lineno">575</span><span class="op" id="2077454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2077457">//&nbsp;Numerical&nbsp;elements</span><br>
<span class="lineno"></span><span class="keyword" id="2077479">const</span>&nbsp;<span class="op" id="2077485">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077488">binaryDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077506">=</span>&nbsp;<span class="string" id="2077508">&#34;01&#34;</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077514">octalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077532">=</span>&nbsp;<span class="string" id="2077534">&#34;01234567&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077546">decimalDigits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077564">=</span>&nbsp;<span class="string" id="2077566">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077580">hexadecimalDigits</span>&nbsp;<span class="op" id="2077598">=</span>&nbsp;<span class="string" id="2077600">&#34;0123456789aAbBcCdDeEfF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077626">sign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077644">=</span>&nbsp;<span class="string" id="2077646">&#34;+-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077652">period</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077670">=</span>&nbsp;<span class="string" id="2077672">&#34;.&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077677">exponent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077695">=</span>&nbsp;<span class="string" id="2077697">&#34;eEp&#34;</span><br>
<span class="lineno"></span><span class="op" id="2077703">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2077706">//&nbsp;getBase&nbsp;returns&nbsp;the&nbsp;numeric&nbsp;base&nbsp;represented&nbsp;by&nbsp;the&nbsp;verb&nbsp;and&nbsp;its&nbsp;digit&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2077788">func</span>&nbsp;<span class="op" id="2077793">(</span><span class="ident" id="2077794">s</span>&nbsp;<span class="op" id="2077796">*</span><span class="ident" id="2077797">ss</span><span class="op" id="2077799">)</span>&nbsp;<span class="ident" id="2077801">getBase</span><span class="op" id="2077808">(</span><span class="ident" id="2077809">verb</span>&nbsp;<span class="builtintype" id="2077814">rune</span><span class="op" id="2077818">)</span>&nbsp;<span class="op" id="2077820">(</span><span class="ident" id="2077821">base</span>&nbsp;<span class="builtintype" id="2077826">int</span><span class="op" id="2077829">,</span>&nbsp;<span class="ident" id="2077831">digits</span>&nbsp;<span class="builtintype" id="2077838">string</span><span class="op" id="2077844">)</span>&nbsp;<span class="op" id="2077846">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077849">s</span><span class="op" id="2077850">.</span><span class="ident" id="2077851">okVerb</span><span class="op" id="2077857">(</span><span class="ident" id="2077858">verb</span><span class="op" id="2077862">,</span>&nbsp;<span class="string" id="2077864">&#34;bdoUxXv&#34;</span><span class="op" id="2077873">,</span>&nbsp;<span class="string" id="2077875">&#34;integer&#34;</span><span class="op" id="2077884">)</span>&nbsp;<span class="comment" id="2077886">//&nbsp;sets&nbsp;s.err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077901">base</span>&nbsp;<span class="op" id="2077906">=</span>&nbsp;<span class="num" id="2077908">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077912">digits</span>&nbsp;<span class="op" id="2077919">=</span>&nbsp;<span class="ident" id="2077921">decimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077936">switch</span>&nbsp;<span class="ident" id="2077943">verb</span>&nbsp;<span class="op" id="2077948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077951">case</span>&nbsp;<span class="string" id="2077956">&#39;b&#39;</span><span class="op" id="2077959">:</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077963">base</span>&nbsp;<span class="op" id="2077968">=</span>&nbsp;<span class="num" id="2077970">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077974">digits</span>&nbsp;<span class="op" id="2077981">=</span>&nbsp;<span class="ident" id="2077983">binaryDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077997">case</span>&nbsp;<span class="string" id="2078002">&#39;o&#39;</span><span class="op" id="2078005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078009">base</span>&nbsp;<span class="op" id="2078014">=</span>&nbsp;<span class="num" id="2078016">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078020">digits</span>&nbsp;<span class="op" id="2078027">=</span>&nbsp;<span class="ident" id="2078029">octalDigits</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078042">case</span>&nbsp;<span class="string" id="2078047">&#39;x&#39;</span><span class="op" id="2078050">,</span>&nbsp;<span class="string" id="2078052">&#39;X&#39;</span><span class="op" id="2078055">,</span>&nbsp;<span class="string" id="2078057">&#39;U&#39;</span><span class="op" id="2078060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078064">base</span>&nbsp;<span class="op" id="2078069">=</span>&nbsp;<span class="num" id="2078071">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078076">digits</span>&nbsp;<span class="op" id="2078083">=</span>&nbsp;<span class="ident" id="2078085">hexadecimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078107">return</span><br>
<span class="lineno">605</span><span class="op" id="2078114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2078117">//&nbsp;scanNumber&nbsp;returns&nbsp;the&nbsp;numerical&nbsp;string&nbsp;with&nbsp;specified&nbsp;digits&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="keyword" id="2078197">func</span>&nbsp;<span class="op" id="2078202">(</span><span class="ident" id="2078203">s</span>&nbsp;<span class="op" id="2078205">*</span><span class="ident" id="2078206">ss</span><span class="op" id="2078208">)</span>&nbsp;<span class="ident" id="2078210">scanNumber</span><span class="op" id="2078220">(</span><span class="ident" id="2078221">digits</span>&nbsp;<span class="builtintype" id="2078228">string</span><span class="op" id="2078234">,</span>&nbsp;<span class="ident" id="2078236">haveDigits</span>&nbsp;<span class="builtintype" id="2078247">bool</span><span class="op" id="2078251">)</span>&nbsp;<span class="builtintype" id="2078253">string</span>&nbsp;<span class="op" id="2078260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078263">if</span>&nbsp;<span class="op" id="2078266">!</span><span class="ident" id="2078267">haveDigits</span>&nbsp;<span class="op" id="2078278">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078282">s</span><span class="op" id="2078283">.</span><span class="ident" id="2078284">notEOF</span><span class="op" id="2078290">(</span><span class="op" id="2078291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078295">if</span>&nbsp;<span class="op" id="2078298">!</span><span class="ident" id="2078299">s</span><span class="op" id="2078300">.</span><span class="ident" id="2078301">accept</span><span class="op" id="2078307">(</span><span class="ident" id="2078308">digits</span><span class="op" id="2078314">)</span>&nbsp;<span class="op" id="2078316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078321">s</span><span class="op" id="2078322">.</span><span class="ident" id="2078323">errorString</span><span class="op" id="2078334">(</span><span class="string" id="2078335">&#34;expected&nbsp;integer&#34;</span><span class="op" id="2078353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078360">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078363">for</span>&nbsp;<span class="ident" id="2078367">s</span><span class="op" id="2078368">.</span><span class="ident" id="2078369">accept</span><span class="op" id="2078375">(</span><span class="ident" id="2078376">digits</span><span class="op" id="2078382">)</span>&nbsp;<span class="op" id="2078384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078390">return</span>&nbsp;<span class="builtintype" id="2078397">string</span><span class="op" id="2078403">(</span><span class="ident" id="2078404">s</span><span class="op" id="2078405">.</span><span class="ident" id="2078406">buf</span><span class="op" id="2078409">)</span><br>
<span class="lineno"></span><span class="op" id="2078411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2078414">//&nbsp;scanRune&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;value&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="2078468">func</span>&nbsp;<span class="op" id="2078473">(</span><span class="ident" id="2078474">s</span>&nbsp;<span class="op" id="2078476">*</span><span class="ident" id="2078477">ss</span><span class="op" id="2078479">)</span>&nbsp;<span class="ident" id="2078481">scanRune</span><span class="op" id="2078489">(</span><span class="ident" id="2078490">bitSize</span>&nbsp;<span class="builtintype" id="2078498">int</span><span class="op" id="2078501">)</span>&nbsp;<span class="ident" id="2078503">int64</span>&nbsp;<span class="op" id="2078509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078512">s</span><span class="op" id="2078513">.</span><span class="ident" id="2078514">notEOF</span><span class="op" id="2078520">(</span><span class="op" id="2078521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078524">r</span>&nbsp;<span class="op" id="2078526">:=</span>&nbsp;<span class="ident" id="2078529">int64</span><span class="op" id="2078534">(</span><span class="ident" id="2078535">s</span><span class="op" id="2078536">.</span><span class="ident" id="2078537">getRune</span><span class="op" id="2078544">(</span><span class="op" id="2078545">)</span><span class="op" id="2078546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078549">n</span>&nbsp;<span class="op" id="2078551">:=</span>&nbsp;<span class="builtintype" id="2078554">uint</span><span class="op" id="2078558">(</span><span class="ident" id="2078559">bitSize</span><span class="op" id="2078566">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078569">x</span>&nbsp;<span class="op" id="2078571">:=</span>&nbsp;<span class="op" id="2078574">(</span><span class="ident" id="2078575">r</span>&nbsp;<span class="op" id="2078577">&lt;&lt;</span>&nbsp;<span class="op" id="2078580">(</span><span class="num" id="2078581">64</span>&nbsp;<span class="op" id="2078584">-</span>&nbsp;<span class="ident" id="2078586">n</span><span class="op" id="2078587">)</span><span class="op" id="2078588">)</span>&nbsp;<span class="op" id="2078590">&gt;&gt;</span>&nbsp;<span class="op" id="2078593">(</span><span class="num" id="2078594">64</span>&nbsp;<span class="op" id="2078597">-</span>&nbsp;<span class="ident" id="2078599">n</span><span class="op" id="2078600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078603">if</span>&nbsp;<span class="ident" id="2078606">x</span>&nbsp;<span class="op" id="2078608">!=</span>&nbsp;<span class="ident" id="2078611">r</span>&nbsp;<span class="op" id="2078613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078617">s</span><span class="op" id="2078618">.</span><span class="ident" id="2078619">errorString</span><span class="op" id="2078630">(</span><span class="string" id="2078631">&#34;overflow&nbsp;on&nbsp;character&nbsp;value&nbsp;&#34;</span>&nbsp;<span class="op" id="2078662">+</span>&nbsp;<span class="builtintype" id="2078664">string</span><span class="op" id="2078670">(</span><span class="ident" id="2078671">r</span><span class="op" id="2078672">)</span><span class="op" id="2078673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078679">return</span>&nbsp;<span class="ident" id="2078686">r</span><br>
<span class="lineno">630</span><span class="op" id="2078688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2078691">//&nbsp;scanBasePrefix&nbsp;reports&nbsp;whether&nbsp;the&nbsp;integer&nbsp;begins&nbsp;with&nbsp;a&nbsp;0&nbsp;or&nbsp;0x,</span><br>
<span class="lineno"></span><span class="comment" id="2078760">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;base,&nbsp;digit&nbsp;string,&nbsp;and&nbsp;whether&nbsp;a&nbsp;zero&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2078829">//&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;the&nbsp;verb&nbsp;is&nbsp;%v.</span><br>
<span class="lineno">635</span><span class="keyword" id="2078869">func</span>&nbsp;<span class="op" id="2078874">(</span><span class="ident" id="2078875">s</span>&nbsp;<span class="op" id="2078877">*</span><span class="ident" id="2078878">ss</span><span class="op" id="2078880">)</span>&nbsp;<span class="ident" id="2078882">scanBasePrefix</span><span class="op" id="2078896">(</span><span class="op" id="2078897">)</span>&nbsp;<span class="op" id="2078899">(</span><span class="ident" id="2078900">base</span>&nbsp;<span class="builtintype" id="2078905">int</span><span class="op" id="2078908">,</span>&nbsp;<span class="ident" id="2078910">digits</span>&nbsp;<span class="builtintype" id="2078917">string</span><span class="op" id="2078923">,</span>&nbsp;<span class="ident" id="2078925">found</span>&nbsp;<span class="builtintype" id="2078931">bool</span><span class="op" id="2078935">)</span>&nbsp;<span class="op" id="2078937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078940">if</span>&nbsp;<span class="op" id="2078943">!</span><span class="ident" id="2078944">s</span><span class="op" id="2078945">.</span><span class="ident" id="2078946">peek</span><span class="op" id="2078950">(</span><span class="string" id="2078951">&#34;0&#34;</span><span class="op" id="2078954">)</span>&nbsp;<span class="op" id="2078956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078960">return</span>&nbsp;<span class="num" id="2078967">10</span><span class="op" id="2078969">,</span>&nbsp;<span class="ident" id="2078971">decimalDigits</span><span class="op" id="2078984">,</span>&nbsp;<span class="builtintype" id="2078986">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078996">s</span><span class="op" id="2078997">.</span><span class="ident" id="2078998">accept</span><span class="op" id="2079004">(</span><span class="string" id="2079005">&#34;0&#34;</span><span class="op" id="2079008">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079011">found</span>&nbsp;<span class="op" id="2079017">=</span>&nbsp;<span class="builtintype" id="2079019">true</span>&nbsp;<span class="comment" id="2079024">//&nbsp;We&#39;ve&nbsp;put&nbsp;a&nbsp;digit&nbsp;into&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2079069">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;&#39;0&#39;&nbsp;&amp;&amp;&nbsp;&#39;0x&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079103">base</span><span class="op" id="2079107">,</span>&nbsp;<span class="ident" id="2079109">digits</span>&nbsp;<span class="op" id="2079116">=</span>&nbsp;<span class="num" id="2079118">8</span><span class="op" id="2079119">,</span>&nbsp;<span class="ident" id="2079121">octalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079134">if</span>&nbsp;<span class="ident" id="2079137">s</span><span class="op" id="2079138">.</span><span class="ident" id="2079139">peek</span><span class="op" id="2079143">(</span><span class="string" id="2079144">&#34;xX&#34;</span><span class="op" id="2079148">)</span>&nbsp;<span class="op" id="2079150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079154">s</span><span class="op" id="2079155">.</span><span class="ident" id="2079156">consume</span><span class="op" id="2079163">(</span><span class="string" id="2079164">&#34;xX&#34;</span><span class="op" id="2079168">,</span>&nbsp;<span class="builtintype" id="2079170">false</span><span class="op" id="2079175">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079179">base</span><span class="op" id="2079183">,</span>&nbsp;<span class="ident" id="2079185">digits</span>&nbsp;<span class="op" id="2079192">=</span>&nbsp;<span class="num" id="2079194">16</span><span class="op" id="2079196">,</span>&nbsp;<span class="ident" id="2079198">hexadecimalDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079220">return</span><br>
<span class="lineno"></span><span class="op" id="2079227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="2079230">//&nbsp;scanInt&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;integer&nbsp;represented&nbsp;by&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="2079298">//&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno"></span><span class="keyword" id="2079362">func</span>&nbsp;<span class="op" id="2079367">(</span><span class="ident" id="2079368">s</span>&nbsp;<span class="op" id="2079370">*</span><span class="ident" id="2079371">ss</span><span class="op" id="2079373">)</span>&nbsp;<span class="ident" id="2079375">scanInt</span><span class="op" id="2079382">(</span><span class="ident" id="2079383">verb</span>&nbsp;<span class="builtintype" id="2079388">rune</span><span class="op" id="2079392">,</span>&nbsp;<span class="ident" id="2079394">bitSize</span>&nbsp;<span class="builtintype" id="2079402">int</span><span class="op" id="2079405">)</span>&nbsp;<span class="ident" id="2079407">int64</span>&nbsp;<span class="op" id="2079413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079416">if</span>&nbsp;<span class="ident" id="2079419">verb</span>&nbsp;<span class="op" id="2079424">==</span>&nbsp;<span class="string" id="2079427">&#39;c&#39;</span>&nbsp;<span class="op" id="2079431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079435">return</span>&nbsp;<span class="ident" id="2079442">s</span><span class="op" id="2079443">.</span><span class="ident" id="2079444">scanRune</span><span class="op" id="2079452">(</span><span class="ident" id="2079453">bitSize</span><span class="op" id="2079460">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079466">s</span><span class="op" id="2079467">.</span><span class="ident" id="2079468">skipSpace</span><span class="op" id="2079477">(</span><span class="builtintype" id="2079478">false</span><span class="op" id="2079483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079486">s</span><span class="op" id="2079487">.</span><span class="ident" id="2079488">notEOF</span><span class="op" id="2079494">(</span><span class="op" id="2079495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079498">base</span><span class="op" id="2079502">,</span>&nbsp;<span class="ident" id="2079504">digits</span>&nbsp;<span class="op" id="2079511">:=</span>&nbsp;<span class="ident" id="2079514">s</span><span class="op" id="2079515">.</span><span class="ident" id="2079516">getBase</span><span class="op" id="2079523">(</span><span class="ident" id="2079524">verb</span><span class="op" id="2079528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079531">haveDigits</span>&nbsp;<span class="op" id="2079542">:=</span>&nbsp;<span class="builtintype" id="2079545">false</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079552">if</span>&nbsp;<span class="ident" id="2079555">verb</span>&nbsp;<span class="op" id="2079560">==</span>&nbsp;<span class="string" id="2079563">&#39;U&#39;</span>&nbsp;<span class="op" id="2079567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079571">if</span>&nbsp;<span class="op" id="2079574">!</span><span class="ident" id="2079575">s</span><span class="op" id="2079576">.</span><span class="ident" id="2079577">consume</span><span class="op" id="2079584">(</span><span class="string" id="2079585">&#34;U&#34;</span><span class="op" id="2079588">,</span>&nbsp;<span class="builtintype" id="2079590">false</span><span class="op" id="2079595">)</span>&nbsp;<span class="op" id="2079597">||</span>&nbsp;<span class="op" id="2079600">!</span><span class="ident" id="2079601">s</span><span class="op" id="2079602">.</span><span class="ident" id="2079603">consume</span><span class="op" id="2079610">(</span><span class="string" id="2079611">&#34;+&#34;</span><span class="op" id="2079614">,</span>&nbsp;<span class="builtintype" id="2079616">false</span><span class="op" id="2079621">)</span>&nbsp;<span class="op" id="2079623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079628">s</span><span class="op" id="2079629">.</span><span class="ident" id="2079630">errorString</span><span class="op" id="2079641">(</span><span class="string" id="2079642">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="2079663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079670">}</span>&nbsp;<span class="keyword" id="2079672">else</span>&nbsp;<span class="op" id="2079677">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079681">s</span><span class="op" id="2079682">.</span><span class="ident" id="2079683">accept</span><span class="op" id="2079689">(</span><span class="ident" id="2079690">sign</span><span class="op" id="2079694">)</span>&nbsp;<span class="comment" id="2079696">//&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;sign,&nbsp;it&nbsp;will&nbsp;be&nbsp;left&nbsp;in&nbsp;the&nbsp;token&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079757">if</span>&nbsp;<span class="ident" id="2079760">verb</span>&nbsp;<span class="op" id="2079765">==</span>&nbsp;<span class="string" id="2079768">&#39;v&#39;</span>&nbsp;<span class="op" id="2079772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079777">base</span><span class="op" id="2079781">,</span>&nbsp;<span class="ident" id="2079783">digits</span><span class="op" id="2079789">,</span>&nbsp;<span class="ident" id="2079791">haveDigits</span>&nbsp;<span class="op" id="2079802">=</span>&nbsp;<span class="ident" id="2079804">s</span><span class="op" id="2079805">.</span><span class="ident" id="2079806">scanBasePrefix</span><span class="op" id="2079820">(</span><span class="op" id="2079821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079828">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079831">tok</span>&nbsp;<span class="op" id="2079835">:=</span>&nbsp;<span class="ident" id="2079838">s</span><span class="op" id="2079839">.</span><span class="ident" id="2079840">scanNumber</span><span class="op" id="2079850">(</span><span class="ident" id="2079851">digits</span><span class="op" id="2079857">,</span>&nbsp;<span class="ident" id="2079859">haveDigits</span><span class="op" id="2079869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079872">i</span><span class="op" id="2079873">,</span>&nbsp;<span class="ident" id="2079875">err</span>&nbsp;<span class="op" id="2079879">:=</span>&nbsp;<span class="ident" id="2079882">strconv</span><span class="op" id="2079889">.</span><span class="ident" id="2079890">ParseInt</span><span class="op" id="2079898">(</span><span class="ident" id="2079899">tok</span><span class="op" id="2079902">,</span>&nbsp;<span class="ident" id="2079904">base</span><span class="op" id="2079908">,</span>&nbsp;<span class="num" id="2079910">64</span><span class="op" id="2079912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079915">if</span>&nbsp;<span class="ident" id="2079918">err</span>&nbsp;<span class="op" id="2079922">!=</span>&nbsp;<span class="builtintype" id="2079925">nil</span>&nbsp;<span class="op" id="2079929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079933">s</span><span class="op" id="2079934">.</span><span class="builtintype" id="2079935">error</span><span class="op" id="2079940">(</span><span class="ident" id="2079941">err</span><span class="op" id="2079944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079947">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079950">n</span>&nbsp;<span class="op" id="2079952">:=</span>&nbsp;<span class="builtintype" id="2079955">uint</span><span class="op" id="2079959">(</span><span class="ident" id="2079960">bitSize</span><span class="op" id="2079967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079970">x</span>&nbsp;<span class="op" id="2079972">:=</span>&nbsp;<span class="op" id="2079975">(</span><span class="ident" id="2079976">i</span>&nbsp;<span class="op" id="2079978">&lt;&lt;</span>&nbsp;<span class="op" id="2079981">(</span><span class="num" id="2079982">64</span>&nbsp;<span class="op" id="2079985">-</span>&nbsp;<span class="ident" id="2079987">n</span><span class="op" id="2079988">)</span><span class="op" id="2079989">)</span>&nbsp;<span class="op" id="2079991">&gt;&gt;</span>&nbsp;<span class="op" id="2079994">(</span><span class="num" id="2079995">64</span>&nbsp;<span class="op" id="2079998">-</span>&nbsp;<span class="ident" id="2080000">n</span><span class="op" id="2080001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080004">if</span>&nbsp;<span class="ident" id="2080007">x</span>&nbsp;<span class="op" id="2080009">!=</span>&nbsp;<span class="ident" id="2080012">i</span>&nbsp;<span class="op" id="2080014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080018">s</span><span class="op" id="2080019">.</span><span class="ident" id="2080020">errorString</span><span class="op" id="2080031">(</span><span class="string" id="2080032">&#34;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="2080061">+</span>&nbsp;<span class="ident" id="2080063">tok</span><span class="op" id="2080066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080069">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080072">return</span>&nbsp;<span class="ident" id="2080079">i</span><br>
<span class="lineno"></span><span class="op" id="2080081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2080084">//&nbsp;scanUint&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="2080150">//&nbsp;by&nbsp;the&nbsp;next&nbsp;token,&nbsp;checking&nbsp;for&nbsp;overflow.&nbsp;&nbsp;Any&nbsp;error&nbsp;is&nbsp;stored&nbsp;in&nbsp;s.err.</span><br>
<span class="lineno">685</span><span class="keyword" id="2080226">func</span>&nbsp;<span class="op" id="2080231">(</span><span class="ident" id="2080232">s</span>&nbsp;<span class="op" id="2080234">*</span><span class="ident" id="2080235">ss</span><span class="op" id="2080237">)</span>&nbsp;<span class="ident" id="2080239">scanUint</span><span class="op" id="2080247">(</span><span class="ident" id="2080248">verb</span>&nbsp;<span class="builtintype" id="2080253">rune</span><span class="op" id="2080257">,</span>&nbsp;<span class="ident" id="2080259">bitSize</span>&nbsp;<span class="builtintype" id="2080267">int</span><span class="op" id="2080270">)</span>&nbsp;<span class="ident" id="2080272">uint64</span>&nbsp;<span class="op" id="2080279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080282">if</span>&nbsp;<span class="ident" id="2080285">verb</span>&nbsp;<span class="op" id="2080290">==</span>&nbsp;<span class="string" id="2080293">&#39;c&#39;</span>&nbsp;<span class="op" id="2080297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080301">return</span>&nbsp;<span class="ident" id="2080308">uint64</span><span class="op" id="2080314">(</span><span class="ident" id="2080315">s</span><span class="op" id="2080316">.</span><span class="ident" id="2080317">scanRune</span><span class="op" id="2080325">(</span><span class="ident" id="2080326">bitSize</span><span class="op" id="2080333">)</span><span class="op" id="2080334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080340">s</span><span class="op" id="2080341">.</span><span class="ident" id="2080342">skipSpace</span><span class="op" id="2080351">(</span><span class="builtintype" id="2080352">false</span><span class="op" id="2080357">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080360">s</span><span class="op" id="2080361">.</span><span class="ident" id="2080362">notEOF</span><span class="op" id="2080368">(</span><span class="op" id="2080369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080372">base</span><span class="op" id="2080376">,</span>&nbsp;<span class="ident" id="2080378">digits</span>&nbsp;<span class="op" id="2080385">:=</span>&nbsp;<span class="ident" id="2080388">s</span><span class="op" id="2080389">.</span><span class="ident" id="2080390">getBase</span><span class="op" id="2080397">(</span><span class="ident" id="2080398">verb</span><span class="op" id="2080402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080405">haveDigits</span>&nbsp;<span class="op" id="2080416">:=</span>&nbsp;<span class="builtintype" id="2080419">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080426">if</span>&nbsp;<span class="ident" id="2080429">verb</span>&nbsp;<span class="op" id="2080434">==</span>&nbsp;<span class="string" id="2080437">&#39;U&#39;</span>&nbsp;<span class="op" id="2080441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080445">if</span>&nbsp;<span class="op" id="2080448">!</span><span class="ident" id="2080449">s</span><span class="op" id="2080450">.</span><span class="ident" id="2080451">consume</span><span class="op" id="2080458">(</span><span class="string" id="2080459">&#34;U&#34;</span><span class="op" id="2080462">,</span>&nbsp;<span class="builtintype" id="2080464">false</span><span class="op" id="2080469">)</span>&nbsp;<span class="op" id="2080471">||</span>&nbsp;<span class="op" id="2080474">!</span><span class="ident" id="2080475">s</span><span class="op" id="2080476">.</span><span class="ident" id="2080477">consume</span><span class="op" id="2080484">(</span><span class="string" id="2080485">&#34;+&#34;</span><span class="op" id="2080488">,</span>&nbsp;<span class="builtintype" id="2080490">false</span><span class="op" id="2080495">)</span>&nbsp;<span class="op" id="2080497">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080502">s</span><span class="op" id="2080503">.</span><span class="ident" id="2080504">errorString</span><span class="op" id="2080515">(</span><span class="string" id="2080516">&#34;bad&nbsp;unicode&nbsp;format&nbsp;&#34;</span><span class="op" id="2080537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080544">}</span>&nbsp;<span class="keyword" id="2080546">else</span>&nbsp;<span class="keyword" id="2080551">if</span>&nbsp;<span class="ident" id="2080554">verb</span>&nbsp;<span class="op" id="2080559">==</span>&nbsp;<span class="string" id="2080562">&#39;v&#39;</span>&nbsp;<span class="op" id="2080566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080570">base</span><span class="op" id="2080574">,</span>&nbsp;<span class="ident" id="2080576">digits</span><span class="op" id="2080582">,</span>&nbsp;<span class="ident" id="2080584">haveDigits</span>&nbsp;<span class="op" id="2080595">=</span>&nbsp;<span class="ident" id="2080597">s</span><span class="op" id="2080598">.</span><span class="ident" id="2080599">scanBasePrefix</span><span class="op" id="2080613">(</span><span class="op" id="2080614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080617">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080620">tok</span>&nbsp;<span class="op" id="2080624">:=</span>&nbsp;<span class="ident" id="2080627">s</span><span class="op" id="2080628">.</span><span class="ident" id="2080629">scanNumber</span><span class="op" id="2080639">(</span><span class="ident" id="2080640">digits</span><span class="op" id="2080646">,</span>&nbsp;<span class="ident" id="2080648">haveDigits</span><span class="op" id="2080658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080661">i</span><span class="op" id="2080662">,</span>&nbsp;<span class="ident" id="2080664">err</span>&nbsp;<span class="op" id="2080668">:=</span>&nbsp;<span class="ident" id="2080671">strconv</span><span class="op" id="2080678">.</span><span class="ident" id="2080679">ParseUint</span><span class="op" id="2080688">(</span><span class="ident" id="2080689">tok</span><span class="op" id="2080692">,</span>&nbsp;<span class="ident" id="2080694">base</span><span class="op" id="2080698">,</span>&nbsp;<span class="num" id="2080700">64</span><span class="op" id="2080702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080705">if</span>&nbsp;<span class="ident" id="2080708">err</span>&nbsp;<span class="op" id="2080712">!=</span>&nbsp;<span class="builtintype" id="2080715">nil</span>&nbsp;<span class="op" id="2080719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080723">s</span><span class="op" id="2080724">.</span><span class="builtintype" id="2080725">error</span><span class="op" id="2080730">(</span><span class="ident" id="2080731">err</span><span class="op" id="2080734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080737">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080740">n</span>&nbsp;<span class="op" id="2080742">:=</span>&nbsp;<span class="builtintype" id="2080745">uint</span><span class="op" id="2080749">(</span><span class="ident" id="2080750">bitSize</span><span class="op" id="2080757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080760">x</span>&nbsp;<span class="op" id="2080762">:=</span>&nbsp;<span class="op" id="2080765">(</span><span class="ident" id="2080766">i</span>&nbsp;<span class="op" id="2080768">&lt;&lt;</span>&nbsp;<span class="op" id="2080771">(</span><span class="num" id="2080772">64</span>&nbsp;<span class="op" id="2080775">-</span>&nbsp;<span class="ident" id="2080777">n</span><span class="op" id="2080778">)</span><span class="op" id="2080779">)</span>&nbsp;<span class="op" id="2080781">&gt;&gt;</span>&nbsp;<span class="op" id="2080784">(</span><span class="num" id="2080785">64</span>&nbsp;<span class="op" id="2080788">-</span>&nbsp;<span class="ident" id="2080790">n</span><span class="op" id="2080791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080794">if</span>&nbsp;<span class="ident" id="2080797">x</span>&nbsp;<span class="op" id="2080799">!=</span>&nbsp;<span class="ident" id="2080802">i</span>&nbsp;<span class="op" id="2080804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080808">s</span><span class="op" id="2080809">.</span><span class="ident" id="2080810">errorString</span><span class="op" id="2080821">(</span><span class="string" id="2080822">&#34;unsigned&nbsp;integer&nbsp;overflow&nbsp;on&nbsp;token&nbsp;&#34;</span>&nbsp;<span class="op" id="2080860">+</span>&nbsp;<span class="ident" id="2080862">tok</span><span class="op" id="2080865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080868">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080871">return</span>&nbsp;<span class="ident" id="2080878">i</span><br>
<span class="lineno"></span><span class="op" id="2080880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2080883">//&nbsp;floatToken&nbsp;returns&nbsp;the&nbsp;floating-point&nbsp;number&nbsp;starting&nbsp;here,&nbsp;no&nbsp;longer&nbsp;than&nbsp;swid</span><br>
<span class="lineno"></span><span class="comment" id="2080966">//&nbsp;if&nbsp;the&nbsp;width&nbsp;is&nbsp;specified.&nbsp;It&#39;s&nbsp;not&nbsp;rigorous&nbsp;about&nbsp;syntax&nbsp;because&nbsp;it&nbsp;doesn&#39;t&nbsp;check&nbsp;that</span><br>
<span class="lineno">715</span><span class="comment" id="2081057">//&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;some&nbsp;digits,&nbsp;but&nbsp;Atof&nbsp;will&nbsp;do&nbsp;that.</span><br>
<span class="lineno"></span><span class="keyword" id="2081113">func</span>&nbsp;<span class="op" id="2081118">(</span><span class="ident" id="2081119">s</span>&nbsp;<span class="op" id="2081121">*</span><span class="ident" id="2081122">ss</span><span class="op" id="2081124">)</span>&nbsp;<span class="ident" id="2081126">floatToken</span><span class="op" id="2081136">(</span><span class="op" id="2081137">)</span>&nbsp;<span class="builtintype" id="2081139">string</span>&nbsp;<span class="op" id="2081146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081149">s</span><span class="op" id="2081150">.</span><span class="ident" id="2081151">buf</span>&nbsp;<span class="op" id="2081155">=</span>&nbsp;<span class="ident" id="2081157">s</span><span class="op" id="2081158">.</span><span class="ident" id="2081159">buf</span><span class="op" id="2081162">[</span><span class="op" id="2081163">:</span><span class="num" id="2081164">0</span><span class="op" id="2081165">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081168">//&nbsp;NaN?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081177">if</span>&nbsp;<span class="ident" id="2081180">s</span><span class="op" id="2081181">.</span><span class="ident" id="2081182">accept</span><span class="op" id="2081188">(</span><span class="string" id="2081189">&#34;nN&#34;</span><span class="op" id="2081193">)</span>&nbsp;<span class="op" id="2081195">&amp;&amp;</span>&nbsp;<span class="ident" id="2081198">s</span><span class="op" id="2081199">.</span><span class="ident" id="2081200">accept</span><span class="op" id="2081206">(</span><span class="string" id="2081207">&#34;aA&#34;</span><span class="op" id="2081211">)</span>&nbsp;<span class="op" id="2081213">&amp;&amp;</span>&nbsp;<span class="ident" id="2081216">s</span><span class="op" id="2081217">.</span><span class="ident" id="2081218">accept</span><span class="op" id="2081224">(</span><span class="string" id="2081225">&#34;nN&#34;</span><span class="op" id="2081229">)</span>&nbsp;<span class="op" id="2081231">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081235">return</span>&nbsp;<span class="builtintype" id="2081242">string</span><span class="op" id="2081248">(</span><span class="ident" id="2081249">s</span><span class="op" id="2081250">.</span><span class="ident" id="2081251">buf</span><span class="op" id="2081254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081260">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081278">s</span><span class="op" id="2081279">.</span><span class="ident" id="2081280">accept</span><span class="op" id="2081286">(</span><span class="ident" id="2081287">sign</span><span class="op" id="2081291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081294">//&nbsp;Inf?</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081303">if</span>&nbsp;<span class="ident" id="2081306">s</span><span class="op" id="2081307">.</span><span class="ident" id="2081308">accept</span><span class="op" id="2081314">(</span><span class="string" id="2081315">&#34;iI&#34;</span><span class="op" id="2081319">)</span>&nbsp;<span class="op" id="2081321">&amp;&amp;</span>&nbsp;<span class="ident" id="2081324">s</span><span class="op" id="2081325">.</span><span class="ident" id="2081326">accept</span><span class="op" id="2081332">(</span><span class="string" id="2081333">&#34;nN&#34;</span><span class="op" id="2081337">)</span>&nbsp;<span class="op" id="2081339">&amp;&amp;</span>&nbsp;<span class="ident" id="2081342">s</span><span class="op" id="2081343">.</span><span class="ident" id="2081344">accept</span><span class="op" id="2081350">(</span><span class="string" id="2081351">&#34;fF&#34;</span><span class="op" id="2081355">)</span>&nbsp;<span class="op" id="2081357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081361">return</span>&nbsp;<span class="builtintype" id="2081368">string</span><span class="op" id="2081374">(</span><span class="ident" id="2081375">s</span><span class="op" id="2081376">.</span><span class="ident" id="2081377">buf</span><span class="op" id="2081380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081386">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081398">for</span>&nbsp;<span class="ident" id="2081402">s</span><span class="op" id="2081403">.</span><span class="ident" id="2081404">accept</span><span class="op" id="2081410">(</span><span class="ident" id="2081411">decimalDigits</span><span class="op" id="2081424">)</span>&nbsp;<span class="op" id="2081426">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081432">//&nbsp;decimal&nbsp;point?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081451">if</span>&nbsp;<span class="ident" id="2081454">s</span><span class="op" id="2081455">.</span><span class="ident" id="2081456">accept</span><span class="op" id="2081462">(</span><span class="ident" id="2081463">period</span><span class="op" id="2081469">)</span>&nbsp;<span class="op" id="2081471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081475">//&nbsp;fraction?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081490">for</span>&nbsp;<span class="ident" id="2081494">s</span><span class="op" id="2081495">.</span><span class="ident" id="2081496">accept</span><span class="op" id="2081502">(</span><span class="ident" id="2081503">decimalDigits</span><span class="op" id="2081516">)</span>&nbsp;<span class="op" id="2081518">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081528">//&nbsp;exponent?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081542">if</span>&nbsp;<span class="ident" id="2081545">s</span><span class="op" id="2081546">.</span><span class="ident" id="2081547">accept</span><span class="op" id="2081553">(</span><span class="ident" id="2081554">exponent</span><span class="op" id="2081562">)</span>&nbsp;<span class="op" id="2081564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081568">//&nbsp;leading&nbsp;sign?</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081587">s</span><span class="op" id="2081588">.</span><span class="ident" id="2081589">accept</span><span class="op" id="2081595">(</span><span class="ident" id="2081596">sign</span><span class="op" id="2081600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081604">//&nbsp;digits?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081617">for</span>&nbsp;<span class="ident" id="2081621">s</span><span class="op" id="2081622">.</span><span class="ident" id="2081623">accept</span><span class="op" id="2081629">(</span><span class="ident" id="2081630">decimalDigits</span><span class="op" id="2081643">)</span>&nbsp;<span class="op" id="2081645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081652">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081655">return</span>&nbsp;<span class="builtintype" id="2081662">string</span><span class="op" id="2081668">(</span><span class="ident" id="2081669">s</span><span class="op" id="2081670">.</span><span class="ident" id="2081671">buf</span><span class="op" id="2081674">)</span><br>
<span class="lineno"></span><span class="op" id="2081676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2081679">//&nbsp;complexTokens&nbsp;returns&nbsp;the&nbsp;real&nbsp;and&nbsp;imaginary&nbsp;parts&nbsp;of&nbsp;the&nbsp;complex&nbsp;number&nbsp;starting&nbsp;here.</span><br>
<span class="lineno"></span><span class="comment" id="2081770">//&nbsp;The&nbsp;number&nbsp;might&nbsp;be&nbsp;parenthesized&nbsp;and&nbsp;has&nbsp;the&nbsp;format&nbsp;(N+Ni)&nbsp;where&nbsp;N&nbsp;is&nbsp;a&nbsp;floating-point</span><br>
<span class="lineno">750</span><span class="comment" id="2081861">//&nbsp;number&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;spaces&nbsp;within.</span><br>
<span class="lineno"></span><span class="keyword" id="2081903">func</span>&nbsp;<span class="op" id="2081908">(</span><span class="ident" id="2081909">s</span>&nbsp;<span class="op" id="2081911">*</span><span class="ident" id="2081912">ss</span><span class="op" id="2081914">)</span>&nbsp;<span class="ident" id="2081916">complexTokens</span><span class="op" id="2081929">(</span><span class="op" id="2081930">)</span>&nbsp;<span class="op" id="2081932">(</span><span class="builtinfunc" id="2081933">real</span><span class="op" id="2081937">,</span>&nbsp;<span class="builtinfunc" id="2081939">imag</span>&nbsp;<span class="builtintype" id="2081944">string</span><span class="op" id="2081950">)</span>&nbsp;<span class="op" id="2081952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081955">//&nbsp;TODO:&nbsp;accept&nbsp;N&nbsp;and&nbsp;Ni&nbsp;independently?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081996">parens</span>&nbsp;<span class="op" id="2082003">:=</span>&nbsp;<span class="ident" id="2082006">s</span><span class="op" id="2082007">.</span><span class="ident" id="2082008">accept</span><span class="op" id="2082014">(</span><span class="string" id="2082015">&#34;(&#34;</span><span class="op" id="2082018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2082021">real</span>&nbsp;<span class="op" id="2082026">=</span>&nbsp;<span class="ident" id="2082028">s</span><span class="op" id="2082029">.</span><span class="ident" id="2082030">floatToken</span><span class="op" id="2082040">(</span><span class="op" id="2082041">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082044">s</span><span class="op" id="2082045">.</span><span class="ident" id="2082046">buf</span>&nbsp;<span class="op" id="2082050">=</span>&nbsp;<span class="ident" id="2082052">s</span><span class="op" id="2082053">.</span><span class="ident" id="2082054">buf</span><span class="op" id="2082057">[</span><span class="op" id="2082058">:</span><span class="num" id="2082059">0</span><span class="op" id="2082060">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082063">//&nbsp;Must&nbsp;now&nbsp;have&nbsp;a&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082089">if</span>&nbsp;<span class="op" id="2082092">!</span><span class="ident" id="2082093">s</span><span class="op" id="2082094">.</span><span class="ident" id="2082095">accept</span><span class="op" id="2082101">(</span><span class="string" id="2082102">&#34;+-&#34;</span><span class="op" id="2082106">)</span>&nbsp;<span class="op" id="2082108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082112">s</span><span class="op" id="2082113">.</span><span class="builtintype" id="2082114">error</span><span class="op" id="2082119">(</span><span class="ident" id="2082120">complexError</span><span class="op" id="2082132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082135">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082138">//&nbsp;Sign&nbsp;is&nbsp;now&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082164">imagSign</span>&nbsp;<span class="op" id="2082173">:=</span>&nbsp;<span class="builtintype" id="2082176">string</span><span class="op" id="2082182">(</span><span class="ident" id="2082183">s</span><span class="op" id="2082184">.</span><span class="ident" id="2082185">buf</span><span class="op" id="2082188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2082191">imag</span>&nbsp;<span class="op" id="2082196">=</span>&nbsp;<span class="ident" id="2082198">s</span><span class="op" id="2082199">.</span><span class="ident" id="2082200">floatToken</span><span class="op" id="2082210">(</span><span class="op" id="2082211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082214">if</span>&nbsp;<span class="op" id="2082217">!</span><span class="ident" id="2082218">s</span><span class="op" id="2082219">.</span><span class="ident" id="2082220">accept</span><span class="op" id="2082226">(</span><span class="string" id="2082227">&#34;i&#34;</span><span class="op" id="2082230">)</span>&nbsp;<span class="op" id="2082232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082236">s</span><span class="op" id="2082237">.</span><span class="builtintype" id="2082238">error</span><span class="op" id="2082243">(</span><span class="ident" id="2082244">complexError</span><span class="op" id="2082256">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082262">if</span>&nbsp;<span class="ident" id="2082265">parens</span>&nbsp;<span class="op" id="2082272">&amp;&amp;</span>&nbsp;<span class="op" id="2082275">!</span><span class="ident" id="2082276">s</span><span class="op" id="2082277">.</span><span class="ident" id="2082278">accept</span><span class="op" id="2082284">(</span><span class="string" id="2082285">&#34;)&#34;</span><span class="op" id="2082288">)</span>&nbsp;<span class="op" id="2082290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082294">s</span><span class="op" id="2082295">.</span><span class="builtintype" id="2082296">error</span><span class="op" id="2082301">(</span><span class="ident" id="2082302">complexError</span><span class="op" id="2082314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082320">return</span>&nbsp;<span class="builtinfunc" id="2082327">real</span><span class="op" id="2082331">,</span>&nbsp;<span class="ident" id="2082333">imagSign</span>&nbsp;<span class="op" id="2082342">+</span>&nbsp;<span class="builtinfunc" id="2082344">imag</span><br>
<span class="lineno">770</span><span class="op" id="2082349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2082352">//&nbsp;convertFloat&nbsp;converts&nbsp;the&nbsp;string&nbsp;to&nbsp;a&nbsp;float64value.</span><br>
<span class="lineno"></span><span class="keyword" id="2082407">func</span>&nbsp;<span class="op" id="2082412">(</span><span class="ident" id="2082413">s</span>&nbsp;<span class="op" id="2082415">*</span><span class="ident" id="2082416">ss</span><span class="op" id="2082418">)</span>&nbsp;<span class="ident" id="2082420">convertFloat</span><span class="op" id="2082432">(</span><span class="ident" id="2082433">str</span>&nbsp;<span class="builtintype" id="2082437">string</span><span class="op" id="2082443">,</span>&nbsp;<span class="ident" id="2082445">n</span>&nbsp;<span class="builtintype" id="2082447">int</span><span class="op" id="2082450">)</span>&nbsp;<span class="builtintype" id="2082452">float64</span>&nbsp;<span class="op" id="2082460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082463">if</span>&nbsp;<span class="ident" id="2082466">p</span>&nbsp;<span class="op" id="2082468">:=</span>&nbsp;<span class="ident" id="2082471">indexRune</span><span class="op" id="2082480">(</span><span class="ident" id="2082481">str</span><span class="op" id="2082484">,</span>&nbsp;<span class="string" id="2082486">&#39;p&#39;</span><span class="op" id="2082489">)</span><span class="op" id="2082490">;</span>&nbsp;<span class="ident" id="2082492">p</span>&nbsp;<span class="op" id="2082494">&gt;=</span>&nbsp;<span class="num" id="2082497">0</span>&nbsp;<span class="op" id="2082499">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082503">//&nbsp;Atof&nbsp;doesn&#39;t&nbsp;handle&nbsp;power-of-2&nbsp;exponents,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082550">//&nbsp;but&nbsp;they&#39;re&nbsp;easy&nbsp;to&nbsp;evaluate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082585">f</span><span class="op" id="2082586">,</span>&nbsp;<span class="ident" id="2082588">err</span>&nbsp;<span class="op" id="2082592">:=</span>&nbsp;<span class="ident" id="2082595">strconv</span><span class="op" id="2082602">.</span><span class="ident" id="2082603">ParseFloat</span><span class="op" id="2082613">(</span><span class="ident" id="2082614">str</span><span class="op" id="2082617">[</span><span class="op" id="2082618">:</span><span class="ident" id="2082619">p</span><span class="op" id="2082620">]</span><span class="op" id="2082621">,</span>&nbsp;<span class="ident" id="2082623">n</span><span class="op" id="2082624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082628">if</span>&nbsp;<span class="ident" id="2082631">err</span>&nbsp;<span class="op" id="2082635">!=</span>&nbsp;<span class="builtintype" id="2082638">nil</span>&nbsp;<span class="op" id="2082642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082647">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082681">if</span>&nbsp;<span class="ident" id="2082684">e</span><span class="op" id="2082685">,</span>&nbsp;<span class="ident" id="2082687">ok</span>&nbsp;<span class="op" id="2082690">:=</span>&nbsp;<span class="ident" id="2082693">err</span><span class="op" id="2082696">.</span><span class="op" id="2082697">(</span><span class="op" id="2082698">*</span><span class="ident" id="2082699">strconv</span><span class="op" id="2082706">.</span><span class="ident" id="2082707">NumError</span><span class="op" id="2082715">)</span><span class="op" id="2082716">;</span>&nbsp;<span class="ident" id="2082718">ok</span>&nbsp;<span class="op" id="2082721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082727">e</span><span class="op" id="2082728">.</span><span class="ident" id="2082729">Num</span>&nbsp;<span class="op" id="2082733">=</span>&nbsp;<span class="ident" id="2082735">str</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082747">s</span><span class="op" id="2082748">.</span><span class="builtintype" id="2082749">error</span><span class="op" id="2082754">(</span><span class="ident" id="2082755">err</span><span class="op" id="2082758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082762">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082766">m</span><span class="op" id="2082767">,</span>&nbsp;<span class="ident" id="2082769">err</span>&nbsp;<span class="op" id="2082773">:=</span>&nbsp;<span class="ident" id="2082776">strconv</span><span class="op" id="2082783">.</span><span class="ident" id="2082784">Atoi</span><span class="op" id="2082788">(</span><span class="ident" id="2082789">str</span><span class="op" id="2082792">[</span><span class="ident" id="2082793">p</span><span class="op" id="2082794">+</span><span class="num" id="2082795">1</span><span class="op" id="2082796">:</span><span class="op" id="2082797">]</span><span class="op" id="2082798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082802">if</span>&nbsp;<span class="ident" id="2082805">err</span>&nbsp;<span class="op" id="2082809">!=</span>&nbsp;<span class="builtintype" id="2082812">nil</span>&nbsp;<span class="op" id="2082816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082821">//&nbsp;Put&nbsp;full&nbsp;string&nbsp;into&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082855">if</span>&nbsp;<span class="ident" id="2082858">e</span><span class="op" id="2082859">,</span>&nbsp;<span class="ident" id="2082861">ok</span>&nbsp;<span class="op" id="2082864">:=</span>&nbsp;<span class="ident" id="2082867">err</span><span class="op" id="2082870">.</span><span class="op" id="2082871">(</span><span class="op" id="2082872">*</span><span class="ident" id="2082873">strconv</span><span class="op" id="2082880">.</span><span class="ident" id="2082881">NumError</span><span class="op" id="2082889">)</span><span class="op" id="2082890">;</span>&nbsp;<span class="ident" id="2082892">ok</span>&nbsp;<span class="op" id="2082895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082901">e</span><span class="op" id="2082902">.</span><span class="ident" id="2082903">Num</span>&nbsp;<span class="op" id="2082907">=</span>&nbsp;<span class="ident" id="2082909">str</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082921">s</span><span class="op" id="2082922">.</span><span class="builtintype" id="2082923">error</span><span class="op" id="2082928">(</span><span class="ident" id="2082929">err</span><span class="op" id="2082932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082940">return</span>&nbsp;<span class="ident" id="2082947">math</span><span class="op" id="2082951">.</span><span class="ident" id="2082952">Ldexp</span><span class="op" id="2082957">(</span><span class="ident" id="2082958">f</span><span class="op" id="2082959">,</span>&nbsp;<span class="ident" id="2082961">m</span><span class="op" id="2082962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082965">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082968">f</span><span class="op" id="2082969">,</span>&nbsp;<span class="ident" id="2082971">err</span>&nbsp;<span class="op" id="2082975">:=</span>&nbsp;<span class="ident" id="2082978">strconv</span><span class="op" id="2082985">.</span><span class="ident" id="2082986">ParseFloat</span><span class="op" id="2082996">(</span><span class="ident" id="2082997">str</span><span class="op" id="2083000">,</span>&nbsp;<span class="ident" id="2083002">n</span><span class="op" id="2083003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083006">if</span>&nbsp;<span class="ident" id="2083009">err</span>&nbsp;<span class="op" id="2083013">!=</span>&nbsp;<span class="builtintype" id="2083016">nil</span>&nbsp;<span class="op" id="2083020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083024">s</span><span class="op" id="2083025">.</span><span class="builtintype" id="2083026">error</span><span class="op" id="2083031">(</span><span class="ident" id="2083032">err</span><span class="op" id="2083035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083041">return</span>&nbsp;<span class="ident" id="2083048">f</span><br>
<span class="lineno">800</span><span class="op" id="2083050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2083053">//&nbsp;convertComplex&nbsp;converts&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;a&nbsp;complex128&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2083118">//&nbsp;The&nbsp;atof&nbsp;argument&nbsp;is&nbsp;a&nbsp;type-specific&nbsp;reader&nbsp;for&nbsp;the&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2083190">//&nbsp;If&nbsp;we&#39;re&nbsp;reading&nbsp;complex64,&nbsp;atof&nbsp;will&nbsp;parse&nbsp;float32s&nbsp;and&nbsp;convert&nbsp;them</span><br>
<span class="lineno">805</span><span class="comment" id="2083263">//&nbsp;to&nbsp;float64&#39;s&nbsp;to&nbsp;avoid&nbsp;reproducing&nbsp;this&nbsp;code&nbsp;for&nbsp;each&nbsp;complex&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2083333">func</span>&nbsp;<span class="op" id="2083338">(</span><span class="ident" id="2083339">s</span>&nbsp;<span class="op" id="2083341">*</span><span class="ident" id="2083342">ss</span><span class="op" id="2083344">)</span>&nbsp;<span class="ident" id="2083346">scanComplex</span><span class="op" id="2083357">(</span><span class="ident" id="2083358">verb</span>&nbsp;<span class="builtintype" id="2083363">rune</span><span class="op" id="2083367">,</span>&nbsp;<span class="ident" id="2083369">n</span>&nbsp;<span class="builtintype" id="2083371">int</span><span class="op" id="2083374">)</span>&nbsp;<span class="builtintype" id="2083376">complex128</span>&nbsp;<span class="op" id="2083387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083390">if</span>&nbsp;<span class="op" id="2083393">!</span><span class="ident" id="2083394">s</span><span class="op" id="2083395">.</span><span class="ident" id="2083396">okVerb</span><span class="op" id="2083402">(</span><span class="ident" id="2083403">verb</span><span class="op" id="2083407">,</span>&nbsp;<span class="ident" id="2083409">floatVerbs</span><span class="op" id="2083419">,</span>&nbsp;<span class="string" id="2083421">&#34;complex&#34;</span><span class="op" id="2083430">)</span>&nbsp;<span class="op" id="2083432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083436">return</span>&nbsp;<span class="num" id="2083443">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083446">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083449">s</span><span class="op" id="2083450">.</span><span class="ident" id="2083451">skipSpace</span><span class="op" id="2083460">(</span><span class="builtintype" id="2083461">false</span><span class="op" id="2083466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083469">s</span><span class="op" id="2083470">.</span><span class="ident" id="2083471">notEOF</span><span class="op" id="2083477">(</span><span class="op" id="2083478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083481">sreal</span><span class="op" id="2083486">,</span>&nbsp;<span class="ident" id="2083488">simag</span>&nbsp;<span class="op" id="2083494">:=</span>&nbsp;<span class="ident" id="2083497">s</span><span class="op" id="2083498">.</span><span class="ident" id="2083499">complexTokens</span><span class="op" id="2083512">(</span><span class="op" id="2083513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2083516">real</span>&nbsp;<span class="op" id="2083521">:=</span>&nbsp;<span class="ident" id="2083524">s</span><span class="op" id="2083525">.</span><span class="ident" id="2083526">convertFloat</span><span class="op" id="2083538">(</span><span class="ident" id="2083539">sreal</span><span class="op" id="2083544">,</span>&nbsp;<span class="ident" id="2083546">n</span><span class="op" id="2083547">/</span><span class="num" id="2083548">2</span><span class="op" id="2083549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2083552">imag</span>&nbsp;<span class="op" id="2083557">:=</span>&nbsp;<span class="ident" id="2083560">s</span><span class="op" id="2083561">.</span><span class="ident" id="2083562">convertFloat</span><span class="op" id="2083574">(</span><span class="ident" id="2083575">simag</span><span class="op" id="2083580">,</span>&nbsp;<span class="ident" id="2083582">n</span><span class="op" id="2083583">/</span><span class="num" id="2083584">2</span><span class="op" id="2083585">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083588">return</span>&nbsp;<span class="builtinfunc" id="2083595">complex</span><span class="op" id="2083602">(</span><span class="builtinfunc" id="2083603">real</span><span class="op" id="2083607">,</span>&nbsp;<span class="builtinfunc" id="2083609">imag</span><span class="op" id="2083613">)</span><br>
<span class="lineno"></span><span class="op" id="2083615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2083618">//&nbsp;convertString&nbsp;returns&nbsp;the&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="2083696">//&nbsp;The&nbsp;format&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;determined&nbsp;by&nbsp;the&nbsp;verb.</span><br>
<span class="lineno">820</span><span class="keyword" id="2083750">func</span>&nbsp;<span class="op" id="2083755">(</span><span class="ident" id="2083756">s</span>&nbsp;<span class="op" id="2083758">*</span><span class="ident" id="2083759">ss</span><span class="op" id="2083761">)</span>&nbsp;<span class="ident" id="2083763">convertString</span><span class="op" id="2083776">(</span><span class="ident" id="2083777">verb</span>&nbsp;<span class="builtintype" id="2083782">rune</span><span class="op" id="2083786">)</span>&nbsp;<span class="op" id="2083788">(</span><span class="ident" id="2083789">str</span>&nbsp;<span class="builtintype" id="2083793">string</span><span class="op" id="2083799">)</span>&nbsp;<span class="op" id="2083801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083804">if</span>&nbsp;<span class="op" id="2083807">!</span><span class="ident" id="2083808">s</span><span class="op" id="2083809">.</span><span class="ident" id="2083810">okVerb</span><span class="op" id="2083816">(</span><span class="ident" id="2083817">verb</span><span class="op" id="2083821">,</span>&nbsp;<span class="string" id="2083823">&#34;svqx&#34;</span><span class="op" id="2083829">,</span>&nbsp;<span class="string" id="2083831">&#34;string&#34;</span><span class="op" id="2083839">)</span>&nbsp;<span class="op" id="2083841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083845">return</span>&nbsp;<span class="string" id="2083852">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083859">s</span><span class="op" id="2083860">.</span><span class="ident" id="2083861">skipSpace</span><span class="op" id="2083870">(</span><span class="builtintype" id="2083871">false</span><span class="op" id="2083876">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083879">s</span><span class="op" id="2083880">.</span><span class="ident" id="2083881">notEOF</span><span class="op" id="2083887">(</span><span class="op" id="2083888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083891">switch</span>&nbsp;<span class="ident" id="2083898">verb</span>&nbsp;<span class="op" id="2083903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083906">case</span>&nbsp;<span class="string" id="2083911">&#39;q&#39;</span><span class="op" id="2083914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083918">str</span>&nbsp;<span class="op" id="2083922">=</span>&nbsp;<span class="ident" id="2083924">s</span><span class="op" id="2083925">.</span><span class="ident" id="2083926">quotedString</span><span class="op" id="2083938">(</span><span class="op" id="2083939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083942">case</span>&nbsp;<span class="string" id="2083947">&#39;x&#39;</span><span class="op" id="2083950">:</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083954">str</span>&nbsp;<span class="op" id="2083958">=</span>&nbsp;<span class="ident" id="2083960">s</span><span class="op" id="2083961">.</span><span class="ident" id="2083962">hexString</span><span class="op" id="2083971">(</span><span class="op" id="2083972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083975">default</span><span class="op" id="2083982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083986">str</span>&nbsp;<span class="op" id="2083990">=</span>&nbsp;<span class="builtintype" id="2083992">string</span><span class="op" id="2083998">(</span><span class="ident" id="2083999">s</span><span class="op" id="2084000">.</span><span class="ident" id="2084001">token</span><span class="op" id="2084006">(</span><span class="builtintype" id="2084007">true</span><span class="op" id="2084011">,</span>&nbsp;<span class="ident" id="2084013">notSpace</span><span class="op" id="2084021">)</span><span class="op" id="2084022">)</span>&nbsp;<span class="comment" id="2084024">//&nbsp;%s&nbsp;and&nbsp;%v&nbsp;just&nbsp;return&nbsp;the&nbsp;next&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084067">return</span><br>
<span class="lineno">835</span><span class="op" id="2084074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2084077">//&nbsp;quotedString&nbsp;returns&nbsp;the&nbsp;double-&nbsp;or&nbsp;back-quoted&nbsp;string&nbsp;represented&nbsp;by&nbsp;the&nbsp;next&nbsp;input&nbsp;characters.</span><br>
<span class="lineno"></span><span class="keyword" id="2084177">func</span>&nbsp;<span class="op" id="2084182">(</span><span class="ident" id="2084183">s</span>&nbsp;<span class="op" id="2084185">*</span><span class="ident" id="2084186">ss</span><span class="op" id="2084188">)</span>&nbsp;<span class="ident" id="2084190">quotedString</span><span class="op" id="2084202">(</span><span class="op" id="2084203">)</span>&nbsp;<span class="builtintype" id="2084205">string</span>&nbsp;<span class="op" id="2084212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084215">s</span><span class="op" id="2084216">.</span><span class="ident" id="2084217">notEOF</span><span class="op" id="2084223">(</span><span class="op" id="2084224">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084227">quote</span>&nbsp;<span class="op" id="2084233">:=</span>&nbsp;<span class="ident" id="2084236">s</span><span class="op" id="2084237">.</span><span class="ident" id="2084238">getRune</span><span class="op" id="2084245">(</span><span class="op" id="2084246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084249">switch</span>&nbsp;<span class="ident" id="2084256">quote</span>&nbsp;<span class="op" id="2084262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084265">case</span>&nbsp;<span class="string" id="2084270">&#39;`&#39;</span><span class="op" id="2084273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084277">//&nbsp;Back-quoted:&nbsp;Anything&nbsp;goes&nbsp;until&nbsp;EOF&nbsp;or&nbsp;back&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084334">for</span>&nbsp;<span class="op" id="2084338">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084343">r</span>&nbsp;<span class="op" id="2084345">:=</span>&nbsp;<span class="ident" id="2084348">s</span><span class="op" id="2084349">.</span><span class="ident" id="2084350">mustReadRune</span><span class="op" id="2084362">(</span><span class="op" id="2084363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084368">if</span>&nbsp;<span class="ident" id="2084371">r</span>&nbsp;<span class="op" id="2084373">==</span>&nbsp;<span class="ident" id="2084376">quote</span>&nbsp;<span class="op" id="2084382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084388">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084402">s</span><span class="op" id="2084403">.</span><span class="ident" id="2084404">buf</span><span class="op" id="2084407">.</span><span class="ident" id="2084408">WriteRune</span><span class="op" id="2084417">(</span><span class="ident" id="2084418">r</span><span class="op" id="2084419">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084427">return</span>&nbsp;<span class="builtintype" id="2084434">string</span><span class="op" id="2084440">(</span><span class="ident" id="2084441">s</span><span class="op" id="2084442">.</span><span class="ident" id="2084443">buf</span><span class="op" id="2084446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084449">case</span>&nbsp;<span class="string" id="2084454">&#39;&#34;&#39;</span><span class="op" id="2084457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084461">//&nbsp;Double-quoted:&nbsp;Include&nbsp;the&nbsp;quotes&nbsp;and&nbsp;let&nbsp;strconv.Unquote&nbsp;do&nbsp;the&nbsp;backslash&nbsp;escapes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084550">s</span><span class="op" id="2084551">.</span><span class="ident" id="2084552">buf</span><span class="op" id="2084555">.</span><span class="ident" id="2084556">WriteRune</span><span class="op" id="2084565">(</span><span class="ident" id="2084566">quote</span><span class="op" id="2084571">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084575">for</span>&nbsp;<span class="op" id="2084579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084584">r</span>&nbsp;<span class="op" id="2084586">:=</span>&nbsp;<span class="ident" id="2084589">s</span><span class="op" id="2084590">.</span><span class="ident" id="2084591">mustReadRune</span><span class="op" id="2084603">(</span><span class="op" id="2084604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084609">s</span><span class="op" id="2084610">.</span><span class="ident" id="2084611">buf</span><span class="op" id="2084614">.</span><span class="ident" id="2084615">WriteRune</span><span class="op" id="2084624">(</span><span class="ident" id="2084625">r</span><span class="op" id="2084626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084631">if</span>&nbsp;<span class="ident" id="2084634">r</span>&nbsp;<span class="op" id="2084636">==</span>&nbsp;<span class="string" id="2084639">&#39;\\&#39;</span>&nbsp;<span class="op" id="2084644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084650">//&nbsp;In&nbsp;a&nbsp;legal&nbsp;backslash&nbsp;escape,&nbsp;no&nbsp;matter&nbsp;how&nbsp;long,&nbsp;only&nbsp;the&nbsp;character</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084725">//&nbsp;immediately&nbsp;after&nbsp;the&nbsp;escape&nbsp;can&nbsp;itself&nbsp;be&nbsp;a&nbsp;backslash&nbsp;or&nbsp;quote.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084797">//&nbsp;Thus&nbsp;we&nbsp;only&nbsp;need&nbsp;to&nbsp;protect&nbsp;the&nbsp;first&nbsp;character&nbsp;after&nbsp;the&nbsp;backslash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084874">s</span><span class="op" id="2084875">.</span><span class="ident" id="2084876">buf</span><span class="op" id="2084879">.</span><span class="ident" id="2084880">WriteRune</span><span class="op" id="2084889">(</span><span class="ident" id="2084890">s</span><span class="op" id="2084891">.</span><span class="ident" id="2084892">mustReadRune</span><span class="op" id="2084904">(</span><span class="op" id="2084905">)</span><span class="op" id="2084906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084911">}</span>&nbsp;<span class="keyword" id="2084913">else</span>&nbsp;<span class="keyword" id="2084918">if</span>&nbsp;<span class="ident" id="2084921">r</span>&nbsp;<span class="op" id="2084923">==</span>&nbsp;<span class="string" id="2084926">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="2084930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2084936">break</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084953">result</span><span class="op" id="2084959">,</span>&nbsp;<span class="ident" id="2084961">err</span>&nbsp;<span class="op" id="2084965">:=</span>&nbsp;<span class="ident" id="2084968">strconv</span><span class="op" id="2084975">.</span><span class="ident" id="2084976">Unquote</span><span class="op" id="2084983">(</span><span class="builtintype" id="2084984">string</span><span class="op" id="2084990">(</span><span class="ident" id="2084991">s</span><span class="op" id="2084992">.</span><span class="ident" id="2084993">buf</span><span class="op" id="2084996">)</span><span class="op" id="2084997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085001">if</span>&nbsp;<span class="ident" id="2085004">err</span>&nbsp;<span class="op" id="2085008">!=</span>&nbsp;<span class="builtintype" id="2085011">nil</span>&nbsp;<span class="op" id="2085015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085020">s</span><span class="op" id="2085021">.</span><span class="builtintype" id="2085022">error</span><span class="op" id="2085027">(</span><span class="ident" id="2085028">err</span><span class="op" id="2085031">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085039">return</span>&nbsp;<span class="ident" id="2085046">result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085054">default</span><span class="op" id="2085061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085065">s</span><span class="op" id="2085066">.</span><span class="ident" id="2085067">errorString</span><span class="op" id="2085078">(</span><span class="string" id="2085079">&#34;expected&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="2085103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085106">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085109">return</span>&nbsp;<span class="string" id="2085116">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2085119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085122">//&nbsp;hexDigit&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;hexadecimal&nbsp;digit</span><br>
<span class="lineno"></span><span class="keyword" id="2085177">func</span>&nbsp;<span class="op" id="2085182">(</span><span class="ident" id="2085183">s</span>&nbsp;<span class="op" id="2085185">*</span><span class="ident" id="2085186">ss</span><span class="op" id="2085188">)</span>&nbsp;<span class="ident" id="2085190">hexDigit</span><span class="op" id="2085198">(</span><span class="ident" id="2085199">d</span>&nbsp;<span class="builtintype" id="2085201">rune</span><span class="op" id="2085205">)</span>&nbsp;<span class="builtintype" id="2085207">int</span>&nbsp;<span class="op" id="2085211">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085214">digit</span>&nbsp;<span class="op" id="2085220">:=</span>&nbsp;<span class="builtintype" id="2085223">int</span><span class="op" id="2085226">(</span><span class="ident" id="2085227">d</span><span class="op" id="2085228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085231">switch</span>&nbsp;<span class="ident" id="2085238">digit</span>&nbsp;<span class="op" id="2085244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085247">case</span>&nbsp;<span class="string" id="2085252">&#39;0&#39;</span><span class="op" id="2085255">,</span>&nbsp;<span class="string" id="2085257">&#39;1&#39;</span><span class="op" id="2085260">,</span>&nbsp;<span class="string" id="2085262">&#39;2&#39;</span><span class="op" id="2085265">,</span>&nbsp;<span class="string" id="2085267">&#39;3&#39;</span><span class="op" id="2085270">,</span>&nbsp;<span class="string" id="2085272">&#39;4&#39;</span><span class="op" id="2085275">,</span>&nbsp;<span class="string" id="2085277">&#39;5&#39;</span><span class="op" id="2085280">,</span>&nbsp;<span class="string" id="2085282">&#39;6&#39;</span><span class="op" id="2085285">,</span>&nbsp;<span class="string" id="2085287">&#39;7&#39;</span><span class="op" id="2085290">,</span>&nbsp;<span class="string" id="2085292">&#39;8&#39;</span><span class="op" id="2085295">,</span>&nbsp;<span class="string" id="2085297">&#39;9&#39;</span><span class="op" id="2085300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085304">return</span>&nbsp;<span class="ident" id="2085311">digit</span>&nbsp;<span class="op" id="2085317">-</span>&nbsp;<span class="string" id="2085319">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085324">case</span>&nbsp;<span class="string" id="2085329">&#39;a&#39;</span><span class="op" id="2085332">,</span>&nbsp;<span class="string" id="2085334">&#39;b&#39;</span><span class="op" id="2085337">,</span>&nbsp;<span class="string" id="2085339">&#39;c&#39;</span><span class="op" id="2085342">,</span>&nbsp;<span class="string" id="2085344">&#39;d&#39;</span><span class="op" id="2085347">,</span>&nbsp;<span class="string" id="2085349">&#39;e&#39;</span><span class="op" id="2085352">,</span>&nbsp;<span class="string" id="2085354">&#39;f&#39;</span><span class="op" id="2085357">:</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085361">return</span>&nbsp;<span class="num" id="2085368">10</span>&nbsp;<span class="op" id="2085371">+</span>&nbsp;<span class="ident" id="2085373">digit</span>&nbsp;<span class="op" id="2085379">-</span>&nbsp;<span class="string" id="2085381">&#39;a&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085386">case</span>&nbsp;<span class="string" id="2085391">&#39;A&#39;</span><span class="op" id="2085394">,</span>&nbsp;<span class="string" id="2085396">&#39;B&#39;</span><span class="op" id="2085399">,</span>&nbsp;<span class="string" id="2085401">&#39;C&#39;</span><span class="op" id="2085404">,</span>&nbsp;<span class="string" id="2085406">&#39;D&#39;</span><span class="op" id="2085409">,</span>&nbsp;<span class="string" id="2085411">&#39;E&#39;</span><span class="op" id="2085414">,</span>&nbsp;<span class="string" id="2085416">&#39;F&#39;</span><span class="op" id="2085419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085423">return</span>&nbsp;<span class="num" id="2085430">10</span>&nbsp;<span class="op" id="2085433">+</span>&nbsp;<span class="ident" id="2085435">digit</span>&nbsp;<span class="op" id="2085441">-</span>&nbsp;<span class="string" id="2085443">&#39;A&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085451">s</span><span class="op" id="2085452">.</span><span class="ident" id="2085453">errorString</span><span class="op" id="2085464">(</span><span class="string" id="2085465">&#34;illegal&nbsp;hex&nbsp;digit&#34;</span><span class="op" id="2085484">)</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085487">return</span>&nbsp;<span class="num" id="2085494">0</span><br>
<span class="lineno"></span><span class="op" id="2085496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085499">//&nbsp;hexByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;hex-encoded&nbsp;(two-character)&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="2085576">//&nbsp;There&nbsp;must&nbsp;be&nbsp;either&nbsp;two&nbsp;hexadecimal&nbsp;digits&nbsp;or&nbsp;a&nbsp;space&nbsp;character&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">895</span><span class="keyword" id="2085658">func</span>&nbsp;<span class="op" id="2085663">(</span><span class="ident" id="2085664">s</span>&nbsp;<span class="op" id="2085666">*</span><span class="ident" id="2085667">ss</span><span class="op" id="2085669">)</span>&nbsp;<span class="ident" id="2085671">hexByte</span><span class="op" id="2085678">(</span><span class="op" id="2085679">)</span>&nbsp;<span class="op" id="2085681">(</span><span class="ident" id="2085682">b</span>&nbsp;<span class="builtintype" id="2085684">byte</span><span class="op" id="2085688">,</span>&nbsp;<span class="ident" id="2085690">ok</span>&nbsp;<span class="builtintype" id="2085693">bool</span><span class="op" id="2085697">)</span>&nbsp;<span class="op" id="2085699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085702">rune1</span>&nbsp;<span class="op" id="2085708">:=</span>&nbsp;<span class="ident" id="2085711">s</span><span class="op" id="2085712">.</span><span class="ident" id="2085713">getRune</span><span class="op" id="2085720">(</span><span class="op" id="2085721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085724">if</span>&nbsp;<span class="ident" id="2085727">rune1</span>&nbsp;<span class="op" id="2085733">==</span>&nbsp;<span class="ident" id="2085736">eof</span>&nbsp;<span class="op" id="2085740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085744">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085752">}</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085755">if</span>&nbsp;<span class="ident" id="2085758">isSpace</span><span class="op" id="2085765">(</span><span class="ident" id="2085766">rune1</span><span class="op" id="2085771">)</span>&nbsp;<span class="op" id="2085773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085777">s</span><span class="op" id="2085778">.</span><span class="ident" id="2085779">UnreadRune</span><span class="op" id="2085789">(</span><span class="op" id="2085790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085794">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085805">rune2</span>&nbsp;<span class="op" id="2085811">:=</span>&nbsp;<span class="ident" id="2085814">s</span><span class="op" id="2085815">.</span><span class="ident" id="2085816">mustReadRune</span><span class="op" id="2085828">(</span><span class="op" id="2085829">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2085832">return</span>&nbsp;<span class="builtintype" id="2085839">byte</span><span class="op" id="2085843">(</span><span class="ident" id="2085844">s</span><span class="op" id="2085845">.</span><span class="ident" id="2085846">hexDigit</span><span class="op" id="2085854">(</span><span class="ident" id="2085855">rune1</span><span class="op" id="2085860">)</span><span class="op" id="2085861">&lt;&lt;</span><span class="num" id="2085863">4</span>&nbsp;<span class="op" id="2085865">|</span>&nbsp;<span class="ident" id="2085867">s</span><span class="op" id="2085868">.</span><span class="ident" id="2085869">hexDigit</span><span class="op" id="2085877">(</span><span class="ident" id="2085878">rune2</span><span class="op" id="2085883">)</span><span class="op" id="2085884">)</span><span class="op" id="2085885">,</span>&nbsp;<span class="builtintype" id="2085887">true</span><br>
<span class="lineno"></span><span class="op" id="2085892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085895">//&nbsp;hexString&nbsp;returns&nbsp;the&nbsp;space-delimited&nbsp;hexpair-encoded&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2085960">func</span>&nbsp;<span class="op" id="2085965">(</span><span class="ident" id="2085966">s</span>&nbsp;<span class="op" id="2085968">*</span><span class="ident" id="2085969">ss</span><span class="op" id="2085971">)</span>&nbsp;<span class="ident" id="2085973">hexString</span><span class="op" id="2085982">(</span><span class="op" id="2085983">)</span>&nbsp;<span class="builtintype" id="2085985">string</span>&nbsp;<span class="op" id="2085992">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2085995">s</span><span class="op" id="2085996">.</span><span class="ident" id="2085997">notEOF</span><span class="op" id="2086003">(</span><span class="op" id="2086004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086007">for</span>&nbsp;<span class="op" id="2086011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086015">b</span><span class="op" id="2086016">,</span>&nbsp;<span class="ident" id="2086018">ok</span>&nbsp;<span class="op" id="2086021">:=</span>&nbsp;<span class="ident" id="2086024">s</span><span class="op" id="2086025">.</span><span class="ident" id="2086026">hexByte</span><span class="op" id="2086033">(</span><span class="op" id="2086034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086038">if</span>&nbsp;<span class="op" id="2086041">!</span><span class="ident" id="2086042">ok</span>&nbsp;<span class="op" id="2086045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086050">break</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086062">s</span><span class="op" id="2086063">.</span><span class="ident" id="2086064">buf</span><span class="op" id="2086067">.</span><span class="ident" id="2086068">WriteByte</span><span class="op" id="2086077">(</span><span class="ident" id="2086078">b</span><span class="op" id="2086079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086085">if</span>&nbsp;<span class="builtinfunc" id="2086088">len</span><span class="op" id="2086091">(</span><span class="ident" id="2086092">s</span><span class="op" id="2086093">.</span><span class="ident" id="2086094">buf</span><span class="op" id="2086097">)</span>&nbsp;<span class="op" id="2086099">==</span>&nbsp;<span class="num" id="2086102">0</span>&nbsp;<span class="op" id="2086104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086108">s</span><span class="op" id="2086109">.</span><span class="ident" id="2086110">errorString</span><span class="op" id="2086121">(</span><span class="string" id="2086122">&#34;no&nbsp;hex&nbsp;data&nbsp;for&nbsp;%x&nbsp;string&#34;</span><span class="op" id="2086149">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086153">return</span>&nbsp;<span class="string" id="2086160">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086167">return</span>&nbsp;<span class="builtintype" id="2086174">string</span><span class="op" id="2086180">(</span><span class="ident" id="2086181">s</span><span class="op" id="2086182">.</span><span class="ident" id="2086183">buf</span><span class="op" id="2086186">)</span><br>
<span class="lineno"></span><span class="op" id="2086188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="keyword" id="2086191">const</span>&nbsp;<span class="ident" id="2086197">floatVerbs</span>&nbsp;<span class="op" id="2086208">=</span>&nbsp;<span class="string" id="2086210">&#34;beEfFgGv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2086222">const</span>&nbsp;<span class="ident" id="2086228">hugeWid</span>&nbsp;<span class="op" id="2086236">=</span>&nbsp;<span class="num" id="2086238">1</span>&nbsp;<span class="op" id="2086240">&lt;&lt;</span>&nbsp;<span class="num" id="2086243">30</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2086247">//&nbsp;scanOne&nbsp;scans&nbsp;a&nbsp;single&nbsp;value,&nbsp;deriving&nbsp;the&nbsp;scanner&nbsp;from&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;argument.</span><br>
<span class="lineno">930</span><span class="keyword" id="2086332">func</span>&nbsp;<span class="op" id="2086337">(</span><span class="ident" id="2086338">s</span>&nbsp;<span class="op" id="2086340">*</span><span class="ident" id="2086341">ss</span><span class="op" id="2086343">)</span>&nbsp;<span class="ident" id="2086345">scanOne</span><span class="op" id="2086352">(</span><span class="ident" id="2086353">verb</span>&nbsp;<span class="builtintype" id="2086358">rune</span><span class="op" id="2086362">,</span>&nbsp;<span class="ident" id="2086364">arg</span>&nbsp;<span class="keyword" id="2086368">interface</span><span class="op" id="2086377">{</span><span class="op" id="2086378">}</span><span class="op" id="2086379">)</span>&nbsp;<span class="op" id="2086381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086384">s</span><span class="op" id="2086385">.</span><span class="ident" id="2086386">buf</span>&nbsp;<span class="op" id="2086390">=</span>&nbsp;<span class="ident" id="2086392">s</span><span class="op" id="2086393">.</span><span class="ident" id="2086394">buf</span><span class="op" id="2086397">[</span><span class="op" id="2086398">:</span><span class="num" id="2086399">0</span><span class="op" id="2086400">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086403">var</span>&nbsp;<span class="ident" id="2086407">err</span>&nbsp;<span class="builtintype" id="2086411">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2086418">//&nbsp;If&nbsp;the&nbsp;parameter&nbsp;has&nbsp;its&nbsp;own&nbsp;Scan&nbsp;method,&nbsp;use&nbsp;that.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086474">if</span>&nbsp;<span class="ident" id="2086477">v</span><span class="op" id="2086478">,</span>&nbsp;<span class="ident" id="2086480">ok</span>&nbsp;<span class="op" id="2086483">:=</span>&nbsp;<span class="ident" id="2086486">arg</span><span class="op" id="2086489">.</span><span class="op" id="2086490">(</span><span class="ident" id="2086491">Scanner</span><span class="op" id="2086498">)</span><span class="op" id="2086499">;</span>&nbsp;<span class="ident" id="2086501">ok</span>&nbsp;<span class="op" id="2086504">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086508">err</span>&nbsp;<span class="op" id="2086512">=</span>&nbsp;<span class="ident" id="2086514">v</span><span class="op" id="2086515">.</span><span class="ident" id="2086516">Scan</span><span class="op" id="2086520">(</span><span class="ident" id="2086521">s</span><span class="op" id="2086522">,</span>&nbsp;<span class="ident" id="2086524">verb</span><span class="op" id="2086528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086532">if</span>&nbsp;<span class="ident" id="2086535">err</span>&nbsp;<span class="op" id="2086539">!=</span>&nbsp;<span class="builtintype" id="2086542">nil</span>&nbsp;<span class="op" id="2086546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086551">if</span>&nbsp;<span class="ident" id="2086554">err</span>&nbsp;<span class="op" id="2086558">==</span>&nbsp;<span class="ident" id="2086561">io</span><span class="op" id="2086563">.</span><span class="ident" id="2086564">EOF</span>&nbsp;<span class="op" id="2086568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086574">err</span>&nbsp;<span class="op" id="2086578">=</span>&nbsp;<span class="ident" id="2086580">io</span><span class="op" id="2086582">.</span><span class="ident" id="2086583">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086603">}</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086608">s</span><span class="op" id="2086609">.</span><span class="builtintype" id="2086610">error</span><span class="op" id="2086615">(</span><span class="ident" id="2086616">err</span><span class="op" id="2086619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086627">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086639">switch</span>&nbsp;<span class="ident" id="2086646">v</span>&nbsp;<span class="op" id="2086648">:=</span>&nbsp;<span class="ident" id="2086651">arg</span><span class="op" id="2086654">.</span><span class="op" id="2086655">(</span><span class="keyword" id="2086656">type</span><span class="op" id="2086660">)</span>&nbsp;<span class="op" id="2086662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086665">case</span>&nbsp;<span class="op" id="2086670">*</span><span class="builtintype" id="2086671">bool</span><span class="op" id="2086675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086679">*</span><span class="ident" id="2086680">v</span>&nbsp;<span class="op" id="2086682">=</span>&nbsp;<span class="ident" id="2086684">s</span><span class="op" id="2086685">.</span><span class="ident" id="2086686">scanBool</span><span class="op" id="2086694">(</span><span class="ident" id="2086695">verb</span><span class="op" id="2086699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086702">case</span>&nbsp;<span class="op" id="2086707">*</span><span class="builtintype" id="2086708">complex64</span><span class="op" id="2086717">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086721">*</span><span class="ident" id="2086722">v</span>&nbsp;<span class="op" id="2086724">=</span>&nbsp;<span class="builtintype" id="2086726">complex64</span><span class="op" id="2086735">(</span><span class="ident" id="2086736">s</span><span class="op" id="2086737">.</span><span class="ident" id="2086738">scanComplex</span><span class="op" id="2086749">(</span><span class="ident" id="2086750">verb</span><span class="op" id="2086754">,</span>&nbsp;<span class="num" id="2086756">64</span><span class="op" id="2086758">)</span><span class="op" id="2086759">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086762">case</span>&nbsp;<span class="op" id="2086767">*</span><span class="builtintype" id="2086768">complex128</span><span class="op" id="2086778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086782">*</span><span class="ident" id="2086783">v</span>&nbsp;<span class="op" id="2086785">=</span>&nbsp;<span class="ident" id="2086787">s</span><span class="op" id="2086788">.</span><span class="ident" id="2086789">scanComplex</span><span class="op" id="2086800">(</span><span class="ident" id="2086801">verb</span><span class="op" id="2086805">,</span>&nbsp;<span class="num" id="2086807">128</span><span class="op" id="2086810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086813">case</span>&nbsp;<span class="op" id="2086818">*</span><span class="builtintype" id="2086819">int</span><span class="op" id="2086822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086826">*</span><span class="ident" id="2086827">v</span>&nbsp;<span class="op" id="2086829">=</span>&nbsp;<span class="builtintype" id="2086831">int</span><span class="op" id="2086834">(</span><span class="ident" id="2086835">s</span><span class="op" id="2086836">.</span><span class="ident" id="2086837">scanInt</span><span class="op" id="2086844">(</span><span class="ident" id="2086845">verb</span><span class="op" id="2086849">,</span>&nbsp;<span class="ident" id="2086851">intBits</span><span class="op" id="2086858">)</span><span class="op" id="2086859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086862">case</span>&nbsp;<span class="op" id="2086867">*</span><span class="builtintype" id="2086868">int8</span><span class="op" id="2086872">:</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086876">*</span><span class="ident" id="2086877">v</span>&nbsp;<span class="op" id="2086879">=</span>&nbsp;<span class="builtintype" id="2086881">int8</span><span class="op" id="2086885">(</span><span class="ident" id="2086886">s</span><span class="op" id="2086887">.</span><span class="ident" id="2086888">scanInt</span><span class="op" id="2086895">(</span><span class="ident" id="2086896">verb</span><span class="op" id="2086900">,</span>&nbsp;<span class="num" id="2086902">8</span><span class="op" id="2086903">)</span><span class="op" id="2086904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086907">case</span>&nbsp;<span class="op" id="2086912">*</span><span class="builtintype" id="2086913">int16</span><span class="op" id="2086918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086922">*</span><span class="ident" id="2086923">v</span>&nbsp;<span class="op" id="2086925">=</span>&nbsp;<span class="builtintype" id="2086927">int16</span><span class="op" id="2086932">(</span><span class="ident" id="2086933">s</span><span class="op" id="2086934">.</span><span class="ident" id="2086935">scanInt</span><span class="op" id="2086942">(</span><span class="ident" id="2086943">verb</span><span class="op" id="2086947">,</span>&nbsp;<span class="num" id="2086949">16</span><span class="op" id="2086951">)</span><span class="op" id="2086952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086955">case</span>&nbsp;<span class="op" id="2086960">*</span><span class="builtintype" id="2086961">int32</span><span class="op" id="2086966">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086970">*</span><span class="ident" id="2086971">v</span>&nbsp;<span class="op" id="2086973">=</span>&nbsp;<span class="builtintype" id="2086975">int32</span><span class="op" id="2086980">(</span><span class="ident" id="2086981">s</span><span class="op" id="2086982">.</span><span class="ident" id="2086983">scanInt</span><span class="op" id="2086990">(</span><span class="ident" id="2086991">verb</span><span class="op" id="2086995">,</span>&nbsp;<span class="num" id="2086997">32</span><span class="op" id="2086999">)</span><span class="op" id="2087000">)</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087003">case</span>&nbsp;<span class="op" id="2087008">*</span><span class="ident" id="2087009">int64</span><span class="op" id="2087014">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087018">*</span><span class="ident" id="2087019">v</span>&nbsp;<span class="op" id="2087021">=</span>&nbsp;<span class="ident" id="2087023">s</span><span class="op" id="2087024">.</span><span class="ident" id="2087025">scanInt</span><span class="op" id="2087032">(</span><span class="ident" id="2087033">verb</span><span class="op" id="2087037">,</span>&nbsp;<span class="num" id="2087039">64</span><span class="op" id="2087041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087044">case</span>&nbsp;<span class="op" id="2087049">*</span><span class="builtintype" id="2087050">uint</span><span class="op" id="2087054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087058">*</span><span class="ident" id="2087059">v</span>&nbsp;<span class="op" id="2087061">=</span>&nbsp;<span class="builtintype" id="2087063">uint</span><span class="op" id="2087067">(</span><span class="ident" id="2087068">s</span><span class="op" id="2087069">.</span><span class="ident" id="2087070">scanUint</span><span class="op" id="2087078">(</span><span class="ident" id="2087079">verb</span><span class="op" id="2087083">,</span>&nbsp;<span class="ident" id="2087085">intBits</span><span class="op" id="2087092">)</span><span class="op" id="2087093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087096">case</span>&nbsp;<span class="op" id="2087101">*</span><span class="builtintype" id="2087102">uint8</span><span class="op" id="2087107">:</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087111">*</span><span class="ident" id="2087112">v</span>&nbsp;<span class="op" id="2087114">=</span>&nbsp;<span class="builtintype" id="2087116">uint8</span><span class="op" id="2087121">(</span><span class="ident" id="2087122">s</span><span class="op" id="2087123">.</span><span class="ident" id="2087124">scanUint</span><span class="op" id="2087132">(</span><span class="ident" id="2087133">verb</span><span class="op" id="2087137">,</span>&nbsp;<span class="num" id="2087139">8</span><span class="op" id="2087140">)</span><span class="op" id="2087141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087144">case</span>&nbsp;<span class="op" id="2087149">*</span><span class="builtintype" id="2087150">uint16</span><span class="op" id="2087156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087160">*</span><span class="ident" id="2087161">v</span>&nbsp;<span class="op" id="2087163">=</span>&nbsp;<span class="builtintype" id="2087165">uint16</span><span class="op" id="2087171">(</span><span class="ident" id="2087172">s</span><span class="op" id="2087173">.</span><span class="ident" id="2087174">scanUint</span><span class="op" id="2087182">(</span><span class="ident" id="2087183">verb</span><span class="op" id="2087187">,</span>&nbsp;<span class="num" id="2087189">16</span><span class="op" id="2087191">)</span><span class="op" id="2087192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087195">case</span>&nbsp;<span class="op" id="2087200">*</span><span class="builtintype" id="2087201">uint32</span><span class="op" id="2087207">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087211">*</span><span class="ident" id="2087212">v</span>&nbsp;<span class="op" id="2087214">=</span>&nbsp;<span class="builtintype" id="2087216">uint32</span><span class="op" id="2087222">(</span><span class="ident" id="2087223">s</span><span class="op" id="2087224">.</span><span class="ident" id="2087225">scanUint</span><span class="op" id="2087233">(</span><span class="ident" id="2087234">verb</span><span class="op" id="2087238">,</span>&nbsp;<span class="num" id="2087240">32</span><span class="op" id="2087242">)</span><span class="op" id="2087243">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087246">case</span>&nbsp;<span class="op" id="2087251">*</span><span class="ident" id="2087252">uint64</span><span class="op" id="2087258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087262">*</span><span class="ident" id="2087263">v</span>&nbsp;<span class="op" id="2087265">=</span>&nbsp;<span class="ident" id="2087267">s</span><span class="op" id="2087268">.</span><span class="ident" id="2087269">scanUint</span><span class="op" id="2087277">(</span><span class="ident" id="2087278">verb</span><span class="op" id="2087282">,</span>&nbsp;<span class="num" id="2087284">64</span><span class="op" id="2087286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087289">case</span>&nbsp;<span class="op" id="2087294">*</span><span class="builtintype" id="2087295">uintptr</span><span class="op" id="2087302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087306">*</span><span class="ident" id="2087307">v</span>&nbsp;<span class="op" id="2087309">=</span>&nbsp;<span class="builtintype" id="2087311">uintptr</span><span class="op" id="2087318">(</span><span class="ident" id="2087319">s</span><span class="op" id="2087320">.</span><span class="ident" id="2087321">scanUint</span><span class="op" id="2087329">(</span><span class="ident" id="2087330">verb</span><span class="op" id="2087334">,</span>&nbsp;<span class="ident" id="2087336">uintptrBits</span><span class="op" id="2087347">)</span><span class="op" id="2087348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087351">//&nbsp;Floats&nbsp;are&nbsp;tricky&nbsp;because&nbsp;you&nbsp;want&nbsp;to&nbsp;scan&nbsp;in&nbsp;the&nbsp;precision&nbsp;of&nbsp;the&nbsp;result,&nbsp;not</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087434">//&nbsp;scan&nbsp;in&nbsp;high&nbsp;precision&nbsp;and&nbsp;convert,&nbsp;in&nbsp;order&nbsp;to&nbsp;preserve&nbsp;the&nbsp;correct&nbsp;error&nbsp;condition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087524">case</span>&nbsp;<span class="op" id="2087529">*</span><span class="builtintype" id="2087530">float32</span><span class="op" id="2087537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087541">if</span>&nbsp;<span class="ident" id="2087544">s</span><span class="op" id="2087545">.</span><span class="ident" id="2087546">okVerb</span><span class="op" id="2087552">(</span><span class="ident" id="2087553">verb</span><span class="op" id="2087557">,</span>&nbsp;<span class="ident" id="2087559">floatVerbs</span><span class="op" id="2087569">,</span>&nbsp;<span class="string" id="2087571">&#34;float32&#34;</span><span class="op" id="2087580">)</span>&nbsp;<span class="op" id="2087582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087587">s</span><span class="op" id="2087588">.</span><span class="ident" id="2087589">skipSpace</span><span class="op" id="2087598">(</span><span class="builtintype" id="2087599">false</span><span class="op" id="2087604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087609">s</span><span class="op" id="2087610">.</span><span class="ident" id="2087611">notEOF</span><span class="op" id="2087617">(</span><span class="op" id="2087618">)</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087623">*</span><span class="ident" id="2087624">v</span>&nbsp;<span class="op" id="2087626">=</span>&nbsp;<span class="builtintype" id="2087628">float32</span><span class="op" id="2087635">(</span><span class="ident" id="2087636">s</span><span class="op" id="2087637">.</span><span class="ident" id="2087638">convertFloat</span><span class="op" id="2087650">(</span><span class="ident" id="2087651">s</span><span class="op" id="2087652">.</span><span class="ident" id="2087653">floatToken</span><span class="op" id="2087663">(</span><span class="op" id="2087664">)</span><span class="op" id="2087665">,</span>&nbsp;<span class="num" id="2087667">32</span><span class="op" id="2087669">)</span><span class="op" id="2087670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087677">case</span>&nbsp;<span class="op" id="2087682">*</span><span class="builtintype" id="2087683">float64</span><span class="op" id="2087690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087694">if</span>&nbsp;<span class="ident" id="2087697">s</span><span class="op" id="2087698">.</span><span class="ident" id="2087699">okVerb</span><span class="op" id="2087705">(</span><span class="ident" id="2087706">verb</span><span class="op" id="2087710">,</span>&nbsp;<span class="ident" id="2087712">floatVerbs</span><span class="op" id="2087722">,</span>&nbsp;<span class="string" id="2087724">&#34;float64&#34;</span><span class="op" id="2087733">)</span>&nbsp;<span class="op" id="2087735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087740">s</span><span class="op" id="2087741">.</span><span class="ident" id="2087742">skipSpace</span><span class="op" id="2087751">(</span><span class="builtintype" id="2087752">false</span><span class="op" id="2087757">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087762">s</span><span class="op" id="2087763">.</span><span class="ident" id="2087764">notEOF</span><span class="op" id="2087770">(</span><span class="op" id="2087771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087776">*</span><span class="ident" id="2087777">v</span>&nbsp;<span class="op" id="2087779">=</span>&nbsp;<span class="ident" id="2087781">s</span><span class="op" id="2087782">.</span><span class="ident" id="2087783">convertFloat</span><span class="op" id="2087795">(</span><span class="ident" id="2087796">s</span><span class="op" id="2087797">.</span><span class="ident" id="2087798">floatToken</span><span class="op" id="2087808">(</span><span class="op" id="2087809">)</span><span class="op" id="2087810">,</span>&nbsp;<span class="num" id="2087812">64</span><span class="op" id="2087814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087821">case</span>&nbsp;<span class="op" id="2087826">*</span><span class="builtintype" id="2087827">string</span><span class="op" id="2087833">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087837">*</span><span class="ident" id="2087838">v</span>&nbsp;<span class="op" id="2087840">=</span>&nbsp;<span class="ident" id="2087842">s</span><span class="op" id="2087843">.</span><span class="ident" id="2087844">convertString</span><span class="op" id="2087857">(</span><span class="ident" id="2087858">verb</span><span class="op" id="2087862">)</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087865">case</span>&nbsp;<span class="op" id="2087870">*</span><span class="op" id="2087871">[</span><span class="op" id="2087872">]</span><span class="builtintype" id="2087873">byte</span><span class="op" id="2087877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087881">//&nbsp;We&nbsp;scan&nbsp;to&nbsp;string&nbsp;and&nbsp;convert&nbsp;so&nbsp;we&nbsp;get&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087946">//&nbsp;If&nbsp;we&nbsp;scanned&nbsp;to&nbsp;bytes,&nbsp;the&nbsp;slice&nbsp;would&nbsp;point&nbsp;at&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088012">*</span><span class="ident" id="2088013">v</span>&nbsp;<span class="op" id="2088015">=</span>&nbsp;<span class="op" id="2088017">[</span><span class="op" id="2088018">]</span><span class="builtintype" id="2088019">byte</span><span class="op" id="2088023">(</span><span class="ident" id="2088024">s</span><span class="op" id="2088025">.</span><span class="ident" id="2088026">convertString</span><span class="op" id="2088039">(</span><span class="ident" id="2088040">verb</span><span class="op" id="2088044">)</span><span class="op" id="2088045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088048">default</span><span class="op" id="2088055">:</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088059">val</span>&nbsp;<span class="op" id="2088063">:=</span>&nbsp;<span class="ident" id="2088066">reflect</span><span class="op" id="2088073">.</span><span class="ident" id="2088074">ValueOf</span><span class="op" id="2088081">(</span><span class="ident" id="2088082">v</span><span class="op" id="2088083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088087">ptr</span>&nbsp;<span class="op" id="2088091">:=</span>&nbsp;<span class="ident" id="2088094">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088100">if</span>&nbsp;<span class="ident" id="2088103">ptr</span><span class="op" id="2088106">.</span><span class="ident" id="2088107">Kind</span><span class="op" id="2088111">(</span><span class="op" id="2088112">)</span>&nbsp;<span class="op" id="2088114">!=</span>&nbsp;<span class="ident" id="2088117">reflect</span><span class="op" id="2088124">.</span><span class="ident" id="2088125">Ptr</span>&nbsp;<span class="op" id="2088129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088134">s</span><span class="op" id="2088135">.</span><span class="ident" id="2088136">errorString</span><span class="op" id="2088147">(</span><span class="string" id="2088148">&#34;type&nbsp;not&nbsp;a&nbsp;pointer:&nbsp;&#34;</span>&nbsp;<span class="op" id="2088171">+</span>&nbsp;<span class="ident" id="2088173">val</span><span class="op" id="2088176">.</span><span class="ident" id="2088177">Type</span><span class="op" id="2088181">(</span><span class="op" id="2088182">)</span><span class="op" id="2088183">.</span><span class="ident" id="2088184">String</span><span class="op" id="2088190">(</span><span class="op" id="2088191">)</span><span class="op" id="2088192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088197">return</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088210">switch</span>&nbsp;<span class="ident" id="2088217">v</span>&nbsp;<span class="op" id="2088219">:=</span>&nbsp;<span class="ident" id="2088222">ptr</span><span class="op" id="2088225">.</span><span class="ident" id="2088226">Elem</span><span class="op" id="2088230">(</span><span class="op" id="2088231">)</span><span class="op" id="2088232">;</span>&nbsp;<span class="ident" id="2088234">v</span><span class="op" id="2088235">.</span><span class="ident" id="2088236">Kind</span><span class="op" id="2088240">(</span><span class="op" id="2088241">)</span>&nbsp;<span class="op" id="2088243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088247">case</span>&nbsp;<span class="ident" id="2088252">reflect</span><span class="op" id="2088259">.</span><span class="ident" id="2088260">Bool</span><span class="op" id="2088264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088269">v</span><span class="op" id="2088270">.</span><span class="ident" id="2088271">SetBool</span><span class="op" id="2088278">(</span><span class="ident" id="2088279">s</span><span class="op" id="2088280">.</span><span class="ident" id="2088281">scanBool</span><span class="op" id="2088289">(</span><span class="ident" id="2088290">verb</span><span class="op" id="2088294">)</span><span class="op" id="2088295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088299">case</span>&nbsp;<span class="ident" id="2088304">reflect</span><span class="op" id="2088311">.</span><span class="ident" id="2088312">Int</span><span class="op" id="2088315">,</span>&nbsp;<span class="ident" id="2088317">reflect</span><span class="op" id="2088324">.</span><span class="ident" id="2088325">Int8</span><span class="op" id="2088329">,</span>&nbsp;<span class="ident" id="2088331">reflect</span><span class="op" id="2088338">.</span><span class="ident" id="2088339">Int16</span><span class="op" id="2088344">,</span>&nbsp;<span class="ident" id="2088346">reflect</span><span class="op" id="2088353">.</span><span class="ident" id="2088354">Int32</span><span class="op" id="2088359">,</span>&nbsp;<span class="ident" id="2088361">reflect</span><span class="op" id="2088368">.</span><span class="ident" id="2088369">Int64</span><span class="op" id="2088374">:</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088379">v</span><span class="op" id="2088380">.</span><span class="ident" id="2088381">SetInt</span><span class="op" id="2088387">(</span><span class="ident" id="2088388">s</span><span class="op" id="2088389">.</span><span class="ident" id="2088390">scanInt</span><span class="op" id="2088397">(</span><span class="ident" id="2088398">verb</span><span class="op" id="2088402">,</span>&nbsp;<span class="ident" id="2088404">v</span><span class="op" id="2088405">.</span><span class="ident" id="2088406">Type</span><span class="op" id="2088410">(</span><span class="op" id="2088411">)</span><span class="op" id="2088412">.</span><span class="ident" id="2088413">Bits</span><span class="op" id="2088417">(</span><span class="op" id="2088418">)</span><span class="op" id="2088419">)</span><span class="op" id="2088420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088424">case</span>&nbsp;<span class="ident" id="2088429">reflect</span><span class="op" id="2088436">.</span><span class="ident" id="2088437">Uint</span><span class="op" id="2088441">,</span>&nbsp;<span class="ident" id="2088443">reflect</span><span class="op" id="2088450">.</span><span class="ident" id="2088451">Uint8</span><span class="op" id="2088456">,</span>&nbsp;<span class="ident" id="2088458">reflect</span><span class="op" id="2088465">.</span><span class="ident" id="2088466">Uint16</span><span class="op" id="2088472">,</span>&nbsp;<span class="ident" id="2088474">reflect</span><span class="op" id="2088481">.</span><span class="ident" id="2088482">Uint32</span><span class="op" id="2088488">,</span>&nbsp;<span class="ident" id="2088490">reflect</span><span class="op" id="2088497">.</span><span class="ident" id="2088498">Uint64</span><span class="op" id="2088504">,</span>&nbsp;<span class="ident" id="2088506">reflect</span><span class="op" id="2088513">.</span><span class="ident" id="2088514">Uintptr</span><span class="op" id="2088521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088526">v</span><span class="op" id="2088527">.</span><span class="ident" id="2088528">SetUint</span><span class="op" id="2088535">(</span><span class="ident" id="2088536">s</span><span class="op" id="2088537">.</span><span class="ident" id="2088538">scanUint</span><span class="op" id="2088546">(</span><span class="ident" id="2088547">verb</span><span class="op" id="2088551">,</span>&nbsp;<span class="ident" id="2088553">v</span><span class="op" id="2088554">.</span><span class="ident" id="2088555">Type</span><span class="op" id="2088559">(</span><span class="op" id="2088560">)</span><span class="op" id="2088561">.</span><span class="ident" id="2088562">Bits</span><span class="op" id="2088566">(</span><span class="op" id="2088567">)</span><span class="op" id="2088568">)</span><span class="op" id="2088569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088573">case</span>&nbsp;<span class="ident" id="2088578">reflect</span><span class="op" id="2088585">.</span><span class="ident" id="2088586">String</span><span class="op" id="2088592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088597">v</span><span class="op" id="2088598">.</span><span class="ident" id="2088599">SetString</span><span class="op" id="2088608">(</span><span class="ident" id="2088609">s</span><span class="op" id="2088610">.</span><span class="ident" id="2088611">convertString</span><span class="op" id="2088624">(</span><span class="ident" id="2088625">verb</span><span class="op" id="2088629">)</span><span class="op" id="2088630">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088634">case</span>&nbsp;<span class="ident" id="2088639">reflect</span><span class="op" id="2088646">.</span><span class="ident" id="2088647">Slice</span><span class="op" id="2088652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2088657">//&nbsp;For&nbsp;now,&nbsp;can&nbsp;only&nbsp;handle&nbsp;(renamed)&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088706">typ</span>&nbsp;<span class="op" id="2088710">:=</span>&nbsp;<span class="ident" id="2088713">v</span><span class="op" id="2088714">.</span><span class="ident" id="2088715">Type</span><span class="op" id="2088719">(</span><span class="op" id="2088720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088725">if</span>&nbsp;<span class="ident" id="2088728">typ</span><span class="op" id="2088731">.</span><span class="ident" id="2088732">Elem</span><span class="op" id="2088736">(</span><span class="op" id="2088737">)</span><span class="op" id="2088738">.</span><span class="ident" id="2088739">Kind</span><span class="op" id="2088743">(</span><span class="op" id="2088744">)</span>&nbsp;<span class="op" id="2088746">!=</span>&nbsp;<span class="ident" id="2088749">reflect</span><span class="op" id="2088756">.</span><span class="ident" id="2088757">Uint8</span>&nbsp;<span class="op" id="2088763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088769">s</span><span class="op" id="2088770">.</span><span class="ident" id="2088771">errorString</span><span class="op" id="2088782">(</span><span class="string" id="2088783">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="2088803">+</span>&nbsp;<span class="ident" id="2088805">val</span><span class="op" id="2088808">.</span><span class="ident" id="2088809">Type</span><span class="op" id="2088813">(</span><span class="op" id="2088814">)</span><span class="op" id="2088815">.</span><span class="ident" id="2088816">String</span><span class="op" id="2088822">(</span><span class="op" id="2088823">)</span><span class="op" id="2088824">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088834">str</span>&nbsp;<span class="op" id="2088838">:=</span>&nbsp;<span class="ident" id="2088841">s</span><span class="op" id="2088842">.</span><span class="ident" id="2088843">convertString</span><span class="op" id="2088856">(</span><span class="ident" id="2088857">verb</span><span class="op" id="2088861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088866">v</span><span class="op" id="2088867">.</span><span class="ident" id="2088868">Set</span><span class="op" id="2088871">(</span><span class="ident" id="2088872">reflect</span><span class="op" id="2088879">.</span><span class="ident" id="2088880">MakeSlice</span><span class="op" id="2088889">(</span><span class="ident" id="2088890">typ</span><span class="op" id="2088893">,</span>&nbsp;<span class="builtinfunc" id="2088895">len</span><span class="op" id="2088898">(</span><span class="ident" id="2088899">str</span><span class="op" id="2088902">)</span><span class="op" id="2088903">,</span>&nbsp;<span class="builtinfunc" id="2088905">len</span><span class="op" id="2088908">(</span><span class="ident" id="2088909">str</span><span class="op" id="2088912">)</span><span class="op" id="2088913">)</span><span class="op" id="2088914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088919">for</span>&nbsp;<span class="ident" id="2088923">i</span>&nbsp;<span class="op" id="2088925">:=</span>&nbsp;<span class="num" id="2088928">0</span><span class="op" id="2088929">;</span>&nbsp;<span class="ident" id="2088931">i</span>&nbsp;<span class="op" id="2088933">&lt;</span>&nbsp;<span class="builtinfunc" id="2088935">len</span><span class="op" id="2088938">(</span><span class="ident" id="2088939">str</span><span class="op" id="2088942">)</span><span class="op" id="2088943">;</span>&nbsp;<span class="ident" id="2088945">i</span><span class="op" id="2088946">++</span>&nbsp;<span class="op" id="2088949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088955">v</span><span class="op" id="2088956">.</span><span class="ident" id="2088957">Index</span><span class="op" id="2088962">(</span><span class="ident" id="2088963">i</span><span class="op" id="2088964">)</span><span class="op" id="2088965">.</span><span class="ident" id="2088966">SetUint</span><span class="op" id="2088973">(</span><span class="ident" id="2088974">uint64</span><span class="op" id="2088980">(</span><span class="ident" id="2088981">str</span><span class="op" id="2088984">[</span><span class="ident" id="2088985">i</span><span class="op" id="2088986">]</span><span class="op" id="2088987">)</span><span class="op" id="2088988">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088997">case</span>&nbsp;<span class="ident" id="2089002">reflect</span><span class="op" id="2089009">.</span><span class="ident" id="2089010">Float32</span><span class="op" id="2089017">,</span>&nbsp;<span class="ident" id="2089019">reflect</span><span class="op" id="2089026">.</span><span class="ident" id="2089027">Float64</span><span class="op" id="2089034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089039">s</span><span class="op" id="2089040">.</span><span class="ident" id="2089041">skipSpace</span><span class="op" id="2089050">(</span><span class="builtintype" id="2089051">false</span><span class="op" id="2089056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089061">s</span><span class="op" id="2089062">.</span><span class="ident" id="2089063">notEOF</span><span class="op" id="2089069">(</span><span class="op" id="2089070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089075">v</span><span class="op" id="2089076">.</span><span class="ident" id="2089077">SetFloat</span><span class="op" id="2089085">(</span><span class="ident" id="2089086">s</span><span class="op" id="2089087">.</span><span class="ident" id="2089088">convertFloat</span><span class="op" id="2089100">(</span><span class="ident" id="2089101">s</span><span class="op" id="2089102">.</span><span class="ident" id="2089103">floatToken</span><span class="op" id="2089113">(</span><span class="op" id="2089114">)</span><span class="op" id="2089115">,</span>&nbsp;<span class="ident" id="2089117">v</span><span class="op" id="2089118">.</span><span class="ident" id="2089119">Type</span><span class="op" id="2089123">(</span><span class="op" id="2089124">)</span><span class="op" id="2089125">.</span><span class="ident" id="2089126">Bits</span><span class="op" id="2089130">(</span><span class="op" id="2089131">)</span><span class="op" id="2089132">)</span><span class="op" id="2089133">)</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089137">case</span>&nbsp;<span class="ident" id="2089142">reflect</span><span class="op" id="2089149">.</span><span class="ident" id="2089150">Complex64</span><span class="op" id="2089159">,</span>&nbsp;<span class="ident" id="2089161">reflect</span><span class="op" id="2089168">.</span><span class="ident" id="2089169">Complex128</span><span class="op" id="2089179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089184">v</span><span class="op" id="2089185">.</span><span class="ident" id="2089186">SetComplex</span><span class="op" id="2089196">(</span><span class="ident" id="2089197">s</span><span class="op" id="2089198">.</span><span class="ident" id="2089199">scanComplex</span><span class="op" id="2089210">(</span><span class="ident" id="2089211">verb</span><span class="op" id="2089215">,</span>&nbsp;<span class="ident" id="2089217">v</span><span class="op" id="2089218">.</span><span class="ident" id="2089219">Type</span><span class="op" id="2089223">(</span><span class="op" id="2089224">)</span><span class="op" id="2089225">.</span><span class="ident" id="2089226">Bits</span><span class="op" id="2089230">(</span><span class="op" id="2089231">)</span><span class="op" id="2089232">)</span><span class="op" id="2089233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089237">default</span><span class="op" id="2089244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089249">s</span><span class="op" id="2089250">.</span><span class="ident" id="2089251">errorString</span><span class="op" id="2089262">(</span><span class="string" id="2089263">&#34;can&#39;t&nbsp;scan&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="2089283">+</span>&nbsp;<span class="ident" id="2089285">val</span><span class="op" id="2089288">.</span><span class="ident" id="2089289">Type</span><span class="op" id="2089293">(</span><span class="op" id="2089294">)</span><span class="op" id="2089295">.</span><span class="ident" id="2089296">String</span><span class="op" id="2089302">(</span><span class="op" id="2089303">)</span><span class="op" id="2089304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089308">}</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089311">}</span><br>
<span class="lineno"></span><span class="op" id="2089313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2089316">//&nbsp;errorHandler&nbsp;turns&nbsp;local&nbsp;panics&nbsp;into&nbsp;error&nbsp;returns.</span><br>
<span class="lineno"></span><span class="keyword" id="2089371">func</span>&nbsp;<span class="ident" id="2089376">errorHandler</span><span class="op" id="2089388">(</span><span class="ident" id="2089389">errp</span>&nbsp;<span class="op" id="2089394">*</span><span class="builtintype" id="2089395">error</span><span class="op" id="2089400">)</span>&nbsp;<span class="op" id="2089402">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089405">if</span>&nbsp;<span class="ident" id="2089408">e</span>&nbsp;<span class="op" id="2089410">:=</span>&nbsp;<span class="builtinfunc" id="2089413">recover</span><span class="op" id="2089420">(</span><span class="op" id="2089421">)</span><span class="op" id="2089422">;</span>&nbsp;<span class="ident" id="2089424">e</span>&nbsp;<span class="op" id="2089426">!=</span>&nbsp;<span class="builtintype" id="2089429">nil</span>&nbsp;<span class="op" id="2089433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089437">if</span>&nbsp;<span class="ident" id="2089440">se</span><span class="op" id="2089442">,</span>&nbsp;<span class="ident" id="2089444">ok</span>&nbsp;<span class="op" id="2089447">:=</span>&nbsp;<span class="ident" id="2089450">e</span><span class="op" id="2089451">.</span><span class="op" id="2089452">(</span><span class="ident" id="2089453">scanError</span><span class="op" id="2089462">)</span><span class="op" id="2089463">;</span>&nbsp;<span class="ident" id="2089465">ok</span>&nbsp;<span class="op" id="2089468">{</span>&nbsp;<span class="comment" id="2089470">//&nbsp;catch&nbsp;local&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089494">*</span><span class="ident" id="2089495">errp</span>&nbsp;<span class="op" id="2089500">=</span>&nbsp;<span class="ident" id="2089502">se</span><span class="op" id="2089504">.</span><span class="ident" id="2089505">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089511">}</span>&nbsp;<span class="keyword" id="2089513">else</span>&nbsp;<span class="keyword" id="2089518">if</span>&nbsp;<span class="ident" id="2089521">eof</span><span class="op" id="2089524">,</span>&nbsp;<span class="ident" id="2089526">ok</span>&nbsp;<span class="op" id="2089529">:=</span>&nbsp;<span class="ident" id="2089532">e</span><span class="op" id="2089533">.</span><span class="op" id="2089534">(</span><span class="builtintype" id="2089535">error</span><span class="op" id="2089540">)</span><span class="op" id="2089541">;</span>&nbsp;<span class="ident" id="2089543">ok</span>&nbsp;<span class="op" id="2089546">&amp;&amp;</span>&nbsp;<span class="ident" id="2089549">eof</span>&nbsp;<span class="op" id="2089553">==</span>&nbsp;<span class="ident" id="2089556">io</span><span class="op" id="2089558">.</span><span class="ident" id="2089559">EOF</span>&nbsp;<span class="op" id="2089563">{</span>&nbsp;<span class="comment" id="2089565">//&nbsp;out&nbsp;of&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089584">*</span><span class="ident" id="2089585">errp</span>&nbsp;<span class="op" id="2089590">=</span>&nbsp;<span class="ident" id="2089592">eof</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089598">}</span>&nbsp;<span class="keyword" id="2089600">else</span>&nbsp;<span class="op" id="2089605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2089610">panic</span><span class="op" id="2089615">(</span><span class="ident" id="2089616">e</span><span class="op" id="2089617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089624">}</span><br>
<span class="lineno"></span><span class="op" id="2089626">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="2089629">//&nbsp;doScan&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;for&nbsp;scanning&nbsp;without&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2089696">func</span>&nbsp;<span class="op" id="2089701">(</span><span class="ident" id="2089702">s</span>&nbsp;<span class="op" id="2089704">*</span><span class="ident" id="2089705">ss</span><span class="op" id="2089707">)</span>&nbsp;<span class="ident" id="2089709">doScan</span><span class="op" id="2089715">(</span><span class="ident" id="2089716">a</span>&nbsp;<span class="op" id="2089718">[</span><span class="op" id="2089719">]</span><span class="keyword" id="2089720">interface</span><span class="op" id="2089729">{</span><span class="op" id="2089730">}</span><span class="op" id="2089731">)</span>&nbsp;<span class="op" id="2089733">(</span><span class="ident" id="2089734">numProcessed</span>&nbsp;<span class="builtintype" id="2089747">int</span><span class="op" id="2089750">,</span>&nbsp;<span class="ident" id="2089752">err</span>&nbsp;<span class="builtintype" id="2089756">error</span><span class="op" id="2089761">)</span>&nbsp;<span class="op" id="2089763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089766">defer</span>&nbsp;<span class="ident" id="2089772">errorHandler</span><span class="op" id="2089784">(</span><span class="op" id="2089785">&amp;</span><span class="ident" id="2089786">err</span><span class="op" id="2089789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089792">for</span>&nbsp;<span class="ident" id="2089796">_</span><span class="op" id="2089797">,</span>&nbsp;<span class="ident" id="2089799">arg</span>&nbsp;<span class="op" id="2089803">:=</span>&nbsp;<span class="keyword" id="2089806">range</span>&nbsp;<span class="ident" id="2089812">a</span>&nbsp;<span class="op" id="2089814">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089818">s</span><span class="op" id="2089819">.</span><span class="ident" id="2089820">scanOne</span><span class="op" id="2089827">(</span><span class="string" id="2089828">&#39;v&#39;</span><span class="op" id="2089831">,</span>&nbsp;<span class="ident" id="2089833">arg</span><span class="op" id="2089836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089840">numProcessed</span><span class="op" id="2089852">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2089859">//&nbsp;Check&nbsp;for&nbsp;newline&nbsp;if&nbsp;required.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089894">if</span>&nbsp;<span class="op" id="2089897">!</span><span class="ident" id="2089898">s</span><span class="op" id="2089899">.</span><span class="ident" id="2089900">nlIsSpace</span>&nbsp;<span class="op" id="2089910">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089914">for</span>&nbsp;<span class="op" id="2089918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2089923">r</span>&nbsp;<span class="op" id="2089925">:=</span>&nbsp;<span class="ident" id="2089928">s</span><span class="op" id="2089929">.</span><span class="ident" id="2089930">getRune</span><span class="op" id="2089937">(</span><span class="op" id="2089938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089943">if</span>&nbsp;<span class="ident" id="2089946">r</span>&nbsp;<span class="op" id="2089948">==</span>&nbsp;<span class="string" id="2089951">&#39;\n&#39;</span>&nbsp;<span class="op" id="2089956">||</span>&nbsp;<span class="ident" id="2089959">r</span>&nbsp;<span class="op" id="2089961">==</span>&nbsp;<span class="ident" id="2089964">eof</span>&nbsp;<span class="op" id="2089968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089974">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2089983">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2089988">if</span>&nbsp;<span class="op" id="2089991">!</span><span class="ident" id="2089992">isSpace</span><span class="op" id="2089999">(</span><span class="ident" id="2090000">r</span><span class="op" id="2090001">)</span>&nbsp;<span class="op" id="2090003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090009">s</span><span class="op" id="2090010">.</span><span class="ident" id="2090011">errorString</span><span class="op" id="2090022">(</span><span class="string" id="2090023">&#34;expected&nbsp;newline&#34;</span><span class="op" id="2090041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090047">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2090056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2090060">}</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2090063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090066">return</span><br>
<span class="lineno"></span><span class="op" id="2090073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2090076">//&nbsp;advance&nbsp;determines&nbsp;whether&nbsp;the&nbsp;next&nbsp;characters&nbsp;in&nbsp;the&nbsp;input&nbsp;match</span><br>
<span class="lineno">1070</span><span class="comment" id="2090145">//&nbsp;those&nbsp;of&nbsp;the&nbsp;format.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;(sic)&nbsp;consumed</span><br>
<span class="lineno"></span><span class="comment" id="2090216">//&nbsp;in&nbsp;the&nbsp;format.&nbsp;Newlines&nbsp;included,&nbsp;all&nbsp;runs&nbsp;of&nbsp;space&nbsp;characters&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2090285">//&nbsp;either&nbsp;input&nbsp;or&nbsp;format&nbsp;behave&nbsp;as&nbsp;a&nbsp;single&nbsp;space.&nbsp;This&nbsp;routine&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="2090355">//&nbsp;handles&nbsp;the&nbsp;%%&nbsp;case.&nbsp;&nbsp;If&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;zero,&nbsp;either&nbsp;format</span><br>
<span class="lineno"></span><span class="comment" id="2090423">//&nbsp;starts&nbsp;with&nbsp;a&nbsp;%&nbsp;(with&nbsp;no&nbsp;following&nbsp;%)&nbsp;or&nbsp;the&nbsp;input&nbsp;is&nbsp;empty.</span><br>
<span class="lineno">1075</span><span class="comment" id="2090487">//&nbsp;If&nbsp;it&nbsp;is&nbsp;negative,&nbsp;the&nbsp;input&nbsp;did&nbsp;not&nbsp;match&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2090545">func</span>&nbsp;<span class="op" id="2090550">(</span><span class="ident" id="2090551">s</span>&nbsp;<span class="op" id="2090553">*</span><span class="ident" id="2090554">ss</span><span class="op" id="2090556">)</span>&nbsp;<span class="ident" id="2090558">advance</span><span class="op" id="2090565">(</span><span class="ident" id="2090566">format</span>&nbsp;<span class="builtintype" id="2090573">string</span><span class="op" id="2090579">)</span>&nbsp;<span class="op" id="2090581">(</span><span class="ident" id="2090582">i</span>&nbsp;<span class="builtintype" id="2090584">int</span><span class="op" id="2090587">)</span>&nbsp;<span class="op" id="2090589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090592">for</span>&nbsp;<span class="ident" id="2090596">i</span>&nbsp;<span class="op" id="2090598">&lt;</span>&nbsp;<span class="builtinfunc" id="2090600">len</span><span class="op" id="2090603">(</span><span class="ident" id="2090604">format</span><span class="op" id="2090610">)</span>&nbsp;<span class="op" id="2090612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090616">fmtc</span><span class="op" id="2090620">,</span>&nbsp;<span class="ident" id="2090622">w</span>&nbsp;<span class="op" id="2090624">:=</span>&nbsp;<span class="ident" id="2090627">utf8</span><span class="op" id="2090631">.</span><span class="ident" id="2090632">DecodeRuneInString</span><span class="op" id="2090650">(</span><span class="ident" id="2090651">format</span><span class="op" id="2090657">[</span><span class="ident" id="2090658">i</span><span class="op" id="2090659">:</span><span class="op" id="2090660">]</span><span class="op" id="2090661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090665">if</span>&nbsp;<span class="ident" id="2090668">fmtc</span>&nbsp;<span class="op" id="2090673">==</span>&nbsp;<span class="string" id="2090676">&#39;%&#39;</span>&nbsp;<span class="op" id="2090680">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2090685">//&nbsp;%%&nbsp;acts&nbsp;like&nbsp;a&nbsp;real&nbsp;percent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090719">nextc</span><span class="op" id="2090724">,</span>&nbsp;<span class="ident" id="2090726">_</span>&nbsp;<span class="op" id="2090728">:=</span>&nbsp;<span class="ident" id="2090731">utf8</span><span class="op" id="2090735">.</span><span class="ident" id="2090736">DecodeRuneInString</span><span class="op" id="2090754">(</span><span class="ident" id="2090755">format</span><span class="op" id="2090761">[</span><span class="ident" id="2090762">i</span><span class="op" id="2090763">+</span><span class="ident" id="2090764">w</span><span class="op" id="2090765">:</span><span class="op" id="2090766">]</span><span class="op" id="2090767">)</span>&nbsp;<span class="comment" id="2090769">//&nbsp;will&nbsp;not&nbsp;match&nbsp;%&nbsp;if&nbsp;string&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090811">if</span>&nbsp;<span class="ident" id="2090814">nextc</span>&nbsp;<span class="op" id="2090820">!=</span>&nbsp;<span class="string" id="2090823">&#39;%&#39;</span>&nbsp;<span class="op" id="2090827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090833">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2090843">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090848">i</span>&nbsp;<span class="op" id="2090850">+=</span>&nbsp;<span class="ident" id="2090853">w</span>&nbsp;<span class="comment" id="2090855">//&nbsp;skip&nbsp;the&nbsp;first&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2090877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090881">sawSpace</span>&nbsp;<span class="op" id="2090890">:=</span>&nbsp;<span class="builtintype" id="2090893">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2090901">for</span>&nbsp;<span class="ident" id="2090905">isSpace</span><span class="op" id="2090912">(</span><span class="ident" id="2090913">fmtc</span><span class="op" id="2090917">)</span>&nbsp;<span class="op" id="2090919">&amp;&amp;</span>&nbsp;<span class="ident" id="2090922">i</span>&nbsp;<span class="op" id="2090924">&lt;</span>&nbsp;<span class="builtinfunc" id="2090926">len</span><span class="op" id="2090929">(</span><span class="ident" id="2090930">format</span><span class="op" id="2090936">)</span>&nbsp;<span class="op" id="2090938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090943">sawSpace</span>&nbsp;<span class="op" id="2090952">=</span>&nbsp;<span class="builtintype" id="2090954">true</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090962">i</span>&nbsp;<span class="op" id="2090964">+=</span>&nbsp;<span class="ident" id="2090967">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2090972">fmtc</span><span class="op" id="2090976">,</span>&nbsp;<span class="ident" id="2090978">w</span>&nbsp;<span class="op" id="2090980">=</span>&nbsp;<span class="ident" id="2090982">utf8</span><span class="op" id="2090986">.</span><span class="ident" id="2090987">DecodeRuneInString</span><span class="op" id="2091005">(</span><span class="ident" id="2091006">format</span><span class="op" id="2091012">[</span><span class="ident" id="2091013">i</span><span class="op" id="2091014">:</span><span class="op" id="2091015">]</span><span class="op" id="2091016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091024">if</span>&nbsp;<span class="ident" id="2091027">sawSpace</span>&nbsp;<span class="op" id="2091036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091041">//&nbsp;There&nbsp;was&nbsp;space&nbsp;in&nbsp;the&nbsp;format,&nbsp;so&nbsp;there&nbsp;should&nbsp;be&nbsp;space&nbsp;(EOF)</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091109">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091129">inputc</span>&nbsp;<span class="op" id="2091136">:=</span>&nbsp;<span class="ident" id="2091139">s</span><span class="op" id="2091140">.</span><span class="ident" id="2091141">getRune</span><span class="op" id="2091148">(</span><span class="op" id="2091149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091154">if</span>&nbsp;<span class="ident" id="2091157">inputc</span>&nbsp;<span class="op" id="2091164">==</span>&nbsp;<span class="ident" id="2091167">eof</span>&nbsp;<span class="op" id="2091171">||</span>&nbsp;<span class="ident" id="2091174">inputc</span>&nbsp;<span class="op" id="2091181">==</span>&nbsp;<span class="string" id="2091184">&#39;\n&#39;</span>&nbsp;<span class="op" id="2091189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091195">//&nbsp;If&nbsp;we&#39;ve&nbsp;reached&nbsp;a&nbsp;newline,&nbsp;stop&nbsp;now;&nbsp;don&#39;t&nbsp;read&nbsp;ahead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091258">return</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091273">if</span>&nbsp;<span class="op" id="2091276">!</span><span class="ident" id="2091277">isSpace</span><span class="op" id="2091284">(</span><span class="ident" id="2091285">inputc</span><span class="op" id="2091291">)</span>&nbsp;<span class="op" id="2091293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091299">//&nbsp;Space&nbsp;in&nbsp;format&nbsp;but&nbsp;not&nbsp;in&nbsp;input:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091346">s</span><span class="op" id="2091347">.</span><span class="ident" id="2091348">errorString</span><span class="op" id="2091359">(</span><span class="string" id="2091360">&#34;expected&nbsp;space&nbsp;in&nbsp;input&nbsp;to&nbsp;match&nbsp;format&#34;</span><span class="op" id="2091401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091406">}</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091411">s</span><span class="op" id="2091412">.</span><span class="ident" id="2091413">skipSpace</span><span class="op" id="2091422">(</span><span class="builtintype" id="2091423">true</span><span class="op" id="2091427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091432">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091447">inputc</span>&nbsp;<span class="op" id="2091454">:=</span>&nbsp;<span class="ident" id="2091457">s</span><span class="op" id="2091458">.</span><span class="ident" id="2091459">mustReadRune</span><span class="op" id="2091471">(</span><span class="op" id="2091472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091476">if</span>&nbsp;<span class="ident" id="2091479">fmtc</span>&nbsp;<span class="op" id="2091484">!=</span>&nbsp;<span class="ident" id="2091487">inputc</span>&nbsp;<span class="op" id="2091494">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091499">s</span><span class="op" id="2091500">.</span><span class="ident" id="2091501">UnreadRune</span><span class="op" id="2091511">(</span><span class="op" id="2091512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091517">return</span>&nbsp;<span class="op" id="2091524">-</span><span class="num" id="2091525">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091533">i</span>&nbsp;<span class="op" id="2091535">+=</span>&nbsp;<span class="ident" id="2091538">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091541">}</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091544">return</span><br>
<span class="lineno"></span><span class="op" id="2091551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2091554">//&nbsp;doScanf&nbsp;does&nbsp;the&nbsp;real&nbsp;work&nbsp;when&nbsp;scanning&nbsp;with&nbsp;a&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2091620">//&nbsp;&nbsp;At&nbsp;the&nbsp;moment,&nbsp;it&nbsp;handles&nbsp;only&nbsp;pointers&nbsp;to&nbsp;basic&nbsp;types.</span><br>
<span class="lineno">1120</span><span class="keyword" id="2091680">func</span>&nbsp;<span class="op" id="2091685">(</span><span class="ident" id="2091686">s</span>&nbsp;<span class="op" id="2091688">*</span><span class="ident" id="2091689">ss</span><span class="op" id="2091691">)</span>&nbsp;<span class="ident" id="2091693">doScanf</span><span class="op" id="2091700">(</span><span class="ident" id="2091701">format</span>&nbsp;<span class="builtintype" id="2091708">string</span><span class="op" id="2091714">,</span>&nbsp;<span class="ident" id="2091716">a</span>&nbsp;<span class="op" id="2091718">[</span><span class="op" id="2091719">]</span><span class="keyword" id="2091720">interface</span><span class="op" id="2091729">{</span><span class="op" id="2091730">}</span><span class="op" id="2091731">)</span>&nbsp;<span class="op" id="2091733">(</span><span class="ident" id="2091734">numProcessed</span>&nbsp;<span class="builtintype" id="2091747">int</span><span class="op" id="2091750">,</span>&nbsp;<span class="ident" id="2091752">err</span>&nbsp;<span class="builtintype" id="2091756">error</span><span class="op" id="2091761">)</span>&nbsp;<span class="op" id="2091763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091766">defer</span>&nbsp;<span class="ident" id="2091772">errorHandler</span><span class="op" id="2091784">(</span><span class="op" id="2091785">&amp;</span><span class="ident" id="2091786">err</span><span class="op" id="2091789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091792">end</span>&nbsp;<span class="op" id="2091796">:=</span>&nbsp;<span class="builtinfunc" id="2091799">len</span><span class="op" id="2091802">(</span><span class="ident" id="2091803">format</span><span class="op" id="2091809">)</span>&nbsp;<span class="op" id="2091811">-</span>&nbsp;<span class="num" id="2091813">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091816">//&nbsp;We&nbsp;process&nbsp;one&nbsp;item&nbsp;per&nbsp;non-trivial&nbsp;format</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091863">for</span>&nbsp;<span class="ident" id="2091867">i</span>&nbsp;<span class="op" id="2091869">:=</span>&nbsp;<span class="num" id="2091872">0</span><span class="op" id="2091873">;</span>&nbsp;<span class="ident" id="2091875">i</span>&nbsp;<span class="op" id="2091877">&lt;=</span>&nbsp;<span class="ident" id="2091880">end</span><span class="op" id="2091883">;</span>&nbsp;<span class="op" id="2091885">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091889">w</span>&nbsp;<span class="op" id="2091891">:=</span>&nbsp;<span class="ident" id="2091894">s</span><span class="op" id="2091895">.</span><span class="ident" id="2091896">advance</span><span class="op" id="2091903">(</span><span class="ident" id="2091904">format</span><span class="op" id="2091910">[</span><span class="ident" id="2091911">i</span><span class="op" id="2091912">:</span><span class="op" id="2091913">]</span><span class="op" id="2091914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091918">if</span>&nbsp;<span class="ident" id="2091921">w</span>&nbsp;<span class="op" id="2091923">&gt;</span>&nbsp;<span class="num" id="2091925">0</span>&nbsp;<span class="op" id="2091927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2091932">i</span>&nbsp;<span class="op" id="2091934">+=</span>&nbsp;<span class="ident" id="2091937">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2091942">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2091953">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2091957">//&nbsp;Either&nbsp;we&nbsp;failed&nbsp;to&nbsp;advance,&nbsp;we&nbsp;have&nbsp;a&nbsp;percent&nbsp;character,&nbsp;or&nbsp;we&nbsp;ran&nbsp;out&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092044">if</span>&nbsp;<span class="ident" id="2092047">format</span><span class="op" id="2092053">[</span><span class="ident" id="2092054">i</span><span class="op" id="2092055">]</span>&nbsp;<span class="op" id="2092057">!=</span>&nbsp;<span class="string" id="2092060">&#39;%&#39;</span>&nbsp;<span class="op" id="2092064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2092069">//&nbsp;Can&#39;t&nbsp;advance&nbsp;format.&nbsp;&nbsp;Why&nbsp;not?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092107">if</span>&nbsp;<span class="ident" id="2092110">w</span>&nbsp;<span class="op" id="2092112">&lt;</span>&nbsp;<span class="num" id="2092114">0</span>&nbsp;<span class="op" id="2092116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092122">s</span><span class="op" id="2092123">.</span><span class="ident" id="2092124">errorString</span><span class="op" id="2092135">(</span><span class="string" id="2092136">&#34;input&nbsp;does&nbsp;not&nbsp;match&nbsp;format&#34;</span><span class="op" id="2092165">)</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2092175">//&nbsp;Otherwise&nbsp;at&nbsp;EOF;&nbsp;&#34;too&nbsp;many&nbsp;operands&#34;&nbsp;error&nbsp;handled&nbsp;below</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092239">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092251">i</span><span class="op" id="2092252">++</span>&nbsp;<span class="comment" id="2092255">//&nbsp;%&nbsp;is&nbsp;one&nbsp;byte</span><br>
<span class="lineno">1140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2092275">//&nbsp;do&nbsp;we&nbsp;have&nbsp;20&nbsp;(width)?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092303">var</span>&nbsp;<span class="ident" id="2092307">widPresent</span>&nbsp;<span class="builtintype" id="2092318">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092325">s</span><span class="op" id="2092326">.</span><span class="ident" id="2092327">maxWid</span><span class="op" id="2092333">,</span>&nbsp;<span class="ident" id="2092335">widPresent</span><span class="op" id="2092345">,</span>&nbsp;<span class="ident" id="2092347">i</span>&nbsp;<span class="op" id="2092349">=</span>&nbsp;<span class="ident" id="2092351">parsenum</span><span class="op" id="2092359">(</span><span class="ident" id="2092360">format</span><span class="op" id="2092366">,</span>&nbsp;<span class="ident" id="2092368">i</span><span class="op" id="2092369">,</span>&nbsp;<span class="ident" id="2092371">end</span><span class="op" id="2092374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092378">if</span>&nbsp;<span class="op" id="2092381">!</span><span class="ident" id="2092382">widPresent</span>&nbsp;<span class="op" id="2092393">{</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092398">s</span><span class="op" id="2092399">.</span><span class="ident" id="2092400">maxWid</span>&nbsp;<span class="op" id="2092407">=</span>&nbsp;<span class="ident" id="2092409">hugeWid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092423">s</span><span class="op" id="2092424">.</span><span class="ident" id="2092425">argLimit</span>&nbsp;<span class="op" id="2092434">=</span>&nbsp;<span class="ident" id="2092436">s</span><span class="op" id="2092437">.</span><span class="ident" id="2092438">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092446">if</span>&nbsp;<span class="ident" id="2092449">f</span>&nbsp;<span class="op" id="2092451">:=</span>&nbsp;<span class="ident" id="2092454">s</span><span class="op" id="2092455">.</span><span class="ident" id="2092456">count</span>&nbsp;<span class="op" id="2092462">+</span>&nbsp;<span class="ident" id="2092464">s</span><span class="op" id="2092465">.</span><span class="ident" id="2092466">maxWid</span><span class="op" id="2092472">;</span>&nbsp;<span class="ident" id="2092474">f</span>&nbsp;<span class="op" id="2092476">&lt;</span>&nbsp;<span class="ident" id="2092478">s</span><span class="op" id="2092479">.</span><span class="ident" id="2092480">argLimit</span>&nbsp;<span class="op" id="2092489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092494">s</span><span class="op" id="2092495">.</span><span class="ident" id="2092496">argLimit</span>&nbsp;<span class="op" id="2092505">=</span>&nbsp;<span class="ident" id="2092507">f</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092516">c</span><span class="op" id="2092517">,</span>&nbsp;<span class="ident" id="2092519">w</span>&nbsp;<span class="op" id="2092521">:=</span>&nbsp;<span class="ident" id="2092524">utf8</span><span class="op" id="2092528">.</span><span class="ident" id="2092529">DecodeRuneInString</span><span class="op" id="2092547">(</span><span class="ident" id="2092548">format</span><span class="op" id="2092554">[</span><span class="ident" id="2092555">i</span><span class="op" id="2092556">:</span><span class="op" id="2092557">]</span><span class="op" id="2092558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092562">i</span>&nbsp;<span class="op" id="2092564">+=</span>&nbsp;<span class="ident" id="2092567">w</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092572">if</span>&nbsp;<span class="ident" id="2092575">numProcessed</span>&nbsp;<span class="op" id="2092588">&gt;=</span>&nbsp;<span class="builtinfunc" id="2092591">len</span><span class="op" id="2092594">(</span><span class="ident" id="2092595">a</span><span class="op" id="2092596">)</span>&nbsp;<span class="op" id="2092598">{</span>&nbsp;<span class="comment" id="2092600">//&nbsp;out&nbsp;of&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092622">s</span><span class="op" id="2092623">.</span><span class="ident" id="2092624">errorString</span><span class="op" id="2092635">(</span><span class="string" id="2092636">&#34;too&nbsp;few&nbsp;operands&nbsp;for&nbsp;format&nbsp;%&#34;</span>&nbsp;<span class="op" id="2092668">+</span>&nbsp;<span class="ident" id="2092670">format</span><span class="op" id="2092676">[</span><span class="ident" id="2092677">i</span><span class="op" id="2092678">-</span><span class="ident" id="2092679">w</span><span class="op" id="2092680">:</span><span class="op" id="2092681">]</span><span class="op" id="2092682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092687">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092699">arg</span>&nbsp;<span class="op" id="2092703">:=</span>&nbsp;<span class="ident" id="2092706">a</span><span class="op" id="2092707">[</span><span class="ident" id="2092708">numProcessed</span><span class="op" id="2092720">]</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092725">s</span><span class="op" id="2092726">.</span><span class="ident" id="2092727">scanOne</span><span class="op" id="2092734">(</span><span class="ident" id="2092735">c</span><span class="op" id="2092736">,</span>&nbsp;<span class="ident" id="2092738">arg</span><span class="op" id="2092741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092745">numProcessed</span><span class="op" id="2092757">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092762">s</span><span class="op" id="2092763">.</span><span class="ident" id="2092764">argLimit</span>&nbsp;<span class="op" id="2092773">=</span>&nbsp;<span class="ident" id="2092775">s</span><span class="op" id="2092776">.</span><span class="ident" id="2092777">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092784">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092787">if</span>&nbsp;<span class="ident" id="2092790">numProcessed</span>&nbsp;<span class="op" id="2092803">&lt;</span>&nbsp;<span class="builtinfunc" id="2092805">len</span><span class="op" id="2092808">(</span><span class="ident" id="2092809">a</span><span class="op" id="2092810">)</span>&nbsp;<span class="op" id="2092812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2092816">s</span><span class="op" id="2092817">.</span><span class="ident" id="2092818">errorString</span><span class="op" id="2092829">(</span><span class="string" id="2092830">&#34;too&nbsp;many&nbsp;operands&#34;</span><span class="op" id="2092849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2092852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2092855">return</span><br>
<span class="lineno"></span><span class="op" id="2092862">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
