<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5803212">package</span>&nbsp;<span class="ident" id="5803220">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5803226">func</span>&nbsp;<span class="ident" id="5803231">buildPkgScope</span><span class="op" id="5803244">(</span><span class="ident" id="5803245">b</span>&nbsp;<span class="op" id="5803247">*</span><span class="ident" id="5803248">builder</span><span class="op" id="5803255">,</span>&nbsp;<span class="ident" id="5803257">pkg</span>&nbsp;<span class="op" id="5803261">*</span><span class="ident" id="5803262">pkg</span><span class="op" id="5803265">)</span>&nbsp;<span class="op" id="5803267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803270">decl</span>&nbsp;<span class="op" id="5803275">:=</span>&nbsp;<span class="keyword" id="5803278">func</span><span class="op" id="5803282">(</span><span class="ident" id="5803283">sym</span>&nbsp;<span class="op" id="5803287">*</span><span class="ident" id="5803288">symbol</span><span class="op" id="5803294">)</span>&nbsp;<span class="builtintype" id="5803296">bool</span>&nbsp;<span class="op" id="5803301">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803305">exists</span>&nbsp;<span class="op" id="5803312">:=</span>&nbsp;<span class="ident" id="5803315">b</span><span class="op" id="5803316">.</span><span class="ident" id="5803317">scope</span><span class="op" id="5803322">.</span><span class="ident" id="5803323">Declare</span><span class="op" id="5803330">(</span><span class="ident" id="5803331">sym</span><span class="op" id="5803334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803338">if</span>&nbsp;<span class="ident" id="5803341">exists</span>&nbsp;<span class="op" id="5803348">!=</span>&nbsp;<span class="ident" id="5803351">nil</span>&nbsp;<span class="op" id="5803355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803360">b</span><span class="op" id="5803361">.</span><span class="ident" id="5803362">err</span><span class="op" id="5803365">(</span><span class="ident" id="5803366">sym</span><span class="op" id="5803369">.</span><span class="ident" id="5803370">Pos</span><span class="op" id="5803373">,</span>&nbsp;<span class="string" id="5803375">&#34;%q&nbsp;already&nbsp;declared&#34;</span><span class="op" id="5803396">,</span>&nbsp;<span class="ident" id="5803398">sym</span><span class="op" id="5803401">.</span><span class="ident" id="5803402">Name</span><span class="op" id="5803406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803411">b</span><span class="op" id="5803412">.</span><span class="ident" id="5803413">err</span><span class="op" id="5803416">(</span><span class="ident" id="5803417">exists</span><span class="op" id="5803423">.</span><span class="ident" id="5803424">Pos</span><span class="op" id="5803427">,</span>&nbsp;<span class="string" id="5803429">&#34;&nbsp;&nbsp;previously&nbsp;declared&nbsp;here&#34;</span><span class="op" id="5803457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803462">return</span>&nbsp;<span class="ident" id="5803469">false</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803481">return</span>&nbsp;<span class="ident" id="5803488">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803498">for</span>&nbsp;<span class="ident" id="5803502">_</span><span class="op" id="5803503">,</span>&nbsp;<span class="ident" id="5803505">file</span>&nbsp;<span class="op" id="5803510">:=</span>&nbsp;<span class="keyword" id="5803513">range</span>&nbsp;<span class="ident" id="5803519">pkg</span><span class="op" id="5803522">.</span><span class="ident" id="5803523">Files</span>&nbsp;<span class="op" id="5803529">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803533">for</span>&nbsp;<span class="ident" id="5803537">_</span><span class="op" id="5803538">,</span>&nbsp;<span class="ident" id="5803540">fn</span>&nbsp;<span class="op" id="5803543">:=</span>&nbsp;<span class="keyword" id="5803546">range</span>&nbsp;<span class="ident" id="5803552">file</span><span class="op" id="5803556">.</span><span class="ident" id="5803557">Funcs</span>&nbsp;<span class="op" id="5803563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803568">t</span>&nbsp;<span class="op" id="5803570">:=</span>&nbsp;<span class="ident" id="5803573">fn</span><span class="op" id="5803575">.</span><span class="ident" id="5803576">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803584">sym</span>&nbsp;<span class="op" id="5803588">:=</span>&nbsp;<span class="op" id="5803591">&amp;</span><span class="ident" id="5803592">symbol</span><span class="op" id="5803598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803604">t</span><span class="op" id="5803605">.</span><span class="ident" id="5803606">Lit</span><span class="op" id="5803609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803615">SymFunc</span><span class="op" id="5803622">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803628">fn</span><span class="op" id="5803630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803636">t</span><span class="op" id="5803637">.</span><span class="ident" id="5803638">Pos</span><span class="op" id="5803641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803647">pkg</span><span class="op" id="5803650">.</span><span class="ident" id="5803651">Path</span><span class="op" id="5803655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803666">if</span>&nbsp;<span class="op" id="5803669">!</span><span class="ident" id="5803670">decl</span><span class="op" id="5803674">(</span><span class="ident" id="5803675">sym</span><span class="op" id="5803678">)</span>&nbsp;<span class="op" id="5803680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803686">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803704">fn</span><span class="op" id="5803706">.</span><span class="ident" id="5803707">index</span>&nbsp;<span class="op" id="5803713">=</span>&nbsp;<span class="ident" id="5803715">b</span><span class="op" id="5803716">.</span><span class="ident" id="5803717">curPkg</span><span class="op" id="5803723">.</span><span class="ident" id="5803724">Declare</span><span class="op" id="5803731">(</span><span class="ident" id="5803732">sym</span><span class="op" id="5803735">)</span>&nbsp;<span class="comment" id="5803737">//&nbsp;assign&nbsp;link&nbsp;index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803765">for</span>&nbsp;<span class="ident" id="5803769">_</span><span class="op" id="5803770">,</span>&nbsp;<span class="ident" id="5803772">v</span>&nbsp;<span class="op" id="5803774">:=</span>&nbsp;<span class="keyword" id="5803777">range</span>&nbsp;<span class="ident" id="5803783">file</span><span class="op" id="5803787">.</span><span class="ident" id="5803788">Vars</span>&nbsp;<span class="op" id="5803793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803798">t</span>&nbsp;<span class="op" id="5803800">:=</span>&nbsp;<span class="ident" id="5803803">v</span><span class="op" id="5803804">.</span><span class="ident" id="5803805">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803813">sym</span>&nbsp;<span class="op" id="5803817">:=</span>&nbsp;<span class="op" id="5803820">&amp;</span><span class="ident" id="5803821">symbol</span><span class="op" id="5803827">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803833">t</span><span class="op" id="5803834">.</span><span class="ident" id="5803835">Lit</span><span class="op" id="5803838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803844">SymVar</span><span class="op" id="5803850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803856">v</span><span class="op" id="5803857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803863">t</span><span class="op" id="5803864">.</span><span class="ident" id="5803865">Pos</span><span class="op" id="5803868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803874">pkg</span><span class="op" id="5803877">.</span><span class="ident" id="5803878">Path</span><span class="op" id="5803882">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803893">if</span>&nbsp;<span class="op" id="5803896">!</span><span class="ident" id="5803897">decl</span><span class="op" id="5803901">(</span><span class="ident" id="5803902">sym</span><span class="op" id="5803905">)</span>&nbsp;<span class="op" id="5803907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5803913">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803925">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803931">v</span><span class="op" id="5803932">.</span><span class="ident" id="5803933">index</span>&nbsp;<span class="op" id="5803939">=</span>&nbsp;<span class="ident" id="5803941">b</span><span class="op" id="5803942">.</span><span class="ident" id="5803943">curPkg</span><span class="op" id="5803949">.</span><span class="ident" id="5803950">Declare</span><span class="op" id="5803957">(</span><span class="ident" id="5803958">sym</span><span class="op" id="5803961">)</span>&nbsp;<span class="comment" id="5803963">//&nbsp;assign&nbsp;link&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5803989">}</span><br>
<span class="lineno"></span><span class="op" id="5803991">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5803994">func</span>&nbsp;<span class="ident" id="5803999">buildLib</span><span class="op" id="5804007">(</span><span class="ident" id="5804008">b</span>&nbsp;<span class="op" id="5804010">*</span><span class="ident" id="5804011">builder</span><span class="op" id="5804018">,</span>&nbsp;<span class="ident" id="5804020">pkg</span>&nbsp;<span class="op" id="5804024">*</span><span class="ident" id="5804025">pkg</span><span class="op" id="5804028">)</span>&nbsp;<span class="op" id="5804030">*</span><span class="ident" id="5804031">lib</span>&nbsp;<span class="op" id="5804035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804038">ret</span>&nbsp;<span class="op" id="5804042">:=</span>&nbsp;<span class="ident" id="5804045">newLib</span><span class="op" id="5804051">(</span><span class="ident" id="5804052">pkg</span><span class="op" id="5804055">.</span><span class="ident" id="5804056">Path</span><span class="op" id="5804060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804063">b</span><span class="op" id="5804064">.</span><span class="ident" id="5804065">curPkg</span>&nbsp;<span class="op" id="5804072">=</span>&nbsp;<span class="ident" id="5804074">ret</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804080">b</span><span class="op" id="5804081">.</span><span class="ident" id="5804082">scope</span><span class="op" id="5804087">.</span><span class="ident" id="5804088">Push</span><span class="op" id="5804092">(</span><span class="op" id="5804093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804096">defer</span>&nbsp;<span class="ident" id="5804102">b</span><span class="op" id="5804103">.</span><span class="ident" id="5804104">scope</span><span class="op" id="5804109">.</span><span class="ident" id="5804110">Pop</span><span class="op" id="5804113">(</span><span class="op" id="5804114">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804118">buildPkgScope</span><span class="op" id="5804131">(</span><span class="ident" id="5804132">b</span><span class="op" id="5804133">,</span>&nbsp;<span class="ident" id="5804135">pkg</span><span class="op" id="5804138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804141">if</span>&nbsp;<span class="ident" id="5804144">b</span><span class="op" id="5804145">.</span><span class="ident" id="5804146">Errs</span><span class="op" id="5804150">(</span><span class="op" id="5804151">)</span>&nbsp;<span class="op" id="5804153">!=</span>&nbsp;<span class="ident" id="5804156">nil</span>&nbsp;<span class="op" id="5804160">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804164">return</span>&nbsp;<span class="ident" id="5804171">nil</span>&nbsp;<span class="comment" id="5804175">//&nbsp;error&nbsp;on&nbsp;declaring,&nbsp;so&nbsp;just&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804218">for</span>&nbsp;<span class="ident" id="5804222">_</span><span class="op" id="5804223">,</span>&nbsp;<span class="ident" id="5804225">file</span>&nbsp;<span class="op" id="5804230">:=</span>&nbsp;<span class="keyword" id="5804233">range</span>&nbsp;<span class="ident" id="5804239">pkg</span><span class="op" id="5804242">.</span><span class="ident" id="5804243">Files</span>&nbsp;<span class="op" id="5804249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804253">buildFile</span><span class="op" id="5804262">(</span><span class="ident" id="5804263">b</span><span class="op" id="5804264">,</span>&nbsp;<span class="ident" id="5804266">file</span><span class="op" id="5804270">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804276">if</span>&nbsp;<span class="ident" id="5804279">b</span><span class="op" id="5804280">.</span><span class="ident" id="5804281">Errs</span><span class="op" id="5804285">(</span><span class="op" id="5804286">)</span>&nbsp;<span class="op" id="5804288">!=</span>&nbsp;<span class="ident" id="5804291">nil</span>&nbsp;<span class="op" id="5804295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804299">return</span>&nbsp;<span class="ident" id="5804306">nil</span>&nbsp;<span class="comment" id="5804310">//&nbsp;error&nbsp;on&nbsp;building</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804336">return</span>&nbsp;<span class="ident" id="5804343">ret</span><br>
<span class="lineno"></span><span class="op" id="5804347">}</span>
</div>
</body>
</html>
