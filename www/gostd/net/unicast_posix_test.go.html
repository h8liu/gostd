<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html" class="current">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6802241">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6802297">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6802351">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6802402">//&nbsp;+build&nbsp;!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6802420">package</span>&nbsp;<span class="ident" id="6802428">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6802433">import</span>&nbsp;<span class="op" id="6802440">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6802443">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6802454">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6802465">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6802475">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6802478">var</span>&nbsp;<span class="ident" id="6802482">listenerTests</span>&nbsp;<span class="op" id="6802496">=</span>&nbsp;<span class="op" id="6802498">[</span><span class="op" id="6802499">]</span><span class="keyword" id="6802500">struct</span>&nbsp;<span class="op" id="6802507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6802510">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6802519">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6802527">laddr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6802536">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6802544">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6802553">bool</span>&nbsp;<span class="comment" id="6802558">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6802599">wildcard</span>&nbsp;<span class="builtintype" id="6802608">bool</span>&nbsp;<span class="comment" id="6802613">//&nbsp;test&nbsp;with&nbsp;wildcard&nbsp;address</span><br>
<span class="lineno">20</span><span class="op" id="6802643">}</span><span class="op" id="6802644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802647">{</span><span class="ident" id="6802648"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802651">:</span>&nbsp;<span class="string" id="6802653">&#34;tcp&#34;</span><span class="op" id="6802658">,</span>&nbsp;<span class="ident" id="6802660"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802665">:</span>&nbsp;<span class="string" id="6802667">&#34;&#34;</span><span class="op" id="6802669">,</span>&nbsp;<span class="ident" id="6802671"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6802679">:</span>&nbsp;<span class="builtintype" id="6802681">true</span><span class="op" id="6802685">}</span><span class="op" id="6802686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802689">{</span><span class="ident" id="6802690"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802693">:</span>&nbsp;<span class="string" id="6802695">&#34;tcp&#34;</span><span class="op" id="6802700">,</span>&nbsp;<span class="ident" id="6802702"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802707">:</span>&nbsp;<span class="string" id="6802709">&#34;0.0.0.0&#34;</span><span class="op" id="6802718">,</span>&nbsp;<span class="ident" id="6802720"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6802728">:</span>&nbsp;<span class="builtintype" id="6802730">true</span><span class="op" id="6802734">}</span><span class="op" id="6802735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802738">{</span><span class="ident" id="6802739"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802742">:</span>&nbsp;<span class="string" id="6802744">&#34;tcp&#34;</span><span class="op" id="6802749">,</span>&nbsp;<span class="ident" id="6802751"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802756">:</span>&nbsp;<span class="string" id="6802758">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6802776">,</span>&nbsp;<span class="ident" id="6802778"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6802786">:</span>&nbsp;<span class="builtintype" id="6802788">true</span><span class="op" id="6802792">}</span><span class="op" id="6802793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802796">{</span><span class="ident" id="6802797"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802800">:</span>&nbsp;<span class="string" id="6802802">&#34;tcp&#34;</span><span class="op" id="6802807">,</span>&nbsp;<span class="ident" id="6802809"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802814">:</span>&nbsp;<span class="string" id="6802816">&#34;[::]&#34;</span><span class="op" id="6802822">,</span>&nbsp;<span class="ident" id="6802824"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span><span class="op" id="6802828">:</span>&nbsp;<span class="builtintype" id="6802830">true</span><span class="op" id="6802834">,</span>&nbsp;<span class="ident" id="6802836"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6802844">:</span>&nbsp;<span class="builtintype" id="6802846">true</span><span class="op" id="6802850">}</span><span class="op" id="6802851">,</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802855">{</span><span class="ident" id="6802856"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802859">:</span>&nbsp;<span class="string" id="6802861">&#34;tcp&#34;</span><span class="op" id="6802866">,</span>&nbsp;<span class="ident" id="6802868"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802873">:</span>&nbsp;<span class="string" id="6802875">&#34;127.0.0.1&#34;</span><span class="op" id="6802886">}</span><span class="op" id="6802887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802890">{</span><span class="ident" id="6802891"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802894">:</span>&nbsp;<span class="string" id="6802896">&#34;tcp&#34;</span><span class="op" id="6802901">,</span>&nbsp;<span class="ident" id="6802903"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802908">:</span>&nbsp;<span class="string" id="6802910">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6802930">}</span><span class="op" id="6802931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802934">{</span><span class="ident" id="6802935"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802938">:</span>&nbsp;<span class="string" id="6802940">&#34;tcp&#34;</span><span class="op" id="6802945">,</span>&nbsp;<span class="ident" id="6802947"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802952">:</span>&nbsp;<span class="string" id="6802954">&#34;[::1]&#34;</span><span class="op" id="6802961">,</span>&nbsp;<span class="ident" id="6802963"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span><span class="op" id="6802967">:</span>&nbsp;<span class="builtintype" id="6802969">true</span><span class="op" id="6802973">}</span><span class="op" id="6802974">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6802978">{</span><span class="ident" id="6802979"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6802982">:</span>&nbsp;<span class="string" id="6802984">&#34;tcp4&#34;</span><span class="op" id="6802990">,</span>&nbsp;<span class="ident" id="6802992"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6802997">:</span>&nbsp;<span class="string" id="6802999">&#34;&#34;</span><span class="op" id="6803001">,</span>&nbsp;<span class="ident" id="6803003"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6803011">:</span>&nbsp;<span class="builtintype" id="6803013">true</span><span class="op" id="6803017">}</span><span class="op" id="6803018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803021">{</span><span class="ident" id="6803022"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803025">:</span>&nbsp;<span class="string" id="6803027">&#34;tcp4&#34;</span><span class="op" id="6803033">,</span>&nbsp;<span class="ident" id="6803035"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803040">:</span>&nbsp;<span class="string" id="6803042">&#34;0.0.0.0&#34;</span><span class="op" id="6803051">,</span>&nbsp;<span class="ident" id="6803053"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6803061">:</span>&nbsp;<span class="builtintype" id="6803063">true</span><span class="op" id="6803067">}</span><span class="op" id="6803068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803071">{</span><span class="ident" id="6803072"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803075">:</span>&nbsp;<span class="string" id="6803077">&#34;tcp4&#34;</span><span class="op" id="6803083">,</span>&nbsp;<span class="ident" id="6803085"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803090">:</span>&nbsp;<span class="string" id="6803092">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6803110">,</span>&nbsp;<span class="ident" id="6803112"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6803120">:</span>&nbsp;<span class="builtintype" id="6803122">true</span><span class="op" id="6803126">}</span><span class="op" id="6803127">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803131">{</span><span class="ident" id="6803132"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803135">:</span>&nbsp;<span class="string" id="6803137">&#34;tcp4&#34;</span><span class="op" id="6803143">,</span>&nbsp;<span class="ident" id="6803145"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803150">:</span>&nbsp;<span class="string" id="6803152">&#34;127.0.0.1&#34;</span><span class="op" id="6803163">}</span><span class="op" id="6803164">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803167">{</span><span class="ident" id="6803168"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803171">:</span>&nbsp;<span class="string" id="6803173">&#34;tcp4&#34;</span><span class="op" id="6803179">,</span>&nbsp;<span class="ident" id="6803181"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803186">:</span>&nbsp;<span class="string" id="6803188">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6803208">}</span><span class="op" id="6803209">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803213">{</span><span class="ident" id="6803214"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803217">:</span>&nbsp;<span class="string" id="6803219">&#34;tcp6&#34;</span><span class="op" id="6803225">,</span>&nbsp;<span class="ident" id="6803227"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803232">:</span>&nbsp;<span class="string" id="6803234">&#34;&#34;</span><span class="op" id="6803236">,</span>&nbsp;<span class="ident" id="6803238"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span><span class="op" id="6803242">:</span>&nbsp;<span class="builtintype" id="6803244">true</span><span class="op" id="6803248">,</span>&nbsp;<span class="ident" id="6803250"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6803258">:</span>&nbsp;<span class="builtintype" id="6803260">true</span><span class="op" id="6803264">}</span><span class="op" id="6803265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803268">{</span><span class="ident" id="6803269"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803272">:</span>&nbsp;<span class="string" id="6803274">&#34;tcp6&#34;</span><span class="op" id="6803280">,</span>&nbsp;<span class="ident" id="6803282"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803287">:</span>&nbsp;<span class="string" id="6803289">&#34;[::]&#34;</span><span class="op" id="6803295">,</span>&nbsp;<span class="ident" id="6803297"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span><span class="op" id="6803301">:</span>&nbsp;<span class="builtintype" id="6803303">true</span><span class="op" id="6803307">,</span>&nbsp;<span class="ident" id="6803309"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span><span class="op" id="6803317">:</span>&nbsp;<span class="builtintype" id="6803319">true</span><span class="op" id="6803323">}</span><span class="op" id="6803324">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803328">{</span><span class="ident" id="6803329"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803332">:</span>&nbsp;<span class="string" id="6803334">&#34;tcp6&#34;</span><span class="op" id="6803340">,</span>&nbsp;<span class="ident" id="6803342"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803347">:</span>&nbsp;<span class="string" id="6803349">&#34;[::1]&#34;</span><span class="op" id="6803356">,</span>&nbsp;<span class="ident" id="6803358"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span><span class="op" id="6803362">:</span>&nbsp;<span class="builtintype" id="6803364">true</span><span class="op" id="6803368">}</span><span class="op" id="6803369">,</span><br>
<span class="lineno"></span><span class="op" id="6803371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6803374">//&nbsp;TestTCPListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6803439">//&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;listening&nbsp;address&nbsp;and</span><br>
<span class="lineno">45</span><span class="comment" id="6803504">//&nbsp;same&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6803518">func</span>&nbsp;<span class="ident" id="6803523">TestTCPListener</span><span class="op" id="6803538">(</span><span class="ident" id="6803539">t</span>&nbsp;<span class="op" id="6803541">*</span><span class="ident" id="6803542"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6803549">.</span><span class="ident" id="6803550"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6803551">)</span>&nbsp;<span class="op" id="6803553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803556">switch</span>&nbsp;<span class="ident" id="6803563"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6803570">.</span><span class="ident" id="6803571"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6803576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803579">case</span>&nbsp;<span class="string" id="6803584">&#34;plan9&#34;</span><span class="op" id="6803591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6803595"><a href="/gostd/net/unicast_posix_test.go.html#6803539">t</a></span><span class="op" id="6803596">.</span><span class="ident" id="6803597"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6803602">(</span><span class="string" id="6803603">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6803624">,</span>&nbsp;<span class="ident" id="6803626"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6803633">.</span><span class="ident" id="6803634"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6803638">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803645">for</span>&nbsp;<span class="ident" id="6803649">_</span><span class="op" id="6803650">,</span>&nbsp;<span class="ident" id="6803652">tt</span>&nbsp;<span class="op" id="6803655">:=</span>&nbsp;<span class="keyword" id="6803658">range</span>&nbsp;<span class="ident" id="6803664"><a href="/gostd/net/unicast_posix_test.go.html#6802482">listenerTests</a></span>&nbsp;<span class="op" id="6803678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803682">if</span>&nbsp;<span class="ident" id="6803685"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803687">.</span><span class="ident" id="6803688"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span>&nbsp;<span class="op" id="6803697">&amp;&amp;</span>&nbsp;<span class="op" id="6803700">(</span><span class="ident" id="6803701"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6803708">.</span><span class="ident" id="6803709"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6803714">(</span><span class="op" id="6803715">)</span>&nbsp;<span class="op" id="6803717">||</span>&nbsp;<span class="op" id="6803720">!</span><span class="op" id="6803721">*</span><span class="ident" id="6803722"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span><span class="op" id="6803734">)</span>&nbsp;<span class="op" id="6803736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803741">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803756">if</span>&nbsp;<span class="ident" id="6803759"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803761">.</span><span class="ident" id="6803762"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span>&nbsp;<span class="op" id="6803767">&amp;&amp;</span>&nbsp;<span class="op" id="6803770">!</span><span class="ident" id="6803771"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6803784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6803789">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6803800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6803804">l1</span><span class="op" id="6803806">,</span>&nbsp;<span class="ident" id="6803808">port</span>&nbsp;<span class="op" id="6803813">:=</span>&nbsp;<span class="ident" id="6803816"><a href="/gostd/net/unicast_posix_test.go.html#6811308">usableListenPort</a></span><span class="op" id="6803832">(</span><span class="ident" id="6803833"><a href="/gostd/net/unicast_posix_test.go.html#6803539">t</a></span><span class="op" id="6803834">,</span>&nbsp;<span class="ident" id="6803836"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803838">.</span><span class="ident" id="6803839"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803842">,</span>&nbsp;<span class="ident" id="6803844"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803846">.</span><span class="ident" id="6803847"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803852">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6803856"><a href="/gostd/net/unicast_posix_test.go.html#6812578">checkFirstListener</a></span><span class="op" id="6803874">(</span><span class="ident" id="6803875"><a href="/gostd/net/unicast_posix_test.go.html#6803539">t</a></span><span class="op" id="6803876">,</span>&nbsp;<span class="ident" id="6803878"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803880">.</span><span class="ident" id="6803881"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803884">,</span>&nbsp;<span class="ident" id="6803886"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803888">.</span><span class="ident" id="6803889"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803894">+</span><span class="string" id="6803895">&#34;:&#34;</span><span class="op" id="6803898">+</span><span class="ident" id="6803899"><a href="/gostd/net/unicast_posix_test.go.html#6803808">port</a></span><span class="op" id="6803903">,</span>&nbsp;<span class="ident" id="6803905"><a href="/gostd/net/unicast_posix_test.go.html#6803804">l1</a></span><span class="op" id="6803907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6803911">l2</span><span class="op" id="6803913">,</span>&nbsp;<span class="ident" id="6803915">err</span>&nbsp;<span class="op" id="6803919">:=</span>&nbsp;<span class="ident" id="6803922"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6803928">(</span><span class="ident" id="6803929"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803931">.</span><span class="ident" id="6803932"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803935">,</span>&nbsp;<span class="ident" id="6803937"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803939">.</span><span class="ident" id="6803940"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803945">+</span><span class="string" id="6803946">&#34;:&#34;</span><span class="op" id="6803949">+</span><span class="ident" id="6803950"><a href="/gostd/net/unicast_posix_test.go.html#6803808">port</a></span><span class="op" id="6803954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6803958"><a href="/gostd/net/unicast_posix_test.go.html#6813690">checkSecondListener</a></span><span class="op" id="6803977">(</span><span class="ident" id="6803978"><a href="/gostd/net/unicast_posix_test.go.html#6803539">t</a></span><span class="op" id="6803979">,</span>&nbsp;<span class="ident" id="6803981"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803983">.</span><span class="ident" id="6803984"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6803987">,</span>&nbsp;<span class="ident" id="6803989"><a href="/gostd/net/unicast_posix_test.go.html#6803652">tt</a></span><span class="op" id="6803991">.</span><span class="ident" id="6803992"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6803997">+</span><span class="string" id="6803998">&#34;:&#34;</span><span class="op" id="6804001">+</span><span class="ident" id="6804002"><a href="/gostd/net/unicast_posix_test.go.html#6803808">port</a></span><span class="op" id="6804006">,</span>&nbsp;<span class="ident" id="6804008"><a href="/gostd/net/unicast_posix_test.go.html#6803915">err</a></span><span class="op" id="6804011">,</span>&nbsp;<span class="ident" id="6804013"><a href="/gostd/net/unicast_posix_test.go.html#6803911">l2</a></span><span class="op" id="6804015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804019"><a href="/gostd/net/unicast_posix_test.go.html#6803804">l1</a></span><span class="op" id="6804021">.</span><span class="ident" id="6804022"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6804027">(</span><span class="op" id="6804028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804031">}</span><br>
<span class="lineno">65</span><span class="op" id="6804033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6804036">//&nbsp;TestUDPListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6804101">//&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;listening&nbsp;address&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6804166">//&nbsp;same&nbsp;port.</span><br>
<span class="lineno">70</span><span class="keyword" id="6804180">func</span>&nbsp;<span class="ident" id="6804185">TestUDPListener</span><span class="op" id="6804200">(</span><span class="ident" id="6804201">t</span>&nbsp;<span class="op" id="6804203">*</span><span class="ident" id="6804204"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6804211">.</span><span class="ident" id="6804212"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6804213">)</span>&nbsp;<span class="op" id="6804215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804218">switch</span>&nbsp;<span class="ident" id="6804225"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6804232">.</span><span class="ident" id="6804233"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6804238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804241">case</span>&nbsp;<span class="string" id="6804246">&#34;plan9&#34;</span><span class="op" id="6804253">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804257"><a href="/gostd/net/unicast_posix_test.go.html#6804201">t</a></span><span class="op" id="6804258">.</span><span class="ident" id="6804259"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6804264">(</span><span class="string" id="6804265">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6804286">,</span>&nbsp;<span class="ident" id="6804288"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6804295">.</span><span class="ident" id="6804296"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6804300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804303">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804307">toudpnet</span>&nbsp;<span class="op" id="6804316">:=</span>&nbsp;<span class="keyword" id="6804319">func</span><span class="op" id="6804323">(</span><span class="ident" id="6804324">net</span>&nbsp;<span class="builtintype" id="6804328">string</span><span class="op" id="6804334">)</span>&nbsp;<span class="builtintype" id="6804336">string</span>&nbsp;<span class="op" id="6804343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804347">switch</span>&nbsp;<span class="ident" id="6804354"><a href="/gostd/net/unicast_posix_test.go.html#6804324">net</a></span>&nbsp;<span class="op" id="6804358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804362">case</span>&nbsp;<span class="string" id="6804367">&#34;tcp&#34;</span><span class="op" id="6804372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804377">return</span>&nbsp;<span class="string" id="6804384">&#34;udp&#34;</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804392">case</span>&nbsp;<span class="string" id="6804397">&#34;tcp4&#34;</span><span class="op" id="6804403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804408">return</span>&nbsp;<span class="string" id="6804415">&#34;udp4&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804424">case</span>&nbsp;<span class="string" id="6804429">&#34;tcp6&#34;</span><span class="op" id="6804435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804440">return</span>&nbsp;<span class="string" id="6804447">&#34;udp6&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804456">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804460">return</span>&nbsp;<span class="string" id="6804467">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804480">for</span>&nbsp;<span class="ident" id="6804484">_</span><span class="op" id="6804485">,</span>&nbsp;<span class="ident" id="6804487">tt</span>&nbsp;<span class="op" id="6804490">:=</span>&nbsp;<span class="keyword" id="6804493">range</span>&nbsp;<span class="ident" id="6804499"><a href="/gostd/net/unicast_posix_test.go.html#6802482">listenerTests</a></span>&nbsp;<span class="op" id="6804513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804517">if</span>&nbsp;<span class="ident" id="6804520"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804522">.</span><span class="ident" id="6804523"><a href="/gostd/net/unicast_posix_test.go.html#6802599">wildcard</a></span>&nbsp;<span class="op" id="6804532">&amp;&amp;</span>&nbsp;<span class="op" id="6804535">(</span><span class="ident" id="6804536"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6804543">.</span><span class="ident" id="6804544"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6804549">(</span><span class="op" id="6804550">)</span>&nbsp;<span class="op" id="6804552">||</span>&nbsp;<span class="op" id="6804555">!</span><span class="op" id="6804556">*</span><span class="ident" id="6804557"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span><span class="op" id="6804569">)</span>&nbsp;<span class="op" id="6804571">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804576">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804591">if</span>&nbsp;<span class="ident" id="6804594"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804596">.</span><span class="ident" id="6804597"><a href="/gostd/net/unicast_posix_test.go.html#6802544">ipv6</a></span>&nbsp;<span class="op" id="6804602">&amp;&amp;</span>&nbsp;<span class="op" id="6804605">!</span><span class="ident" id="6804606"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6804619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6804624">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804635">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804639"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804641">.</span><span class="ident" id="6804642"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span>&nbsp;<span class="op" id="6804646">=</span>&nbsp;<span class="ident" id="6804648"><a href="/gostd/net/unicast_posix_test.go.html#6804307">toudpnet</a></span><span class="op" id="6804656">(</span><span class="ident" id="6804657"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804659">.</span><span class="ident" id="6804660"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6804663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804667">l1</span><span class="op" id="6804669">,</span>&nbsp;<span class="ident" id="6804671">port</span>&nbsp;<span class="op" id="6804676">:=</span>&nbsp;<span class="ident" id="6804679"><a href="/gostd/net/unicast_posix_test.go.html#6811806">usableListenPacketPort</a></span><span class="op" id="6804701">(</span><span class="ident" id="6804702"><a href="/gostd/net/unicast_posix_test.go.html#6804201">t</a></span><span class="op" id="6804703">,</span>&nbsp;<span class="ident" id="6804705"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804707">.</span><span class="ident" id="6804708"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6804711">,</span>&nbsp;<span class="ident" id="6804713"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804715">.</span><span class="ident" id="6804716"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6804721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804725"><a href="/gostd/net/unicast_posix_test.go.html#6812578">checkFirstListener</a></span><span class="op" id="6804743">(</span><span class="ident" id="6804744"><a href="/gostd/net/unicast_posix_test.go.html#6804201">t</a></span><span class="op" id="6804745">,</span>&nbsp;<span class="ident" id="6804747"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804749">.</span><span class="ident" id="6804750"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6804753">,</span>&nbsp;<span class="ident" id="6804755"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804757">.</span><span class="ident" id="6804758"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6804763">+</span><span class="string" id="6804764">&#34;:&#34;</span><span class="op" id="6804767">+</span><span class="ident" id="6804768"><a href="/gostd/net/unicast_posix_test.go.html#6804671">port</a></span><span class="op" id="6804772">,</span>&nbsp;<span class="ident" id="6804774"><a href="/gostd/net/unicast_posix_test.go.html#6804667">l1</a></span><span class="op" id="6804776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804780">l2</span><span class="op" id="6804782">,</span>&nbsp;<span class="ident" id="6804784">err</span>&nbsp;<span class="op" id="6804788">:=</span>&nbsp;<span class="ident" id="6804791"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6804803">(</span><span class="ident" id="6804804"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804806">.</span><span class="ident" id="6804807"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6804810">,</span>&nbsp;<span class="ident" id="6804812"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804814">.</span><span class="ident" id="6804815"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6804820">+</span><span class="string" id="6804821">&#34;:&#34;</span><span class="op" id="6804824">+</span><span class="ident" id="6804825"><a href="/gostd/net/unicast_posix_test.go.html#6804671">port</a></span><span class="op" id="6804829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804833"><a href="/gostd/net/unicast_posix_test.go.html#6813690">checkSecondListener</a></span><span class="op" id="6804852">(</span><span class="ident" id="6804853"><a href="/gostd/net/unicast_posix_test.go.html#6804201">t</a></span><span class="op" id="6804854">,</span>&nbsp;<span class="ident" id="6804856"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804858">.</span><span class="ident" id="6804859"><a href="/gostd/net/unicast_posix_test.go.html#6802510">net</a></span><span class="op" id="6804862">,</span>&nbsp;<span class="ident" id="6804864"><a href="/gostd/net/unicast_posix_test.go.html#6804487">tt</a></span><span class="op" id="6804866">.</span><span class="ident" id="6804867"><a href="/gostd/net/unicast_posix_test.go.html#6802527">laddr</a></span><span class="op" id="6804872">+</span><span class="string" id="6804873">&#34;:&#34;</span><span class="op" id="6804876">+</span><span class="ident" id="6804877"><a href="/gostd/net/unicast_posix_test.go.html#6804671">port</a></span><span class="op" id="6804881">,</span>&nbsp;<span class="ident" id="6804883"><a href="/gostd/net/unicast_posix_test.go.html#6804784">err</a></span><span class="op" id="6804886">,</span>&nbsp;<span class="ident" id="6804888"><a href="/gostd/net/unicast_posix_test.go.html#6804780">l2</a></span><span class="op" id="6804890">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804894"><a href="/gostd/net/unicast_posix_test.go.html#6804667">l1</a></span><span class="op" id="6804896">.</span><span class="ident" id="6804897"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6804902">(</span><span class="op" id="6804903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6804906">}</span><br>
<span class="lineno"></span><span class="op" id="6804908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6804911">var</span>&nbsp;<span class="ident" id="6804915">dualStackListenerTests</span>&nbsp;<span class="op" id="6804938">=</span>&nbsp;<span class="op" id="6804940">[</span><span class="op" id="6804941">]</span><span class="keyword" id="6804942">struct</span>&nbsp;<span class="op" id="6804949">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804952">net1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6804961">string</span>&nbsp;<span class="comment" id="6804968">//&nbsp;first&nbsp;listener</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6804987">laddr1</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6804996">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6805004">net2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6805013">string</span>&nbsp;<span class="comment" id="6805020">//&nbsp;second&nbsp;listener</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6805040">laddr2</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6805049">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6805057">wildcard</span>&nbsp;<span class="builtintype" id="6805066">bool</span>&nbsp;&nbsp;<span class="comment" id="6805072">//&nbsp;test&nbsp;with&nbsp;wildcard&nbsp;address</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6805103">xerr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6805112">error</span>&nbsp;<span class="comment" id="6805118">//&nbsp;expected&nbsp;error&nbsp;value,&nbsp;nil&nbsp;or&nbsp;other</span><br>
<span class="lineno"></span><span class="op" id="6805156">}</span><span class="op" id="6805157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805160">//&nbsp;Test&nbsp;cases&nbsp;and&nbsp;expected&nbsp;results&nbsp;for&nbsp;the&nbsp;attemping&nbsp;2nd&nbsp;listen&nbsp;on&nbsp;the&nbsp;same&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805242">//&nbsp;1st&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2nd&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;darwin&nbsp;&nbsp;freebsd&nbsp;&nbsp;linux&nbsp;&nbsp;openbsd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805331">//&nbsp;------------------------------------------------------------------------------------</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805420">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805506">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805592">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805678">//&nbsp;------------------------------------------------------------------------------------</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805767">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805854">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6805941">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806028">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806115">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::ffff:0.0.0.0]&#34;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806202">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::ffff:0.0.0.0]&#34;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806289">//&nbsp;------------------------------------------------------------------------------------</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806378">//&nbsp;&#34;tcp4&#34;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp6&#34;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806465">//&nbsp;&#34;tcp6&#34;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp4&#34;&nbsp;&#34;&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806552">//&nbsp;&#34;tcp4&#34;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp6&#34;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806639">//&nbsp;&#34;tcp6&#34;&nbsp;&#34;[::]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp4&#34;&nbsp;&#34;0.0.0.0&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806726">//&nbsp;------------------------------------------------------------------------------------</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806815">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;127.0.0.1&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::1]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806902">//&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;[::1]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp&#34;&nbsp;&nbsp;&#34;127.0.0.1&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6806989">//&nbsp;&#34;tcp4&#34;&nbsp;&#34;127.0.0.1&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp6&#34;&nbsp;&#34;[::1]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807076">//&nbsp;&#34;tcp6&#34;&nbsp;&#34;[::1]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;tcp4&#34;&nbsp;&#34;127.0.0.1&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807163">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807167">//&nbsp;Platform&nbsp;default&nbsp;configurations:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807204">//&nbsp;darwin,&nbsp;kernel&nbsp;version&nbsp;11.3.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807238">//&nbsp;&nbsp;&nbsp;&nbsp;net.inet6.ip6.v6only=0&nbsp;(overridable&nbsp;by&nbsp;sysctl&nbsp;or&nbsp;IPV6_V6ONLY&nbsp;option)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807311">//&nbsp;freebsd,&nbsp;kernel&nbsp;version&nbsp;8.2</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807343">//&nbsp;&nbsp;&nbsp;&nbsp;net.inet6.ip6.v6only=1&nbsp;(overridable&nbsp;by&nbsp;sysctl&nbsp;or&nbsp;IPV6_V6ONLY&nbsp;option)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807416">//&nbsp;linux,&nbsp;kernel&nbsp;version&nbsp;3.0.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807448">//&nbsp;&nbsp;&nbsp;&nbsp;net.ipv6.bindv6only=0&nbsp;(overridable&nbsp;by&nbsp;sysctl&nbsp;or&nbsp;IPV6_V6ONLY&nbsp;option)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807520">//&nbsp;openbsd,&nbsp;kernel&nbsp;version&nbsp;5.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6807552">//&nbsp;&nbsp;&nbsp;&nbsp;net.inet6.ip6.v6only=1&nbsp;(overriding&nbsp;is&nbsp;prohibited)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6807607">{</span><span class="ident" id="6807608"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6807612">:</span>&nbsp;<span class="string" id="6807614">&#34;tcp&#34;</span><span class="op" id="6807619">,</span>&nbsp;<span class="ident" id="6807621"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6807627">:</span>&nbsp;<span class="string" id="6807629">&#34;&#34;</span><span class="op" id="6807631">,</span>&nbsp;<span class="ident" id="6807633"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6807637">:</span>&nbsp;<span class="string" id="6807639">&#34;tcp&#34;</span><span class="op" id="6807644">,</span>&nbsp;<span class="ident" id="6807646"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6807652">:</span>&nbsp;<span class="string" id="6807654">&#34;&#34;</span><span class="op" id="6807656">,</span>&nbsp;<span class="ident" id="6807658"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6807666">:</span>&nbsp;<span class="builtintype" id="6807668">true</span><span class="op" id="6807672">,</span>&nbsp;<span class="ident" id="6807674"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6807678">:</span>&nbsp;<span class="ident" id="6807680"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6807687">.</span><span class="ident" id="6807688"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6807698">}</span><span class="op" id="6807699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6807702">{</span><span class="ident" id="6807703"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6807707">:</span>&nbsp;<span class="string" id="6807709">&#34;tcp&#34;</span><span class="op" id="6807714">,</span>&nbsp;<span class="ident" id="6807716"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6807722">:</span>&nbsp;<span class="string" id="6807724">&#34;&#34;</span><span class="op" id="6807726">,</span>&nbsp;<span class="ident" id="6807728"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6807732">:</span>&nbsp;<span class="string" id="6807734">&#34;tcp&#34;</span><span class="op" id="6807739">,</span>&nbsp;<span class="ident" id="6807741"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6807747">:</span>&nbsp;<span class="string" id="6807749">&#34;0.0.0.0&#34;</span><span class="op" id="6807758">,</span>&nbsp;<span class="ident" id="6807760"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6807768">:</span>&nbsp;<span class="builtintype" id="6807770">true</span><span class="op" id="6807774">,</span>&nbsp;<span class="ident" id="6807776"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6807780">:</span>&nbsp;<span class="ident" id="6807782"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6807789">.</span><span class="ident" id="6807790"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6807800">}</span><span class="op" id="6807801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6807804">{</span><span class="ident" id="6807805"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6807809">:</span>&nbsp;<span class="string" id="6807811">&#34;tcp&#34;</span><span class="op" id="6807816">,</span>&nbsp;<span class="ident" id="6807818"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6807824">:</span>&nbsp;<span class="string" id="6807826">&#34;0.0.0.0&#34;</span><span class="op" id="6807835">,</span>&nbsp;<span class="ident" id="6807837"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6807841">:</span>&nbsp;<span class="string" id="6807843">&#34;tcp&#34;</span><span class="op" id="6807848">,</span>&nbsp;<span class="ident" id="6807850"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6807856">:</span>&nbsp;<span class="string" id="6807858">&#34;&#34;</span><span class="op" id="6807860">,</span>&nbsp;<span class="ident" id="6807862"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6807870">:</span>&nbsp;<span class="builtintype" id="6807872">true</span><span class="op" id="6807876">,</span>&nbsp;<span class="ident" id="6807878"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6807882">:</span>&nbsp;<span class="ident" id="6807884"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6807891">.</span><span class="ident" id="6807892"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6807902">}</span><span class="op" id="6807903">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6807907">{</span><span class="ident" id="6807908"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6807912">:</span>&nbsp;<span class="string" id="6807914">&#34;tcp&#34;</span><span class="op" id="6807919">,</span>&nbsp;<span class="ident" id="6807921"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6807927">:</span>&nbsp;<span class="string" id="6807929">&#34;&#34;</span><span class="op" id="6807931">,</span>&nbsp;<span class="ident" id="6807933"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6807937">:</span>&nbsp;<span class="string" id="6807939">&#34;tcp&#34;</span><span class="op" id="6807944">,</span>&nbsp;<span class="ident" id="6807946"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6807952">:</span>&nbsp;<span class="string" id="6807954">&#34;[::]&#34;</span><span class="op" id="6807960">,</span>&nbsp;<span class="ident" id="6807962"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6807970">:</span>&nbsp;<span class="builtintype" id="6807972">true</span><span class="op" id="6807976">,</span>&nbsp;<span class="ident" id="6807978"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6807982">:</span>&nbsp;<span class="ident" id="6807984"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6807991">.</span><span class="ident" id="6807992"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808002">}</span><span class="op" id="6808003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808006">{</span><span class="ident" id="6808007"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808011">:</span>&nbsp;<span class="string" id="6808013">&#34;tcp&#34;</span><span class="op" id="6808018">,</span>&nbsp;<span class="ident" id="6808020"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808026">:</span>&nbsp;<span class="string" id="6808028">&#34;[::]&#34;</span><span class="op" id="6808034">,</span>&nbsp;<span class="ident" id="6808036"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808040">:</span>&nbsp;<span class="string" id="6808042">&#34;tcp&#34;</span><span class="op" id="6808047">,</span>&nbsp;<span class="ident" id="6808049"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808055">:</span>&nbsp;<span class="string" id="6808057">&#34;&#34;</span><span class="op" id="6808059">,</span>&nbsp;<span class="ident" id="6808061"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808069">:</span>&nbsp;<span class="builtintype" id="6808071">true</span><span class="op" id="6808075">,</span>&nbsp;<span class="ident" id="6808077"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6808081">:</span>&nbsp;<span class="ident" id="6808083"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6808090">.</span><span class="ident" id="6808091"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808101">}</span><span class="op" id="6808102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808105">{</span><span class="ident" id="6808106"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808110">:</span>&nbsp;<span class="string" id="6808112">&#34;tcp&#34;</span><span class="op" id="6808117">,</span>&nbsp;<span class="ident" id="6808119"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808125">:</span>&nbsp;<span class="string" id="6808127">&#34;0.0.0.0&#34;</span><span class="op" id="6808136">,</span>&nbsp;<span class="ident" id="6808138"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808142">:</span>&nbsp;<span class="string" id="6808144">&#34;tcp&#34;</span><span class="op" id="6808149">,</span>&nbsp;<span class="ident" id="6808151"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808157">:</span>&nbsp;<span class="string" id="6808159">&#34;[::]&#34;</span><span class="op" id="6808165">,</span>&nbsp;<span class="ident" id="6808167"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808175">:</span>&nbsp;<span class="builtintype" id="6808177">true</span><span class="op" id="6808181">,</span>&nbsp;<span class="ident" id="6808183"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6808187">:</span>&nbsp;<span class="ident" id="6808189"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6808196">.</span><span class="ident" id="6808197"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808207">}</span><span class="op" id="6808208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808211">{</span><span class="ident" id="6808212"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808216">:</span>&nbsp;<span class="string" id="6808218">&#34;tcp&#34;</span><span class="op" id="6808223">,</span>&nbsp;<span class="ident" id="6808225"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808231">:</span>&nbsp;<span class="string" id="6808233">&#34;[::]&#34;</span><span class="op" id="6808239">,</span>&nbsp;<span class="ident" id="6808241"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808245">:</span>&nbsp;<span class="string" id="6808247">&#34;tcp&#34;</span><span class="op" id="6808252">,</span>&nbsp;<span class="ident" id="6808254"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808260">:</span>&nbsp;<span class="string" id="6808262">&#34;0.0.0.0&#34;</span><span class="op" id="6808271">,</span>&nbsp;<span class="ident" id="6808273"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808281">:</span>&nbsp;<span class="builtintype" id="6808283">true</span><span class="op" id="6808287">,</span>&nbsp;<span class="ident" id="6808289"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6808293">:</span>&nbsp;<span class="ident" id="6808295"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6808302">.</span><span class="ident" id="6808303"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808313">}</span><span class="op" id="6808314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808317">{</span><span class="ident" id="6808318"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808322">:</span>&nbsp;<span class="string" id="6808324">&#34;tcp&#34;</span><span class="op" id="6808329">,</span>&nbsp;<span class="ident" id="6808331"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808337">:</span>&nbsp;<span class="string" id="6808339">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6808357">,</span>&nbsp;<span class="ident" id="6808359"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808363">:</span>&nbsp;<span class="string" id="6808365">&#34;tcp&#34;</span><span class="op" id="6808370">,</span>&nbsp;<span class="ident" id="6808372"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808378">:</span>&nbsp;<span class="string" id="6808380">&#34;[::]&#34;</span><span class="op" id="6808386">,</span>&nbsp;<span class="ident" id="6808388"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808396">:</span>&nbsp;<span class="builtintype" id="6808398">true</span><span class="op" id="6808402">,</span>&nbsp;<span class="ident" id="6808404"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6808408">:</span>&nbsp;<span class="ident" id="6808410"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6808417">.</span><span class="ident" id="6808418"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808428">}</span><span class="op" id="6808429">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808432">{</span><span class="ident" id="6808433"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808437">:</span>&nbsp;<span class="string" id="6808439">&#34;tcp&#34;</span><span class="op" id="6808444">,</span>&nbsp;<span class="ident" id="6808446"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808452">:</span>&nbsp;<span class="string" id="6808454">&#34;[::]&#34;</span><span class="op" id="6808460">,</span>&nbsp;<span class="ident" id="6808462"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808466">:</span>&nbsp;<span class="string" id="6808468">&#34;tcp&#34;</span><span class="op" id="6808473">,</span>&nbsp;<span class="ident" id="6808475"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808481">:</span>&nbsp;<span class="string" id="6808483">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="6808501">,</span>&nbsp;<span class="ident" id="6808503"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808511">:</span>&nbsp;<span class="builtintype" id="6808513">true</span><span class="op" id="6808517">,</span>&nbsp;<span class="ident" id="6808519"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6808523">:</span>&nbsp;<span class="ident" id="6808525"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6808532">.</span><span class="ident" id="6808533"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2600189">EADDRINUSE</a></span><span class="op" id="6808543">}</span><span class="op" id="6808544">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808548">{</span><span class="ident" id="6808549"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808553">:</span>&nbsp;<span class="string" id="6808555">&#34;tcp4&#34;</span><span class="op" id="6808561">,</span>&nbsp;<span class="ident" id="6808563"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808569">:</span>&nbsp;<span class="string" id="6808571">&#34;&#34;</span><span class="op" id="6808573">,</span>&nbsp;<span class="ident" id="6808575"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808579">:</span>&nbsp;<span class="string" id="6808581">&#34;tcp6&#34;</span><span class="op" id="6808587">,</span>&nbsp;<span class="ident" id="6808589"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808595">:</span>&nbsp;<span class="string" id="6808597">&#34;&#34;</span><span class="op" id="6808599">,</span>&nbsp;<span class="ident" id="6808601"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808609">:</span>&nbsp;<span class="builtintype" id="6808611">true</span><span class="op" id="6808615">}</span><span class="op" id="6808616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808619">{</span><span class="ident" id="6808620"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808624">:</span>&nbsp;<span class="string" id="6808626">&#34;tcp6&#34;</span><span class="op" id="6808632">,</span>&nbsp;<span class="ident" id="6808634"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808640">:</span>&nbsp;<span class="string" id="6808642">&#34;&#34;</span><span class="op" id="6808644">,</span>&nbsp;<span class="ident" id="6808646"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808650">:</span>&nbsp;<span class="string" id="6808652">&#34;tcp4&#34;</span><span class="op" id="6808658">,</span>&nbsp;<span class="ident" id="6808660"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808666">:</span>&nbsp;<span class="string" id="6808668">&#34;&#34;</span><span class="op" id="6808670">,</span>&nbsp;<span class="ident" id="6808672"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808680">:</span>&nbsp;<span class="builtintype" id="6808682">true</span><span class="op" id="6808686">}</span><span class="op" id="6808687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808690">{</span><span class="ident" id="6808691"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808695">:</span>&nbsp;<span class="string" id="6808697">&#34;tcp4&#34;</span><span class="op" id="6808703">,</span>&nbsp;<span class="ident" id="6808705"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808711">:</span>&nbsp;<span class="string" id="6808713">&#34;0.0.0.0&#34;</span><span class="op" id="6808722">,</span>&nbsp;<span class="ident" id="6808724"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808728">:</span>&nbsp;<span class="string" id="6808730">&#34;tcp6&#34;</span><span class="op" id="6808736">,</span>&nbsp;<span class="ident" id="6808738"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808744">:</span>&nbsp;<span class="string" id="6808746">&#34;[::]&#34;</span><span class="op" id="6808752">,</span>&nbsp;<span class="ident" id="6808754"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808762">:</span>&nbsp;<span class="builtintype" id="6808764">true</span><span class="op" id="6808768">}</span><span class="op" id="6808769">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808772">{</span><span class="ident" id="6808773"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808777">:</span>&nbsp;<span class="string" id="6808779">&#34;tcp6&#34;</span><span class="op" id="6808785">,</span>&nbsp;<span class="ident" id="6808787"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808793">:</span>&nbsp;<span class="string" id="6808795">&#34;[::]&#34;</span><span class="op" id="6808801">,</span>&nbsp;<span class="ident" id="6808803"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808807">:</span>&nbsp;<span class="string" id="6808809">&#34;tcp4&#34;</span><span class="op" id="6808815">,</span>&nbsp;<span class="ident" id="6808817"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808823">:</span>&nbsp;<span class="string" id="6808825">&#34;0.0.0.0&#34;</span><span class="op" id="6808834">,</span>&nbsp;<span class="ident" id="6808836"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span><span class="op" id="6808844">:</span>&nbsp;<span class="builtintype" id="6808846">true</span><span class="op" id="6808850">}</span><span class="op" id="6808851">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808855">{</span><span class="ident" id="6808856"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808860">:</span>&nbsp;<span class="string" id="6808862">&#34;tcp&#34;</span><span class="op" id="6808867">,</span>&nbsp;<span class="ident" id="6808869"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808875">:</span>&nbsp;<span class="string" id="6808877">&#34;127.0.0.1&#34;</span><span class="op" id="6808888">,</span>&nbsp;<span class="ident" id="6808890"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808894">:</span>&nbsp;<span class="string" id="6808896">&#34;tcp&#34;</span><span class="op" id="6808901">,</span>&nbsp;<span class="ident" id="6808903"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808909">:</span>&nbsp;<span class="string" id="6808911">&#34;[::1]&#34;</span><span class="op" id="6808918">}</span><span class="op" id="6808919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808922">{</span><span class="ident" id="6808923"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808927">:</span>&nbsp;<span class="string" id="6808929">&#34;tcp&#34;</span><span class="op" id="6808934">,</span>&nbsp;<span class="ident" id="6808936"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6808942">:</span>&nbsp;<span class="string" id="6808944">&#34;[::1]&#34;</span><span class="op" id="6808951">,</span>&nbsp;<span class="ident" id="6808953"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6808957">:</span>&nbsp;<span class="string" id="6808959">&#34;tcp&#34;</span><span class="op" id="6808964">,</span>&nbsp;<span class="ident" id="6808966"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6808972">:</span>&nbsp;<span class="string" id="6808974">&#34;127.0.0.1&#34;</span><span class="op" id="6808985">}</span><span class="op" id="6808986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6808989">{</span><span class="ident" id="6808990"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6808994">:</span>&nbsp;<span class="string" id="6808996">&#34;tcp4&#34;</span><span class="op" id="6809002">,</span>&nbsp;<span class="ident" id="6809004"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6809010">:</span>&nbsp;<span class="string" id="6809012">&#34;127.0.0.1&#34;</span><span class="op" id="6809023">,</span>&nbsp;<span class="ident" id="6809025"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6809029">:</span>&nbsp;<span class="string" id="6809031">&#34;tcp6&#34;</span><span class="op" id="6809037">,</span>&nbsp;<span class="ident" id="6809039"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6809045">:</span>&nbsp;<span class="string" id="6809047">&#34;[::1]&#34;</span><span class="op" id="6809054">}</span><span class="op" id="6809055">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809058">{</span><span class="ident" id="6809059"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6809063">:</span>&nbsp;<span class="string" id="6809065">&#34;tcp6&#34;</span><span class="op" id="6809071">,</span>&nbsp;<span class="ident" id="6809073"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6809079">:</span>&nbsp;<span class="string" id="6809081">&#34;[::1]&#34;</span><span class="op" id="6809088">,</span>&nbsp;<span class="ident" id="6809090"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6809094">:</span>&nbsp;<span class="string" id="6809096">&#34;tcp4&#34;</span><span class="op" id="6809102">,</span>&nbsp;<span class="ident" id="6809104"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6809110">:</span>&nbsp;<span class="string" id="6809112">&#34;127.0.0.1&#34;</span><span class="op" id="6809123">}</span><span class="op" id="6809124">,</span><br>
<span class="lineno"></span><span class="op" id="6809126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6809129">//&nbsp;TestDualStackTCPListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen</span><br>
<span class="lineno"></span><span class="comment" id="6809193">//&nbsp;to&nbsp;a&nbsp;test&nbsp;listener&nbsp;with&nbsp;various&nbsp;address&nbsp;families,&nbsp;different</span><br>
<span class="lineno">170</span><span class="comment" id="6809256">//&nbsp;listening&nbsp;address&nbsp;and&nbsp;same&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6809292">func</span>&nbsp;<span class="ident" id="6809297">TestDualStackTCPListener</span><span class="op" id="6809321">(</span><span class="ident" id="6809322">t</span>&nbsp;<span class="op" id="6809324">*</span><span class="ident" id="6809325"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6809332">.</span><span class="ident" id="6809333"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6809334">)</span>&nbsp;<span class="op" id="6809336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809339">if</span>&nbsp;<span class="ident" id="6809342"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6809349">.</span><span class="ident" id="6809350"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6809355">(</span><span class="op" id="6809356">)</span>&nbsp;<span class="op" id="6809358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809362"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6809363">.</span><span class="ident" id="6809364"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6809368">(</span><span class="string" id="6809369">&#34;skipping&nbsp;in&nbsp;-short&nbsp;mode,&nbsp;see&nbsp;issue&nbsp;5001&#34;</span><span class="op" id="6809410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809413">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809416">switch</span>&nbsp;<span class="ident" id="6809423"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6809430">.</span><span class="ident" id="6809431"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6809436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809439">case</span>&nbsp;<span class="string" id="6809444">&#34;plan9&#34;</span><span class="op" id="6809451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809455"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6809456">.</span><span class="ident" id="6809457"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6809462">(</span><span class="string" id="6809463">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6809484">,</span>&nbsp;<span class="ident" id="6809486"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6809493">.</span><span class="ident" id="6809494"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6809498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809504">if</span>&nbsp;<span class="op" id="6809507">!</span><span class="ident" id="6809508"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6809521">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809525"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6809526">.</span><span class="ident" id="6809527"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6809531">(</span><span class="string" id="6809532">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6809555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809562">for</span>&nbsp;<span class="ident" id="6809566">_</span><span class="op" id="6809567">,</span>&nbsp;<span class="ident" id="6809569">tt</span>&nbsp;<span class="op" id="6809572">:=</span>&nbsp;<span class="keyword" id="6809575">range</span>&nbsp;<span class="ident" id="6809581"><a href="/gostd/net/unicast_posix_test.go.html#6804915">dualStackListenerTests</a></span>&nbsp;<span class="op" id="6809604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809608">if</span>&nbsp;<span class="ident" id="6809611"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809613">.</span><span class="ident" id="6809614"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span>&nbsp;<span class="op" id="6809623">&amp;&amp;</span>&nbsp;<span class="op" id="6809626">!</span><span class="op" id="6809627">*</span><span class="ident" id="6809628"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6809641">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809646">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809661">switch</span>&nbsp;<span class="ident" id="6809668"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6809675">.</span><span class="ident" id="6809676"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6809681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809685">case</span>&nbsp;<span class="string" id="6809690">&#34;openbsd&#34;</span><span class="op" id="6809699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6809704">if</span>&nbsp;<span class="ident" id="6809707"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809709">.</span><span class="ident" id="6809710"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span>&nbsp;<span class="op" id="6809719">&amp;&amp;</span>&nbsp;<span class="ident" id="6809722"><a href="/gostd/net/unicast_posix_test.go.html#6812331">differentWildcardAddr</a></span><span class="op" id="6809743">(</span><span class="ident" id="6809744"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809746">.</span><span class="ident" id="6809747"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6809753">,</span>&nbsp;<span class="ident" id="6809755"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809757">.</span><span class="ident" id="6809758"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6809764">)</span>&nbsp;<span class="op" id="6809766">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809772"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809774">.</span><span class="ident" id="6809775"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span>&nbsp;<span class="op" id="6809780">=</span>&nbsp;<span class="builtintype" id="6809782">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6809793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809797">l1</span><span class="op" id="6809799">,</span>&nbsp;<span class="ident" id="6809801">port</span>&nbsp;<span class="op" id="6809806">:=</span>&nbsp;<span class="ident" id="6809809"><a href="/gostd/net/unicast_posix_test.go.html#6811308">usableListenPort</a></span><span class="op" id="6809825">(</span><span class="ident" id="6809826"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6809827">,</span>&nbsp;<span class="ident" id="6809829"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809831">.</span><span class="ident" id="6809832"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6809836">,</span>&nbsp;<span class="ident" id="6809838"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809840">.</span><span class="ident" id="6809841"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6809847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809851">laddr</span>&nbsp;<span class="op" id="6809857">:=</span>&nbsp;<span class="ident" id="6809860"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809862">.</span><span class="ident" id="6809863"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span>&nbsp;<span class="op" id="6809870">+</span>&nbsp;<span class="string" id="6809872">&#34;:&#34;</span>&nbsp;<span class="op" id="6809876">+</span>&nbsp;<span class="ident" id="6809878"><a href="/gostd/net/unicast_posix_test.go.html#6809801">port</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809885"><a href="/gostd/net/unicast_posix_test.go.html#6812578">checkFirstListener</a></span><span class="op" id="6809903">(</span><span class="ident" id="6809904"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6809905">,</span>&nbsp;<span class="ident" id="6809907"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809909">.</span><span class="ident" id="6809910"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6809914">,</span>&nbsp;<span class="ident" id="6809916"><a href="/gostd/net/unicast_posix_test.go.html#6809851">laddr</a></span><span class="op" id="6809921">,</span>&nbsp;<span class="ident" id="6809923"><a href="/gostd/net/unicast_posix_test.go.html#6809797">l1</a></span><span class="op" id="6809925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809929"><a href="/gostd/net/unicast_posix_test.go.html#6809851">laddr</a></span>&nbsp;<span class="op" id="6809935">=</span>&nbsp;<span class="ident" id="6809937"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809939">.</span><span class="ident" id="6809940"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span>&nbsp;<span class="op" id="6809947">+</span>&nbsp;<span class="string" id="6809949">&#34;:&#34;</span>&nbsp;<span class="op" id="6809953">+</span>&nbsp;<span class="ident" id="6809955"><a href="/gostd/net/unicast_posix_test.go.html#6809801">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809962">l2</span><span class="op" id="6809964">,</span>&nbsp;<span class="ident" id="6809966">err</span>&nbsp;<span class="op" id="6809970">:=</span>&nbsp;<span class="ident" id="6809973"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6809979">(</span><span class="ident" id="6809980"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6809982">.</span><span class="ident" id="6809983"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6809987">,</span>&nbsp;<span class="ident" id="6809989"><a href="/gostd/net/unicast_posix_test.go.html#6809851">laddr</a></span><span class="op" id="6809994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6809998"><a href="/gostd/net/unicast_posix_test.go.html#6814130">checkDualStackSecondListener</a></span><span class="op" id="6810026">(</span><span class="ident" id="6810027"><a href="/gostd/net/unicast_posix_test.go.html#6809322">t</a></span><span class="op" id="6810028">,</span>&nbsp;<span class="ident" id="6810030"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6810032">.</span><span class="ident" id="6810033"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6810037">,</span>&nbsp;<span class="ident" id="6810039"><a href="/gostd/net/unicast_posix_test.go.html#6809851">laddr</a></span><span class="op" id="6810044">,</span>&nbsp;<span class="ident" id="6810046"><a href="/gostd/net/unicast_posix_test.go.html#6809569">tt</a></span><span class="op" id="6810048">.</span><span class="ident" id="6810049"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6810053">,</span>&nbsp;<span class="ident" id="6810055"><a href="/gostd/net/unicast_posix_test.go.html#6809966">err</a></span><span class="op" id="6810058">,</span>&nbsp;<span class="ident" id="6810060"><a href="/gostd/net/unicast_posix_test.go.html#6809962">l2</a></span><span class="op" id="6810062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810066"><a href="/gostd/net/unicast_posix_test.go.html#6809797">l1</a></span><span class="op" id="6810068">.</span><span class="ident" id="6810069"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6810074">(</span><span class="op" id="6810075">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810078">}</span><br>
<span class="lineno"></span><span class="op" id="6810080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6810083">//&nbsp;TestDualStackUDPListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen</span><br>
<span class="lineno"></span><span class="comment" id="6810147">//&nbsp;to&nbsp;a&nbsp;test&nbsp;listener&nbsp;with&nbsp;various&nbsp;address&nbsp;families,&nbsp;differnet</span><br>
<span class="lineno">205</span><span class="comment" id="6810210">//&nbsp;listening&nbsp;address&nbsp;and&nbsp;same&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6810246">func</span>&nbsp;<span class="ident" id="6810251">TestDualStackUDPListener</span><span class="op" id="6810275">(</span><span class="ident" id="6810276">t</span>&nbsp;<span class="op" id="6810278">*</span><span class="ident" id="6810279"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6810286">.</span><span class="ident" id="6810287"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6810288">)</span>&nbsp;<span class="op" id="6810290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810293">if</span>&nbsp;<span class="ident" id="6810296"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6810303">.</span><span class="ident" id="6810304"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6810309">(</span><span class="op" id="6810310">)</span>&nbsp;<span class="op" id="6810312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810316"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6810317">.</span><span class="ident" id="6810318"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6810322">(</span><span class="string" id="6810323">&#34;skipping&nbsp;in&nbsp;-short&nbsp;mode,&nbsp;see&nbsp;issue&nbsp;5001&#34;</span><span class="op" id="6810364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810367">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810370">switch</span>&nbsp;<span class="ident" id="6810377"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6810384">.</span><span class="ident" id="6810385"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6810390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810393">case</span>&nbsp;<span class="string" id="6810398">&#34;plan9&#34;</span><span class="op" id="6810405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810409"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6810410">.</span><span class="ident" id="6810411"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6810416">(</span><span class="string" id="6810417">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6810438">,</span>&nbsp;<span class="ident" id="6810440"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6810447">.</span><span class="ident" id="6810448"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6810452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810458">if</span>&nbsp;<span class="op" id="6810461">!</span><span class="ident" id="6810462"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6810475">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810479"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6810480">.</span><span class="ident" id="6810481"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6810485">(</span><span class="string" id="6810486">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6810509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810516">toudpnet</span>&nbsp;<span class="op" id="6810525">:=</span>&nbsp;<span class="keyword" id="6810528">func</span><span class="op" id="6810532">(</span><span class="ident" id="6810533">net</span>&nbsp;<span class="builtintype" id="6810537">string</span><span class="op" id="6810543">)</span>&nbsp;<span class="builtintype" id="6810545">string</span>&nbsp;<span class="op" id="6810552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810556">switch</span>&nbsp;<span class="ident" id="6810563"><a href="/gostd/net/unicast_posix_test.go.html#6810533">net</a></span>&nbsp;<span class="op" id="6810567">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810571">case</span>&nbsp;<span class="string" id="6810576">&#34;tcp&#34;</span><span class="op" id="6810581">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810586">return</span>&nbsp;<span class="string" id="6810593">&#34;udp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810601">case</span>&nbsp;<span class="string" id="6810606">&#34;tcp4&#34;</span><span class="op" id="6810612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810617">return</span>&nbsp;<span class="string" id="6810624">&#34;udp4&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810633">case</span>&nbsp;<span class="string" id="6810638">&#34;tcp6&#34;</span><span class="op" id="6810644">:</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810649">return</span>&nbsp;<span class="string" id="6810656">&#34;udp6&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810669">return</span>&nbsp;<span class="string" id="6810676">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810689">for</span>&nbsp;<span class="ident" id="6810693">_</span><span class="op" id="6810694">,</span>&nbsp;<span class="ident" id="6810696">tt</span>&nbsp;<span class="op" id="6810699">:=</span>&nbsp;<span class="keyword" id="6810702">range</span>&nbsp;<span class="ident" id="6810708"><a href="/gostd/net/unicast_posix_test.go.html#6804915">dualStackListenerTests</a></span>&nbsp;<span class="op" id="6810731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810735">if</span>&nbsp;<span class="ident" id="6810738"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810740">.</span><span class="ident" id="6810741"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span>&nbsp;<span class="op" id="6810750">&amp;&amp;</span>&nbsp;<span class="op" id="6810753">(</span><span class="ident" id="6810754"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6810761">.</span><span class="ident" id="6810762"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6810767">(</span><span class="op" id="6810768">)</span>&nbsp;<span class="op" id="6810770">||</span>&nbsp;<span class="op" id="6810773">!</span><span class="op" id="6810774">*</span><span class="ident" id="6810775"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span><span class="op" id="6810787">)</span>&nbsp;<span class="op" id="6810789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810794">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810809"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810811">.</span><span class="ident" id="6810812"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span>&nbsp;<span class="op" id="6810817">=</span>&nbsp;<span class="ident" id="6810819"><a href="/gostd/net/unicast_posix_test.go.html#6810516">toudpnet</a></span><span class="op" id="6810827">(</span><span class="ident" id="6810828"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810830">.</span><span class="ident" id="6810831"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6810835">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810839"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810841">.</span><span class="ident" id="6810842"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span>&nbsp;<span class="op" id="6810847">=</span>&nbsp;<span class="ident" id="6810849"><a href="/gostd/net/unicast_posix_test.go.html#6810516">toudpnet</a></span><span class="op" id="6810857">(</span><span class="ident" id="6810858"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810860">.</span><span class="ident" id="6810861"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6810865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810869">switch</span>&nbsp;<span class="ident" id="6810876"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6810883">.</span><span class="ident" id="6810884"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6810889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810893">case</span>&nbsp;<span class="string" id="6810898">&#34;openbsd&#34;</span><span class="op" id="6810907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6810912">if</span>&nbsp;<span class="ident" id="6810915"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810917">.</span><span class="ident" id="6810918"><a href="/gostd/net/unicast_posix_test.go.html#6805057">wildcard</a></span>&nbsp;<span class="op" id="6810927">&amp;&amp;</span>&nbsp;<span class="ident" id="6810930"><a href="/gostd/net/unicast_posix_test.go.html#6812331">differentWildcardAddr</a></span><span class="op" id="6810951">(</span><span class="ident" id="6810952"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810954">.</span><span class="ident" id="6810955"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6810961">,</span>&nbsp;<span class="ident" id="6810963"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810965">.</span><span class="ident" id="6810966"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span><span class="op" id="6810972">)</span>&nbsp;<span class="op" id="6810974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6810980"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6810982">.</span><span class="ident" id="6810983"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span>&nbsp;<span class="op" id="6810988">=</span>&nbsp;<span class="builtintype" id="6810990">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6810997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6811001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811005">l1</span><span class="op" id="6811007">,</span>&nbsp;<span class="ident" id="6811009">port</span>&nbsp;<span class="op" id="6811014">:=</span>&nbsp;<span class="ident" id="6811017"><a href="/gostd/net/unicast_posix_test.go.html#6811806">usableListenPacketPort</a></span><span class="op" id="6811039">(</span><span class="ident" id="6811040"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6811041">,</span>&nbsp;<span class="ident" id="6811043"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811045">.</span><span class="ident" id="6811046"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6811050">,</span>&nbsp;<span class="ident" id="6811052"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811054">.</span><span class="ident" id="6811055"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span><span class="op" id="6811061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811065">laddr</span>&nbsp;<span class="op" id="6811071">:=</span>&nbsp;<span class="ident" id="6811074"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811076">.</span><span class="ident" id="6811077"><a href="/gostd/net/unicast_posix_test.go.html#6804987">laddr1</a></span>&nbsp;<span class="op" id="6811084">+</span>&nbsp;<span class="string" id="6811086">&#34;:&#34;</span>&nbsp;<span class="op" id="6811090">+</span>&nbsp;<span class="ident" id="6811092"><a href="/gostd/net/unicast_posix_test.go.html#6811009">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811099"><a href="/gostd/net/unicast_posix_test.go.html#6812578">checkFirstListener</a></span><span class="op" id="6811117">(</span><span class="ident" id="6811118"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6811119">,</span>&nbsp;<span class="ident" id="6811121"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811123">.</span><span class="ident" id="6811124"><a href="/gostd/net/unicast_posix_test.go.html#6804952">net1</a></span><span class="op" id="6811128">,</span>&nbsp;<span class="ident" id="6811130"><a href="/gostd/net/unicast_posix_test.go.html#6811065">laddr</a></span><span class="op" id="6811135">,</span>&nbsp;<span class="ident" id="6811137"><a href="/gostd/net/unicast_posix_test.go.html#6811005">l1</a></span><span class="op" id="6811139">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811143"><a href="/gostd/net/unicast_posix_test.go.html#6811065">laddr</a></span>&nbsp;<span class="op" id="6811149">=</span>&nbsp;<span class="ident" id="6811151"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811153">.</span><span class="ident" id="6811154"><a href="/gostd/net/unicast_posix_test.go.html#6805040">laddr2</a></span>&nbsp;<span class="op" id="6811161">+</span>&nbsp;<span class="string" id="6811163">&#34;:&#34;</span>&nbsp;<span class="op" id="6811167">+</span>&nbsp;<span class="ident" id="6811169"><a href="/gostd/net/unicast_posix_test.go.html#6811009">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811176">l2</span><span class="op" id="6811178">,</span>&nbsp;<span class="ident" id="6811180">err</span>&nbsp;<span class="op" id="6811184">:=</span>&nbsp;<span class="ident" id="6811187"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6811199">(</span><span class="ident" id="6811200"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811202">.</span><span class="ident" id="6811203"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6811207">,</span>&nbsp;<span class="ident" id="6811209"><a href="/gostd/net/unicast_posix_test.go.html#6811065">laddr</a></span><span class="op" id="6811214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811218"><a href="/gostd/net/unicast_posix_test.go.html#6814130">checkDualStackSecondListener</a></span><span class="op" id="6811246">(</span><span class="ident" id="6811247"><a href="/gostd/net/unicast_posix_test.go.html#6810276">t</a></span><span class="op" id="6811248">,</span>&nbsp;<span class="ident" id="6811250"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811252">.</span><span class="ident" id="6811253"><a href="/gostd/net/unicast_posix_test.go.html#6805004">net2</a></span><span class="op" id="6811257">,</span>&nbsp;<span class="ident" id="6811259"><a href="/gostd/net/unicast_posix_test.go.html#6811065">laddr</a></span><span class="op" id="6811264">,</span>&nbsp;<span class="ident" id="6811266"><a href="/gostd/net/unicast_posix_test.go.html#6810696">tt</a></span><span class="op" id="6811268">.</span><span class="ident" id="6811269"><a href="/gostd/net/unicast_posix_test.go.html#6805103">xerr</a></span><span class="op" id="6811273">,</span>&nbsp;<span class="ident" id="6811275"><a href="/gostd/net/unicast_posix_test.go.html#6811180">err</a></span><span class="op" id="6811278">,</span>&nbsp;<span class="ident" id="6811280"><a href="/gostd/net/unicast_posix_test.go.html#6811176">l2</a></span><span class="op" id="6811282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811286"><a href="/gostd/net/unicast_posix_test.go.html#6811005">l1</a></span><span class="op" id="6811288">.</span><span class="ident" id="6811289"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6811294">(</span><span class="op" id="6811295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6811298">}</span><br>
<span class="lineno">250</span><span class="op" id="6811300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6811303">func</span>&nbsp;<span class="ident" id="6811308">usableListenPort</span><span class="op" id="6811324">(</span><span class="ident" id="6811325">t</span>&nbsp;<span class="op" id="6811327">*</span><span class="ident" id="6811328"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6811335">.</span><span class="ident" id="6811336"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6811337">,</span>&nbsp;<span class="ident" id="6811339">net</span><span class="op" id="6811342">,</span>&nbsp;<span class="ident" id="6811344">laddr</span>&nbsp;<span class="builtintype" id="6811350">string</span><span class="op" id="6811356">)</span>&nbsp;<span class="op" id="6811358">(</span><span class="ident" id="6811359">l</span>&nbsp;<span class="ident" id="6811361"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="6811369">,</span>&nbsp;<span class="ident" id="6811371">port</span>&nbsp;<span class="builtintype" id="6811376">string</span><span class="op" id="6811382">)</span>&nbsp;<span class="op" id="6811384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811387">var</span>&nbsp;<span class="ident" id="6811391">nladdr</span>&nbsp;<span class="builtintype" id="6811398">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811406">var</span>&nbsp;<span class="ident" id="6811410">err</span>&nbsp;<span class="builtintype" id="6811414">error</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811421">switch</span>&nbsp;<span class="ident" id="6811428"><a href="/gostd/net/unicast_posix_test.go.html#6811339">net</a></span>&nbsp;<span class="op" id="6811432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811435">default</span><span class="op" id="6811442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6811446">panic</span><span class="op" id="6811451">(</span><span class="string" id="6811452">&#34;usableListenPort&nbsp;net=&#34;</span>&nbsp;<span class="op" id="6811476">+</span>&nbsp;<span class="ident" id="6811478"><a href="/gostd/net/unicast_posix_test.go.html#6811339">net</a></span><span class="op" id="6811481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811484">case</span>&nbsp;<span class="string" id="6811489">&#34;tcp&#34;</span><span class="op" id="6811494">,</span>&nbsp;<span class="string" id="6811496">&#34;tcp4&#34;</span><span class="op" id="6811502">,</span>&nbsp;<span class="string" id="6811504">&#34;tcp6&#34;</span><span class="op" id="6811510">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811514"><a href="/gostd/net/unicast_posix_test.go.html#6811359">l</a></span><span class="op" id="6811515">,</span>&nbsp;<span class="ident" id="6811517"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span>&nbsp;<span class="op" id="6811521">=</span>&nbsp;<span class="ident" id="6811523"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6811529">(</span><span class="ident" id="6811530"><a href="/gostd/net/unicast_posix_test.go.html#6811339">net</a></span><span class="op" id="6811533">,</span>&nbsp;<span class="ident" id="6811535"><a href="/gostd/net/unicast_posix_test.go.html#6811344">laddr</a></span><span class="op" id="6811540">+</span><span class="string" id="6811541">&#34;:0&#34;</span><span class="op" id="6811545">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811549">if</span>&nbsp;<span class="ident" id="6811552"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span>&nbsp;<span class="op" id="6811556">!=</span>&nbsp;<span class="builtintype" id="6811559">nil</span>&nbsp;<span class="op" id="6811563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811568"><a href="/gostd/net/unicast_posix_test.go.html#6811325">t</a></span><span class="op" id="6811569">.</span><span class="ident" id="6811570"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6811576">(</span><span class="string" id="6811577">&#34;Probe&nbsp;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6811610">,</span>&nbsp;<span class="ident" id="6811612"><a href="/gostd/net/unicast_posix_test.go.html#6811339">net</a></span><span class="op" id="6811615">,</span>&nbsp;<span class="ident" id="6811617"><a href="/gostd/net/unicast_posix_test.go.html#6811344">laddr</a></span><span class="op" id="6811622">,</span>&nbsp;<span class="ident" id="6811624"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span><span class="op" id="6811627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6811631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811635"><a href="/gostd/net/unicast_posix_test.go.html#6811391">nladdr</a></span>&nbsp;<span class="op" id="6811642">=</span>&nbsp;<span class="ident" id="6811644"><a href="/gostd/net/unicast_posix_test.go.html#6811359">l</a></span><span class="op" id="6811645">.</span><span class="op" id="6811646">(</span><span class="op" id="6811647">*</span><span class="ident" id="6811648"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6811659">)</span><span class="op" id="6811660">.</span><span class="ident" id="6811661"><a href="/gostd/net/tcpsock_posix.go.html#3382777">Addr</a></span><span class="op" id="6811665">(</span><span class="op" id="6811666">)</span><span class="op" id="6811667">.</span><span class="ident" id="6811668"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6811674">(</span><span class="op" id="6811675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6811678">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811681">_</span><span class="op" id="6811682">,</span>&nbsp;<span class="ident" id="6811684"><a href="/gostd/net/unicast_posix_test.go.html#6811371">port</a></span><span class="op" id="6811688">,</span>&nbsp;<span class="ident" id="6811690"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span>&nbsp;<span class="op" id="6811694">=</span>&nbsp;<span class="ident" id="6811696"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="6811709">(</span><span class="ident" id="6811710"><a href="/gostd/net/unicast_posix_test.go.html#6811391">nladdr</a></span><span class="op" id="6811716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811719">if</span>&nbsp;<span class="ident" id="6811722"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span>&nbsp;<span class="op" id="6811726">!=</span>&nbsp;<span class="builtintype" id="6811729">nil</span>&nbsp;<span class="op" id="6811733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6811737"><a href="/gostd/net/unicast_posix_test.go.html#6811325">t</a></span><span class="op" id="6811738">.</span><span class="ident" id="6811739"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6811745">(</span><span class="string" id="6811746">&#34;SplitHostPort&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6811772">,</span>&nbsp;<span class="ident" id="6811774"><a href="/gostd/net/unicast_posix_test.go.html#6811410">err</a></span><span class="op" id="6811777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6811780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811783">return</span>&nbsp;<span class="ident" id="6811790"><a href="/gostd/net/unicast_posix_test.go.html#6811359">l</a></span><span class="op" id="6811791">,</span>&nbsp;<span class="ident" id="6811793"><a href="/gostd/net/unicast_posix_test.go.html#6811371">port</a></span><br>
<span class="lineno">270</span><span class="op" id="6811798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6811801">func</span>&nbsp;<span class="ident" id="6811806">usableListenPacketPort</span><span class="op" id="6811828">(</span><span class="ident" id="6811829">t</span>&nbsp;<span class="op" id="6811831">*</span><span class="ident" id="6811832"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6811839">.</span><span class="ident" id="6811840"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6811841">,</span>&nbsp;<span class="ident" id="6811843">net</span><span class="op" id="6811846">,</span>&nbsp;<span class="ident" id="6811848">laddr</span>&nbsp;<span class="builtintype" id="6811854">string</span><span class="op" id="6811860">)</span>&nbsp;<span class="op" id="6811862">(</span><span class="ident" id="6811863">l</span>&nbsp;<span class="ident" id="6811865"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><span class="op" id="6811875">,</span>&nbsp;<span class="ident" id="6811877">port</span>&nbsp;<span class="builtintype" id="6811882">string</span><span class="op" id="6811888">)</span>&nbsp;<span class="op" id="6811890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811893">var</span>&nbsp;<span class="ident" id="6811897">nladdr</span>&nbsp;<span class="builtintype" id="6811904">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811912">var</span>&nbsp;<span class="ident" id="6811916">err</span>&nbsp;<span class="builtintype" id="6811920">error</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811927">switch</span>&nbsp;<span class="ident" id="6811934"><a href="/gostd/net/unicast_posix_test.go.html#6811843">net</a></span>&nbsp;<span class="op" id="6811938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811941">default</span><span class="op" id="6811948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6811952">panic</span><span class="op" id="6811957">(</span><span class="string" id="6811958">&#34;usableListenPacketPort&nbsp;net=&#34;</span>&nbsp;<span class="op" id="6811988">+</span>&nbsp;<span class="ident" id="6811990"><a href="/gostd/net/unicast_posix_test.go.html#6811843">net</a></span><span class="op" id="6811993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6811996">case</span>&nbsp;<span class="string" id="6812001">&#34;udp&#34;</span><span class="op" id="6812006">,</span>&nbsp;<span class="string" id="6812008">&#34;udp4&#34;</span><span class="op" id="6812014">,</span>&nbsp;<span class="string" id="6812016">&#34;udp6&#34;</span><span class="op" id="6812022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812026"><a href="/gostd/net/unicast_posix_test.go.html#6811863">l</a></span><span class="op" id="6812027">,</span>&nbsp;<span class="ident" id="6812029"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span>&nbsp;<span class="op" id="6812033">=</span>&nbsp;<span class="ident" id="6812035"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6812047">(</span><span class="ident" id="6812048"><a href="/gostd/net/unicast_posix_test.go.html#6811843">net</a></span><span class="op" id="6812051">,</span>&nbsp;<span class="ident" id="6812053"><a href="/gostd/net/unicast_posix_test.go.html#6811848">laddr</a></span><span class="op" id="6812058">+</span><span class="string" id="6812059">&#34;:0&#34;</span><span class="op" id="6812063">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812067">if</span>&nbsp;<span class="ident" id="6812070"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span>&nbsp;<span class="op" id="6812074">!=</span>&nbsp;<span class="builtintype" id="6812077">nil</span>&nbsp;<span class="op" id="6812081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812086"><a href="/gostd/net/unicast_posix_test.go.html#6811829">t</a></span><span class="op" id="6812087">.</span><span class="ident" id="6812088"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6812094">(</span><span class="string" id="6812095">&#34;Probe&nbsp;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812134">,</span>&nbsp;<span class="ident" id="6812136"><a href="/gostd/net/unicast_posix_test.go.html#6811843">net</a></span><span class="op" id="6812139">,</span>&nbsp;<span class="ident" id="6812141"><a href="/gostd/net/unicast_posix_test.go.html#6811848">laddr</a></span><span class="op" id="6812146">,</span>&nbsp;<span class="ident" id="6812148"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span><span class="op" id="6812151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812159"><a href="/gostd/net/unicast_posix_test.go.html#6811897">nladdr</a></span>&nbsp;<span class="op" id="6812166">=</span>&nbsp;<span class="ident" id="6812168"><a href="/gostd/net/unicast_posix_test.go.html#6811863">l</a></span><span class="op" id="6812169">.</span><span class="op" id="6812170">(</span><span class="op" id="6812171">*</span><span class="ident" id="6812172"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6812179">)</span><span class="op" id="6812180">.</span><span class="ident" id="6812181"><a href="/gostd/net/net.go.html#3336818">LocalAddr</a></span><span class="op" id="6812190">(</span><span class="op" id="6812191">)</span><span class="op" id="6812192">.</span><span class="ident" id="6812193"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6812199">(</span><span class="op" id="6812200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812203">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812206">_</span><span class="op" id="6812207">,</span>&nbsp;<span class="ident" id="6812209"><a href="/gostd/net/unicast_posix_test.go.html#6811877">port</a></span><span class="op" id="6812213">,</span>&nbsp;<span class="ident" id="6812215"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span>&nbsp;<span class="op" id="6812219">=</span>&nbsp;<span class="ident" id="6812221"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="6812234">(</span><span class="ident" id="6812235"><a href="/gostd/net/unicast_posix_test.go.html#6811897">nladdr</a></span><span class="op" id="6812241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812244">if</span>&nbsp;<span class="ident" id="6812247"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span>&nbsp;<span class="op" id="6812251">!=</span>&nbsp;<span class="builtintype" id="6812254">nil</span>&nbsp;<span class="op" id="6812258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812262"><a href="/gostd/net/unicast_posix_test.go.html#6811829">t</a></span><span class="op" id="6812263">.</span><span class="ident" id="6812264"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6812270">(</span><span class="string" id="6812271">&#34;SplitHostPort&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6812297">,</span>&nbsp;<span class="ident" id="6812299"><a href="/gostd/net/unicast_posix_test.go.html#6811916">err</a></span><span class="op" id="6812302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812308">return</span>&nbsp;<span class="ident" id="6812315"><a href="/gostd/net/unicast_posix_test.go.html#6811863">l</a></span><span class="op" id="6812316">,</span>&nbsp;<span class="ident" id="6812318"><a href="/gostd/net/unicast_posix_test.go.html#6811877">port</a></span><br>
<span class="lineno">290</span><span class="op" id="6812323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6812326">func</span>&nbsp;<span class="ident" id="6812331">differentWildcardAddr</span><span class="op" id="6812352">(</span><span class="ident" id="6812353">i</span><span class="op" id="6812354">,</span>&nbsp;<span class="ident" id="6812356">j</span>&nbsp;<span class="builtintype" id="6812358">string</span><span class="op" id="6812364">)</span>&nbsp;<span class="builtintype" id="6812366">bool</span>&nbsp;<span class="op" id="6812371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812374">if</span>&nbsp;<span class="op" id="6812377">(</span><span class="ident" id="6812378"><a href="/gostd/net/unicast_posix_test.go.html#6812353">i</a></span>&nbsp;<span class="op" id="6812380">==</span>&nbsp;<span class="string" id="6812383">&#34;&#34;</span>&nbsp;<span class="op" id="6812386">||</span>&nbsp;<span class="ident" id="6812389"><a href="/gostd/net/unicast_posix_test.go.html#6812353">i</a></span>&nbsp;<span class="op" id="6812391">==</span>&nbsp;<span class="string" id="6812394">&#34;0.0.0.0&#34;</span>&nbsp;<span class="op" id="6812404">||</span>&nbsp;<span class="ident" id="6812407"><a href="/gostd/net/unicast_posix_test.go.html#6812353">i</a></span>&nbsp;<span class="op" id="6812409">==</span>&nbsp;<span class="string" id="6812412">&#34;::ffff:0.0.0.0&#34;</span><span class="op" id="6812428">)</span>&nbsp;<span class="op" id="6812430">&amp;&amp;</span>&nbsp;<span class="op" id="6812433">(</span><span class="ident" id="6812434"><a href="/gostd/net/unicast_posix_test.go.html#6812356">j</a></span>&nbsp;<span class="op" id="6812436">==</span>&nbsp;<span class="string" id="6812439">&#34;&#34;</span>&nbsp;<span class="op" id="6812442">||</span>&nbsp;<span class="ident" id="6812445"><a href="/gostd/net/unicast_posix_test.go.html#6812356">j</a></span>&nbsp;<span class="op" id="6812447">==</span>&nbsp;<span class="string" id="6812450">&#34;0.0.0.0&#34;</span>&nbsp;<span class="op" id="6812460">||</span>&nbsp;<span class="ident" id="6812463"><a href="/gostd/net/unicast_posix_test.go.html#6812356">j</a></span>&nbsp;<span class="op" id="6812465">==</span>&nbsp;<span class="string" id="6812468">&#34;::ffff:0.0.0.0&#34;</span><span class="op" id="6812484">)</span>&nbsp;<span class="op" id="6812486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812490">return</span>&nbsp;<span class="builtintype" id="6812497">false</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812507">if</span>&nbsp;<span class="ident" id="6812510"><a href="/gostd/net/unicast_posix_test.go.html#6812353">i</a></span>&nbsp;<span class="op" id="6812512">==</span>&nbsp;<span class="string" id="6812515">&#34;[::]&#34;</span>&nbsp;<span class="op" id="6812522">&amp;&amp;</span>&nbsp;<span class="ident" id="6812525"><a href="/gostd/net/unicast_posix_test.go.html#6812356">j</a></span>&nbsp;<span class="op" id="6812527">==</span>&nbsp;<span class="string" id="6812530">&#34;[::]&#34;</span>&nbsp;<span class="op" id="6812537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812541">return</span>&nbsp;<span class="builtintype" id="6812548">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812558">return</span>&nbsp;<span class="builtintype" id="6812565">true</span><br>
<span class="lineno">300</span><span class="op" id="6812570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6812573">func</span>&nbsp;<span class="ident" id="6812578">checkFirstListener</span><span class="op" id="6812596">(</span><span class="ident" id="6812597">t</span>&nbsp;<span class="op" id="6812599">*</span><span class="ident" id="6812600"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6812607">.</span><span class="ident" id="6812608"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6812609">,</span>&nbsp;<span class="ident" id="6812611">net</span><span class="op" id="6812614">,</span>&nbsp;<span class="ident" id="6812616">laddr</span>&nbsp;<span class="builtintype" id="6812622">string</span><span class="op" id="6812628">,</span>&nbsp;<span class="ident" id="6812630">l</span>&nbsp;<span class="keyword" id="6812632">interface</span><span class="op" id="6812641">{</span><span class="op" id="6812642">}</span><span class="op" id="6812643">)</span>&nbsp;<span class="op" id="6812645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812648">switch</span>&nbsp;<span class="ident" id="6812655"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span>&nbsp;<span class="op" id="6812659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812662">case</span>&nbsp;<span class="string" id="6812667">&#34;tcp&#34;</span><span class="op" id="6812672">:</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812676">fd</span>&nbsp;<span class="op" id="6812679">:=</span>&nbsp;<span class="ident" id="6812682"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6812683">.</span><span class="op" id="6812684">(</span><span class="op" id="6812685">*</span><span class="ident" id="6812686"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6812697">)</span><span class="op" id="6812698">.</span><span class="ident" id="6812699"><a href="/gostd/net/tcpsock_posix.go.html#3381928">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812704"><a href="/gostd/net/unicast_posix_test.go.html#6814763">checkDualStackAddrFamily</a></span><span class="op" id="6812728">(</span><span class="ident" id="6812729"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6812730">,</span>&nbsp;<span class="ident" id="6812732"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6812735">,</span>&nbsp;<span class="ident" id="6812737"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6812742">,</span>&nbsp;<span class="ident" id="6812744"><a href="/gostd/net/unicast_posix_test.go.html#6812676">fd</a></span><span class="op" id="6812746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812749">case</span>&nbsp;<span class="string" id="6812754">&#34;tcp4&#34;</span><span class="op" id="6812760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812764">fd</span>&nbsp;<span class="op" id="6812767">:=</span>&nbsp;<span class="ident" id="6812770"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6812771">.</span><span class="op" id="6812772">(</span><span class="op" id="6812773">*</span><span class="ident" id="6812774"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6812785">)</span><span class="op" id="6812786">.</span><span class="ident" id="6812787"><a href="/gostd/net/tcpsock_posix.go.html#3381928">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812792">if</span>&nbsp;<span class="ident" id="6812795"><a href="/gostd/net/unicast_posix_test.go.html#6812764">fd</a></span><span class="op" id="6812797">.</span><span class="ident" id="6812798"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6812805">!=</span>&nbsp;<span class="ident" id="6812808"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6812815">.</span><span class="ident" id="6812816"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551244">AF_INET</a></span>&nbsp;<span class="op" id="6812824">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812829"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6812830">.</span><span class="ident" id="6812831"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6812837">(</span><span class="string" id="6812838">&#34;First&nbsp;Listen(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6812899">,</span>&nbsp;<span class="ident" id="6812901"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6812904">,</span>&nbsp;<span class="ident" id="6812906"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6812911">,</span>&nbsp;<span class="ident" id="6812913"><a href="/gostd/net/unicast_posix_test.go.html#6812764">fd</a></span><span class="op" id="6812915">.</span><span class="ident" id="6812916"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6812922">,</span>&nbsp;<span class="ident" id="6812924"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6812931">.</span><span class="ident" id="6812932"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551244">AF_INET</a></span><span class="op" id="6812939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6812943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812946">case</span>&nbsp;<span class="string" id="6812951">&#34;tcp6&#34;</span><span class="op" id="6812957">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6812961">fd</span>&nbsp;<span class="op" id="6812964">:=</span>&nbsp;<span class="ident" id="6812967"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6812968">.</span><span class="op" id="6812969">(</span><span class="op" id="6812970">*</span><span class="ident" id="6812971"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6812982">)</span><span class="op" id="6812983">.</span><span class="ident" id="6812984"><a href="/gostd/net/tcpsock_posix.go.html#3381928">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6812989">if</span>&nbsp;<span class="ident" id="6812992"><a href="/gostd/net/unicast_posix_test.go.html#6812961">fd</a></span><span class="op" id="6812994">.</span><span class="ident" id="6812995"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6813002">!=</span>&nbsp;<span class="ident" id="6813005"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813012">.</span><span class="ident" id="6813013"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span>&nbsp;<span class="op" id="6813022">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813027"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6813028">.</span><span class="ident" id="6813029"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6813035">(</span><span class="string" id="6813036">&#34;First&nbsp;Listen(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6813097">,</span>&nbsp;<span class="ident" id="6813099"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6813102">,</span>&nbsp;<span class="ident" id="6813104"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6813109">,</span>&nbsp;<span class="ident" id="6813111"><a href="/gostd/net/unicast_posix_test.go.html#6812961">fd</a></span><span class="op" id="6813113">.</span><span class="ident" id="6813114"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6813120">,</span>&nbsp;<span class="ident" id="6813122"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813129">.</span><span class="ident" id="6813130"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span><span class="op" id="6813138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6813142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813145">case</span>&nbsp;<span class="string" id="6813150">&#34;udp&#34;</span><span class="op" id="6813155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813159">fd</span>&nbsp;<span class="op" id="6813162">:=</span>&nbsp;<span class="ident" id="6813165"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6813166">.</span><span class="op" id="6813167">(</span><span class="op" id="6813168">*</span><span class="ident" id="6813169"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6813176">)</span><span class="op" id="6813177">.</span><span class="ident" id="6813178"><a href="/gostd/net/net.go.html#3336199">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813183"><a href="/gostd/net/unicast_posix_test.go.html#6814763">checkDualStackAddrFamily</a></span><span class="op" id="6813207">(</span><span class="ident" id="6813208"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6813209">,</span>&nbsp;<span class="ident" id="6813211"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6813214">,</span>&nbsp;<span class="ident" id="6813216"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6813221">,</span>&nbsp;<span class="ident" id="6813223"><a href="/gostd/net/unicast_posix_test.go.html#6813159">fd</a></span><span class="op" id="6813225">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813228">case</span>&nbsp;<span class="string" id="6813233">&#34;udp4&#34;</span><span class="op" id="6813239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813243">fd</span>&nbsp;<span class="op" id="6813246">:=</span>&nbsp;<span class="ident" id="6813249"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6813250">.</span><span class="op" id="6813251">(</span><span class="op" id="6813252">*</span><span class="ident" id="6813253"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6813260">)</span><span class="op" id="6813261">.</span><span class="ident" id="6813262"><a href="/gostd/net/net.go.html#3336199">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813267">if</span>&nbsp;<span class="ident" id="6813270"><a href="/gostd/net/unicast_posix_test.go.html#6813243">fd</a></span><span class="op" id="6813272">.</span><span class="ident" id="6813273"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6813280">!=</span>&nbsp;<span class="ident" id="6813283"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813290">.</span><span class="ident" id="6813291"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551244">AF_INET</a></span>&nbsp;<span class="op" id="6813299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813304"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6813305">.</span><span class="ident" id="6813306"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6813312">(</span><span class="string" id="6813313">&#34;First&nbsp;ListenPacket(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6813380">,</span>&nbsp;<span class="ident" id="6813382"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6813385">,</span>&nbsp;<span class="ident" id="6813387"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6813392">,</span>&nbsp;<span class="ident" id="6813394"><a href="/gostd/net/unicast_posix_test.go.html#6813243">fd</a></span><span class="op" id="6813396">.</span><span class="ident" id="6813397"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6813403">,</span>&nbsp;<span class="ident" id="6813405"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813412">.</span><span class="ident" id="6813413"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551244">AF_INET</a></span><span class="op" id="6813420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6813424">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813427">case</span>&nbsp;<span class="string" id="6813432">&#34;udp6&#34;</span><span class="op" id="6813438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813442">fd</span>&nbsp;<span class="op" id="6813445">:=</span>&nbsp;<span class="ident" id="6813448"><a href="/gostd/net/unicast_posix_test.go.html#6812630">l</a></span><span class="op" id="6813449">.</span><span class="op" id="6813450">(</span><span class="op" id="6813451">*</span><span class="ident" id="6813452"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6813459">)</span><span class="op" id="6813460">.</span><span class="ident" id="6813461"><a href="/gostd/net/net.go.html#3336199">fd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813466">if</span>&nbsp;<span class="ident" id="6813469"><a href="/gostd/net/unicast_posix_test.go.html#6813442">fd</a></span><span class="op" id="6813471">.</span><span class="ident" id="6813472"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6813479">!=</span>&nbsp;<span class="ident" id="6813482"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813489">.</span><span class="ident" id="6813490"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span>&nbsp;<span class="op" id="6813499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813504"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6813505">.</span><span class="ident" id="6813506"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6813512">(</span><span class="string" id="6813513">&#34;First&nbsp;ListenPacket(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6813580">,</span>&nbsp;<span class="ident" id="6813582"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6813585">,</span>&nbsp;<span class="ident" id="6813587"><a href="/gostd/net/unicast_posix_test.go.html#6812616">laddr</a></span><span class="op" id="6813592">,</span>&nbsp;<span class="ident" id="6813594"><a href="/gostd/net/unicast_posix_test.go.html#6813442">fd</a></span><span class="op" id="6813596">.</span><span class="ident" id="6813597"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6813603">,</span>&nbsp;<span class="ident" id="6813605"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6813612">.</span><span class="ident" id="6813613"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span><span class="op" id="6813621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6813625">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813628">default</span><span class="op" id="6813635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813639"><a href="/gostd/net/unicast_posix_test.go.html#6812597">t</a></span><span class="op" id="6813640">.</span><span class="ident" id="6813641"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6813647">(</span><span class="string" id="6813648">&#34;Unexpected&nbsp;network:&nbsp;%q&#34;</span><span class="op" id="6813672">,</span>&nbsp;<span class="ident" id="6813674"><a href="/gostd/net/unicast_posix_test.go.html#6812611">net</a></span><span class="op" id="6813677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6813680">}</span><br>
<span class="lineno"></span><span class="op" id="6813682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6813685">func</span>&nbsp;<span class="ident" id="6813690">checkSecondListener</span><span class="op" id="6813709">(</span><span class="ident" id="6813710">t</span>&nbsp;<span class="op" id="6813712">*</span><span class="ident" id="6813713"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6813720">.</span><span class="ident" id="6813721"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6813722">,</span>&nbsp;<span class="ident" id="6813724">net</span><span class="op" id="6813727">,</span>&nbsp;<span class="ident" id="6813729">laddr</span>&nbsp;<span class="builtintype" id="6813735">string</span><span class="op" id="6813741">,</span>&nbsp;<span class="ident" id="6813743">err</span>&nbsp;<span class="builtintype" id="6813747">error</span><span class="op" id="6813752">,</span>&nbsp;<span class="ident" id="6813754">l</span>&nbsp;<span class="keyword" id="6813756">interface</span><span class="op" id="6813765">{</span><span class="op" id="6813766">}</span><span class="op" id="6813767">)</span>&nbsp;<span class="op" id="6813769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813772">switch</span>&nbsp;<span class="ident" id="6813779"><a href="/gostd/net/unicast_posix_test.go.html#6813724">net</a></span>&nbsp;<span class="op" id="6813783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813786">case</span>&nbsp;<span class="string" id="6813791">&#34;tcp&#34;</span><span class="op" id="6813796">,</span>&nbsp;<span class="string" id="6813798">&#34;tcp4&#34;</span><span class="op" id="6813804">,</span>&nbsp;<span class="string" id="6813806">&#34;tcp6&#34;</span><span class="op" id="6813812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813816">if</span>&nbsp;<span class="ident" id="6813819"><a href="/gostd/net/unicast_posix_test.go.html#6813743">err</a></span>&nbsp;<span class="op" id="6813823">==</span>&nbsp;<span class="builtintype" id="6813826">nil</span>&nbsp;<span class="op" id="6813830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813835"><a href="/gostd/net/unicast_posix_test.go.html#6813754">l</a></span><span class="op" id="6813836">.</span><span class="op" id="6813837">(</span><span class="op" id="6813838">*</span><span class="ident" id="6813839"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6813850">)</span><span class="op" id="6813851">.</span><span class="ident" id="6813852"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6813857">(</span><span class="op" id="6813858">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813863"><a href="/gostd/net/unicast_posix_test.go.html#6813710">t</a></span><span class="op" id="6813864">.</span><span class="ident" id="6813865"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6813871">(</span><span class="string" id="6813872">&#34;Second&nbsp;Listen(%q,&nbsp;%q)&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6813907">,</span>&nbsp;<span class="ident" id="6813909"><a href="/gostd/net/unicast_posix_test.go.html#6813724">net</a></span><span class="op" id="6813912">,</span>&nbsp;<span class="ident" id="6813914"><a href="/gostd/net/unicast_posix_test.go.html#6813729">laddr</a></span><span class="op" id="6813919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6813923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813926">case</span>&nbsp;<span class="string" id="6813931">&#34;udp&#34;</span><span class="op" id="6813936">,</span>&nbsp;<span class="string" id="6813938">&#34;udp4&#34;</span><span class="op" id="6813944">,</span>&nbsp;<span class="string" id="6813946">&#34;udp6&#34;</span><span class="op" id="6813952">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6813956">if</span>&nbsp;<span class="ident" id="6813959"><a href="/gostd/net/unicast_posix_test.go.html#6813743">err</a></span>&nbsp;<span class="op" id="6813963">==</span>&nbsp;<span class="builtintype" id="6813966">nil</span>&nbsp;<span class="op" id="6813970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813975"><a href="/gostd/net/unicast_posix_test.go.html#6813754">l</a></span><span class="op" id="6813976">.</span><span class="op" id="6813977">(</span><span class="op" id="6813978">*</span><span class="ident" id="6813979"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6813986">)</span><span class="op" id="6813987">.</span><span class="ident" id="6813988"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6813993">(</span><span class="op" id="6813994">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6813999"><a href="/gostd/net/unicast_posix_test.go.html#6813710">t</a></span><span class="op" id="6814000">.</span><span class="ident" id="6814001"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6814007">(</span><span class="string" id="6814008">&#34;Second&nbsp;ListenPacket(%q,&nbsp;%q)&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6814049">,</span>&nbsp;<span class="ident" id="6814051"><a href="/gostd/net/unicast_posix_test.go.html#6813724">net</a></span><span class="op" id="6814054">,</span>&nbsp;<span class="ident" id="6814056"><a href="/gostd/net/unicast_posix_test.go.html#6813729">laddr</a></span><span class="op" id="6814061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814068">default</span><span class="op" id="6814075">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814079"><a href="/gostd/net/unicast_posix_test.go.html#6813710">t</a></span><span class="op" id="6814080">.</span><span class="ident" id="6814081"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6814087">(</span><span class="string" id="6814088">&#34;Unexpected&nbsp;network:&nbsp;%q&#34;</span><span class="op" id="6814112">,</span>&nbsp;<span class="ident" id="6814114"><a href="/gostd/net/unicast_posix_test.go.html#6813724">net</a></span><span class="op" id="6814117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814120">}</span><br>
<span class="lineno">350</span><span class="op" id="6814122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6814125">func</span>&nbsp;<span class="ident" id="6814130">checkDualStackSecondListener</span><span class="op" id="6814158">(</span><span class="ident" id="6814159">t</span>&nbsp;<span class="op" id="6814161">*</span><span class="ident" id="6814162"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6814169">.</span><span class="ident" id="6814170"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6814171">,</span>&nbsp;<span class="ident" id="6814173">net</span><span class="op" id="6814176">,</span>&nbsp;<span class="ident" id="6814178">laddr</span>&nbsp;<span class="builtintype" id="6814184">string</span><span class="op" id="6814190">,</span>&nbsp;<span class="ident" id="6814192">xerr</span><span class="op" id="6814196">,</span>&nbsp;<span class="ident" id="6814198">err</span>&nbsp;<span class="builtintype" id="6814202">error</span><span class="op" id="6814207">,</span>&nbsp;<span class="ident" id="6814209">l</span>&nbsp;<span class="keyword" id="6814211">interface</span><span class="op" id="6814220">{</span><span class="op" id="6814221">}</span><span class="op" id="6814222">)</span>&nbsp;<span class="op" id="6814224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814227">switch</span>&nbsp;<span class="ident" id="6814234"><a href="/gostd/net/unicast_posix_test.go.html#6814173">net</a></span>&nbsp;<span class="op" id="6814238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814241">case</span>&nbsp;<span class="string" id="6814246">&#34;tcp&#34;</span><span class="op" id="6814251">,</span>&nbsp;<span class="string" id="6814253">&#34;tcp4&#34;</span><span class="op" id="6814259">,</span>&nbsp;<span class="string" id="6814261">&#34;tcp6&#34;</span><span class="op" id="6814267">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814271">if</span>&nbsp;<span class="ident" id="6814274"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span>&nbsp;<span class="op" id="6814279">==</span>&nbsp;<span class="builtintype" id="6814282">nil</span>&nbsp;<span class="op" id="6814286">&amp;&amp;</span>&nbsp;<span class="ident" id="6814289"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814293">!=</span>&nbsp;<span class="builtintype" id="6814296">nil</span>&nbsp;<span class="op" id="6814300">||</span>&nbsp;<span class="ident" id="6814303"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span>&nbsp;<span class="op" id="6814308">!=</span>&nbsp;<span class="builtintype" id="6814311">nil</span>&nbsp;<span class="op" id="6814315">&amp;&amp;</span>&nbsp;<span class="ident" id="6814318"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814322">==</span>&nbsp;<span class="builtintype" id="6814325">nil</span>&nbsp;<span class="op" id="6814329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814334"><a href="/gostd/net/unicast_posix_test.go.html#6814159">t</a></span><span class="op" id="6814335">.</span><span class="ident" id="6814336"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6814342">(</span><span class="string" id="6814343">&#34;Second&nbsp;Listen(%q,&nbsp;%q)&nbsp;returns&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6814390">,</span>&nbsp;<span class="ident" id="6814392"><a href="/gostd/net/unicast_posix_test.go.html#6814173">net</a></span><span class="op" id="6814395">,</span>&nbsp;<span class="ident" id="6814397"><a href="/gostd/net/unicast_posix_test.go.html#6814178">laddr</a></span><span class="op" id="6814402">,</span>&nbsp;<span class="ident" id="6814404"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span><span class="op" id="6814407">,</span>&nbsp;<span class="ident" id="6814409"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span><span class="op" id="6814413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814421">if</span>&nbsp;<span class="ident" id="6814424"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814428">==</span>&nbsp;<span class="builtintype" id="6814431">nil</span>&nbsp;<span class="op" id="6814435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814440"><a href="/gostd/net/unicast_posix_test.go.html#6814209">l</a></span><span class="op" id="6814441">.</span><span class="op" id="6814442">(</span><span class="op" id="6814443">*</span><span class="ident" id="6814444"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6814455">)</span><span class="op" id="6814456">.</span><span class="ident" id="6814457"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6814462">(</span><span class="op" id="6814463">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814470">case</span>&nbsp;<span class="string" id="6814475">&#34;udp&#34;</span><span class="op" id="6814480">,</span>&nbsp;<span class="string" id="6814482">&#34;udp4&#34;</span><span class="op" id="6814488">,</span>&nbsp;<span class="string" id="6814490">&#34;udp6&#34;</span><span class="op" id="6814496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814500">if</span>&nbsp;<span class="ident" id="6814503"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span>&nbsp;<span class="op" id="6814508">==</span>&nbsp;<span class="builtintype" id="6814511">nil</span>&nbsp;<span class="op" id="6814515">&amp;&amp;</span>&nbsp;<span class="ident" id="6814518"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814522">!=</span>&nbsp;<span class="builtintype" id="6814525">nil</span>&nbsp;<span class="op" id="6814529">||</span>&nbsp;<span class="ident" id="6814532"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span>&nbsp;<span class="op" id="6814537">!=</span>&nbsp;<span class="builtintype" id="6814540">nil</span>&nbsp;<span class="op" id="6814544">&amp;&amp;</span>&nbsp;<span class="ident" id="6814547"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814551">==</span>&nbsp;<span class="builtintype" id="6814554">nil</span>&nbsp;<span class="op" id="6814558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814563"><a href="/gostd/net/unicast_posix_test.go.html#6814159">t</a></span><span class="op" id="6814564">.</span><span class="ident" id="6814565"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6814571">(</span><span class="string" id="6814572">&#34;Second&nbsp;ListenPacket(%q,&nbsp;%q)&nbsp;returns&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6814625">,</span>&nbsp;<span class="ident" id="6814627"><a href="/gostd/net/unicast_posix_test.go.html#6814173">net</a></span><span class="op" id="6814630">,</span>&nbsp;<span class="ident" id="6814632"><a href="/gostd/net/unicast_posix_test.go.html#6814178">laddr</a></span><span class="op" id="6814637">,</span>&nbsp;<span class="ident" id="6814639"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span><span class="op" id="6814642">,</span>&nbsp;<span class="ident" id="6814644"><a href="/gostd/net/unicast_posix_test.go.html#6814192">xerr</a></span><span class="op" id="6814648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814652">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814656">if</span>&nbsp;<span class="ident" id="6814659"><a href="/gostd/net/unicast_posix_test.go.html#6814198">err</a></span>&nbsp;<span class="op" id="6814663">==</span>&nbsp;<span class="builtintype" id="6814666">nil</span>&nbsp;<span class="op" id="6814670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814675"><a href="/gostd/net/unicast_posix_test.go.html#6814209">l</a></span><span class="op" id="6814676">.</span><span class="op" id="6814677">(</span><span class="op" id="6814678">*</span><span class="ident" id="6814679"><a href="/gostd/net/udpsock_posix.go.html#3388176">UDPConn</a></span><span class="op" id="6814686">)</span><span class="op" id="6814687">.</span><span class="ident" id="6814688"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6814693">(</span><span class="op" id="6814694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814701">default</span><span class="op" id="6814708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6814712"><a href="/gostd/net/unicast_posix_test.go.html#6814159">t</a></span><span class="op" id="6814713">.</span><span class="ident" id="6814714"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6814720">(</span><span class="string" id="6814721">&#34;Unexpected&nbsp;network:&nbsp;%q&#34;</span><span class="op" id="6814745">,</span>&nbsp;<span class="ident" id="6814747"><a href="/gostd/net/unicast_posix_test.go.html#6814173">net</a></span><span class="op" id="6814750">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6814753">}</span><br>
<span class="lineno"></span><span class="op" id="6814755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6814758">func</span>&nbsp;<span class="ident" id="6814763">checkDualStackAddrFamily</span><span class="op" id="6814787">(</span><span class="ident" id="6814788">t</span>&nbsp;<span class="op" id="6814790">*</span><span class="ident" id="6814791"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6814798">.</span><span class="ident" id="6814799"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6814800">,</span>&nbsp;<span class="ident" id="6814802">net</span><span class="op" id="6814805">,</span>&nbsp;<span class="ident" id="6814807">laddr</span>&nbsp;<span class="builtintype" id="6814813">string</span><span class="op" id="6814819">,</span>&nbsp;<span class="ident" id="6814821">fd</span>&nbsp;<span class="op" id="6814824">*</span><span class="ident" id="6814825"><a href="/gostd/net/fd_unix.go.html#3257361">netFD</a></span><span class="op" id="6814830">)</span>&nbsp;<span class="op" id="6814832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814835">switch</span>&nbsp;<span class="ident" id="6814842">a</span>&nbsp;<span class="op" id="6814844">:=</span>&nbsp;<span class="ident" id="6814847"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6814849">.</span><span class="ident" id="6814850"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="6814855">.</span><span class="op" id="6814856">(</span><span class="keyword" id="6814857">type</span><span class="op" id="6814861">)</span>&nbsp;<span class="op" id="6814863">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6814866">case</span>&nbsp;<span class="op" id="6814871">*</span><span class="ident" id="6814872"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="6814879">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6814883">//&nbsp;If&nbsp;a&nbsp;node&nbsp;under&nbsp;test&nbsp;supports&nbsp;both&nbsp;IPv6&nbsp;capability</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6814939">//&nbsp;and&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;capability,&nbsp;we&nbsp;can&nbsp;assume</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6814992">//&nbsp;that&nbsp;the&nbsp;node&nbsp;listens&nbsp;on&nbsp;a&nbsp;wildcard&nbsp;address&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6815049">//&nbsp;AF_INET6&nbsp;socket.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815071">if</span>&nbsp;<span class="ident" id="6815074"><a href="/gostd/net/ipsock.go.html#3309911">supportsIPv4map</a></span>&nbsp;<span class="op" id="6815090">&amp;&amp;</span>&nbsp;<span class="ident" id="6815093"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815095">.</span><span class="ident" id="6815096"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="6815101">.</span><span class="op" id="6815102">(</span><span class="op" id="6815103">*</span><span class="ident" id="6815104"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="6815111">)</span><span class="op" id="6815112">.</span><span class="ident" id="6815113"><a href="/gostd/net/tcpsock_posix.go.html#3375754">isWildcard</a></span><span class="op" id="6815123">(</span><span class="op" id="6815124">)</span>&nbsp;<span class="op" id="6815126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815131">if</span>&nbsp;<span class="ident" id="6815134"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815136">.</span><span class="ident" id="6815137"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6815144">!=</span>&nbsp;<span class="ident" id="6815147"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6815154">.</span><span class="ident" id="6815155"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span>&nbsp;<span class="op" id="6815164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6815170"><a href="/gostd/net/unicast_posix_test.go.html#6814788">t</a></span><span class="op" id="6815171">.</span><span class="ident" id="6815172"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6815178">(</span><span class="string" id="6815179">&#34;Listen(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6815234">,</span>&nbsp;<span class="ident" id="6815236"><a href="/gostd/net/unicast_posix_test.go.html#6814802">net</a></span><span class="op" id="6815239">,</span>&nbsp;<span class="ident" id="6815241"><a href="/gostd/net/unicast_posix_test.go.html#6814807">laddr</a></span><span class="op" id="6815246">,</span>&nbsp;<span class="ident" id="6815248"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815250">.</span><span class="ident" id="6815251"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6815257">,</span>&nbsp;<span class="ident" id="6815259"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6815266">.</span><span class="ident" id="6815267"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span><span class="op" id="6815275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815284">}</span>&nbsp;<span class="keyword" id="6815286">else</span>&nbsp;<span class="op" id="6815291">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815296">if</span>&nbsp;<span class="ident" id="6815299"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815301">.</span><span class="ident" id="6815302"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6815309">!=</span>&nbsp;<span class="ident" id="6815312"><a href="/gostd/net/unicast_posix_test.go.html#6814842">a</a></span><span class="op" id="6815313">.</span><span class="ident" id="6815314"><a href="/gostd/net/tcpsock_posix.go.html#3375574">family</a></span><span class="op" id="6815320">(</span><span class="op" id="6815321">)</span>&nbsp;<span class="op" id="6815323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6815329"><a href="/gostd/net/unicast_posix_test.go.html#6814788">t</a></span><span class="op" id="6815330">.</span><span class="ident" id="6815331"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6815337">(</span><span class="string" id="6815338">&#34;Listen(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6815393">,</span>&nbsp;<span class="ident" id="6815395"><a href="/gostd/net/unicast_posix_test.go.html#6814802">net</a></span><span class="op" id="6815398">,</span>&nbsp;<span class="ident" id="6815400"><a href="/gostd/net/unicast_posix_test.go.html#6814807">laddr</a></span><span class="op" id="6815405">,</span>&nbsp;<span class="ident" id="6815407"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815409">.</span><span class="ident" id="6815410"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6815416">,</span>&nbsp;<span class="ident" id="6815418"><a href="/gostd/net/unicast_posix_test.go.html#6814842">a</a></span><span class="op" id="6815419">.</span><span class="ident" id="6815420"><a href="/gostd/net/tcpsock_posix.go.html#3375574">family</a></span><span class="op" id="6815426">(</span><span class="op" id="6815427">)</span><span class="op" id="6815428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815440">case</span>&nbsp;<span class="op" id="6815445">*</span><span class="ident" id="6815446"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="6815453">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6815457">//&nbsp;If&nbsp;a&nbsp;node&nbsp;under&nbsp;test&nbsp;supports&nbsp;both&nbsp;IPv6&nbsp;capability</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6815513">//&nbsp;and&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;capability,&nbsp;we&nbsp;can&nbsp;assume</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6815566">//&nbsp;that&nbsp;the&nbsp;node&nbsp;listens&nbsp;on&nbsp;a&nbsp;wildcard&nbsp;address&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6815623">//&nbsp;AF_INET6&nbsp;socket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815645">if</span>&nbsp;<span class="ident" id="6815648"><a href="/gostd/net/ipsock.go.html#3309911">supportsIPv4map</a></span>&nbsp;<span class="op" id="6815664">&amp;&amp;</span>&nbsp;<span class="ident" id="6815667"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815669">.</span><span class="ident" id="6815670"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="6815675">.</span><span class="op" id="6815676">(</span><span class="op" id="6815677">*</span><span class="ident" id="6815678"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="6815685">)</span><span class="op" id="6815686">.</span><span class="ident" id="6815687"><a href="/gostd/net/udpsock_posix.go.html#3387812">isWildcard</a></span><span class="op" id="6815697">(</span><span class="op" id="6815698">)</span>&nbsp;<span class="op" id="6815700">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815705">if</span>&nbsp;<span class="ident" id="6815708"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815710">.</span><span class="ident" id="6815711"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6815718">!=</span>&nbsp;<span class="ident" id="6815721"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6815728">.</span><span class="ident" id="6815729"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span>&nbsp;<span class="op" id="6815738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6815744"><a href="/gostd/net/unicast_posix_test.go.html#6814788">t</a></span><span class="op" id="6815745">.</span><span class="ident" id="6815746"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6815752">(</span><span class="string" id="6815753">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6815814">,</span>&nbsp;<span class="ident" id="6815816"><a href="/gostd/net/unicast_posix_test.go.html#6814802">net</a></span><span class="op" id="6815819">,</span>&nbsp;<span class="ident" id="6815821"><a href="/gostd/net/unicast_posix_test.go.html#6814807">laddr</a></span><span class="op" id="6815826">,</span>&nbsp;<span class="ident" id="6815828"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815830">.</span><span class="ident" id="6815831"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6815837">,</span>&nbsp;<span class="ident" id="6815839"><a href="/gostd/net/unicast_posix_test.go.html#6802454">syscall</a></span><span class="op" id="6815846">.</span><span class="ident" id="6815847"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span><span class="op" id="6815855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6815864">}</span>&nbsp;<span class="keyword" id="6815866">else</span>&nbsp;<span class="op" id="6815871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6815876">if</span>&nbsp;<span class="ident" id="6815879"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815881">.</span><span class="ident" id="6815882"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span>&nbsp;<span class="op" id="6815889">!=</span>&nbsp;<span class="ident" id="6815892"><a href="/gostd/net/unicast_posix_test.go.html#6814842">a</a></span><span class="op" id="6815893">.</span><span class="ident" id="6815894"><a href="/gostd/net/udpsock_posix.go.html#3387632">family</a></span><span class="op" id="6815900">(</span><span class="op" id="6815901">)</span>&nbsp;<span class="op" id="6815903">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6815909"><a href="/gostd/net/unicast_posix_test.go.html#6814788">t</a></span><span class="op" id="6815910">.</span><span class="ident" id="6815911"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6815917">(</span><span class="string" id="6815918">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;returns&nbsp;address&nbsp;family&nbsp;%v,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6815979">,</span>&nbsp;<span class="ident" id="6815981"><a href="/gostd/net/unicast_posix_test.go.html#6814802">net</a></span><span class="op" id="6815984">,</span>&nbsp;<span class="ident" id="6815986"><a href="/gostd/net/unicast_posix_test.go.html#6814807">laddr</a></span><span class="op" id="6815991">,</span>&nbsp;<span class="ident" id="6815993"><a href="/gostd/net/unicast_posix_test.go.html#6814821">fd</a></span><span class="op" id="6815995">.</span><span class="ident" id="6815996"><a href="/gostd/net/fd_unix.go.html#3257510">family</a></span><span class="op" id="6816002">,</span>&nbsp;<span class="ident" id="6816004"><a href="/gostd/net/unicast_posix_test.go.html#6814842">a</a></span><span class="op" id="6816005">.</span><span class="ident" id="6816006"><a href="/gostd/net/udpsock_posix.go.html#3387632">family</a></span><span class="op" id="6816012">(</span><span class="op" id="6816013">)</span><span class="op" id="6816014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816026">default</span><span class="op" id="6816033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816037"><a href="/gostd/net/unicast_posix_test.go.html#6814788">t</a></span><span class="op" id="6816038">.</span><span class="ident" id="6816039"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6816045">(</span><span class="string" id="6816046">&#34;Unexpected&nbsp;protocol&nbsp;address&nbsp;type:&nbsp;%T&#34;</span><span class="op" id="6816084">,</span>&nbsp;<span class="ident" id="6816086"><a href="/gostd/net/unicast_posix_test.go.html#6814842">a</a></span><span class="op" id="6816087">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816090">}</span><br>
<span class="lineno"></span><span class="op" id="6816092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6816095">var</span>&nbsp;<span class="ident" id="6816099">prohibitionaryDialArgTests</span>&nbsp;<span class="op" id="6816126">=</span>&nbsp;<span class="op" id="6816128">[</span><span class="op" id="6816129">]</span><span class="keyword" id="6816130">struct</span>&nbsp;<span class="op" id="6816137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816140">net</span>&nbsp;&nbsp;<span class="builtintype" id="6816145">string</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816153">addr</span>&nbsp;<span class="builtintype" id="6816158">string</span><br>
<span class="lineno"></span><span class="op" id="6816165">}</span><span class="op" id="6816166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816169">{</span><span class="string" id="6816170">&#34;tcp6&#34;</span><span class="op" id="6816176">,</span>&nbsp;<span class="string" id="6816178">&#34;127.0.0.1&#34;</span><span class="op" id="6816189">}</span><span class="op" id="6816190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816193">{</span><span class="string" id="6816194">&#34;tcp6&#34;</span><span class="op" id="6816200">,</span>&nbsp;<span class="string" id="6816202">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="6816222">}</span><span class="op" id="6816223">,</span><br>
<span class="lineno"></span><span class="op" id="6816225">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="6816228">func</span>&nbsp;<span class="ident" id="6816233">TestProhibitionaryDialArgs</span><span class="op" id="6816259">(</span><span class="ident" id="6816260">t</span>&nbsp;<span class="op" id="6816262">*</span><span class="ident" id="6816263"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6816270">.</span><span class="ident" id="6816271"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6816272">)</span>&nbsp;<span class="op" id="6816274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816277">switch</span>&nbsp;<span class="ident" id="6816284"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6816291">.</span><span class="ident" id="6816292"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6816297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816300">case</span>&nbsp;<span class="string" id="6816305">&#34;plan9&#34;</span><span class="op" id="6816312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816316"><a href="/gostd/net/unicast_posix_test.go.html#6816260">t</a></span><span class="op" id="6816317">.</span><span class="ident" id="6816318"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6816323">(</span><span class="string" id="6816324">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6816345">,</span>&nbsp;<span class="ident" id="6816347"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6816354">.</span><span class="ident" id="6816355"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6816359">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6816365">//&nbsp;This&nbsp;test&nbsp;requires&nbsp;both&nbsp;IPv6&nbsp;and&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816435">if</span>&nbsp;<span class="op" id="6816438">!</span><span class="ident" id="6816439"><a href="/gostd/net/ipsock.go.html#3309911">supportsIPv4map</a></span>&nbsp;<span class="op" id="6816455">||</span>&nbsp;<span class="ident" id="6816458"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6816465">.</span><span class="ident" id="6816466"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6816471">(</span><span class="op" id="6816472">)</span>&nbsp;<span class="op" id="6816474">||</span>&nbsp;<span class="op" id="6816477">!</span><span class="op" id="6816478">*</span><span class="ident" id="6816479"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6816492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816496">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816504">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816508">l</span><span class="op" id="6816509">,</span>&nbsp;<span class="ident" id="6816511">port</span>&nbsp;<span class="op" id="6816516">:=</span>&nbsp;<span class="ident" id="6816519"><a href="/gostd/net/unicast_posix_test.go.html#6811308">usableListenPort</a></span><span class="op" id="6816535">(</span><span class="ident" id="6816536"><a href="/gostd/net/unicast_posix_test.go.html#6816260">t</a></span><span class="op" id="6816537">,</span>&nbsp;<span class="string" id="6816539">&#34;tcp&#34;</span><span class="op" id="6816544">,</span>&nbsp;<span class="string" id="6816546">&#34;[::]&#34;</span><span class="op" id="6816552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816555">defer</span>&nbsp;<span class="ident" id="6816561"><a href="/gostd/net/unicast_posix_test.go.html#6816508">l</a></span><span class="op" id="6816562">.</span><span class="ident" id="6816563"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6816568">(</span><span class="op" id="6816569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816573">for</span>&nbsp;<span class="ident" id="6816577">_</span><span class="op" id="6816578">,</span>&nbsp;<span class="ident" id="6816580">tt</span>&nbsp;<span class="op" id="6816583">:=</span>&nbsp;<span class="keyword" id="6816586">range</span>&nbsp;<span class="ident" id="6816592"><a href="/gostd/net/unicast_posix_test.go.html#6816099">prohibitionaryDialArgTests</a></span>&nbsp;<span class="op" id="6816619">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816623">c</span><span class="op" id="6816624">,</span>&nbsp;<span class="ident" id="6816626">err</span>&nbsp;<span class="op" id="6816630">:=</span>&nbsp;<span class="ident" id="6816633"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6816637">(</span><span class="ident" id="6816638"><a href="/gostd/net/unicast_posix_test.go.html#6816580">tt</a></span><span class="op" id="6816640">.</span><span class="ident" id="6816641"><a href="/gostd/net/unicast_posix_test.go.html#6816140">net</a></span><span class="op" id="6816644">,</span>&nbsp;<span class="ident" id="6816646"><a href="/gostd/net/unicast_posix_test.go.html#6816580">tt</a></span><span class="op" id="6816648">.</span><span class="ident" id="6816649"><a href="/gostd/net/unicast_posix_test.go.html#6816153">addr</a></span><span class="op" id="6816653">+</span><span class="string" id="6816654">&#34;:&#34;</span><span class="op" id="6816657">+</span><span class="ident" id="6816658"><a href="/gostd/net/unicast_posix_test.go.html#6816511">port</a></span><span class="op" id="6816662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816666">if</span>&nbsp;<span class="ident" id="6816669"><a href="/gostd/net/unicast_posix_test.go.html#6816626">err</a></span>&nbsp;<span class="op" id="6816673">==</span>&nbsp;<span class="builtintype" id="6816676">nil</span>&nbsp;<span class="op" id="6816680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816685"><a href="/gostd/net/unicast_posix_test.go.html#6816623">c</a></span><span class="op" id="6816686">.</span><span class="ident" id="6816687"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6816692">(</span><span class="op" id="6816693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816698"><a href="/gostd/net/unicast_posix_test.go.html#6816260">t</a></span><span class="op" id="6816699">.</span><span class="ident" id="6816700"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6816706">(</span><span class="string" id="6816707">&#34;Dial(%q,&nbsp;%q)&nbsp;should&nbsp;fail&#34;</span><span class="op" id="6816733">,</span>&nbsp;<span class="ident" id="6816735"><a href="/gostd/net/unicast_posix_test.go.html#6816580">tt</a></span><span class="op" id="6816737">.</span><span class="ident" id="6816738"><a href="/gostd/net/unicast_posix_test.go.html#6816140">net</a></span><span class="op" id="6816741">,</span>&nbsp;<span class="ident" id="6816743"><a href="/gostd/net/unicast_posix_test.go.html#6816580">tt</a></span><span class="op" id="6816745">.</span><span class="ident" id="6816746"><a href="/gostd/net/unicast_posix_test.go.html#6816153">addr</a></span><span class="op" id="6816750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816754">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816757">}</span><br>
<span class="lineno"></span><span class="op" id="6816759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6816762">func</span>&nbsp;<span class="ident" id="6816767">TestWildWildcardListener</span><span class="op" id="6816791">(</span><span class="ident" id="6816792">t</span>&nbsp;<span class="op" id="6816794">*</span><span class="ident" id="6816795"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6816802">.</span><span class="ident" id="6816803"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6816804">)</span>&nbsp;<span class="op" id="6816806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816809">switch</span>&nbsp;<span class="ident" id="6816816"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6816823">.</span><span class="ident" id="6816824"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6816829">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816832">case</span>&nbsp;<span class="string" id="6816837">&#34;plan9&#34;</span><span class="op" id="6816844">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816848"><a href="/gostd/net/unicast_posix_test.go.html#6816792">t</a></span><span class="op" id="6816849">.</span><span class="ident" id="6816850"><a href="/gostd/testing/testing.go.html#5480718">Skipf</a></span><span class="op" id="6816855">(</span><span class="string" id="6816856">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6816877">,</span>&nbsp;<span class="ident" id="6816879"><a href="/gostd/net/unicast_posix_test.go.html#6802443">runtime</a></span><span class="op" id="6816886">.</span><span class="ident" id="6816887"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span><span class="op" id="6816891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816898">if</span>&nbsp;<span class="ident" id="6816901"><a href="/gostd/net/unicast_posix_test.go.html#6802465">testing</a></span><span class="op" id="6816908">.</span><span class="ident" id="6816909"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6816914">(</span><span class="op" id="6816915">)</span>&nbsp;<span class="op" id="6816917">||</span>&nbsp;<span class="op" id="6816920">!</span><span class="op" id="6816921">*</span><span class="ident" id="6816922"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6816935">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6816939"><a href="/gostd/net/unicast_posix_test.go.html#6816792">t</a></span><span class="op" id="6816940">.</span><span class="ident" id="6816941"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6816945">(</span><span class="string" id="6816946">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6816987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6816990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6816994">defer</span>&nbsp;<span class="keyword" id="6817000">func</span><span class="op" id="6817004">(</span><span class="op" id="6817005">)</span>&nbsp;<span class="op" id="6817007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817011">if</span>&nbsp;<span class="ident" id="6817014">p</span>&nbsp;<span class="op" id="6817016">:=</span>&nbsp;<span class="builtinfunc" id="6817019">recover</span><span class="op" id="6817026">(</span><span class="op" id="6817027">)</span><span class="op" id="6817028">;</span>&nbsp;<span class="ident" id="6817030"><a href="/gostd/net/unicast_posix_test.go.html#6817014">p</a></span>&nbsp;<span class="op" id="6817032">!=</span>&nbsp;<span class="builtintype" id="6817035">nil</span>&nbsp;<span class="op" id="6817039">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817044"><a href="/gostd/net/unicast_posix_test.go.html#6816792">t</a></span><span class="op" id="6817045">.</span><span class="ident" id="6817046"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6817052">(</span><span class="string" id="6817053">&#34;Listen,&nbsp;ListenPacket&nbsp;or&nbsp;protocol-specific&nbsp;Listen&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6817116">,</span>&nbsp;<span class="ident" id="6817118"><a href="/gostd/net/unicast_posix_test.go.html#6817014">p</a></span><span class="op" id="6817119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817126">}</span><span class="op" id="6817127">(</span><span class="op" id="6817128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817132">if</span>&nbsp;<span class="ident" id="6817135">ln</span><span class="op" id="6817137">,</span>&nbsp;<span class="ident" id="6817139">err</span>&nbsp;<span class="op" id="6817143">:=</span>&nbsp;<span class="ident" id="6817146"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6817152">(</span><span class="string" id="6817153">&#34;tcp&#34;</span><span class="op" id="6817158">,</span>&nbsp;<span class="string" id="6817160">&#34;&#34;</span><span class="op" id="6817162">)</span><span class="op" id="6817163">;</span>&nbsp;<span class="ident" id="6817165"><a href="/gostd/net/unicast_posix_test.go.html#6817139">err</a></span>&nbsp;<span class="op" id="6817169">==</span>&nbsp;<span class="builtintype" id="6817172">nil</span>&nbsp;<span class="op" id="6817176">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817180"><a href="/gostd/net/unicast_posix_test.go.html#6817135">ln</a></span><span class="op" id="6817182">.</span><span class="ident" id="6817183"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6817188">(</span><span class="op" id="6817189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817195">if</span>&nbsp;<span class="ident" id="6817198">ln</span><span class="op" id="6817200">,</span>&nbsp;<span class="ident" id="6817202">err</span>&nbsp;<span class="op" id="6817206">:=</span>&nbsp;<span class="ident" id="6817209"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="6817221">(</span><span class="string" id="6817222">&#34;udp&#34;</span><span class="op" id="6817227">,</span>&nbsp;<span class="string" id="6817229">&#34;&#34;</span><span class="op" id="6817231">)</span><span class="op" id="6817232">;</span>&nbsp;<span class="ident" id="6817234"><a href="/gostd/net/unicast_posix_test.go.html#6817202">err</a></span>&nbsp;<span class="op" id="6817238">==</span>&nbsp;<span class="builtintype" id="6817241">nil</span>&nbsp;<span class="op" id="6817245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817249"><a href="/gostd/net/unicast_posix_test.go.html#6817198">ln</a></span><span class="op" id="6817251">.</span><span class="ident" id="6817252"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="6817257">(</span><span class="op" id="6817258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817261">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817264">if</span>&nbsp;<span class="ident" id="6817267">ln</span><span class="op" id="6817269">,</span>&nbsp;<span class="ident" id="6817271">err</span>&nbsp;<span class="op" id="6817275">:=</span>&nbsp;<span class="ident" id="6817278"><a href="/gostd/net/tcpsock_posix.go.html#3383816">ListenTCP</a></span><span class="op" id="6817287">(</span><span class="string" id="6817288">&#34;tcp&#34;</span><span class="op" id="6817293">,</span>&nbsp;<span class="builtintype" id="6817295">nil</span><span class="op" id="6817298">)</span><span class="op" id="6817299">;</span>&nbsp;<span class="ident" id="6817301"><a href="/gostd/net/unicast_posix_test.go.html#6817271">err</a></span>&nbsp;<span class="op" id="6817305">==</span>&nbsp;<span class="builtintype" id="6817308">nil</span>&nbsp;<span class="op" id="6817312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817316"><a href="/gostd/net/unicast_posix_test.go.html#6817267">ln</a></span><span class="op" id="6817318">.</span><span class="ident" id="6817319"><a href="/gostd/net/tcpsock_posix.go.html#3382598">Close</a></span><span class="op" id="6817324">(</span><span class="op" id="6817325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817331">if</span>&nbsp;<span class="ident" id="6817334">ln</span><span class="op" id="6817336">,</span>&nbsp;<span class="ident" id="6817338">err</span>&nbsp;<span class="op" id="6817342">:=</span>&nbsp;<span class="ident" id="6817345"><a href="/gostd/net/udpsock_posix.go.html#3392935">ListenUDP</a></span><span class="op" id="6817354">(</span><span class="string" id="6817355">&#34;udp&#34;</span><span class="op" id="6817360">,</span>&nbsp;<span class="builtintype" id="6817362">nil</span><span class="op" id="6817365">)</span><span class="op" id="6817366">;</span>&nbsp;<span class="ident" id="6817368"><a href="/gostd/net/unicast_posix_test.go.html#6817338">err</a></span>&nbsp;<span class="op" id="6817372">==</span>&nbsp;<span class="builtintype" id="6817375">nil</span>&nbsp;<span class="op" id="6817379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817383"><a href="/gostd/net/unicast_posix_test.go.html#6817334">ln</a></span><span class="op" id="6817385">.</span><span class="ident" id="6817386"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6817391">(</span><span class="op" id="6817392">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6817398">if</span>&nbsp;<span class="ident" id="6817401">ln</span><span class="op" id="6817403">,</span>&nbsp;<span class="ident" id="6817405">err</span>&nbsp;<span class="op" id="6817409">:=</span>&nbsp;<span class="ident" id="6817412"><a href="/gostd/net/iprawsock_posix.go.html#3308696">ListenIP</a></span><span class="op" id="6817420">(</span><span class="string" id="6817421">&#34;ip:icmp&#34;</span><span class="op" id="6817430">,</span>&nbsp;<span class="builtintype" id="6817432">nil</span><span class="op" id="6817435">)</span><span class="op" id="6817436">;</span>&nbsp;<span class="ident" id="6817438"><a href="/gostd/net/unicast_posix_test.go.html#6817405">err</a></span>&nbsp;<span class="op" id="6817442">==</span>&nbsp;<span class="builtintype" id="6817445">nil</span>&nbsp;<span class="op" id="6817449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6817453"><a href="/gostd/net/unicast_posix_test.go.html#6817401">ln</a></span><span class="op" id="6817455">.</span><span class="ident" id="6817456"><a href="/gostd/net/net.go.html#3336674">Close</a></span><span class="op" id="6817461">(</span><span class="op" id="6817462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6817465">}</span><br>
<span class="lineno"></span><span class="op" id="6817467">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
