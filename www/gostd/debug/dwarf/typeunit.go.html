<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4394403">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4394459">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4394513">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4394564">package</span>&nbsp;<span class="ident" id="4394572">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4394579">import</span>&nbsp;<span class="op" id="4394586">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4394589">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4394596">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4394606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4394609">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4394680">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="4394748">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4394814">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="4394882">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4394922">type</span>&nbsp;<span class="ident" id="4394927">typeUnit</span>&nbsp;<span class="keyword" id="4394936">struct</span>&nbsp;<span class="op" id="4394943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394946">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4394952">toff</span>&nbsp;&nbsp;<span class="ident" id="4394958">Offset</span>&nbsp;<span class="comment" id="4394965">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395007">name</span>&nbsp;&nbsp;<span class="builtintype" id="4395013">string</span>&nbsp;<span class="comment" id="4395020">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395053">cache</span>&nbsp;<span class="ident" id="4395059">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4395066">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="4395099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4395102">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="4395135">func</span>&nbsp;<span class="op" id="4395140">(</span><span class="ident" id="4395141">d</span>&nbsp;<span class="op" id="4395143">*</span><span class="ident" id="4395144">Data</span><span class="op" id="4395148">)</span>&nbsp;<span class="ident" id="4395150">parseTypes</span><span class="op" id="4395160">(</span><span class="ident" id="4395161">name</span>&nbsp;<span class="builtintype" id="4395166">string</span><span class="op" id="4395172">,</span>&nbsp;<span class="ident" id="4395174">types</span>&nbsp;<span class="op" id="4395180">[</span><span class="op" id="4395181">]</span><span class="builtintype" id="4395182">byte</span><span class="op" id="4395186">)</span>&nbsp;<span class="builtintype" id="4395188">error</span>&nbsp;<span class="op" id="4395194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395197">b</span>&nbsp;<span class="op" id="4395199">:=</span>&nbsp;<span class="ident" id="4395202">makeBuf</span><span class="op" id="4395209">(</span><span class="ident" id="4395210">d</span><span class="op" id="4395211">,</span>&nbsp;<span class="ident" id="4395213">unknownFormat</span><span class="op" id="4395226">{</span><span class="op" id="4395227">}</span><span class="op" id="4395228">,</span>&nbsp;<span class="ident" id="4395230">name</span><span class="op" id="4395234">,</span>&nbsp;<span class="num" id="4395236">0</span><span class="op" id="4395237">,</span>&nbsp;<span class="ident" id="4395239">types</span><span class="op" id="4395244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395247">for</span>&nbsp;<span class="builtinfunc" id="4395251">len</span><span class="op" id="4395254">(</span><span class="ident" id="4395255">b</span><span class="op" id="4395256">.</span><span class="ident" id="4395257">data</span><span class="op" id="4395261">)</span>&nbsp;<span class="op" id="4395263">&gt;</span>&nbsp;<span class="num" id="4395265">0</span>&nbsp;<span class="op" id="4395267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395271">base</span>&nbsp;<span class="op" id="4395276">:=</span>&nbsp;<span class="ident" id="4395279">b</span><span class="op" id="4395280">.</span><span class="ident" id="4395281">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395287">dwarf64</span>&nbsp;<span class="op" id="4395295">:=</span>&nbsp;<span class="builtintype" id="4395298">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395306">n</span>&nbsp;<span class="op" id="4395308">:=</span>&nbsp;<span class="ident" id="4395311">b</span><span class="op" id="4395312">.</span><span class="builtintype" id="4395313">uint32</span><span class="op" id="4395319">(</span><span class="op" id="4395320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395324">if</span>&nbsp;<span class="ident" id="4395327">n</span>&nbsp;<span class="op" id="4395329">==</span>&nbsp;<span class="num" id="4395332">0xffffffff</span>&nbsp;<span class="op" id="4395343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395348">n64</span>&nbsp;<span class="op" id="4395352">:=</span>&nbsp;<span class="ident" id="4395355">b</span><span class="op" id="4395356">.</span><span class="ident" id="4395357">uint64</span><span class="op" id="4395363">(</span><span class="op" id="4395364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395369">if</span>&nbsp;<span class="ident" id="4395372">n64</span>&nbsp;<span class="op" id="4395376">!=</span>&nbsp;<span class="ident" id="4395379">uint64</span><span class="op" id="4395385">(</span><span class="builtintype" id="4395386">uint32</span><span class="op" id="4395392">(</span><span class="ident" id="4395393">n64</span><span class="op" id="4395396">)</span><span class="op" id="4395397">)</span>&nbsp;<span class="op" id="4395399">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395405">b</span><span class="op" id="4395406">.</span><span class="builtintype" id="4395407">error</span><span class="op" id="4395412">(</span><span class="string" id="4395413">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="4395440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395446">return</span>&nbsp;<span class="ident" id="4395453">b</span><span class="op" id="4395454">.</span><span class="ident" id="4395455">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395467">n</span>&nbsp;<span class="op" id="4395469">=</span>&nbsp;<span class="builtintype" id="4395471">uint32</span><span class="op" id="4395477">(</span><span class="ident" id="4395478">n64</span><span class="op" id="4395481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395486">dwarf64</span>&nbsp;<span class="op" id="4395494">=</span>&nbsp;<span class="builtintype" id="4395496">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395507">hdroff</span>&nbsp;<span class="op" id="4395514">:=</span>&nbsp;<span class="ident" id="4395517">b</span><span class="op" id="4395518">.</span><span class="ident" id="4395519">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395525">vers</span>&nbsp;<span class="op" id="4395530">:=</span>&nbsp;<span class="ident" id="4395533">b</span><span class="op" id="4395534">.</span><span class="builtintype" id="4395535">uint16</span><span class="op" id="4395541">(</span><span class="op" id="4395542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395546">if</span>&nbsp;<span class="ident" id="4395549">vers</span>&nbsp;<span class="op" id="4395554">!=</span>&nbsp;<span class="num" id="4395557">4</span>&nbsp;<span class="op" id="4395559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395564">b</span><span class="op" id="4395565">.</span><span class="builtintype" id="4395566">error</span><span class="op" id="4395571">(</span><span class="string" id="4395572">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="4395601">+</span>&nbsp;<span class="ident" id="4395603">strconv</span><span class="op" id="4395610">.</span><span class="ident" id="4395611">Itoa</span><span class="op" id="4395615">(</span><span class="builtintype" id="4395616">int</span><span class="op" id="4395619">(</span><span class="ident" id="4395620">vers</span><span class="op" id="4395624">)</span><span class="op" id="4395625">)</span><span class="op" id="4395626">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395631">return</span>&nbsp;<span class="ident" id="4395638">b</span><span class="op" id="4395639">.</span><span class="ident" id="4395640">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395650">var</span>&nbsp;<span class="ident" id="4395654">ao</span>&nbsp;<span class="builtintype" id="4395657">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395666">if</span>&nbsp;<span class="op" id="4395669">!</span><span class="ident" id="4395670">dwarf64</span>&nbsp;<span class="op" id="4395678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395683">ao</span>&nbsp;<span class="op" id="4395686">=</span>&nbsp;<span class="ident" id="4395688">b</span><span class="op" id="4395689">.</span><span class="builtintype" id="4395690">uint32</span><span class="op" id="4395696">(</span><span class="op" id="4395697">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395701">}</span>&nbsp;<span class="keyword" id="4395703">else</span>&nbsp;<span class="op" id="4395708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395713">ao64</span>&nbsp;<span class="op" id="4395718">:=</span>&nbsp;<span class="ident" id="4395721">b</span><span class="op" id="4395722">.</span><span class="ident" id="4395723">uint64</span><span class="op" id="4395729">(</span><span class="op" id="4395730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395735">if</span>&nbsp;<span class="ident" id="4395738">ao64</span>&nbsp;<span class="op" id="4395743">!=</span>&nbsp;<span class="ident" id="4395746">uint64</span><span class="op" id="4395752">(</span><span class="builtintype" id="4395753">uint32</span><span class="op" id="4395759">(</span><span class="ident" id="4395760">ao64</span><span class="op" id="4395764">)</span><span class="op" id="4395765">)</span>&nbsp;<span class="op" id="4395767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395773">b</span><span class="op" id="4395774">.</span><span class="builtintype" id="4395775">error</span><span class="op" id="4395780">(</span><span class="string" id="4395781">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4395815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395821">return</span>&nbsp;<span class="ident" id="4395828">b</span><span class="op" id="4395829">.</span><span class="ident" id="4395830">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395842">ao</span>&nbsp;<span class="op" id="4395845">=</span>&nbsp;<span class="builtintype" id="4395847">uint32</span><span class="op" id="4395853">(</span><span class="ident" id="4395854">ao64</span><span class="op" id="4395858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395866">atable</span><span class="op" id="4395872">,</span>&nbsp;<span class="ident" id="4395874">err</span>&nbsp;<span class="op" id="4395878">:=</span>&nbsp;<span class="ident" id="4395881">d</span><span class="op" id="4395882">.</span><span class="ident" id="4395883">parseAbbrev</span><span class="op" id="4395894">(</span><span class="ident" id="4395895">ao</span><span class="op" id="4395897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395901">if</span>&nbsp;<span class="ident" id="4395904">err</span>&nbsp;<span class="op" id="4395908">!=</span>&nbsp;<span class="ident" id="4395911">nil</span>&nbsp;<span class="op" id="4395915">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395920">return</span>&nbsp;<span class="ident" id="4395927">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4395933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395937">asize</span>&nbsp;<span class="op" id="4395943">:=</span>&nbsp;<span class="ident" id="4395946">b</span><span class="op" id="4395947">.</span><span class="builtintype" id="4395948">uint8</span><span class="op" id="4395953">(</span><span class="op" id="4395954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4395958">sig</span>&nbsp;<span class="op" id="4395962">:=</span>&nbsp;<span class="ident" id="4395965">b</span><span class="op" id="4395966">.</span><span class="ident" id="4395967">uint64</span><span class="op" id="4395973">(</span><span class="op" id="4395974">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395979">var</span>&nbsp;<span class="ident" id="4395983">toff</span>&nbsp;<span class="builtintype" id="4395988">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4395997">if</span>&nbsp;<span class="op" id="4396000">!</span><span class="ident" id="4396001">dwarf64</span>&nbsp;<span class="op" id="4396009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396014">toff</span>&nbsp;<span class="op" id="4396019">=</span>&nbsp;<span class="ident" id="4396021">b</span><span class="op" id="4396022">.</span><span class="builtintype" id="4396023">uint32</span><span class="op" id="4396029">(</span><span class="op" id="4396030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396034">}</span>&nbsp;<span class="keyword" id="4396036">else</span>&nbsp;<span class="op" id="4396041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396046">to64</span>&nbsp;<span class="op" id="4396051">:=</span>&nbsp;<span class="ident" id="4396054">b</span><span class="op" id="4396055">.</span><span class="ident" id="4396056">uint64</span><span class="op" id="4396062">(</span><span class="op" id="4396063">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396068">if</span>&nbsp;<span class="ident" id="4396071">to64</span>&nbsp;<span class="op" id="4396076">!=</span>&nbsp;<span class="ident" id="4396079">uint64</span><span class="op" id="4396085">(</span><span class="builtintype" id="4396086">uint32</span><span class="op" id="4396092">(</span><span class="ident" id="4396093">to64</span><span class="op" id="4396097">)</span><span class="op" id="4396098">)</span>&nbsp;<span class="op" id="4396100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396106">b</span><span class="op" id="4396107">.</span><span class="builtintype" id="4396108">error</span><span class="op" id="4396113">(</span><span class="string" id="4396114">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="4396146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396152">return</span>&nbsp;<span class="ident" id="4396159">b</span><span class="op" id="4396160">.</span><span class="ident" id="4396161">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396173">toff</span>&nbsp;<span class="op" id="4396178">=</span>&nbsp;<span class="builtintype" id="4396180">uint32</span><span class="op" id="4396186">(</span><span class="ident" id="4396187">to64</span><span class="op" id="4396191">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396200">boff</span>&nbsp;<span class="op" id="4396205">:=</span>&nbsp;<span class="ident" id="4396208">b</span><span class="op" id="4396209">.</span><span class="ident" id="4396210">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396216">d</span><span class="op" id="4396217">.</span><span class="ident" id="4396218">typeSigs</span><span class="op" id="4396226">[</span><span class="ident" id="4396227">sig</span><span class="op" id="4396230">]</span>&nbsp;<span class="op" id="4396232">=</span>&nbsp;<span class="op" id="4396234">&amp;</span><span class="ident" id="4396235">typeUnit</span><span class="op" id="4396243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396248">unit</span><span class="op" id="4396252">:</span>&nbsp;<span class="ident" id="4396254">unit</span><span class="op" id="4396258">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396264">base</span><span class="op" id="4396268">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4396272">base</span><span class="op" id="4396276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396282">off</span><span class="op" id="4396285">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4396290">boff</span><span class="op" id="4396294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396300">data</span><span class="op" id="4396304">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4396308">b</span><span class="op" id="4396309">.</span><span class="ident" id="4396310">bytes</span><span class="op" id="4396315">(</span><span class="builtintype" id="4396316">int</span><span class="op" id="4396319">(</span><span class="ident" id="4396320">Offset</span><span class="op" id="4396326">(</span><span class="ident" id="4396327">n</span><span class="op" id="4396328">)</span>&nbsp;<span class="op" id="4396330">-</span>&nbsp;<span class="op" id="4396332">(</span><span class="ident" id="4396333">b</span><span class="op" id="4396334">.</span><span class="ident" id="4396335">off</span>&nbsp;<span class="op" id="4396339">-</span>&nbsp;<span class="ident" id="4396341">hdroff</span><span class="op" id="4396347">)</span><span class="op" id="4396348">)</span><span class="op" id="4396349">)</span><span class="op" id="4396350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396356">atable</span><span class="op" id="4396362">:</span>&nbsp;<span class="ident" id="4396364">atable</span><span class="op" id="4396370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396376">asize</span><span class="op" id="4396381">:</span>&nbsp;&nbsp;<span class="builtintype" id="4396384">int</span><span class="op" id="4396387">(</span><span class="ident" id="4396388">asize</span><span class="op" id="4396393">)</span><span class="op" id="4396394">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396400">vers</span><span class="op" id="4396404">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4396408">int</span><span class="op" id="4396411">(</span><span class="ident" id="4396412">vers</span><span class="op" id="4396416">)</span><span class="op" id="4396417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396423">is64</span><span class="op" id="4396427">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4396431">dwarf64</span><span class="op" id="4396438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396443">}</span><span class="op" id="4396444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396449">toff</span><span class="op" id="4396453">:</span>&nbsp;<span class="ident" id="4396455">Offset</span><span class="op" id="4396461">(</span><span class="ident" id="4396462">toff</span><span class="op" id="4396466">)</span><span class="op" id="4396467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396472">name</span><span class="op" id="4396476">:</span>&nbsp;<span class="ident" id="4396478">name</span><span class="op" id="4396482">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396490">if</span>&nbsp;<span class="ident" id="4396493">b</span><span class="op" id="4396494">.</span><span class="ident" id="4396495">err</span>&nbsp;<span class="op" id="4396499">!=</span>&nbsp;<span class="ident" id="4396502">nil</span>&nbsp;<span class="op" id="4396506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396511">return</span>&nbsp;<span class="ident" id="4396518">b</span><span class="op" id="4396519">.</span><span class="ident" id="4396520">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396529">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396532">return</span>&nbsp;<span class="ident" id="4396539">nil</span><br>
<span class="lineno"></span><span class="op" id="4396543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4396546">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4396587">func</span>&nbsp;<span class="op" id="4396592">(</span><span class="ident" id="4396593">d</span>&nbsp;<span class="op" id="4396595">*</span><span class="ident" id="4396596">Data</span><span class="op" id="4396600">)</span>&nbsp;<span class="ident" id="4396602">sigToType</span><span class="op" id="4396611">(</span><span class="ident" id="4396612">sig</span>&nbsp;<span class="ident" id="4396616">uint64</span><span class="op" id="4396622">)</span>&nbsp;<span class="op" id="4396624">(</span><span class="ident" id="4396625">Type</span><span class="op" id="4396629">,</span>&nbsp;<span class="builtintype" id="4396631">error</span><span class="op" id="4396636">)</span>&nbsp;<span class="op" id="4396638">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396641">tu</span>&nbsp;<span class="op" id="4396644">:=</span>&nbsp;<span class="ident" id="4396647">d</span><span class="op" id="4396648">.</span><span class="ident" id="4396649">typeSigs</span><span class="op" id="4396657">[</span><span class="ident" id="4396658">sig</span><span class="op" id="4396661">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396664">if</span>&nbsp;<span class="ident" id="4396667">tu</span>&nbsp;<span class="op" id="4396670">==</span>&nbsp;<span class="ident" id="4396673">nil</span>&nbsp;<span class="op" id="4396677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396681">return</span>&nbsp;<span class="ident" id="4396688">nil</span><span class="op" id="4396691">,</span>&nbsp;<span class="ident" id="4396693">fmt</span><span class="op" id="4396696">.</span><span class="ident" id="4396697">Errorf</span><span class="op" id="4396703">(</span><span class="string" id="4396704">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="4396736">,</span>&nbsp;<span class="ident" id="4396738">sig</span><span class="op" id="4396741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396747">if</span>&nbsp;<span class="ident" id="4396750">tu</span><span class="op" id="4396752">.</span><span class="ident" id="4396753">cache</span>&nbsp;<span class="op" id="4396759">!=</span>&nbsp;<span class="ident" id="4396762">nil</span>&nbsp;<span class="op" id="4396766">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396770">return</span>&nbsp;<span class="ident" id="4396777">tu</span><span class="op" id="4396779">.</span><span class="ident" id="4396780">cache</span><span class="op" id="4396785">,</span>&nbsp;<span class="ident" id="4396787">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396796">b</span>&nbsp;<span class="op" id="4396798">:=</span>&nbsp;<span class="ident" id="4396801">makeBuf</span><span class="op" id="4396808">(</span><span class="ident" id="4396809">d</span><span class="op" id="4396810">,</span>&nbsp;<span class="ident" id="4396812">tu</span><span class="op" id="4396814">,</span>&nbsp;<span class="ident" id="4396816">tu</span><span class="op" id="4396818">.</span><span class="ident" id="4396819">name</span><span class="op" id="4396823">,</span>&nbsp;<span class="ident" id="4396825">tu</span><span class="op" id="4396827">.</span><span class="ident" id="4396828">off</span><span class="op" id="4396831">,</span>&nbsp;<span class="ident" id="4396833">tu</span><span class="op" id="4396835">.</span><span class="ident" id="4396836">data</span><span class="op" id="4396840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396843">r</span>&nbsp;<span class="op" id="4396845">:=</span>&nbsp;<span class="op" id="4396848">&amp;</span><span class="ident" id="4396849">typeUnitReader</span><span class="op" id="4396863">{</span><span class="ident" id="4396864">d</span><span class="op" id="4396865">:</span>&nbsp;<span class="ident" id="4396867">d</span><span class="op" id="4396868">,</span>&nbsp;<span class="ident" id="4396870">tu</span><span class="op" id="4396872">:</span>&nbsp;<span class="ident" id="4396874">tu</span><span class="op" id="4396876">,</span>&nbsp;<span class="ident" id="4396878">b</span><span class="op" id="4396879">:</span>&nbsp;<span class="ident" id="4396881">b</span><span class="op" id="4396882">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396885">t</span><span class="op" id="4396886">,</span>&nbsp;<span class="ident" id="4396888">err</span>&nbsp;<span class="op" id="4396892">:=</span>&nbsp;<span class="ident" id="4396895">d</span><span class="op" id="4396896">.</span><span class="ident" id="4396897">readType</span><span class="op" id="4396905">(</span><span class="ident" id="4396906">tu</span><span class="op" id="4396908">.</span><span class="ident" id="4396909">name</span><span class="op" id="4396913">,</span>&nbsp;<span class="ident" id="4396915">r</span><span class="op" id="4396916">,</span>&nbsp;<span class="ident" id="4396918">Offset</span><span class="op" id="4396924">(</span><span class="ident" id="4396925">tu</span><span class="op" id="4396927">.</span><span class="ident" id="4396928">toff</span><span class="op" id="4396932">)</span><span class="op" id="4396933">,</span>&nbsp;<span class="builtinfunc" id="4396935">make</span><span class="op" id="4396939">(</span><span class="keyword" id="4396940">map</span><span class="op" id="4396943">[</span><span class="ident" id="4396944">Offset</span><span class="op" id="4396950">]</span><span class="ident" id="4396951">Type</span><span class="op" id="4396955">)</span><span class="op" id="4396956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396959">if</span>&nbsp;<span class="ident" id="4396962">err</span>&nbsp;<span class="op" id="4396966">!=</span>&nbsp;<span class="ident" id="4396969">nil</span>&nbsp;<span class="op" id="4396973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4396977">return</span>&nbsp;<span class="ident" id="4396984">nil</span><span class="op" id="4396987">,</span>&nbsp;<span class="ident" id="4396989">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4396994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4396998">tu</span><span class="op" id="4397000">.</span><span class="ident" id="4397001">cache</span>&nbsp;<span class="op" id="4397007">=</span>&nbsp;<span class="ident" id="4397009">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397012">return</span>&nbsp;<span class="ident" id="4397019">t</span><span class="op" id="4397020">,</span>&nbsp;<span class="ident" id="4397022">nil</span><br>
<span class="lineno"></span><span class="op" id="4397026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397029">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="4397082">type</span>&nbsp;<span class="ident" id="4397087">typeUnitReader</span>&nbsp;<span class="keyword" id="4397102">struct</span>&nbsp;<span class="op" id="4397109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397112">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4397116">*</span><span class="ident" id="4397117">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397123">tu</span>&nbsp;&nbsp;<span class="op" id="4397127">*</span><span class="ident" id="4397128">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397138">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4397142">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397147">err</span>&nbsp;<span class="builtintype" id="4397151">error</span><br>
<span class="lineno">125</span><span class="op" id="4397157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397160">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4397204">func</span>&nbsp;<span class="op" id="4397209">(</span><span class="ident" id="4397210">tur</span>&nbsp;<span class="op" id="4397214">*</span><span class="ident" id="4397215">typeUnitReader</span><span class="op" id="4397229">)</span>&nbsp;<span class="ident" id="4397231">Seek</span><span class="op" id="4397235">(</span><span class="ident" id="4397236">off</span>&nbsp;<span class="ident" id="4397240">Offset</span><span class="op" id="4397246">)</span>&nbsp;<span class="op" id="4397248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397251">tur</span><span class="op" id="4397254">.</span><span class="ident" id="4397255">err</span>&nbsp;<span class="op" id="4397259">=</span>&nbsp;<span class="ident" id="4397261">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397266">doff</span>&nbsp;<span class="op" id="4397271">:=</span>&nbsp;<span class="ident" id="4397274">off</span>&nbsp;<span class="op" id="4397278">-</span>&nbsp;<span class="ident" id="4397280">tur</span><span class="op" id="4397283">.</span><span class="ident" id="4397284">tu</span><span class="op" id="4397286">.</span><span class="ident" id="4397287">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397292">if</span>&nbsp;<span class="ident" id="4397295">doff</span>&nbsp;<span class="op" id="4397300">&lt;</span>&nbsp;<span class="num" id="4397302">0</span>&nbsp;<span class="op" id="4397304">||</span>&nbsp;<span class="ident" id="4397307">doff</span>&nbsp;<span class="op" id="4397312">&gt;=</span>&nbsp;<span class="ident" id="4397315">Offset</span><span class="op" id="4397321">(</span><span class="builtinfunc" id="4397322">len</span><span class="op" id="4397325">(</span><span class="ident" id="4397326">tur</span><span class="op" id="4397329">.</span><span class="ident" id="4397330">tu</span><span class="op" id="4397332">.</span><span class="ident" id="4397333">data</span><span class="op" id="4397337">)</span><span class="op" id="4397338">)</span>&nbsp;<span class="op" id="4397340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397344">tur</span><span class="op" id="4397347">.</span><span class="ident" id="4397348">err</span>&nbsp;<span class="op" id="4397352">=</span>&nbsp;<span class="ident" id="4397354">fmt</span><span class="op" id="4397357">.</span><span class="ident" id="4397358">Errorf</span><span class="op" id="4397364">(</span><span class="string" id="4397365">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="4397401">,</span>&nbsp;<span class="ident" id="4397403">tur</span><span class="op" id="4397406">.</span><span class="ident" id="4397407">tu</span><span class="op" id="4397409">.</span><span class="ident" id="4397410">name</span><span class="op" id="4397414">,</span>&nbsp;<span class="ident" id="4397416">doff</span><span class="op" id="4397420">,</span>&nbsp;<span class="builtinfunc" id="4397422">len</span><span class="op" id="4397425">(</span><span class="ident" id="4397426">tur</span><span class="op" id="4397429">.</span><span class="ident" id="4397430">tu</span><span class="op" id="4397432">.</span><span class="ident" id="4397433">data</span><span class="op" id="4397437">)</span><span class="op" id="4397438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397442">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397450">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397453">tur</span><span class="op" id="4397456">.</span><span class="ident" id="4397457">b</span>&nbsp;<span class="op" id="4397459">=</span>&nbsp;<span class="ident" id="4397461">makeBuf</span><span class="op" id="4397468">(</span><span class="ident" id="4397469">tur</span><span class="op" id="4397472">.</span><span class="ident" id="4397473">d</span><span class="op" id="4397474">,</span>&nbsp;<span class="ident" id="4397476">tur</span><span class="op" id="4397479">.</span><span class="ident" id="4397480">tu</span><span class="op" id="4397482">,</span>&nbsp;<span class="ident" id="4397484">tur</span><span class="op" id="4397487">.</span><span class="ident" id="4397488">tu</span><span class="op" id="4397490">.</span><span class="ident" id="4397491">name</span><span class="op" id="4397495">,</span>&nbsp;<span class="ident" id="4397497">off</span><span class="op" id="4397500">,</span>&nbsp;<span class="ident" id="4397502">tur</span><span class="op" id="4397505">.</span><span class="ident" id="4397506">tu</span><span class="op" id="4397508">.</span><span class="ident" id="4397509">data</span><span class="op" id="4397513">[</span><span class="ident" id="4397514">doff</span><span class="op" id="4397518">:</span><span class="op" id="4397519">]</span><span class="op" id="4397520">)</span><br>
<span class="lineno"></span><span class="op" id="4397522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397525">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="4397574">func</span>&nbsp;<span class="op" id="4397579">(</span><span class="ident" id="4397580">tur</span>&nbsp;<span class="op" id="4397584">*</span><span class="ident" id="4397585">typeUnitReader</span><span class="op" id="4397599">)</span>&nbsp;<span class="ident" id="4397601">Next</span><span class="op" id="4397605">(</span><span class="op" id="4397606">)</span>&nbsp;<span class="op" id="4397608">(</span><span class="op" id="4397609">*</span><span class="ident" id="4397610">Entry</span><span class="op" id="4397615">,</span>&nbsp;<span class="builtintype" id="4397617">error</span><span class="op" id="4397622">)</span>&nbsp;<span class="op" id="4397624">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397627">if</span>&nbsp;<span class="ident" id="4397630">tur</span><span class="op" id="4397633">.</span><span class="ident" id="4397634">err</span>&nbsp;<span class="op" id="4397638">!=</span>&nbsp;<span class="ident" id="4397641">nil</span>&nbsp;<span class="op" id="4397645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397649">return</span>&nbsp;<span class="ident" id="4397656">nil</span><span class="op" id="4397659">,</span>&nbsp;<span class="ident" id="4397661">tur</span><span class="op" id="4397664">.</span><span class="ident" id="4397665">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397673">if</span>&nbsp;<span class="builtinfunc" id="4397676">len</span><span class="op" id="4397679">(</span><span class="ident" id="4397680">tur</span><span class="op" id="4397683">.</span><span class="ident" id="4397684">tu</span><span class="op" id="4397686">.</span><span class="ident" id="4397687">data</span><span class="op" id="4397691">)</span>&nbsp;<span class="op" id="4397693">==</span>&nbsp;<span class="num" id="4397696">0</span>&nbsp;<span class="op" id="4397698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397702">return</span>&nbsp;<span class="ident" id="4397709">nil</span><span class="op" id="4397712">,</span>&nbsp;<span class="ident" id="4397714">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397722">e</span>&nbsp;<span class="op" id="4397724">:=</span>&nbsp;<span class="ident" id="4397727">tur</span><span class="op" id="4397730">.</span><span class="ident" id="4397731">b</span><span class="op" id="4397732">.</span><span class="ident" id="4397733">entry</span><span class="op" id="4397738">(</span><span class="ident" id="4397739">tur</span><span class="op" id="4397742">.</span><span class="ident" id="4397743">tu</span><span class="op" id="4397745">.</span><span class="ident" id="4397746">atable</span><span class="op" id="4397752">,</span>&nbsp;<span class="ident" id="4397754">tur</span><span class="op" id="4397757">.</span><span class="ident" id="4397758">tu</span><span class="op" id="4397760">.</span><span class="ident" id="4397761">base</span><span class="op" id="4397765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397768">if</span>&nbsp;<span class="ident" id="4397771">tur</span><span class="op" id="4397774">.</span><span class="ident" id="4397775">b</span><span class="op" id="4397776">.</span><span class="ident" id="4397777">err</span>&nbsp;<span class="op" id="4397781">!=</span>&nbsp;<span class="ident" id="4397784">nil</span>&nbsp;<span class="op" id="4397788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397792">tur</span><span class="op" id="4397795">.</span><span class="ident" id="4397796">err</span>&nbsp;<span class="op" id="4397800">=</span>&nbsp;<span class="ident" id="4397802">tur</span><span class="op" id="4397805">.</span><span class="ident" id="4397806">b</span><span class="op" id="4397807">.</span><span class="ident" id="4397808">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397814">return</span>&nbsp;<span class="ident" id="4397821">nil</span><span class="op" id="4397824">,</span>&nbsp;<span class="ident" id="4397826">tur</span><span class="op" id="4397829">.</span><span class="ident" id="4397830">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4397835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397838">return</span>&nbsp;<span class="ident" id="4397845">e</span><span class="op" id="4397846">,</span>&nbsp;<span class="ident" id="4397848">nil</span><br>
<span class="lineno"></span><span class="op" id="4397852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4397855">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="4397904">func</span>&nbsp;<span class="op" id="4397909">(</span><span class="ident" id="4397910">tur</span>&nbsp;<span class="op" id="4397914">*</span><span class="ident" id="4397915">typeUnitReader</span><span class="op" id="4397929">)</span>&nbsp;<span class="ident" id="4397931">clone</span><span class="op" id="4397936">(</span><span class="op" id="4397937">)</span>&nbsp;<span class="ident" id="4397939">typeReader</span>&nbsp;<span class="op" id="4397950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4397953">return</span>&nbsp;<span class="op" id="4397960">&amp;</span><span class="ident" id="4397961">typeUnitReader</span><span class="op" id="4397975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397979">d</span><span class="op" id="4397980">:</span>&nbsp;&nbsp;<span class="ident" id="4397983">tur</span><span class="op" id="4397986">.</span><span class="ident" id="4397987">d</span><span class="op" id="4397988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4397992">tu</span><span class="op" id="4397994">:</span>&nbsp;<span class="ident" id="4397996">tur</span><span class="op" id="4397999">.</span><span class="ident" id="4398000">tu</span><span class="op" id="4398002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4398006">b</span><span class="op" id="4398007">:</span>&nbsp;&nbsp;<span class="ident" id="4398010">makeBuf</span><span class="op" id="4398017">(</span><span class="ident" id="4398018">tur</span><span class="op" id="4398021">.</span><span class="ident" id="4398022">d</span><span class="op" id="4398023">,</span>&nbsp;<span class="ident" id="4398025">tur</span><span class="op" id="4398028">.</span><span class="ident" id="4398029">tu</span><span class="op" id="4398031">,</span>&nbsp;<span class="ident" id="4398033">tur</span><span class="op" id="4398036">.</span><span class="ident" id="4398037">tu</span><span class="op" id="4398039">.</span><span class="ident" id="4398040">name</span><span class="op" id="4398044">,</span>&nbsp;<span class="ident" id="4398046">tur</span><span class="op" id="4398049">.</span><span class="ident" id="4398050">tu</span><span class="op" id="4398052">.</span><span class="ident" id="4398053">off</span><span class="op" id="4398056">,</span>&nbsp;<span class="ident" id="4398058">tur</span><span class="op" id="4398061">.</span><span class="ident" id="4398062">tu</span><span class="op" id="4398064">.</span><span class="ident" id="4398065">data</span><span class="op" id="4398069">)</span><span class="op" id="4398070">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4398073">}</span><br>
<span class="lineno"></span><span class="op" id="4398075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4398078">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="4398116">func</span>&nbsp;<span class="op" id="4398121">(</span><span class="ident" id="4398122">tur</span>&nbsp;<span class="op" id="4398126">*</span><span class="ident" id="4398127">typeUnitReader</span><span class="op" id="4398141">)</span>&nbsp;<span class="ident" id="4398143">offset</span><span class="op" id="4398149">(</span><span class="op" id="4398150">)</span>&nbsp;<span class="ident" id="4398152">Offset</span>&nbsp;<span class="op" id="4398159">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4398162">return</span>&nbsp;<span class="ident" id="4398169">tur</span><span class="op" id="4398172">.</span><span class="ident" id="4398173">b</span><span class="op" id="4398174">.</span><span class="ident" id="4398175">off</span><br>
<span class="lineno"></span><span class="op" id="4398179">}</span>
</div>
</body>
</html>
