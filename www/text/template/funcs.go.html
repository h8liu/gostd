<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4683595">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4683650">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4683704">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4683755">package</span>&nbsp;<span class="ident" id="4683763">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4683773">import</span>&nbsp;<span class="op" id="4683780">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683783">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683792">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683802">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683809">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683815">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683826">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683837">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683848">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4683859">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4683874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4683877">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="4683957">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4684038">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="4684110">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4684190">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4684221">type</span>&nbsp;<span class="ident" id="4684226">FuncMap</span>&nbsp;<span class="keyword" id="4684234">map</span><span class="op" id="4684237">[</span><span class="builtintype" id="4684238">string</span><span class="op" id="4684244">]</span><span class="keyword" id="4684245">interface</span><span class="op" id="4684254">{</span><span class="op" id="4684255">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4684258">var</span>&nbsp;<span class="ident" id="4684262">builtins</span>&nbsp;<span class="op" id="4684271">=</span>&nbsp;<span class="ident" id="4684273">FuncMap</span><span class="op" id="4684280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684283">&#34;and&#34;</span><span class="op" id="4684288">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684295">and</span><span class="op" id="4684298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684301">&#34;call&#34;</span><span class="op" id="4684307">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684313">call</span><span class="op" id="4684317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684320">&#34;html&#34;</span><span class="op" id="4684326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684332">HTMLEscaper</span><span class="op" id="4684343">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684346">&#34;index&#34;</span><span class="op" id="4684353">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684358">index</span><span class="op" id="4684363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684366">&#34;js&#34;</span><span class="op" id="4684370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684378">JSEscaper</span><span class="op" id="4684387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684390">&#34;len&#34;</span><span class="op" id="4684395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684402">length</span><span class="op" id="4684408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684411">&#34;not&#34;</span><span class="op" id="4684416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684423">not</span><span class="op" id="4684426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684429">&#34;or&#34;</span><span class="op" id="4684433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684441">or</span><span class="op" id="4684443">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684446">&#34;print&#34;</span><span class="op" id="4684453">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4684458">fmt</span><span class="op" id="4684461">.</span><span class="ident" id="4684462">Sprint</span><span class="op" id="4684468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684471">&#34;printf&#34;</span><span class="op" id="4684479">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4684483">fmt</span><span class="op" id="4684486">.</span><span class="ident" id="4684487">Sprintf</span><span class="op" id="4684494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684497">&#34;println&#34;</span><span class="op" id="4684506">:</span>&nbsp;&nbsp;<span class="ident" id="4684509">fmt</span><span class="op" id="4684512">.</span><span class="ident" id="4684513">Sprintln</span><span class="op" id="4684521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684524">&#34;urlquery&#34;</span><span class="op" id="4684534">:</span>&nbsp;<span class="ident" id="4684536">URLQueryEscaper</span><span class="op" id="4684551">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4684555">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684571">&#34;eq&#34;</span><span class="op" id="4684575">:</span>&nbsp;<span class="ident" id="4684577">eq</span><span class="op" id="4684579">,</span>&nbsp;<span class="comment" id="4684581">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684588">&#34;ge&#34;</span><span class="op" id="4684592">:</span>&nbsp;<span class="ident" id="4684594">ge</span><span class="op" id="4684596">,</span>&nbsp;<span class="comment" id="4684598">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684605">&#34;gt&#34;</span><span class="op" id="4684609">:</span>&nbsp;<span class="ident" id="4684611">gt</span><span class="op" id="4684613">,</span>&nbsp;<span class="comment" id="4684615">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684621">&#34;le&#34;</span><span class="op" id="4684625">:</span>&nbsp;<span class="ident" id="4684627">le</span><span class="op" id="4684629">,</span>&nbsp;<span class="comment" id="4684631">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684638">&#34;lt&#34;</span><span class="op" id="4684642">:</span>&nbsp;<span class="ident" id="4684644">lt</span><span class="op" id="4684646">,</span>&nbsp;<span class="comment" id="4684648">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4684654">&#34;ne&#34;</span><span class="op" id="4684658">:</span>&nbsp;<span class="ident" id="4684660">ne</span><span class="op" id="4684662">,</span>&nbsp;<span class="comment" id="4684664">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="4684670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4684673">var</span>&nbsp;<span class="ident" id="4684677">builtinFuncs</span>&nbsp;<span class="op" id="4684690">=</span>&nbsp;<span class="ident" id="4684692">createValueFuncs</span><span class="op" id="4684708">(</span><span class="ident" id="4684709">builtins</span><span class="op" id="4684717">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4684720">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="4684788">func</span>&nbsp;<span class="ident" id="4684793">createValueFuncs</span><span class="op" id="4684809">(</span><span class="ident" id="4684810">funcMap</span>&nbsp;<span class="ident" id="4684818">FuncMap</span><span class="op" id="4684825">)</span>&nbsp;<span class="keyword" id="4684827">map</span><span class="op" id="4684830">[</span><span class="builtintype" id="4684831">string</span><span class="op" id="4684837">]</span><span class="ident" id="4684838">reflect</span><span class="op" id="4684845">.</span><span class="ident" id="4684846">Value</span>&nbsp;<span class="op" id="4684852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4684855">m</span>&nbsp;<span class="op" id="4684857">:=</span>&nbsp;<span class="builtinfunc" id="4684860">make</span><span class="op" id="4684864">(</span><span class="keyword" id="4684865">map</span><span class="op" id="4684868">[</span><span class="builtintype" id="4684869">string</span><span class="op" id="4684875">]</span><span class="ident" id="4684876">reflect</span><span class="op" id="4684883">.</span><span class="ident" id="4684884">Value</span><span class="op" id="4684889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4684892">addValueFuncs</span><span class="op" id="4684905">(</span><span class="ident" id="4684906">m</span><span class="op" id="4684907">,</span>&nbsp;<span class="ident" id="4684909">funcMap</span><span class="op" id="4684916">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4684919">return</span>&nbsp;<span class="ident" id="4684926">m</span><br>
<span class="lineno"></span><span class="op" id="4684928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4684931">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="4685022">func</span>&nbsp;<span class="ident" id="4685027">addValueFuncs</span><span class="op" id="4685040">(</span><span class="ident" id="4685041">out</span>&nbsp;<span class="keyword" id="4685045">map</span><span class="op" id="4685048">[</span><span class="builtintype" id="4685049">string</span><span class="op" id="4685055">]</span><span class="ident" id="4685056">reflect</span><span class="op" id="4685063">.</span><span class="ident" id="4685064">Value</span><span class="op" id="4685069">,</span>&nbsp;<span class="ident" id="4685071">in</span>&nbsp;<span class="ident" id="4685074">FuncMap</span><span class="op" id="4685081">)</span>&nbsp;<span class="op" id="4685083">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685086">for</span>&nbsp;<span class="ident" id="4685090">name</span><span class="op" id="4685094">,</span>&nbsp;<span class="ident" id="4685096">fn</span>&nbsp;<span class="op" id="4685099">:=</span>&nbsp;<span class="keyword" id="4685102">range</span>&nbsp;<span class="ident" id="4685108">in</span>&nbsp;<span class="op" id="4685111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4685115">v</span>&nbsp;<span class="op" id="4685117">:=</span>&nbsp;<span class="ident" id="4685120">reflect</span><span class="op" id="4685127">.</span><span class="ident" id="4685128">ValueOf</span><span class="op" id="4685135">(</span><span class="ident" id="4685136">fn</span><span class="op" id="4685138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685142">if</span>&nbsp;<span class="ident" id="4685145">v</span><span class="op" id="4685146">.</span><span class="ident" id="4685147">Kind</span><span class="op" id="4685151">(</span><span class="op" id="4685152">)</span>&nbsp;<span class="op" id="4685154">!=</span>&nbsp;<span class="ident" id="4685157">reflect</span><span class="op" id="4685164">.</span><span class="ident" id="4685165">Func</span>&nbsp;<span class="op" id="4685170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4685175">panic</span><span class="op" id="4685180">(</span><span class="string" id="4685181">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="4685194">+</span>&nbsp;<span class="ident" id="4685196">name</span>&nbsp;<span class="op" id="4685201">+</span>&nbsp;<span class="string" id="4685203">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="4685220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4685224">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685228">if</span>&nbsp;<span class="op" id="4685231">!</span><span class="ident" id="4685232">goodFunc</span><span class="op" id="4685240">(</span><span class="ident" id="4685241">v</span><span class="op" id="4685242">.</span><span class="ident" id="4685243">Type</span><span class="op" id="4685247">(</span><span class="op" id="4685248">)</span><span class="op" id="4685249">)</span>&nbsp;<span class="op" id="4685251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4685256">panic</span><span class="op" id="4685261">(</span><span class="ident" id="4685262">fmt</span><span class="op" id="4685265">.</span><span class="ident" id="4685266">Errorf</span><span class="op" id="4685272">(</span><span class="string" id="4685273">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="4685323">,</span>&nbsp;<span class="ident" id="4685325">name</span><span class="op" id="4685329">,</span>&nbsp;<span class="ident" id="4685331">v</span><span class="op" id="4685332">.</span><span class="ident" id="4685333">Type</span><span class="op" id="4685337">(</span><span class="op" id="4685338">)</span><span class="op" id="4685339">.</span><span class="ident" id="4685340">NumOut</span><span class="op" id="4685346">(</span><span class="op" id="4685347">)</span><span class="op" id="4685348">)</span><span class="op" id="4685349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4685353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4685357">out</span><span class="op" id="4685360">[</span><span class="ident" id="4685361">name</span><span class="op" id="4685365">]</span>&nbsp;<span class="op" id="4685367">=</span>&nbsp;<span class="ident" id="4685369">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4685372">}</span><br>
<span class="lineno">70</span><span class="op" id="4685374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4685377">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="4685463">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="4685492">func</span>&nbsp;<span class="ident" id="4685497">addFuncs</span><span class="op" id="4685505">(</span><span class="ident" id="4685506">out</span><span class="op" id="4685509">,</span>&nbsp;<span class="ident" id="4685511">in</span>&nbsp;<span class="ident" id="4685514">FuncMap</span><span class="op" id="4685521">)</span>&nbsp;<span class="op" id="4685523">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685526">for</span>&nbsp;<span class="ident" id="4685530">name</span><span class="op" id="4685534">,</span>&nbsp;<span class="ident" id="4685536">fn</span>&nbsp;<span class="op" id="4685539">:=</span>&nbsp;<span class="keyword" id="4685542">range</span>&nbsp;<span class="ident" id="4685548">in</span>&nbsp;<span class="op" id="4685551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4685555">out</span><span class="op" id="4685558">[</span><span class="ident" id="4685559">name</span><span class="op" id="4685563">]</span>&nbsp;<span class="op" id="4685565">=</span>&nbsp;<span class="ident" id="4685567">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4685571">}</span><br>
<span class="lineno"></span><span class="op" id="4685573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4685576">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4685655">func</span>&nbsp;<span class="ident" id="4685660">goodFunc</span><span class="op" id="4685668">(</span><span class="ident" id="4685669">typ</span>&nbsp;<span class="ident" id="4685673">reflect</span><span class="op" id="4685680">.</span><span class="ident" id="4685681">Type</span><span class="op" id="4685685">)</span>&nbsp;<span class="builtintype" id="4685687">bool</span>&nbsp;<span class="op" id="4685692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4685695">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685775">switch</span>&nbsp;<span class="op" id="4685782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685785">case</span>&nbsp;<span class="ident" id="4685790">typ</span><span class="op" id="4685793">.</span><span class="ident" id="4685794">NumOut</span><span class="op" id="4685800">(</span><span class="op" id="4685801">)</span>&nbsp;<span class="op" id="4685803">==</span>&nbsp;<span class="num" id="4685806">1</span><span class="op" id="4685807">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685811">return</span>&nbsp;<span class="ident" id="4685818">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685824">case</span>&nbsp;<span class="ident" id="4685829">typ</span><span class="op" id="4685832">.</span><span class="ident" id="4685833">NumOut</span><span class="op" id="4685839">(</span><span class="op" id="4685840">)</span>&nbsp;<span class="op" id="4685842">==</span>&nbsp;<span class="num" id="4685845">2</span>&nbsp;<span class="op" id="4685847">&amp;&amp;</span>&nbsp;<span class="ident" id="4685850">typ</span><span class="op" id="4685853">.</span><span class="ident" id="4685854">Out</span><span class="op" id="4685857">(</span><span class="num" id="4685858">1</span><span class="op" id="4685859">)</span>&nbsp;<span class="op" id="4685861">==</span>&nbsp;<span class="ident" id="4685864">errorType</span><span class="op" id="4685873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685877">return</span>&nbsp;<span class="ident" id="4685884">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4685890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4685893">return</span>&nbsp;<span class="ident" id="4685900">false</span><br>
<span class="lineno">90</span><span class="op" id="4685906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4685909">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="4685979">func</span>&nbsp;<span class="ident" id="4685984">findFunction</span><span class="op" id="4685996">(</span><span class="ident" id="4685997">name</span>&nbsp;<span class="builtintype" id="4686002">string</span><span class="op" id="4686008">,</span>&nbsp;<span class="ident" id="4686010">tmpl</span>&nbsp;<span class="op" id="4686015">*</span><span class="ident" id="4686016">Template</span><span class="op" id="4686024">)</span>&nbsp;<span class="op" id="4686026">(</span><span class="ident" id="4686027">reflect</span><span class="op" id="4686034">.</span><span class="ident" id="4686035">Value</span><span class="op" id="4686040">,</span>&nbsp;<span class="builtintype" id="4686042">bool</span><span class="op" id="4686046">)</span>&nbsp;<span class="op" id="4686048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686051">if</span>&nbsp;<span class="ident" id="4686054">tmpl</span>&nbsp;<span class="op" id="4686059">!=</span>&nbsp;<span class="ident" id="4686062">nil</span>&nbsp;<span class="op" id="4686066">&amp;&amp;</span>&nbsp;<span class="ident" id="4686069">tmpl</span><span class="op" id="4686073">.</span><span class="ident" id="4686074">common</span>&nbsp;<span class="op" id="4686081">!=</span>&nbsp;<span class="ident" id="4686084">nil</span>&nbsp;<span class="op" id="4686088">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686092">if</span>&nbsp;<span class="ident" id="4686095">fn</span>&nbsp;<span class="op" id="4686098">:=</span>&nbsp;<span class="ident" id="4686101">tmpl</span><span class="op" id="4686105">.</span><span class="ident" id="4686106">execFuncs</span><span class="op" id="4686115">[</span><span class="ident" id="4686116">name</span><span class="op" id="4686120">]</span><span class="op" id="4686121">;</span>&nbsp;<span class="ident" id="4686123">fn</span><span class="op" id="4686125">.</span><span class="ident" id="4686126">IsValid</span><span class="op" id="4686133">(</span><span class="op" id="4686134">)</span>&nbsp;<span class="op" id="4686136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686141">return</span>&nbsp;<span class="ident" id="4686148">fn</span><span class="op" id="4686150">,</span>&nbsp;<span class="ident" id="4686152">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4686159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4686162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686165">if</span>&nbsp;<span class="ident" id="4686168">fn</span>&nbsp;<span class="op" id="4686171">:=</span>&nbsp;<span class="ident" id="4686174">builtinFuncs</span><span class="op" id="4686186">[</span><span class="ident" id="4686187">name</span><span class="op" id="4686191">]</span><span class="op" id="4686192">;</span>&nbsp;<span class="ident" id="4686194">fn</span><span class="op" id="4686196">.</span><span class="ident" id="4686197">IsValid</span><span class="op" id="4686204">(</span><span class="op" id="4686205">)</span>&nbsp;<span class="op" id="4686207">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686211">return</span>&nbsp;<span class="ident" id="4686218">fn</span><span class="op" id="4686220">,</span>&nbsp;<span class="ident" id="4686222">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4686228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686231">return</span>&nbsp;<span class="ident" id="4686238">reflect</span><span class="op" id="4686245">.</span><span class="ident" id="4686246">Value</span><span class="op" id="4686251">{</span><span class="op" id="4686252">}</span><span class="op" id="4686253">,</span>&nbsp;<span class="ident" id="4686255">false</span><br>
<span class="lineno"></span><span class="op" id="4686261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4686264">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4686278">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="4686354">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4686425">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="4686473">func</span>&nbsp;<span class="ident" id="4686478">index</span><span class="op" id="4686483">(</span><span class="ident" id="4686484">item</span>&nbsp;<span class="keyword" id="4686489">interface</span><span class="op" id="4686498">{</span><span class="op" id="4686499">}</span><span class="op" id="4686500">,</span>&nbsp;<span class="ident" id="4686502">indices</span>&nbsp;<span class="op" id="4686510">...</span><span class="keyword" id="4686513">interface</span><span class="op" id="4686522">{</span><span class="op" id="4686523">}</span><span class="op" id="4686524">)</span>&nbsp;<span class="op" id="4686526">(</span><span class="keyword" id="4686527">interface</span><span class="op" id="4686536">{</span><span class="op" id="4686537">}</span><span class="op" id="4686538">,</span>&nbsp;<span class="builtintype" id="4686540">error</span><span class="op" id="4686545">)</span>&nbsp;<span class="op" id="4686547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4686550">v</span>&nbsp;<span class="op" id="4686552">:=</span>&nbsp;<span class="ident" id="4686555">reflect</span><span class="op" id="4686562">.</span><span class="ident" id="4686563">ValueOf</span><span class="op" id="4686570">(</span><span class="ident" id="4686571">item</span><span class="op" id="4686575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686578">for</span>&nbsp;<span class="ident" id="4686582">_</span><span class="op" id="4686583">,</span>&nbsp;<span class="ident" id="4686585">i</span>&nbsp;<span class="op" id="4686587">:=</span>&nbsp;<span class="keyword" id="4686590">range</span>&nbsp;<span class="ident" id="4686596">indices</span>&nbsp;<span class="op" id="4686604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4686608">index</span>&nbsp;<span class="op" id="4686614">:=</span>&nbsp;<span class="ident" id="4686617">reflect</span><span class="op" id="4686624">.</span><span class="ident" id="4686625">ValueOf</span><span class="op" id="4686632">(</span><span class="ident" id="4686633">i</span><span class="op" id="4686634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686638">var</span>&nbsp;<span class="ident" id="4686642">isNil</span>&nbsp;<span class="builtintype" id="4686648">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686655">if</span>&nbsp;<span class="ident" id="4686658">v</span><span class="op" id="4686659">,</span>&nbsp;<span class="ident" id="4686661">isNil</span>&nbsp;<span class="op" id="4686667">=</span>&nbsp;<span class="ident" id="4686669">indirect</span><span class="op" id="4686677">(</span><span class="ident" id="4686678">v</span><span class="op" id="4686679">)</span><span class="op" id="4686680">;</span>&nbsp;<span class="ident" id="4686682">isNil</span>&nbsp;<span class="op" id="4686688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686693">return</span>&nbsp;<span class="ident" id="4686700">nil</span><span class="op" id="4686703">,</span>&nbsp;<span class="ident" id="4686705">fmt</span><span class="op" id="4686708">.</span><span class="ident" id="4686709">Errorf</span><span class="op" id="4686715">(</span><span class="string" id="4686716">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4686738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4686742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686746">switch</span>&nbsp;<span class="ident" id="4686753">v</span><span class="op" id="4686754">.</span><span class="ident" id="4686755">Kind</span><span class="op" id="4686759">(</span><span class="op" id="4686760">)</span>&nbsp;<span class="op" id="4686762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686766">case</span>&nbsp;<span class="ident" id="4686771">reflect</span><span class="op" id="4686778">.</span><span class="ident" id="4686779">Array</span><span class="op" id="4686784">,</span>&nbsp;<span class="ident" id="4686786">reflect</span><span class="op" id="4686793">.</span><span class="ident" id="4686794">Slice</span><span class="op" id="4686799">,</span>&nbsp;<span class="ident" id="4686801">reflect</span><span class="op" id="4686808">.</span><span class="ident" id="4686809">String</span><span class="op" id="4686815">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686820">var</span>&nbsp;<span class="ident" id="4686824">x</span>&nbsp;<span class="ident" id="4686826">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686835">switch</span>&nbsp;<span class="ident" id="4686842">index</span><span class="op" id="4686847">.</span><span class="ident" id="4686848">Kind</span><span class="op" id="4686852">(</span><span class="op" id="4686853">)</span>&nbsp;<span class="op" id="4686855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686860">case</span>&nbsp;<span class="ident" id="4686865">reflect</span><span class="op" id="4686872">.</span><span class="ident" id="4686873">Int</span><span class="op" id="4686876">,</span>&nbsp;<span class="ident" id="4686878">reflect</span><span class="op" id="4686885">.</span><span class="ident" id="4686886">Int8</span><span class="op" id="4686890">,</span>&nbsp;<span class="ident" id="4686892">reflect</span><span class="op" id="4686899">.</span><span class="ident" id="4686900">Int16</span><span class="op" id="4686905">,</span>&nbsp;<span class="ident" id="4686907">reflect</span><span class="op" id="4686914">.</span><span class="ident" id="4686915">Int32</span><span class="op" id="4686920">,</span>&nbsp;<span class="ident" id="4686922">reflect</span><span class="op" id="4686929">.</span><span class="ident" id="4686930">Int64</span><span class="op" id="4686935">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4686941">x</span>&nbsp;<span class="op" id="4686943">=</span>&nbsp;<span class="ident" id="4686945">index</span><span class="op" id="4686950">.</span><span class="ident" id="4686951">Int</span><span class="op" id="4686954">(</span><span class="op" id="4686955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4686960">case</span>&nbsp;<span class="ident" id="4686965">reflect</span><span class="op" id="4686972">.</span><span class="ident" id="4686973">Uint</span><span class="op" id="4686977">,</span>&nbsp;<span class="ident" id="4686979">reflect</span><span class="op" id="4686986">.</span><span class="ident" id="4686987">Uint8</span><span class="op" id="4686992">,</span>&nbsp;<span class="ident" id="4686994">reflect</span><span class="op" id="4687001">.</span><span class="ident" id="4687002">Uint16</span><span class="op" id="4687008">,</span>&nbsp;<span class="ident" id="4687010">reflect</span><span class="op" id="4687017">.</span><span class="ident" id="4687018">Uint32</span><span class="op" id="4687024">,</span>&nbsp;<span class="ident" id="4687026">reflect</span><span class="op" id="4687033">.</span><span class="ident" id="4687034">Uint64</span><span class="op" id="4687040">,</span>&nbsp;<span class="ident" id="4687042">reflect</span><span class="op" id="4687049">.</span><span class="ident" id="4687050">Uintptr</span><span class="op" id="4687057">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687063">x</span>&nbsp;<span class="op" id="4687065">=</span>&nbsp;<span class="ident" id="4687067">int64</span><span class="op" id="4687072">(</span><span class="ident" id="4687073">index</span><span class="op" id="4687078">.</span><span class="ident" id="4687079">Uint</span><span class="op" id="4687083">(</span><span class="op" id="4687084">)</span><span class="op" id="4687085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687090">default</span><span class="op" id="4687097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687103">return</span>&nbsp;<span class="ident" id="4687110">nil</span><span class="op" id="4687113">,</span>&nbsp;<span class="ident" id="4687115">fmt</span><span class="op" id="4687118">.</span><span class="ident" id="4687119">Errorf</span><span class="op" id="4687125">(</span><span class="string" id="4687126">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4687165">,</span>&nbsp;<span class="ident" id="4687167">index</span><span class="op" id="4687172">.</span><span class="ident" id="4687173">Type</span><span class="op" id="4687177">(</span><span class="op" id="4687178">)</span><span class="op" id="4687179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687189">if</span>&nbsp;<span class="ident" id="4687192">x</span>&nbsp;<span class="op" id="4687194">&lt;</span>&nbsp;<span class="num" id="4687196">0</span>&nbsp;<span class="op" id="4687198">||</span>&nbsp;<span class="ident" id="4687201">x</span>&nbsp;<span class="op" id="4687203">&gt;=</span>&nbsp;<span class="ident" id="4687206">int64</span><span class="op" id="4687211">(</span><span class="ident" id="4687212">v</span><span class="op" id="4687213">.</span><span class="ident" id="4687214">Len</span><span class="op" id="4687217">(</span><span class="op" id="4687218">)</span><span class="op" id="4687219">)</span>&nbsp;<span class="op" id="4687221">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687227">return</span>&nbsp;<span class="ident" id="4687234">nil</span><span class="op" id="4687237">,</span>&nbsp;<span class="ident" id="4687239">fmt</span><span class="op" id="4687242">.</span><span class="ident" id="4687243">Errorf</span><span class="op" id="4687249">(</span><span class="string" id="4687250">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="4687274">,</span>&nbsp;<span class="ident" id="4687276">x</span><span class="op" id="4687277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687287">v</span>&nbsp;<span class="op" id="4687289">=</span>&nbsp;<span class="ident" id="4687291">v</span><span class="op" id="4687292">.</span><span class="ident" id="4687293">Index</span><span class="op" id="4687298">(</span><span class="builtintype" id="4687299">int</span><span class="op" id="4687302">(</span><span class="ident" id="4687303">x</span><span class="op" id="4687304">)</span><span class="op" id="4687305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687309">case</span>&nbsp;<span class="ident" id="4687314">reflect</span><span class="op" id="4687321">.</span><span class="ident" id="4687322">Map</span><span class="op" id="4687325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687330">if</span>&nbsp;<span class="op" id="4687333">!</span><span class="ident" id="4687334">index</span><span class="op" id="4687339">.</span><span class="ident" id="4687340">IsValid</span><span class="op" id="4687347">(</span><span class="op" id="4687348">)</span>&nbsp;<span class="op" id="4687350">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687356">index</span>&nbsp;<span class="op" id="4687362">=</span>&nbsp;<span class="ident" id="4687364">reflect</span><span class="op" id="4687371">.</span><span class="ident" id="4687372">Zero</span><span class="op" id="4687376">(</span><span class="ident" id="4687377">v</span><span class="op" id="4687378">.</span><span class="ident" id="4687379">Type</span><span class="op" id="4687383">(</span><span class="op" id="4687384">)</span><span class="op" id="4687385">.</span><span class="ident" id="4687386">Key</span><span class="op" id="4687389">(</span><span class="op" id="4687390">)</span><span class="op" id="4687391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687401">if</span>&nbsp;<span class="op" id="4687404">!</span><span class="ident" id="4687405">index</span><span class="op" id="4687410">.</span><span class="ident" id="4687411">Type</span><span class="op" id="4687415">(</span><span class="op" id="4687416">)</span><span class="op" id="4687417">.</span><span class="ident" id="4687418">AssignableTo</span><span class="op" id="4687430">(</span><span class="ident" id="4687431">v</span><span class="op" id="4687432">.</span><span class="ident" id="4687433">Type</span><span class="op" id="4687437">(</span><span class="op" id="4687438">)</span><span class="op" id="4687439">.</span><span class="ident" id="4687440">Key</span><span class="op" id="4687443">(</span><span class="op" id="4687444">)</span><span class="op" id="4687445">)</span>&nbsp;<span class="op" id="4687447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687453">return</span>&nbsp;<span class="ident" id="4687460">nil</span><span class="op" id="4687463">,</span>&nbsp;<span class="ident" id="4687465">fmt</span><span class="op" id="4687468">.</span><span class="ident" id="4687469">Errorf</span><span class="op" id="4687475">(</span><span class="string" id="4687476">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="4687505">,</span>&nbsp;<span class="ident" id="4687507">index</span><span class="op" id="4687512">.</span><span class="ident" id="4687513">Type</span><span class="op" id="4687517">(</span><span class="op" id="4687518">)</span><span class="op" id="4687519">,</span>&nbsp;<span class="ident" id="4687521">v</span><span class="op" id="4687522">.</span><span class="ident" id="4687523">Type</span><span class="op" id="4687527">(</span><span class="op" id="4687528">)</span><span class="op" id="4687529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687534">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687539">if</span>&nbsp;<span class="ident" id="4687542">x</span>&nbsp;<span class="op" id="4687544">:=</span>&nbsp;<span class="ident" id="4687547">v</span><span class="op" id="4687548">.</span><span class="ident" id="4687549">MapIndex</span><span class="op" id="4687557">(</span><span class="ident" id="4687558">index</span><span class="op" id="4687563">)</span><span class="op" id="4687564">;</span>&nbsp;<span class="ident" id="4687566">x</span><span class="op" id="4687567">.</span><span class="ident" id="4687568">IsValid</span><span class="op" id="4687575">(</span><span class="op" id="4687576">)</span>&nbsp;<span class="op" id="4687578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687584">v</span>&nbsp;<span class="op" id="4687586">=</span>&nbsp;<span class="ident" id="4687588">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687593">}</span>&nbsp;<span class="keyword" id="4687595">else</span>&nbsp;<span class="op" id="4687600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687606">v</span>&nbsp;<span class="op" id="4687608">=</span>&nbsp;<span class="ident" id="4687610">reflect</span><span class="op" id="4687617">.</span><span class="ident" id="4687618">Zero</span><span class="op" id="4687622">(</span><span class="ident" id="4687623">v</span><span class="op" id="4687624">.</span><span class="ident" id="4687625">Type</span><span class="op" id="4687629">(</span><span class="op" id="4687630">)</span><span class="op" id="4687631">.</span><span class="ident" id="4687632">Elem</span><span class="op" id="4687636">(</span><span class="op" id="4687637">)</span><span class="op" id="4687638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687643">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687647">default</span><span class="op" id="4687654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687659">return</span>&nbsp;<span class="ident" id="4687666">nil</span><span class="op" id="4687669">,</span>&nbsp;<span class="ident" id="4687671">fmt</span><span class="op" id="4687674">.</span><span class="ident" id="4687675">Errorf</span><span class="op" id="4687681">(</span><span class="string" id="4687682">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4687711">,</span>&nbsp;<span class="ident" id="4687713">v</span><span class="op" id="4687714">.</span><span class="ident" id="4687715">Type</span><span class="op" id="4687719">(</span><span class="op" id="4687720">)</span><span class="op" id="4687721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4687728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687731">return</span>&nbsp;<span class="ident" id="4687738">v</span><span class="op" id="4687739">.</span><span class="ident" id="4687740">Interface</span><span class="op" id="4687749">(</span><span class="op" id="4687750">)</span><span class="op" id="4687751">,</span>&nbsp;<span class="ident" id="4687753">nil</span><br>
<span class="lineno">150</span><span class="op" id="4687757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4687760">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4687771">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="4687856">func</span>&nbsp;<span class="ident" id="4687861">length</span><span class="op" id="4687867">(</span><span class="ident" id="4687868">item</span>&nbsp;<span class="keyword" id="4687873">interface</span><span class="op" id="4687882">{</span><span class="op" id="4687883">}</span><span class="op" id="4687884">)</span>&nbsp;<span class="op" id="4687886">(</span><span class="builtintype" id="4687887">int</span><span class="op" id="4687890">,</span>&nbsp;<span class="builtintype" id="4687892">error</span><span class="op" id="4687897">)</span>&nbsp;<span class="op" id="4687899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687902">v</span><span class="op" id="4687903">,</span>&nbsp;<span class="ident" id="4687905">isNil</span>&nbsp;<span class="op" id="4687911">:=</span>&nbsp;<span class="ident" id="4687914">indirect</span><span class="op" id="4687922">(</span><span class="ident" id="4687923">reflect</span><span class="op" id="4687930">.</span><span class="ident" id="4687931">ValueOf</span><span class="op" id="4687938">(</span><span class="ident" id="4687939">item</span><span class="op" id="4687943">)</span><span class="op" id="4687944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687947">if</span>&nbsp;<span class="ident" id="4687950">isNil</span>&nbsp;<span class="op" id="4687956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4687960">return</span>&nbsp;<span class="num" id="4687967">0</span><span class="op" id="4687968">,</span>&nbsp;<span class="ident" id="4687970">fmt</span><span class="op" id="4687973">.</span><span class="ident" id="4687974">Errorf</span><span class="op" id="4687980">(</span><span class="string" id="4687981">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4688001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688004">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688007">switch</span>&nbsp;<span class="ident" id="4688014">v</span><span class="op" id="4688015">.</span><span class="ident" id="4688016">Kind</span><span class="op" id="4688020">(</span><span class="op" id="4688021">)</span>&nbsp;<span class="op" id="4688023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688026">case</span>&nbsp;<span class="ident" id="4688031">reflect</span><span class="op" id="4688038">.</span><span class="ident" id="4688039">Array</span><span class="op" id="4688044">,</span>&nbsp;<span class="ident" id="4688046">reflect</span><span class="op" id="4688053">.</span><span class="ident" id="4688054">Chan</span><span class="op" id="4688058">,</span>&nbsp;<span class="ident" id="4688060">reflect</span><span class="op" id="4688067">.</span><span class="ident" id="4688068">Map</span><span class="op" id="4688071">,</span>&nbsp;<span class="ident" id="4688073">reflect</span><span class="op" id="4688080">.</span><span class="ident" id="4688081">Slice</span><span class="op" id="4688086">,</span>&nbsp;<span class="ident" id="4688088">reflect</span><span class="op" id="4688095">.</span><span class="ident" id="4688096">String</span><span class="op" id="4688102">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688106">return</span>&nbsp;<span class="ident" id="4688113">v</span><span class="op" id="4688114">.</span><span class="ident" id="4688115">Len</span><span class="op" id="4688118">(</span><span class="op" id="4688119">)</span><span class="op" id="4688120">,</span>&nbsp;<span class="ident" id="4688122">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688130">return</span>&nbsp;<span class="num" id="4688137">0</span><span class="op" id="4688138">,</span>&nbsp;<span class="ident" id="4688140">fmt</span><span class="op" id="4688143">.</span><span class="ident" id="4688144">Errorf</span><span class="op" id="4688150">(</span><span class="string" id="4688151">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4688167">,</span>&nbsp;<span class="ident" id="4688169">v</span><span class="op" id="4688170">.</span><span class="ident" id="4688171">Type</span><span class="op" id="4688175">(</span><span class="op" id="4688176">)</span><span class="op" id="4688177">)</span><br>
<span class="lineno">165</span><span class="op" id="4688179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4688182">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4688206">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="4688281">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4688366">func</span>&nbsp;<span class="ident" id="4688371">call</span><span class="op" id="4688375">(</span><span class="ident" id="4688376">fn</span>&nbsp;<span class="keyword" id="4688379">interface</span><span class="op" id="4688388">{</span><span class="op" id="4688389">}</span><span class="op" id="4688390">,</span>&nbsp;<span class="ident" id="4688392">args</span>&nbsp;<span class="op" id="4688397">...</span><span class="keyword" id="4688400">interface</span><span class="op" id="4688409">{</span><span class="op" id="4688410">}</span><span class="op" id="4688411">)</span>&nbsp;<span class="op" id="4688413">(</span><span class="keyword" id="4688414">interface</span><span class="op" id="4688423">{</span><span class="op" id="4688424">}</span><span class="op" id="4688425">,</span>&nbsp;<span class="builtintype" id="4688427">error</span><span class="op" id="4688432">)</span>&nbsp;<span class="op" id="4688434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4688437">v</span>&nbsp;<span class="op" id="4688439">:=</span>&nbsp;<span class="ident" id="4688442">reflect</span><span class="op" id="4688449">.</span><span class="ident" id="4688450">ValueOf</span><span class="op" id="4688457">(</span><span class="ident" id="4688458">fn</span><span class="op" id="4688460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4688463">typ</span>&nbsp;<span class="op" id="4688467">:=</span>&nbsp;<span class="ident" id="4688470">v</span><span class="op" id="4688471">.</span><span class="ident" id="4688472">Type</span><span class="op" id="4688476">(</span><span class="op" id="4688477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688480">if</span>&nbsp;<span class="ident" id="4688483">typ</span><span class="op" id="4688486">.</span><span class="ident" id="4688487">Kind</span><span class="op" id="4688491">(</span><span class="op" id="4688492">)</span>&nbsp;<span class="op" id="4688494">!=</span>&nbsp;<span class="ident" id="4688497">reflect</span><span class="op" id="4688504">.</span><span class="ident" id="4688505">Func</span>&nbsp;<span class="op" id="4688510">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688514">return</span>&nbsp;<span class="ident" id="4688521">nil</span><span class="op" id="4688524">,</span>&nbsp;<span class="ident" id="4688526">fmt</span><span class="op" id="4688529">.</span><span class="ident" id="4688530">Errorf</span><span class="op" id="4688536">(</span><span class="string" id="4688537">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4688562">,</span>&nbsp;<span class="ident" id="4688564">typ</span><span class="op" id="4688567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688573">if</span>&nbsp;<span class="op" id="4688576">!</span><span class="ident" id="4688577">goodFunc</span><span class="op" id="4688585">(</span><span class="ident" id="4688586">typ</span><span class="op" id="4688589">)</span>&nbsp;<span class="op" id="4688591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688595">return</span>&nbsp;<span class="ident" id="4688602">nil</span><span class="op" id="4688605">,</span>&nbsp;<span class="ident" id="4688607">fmt</span><span class="op" id="4688610">.</span><span class="ident" id="4688611">Errorf</span><span class="op" id="4688617">(</span><span class="string" id="4688618">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="4688666">,</span>&nbsp;<span class="ident" id="4688668">typ</span><span class="op" id="4688671">.</span><span class="ident" id="4688672">NumOut</span><span class="op" id="4688678">(</span><span class="op" id="4688679">)</span><span class="op" id="4688680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688683">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4688686">numIn</span>&nbsp;<span class="op" id="4688692">:=</span>&nbsp;<span class="ident" id="4688695">typ</span><span class="op" id="4688698">.</span><span class="ident" id="4688699">NumIn</span><span class="op" id="4688704">(</span><span class="op" id="4688705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688708">var</span>&nbsp;<span class="ident" id="4688712">dddType</span>&nbsp;<span class="ident" id="4688720">reflect</span><span class="op" id="4688727">.</span><span class="ident" id="4688728">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688734">if</span>&nbsp;<span class="ident" id="4688737">typ</span><span class="op" id="4688740">.</span><span class="ident" id="4688741">IsVariadic</span><span class="op" id="4688751">(</span><span class="op" id="4688752">)</span>&nbsp;<span class="op" id="4688754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688758">if</span>&nbsp;<span class="builtinfunc" id="4688761">len</span><span class="op" id="4688764">(</span><span class="ident" id="4688765">args</span><span class="op" id="4688769">)</span>&nbsp;<span class="op" id="4688771">&lt;</span>&nbsp;<span class="ident" id="4688773">numIn</span><span class="op" id="4688778">-</span><span class="num" id="4688779">1</span>&nbsp;<span class="op" id="4688781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688786">return</span>&nbsp;<span class="ident" id="4688793">nil</span><span class="op" id="4688796">,</span>&nbsp;<span class="ident" id="4688798">fmt</span><span class="op" id="4688801">.</span><span class="ident" id="4688802">Errorf</span><span class="op" id="4688808">(</span><span class="string" id="4688809">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="4688856">,</span>&nbsp;<span class="builtinfunc" id="4688858">len</span><span class="op" id="4688861">(</span><span class="ident" id="4688862">args</span><span class="op" id="4688866">)</span><span class="op" id="4688867">,</span>&nbsp;<span class="ident" id="4688869">numIn</span><span class="op" id="4688874">-</span><span class="num" id="4688875">1</span><span class="op" id="4688876">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4688884">dddType</span>&nbsp;<span class="op" id="4688892">=</span>&nbsp;<span class="ident" id="4688894">typ</span><span class="op" id="4688897">.</span><span class="ident" id="4688898">In</span><span class="op" id="4688900">(</span><span class="ident" id="4688901">numIn</span>&nbsp;<span class="op" id="4688907">-</span>&nbsp;<span class="num" id="4688909">1</span><span class="op" id="4688910">)</span><span class="op" id="4688911">.</span><span class="ident" id="4688912">Elem</span><span class="op" id="4688916">(</span><span class="op" id="4688917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4688920">}</span>&nbsp;<span class="keyword" id="4688922">else</span>&nbsp;<span class="op" id="4688927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688931">if</span>&nbsp;<span class="builtinfunc" id="4688934">len</span><span class="op" id="4688937">(</span><span class="ident" id="4688938">args</span><span class="op" id="4688942">)</span>&nbsp;<span class="op" id="4688944">!=</span>&nbsp;<span class="ident" id="4688947">numIn</span>&nbsp;<span class="op" id="4688953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4688958">return</span>&nbsp;<span class="ident" id="4688965">nil</span><span class="op" id="4688968">,</span>&nbsp;<span class="ident" id="4688970">fmt</span><span class="op" id="4688973">.</span><span class="ident" id="4688974">Errorf</span><span class="op" id="4688980">(</span><span class="string" id="4688981">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="4689019">,</span>&nbsp;<span class="builtinfunc" id="4689021">len</span><span class="op" id="4689024">(</span><span class="ident" id="4689025">args</span><span class="op" id="4689029">)</span><span class="op" id="4689030">,</span>&nbsp;<span class="ident" id="4689032">numIn</span><span class="op" id="4689037">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689047">argv</span>&nbsp;<span class="op" id="4689052">:=</span>&nbsp;<span class="builtinfunc" id="4689055">make</span><span class="op" id="4689059">(</span><span class="op" id="4689060">[</span><span class="op" id="4689061">]</span><span class="ident" id="4689062">reflect</span><span class="op" id="4689069">.</span><span class="ident" id="4689070">Value</span><span class="op" id="4689075">,</span>&nbsp;<span class="builtinfunc" id="4689077">len</span><span class="op" id="4689080">(</span><span class="ident" id="4689081">args</span><span class="op" id="4689085">)</span><span class="op" id="4689086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689089">for</span>&nbsp;<span class="ident" id="4689093">i</span><span class="op" id="4689094">,</span>&nbsp;<span class="ident" id="4689096">arg</span>&nbsp;<span class="op" id="4689100">:=</span>&nbsp;<span class="keyword" id="4689103">range</span>&nbsp;<span class="ident" id="4689109">args</span>&nbsp;<span class="op" id="4689114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689118">value</span>&nbsp;<span class="op" id="4689124">:=</span>&nbsp;<span class="ident" id="4689127">reflect</span><span class="op" id="4689134">.</span><span class="ident" id="4689135">ValueOf</span><span class="op" id="4689142">(</span><span class="ident" id="4689143">arg</span><span class="op" id="4689146">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4689150">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689211">var</span>&nbsp;<span class="ident" id="4689215">argType</span>&nbsp;<span class="ident" id="4689223">reflect</span><span class="op" id="4689230">.</span><span class="ident" id="4689231">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689238">if</span>&nbsp;<span class="op" id="4689241">!</span><span class="ident" id="4689242">typ</span><span class="op" id="4689245">.</span><span class="ident" id="4689246">IsVariadic</span><span class="op" id="4689256">(</span><span class="op" id="4689257">)</span>&nbsp;<span class="op" id="4689259">||</span>&nbsp;<span class="ident" id="4689262">i</span>&nbsp;<span class="op" id="4689264">&lt;</span>&nbsp;<span class="ident" id="4689266">numIn</span><span class="op" id="4689271">-</span><span class="num" id="4689272">1</span>&nbsp;<span class="op" id="4689274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689279">argType</span>&nbsp;<span class="op" id="4689287">=</span>&nbsp;<span class="ident" id="4689289">typ</span><span class="op" id="4689292">.</span><span class="ident" id="4689293">In</span><span class="op" id="4689295">(</span><span class="ident" id="4689296">i</span><span class="op" id="4689297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689301">}</span>&nbsp;<span class="keyword" id="4689303">else</span>&nbsp;<span class="op" id="4689308">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689313">argType</span>&nbsp;<span class="op" id="4689321">=</span>&nbsp;<span class="ident" id="4689323">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689337">if</span>&nbsp;<span class="op" id="4689340">!</span><span class="ident" id="4689341">value</span><span class="op" id="4689346">.</span><span class="ident" id="4689347">IsValid</span><span class="op" id="4689354">(</span><span class="op" id="4689355">)</span>&nbsp;<span class="op" id="4689357">&amp;&amp;</span>&nbsp;<span class="ident" id="4689360">canBeNil</span><span class="op" id="4689368">(</span><span class="ident" id="4689369">argType</span><span class="op" id="4689376">)</span>&nbsp;<span class="op" id="4689378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689383">value</span>&nbsp;<span class="op" id="4689389">=</span>&nbsp;<span class="ident" id="4689391">reflect</span><span class="op" id="4689398">.</span><span class="ident" id="4689399">Zero</span><span class="op" id="4689403">(</span><span class="ident" id="4689404">argType</span><span class="op" id="4689411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689415">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689419">if</span>&nbsp;<span class="op" id="4689422">!</span><span class="ident" id="4689423">value</span><span class="op" id="4689428">.</span><span class="ident" id="4689429">Type</span><span class="op" id="4689433">(</span><span class="op" id="4689434">)</span><span class="op" id="4689435">.</span><span class="ident" id="4689436">AssignableTo</span><span class="op" id="4689448">(</span><span class="ident" id="4689449">argType</span><span class="op" id="4689456">)</span>&nbsp;<span class="op" id="4689458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689463">return</span>&nbsp;<span class="ident" id="4689470">nil</span><span class="op" id="4689473">,</span>&nbsp;<span class="ident" id="4689475">fmt</span><span class="op" id="4689478">.</span><span class="ident" id="4689479">Errorf</span><span class="op" id="4689485">(</span><span class="string" id="4689486">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="4689520">,</span>&nbsp;<span class="ident" id="4689522">i</span><span class="op" id="4689523">,</span>&nbsp;<span class="ident" id="4689525">value</span><span class="op" id="4689530">.</span><span class="ident" id="4689531">Type</span><span class="op" id="4689535">(</span><span class="op" id="4689536">)</span><span class="op" id="4689537">,</span>&nbsp;<span class="ident" id="4689539">argType</span><span class="op" id="4689546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689554">argv</span><span class="op" id="4689558">[</span><span class="ident" id="4689559">i</span><span class="op" id="4689560">]</span>&nbsp;<span class="op" id="4689562">=</span>&nbsp;<span class="ident" id="4689564">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689571">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689574">result</span>&nbsp;<span class="op" id="4689581">:=</span>&nbsp;<span class="ident" id="4689584">v</span><span class="op" id="4689585">.</span><span class="ident" id="4689586">Call</span><span class="op" id="4689590">(</span><span class="ident" id="4689591">argv</span><span class="op" id="4689595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689598">if</span>&nbsp;<span class="builtinfunc" id="4689601">len</span><span class="op" id="4689604">(</span><span class="ident" id="4689605">result</span><span class="op" id="4689611">)</span>&nbsp;<span class="op" id="4689613">==</span>&nbsp;<span class="num" id="4689616">2</span>&nbsp;<span class="op" id="4689618">&amp;&amp;</span>&nbsp;<span class="op" id="4689621">!</span><span class="ident" id="4689622">result</span><span class="op" id="4689628">[</span><span class="num" id="4689629">1</span><span class="op" id="4689630">]</span><span class="op" id="4689631">.</span><span class="ident" id="4689632">IsNil</span><span class="op" id="4689637">(</span><span class="op" id="4689638">)</span>&nbsp;<span class="op" id="4689640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689644">return</span>&nbsp;<span class="ident" id="4689651">result</span><span class="op" id="4689657">[</span><span class="num" id="4689658">0</span><span class="op" id="4689659">]</span><span class="op" id="4689660">.</span><span class="ident" id="4689661">Interface</span><span class="op" id="4689670">(</span><span class="op" id="4689671">)</span><span class="op" id="4689672">,</span>&nbsp;<span class="ident" id="4689674">result</span><span class="op" id="4689680">[</span><span class="num" id="4689681">1</span><span class="op" id="4689682">]</span><span class="op" id="4689683">.</span><span class="ident" id="4689684">Interface</span><span class="op" id="4689693">(</span><span class="op" id="4689694">)</span><span class="op" id="4689695">.</span><span class="op" id="4689696">(</span><span class="builtintype" id="4689697">error</span><span class="op" id="4689702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4689705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689708">return</span>&nbsp;<span class="ident" id="4689715">result</span><span class="op" id="4689721">[</span><span class="num" id="4689722">0</span><span class="op" id="4689723">]</span><span class="op" id="4689724">.</span><span class="ident" id="4689725">Interface</span><span class="op" id="4689734">(</span><span class="op" id="4689735">)</span><span class="op" id="4689736">,</span>&nbsp;<span class="ident" id="4689738">nil</span><br>
<span class="lineno">215</span><span class="op" id="4689742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4689745">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4689764">func</span>&nbsp;<span class="ident" id="4689769">truth</span><span class="op" id="4689774">(</span><span class="ident" id="4689775">a</span>&nbsp;<span class="keyword" id="4689777">interface</span><span class="op" id="4689786">{</span><span class="op" id="4689787">}</span><span class="op" id="4689788">)</span>&nbsp;<span class="builtintype" id="4689790">bool</span>&nbsp;<span class="op" id="4689795">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4689798">t</span><span class="op" id="4689799">,</span>&nbsp;<span class="ident" id="4689801">_</span>&nbsp;<span class="op" id="4689803">:=</span>&nbsp;<span class="ident" id="4689806">isTrue</span><span class="op" id="4689812">(</span><span class="ident" id="4689813">reflect</span><span class="op" id="4689820">.</span><span class="ident" id="4689821">ValueOf</span><span class="op" id="4689828">(</span><span class="ident" id="4689829">a</span><span class="op" id="4689830">)</span><span class="op" id="4689831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4689834">return</span>&nbsp;<span class="ident" id="4689841">t</span><br>
<span class="lineno"></span><span class="op" id="4689843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4689846">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="4689906">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4689971">func</span>&nbsp;<span class="ident" id="4689976">and</span><span class="op" id="4689979">(</span><span class="ident" id="4689980">arg0</span>&nbsp;<span class="keyword" id="4689985">interface</span><span class="op" id="4689994">{</span><span class="op" id="4689995">}</span><span class="op" id="4689996">,</span>&nbsp;<span class="ident" id="4689998">args</span>&nbsp;<span class="op" id="4690003">...</span><span class="keyword" id="4690006">interface</span><span class="op" id="4690015">{</span><span class="op" id="4690016">}</span><span class="op" id="4690017">)</span>&nbsp;<span class="keyword" id="4690019">interface</span><span class="op" id="4690028">{</span><span class="op" id="4690029">}</span>&nbsp;<span class="op" id="4690031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690034">if</span>&nbsp;<span class="op" id="4690037">!</span><span class="ident" id="4690038">truth</span><span class="op" id="4690043">(</span><span class="ident" id="4690044">arg0</span><span class="op" id="4690048">)</span>&nbsp;<span class="op" id="4690050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690054">return</span>&nbsp;<span class="ident" id="4690061">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690067">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690070">for</span>&nbsp;<span class="ident" id="4690074">i</span>&nbsp;<span class="op" id="4690076">:=</span>&nbsp;<span class="keyword" id="4690079">range</span>&nbsp;<span class="ident" id="4690085">args</span>&nbsp;<span class="op" id="4690090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690094">arg0</span>&nbsp;<span class="op" id="4690099">=</span>&nbsp;<span class="ident" id="4690101">args</span><span class="op" id="4690105">[</span><span class="ident" id="4690106">i</span><span class="op" id="4690107">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690111">if</span>&nbsp;<span class="op" id="4690114">!</span><span class="ident" id="4690115">truth</span><span class="op" id="4690120">(</span><span class="ident" id="4690121">arg0</span><span class="op" id="4690125">)</span>&nbsp;<span class="op" id="4690127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690132">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690140">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690146">return</span>&nbsp;<span class="ident" id="4690153">arg0</span><br>
<span class="lineno"></span><span class="op" id="4690158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4690161">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="4690219">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4690283">func</span>&nbsp;<span class="ident" id="4690288">or</span><span class="op" id="4690290">(</span><span class="ident" id="4690291">arg0</span>&nbsp;<span class="keyword" id="4690296">interface</span><span class="op" id="4690305">{</span><span class="op" id="4690306">}</span><span class="op" id="4690307">,</span>&nbsp;<span class="ident" id="4690309">args</span>&nbsp;<span class="op" id="4690314">...</span><span class="keyword" id="4690317">interface</span><span class="op" id="4690326">{</span><span class="op" id="4690327">}</span><span class="op" id="4690328">)</span>&nbsp;<span class="keyword" id="4690330">interface</span><span class="op" id="4690339">{</span><span class="op" id="4690340">}</span>&nbsp;<span class="op" id="4690342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690345">if</span>&nbsp;<span class="ident" id="4690348">truth</span><span class="op" id="4690353">(</span><span class="ident" id="4690354">arg0</span><span class="op" id="4690358">)</span>&nbsp;<span class="op" id="4690360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690364">return</span>&nbsp;<span class="ident" id="4690371">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690377">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690380">for</span>&nbsp;<span class="ident" id="4690384">i</span>&nbsp;<span class="op" id="4690386">:=</span>&nbsp;<span class="keyword" id="4690389">range</span>&nbsp;<span class="ident" id="4690395">args</span>&nbsp;<span class="op" id="4690400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690404">arg0</span>&nbsp;<span class="op" id="4690409">=</span>&nbsp;<span class="ident" id="4690411">args</span><span class="op" id="4690415">[</span><span class="ident" id="4690416">i</span><span class="op" id="4690417">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690421">if</span>&nbsp;<span class="ident" id="4690424">truth</span><span class="op" id="4690429">(</span><span class="ident" id="4690430">arg0</span><span class="op" id="4690434">)</span>&nbsp;<span class="op" id="4690436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690441">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690449">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4690452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690455">return</span>&nbsp;<span class="ident" id="4690462">arg0</span><br>
<span class="lineno"></span><span class="op" id="4690467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4690470">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="4690523">func</span>&nbsp;<span class="ident" id="4690528">not</span><span class="op" id="4690531">(</span><span class="ident" id="4690532">arg</span>&nbsp;<span class="keyword" id="4690536">interface</span><span class="op" id="4690545">{</span><span class="op" id="4690546">}</span><span class="op" id="4690547">)</span>&nbsp;<span class="op" id="4690549">(</span><span class="ident" id="4690550">truth</span>&nbsp;<span class="builtintype" id="4690556">bool</span><span class="op" id="4690560">)</span>&nbsp;<span class="op" id="4690562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690565">truth</span><span class="op" id="4690570">,</span>&nbsp;<span class="ident" id="4690572">_</span>&nbsp;<span class="op" id="4690574">=</span>&nbsp;<span class="ident" id="4690576">isTrue</span><span class="op" id="4690582">(</span><span class="ident" id="4690583">reflect</span><span class="op" id="4690590">.</span><span class="ident" id="4690591">ValueOf</span><span class="op" id="4690598">(</span><span class="ident" id="4690599">arg</span><span class="op" id="4690602">)</span><span class="op" id="4690603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4690606">return</span>&nbsp;<span class="op" id="4690613">!</span><span class="ident" id="4690614">truth</span><br>
<span class="lineno"></span><span class="op" id="4690620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4690623">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4690639">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4690712">var</span>&nbsp;<span class="op" id="4690716">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690719">errBadComparisonType</span>&nbsp;<span class="op" id="4690740">=</span>&nbsp;<span class="ident" id="4690742">errors</span><span class="op" id="4690748">.</span><span class="ident" id="4690749">New</span><span class="op" id="4690752">(</span><span class="string" id="4690753">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4690782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690785">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4690806">=</span>&nbsp;<span class="ident" id="4690808">errors</span><span class="op" id="4690814">.</span><span class="ident" id="4690815">New</span><span class="op" id="4690818">(</span><span class="string" id="4690819">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4690854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690857">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4690878">=</span>&nbsp;<span class="ident" id="4690880">errors</span><span class="op" id="4690886">.</span><span class="ident" id="4690887">New</span><span class="op" id="4690890">(</span><span class="string" id="4690891">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4690924">)</span><br>
<span class="lineno"></span><span class="op" id="4690926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="4690929">type</span>&nbsp;<span class="ident" id="4690934">kind</span>&nbsp;<span class="builtintype" id="4690939">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4690944">const</span>&nbsp;<span class="op" id="4690950">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690953">invalidKind</span>&nbsp;<span class="ident" id="4690965">kind</span>&nbsp;<span class="op" id="4690970">=</span>&nbsp;<span class="ident" id="4690972">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690978">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4690988">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691001">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691010">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691021">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691034">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691046">uintKind</span><br>
<span class="lineno"></span><span class="op" id="4691055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4691058">func</span>&nbsp;<span class="ident" id="4691063">basicKind</span><span class="op" id="4691072">(</span><span class="ident" id="4691073">v</span>&nbsp;<span class="ident" id="4691075">reflect</span><span class="op" id="4691082">.</span><span class="ident" id="4691083">Value</span><span class="op" id="4691088">)</span>&nbsp;<span class="op" id="4691090">(</span><span class="ident" id="4691091">kind</span><span class="op" id="4691095">,</span>&nbsp;<span class="builtintype" id="4691097">error</span><span class="op" id="4691102">)</span>&nbsp;<span class="op" id="4691104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691107">switch</span>&nbsp;<span class="ident" id="4691114">v</span><span class="op" id="4691115">.</span><span class="ident" id="4691116">Kind</span><span class="op" id="4691120">(</span><span class="op" id="4691121">)</span>&nbsp;<span class="op" id="4691123">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691126">case</span>&nbsp;<span class="ident" id="4691131">reflect</span><span class="op" id="4691138">.</span><span class="ident" id="4691139">Bool</span><span class="op" id="4691143">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691147">return</span>&nbsp;<span class="ident" id="4691154">boolKind</span><span class="op" id="4691162">,</span>&nbsp;<span class="ident" id="4691164">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691169">case</span>&nbsp;<span class="ident" id="4691174">reflect</span><span class="op" id="4691181">.</span><span class="ident" id="4691182">Int</span><span class="op" id="4691185">,</span>&nbsp;<span class="ident" id="4691187">reflect</span><span class="op" id="4691194">.</span><span class="ident" id="4691195">Int8</span><span class="op" id="4691199">,</span>&nbsp;<span class="ident" id="4691201">reflect</span><span class="op" id="4691208">.</span><span class="ident" id="4691209">Int16</span><span class="op" id="4691214">,</span>&nbsp;<span class="ident" id="4691216">reflect</span><span class="op" id="4691223">.</span><span class="ident" id="4691224">Int32</span><span class="op" id="4691229">,</span>&nbsp;<span class="ident" id="4691231">reflect</span><span class="op" id="4691238">.</span><span class="ident" id="4691239">Int64</span><span class="op" id="4691244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691248">return</span>&nbsp;<span class="ident" id="4691255">intKind</span><span class="op" id="4691262">,</span>&nbsp;<span class="ident" id="4691264">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691269">case</span>&nbsp;<span class="ident" id="4691274">reflect</span><span class="op" id="4691281">.</span><span class="ident" id="4691282">Uint</span><span class="op" id="4691286">,</span>&nbsp;<span class="ident" id="4691288">reflect</span><span class="op" id="4691295">.</span><span class="ident" id="4691296">Uint8</span><span class="op" id="4691301">,</span>&nbsp;<span class="ident" id="4691303">reflect</span><span class="op" id="4691310">.</span><span class="ident" id="4691311">Uint16</span><span class="op" id="4691317">,</span>&nbsp;<span class="ident" id="4691319">reflect</span><span class="op" id="4691326">.</span><span class="ident" id="4691327">Uint32</span><span class="op" id="4691333">,</span>&nbsp;<span class="ident" id="4691335">reflect</span><span class="op" id="4691342">.</span><span class="ident" id="4691343">Uint64</span><span class="op" id="4691349">,</span>&nbsp;<span class="ident" id="4691351">reflect</span><span class="op" id="4691358">.</span><span class="ident" id="4691359">Uintptr</span><span class="op" id="4691366">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691370">return</span>&nbsp;<span class="ident" id="4691377">uintKind</span><span class="op" id="4691385">,</span>&nbsp;<span class="ident" id="4691387">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691392">case</span>&nbsp;<span class="ident" id="4691397">reflect</span><span class="op" id="4691404">.</span><span class="ident" id="4691405">Float32</span><span class="op" id="4691412">,</span>&nbsp;<span class="ident" id="4691414">reflect</span><span class="op" id="4691421">.</span><span class="ident" id="4691422">Float64</span><span class="op" id="4691429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691433">return</span>&nbsp;<span class="ident" id="4691440">floatKind</span><span class="op" id="4691449">,</span>&nbsp;<span class="ident" id="4691451">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691456">case</span>&nbsp;<span class="ident" id="4691461">reflect</span><span class="op" id="4691468">.</span><span class="ident" id="4691469">Complex64</span><span class="op" id="4691478">,</span>&nbsp;<span class="ident" id="4691480">reflect</span><span class="op" id="4691487">.</span><span class="ident" id="4691488">Complex128</span><span class="op" id="4691498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691502">return</span>&nbsp;<span class="ident" id="4691509">complexKind</span><span class="op" id="4691520">,</span>&nbsp;<span class="ident" id="4691522">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691527">case</span>&nbsp;<span class="ident" id="4691532">reflect</span><span class="op" id="4691539">.</span><span class="ident" id="4691540">String</span><span class="op" id="4691546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691550">return</span>&nbsp;<span class="ident" id="4691557">stringKind</span><span class="op" id="4691567">,</span>&nbsp;<span class="ident" id="4691569">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4691574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691577">return</span>&nbsp;<span class="ident" id="4691584">invalidKind</span><span class="op" id="4691595">,</span>&nbsp;<span class="ident" id="4691597">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="4691618">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="4691621">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="4691676">func</span>&nbsp;<span class="ident" id="4691681">eq</span><span class="op" id="4691683">(</span><span class="ident" id="4691684">arg1</span>&nbsp;<span class="keyword" id="4691689">interface</span><span class="op" id="4691698">{</span><span class="op" id="4691699">}</span><span class="op" id="4691700">,</span>&nbsp;<span class="ident" id="4691702">arg2</span>&nbsp;<span class="op" id="4691707">...</span><span class="keyword" id="4691710">interface</span><span class="op" id="4691719">{</span><span class="op" id="4691720">}</span><span class="op" id="4691721">)</span>&nbsp;<span class="op" id="4691723">(</span><span class="builtintype" id="4691724">bool</span><span class="op" id="4691728">,</span>&nbsp;<span class="builtintype" id="4691730">error</span><span class="op" id="4691735">)</span>&nbsp;<span class="op" id="4691737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691740">v1</span>&nbsp;<span class="op" id="4691743">:=</span>&nbsp;<span class="ident" id="4691746">reflect</span><span class="op" id="4691753">.</span><span class="ident" id="4691754">ValueOf</span><span class="op" id="4691761">(</span><span class="ident" id="4691762">arg1</span><span class="op" id="4691766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691769">k1</span><span class="op" id="4691771">,</span>&nbsp;<span class="ident" id="4691773">err</span>&nbsp;<span class="op" id="4691777">:=</span>&nbsp;<span class="ident" id="4691780">basicKind</span><span class="op" id="4691789">(</span><span class="ident" id="4691790">v1</span><span class="op" id="4691792">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691795">if</span>&nbsp;<span class="ident" id="4691798">err</span>&nbsp;<span class="op" id="4691802">!=</span>&nbsp;<span class="ident" id="4691805">nil</span>&nbsp;<span class="op" id="4691809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691813">return</span>&nbsp;<span class="ident" id="4691820">false</span><span class="op" id="4691825">,</span>&nbsp;<span class="ident" id="4691827">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4691832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691835">if</span>&nbsp;<span class="builtinfunc" id="4691838">len</span><span class="op" id="4691841">(</span><span class="ident" id="4691842">arg2</span><span class="op" id="4691846">)</span>&nbsp;<span class="op" id="4691848">==</span>&nbsp;<span class="num" id="4691851">0</span>&nbsp;<span class="op" id="4691853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691857">return</span>&nbsp;<span class="ident" id="4691864">false</span><span class="op" id="4691869">,</span>&nbsp;<span class="ident" id="4691871">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4691888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691891">for</span>&nbsp;<span class="ident" id="4691895">_</span><span class="op" id="4691896">,</span>&nbsp;<span class="ident" id="4691898">arg</span>&nbsp;<span class="op" id="4691902">:=</span>&nbsp;<span class="keyword" id="4691905">range</span>&nbsp;<span class="ident" id="4691911">arg2</span>&nbsp;<span class="op" id="4691916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691920">v2</span>&nbsp;<span class="op" id="4691923">:=</span>&nbsp;<span class="ident" id="4691926">reflect</span><span class="op" id="4691933">.</span><span class="ident" id="4691934">ValueOf</span><span class="op" id="4691941">(</span><span class="ident" id="4691942">arg</span><span class="op" id="4691945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4691949">k2</span><span class="op" id="4691951">,</span>&nbsp;<span class="ident" id="4691953">err</span>&nbsp;<span class="op" id="4691957">:=</span>&nbsp;<span class="ident" id="4691960">basicKind</span><span class="op" id="4691969">(</span><span class="ident" id="4691970">v2</span><span class="op" id="4691972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691976">if</span>&nbsp;<span class="ident" id="4691979">err</span>&nbsp;<span class="op" id="4691983">!=</span>&nbsp;<span class="ident" id="4691986">nil</span>&nbsp;<span class="op" id="4691990">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4691995">return</span>&nbsp;<span class="ident" id="4692002">false</span><span class="op" id="4692007">,</span>&nbsp;<span class="ident" id="4692009">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692019">truth</span>&nbsp;<span class="op" id="4692025">:=</span>&nbsp;<span class="ident" id="4692028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692036">if</span>&nbsp;<span class="ident" id="4692039">k1</span>&nbsp;<span class="op" id="4692042">!=</span>&nbsp;<span class="ident" id="4692045">k2</span>&nbsp;<span class="op" id="4692048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4692053">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692127">switch</span>&nbsp;<span class="op" id="4692134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692139">case</span>&nbsp;<span class="ident" id="4692144">k1</span>&nbsp;<span class="op" id="4692147">==</span>&nbsp;<span class="ident" id="4692150">intKind</span>&nbsp;<span class="op" id="4692158">&amp;&amp;</span>&nbsp;<span class="ident" id="4692161">k2</span>&nbsp;<span class="op" id="4692164">==</span>&nbsp;<span class="ident" id="4692167">uintKind</span><span class="op" id="4692175">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692181">truth</span>&nbsp;<span class="op" id="4692187">=</span>&nbsp;<span class="ident" id="4692189">v1</span><span class="op" id="4692191">.</span><span class="ident" id="4692192">Int</span><span class="op" id="4692195">(</span><span class="op" id="4692196">)</span>&nbsp;<span class="op" id="4692198">&gt;=</span>&nbsp;<span class="num" id="4692201">0</span>&nbsp;<span class="op" id="4692203">&amp;&amp;</span>&nbsp;<span class="ident" id="4692206">uint64</span><span class="op" id="4692212">(</span><span class="ident" id="4692213">v1</span><span class="op" id="4692215">.</span><span class="ident" id="4692216">Int</span><span class="op" id="4692219">(</span><span class="op" id="4692220">)</span><span class="op" id="4692221">)</span>&nbsp;<span class="op" id="4692223">==</span>&nbsp;<span class="ident" id="4692226">v2</span><span class="op" id="4692228">.</span><span class="ident" id="4692229">Uint</span><span class="op" id="4692233">(</span><span class="op" id="4692234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692239">case</span>&nbsp;<span class="ident" id="4692244">k1</span>&nbsp;<span class="op" id="4692247">==</span>&nbsp;<span class="ident" id="4692250">uintKind</span>&nbsp;<span class="op" id="4692259">&amp;&amp;</span>&nbsp;<span class="ident" id="4692262">k2</span>&nbsp;<span class="op" id="4692265">==</span>&nbsp;<span class="ident" id="4692268">intKind</span><span class="op" id="4692275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692281">truth</span>&nbsp;<span class="op" id="4692287">=</span>&nbsp;<span class="ident" id="4692289">v2</span><span class="op" id="4692291">.</span><span class="ident" id="4692292">Int</span><span class="op" id="4692295">(</span><span class="op" id="4692296">)</span>&nbsp;<span class="op" id="4692298">&gt;=</span>&nbsp;<span class="num" id="4692301">0</span>&nbsp;<span class="op" id="4692303">&amp;&amp;</span>&nbsp;<span class="ident" id="4692306">v1</span><span class="op" id="4692308">.</span><span class="ident" id="4692309">Uint</span><span class="op" id="4692313">(</span><span class="op" id="4692314">)</span>&nbsp;<span class="op" id="4692316">==</span>&nbsp;<span class="ident" id="4692319">uint64</span><span class="op" id="4692325">(</span><span class="ident" id="4692326">v2</span><span class="op" id="4692328">.</span><span class="ident" id="4692329">Int</span><span class="op" id="4692332">(</span><span class="op" id="4692333">)</span><span class="op" id="4692334">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692339">default</span><span class="op" id="4692346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692352">return</span>&nbsp;<span class="ident" id="4692359">false</span><span class="op" id="4692364">,</span>&nbsp;<span class="ident" id="4692366">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692390">}</span>&nbsp;<span class="keyword" id="4692392">else</span>&nbsp;<span class="op" id="4692397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692402">switch</span>&nbsp;<span class="ident" id="4692409">k1</span>&nbsp;<span class="op" id="4692412">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692417">case</span>&nbsp;<span class="ident" id="4692422">boolKind</span><span class="op" id="4692430">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692436">truth</span>&nbsp;<span class="op" id="4692442">=</span>&nbsp;<span class="ident" id="4692444">v1</span><span class="op" id="4692446">.</span><span class="ident" id="4692447">Bool</span><span class="op" id="4692451">(</span><span class="op" id="4692452">)</span>&nbsp;<span class="op" id="4692454">==</span>&nbsp;<span class="ident" id="4692457">v2</span><span class="op" id="4692459">.</span><span class="ident" id="4692460">Bool</span><span class="op" id="4692464">(</span><span class="op" id="4692465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692470">case</span>&nbsp;<span class="ident" id="4692475">complexKind</span><span class="op" id="4692486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692492">truth</span>&nbsp;<span class="op" id="4692498">=</span>&nbsp;<span class="ident" id="4692500">v1</span><span class="op" id="4692502">.</span><span class="ident" id="4692503">Complex</span><span class="op" id="4692510">(</span><span class="op" id="4692511">)</span>&nbsp;<span class="op" id="4692513">==</span>&nbsp;<span class="ident" id="4692516">v2</span><span class="op" id="4692518">.</span><span class="ident" id="4692519">Complex</span><span class="op" id="4692526">(</span><span class="op" id="4692527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692532">case</span>&nbsp;<span class="ident" id="4692537">floatKind</span><span class="op" id="4692546">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692552">truth</span>&nbsp;<span class="op" id="4692558">=</span>&nbsp;<span class="ident" id="4692560">v1</span><span class="op" id="4692562">.</span><span class="ident" id="4692563">Float</span><span class="op" id="4692568">(</span><span class="op" id="4692569">)</span>&nbsp;<span class="op" id="4692571">==</span>&nbsp;<span class="ident" id="4692574">v2</span><span class="op" id="4692576">.</span><span class="ident" id="4692577">Float</span><span class="op" id="4692582">(</span><span class="op" id="4692583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692588">case</span>&nbsp;<span class="ident" id="4692593">intKind</span><span class="op" id="4692600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692606">truth</span>&nbsp;<span class="op" id="4692612">=</span>&nbsp;<span class="ident" id="4692614">v1</span><span class="op" id="4692616">.</span><span class="ident" id="4692617">Int</span><span class="op" id="4692620">(</span><span class="op" id="4692621">)</span>&nbsp;<span class="op" id="4692623">==</span>&nbsp;<span class="ident" id="4692626">v2</span><span class="op" id="4692628">.</span><span class="ident" id="4692629">Int</span><span class="op" id="4692632">(</span><span class="op" id="4692633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692638">case</span>&nbsp;<span class="ident" id="4692643">stringKind</span><span class="op" id="4692653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692659">truth</span>&nbsp;<span class="op" id="4692665">=</span>&nbsp;<span class="ident" id="4692667">v1</span><span class="op" id="4692669">.</span><span class="ident" id="4692670">String</span><span class="op" id="4692676">(</span><span class="op" id="4692677">)</span>&nbsp;<span class="op" id="4692679">==</span>&nbsp;<span class="ident" id="4692682">v2</span><span class="op" id="4692684">.</span><span class="ident" id="4692685">String</span><span class="op" id="4692691">(</span><span class="op" id="4692692">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692697">case</span>&nbsp;<span class="ident" id="4692702">uintKind</span><span class="op" id="4692710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692716">truth</span>&nbsp;<span class="op" id="4692722">=</span>&nbsp;<span class="ident" id="4692724">v1</span><span class="op" id="4692726">.</span><span class="ident" id="4692727">Uint</span><span class="op" id="4692731">(</span><span class="op" id="4692732">)</span>&nbsp;<span class="op" id="4692734">==</span>&nbsp;<span class="ident" id="4692737">v2</span><span class="op" id="4692739">.</span><span class="ident" id="4692740">Uint</span><span class="op" id="4692744">(</span><span class="op" id="4692745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692750">default</span><span class="op" id="4692757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4692763">panic</span><span class="op" id="4692768">(</span><span class="string" id="4692769">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4692783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692788">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692796">if</span>&nbsp;<span class="ident" id="4692799">truth</span>&nbsp;<span class="op" id="4692805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692810">return</span>&nbsp;<span class="ident" id="4692817">true</span><span class="op" id="4692821">,</span>&nbsp;<span class="ident" id="4692823">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4692832">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4692835">return</span>&nbsp;<span class="ident" id="4692842">false</span><span class="op" id="4692847">,</span>&nbsp;<span class="ident" id="4692849">nil</span><br>
<span class="lineno"></span><span class="op" id="4692853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4692856">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4692895">func</span>&nbsp;<span class="ident" id="4692900">ne</span><span class="op" id="4692902">(</span><span class="ident" id="4692903">arg1</span><span class="op" id="4692907">,</span>&nbsp;<span class="ident" id="4692909">arg2</span>&nbsp;<span class="keyword" id="4692914">interface</span><span class="op" id="4692923">{</span><span class="op" id="4692924">}</span><span class="op" id="4692925">)</span>&nbsp;<span class="op" id="4692927">(</span><span class="builtintype" id="4692928">bool</span><span class="op" id="4692932">,</span>&nbsp;<span class="builtintype" id="4692934">error</span><span class="op" id="4692939">)</span>&nbsp;<span class="op" id="4692941">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4692944">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4692973">equal</span><span class="op" id="4692978">,</span>&nbsp;<span class="ident" id="4692980">err</span>&nbsp;<span class="op" id="4692984">:=</span>&nbsp;<span class="ident" id="4692987">eq</span><span class="op" id="4692989">(</span><span class="ident" id="4692990">arg1</span><span class="op" id="4692994">,</span>&nbsp;<span class="ident" id="4692996">arg2</span><span class="op" id="4693000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693003">return</span>&nbsp;<span class="op" id="4693010">!</span><span class="ident" id="4693011">equal</span><span class="op" id="4693016">,</span>&nbsp;<span class="ident" id="4693018">err</span><br>
<span class="lineno"></span><span class="op" id="4693022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="4693025">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4693063">func</span>&nbsp;<span class="ident" id="4693068">lt</span><span class="op" id="4693070">(</span><span class="ident" id="4693071">arg1</span><span class="op" id="4693075">,</span>&nbsp;<span class="ident" id="4693077">arg2</span>&nbsp;<span class="keyword" id="4693082">interface</span><span class="op" id="4693091">{</span><span class="op" id="4693092">}</span><span class="op" id="4693093">)</span>&nbsp;<span class="op" id="4693095">(</span><span class="builtintype" id="4693096">bool</span><span class="op" id="4693100">,</span>&nbsp;<span class="builtintype" id="4693102">error</span><span class="op" id="4693107">)</span>&nbsp;<span class="op" id="4693109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693112">v1</span>&nbsp;<span class="op" id="4693115">:=</span>&nbsp;<span class="ident" id="4693118">reflect</span><span class="op" id="4693125">.</span><span class="ident" id="4693126">ValueOf</span><span class="op" id="4693133">(</span><span class="ident" id="4693134">arg1</span><span class="op" id="4693138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693141">k1</span><span class="op" id="4693143">,</span>&nbsp;<span class="ident" id="4693145">err</span>&nbsp;<span class="op" id="4693149">:=</span>&nbsp;<span class="ident" id="4693152">basicKind</span><span class="op" id="4693161">(</span><span class="ident" id="4693162">v1</span><span class="op" id="4693164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693167">if</span>&nbsp;<span class="ident" id="4693170">err</span>&nbsp;<span class="op" id="4693174">!=</span>&nbsp;<span class="ident" id="4693177">nil</span>&nbsp;<span class="op" id="4693181">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693185">return</span>&nbsp;<span class="ident" id="4693192">false</span><span class="op" id="4693197">,</span>&nbsp;<span class="ident" id="4693199">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693207">v2</span>&nbsp;<span class="op" id="4693210">:=</span>&nbsp;<span class="ident" id="4693213">reflect</span><span class="op" id="4693220">.</span><span class="ident" id="4693221">ValueOf</span><span class="op" id="4693228">(</span><span class="ident" id="4693229">arg2</span><span class="op" id="4693233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693236">k2</span><span class="op" id="4693238">,</span>&nbsp;<span class="ident" id="4693240">err</span>&nbsp;<span class="op" id="4693244">:=</span>&nbsp;<span class="ident" id="4693247">basicKind</span><span class="op" id="4693256">(</span><span class="ident" id="4693257">v2</span><span class="op" id="4693259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693262">if</span>&nbsp;<span class="ident" id="4693265">err</span>&nbsp;<span class="op" id="4693269">!=</span>&nbsp;<span class="ident" id="4693272">nil</span>&nbsp;<span class="op" id="4693276">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693280">return</span>&nbsp;<span class="ident" id="4693287">false</span><span class="op" id="4693292">,</span>&nbsp;<span class="ident" id="4693294">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693302">truth</span>&nbsp;<span class="op" id="4693308">:=</span>&nbsp;<span class="ident" id="4693311">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693318">if</span>&nbsp;<span class="ident" id="4693321">k1</span>&nbsp;<span class="op" id="4693324">!=</span>&nbsp;<span class="ident" id="4693327">k2</span>&nbsp;<span class="op" id="4693330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4693334">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693407">switch</span>&nbsp;<span class="op" id="4693414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693418">case</span>&nbsp;<span class="ident" id="4693423">k1</span>&nbsp;<span class="op" id="4693426">==</span>&nbsp;<span class="ident" id="4693429">intKind</span>&nbsp;<span class="op" id="4693437">&amp;&amp;</span>&nbsp;<span class="ident" id="4693440">k2</span>&nbsp;<span class="op" id="4693443">==</span>&nbsp;<span class="ident" id="4693446">uintKind</span><span class="op" id="4693454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693459">truth</span>&nbsp;<span class="op" id="4693465">=</span>&nbsp;<span class="ident" id="4693467">v1</span><span class="op" id="4693469">.</span><span class="ident" id="4693470">Int</span><span class="op" id="4693473">(</span><span class="op" id="4693474">)</span>&nbsp;<span class="op" id="4693476">&lt;</span>&nbsp;<span class="num" id="4693478">0</span>&nbsp;<span class="op" id="4693480">||</span>&nbsp;<span class="ident" id="4693483">uint64</span><span class="op" id="4693489">(</span><span class="ident" id="4693490">v1</span><span class="op" id="4693492">.</span><span class="ident" id="4693493">Int</span><span class="op" id="4693496">(</span><span class="op" id="4693497">)</span><span class="op" id="4693498">)</span>&nbsp;<span class="op" id="4693500">&lt;</span>&nbsp;<span class="ident" id="4693502">v2</span><span class="op" id="4693504">.</span><span class="ident" id="4693505">Uint</span><span class="op" id="4693509">(</span><span class="op" id="4693510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693514">case</span>&nbsp;<span class="ident" id="4693519">k1</span>&nbsp;<span class="op" id="4693522">==</span>&nbsp;<span class="ident" id="4693525">uintKind</span>&nbsp;<span class="op" id="4693534">&amp;&amp;</span>&nbsp;<span class="ident" id="4693537">k2</span>&nbsp;<span class="op" id="4693540">==</span>&nbsp;<span class="ident" id="4693543">intKind</span><span class="op" id="4693550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693555">truth</span>&nbsp;<span class="op" id="4693561">=</span>&nbsp;<span class="ident" id="4693563">v2</span><span class="op" id="4693565">.</span><span class="ident" id="4693566">Int</span><span class="op" id="4693569">(</span><span class="op" id="4693570">)</span>&nbsp;<span class="op" id="4693572">&gt;=</span>&nbsp;<span class="num" id="4693575">0</span>&nbsp;<span class="op" id="4693577">&amp;&amp;</span>&nbsp;<span class="ident" id="4693580">v1</span><span class="op" id="4693582">.</span><span class="ident" id="4693583">Uint</span><span class="op" id="4693587">(</span><span class="op" id="4693588">)</span>&nbsp;<span class="op" id="4693590">&lt;</span>&nbsp;<span class="ident" id="4693592">uint64</span><span class="op" id="4693598">(</span><span class="ident" id="4693599">v2</span><span class="op" id="4693601">.</span><span class="ident" id="4693602">Int</span><span class="op" id="4693605">(</span><span class="op" id="4693606">)</span><span class="op" id="4693607">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693611">default</span><span class="op" id="4693618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693623">return</span>&nbsp;<span class="ident" id="4693630">false</span><span class="op" id="4693635">,</span>&nbsp;<span class="ident" id="4693637">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693659">}</span>&nbsp;<span class="keyword" id="4693661">else</span>&nbsp;<span class="op" id="4693666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693670">switch</span>&nbsp;<span class="ident" id="4693677">k1</span>&nbsp;<span class="op" id="4693680">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693684">case</span>&nbsp;<span class="ident" id="4693689">boolKind</span><span class="op" id="4693697">,</span>&nbsp;<span class="ident" id="4693699">complexKind</span><span class="op" id="4693710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693715">return</span>&nbsp;<span class="ident" id="4693722">false</span><span class="op" id="4693727">,</span>&nbsp;<span class="ident" id="4693729">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693752">case</span>&nbsp;<span class="ident" id="4693757">floatKind</span><span class="op" id="4693766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693771">truth</span>&nbsp;<span class="op" id="4693777">=</span>&nbsp;<span class="ident" id="4693779">v1</span><span class="op" id="4693781">.</span><span class="ident" id="4693782">Float</span><span class="op" id="4693787">(</span><span class="op" id="4693788">)</span>&nbsp;<span class="op" id="4693790">&lt;</span>&nbsp;<span class="ident" id="4693792">v2</span><span class="op" id="4693794">.</span><span class="ident" id="4693795">Float</span><span class="op" id="4693800">(</span><span class="op" id="4693801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693805">case</span>&nbsp;<span class="ident" id="4693810">intKind</span><span class="op" id="4693817">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693822">truth</span>&nbsp;<span class="op" id="4693828">=</span>&nbsp;<span class="ident" id="4693830">v1</span><span class="op" id="4693832">.</span><span class="ident" id="4693833">Int</span><span class="op" id="4693836">(</span><span class="op" id="4693837">)</span>&nbsp;<span class="op" id="4693839">&lt;</span>&nbsp;<span class="ident" id="4693841">v2</span><span class="op" id="4693843">.</span><span class="ident" id="4693844">Int</span><span class="op" id="4693847">(</span><span class="op" id="4693848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693852">case</span>&nbsp;<span class="ident" id="4693857">stringKind</span><span class="op" id="4693867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693872">truth</span>&nbsp;<span class="op" id="4693878">=</span>&nbsp;<span class="ident" id="4693880">v1</span><span class="op" id="4693882">.</span><span class="ident" id="4693883">String</span><span class="op" id="4693889">(</span><span class="op" id="4693890">)</span>&nbsp;<span class="op" id="4693892">&lt;</span>&nbsp;<span class="ident" id="4693894">v2</span><span class="op" id="4693896">.</span><span class="ident" id="4693897">String</span><span class="op" id="4693903">(</span><span class="op" id="4693904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693908">case</span>&nbsp;<span class="ident" id="4693913">uintKind</span><span class="op" id="4693921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4693926">truth</span>&nbsp;<span class="op" id="4693932">=</span>&nbsp;<span class="ident" id="4693934">v1</span><span class="op" id="4693936">.</span><span class="ident" id="4693937">Uint</span><span class="op" id="4693941">(</span><span class="op" id="4693942">)</span>&nbsp;<span class="op" id="4693944">&lt;</span>&nbsp;<span class="ident" id="4693946">v2</span><span class="op" id="4693948">.</span><span class="ident" id="4693949">Uint</span><span class="op" id="4693953">(</span><span class="op" id="4693954">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4693958">default</span><span class="op" id="4693965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4693970">panic</span><span class="op" id="4693975">(</span><span class="string" id="4693976">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4693990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4693997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694000">return</span>&nbsp;<span class="ident" id="4694007">truth</span><span class="op" id="4694012">,</span>&nbsp;<span class="ident" id="4694014">nil</span><br>
<span class="lineno">400</span><span class="op" id="4694018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4694021">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4694058">func</span>&nbsp;<span class="ident" id="4694063">le</span><span class="op" id="4694065">(</span><span class="ident" id="4694066">arg1</span><span class="op" id="4694070">,</span>&nbsp;<span class="ident" id="4694072">arg2</span>&nbsp;<span class="keyword" id="4694077">interface</span><span class="op" id="4694086">{</span><span class="op" id="4694087">}</span><span class="op" id="4694088">)</span>&nbsp;<span class="op" id="4694090">(</span><span class="builtintype" id="4694091">bool</span><span class="op" id="4694095">,</span>&nbsp;<span class="builtintype" id="4694097">error</span><span class="op" id="4694102">)</span>&nbsp;<span class="op" id="4694104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4694107">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694126">lessThan</span><span class="op" id="4694134">,</span>&nbsp;<span class="ident" id="4694136">err</span>&nbsp;<span class="op" id="4694140">:=</span>&nbsp;<span class="ident" id="4694143">lt</span><span class="op" id="4694145">(</span><span class="ident" id="4694146">arg1</span><span class="op" id="4694150">,</span>&nbsp;<span class="ident" id="4694152">arg2</span><span class="op" id="4694156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694159">if</span>&nbsp;<span class="ident" id="4694162">lessThan</span>&nbsp;<span class="op" id="4694171">||</span>&nbsp;<span class="ident" id="4694174">err</span>&nbsp;<span class="op" id="4694178">!=</span>&nbsp;<span class="ident" id="4694181">nil</span>&nbsp;<span class="op" id="4694185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694189">return</span>&nbsp;<span class="ident" id="4694196">lessThan</span><span class="op" id="4694204">,</span>&nbsp;<span class="ident" id="4694206">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4694211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694214">return</span>&nbsp;<span class="ident" id="4694221">eq</span><span class="op" id="4694223">(</span><span class="ident" id="4694224">arg1</span><span class="op" id="4694228">,</span>&nbsp;<span class="ident" id="4694230">arg2</span><span class="op" id="4694234">)</span><br>
<span class="lineno">410</span><span class="op" id="4694236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4694239">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4694277">func</span>&nbsp;<span class="ident" id="4694282">gt</span><span class="op" id="4694284">(</span><span class="ident" id="4694285">arg1</span><span class="op" id="4694289">,</span>&nbsp;<span class="ident" id="4694291">arg2</span>&nbsp;<span class="keyword" id="4694296">interface</span><span class="op" id="4694305">{</span><span class="op" id="4694306">}</span><span class="op" id="4694307">)</span>&nbsp;<span class="op" id="4694309">(</span><span class="builtintype" id="4694310">bool</span><span class="op" id="4694314">,</span>&nbsp;<span class="builtintype" id="4694316">error</span><span class="op" id="4694321">)</span>&nbsp;<span class="op" id="4694323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4694326">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694354">lessOrEqual</span><span class="op" id="4694365">,</span>&nbsp;<span class="ident" id="4694367">err</span>&nbsp;<span class="op" id="4694371">:=</span>&nbsp;<span class="ident" id="4694374">le</span><span class="op" id="4694376">(</span><span class="ident" id="4694377">arg1</span><span class="op" id="4694381">,</span>&nbsp;<span class="ident" id="4694383">arg2</span><span class="op" id="4694387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694390">if</span>&nbsp;<span class="ident" id="4694393">err</span>&nbsp;<span class="op" id="4694397">!=</span>&nbsp;<span class="ident" id="4694400">nil</span>&nbsp;<span class="op" id="4694404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694408">return</span>&nbsp;<span class="ident" id="4694415">false</span><span class="op" id="4694420">,</span>&nbsp;<span class="ident" id="4694422">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4694427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694430">return</span>&nbsp;<span class="op" id="4694437">!</span><span class="ident" id="4694438">lessOrEqual</span><span class="op" id="4694449">,</span>&nbsp;<span class="ident" id="4694451">nil</span><br>
<span class="lineno">420</span><span class="op" id="4694455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4694458">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4694497">func</span>&nbsp;<span class="ident" id="4694502">ge</span><span class="op" id="4694504">(</span><span class="ident" id="4694505">arg1</span><span class="op" id="4694509">,</span>&nbsp;<span class="ident" id="4694511">arg2</span>&nbsp;<span class="keyword" id="4694516">interface</span><span class="op" id="4694525">{</span><span class="op" id="4694526">}</span><span class="op" id="4694527">)</span>&nbsp;<span class="op" id="4694529">(</span><span class="builtintype" id="4694530">bool</span><span class="op" id="4694534">,</span>&nbsp;<span class="builtintype" id="4694536">error</span><span class="op" id="4694541">)</span>&nbsp;<span class="op" id="4694543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4694546">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694574">lessThan</span><span class="op" id="4694582">,</span>&nbsp;<span class="ident" id="4694584">err</span>&nbsp;<span class="op" id="4694588">:=</span>&nbsp;<span class="ident" id="4694591">lt</span><span class="op" id="4694593">(</span><span class="ident" id="4694594">arg1</span><span class="op" id="4694598">,</span>&nbsp;<span class="ident" id="4694600">arg2</span><span class="op" id="4694604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694607">if</span>&nbsp;<span class="ident" id="4694610">err</span>&nbsp;<span class="op" id="4694614">!=</span>&nbsp;<span class="ident" id="4694617">nil</span>&nbsp;<span class="op" id="4694621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694625">return</span>&nbsp;<span class="ident" id="4694632">false</span><span class="op" id="4694637">,</span>&nbsp;<span class="ident" id="4694639">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4694644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4694647">return</span>&nbsp;<span class="op" id="4694654">!</span><span class="ident" id="4694655">lessThan</span><span class="op" id="4694663">,</span>&nbsp;<span class="ident" id="4694665">nil</span><br>
<span class="lineno">430</span><span class="op" id="4694669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4694672">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4694691">var</span>&nbsp;<span class="op" id="4694695">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694698">htmlQuot</span>&nbsp;<span class="op" id="4694707">=</span>&nbsp;<span class="op" id="4694709">[</span><span class="op" id="4694710">]</span><span class="builtintype" id="4694711">byte</span><span class="op" id="4694715">(</span><span class="string" id="4694716">&#34;&amp;#34;&#34;</span><span class="op" id="4694723">)</span>&nbsp;<span class="comment" id="4694725">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694751">htmlApos</span>&nbsp;<span class="op" id="4694760">=</span>&nbsp;<span class="op" id="4694762">[</span><span class="op" id="4694763">]</span><span class="builtintype" id="4694764">byte</span><span class="op" id="4694768">(</span><span class="string" id="4694769">&#34;&amp;#39;&#34;</span><span class="op" id="4694776">)</span>&nbsp;<span class="comment" id="4694778">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694841">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="4694850">=</span>&nbsp;<span class="op" id="4694852">[</span><span class="op" id="4694853">]</span><span class="builtintype" id="4694854">byte</span><span class="op" id="4694858">(</span><span class="string" id="4694859">&#34;&amp;amp;&#34;</span><span class="op" id="4694866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694869">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4694878">=</span>&nbsp;<span class="op" id="4694880">[</span><span class="op" id="4694881">]</span><span class="builtintype" id="4694882">byte</span><span class="op" id="4694886">(</span><span class="string" id="4694887">&#34;&amp;lt;&#34;</span><span class="op" id="4694893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4694896">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4694905">=</span>&nbsp;<span class="op" id="4694907">[</span><span class="op" id="4694908">]</span><span class="builtintype" id="4694909">byte</span><span class="op" id="4694913">(</span><span class="string" id="4694914">&#34;&amp;gt;&#34;</span><span class="op" id="4694920">)</span><br>
<span class="lineno">440</span><span class="op" id="4694922">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4694925">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4695005">func</span>&nbsp;<span class="ident" id="4695010">HTMLEscape</span><span class="op" id="4695020">(</span><span class="ident" id="4695021">w</span>&nbsp;<span class="ident" id="4695023">io</span><span class="op" id="4695025">.</span><span class="ident" id="4695026">Writer</span><span class="op" id="4695032">,</span>&nbsp;<span class="ident" id="4695034">b</span>&nbsp;<span class="op" id="4695036">[</span><span class="op" id="4695037">]</span><span class="builtintype" id="4695038">byte</span><span class="op" id="4695042">)</span>&nbsp;<span class="op" id="4695044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695047">last</span>&nbsp;<span class="op" id="4695052">:=</span>&nbsp;<span class="num" id="4695055">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695058">for</span>&nbsp;<span class="ident" id="4695062">i</span><span class="op" id="4695063">,</span>&nbsp;<span class="ident" id="4695065">c</span>&nbsp;<span class="op" id="4695067">:=</span>&nbsp;<span class="keyword" id="4695070">range</span>&nbsp;<span class="ident" id="4695076">b</span>&nbsp;<span class="op" id="4695078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695082">var</span>&nbsp;<span class="ident" id="4695086">html</span>&nbsp;<span class="op" id="4695091">[</span><span class="op" id="4695092">]</span><span class="builtintype" id="4695093">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695100">switch</span>&nbsp;<span class="ident" id="4695107">c</span>&nbsp;<span class="op" id="4695109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695113">case</span>&nbsp;<span class="string" id="4695118">&#39;&#34;&#39;</span><span class="op" id="4695121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695126">html</span>&nbsp;<span class="op" id="4695131">=</span>&nbsp;<span class="ident" id="4695133">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695144">case</span>&nbsp;<span class="string" id="4695149">&#39;\&#39;&#39;</span><span class="op" id="4695153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695158">html</span>&nbsp;<span class="op" id="4695163">=</span>&nbsp;<span class="ident" id="4695165">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695176">case</span>&nbsp;<span class="string" id="4695181">&#39;&amp;&#39;</span><span class="op" id="4695184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695189">html</span>&nbsp;<span class="op" id="4695194">=</span>&nbsp;<span class="ident" id="4695196">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695206">case</span>&nbsp;<span class="string" id="4695211">&#39;&lt;&#39;</span><span class="op" id="4695214">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695219">html</span>&nbsp;<span class="op" id="4695224">=</span>&nbsp;<span class="ident" id="4695226">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695235">case</span>&nbsp;<span class="string" id="4695240">&#39;&gt;&#39;</span><span class="op" id="4695243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695248">html</span>&nbsp;<span class="op" id="4695253">=</span>&nbsp;<span class="ident" id="4695255">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695264">default</span><span class="op" id="4695271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695276">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4695287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695291">w</span><span class="op" id="4695292">.</span><span class="ident" id="4695293">Write</span><span class="op" id="4695298">(</span><span class="ident" id="4695299">b</span><span class="op" id="4695300">[</span><span class="ident" id="4695301">last</span><span class="op" id="4695305">:</span><span class="ident" id="4695306">i</span><span class="op" id="4695307">]</span><span class="op" id="4695308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695312">w</span><span class="op" id="4695313">.</span><span class="ident" id="4695314">Write</span><span class="op" id="4695319">(</span><span class="ident" id="4695320">html</span><span class="op" id="4695324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695328">last</span>&nbsp;<span class="op" id="4695333">=</span>&nbsp;<span class="ident" id="4695335">i</span>&nbsp;<span class="op" id="4695337">+</span>&nbsp;<span class="num" id="4695339">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4695342">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695345">w</span><span class="op" id="4695346">.</span><span class="ident" id="4695347">Write</span><span class="op" id="4695352">(</span><span class="ident" id="4695353">b</span><span class="op" id="4695354">[</span><span class="ident" id="4695355">last</span><span class="op" id="4695359">:</span><span class="op" id="4695360">]</span><span class="op" id="4695361">)</span><br>
<span class="lineno"></span><span class="op" id="4695363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4695366">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4695448">func</span>&nbsp;<span class="ident" id="4695453">HTMLEscapeString</span><span class="op" id="4695469">(</span><span class="ident" id="4695470">s</span>&nbsp;<span class="builtintype" id="4695472">string</span><span class="op" id="4695478">)</span>&nbsp;<span class="builtintype" id="4695480">string</span>&nbsp;<span class="op" id="4695487">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4695490">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695522">if</span>&nbsp;<span class="ident" id="4695525">strings</span><span class="op" id="4695532">.</span><span class="ident" id="4695533">IndexAny</span><span class="op" id="4695541">(</span><span class="ident" id="4695542">s</span><span class="op" id="4695543">,</span>&nbsp;<span class="string" id="4695545">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="4695552">)</span>&nbsp;<span class="op" id="4695554">&lt;</span>&nbsp;<span class="num" id="4695556">0</span>&nbsp;<span class="op" id="4695558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695562">return</span>&nbsp;<span class="ident" id="4695569">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4695572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695575">var</span>&nbsp;<span class="ident" id="4695579">b</span>&nbsp;<span class="ident" id="4695581">bytes</span><span class="op" id="4695586">.</span><span class="ident" id="4695587">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695595">HTMLEscape</span><span class="op" id="4695605">(</span><span class="op" id="4695606">&amp;</span><span class="ident" id="4695607">b</span><span class="op" id="4695608">,</span>&nbsp;<span class="op" id="4695610">[</span><span class="op" id="4695611">]</span><span class="builtintype" id="4695612">byte</span><span class="op" id="4695616">(</span><span class="ident" id="4695617">s</span><span class="op" id="4695618">)</span><span class="op" id="4695619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695622">return</span>&nbsp;<span class="ident" id="4695629">b</span><span class="op" id="4695630">.</span><span class="ident" id="4695631">String</span><span class="op" id="4695637">(</span><span class="op" id="4695638">)</span><br>
<span class="lineno"></span><span class="op" id="4695640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4695643">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="4695709">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4695745">func</span>&nbsp;<span class="ident" id="4695750">HTMLEscaper</span><span class="op" id="4695761">(</span><span class="ident" id="4695762">args</span>&nbsp;<span class="op" id="4695767">...</span><span class="keyword" id="4695770">interface</span><span class="op" id="4695779">{</span><span class="op" id="4695780">}</span><span class="op" id="4695781">)</span>&nbsp;<span class="builtintype" id="4695783">string</span>&nbsp;<span class="op" id="4695790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4695793">return</span>&nbsp;<span class="ident" id="4695800">HTMLEscapeString</span><span class="op" id="4695816">(</span><span class="ident" id="4695817">evalArgs</span><span class="op" id="4695825">(</span><span class="ident" id="4695826">args</span><span class="op" id="4695830">)</span><span class="op" id="4695831">)</span><br>
<span class="lineno"></span><span class="op" id="4695833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="4695836">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4695861">var</span>&nbsp;<span class="op" id="4695865">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695868">jsLowUni</span>&nbsp;<span class="op" id="4695877">=</span>&nbsp;<span class="op" id="4695879">[</span><span class="op" id="4695880">]</span><span class="builtintype" id="4695881">byte</span><span class="op" id="4695885">(</span><span class="string" id="4695886">`\u00`</span><span class="op" id="4695892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695895">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4695904">=</span>&nbsp;<span class="op" id="4695906">[</span><span class="op" id="4695907">]</span><span class="builtintype" id="4695908">byte</span><span class="op" id="4695912">(</span><span class="string" id="4695913">&#34;0123456789ABCDEF&#34;</span><span class="op" id="4695931">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695935">jsBackslash</span>&nbsp;<span class="op" id="4695947">=</span>&nbsp;<span class="op" id="4695949">[</span><span class="op" id="4695950">]</span><span class="builtintype" id="4695951">byte</span><span class="op" id="4695955">(</span><span class="string" id="4695956">`\\`</span><span class="op" id="4695960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695963">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4695975">=</span>&nbsp;<span class="op" id="4695977">[</span><span class="op" id="4695978">]</span><span class="builtintype" id="4695979">byte</span><span class="op" id="4695983">(</span><span class="string" id="4695984">`\&#39;`</span><span class="op" id="4695988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4695991">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4696003">=</span>&nbsp;<span class="op" id="4696005">[</span><span class="op" id="4696006">]</span><span class="builtintype" id="4696007">byte</span><span class="op" id="4696011">(</span><span class="string" id="4696012">`\&#34;`</span><span class="op" id="4696016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696019">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4696031">=</span>&nbsp;<span class="op" id="4696033">[</span><span class="op" id="4696034">]</span><span class="builtintype" id="4696035">byte</span><span class="op" id="4696039">(</span><span class="string" id="4696040">`\x3C`</span><span class="op" id="4696046">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696049">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4696061">=</span>&nbsp;<span class="op" id="4696063">[</span><span class="op" id="4696064">]</span><span class="builtintype" id="4696065">byte</span><span class="op" id="4696069">(</span><span class="string" id="4696070">`\x3E`</span><span class="op" id="4696076">)</span><br>
<span class="lineno"></span><span class="op" id="4696078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4696081">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4696165">func</span>&nbsp;<span class="ident" id="4696170">JSEscape</span><span class="op" id="4696178">(</span><span class="ident" id="4696179">w</span>&nbsp;<span class="ident" id="4696181">io</span><span class="op" id="4696183">.</span><span class="ident" id="4696184">Writer</span><span class="op" id="4696190">,</span>&nbsp;<span class="ident" id="4696192">b</span>&nbsp;<span class="op" id="4696194">[</span><span class="op" id="4696195">]</span><span class="builtintype" id="4696196">byte</span><span class="op" id="4696200">)</span>&nbsp;<span class="op" id="4696202">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696205">last</span>&nbsp;<span class="op" id="4696210">:=</span>&nbsp;<span class="num" id="4696213">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696216">for</span>&nbsp;<span class="ident" id="4696220">i</span>&nbsp;<span class="op" id="4696222">:=</span>&nbsp;<span class="num" id="4696225">0</span><span class="op" id="4696226">;</span>&nbsp;<span class="ident" id="4696228">i</span>&nbsp;<span class="op" id="4696230">&lt;</span>&nbsp;<span class="builtinfunc" id="4696232">len</span><span class="op" id="4696235">(</span><span class="ident" id="4696236">b</span><span class="op" id="4696237">)</span><span class="op" id="4696238">;</span>&nbsp;<span class="ident" id="4696240">i</span><span class="op" id="4696241">++</span>&nbsp;<span class="op" id="4696244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696248">c</span>&nbsp;<span class="op" id="4696250">:=</span>&nbsp;<span class="ident" id="4696253">b</span><span class="op" id="4696254">[</span><span class="ident" id="4696255">i</span><span class="op" id="4696256">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696261">if</span>&nbsp;<span class="op" id="4696264">!</span><span class="ident" id="4696265">jsIsSpecial</span><span class="op" id="4696276">(</span><span class="builtintype" id="4696277">rune</span><span class="op" id="4696281">(</span><span class="ident" id="4696282">c</span><span class="op" id="4696283">)</span><span class="op" id="4696284">)</span>&nbsp;<span class="op" id="4696286">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4696291">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696322">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696337">w</span><span class="op" id="4696338">.</span><span class="ident" id="4696339">Write</span><span class="op" id="4696344">(</span><span class="ident" id="4696345">b</span><span class="op" id="4696346">[</span><span class="ident" id="4696347">last</span><span class="op" id="4696351">:</span><span class="ident" id="4696352">i</span><span class="op" id="4696353">]</span><span class="op" id="4696354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696359">if</span>&nbsp;<span class="ident" id="4696362">c</span>&nbsp;<span class="op" id="4696364">&lt;</span>&nbsp;<span class="ident" id="4696366">utf8</span><span class="op" id="4696370">.</span><span class="ident" id="4696371">RuneSelf</span>&nbsp;<span class="op" id="4696380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4696385">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4696438">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696486">switch</span>&nbsp;<span class="ident" id="4696493">c</span>&nbsp;<span class="op" id="4696495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696500">case</span>&nbsp;<span class="string" id="4696505">&#39;\\&#39;</span><span class="op" id="4696509">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696515">w</span><span class="op" id="4696516">.</span><span class="ident" id="4696517">Write</span><span class="op" id="4696522">(</span><span class="ident" id="4696523">jsBackslash</span><span class="op" id="4696534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696539">case</span>&nbsp;<span class="string" id="4696544">&#39;\&#39;&#39;</span><span class="op" id="4696548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696554">w</span><span class="op" id="4696555">.</span><span class="ident" id="4696556">Write</span><span class="op" id="4696561">(</span><span class="ident" id="4696562">jsApos</span><span class="op" id="4696568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696573">case</span>&nbsp;<span class="string" id="4696578">&#39;&#34;&#39;</span><span class="op" id="4696581">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696587">w</span><span class="op" id="4696588">.</span><span class="ident" id="4696589">Write</span><span class="op" id="4696594">(</span><span class="ident" id="4696595">jsQuot</span><span class="op" id="4696601">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696606">case</span>&nbsp;<span class="string" id="4696611">&#39;&lt;&#39;</span><span class="op" id="4696614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696620">w</span><span class="op" id="4696621">.</span><span class="ident" id="4696622">Write</span><span class="op" id="4696627">(</span><span class="ident" id="4696628">jsLt</span><span class="op" id="4696632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696637">case</span>&nbsp;<span class="string" id="4696642">&#39;&gt;&#39;</span><span class="op" id="4696645">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696651">w</span><span class="op" id="4696652">.</span><span class="ident" id="4696653">Write</span><span class="op" id="4696658">(</span><span class="ident" id="4696659">jsGt</span><span class="op" id="4696663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696668">default</span><span class="op" id="4696675">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696681">w</span><span class="op" id="4696682">.</span><span class="ident" id="4696683">Write</span><span class="op" id="4696688">(</span><span class="ident" id="4696689">jsLowUni</span><span class="op" id="4696697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696703">t</span><span class="op" id="4696704">,</span>&nbsp;<span class="ident" id="4696706">b</span>&nbsp;<span class="op" id="4696708">:=</span>&nbsp;<span class="ident" id="4696711">c</span><span class="op" id="4696712">&gt;&gt;</span><span class="num" id="4696714">4</span><span class="op" id="4696715">,</span>&nbsp;<span class="ident" id="4696717">c</span><span class="op" id="4696718">&amp;</span><span class="num" id="4696719">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696728">w</span><span class="op" id="4696729">.</span><span class="ident" id="4696730">Write</span><span class="op" id="4696735">(</span><span class="ident" id="4696736">hex</span><span class="op" id="4696739">[</span><span class="ident" id="4696740">t</span>&nbsp;<span class="op" id="4696742">:</span>&nbsp;<span class="ident" id="4696744">t</span><span class="op" id="4696745">+</span><span class="num" id="4696746">1</span><span class="op" id="4696747">]</span><span class="op" id="4696748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696754">w</span><span class="op" id="4696755">.</span><span class="ident" id="4696756">Write</span><span class="op" id="4696761">(</span><span class="ident" id="4696762">hex</span><span class="op" id="4696765">[</span><span class="ident" id="4696766">b</span>&nbsp;<span class="op" id="4696768">:</span>&nbsp;<span class="ident" id="4696770">b</span><span class="op" id="4696771">+</span><span class="num" id="4696772">1</span><span class="op" id="4696773">]</span><span class="op" id="4696774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696779">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696783">}</span>&nbsp;<span class="keyword" id="4696785">else</span>&nbsp;<span class="op" id="4696790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4696795">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696815">r</span><span class="op" id="4696816">,</span>&nbsp;<span class="ident" id="4696818">size</span>&nbsp;<span class="op" id="4696823">:=</span>&nbsp;<span class="ident" id="4696826">utf8</span><span class="op" id="4696830">.</span><span class="ident" id="4696831">DecodeRune</span><span class="op" id="4696841">(</span><span class="ident" id="4696842">b</span><span class="op" id="4696843">[</span><span class="ident" id="4696844">i</span><span class="op" id="4696845">:</span><span class="op" id="4696846">]</span><span class="op" id="4696847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4696852">if</span>&nbsp;<span class="ident" id="4696855">unicode</span><span class="op" id="4696862">.</span><span class="ident" id="4696863">IsPrint</span><span class="op" id="4696870">(</span><span class="ident" id="4696871">r</span><span class="op" id="4696872">)</span>&nbsp;<span class="op" id="4696874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696880">w</span><span class="op" id="4696881">.</span><span class="ident" id="4696882">Write</span><span class="op" id="4696887">(</span><span class="ident" id="4696888">b</span><span class="op" id="4696889">[</span><span class="ident" id="4696890">i</span>&nbsp;<span class="op" id="4696892">:</span>&nbsp;<span class="ident" id="4696894">i</span><span class="op" id="4696895">+</span><span class="ident" id="4696896">size</span><span class="op" id="4696900">]</span><span class="op" id="4696901">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696906">}</span>&nbsp;<span class="keyword" id="4696908">else</span>&nbsp;<span class="op" id="4696913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696919">fmt</span><span class="op" id="4696922">.</span><span class="ident" id="4696923">Fprintf</span><span class="op" id="4696930">(</span><span class="ident" id="4696931">w</span><span class="op" id="4696932">,</span>&nbsp;<span class="string" id="4696934">&#34;\\u%04X&#34;</span><span class="op" id="4696943">,</span>&nbsp;<span class="ident" id="4696945">r</span><span class="op" id="4696946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696956">i</span>&nbsp;<span class="op" id="4696958">+=</span>&nbsp;<span class="ident" id="4696961">size</span>&nbsp;<span class="op" id="4696966">-</span>&nbsp;<span class="num" id="4696968">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696972">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696976">last</span>&nbsp;<span class="op" id="4696981">=</span>&nbsp;<span class="ident" id="4696983">i</span>&nbsp;<span class="op" id="4696985">+</span>&nbsp;<span class="num" id="4696987">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4696990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4696993">w</span><span class="op" id="4696994">.</span><span class="ident" id="4696995">Write</span><span class="op" id="4697000">(</span><span class="ident" id="4697001">b</span><span class="op" id="4697002">[</span><span class="ident" id="4697003">last</span><span class="op" id="4697007">:</span><span class="op" id="4697008">]</span><span class="op" id="4697009">)</span><br>
<span class="lineno"></span><span class="op" id="4697011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="4697014">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4697100">func</span>&nbsp;<span class="ident" id="4697105">JSEscapeString</span><span class="op" id="4697119">(</span><span class="ident" id="4697120">s</span>&nbsp;<span class="builtintype" id="4697122">string</span><span class="op" id="4697128">)</span>&nbsp;<span class="builtintype" id="4697130">string</span>&nbsp;<span class="op" id="4697137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4697140">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697172">if</span>&nbsp;<span class="ident" id="4697175">strings</span><span class="op" id="4697182">.</span><span class="ident" id="4697183">IndexFunc</span><span class="op" id="4697192">(</span><span class="ident" id="4697193">s</span><span class="op" id="4697194">,</span>&nbsp;<span class="ident" id="4697196">jsIsSpecial</span><span class="op" id="4697207">)</span>&nbsp;<span class="op" id="4697209">&lt;</span>&nbsp;<span class="num" id="4697211">0</span>&nbsp;<span class="op" id="4697213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697217">return</span>&nbsp;<span class="ident" id="4697224">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4697227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697230">var</span>&nbsp;<span class="ident" id="4697234">b</span>&nbsp;<span class="ident" id="4697236">bytes</span><span class="op" id="4697241">.</span><span class="ident" id="4697242">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4697250">JSEscape</span><span class="op" id="4697258">(</span><span class="op" id="4697259">&amp;</span><span class="ident" id="4697260">b</span><span class="op" id="4697261">,</span>&nbsp;<span class="op" id="4697263">[</span><span class="op" id="4697264">]</span><span class="builtintype" id="4697265">byte</span><span class="op" id="4697269">(</span><span class="ident" id="4697270">s</span><span class="op" id="4697271">)</span><span class="op" id="4697272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697275">return</span>&nbsp;<span class="ident" id="4697282">b</span><span class="op" id="4697283">.</span><span class="ident" id="4697284">String</span><span class="op" id="4697290">(</span><span class="op" id="4697291">)</span><br>
<span class="lineno"></span><span class="op" id="4697293">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="4697296">func</span>&nbsp;<span class="ident" id="4697301">jsIsSpecial</span><span class="op" id="4697312">(</span><span class="ident" id="4697313">r</span>&nbsp;<span class="builtintype" id="4697315">rune</span><span class="op" id="4697319">)</span>&nbsp;<span class="builtintype" id="4697321">bool</span>&nbsp;<span class="op" id="4697326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697329">switch</span>&nbsp;<span class="ident" id="4697336">r</span>&nbsp;<span class="op" id="4697338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697341">case</span>&nbsp;<span class="string" id="4697346">&#39;\\&#39;</span><span class="op" id="4697350">,</span>&nbsp;<span class="string" id="4697352">&#39;\&#39;&#39;</span><span class="op" id="4697356">,</span>&nbsp;<span class="string" id="4697358">&#39;&#34;&#39;</span><span class="op" id="4697361">,</span>&nbsp;<span class="string" id="4697363">&#39;&lt;&#39;</span><span class="op" id="4697366">,</span>&nbsp;<span class="string" id="4697368">&#39;&gt;&#39;</span><span class="op" id="4697371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697375">return</span>&nbsp;<span class="ident" id="4697382">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4697388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697391">return</span>&nbsp;<span class="ident" id="4697398">r</span>&nbsp;<span class="op" id="4697400">&lt;</span>&nbsp;<span class="string" id="4697402">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4697406">||</span>&nbsp;<span class="ident" id="4697409">utf8</span><span class="op" id="4697413">.</span><span class="ident" id="4697414">RuneSelf</span>&nbsp;<span class="op" id="4697423">&lt;=</span>&nbsp;<span class="ident" id="4697426">r</span><br>
<span class="lineno"></span><span class="op" id="4697428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4697431">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="4697501">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4697537">func</span>&nbsp;<span class="ident" id="4697542">JSEscaper</span><span class="op" id="4697551">(</span><span class="ident" id="4697552">args</span>&nbsp;<span class="op" id="4697557">...</span><span class="keyword" id="4697560">interface</span><span class="op" id="4697569">{</span><span class="op" id="4697570">}</span><span class="op" id="4697571">)</span>&nbsp;<span class="builtintype" id="4697573">string</span>&nbsp;<span class="op" id="4697580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697583">return</span>&nbsp;<span class="ident" id="4697590">JSEscapeString</span><span class="op" id="4697604">(</span><span class="ident" id="4697605">evalArgs</span><span class="op" id="4697613">(</span><span class="ident" id="4697614">args</span><span class="op" id="4697618">)</span><span class="op" id="4697619">)</span><br>
<span class="lineno"></span><span class="op" id="4697621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="4697624">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4697702">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="4697768">func</span>&nbsp;<span class="ident" id="4697773">URLQueryEscaper</span><span class="op" id="4697788">(</span><span class="ident" id="4697789">args</span>&nbsp;<span class="op" id="4697794">...</span><span class="keyword" id="4697797">interface</span><span class="op" id="4697806">{</span><span class="op" id="4697807">}</span><span class="op" id="4697808">)</span>&nbsp;<span class="builtintype" id="4697810">string</span>&nbsp;<span class="op" id="4697817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4697820">return</span>&nbsp;<span class="ident" id="4697827">url</span><span class="op" id="4697830">.</span><span class="ident" id="4697831">QueryEscape</span><span class="op" id="4697842">(</span><span class="ident" id="4697843">evalArgs</span><span class="op" id="4697851">(</span><span class="ident" id="4697852">args</span><span class="op" id="4697856">)</span><span class="op" id="4697857">)</span><br>
<span class="lineno"></span><span class="op" id="4697859">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="4697862">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4697949">//&nbsp;&nbsp;&nbsp;&nbspfmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="4697972">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="4698044">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="4698117">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="4698131">func</span>&nbsp;<span class="ident" id="4698136">evalArgs</span><span class="op" id="4698144">(</span><span class="ident" id="4698145">args</span>&nbsp;<span class="op" id="4698150">[</span><span class="op" id="4698151">]</span><span class="keyword" id="4698152">interface</span><span class="op" id="4698161">{</span><span class="op" id="4698162">}</span><span class="op" id="4698163">)</span>&nbsp;<span class="builtintype" id="4698165">string</span>&nbsp;<span class="op" id="4698172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4698175">ok</span>&nbsp;<span class="op" id="4698178">:=</span>&nbsp;<span class="ident" id="4698181">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698188">var</span>&nbsp;<span class="ident" id="4698192">s</span>&nbsp;<span class="builtintype" id="4698194">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4698202">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698240">if</span>&nbsp;<span class="builtinfunc" id="4698243">len</span><span class="op" id="4698246">(</span><span class="ident" id="4698247">args</span><span class="op" id="4698251">)</span>&nbsp;<span class="op" id="4698253">==</span>&nbsp;<span class="num" id="4698256">1</span>&nbsp;<span class="op" id="4698258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4698262">s</span><span class="op" id="4698263">,</span>&nbsp;<span class="ident" id="4698265">ok</span>&nbsp;<span class="op" id="4698268">=</span>&nbsp;<span class="ident" id="4698270">args</span><span class="op" id="4698274">[</span><span class="num" id="4698275">0</span><span class="op" id="4698276">]</span><span class="op" id="4698277">.</span><span class="op" id="4698278">(</span><span class="builtintype" id="4698279">string</span><span class="op" id="4698285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4698288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698291">if</span>&nbsp;<span class="op" id="4698294">!</span><span class="ident" id="4698295">ok</span>&nbsp;<span class="op" id="4698298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698302">for</span>&nbsp;<span class="ident" id="4698306">i</span><span class="op" id="4698307">,</span>&nbsp;<span class="ident" id="4698309">arg</span>&nbsp;<span class="op" id="4698313">:=</span>&nbsp;<span class="keyword" id="4698316">range</span>&nbsp;<span class="ident" id="4698322">args</span>&nbsp;<span class="op" id="4698327">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4698332">a</span><span class="op" id="4698333">,</span>&nbsp;<span class="ident" id="4698335">ok</span>&nbsp;<span class="op" id="4698338">:=</span>&nbsp;<span class="ident" id="4698341">printableValue</span><span class="op" id="4698355">(</span><span class="ident" id="4698356">reflect</span><span class="op" id="4698363">.</span><span class="ident" id="4698364">ValueOf</span><span class="op" id="4698371">(</span><span class="ident" id="4698372">arg</span><span class="op" id="4698375">)</span><span class="op" id="4698376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698381">if</span>&nbsp;<span class="ident" id="4698384">ok</span>&nbsp;<span class="op" id="4698387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4698393">args</span><span class="op" id="4698397">[</span><span class="ident" id="4698398">i</span><span class="op" id="4698399">]</span>&nbsp;<span class="op" id="4698401">=</span>&nbsp;<span class="ident" id="4698403">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4698408">}</span>&nbsp;<span class="comment" id="4698410">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4698442">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4698446">s</span>&nbsp;<span class="op" id="4698448">=</span>&nbsp;<span class="ident" id="4698450">fmt</span><span class="op" id="4698453">.</span><span class="ident" id="4698454">Sprint</span><span class="op" id="4698460">(</span><span class="ident" id="4698461">args</span><span class="op" id="4698465">...</span><span class="op" id="4698468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4698471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4698474">return</span>&nbsp;<span class="ident" id="4698481">s</span><br>
<span class="lineno"></span><span class="op" id="4698483">}</span>
</div>
</body>
</html>
