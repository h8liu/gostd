<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6245535">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6245590">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6245644">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6245695">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6245763">//</span><br>
<span class="lineno"></span><span class="comment" id="6245766">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6245844">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6245919">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6245969">//</span><br>
<span class="lineno"></span><span class="comment" id="6245972">//&nbsp;&nbsp;&nbsp;&nbsp;field1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6245996">//</span><br>
<span class="lineno"></span><span class="comment" id="6245999">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6246045">//</span><br>
<span class="lineno">15</span><span class="comment" id="6246048">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6246116">//</span><br>
<span class="lineno"></span><span class="comment" id="6246119">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6246198">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6246263">//</span><br>
<span class="lineno">20</span><span class="comment" id="6246266">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6246335">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6246405">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6246415">//</span><br>
<span class="lineno"></span><span class="comment" id="6246418">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6246433">//</span><br>
<span class="lineno"></span><span class="comment" id="6246436">//&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6246468">//</span><br>
<span class="lineno"></span><span class="comment" id="6246471">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6246496">//</span><br>
<span class="lineno">30</span><span class="comment" id="6246499">//&nbsp;&nbsp;&nbsp;&nbsp;{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6246536">//</span><br>
<span class="lineno"></span><span class="comment" id="6246539">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6246609">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6246652">//</span><br>
<span class="lineno">35</span><span class="comment" id="6246655">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6246702">//</span><br>
<span class="lineno"></span><span class="comment" id="6246705">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6246719">//</span><br>
<span class="lineno"></span><span class="comment" id="6246722">//&nbsp;&nbsp;&nbsp;&nbsp;{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6246768">//</span><br>
<span class="lineno"></span><span class="comment" id="6246771">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6246828">//</span><br>
<span class="lineno"></span><span class="comment" id="6246831">//&nbsp;&nbsp;&nbsp;&nbsp;&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6246846">//&nbsp;&nbsp;&nbsp;&nbsp;field&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6246869">//</span><br>
<span class="lineno"></span><span class="comment" id="6246872">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6246886">//</span><br>
<span class="lineno"></span><span class="comment" id="6246889">//&nbsp;&nbsp;&nbsp;&nbsp;{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6246905">//&nbsp;&nbsp;&nbsp;&nbsp;field`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6246930">package</span>&nbsp;<span class="ident" id="6246938">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6246943">import</span>&nbsp;<span class="op" id="6246950">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246953">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246962">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246971">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246981">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246988">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6246994">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6247004">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6247007">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6247055">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6247103">type</span>&nbsp;<span class="ident" id="6247108">ParseError</span>&nbsp;<span class="keyword" id="6247119">struct</span>&nbsp;<span class="op" id="6247126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247129">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6247136">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6247142">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247176">Column</span>&nbsp;<span class="builtintype" id="6247183">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6247189">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247238">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6247245">error</span>&nbsp;<span class="comment" id="6247251">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6247271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6247274">func</span>&nbsp;<span class="op" id="6247279">(</span><span class="ident" id="6247280">e</span>&nbsp;<span class="op" id="6247282">*</span><span class="ident" id="6247283">ParseError</span><span class="op" id="6247293">)</span>&nbsp;<span class="ident" id="6247295">Error</span><span class="op" id="6247300">(</span><span class="op" id="6247301">)</span>&nbsp;<span class="builtintype" id="6247303">string</span>&nbsp;<span class="op" id="6247310">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6247313">return</span>&nbsp;<span class="ident" id="6247320">fmt</span><span class="op" id="6247323">.</span><span class="ident" id="6247324">Sprintf</span><span class="op" id="6247331">(</span><span class="string" id="6247332">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6247356">,</span>&nbsp;<span class="ident" id="6247358">e</span><span class="op" id="6247359">.</span><span class="ident" id="6247360">Line</span><span class="op" id="6247364">,</span>&nbsp;<span class="ident" id="6247366">e</span><span class="op" id="6247367">.</span><span class="ident" id="6247368">Column</span><span class="op" id="6247374">,</span>&nbsp;<span class="ident" id="6247376">e</span><span class="op" id="6247377">.</span><span class="ident" id="6247378">Err</span><span class="op" id="6247381">)</span><br>
<span class="lineno"></span><span class="op" id="6247383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6247386">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6247451">var</span>&nbsp;<span class="op" id="6247455">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247458">ErrTrailingComma</span>&nbsp;<span class="op" id="6247475">=</span>&nbsp;<span class="ident" id="6247477">errors</span><span class="op" id="6247483">.</span><span class="ident" id="6247484">New</span><span class="op" id="6247487">(</span><span class="string" id="6247488">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6247520">)</span>&nbsp;<span class="comment" id="6247522">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247541">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6247558">=</span>&nbsp;<span class="ident" id="6247560">errors</span><span class="op" id="6247566">.</span><span class="ident" id="6247567">New</span><span class="op" id="6247570">(</span><span class="string" id="6247571">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6247600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247603">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6247620">=</span>&nbsp;<span class="ident" id="6247622">errors</span><span class="op" id="6247628">.</span><span class="ident" id="6247629">New</span><span class="op" id="6247632">(</span><span class="string" id="6247633">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6247657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6247660">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6247677">=</span>&nbsp;<span class="ident" id="6247679">errors</span><span class="op" id="6247685">.</span><span class="ident" id="6247686">New</span><span class="op" id="6247689">(</span><span class="string" id="6247690">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6247722">)</span><br>
<span class="lineno"></span><span class="op" id="6247724">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6247727">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6247778">//</span><br>
<span class="lineno"></span><span class="comment" id="6247781">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6247857">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6247931">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6247965">//</span><br>
<span class="lineno"></span><span class="comment" id="6247968">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6248022">//</span><br>
<span class="lineno"></span><span class="comment" id="6248025">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6248098">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6248132">//</span><br>
<span class="lineno"></span><span class="comment" id="6248135">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6248199">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6248277">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6248350">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6248425">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6248483">//</span><br>
<span class="lineno"></span><span class="comment" id="6248486">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6248558">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6248609">//</span><br>
<span class="lineno"></span><span class="comment" id="6248612">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6248687">type</span>&nbsp;<span class="ident" id="6248692">Reader</span>&nbsp;<span class="keyword" id="6248699">struct</span>&nbsp;<span class="op" id="6248706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6248709">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6248726">rune</span>&nbsp;<span class="comment" id="6248731">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6248777">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6248794">rune</span>&nbsp;<span class="comment" id="6248799">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6248839">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6248856">int</span>&nbsp;&nbsp;<span class="comment" id="6248861">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6248902">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6248919">bool</span>&nbsp;<span class="comment" id="6248924">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6248946">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6248963">bool</span>&nbsp;<span class="comment" id="6248968">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249014">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6249031">bool</span>&nbsp;<span class="comment" id="6249036">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249059">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6249076">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249081">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6249098">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249103">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249120">*</span><span class="ident" id="6249121">bufio</span><span class="op" id="6249126">.</span><span class="ident" id="6249127">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249135">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249152">bytes</span><span class="op" id="6249157">.</span><span class="ident" id="6249158">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6249165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6249168">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6249221">func</span>&nbsp;<span class="ident" id="6249226">NewReader</span><span class="op" id="6249235">(</span><span class="ident" id="6249236">r</span>&nbsp;<span class="ident" id="6249238">io</span><span class="op" id="6249240">.</span><span class="ident" id="6249241">Reader</span><span class="op" id="6249247">)</span>&nbsp;<span class="op" id="6249249">*</span><span class="ident" id="6249250">Reader</span>&nbsp;<span class="op" id="6249257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249260">return</span>&nbsp;<span class="op" id="6249267">&amp;</span><span class="ident" id="6249268">Reader</span><span class="op" id="6249274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249278">Comma</span><span class="op" id="6249283">:</span>&nbsp;<span class="string" id="6249285">&#39;,&#39;</span><span class="op" id="6249288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249292">r</span><span class="op" id="6249293">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249299">bufio</span><span class="op" id="6249304">.</span><span class="ident" id="6249305">NewReader</span><span class="op" id="6249314">(</span><span class="ident" id="6249315">r</span><span class="op" id="6249316">)</span><span class="op" id="6249317">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249320">}</span><br>
<span class="lineno"></span><span class="op" id="6249322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6249325">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6249373">func</span>&nbsp;<span class="op" id="6249378">(</span><span class="ident" id="6249379">r</span>&nbsp;<span class="op" id="6249381">*</span><span class="ident" id="6249382">Reader</span><span class="op" id="6249388">)</span>&nbsp;<span class="builtintype" id="6249390">error</span><span class="op" id="6249395">(</span><span class="ident" id="6249396">err</span>&nbsp;<span class="builtintype" id="6249400">error</span><span class="op" id="6249405">)</span>&nbsp;<span class="builtintype" id="6249407">error</span>&nbsp;<span class="op" id="6249413">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249416">return</span>&nbsp;<span class="op" id="6249423">&amp;</span><span class="ident" id="6249424">ParseError</span><span class="op" id="6249434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249438">Line</span><span class="op" id="6249442">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6249446">r</span><span class="op" id="6249447">.</span><span class="ident" id="6249448">line</span><span class="op" id="6249452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249456">Column</span><span class="op" id="6249462">:</span>&nbsp;<span class="ident" id="6249464">r</span><span class="op" id="6249465">.</span><span class="ident" id="6249466">column</span><span class="op" id="6249472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249476">Err</span><span class="op" id="6249479">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249484">err</span><span class="op" id="6249487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249490">}</span><br>
<span class="lineno">130</span><span class="op" id="6249492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6249495">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6249572">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6249606">func</span>&nbsp;<span class="op" id="6249611">(</span><span class="ident" id="6249612">r</span>&nbsp;<span class="op" id="6249614">*</span><span class="ident" id="6249615">Reader</span><span class="op" id="6249621">)</span>&nbsp;<span class="ident" id="6249623">Read</span><span class="op" id="6249627">(</span><span class="op" id="6249628">)</span>&nbsp;<span class="op" id="6249630">(</span><span class="ident" id="6249631">record</span>&nbsp;<span class="op" id="6249638">[</span><span class="op" id="6249639">]</span><span class="builtintype" id="6249640">string</span><span class="op" id="6249646">,</span>&nbsp;<span class="ident" id="6249648">err</span>&nbsp;<span class="builtintype" id="6249652">error</span><span class="op" id="6249657">)</span>&nbsp;<span class="op" id="6249659">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249662">for</span>&nbsp;<span class="op" id="6249666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249670">record</span><span class="op" id="6249676">,</span>&nbsp;<span class="ident" id="6249678">err</span>&nbsp;<span class="op" id="6249682">=</span>&nbsp;<span class="ident" id="6249684">r</span><span class="op" id="6249685">.</span><span class="ident" id="6249686">parseRecord</span><span class="op" id="6249697">(</span><span class="op" id="6249698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249702">if</span>&nbsp;<span class="ident" id="6249705">record</span>&nbsp;<span class="op" id="6249712">!=</span>&nbsp;<span class="builtintype" id="6249715">nil</span>&nbsp;<span class="op" id="6249719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249724">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249732">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249736">if</span>&nbsp;<span class="ident" id="6249739">err</span>&nbsp;<span class="op" id="6249743">!=</span>&nbsp;<span class="builtintype" id="6249746">nil</span>&nbsp;<span class="op" id="6249750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249755">return</span>&nbsp;<span class="builtintype" id="6249762">nil</span><span class="op" id="6249765">,</span>&nbsp;<span class="ident" id="6249767">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249780">if</span>&nbsp;<span class="ident" id="6249783">r</span><span class="op" id="6249784">.</span><span class="ident" id="6249785">FieldsPerRecord</span>&nbsp;<span class="op" id="6249801">&gt;</span>&nbsp;<span class="num" id="6249803">0</span>&nbsp;<span class="op" id="6249805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249809">if</span>&nbsp;<span class="builtinfunc" id="6249812">len</span><span class="op" id="6249815">(</span><span class="ident" id="6249816">record</span><span class="op" id="6249822">)</span>&nbsp;<span class="op" id="6249824">!=</span>&nbsp;<span class="ident" id="6249827">r</span><span class="op" id="6249828">.</span><span class="ident" id="6249829">FieldsPerRecord</span>&nbsp;<span class="op" id="6249845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249850">r</span><span class="op" id="6249851">.</span><span class="ident" id="6249852">column</span>&nbsp;<span class="op" id="6249859">=</span>&nbsp;<span class="num" id="6249861">0</span>&nbsp;<span class="comment" id="6249863">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6249895">return</span>&nbsp;<span class="ident" id="6249902">record</span><span class="op" id="6249908">,</span>&nbsp;<span class="ident" id="6249910">r</span><span class="op" id="6249911">.</span><span class="builtintype" id="6249912">error</span><span class="op" id="6249917">(</span><span class="ident" id="6249918">ErrFieldCount</span><span class="op" id="6249931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249935">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6249938">}</span>&nbsp;<span class="keyword" id="6249940">else</span>&nbsp;<span class="keyword" id="6249945">if</span>&nbsp;<span class="ident" id="6249948">r</span><span class="op" id="6249949">.</span><span class="ident" id="6249950">FieldsPerRecord</span>&nbsp;<span class="op" id="6249966">==</span>&nbsp;<span class="num" id="6249969">0</span>&nbsp;<span class="op" id="6249971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6249975">r</span><span class="op" id="6249976">.</span><span class="ident" id="6249977">FieldsPerRecord</span>&nbsp;<span class="op" id="6249993">=</span>&nbsp;<span class="builtinfunc" id="6249995">len</span><span class="op" id="6249998">(</span><span class="ident" id="6249999">record</span><span class="op" id="6250005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6250008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250011">return</span>&nbsp;<span class="ident" id="6250018">record</span><span class="op" id="6250024">,</span>&nbsp;<span class="builtintype" id="6250026">nil</span><br>
<span class="lineno"></span><span class="op" id="6250030">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6250033">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6250084">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6250121">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6250197">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6250275">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6250288">func</span>&nbsp;<span class="op" id="6250293">(</span><span class="ident" id="6250294">r</span>&nbsp;<span class="op" id="6250296">*</span><span class="ident" id="6250297">Reader</span><span class="op" id="6250303">)</span>&nbsp;<span class="ident" id="6250305">ReadAll</span><span class="op" id="6250312">(</span><span class="op" id="6250313">)</span>&nbsp;<span class="op" id="6250315">(</span><span class="ident" id="6250316">records</span>&nbsp;<span class="op" id="6250324">[</span><span class="op" id="6250325">]</span><span class="op" id="6250326">[</span><span class="op" id="6250327">]</span><span class="builtintype" id="6250328">string</span><span class="op" id="6250334">,</span>&nbsp;<span class="ident" id="6250336">err</span>&nbsp;<span class="builtintype" id="6250340">error</span><span class="op" id="6250345">)</span>&nbsp;<span class="op" id="6250347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250350">for</span>&nbsp;<span class="op" id="6250354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6250358">record</span><span class="op" id="6250364">,</span>&nbsp;<span class="ident" id="6250366">err</span>&nbsp;<span class="op" id="6250370">:=</span>&nbsp;<span class="ident" id="6250373">r</span><span class="op" id="6250374">.</span><span class="ident" id="6250375">Read</span><span class="op" id="6250379">(</span><span class="op" id="6250380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250384">if</span>&nbsp;<span class="ident" id="6250387">err</span>&nbsp;<span class="op" id="6250391">==</span>&nbsp;<span class="ident" id="6250394">io</span><span class="op" id="6250396">.</span><span class="ident" id="6250397">EOF</span>&nbsp;<span class="op" id="6250401">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250406">return</span>&nbsp;<span class="ident" id="6250413">records</span><span class="op" id="6250420">,</span>&nbsp;<span class="builtintype" id="6250422">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6250428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250432">if</span>&nbsp;<span class="ident" id="6250435">err</span>&nbsp;<span class="op" id="6250439">!=</span>&nbsp;<span class="builtintype" id="6250442">nil</span>&nbsp;<span class="op" id="6250446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250451">return</span>&nbsp;<span class="builtintype" id="6250458">nil</span><span class="op" id="6250461">,</span>&nbsp;<span class="ident" id="6250463">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6250469">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6250473">records</span>&nbsp;<span class="op" id="6250481">=</span>&nbsp;<span class="builtinfunc" id="6250483">append</span><span class="op" id="6250489">(</span><span class="ident" id="6250490">records</span><span class="op" id="6250497">,</span>&nbsp;<span class="ident" id="6250499">record</span><span class="op" id="6250505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6250508">}</span><br>
<span class="lineno"></span><span class="op" id="6250510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6250513">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6250585">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6250661">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6250704">func</span>&nbsp;<span class="op" id="6250709">(</span><span class="ident" id="6250710">r</span>&nbsp;<span class="op" id="6250712">*</span><span class="ident" id="6250713">Reader</span><span class="op" id="6250719">)</span>&nbsp;<span class="ident" id="6250721">readRune</span><span class="op" id="6250729">(</span><span class="op" id="6250730">)</span>&nbsp;<span class="op" id="6250732">(</span><span class="builtintype" id="6250733">rune</span><span class="op" id="6250737">,</span>&nbsp;<span class="builtintype" id="6250739">error</span><span class="op" id="6250744">)</span>&nbsp;<span class="op" id="6250746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6250749">r1</span><span class="op" id="6250751">,</span>&nbsp;<span class="ident" id="6250753">_</span><span class="op" id="6250754">,</span>&nbsp;<span class="ident" id="6250756">err</span>&nbsp;<span class="op" id="6250760">:=</span>&nbsp;<span class="ident" id="6250763">r</span><span class="op" id="6250764">.</span><span class="ident" id="6250765">r</span><span class="op" id="6250766">.</span><span class="ident" id="6250767">ReadRune</span><span class="op" id="6250775">(</span><span class="op" id="6250776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6250780">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6250843">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6250905">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6250971">if</span>&nbsp;<span class="ident" id="6250974">r1</span>&nbsp;<span class="op" id="6250977">==</span>&nbsp;<span class="string" id="6250980">&#39;\r&#39;</span>&nbsp;<span class="op" id="6250985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6250989">r1</span><span class="op" id="6250991">,</span>&nbsp;<span class="ident" id="6250993">_</span><span class="op" id="6250994">,</span>&nbsp;<span class="ident" id="6250996">err</span>&nbsp;<span class="op" id="6251000">=</span>&nbsp;<span class="ident" id="6251002">r</span><span class="op" id="6251003">.</span><span class="ident" id="6251004">r</span><span class="op" id="6251005">.</span><span class="ident" id="6251006">ReadRune</span><span class="op" id="6251014">(</span><span class="op" id="6251015">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251019">if</span>&nbsp;<span class="ident" id="6251022">err</span>&nbsp;<span class="op" id="6251026">==</span>&nbsp;<span class="builtintype" id="6251029">nil</span>&nbsp;<span class="op" id="6251033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251038">if</span>&nbsp;<span class="ident" id="6251041">r1</span>&nbsp;<span class="op" id="6251044">!=</span>&nbsp;<span class="string" id="6251047">&#39;\n&#39;</span>&nbsp;<span class="op" id="6251052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251058">r</span><span class="op" id="6251059">.</span><span class="ident" id="6251060">r</span><span class="op" id="6251061">.</span><span class="ident" id="6251062">UnreadRune</span><span class="op" id="6251072">(</span><span class="op" id="6251073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251079">r1</span>&nbsp;<span class="op" id="6251082">=</span>&nbsp;<span class="string" id="6251084">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251092">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251102">r</span><span class="op" id="6251103">.</span><span class="ident" id="6251104">column</span><span class="op" id="6251110">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251114">return</span>&nbsp;<span class="ident" id="6251121">r1</span><span class="op" id="6251123">,</span>&nbsp;<span class="ident" id="6251125">err</span><br>
<span class="lineno"></span><span class="op" id="6251129">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6251132">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6251203">func</span>&nbsp;<span class="op" id="6251208">(</span><span class="ident" id="6251209">r</span>&nbsp;<span class="op" id="6251211">*</span><span class="ident" id="6251212">Reader</span><span class="op" id="6251218">)</span>&nbsp;<span class="ident" id="6251220">skip</span><span class="op" id="6251224">(</span><span class="ident" id="6251225">delim</span>&nbsp;<span class="builtintype" id="6251231">rune</span><span class="op" id="6251235">)</span>&nbsp;<span class="builtintype" id="6251237">error</span>&nbsp;<span class="op" id="6251243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251246">for</span>&nbsp;<span class="op" id="6251250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251254">r1</span><span class="op" id="6251256">,</span>&nbsp;<span class="ident" id="6251258">err</span>&nbsp;<span class="op" id="6251262">:=</span>&nbsp;<span class="ident" id="6251265">r</span><span class="op" id="6251266">.</span><span class="ident" id="6251267">readRune</span><span class="op" id="6251275">(</span><span class="op" id="6251276">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251280">if</span>&nbsp;<span class="ident" id="6251283">err</span>&nbsp;<span class="op" id="6251287">!=</span>&nbsp;<span class="builtintype" id="6251290">nil</span>&nbsp;<span class="op" id="6251294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251299">return</span>&nbsp;<span class="ident" id="6251306">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251316">if</span>&nbsp;<span class="ident" id="6251319">r1</span>&nbsp;<span class="op" id="6251322">==</span>&nbsp;<span class="ident" id="6251325">delim</span>&nbsp;<span class="op" id="6251331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251336">return</span>&nbsp;<span class="builtintype" id="6251343">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251352">}</span><br>
<span class="lineno"></span><span class="op" id="6251354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6251357">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6251417">func</span>&nbsp;<span class="op" id="6251422">(</span><span class="ident" id="6251423">r</span>&nbsp;<span class="op" id="6251425">*</span><span class="ident" id="6251426">Reader</span><span class="op" id="6251432">)</span>&nbsp;<span class="ident" id="6251434">parseRecord</span><span class="op" id="6251445">(</span><span class="op" id="6251446">)</span>&nbsp;<span class="op" id="6251448">(</span><span class="ident" id="6251449">fields</span>&nbsp;<span class="op" id="6251456">[</span><span class="op" id="6251457">]</span><span class="builtintype" id="6251458">string</span><span class="op" id="6251464">,</span>&nbsp;<span class="ident" id="6251466">err</span>&nbsp;<span class="builtintype" id="6251470">error</span><span class="op" id="6251475">)</span>&nbsp;<span class="op" id="6251477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251480">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251541">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251599">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251670">r</span><span class="op" id="6251671">.</span><span class="ident" id="6251672">line</span><span class="op" id="6251676">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251680">r</span><span class="op" id="6251681">.</span><span class="ident" id="6251682">column</span>&nbsp;<span class="op" id="6251689">=</span>&nbsp;<span class="op" id="6251691">-</span><span class="num" id="6251692">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251696">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251756">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6251819">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251854">r1</span><span class="op" id="6251856">,</span>&nbsp;<span class="ident" id="6251858">_</span><span class="op" id="6251859">,</span>&nbsp;<span class="ident" id="6251861">err</span>&nbsp;<span class="op" id="6251865">:=</span>&nbsp;<span class="ident" id="6251868">r</span><span class="op" id="6251869">.</span><span class="ident" id="6251870">r</span><span class="op" id="6251871">.</span><span class="ident" id="6251872">ReadRune</span><span class="op" id="6251880">(</span><span class="op" id="6251881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251884">if</span>&nbsp;<span class="ident" id="6251887">err</span>&nbsp;<span class="op" id="6251891">!=</span>&nbsp;<span class="builtintype" id="6251894">nil</span>&nbsp;<span class="op" id="6251898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251902">return</span>&nbsp;<span class="builtintype" id="6251909">nil</span><span class="op" id="6251912">,</span>&nbsp;<span class="ident" id="6251914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251919">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251923">if</span>&nbsp;<span class="ident" id="6251926">r</span><span class="op" id="6251927">.</span><span class="ident" id="6251928">Comment</span>&nbsp;<span class="op" id="6251936">!=</span>&nbsp;<span class="num" id="6251939">0</span>&nbsp;<span class="op" id="6251941">&amp;&amp;</span>&nbsp;<span class="ident" id="6251944">r1</span>&nbsp;<span class="op" id="6251947">==</span>&nbsp;<span class="ident" id="6251950">r</span><span class="op" id="6251951">.</span><span class="ident" id="6251952">Comment</span>&nbsp;<span class="op" id="6251960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6251964">return</span>&nbsp;<span class="builtintype" id="6251971">nil</span><span class="op" id="6251974">,</span>&nbsp;<span class="ident" id="6251976">r</span><span class="op" id="6251977">.</span><span class="ident" id="6251978">skip</span><span class="op" id="6251982">(</span><span class="string" id="6251983">&#39;\n&#39;</span><span class="op" id="6251987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6251990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6251993">r</span><span class="op" id="6251994">.</span><span class="ident" id="6251995">r</span><span class="op" id="6251996">.</span><span class="ident" id="6251997">UnreadRune</span><span class="op" id="6252007">(</span><span class="op" id="6252008">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6252012">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252058">for</span>&nbsp;<span class="op" id="6252062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252066">haveField</span><span class="op" id="6252075">,</span>&nbsp;<span class="ident" id="6252077">delim</span><span class="op" id="6252082">,</span>&nbsp;<span class="ident" id="6252084">err</span>&nbsp;<span class="op" id="6252088">:=</span>&nbsp;<span class="ident" id="6252091">r</span><span class="op" id="6252092">.</span><span class="ident" id="6252093">parseField</span><span class="op" id="6252103">(</span><span class="op" id="6252104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252108">if</span>&nbsp;<span class="ident" id="6252111">haveField</span>&nbsp;<span class="op" id="6252121">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252126">fields</span>&nbsp;<span class="op" id="6252133">=</span>&nbsp;<span class="builtinfunc" id="6252135">append</span><span class="op" id="6252141">(</span><span class="ident" id="6252142">fields</span><span class="op" id="6252148">,</span>&nbsp;<span class="ident" id="6252150">r</span><span class="op" id="6252151">.</span><span class="ident" id="6252152">field</span><span class="op" id="6252157">.</span><span class="ident" id="6252158">String</span><span class="op" id="6252164">(</span><span class="op" id="6252165">)</span><span class="op" id="6252166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252174">if</span>&nbsp;<span class="ident" id="6252177">delim</span>&nbsp;<span class="op" id="6252183">==</span>&nbsp;<span class="string" id="6252186">&#39;\n&#39;</span>&nbsp;<span class="op" id="6252191">||</span>&nbsp;<span class="ident" id="6252194">err</span>&nbsp;<span class="op" id="6252198">==</span>&nbsp;<span class="ident" id="6252201">io</span><span class="op" id="6252203">.</span><span class="ident" id="6252204">EOF</span>&nbsp;<span class="op" id="6252208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252213">return</span>&nbsp;<span class="ident" id="6252220">fields</span><span class="op" id="6252226">,</span>&nbsp;<span class="ident" id="6252228">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252234">}</span>&nbsp;<span class="keyword" id="6252236">else</span>&nbsp;<span class="keyword" id="6252241">if</span>&nbsp;<span class="ident" id="6252244">err</span>&nbsp;<span class="op" id="6252248">!=</span>&nbsp;<span class="builtintype" id="6252251">nil</span>&nbsp;<span class="op" id="6252255">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252260">return</span>&nbsp;<span class="builtintype" id="6252267">nil</span><span class="op" id="6252270">,</span>&nbsp;<span class="ident" id="6252272">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252281">}</span><br>
<span class="lineno"></span><span class="op" id="6252283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6252286">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6252356">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6252431">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6252453">func</span>&nbsp;<span class="op" id="6252458">(</span><span class="ident" id="6252459">r</span>&nbsp;<span class="op" id="6252461">*</span><span class="ident" id="6252462">Reader</span><span class="op" id="6252468">)</span>&nbsp;<span class="ident" id="6252470">parseField</span><span class="op" id="6252480">(</span><span class="op" id="6252481">)</span>&nbsp;<span class="op" id="6252483">(</span><span class="ident" id="6252484">haveField</span>&nbsp;<span class="builtintype" id="6252494">bool</span><span class="op" id="6252498">,</span>&nbsp;<span class="ident" id="6252500">delim</span>&nbsp;<span class="builtintype" id="6252506">rune</span><span class="op" id="6252510">,</span>&nbsp;<span class="ident" id="6252512">err</span>&nbsp;<span class="builtintype" id="6252516">error</span><span class="op" id="6252521">)</span>&nbsp;<span class="op" id="6252523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252526">r</span><span class="op" id="6252527">.</span><span class="ident" id="6252528">field</span><span class="op" id="6252533">.</span><span class="ident" id="6252534">Reset</span><span class="op" id="6252539">(</span><span class="op" id="6252540">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252544">r1</span><span class="op" id="6252546">,</span>&nbsp;<span class="ident" id="6252548">err</span>&nbsp;<span class="op" id="6252552">:=</span>&nbsp;<span class="ident" id="6252555">r</span><span class="op" id="6252556">.</span><span class="ident" id="6252557">readRune</span><span class="op" id="6252565">(</span><span class="op" id="6252566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252569">for</span>&nbsp;<span class="ident" id="6252573">err</span>&nbsp;<span class="op" id="6252577">==</span>&nbsp;<span class="builtintype" id="6252580">nil</span>&nbsp;<span class="op" id="6252584">&amp;&amp;</span>&nbsp;<span class="ident" id="6252587">r</span><span class="op" id="6252588">.</span><span class="ident" id="6252589">TrimLeadingSpace</span>&nbsp;<span class="op" id="6252606">&amp;&amp;</span>&nbsp;<span class="ident" id="6252609">r1</span>&nbsp;<span class="op" id="6252612">!=</span>&nbsp;<span class="string" id="6252615">&#39;\n&#39;</span>&nbsp;<span class="op" id="6252620">&amp;&amp;</span>&nbsp;<span class="ident" id="6252623">unicode</span><span class="op" id="6252630">.</span><span class="ident" id="6252631">IsSpace</span><span class="op" id="6252638">(</span><span class="ident" id="6252639">r1</span><span class="op" id="6252641">)</span>&nbsp;<span class="op" id="6252643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252647">r1</span><span class="op" id="6252649">,</span>&nbsp;<span class="ident" id="6252651">err</span>&nbsp;<span class="op" id="6252655">=</span>&nbsp;<span class="ident" id="6252657">r</span><span class="op" id="6252658">.</span><span class="ident" id="6252659">readRune</span><span class="op" id="6252667">(</span><span class="op" id="6252668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252671">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252675">if</span>&nbsp;<span class="ident" id="6252678">err</span>&nbsp;<span class="op" id="6252682">==</span>&nbsp;<span class="ident" id="6252685">io</span><span class="op" id="6252687">.</span><span class="ident" id="6252688">EOF</span>&nbsp;<span class="op" id="6252692">&amp;&amp;</span>&nbsp;<span class="ident" id="6252695">r</span><span class="op" id="6252696">.</span><span class="ident" id="6252697">column</span>&nbsp;<span class="op" id="6252704">!=</span>&nbsp;<span class="num" id="6252707">0</span>&nbsp;<span class="op" id="6252709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252713">return</span>&nbsp;<span class="builtintype" id="6252720">true</span><span class="op" id="6252724">,</span>&nbsp;<span class="num" id="6252726">0</span><span class="op" id="6252727">,</span>&nbsp;<span class="ident" id="6252729">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252737">if</span>&nbsp;<span class="ident" id="6252740">err</span>&nbsp;<span class="op" id="6252744">!=</span>&nbsp;<span class="builtintype" id="6252747">nil</span>&nbsp;<span class="op" id="6252751">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252755">return</span>&nbsp;<span class="builtintype" id="6252762">false</span><span class="op" id="6252767">,</span>&nbsp;<span class="num" id="6252769">0</span><span class="op" id="6252770">,</span>&nbsp;<span class="ident" id="6252772">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252781">switch</span>&nbsp;<span class="ident" id="6252788">r1</span>&nbsp;<span class="op" id="6252791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252794">case</span>&nbsp;<span class="ident" id="6252799">r</span><span class="op" id="6252800">.</span><span class="ident" id="6252801">Comma</span><span class="op" id="6252806">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6252810">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252832">case</span>&nbsp;<span class="string" id="6252837">&#39;\n&#39;</span><span class="op" id="6252841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6252845">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252896">if</span>&nbsp;<span class="ident" id="6252899">r</span><span class="op" id="6252900">.</span><span class="ident" id="6252901">column</span>&nbsp;<span class="op" id="6252908">==</span>&nbsp;<span class="num" id="6252911">0</span>&nbsp;<span class="op" id="6252913">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252918">return</span>&nbsp;<span class="builtintype" id="6252925">false</span><span class="op" id="6252930">,</span>&nbsp;<span class="ident" id="6252932">r1</span><span class="op" id="6252934">,</span>&nbsp;<span class="builtintype" id="6252936">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6252942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252946">return</span>&nbsp;<span class="builtintype" id="6252953">true</span><span class="op" id="6252957">,</span>&nbsp;<span class="ident" id="6252959">r1</span><span class="op" id="6252961">,</span>&nbsp;<span class="builtintype" id="6252963">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6252969">case</span>&nbsp;<span class="string" id="6252974">&#39;&#34;&#39;</span><span class="op" id="6252977">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6252981">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6252998">Quoted</span><span class="op" id="6253004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253008">for</span>&nbsp;<span class="op" id="6253012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253017">r1</span><span class="op" id="6253019">,</span>&nbsp;<span class="ident" id="6253021">err</span>&nbsp;<span class="op" id="6253025">=</span>&nbsp;<span class="ident" id="6253027">r</span><span class="op" id="6253028">.</span><span class="ident" id="6253029">readRune</span><span class="op" id="6253037">(</span><span class="op" id="6253038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253043">if</span>&nbsp;<span class="ident" id="6253046">err</span>&nbsp;<span class="op" id="6253050">!=</span>&nbsp;<span class="builtintype" id="6253053">nil</span>&nbsp;<span class="op" id="6253057">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253063">if</span>&nbsp;<span class="ident" id="6253066">err</span>&nbsp;<span class="op" id="6253070">==</span>&nbsp;<span class="ident" id="6253073">io</span><span class="op" id="6253075">.</span><span class="ident" id="6253076">EOF</span>&nbsp;<span class="op" id="6253080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253087">if</span>&nbsp;<span class="ident" id="6253090">r</span><span class="op" id="6253091">.</span><span class="ident" id="6253092">LazyQuotes</span>&nbsp;<span class="op" id="6253103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253111">return</span>&nbsp;<span class="builtintype" id="6253118">true</span><span class="op" id="6253122">,</span>&nbsp;<span class="num" id="6253124">0</span><span class="op" id="6253125">,</span>&nbsp;<span class="ident" id="6253127">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253143">return</span>&nbsp;<span class="builtintype" id="6253150">false</span><span class="op" id="6253155">,</span>&nbsp;<span class="num" id="6253157">0</span><span class="op" id="6253158">,</span>&nbsp;<span class="ident" id="6253160">r</span><span class="op" id="6253161">.</span><span class="builtintype" id="6253162">error</span><span class="op" id="6253167">(</span><span class="ident" id="6253168">ErrQuote</span><span class="op" id="6253176">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253188">return</span>&nbsp;<span class="builtintype" id="6253195">false</span><span class="op" id="6253200">,</span>&nbsp;<span class="num" id="6253202">0</span><span class="op" id="6253203">,</span>&nbsp;<span class="ident" id="6253205">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253217">switch</span>&nbsp;<span class="ident" id="6253224">r1</span>&nbsp;<span class="op" id="6253227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253232">case</span>&nbsp;<span class="string" id="6253237">&#39;&#34;&#39;</span><span class="op" id="6253240">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253246">r1</span><span class="op" id="6253248">,</span>&nbsp;<span class="ident" id="6253250">err</span>&nbsp;<span class="op" id="6253254">=</span>&nbsp;<span class="ident" id="6253256">r</span><span class="op" id="6253257">.</span><span class="ident" id="6253258">readRune</span><span class="op" id="6253266">(</span><span class="op" id="6253267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253273">if</span>&nbsp;<span class="ident" id="6253276">err</span>&nbsp;<span class="op" id="6253280">!=</span>&nbsp;<span class="builtintype" id="6253283">nil</span>&nbsp;<span class="op" id="6253287">||</span>&nbsp;<span class="ident" id="6253290">r1</span>&nbsp;<span class="op" id="6253293">==</span>&nbsp;<span class="ident" id="6253296">r</span><span class="op" id="6253297">.</span><span class="ident" id="6253298">Comma</span>&nbsp;<span class="op" id="6253304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253311">break</span>&nbsp;<span class="ident" id="6253317">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253334">if</span>&nbsp;<span class="ident" id="6253337">r1</span>&nbsp;<span class="op" id="6253340">==</span>&nbsp;<span class="string" id="6253343">&#39;\n&#39;</span>&nbsp;<span class="op" id="6253348">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253355">return</span>&nbsp;<span class="builtintype" id="6253362">true</span><span class="op" id="6253366">,</span>&nbsp;<span class="ident" id="6253368">r1</span><span class="op" id="6253370">,</span>&nbsp;<span class="builtintype" id="6253372">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253386">if</span>&nbsp;<span class="ident" id="6253389">r1</span>&nbsp;<span class="op" id="6253392">!=</span>&nbsp;<span class="string" id="6253395">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6253399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253406">if</span>&nbsp;<span class="op" id="6253409">!</span><span class="ident" id="6253410">r</span><span class="op" id="6253411">.</span><span class="ident" id="6253412">LazyQuotes</span>&nbsp;<span class="op" id="6253423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253431">r</span><span class="op" id="6253432">.</span><span class="ident" id="6253433">column</span><span class="op" id="6253439">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253448">return</span>&nbsp;<span class="builtintype" id="6253455">false</span><span class="op" id="6253460">,</span>&nbsp;<span class="num" id="6253462">0</span><span class="op" id="6253463">,</span>&nbsp;<span class="ident" id="6253465">r</span><span class="op" id="6253466">.</span><span class="builtintype" id="6253467">error</span><span class="op" id="6253472">(</span><span class="ident" id="6253473">ErrQuote</span><span class="op" id="6253481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6253495">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253525">r</span><span class="op" id="6253526">.</span><span class="ident" id="6253527">field</span><span class="op" id="6253532">.</span><span class="ident" id="6253533">WriteRune</span><span class="op" id="6253542">(</span><span class="string" id="6253543">&#39;&#34;&#39;</span><span class="op" id="6253546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253552">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253557">case</span>&nbsp;<span class="string" id="6253562">&#39;\n&#39;</span><span class="op" id="6253566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253572">r</span><span class="op" id="6253573">.</span><span class="ident" id="6253574">line</span><span class="op" id="6253578">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253585">r</span><span class="op" id="6253586">.</span><span class="ident" id="6253587">column</span>&nbsp;<span class="op" id="6253594">=</span>&nbsp;<span class="op" id="6253596">-</span><span class="num" id="6253597">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253607">r</span><span class="op" id="6253608">.</span><span class="ident" id="6253609">field</span><span class="op" id="6253614">.</span><span class="ident" id="6253615">WriteRune</span><span class="op" id="6253624">(</span><span class="ident" id="6253625">r1</span><span class="op" id="6253627">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253635">default</span><span class="op" id="6253642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6253646">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253666">for</span>&nbsp;<span class="op" id="6253670">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253675">r</span><span class="op" id="6253676">.</span><span class="ident" id="6253677">field</span><span class="op" id="6253682">.</span><span class="ident" id="6253683">WriteRune</span><span class="op" id="6253692">(</span><span class="ident" id="6253693">r1</span><span class="op" id="6253695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6253700">r1</span><span class="op" id="6253702">,</span>&nbsp;<span class="ident" id="6253704">err</span>&nbsp;<span class="op" id="6253708">=</span>&nbsp;<span class="ident" id="6253710">r</span><span class="op" id="6253711">.</span><span class="ident" id="6253712">readRune</span><span class="op" id="6253720">(</span><span class="op" id="6253721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253726">if</span>&nbsp;<span class="ident" id="6253729">err</span>&nbsp;<span class="op" id="6253733">!=</span>&nbsp;<span class="builtintype" id="6253736">nil</span>&nbsp;<span class="op" id="6253740">||</span>&nbsp;<span class="ident" id="6253743">r1</span>&nbsp;<span class="op" id="6253746">==</span>&nbsp;<span class="ident" id="6253749">r</span><span class="op" id="6253750">.</span><span class="ident" id="6253751">Comma</span>&nbsp;<span class="op" id="6253757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253763">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253772">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253777">if</span>&nbsp;<span class="ident" id="6253780">r1</span>&nbsp;<span class="op" id="6253783">==</span>&nbsp;<span class="string" id="6253786">&#39;\n&#39;</span>&nbsp;<span class="op" id="6253791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253797">return</span>&nbsp;<span class="builtintype" id="6253804">true</span><span class="op" id="6253808">,</span>&nbsp;<span class="ident" id="6253810">r1</span><span class="op" id="6253812">,</span>&nbsp;<span class="builtintype" id="6253814">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253826">if</span>&nbsp;<span class="op" id="6253829">!</span><span class="ident" id="6253830">r</span><span class="op" id="6253831">.</span><span class="ident" id="6253832">LazyQuotes</span>&nbsp;<span class="op" id="6253843">&amp;&amp;</span>&nbsp;<span class="ident" id="6253846">r1</span>&nbsp;<span class="op" id="6253849">==</span>&nbsp;<span class="string" id="6253852">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6253856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253862">return</span>&nbsp;<span class="builtintype" id="6253869">false</span><span class="op" id="6253874">,</span>&nbsp;<span class="num" id="6253876">0</span><span class="op" id="6253877">,</span>&nbsp;<span class="ident" id="6253879">r</span><span class="op" id="6253880">.</span><span class="builtintype" id="6253881">error</span><span class="op" id="6253886">(</span><span class="ident" id="6253887">ErrBareQuote</span><span class="op" id="6253899">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253915">if</span>&nbsp;<span class="ident" id="6253918">err</span>&nbsp;<span class="op" id="6253922">!=</span>&nbsp;<span class="builtintype" id="6253925">nil</span>&nbsp;<span class="op" id="6253929">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253933">if</span>&nbsp;<span class="ident" id="6253936">err</span>&nbsp;<span class="op" id="6253940">==</span>&nbsp;<span class="ident" id="6253943">io</span><span class="op" id="6253945">.</span><span class="ident" id="6253946">EOF</span>&nbsp;<span class="op" id="6253950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253955">return</span>&nbsp;<span class="builtintype" id="6253962">true</span><span class="op" id="6253966">,</span>&nbsp;<span class="num" id="6253968">0</span><span class="op" id="6253969">,</span>&nbsp;<span class="ident" id="6253971">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6253977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6253981">return</span>&nbsp;<span class="builtintype" id="6253988">false</span><span class="op" id="6253993">,</span>&nbsp;<span class="num" id="6253995">0</span><span class="op" id="6253996">,</span>&nbsp;<span class="ident" id="6253998">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6254003">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6254007">return</span>&nbsp;<span class="builtintype" id="6254014">true</span><span class="op" id="6254018">,</span>&nbsp;<span class="ident" id="6254020">r1</span><span class="op" id="6254022">,</span>&nbsp;<span class="builtintype" id="6254024">nil</span><br>
<span class="lineno"></span><span class="op" id="6254028">}</span>
</div>
</body>
</html>
