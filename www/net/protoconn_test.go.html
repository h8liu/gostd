<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6887982">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6888038">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6888092">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6888143">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6888222">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6888231">package</span>&nbsp;<span class="ident" id="6888239">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6888244">import</span>&nbsp;<span class="op" id="6888251">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6888254">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6888267">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6888273">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6888284">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6888295">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6888302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6888305">//&nbsp;testUnixAddr&nbsp;uses&nbsp;ioutil.TempFile&nbsp;to&nbsp;get&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;unique.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="6888375">//&nbsp;also&nbsp;uses&nbsp;/tmp&nbsp;directory&nbsp;in&nbsp;case&nbsp;it&nbsp;is&nbsp;prohibited&nbsp;to&nbsp;create&nbsp;UNIX</span><br>
<span class="lineno">20</span><span class="comment" id="6888443">//&nbsp;sockets&nbsp;in&nbsp;TMPDIR.</span><br>
<span class="lineno"></span><span class="keyword" id="6888465">func</span>&nbsp;<span class="ident" id="6888470">testUnixAddr</span><span class="op" id="6888482">(</span><span class="op" id="6888483">)</span>&nbsp;<span class="builtintype" id="6888485">string</span>&nbsp;<span class="op" id="6888492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6888495">f</span><span class="op" id="6888496">,</span>&nbsp;<span class="ident" id="6888498">err</span>&nbsp;<span class="op" id="6888502">:=</span>&nbsp;<span class="ident" id="6888505"><a href="/net/protoconn_test.go.html#6888254">ioutil</a></span><span class="op" id="6888511">.</span><span class="ident" id="6888512">TempFile</span><span class="op" id="6888520">(</span><span class="string" id="6888521">&#34;&#34;</span><span class="op" id="6888523">,</span>&nbsp;<span class="string" id="6888525">&#34;nettest&#34;</span><span class="op" id="6888534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888537">if</span>&nbsp;<span class="ident" id="6888540"><a href="/net/protoconn_test.go.html#6888498">err</a></span>&nbsp;<span class="op" id="6888544">!=</span>&nbsp;<span class="ident" id="6888547">nil</span>&nbsp;<span class="op" id="6888551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6888555">panic</span><span class="op" id="6888560">(</span><span class="ident" id="6888561"><a href="/net/protoconn_test.go.html#6888498">err</a></span><span class="op" id="6888564">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6888567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6888570">addr</span>&nbsp;<span class="op" id="6888575">:=</span>&nbsp;<span class="ident" id="6888578"><a href="/net/protoconn_test.go.html#6888495">f</a></span><span class="op" id="6888579">.</span><span class="ident" id="6888580">Name</span><span class="op" id="6888584">(</span><span class="op" id="6888585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6888588"><a href="/net/protoconn_test.go.html#6888495">f</a></span><span class="op" id="6888589">.</span><span class="ident" id="6888590">Close</span><span class="op" id="6888595">(</span><span class="op" id="6888596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6888599"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6888601">.</span><span class="ident" id="6888602">Remove</span><span class="op" id="6888608">(</span><span class="ident" id="6888609"><a href="/net/protoconn_test.go.html#6888570">addr</a></span><span class="op" id="6888613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888616">return</span>&nbsp;<span class="ident" id="6888623"><a href="/net/protoconn_test.go.html#6888570">addr</a></span><br>
<span class="lineno">30</span><span class="op" id="6888628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6888631">var</span>&nbsp;<span class="ident" id="6888635">condFatalf</span>&nbsp;<span class="op" id="6888646">=</span>&nbsp;<span class="keyword" id="6888648">func</span><span class="op" id="6888652">(</span><span class="op" id="6888653">)</span>&nbsp;<span class="keyword" id="6888655">func</span><span class="op" id="6888659">(</span><span class="op" id="6888660">*</span><span class="ident" id="6888661"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6888668">.</span><span class="ident" id="6888669">T</span><span class="op" id="6888670">,</span>&nbsp;<span class="builtintype" id="6888672">string</span><span class="op" id="6888678">,</span>&nbsp;<span class="op" id="6888680">...</span><span class="keyword" id="6888683">interface</span><span class="op" id="6888692">{</span><span class="op" id="6888693">}</span><span class="op" id="6888694">)</span>&nbsp;<span class="op" id="6888696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6888699">//&nbsp;A&nbsp;few&nbsp;APIs&nbsp;are&nbsp;not&nbsp;implemented&nbsp;yet&nbsp;on&nbsp;both&nbsp;Plan&nbsp;9&nbsp;and&nbsp;Windows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888766">switch</span>&nbsp;<span class="ident" id="6888773"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6888780">.</span><span class="ident" id="6888781">GOOS</span>&nbsp;<span class="op" id="6888786">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888789">case</span>&nbsp;<span class="string" id="6888794">&#34;plan9&#34;</span><span class="op" id="6888801">,</span>&nbsp;<span class="string" id="6888803">&#34;windows&#34;</span><span class="op" id="6888812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888816">return</span>&nbsp;<span class="op" id="6888823">(</span><span class="op" id="6888824">*</span><span class="ident" id="6888825"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6888832">.</span><span class="ident" id="6888833">T</span><span class="op" id="6888834">)</span><span class="op" id="6888835">.</span><span class="ident" id="6888836">Logf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6888842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888845">return</span>&nbsp;<span class="op" id="6888852">(</span><span class="op" id="6888853">*</span><span class="ident" id="6888854"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6888861">.</span><span class="ident" id="6888862">T</span><span class="op" id="6888863">)</span><span class="op" id="6888864">.</span><span class="ident" id="6888865">Fatalf</span><br>
<span class="lineno"></span><span class="op" id="6888872">}</span><span class="op" id="6888873">(</span><span class="op" id="6888874">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="6888877">func</span>&nbsp;<span class="ident" id="6888882">TestTCPListenerSpecificMethods</span><span class="op" id="6888912">(</span><span class="ident" id="6888913">t</span>&nbsp;<span class="op" id="6888915">*</span><span class="ident" id="6888916"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6888923">.</span><span class="ident" id="6888924">T</span><span class="op" id="6888925">)</span>&nbsp;<span class="op" id="6888927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888930">switch</span>&nbsp;<span class="ident" id="6888937"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6888944">.</span><span class="ident" id="6888945">GOOS</span>&nbsp;<span class="op" id="6888950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6888953">case</span>&nbsp;<span class="string" id="6888958">&#34;plan9&#34;</span><span class="op" id="6888965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6888969"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6888970">.</span><span class="ident" id="6888971">Skipf</span><span class="op" id="6888976">(</span><span class="string" id="6888977">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6888998">,</span>&nbsp;<span class="ident" id="6889000"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6889007">.</span><span class="ident" id="6889008">GOOS</span><span class="op" id="6889012">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889019">la</span><span class="op" id="6889021">,</span>&nbsp;<span class="ident" id="6889023">err</span>&nbsp;<span class="op" id="6889027">:=</span>&nbsp;<span class="ident" id="6889030"><a href="/net/tcpsock.go.html#2692376">ResolveTCPAddr</a></span><span class="op" id="6889044">(</span><span class="string" id="6889045">&#34;tcp4&#34;</span><span class="op" id="6889051">,</span>&nbsp;<span class="string" id="6889053">&#34;127.0.0.1:0&#34;</span><span class="op" id="6889066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889069">if</span>&nbsp;<span class="ident" id="6889072"><a href="/net/protoconn_test.go.html#6889023">err</a></span>&nbsp;<span class="op" id="6889076">!=</span>&nbsp;<span class="ident" id="6889079">nil</span>&nbsp;<span class="op" id="6889083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889087"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6889088">.</span><span class="ident" id="6889089">Fatalf</span><span class="op" id="6889095">(</span><span class="string" id="6889096">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889123">,</span>&nbsp;<span class="ident" id="6889125"><a href="/net/protoconn_test.go.html#6889023">err</a></span><span class="op" id="6889128">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889134">ln</span><span class="op" id="6889136">,</span>&nbsp;<span class="ident" id="6889138"><a href="/net/protoconn_test.go.html#6889023">err</a></span>&nbsp;<span class="op" id="6889142">:=</span>&nbsp;<span class="ident" id="6889145"><a href="/net/tcpsock_posix.go.html#2701875">ListenTCP</a></span><span class="op" id="6889154">(</span><span class="string" id="6889155">&#34;tcp4&#34;</span><span class="op" id="6889161">,</span>&nbsp;<span class="ident" id="6889163"><a href="/net/protoconn_test.go.html#6889019">la</a></span><span class="op" id="6889165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889168">if</span>&nbsp;<span class="ident" id="6889171"><a href="/net/protoconn_test.go.html#6889023">err</a></span>&nbsp;<span class="op" id="6889175">!=</span>&nbsp;<span class="ident" id="6889178">nil</span>&nbsp;<span class="op" id="6889182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889186"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6889187">.</span><span class="ident" id="6889188">Fatalf</span><span class="op" id="6889194">(</span><span class="string" id="6889195">&#34;ListenTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889217">,</span>&nbsp;<span class="ident" id="6889219"><a href="/net/protoconn_test.go.html#6889023">err</a></span><span class="op" id="6889222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889225">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889228">defer</span>&nbsp;<span class="ident" id="6889234"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889236">.</span><span class="ident" id="6889237">Close</span><span class="op" id="6889242">(</span><span class="op" id="6889243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889246"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889248">.</span><span class="ident" id="6889249">Addr</span><span class="op" id="6889253">(</span><span class="op" id="6889254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889257"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889259">.</span><span class="ident" id="6889260">SetDeadline</span><span class="op" id="6889271">(</span><span class="ident" id="6889272"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6889276">.</span><span class="ident" id="6889277">Now</span><span class="op" id="6889280">(</span><span class="op" id="6889281">)</span><span class="op" id="6889282">.</span><span class="ident" id="6889283">Add</span><span class="op" id="6889286">(</span><span class="num" id="6889287">30</span>&nbsp;<span class="op" id="6889290">*</span>&nbsp;<span class="ident" id="6889292"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6889296">.</span><span class="ident" id="6889297">Nanosecond</span><span class="op" id="6889307">)</span><span class="op" id="6889308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889312">if</span>&nbsp;<span class="ident" id="6889315">c</span><span class="op" id="6889316">,</span>&nbsp;<span class="ident" id="6889318">err</span>&nbsp;<span class="op" id="6889322">:=</span>&nbsp;<span class="ident" id="6889325"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889327">.</span><span class="ident" id="6889328">Accept</span><span class="op" id="6889334">(</span><span class="op" id="6889335">)</span><span class="op" id="6889336">;</span>&nbsp;<span class="ident" id="6889338"><a href="/net/protoconn_test.go.html#6889318">err</a></span>&nbsp;<span class="op" id="6889342">!=</span>&nbsp;<span class="ident" id="6889345">nil</span>&nbsp;<span class="op" id="6889349">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889353">if</span>&nbsp;<span class="op" id="6889356">!</span><span class="ident" id="6889357"><a href="/net/protoconn_test.go.html#6889318">err</a></span><span class="op" id="6889360">.</span><span class="op" id="6889361">(</span><span class="ident" id="6889362"><a href="/net/net.go.html#2656629">Error</a></span><span class="op" id="6889367">)</span><span class="op" id="6889368">.</span><span class="ident" id="6889369">Timeout</span><span class="op" id="6889376">(</span><span class="op" id="6889377">)</span>&nbsp;<span class="op" id="6889379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889384"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6889385">.</span><span class="ident" id="6889386">Fatalf</span><span class="op" id="6889392">(</span><span class="string" id="6889393">&#34;TCPListener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889424">,</span>&nbsp;<span class="ident" id="6889426"><a href="/net/protoconn_test.go.html#6889318">err</a></span><span class="op" id="6889429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889436">}</span>&nbsp;<span class="keyword" id="6889438">else</span>&nbsp;<span class="op" id="6889443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889447"><a href="/net/protoconn_test.go.html#6889315">c</a></span><span class="op" id="6889448">.</span><span class="ident" id="6889449">Close</span><span class="op" id="6889454">(</span><span class="op" id="6889455">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889461">if</span>&nbsp;<span class="ident" id="6889464">c</span><span class="op" id="6889465">,</span>&nbsp;<span class="ident" id="6889467">err</span>&nbsp;<span class="op" id="6889471">:=</span>&nbsp;<span class="ident" id="6889474"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889476">.</span><span class="ident" id="6889477">AcceptTCP</span><span class="op" id="6889486">(</span><span class="op" id="6889487">)</span><span class="op" id="6889488">;</span>&nbsp;<span class="ident" id="6889490"><a href="/net/protoconn_test.go.html#6889467">err</a></span>&nbsp;<span class="op" id="6889494">!=</span>&nbsp;<span class="ident" id="6889497">nil</span>&nbsp;<span class="op" id="6889501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889505">if</span>&nbsp;<span class="op" id="6889508">!</span><span class="ident" id="6889509"><a href="/net/protoconn_test.go.html#6889467">err</a></span><span class="op" id="6889512">.</span><span class="op" id="6889513">(</span><span class="ident" id="6889514"><a href="/net/net.go.html#2656629">Error</a></span><span class="op" id="6889519">)</span><span class="op" id="6889520">.</span><span class="ident" id="6889521">Timeout</span><span class="op" id="6889528">(</span><span class="op" id="6889529">)</span>&nbsp;<span class="op" id="6889531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889536"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6889537">.</span><span class="ident" id="6889538">Fatalf</span><span class="op" id="6889544">(</span><span class="string" id="6889545">&#34;TCPListener.AcceptTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889579">,</span>&nbsp;<span class="ident" id="6889581"><a href="/net/protoconn_test.go.html#6889467">err</a></span><span class="op" id="6889584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889588">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889591">}</span>&nbsp;<span class="keyword" id="6889593">else</span>&nbsp;<span class="op" id="6889598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889602"><a href="/net/protoconn_test.go.html#6889464">c</a></span><span class="op" id="6889603">.</span><span class="ident" id="6889604">Close</span><span class="op" id="6889609">(</span><span class="op" id="6889610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889617">if</span>&nbsp;<span class="ident" id="6889620">f</span><span class="op" id="6889621">,</span>&nbsp;<span class="ident" id="6889623">err</span>&nbsp;<span class="op" id="6889627">:=</span>&nbsp;<span class="ident" id="6889630"><a href="/net/protoconn_test.go.html#6889134">ln</a></span><span class="op" id="6889632">.</span><span class="ident" id="6889633">File</span><span class="op" id="6889637">(</span><span class="op" id="6889638">)</span><span class="op" id="6889639">;</span>&nbsp;<span class="ident" id="6889641"><a href="/net/protoconn_test.go.html#6889623">err</a></span>&nbsp;<span class="op" id="6889645">!=</span>&nbsp;<span class="ident" id="6889648">nil</span>&nbsp;<span class="op" id="6889652">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889656"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6889666">(</span><span class="ident" id="6889667"><a href="/net/protoconn_test.go.html#6888913">t</a></span><span class="op" id="6889668">,</span>&nbsp;<span class="string" id="6889670">&#34;TCPListener.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889699">,</span>&nbsp;<span class="ident" id="6889701"><a href="/net/protoconn_test.go.html#6889623">err</a></span><span class="op" id="6889704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889707">}</span>&nbsp;<span class="keyword" id="6889709">else</span>&nbsp;<span class="op" id="6889714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889718"><a href="/net/protoconn_test.go.html#6889620">f</a></span><span class="op" id="6889719">.</span><span class="ident" id="6889720">Close</span><span class="op" id="6889725">(</span><span class="op" id="6889726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889729">}</span><br>
<span class="lineno"></span><span class="op" id="6889731">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="6889734">func</span>&nbsp;<span class="ident" id="6889739">TestTCPConnSpecificMethods</span><span class="op" id="6889765">(</span><span class="ident" id="6889766">t</span>&nbsp;<span class="op" id="6889768">*</span><span class="ident" id="6889769"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6889776">.</span><span class="ident" id="6889777">T</span><span class="op" id="6889778">)</span>&nbsp;<span class="op" id="6889780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889783">la</span><span class="op" id="6889785">,</span>&nbsp;<span class="ident" id="6889787">err</span>&nbsp;<span class="op" id="6889791">:=</span>&nbsp;<span class="ident" id="6889794"><a href="/net/tcpsock.go.html#2692376">ResolveTCPAddr</a></span><span class="op" id="6889808">(</span><span class="string" id="6889809">&#34;tcp4&#34;</span><span class="op" id="6889815">,</span>&nbsp;<span class="string" id="6889817">&#34;127.0.0.1:0&#34;</span><span class="op" id="6889830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889833">if</span>&nbsp;<span class="ident" id="6889836"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6889840">!=</span>&nbsp;<span class="ident" id="6889843">nil</span>&nbsp;<span class="op" id="6889847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889851"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6889852">.</span><span class="ident" id="6889853">Fatalf</span><span class="op" id="6889859">(</span><span class="string" id="6889860">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889887">,</span>&nbsp;<span class="ident" id="6889889"><a href="/net/protoconn_test.go.html#6889787">err</a></span><span class="op" id="6889892">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889898">ln</span><span class="op" id="6889900">,</span>&nbsp;<span class="ident" id="6889902"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6889906">:=</span>&nbsp;<span class="ident" id="6889909"><a href="/net/tcpsock_posix.go.html#2701875">ListenTCP</a></span><span class="op" id="6889918">(</span><span class="string" id="6889919">&#34;tcp4&#34;</span><span class="op" id="6889925">,</span>&nbsp;<span class="ident" id="6889927"><a href="/net/protoconn_test.go.html#6889783">la</a></span><span class="op" id="6889929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889932">if</span>&nbsp;<span class="ident" id="6889935"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6889939">!=</span>&nbsp;<span class="ident" id="6889942">nil</span>&nbsp;<span class="op" id="6889946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6889950"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6889951">.</span><span class="ident" id="6889952">Fatalf</span><span class="op" id="6889958">(</span><span class="string" id="6889959">&#34;ListenTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6889981">,</span>&nbsp;<span class="ident" id="6889983"><a href="/net/protoconn_test.go.html#6889787">err</a></span><span class="op" id="6889986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6889989">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6889992">defer</span>&nbsp;<span class="ident" id="6889998"><a href="/net/protoconn_test.go.html#6889898">ln</a></span><span class="op" id="6890000">.</span><span class="ident" id="6890001">Close</span><span class="op" id="6890006">(</span><span class="op" id="6890007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890010"><a href="/net/protoconn_test.go.html#6889898">ln</a></span><span class="op" id="6890012">.</span><span class="ident" id="6890013">Addr</span><span class="op" id="6890017">(</span><span class="op" id="6890018">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890022">done</span>&nbsp;<span class="op" id="6890027">:=</span>&nbsp;<span class="builtinfunc" id="6890030">make</span><span class="op" id="6890034">(</span><span class="keyword" id="6890035">chan</span>&nbsp;<span class="builtintype" id="6890040">int</span><span class="op" id="6890043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890046">go</span>&nbsp;<span class="ident" id="6890049"><a href="/net/conn_test.go.html#6768889">transponder</a></span><span class="op" id="6890060">(</span><span class="ident" id="6890061"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6890062">,</span>&nbsp;<span class="ident" id="6890064"><a href="/net/protoconn_test.go.html#6889898">ln</a></span><span class="op" id="6890066">,</span>&nbsp;<span class="ident" id="6890068"><a href="/net/protoconn_test.go.html#6890022">done</a></span><span class="op" id="6890072">)</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890076">ra</span><span class="op" id="6890078">,</span>&nbsp;<span class="ident" id="6890080"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6890084">:=</span>&nbsp;<span class="ident" id="6890087"><a href="/net/tcpsock.go.html#2692376">ResolveTCPAddr</a></span><span class="op" id="6890101">(</span><span class="string" id="6890102">&#34;tcp4&#34;</span><span class="op" id="6890108">,</span>&nbsp;<span class="ident" id="6890110"><a href="/net/protoconn_test.go.html#6889898">ln</a></span><span class="op" id="6890112">.</span><span class="ident" id="6890113">Addr</span><span class="op" id="6890117">(</span><span class="op" id="6890118">)</span><span class="op" id="6890119">.</span><span class="ident" id="6890120">String</span><span class="op" id="6890126">(</span><span class="op" id="6890127">)</span><span class="op" id="6890128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890131">if</span>&nbsp;<span class="ident" id="6890134"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6890138">!=</span>&nbsp;<span class="ident" id="6890141">nil</span>&nbsp;<span class="op" id="6890145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890149"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6890150">.</span><span class="ident" id="6890151">Fatalf</span><span class="op" id="6890157">(</span><span class="string" id="6890158">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6890185">,</span>&nbsp;<span class="ident" id="6890187"><a href="/net/protoconn_test.go.html#6889787">err</a></span><span class="op" id="6890190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890193">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890196">c</span><span class="op" id="6890197">,</span>&nbsp;<span class="ident" id="6890199"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6890203">:=</span>&nbsp;<span class="ident" id="6890206"><a href="/net/tcpsock_posix.go.html#2696531">DialTCP</a></span><span class="op" id="6890213">(</span><span class="string" id="6890214">&#34;tcp4&#34;</span><span class="op" id="6890220">,</span>&nbsp;<span class="ident" id="6890222">nil</span><span class="op" id="6890225">,</span>&nbsp;<span class="ident" id="6890227"><a href="/net/protoconn_test.go.html#6890076">ra</a></span><span class="op" id="6890229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890232">if</span>&nbsp;<span class="ident" id="6890235"><a href="/net/protoconn_test.go.html#6889787">err</a></span>&nbsp;<span class="op" id="6890239">!=</span>&nbsp;<span class="ident" id="6890242">nil</span>&nbsp;<span class="op" id="6890246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890250"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6890251">.</span><span class="ident" id="6890252">Fatalf</span><span class="op" id="6890258">(</span><span class="string" id="6890259">&#34;DialTCP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6890279">,</span>&nbsp;<span class="ident" id="6890281"><a href="/net/protoconn_test.go.html#6889787">err</a></span><span class="op" id="6890284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890290">defer</span>&nbsp;<span class="ident" id="6890296"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890297">.</span><span class="ident" id="6890298">Close</span><span class="op" id="6890303">(</span><span class="op" id="6890304">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890307"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890308">.</span><span class="ident" id="6890309">SetKeepAlive</span><span class="op" id="6890321">(</span><span class="ident" id="6890322">false</span><span class="op" id="6890327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890330"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890331">.</span><span class="ident" id="6890332">SetKeepAlivePeriod</span><span class="op" id="6890350">(</span><span class="num" id="6890351">3</span>&nbsp;<span class="op" id="6890353">*</span>&nbsp;<span class="ident" id="6890355"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6890359">.</span><span class="ident" id="6890360">Second</span><span class="op" id="6890366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890369"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890370">.</span><span class="ident" id="6890371">SetLinger</span><span class="op" id="6890380">(</span><span class="num" id="6890381">0</span><span class="op" id="6890382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890385"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890386">.</span><span class="ident" id="6890387">SetNoDelay</span><span class="op" id="6890397">(</span><span class="ident" id="6890398">false</span><span class="op" id="6890403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890406"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890407">.</span><span class="ident" id="6890408">LocalAddr</span><span class="op" id="6890417">(</span><span class="op" id="6890418">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890421"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890422">.</span><span class="ident" id="6890423">RemoteAddr</span><span class="op" id="6890433">(</span><span class="op" id="6890434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890437"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890438">.</span><span class="ident" id="6890439">SetDeadline</span><span class="op" id="6890450">(</span><span class="ident" id="6890451"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6890455">.</span><span class="ident" id="6890456">Now</span><span class="op" id="6890459">(</span><span class="op" id="6890460">)</span><span class="op" id="6890461">.</span><span class="ident" id="6890462">Add</span><span class="op" id="6890465">(</span><span class="ident" id="6890466"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6890477">)</span><span class="op" id="6890478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890481"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890482">.</span><span class="ident" id="6890483">SetReadDeadline</span><span class="op" id="6890498">(</span><span class="ident" id="6890499"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6890503">.</span><span class="ident" id="6890504">Now</span><span class="op" id="6890507">(</span><span class="op" id="6890508">)</span><span class="op" id="6890509">.</span><span class="ident" id="6890510">Add</span><span class="op" id="6890513">(</span><span class="ident" id="6890514"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6890525">)</span><span class="op" id="6890526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890529"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890530">.</span><span class="ident" id="6890531">SetWriteDeadline</span><span class="op" id="6890547">(</span><span class="ident" id="6890548"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6890552">.</span><span class="ident" id="6890553">Now</span><span class="op" id="6890556">(</span><span class="op" id="6890557">)</span><span class="op" id="6890558">.</span><span class="ident" id="6890559">Add</span><span class="op" id="6890562">(</span><span class="ident" id="6890563"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6890574">)</span><span class="op" id="6890575">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890579">if</span>&nbsp;<span class="ident" id="6890582">_</span><span class="op" id="6890583">,</span>&nbsp;<span class="ident" id="6890585">err</span>&nbsp;<span class="op" id="6890589">:=</span>&nbsp;<span class="ident" id="6890592"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890593">.</span><span class="ident" id="6890594">Write</span><span class="op" id="6890599">(</span><span class="op" id="6890600">[</span><span class="op" id="6890601">]</span><span class="builtintype" id="6890602">byte</span><span class="op" id="6890606">(</span><span class="string" id="6890607">&#34;TCPCONN&nbsp;TEST&#34;</span><span class="op" id="6890621">)</span><span class="op" id="6890622">)</span><span class="op" id="6890623">;</span>&nbsp;<span class="ident" id="6890625"><a href="/net/protoconn_test.go.html#6890585">err</a></span>&nbsp;<span class="op" id="6890629">!=</span>&nbsp;<span class="ident" id="6890632">nil</span>&nbsp;<span class="op" id="6890636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890640"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6890641">.</span><span class="ident" id="6890642">Fatalf</span><span class="op" id="6890648">(</span><span class="string" id="6890649">&#34;TCPConn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6890675">,</span>&nbsp;<span class="ident" id="6890677"><a href="/net/protoconn_test.go.html#6890585">err</a></span><span class="op" id="6890680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890686">rb</span>&nbsp;<span class="op" id="6890689">:=</span>&nbsp;<span class="builtinfunc" id="6890692">make</span><span class="op" id="6890696">(</span><span class="op" id="6890697">[</span><span class="op" id="6890698">]</span><span class="builtintype" id="6890699">byte</span><span class="op" id="6890703">,</span>&nbsp;<span class="num" id="6890705">128</span><span class="op" id="6890708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890711">if</span>&nbsp;<span class="ident" id="6890714">_</span><span class="op" id="6890715">,</span>&nbsp;<span class="ident" id="6890717">err</span>&nbsp;<span class="op" id="6890721">:=</span>&nbsp;<span class="ident" id="6890724"><a href="/net/protoconn_test.go.html#6890196">c</a></span><span class="op" id="6890725">.</span><span class="ident" id="6890726">Read</span><span class="op" id="6890730">(</span><span class="ident" id="6890731"><a href="/net/protoconn_test.go.html#6890686">rb</a></span><span class="op" id="6890733">)</span><span class="op" id="6890734">;</span>&nbsp;<span class="ident" id="6890736"><a href="/net/protoconn_test.go.html#6890717">err</a></span>&nbsp;<span class="op" id="6890740">!=</span>&nbsp;<span class="ident" id="6890743">nil</span>&nbsp;<span class="op" id="6890747">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890751"><a href="/net/protoconn_test.go.html#6889766">t</a></span><span class="op" id="6890752">.</span><span class="ident" id="6890753">Fatalf</span><span class="op" id="6890759">(</span><span class="string" id="6890760">&#34;TCPConn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6890785">,</span>&nbsp;<span class="ident" id="6890787"><a href="/net/protoconn_test.go.html#6890717">err</a></span><span class="op" id="6890790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890797">&lt;-</span><span class="ident" id="6890799"><a href="/net/protoconn_test.go.html#6890022">done</a></span><br>
<span class="lineno"></span><span class="op" id="6890804">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="6890807">func</span>&nbsp;<span class="ident" id="6890812">TestUDPConnSpecificMethods</span><span class="op" id="6890838">(</span><span class="ident" id="6890839">t</span>&nbsp;<span class="op" id="6890841">*</span><span class="ident" id="6890842"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6890849">.</span><span class="ident" id="6890850">T</span><span class="op" id="6890851">)</span>&nbsp;<span class="op" id="6890853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890856">la</span><span class="op" id="6890858">,</span>&nbsp;<span class="ident" id="6890860">err</span>&nbsp;<span class="op" id="6890864">:=</span>&nbsp;<span class="ident" id="6890867"><a href="/net/udpsock.go.html#2704749">ResolveUDPAddr</a></span><span class="op" id="6890881">(</span><span class="string" id="6890882">&#34;udp4&#34;</span><span class="op" id="6890888">,</span>&nbsp;<span class="string" id="6890890">&#34;127.0.0.1:0&#34;</span><span class="op" id="6890903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6890906">if</span>&nbsp;<span class="ident" id="6890909"><a href="/net/protoconn_test.go.html#6890860">err</a></span>&nbsp;<span class="op" id="6890913">!=</span>&nbsp;<span class="ident" id="6890916">nil</span>&nbsp;<span class="op" id="6890920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890924"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6890925">.</span><span class="ident" id="6890926">Fatalf</span><span class="op" id="6890932">(</span><span class="string" id="6890933">&#34;ResolveUDPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6890960">,</span>&nbsp;<span class="ident" id="6890962"><a href="/net/protoconn_test.go.html#6890860">err</a></span><span class="op" id="6890965">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6890968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6890971">c</span><span class="op" id="6890972">,</span>&nbsp;<span class="ident" id="6890974"><a href="/net/protoconn_test.go.html#6890860">err</a></span>&nbsp;<span class="op" id="6890978">:=</span>&nbsp;<span class="ident" id="6890981"><a href="/net/udpsock_posix.go.html#2710994">ListenUDP</a></span><span class="op" id="6890990">(</span><span class="string" id="6890991">&#34;udp4&#34;</span><span class="op" id="6890997">,</span>&nbsp;<span class="ident" id="6890999"><a href="/net/protoconn_test.go.html#6890856">la</a></span><span class="op" id="6891001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891004">if</span>&nbsp;<span class="ident" id="6891007"><a href="/net/protoconn_test.go.html#6890860">err</a></span>&nbsp;<span class="op" id="6891011">!=</span>&nbsp;<span class="ident" id="6891014">nil</span>&nbsp;<span class="op" id="6891018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891022"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891023">.</span><span class="ident" id="6891024">Fatalf</span><span class="op" id="6891030">(</span><span class="string" id="6891031">&#34;ListenUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891053">,</span>&nbsp;<span class="ident" id="6891055"><a href="/net/protoconn_test.go.html#6890860">err</a></span><span class="op" id="6891058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891061">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891064">defer</span>&nbsp;<span class="ident" id="6891070"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891071">.</span><span class="ident" id="6891072">Close</span><span class="op" id="6891077">(</span><span class="op" id="6891078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891081"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891082">.</span><span class="ident" id="6891083">LocalAddr</span><span class="op" id="6891092">(</span><span class="op" id="6891093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891096"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891097">.</span><span class="ident" id="6891098">RemoteAddr</span><span class="op" id="6891108">(</span><span class="op" id="6891109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891112"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891113">.</span><span class="ident" id="6891114">SetDeadline</span><span class="op" id="6891125">(</span><span class="ident" id="6891126"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6891130">.</span><span class="ident" id="6891131">Now</span><span class="op" id="6891134">(</span><span class="op" id="6891135">)</span><span class="op" id="6891136">.</span><span class="ident" id="6891137">Add</span><span class="op" id="6891140">(</span><span class="ident" id="6891141"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6891152">)</span><span class="op" id="6891153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891156"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891157">.</span><span class="ident" id="6891158">SetReadDeadline</span><span class="op" id="6891173">(</span><span class="ident" id="6891174"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6891178">.</span><span class="ident" id="6891179">Now</span><span class="op" id="6891182">(</span><span class="op" id="6891183">)</span><span class="op" id="6891184">.</span><span class="ident" id="6891185">Add</span><span class="op" id="6891188">(</span><span class="ident" id="6891189"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6891200">)</span><span class="op" id="6891201">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891204"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891205">.</span><span class="ident" id="6891206">SetWriteDeadline</span><span class="op" id="6891222">(</span><span class="ident" id="6891223"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6891227">.</span><span class="ident" id="6891228">Now</span><span class="op" id="6891231">(</span><span class="op" id="6891232">)</span><span class="op" id="6891233">.</span><span class="ident" id="6891234">Add</span><span class="op" id="6891237">(</span><span class="ident" id="6891238"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6891249">)</span><span class="op" id="6891250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891253"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891254">.</span><span class="ident" id="6891255">SetReadBuffer</span><span class="op" id="6891268">(</span><span class="num" id="6891269">2048</span><span class="op" id="6891273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891276"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891277">.</span><span class="ident" id="6891278">SetWriteBuffer</span><span class="op" id="6891292">(</span><span class="num" id="6891293">2048</span><span class="op" id="6891297">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891301">wb</span>&nbsp;<span class="op" id="6891304">:=</span>&nbsp;<span class="op" id="6891307">[</span><span class="op" id="6891308">]</span><span class="builtintype" id="6891309">byte</span><span class="op" id="6891313">(</span><span class="string" id="6891314">&#34;UDPCONN&nbsp;TEST&#34;</span><span class="op" id="6891328">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891331">rb</span>&nbsp;<span class="op" id="6891334">:=</span>&nbsp;<span class="builtinfunc" id="6891337">make</span><span class="op" id="6891341">(</span><span class="op" id="6891342">[</span><span class="op" id="6891343">]</span><span class="builtintype" id="6891344">byte</span><span class="op" id="6891348">,</span>&nbsp;<span class="num" id="6891350">128</span><span class="op" id="6891353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891356">if</span>&nbsp;<span class="ident" id="6891359">_</span><span class="op" id="6891360">,</span>&nbsp;<span class="ident" id="6891362">err</span>&nbsp;<span class="op" id="6891366">:=</span>&nbsp;<span class="ident" id="6891369"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891370">.</span><span class="ident" id="6891371">WriteToUDP</span><span class="op" id="6891381">(</span><span class="ident" id="6891382"><a href="/net/protoconn_test.go.html#6891301">wb</a></span><span class="op" id="6891384">,</span>&nbsp;<span class="ident" id="6891386"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891387">.</span><span class="ident" id="6891388">LocalAddr</span><span class="op" id="6891397">(</span><span class="op" id="6891398">)</span><span class="op" id="6891399">.</span><span class="op" id="6891400">(</span><span class="op" id="6891401">*</span><span class="ident" id="6891402"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6891409">)</span><span class="op" id="6891410">)</span><span class="op" id="6891411">;</span>&nbsp;<span class="ident" id="6891413"><a href="/net/protoconn_test.go.html#6891362">err</a></span>&nbsp;<span class="op" id="6891417">!=</span>&nbsp;<span class="ident" id="6891420">nil</span>&nbsp;<span class="op" id="6891424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891428"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891429">.</span><span class="ident" id="6891430">Fatalf</span><span class="op" id="6891436">(</span><span class="string" id="6891437">&#34;UDPConn.WriteToUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891468">,</span>&nbsp;<span class="ident" id="6891470"><a href="/net/protoconn_test.go.html#6891362">err</a></span><span class="op" id="6891473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891479">if</span>&nbsp;<span class="ident" id="6891482">_</span><span class="op" id="6891483">,</span>&nbsp;<span class="ident" id="6891485">_</span><span class="op" id="6891486">,</span>&nbsp;<span class="ident" id="6891488">err</span>&nbsp;<span class="op" id="6891492">:=</span>&nbsp;<span class="ident" id="6891495"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891496">.</span><span class="ident" id="6891497">ReadFromUDP</span><span class="op" id="6891508">(</span><span class="ident" id="6891509"><a href="/net/protoconn_test.go.html#6891331">rb</a></span><span class="op" id="6891511">)</span><span class="op" id="6891512">;</span>&nbsp;<span class="ident" id="6891514"><a href="/net/protoconn_test.go.html#6891488">err</a></span>&nbsp;<span class="op" id="6891518">!=</span>&nbsp;<span class="ident" id="6891521">nil</span>&nbsp;<span class="op" id="6891525">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891529"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891530">.</span><span class="ident" id="6891531">Fatalf</span><span class="op" id="6891537">(</span><span class="string" id="6891538">&#34;UDPConn.ReadFromUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891570">,</span>&nbsp;<span class="ident" id="6891572"><a href="/net/protoconn_test.go.html#6891488">err</a></span><span class="op" id="6891575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891581">if</span>&nbsp;<span class="ident" id="6891584">_</span><span class="op" id="6891585">,</span>&nbsp;<span class="ident" id="6891587">_</span><span class="op" id="6891588">,</span>&nbsp;<span class="ident" id="6891590">err</span>&nbsp;<span class="op" id="6891594">:=</span>&nbsp;<span class="ident" id="6891597"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891598">.</span><span class="ident" id="6891599">WriteMsgUDP</span><span class="op" id="6891610">(</span><span class="ident" id="6891611"><a href="/net/protoconn_test.go.html#6891301">wb</a></span><span class="op" id="6891613">,</span>&nbsp;<span class="ident" id="6891615">nil</span><span class="op" id="6891618">,</span>&nbsp;<span class="ident" id="6891620"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891621">.</span><span class="ident" id="6891622">LocalAddr</span><span class="op" id="6891631">(</span><span class="op" id="6891632">)</span><span class="op" id="6891633">.</span><span class="op" id="6891634">(</span><span class="op" id="6891635">*</span><span class="ident" id="6891636"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="6891643">)</span><span class="op" id="6891644">)</span><span class="op" id="6891645">;</span>&nbsp;<span class="ident" id="6891647"><a href="/net/protoconn_test.go.html#6891590">err</a></span>&nbsp;<span class="op" id="6891651">!=</span>&nbsp;<span class="ident" id="6891654">nil</span>&nbsp;<span class="op" id="6891658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891662"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6891672">(</span><span class="ident" id="6891673"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891674">,</span>&nbsp;<span class="string" id="6891676">&#34;UDPConn.WriteMsgUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891708">,</span>&nbsp;<span class="ident" id="6891710"><a href="/net/protoconn_test.go.html#6891590">err</a></span><span class="op" id="6891713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891716">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891719">if</span>&nbsp;<span class="ident" id="6891722">_</span><span class="op" id="6891723">,</span>&nbsp;<span class="ident" id="6891725">_</span><span class="op" id="6891726">,</span>&nbsp;<span class="ident" id="6891728">_</span><span class="op" id="6891729">,</span>&nbsp;<span class="ident" id="6891731">_</span><span class="op" id="6891732">,</span>&nbsp;<span class="ident" id="6891734">err</span>&nbsp;<span class="op" id="6891738">:=</span>&nbsp;<span class="ident" id="6891741"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891742">.</span><span class="ident" id="6891743">ReadMsgUDP</span><span class="op" id="6891753">(</span><span class="ident" id="6891754"><a href="/net/protoconn_test.go.html#6891331">rb</a></span><span class="op" id="6891756">,</span>&nbsp;<span class="ident" id="6891758">nil</span><span class="op" id="6891761">)</span><span class="op" id="6891762">;</span>&nbsp;<span class="ident" id="6891764"><a href="/net/protoconn_test.go.html#6891734">err</a></span>&nbsp;<span class="op" id="6891768">!=</span>&nbsp;<span class="ident" id="6891771">nil</span>&nbsp;<span class="op" id="6891775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891779"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6891789">(</span><span class="ident" id="6891790"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891791">,</span>&nbsp;<span class="string" id="6891793">&#34;UDPConn.ReadMsgUDP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891824">,</span>&nbsp;<span class="ident" id="6891826"><a href="/net/protoconn_test.go.html#6891734">err</a></span><span class="op" id="6891829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891836">if</span>&nbsp;<span class="ident" id="6891839">f</span><span class="op" id="6891840">,</span>&nbsp;<span class="ident" id="6891842">err</span>&nbsp;<span class="op" id="6891846">:=</span>&nbsp;<span class="ident" id="6891849"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6891850">.</span><span class="ident" id="6891851">File</span><span class="op" id="6891855">(</span><span class="op" id="6891856">)</span><span class="op" id="6891857">;</span>&nbsp;<span class="ident" id="6891859"><a href="/net/protoconn_test.go.html#6891842">err</a></span>&nbsp;<span class="op" id="6891863">!=</span>&nbsp;<span class="ident" id="6891866">nil</span>&nbsp;<span class="op" id="6891870">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891874"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6891884">(</span><span class="ident" id="6891885"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891886">,</span>&nbsp;<span class="string" id="6891888">&#34;UDPConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6891913">,</span>&nbsp;<span class="ident" id="6891915"><a href="/net/protoconn_test.go.html#6891842">err</a></span><span class="op" id="6891918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891921">}</span>&nbsp;<span class="keyword" id="6891923">else</span>&nbsp;<span class="op" id="6891928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891932"><a href="/net/protoconn_test.go.html#6891839">f</a></span><span class="op" id="6891933">.</span><span class="ident" id="6891934">Close</span><span class="op" id="6891939">(</span><span class="op" id="6891940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6891943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891947">defer</span>&nbsp;<span class="keyword" id="6891953">func</span><span class="op" id="6891957">(</span><span class="op" id="6891958">)</span>&nbsp;<span class="op" id="6891960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6891964">if</span>&nbsp;<span class="ident" id="6891967">p</span>&nbsp;<span class="op" id="6891969">:=</span>&nbsp;<span class="builtinfunc" id="6891972">recover</span><span class="op" id="6891979">(</span><span class="op" id="6891980">)</span><span class="op" id="6891981">;</span>&nbsp;<span class="ident" id="6891983"><a href="/net/protoconn_test.go.html#6891967">p</a></span>&nbsp;<span class="op" id="6891985">!=</span>&nbsp;<span class="ident" id="6891988">nil</span>&nbsp;<span class="op" id="6891992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6891997"><a href="/net/protoconn_test.go.html#6890839">t</a></span><span class="op" id="6891998">.</span><span class="ident" id="6891999">Fatalf</span><span class="op" id="6892005">(</span><span class="string" id="6892006">&#34;UDPConn.WriteToUDP&nbsp;or&nbsp;WriteMsgUDP&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6892054">,</span>&nbsp;<span class="ident" id="6892056"><a href="/net/protoconn_test.go.html#6891967">p</a></span><span class="op" id="6892057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892064">}</span><span class="op" id="6892065">(</span><span class="op" id="6892066">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892070"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6892071">.</span><span class="ident" id="6892072">WriteToUDP</span><span class="op" id="6892082">(</span><span class="ident" id="6892083"><a href="/net/protoconn_test.go.html#6891301">wb</a></span><span class="op" id="6892085">,</span>&nbsp;<span class="ident" id="6892087">nil</span><span class="op" id="6892090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892093"><a href="/net/protoconn_test.go.html#6890971">c</a></span><span class="op" id="6892094">.</span><span class="ident" id="6892095">WriteMsgUDP</span><span class="op" id="6892106">(</span><span class="ident" id="6892107"><a href="/net/protoconn_test.go.html#6891301">wb</a></span><span class="op" id="6892109">,</span>&nbsp;<span class="ident" id="6892111">nil</span><span class="op" id="6892114">,</span>&nbsp;<span class="ident" id="6892116">nil</span><span class="op" id="6892119">)</span><br>
<span class="lineno"></span><span class="op" id="6892121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6892124">func</span>&nbsp;<span class="ident" id="6892129">TestIPConnSpecificMethods</span><span class="op" id="6892154">(</span><span class="ident" id="6892155">t</span>&nbsp;<span class="op" id="6892157">*</span><span class="ident" id="6892158"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6892165">.</span><span class="ident" id="6892166">T</span><span class="op" id="6892167">)</span>&nbsp;<span class="op" id="6892169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892172">if</span>&nbsp;<span class="ident" id="6892175">skip</span><span class="op" id="6892179">,</span>&nbsp;<span class="ident" id="6892181">skipmsg</span>&nbsp;<span class="op" id="6892189">:=</span>&nbsp;<span class="ident" id="6892192"><a href="/net/ipraw_test.go.html#6846958">skipRawSocketTest</a></span><span class="op" id="6892209">(</span><span class="ident" id="6892210"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6892211">)</span><span class="op" id="6892212">;</span>&nbsp;<span class="ident" id="6892214"><a href="/net/protoconn_test.go.html#6892175">skip</a></span>&nbsp;<span class="op" id="6892219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892223"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6892224">.</span><span class="ident" id="6892225">Skip</span><span class="op" id="6892229">(</span><span class="ident" id="6892230"><a href="/net/protoconn_test.go.html#6892181">skipmsg</a></span><span class="op" id="6892237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892244">la</span><span class="op" id="6892246">,</span>&nbsp;<span class="ident" id="6892248">err</span>&nbsp;<span class="op" id="6892252">:=</span>&nbsp;<span class="ident" id="6892255"><a href="/net/iprawsock.go.html#2619766">ResolveIPAddr</a></span><span class="op" id="6892268">(</span><span class="string" id="6892269">&#34;ip4&#34;</span><span class="op" id="6892274">,</span>&nbsp;<span class="string" id="6892276">&#34;127.0.0.1&#34;</span><span class="op" id="6892287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892290">if</span>&nbsp;<span class="ident" id="6892293"><a href="/net/protoconn_test.go.html#6892248">err</a></span>&nbsp;<span class="op" id="6892297">!=</span>&nbsp;<span class="ident" id="6892300">nil</span>&nbsp;<span class="op" id="6892304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892308"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6892309">.</span><span class="ident" id="6892310">Fatalf</span><span class="op" id="6892316">(</span><span class="string" id="6892317">&#34;ResolveIPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6892343">,</span>&nbsp;<span class="ident" id="6892345"><a href="/net/protoconn_test.go.html#6892248">err</a></span><span class="op" id="6892348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892354">c</span><span class="op" id="6892355">,</span>&nbsp;<span class="ident" id="6892357"><a href="/net/protoconn_test.go.html#6892248">err</a></span>&nbsp;<span class="op" id="6892361">:=</span>&nbsp;<span class="ident" id="6892364"><a href="/net/iprawsock_posix.go.html#2626755">ListenIP</a></span><span class="op" id="6892372">(</span><span class="string" id="6892373">&#34;ip4:icmp&#34;</span><span class="op" id="6892383">,</span>&nbsp;<span class="ident" id="6892385"><a href="/net/protoconn_test.go.html#6892244">la</a></span><span class="op" id="6892387">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892390">if</span>&nbsp;<span class="ident" id="6892393"><a href="/net/protoconn_test.go.html#6892248">err</a></span>&nbsp;<span class="op" id="6892397">!=</span>&nbsp;<span class="ident" id="6892400">nil</span>&nbsp;<span class="op" id="6892404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892408"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6892409">.</span><span class="ident" id="6892410">Fatalf</span><span class="op" id="6892416">(</span><span class="string" id="6892417">&#34;ListenIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6892438">,</span>&nbsp;<span class="ident" id="6892440"><a href="/net/protoconn_test.go.html#6892248">err</a></span><span class="op" id="6892443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892449">defer</span>&nbsp;<span class="ident" id="6892455"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892456">.</span><span class="ident" id="6892457">Close</span><span class="op" id="6892462">(</span><span class="op" id="6892463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892466"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892467">.</span><span class="ident" id="6892468">LocalAddr</span><span class="op" id="6892477">(</span><span class="op" id="6892478">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892481"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892482">.</span><span class="ident" id="6892483">RemoteAddr</span><span class="op" id="6892493">(</span><span class="op" id="6892494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892497"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892498">.</span><span class="ident" id="6892499">SetDeadline</span><span class="op" id="6892510">(</span><span class="ident" id="6892511"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6892515">.</span><span class="ident" id="6892516">Now</span><span class="op" id="6892519">(</span><span class="op" id="6892520">)</span><span class="op" id="6892521">.</span><span class="ident" id="6892522">Add</span><span class="op" id="6892525">(</span><span class="ident" id="6892526"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6892537">)</span><span class="op" id="6892538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892541"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892542">.</span><span class="ident" id="6892543">SetReadDeadline</span><span class="op" id="6892558">(</span><span class="ident" id="6892559"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6892563">.</span><span class="ident" id="6892564">Now</span><span class="op" id="6892567">(</span><span class="op" id="6892568">)</span><span class="op" id="6892569">.</span><span class="ident" id="6892570">Add</span><span class="op" id="6892573">(</span><span class="ident" id="6892574"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6892585">)</span><span class="op" id="6892586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892589"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892590">.</span><span class="ident" id="6892591">SetWriteDeadline</span><span class="op" id="6892607">(</span><span class="ident" id="6892608"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6892612">.</span><span class="ident" id="6892613">Now</span><span class="op" id="6892616">(</span><span class="op" id="6892617">)</span><span class="op" id="6892618">.</span><span class="ident" id="6892619">Add</span><span class="op" id="6892622">(</span><span class="ident" id="6892623"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6892634">)</span><span class="op" id="6892635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892638"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892639">.</span><span class="ident" id="6892640">SetReadBuffer</span><span class="op" id="6892653">(</span><span class="num" id="6892654">2048</span><span class="op" id="6892658">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892661"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892662">.</span><span class="ident" id="6892663">SetWriteBuffer</span><span class="op" id="6892677">(</span><span class="num" id="6892678">2048</span><span class="op" id="6892682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892686">wb</span><span class="op" id="6892688">,</span>&nbsp;<span class="ident" id="6892690"><a href="/net/protoconn_test.go.html#6892248">err</a></span>&nbsp;<span class="op" id="6892694">:=</span>&nbsp;<span class="op" id="6892697">(</span><span class="op" id="6892698">&amp;</span><span class="ident" id="6892699"><a href="/net/mockicmp_test.go.html#6864139">icmpMessage</a></span><span class="op" id="6892710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892714">Type</span><span class="op" id="6892718">:</span>&nbsp;<span class="ident" id="6892720"><a href="/net/mockicmp_test.go.html#6863993">icmpv4EchoRequest</a></span><span class="op" id="6892737">,</span>&nbsp;<span class="ident" id="6892739">Code</span><span class="op" id="6892743">:</span>&nbsp;<span class="num" id="6892745">0</span><span class="op" id="6892746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892750">Body</span><span class="op" id="6892754">:</span>&nbsp;<span class="op" id="6892756">&amp;</span><span class="ident" id="6892757"><a href="/net/mockicmp_test.go.html#6865797">icmpEcho</a></span><span class="op" id="6892765">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892770">ID</span><span class="op" id="6892772">:</span>&nbsp;<span class="ident" id="6892774"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6892776">.</span><span class="ident" id="6892777">Getpid</span><span class="op" id="6892783">(</span><span class="op" id="6892784">)</span>&nbsp;<span class="op" id="6892786">&amp;</span>&nbsp;<span class="num" id="6892788">0xffff</span><span class="op" id="6892794">,</span>&nbsp;<span class="ident" id="6892796">Seq</span><span class="op" id="6892799">:</span>&nbsp;<span class="num" id="6892801">1</span><span class="op" id="6892802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892807">Data</span><span class="op" id="6892811">:</span>&nbsp;<span class="op" id="6892813">[</span><span class="op" id="6892814">]</span><span class="builtintype" id="6892815">byte</span><span class="op" id="6892819">(</span><span class="string" id="6892820">&#34;IPCONN&nbsp;TEST&nbsp;&#34;</span><span class="op" id="6892834">)</span><span class="op" id="6892835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892839">}</span><span class="op" id="6892840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892843">}</span><span class="op" id="6892844">)</span><span class="op" id="6892845">.</span><span class="ident" id="6892846">Marshal</span><span class="op" id="6892853">(</span><span class="op" id="6892854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892857">if</span>&nbsp;<span class="ident" id="6892860"><a href="/net/protoconn_test.go.html#6892248">err</a></span>&nbsp;<span class="op" id="6892864">!=</span>&nbsp;<span class="ident" id="6892867">nil</span>&nbsp;<span class="op" id="6892871">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892875"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6892876">.</span><span class="ident" id="6892877">Fatalf</span><span class="op" id="6892883">(</span><span class="string" id="6892884">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6892916">,</span>&nbsp;<span class="ident" id="6892918"><a href="/net/protoconn_test.go.html#6892248">err</a></span><span class="op" id="6892921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6892924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6892927">rb</span>&nbsp;<span class="op" id="6892930">:=</span>&nbsp;<span class="builtinfunc" id="6892933">make</span><span class="op" id="6892937">(</span><span class="op" id="6892938">[</span><span class="op" id="6892939">]</span><span class="builtintype" id="6892940">byte</span><span class="op" id="6892944">,</span>&nbsp;<span class="num" id="6892946">20</span><span class="op" id="6892948">+</span><span class="builtinfunc" id="6892949">len</span><span class="op" id="6892952">(</span><span class="ident" id="6892953"><a href="/net/protoconn_test.go.html#6892686">wb</a></span><span class="op" id="6892955">)</span><span class="op" id="6892956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6892959">if</span>&nbsp;<span class="ident" id="6892962">_</span><span class="op" id="6892963">,</span>&nbsp;<span class="ident" id="6892965">err</span>&nbsp;<span class="op" id="6892969">:=</span>&nbsp;<span class="ident" id="6892972"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892973">.</span><span class="ident" id="6892974">WriteToIP</span><span class="op" id="6892983">(</span><span class="ident" id="6892984"><a href="/net/protoconn_test.go.html#6892686">wb</a></span><span class="op" id="6892986">,</span>&nbsp;<span class="ident" id="6892988"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6892989">.</span><span class="ident" id="6892990">LocalAddr</span><span class="op" id="6892999">(</span><span class="op" id="6893000">)</span><span class="op" id="6893001">.</span><span class="op" id="6893002">(</span><span class="op" id="6893003">*</span><span class="ident" id="6893004"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="6893010">)</span><span class="op" id="6893011">)</span><span class="op" id="6893012">;</span>&nbsp;<span class="ident" id="6893014"><a href="/net/protoconn_test.go.html#6892965">err</a></span>&nbsp;<span class="op" id="6893018">!=</span>&nbsp;<span class="ident" id="6893021">nil</span>&nbsp;<span class="op" id="6893025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893029"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893030">.</span><span class="ident" id="6893031">Fatalf</span><span class="op" id="6893037">(</span><span class="string" id="6893038">&#34;IPConn.WriteToIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893067">,</span>&nbsp;<span class="ident" id="6893069"><a href="/net/protoconn_test.go.html#6892965">err</a></span><span class="op" id="6893072">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893078">if</span>&nbsp;<span class="ident" id="6893081">_</span><span class="op" id="6893082">,</span>&nbsp;<span class="ident" id="6893084">_</span><span class="op" id="6893085">,</span>&nbsp;<span class="ident" id="6893087">err</span>&nbsp;<span class="op" id="6893091">:=</span>&nbsp;<span class="ident" id="6893094"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893095">.</span><span class="ident" id="6893096">ReadFromIP</span><span class="op" id="6893106">(</span><span class="ident" id="6893107"><a href="/net/protoconn_test.go.html#6892927">rb</a></span><span class="op" id="6893109">)</span><span class="op" id="6893110">;</span>&nbsp;<span class="ident" id="6893112"><a href="/net/protoconn_test.go.html#6893087">err</a></span>&nbsp;<span class="op" id="6893116">!=</span>&nbsp;<span class="ident" id="6893119">nil</span>&nbsp;<span class="op" id="6893123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893127"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893128">.</span><span class="ident" id="6893129">Fatalf</span><span class="op" id="6893135">(</span><span class="string" id="6893136">&#34;IPConn.ReadFromIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893166">,</span>&nbsp;<span class="ident" id="6893168"><a href="/net/protoconn_test.go.html#6893087">err</a></span><span class="op" id="6893171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893177">if</span>&nbsp;<span class="ident" id="6893180">_</span><span class="op" id="6893181">,</span>&nbsp;<span class="ident" id="6893183">_</span><span class="op" id="6893184">,</span>&nbsp;<span class="ident" id="6893186">err</span>&nbsp;<span class="op" id="6893190">:=</span>&nbsp;<span class="ident" id="6893193"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893194">.</span><span class="ident" id="6893195">WriteMsgIP</span><span class="op" id="6893205">(</span><span class="ident" id="6893206"><a href="/net/protoconn_test.go.html#6892686">wb</a></span><span class="op" id="6893208">,</span>&nbsp;<span class="ident" id="6893210">nil</span><span class="op" id="6893213">,</span>&nbsp;<span class="ident" id="6893215"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893216">.</span><span class="ident" id="6893217">LocalAddr</span><span class="op" id="6893226">(</span><span class="op" id="6893227">)</span><span class="op" id="6893228">.</span><span class="op" id="6893229">(</span><span class="op" id="6893230">*</span><span class="ident" id="6893231"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="6893237">)</span><span class="op" id="6893238">)</span><span class="op" id="6893239">;</span>&nbsp;<span class="ident" id="6893241"><a href="/net/protoconn_test.go.html#6893186">err</a></span>&nbsp;<span class="op" id="6893245">!=</span>&nbsp;<span class="ident" id="6893248">nil</span>&nbsp;<span class="op" id="6893252">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893256"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6893266">(</span><span class="ident" id="6893267"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893268">,</span>&nbsp;<span class="string" id="6893270">&#34;IPConn.WriteMsgIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893300">,</span>&nbsp;<span class="ident" id="6893302"><a href="/net/protoconn_test.go.html#6893186">err</a></span><span class="op" id="6893305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893311">if</span>&nbsp;<span class="ident" id="6893314">_</span><span class="op" id="6893315">,</span>&nbsp;<span class="ident" id="6893317">_</span><span class="op" id="6893318">,</span>&nbsp;<span class="ident" id="6893320">_</span><span class="op" id="6893321">,</span>&nbsp;<span class="ident" id="6893323">_</span><span class="op" id="6893324">,</span>&nbsp;<span class="ident" id="6893326">err</span>&nbsp;<span class="op" id="6893330">:=</span>&nbsp;<span class="ident" id="6893333"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893334">.</span><span class="ident" id="6893335">ReadMsgIP</span><span class="op" id="6893344">(</span><span class="ident" id="6893345"><a href="/net/protoconn_test.go.html#6892927">rb</a></span><span class="op" id="6893347">,</span>&nbsp;<span class="ident" id="6893349">nil</span><span class="op" id="6893352">)</span><span class="op" id="6893353">;</span>&nbsp;<span class="ident" id="6893355"><a href="/net/protoconn_test.go.html#6893326">err</a></span>&nbsp;<span class="op" id="6893359">!=</span>&nbsp;<span class="ident" id="6893362">nil</span>&nbsp;<span class="op" id="6893366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893370"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6893380">(</span><span class="ident" id="6893381"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893382">,</span>&nbsp;<span class="string" id="6893384">&#34;IPConn.ReadMsgIP&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893413">,</span>&nbsp;<span class="ident" id="6893415"><a href="/net/protoconn_test.go.html#6893326">err</a></span><span class="op" id="6893418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893421">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893425">if</span>&nbsp;<span class="ident" id="6893428">f</span><span class="op" id="6893429">,</span>&nbsp;<span class="ident" id="6893431">err</span>&nbsp;<span class="op" id="6893435">:=</span>&nbsp;<span class="ident" id="6893438"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893439">.</span><span class="ident" id="6893440">File</span><span class="op" id="6893444">(</span><span class="op" id="6893445">)</span><span class="op" id="6893446">;</span>&nbsp;<span class="ident" id="6893448"><a href="/net/protoconn_test.go.html#6893431">err</a></span>&nbsp;<span class="op" id="6893452">!=</span>&nbsp;<span class="ident" id="6893455">nil</span>&nbsp;<span class="op" id="6893459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893463"><a href="/net/protoconn_test.go.html#6888635">condFatalf</a></span><span class="op" id="6893473">(</span><span class="ident" id="6893474"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893475">,</span>&nbsp;<span class="string" id="6893477">&#34;IPConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893501">,</span>&nbsp;<span class="ident" id="6893503"><a href="/net/protoconn_test.go.html#6893431">err</a></span><span class="op" id="6893506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893509">}</span>&nbsp;<span class="keyword" id="6893511">else</span>&nbsp;<span class="op" id="6893516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893520"><a href="/net/protoconn_test.go.html#6893428">f</a></span><span class="op" id="6893521">.</span><span class="ident" id="6893522">Close</span><span class="op" id="6893527">(</span><span class="op" id="6893528">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893535">defer</span>&nbsp;<span class="keyword" id="6893541">func</span><span class="op" id="6893545">(</span><span class="op" id="6893546">)</span>&nbsp;<span class="op" id="6893548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893552">if</span>&nbsp;<span class="ident" id="6893555">p</span>&nbsp;<span class="op" id="6893557">:=</span>&nbsp;<span class="builtinfunc" id="6893560">recover</span><span class="op" id="6893567">(</span><span class="op" id="6893568">)</span><span class="op" id="6893569">;</span>&nbsp;<span class="ident" id="6893571"><a href="/net/protoconn_test.go.html#6893555">p</a></span>&nbsp;<span class="op" id="6893573">!=</span>&nbsp;<span class="ident" id="6893576">nil</span>&nbsp;<span class="op" id="6893580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893585"><a href="/net/protoconn_test.go.html#6892155">t</a></span><span class="op" id="6893586">.</span><span class="ident" id="6893587">Fatalf</span><span class="op" id="6893593">(</span><span class="string" id="6893594">&#34;IPConn.WriteToIP&nbsp;or&nbsp;WriteMsgIP&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6893639">,</span>&nbsp;<span class="ident" id="6893641"><a href="/net/protoconn_test.go.html#6893555">p</a></span><span class="op" id="6893642">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893649">}</span><span class="op" id="6893650">(</span><span class="op" id="6893651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893655"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893656">.</span><span class="ident" id="6893657">WriteToIP</span><span class="op" id="6893666">(</span><span class="ident" id="6893667"><a href="/net/protoconn_test.go.html#6892686">wb</a></span><span class="op" id="6893669">,</span>&nbsp;<span class="ident" id="6893671">nil</span><span class="op" id="6893674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893677"><a href="/net/protoconn_test.go.html#6892354">c</a></span><span class="op" id="6893678">.</span><span class="ident" id="6893679">WriteMsgIP</span><span class="op" id="6893689">(</span><span class="ident" id="6893690"><a href="/net/protoconn_test.go.html#6892686">wb</a></span><span class="op" id="6893692">,</span>&nbsp;<span class="ident" id="6893694">nil</span><span class="op" id="6893697">,</span>&nbsp;<span class="ident" id="6893699">nil</span><span class="op" id="6893702">)</span><br>
<span class="lineno">235</span><span class="op" id="6893704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893707">func</span>&nbsp;<span class="ident" id="6893712">TestUnixListenerSpecificMethods</span><span class="op" id="6893743">(</span><span class="ident" id="6893744">t</span>&nbsp;<span class="op" id="6893746">*</span><span class="ident" id="6893747"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6893754">.</span><span class="ident" id="6893755">T</span><span class="op" id="6893756">)</span>&nbsp;<span class="op" id="6893758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893761">switch</span>&nbsp;<span class="ident" id="6893768"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6893775">.</span><span class="ident" id="6893776">GOOS</span>&nbsp;<span class="op" id="6893781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893784">case</span>&nbsp;<span class="string" id="6893789">&#34;nacl&#34;</span><span class="op" id="6893795">,</span>&nbsp;<span class="string" id="6893797">&#34;plan9&#34;</span><span class="op" id="6893804">,</span>&nbsp;<span class="string" id="6893806">&#34;windows&#34;</span><span class="op" id="6893815">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893819"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6893820">.</span><span class="ident" id="6893821">Skipf</span><span class="op" id="6893826">(</span><span class="string" id="6893827">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6893848">,</span>&nbsp;<span class="ident" id="6893850"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6893857">.</span><span class="ident" id="6893858">GOOS</span><span class="op" id="6893862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893869">addr</span>&nbsp;<span class="op" id="6893874">:=</span>&nbsp;<span class="ident" id="6893877"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6893889">(</span><span class="op" id="6893890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893893">la</span><span class="op" id="6893895">,</span>&nbsp;<span class="ident" id="6893897">err</span>&nbsp;<span class="op" id="6893901">:=</span>&nbsp;<span class="ident" id="6893904"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6893919">(</span><span class="string" id="6893920">&#34;unix&#34;</span><span class="op" id="6893926">,</span>&nbsp;<span class="ident" id="6893928"><a href="/net/protoconn_test.go.html#6893869">addr</a></span><span class="op" id="6893932">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6893935">if</span>&nbsp;<span class="ident" id="6893938"><a href="/net/protoconn_test.go.html#6893897">err</a></span>&nbsp;<span class="op" id="6893942">!=</span>&nbsp;<span class="ident" id="6893945">nil</span>&nbsp;<span class="op" id="6893949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6893953"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6893954">.</span><span class="ident" id="6893955">Fatalf</span><span class="op" id="6893961">(</span><span class="string" id="6893962">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6893990">,</span>&nbsp;<span class="ident" id="6893992"><a href="/net/protoconn_test.go.html#6893897">err</a></span><span class="op" id="6893995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6893998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894001">ln</span><span class="op" id="6894003">,</span>&nbsp;<span class="ident" id="6894005"><a href="/net/protoconn_test.go.html#6893897">err</a></span>&nbsp;<span class="op" id="6894009">:=</span>&nbsp;<span class="ident" id="6894012"><a href="/net/unixsock_posix.go.html#2721464">ListenUnix</a></span><span class="op" id="6894022">(</span><span class="string" id="6894023">&#34;unix&#34;</span><span class="op" id="6894029">,</span>&nbsp;<span class="ident" id="6894031"><a href="/net/protoconn_test.go.html#6893893">la</a></span><span class="op" id="6894033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894036">if</span>&nbsp;<span class="ident" id="6894039"><a href="/net/protoconn_test.go.html#6893897">err</a></span>&nbsp;<span class="op" id="6894043">!=</span>&nbsp;<span class="ident" id="6894046">nil</span>&nbsp;<span class="op" id="6894050">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894054"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6894055">.</span><span class="ident" id="6894056">Fatalf</span><span class="op" id="6894062">(</span><span class="string" id="6894063">&#34;ListenUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6894086">,</span>&nbsp;<span class="ident" id="6894088"><a href="/net/protoconn_test.go.html#6893897">err</a></span><span class="op" id="6894091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894097">defer</span>&nbsp;<span class="ident" id="6894103"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894105">.</span><span class="ident" id="6894106">Close</span><span class="op" id="6894111">(</span><span class="op" id="6894112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894115">defer</span>&nbsp;<span class="ident" id="6894121"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6894123">.</span><span class="ident" id="6894124">Remove</span><span class="op" id="6894130">(</span><span class="ident" id="6894131"><a href="/net/protoconn_test.go.html#6893869">addr</a></span><span class="op" id="6894135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894138"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894140">.</span><span class="ident" id="6894141">Addr</span><span class="op" id="6894145">(</span><span class="op" id="6894146">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894149"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894151">.</span><span class="ident" id="6894152">SetDeadline</span><span class="op" id="6894163">(</span><span class="ident" id="6894164"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6894168">.</span><span class="ident" id="6894169">Now</span><span class="op" id="6894172">(</span><span class="op" id="6894173">)</span><span class="op" id="6894174">.</span><span class="ident" id="6894175">Add</span><span class="op" id="6894178">(</span><span class="num" id="6894179">30</span>&nbsp;<span class="op" id="6894182">*</span>&nbsp;<span class="ident" id="6894184"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6894188">.</span><span class="ident" id="6894189">Nanosecond</span><span class="op" id="6894199">)</span><span class="op" id="6894200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894204">if</span>&nbsp;<span class="ident" id="6894207">c</span><span class="op" id="6894208">,</span>&nbsp;<span class="ident" id="6894210">err</span>&nbsp;<span class="op" id="6894214">:=</span>&nbsp;<span class="ident" id="6894217"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894219">.</span><span class="ident" id="6894220">Accept</span><span class="op" id="6894226">(</span><span class="op" id="6894227">)</span><span class="op" id="6894228">;</span>&nbsp;<span class="ident" id="6894230"><a href="/net/protoconn_test.go.html#6894210">err</a></span>&nbsp;<span class="op" id="6894234">!=</span>&nbsp;<span class="ident" id="6894237">nil</span>&nbsp;<span class="op" id="6894241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894245">if</span>&nbsp;<span class="op" id="6894248">!</span><span class="ident" id="6894249"><a href="/net/protoconn_test.go.html#6894210">err</a></span><span class="op" id="6894252">.</span><span class="op" id="6894253">(</span><span class="ident" id="6894254"><a href="/net/net.go.html#2656629">Error</a></span><span class="op" id="6894259">)</span><span class="op" id="6894260">.</span><span class="ident" id="6894261">Timeout</span><span class="op" id="6894268">(</span><span class="op" id="6894269">)</span>&nbsp;<span class="op" id="6894271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894276"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6894277">.</span><span class="ident" id="6894278">Fatalf</span><span class="op" id="6894284">(</span><span class="string" id="6894285">&#34;UnixListener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6894317">,</span>&nbsp;<span class="ident" id="6894319"><a href="/net/protoconn_test.go.html#6894210">err</a></span><span class="op" id="6894322">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894329">}</span>&nbsp;<span class="keyword" id="6894331">else</span>&nbsp;<span class="op" id="6894336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894340"><a href="/net/protoconn_test.go.html#6894207">c</a></span><span class="op" id="6894341">.</span><span class="ident" id="6894342">Close</span><span class="op" id="6894347">(</span><span class="op" id="6894348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894354">if</span>&nbsp;<span class="ident" id="6894357">c</span><span class="op" id="6894358">,</span>&nbsp;<span class="ident" id="6894360">err</span>&nbsp;<span class="op" id="6894364">:=</span>&nbsp;<span class="ident" id="6894367"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894369">.</span><span class="ident" id="6894370">AcceptUnix</span><span class="op" id="6894380">(</span><span class="op" id="6894381">)</span><span class="op" id="6894382">;</span>&nbsp;<span class="ident" id="6894384"><a href="/net/protoconn_test.go.html#6894360">err</a></span>&nbsp;<span class="op" id="6894388">!=</span>&nbsp;<span class="ident" id="6894391">nil</span>&nbsp;<span class="op" id="6894395">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894399">if</span>&nbsp;<span class="op" id="6894402">!</span><span class="ident" id="6894403"><a href="/net/protoconn_test.go.html#6894360">err</a></span><span class="op" id="6894406">.</span><span class="op" id="6894407">(</span><span class="ident" id="6894408"><a href="/net/net.go.html#2656629">Error</a></span><span class="op" id="6894413">)</span><span class="op" id="6894414">.</span><span class="ident" id="6894415">Timeout</span><span class="op" id="6894422">(</span><span class="op" id="6894423">)</span>&nbsp;<span class="op" id="6894425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894430"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6894431">.</span><span class="ident" id="6894432">Fatalf</span><span class="op" id="6894438">(</span><span class="string" id="6894439">&#34;UnixListener.AcceptUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6894475">,</span>&nbsp;<span class="ident" id="6894477"><a href="/net/protoconn_test.go.html#6894360">err</a></span><span class="op" id="6894480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894487">}</span>&nbsp;<span class="keyword" id="6894489">else</span>&nbsp;<span class="op" id="6894494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894498"><a href="/net/protoconn_test.go.html#6894357">c</a></span><span class="op" id="6894499">.</span><span class="ident" id="6894500">Close</span><span class="op" id="6894505">(</span><span class="op" id="6894506">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894513">if</span>&nbsp;<span class="ident" id="6894516">f</span><span class="op" id="6894517">,</span>&nbsp;<span class="ident" id="6894519">err</span>&nbsp;<span class="op" id="6894523">:=</span>&nbsp;<span class="ident" id="6894526"><a href="/net/protoconn_test.go.html#6894001">ln</a></span><span class="op" id="6894528">.</span><span class="ident" id="6894529">File</span><span class="op" id="6894533">(</span><span class="op" id="6894534">)</span><span class="op" id="6894535">;</span>&nbsp;<span class="ident" id="6894537"><a href="/net/protoconn_test.go.html#6894519">err</a></span>&nbsp;<span class="op" id="6894541">!=</span>&nbsp;<span class="ident" id="6894544">nil</span>&nbsp;<span class="op" id="6894548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894552"><a href="/net/protoconn_test.go.html#6893744">t</a></span><span class="op" id="6894553">.</span><span class="ident" id="6894554">Fatalf</span><span class="op" id="6894560">(</span><span class="string" id="6894561">&#34;UnixListener.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6894591">,</span>&nbsp;<span class="ident" id="6894593"><a href="/net/protoconn_test.go.html#6894519">err</a></span><span class="op" id="6894596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894599">}</span>&nbsp;<span class="keyword" id="6894601">else</span>&nbsp;<span class="op" id="6894606">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894610"><a href="/net/protoconn_test.go.html#6894516">f</a></span><span class="op" id="6894611">.</span><span class="ident" id="6894612">Close</span><span class="op" id="6894617">(</span><span class="op" id="6894618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894621">}</span><br>
<span class="lineno"></span><span class="op" id="6894623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894626">func</span>&nbsp;<span class="ident" id="6894631">TestUnixConnSpecificMethods</span><span class="op" id="6894658">(</span><span class="ident" id="6894659">t</span>&nbsp;<span class="op" id="6894661">*</span><span class="ident" id="6894662"><a href="/net/protoconn_test.go.html#6888284">testing</a></span><span class="op" id="6894669">.</span><span class="ident" id="6894670">T</span><span class="op" id="6894671">)</span>&nbsp;<span class="op" id="6894673">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894676">switch</span>&nbsp;<span class="ident" id="6894683"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6894690">.</span><span class="ident" id="6894691">GOOS</span>&nbsp;<span class="op" id="6894696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894699">case</span>&nbsp;<span class="string" id="6894704">&#34;nacl&#34;</span><span class="op" id="6894710">,</span>&nbsp;<span class="string" id="6894712">&#34;plan9&#34;</span><span class="op" id="6894719">,</span>&nbsp;<span class="string" id="6894721">&#34;windows&#34;</span><span class="op" id="6894730">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894734"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6894735">.</span><span class="ident" id="6894736">Skipf</span><span class="op" id="6894741">(</span><span class="string" id="6894742">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6894763">,</span>&nbsp;<span class="ident" id="6894765"><a href="/net/protoconn_test.go.html#6888273">runtime</a></span><span class="op" id="6894772">.</span><span class="ident" id="6894773">GOOS</span><span class="op" id="6894777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894784">addr1</span><span class="op" id="6894789">,</span>&nbsp;<span class="ident" id="6894791">addr2</span><span class="op" id="6894796">,</span>&nbsp;<span class="ident" id="6894798">addr3</span>&nbsp;<span class="op" id="6894804">:=</span>&nbsp;<span class="ident" id="6894807"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6894819">(</span><span class="op" id="6894820">)</span><span class="op" id="6894821">,</span>&nbsp;<span class="ident" id="6894823"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6894835">(</span><span class="op" id="6894836">)</span><span class="op" id="6894837">,</span>&nbsp;<span class="ident" id="6894839"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6894851">(</span><span class="op" id="6894852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894856">a1</span><span class="op" id="6894858">,</span>&nbsp;<span class="ident" id="6894860">err</span>&nbsp;<span class="op" id="6894864">:=</span>&nbsp;<span class="ident" id="6894867"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6894882">(</span><span class="string" id="6894883">&#34;unixgram&#34;</span><span class="op" id="6894893">,</span>&nbsp;<span class="ident" id="6894895"><a href="/net/protoconn_test.go.html#6894784">addr1</a></span><span class="op" id="6894900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6894903">if</span>&nbsp;<span class="ident" id="6894906"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6894910">!=</span>&nbsp;<span class="ident" id="6894913">nil</span>&nbsp;<span class="op" id="6894917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894921"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6894922">.</span><span class="ident" id="6894923">Fatalf</span><span class="op" id="6894929">(</span><span class="string" id="6894930">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6894958">,</span>&nbsp;<span class="ident" id="6894960"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6894963">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6894966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6894969">c1</span><span class="op" id="6894971">,</span>&nbsp;<span class="ident" id="6894973"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6894977">:=</span>&nbsp;<span class="ident" id="6894980"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6894988">(</span><span class="string" id="6894989">&#34;unixgram&#34;</span><span class="op" id="6894999">,</span>&nbsp;<span class="ident" id="6895001"><a href="/net/protoconn_test.go.html#6894856">a1</a></span><span class="op" id="6895003">,</span>&nbsp;<span class="ident" id="6895005">nil</span><span class="op" id="6895008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895011">if</span>&nbsp;<span class="ident" id="6895014"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895018">!=</span>&nbsp;<span class="ident" id="6895021">nil</span>&nbsp;<span class="op" id="6895025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895029"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6895030">.</span><span class="ident" id="6895031">Fatalf</span><span class="op" id="6895037">(</span><span class="string" id="6895038">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6895059">,</span>&nbsp;<span class="ident" id="6895061"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6895064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6895067">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895070">defer</span>&nbsp;<span class="ident" id="6895076"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895078">.</span><span class="ident" id="6895079">Close</span><span class="op" id="6895084">(</span><span class="op" id="6895085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895088">defer</span>&nbsp;<span class="ident" id="6895094"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6895096">.</span><span class="ident" id="6895097">Remove</span><span class="op" id="6895103">(</span><span class="ident" id="6895104"><a href="/net/protoconn_test.go.html#6894784">addr1</a></span><span class="op" id="6895109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895112"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895114">.</span><span class="ident" id="6895115">LocalAddr</span><span class="op" id="6895124">(</span><span class="op" id="6895125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895128"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895130">.</span><span class="ident" id="6895131">RemoteAddr</span><span class="op" id="6895141">(</span><span class="op" id="6895142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895145"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895147">.</span><span class="ident" id="6895148">SetDeadline</span><span class="op" id="6895159">(</span><span class="ident" id="6895160"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895164">.</span><span class="ident" id="6895165">Now</span><span class="op" id="6895168">(</span><span class="op" id="6895169">)</span><span class="op" id="6895170">.</span><span class="ident" id="6895171">Add</span><span class="op" id="6895174">(</span><span class="ident" id="6895175"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895186">)</span><span class="op" id="6895187">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895190"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895192">.</span><span class="ident" id="6895193">SetReadDeadline</span><span class="op" id="6895208">(</span><span class="ident" id="6895209"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895213">.</span><span class="ident" id="6895214">Now</span><span class="op" id="6895217">(</span><span class="op" id="6895218">)</span><span class="op" id="6895219">.</span><span class="ident" id="6895220">Add</span><span class="op" id="6895223">(</span><span class="ident" id="6895224"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895235">)</span><span class="op" id="6895236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895239"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895241">.</span><span class="ident" id="6895242">SetWriteDeadline</span><span class="op" id="6895258">(</span><span class="ident" id="6895259"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895263">.</span><span class="ident" id="6895264">Now</span><span class="op" id="6895267">(</span><span class="op" id="6895268">)</span><span class="op" id="6895269">.</span><span class="ident" id="6895270">Add</span><span class="op" id="6895273">(</span><span class="ident" id="6895274"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895285">)</span><span class="op" id="6895286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895289"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895291">.</span><span class="ident" id="6895292">SetReadBuffer</span><span class="op" id="6895305">(</span><span class="num" id="6895306">2048</span><span class="op" id="6895310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895313"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6895315">.</span><span class="ident" id="6895316">SetWriteBuffer</span><span class="op" id="6895330">(</span><span class="num" id="6895331">2048</span><span class="op" id="6895335">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895339">a2</span><span class="op" id="6895341">,</span>&nbsp;<span class="ident" id="6895343"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895347">:=</span>&nbsp;<span class="ident" id="6895350"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6895365">(</span><span class="string" id="6895366">&#34;unixgram&#34;</span><span class="op" id="6895376">,</span>&nbsp;<span class="ident" id="6895378"><a href="/net/protoconn_test.go.html#6894791">addr2</a></span><span class="op" id="6895383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895386">if</span>&nbsp;<span class="ident" id="6895389"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895393">!=</span>&nbsp;<span class="ident" id="6895396">nil</span>&nbsp;<span class="op" id="6895400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895404"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6895405">.</span><span class="ident" id="6895406">Fatalf</span><span class="op" id="6895412">(</span><span class="string" id="6895413">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6895441">,</span>&nbsp;<span class="ident" id="6895443"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6895446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6895449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895452">c2</span><span class="op" id="6895454">,</span>&nbsp;<span class="ident" id="6895456"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895460">:=</span>&nbsp;<span class="ident" id="6895463"><a href="/net/unixsock_posix.go.html#2720568">DialUnix</a></span><span class="op" id="6895471">(</span><span class="string" id="6895472">&#34;unixgram&#34;</span><span class="op" id="6895482">,</span>&nbsp;<span class="ident" id="6895484"><a href="/net/protoconn_test.go.html#6895339">a2</a></span><span class="op" id="6895486">,</span>&nbsp;<span class="ident" id="6895488">nil</span><span class="op" id="6895491">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895494">if</span>&nbsp;<span class="ident" id="6895497"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895501">!=</span>&nbsp;<span class="ident" id="6895504">nil</span>&nbsp;<span class="op" id="6895508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895512"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6895513">.</span><span class="ident" id="6895514">Fatalf</span><span class="op" id="6895520">(</span><span class="string" id="6895521">&#34;DialUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6895542">,</span>&nbsp;<span class="ident" id="6895544"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6895547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6895550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895553">defer</span>&nbsp;<span class="ident" id="6895559"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895561">.</span><span class="ident" id="6895562">Close</span><span class="op" id="6895567">(</span><span class="op" id="6895568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895571">defer</span>&nbsp;<span class="ident" id="6895577"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6895579">.</span><span class="ident" id="6895580">Remove</span><span class="op" id="6895586">(</span><span class="ident" id="6895587"><a href="/net/protoconn_test.go.html#6894791">addr2</a></span><span class="op" id="6895592">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895595"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895597">.</span><span class="ident" id="6895598">LocalAddr</span><span class="op" id="6895607">(</span><span class="op" id="6895608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895611"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895613">.</span><span class="ident" id="6895614">RemoteAddr</span><span class="op" id="6895624">(</span><span class="op" id="6895625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895628"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895630">.</span><span class="ident" id="6895631">SetDeadline</span><span class="op" id="6895642">(</span><span class="ident" id="6895643"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895647">.</span><span class="ident" id="6895648">Now</span><span class="op" id="6895651">(</span><span class="op" id="6895652">)</span><span class="op" id="6895653">.</span><span class="ident" id="6895654">Add</span><span class="op" id="6895657">(</span><span class="ident" id="6895658"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895669">)</span><span class="op" id="6895670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895673"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895675">.</span><span class="ident" id="6895676">SetReadDeadline</span><span class="op" id="6895691">(</span><span class="ident" id="6895692"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895696">.</span><span class="ident" id="6895697">Now</span><span class="op" id="6895700">(</span><span class="op" id="6895701">)</span><span class="op" id="6895702">.</span><span class="ident" id="6895703">Add</span><span class="op" id="6895706">(</span><span class="ident" id="6895707"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895718">)</span><span class="op" id="6895719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895722"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895724">.</span><span class="ident" id="6895725">SetWriteDeadline</span><span class="op" id="6895741">(</span><span class="ident" id="6895742"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6895746">.</span><span class="ident" id="6895747">Now</span><span class="op" id="6895750">(</span><span class="op" id="6895751">)</span><span class="op" id="6895752">.</span><span class="ident" id="6895753">Add</span><span class="op" id="6895756">(</span><span class="ident" id="6895757"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6895768">)</span><span class="op" id="6895769">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895772"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895774">.</span><span class="ident" id="6895775">SetReadBuffer</span><span class="op" id="6895788">(</span><span class="num" id="6895789">2048</span><span class="op" id="6895793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895796"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6895798">.</span><span class="ident" id="6895799">SetWriteBuffer</span><span class="op" id="6895813">(</span><span class="num" id="6895814">2048</span><span class="op" id="6895818">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895822">a3</span><span class="op" id="6895824">,</span>&nbsp;<span class="ident" id="6895826"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895830">:=</span>&nbsp;<span class="ident" id="6895833"><a href="/net/unixsock.go.html#2714067">ResolveUnixAddr</a></span><span class="op" id="6895848">(</span><span class="string" id="6895849">&#34;unixgram&#34;</span><span class="op" id="6895859">,</span>&nbsp;<span class="ident" id="6895861"><a href="/net/protoconn_test.go.html#6894798">addr3</a></span><span class="op" id="6895866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895869">if</span>&nbsp;<span class="ident" id="6895872"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895876">!=</span>&nbsp;<span class="ident" id="6895879">nil</span>&nbsp;<span class="op" id="6895883">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895887"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6895888">.</span><span class="ident" id="6895889">Fatalf</span><span class="op" id="6895895">(</span><span class="string" id="6895896">&#34;ResolveUnixAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6895924">,</span>&nbsp;<span class="ident" id="6895926"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6895929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6895932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895935">c3</span><span class="op" id="6895937">,</span>&nbsp;<span class="ident" id="6895939"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895943">:=</span>&nbsp;<span class="ident" id="6895946"><a href="/net/unixsock_posix.go.html#2724349">ListenUnixgram</a></span><span class="op" id="6895960">(</span><span class="string" id="6895961">&#34;unixgram&#34;</span><span class="op" id="6895971">,</span>&nbsp;<span class="ident" id="6895973"><a href="/net/protoconn_test.go.html#6895822">a3</a></span><span class="op" id="6895975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6895978">if</span>&nbsp;<span class="ident" id="6895981"><a href="/net/protoconn_test.go.html#6894860">err</a></span>&nbsp;<span class="op" id="6895985">!=</span>&nbsp;<span class="ident" id="6895988">nil</span>&nbsp;<span class="op" id="6895992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6895996"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6895997">.</span><span class="ident" id="6895998">Fatalf</span><span class="op" id="6896004">(</span><span class="string" id="6896005">&#34;ListenUnixgram&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896032">,</span>&nbsp;<span class="ident" id="6896034"><a href="/net/protoconn_test.go.html#6894860">err</a></span><span class="op" id="6896037">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896043">defer</span>&nbsp;<span class="ident" id="6896049"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896051">.</span><span class="ident" id="6896052">Close</span><span class="op" id="6896057">(</span><span class="op" id="6896058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896061">defer</span>&nbsp;<span class="ident" id="6896067"><a href="/net/protoconn_test.go.html#6888267">os</a></span><span class="op" id="6896069">.</span><span class="ident" id="6896070">Remove</span><span class="op" id="6896076">(</span><span class="ident" id="6896077"><a href="/net/protoconn_test.go.html#6894798">addr3</a></span><span class="op" id="6896082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896085"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896087">.</span><span class="ident" id="6896088">LocalAddr</span><span class="op" id="6896097">(</span><span class="op" id="6896098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896101"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896103">.</span><span class="ident" id="6896104">RemoteAddr</span><span class="op" id="6896114">(</span><span class="op" id="6896115">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896118"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896120">.</span><span class="ident" id="6896121">SetDeadline</span><span class="op" id="6896132">(</span><span class="ident" id="6896133"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6896137">.</span><span class="ident" id="6896138">Now</span><span class="op" id="6896141">(</span><span class="op" id="6896142">)</span><span class="op" id="6896143">.</span><span class="ident" id="6896144">Add</span><span class="op" id="6896147">(</span><span class="ident" id="6896148"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6896159">)</span><span class="op" id="6896160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896163"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896165">.</span><span class="ident" id="6896166">SetReadDeadline</span><span class="op" id="6896181">(</span><span class="ident" id="6896182"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6896186">.</span><span class="ident" id="6896187">Now</span><span class="op" id="6896190">(</span><span class="op" id="6896191">)</span><span class="op" id="6896192">.</span><span class="ident" id="6896193">Add</span><span class="op" id="6896196">(</span><span class="ident" id="6896197"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6896208">)</span><span class="op" id="6896209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896212"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896214">.</span><span class="ident" id="6896215">SetWriteDeadline</span><span class="op" id="6896231">(</span><span class="ident" id="6896232"><a href="/net/protoconn_test.go.html#6888295">time</a></span><span class="op" id="6896236">.</span><span class="ident" id="6896237">Now</span><span class="op" id="6896240">(</span><span class="op" id="6896241">)</span><span class="op" id="6896242">.</span><span class="ident" id="6896243">Add</span><span class="op" id="6896246">(</span><span class="ident" id="6896247"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6896258">)</span><span class="op" id="6896259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896262"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896264">.</span><span class="ident" id="6896265">SetReadBuffer</span><span class="op" id="6896278">(</span><span class="num" id="6896279">2048</span><span class="op" id="6896283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896286"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896288">.</span><span class="ident" id="6896289">SetWriteBuffer</span><span class="op" id="6896303">(</span><span class="num" id="6896304">2048</span><span class="op" id="6896308">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896312">wb</span>&nbsp;<span class="op" id="6896315">:=</span>&nbsp;<span class="op" id="6896318">[</span><span class="op" id="6896319">]</span><span class="builtintype" id="6896320">byte</span><span class="op" id="6896324">(</span><span class="string" id="6896325">&#34;UNIXCONN&nbsp;TEST&#34;</span><span class="op" id="6896340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896343">rb1</span>&nbsp;<span class="op" id="6896347">:=</span>&nbsp;<span class="builtinfunc" id="6896350">make</span><span class="op" id="6896354">(</span><span class="op" id="6896355">[</span><span class="op" id="6896356">]</span><span class="builtintype" id="6896357">byte</span><span class="op" id="6896361">,</span>&nbsp;<span class="num" id="6896363">128</span><span class="op" id="6896366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896369">rb2</span>&nbsp;<span class="op" id="6896373">:=</span>&nbsp;<span class="builtinfunc" id="6896376">make</span><span class="op" id="6896380">(</span><span class="op" id="6896381">[</span><span class="op" id="6896382">]</span><span class="builtintype" id="6896383">byte</span><span class="op" id="6896387">,</span>&nbsp;<span class="num" id="6896389">128</span><span class="op" id="6896392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896395">rb3</span>&nbsp;<span class="op" id="6896399">:=</span>&nbsp;<span class="builtinfunc" id="6896402">make</span><span class="op" id="6896406">(</span><span class="op" id="6896407">[</span><span class="op" id="6896408">]</span><span class="builtintype" id="6896409">byte</span><span class="op" id="6896413">,</span>&nbsp;<span class="num" id="6896415">128</span><span class="op" id="6896418">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896421">if</span>&nbsp;<span class="ident" id="6896424">_</span><span class="op" id="6896425">,</span>&nbsp;<span class="ident" id="6896427">_</span><span class="op" id="6896428">,</span>&nbsp;<span class="ident" id="6896430">err</span>&nbsp;<span class="op" id="6896434">:=</span>&nbsp;<span class="ident" id="6896437"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6896439">.</span><span class="ident" id="6896440">WriteMsgUnix</span><span class="op" id="6896452">(</span><span class="ident" id="6896453"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6896455">,</span>&nbsp;<span class="ident" id="6896457">nil</span><span class="op" id="6896460">,</span>&nbsp;<span class="ident" id="6896462"><a href="/net/protoconn_test.go.html#6895339">a2</a></span><span class="op" id="6896464">)</span><span class="op" id="6896465">;</span>&nbsp;<span class="ident" id="6896467"><a href="/net/protoconn_test.go.html#6896430">err</a></span>&nbsp;<span class="op" id="6896471">!=</span>&nbsp;<span class="ident" id="6896474">nil</span>&nbsp;<span class="op" id="6896478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896482"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6896483">.</span><span class="ident" id="6896484">Fatalf</span><span class="op" id="6896490">(</span><span class="string" id="6896491">&#34;UnixConn.WriteMsgUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896525">,</span>&nbsp;<span class="ident" id="6896527"><a href="/net/protoconn_test.go.html#6896430">err</a></span><span class="op" id="6896530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896536">if</span>&nbsp;<span class="ident" id="6896539">_</span><span class="op" id="6896540">,</span>&nbsp;<span class="ident" id="6896542">_</span><span class="op" id="6896543">,</span>&nbsp;<span class="ident" id="6896545">_</span><span class="op" id="6896546">,</span>&nbsp;<span class="ident" id="6896548">_</span><span class="op" id="6896549">,</span>&nbsp;<span class="ident" id="6896551">err</span>&nbsp;<span class="op" id="6896555">:=</span>&nbsp;<span class="ident" id="6896558"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6896560">.</span><span class="ident" id="6896561">ReadMsgUnix</span><span class="op" id="6896572">(</span><span class="ident" id="6896573"><a href="/net/protoconn_test.go.html#6896369">rb2</a></span><span class="op" id="6896576">,</span>&nbsp;<span class="ident" id="6896578">nil</span><span class="op" id="6896581">)</span><span class="op" id="6896582">;</span>&nbsp;<span class="ident" id="6896584"><a href="/net/protoconn_test.go.html#6896551">err</a></span>&nbsp;<span class="op" id="6896588">!=</span>&nbsp;<span class="ident" id="6896591">nil</span>&nbsp;<span class="op" id="6896595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896599"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6896600">.</span><span class="ident" id="6896601">Fatalf</span><span class="op" id="6896607">(</span><span class="string" id="6896608">&#34;UnixConn.ReadMsgUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896641">,</span>&nbsp;<span class="ident" id="6896643"><a href="/net/protoconn_test.go.html#6896551">err</a></span><span class="op" id="6896646">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896652">if</span>&nbsp;<span class="ident" id="6896655">_</span><span class="op" id="6896656">,</span>&nbsp;<span class="ident" id="6896658">err</span>&nbsp;<span class="op" id="6896662">:=</span>&nbsp;<span class="ident" id="6896665"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6896667">.</span><span class="ident" id="6896668">WriteToUnix</span><span class="op" id="6896679">(</span><span class="ident" id="6896680"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6896682">,</span>&nbsp;<span class="ident" id="6896684"><a href="/net/protoconn_test.go.html#6894856">a1</a></span><span class="op" id="6896686">)</span><span class="op" id="6896687">;</span>&nbsp;<span class="ident" id="6896689"><a href="/net/protoconn_test.go.html#6896658">err</a></span>&nbsp;<span class="op" id="6896693">!=</span>&nbsp;<span class="ident" id="6896696">nil</span>&nbsp;<span class="op" id="6896700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896704"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6896705">.</span><span class="ident" id="6896706">Fatalf</span><span class="op" id="6896712">(</span><span class="string" id="6896713">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896746">,</span>&nbsp;<span class="ident" id="6896748"><a href="/net/protoconn_test.go.html#6896658">err</a></span><span class="op" id="6896751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896757">if</span>&nbsp;<span class="ident" id="6896760">_</span><span class="op" id="6896761">,</span>&nbsp;<span class="ident" id="6896763">_</span><span class="op" id="6896764">,</span>&nbsp;<span class="ident" id="6896766">err</span>&nbsp;<span class="op" id="6896770">:=</span>&nbsp;<span class="ident" id="6896773"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6896775">.</span><span class="ident" id="6896776">ReadFromUnix</span><span class="op" id="6896788">(</span><span class="ident" id="6896789"><a href="/net/protoconn_test.go.html#6896343">rb1</a></span><span class="op" id="6896792">)</span><span class="op" id="6896793">;</span>&nbsp;<span class="ident" id="6896795"><a href="/net/protoconn_test.go.html#6896766">err</a></span>&nbsp;<span class="op" id="6896799">!=</span>&nbsp;<span class="ident" id="6896802">nil</span>&nbsp;<span class="op" id="6896806">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896810"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6896811">.</span><span class="ident" id="6896812">Fatalf</span><span class="op" id="6896818">(</span><span class="string" id="6896819">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896853">,</span>&nbsp;<span class="ident" id="6896855"><a href="/net/protoconn_test.go.html#6896766">err</a></span><span class="op" id="6896858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896864">if</span>&nbsp;<span class="ident" id="6896867">_</span><span class="op" id="6896868">,</span>&nbsp;<span class="ident" id="6896870">err</span>&nbsp;<span class="op" id="6896874">:=</span>&nbsp;<span class="ident" id="6896877"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6896879">.</span><span class="ident" id="6896880">WriteToUnix</span><span class="op" id="6896891">(</span><span class="ident" id="6896892"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6896894">,</span>&nbsp;<span class="ident" id="6896896"><a href="/net/protoconn_test.go.html#6894856">a1</a></span><span class="op" id="6896898">)</span><span class="op" id="6896899">;</span>&nbsp;<span class="ident" id="6896901"><a href="/net/protoconn_test.go.html#6896870">err</a></span>&nbsp;<span class="op" id="6896905">!=</span>&nbsp;<span class="ident" id="6896908">nil</span>&nbsp;<span class="op" id="6896912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896916"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6896917">.</span><span class="ident" id="6896918">Fatalf</span><span class="op" id="6896924">(</span><span class="string" id="6896925">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6896958">,</span>&nbsp;<span class="ident" id="6896960"><a href="/net/protoconn_test.go.html#6896870">err</a></span><span class="op" id="6896963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896966">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896969">if</span>&nbsp;<span class="ident" id="6896972">_</span><span class="op" id="6896973">,</span>&nbsp;<span class="ident" id="6896975">_</span><span class="op" id="6896976">,</span>&nbsp;<span class="ident" id="6896978">err</span>&nbsp;<span class="op" id="6896982">:=</span>&nbsp;<span class="ident" id="6896985"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6896987">.</span><span class="ident" id="6896988">ReadFromUnix</span><span class="op" id="6897000">(</span><span class="ident" id="6897001"><a href="/net/protoconn_test.go.html#6896343">rb1</a></span><span class="op" id="6897004">)</span><span class="op" id="6897005">;</span>&nbsp;<span class="ident" id="6897007"><a href="/net/protoconn_test.go.html#6896978">err</a></span>&nbsp;<span class="op" id="6897011">!=</span>&nbsp;<span class="ident" id="6897014">nil</span>&nbsp;<span class="op" id="6897018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897022"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6897023">.</span><span class="ident" id="6897024">Fatalf</span><span class="op" id="6897030">(</span><span class="string" id="6897031">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6897065">,</span>&nbsp;<span class="ident" id="6897067"><a href="/net/protoconn_test.go.html#6896978">err</a></span><span class="op" id="6897070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897076">if</span>&nbsp;<span class="ident" id="6897079">_</span><span class="op" id="6897080">,</span>&nbsp;<span class="ident" id="6897082">err</span>&nbsp;<span class="op" id="6897086">:=</span>&nbsp;<span class="ident" id="6897089"><a href="/net/protoconn_test.go.html#6895452">c2</a></span><span class="op" id="6897091">.</span><span class="ident" id="6897092">WriteToUnix</span><span class="op" id="6897103">(</span><span class="ident" id="6897104"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6897106">,</span>&nbsp;<span class="ident" id="6897108"><a href="/net/protoconn_test.go.html#6895822">a3</a></span><span class="op" id="6897110">)</span><span class="op" id="6897111">;</span>&nbsp;<span class="ident" id="6897113"><a href="/net/protoconn_test.go.html#6897082">err</a></span>&nbsp;<span class="op" id="6897117">!=</span>&nbsp;<span class="ident" id="6897120">nil</span>&nbsp;<span class="op" id="6897124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897128"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6897129">.</span><span class="ident" id="6897130">Fatalf</span><span class="op" id="6897136">(</span><span class="string" id="6897137">&#34;UnixConn.WriteToUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6897170">,</span>&nbsp;<span class="ident" id="6897172"><a href="/net/protoconn_test.go.html#6897082">err</a></span><span class="op" id="6897175">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897181">if</span>&nbsp;<span class="ident" id="6897184">_</span><span class="op" id="6897185">,</span>&nbsp;<span class="ident" id="6897187">_</span><span class="op" id="6897188">,</span>&nbsp;<span class="ident" id="6897190">err</span>&nbsp;<span class="op" id="6897194">:=</span>&nbsp;<span class="ident" id="6897197"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6897199">.</span><span class="ident" id="6897200">ReadFromUnix</span><span class="op" id="6897212">(</span><span class="ident" id="6897213"><a href="/net/protoconn_test.go.html#6896395">rb3</a></span><span class="op" id="6897216">)</span><span class="op" id="6897217">;</span>&nbsp;<span class="ident" id="6897219"><a href="/net/protoconn_test.go.html#6897190">err</a></span>&nbsp;<span class="op" id="6897223">!=</span>&nbsp;<span class="ident" id="6897226">nil</span>&nbsp;<span class="op" id="6897230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897234"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6897235">.</span><span class="ident" id="6897236">Fatalf</span><span class="op" id="6897242">(</span><span class="string" id="6897243">&#34;UnixConn.ReadFromUnix&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6897277">,</span>&nbsp;<span class="ident" id="6897279"><a href="/net/protoconn_test.go.html#6897190">err</a></span><span class="op" id="6897282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897289">if</span>&nbsp;<span class="ident" id="6897292">f</span><span class="op" id="6897293">,</span>&nbsp;<span class="ident" id="6897295">err</span>&nbsp;<span class="op" id="6897299">:=</span>&nbsp;<span class="ident" id="6897302"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6897304">.</span><span class="ident" id="6897305">File</span><span class="op" id="6897309">(</span><span class="op" id="6897310">)</span><span class="op" id="6897311">;</span>&nbsp;<span class="ident" id="6897313"><a href="/net/protoconn_test.go.html#6897295">err</a></span>&nbsp;<span class="op" id="6897317">!=</span>&nbsp;<span class="ident" id="6897320">nil</span>&nbsp;<span class="op" id="6897324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897328"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6897329">.</span><span class="ident" id="6897330">Fatalf</span><span class="op" id="6897336">(</span><span class="string" id="6897337">&#34;UnixConn.File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6897363">,</span>&nbsp;<span class="ident" id="6897365"><a href="/net/protoconn_test.go.html#6897295">err</a></span><span class="op" id="6897368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897371">}</span>&nbsp;<span class="keyword" id="6897373">else</span>&nbsp;<span class="op" id="6897378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897382"><a href="/net/protoconn_test.go.html#6897292">f</a></span><span class="op" id="6897383">.</span><span class="ident" id="6897384">Close</span><span class="op" id="6897389">(</span><span class="op" id="6897390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897393">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897397">defer</span>&nbsp;<span class="keyword" id="6897403">func</span><span class="op" id="6897407">(</span><span class="op" id="6897408">)</span>&nbsp;<span class="op" id="6897410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897414">if</span>&nbsp;<span class="ident" id="6897417">p</span>&nbsp;<span class="op" id="6897419">:=</span>&nbsp;<span class="builtinfunc" id="6897422">recover</span><span class="op" id="6897429">(</span><span class="op" id="6897430">)</span><span class="op" id="6897431">;</span>&nbsp;<span class="ident" id="6897433"><a href="/net/protoconn_test.go.html#6897417">p</a></span>&nbsp;<span class="op" id="6897435">!=</span>&nbsp;<span class="ident" id="6897438">nil</span>&nbsp;<span class="op" id="6897442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897447"><a href="/net/protoconn_test.go.html#6894659">t</a></span><span class="op" id="6897448">.</span><span class="ident" id="6897449">Fatalf</span><span class="op" id="6897455">(</span><span class="string" id="6897456">&#34;UnixConn.WriteToUnix&nbsp;or&nbsp;WriteMsgUnix&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="6897507">,</span>&nbsp;<span class="ident" id="6897509"><a href="/net/protoconn_test.go.html#6897417">p</a></span><span class="op" id="6897510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897514">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897517">}</span><span class="op" id="6897518">(</span><span class="op" id="6897519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897523"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6897525">.</span><span class="ident" id="6897526">WriteToUnix</span><span class="op" id="6897537">(</span><span class="ident" id="6897538"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6897540">,</span>&nbsp;<span class="ident" id="6897542">nil</span><span class="op" id="6897545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897548"><a href="/net/protoconn_test.go.html#6894969">c1</a></span><span class="op" id="6897550">.</span><span class="ident" id="6897551">WriteMsgUnix</span><span class="op" id="6897563">(</span><span class="ident" id="6897564"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6897566">,</span>&nbsp;<span class="ident" id="6897568">nil</span><span class="op" id="6897571">,</span>&nbsp;<span class="ident" id="6897573">nil</span><span class="op" id="6897576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897579"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6897581">.</span><span class="ident" id="6897582">WriteToUnix</span><span class="op" id="6897593">(</span><span class="ident" id="6897594"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6897596">,</span>&nbsp;<span class="ident" id="6897598">nil</span><span class="op" id="6897601">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897604"><a href="/net/protoconn_test.go.html#6895935">c3</a></span><span class="op" id="6897606">.</span><span class="ident" id="6897607">WriteMsgUnix</span><span class="op" id="6897619">(</span><span class="ident" id="6897620"><a href="/net/protoconn_test.go.html#6896312">wb</a></span><span class="op" id="6897622">,</span>&nbsp;<span class="ident" id="6897624">nil</span><span class="op" id="6897627">,</span>&nbsp;<span class="ident" id="6897629">nil</span><span class="op" id="6897632">)</span><br>
<span class="lineno"></span><span class="op" id="6897634">}</span>
</div>
</body>
</html>
