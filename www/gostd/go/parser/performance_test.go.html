<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html" class="current">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6648866">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6648921">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6648975">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6649026">package</span>&nbsp;<span class="ident" id="6649034">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6649042">import</span>&nbsp;<span class="op" id="6649049">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6649052">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6649064">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6649077">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6649087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6649090">var</span>&nbsp;<span class="ident" id="6649094">src</span>&nbsp;<span class="op" id="6649098">=</span>&nbsp;<span class="ident" id="6649100">readFile</span><span class="op" id="6649108">(</span><span class="string" id="6649109">&#34;parser.go&#34;</span><span class="op" id="6649120">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6649123">func</span>&nbsp;<span class="ident" id="6649128">readFile</span><span class="op" id="6649136">(</span><span class="ident" id="6649137">filename</span>&nbsp;<span class="builtintype" id="6649146">string</span><span class="op" id="6649152">)</span>&nbsp;<span class="op" id="6649154">[</span><span class="op" id="6649155">]</span><span class="builtintype" id="6649156">byte</span>&nbsp;<span class="op" id="6649161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6649164">data</span><span class="op" id="6649168">,</span>&nbsp;<span class="ident" id="6649170">err</span>&nbsp;<span class="op" id="6649174">:=</span>&nbsp;<span class="ident" id="6649177">ioutil</span><span class="op" id="6649183">.</span><span class="ident" id="6649184">ReadFile</span><span class="op" id="6649192">(</span><span class="ident" id="6649193">filename</span><span class="op" id="6649201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6649204">if</span>&nbsp;<span class="ident" id="6649207">err</span>&nbsp;<span class="op" id="6649211">!=</span>&nbsp;<span class="builtintype" id="6649214">nil</span>&nbsp;<span class="op" id="6649218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6649222">panic</span><span class="op" id="6649227">(</span><span class="ident" id="6649228">err</span><span class="op" id="6649231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6649234">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6649237">return</span>&nbsp;<span class="ident" id="6649244">data</span><br>
<span class="lineno"></span><span class="op" id="6649249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6649252">func</span>&nbsp;<span class="ident" id="6649257">BenchmarkParse</span><span class="op" id="6649271">(</span><span class="ident" id="6649272">b</span>&nbsp;<span class="op" id="6649274">*</span><span class="ident" id="6649275">testing</span><span class="op" id="6649282">.</span><span class="ident" id="6649283">B</span><span class="op" id="6649284">)</span>&nbsp;<span class="op" id="6649286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6649289">b</span><span class="op" id="6649290">.</span><span class="ident" id="6649291">SetBytes</span><span class="op" id="6649299">(</span><span class="ident" id="6649300">int64</span><span class="op" id="6649305">(</span><span class="builtinfunc" id="6649306">len</span><span class="op" id="6649309">(</span><span class="ident" id="6649310">src</span><span class="op" id="6649313">)</span><span class="op" id="6649314">)</span><span class="op" id="6649315">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6649318">for</span>&nbsp;<span class="ident" id="6649322">i</span>&nbsp;<span class="op" id="6649324">:=</span>&nbsp;<span class="num" id="6649327">0</span><span class="op" id="6649328">;</span>&nbsp;<span class="ident" id="6649330">i</span>&nbsp;<span class="op" id="6649332">&lt;</span>&nbsp;<span class="ident" id="6649334">b</span><span class="op" id="6649335">.</span><span class="ident" id="6649336">N</span><span class="op" id="6649337">;</span>&nbsp;<span class="ident" id="6649339">i</span><span class="op" id="6649340">++</span>&nbsp;<span class="op" id="6649343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6649347">if</span>&nbsp;<span class="ident" id="6649350">_</span><span class="op" id="6649351">,</span>&nbsp;<span class="ident" id="6649353">err</span>&nbsp;<span class="op" id="6649357">:=</span>&nbsp;<span class="ident" id="6649360">ParseFile</span><span class="op" id="6649369">(</span><span class="ident" id="6649370">token</span><span class="op" id="6649375">.</span><span class="ident" id="6649376">NewFileSet</span><span class="op" id="6649386">(</span><span class="op" id="6649387">)</span><span class="op" id="6649388">,</span>&nbsp;<span class="string" id="6649390">&#34;&#34;</span><span class="op" id="6649392">,</span>&nbsp;<span class="ident" id="6649394">src</span><span class="op" id="6649397">,</span>&nbsp;<span class="ident" id="6649399">ParseComments</span><span class="op" id="6649412">)</span><span class="op" id="6649413">;</span>&nbsp;<span class="ident" id="6649415">err</span>&nbsp;<span class="op" id="6649419">!=</span>&nbsp;<span class="builtintype" id="6649422">nil</span>&nbsp;<span class="op" id="6649426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6649431">b</span><span class="op" id="6649432">.</span><span class="ident" id="6649433">Fatalf</span><span class="op" id="6649439">(</span><span class="string" id="6649440">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6649481">,</span>&nbsp;<span class="ident" id="6649483">err</span><span class="op" id="6649486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6649490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6649493">}</span><br>
<span class="lineno">30</span><span class="op" id="6649495">}</span>
</div>
</body>
</html>
