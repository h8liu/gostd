<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4142614">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4142669">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4142723">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4142774">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4142839">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4142888">package</span>&nbsp;<span class="ident" id="4142896">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4142901">import</span>&nbsp;<span class="string" id="4142908">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4142916">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="4142986">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="4143059">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="4143086">var</span>&nbsp;<span class="ident" id="4143090">services</span>&nbsp;<span class="op" id="4143099">=</span>&nbsp;<span class="keyword" id="4143101">map</span><span class="op" id="4143104">[</span><span class="builtintype" id="4143105">string</span><span class="op" id="4143111">]</span><span class="keyword" id="4143112">map</span><span class="op" id="4143115">[</span><span class="builtintype" id="4143116">string</span><span class="op" id="4143122">]</span><span class="builtintype" id="4143123">int</span><span class="op" id="4143126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4143129">&#34;tcp&#34;</span><span class="op" id="4143134">:</span>&nbsp;<span class="op" id="4143136">{</span><span class="string" id="4143137">&#34;http&#34;</span><span class="op" id="4143143">:</span>&nbsp;<span class="num" id="4143145">80</span><span class="op" id="4143147">}</span><span class="op" id="4143148">,</span><br>
<span class="lineno"></span><span class="op" id="4143150">}</span><br>
<span class="lineno"></span><span class="keyword" id="4143152">var</span>&nbsp;<span class="ident" id="4143156">servicesError</span>&nbsp;<span class="builtintype" id="4143170">error</span><br>
<span class="lineno">20</span><span class="keyword" id="4143176">var</span>&nbsp;<span class="ident" id="4143180">onceReadServices</span>&nbsp;<span class="ident" id="4143197">sync</span><span class="op" id="4143201">.</span><span class="ident" id="4143202">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4143208">func</span>&nbsp;<span class="ident" id="4143213">readServices</span><span class="op" id="4143225">(</span><span class="op" id="4143226">)</span>&nbsp;<span class="op" id="4143228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143231">var</span>&nbsp;<span class="ident" id="4143235">file</span>&nbsp;<span class="op" id="4143240">*</span><span class="ident" id="4143241">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143247">if</span>&nbsp;<span class="ident" id="4143250">file</span><span class="op" id="4143254">,</span>&nbsp;<span class="ident" id="4143256">servicesError</span>&nbsp;<span class="op" id="4143270">=</span>&nbsp;<span class="ident" id="4143272">open</span><span class="op" id="4143276">(</span><span class="string" id="4143277">&#34;/etc/services&#34;</span><span class="op" id="4143292">)</span><span class="op" id="4143293">;</span>&nbsp;<span class="ident" id="4143295">servicesError</span>&nbsp;<span class="op" id="4143309">!=</span>&nbsp;<span class="ident" id="4143312">nil</span>&nbsp;<span class="op" id="4143316">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143320">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143331">for</span>&nbsp;<span class="ident" id="4143335">line</span><span class="op" id="4143339">,</span>&nbsp;<span class="ident" id="4143341">ok</span>&nbsp;<span class="op" id="4143344">:=</span>&nbsp;<span class="ident" id="4143347">file</span><span class="op" id="4143351">.</span><span class="ident" id="4143352">readLine</span><span class="op" id="4143360">(</span><span class="op" id="4143361">)</span><span class="op" id="4143362">;</span>&nbsp;<span class="ident" id="4143364">ok</span><span class="op" id="4143366">;</span>&nbsp;<span class="ident" id="4143368">line</span><span class="op" id="4143372">,</span>&nbsp;<span class="ident" id="4143374">ok</span>&nbsp;<span class="op" id="4143377">=</span>&nbsp;<span class="ident" id="4143379">file</span><span class="op" id="4143383">.</span><span class="ident" id="4143384">readLine</span><span class="op" id="4143392">(</span><span class="op" id="4143393">)</span>&nbsp;<span class="op" id="4143395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4143399">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143453">if</span>&nbsp;<span class="ident" id="4143456">i</span>&nbsp;<span class="op" id="4143458">:=</span>&nbsp;<span class="ident" id="4143461">byteIndex</span><span class="op" id="4143470">(</span><span class="ident" id="4143471">line</span><span class="op" id="4143475">,</span>&nbsp;<span class="string" id="4143477">&#39;#&#39;</span><span class="op" id="4143480">)</span><span class="op" id="4143481">;</span>&nbsp;<span class="ident" id="4143483">i</span>&nbsp;<span class="op" id="4143485">&gt;=</span>&nbsp;<span class="num" id="4143488">0</span>&nbsp;<span class="op" id="4143490">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143495">line</span>&nbsp;<span class="op" id="4143500">=</span>&nbsp;<span class="ident" id="4143502">line</span><span class="op" id="4143506">[</span><span class="num" id="4143507">0</span><span class="op" id="4143508">:</span><span class="ident" id="4143509">i</span><span class="op" id="4143510">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143518">f</span>&nbsp;<span class="op" id="4143520">:=</span>&nbsp;<span class="ident" id="4143523">getFields</span><span class="op" id="4143532">(</span><span class="ident" id="4143533">line</span><span class="op" id="4143537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143541">if</span>&nbsp;<span class="builtinfunc" id="4143544">len</span><span class="op" id="4143547">(</span><span class="ident" id="4143548">f</span><span class="op" id="4143549">)</span>&nbsp;<span class="op" id="4143551">&lt;</span>&nbsp;<span class="num" id="4143553">2</span>&nbsp;<span class="op" id="4143555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143560">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143575">portnet</span>&nbsp;<span class="op" id="4143583">:=</span>&nbsp;<span class="ident" id="4143586">f</span><span class="op" id="4143587">[</span><span class="num" id="4143588">1</span><span class="op" id="4143589">]</span>&nbsp;<span class="comment" id="4143591">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143605">port</span><span class="op" id="4143609">,</span>&nbsp;<span class="ident" id="4143611">j</span><span class="op" id="4143612">,</span>&nbsp;<span class="ident" id="4143614">ok</span>&nbsp;<span class="op" id="4143617">:=</span>&nbsp;<span class="ident" id="4143620">dtoi</span><span class="op" id="4143624">(</span><span class="ident" id="4143625">portnet</span><span class="op" id="4143632">,</span>&nbsp;<span class="num" id="4143634">0</span><span class="op" id="4143635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143639">if</span>&nbsp;<span class="op" id="4143642">!</span><span class="ident" id="4143643">ok</span>&nbsp;<span class="op" id="4143646">||</span>&nbsp;<span class="ident" id="4143649">port</span>&nbsp;<span class="op" id="4143654">&lt;=</span>&nbsp;<span class="num" id="4143657">0</span>&nbsp;<span class="op" id="4143659">||</span>&nbsp;<span class="ident" id="4143662">j</span>&nbsp;<span class="op" id="4143664">&gt;=</span>&nbsp;<span class="builtinfunc" id="4143667">len</span><span class="op" id="4143670">(</span><span class="ident" id="4143671">portnet</span><span class="op" id="4143678">)</span>&nbsp;<span class="op" id="4143680">||</span>&nbsp;<span class="ident" id="4143683">portnet</span><span class="op" id="4143690">[</span><span class="ident" id="4143691">j</span><span class="op" id="4143692">]</span>&nbsp;<span class="op" id="4143694">!=</span>&nbsp;<span class="string" id="4143697">&#39;/&#39;</span>&nbsp;<span class="op" id="4143701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143706">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143721">netw</span>&nbsp;<span class="op" id="4143726">:=</span>&nbsp;<span class="ident" id="4143729">portnet</span><span class="op" id="4143736">[</span><span class="ident" id="4143737">j</span><span class="op" id="4143738">+</span><span class="num" id="4143739">1</span><span class="op" id="4143740">:</span><span class="op" id="4143741">]</span>&nbsp;<span class="comment" id="4143743">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143754">m</span><span class="op" id="4143755">,</span>&nbsp;<span class="ident" id="4143757">ok1</span>&nbsp;<span class="op" id="4143761">:=</span>&nbsp;<span class="ident" id="4143764">services</span><span class="op" id="4143772">[</span><span class="ident" id="4143773">netw</span><span class="op" id="4143777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143781">if</span>&nbsp;<span class="op" id="4143784">!</span><span class="ident" id="4143785">ok1</span>&nbsp;<span class="op" id="4143789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143794">m</span>&nbsp;<span class="op" id="4143796">=</span>&nbsp;<span class="builtinfunc" id="4143798">make</span><span class="op" id="4143802">(</span><span class="keyword" id="4143803">map</span><span class="op" id="4143806">[</span><span class="builtintype" id="4143807">string</span><span class="op" id="4143813">]</span><span class="builtintype" id="4143814">int</span><span class="op" id="4143817">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143822">services</span><span class="op" id="4143830">[</span><span class="ident" id="4143831">netw</span><span class="op" id="4143835">]</span>&nbsp;<span class="op" id="4143837">=</span>&nbsp;<span class="ident" id="4143839">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143847">for</span>&nbsp;<span class="ident" id="4143851">i</span>&nbsp;<span class="op" id="4143853">:=</span>&nbsp;<span class="num" id="4143856">0</span><span class="op" id="4143857">;</span>&nbsp;<span class="ident" id="4143859">i</span>&nbsp;<span class="op" id="4143861">&lt;</span>&nbsp;<span class="builtinfunc" id="4143863">len</span><span class="op" id="4143866">(</span><span class="ident" id="4143867">f</span><span class="op" id="4143868">)</span><span class="op" id="4143869">;</span>&nbsp;<span class="ident" id="4143871">i</span><span class="op" id="4143872">++</span>&nbsp;<span class="op" id="4143875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4143880">if</span>&nbsp;<span class="ident" id="4143883">i</span>&nbsp;<span class="op" id="4143885">!=</span>&nbsp;<span class="num" id="4143888">1</span>&nbsp;<span class="op" id="4143890">{</span>&nbsp;<span class="comment" id="4143892">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143917">m</span><span class="op" id="4143918">[</span><span class="ident" id="4143919">f</span><span class="op" id="4143920">[</span><span class="ident" id="4143921">i</span><span class="op" id="4143922">]</span><span class="op" id="4143923">]</span>&nbsp;<span class="op" id="4143925">=</span>&nbsp;<span class="ident" id="4143927">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4143942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4143945">file</span><span class="op" id="4143949">.</span><span class="builtinfunc" id="4143950">close</span><span class="op" id="4143955">(</span><span class="op" id="4143956">)</span><br>
<span class="lineno"></span><span class="op" id="4143958">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4143961">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="4144024">func</span>&nbsp;<span class="ident" id="4144029">goLookupPort</span><span class="op" id="4144041">(</span><span class="ident" id="4144042">network</span><span class="op" id="4144049">,</span>&nbsp;<span class="ident" id="4144051">service</span>&nbsp;<span class="builtintype" id="4144059">string</span><span class="op" id="4144065">)</span>&nbsp;<span class="op" id="4144067">(</span><span class="ident" id="4144068">port</span>&nbsp;<span class="builtintype" id="4144073">int</span><span class="op" id="4144076">,</span>&nbsp;<span class="ident" id="4144078">err</span>&nbsp;<span class="builtintype" id="4144082">error</span><span class="op" id="4144087">)</span>&nbsp;<span class="op" id="4144089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4144092">onceReadServices</span><span class="op" id="4144108">.</span><span class="ident" id="4144109">Do</span><span class="op" id="4144111">(</span><span class="ident" id="4144112">readServices</span><span class="op" id="4144124">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144128">switch</span>&nbsp;<span class="ident" id="4144135">network</span>&nbsp;<span class="op" id="4144143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144146">case</span>&nbsp;<span class="string" id="4144151">&#34;tcp4&#34;</span><span class="op" id="4144157">,</span>&nbsp;<span class="string" id="4144159">&#34;tcp6&#34;</span><span class="op" id="4144165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4144169">network</span>&nbsp;<span class="op" id="4144177">=</span>&nbsp;<span class="string" id="4144179">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144186">case</span>&nbsp;<span class="string" id="4144191">&#34;udp4&#34;</span><span class="op" id="4144197">,</span>&nbsp;<span class="string" id="4144199">&#34;udp6&#34;</span><span class="op" id="4144205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4144209">network</span>&nbsp;<span class="op" id="4144217">=</span>&nbsp;<span class="string" id="4144219">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4144226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144230">if</span>&nbsp;<span class="ident" id="4144233">m</span><span class="op" id="4144234">,</span>&nbsp;<span class="ident" id="4144236">ok</span>&nbsp;<span class="op" id="4144239">:=</span>&nbsp;<span class="ident" id="4144242">services</span><span class="op" id="4144250">[</span><span class="ident" id="4144251">network</span><span class="op" id="4144258">]</span><span class="op" id="4144259">;</span>&nbsp;<span class="ident" id="4144261">ok</span>&nbsp;<span class="op" id="4144264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144268">if</span>&nbsp;<span class="ident" id="4144271">port</span><span class="op" id="4144275">,</span>&nbsp;<span class="ident" id="4144277">ok</span>&nbsp;<span class="op" id="4144280">=</span>&nbsp;<span class="ident" id="4144282">m</span><span class="op" id="4144283">[</span><span class="ident" id="4144284">service</span><span class="op" id="4144291">]</span><span class="op" id="4144292">;</span>&nbsp;<span class="ident" id="4144294">ok</span>&nbsp;<span class="op" id="4144297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144302">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4144311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4144314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4144317">return</span>&nbsp;<span class="num" id="4144324">0</span><span class="op" id="4144325">,</span>&nbsp;<span class="op" id="4144327">&amp;</span><span class="ident" id="4144328">AddrError</span><span class="op" id="4144337">{</span><span class="string" id="4144338">&#34;unknown&nbsp;port&#34;</span><span class="op" id="4144352">,</span>&nbsp;<span class="ident" id="4144354">network</span>&nbsp;<span class="op" id="4144362">+</span>&nbsp;<span class="string" id="4144364">&#34;/&#34;</span>&nbsp;<span class="op" id="4144368">+</span>&nbsp;<span class="ident" id="4144370">service</span><span class="op" id="4144377">}</span><br>
<span class="lineno"></span><span class="op" id="4144379">}</span>
</div>
</body>
</html>
