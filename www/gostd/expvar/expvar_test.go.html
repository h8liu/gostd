<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6891357">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6891412">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6891466">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6891517">package</span>&nbsp;<span class="ident" id="6891525">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6891533">import</span>&nbsp;<span class="op" id="6891540">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891543">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891552">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891569">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891590">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891601">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6891611">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6891614">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="6891659">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="6891686">func</span>&nbsp;<span class="ident" id="6891691">RemoveAll</span><span class="op" id="6891700">(</span><span class="op" id="6891701">)</span>&nbsp;<span class="op" id="6891703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891706"><a href="/gostd/expvar/expvar.go.html#4068599">mutex</a></span><span class="op" id="6891711">.</span><span class="ident" id="6891712"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6891716">(</span><span class="op" id="6891717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891720">defer</span>&nbsp;<span class="ident" id="6891726"><a href="/gostd/expvar/expvar.go.html#4068599">mutex</a></span><span class="op" id="6891731">.</span><span class="ident" id="6891732"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6891738">(</span><span class="op" id="6891739">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891742"><a href="/gostd/expvar/expvar.go.html#4068621">vars</a></span>&nbsp;<span class="op" id="6891747">=</span>&nbsp;<span class="builtinfunc" id="6891749">make</span><span class="op" id="6891753">(</span><span class="keyword" id="6891754">map</span><span class="op" id="6891757">[</span><span class="builtintype" id="6891758">string</span><span class="op" id="6891764">]</span><span class="ident" id="6891765"><a href="/gostd/expvar/expvar.go.html#4064849">Var</a></span><span class="op" id="6891768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891771"><a href="/gostd/expvar/expvar.go.html#4068653">varKeys</a></span>&nbsp;<span class="op" id="6891779">=</span>&nbsp;<span class="builtintype" id="6891781">nil</span><br>
<span class="lineno"></span><span class="op" id="6891785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6891788">func</span>&nbsp;<span class="ident" id="6891793">TestInt</span><span class="op" id="6891800">(</span><span class="ident" id="6891801">t</span>&nbsp;<span class="op" id="6891803">*</span><span class="ident" id="6891804"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6891811">.</span><span class="ident" id="6891812"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6891813">)</span>&nbsp;<span class="op" id="6891815">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891818"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6891827">(</span><span class="op" id="6891828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891831">reqs</span>&nbsp;<span class="op" id="6891836">:=</span>&nbsp;<span class="ident" id="6891839"><a href="/gostd/expvar/expvar.go.html#4069317">NewInt</a></span><span class="op" id="6891845">(</span><span class="string" id="6891846">&#34;requests&#34;</span><span class="op" id="6891856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891859">if</span>&nbsp;<span class="ident" id="6891862"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6891866">.</span><span class="ident" id="6891867"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span>&nbsp;<span class="op" id="6891869">!=</span>&nbsp;<span class="num" id="6891872">0</span>&nbsp;<span class="op" id="6891874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891878"><a href="/gostd/expvar/expvar_test.go.html#6891801">t</a></span><span class="op" id="6891879">.</span><span class="ident" id="6891880"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6891886">(</span><span class="string" id="6891887">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6891908">,</span>&nbsp;<span class="ident" id="6891910"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6891914">.</span><span class="ident" id="6891915"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span><span class="op" id="6891916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891919">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891922">if</span>&nbsp;<span class="ident" id="6891925"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span>&nbsp;<span class="op" id="6891930">!=</span>&nbsp;<span class="ident" id="6891933"><a href="/gostd/expvar/expvar.go.html#4069166">Get</a></span><span class="op" id="6891936">(</span><span class="string" id="6891937">&#34;requests&#34;</span><span class="op" id="6891947">)</span><span class="op" id="6891948">.</span><span class="op" id="6891949">(</span><span class="op" id="6891950">*</span><span class="ident" id="6891951"><a href="/gostd/expvar/expvar.go.html#4064960">Int</a></span><span class="op" id="6891954">)</span>&nbsp;<span class="op" id="6891956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891960"><a href="/gostd/expvar/expvar_test.go.html#6891801">t</a></span><span class="op" id="6891961">.</span><span class="ident" id="6891962"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6891968">(</span><span class="string" id="6891969">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6891984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891991"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6891995">.</span><span class="ident" id="6891996"><a href="/gostd/expvar/expvar.go.html#4065123">Add</a></span><span class="op" id="6891999">(</span><span class="num" id="6892000">1</span><span class="op" id="6892001">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892004"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892008">.</span><span class="ident" id="6892009"><a href="/gostd/expvar/expvar.go.html#4065123">Add</a></span><span class="op" id="6892012">(</span><span class="num" id="6892013">3</span><span class="op" id="6892014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892017">if</span>&nbsp;<span class="ident" id="6892020"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892024">.</span><span class="ident" id="6892025"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span>&nbsp;<span class="op" id="6892027">!=</span>&nbsp;<span class="num" id="6892030">4</span>&nbsp;<span class="op" id="6892032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892036"><a href="/gostd/expvar/expvar_test.go.html#6891801">t</a></span><span class="op" id="6892037">.</span><span class="ident" id="6892038"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892044">(</span><span class="string" id="6892045">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6892066">,</span>&nbsp;<span class="ident" id="6892068"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892072">.</span><span class="ident" id="6892073"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span><span class="op" id="6892074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892081">if</span>&nbsp;<span class="ident" id="6892084">s</span>&nbsp;<span class="op" id="6892086">:=</span>&nbsp;<span class="ident" id="6892089"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892093">.</span><span class="ident" id="6892094"><a href="/gostd/expvar/expvar.go.html#4065017">String</a></span><span class="op" id="6892100">(</span><span class="op" id="6892101">)</span><span class="op" id="6892102">;</span>&nbsp;<span class="ident" id="6892104"><a href="/gostd/expvar/expvar_test.go.html#6892084">s</a></span>&nbsp;<span class="op" id="6892106">!=</span>&nbsp;<span class="string" id="6892109">&#34;4&#34;</span>&nbsp;<span class="op" id="6892113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892117"><a href="/gostd/expvar/expvar_test.go.html#6891801">t</a></span><span class="op" id="6892118">.</span><span class="ident" id="6892119"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892125">(</span><span class="string" id="6892126">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="6892158">,</span>&nbsp;<span class="ident" id="6892160"><a href="/gostd/expvar/expvar_test.go.html#6892084">s</a></span><span class="op" id="6892161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892168"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892172">.</span><span class="ident" id="6892173"><a href="/gostd/expvar/expvar.go.html#4065207">Set</a></span><span class="op" id="6892176">(</span><span class="op" id="6892177">-</span><span class="num" id="6892178">2</span><span class="op" id="6892179">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892182">if</span>&nbsp;<span class="ident" id="6892185"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892189">.</span><span class="ident" id="6892190"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span>&nbsp;<span class="op" id="6892192">!=</span>&nbsp;<span class="op" id="6892195">-</span><span class="num" id="6892196">2</span>&nbsp;<span class="op" id="6892198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892202"><a href="/gostd/expvar/expvar_test.go.html#6891801">t</a></span><span class="op" id="6892203">.</span><span class="ident" id="6892204"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892210">(</span><span class="string" id="6892211">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="6892233">,</span>&nbsp;<span class="ident" id="6892235"><a href="/gostd/expvar/expvar_test.go.html#6891831">reqs</a></span><span class="op" id="6892239">.</span><span class="ident" id="6892240"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span><span class="op" id="6892241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892244">}</span><br>
<span class="lineno"></span><span class="op" id="6892246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6892249">func</span>&nbsp;<span class="ident" id="6892254">TestFloat</span><span class="op" id="6892263">(</span><span class="ident" id="6892264">t</span>&nbsp;<span class="op" id="6892266">*</span><span class="ident" id="6892267"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6892274">.</span><span class="ident" id="6892275"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6892276">)</span>&nbsp;<span class="op" id="6892278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892281"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6892290">(</span><span class="op" id="6892291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892294">reqs</span>&nbsp;<span class="op" id="6892299">:=</span>&nbsp;<span class="ident" id="6892302"><a href="/gostd/expvar/expvar.go.html#4069395">NewFloat</a></span><span class="op" id="6892310">(</span><span class="string" id="6892311">&#34;requests-float&#34;</span><span class="op" id="6892327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892330">if</span>&nbsp;<span class="ident" id="6892333"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892337">.</span><span class="ident" id="6892338"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span>&nbsp;<span class="op" id="6892340">!=</span>&nbsp;<span class="num" id="6892343">0.0</span>&nbsp;<span class="op" id="6892347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892351"><a href="/gostd/expvar/expvar_test.go.html#6892264">t</a></span><span class="op" id="6892352">.</span><span class="ident" id="6892353"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892359">(</span><span class="string" id="6892360">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6892381">,</span>&nbsp;<span class="ident" id="6892383"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892387">.</span><span class="ident" id="6892388"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span><span class="op" id="6892389">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892395">if</span>&nbsp;<span class="ident" id="6892398"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span>&nbsp;<span class="op" id="6892403">!=</span>&nbsp;<span class="ident" id="6892406"><a href="/gostd/expvar/expvar.go.html#4069166">Get</a></span><span class="op" id="6892409">(</span><span class="string" id="6892410">&#34;requests-float&#34;</span><span class="op" id="6892426">)</span><span class="op" id="6892427">.</span><span class="op" id="6892428">(</span><span class="op" id="6892429">*</span><span class="ident" id="6892430"><a href="/gostd/expvar/expvar.go.html#4065351">Float</a></span><span class="op" id="6892435">)</span>&nbsp;<span class="op" id="6892437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892441"><a href="/gostd/expvar/expvar_test.go.html#6892264">t</a></span><span class="op" id="6892442">.</span><span class="ident" id="6892443"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892449">(</span><span class="string" id="6892450">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6892465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892472"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892476">.</span><span class="ident" id="6892477"><a href="/gostd/expvar/expvar.go.html#4065557">Add</a></span><span class="op" id="6892480">(</span><span class="num" id="6892481">1.5</span><span class="op" id="6892484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892487"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892491">.</span><span class="ident" id="6892492"><a href="/gostd/expvar/expvar.go.html#4065557">Add</a></span><span class="op" id="6892495">(</span><span class="num" id="6892496">1.25</span><span class="op" id="6892500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892503">if</span>&nbsp;<span class="ident" id="6892506"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892510">.</span><span class="ident" id="6892511"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span>&nbsp;<span class="op" id="6892513">!=</span>&nbsp;<span class="num" id="6892516">2.75</span>&nbsp;<span class="op" id="6892521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892525"><a href="/gostd/expvar/expvar_test.go.html#6892264">t</a></span><span class="op" id="6892526">.</span><span class="ident" id="6892527"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892533">(</span><span class="string" id="6892534">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="6892558">,</span>&nbsp;<span class="ident" id="6892560"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892564">.</span><span class="ident" id="6892565"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span><span class="op" id="6892566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892569">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892573">if</span>&nbsp;<span class="ident" id="6892576">s</span>&nbsp;<span class="op" id="6892578">:=</span>&nbsp;<span class="ident" id="6892581"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892585">.</span><span class="ident" id="6892586"><a href="/gostd/expvar/expvar.go.html#4065414">String</a></span><span class="op" id="6892592">(</span><span class="op" id="6892593">)</span><span class="op" id="6892594">;</span>&nbsp;<span class="ident" id="6892596"><a href="/gostd/expvar/expvar_test.go.html#6892576">s</a></span>&nbsp;<span class="op" id="6892598">!=</span>&nbsp;<span class="string" id="6892601">&#34;2.75&#34;</span>&nbsp;<span class="op" id="6892608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892612"><a href="/gostd/expvar/expvar_test.go.html#6892264">t</a></span><span class="op" id="6892613">.</span><span class="ident" id="6892614"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892620">(</span><span class="string" id="6892621">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="6892656">,</span>&nbsp;<span class="ident" id="6892658"><a href="/gostd/expvar/expvar_test.go.html#6892576">s</a></span><span class="op" id="6892659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892666"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892670">.</span><span class="ident" id="6892671"><a href="/gostd/expvar/expvar.go.html#4065557">Add</a></span><span class="op" id="6892674">(</span><span class="op" id="6892675">-</span><span class="num" id="6892676">2</span><span class="op" id="6892677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892680">if</span>&nbsp;<span class="ident" id="6892683"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892687">.</span><span class="ident" id="6892688"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span>&nbsp;<span class="op" id="6892690">!=</span>&nbsp;<span class="num" id="6892693">0.75</span>&nbsp;<span class="op" id="6892698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892702"><a href="/gostd/expvar/expvar_test.go.html#6892264">t</a></span><span class="op" id="6892703">.</span><span class="ident" id="6892704"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892710">(</span><span class="string" id="6892711">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="6892735">,</span>&nbsp;<span class="ident" id="6892737"><a href="/gostd/expvar/expvar_test.go.html#6892294">reqs</a></span><span class="op" id="6892741">.</span><span class="ident" id="6892742"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span><span class="op" id="6892743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892746">}</span><br>
<span class="lineno"></span><span class="op" id="6892748">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="6892751">func</span>&nbsp;<span class="ident" id="6892756">TestString</span><span class="op" id="6892766">(</span><span class="ident" id="6892767">t</span>&nbsp;<span class="op" id="6892769">*</span><span class="ident" id="6892770"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6892777">.</span><span class="ident" id="6892778"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6892779">)</span>&nbsp;<span class="op" id="6892781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892784"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6892793">(</span><span class="op" id="6892794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892797">name</span>&nbsp;<span class="op" id="6892802">:=</span>&nbsp;<span class="ident" id="6892805"><a href="/gostd/expvar/expvar.go.html#4069564">NewString</a></span><span class="op" id="6892814">(</span><span class="string" id="6892815">&#34;my-name&#34;</span><span class="op" id="6892824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892827">if</span>&nbsp;<span class="ident" id="6892830"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6892834">.</span><span class="ident" id="6892835"><a href="/gostd/expvar/expvar.go.html#4068157">s</a></span>&nbsp;<span class="op" id="6892837">!=</span>&nbsp;<span class="string" id="6892840">&#34;&#34;</span>&nbsp;<span class="op" id="6892843">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892847"><a href="/gostd/expvar/expvar_test.go.html#6892767">t</a></span><span class="op" id="6892848">.</span><span class="ident" id="6892849"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892855">(</span><span class="string" id="6892856">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="6892880">,</span>&nbsp;<span class="ident" id="6892882"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6892886">.</span><span class="ident" id="6892887"><a href="/gostd/expvar/expvar.go.html#4068157">s</a></span><span class="op" id="6892888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892895"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6892899">.</span><span class="ident" id="6892900"><a href="/gostd/expvar/expvar.go.html#4068288">Set</a></span><span class="op" id="6892903">(</span><span class="string" id="6892904">&#34;Mike&#34;</span><span class="op" id="6892910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892913">if</span>&nbsp;<span class="ident" id="6892916"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6892920">.</span><span class="ident" id="6892921"><a href="/gostd/expvar/expvar.go.html#4068157">s</a></span>&nbsp;<span class="op" id="6892923">!=</span>&nbsp;<span class="string" id="6892926">&#34;Mike&#34;</span>&nbsp;<span class="op" id="6892933">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892937"><a href="/gostd/expvar/expvar_test.go.html#6892767">t</a></span><span class="op" id="6892938">.</span><span class="ident" id="6892939"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6892945">(</span><span class="string" id="6892946">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="6892974">,</span>&nbsp;<span class="ident" id="6892976"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6892980">.</span><span class="ident" id="6892981"><a href="/gostd/expvar/expvar.go.html#4068157">s</a></span><span class="op" id="6892982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892989">if</span>&nbsp;<span class="ident" id="6892992">s</span>&nbsp;<span class="op" id="6892994">:=</span>&nbsp;<span class="ident" id="6892997"><a href="/gostd/expvar/expvar_test.go.html#6892797">name</a></span><span class="op" id="6893001">.</span><span class="ident" id="6893002"><a href="/gostd/expvar/expvar.go.html#4068187">String</a></span><span class="op" id="6893008">(</span><span class="op" id="6893009">)</span><span class="op" id="6893010">;</span>&nbsp;<span class="ident" id="6893012"><a href="/gostd/expvar/expvar_test.go.html#6892992">s</a></span>&nbsp;<span class="op" id="6893014">!=</span>&nbsp;<span class="string" id="6893017">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="6893028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893032"><a href="/gostd/expvar/expvar_test.go.html#6892767">t</a></span><span class="op" id="6893033">.</span><span class="ident" id="6893034"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6893040">(</span><span class="string" id="6893041">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="6893080">,</span>&nbsp;<span class="ident" id="6893082"><a href="/gostd/expvar/expvar_test.go.html#6892992">s</a></span><span class="op" id="6893083">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893086">}</span><br>
<span class="lineno"></span><span class="op" id="6893088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893091">func</span>&nbsp;<span class="ident" id="6893096">TestMapCounter</span><span class="op" id="6893110">(</span><span class="ident" id="6893111">t</span>&nbsp;<span class="op" id="6893113">*</span><span class="ident" id="6893114"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6893121">.</span><span class="ident" id="6893122"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6893123">)</span>&nbsp;<span class="op" id="6893125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893128"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6893137">(</span><span class="op" id="6893138">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893141">colors</span>&nbsp;<span class="op" id="6893148">:=</span>&nbsp;<span class="ident" id="6893151"><a href="/gostd/expvar/expvar.go.html#4069479">NewMap</a></span><span class="op" id="6893157">(</span><span class="string" id="6893158">&#34;bike-shed-colors&#34;</span><span class="op" id="6893176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893180"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893186">.</span><span class="ident" id="6893187"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6893190">(</span><span class="string" id="6893191">&#34;red&#34;</span><span class="op" id="6893196">,</span>&nbsp;<span class="num" id="6893198">1</span><span class="op" id="6893199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893202"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893208">.</span><span class="ident" id="6893209"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6893212">(</span><span class="string" id="6893213">&#34;red&#34;</span><span class="op" id="6893218">,</span>&nbsp;<span class="num" id="6893220">2</span><span class="op" id="6893221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893224"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893230">.</span><span class="ident" id="6893231"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6893234">(</span><span class="string" id="6893235">&#34;blue&#34;</span><span class="op" id="6893241">,</span>&nbsp;<span class="num" id="6893243">4</span><span class="op" id="6893244">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893247"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893253">.</span><span class="ident" id="6893254"><a href="/gostd/expvar/expvar.go.html#4067295">AddFloat</a></span><span class="op" id="6893262">(</span><span class="string" id="6893263">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6893279">,</span>&nbsp;<span class="num" id="6893281">4.125</span><span class="op" id="6893286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893289">if</span>&nbsp;<span class="ident" id="6893292">x</span>&nbsp;<span class="op" id="6893294">:=</span>&nbsp;<span class="ident" id="6893297"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893303">.</span><span class="ident" id="6893304"><a href="/gostd/expvar/expvar.go.html#4065851">m</a></span><span class="op" id="6893305">[</span><span class="string" id="6893306">&#34;red&#34;</span><span class="op" id="6893311">]</span><span class="op" id="6893312">.</span><span class="op" id="6893313">(</span><span class="op" id="6893314">*</span><span class="ident" id="6893315"><a href="/gostd/expvar/expvar.go.html#4064960">Int</a></span><span class="op" id="6893318">)</span><span class="op" id="6893319">.</span><span class="ident" id="6893320"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span><span class="op" id="6893321">;</span>&nbsp;<span class="ident" id="6893323"><a href="/gostd/expvar/expvar_test.go.html#6893292">x</a></span>&nbsp;<span class="op" id="6893325">!=</span>&nbsp;<span class="num" id="6893328">3</span>&nbsp;<span class="op" id="6893330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893334"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6893335">.</span><span class="ident" id="6893336"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6893342">(</span><span class="string" id="6893343">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6893375">,</span>&nbsp;<span class="ident" id="6893377"><a href="/gostd/expvar/expvar_test.go.html#6893292">x</a></span><span class="op" id="6893378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893384">if</span>&nbsp;<span class="ident" id="6893387">x</span>&nbsp;<span class="op" id="6893389">:=</span>&nbsp;<span class="ident" id="6893392"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893398">.</span><span class="ident" id="6893399"><a href="/gostd/expvar/expvar.go.html#4065851">m</a></span><span class="op" id="6893400">[</span><span class="string" id="6893401">&#34;blue&#34;</span><span class="op" id="6893407">]</span><span class="op" id="6893408">.</span><span class="op" id="6893409">(</span><span class="op" id="6893410">*</span><span class="ident" id="6893411"><a href="/gostd/expvar/expvar.go.html#4064960">Int</a></span><span class="op" id="6893414">)</span><span class="op" id="6893415">.</span><span class="ident" id="6893416"><a href="/gostd/expvar/expvar.go.html#4064991">i</a></span><span class="op" id="6893417">;</span>&nbsp;<span class="ident" id="6893419"><a href="/gostd/expvar/expvar_test.go.html#6893387">x</a></span>&nbsp;<span class="op" id="6893421">!=</span>&nbsp;<span class="num" id="6893424">4</span>&nbsp;<span class="op" id="6893426">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893430"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6893431">.</span><span class="ident" id="6893432"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6893438">(</span><span class="string" id="6893439">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6893472">,</span>&nbsp;<span class="ident" id="6893474"><a href="/gostd/expvar/expvar_test.go.html#6893387">x</a></span><span class="op" id="6893475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893481">if</span>&nbsp;<span class="ident" id="6893484">x</span>&nbsp;<span class="op" id="6893486">:=</span>&nbsp;<span class="ident" id="6893489"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893495">.</span><span class="ident" id="6893496"><a href="/gostd/expvar/expvar.go.html#4065851">m</a></span><span class="op" id="6893497">[</span><span class="string" id="6893498">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6893514">]</span><span class="op" id="6893515">.</span><span class="op" id="6893516">(</span><span class="op" id="6893517">*</span><span class="ident" id="6893518"><a href="/gostd/expvar/expvar.go.html#4065351">Float</a></span><span class="op" id="6893523">)</span><span class="op" id="6893524">.</span><span class="ident" id="6893525"><a href="/gostd/expvar/expvar.go.html#4065384">f</a></span><span class="op" id="6893526">;</span>&nbsp;<span class="ident" id="6893528"><a href="/gostd/expvar/expvar_test.go.html#6893484">x</a></span>&nbsp;<span class="op" id="6893530">!=</span>&nbsp;<span class="num" id="6893533">4.125</span>&nbsp;<span class="op" id="6893539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893543"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6893544">.</span><span class="ident" id="6893545"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6893551">(</span><span class="string" id="6893552">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="6893597">,</span>&nbsp;<span class="ident" id="6893599"><a href="/gostd/expvar/expvar_test.go.html#6893484">x</a></span><span class="op" id="6893600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893603">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6893607">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6893660">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893709">s</span>&nbsp;<span class="op" id="6893711">:=</span>&nbsp;<span class="ident" id="6893714"><a href="/gostd/expvar/expvar_test.go.html#6893141">colors</a></span><span class="op" id="6893720">.</span><span class="ident" id="6893721"><a href="/gostd/expvar/expvar.go.html#4066012">String</a></span><span class="op" id="6893727">(</span><span class="op" id="6893728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893731">var</span>&nbsp;<span class="ident" id="6893735">j</span>&nbsp;<span class="keyword" id="6893737">interface</span><span class="op" id="6893746">{</span><span class="op" id="6893747">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893750">err</span>&nbsp;<span class="op" id="6893754">:=</span>&nbsp;<span class="ident" id="6893757"><a href="/gostd/expvar/expvar_test.go.html#6891552">json</a></span><span class="op" id="6893761">.</span><span class="ident" id="6893762"><a href="/gostd/encoding/json/decode.go.html#3965482">Unmarshal</a></span><span class="op" id="6893771">(</span><span class="op" id="6893772">[</span><span class="op" id="6893773">]</span><span class="builtintype" id="6893774">byte</span><span class="op" id="6893778">(</span><span class="ident" id="6893779"><a href="/gostd/expvar/expvar_test.go.html#6893709">s</a></span><span class="op" id="6893780">)</span><span class="op" id="6893781">,</span>&nbsp;<span class="op" id="6893783">&amp;</span><span class="ident" id="6893784"><a href="/gostd/expvar/expvar_test.go.html#6893735">j</a></span><span class="op" id="6893785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893788">if</span>&nbsp;<span class="ident" id="6893791"><a href="/gostd/expvar/expvar_test.go.html#6893750">err</a></span>&nbsp;<span class="op" id="6893795">!=</span>&nbsp;<span class="builtintype" id="6893798">nil</span>&nbsp;<span class="op" id="6893802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893806"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6893807">.</span><span class="ident" id="6893808"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6893814">(</span><span class="string" id="6893815">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="6893853">,</span>&nbsp;<span class="ident" id="6893855"><a href="/gostd/expvar/expvar_test.go.html#6893750">err</a></span><span class="op" id="6893858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893864">m</span><span class="op" id="6893865">,</span>&nbsp;<span class="ident" id="6893867">ok</span>&nbsp;<span class="op" id="6893870">:=</span>&nbsp;<span class="ident" id="6893873"><a href="/gostd/expvar/expvar_test.go.html#6893735">j</a></span><span class="op" id="6893874">.</span><span class="op" id="6893875">(</span><span class="keyword" id="6893876">map</span><span class="op" id="6893879">[</span><span class="builtintype" id="6893880">string</span><span class="op" id="6893886">]</span><span class="keyword" id="6893887">interface</span><span class="op" id="6893896">{</span><span class="op" id="6893897">}</span><span class="op" id="6893898">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893901">if</span>&nbsp;<span class="op" id="6893904">!</span><span class="ident" id="6893905"><a href="/gostd/expvar/expvar_test.go.html#6893867">ok</a></span>&nbsp;<span class="op" id="6893908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893912"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6893913">.</span><span class="ident" id="6893914"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6893919">(</span><span class="string" id="6893920">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="6893959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893965">red</span>&nbsp;<span class="op" id="6893969">:=</span>&nbsp;<span class="ident" id="6893972"><a href="/gostd/expvar/expvar_test.go.html#6893864">m</a></span><span class="op" id="6893973">[</span><span class="string" id="6893974">&#34;red&#34;</span><span class="op" id="6893979">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893982">x</span><span class="op" id="6893983">,</span>&nbsp;<span class="ident" id="6893985"><a href="/gostd/expvar/expvar_test.go.html#6893867">ok</a></span>&nbsp;<span class="op" id="6893988">:=</span>&nbsp;<span class="ident" id="6893991"><a href="/gostd/expvar/expvar_test.go.html#6893965">red</a></span><span class="op" id="6893994">.</span><span class="op" id="6893995">(</span><span class="builtintype" id="6893996">float64</span><span class="op" id="6894003">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894006">if</span>&nbsp;<span class="op" id="6894009">!</span><span class="ident" id="6894010"><a href="/gostd/expvar/expvar_test.go.html#6893867">ok</a></span>&nbsp;<span class="op" id="6894013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894017"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6894018">.</span><span class="ident" id="6894019"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6894024">(</span><span class="string" id="6894025">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="6894054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894060">if</span>&nbsp;<span class="ident" id="6894063"><a href="/gostd/expvar/expvar_test.go.html#6893982">x</a></span>&nbsp;<span class="op" id="6894065">!=</span>&nbsp;<span class="num" id="6894068">3</span>&nbsp;<span class="op" id="6894070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894074"><a href="/gostd/expvar/expvar_test.go.html#6893111">t</a></span><span class="op" id="6894075">.</span><span class="ident" id="6894076"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6894082">(</span><span class="string" id="6894083">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6894101">,</span>&nbsp;<span class="ident" id="6894103"><a href="/gostd/expvar/expvar_test.go.html#6893982">x</a></span><span class="op" id="6894104">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894107">}</span><br>
<span class="lineno"></span><span class="op" id="6894109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894112">func</span>&nbsp;<span class="ident" id="6894117">TestFunc</span><span class="op" id="6894125">(</span><span class="ident" id="6894126">t</span>&nbsp;<span class="op" id="6894128">*</span><span class="ident" id="6894129"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6894136">.</span><span class="ident" id="6894137"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6894138">)</span>&nbsp;<span class="op" id="6894140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894143"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6894152">(</span><span class="op" id="6894153">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894156">var</span>&nbsp;<span class="ident" id="6894160">x</span>&nbsp;<span class="keyword" id="6894162">interface</span><span class="op" id="6894171">{</span><span class="op" id="6894172">}</span>&nbsp;<span class="op" id="6894174">=</span>&nbsp;<span class="op" id="6894176">[</span><span class="op" id="6894177">]</span><span class="builtintype" id="6894178">string</span><span class="op" id="6894184">{</span><span class="string" id="6894185">&#34;a&#34;</span><span class="op" id="6894188">,</span>&nbsp;<span class="string" id="6894190">&#34;b&#34;</span><span class="op" id="6894193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894196">f</span>&nbsp;<span class="op" id="6894198">:=</span>&nbsp;<span class="ident" id="6894201"><a href="/gostd/expvar/expvar.go.html#4068459">Func</a></span><span class="op" id="6894205">(</span><span class="keyword" id="6894206">func</span><span class="op" id="6894210">(</span><span class="op" id="6894211">)</span>&nbsp;<span class="keyword" id="6894213">interface</span><span class="op" id="6894222">{</span><span class="op" id="6894223">}</span>&nbsp;<span class="op" id="6894225">{</span>&nbsp;<span class="keyword" id="6894227">return</span>&nbsp;<span class="ident" id="6894234"><a href="/gostd/expvar/expvar_test.go.html#6894160">x</a></span>&nbsp;<span class="op" id="6894236">}</span><span class="op" id="6894237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894240">if</span>&nbsp;<span class="ident" id="6894243">s</span><span class="op" id="6894244">,</span>&nbsp;<span class="ident" id="6894246">exp</span>&nbsp;<span class="op" id="6894250">:=</span>&nbsp;<span class="ident" id="6894253"><a href="/gostd/expvar/expvar_test.go.html#6894196">f</a></span><span class="op" id="6894254">.</span><span class="ident" id="6894255"><a href="/gostd/expvar/expvar.go.html#4068498">String</a></span><span class="op" id="6894261">(</span><span class="op" id="6894262">)</span><span class="op" id="6894263">,</span>&nbsp;<span class="string" id="6894265">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="6894276">;</span>&nbsp;<span class="ident" id="6894278"><a href="/gostd/expvar/expvar_test.go.html#6894243">s</a></span>&nbsp;<span class="op" id="6894280">!=</span>&nbsp;<span class="ident" id="6894283"><a href="/gostd/expvar/expvar_test.go.html#6894246">exp</a></span>&nbsp;<span class="op" id="6894287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894291"><a href="/gostd/expvar/expvar_test.go.html#6894126">t</a></span><span class="op" id="6894292">.</span><span class="ident" id="6894293"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6894299">(</span><span class="string" id="6894300">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6894326">,</span>&nbsp;<span class="ident" id="6894328"><a href="/gostd/expvar/expvar_test.go.html#6894243">s</a></span><span class="op" id="6894329">,</span>&nbsp;<span class="ident" id="6894331"><a href="/gostd/expvar/expvar_test.go.html#6894246">exp</a></span><span class="op" id="6894334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894337">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894341"><a href="/gostd/expvar/expvar_test.go.html#6894160">x</a></span>&nbsp;<span class="op" id="6894343">=</span>&nbsp;<span class="num" id="6894345">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894349">if</span>&nbsp;<span class="ident" id="6894352">s</span><span class="op" id="6894353">,</span>&nbsp;<span class="ident" id="6894355">exp</span>&nbsp;<span class="op" id="6894359">:=</span>&nbsp;<span class="ident" id="6894362"><a href="/gostd/expvar/expvar_test.go.html#6894196">f</a></span><span class="op" id="6894363">.</span><span class="ident" id="6894364"><a href="/gostd/expvar/expvar.go.html#4068498">String</a></span><span class="op" id="6894370">(</span><span class="op" id="6894371">)</span><span class="op" id="6894372">,</span>&nbsp;<span class="string" id="6894374">`17`</span><span class="op" id="6894378">;</span>&nbsp;<span class="ident" id="6894380"><a href="/gostd/expvar/expvar_test.go.html#6894352">s</a></span>&nbsp;<span class="op" id="6894382">!=</span>&nbsp;<span class="ident" id="6894385"><a href="/gostd/expvar/expvar_test.go.html#6894355">exp</a></span>&nbsp;<span class="op" id="6894389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894393"><a href="/gostd/expvar/expvar_test.go.html#6894126">t</a></span><span class="op" id="6894394">.</span><span class="ident" id="6894395"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6894401">(</span><span class="string" id="6894402">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6894428">,</span>&nbsp;<span class="ident" id="6894430"><a href="/gostd/expvar/expvar_test.go.html#6894352">s</a></span><span class="op" id="6894431">,</span>&nbsp;<span class="ident" id="6894433"><a href="/gostd/expvar/expvar_test.go.html#6894355">exp</a></span><span class="op" id="6894436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894439">}</span><br>
<span class="lineno">145</span><span class="op" id="6894441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894444">func</span>&nbsp;<span class="ident" id="6894449">TestHandler</span><span class="op" id="6894460">(</span><span class="ident" id="6894461">t</span>&nbsp;<span class="op" id="6894463">*</span><span class="ident" id="6894464"><a href="/gostd/expvar/expvar_test.go.html#6891601">testing</a></span><span class="op" id="6894471">.</span><span class="ident" id="6894472"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6894473">)</span>&nbsp;<span class="op" id="6894475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894478"><a href="/gostd/expvar/expvar_test.go.html#6891691">RemoveAll</a></span><span class="op" id="6894487">(</span><span class="op" id="6894488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894491">m</span>&nbsp;<span class="op" id="6894493">:=</span>&nbsp;<span class="ident" id="6894496"><a href="/gostd/expvar/expvar.go.html#4069479">NewMap</a></span><span class="op" id="6894502">(</span><span class="string" id="6894503">&#34;map1&#34;</span><span class="op" id="6894509">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894512"><a href="/gostd/expvar/expvar_test.go.html#6894491">m</a></span><span class="op" id="6894513">.</span><span class="ident" id="6894514"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6894517">(</span><span class="string" id="6894518">&#34;a&#34;</span><span class="op" id="6894521">,</span>&nbsp;<span class="num" id="6894523">1</span><span class="op" id="6894524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894527"><a href="/gostd/expvar/expvar_test.go.html#6894491">m</a></span><span class="op" id="6894528">.</span><span class="ident" id="6894529"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6894532">(</span><span class="string" id="6894533">&#34;z&#34;</span><span class="op" id="6894536">,</span>&nbsp;<span class="num" id="6894538">2</span><span class="op" id="6894539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894542">m2</span>&nbsp;<span class="op" id="6894545">:=</span>&nbsp;<span class="ident" id="6894548"><a href="/gostd/expvar/expvar.go.html#4069479">NewMap</a></span><span class="op" id="6894554">(</span><span class="string" id="6894555">&#34;map2&#34;</span><span class="op" id="6894561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894564">for</span>&nbsp;<span class="ident" id="6894568">i</span>&nbsp;<span class="op" id="6894570">:=</span>&nbsp;<span class="num" id="6894573">0</span><span class="op" id="6894574">;</span>&nbsp;<span class="ident" id="6894576"><a href="/gostd/expvar/expvar_test.go.html#6894568">i</a></span>&nbsp;<span class="op" id="6894578">&lt;</span>&nbsp;<span class="num" id="6894580">9</span><span class="op" id="6894581">;</span>&nbsp;<span class="ident" id="6894583"><a href="/gostd/expvar/expvar_test.go.html#6894568">i</a></span><span class="op" id="6894584">++</span>&nbsp;<span class="op" id="6894587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894591"><a href="/gostd/expvar/expvar_test.go.html#6894542">m2</a></span><span class="op" id="6894593">.</span><span class="ident" id="6894594"><a href="/gostd/expvar/expvar.go.html#4066870">Add</a></span><span class="op" id="6894597">(</span><span class="ident" id="6894598"><a href="/gostd/expvar/expvar_test.go.html#6891590">strconv</a></span><span class="op" id="6894605">.</span><span class="ident" id="6894606"><a href="/gostd/strconv/itoa.go.html#2407288">Itoa</a></span><span class="op" id="6894610">(</span><span class="ident" id="6894611"><a href="/gostd/expvar/expvar_test.go.html#6894568">i</a></span><span class="op" id="6894612">)</span><span class="op" id="6894613">,</span>&nbsp;<span class="builtintype" id="6894615">int64</span><span class="op" id="6894620">(</span><span class="ident" id="6894621"><a href="/gostd/expvar/expvar_test.go.html#6894568">i</a></span><span class="op" id="6894622">)</span><span class="op" id="6894623">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894629">rr</span>&nbsp;<span class="op" id="6894632">:=</span>&nbsp;<span class="ident" id="6894635"><a href="/gostd/expvar/expvar_test.go.html#6891569">httptest</a></span><span class="op" id="6894643">.</span><span class="ident" id="6894644"><a href="/gostd/net/http/httptest/recorder.go.html#6132549">NewRecorder</a></span><span class="op" id="6894655">(</span><span class="op" id="6894656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894659"><a href="/gostd/expvar/expvar_test.go.html#6894629">rr</a></span><span class="op" id="6894661">.</span><span class="ident" id="6894662"><a href="/gostd/net/http/httptest/recorder.go.html#6132368">Body</a></span>&nbsp;<span class="op" id="6894667">=</span>&nbsp;<span class="builtinfunc" id="6894669">new</span><span class="op" id="6894672">(</span><span class="ident" id="6894673"><a href="/gostd/expvar/expvar_test.go.html#6891543">bytes</a></span><span class="op" id="6894678">.</span><span class="ident" id="6894679"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="6894685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894688"><a href="/gostd/expvar/expvar.go.html#4069932">expvarHandler</a></span><span class="op" id="6894701">(</span><span class="ident" id="6894702"><a href="/gostd/expvar/expvar_test.go.html#6894629">rr</a></span><span class="op" id="6894704">,</span>&nbsp;<span class="builtintype" id="6894706">nil</span><span class="op" id="6894709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894712">want</span>&nbsp;<span class="op" id="6894717">:=</span>&nbsp;<span class="string" id="6894720">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894835">if</span>&nbsp;<span class="ident" id="6894838">got</span>&nbsp;<span class="op" id="6894842">:=</span>&nbsp;<span class="ident" id="6894845"><a href="/gostd/expvar/expvar_test.go.html#6894629">rr</a></span><span class="op" id="6894847">.</span><span class="ident" id="6894848"><a href="/gostd/net/http/httptest/recorder.go.html#6132368">Body</a></span><span class="op" id="6894852">.</span><span class="ident" id="6894853"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="6894859">(</span><span class="op" id="6894860">)</span><span class="op" id="6894861">;</span>&nbsp;<span class="ident" id="6894863"><a href="/gostd/expvar/expvar_test.go.html#6894838">got</a></span>&nbsp;<span class="op" id="6894867">!=</span>&nbsp;<span class="ident" id="6894870"><a href="/gostd/expvar/expvar_test.go.html#6894712">want</a></span>&nbsp;<span class="op" id="6894875">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894879"><a href="/gostd/expvar/expvar_test.go.html#6894461">t</a></span><span class="op" id="6894880">.</span><span class="ident" id="6894881"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6894887">(</span><span class="string" id="6894888">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="6894924">,</span>&nbsp;<span class="ident" id="6894926"><a href="/gostd/expvar/expvar_test.go.html#6894838">got</a></span><span class="op" id="6894929">,</span>&nbsp;<span class="ident" id="6894931"><a href="/gostd/expvar/expvar_test.go.html#6894712">want</a></span><span class="op" id="6894935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894938">}</span><br>
<span class="lineno"></span><span class="op" id="6894940">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
