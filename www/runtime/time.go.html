<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2149813">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2149868">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2149922">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2149973">//&nbsp;Time-related&nbsp;runtime&nbsp;and&nbsp;pieces&nbsp;of&nbsp;package&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2150026">package</span>&nbsp;<span class="ident" id="2150034">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2150043">import</span>&nbsp;<span class="string" id="2150050">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2150060">//&nbsp;Package&nbsp;time&nbsp;knows&nbsp;the&nbsp;layout&nbsp;of&nbsp;this&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="2150112">//&nbsp;If&nbsp;this&nbsp;struct&nbsp;changes,&nbsp;adjust&nbsp;../time/sleep.go:/runtimeTimer.</span><br>
<span class="lineno"></span><span class="comment" id="2150178">//&nbsp;For&nbsp;GOOS=nacl,&nbsp;package&nbsp;syscall&nbsp;knows&nbsp;the&nbsp;layout&nbsp;of&nbsp;this&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="2150248">//&nbsp;If&nbsp;this&nbsp;struct&nbsp;changes,&nbsp;adjust&nbsp;../syscall/net_nacl.go:/runtimeTimer.</span><br>
<span class="lineno">15</span><span class="keyword" id="2150320">type</span>&nbsp;<span class="ident" id="2150325">timer</span>&nbsp;<span class="keyword" id="2150331">struct</span>&nbsp;<span class="op" id="2150338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150341">i</span>&nbsp;<span class="builtintype" id="2150343">int</span>&nbsp;<span class="comment" id="2150347">//&nbsp;heap&nbsp;index</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2150363">//&nbsp;Timer&nbsp;wakes&nbsp;up&nbsp;at&nbsp;when,&nbsp;and&nbsp;then&nbsp;at&nbsp;when+period,&nbsp;...&nbsp;(period&nbsp;&gt;&nbsp;0&nbsp;only)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2150438">//&nbsp;each&nbsp;time&nbsp;calling&nbsp;f(now,&nbsp;arg)&nbsp;in&nbsp;the&nbsp;timer&nbsp;goroutine,&nbsp;so&nbsp;f&nbsp;must&nbsp;be</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2150509">//&nbsp;a&nbsp;well-behaved&nbsp;function&nbsp;and&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150552">when</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2150559">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150566">period</span>&nbsp;<span class="ident" id="2150573">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150580">f</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2150587">func</span><span class="op" id="2150591">(</span><span class="keyword" id="2150592">interface</span><span class="op" id="2150601">{</span><span class="op" id="2150602">}</span><span class="op" id="2150603">,</span>&nbsp;<span class="builtintype" id="2150605">uintptr</span><span class="op" id="2150612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150615">arg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2150622">interface</span><span class="op" id="2150631">{</span><span class="op" id="2150632">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150635">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2150642">uintptr</span><br>
<span class="lineno"></span><span class="op" id="2150650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2150653">var</span>&nbsp;<span class="ident" id="2150657">timers</span>&nbsp;<span class="keyword" id="2150664">struct</span>&nbsp;<span class="op" id="2150671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150674">lock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2150687"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179310">mutex</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150694">gp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2150707">*</span><span class="ident" id="2150708"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150711">created</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2150724">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150730">sleeping</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2150743">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150749">rescheduling</span>&nbsp;<span class="builtintype" id="2150762">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150768">waitnote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2150781"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179346">note</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2150787">t</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2150800">[</span><span class="op" id="2150801">]</span><span class="op" id="2150802">*</span><span class="ident" id="2150803"><a href="/runtime/time.go.html#2150325">timer</a></span><br>
<span class="lineno"></span><span class="op" id="2150809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2150812">//&nbsp;nacl&nbsp;fake&nbsp;time&nbsp;support&nbsp;-&nbsp;time&nbsp;in&nbsp;nanoseconds&nbsp;since&nbsp;1970</span><br>
<span class="lineno"></span><span class="keyword" id="2150871">var</span>&nbsp;<span class="ident" id="2150875">faketime</span>&nbsp;<span class="ident" id="2150884">int64</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="2150891">//&nbsp;Package&nbsp;time&nbsp;APIs.</span><br>
<span class="lineno"></span><span class="comment" id="2150913">//&nbsp;Godoc&nbsp;uses&nbsp;the&nbsp;comments&nbsp;in&nbsp;package&nbsp;time,&nbsp;not&nbsp;these.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2150969">//&nbsp;time.now&nbsp;is&nbsp;implemented&nbsp;in&nbsp;assembly.</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2151010">//&nbsp;Sleep&nbsp;puts&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;to&nbsp;sleep&nbsp;for&nbsp;at&nbsp;least&nbsp;ns&nbsp;nanoseconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2151084">func</span>&nbsp;<span class="ident" id="2151089">timeSleep</span><span class="op" id="2151098">(</span><span class="ident" id="2151099">ns</span>&nbsp;<span class="ident" id="2151102">int64</span><span class="op" id="2151107">)</span>&nbsp;<span class="op" id="2151109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2151112">if</span>&nbsp;<span class="ident" id="2151115"><a href="/runtime/time.go.html#2151099">ns</a></span>&nbsp;<span class="op" id="2151118">&lt;=</span>&nbsp;<span class="num" id="2151121">0</span>&nbsp;<span class="op" id="2151123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2151127">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2151135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151139">t</span>&nbsp;<span class="op" id="2151141">:=</span>&nbsp;<span class="builtinfunc" id="2151144">new</span><span class="op" id="2151147">(</span><span class="ident" id="2151148"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2151153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151156"><a href="/runtime/time.go.html#2151139">t</a></span><span class="op" id="2151157">.</span><span class="ident" id="2151158">when</span>&nbsp;<span class="op" id="2151163">=</span>&nbsp;<span class="ident" id="2151165"><a href="/runtime/stubs.go.html#2137038">nanotime</a></span><span class="op" id="2151173">(</span><span class="op" id="2151174">)</span>&nbsp;<span class="op" id="2151176">+</span>&nbsp;<span class="ident" id="2151178"><a href="/runtime/time.go.html#2151099">ns</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151182"><a href="/runtime/time.go.html#2151139">t</a></span><span class="op" id="2151183">.</span><span class="ident" id="2151184">f</span>&nbsp;<span class="op" id="2151186">=</span>&nbsp;<span class="ident" id="2151188"><a href="/runtime/time.go.html#2151666">goroutineReady</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151204"><a href="/runtime/time.go.html#2151139">t</a></span><span class="op" id="2151205">.</span><span class="ident" id="2151206">arg</span>&nbsp;<span class="op" id="2151210">=</span>&nbsp;<span class="ident" id="2151212"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2151216">(</span><span class="op" id="2151217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151220"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2151224">(</span><span class="op" id="2151225">&amp;</span><span class="ident" id="2151226"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2151232">.</span><span class="ident" id="2151233">lock</span><span class="op" id="2151237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151240"><a href="/runtime/time.go.html#2151968">addtimerLocked</a></span><span class="op" id="2151254">(</span><span class="ident" id="2151255"><a href="/runtime/time.go.html#2151139">t</a></span><span class="op" id="2151256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151259"><a href="/runtime/proc.go.html#2066901">goparkunlock</a></span><span class="op" id="2151271">(</span><span class="op" id="2151272">&amp;</span><span class="ident" id="2151273"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2151279">.</span><span class="ident" id="2151280">lock</span><span class="op" id="2151284">,</span>&nbsp;<span class="string" id="2151286">&#34;sleep&#34;</span><span class="op" id="2151293">)</span><br>
<span class="lineno"></span><span class="op" id="2151295">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="2151298">//&nbsp;startTimer&nbsp;adds&nbsp;t&nbsp;to&nbsp;the&nbsp;timer&nbsp;heap.</span><br>
<span class="lineno"></span><span class="keyword" id="2151338">func</span>&nbsp;<span class="ident" id="2151343">startTimer</span><span class="op" id="2151353">(</span><span class="ident" id="2151354">t</span>&nbsp;<span class="op" id="2151356">*</span><span class="ident" id="2151357"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2151362">)</span>&nbsp;<span class="op" id="2151364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2151367">if</span>&nbsp;<span class="ident" id="2151370"><a href="/runtime/race0.go.html#2069616">raceenabled</a></span>&nbsp;<span class="op" id="2151382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151386"><a href="/runtime/race0.go.html#2070774">racerelease</a></span><span class="op" id="2151397">(</span><span class="ident" id="2151398"><a href="/runtime/time.go.html#2150050">unsafe</a></span><span class="op" id="2151404">.</span><span class="ident" id="2151405">Pointer</span><span class="op" id="2151412">(</span><span class="ident" id="2151413"><a href="/runtime/time.go.html#2151354">t</a></span><span class="op" id="2151414">)</span><span class="op" id="2151415">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2151418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151421"><a href="/runtime/time.go.html#2151740">addtimer</a></span><span class="op" id="2151429">(</span><span class="ident" id="2151430"><a href="/runtime/time.go.html#2151354">t</a></span><span class="op" id="2151431">)</span><br>
<span class="lineno"></span><span class="op" id="2151433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2151436">//&nbsp;stopTimer&nbsp;removes&nbsp;t&nbsp;from&nbsp;the&nbsp;timer&nbsp;heap&nbsp;if&nbsp;it&nbsp;is&nbsp;there.</span><br>
<span class="lineno">70</span><span class="comment" id="2151495">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;t&nbsp;was&nbsp;removed,&nbsp;false&nbsp;if&nbsp;t&nbsp;wasn&#39;t&nbsp;even&nbsp;there.</span><br>
<span class="lineno"></span><span class="keyword" id="2151562">func</span>&nbsp;<span class="ident" id="2151567">stopTimer</span><span class="op" id="2151576">(</span><span class="ident" id="2151577">t</span>&nbsp;<span class="op" id="2151579">*</span><span class="ident" id="2151580"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2151585">)</span>&nbsp;<span class="builtintype" id="2151587">bool</span>&nbsp;<span class="op" id="2151592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2151595">return</span>&nbsp;<span class="ident" id="2151602"><a href="/runtime/time.go.html#2152666">deltimer</a></span><span class="op" id="2151610">(</span><span class="ident" id="2151611"><a href="/runtime/time.go.html#2151577">t</a></span><span class="op" id="2151612">)</span><br>
<span class="lineno"></span><span class="op" id="2151614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2151617">//&nbsp;Go&nbsp;runtime.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2151633">//&nbsp;Ready&nbsp;the&nbsp;goroutine&nbsp;arg.</span><br>
<span class="lineno"></span><span class="keyword" id="2151661">func</span>&nbsp;<span class="ident" id="2151666">goroutineReady</span><span class="op" id="2151680">(</span><span class="ident" id="2151681">arg</span>&nbsp;<span class="keyword" id="2151685">interface</span><span class="op" id="2151694">{</span><span class="op" id="2151695">}</span><span class="op" id="2151696">,</span>&nbsp;<span class="ident" id="2151698">seq</span>&nbsp;<span class="builtintype" id="2151702">uintptr</span><span class="op" id="2151709">)</span>&nbsp;<span class="op" id="2151711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151714"><a href="/runtime/proc.go.html#2067021">goready</a></span><span class="op" id="2151721">(</span><span class="ident" id="2151722"><a href="/runtime/time.go.html#2151681">arg</a></span><span class="op" id="2151725">.</span><span class="op" id="2151726">(</span><span class="op" id="2151727">*</span><span class="ident" id="2151728"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2151729">)</span><span class="op" id="2151730">)</span><br>
<span class="lineno">80</span><span class="op" id="2151732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2151735">func</span>&nbsp;<span class="ident" id="2151740">addtimer</span><span class="op" id="2151748">(</span><span class="ident" id="2151749">t</span>&nbsp;<span class="op" id="2151751">*</span><span class="ident" id="2151752"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2151757">)</span>&nbsp;<span class="op" id="2151759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151762"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2151766">(</span><span class="op" id="2151767">&amp;</span><span class="ident" id="2151768"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2151774">.</span><span class="ident" id="2151775">lock</span><span class="op" id="2151779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151782"><a href="/runtime/time.go.html#2151968">addtimerLocked</a></span><span class="op" id="2151796">(</span><span class="ident" id="2151797"><a href="/runtime/time.go.html#2151749">t</a></span><span class="op" id="2151798">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2151801"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2151807">(</span><span class="op" id="2151808">&amp;</span><span class="ident" id="2151809"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2151815">.</span><span class="ident" id="2151816">lock</span><span class="op" id="2151820">)</span><br>
<span class="lineno"></span><span class="op" id="2151822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2151825">//&nbsp;Add&nbsp;a&nbsp;timer&nbsp;to&nbsp;the&nbsp;heap&nbsp;and&nbsp;start&nbsp;or&nbsp;kick&nbsp;the&nbsp;timer&nbsp;proc.</span><br>
<span class="lineno"></span><span class="comment" id="2151886">//&nbsp;If&nbsp;the&nbsp;new&nbsp;timer&nbsp;is&nbsp;earlier&nbsp;than&nbsp;any&nbsp;of&nbsp;the&nbsp;others.</span><br>
<span class="lineno">90</span><span class="comment" id="2151941">//&nbsp;Timers&nbsp;are&nbsp;locked.</span><br>
<span class="lineno"></span><span class="keyword" id="2151963">func</span>&nbsp;<span class="ident" id="2151968">addtimerLocked</span><span class="op" id="2151982">(</span><span class="ident" id="2151983">t</span>&nbsp;<span class="op" id="2151985">*</span><span class="ident" id="2151986"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2151991">)</span>&nbsp;<span class="op" id="2151993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2151996">//&nbsp;when&nbsp;must&nbsp;never&nbsp;be&nbsp;negative;&nbsp;otherwise&nbsp;timerproc&nbsp;will&nbsp;overflow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152063">//&nbsp;during&nbsp;its&nbsp;delta&nbsp;calculation&nbsp;and&nbsp;never&nbsp;expire&nbsp;other&nbsp;runtime·timers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152136">if</span>&nbsp;<span class="ident" id="2152139"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152140">.</span><span class="ident" id="2152141">when</span>&nbsp;<span class="op" id="2152146">&lt;</span>&nbsp;<span class="num" id="2152148">0</span>&nbsp;<span class="op" id="2152150">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152154"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152155">.</span><span class="ident" id="2152156">when</span>&nbsp;<span class="op" id="2152161">=</span>&nbsp;<span class="num" id="2152163">1</span><span class="op" id="2152164">&lt;&lt;</span><span class="num" id="2152166">63</span>&nbsp;<span class="op" id="2152169">-</span>&nbsp;<span class="num" id="2152171">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152177"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152178">.</span><span class="ident" id="2152179">i</span>&nbsp;<span class="op" id="2152181">=</span>&nbsp;<span class="builtinfunc" id="2152183">len</span><span class="op" id="2152186">(</span><span class="ident" id="2152187"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152193">.</span><span class="ident" id="2152194">t</span><span class="op" id="2152195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152198"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152204">.</span><span class="ident" id="2152205">t</span>&nbsp;<span class="op" id="2152207">=</span>&nbsp;<span class="builtinfunc" id="2152209">append</span><span class="op" id="2152215">(</span><span class="ident" id="2152216"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152222">.</span><span class="ident" id="2152223">t</span><span class="op" id="2152224">,</span>&nbsp;<span class="ident" id="2152226"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152230"><a href="/runtime/time.go.html#2155137">siftupTimer</a></span><span class="op" id="2152241">(</span><span class="ident" id="2152242"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152243">.</span><span class="ident" id="2152244">i</span><span class="op" id="2152245">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152248">if</span>&nbsp;<span class="ident" id="2152251"><a href="/runtime/time.go.html#2151983">t</a></span><span class="op" id="2152252">.</span><span class="ident" id="2152253">i</span>&nbsp;<span class="op" id="2152255">==</span>&nbsp;<span class="num" id="2152258">0</span>&nbsp;<span class="op" id="2152260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152264">//&nbsp;siftup&nbsp;moved&nbsp;to&nbsp;top:&nbsp;new&nbsp;earliest&nbsp;deadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152313">if</span>&nbsp;<span class="ident" id="2152316"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152322">.</span><span class="ident" id="2152323">sleeping</span>&nbsp;<span class="op" id="2152332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152337"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152343">.</span><span class="ident" id="2152344">sleeping</span>&nbsp;<span class="op" id="2152353">=</span>&nbsp;<span class="builtintype" id="2152355">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152364"><a href="/runtime/lock_futex.go.html#1980230">notewakeup</a></span><span class="op" id="2152374">(</span><span class="op" id="2152375">&amp;</span><span class="ident" id="2152376"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152382">.</span><span class="ident" id="2152383">waitnote</span><span class="op" id="2152391">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152399">if</span>&nbsp;<span class="ident" id="2152402"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152408">.</span><span class="ident" id="2152409">rescheduling</span>&nbsp;<span class="op" id="2152422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152427"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152433">.</span><span class="ident" id="2152434">rescheduling</span>&nbsp;<span class="op" id="2152447">=</span>&nbsp;<span class="builtintype" id="2152449">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152458"><a href="/runtime/proc.go.html#2067021">goready</a></span><span class="op" id="2152465">(</span><span class="ident" id="2152466"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152472">.</span><span class="ident" id="2152473">gp</span><span class="op" id="2152475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152479">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152485">if</span>&nbsp;<span class="op" id="2152488">!</span><span class="ident" id="2152489"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152495">.</span><span class="ident" id="2152496">created</span>&nbsp;<span class="op" id="2152504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152508"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152514">.</span><span class="ident" id="2152515">created</span>&nbsp;<span class="op" id="2152523">=</span>&nbsp;<span class="builtintype" id="2152525">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152532">go</span>&nbsp;<span class="ident" id="2152535"><a href="/runtime/time.go.html#2153494">timerproc</a></span><span class="op" id="2152544">(</span><span class="op" id="2152545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152548">}</span><br>
<span class="lineno">115</span><span class="op" id="2152550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2152553">//&nbsp;Delete&nbsp;timer&nbsp;t&nbsp;from&nbsp;the&nbsp;heap.</span><br>
<span class="lineno"></span><span class="comment" id="2152586">//&nbsp;Do&nbsp;not&nbsp;need&nbsp;to&nbsp;update&nbsp;the&nbsp;timerproc:&nbsp;if&nbsp;it&nbsp;wakes&nbsp;up&nbsp;early,&nbsp;no&nbsp;big&nbsp;deal.</span><br>
<span class="lineno"></span><span class="keyword" id="2152661">func</span>&nbsp;<span class="ident" id="2152666">deltimer</span><span class="op" id="2152674">(</span><span class="ident" id="2152675">t</span>&nbsp;<span class="op" id="2152677">*</span><span class="ident" id="2152678"><a href="/runtime/time.go.html#2150325">timer</a></span><span class="op" id="2152683">)</span>&nbsp;<span class="builtintype" id="2152685">bool</span>&nbsp;<span class="op" id="2152690">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152693">//&nbsp;Dereference&nbsp;t&nbsp;so&nbsp;that&nbsp;any&nbsp;panic&nbsp;happens&nbsp;before&nbsp;the&nbsp;lock&nbsp;is&nbsp;held.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152762">//&nbsp;Discard&nbsp;result,&nbsp;because&nbsp;t&nbsp;might&nbsp;be&nbsp;moving&nbsp;in&nbsp;the&nbsp;heap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152821">_</span>&nbsp;<span class="op" id="2152823">=</span>&nbsp;<span class="ident" id="2152825"><a href="/runtime/time.go.html#2152675">t</a></span><span class="op" id="2152826">.</span><span class="ident" id="2152827">i</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152831"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2152835">(</span><span class="op" id="2152836">&amp;</span><span class="ident" id="2152837"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2152843">.</span><span class="ident" id="2152844">lock</span><span class="op" id="2152848">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152851">//&nbsp;t&nbsp;may&nbsp;not&nbsp;be&nbsp;registered&nbsp;anymore&nbsp;and&nbsp;may&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152900">//&nbsp;a&nbsp;bogus&nbsp;i&nbsp;(typically&nbsp;0,&nbsp;if&nbsp;generated&nbsp;by&nbsp;Go).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152949">//&nbsp;Verify&nbsp;it&nbsp;before&nbsp;proceeding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152982">i</span>&nbsp;<span class="op" id="2152984">:=</span>&nbsp;<span class="ident" id="2152987"><a href="/runtime/time.go.html#2152675">t</a></span><span class="op" id="2152988">.</span><span class="ident" id="2152989">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152992">last</span>&nbsp;<span class="op" id="2152997">:=</span>&nbsp;<span class="builtinfunc" id="2153000">len</span><span class="op" id="2153003">(</span><span class="ident" id="2153004"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153010">.</span><span class="ident" id="2153011">t</span><span class="op" id="2153012">)</span>&nbsp;<span class="op" id="2153014">-</span>&nbsp;<span class="num" id="2153016">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153019">if</span>&nbsp;<span class="ident" id="2153022"><a href="/runtime/time.go.html#2152982">i</a></span>&nbsp;<span class="op" id="2153024">&lt;</span>&nbsp;<span class="num" id="2153026">0</span>&nbsp;<span class="op" id="2153028">||</span>&nbsp;<span class="ident" id="2153031"><a href="/runtime/time.go.html#2152982">i</a></span>&nbsp;<span class="op" id="2153033">&gt;</span>&nbsp;<span class="ident" id="2153035"><a href="/runtime/time.go.html#2152992">last</a></span>&nbsp;<span class="op" id="2153040">||</span>&nbsp;<span class="ident" id="2153043"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153049">.</span><span class="ident" id="2153050">t</span><span class="op" id="2153051">[</span><span class="ident" id="2153052"><a href="/runtime/time.go.html#2152982">i</a></span><span class="op" id="2153053">]</span>&nbsp;<span class="op" id="2153055">!=</span>&nbsp;<span class="ident" id="2153058"><a href="/runtime/time.go.html#2152675">t</a></span>&nbsp;<span class="op" id="2153060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153064"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2153070">(</span><span class="op" id="2153071">&amp;</span><span class="ident" id="2153072"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153078">.</span><span class="ident" id="2153079">lock</span><span class="op" id="2153083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153087">return</span>&nbsp;<span class="builtintype" id="2153094">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153104">if</span>&nbsp;<span class="ident" id="2153107"><a href="/runtime/time.go.html#2152982">i</a></span>&nbsp;<span class="op" id="2153109">!=</span>&nbsp;<span class="ident" id="2153112"><a href="/runtime/time.go.html#2152992">last</a></span>&nbsp;<span class="op" id="2153117">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153121"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153127">.</span><span class="ident" id="2153128">t</span><span class="op" id="2153129">[</span><span class="ident" id="2153130"><a href="/runtime/time.go.html#2152982">i</a></span><span class="op" id="2153131">]</span>&nbsp;<span class="op" id="2153133">=</span>&nbsp;<span class="ident" id="2153135"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153141">.</span><span class="ident" id="2153142">t</span><span class="op" id="2153143">[</span><span class="ident" id="2153144"><a href="/runtime/time.go.html#2152992">last</a></span><span class="op" id="2153148">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153152"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153158">.</span><span class="ident" id="2153159">t</span><span class="op" id="2153160">[</span><span class="ident" id="2153161"><a href="/runtime/time.go.html#2152982">i</a></span><span class="op" id="2153162">]</span><span class="op" id="2153163">.</span><span class="ident" id="2153164">i</span>&nbsp;<span class="op" id="2153166">=</span>&nbsp;<span class="ident" id="2153168"><a href="/runtime/time.go.html#2152982">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153174"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153180">.</span><span class="ident" id="2153181">t</span><span class="op" id="2153182">[</span><span class="ident" id="2153183"><a href="/runtime/time.go.html#2152992">last</a></span><span class="op" id="2153187">]</span>&nbsp;<span class="op" id="2153189">=</span>&nbsp;<span class="ident" id="2153191">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153196"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153202">.</span><span class="ident" id="2153203">t</span>&nbsp;<span class="op" id="2153205">=</span>&nbsp;<span class="ident" id="2153207"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153213">.</span><span class="ident" id="2153214">t</span><span class="op" id="2153215">[</span><span class="op" id="2153216">:</span><span class="ident" id="2153217"><a href="/runtime/time.go.html#2152992">last</a></span><span class="op" id="2153221">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153224">if</span>&nbsp;<span class="ident" id="2153227"><a href="/runtime/time.go.html#2152982">i</a></span>&nbsp;<span class="op" id="2153229">!=</span>&nbsp;<span class="ident" id="2153232"><a href="/runtime/time.go.html#2152992">last</a></span>&nbsp;<span class="op" id="2153237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153241"><a href="/runtime/time.go.html#2155137">siftupTimer</a></span><span class="op" id="2153252">(</span><span class="ident" id="2153253"><a href="/runtime/time.go.html#2152982">i</a></span><span class="op" id="2153254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153258"><a href="/runtime/time.go.html#2155357">siftdownTimer</a></span><span class="op" id="2153271">(</span><span class="ident" id="2153272"><a href="/runtime/time.go.html#2152982">i</a></span><span class="op" id="2153273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153279"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2153285">(</span><span class="op" id="2153286">&amp;</span><span class="ident" id="2153287"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153293">.</span><span class="ident" id="2153294">lock</span><span class="op" id="2153298">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153301">return</span>&nbsp;<span class="builtintype" id="2153308">true</span><br>
<span class="lineno"></span><span class="op" id="2153313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2153316">//&nbsp;Timerproc&nbsp;runs&nbsp;the&nbsp;time-driven&nbsp;events.</span><br>
<span class="lineno"></span><span class="comment" id="2153358">//&nbsp;It&nbsp;sleeps&nbsp;until&nbsp;the&nbsp;next&nbsp;event&nbsp;in&nbsp;the&nbsp;timers&nbsp;heap.</span><br>
<span class="lineno">150</span><span class="comment" id="2153412">//&nbsp;If&nbsp;addtimer&nbsp;inserts&nbsp;a&nbsp;new&nbsp;earlier&nbsp;event,&nbsp;addtimer1&nbsp;wakes&nbsp;timerproc&nbsp;early.</span><br>
<span class="lineno"></span><span class="keyword" id="2153489">func</span>&nbsp;<span class="ident" id="2153494">timerproc</span><span class="op" id="2153503">(</span><span class="op" id="2153504">)</span>&nbsp;<span class="op" id="2153506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153509"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153515">.</span><span class="ident" id="2153516">gp</span>&nbsp;<span class="op" id="2153519">=</span>&nbsp;<span class="ident" id="2153521"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2153525">(</span><span class="op" id="2153526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153529"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153535">.</span><span class="ident" id="2153536">gp</span><span class="op" id="2153538">.</span><span class="ident" id="2153539">issystem</span>&nbsp;<span class="op" id="2153548">=</span>&nbsp;<span class="builtintype" id="2153550">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153556">for</span>&nbsp;<span class="op" id="2153560">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153564"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2153568">(</span><span class="op" id="2153569">&amp;</span><span class="ident" id="2153570"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153576">.</span><span class="ident" id="2153577">lock</span><span class="op" id="2153581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153585"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153591">.</span><span class="ident" id="2153592">sleeping</span>&nbsp;<span class="op" id="2153601">=</span>&nbsp;<span class="builtintype" id="2153603">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153611">now</span>&nbsp;<span class="op" id="2153615">:=</span>&nbsp;<span class="ident" id="2153618"><a href="/runtime/stubs.go.html#2137038">nanotime</a></span><span class="op" id="2153626">(</span><span class="op" id="2153627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153631">delta</span>&nbsp;<span class="op" id="2153637">:=</span>&nbsp;<span class="ident" id="2153640">int64</span><span class="op" id="2153645">(</span><span class="op" id="2153646">-</span><span class="num" id="2153647">1</span><span class="op" id="2153648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153652">for</span>&nbsp;<span class="op" id="2153656">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153661">if</span>&nbsp;<span class="builtinfunc" id="2153664">len</span><span class="op" id="2153667">(</span><span class="ident" id="2153668"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153674">.</span><span class="ident" id="2153675">t</span><span class="op" id="2153676">)</span>&nbsp;<span class="op" id="2153678">==</span>&nbsp;<span class="num" id="2153681">0</span>&nbsp;<span class="op" id="2153683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153689"><a href="/runtime/time.go.html#2153631">delta</a></span>&nbsp;<span class="op" id="2153695">=</span>&nbsp;<span class="op" id="2153697">-</span><span class="num" id="2153698">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153704">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153718">t</span>&nbsp;<span class="op" id="2153720">:=</span>&nbsp;<span class="ident" id="2153723"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153729">.</span><span class="ident" id="2153730">t</span><span class="op" id="2153731">[</span><span class="num" id="2153732">0</span><span class="op" id="2153733">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153738"><a href="/runtime/time.go.html#2153631">delta</a></span>&nbsp;<span class="op" id="2153744">=</span>&nbsp;<span class="ident" id="2153746"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2153747">.</span><span class="ident" id="2153748">when</span>&nbsp;<span class="op" id="2153753">-</span>&nbsp;<span class="ident" id="2153755"><a href="/runtime/time.go.html#2153611">now</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153762">if</span>&nbsp;<span class="ident" id="2153765"><a href="/runtime/time.go.html#2153631">delta</a></span>&nbsp;<span class="op" id="2153771">&gt;</span>&nbsp;<span class="num" id="2153773">0</span>&nbsp;<span class="op" id="2153775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153781">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153795">if</span>&nbsp;<span class="ident" id="2153798"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2153799">.</span><span class="ident" id="2153800">period</span>&nbsp;<span class="op" id="2153807">&gt;</span>&nbsp;<span class="num" id="2153809">0</span>&nbsp;<span class="op" id="2153811">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2153817">//&nbsp;leave&nbsp;in&nbsp;heap&nbsp;but&nbsp;adjust&nbsp;next&nbsp;time&nbsp;to&nbsp;fire</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153867"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2153868">.</span><span class="ident" id="2153869">when</span>&nbsp;<span class="op" id="2153874">+=</span>&nbsp;<span class="ident" id="2153877"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2153878">.</span><span class="ident" id="2153879">period</span>&nbsp;<span class="op" id="2153886">*</span>&nbsp;<span class="op" id="2153888">(</span><span class="num" id="2153889">1</span>&nbsp;<span class="op" id="2153891">+</span>&nbsp;<span class="op" id="2153893">-</span><span class="ident" id="2153894"><a href="/runtime/time.go.html#2153631">delta</a></span><span class="op" id="2153899">/</span><span class="ident" id="2153900"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2153901">.</span><span class="ident" id="2153902">period</span><span class="op" id="2153908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153914"><a href="/runtime/time.go.html#2155357">siftdownTimer</a></span><span class="op" id="2153927">(</span><span class="num" id="2153928">0</span><span class="op" id="2153929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153934">}</span>&nbsp;<span class="keyword" id="2153936">else</span>&nbsp;<span class="op" id="2153941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2153947">//&nbsp;remove&nbsp;from&nbsp;heap</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153971">last</span>&nbsp;<span class="op" id="2153976">:=</span>&nbsp;<span class="builtinfunc" id="2153979">len</span><span class="op" id="2153982">(</span><span class="ident" id="2153983"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2153989">.</span><span class="ident" id="2153990">t</span><span class="op" id="2153991">)</span>&nbsp;<span class="op" id="2153993">-</span>&nbsp;<span class="num" id="2153995">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154001">if</span>&nbsp;<span class="ident" id="2154004"><a href="/runtime/time.go.html#2153971">last</a></span>&nbsp;<span class="op" id="2154009">&gt;</span>&nbsp;<span class="num" id="2154011">0</span>&nbsp;<span class="op" id="2154013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154020"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154026">.</span><span class="ident" id="2154027">t</span><span class="op" id="2154028">[</span><span class="num" id="2154029">0</span><span class="op" id="2154030">]</span>&nbsp;<span class="op" id="2154032">=</span>&nbsp;<span class="ident" id="2154034"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154040">.</span><span class="ident" id="2154041">t</span><span class="op" id="2154042">[</span><span class="ident" id="2154043"><a href="/runtime/time.go.html#2153971">last</a></span><span class="op" id="2154047">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154054"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154060">.</span><span class="ident" id="2154061">t</span><span class="op" id="2154062">[</span><span class="num" id="2154063">0</span><span class="op" id="2154064">]</span><span class="op" id="2154065">.</span><span class="ident" id="2154066">i</span>&nbsp;<span class="op" id="2154068">=</span>&nbsp;<span class="num" id="2154070">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154076">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154082"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154088">.</span><span class="ident" id="2154089">t</span><span class="op" id="2154090">[</span><span class="ident" id="2154091"><a href="/runtime/time.go.html#2153971">last</a></span><span class="op" id="2154095">]</span>&nbsp;<span class="op" id="2154097">=</span>&nbsp;<span class="ident" id="2154099">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154107"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154113">.</span><span class="ident" id="2154114">t</span>&nbsp;<span class="op" id="2154116">=</span>&nbsp;<span class="ident" id="2154118"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154124">.</span><span class="ident" id="2154125">t</span><span class="op" id="2154126">[</span><span class="op" id="2154127">:</span><span class="ident" id="2154128"><a href="/runtime/time.go.html#2153971">last</a></span><span class="op" id="2154132">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154138">if</span>&nbsp;<span class="ident" id="2154141"><a href="/runtime/time.go.html#2153971">last</a></span>&nbsp;<span class="op" id="2154146">&gt;</span>&nbsp;<span class="num" id="2154148">0</span>&nbsp;<span class="op" id="2154150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154157"><a href="/runtime/time.go.html#2155357">siftdownTimer</a></span><span class="op" id="2154170">(</span><span class="num" id="2154171">0</span><span class="op" id="2154172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154178">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154184"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2154185">.</span><span class="ident" id="2154186">i</span>&nbsp;<span class="op" id="2154188">=</span>&nbsp;<span class="op" id="2154190">-</span><span class="num" id="2154191">1</span>&nbsp;<span class="comment" id="2154193">//&nbsp;mark&nbsp;as&nbsp;removed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154220">f</span>&nbsp;<span class="op" id="2154222">:=</span>&nbsp;<span class="ident" id="2154225"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2154226">.</span><span class="ident" id="2154227">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154232">arg</span>&nbsp;<span class="op" id="2154236">:=</span>&nbsp;<span class="ident" id="2154239"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2154240">.</span><span class="ident" id="2154241">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154248">seq</span>&nbsp;<span class="op" id="2154252">:=</span>&nbsp;<span class="ident" id="2154255"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2154256">.</span><span class="ident" id="2154257">seq</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154264"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2154270">(</span><span class="op" id="2154271">&amp;</span><span class="ident" id="2154272"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154278">.</span><span class="ident" id="2154279">lock</span><span class="op" id="2154283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154288">if</span>&nbsp;<span class="ident" id="2154291"><a href="/runtime/race0.go.html#2069616">raceenabled</a></span>&nbsp;<span class="op" id="2154303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154309"><a href="/runtime/race0.go.html#2070582">raceacquire</a></span><span class="op" id="2154320">(</span><span class="ident" id="2154321"><a href="/runtime/time.go.html#2150050">unsafe</a></span><span class="op" id="2154327">.</span><span class="ident" id="2154328">Pointer</span><span class="op" id="2154335">(</span><span class="ident" id="2154336"><a href="/runtime/time.go.html#2153718">t</a></span><span class="op" id="2154337">)</span><span class="op" id="2154338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154348"><a href="/runtime/time.go.html#2154220">f</a></span><span class="op" id="2154349">(</span><span class="ident" id="2154350"><a href="/runtime/time.go.html#2154232">arg</a></span><span class="op" id="2154353">,</span>&nbsp;<span class="ident" id="2154355"><a href="/runtime/time.go.html#2154248">seq</a></span><span class="op" id="2154358">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154363"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2154367">(</span><span class="op" id="2154368">&amp;</span><span class="ident" id="2154369"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154375">.</span><span class="ident" id="2154376">lock</span><span class="op" id="2154380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154388">if</span>&nbsp;<span class="ident" id="2154391"><a href="/runtime/time.go.html#2153631">delta</a></span>&nbsp;<span class="op" id="2154397">&lt;</span>&nbsp;<span class="num" id="2154399">0</span>&nbsp;<span class="op" id="2154401">||</span>&nbsp;<span class="ident" id="2154404"><a href="/runtime/time.go.html#2150875">faketime</a></span>&nbsp;<span class="op" id="2154413">&gt;</span>&nbsp;<span class="num" id="2154415">0</span>&nbsp;<span class="op" id="2154417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2154422">//&nbsp;No&nbsp;timers&nbsp;left&nbsp;-&nbsp;put&nbsp;goroutine&nbsp;to&nbsp;sleep.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154469"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154475">.</span><span class="ident" id="2154476">rescheduling</span>&nbsp;<span class="op" id="2154489">=</span>&nbsp;<span class="builtintype" id="2154491">true</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154499"><a href="/runtime/proc.go.html#2066901">goparkunlock</a></span><span class="op" id="2154511">(</span><span class="op" id="2154512">&amp;</span><span class="ident" id="2154513"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154519">.</span><span class="ident" id="2154520">lock</span><span class="op" id="2154524">,</span>&nbsp;<span class="string" id="2154526">&#34;timer&nbsp;goroutine&nbsp;(idle)&#34;</span><span class="op" id="2154550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154555">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2154570">//&nbsp;At&nbsp;least&nbsp;one&nbsp;timer&nbsp;pending.&nbsp;&nbsp;Sleep&nbsp;until&nbsp;then.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154622"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154628">.</span><span class="ident" id="2154629">sleeping</span>&nbsp;<span class="op" id="2154638">=</span>&nbsp;<span class="builtintype" id="2154640">true</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154647"><a href="/runtime/lock_futex.go.html#1980190">noteclear</a></span><span class="op" id="2154656">(</span><span class="op" id="2154657">&amp;</span><span class="ident" id="2154658"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154664">.</span><span class="ident" id="2154665">waitnote</span><span class="op" id="2154673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154677"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2154683">(</span><span class="op" id="2154684">&amp;</span><span class="ident" id="2154685"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154691">.</span><span class="ident" id="2154692">lock</span><span class="op" id="2154696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154700"><a href="/runtime/lock_futex.go.html#1981536">notetsleepg</a></span><span class="op" id="2154711">(</span><span class="op" id="2154712">&amp;</span><span class="ident" id="2154713"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154719">.</span><span class="ident" id="2154720">waitnote</span><span class="op" id="2154728">,</span>&nbsp;<span class="ident" id="2154730"><a href="/runtime/time.go.html#2153631">delta</a></span><span class="op" id="2154735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154738">}</span><br>
<span class="lineno"></span><span class="op" id="2154740">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="2154743">func</span>&nbsp;<span class="ident" id="2154748">timejump</span><span class="op" id="2154756">(</span><span class="op" id="2154757">)</span>&nbsp;<span class="op" id="2154759">*</span><span class="ident" id="2154760"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span>&nbsp;<span class="op" id="2154762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154765">if</span>&nbsp;<span class="ident" id="2154768"><a href="/runtime/time.go.html#2150875">faketime</a></span>&nbsp;<span class="op" id="2154777">==</span>&nbsp;<span class="num" id="2154780">0</span>&nbsp;<span class="op" id="2154782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154786">return</span>&nbsp;<span class="ident" id="2154793">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154798">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154802"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2154806">(</span><span class="op" id="2154807">&amp;</span><span class="ident" id="2154808"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154814">.</span><span class="ident" id="2154815">lock</span><span class="op" id="2154819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154822">if</span>&nbsp;<span class="op" id="2154825">!</span><span class="ident" id="2154826"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154832">.</span><span class="ident" id="2154833">created</span>&nbsp;<span class="op" id="2154841">||</span>&nbsp;<span class="builtinfunc" id="2154844">len</span><span class="op" id="2154847">(</span><span class="ident" id="2154848"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154854">.</span><span class="ident" id="2154855">t</span><span class="op" id="2154856">)</span>&nbsp;<span class="op" id="2154858">==</span>&nbsp;<span class="num" id="2154861">0</span>&nbsp;<span class="op" id="2154863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154867"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2154873">(</span><span class="op" id="2154874">&amp;</span><span class="ident" id="2154875"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154881">.</span><span class="ident" id="2154882">lock</span><span class="op" id="2154886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154890">return</span>&nbsp;<span class="ident" id="2154897">nil</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154906">var</span>&nbsp;<span class="ident" id="2154910">gp</span>&nbsp;<span class="op" id="2154913">*</span><span class="ident" id="2154914"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154917">if</span>&nbsp;<span class="ident" id="2154920"><a href="/runtime/time.go.html#2150875">faketime</a></span>&nbsp;<span class="op" id="2154929">&lt;</span>&nbsp;<span class="ident" id="2154931"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154937">.</span><span class="ident" id="2154938">t</span><span class="op" id="2154939">[</span><span class="num" id="2154940">0</span><span class="op" id="2154941">]</span><span class="op" id="2154942">.</span><span class="ident" id="2154943">when</span>&nbsp;<span class="op" id="2154948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154952"><a href="/runtime/time.go.html#2150875">faketime</a></span>&nbsp;<span class="op" id="2154961">=</span>&nbsp;<span class="ident" id="2154963"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154969">.</span><span class="ident" id="2154970">t</span><span class="op" id="2154971">[</span><span class="num" id="2154972">0</span><span class="op" id="2154973">]</span><span class="op" id="2154974">.</span><span class="ident" id="2154975">when</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154982">if</span>&nbsp;<span class="ident" id="2154985"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2154991">.</span><span class="ident" id="2154992">rescheduling</span>&nbsp;<span class="op" id="2155005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155010"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2155016">.</span><span class="ident" id="2155017">rescheduling</span>&nbsp;<span class="op" id="2155030">=</span>&nbsp;<span class="builtintype" id="2155032">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155041"><a href="/runtime/time.go.html#2154910">gp</a></span>&nbsp;<span class="op" id="2155044">=</span>&nbsp;<span class="ident" id="2155046"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2155052">.</span><span class="ident" id="2155053">gp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155061">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155064"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2155070">(</span><span class="op" id="2155071">&amp;</span><span class="ident" id="2155072"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2155078">.</span><span class="ident" id="2155079">lock</span><span class="op" id="2155083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155086">return</span>&nbsp;<span class="ident" id="2155093"><a href="/runtime/time.go.html#2154910">gp</a></span><br>
<span class="lineno"></span><span class="op" id="2155096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2155099">//&nbsp;Heap&nbsp;maintenance&nbsp;algorithms.</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="2155132">func</span>&nbsp;<span class="ident" id="2155137">siftupTimer</span><span class="op" id="2155148">(</span><span class="ident" id="2155149">i</span>&nbsp;<span class="builtintype" id="2155151">int</span><span class="op" id="2155154">)</span>&nbsp;<span class="op" id="2155156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155159">t</span>&nbsp;<span class="op" id="2155161">:=</span>&nbsp;<span class="ident" id="2155164"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2155170">.</span><span class="ident" id="2155171">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155174">when</span>&nbsp;<span class="op" id="2155179">:=</span>&nbsp;<span class="ident" id="2155182"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155183">[</span><span class="ident" id="2155184"><a href="/runtime/time.go.html#2155149">i</a></span><span class="op" id="2155185">]</span><span class="op" id="2155186">.</span><span class="ident" id="2155187">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155193">tmp</span>&nbsp;<span class="op" id="2155197">:=</span>&nbsp;<span class="ident" id="2155200"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155201">[</span><span class="ident" id="2155202"><a href="/runtime/time.go.html#2155149">i</a></span><span class="op" id="2155203">]</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155206">for</span>&nbsp;<span class="ident" id="2155210"><a href="/runtime/time.go.html#2155149">i</a></span>&nbsp;<span class="op" id="2155212">&gt;</span>&nbsp;<span class="num" id="2155214">0</span>&nbsp;<span class="op" id="2155216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155220">p</span>&nbsp;<span class="op" id="2155222">:=</span>&nbsp;<span class="op" id="2155225">(</span><span class="ident" id="2155226"><a href="/runtime/time.go.html#2155149">i</a></span>&nbsp;<span class="op" id="2155228">-</span>&nbsp;<span class="num" id="2155230">1</span><span class="op" id="2155231">)</span>&nbsp;<span class="op" id="2155233">/</span>&nbsp;<span class="num" id="2155235">4</span>&nbsp;<span class="comment" id="2155237">//&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155249">if</span>&nbsp;<span class="ident" id="2155252"><a href="/runtime/time.go.html#2155174">when</a></span>&nbsp;<span class="op" id="2155257">&gt;=</span>&nbsp;<span class="ident" id="2155260"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155261">[</span><span class="ident" id="2155262"><a href="/runtime/time.go.html#2155220">p</a></span><span class="op" id="2155263">]</span><span class="op" id="2155264">.</span><span class="ident" id="2155265">when</span>&nbsp;<span class="op" id="2155270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155275">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155283">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155287"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155288">[</span><span class="ident" id="2155289"><a href="/runtime/time.go.html#2155149">i</a></span><span class="op" id="2155290">]</span>&nbsp;<span class="op" id="2155292">=</span>&nbsp;<span class="ident" id="2155294"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155295">[</span><span class="ident" id="2155296"><a href="/runtime/time.go.html#2155220">p</a></span><span class="op" id="2155297">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155301"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155302">[</span><span class="ident" id="2155303"><a href="/runtime/time.go.html#2155149">i</a></span><span class="op" id="2155304">]</span><span class="op" id="2155305">.</span><span class="ident" id="2155306">i</span>&nbsp;<span class="op" id="2155308">=</span>&nbsp;<span class="ident" id="2155310"><a href="/runtime/time.go.html#2155149">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155314"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155315">[</span><span class="ident" id="2155316"><a href="/runtime/time.go.html#2155220">p</a></span><span class="op" id="2155317">]</span>&nbsp;<span class="op" id="2155319">=</span>&nbsp;<span class="ident" id="2155321"><a href="/runtime/time.go.html#2155193">tmp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155327"><a href="/runtime/time.go.html#2155159">t</a></span><span class="op" id="2155328">[</span><span class="ident" id="2155329"><a href="/runtime/time.go.html#2155220">p</a></span><span class="op" id="2155330">]</span><span class="op" id="2155331">.</span><span class="ident" id="2155332">i</span>&nbsp;<span class="op" id="2155334">=</span>&nbsp;<span class="ident" id="2155336"><a href="/runtime/time.go.html#2155220">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155340"><a href="/runtime/time.go.html#2155149">i</a></span>&nbsp;<span class="op" id="2155342">=</span>&nbsp;<span class="ident" id="2155344"><a href="/runtime/time.go.html#2155220">p</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155347">}</span><br>
<span class="lineno"></span><span class="op" id="2155349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2155352">func</span>&nbsp;<span class="ident" id="2155357">siftdownTimer</span><span class="op" id="2155370">(</span><span class="ident" id="2155371">i</span>&nbsp;<span class="builtintype" id="2155373">int</span><span class="op" id="2155376">)</span>&nbsp;<span class="op" id="2155378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155381">t</span>&nbsp;<span class="op" id="2155383">:=</span>&nbsp;<span class="ident" id="2155386"><a href="/runtime/time.go.html#2150657">timers</a></span><span class="op" id="2155392">.</span><span class="ident" id="2155393">t</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155396">n</span>&nbsp;<span class="op" id="2155398">:=</span>&nbsp;<span class="builtinfunc" id="2155401">len</span><span class="op" id="2155404">(</span><span class="ident" id="2155405"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155409">when</span>&nbsp;<span class="op" id="2155414">:=</span>&nbsp;<span class="ident" id="2155417"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155418">[</span><span class="ident" id="2155419"><a href="/runtime/time.go.html#2155371">i</a></span><span class="op" id="2155420">]</span><span class="op" id="2155421">.</span><span class="ident" id="2155422">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155428">tmp</span>&nbsp;<span class="op" id="2155432">:=</span>&nbsp;<span class="ident" id="2155435"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155436">[</span><span class="ident" id="2155437"><a href="/runtime/time.go.html#2155371">i</a></span><span class="op" id="2155438">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155441">for</span>&nbsp;<span class="op" id="2155445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155449">c</span>&nbsp;<span class="op" id="2155451">:=</span>&nbsp;<span class="ident" id="2155454"><a href="/runtime/time.go.html#2155371">i</a></span><span class="op" id="2155455">*</span><span class="num" id="2155456">4</span>&nbsp;<span class="op" id="2155458">+</span>&nbsp;<span class="num" id="2155460">1</span>&nbsp;<span class="comment" id="2155462">//&nbsp;left&nbsp;child</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155478">c3</span>&nbsp;<span class="op" id="2155481">:=</span>&nbsp;<span class="ident" id="2155484"><a href="/runtime/time.go.html#2155449">c</a></span>&nbsp;<span class="op" id="2155486">+</span>&nbsp;<span class="num" id="2155488">2</span>&nbsp;&nbsp;<span class="comment" id="2155491">//&nbsp;mid&nbsp;child</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155506">if</span>&nbsp;<span class="ident" id="2155509"><a href="/runtime/time.go.html#2155449">c</a></span>&nbsp;<span class="op" id="2155511">&gt;=</span>&nbsp;<span class="ident" id="2155514"><a href="/runtime/time.go.html#2155396">n</a></span>&nbsp;<span class="op" id="2155516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155521">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155533">w</span>&nbsp;<span class="op" id="2155535">:=</span>&nbsp;<span class="ident" id="2155538"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155539">[</span><span class="ident" id="2155540"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155541">]</span><span class="op" id="2155542">.</span><span class="ident" id="2155543">when</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155550">if</span>&nbsp;<span class="ident" id="2155553"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155554">+</span><span class="num" id="2155555">1</span>&nbsp;<span class="op" id="2155557">&lt;</span>&nbsp;<span class="ident" id="2155559"><a href="/runtime/time.go.html#2155396">n</a></span>&nbsp;<span class="op" id="2155561">&amp;&amp;</span>&nbsp;<span class="ident" id="2155564"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155565">[</span><span class="ident" id="2155566"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155567">+</span><span class="num" id="2155568">1</span><span class="op" id="2155569">]</span><span class="op" id="2155570">.</span><span class="ident" id="2155571">when</span>&nbsp;<span class="op" id="2155576">&lt;</span>&nbsp;<span class="ident" id="2155578"><a href="/runtime/time.go.html#2155533">w</a></span>&nbsp;<span class="op" id="2155580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155585"><a href="/runtime/time.go.html#2155533">w</a></span>&nbsp;<span class="op" id="2155587">=</span>&nbsp;<span class="ident" id="2155589"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155590">[</span><span class="ident" id="2155591"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155592">+</span><span class="num" id="2155593">1</span><span class="op" id="2155594">]</span><span class="op" id="2155595">.</span><span class="ident" id="2155596">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155604"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155605">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155614">if</span>&nbsp;<span class="ident" id="2155617"><a href="/runtime/time.go.html#2155478">c3</a></span>&nbsp;<span class="op" id="2155620">&lt;</span>&nbsp;<span class="ident" id="2155622"><a href="/runtime/time.go.html#2155396">n</a></span>&nbsp;<span class="op" id="2155624">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155629">w3</span>&nbsp;<span class="op" id="2155632">:=</span>&nbsp;<span class="ident" id="2155635"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155636">[</span><span class="ident" id="2155637"><a href="/runtime/time.go.html#2155478">c3</a></span><span class="op" id="2155639">]</span><span class="op" id="2155640">.</span><span class="ident" id="2155641">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155649">if</span>&nbsp;<span class="ident" id="2155652"><a href="/runtime/time.go.html#2155478">c3</a></span><span class="op" id="2155654">+</span><span class="num" id="2155655">1</span>&nbsp;<span class="op" id="2155657">&lt;</span>&nbsp;<span class="ident" id="2155659"><a href="/runtime/time.go.html#2155396">n</a></span>&nbsp;<span class="op" id="2155661">&amp;&amp;</span>&nbsp;<span class="ident" id="2155664"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155665">[</span><span class="ident" id="2155666"><a href="/runtime/time.go.html#2155478">c3</a></span><span class="op" id="2155668">+</span><span class="num" id="2155669">1</span><span class="op" id="2155670">]</span><span class="op" id="2155671">.</span><span class="ident" id="2155672">when</span>&nbsp;<span class="op" id="2155677">&lt;</span>&nbsp;<span class="ident" id="2155679"><a href="/runtime/time.go.html#2155629">w3</a></span>&nbsp;<span class="op" id="2155682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155688"><a href="/runtime/time.go.html#2155629">w3</a></span>&nbsp;<span class="op" id="2155691">=</span>&nbsp;<span class="ident" id="2155693"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155694">[</span><span class="ident" id="2155695"><a href="/runtime/time.go.html#2155478">c3</a></span><span class="op" id="2155697">+</span><span class="num" id="2155698">1</span><span class="op" id="2155699">]</span><span class="op" id="2155700">.</span><span class="ident" id="2155701">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155710"><a href="/runtime/time.go.html#2155478">c3</a></span><span class="op" id="2155712">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155718">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155723">if</span>&nbsp;<span class="ident" id="2155726"><a href="/runtime/time.go.html#2155629">w3</a></span>&nbsp;<span class="op" id="2155729">&lt;</span>&nbsp;<span class="ident" id="2155731"><a href="/runtime/time.go.html#2155533">w</a></span>&nbsp;<span class="op" id="2155733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155739"><a href="/runtime/time.go.html#2155533">w</a></span>&nbsp;<span class="op" id="2155741">=</span>&nbsp;<span class="ident" id="2155743"><a href="/runtime/time.go.html#2155629">w3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155750"><a href="/runtime/time.go.html#2155449">c</a></span>&nbsp;<span class="op" id="2155752">=</span>&nbsp;<span class="ident" id="2155754"><a href="/runtime/time.go.html#2155478">c3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155764">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155768">if</span>&nbsp;<span class="ident" id="2155771"><a href="/runtime/time.go.html#2155533">w</a></span>&nbsp;<span class="op" id="2155773">&gt;=</span>&nbsp;<span class="ident" id="2155776"><a href="/runtime/time.go.html#2155409">when</a></span>&nbsp;<span class="op" id="2155781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2155786">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155798"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155799">[</span><span class="ident" id="2155800"><a href="/runtime/time.go.html#2155371">i</a></span><span class="op" id="2155801">]</span>&nbsp;<span class="op" id="2155803">=</span>&nbsp;<span class="ident" id="2155805"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155806">[</span><span class="ident" id="2155807"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155808">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155812"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155813">[</span><span class="ident" id="2155814"><a href="/runtime/time.go.html#2155371">i</a></span><span class="op" id="2155815">]</span><span class="op" id="2155816">.</span><span class="ident" id="2155817">i</span>&nbsp;<span class="op" id="2155819">=</span>&nbsp;<span class="ident" id="2155821"><a href="/runtime/time.go.html#2155371">i</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155825"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155826">[</span><span class="ident" id="2155827"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155828">]</span>&nbsp;<span class="op" id="2155830">=</span>&nbsp;<span class="ident" id="2155832"><a href="/runtime/time.go.html#2155428">tmp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155838"><a href="/runtime/time.go.html#2155381">t</a></span><span class="op" id="2155839">[</span><span class="ident" id="2155840"><a href="/runtime/time.go.html#2155449">c</a></span><span class="op" id="2155841">]</span><span class="op" id="2155842">.</span><span class="ident" id="2155843">i</span>&nbsp;<span class="op" id="2155845">=</span>&nbsp;<span class="ident" id="2155847"><a href="/runtime/time.go.html#2155449">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2155851"><a href="/runtime/time.go.html#2155371">i</a></span>&nbsp;<span class="op" id="2155853">=</span>&nbsp;<span class="ident" id="2155855"><a href="/runtime/time.go.html#2155449">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2155858">}</span><br>
<span class="lineno"></span><span class="op" id="2155860">}</span>
</div>
</body>
</html>
