<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8333023">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8333078">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8333132">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8333183">package</span>&nbsp;<span class="ident" id="8333191">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8333196">import</span>&nbsp;<span class="op" id="8333203">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8333206">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8333215">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8333226">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8333236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8333239">type</span>&nbsp;<span class="ident" id="8333244">typeT</span>&nbsp;<span class="keyword" id="8333250">struct</span>&nbsp;<span class="op" id="8333257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333260">id</span>&nbsp;&nbsp;<span class="ident" id="8333264"><a href="/encoding/gob/type.go.html#5143835">typeId</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333272">str</span>&nbsp;<span class="builtintype" id="8333276">string</span><br>
<span class="lineno"></span><span class="op" id="8333283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8333286">var</span>&nbsp;<span class="ident" id="8333290">basicTypes</span>&nbsp;<span class="op" id="8333301">=</span>&nbsp;<span class="op" id="8333303">[</span><span class="op" id="8333304">]</span><span class="ident" id="8333305"><a href="/encoding/gob/type_test.go.html#8333244">typeT</a></span><span class="op" id="8333310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333313">{</span><span class="ident" id="8333314"><a href="/encoding/gob/type.go.html#5145872">tBool</a></span><span class="op" id="8333319">,</span>&nbsp;<span class="string" id="8333321">&#34;bool&#34;</span><span class="op" id="8333327">}</span><span class="op" id="8333328">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333331">{</span><span class="ident" id="8333332"><a href="/encoding/gob/type.go.html#5145925">tInt</a></span><span class="op" id="8333336">,</span>&nbsp;<span class="string" id="8333338">&#34;int&#34;</span><span class="op" id="8333343">}</span><span class="op" id="8333344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333347">{</span><span class="ident" id="8333348"><a href="/encoding/gob/type.go.html#5145976">tUint</a></span><span class="op" id="8333353">,</span>&nbsp;<span class="string" id="8333355">&#34;uint&#34;</span><span class="op" id="8333361">}</span><span class="op" id="8333362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333365">{</span><span class="ident" id="8333366"><a href="/encoding/gob/type.go.html#5146029">tFloat</a></span><span class="op" id="8333372">,</span>&nbsp;<span class="string" id="8333374">&#34;float&#34;</span><span class="op" id="8333381">}</span><span class="op" id="8333382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333385">{</span><span class="ident" id="8333386"><a href="/encoding/gob/type.go.html#5146086">tBytes</a></span><span class="op" id="8333392">,</span>&nbsp;<span class="string" id="8333394">&#34;bytes&#34;</span><span class="op" id="8333401">}</span><span class="op" id="8333402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333405">{</span><span class="ident" id="8333406"><a href="/encoding/gob/type.go.html#5146142">tString</a></span><span class="op" id="8333413">,</span>&nbsp;<span class="string" id="8333415">&#34;string&#34;</span><span class="op" id="8333423">}</span><span class="op" id="8333424">,</span><br>
<span class="lineno">25</span><span class="op" id="8333426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8333429">func</span>&nbsp;<span class="ident" id="8333434">getTypeUnlocked</span><span class="op" id="8333449">(</span><span class="ident" id="8333450">name</span>&nbsp;<span class="builtintype" id="8333455">string</span><span class="op" id="8333461">,</span>&nbsp;<span class="ident" id="8333463">rt</span>&nbsp;<span class="ident" id="8333466"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8333473">.</span><span class="ident" id="8333474">Type</span><span class="op" id="8333478">)</span>&nbsp;<span class="ident" id="8333480"><a href="/encoding/gob/type.go.html#5144034">gobType</a></span>&nbsp;<span class="op" id="8333488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333491"><a href="/encoding/gob/type.go.html#5143919">typeLock</a></span><span class="op" id="8333499">.</span><span class="ident" id="8333500">Lock</span><span class="op" id="8333504">(</span><span class="op" id="8333505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333508">defer</span>&nbsp;<span class="ident" id="8333514"><a href="/encoding/gob/type.go.html#5143919">typeLock</a></span><span class="op" id="8333522">.</span><span class="ident" id="8333523">Unlock</span><span class="op" id="8333529">(</span><span class="op" id="8333530">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333533">t</span><span class="op" id="8333534">,</span>&nbsp;<span class="ident" id="8333536">err</span>&nbsp;<span class="op" id="8333540">:=</span>&nbsp;<span class="ident" id="8333543"><a href="/encoding/gob/type.go.html#5155478">getBaseType</a></span><span class="op" id="8333554">(</span><span class="ident" id="8333555"><a href="/encoding/gob/type_test.go.html#8333450">name</a></span><span class="op" id="8333559">,</span>&nbsp;<span class="ident" id="8333561"><a href="/encoding/gob/type_test.go.html#8333463">rt</a></span><span class="op" id="8333563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333566">if</span>&nbsp;<span class="ident" id="8333569"><a href="/encoding/gob/type_test.go.html#8333536">err</a></span>&nbsp;<span class="op" id="8333573">!=</span>&nbsp;<span class="ident" id="8333576">nil</span>&nbsp;<span class="op" id="8333580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8333584">panic</span><span class="op" id="8333589">(</span><span class="string" id="8333590">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8333610">+</span>&nbsp;<span class="ident" id="8333612"><a href="/encoding/gob/type_test.go.html#8333536">err</a></span><span class="op" id="8333615">.</span><span class="ident" id="8333616">Error</span><span class="op" id="8333621">(</span><span class="op" id="8333622">)</span><span class="op" id="8333623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333629">return</span>&nbsp;<span class="ident" id="8333636"><a href="/encoding/gob/type_test.go.html#8333533">t</a></span><br>
<span class="lineno">35</span><span class="op" id="8333638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8333641">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8333658">func</span>&nbsp;<span class="ident" id="8333663">TestBasic</span><span class="op" id="8333672">(</span><span class="ident" id="8333673">t</span>&nbsp;<span class="op" id="8333675">*</span><span class="ident" id="8333676"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8333683">.</span><span class="ident" id="8333684">T</span><span class="op" id="8333685">)</span>&nbsp;<span class="op" id="8333687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333690">for</span>&nbsp;<span class="ident" id="8333694">_</span><span class="op" id="8333695">,</span>&nbsp;<span class="ident" id="8333697">tt</span>&nbsp;<span class="op" id="8333700">:=</span>&nbsp;<span class="keyword" id="8333703">range</span>&nbsp;<span class="ident" id="8333709"><a href="/encoding/gob/type_test.go.html#8333290">basicTypes</a></span>&nbsp;<span class="op" id="8333720">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333724">if</span>&nbsp;<span class="ident" id="8333727"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333729">.</span><span class="ident" id="8333730">id</span><span class="op" id="8333732">.</span><span class="builtintype" id="8333733">string</span><span class="op" id="8333739">(</span><span class="op" id="8333740">)</span>&nbsp;<span class="op" id="8333742">!=</span>&nbsp;<span class="ident" id="8333745"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333747">.</span><span class="ident" id="8333748">str</span>&nbsp;<span class="op" id="8333752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333757"><a href="/encoding/gob/type_test.go.html#8333673">t</a></span><span class="op" id="8333758">.</span><span class="ident" id="8333759">Errorf</span><span class="op" id="8333765">(</span><span class="string" id="8333766">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8333797">,</span>&nbsp;<span class="ident" id="8333799"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333801">.</span><span class="ident" id="8333802">str</span><span class="op" id="8333805">,</span>&nbsp;<span class="ident" id="8333807"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333809">.</span><span class="ident" id="8333810">id</span><span class="op" id="8333812">.</span><span class="builtintype" id="8333813">string</span><span class="op" id="8333819">(</span><span class="op" id="8333820">)</span><span class="op" id="8333821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8333829">if</span>&nbsp;<span class="ident" id="8333832"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333834">.</span><span class="ident" id="8333835">id</span>&nbsp;<span class="op" id="8333838">==</span>&nbsp;<span class="num" id="8333841">0</span>&nbsp;<span class="op" id="8333843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8333848"><a href="/encoding/gob/type_test.go.html#8333673">t</a></span><span class="op" id="8333849">.</span><span class="ident" id="8333850">Errorf</span><span class="op" id="8333856">(</span><span class="string" id="8333857">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8333876">,</span>&nbsp;<span class="ident" id="8333878"><a href="/encoding/gob/type_test.go.html#8333697">tt</a></span><span class="op" id="8333880">.</span><span class="ident" id="8333881">str</span><span class="op" id="8333884">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8333891">}</span><br>
<span class="lineno"></span><span class="op" id="8333893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8333896">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8333964">func</span>&nbsp;<span class="ident" id="8333969">TestReregistration</span><span class="op" id="8333987">(</span><span class="ident" id="8333988">t</span>&nbsp;<span class="op" id="8333990">*</span><span class="ident" id="8333991"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8333998">.</span><span class="ident" id="8333999">T</span><span class="op" id="8334000">)</span>&nbsp;<span class="op" id="8334002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334005">newtyp</span>&nbsp;<span class="op" id="8334012">:=</span>&nbsp;<span class="ident" id="8334015"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334030">(</span><span class="string" id="8334031">&#34;int&#34;</span><span class="op" id="8334036">,</span>&nbsp;<span class="ident" id="8334038"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334045">.</span><span class="ident" id="8334046">TypeOf</span><span class="op" id="8334052">(</span><span class="builtintype" id="8334053">int</span><span class="op" id="8334056">(</span><span class="num" id="8334057">0</span><span class="op" id="8334058">)</span><span class="op" id="8334059">)</span><span class="op" id="8334060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334063">if</span>&nbsp;<span class="ident" id="8334066"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span>&nbsp;<span class="op" id="8334073">!=</span>&nbsp;<span class="ident" id="8334076"><a href="/encoding/gob/type.go.html#5145925">tInt</a></span><span class="op" id="8334080">.</span><span class="ident" id="8334081">gobType</span><span class="op" id="8334088">(</span><span class="op" id="8334089">)</span>&nbsp;<span class="op" id="8334091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334095"><a href="/encoding/gob/type_test.go.html#8333988">t</a></span><span class="op" id="8334096">.</span><span class="ident" id="8334097">Errorf</span><span class="op" id="8334103">(</span><span class="string" id="8334104">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8334139">,</span>&nbsp;<span class="ident" id="8334141"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span><span class="op" id="8334147">.</span><span class="builtintype" id="8334148">string</span><span class="op" id="8334154">(</span><span class="op" id="8334155">)</span><span class="op" id="8334156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8334159">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334162"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span>&nbsp;<span class="op" id="8334169">=</span>&nbsp;<span class="ident" id="8334171"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334186">(</span><span class="string" id="8334187">&#34;uint&#34;</span><span class="op" id="8334193">,</span>&nbsp;<span class="ident" id="8334195"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334202">.</span><span class="ident" id="8334203">TypeOf</span><span class="op" id="8334209">(</span><span class="builtintype" id="8334210">uint</span><span class="op" id="8334214">(</span><span class="num" id="8334215">0</span><span class="op" id="8334216">)</span><span class="op" id="8334217">)</span><span class="op" id="8334218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334221">if</span>&nbsp;<span class="ident" id="8334224"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span>&nbsp;<span class="op" id="8334231">!=</span>&nbsp;<span class="ident" id="8334234"><a href="/encoding/gob/type.go.html#5145976">tUint</a></span><span class="op" id="8334239">.</span><span class="ident" id="8334240">gobType</span><span class="op" id="8334247">(</span><span class="op" id="8334248">)</span>&nbsp;<span class="op" id="8334250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334254"><a href="/encoding/gob/type_test.go.html#8333988">t</a></span><span class="op" id="8334255">.</span><span class="ident" id="8334256">Errorf</span><span class="op" id="8334262">(</span><span class="string" id="8334263">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8334298">,</span>&nbsp;<span class="ident" id="8334300"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span><span class="op" id="8334306">.</span><span class="builtintype" id="8334307">string</span><span class="op" id="8334313">(</span><span class="op" id="8334314">)</span><span class="op" id="8334315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8334318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334321"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span>&nbsp;<span class="op" id="8334328">=</span>&nbsp;<span class="ident" id="8334330"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334345">(</span><span class="string" id="8334346">&#34;string&#34;</span><span class="op" id="8334354">,</span>&nbsp;<span class="ident" id="8334356"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334363">.</span><span class="ident" id="8334364">TypeOf</span><span class="op" id="8334370">(</span><span class="string" id="8334371">&#34;hello&#34;</span><span class="op" id="8334378">)</span><span class="op" id="8334379">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334382">if</span>&nbsp;<span class="ident" id="8334385"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span>&nbsp;<span class="op" id="8334392">!=</span>&nbsp;<span class="ident" id="8334395"><a href="/encoding/gob/type.go.html#5146142">tString</a></span><span class="op" id="8334402">.</span><span class="ident" id="8334403">gobType</span><span class="op" id="8334410">(</span><span class="op" id="8334411">)</span>&nbsp;<span class="op" id="8334413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334417"><a href="/encoding/gob/type_test.go.html#8333988">t</a></span><span class="op" id="8334418">.</span><span class="ident" id="8334419">Errorf</span><span class="op" id="8334425">(</span><span class="string" id="8334426">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8334461">,</span>&nbsp;<span class="ident" id="8334463"><a href="/encoding/gob/type_test.go.html#8334005">newtyp</a></span><span class="op" id="8334469">.</span><span class="builtintype" id="8334470">string</span><span class="op" id="8334476">(</span><span class="op" id="8334477">)</span><span class="op" id="8334478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8334481">}</span><br>
<span class="lineno"></span><span class="op" id="8334483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8334486">func</span>&nbsp;<span class="ident" id="8334491">TestArrayType</span><span class="op" id="8334504">(</span><span class="ident" id="8334505">t</span>&nbsp;<span class="op" id="8334507">*</span><span class="ident" id="8334508"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8334515">.</span><span class="ident" id="8334516">T</span><span class="op" id="8334517">)</span>&nbsp;<span class="op" id="8334519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334522">var</span>&nbsp;<span class="ident" id="8334526">a3</span>&nbsp;<span class="op" id="8334529">[</span><span class="num" id="8334530">3</span><span class="op" id="8334531">]</span><span class="builtintype" id="8334532">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334537">a3int</span>&nbsp;<span class="op" id="8334543">:=</span>&nbsp;<span class="ident" id="8334546"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334561">(</span><span class="string" id="8334562">&#34;foo&#34;</span><span class="op" id="8334567">,</span>&nbsp;<span class="ident" id="8334569"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334576">.</span><span class="ident" id="8334577">TypeOf</span><span class="op" id="8334583">(</span><span class="ident" id="8334584"><a href="/encoding/gob/type_test.go.html#8334526">a3</a></span><span class="op" id="8334586">)</span><span class="op" id="8334587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334590">newa3int</span>&nbsp;<span class="op" id="8334599">:=</span>&nbsp;<span class="ident" id="8334602"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334617">(</span><span class="string" id="8334618">&#34;bar&#34;</span><span class="op" id="8334623">,</span>&nbsp;<span class="ident" id="8334625"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334632">.</span><span class="ident" id="8334633">TypeOf</span><span class="op" id="8334639">(</span><span class="ident" id="8334640"><a href="/encoding/gob/type_test.go.html#8334526">a3</a></span><span class="op" id="8334642">)</span><span class="op" id="8334643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334646">if</span>&nbsp;<span class="ident" id="8334649"><a href="/encoding/gob/type_test.go.html#8334537">a3int</a></span>&nbsp;<span class="op" id="8334655">!=</span>&nbsp;<span class="ident" id="8334658"><a href="/encoding/gob/type_test.go.html#8334590">newa3int</a></span>&nbsp;<span class="op" id="8334667">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334671"><a href="/encoding/gob/type_test.go.html#8334505">t</a></span><span class="op" id="8334672">.</span><span class="ident" id="8334673">Errorf</span><span class="op" id="8334679">(</span><span class="string" id="8334680">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8334728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8334731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334734">var</span>&nbsp;<span class="ident" id="8334738">a4</span>&nbsp;<span class="op" id="8334741">[</span><span class="num" id="8334742">4</span><span class="op" id="8334743">]</span><span class="builtintype" id="8334744">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334749">a4int</span>&nbsp;<span class="op" id="8334755">:=</span>&nbsp;<span class="ident" id="8334758"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334773">(</span><span class="string" id="8334774">&#34;goo&#34;</span><span class="op" id="8334779">,</span>&nbsp;<span class="ident" id="8334781"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334788">.</span><span class="ident" id="8334789">TypeOf</span><span class="op" id="8334795">(</span><span class="ident" id="8334796"><a href="/encoding/gob/type_test.go.html#8334738">a4</a></span><span class="op" id="8334798">)</span><span class="op" id="8334799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334802">if</span>&nbsp;<span class="ident" id="8334805"><a href="/encoding/gob/type_test.go.html#8334537">a3int</a></span>&nbsp;<span class="op" id="8334811">==</span>&nbsp;<span class="ident" id="8334814"><a href="/encoding/gob/type_test.go.html#8334749">a4int</a></span>&nbsp;<span class="op" id="8334820">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334824"><a href="/encoding/gob/type_test.go.html#8334505">t</a></span><span class="op" id="8334825">.</span><span class="ident" id="8334826">Errorf</span><span class="op" id="8334832">(</span><span class="string" id="8334833">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8334885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8334888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334891">var</span>&nbsp;<span class="ident" id="8334895">b3</span>&nbsp;<span class="op" id="8334898">[</span><span class="num" id="8334899">3</span><span class="op" id="8334900">]</span><span class="builtintype" id="8334901">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334907">a3bool</span>&nbsp;<span class="op" id="8334914">:=</span>&nbsp;<span class="ident" id="8334917"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8334932">(</span><span class="string" id="8334933">&#34;&#34;</span><span class="op" id="8334935">,</span>&nbsp;<span class="ident" id="8334937"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8334944">.</span><span class="ident" id="8334945">TypeOf</span><span class="op" id="8334951">(</span><span class="ident" id="8334952"><a href="/encoding/gob/type_test.go.html#8334895">b3</a></span><span class="op" id="8334954">)</span><span class="op" id="8334955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8334958">if</span>&nbsp;<span class="ident" id="8334961"><a href="/encoding/gob/type_test.go.html#8334537">a3int</a></span>&nbsp;<span class="op" id="8334967">==</span>&nbsp;<span class="ident" id="8334970"><a href="/encoding/gob/type_test.go.html#8334907">a3bool</a></span>&nbsp;<span class="op" id="8334977">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8334981"><a href="/encoding/gob/type_test.go.html#8334505">t</a></span><span class="op" id="8334982">.</span><span class="ident" id="8334983">Errorf</span><span class="op" id="8334989">(</span><span class="string" id="8334990">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8335043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8335046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335049">str</span>&nbsp;<span class="op" id="8335053">:=</span>&nbsp;<span class="ident" id="8335056"><a href="/encoding/gob/type_test.go.html#8334907">a3bool</a></span><span class="op" id="8335062">.</span><span class="builtintype" id="8335063">string</span><span class="op" id="8335069">(</span><span class="op" id="8335070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335073">expected</span>&nbsp;<span class="op" id="8335082">:=</span>&nbsp;<span class="string" id="8335085">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335096">if</span>&nbsp;<span class="ident" id="8335099"><a href="/encoding/gob/type_test.go.html#8335049">str</a></span>&nbsp;<span class="op" id="8335103">!=</span>&nbsp;<span class="ident" id="8335106"><a href="/encoding/gob/type_test.go.html#8335073">expected</a></span>&nbsp;<span class="op" id="8335115">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335119"><a href="/encoding/gob/type_test.go.html#8334505">t</a></span><span class="op" id="8335120">.</span><span class="ident" id="8335121">Errorf</span><span class="op" id="8335127">(</span><span class="string" id="8335128">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8335162">,</span>&nbsp;<span class="ident" id="8335164"><a href="/encoding/gob/type_test.go.html#8335049">str</a></span><span class="op" id="8335167">,</span>&nbsp;<span class="ident" id="8335169"><a href="/encoding/gob/type_test.go.html#8335073">expected</a></span><span class="op" id="8335177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8335180">}</span><br>
<span class="lineno"></span><span class="op" id="8335182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8335185">func</span>&nbsp;<span class="ident" id="8335190">TestSliceType</span><span class="op" id="8335203">(</span><span class="ident" id="8335204">t</span>&nbsp;<span class="op" id="8335206">*</span><span class="ident" id="8335207"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8335214">.</span><span class="ident" id="8335215">T</span><span class="op" id="8335216">)</span>&nbsp;<span class="op" id="8335218">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335221">var</span>&nbsp;<span class="ident" id="8335225">s</span>&nbsp;<span class="op" id="8335227">[</span><span class="op" id="8335228">]</span><span class="builtintype" id="8335229">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335234">sint</span>&nbsp;<span class="op" id="8335239">:=</span>&nbsp;<span class="ident" id="8335242"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8335257">(</span><span class="string" id="8335258">&#34;slice&#34;</span><span class="op" id="8335265">,</span>&nbsp;<span class="ident" id="8335267"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8335274">.</span><span class="ident" id="8335275">TypeOf</span><span class="op" id="8335281">(</span><span class="ident" id="8335282"><a href="/encoding/gob/type_test.go.html#8335225">s</a></span><span class="op" id="8335283">)</span><span class="op" id="8335284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335287">var</span>&nbsp;<span class="ident" id="8335291">news</span>&nbsp;<span class="op" id="8335296">[</span><span class="op" id="8335297">]</span><span class="builtintype" id="8335298">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335303">newsint</span>&nbsp;<span class="op" id="8335311">:=</span>&nbsp;<span class="ident" id="8335314"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8335329">(</span><span class="string" id="8335330">&#34;slice1&#34;</span><span class="op" id="8335338">,</span>&nbsp;<span class="ident" id="8335340"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8335347">.</span><span class="ident" id="8335348">TypeOf</span><span class="op" id="8335354">(</span><span class="ident" id="8335355"><a href="/encoding/gob/type_test.go.html#8335291">news</a></span><span class="op" id="8335359">)</span><span class="op" id="8335360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335363">if</span>&nbsp;<span class="ident" id="8335366"><a href="/encoding/gob/type_test.go.html#8335234">sint</a></span>&nbsp;<span class="op" id="8335371">!=</span>&nbsp;<span class="ident" id="8335374"><a href="/encoding/gob/type_test.go.html#8335303">newsint</a></span>&nbsp;<span class="op" id="8335382">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335386"><a href="/encoding/gob/type_test.go.html#8335204">t</a></span><span class="op" id="8335387">.</span><span class="ident" id="8335388">Errorf</span><span class="op" id="8335394">(</span><span class="string" id="8335395">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8335442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8335445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335448">var</span>&nbsp;<span class="ident" id="8335452">b</span>&nbsp;<span class="op" id="8335454">[</span><span class="op" id="8335455">]</span><span class="builtintype" id="8335456">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335462">sbool</span>&nbsp;<span class="op" id="8335468">:=</span>&nbsp;<span class="ident" id="8335471"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8335486">(</span><span class="string" id="8335487">&#34;&#34;</span><span class="op" id="8335489">,</span>&nbsp;<span class="ident" id="8335491"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8335498">.</span><span class="ident" id="8335499">TypeOf</span><span class="op" id="8335505">(</span><span class="ident" id="8335506"><a href="/encoding/gob/type_test.go.html#8335452">b</a></span><span class="op" id="8335507">)</span><span class="op" id="8335508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335511">if</span>&nbsp;<span class="ident" id="8335514"><a href="/encoding/gob/type_test.go.html#8335462">sbool</a></span>&nbsp;<span class="op" id="8335520">==</span>&nbsp;<span class="ident" id="8335523"><a href="/encoding/gob/type_test.go.html#8335234">sint</a></span>&nbsp;<span class="op" id="8335528">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335532"><a href="/encoding/gob/type_test.go.html#8335204">t</a></span><span class="op" id="8335533">.</span><span class="ident" id="8335534">Errorf</span><span class="op" id="8335540">(</span><span class="string" id="8335541">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8335592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8335595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335598">str</span>&nbsp;<span class="op" id="8335602">:=</span>&nbsp;<span class="ident" id="8335605"><a href="/encoding/gob/type_test.go.html#8335462">sbool</a></span><span class="op" id="8335610">.</span><span class="builtintype" id="8335611">string</span><span class="op" id="8335617">(</span><span class="op" id="8335618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335621">expected</span>&nbsp;<span class="op" id="8335630">:=</span>&nbsp;<span class="string" id="8335633">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335643">if</span>&nbsp;<span class="ident" id="8335646"><a href="/encoding/gob/type_test.go.html#8335598">str</a></span>&nbsp;<span class="op" id="8335650">!=</span>&nbsp;<span class="ident" id="8335653"><a href="/encoding/gob/type_test.go.html#8335621">expected</a></span>&nbsp;<span class="op" id="8335662">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335666"><a href="/encoding/gob/type_test.go.html#8335204">t</a></span><span class="op" id="8335667">.</span><span class="ident" id="8335668">Errorf</span><span class="op" id="8335674">(</span><span class="string" id="8335675">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8335709">,</span>&nbsp;<span class="ident" id="8335711"><a href="/encoding/gob/type_test.go.html#8335598">str</a></span><span class="op" id="8335714">,</span>&nbsp;<span class="ident" id="8335716"><a href="/encoding/gob/type_test.go.html#8335621">expected</a></span><span class="op" id="8335724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8335727">}</span><br>
<span class="lineno"></span><span class="op" id="8335729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8335732">func</span>&nbsp;<span class="ident" id="8335737">TestMapType</span><span class="op" id="8335748">(</span><span class="ident" id="8335749">t</span>&nbsp;<span class="op" id="8335751">*</span><span class="ident" id="8335752"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8335759">.</span><span class="ident" id="8335760">T</span><span class="op" id="8335761">)</span>&nbsp;<span class="op" id="8335763">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335766">var</span>&nbsp;<span class="ident" id="8335770">m</span>&nbsp;<span class="keyword" id="8335772">map</span><span class="op" id="8335775">[</span><span class="builtintype" id="8335776">string</span><span class="op" id="8335782">]</span><span class="builtintype" id="8335783">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335788">mapStringInt</span>&nbsp;<span class="op" id="8335801">:=</span>&nbsp;<span class="ident" id="8335804"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8335819">(</span><span class="string" id="8335820">&#34;map&#34;</span><span class="op" id="8335825">,</span>&nbsp;<span class="ident" id="8335827"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8335834">.</span><span class="ident" id="8335835">TypeOf</span><span class="op" id="8335841">(</span><span class="ident" id="8335842"><a href="/encoding/gob/type_test.go.html#8335770">m</a></span><span class="op" id="8335843">)</span><span class="op" id="8335844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335847">var</span>&nbsp;<span class="ident" id="8335851">newm</span>&nbsp;<span class="keyword" id="8335856">map</span><span class="op" id="8335859">[</span><span class="builtintype" id="8335860">string</span><span class="op" id="8335866">]</span><span class="builtintype" id="8335867">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335872">newMapStringInt</span>&nbsp;<span class="op" id="8335888">:=</span>&nbsp;<span class="ident" id="8335891"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8335906">(</span><span class="string" id="8335907">&#34;map1&#34;</span><span class="op" id="8335913">,</span>&nbsp;<span class="ident" id="8335915"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8335922">.</span><span class="ident" id="8335923">TypeOf</span><span class="op" id="8335929">(</span><span class="ident" id="8335930"><a href="/encoding/gob/type_test.go.html#8335851">newm</a></span><span class="op" id="8335934">)</span><span class="op" id="8335935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8335938">if</span>&nbsp;<span class="ident" id="8335941"><a href="/encoding/gob/type_test.go.html#8335788">mapStringInt</a></span>&nbsp;<span class="op" id="8335954">!=</span>&nbsp;<span class="ident" id="8335957"><a href="/encoding/gob/type_test.go.html#8335872">newMapStringInt</a></span>&nbsp;<span class="op" id="8335973">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8335977"><a href="/encoding/gob/type_test.go.html#8335749">t</a></span><span class="op" id="8335978">.</span><span class="ident" id="8335979">Errorf</span><span class="op" id="8335985">(</span><span class="string" id="8335986">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8336042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8336045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8336048">var</span>&nbsp;<span class="ident" id="8336052">b</span>&nbsp;<span class="keyword" id="8336054">map</span><span class="op" id="8336057">[</span><span class="builtintype" id="8336058">string</span><span class="op" id="8336064">]</span><span class="builtintype" id="8336065">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336071">mapStringBool</span>&nbsp;<span class="op" id="8336085">:=</span>&nbsp;<span class="ident" id="8336088"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8336103">(</span><span class="string" id="8336104">&#34;&#34;</span><span class="op" id="8336106">,</span>&nbsp;<span class="ident" id="8336108"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8336115">.</span><span class="ident" id="8336116">TypeOf</span><span class="op" id="8336122">(</span><span class="ident" id="8336123"><a href="/encoding/gob/type_test.go.html#8336052">b</a></span><span class="op" id="8336124">)</span><span class="op" id="8336125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8336128">if</span>&nbsp;<span class="ident" id="8336131"><a href="/encoding/gob/type_test.go.html#8336071">mapStringBool</a></span>&nbsp;<span class="op" id="8336145">==</span>&nbsp;<span class="ident" id="8336148"><a href="/encoding/gob/type_test.go.html#8335788">mapStringInt</a></span>&nbsp;<span class="op" id="8336161">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336165"><a href="/encoding/gob/type_test.go.html#8335749">t</a></span><span class="op" id="8336166">.</span><span class="ident" id="8336167">Errorf</span><span class="op" id="8336173">(</span><span class="string" id="8336174">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8336243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8336246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336249">str</span>&nbsp;<span class="op" id="8336253">:=</span>&nbsp;<span class="ident" id="8336256"><a href="/encoding/gob/type_test.go.html#8336071">mapStringBool</a></span><span class="op" id="8336269">.</span><span class="builtintype" id="8336270">string</span><span class="op" id="8336276">(</span><span class="op" id="8336277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336280">expected</span>&nbsp;<span class="op" id="8336289">:=</span>&nbsp;<span class="string" id="8336292">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8336311">if</span>&nbsp;<span class="ident" id="8336314"><a href="/encoding/gob/type_test.go.html#8336249">str</a></span>&nbsp;<span class="op" id="8336318">!=</span>&nbsp;<span class="ident" id="8336321"><a href="/encoding/gob/type_test.go.html#8336280">expected</a></span>&nbsp;<span class="op" id="8336330">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336334"><a href="/encoding/gob/type_test.go.html#8335749">t</a></span><span class="op" id="8336335">.</span><span class="ident" id="8336336">Errorf</span><span class="op" id="8336342">(</span><span class="string" id="8336343">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8336375">,</span>&nbsp;<span class="ident" id="8336377"><a href="/encoding/gob/type_test.go.html#8336249">str</a></span><span class="op" id="8336380">,</span>&nbsp;<span class="ident" id="8336382"><a href="/encoding/gob/type_test.go.html#8336280">expected</a></span><span class="op" id="8336390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8336393">}</span><br>
<span class="lineno"></span><span class="op" id="8336395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8336398">type</span>&nbsp;<span class="ident" id="8336403">Bar</span>&nbsp;<span class="keyword" id="8336407">struct</span>&nbsp;<span class="op" id="8336414">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336417">X</span>&nbsp;<span class="builtintype" id="8336419">string</span><br>
<span class="lineno"></span><span class="op" id="8336426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8336429">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8336510">type</span>&nbsp;<span class="ident" id="8336515">Foo</span>&nbsp;<span class="keyword" id="8336519">struct</span>&nbsp;<span class="op" id="8336526">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336529">A</span>&nbsp;<span class="builtintype" id="8336531">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336536">B</span>&nbsp;<span class="builtintype" id="8336538">int32</span>&nbsp;<span class="comment" id="8336544">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336564">C</span>&nbsp;<span class="builtintype" id="8336566">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336574">D</span>&nbsp;<span class="op" id="8336576">[</span><span class="op" id="8336577">]</span><span class="builtintype" id="8336578">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336584">E</span>&nbsp;<span class="op" id="8336586">*</span><span class="builtintype" id="8336587">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8336598">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336622">F</span>&nbsp;<span class="op" id="8336624">*</span><span class="op" id="8336625">*</span><span class="op" id="8336626">*</span><span class="op" id="8336627">*</span><span class="builtintype" id="8336628">float64</span>&nbsp;<span class="comment" id="8336636">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336660">G</span>&nbsp;<span class="op" id="8336662">*</span><span class="ident" id="8336663"><a href="/encoding/gob/type_test.go.html#8336403">Bar</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336668">H</span>&nbsp;<span class="op" id="8336670">*</span><span class="ident" id="8336671"><a href="/encoding/gob/type_test.go.html#8336403">Bar</a></span>&nbsp;<span class="comment" id="8336675">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336730">I</span>&nbsp;<span class="op" id="8336732">*</span><span class="ident" id="8336733"><a href="/encoding/gob/type_test.go.html#8336515">Foo</a></span>&nbsp;<span class="comment" id="8336737">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8336757">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8336760">func</span>&nbsp;<span class="ident" id="8336765">TestStructType</span><span class="op" id="8336779">(</span><span class="ident" id="8336780">t</span>&nbsp;<span class="op" id="8336782">*</span><span class="ident" id="8336783"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8336790">.</span><span class="ident" id="8336791">T</span><span class="op" id="8336792">)</span>&nbsp;<span class="op" id="8336794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336797">sstruct</span>&nbsp;<span class="op" id="8336805">:=</span>&nbsp;<span class="ident" id="8336808"><a href="/encoding/gob/type_test.go.html#8333434">getTypeUnlocked</a></span><span class="op" id="8336823">(</span><span class="string" id="8336824">&#34;Foo&#34;</span><span class="op" id="8336829">,</span>&nbsp;<span class="ident" id="8336831"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8336838">.</span><span class="ident" id="8336839">TypeOf</span><span class="op" id="8336845">(</span><span class="ident" id="8336846"><a href="/encoding/gob/type_test.go.html#8336515">Foo</a></span><span class="op" id="8336849">{</span><span class="op" id="8336850">}</span><span class="op" id="8336851">)</span><span class="op" id="8336852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336855">str</span>&nbsp;<span class="op" id="8336859">:=</span>&nbsp;<span class="ident" id="8336862"><a href="/encoding/gob/type_test.go.html#8336797">sstruct</a></span><span class="op" id="8336869">.</span><span class="builtintype" id="8336870">string</span><span class="op" id="8336876">(</span><span class="op" id="8336877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8336880">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8336937">expected</span>&nbsp;<span class="op" id="8336946">:=</span>&nbsp;<span class="string" id="8336949">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337064">if</span>&nbsp;<span class="ident" id="8337067"><a href="/encoding/gob/type_test.go.html#8336855">str</a></span>&nbsp;<span class="op" id="8337071">!=</span>&nbsp;<span class="ident" id="8337074"><a href="/encoding/gob/type_test.go.html#8336937">expected</a></span>&nbsp;<span class="op" id="8337083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337087"><a href="/encoding/gob/type_test.go.html#8336780">t</a></span><span class="op" id="8337088">.</span><span class="ident" id="8337089">Errorf</span><span class="op" id="8337095">(</span><span class="string" id="8337096">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8337131">,</span>&nbsp;<span class="ident" id="8337133"><a href="/encoding/gob/type_test.go.html#8336855">str</a></span><span class="op" id="8337136">,</span>&nbsp;<span class="ident" id="8337138"><a href="/encoding/gob/type_test.go.html#8336937">expected</a></span><span class="op" id="8337146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337149">}</span><br>
<span class="lineno"></span><span class="op" id="8337151">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8337154">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8337231">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8337268">func</span>&nbsp;<span class="ident" id="8337273">TestRegistration</span><span class="op" id="8337289">(</span><span class="ident" id="8337290">t</span>&nbsp;<span class="op" id="8337292">*</span><span class="ident" id="8337293"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8337300">.</span><span class="ident" id="8337301">T</span><span class="op" id="8337302">)</span>&nbsp;<span class="op" id="8337304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337307">type</span>&nbsp;<span class="ident" id="8337312">T</span>&nbsp;<span class="keyword" id="8337314">struct</span><span class="op" id="8337320">{</span>&nbsp;<span class="ident" id="8337322">a</span>&nbsp;<span class="builtintype" id="8337324">int</span>&nbsp;<span class="op" id="8337328">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337331"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8337339">(</span><span class="builtinfunc" id="8337340">new</span><span class="op" id="8337343">(</span><span class="ident" id="8337344"><a href="/encoding/gob/type_test.go.html#8337312">T</a></span><span class="op" id="8337345">)</span><span class="op" id="8337346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337349"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8337357">(</span><span class="builtinfunc" id="8337358">new</span><span class="op" id="8337361">(</span><span class="ident" id="8337362"><a href="/encoding/gob/type_test.go.html#8337312">T</a></span><span class="op" id="8337363">)</span><span class="op" id="8337364">)</span><br>
<span class="lineno"></span><span class="op" id="8337366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8337369">type</span>&nbsp;<span class="ident" id="8337374">N1</span>&nbsp;<span class="keyword" id="8337377">struct</span><span class="op" id="8337383">{</span><span class="op" id="8337384">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8337386">type</span>&nbsp;<span class="ident" id="8337391">N2</span>&nbsp;<span class="keyword" id="8337394">struct</span><span class="op" id="8337400">{</span><span class="op" id="8337401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8337404">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8337440">func</span>&nbsp;<span class="ident" id="8337445">TestRegistrationNaming</span><span class="op" id="8337467">(</span><span class="ident" id="8337468">t</span>&nbsp;<span class="op" id="8337470">*</span><span class="ident" id="8337471"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8337478">.</span><span class="ident" id="8337479">T</span><span class="op" id="8337480">)</span>&nbsp;<span class="op" id="8337482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337485">testCases</span>&nbsp;<span class="op" id="8337495">:=</span>&nbsp;<span class="op" id="8337498">[</span><span class="op" id="8337499">]</span><span class="keyword" id="8337500">struct</span>&nbsp;<span class="op" id="8337507">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337511">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8337516">interface</span><span class="op" id="8337525">{</span><span class="op" id="8337526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337530">name</span>&nbsp;<span class="builtintype" id="8337535">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337543">}</span><span class="op" id="8337544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337548">{</span><span class="op" id="8337549">&amp;</span><span class="ident" id="8337550"><a href="/encoding/gob/type_test.go.html#8337374">N1</a></span><span class="op" id="8337552">{</span><span class="op" id="8337553">}</span><span class="op" id="8337554">,</span>&nbsp;<span class="string" id="8337556">&#34;*gob.N1&#34;</span><span class="op" id="8337565">}</span><span class="op" id="8337566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337570">{</span><span class="ident" id="8337571"><a href="/encoding/gob/type_test.go.html#8337391">N2</a></span><span class="op" id="8337573">{</span><span class="op" id="8337574">}</span><span class="op" id="8337575">,</span>&nbsp;<span class="string" id="8337577">&#34;encoding/gob.N2&#34;</span><span class="op" id="8337594">}</span><span class="op" id="8337595">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337602">for</span>&nbsp;<span class="ident" id="8337606">_</span><span class="op" id="8337607">,</span>&nbsp;<span class="ident" id="8337609">tc</span>&nbsp;<span class="op" id="8337612">:=</span>&nbsp;<span class="keyword" id="8337615">range</span>&nbsp;<span class="ident" id="8337621"><a href="/encoding/gob/type_test.go.html#8337485">testCases</a></span>&nbsp;<span class="op" id="8337631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337635"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8337643">(</span><span class="ident" id="8337644"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8337646">.</span><span class="ident" id="8337647">t</span><span class="op" id="8337648">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337653">tct</span>&nbsp;<span class="op" id="8337657">:=</span>&nbsp;<span class="ident" id="8337660"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8337667">.</span><span class="ident" id="8337668">TypeOf</span><span class="op" id="8337674">(</span><span class="ident" id="8337675"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8337677">.</span><span class="ident" id="8337678">t</span><span class="op" id="8337679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337683"><a href="/encoding/gob/type.go.html#5162127">registerLock</a></span><span class="op" id="8337695">.</span><span class="ident" id="8337696">RLock</span><span class="op" id="8337701">(</span><span class="op" id="8337702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337706">ct</span>&nbsp;<span class="op" id="8337709">:=</span>&nbsp;<span class="ident" id="8337712"><a href="/encoding/gob/type.go.html#5162160">nameToConcreteType</a></span><span class="op" id="8337730">[</span><span class="ident" id="8337731"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8337733">.</span><span class="ident" id="8337734">name</span><span class="op" id="8337738">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337742"><a href="/encoding/gob/type.go.html#5162127">registerLock</a></span><span class="op" id="8337754">.</span><span class="ident" id="8337755">RUnlock</span><span class="op" id="8337762">(</span><span class="op" id="8337763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337767">if</span>&nbsp;<span class="ident" id="8337770"><a href="/encoding/gob/type_test.go.html#8337706">ct</a></span>&nbsp;<span class="op" id="8337773">!=</span>&nbsp;<span class="ident" id="8337776"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span>&nbsp;<span class="op" id="8337780">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337785"><a href="/encoding/gob/type_test.go.html#8337468">t</a></span><span class="op" id="8337786">.</span><span class="ident" id="8337787">Errorf</span><span class="op" id="8337793">(</span><span class="string" id="8337794">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8337832">,</span>&nbsp;<span class="ident" id="8337834"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8337836">.</span><span class="ident" id="8337837">name</span><span class="op" id="8337841">,</span>&nbsp;<span class="ident" id="8337843"><a href="/encoding/gob/type_test.go.html#8337706">ct</a></span><span class="op" id="8337845">,</span>&nbsp;<span class="ident" id="8337847"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span><span class="op" id="8337850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8337858">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337910">if</span>&nbsp;<span class="ident" id="8337913"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span><span class="op" id="8337916">.</span><span class="ident" id="8337917">Kind</span><span class="op" id="8337921">(</span><span class="op" id="8337922">)</span>&nbsp;<span class="op" id="8337924">==</span>&nbsp;<span class="ident" id="8337927"><a href="/encoding/gob/type_test.go.html#8333215">reflect</a></span><span class="op" id="8337934">.</span><span class="ident" id="8337935">Ptr</span>&nbsp;<span class="op" id="8337939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8337944"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span>&nbsp;<span class="op" id="8337948">=</span>&nbsp;<span class="ident" id="8337950"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span><span class="op" id="8337953">.</span><span class="ident" id="8337954">Elem</span><span class="op" id="8337958">(</span><span class="op" id="8337959">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8337963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8337967">if</span>&nbsp;<span class="ident" id="8337970">n</span>&nbsp;<span class="op" id="8337972">:=</span>&nbsp;<span class="ident" id="8337975"><a href="/encoding/gob/type.go.html#5162212">concreteTypeToName</a></span><span class="op" id="8337993">[</span><span class="ident" id="8337994"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span><span class="op" id="8337997">]</span><span class="op" id="8337998">;</span>&nbsp;<span class="ident" id="8338000"><a href="/encoding/gob/type_test.go.html#8337970">n</a></span>&nbsp;<span class="op" id="8338002">!=</span>&nbsp;<span class="ident" id="8338005"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8338007">.</span><span class="ident" id="8338008">name</span>&nbsp;<span class="op" id="8338013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338018"><a href="/encoding/gob/type_test.go.html#8337468">t</a></span><span class="op" id="8338019">.</span><span class="ident" id="8338020">Errorf</span><span class="op" id="8338026">(</span><span class="string" id="8338027">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8338067">,</span>&nbsp;<span class="ident" id="8338069"><a href="/encoding/gob/type_test.go.html#8337653">tct</a></span><span class="op" id="8338072">,</span>&nbsp;<span class="ident" id="8338074"><a href="/encoding/gob/type_test.go.html#8337970">n</a></span><span class="op" id="8338075">,</span>&nbsp;<span class="ident" id="8338077"><a href="/encoding/gob/type_test.go.html#8337609">tc</a></span><span class="op" id="8338079">.</span><span class="ident" id="8338080">name</span><span class="op" id="8338084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338091">}</span><br>
<span class="lineno">195</span><span class="op" id="8338093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8338096">func</span>&nbsp;<span class="ident" id="8338101">TestStressParallel</span><span class="op" id="8338119">(</span><span class="ident" id="8338120">t</span>&nbsp;<span class="op" id="8338122">*</span><span class="ident" id="8338123"><a href="/encoding/gob/type_test.go.html#8333226">testing</a></span><span class="op" id="8338130">.</span><span class="ident" id="8338131">T</span><span class="op" id="8338132">)</span>&nbsp;<span class="op" id="8338134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338137">type</span>&nbsp;<span class="ident" id="8338142">T2</span>&nbsp;<span class="keyword" id="8338145">struct</span><span class="op" id="8338151">{</span>&nbsp;<span class="ident" id="8338153">A</span>&nbsp;<span class="builtintype" id="8338155">int</span>&nbsp;<span class="op" id="8338159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338162">c</span>&nbsp;<span class="op" id="8338164">:=</span>&nbsp;<span class="builtinfunc" id="8338167">make</span><span class="op" id="8338171">(</span><span class="keyword" id="8338172">chan</span>&nbsp;<span class="builtintype" id="8338177">bool</span><span class="op" id="8338181">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338184">const</span>&nbsp;<span class="ident" id="8338190">N</span>&nbsp;<span class="op" id="8338192">=</span>&nbsp;<span class="num" id="8338194">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338198">for</span>&nbsp;<span class="ident" id="8338202">i</span>&nbsp;<span class="op" id="8338204">:=</span>&nbsp;<span class="num" id="8338207">0</span><span class="op" id="8338208">;</span>&nbsp;<span class="ident" id="8338210"><a href="/encoding/gob/type_test.go.html#8338202">i</a></span>&nbsp;<span class="op" id="8338212">&lt;</span>&nbsp;<span class="ident" id="8338214"><a href="/encoding/gob/type_test.go.html#8338190">N</a></span><span class="op" id="8338215">;</span>&nbsp;<span class="ident" id="8338217"><a href="/encoding/gob/type_test.go.html#8338202">i</a></span><span class="op" id="8338218">++</span>&nbsp;<span class="op" id="8338221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338225">go</span>&nbsp;<span class="keyword" id="8338228">func</span><span class="op" id="8338232">(</span><span class="op" id="8338233">)</span>&nbsp;<span class="op" id="8338235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338240">p</span>&nbsp;<span class="op" id="8338242">:=</span>&nbsp;<span class="builtinfunc" id="8338245">new</span><span class="op" id="8338248">(</span><span class="ident" id="8338249"><a href="/encoding/gob/type_test.go.html#8338142">T2</a></span><span class="op" id="8338251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338256"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8338264">(</span><span class="ident" id="8338265"><a href="/encoding/gob/type_test.go.html#8338240">p</a></span><span class="op" id="8338266">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338271">b</span>&nbsp;<span class="op" id="8338273">:=</span>&nbsp;<span class="builtinfunc" id="8338276">new</span><span class="op" id="8338279">(</span><span class="ident" id="8338280"><a href="/encoding/gob/type_test.go.html#8333206">bytes</a></span><span class="op" id="8338285">.</span><span class="ident" id="8338286">Buffer</span><span class="op" id="8338292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338297">enc</span>&nbsp;<span class="op" id="8338301">:=</span>&nbsp;<span class="ident" id="8338304"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8338314">(</span><span class="ident" id="8338315"><a href="/encoding/gob/type_test.go.html#8338271">b</a></span><span class="op" id="8338316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338321">err</span>&nbsp;<span class="op" id="8338325">:=</span>&nbsp;<span class="ident" id="8338328"><a href="/encoding/gob/type_test.go.html#8338297">enc</a></span><span class="op" id="8338331">.</span><span class="ident" id="8338332">Encode</span><span class="op" id="8338338">(</span><span class="ident" id="8338339"><a href="/encoding/gob/type_test.go.html#8338240">p</a></span><span class="op" id="8338340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338345">if</span>&nbsp;<span class="ident" id="8338348"><a href="/encoding/gob/type_test.go.html#8338321">err</a></span>&nbsp;<span class="op" id="8338352">!=</span>&nbsp;<span class="ident" id="8338355">nil</span>&nbsp;<span class="op" id="8338359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338365"><a href="/encoding/gob/type_test.go.html#8338120">t</a></span><span class="op" id="8338366">.</span><span class="ident" id="8338367">Error</span><span class="op" id="8338372">(</span><span class="string" id="8338373">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8338388">,</span>&nbsp;<span class="ident" id="8338390"><a href="/encoding/gob/type_test.go.html#8338321">err</a></span><span class="op" id="8338393">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338403">dec</span>&nbsp;<span class="op" id="8338407">:=</span>&nbsp;<span class="ident" id="8338410"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8338420">(</span><span class="ident" id="8338421"><a href="/encoding/gob/type_test.go.html#8338271">b</a></span><span class="op" id="8338422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338427"><a href="/encoding/gob/type_test.go.html#8338321">err</a></span>&nbsp;<span class="op" id="8338431">=</span>&nbsp;<span class="ident" id="8338433"><a href="/encoding/gob/type_test.go.html#8338403">dec</a></span><span class="op" id="8338436">.</span><span class="ident" id="8338437">Decode</span><span class="op" id="8338443">(</span><span class="ident" id="8338444"><a href="/encoding/gob/type_test.go.html#8338240">p</a></span><span class="op" id="8338445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338450">if</span>&nbsp;<span class="ident" id="8338453"><a href="/encoding/gob/type_test.go.html#8338321">err</a></span>&nbsp;<span class="op" id="8338457">!=</span>&nbsp;<span class="ident" id="8338460">nil</span>&nbsp;<span class="op" id="8338464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338470"><a href="/encoding/gob/type_test.go.html#8338120">t</a></span><span class="op" id="8338471">.</span><span class="ident" id="8338472">Error</span><span class="op" id="8338477">(</span><span class="string" id="8338478">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8338493">,</span>&nbsp;<span class="ident" id="8338495"><a href="/encoding/gob/type_test.go.html#8338321">err</a></span><span class="op" id="8338498">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8338508"><a href="/encoding/gob/type_test.go.html#8338162">c</a></span>&nbsp;<span class="op" id="8338510">&lt;-</span>&nbsp;<span class="ident" id="8338513">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338520">}</span><span class="op" id="8338521">(</span><span class="op" id="8338522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8338528">for</span>&nbsp;<span class="ident" id="8338532">i</span>&nbsp;<span class="op" id="8338534">:=</span>&nbsp;<span class="num" id="8338537">0</span><span class="op" id="8338538">;</span>&nbsp;<span class="ident" id="8338540"><a href="/encoding/gob/type_test.go.html#8338532">i</a></span>&nbsp;<span class="op" id="8338542">&lt;</span>&nbsp;<span class="ident" id="8338544"><a href="/encoding/gob/type_test.go.html#8338190">N</a></span><span class="op" id="8338545">;</span>&nbsp;<span class="ident" id="8338547"><a href="/encoding/gob/type_test.go.html#8338532">i</a></span><span class="op" id="8338548">++</span>&nbsp;<span class="op" id="8338551">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338555">&lt;-</span><span class="ident" id="8338557"><a href="/encoding/gob/type_test.go.html#8338162">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8338560">}</span><br>
<span class="lineno"></span><span class="op" id="8338562">}</span>
</div>
</body>
</html>
