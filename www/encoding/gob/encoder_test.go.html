<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6848648">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6848703">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6848757">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6848808">package</span>&nbsp;<span class="ident" id="6848816">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6848821">import</span>&nbsp;<span class="op" id="6848828">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848831">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848840">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848847">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848853">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848864">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6848875">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6848885">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6848888">//&nbsp;Test&nbsp;basic&nbsp;operations&nbsp;in&nbsp;a&nbsp;safe&nbsp;manner.</span><br>
<span class="lineno"></span><span class="keyword" id="6848931">func</span>&nbsp;<span class="ident" id="6848936">TestBasicEncoderDecoder</span><span class="op" id="6848959">(</span><span class="ident" id="6848960">t</span>&nbsp;<span class="op" id="6848962">*</span><span class="ident" id="6848963"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6848970">.</span><span class="ident" id="6848971">T</span><span class="op" id="6848972">)</span>&nbsp;<span class="op" id="6848974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6848977">var</span>&nbsp;<span class="ident" id="6848981">values</span>&nbsp;<span class="op" id="6848988">=</span>&nbsp;<span class="op" id="6848990">[</span><span class="op" id="6848991">]</span><span class="keyword" id="6848992">interface</span><span class="op" id="6849001">{</span><span class="op" id="6849002">}</span><span class="op" id="6849003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849007">true</span><span class="op" id="6849011">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849015">int</span><span class="op" id="6849018">(</span><span class="num" id="6849019">123</span><span class="op" id="6849022">)</span><span class="op" id="6849023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849027">int8</span><span class="op" id="6849031">(</span><span class="num" id="6849032">123</span><span class="op" id="6849035">)</span><span class="op" id="6849036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849040">int16</span><span class="op" id="6849045">(</span><span class="op" id="6849046">-</span><span class="num" id="6849047">12345</span><span class="op" id="6849052">)</span><span class="op" id="6849053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849057">int32</span><span class="op" id="6849062">(</span><span class="num" id="6849063">123456</span><span class="op" id="6849069">)</span><span class="op" id="6849070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849074">int64</span><span class="op" id="6849079">(</span><span class="op" id="6849080">-</span><span class="num" id="6849081">1234567</span><span class="op" id="6849088">)</span><span class="op" id="6849089">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849093">uint</span><span class="op" id="6849097">(</span><span class="num" id="6849098">123</span><span class="op" id="6849101">)</span><span class="op" id="6849102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849106">uint8</span><span class="op" id="6849111">(</span><span class="num" id="6849112">123</span><span class="op" id="6849115">)</span><span class="op" id="6849116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849120">uint16</span><span class="op" id="6849126">(</span><span class="num" id="6849127">12345</span><span class="op" id="6849132">)</span><span class="op" id="6849133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849137">uint32</span><span class="op" id="6849143">(</span><span class="num" id="6849144">123456</span><span class="op" id="6849150">)</span><span class="op" id="6849151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849155">uint64</span><span class="op" id="6849161">(</span><span class="num" id="6849162">1234567</span><span class="op" id="6849169">)</span><span class="op" id="6849170">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849174">uintptr</span><span class="op" id="6849181">(</span><span class="num" id="6849182">12345678</span><span class="op" id="6849190">)</span><span class="op" id="6849191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849195">float32</span><span class="op" id="6849202">(</span><span class="num" id="6849203">1.2345</span><span class="op" id="6849209">)</span><span class="op" id="6849210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849214">float64</span><span class="op" id="6849221">(</span><span class="num" id="6849222">1.2345678</span><span class="op" id="6849231">)</span><span class="op" id="6849232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849236">complex64</span><span class="op" id="6849245">(</span><span class="num" id="6849246">1.2345</span>&nbsp;<span class="op" id="6849253">+</span>&nbsp;<span class="num" id="6849255">2.3456i</span><span class="op" id="6849262">)</span><span class="op" id="6849263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849267">complex128</span><span class="op" id="6849277">(</span><span class="num" id="6849278">1.2345678</span>&nbsp;<span class="op" id="6849288">+</span>&nbsp;<span class="num" id="6849290">2.3456789i</span><span class="op" id="6849300">)</span><span class="op" id="6849301">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849305">[</span><span class="op" id="6849306">]</span><span class="builtintype" id="6849307">byte</span><span class="op" id="6849311">(</span><span class="string" id="6849312">&#34;hello&#34;</span><span class="op" id="6849319">)</span><span class="op" id="6849320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6849324">string</span><span class="op" id="6849330">(</span><span class="string" id="6849331">&#34;hello&#34;</span><span class="op" id="6849338">)</span><span class="op" id="6849339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6849345">for</span>&nbsp;<span class="ident" id="6849349">_</span><span class="op" id="6849350">,</span>&nbsp;<span class="ident" id="6849352">value</span>&nbsp;<span class="op" id="6849358">:=</span>&nbsp;<span class="keyword" id="6849361">range</span>&nbsp;<span class="ident" id="6849367"><a href="/encoding/gob/encoder_test.go.html#6848981">values</a></span>&nbsp;<span class="op" id="6849374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849378">b</span>&nbsp;<span class="op" id="6849380">:=</span>&nbsp;<span class="builtinfunc" id="6849383">new</span><span class="op" id="6849386">(</span><span class="ident" id="6849387"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6849392">.</span><span class="ident" id="6849393">Buffer</span><span class="op" id="6849399">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849403">enc</span>&nbsp;<span class="op" id="6849407">:=</span>&nbsp;<span class="ident" id="6849410"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6849420">(</span><span class="ident" id="6849421"><a href="/encoding/gob/encoder_test.go.html#6849378">b</a></span><span class="op" id="6849422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849426">err</span>&nbsp;<span class="op" id="6849430">:=</span>&nbsp;<span class="ident" id="6849433"><a href="/encoding/gob/encoder_test.go.html#6849403">enc</a></span><span class="op" id="6849436">.</span><span class="ident" id="6849437">Encode</span><span class="op" id="6849443">(</span><span class="ident" id="6849444"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6849453">if</span>&nbsp;<span class="ident" id="6849456"><a href="/encoding/gob/encoder_test.go.html#6849426">err</a></span>&nbsp;<span class="op" id="6849460">!=</span>&nbsp;<span class="ident" id="6849463">nil</span>&nbsp;<span class="op" id="6849467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849472"><a href="/encoding/gob/encoder_test.go.html#6848960">t</a></span><span class="op" id="6849473">.</span><span class="ident" id="6849474">Error</span><span class="op" id="6849479">(</span><span class="string" id="6849480">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6849495">,</span>&nbsp;<span class="ident" id="6849497"><a href="/encoding/gob/encoder_test.go.html#6849426">err</a></span><span class="op" id="6849500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849504">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849508">dec</span>&nbsp;<span class="op" id="6849512">:=</span>&nbsp;<span class="ident" id="6849515"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6849525">(</span><span class="ident" id="6849526"><a href="/encoding/gob/encoder_test.go.html#6849378">b</a></span><span class="op" id="6849527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849531">result</span>&nbsp;<span class="op" id="6849538">:=</span>&nbsp;<span class="ident" id="6849541"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6849548">.</span><span class="ident" id="6849549">New</span><span class="op" id="6849552">(</span><span class="ident" id="6849553"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6849560">.</span><span class="ident" id="6849561">TypeOf</span><span class="op" id="6849567">(</span><span class="ident" id="6849568"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849573">)</span><span class="op" id="6849574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849578"><a href="/encoding/gob/encoder_test.go.html#6849426">err</a></span>&nbsp;<span class="op" id="6849582">=</span>&nbsp;<span class="ident" id="6849584"><a href="/encoding/gob/encoder_test.go.html#6849508">dec</a></span><span class="op" id="6849587">.</span><span class="ident" id="6849588">Decode</span><span class="op" id="6849594">(</span><span class="ident" id="6849595"><a href="/encoding/gob/encoder_test.go.html#6849531">result</a></span><span class="op" id="6849601">.</span><span class="ident" id="6849602">Interface</span><span class="op" id="6849611">(</span><span class="op" id="6849612">)</span><span class="op" id="6849613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6849617">if</span>&nbsp;<span class="ident" id="6849620"><a href="/encoding/gob/encoder_test.go.html#6849426">err</a></span>&nbsp;<span class="op" id="6849624">!=</span>&nbsp;<span class="ident" id="6849627">nil</span>&nbsp;<span class="op" id="6849631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849636"><a href="/encoding/gob/encoder_test.go.html#6848960">t</a></span><span class="op" id="6849637">.</span><span class="ident" id="6849638">Fatalf</span><span class="op" id="6849644">(</span><span class="string" id="6849645">&#34;error&nbsp;decoding&nbsp;%T:&nbsp;%v:&#34;</span><span class="op" id="6849669">,</span>&nbsp;<span class="ident" id="6849671"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6849678">.</span><span class="ident" id="6849679">TypeOf</span><span class="op" id="6849685">(</span><span class="ident" id="6849686"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849691">)</span><span class="op" id="6849692">,</span>&nbsp;<span class="ident" id="6849694"><a href="/encoding/gob/encoder_test.go.html#6849426">err</a></span><span class="op" id="6849697">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6849705">if</span>&nbsp;<span class="op" id="6849708">!</span><span class="ident" id="6849709"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6849716">.</span><span class="ident" id="6849717">DeepEqual</span><span class="op" id="6849726">(</span><span class="ident" id="6849727"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849732">,</span>&nbsp;<span class="ident" id="6849734"><a href="/encoding/gob/encoder_test.go.html#6849531">result</a></span><span class="op" id="6849740">.</span><span class="ident" id="6849741">Elem</span><span class="op" id="6849745">(</span><span class="op" id="6849746">)</span><span class="op" id="6849747">.</span><span class="ident" id="6849748">Interface</span><span class="op" id="6849757">(</span><span class="op" id="6849758">)</span><span class="op" id="6849759">)</span>&nbsp;<span class="op" id="6849761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849766"><a href="/encoding/gob/encoder_test.go.html#6848960">t</a></span><span class="op" id="6849767">.</span><span class="ident" id="6849768">Fatalf</span><span class="op" id="6849774">(</span><span class="string" id="6849775">&#34;%T:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6849799">,</span>&nbsp;<span class="ident" id="6849801"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849806">,</span>&nbsp;<span class="ident" id="6849808"><a href="/encoding/gob/encoder_test.go.html#6849352">value</a></span><span class="op" id="6849813">,</span>&nbsp;<span class="ident" id="6849815"><a href="/encoding/gob/encoder_test.go.html#6849531">result</a></span><span class="op" id="6849821">.</span><span class="ident" id="6849822">Elem</span><span class="op" id="6849826">(</span><span class="op" id="6849827">)</span><span class="op" id="6849828">.</span><span class="ident" id="6849829">Interface</span><span class="op" id="6849838">(</span><span class="op" id="6849839">)</span><span class="op" id="6849840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6849847">}</span><br>
<span class="lineno">55</span><span class="op" id="6849849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6849852">type</span>&nbsp;<span class="ident" id="6849857">ET0</span>&nbsp;<span class="keyword" id="6849861">struct</span>&nbsp;<span class="op" id="6849868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849871">A</span>&nbsp;<span class="builtintype" id="6849873">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849878">B</span>&nbsp;<span class="builtintype" id="6849880">string</span><br>
<span class="lineno">60</span><span class="op" id="6849887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6849890">type</span>&nbsp;<span class="ident" id="6849895">ET2</span>&nbsp;<span class="keyword" id="6849899">struct</span>&nbsp;<span class="op" id="6849906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849909">X</span>&nbsp;<span class="builtintype" id="6849911">string</span><br>
<span class="lineno"></span><span class="op" id="6849918">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6849921">type</span>&nbsp;<span class="ident" id="6849926">ET1</span>&nbsp;<span class="keyword" id="6849930">struct</span>&nbsp;<span class="op" id="6849937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849940">A</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6849945">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849950">Et2</span>&nbsp;&nbsp;<span class="op" id="6849955">*</span><span class="ident" id="6849956"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6849961">Next</span>&nbsp;<span class="op" id="6849966">*</span><span class="ident" id="6849967"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><br>
<span class="lineno">70</span><span class="op" id="6849971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6849974">//&nbsp;Like&nbsp;ET1&nbsp;but&nbsp;with&nbsp;a&nbsp;different&nbsp;name&nbsp;for&nbsp;a&nbsp;field</span><br>
<span class="lineno"></span><span class="keyword" id="6850024">type</span>&nbsp;<span class="ident" id="6850029">ET3</span>&nbsp;<span class="keyword" id="6850033">struct</span>&nbsp;<span class="op" id="6850040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850043">A</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6850057">int</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850062">Et2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6850076">*</span><span class="ident" id="6850077"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850082">DifferentNext</span>&nbsp;<span class="op" id="6850096">*</span><span class="ident" id="6850097"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><br>
<span class="lineno"></span><span class="op" id="6850101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6850104">//&nbsp;Like&nbsp;ET1&nbsp;but&nbsp;with&nbsp;a&nbsp;different&nbsp;type&nbsp;for&nbsp;a&nbsp;field</span><br>
<span class="lineno">80</span><span class="keyword" id="6850154">type</span>&nbsp;<span class="ident" id="6850159">ET4</span>&nbsp;<span class="keyword" id="6850163">struct</span>&nbsp;<span class="op" id="6850170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850173">A</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6850178">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850183">Et2</span>&nbsp;&nbsp;<span class="builtintype" id="6850188">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850197">Next</span>&nbsp;<span class="builtintype" id="6850202">int</span><br>
<span class="lineno"></span><span class="op" id="6850206">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="6850209">func</span>&nbsp;<span class="ident" id="6850214">TestEncoderDecoder</span><span class="op" id="6850232">(</span><span class="ident" id="6850233">t</span>&nbsp;<span class="op" id="6850235">*</span><span class="ident" id="6850236"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6850243">.</span><span class="ident" id="6850244">T</span><span class="op" id="6850245">)</span>&nbsp;<span class="op" id="6850247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850250">b</span>&nbsp;<span class="op" id="6850252">:=</span>&nbsp;<span class="builtinfunc" id="6850255">new</span><span class="op" id="6850258">(</span><span class="ident" id="6850259"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6850264">.</span><span class="ident" id="6850265">Buffer</span><span class="op" id="6850271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850274">enc</span>&nbsp;<span class="op" id="6850278">:=</span>&nbsp;<span class="ident" id="6850281"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6850291">(</span><span class="ident" id="6850292"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850296">et0</span>&nbsp;<span class="op" id="6850300">:=</span>&nbsp;<span class="builtinfunc" id="6850303">new</span><span class="op" id="6850306">(</span><span class="ident" id="6850307"><a href="/encoding/gob/encoder_test.go.html#6849857">ET0</a></span><span class="op" id="6850310">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850313"><a href="/encoding/gob/encoder_test.go.html#6850296">et0</a></span><span class="op" id="6850316">.</span><span class="ident" id="6850317">A</span>&nbsp;<span class="op" id="6850319">=</span>&nbsp;<span class="num" id="6850321">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850324"><a href="/encoding/gob/encoder_test.go.html#6850296">et0</a></span><span class="op" id="6850327">.</span><span class="ident" id="6850328">B</span>&nbsp;<span class="op" id="6850330">=</span>&nbsp;<span class="string" id="6850332">&#34;gobs&nbsp;of&nbsp;fun&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850347">err</span>&nbsp;<span class="op" id="6850351">:=</span>&nbsp;<span class="ident" id="6850354"><a href="/encoding/gob/encoder_test.go.html#6850274">enc</a></span><span class="op" id="6850357">.</span><span class="ident" id="6850358">Encode</span><span class="op" id="6850364">(</span><span class="ident" id="6850365"><a href="/encoding/gob/encoder_test.go.html#6850296">et0</a></span><span class="op" id="6850368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6850371">if</span>&nbsp;<span class="ident" id="6850374"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6850378">!=</span>&nbsp;<span class="ident" id="6850381">nil</span>&nbsp;<span class="op" id="6850385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850389"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6850390">.</span><span class="ident" id="6850391">Error</span><span class="op" id="6850396">(</span><span class="string" id="6850397">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6850412">,</span>&nbsp;<span class="ident" id="6850414"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6850417">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850423">//fmt.Printf(&#34;%&nbsp;x&nbsp;%q\n&#34;,&nbsp;b,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850455">//Debug(b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850467">dec</span>&nbsp;<span class="op" id="6850471">:=</span>&nbsp;<span class="ident" id="6850474"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6850484">(</span><span class="ident" id="6850485"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850489">newEt0</span>&nbsp;<span class="op" id="6850496">:=</span>&nbsp;<span class="builtinfunc" id="6850499">new</span><span class="op" id="6850502">(</span><span class="ident" id="6850503"><a href="/encoding/gob/encoder_test.go.html#6849857">ET0</a></span><span class="op" id="6850506">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850509"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6850513">=</span>&nbsp;<span class="ident" id="6850515"><a href="/encoding/gob/encoder_test.go.html#6850467">dec</a></span><span class="op" id="6850518">.</span><span class="ident" id="6850519">Decode</span><span class="op" id="6850525">(</span><span class="ident" id="6850526"><a href="/encoding/gob/encoder_test.go.html#6850489">newEt0</a></span><span class="op" id="6850532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6850535">if</span>&nbsp;<span class="ident" id="6850538"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6850542">!=</span>&nbsp;<span class="ident" id="6850545">nil</span>&nbsp;<span class="op" id="6850549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850553"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6850554">.</span><span class="ident" id="6850555">Fatal</span><span class="op" id="6850560">(</span><span class="string" id="6850561">&#34;error&nbsp;decoding&nbsp;ET0:&#34;</span><span class="op" id="6850582">,</span>&nbsp;<span class="ident" id="6850584"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6850587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6850594">if</span>&nbsp;<span class="op" id="6850597">!</span><span class="ident" id="6850598"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6850605">.</span><span class="ident" id="6850606">DeepEqual</span><span class="op" id="6850615">(</span><span class="ident" id="6850616"><a href="/encoding/gob/encoder_test.go.html#6850296">et0</a></span><span class="op" id="6850619">,</span>&nbsp;<span class="ident" id="6850621"><a href="/encoding/gob/encoder_test.go.html#6850489">newEt0</a></span><span class="op" id="6850627">)</span>&nbsp;<span class="op" id="6850629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850633"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6850634">.</span><span class="ident" id="6850635">Fatalf</span><span class="op" id="6850641">(</span><span class="string" id="6850642">&#34;invalid&nbsp;data&nbsp;for&nbsp;et0:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="6850687">,</span>&nbsp;<span class="op" id="6850689">*</span><span class="ident" id="6850690"><a href="/encoding/gob/encoder_test.go.html#6850296">et0</a></span><span class="op" id="6850693">,</span>&nbsp;<span class="op" id="6850695">*</span><span class="ident" id="6850696"><a href="/encoding/gob/encoder_test.go.html#6850489">newEt0</a></span><span class="op" id="6850702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6850708">if</span>&nbsp;<span class="ident" id="6850711"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850712">.</span><span class="ident" id="6850713">Len</span><span class="op" id="6850716">(</span><span class="op" id="6850717">)</span>&nbsp;<span class="op" id="6850719">!=</span>&nbsp;<span class="num" id="6850722">0</span>&nbsp;<span class="op" id="6850724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850728"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6850729">.</span><span class="ident" id="6850730">Error</span><span class="op" id="6850735">(</span><span class="string" id="6850736">&#34;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="6850749">,</span>&nbsp;<span class="ident" id="6850751"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850752">.</span><span class="ident" id="6850753">Len</span><span class="op" id="6850756">(</span><span class="op" id="6850757">)</span><span class="op" id="6850758">,</span>&nbsp;<span class="string" id="6850760">&#34;bytes&nbsp;left&#34;</span><span class="op" id="6850772">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6850778">//&nbsp;&nbsp;&nbsp;&nbspt.FailNow()</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850795"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span>&nbsp;<span class="op" id="6850797">=</span>&nbsp;<span class="builtinfunc" id="6850799">new</span><span class="op" id="6850802">(</span><span class="ident" id="6850803"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6850808">.</span><span class="ident" id="6850809">Buffer</span><span class="op" id="6850815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850818"><a href="/encoding/gob/encoder_test.go.html#6850274">enc</a></span>&nbsp;<span class="op" id="6850822">=</span>&nbsp;<span class="ident" id="6850824"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6850834">(</span><span class="ident" id="6850835"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850836">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850839">et1</span>&nbsp;<span class="op" id="6850843">:=</span>&nbsp;<span class="builtinfunc" id="6850846">new</span><span class="op" id="6850849">(</span><span class="ident" id="6850850"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><span class="op" id="6850853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850856"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6850859">.</span><span class="ident" id="6850860">A</span>&nbsp;<span class="op" id="6850862">=</span>&nbsp;<span class="num" id="6850864">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850867"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6850870">.</span><span class="ident" id="6850871">Et2</span>&nbsp;<span class="op" id="6850875">=</span>&nbsp;<span class="builtinfunc" id="6850877">new</span><span class="op" id="6850880">(</span><span class="ident" id="6850881"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><span class="op" id="6850884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850887"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6850891">=</span>&nbsp;<span class="ident" id="6850893"><a href="/encoding/gob/encoder_test.go.html#6850274">enc</a></span><span class="op" id="6850896">.</span><span class="ident" id="6850897">Encode</span><span class="op" id="6850903">(</span><span class="ident" id="6850904"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6850907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6850910">if</span>&nbsp;<span class="ident" id="6850913"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6850917">!=</span>&nbsp;<span class="ident" id="6850920">nil</span>&nbsp;<span class="op" id="6850924">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850928"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6850929">.</span><span class="ident" id="6850930">Error</span><span class="op" id="6850935">(</span><span class="string" id="6850936">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6850951">,</span>&nbsp;<span class="ident" id="6850953"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6850956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850962"><a href="/encoding/gob/encoder_test.go.html#6850467">dec</a></span>&nbsp;<span class="op" id="6850966">=</span>&nbsp;<span class="ident" id="6850968"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6850978">(</span><span class="ident" id="6850979"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6850980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6850983">newEt1</span>&nbsp;<span class="op" id="6850990">:=</span>&nbsp;<span class="builtinfunc" id="6850993">new</span><span class="op" id="6850996">(</span><span class="ident" id="6850997"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><span class="op" id="6851000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851003"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851007">=</span>&nbsp;<span class="ident" id="6851009"><a href="/encoding/gob/encoder_test.go.html#6850467">dec</a></span><span class="op" id="6851012">.</span><span class="ident" id="6851013">Decode</span><span class="op" id="6851019">(</span><span class="ident" id="6851020"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851026">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851029">if</span>&nbsp;<span class="ident" id="6851032"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851036">!=</span>&nbsp;<span class="ident" id="6851039">nil</span>&nbsp;<span class="op" id="6851043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851047"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851048">.</span><span class="ident" id="6851049">Fatal</span><span class="op" id="6851054">(</span><span class="string" id="6851055">&#34;error&nbsp;decoding&nbsp;ET1:&#34;</span><span class="op" id="6851076">,</span>&nbsp;<span class="ident" id="6851078"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6851081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851088">if</span>&nbsp;<span class="op" id="6851091">!</span><span class="ident" id="6851092"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6851099">.</span><span class="ident" id="6851100">DeepEqual</span><span class="op" id="6851109">(</span><span class="ident" id="6851110"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851113">,</span>&nbsp;<span class="ident" id="6851115"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851121">)</span>&nbsp;<span class="op" id="6851123">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851127"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851128">.</span><span class="ident" id="6851129">Fatalf</span><span class="op" id="6851135">(</span><span class="string" id="6851136">&#34;invalid&nbsp;data&nbsp;for&nbsp;et1:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="6851181">,</span>&nbsp;<span class="op" id="6851183">*</span><span class="ident" id="6851184"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851187">,</span>&nbsp;<span class="op" id="6851189">*</span><span class="ident" id="6851190"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851202">if</span>&nbsp;<span class="ident" id="6851205"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6851206">.</span><span class="ident" id="6851207">Len</span><span class="op" id="6851210">(</span><span class="op" id="6851211">)</span>&nbsp;<span class="op" id="6851213">!=</span>&nbsp;<span class="num" id="6851216">0</span>&nbsp;<span class="op" id="6851218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851222"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851223">.</span><span class="ident" id="6851224">Error</span><span class="op" id="6851229">(</span><span class="string" id="6851230">&#34;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="6851243">,</span>&nbsp;<span class="ident" id="6851245"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6851246">.</span><span class="ident" id="6851247">Len</span><span class="op" id="6851250">(</span><span class="op" id="6851251">)</span><span class="op" id="6851252">,</span>&nbsp;<span class="string" id="6851254">&#34;bytes&nbsp;left&#34;</span><span class="op" id="6851266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851269">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851273"><a href="/encoding/gob/encoder_test.go.html#6850274">enc</a></span><span class="op" id="6851276">.</span><span class="ident" id="6851277">Encode</span><span class="op" id="6851283">(</span><span class="ident" id="6851284"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851290"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span>&nbsp;<span class="op" id="6851297">=</span>&nbsp;<span class="builtinfunc" id="6851299">new</span><span class="op" id="6851302">(</span><span class="ident" id="6851303"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><span class="op" id="6851306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851309"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851313">=</span>&nbsp;<span class="ident" id="6851315"><a href="/encoding/gob/encoder_test.go.html#6850467">dec</a></span><span class="op" id="6851318">.</span><span class="ident" id="6851319">Decode</span><span class="op" id="6851325">(</span><span class="ident" id="6851326"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851335">if</span>&nbsp;<span class="ident" id="6851338"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851342">!=</span>&nbsp;<span class="ident" id="6851345">nil</span>&nbsp;<span class="op" id="6851349">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851353"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851354">.</span><span class="ident" id="6851355">Fatal</span><span class="op" id="6851360">(</span><span class="string" id="6851361">&#34;round&nbsp;2:&nbsp;error&nbsp;decoding&nbsp;ET1:&#34;</span><span class="op" id="6851391">,</span>&nbsp;<span class="ident" id="6851393"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6851396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851402">if</span>&nbsp;<span class="op" id="6851405">!</span><span class="ident" id="6851406"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6851413">.</span><span class="ident" id="6851414">DeepEqual</span><span class="op" id="6851423">(</span><span class="ident" id="6851424"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851427">,</span>&nbsp;<span class="ident" id="6851429"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851435">)</span>&nbsp;<span class="op" id="6851437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851441"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851442">.</span><span class="ident" id="6851443">Fatalf</span><span class="op" id="6851449">(</span><span class="string" id="6851450">&#34;round&nbsp;2:&nbsp;invalid&nbsp;data&nbsp;for&nbsp;et1:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="6851504">,</span>&nbsp;<span class="op" id="6851506">*</span><span class="ident" id="6851507"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851510">,</span>&nbsp;<span class="op" id="6851512">*</span><span class="ident" id="6851513"><a href="/encoding/gob/encoder_test.go.html#6850983">newEt1</a></span><span class="op" id="6851519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851522">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851525">if</span>&nbsp;<span class="ident" id="6851528"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6851529">.</span><span class="ident" id="6851530">Len</span><span class="op" id="6851533">(</span><span class="op" id="6851534">)</span>&nbsp;<span class="op" id="6851536">!=</span>&nbsp;<span class="num" id="6851539">0</span>&nbsp;<span class="op" id="6851541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851545"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851546">.</span><span class="ident" id="6851547">Error</span><span class="op" id="6851552">(</span><span class="string" id="6851553">&#34;round&nbsp;2:&nbsp;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="6851575">,</span>&nbsp;<span class="ident" id="6851577"><a href="/encoding/gob/encoder_test.go.html#6850250">b</a></span><span class="op" id="6851578">.</span><span class="ident" id="6851579">Len</span><span class="op" id="6851582">(</span><span class="op" id="6851583">)</span><span class="op" id="6851584">,</span>&nbsp;<span class="string" id="6851586">&#34;bytes&nbsp;left&#34;</span><span class="op" id="6851598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6851605">//&nbsp;Now&nbsp;test&nbsp;with&nbsp;a&nbsp;running&nbsp;encoder/decoder&nbsp;pair&nbsp;that&nbsp;we&nbsp;recognize&nbsp;a&nbsp;type&nbsp;mismatch.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851689"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851693">=</span>&nbsp;<span class="ident" id="6851695"><a href="/encoding/gob/encoder_test.go.html#6850274">enc</a></span><span class="op" id="6851698">.</span><span class="ident" id="6851699">Encode</span><span class="op" id="6851705">(</span><span class="ident" id="6851706"><a href="/encoding/gob/encoder_test.go.html#6850839">et1</a></span><span class="op" id="6851709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851712">if</span>&nbsp;<span class="ident" id="6851715"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851719">!=</span>&nbsp;<span class="ident" id="6851722">nil</span>&nbsp;<span class="op" id="6851726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851730"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851731">.</span><span class="ident" id="6851732">Error</span><span class="op" id="6851737">(</span><span class="string" id="6851738">&#34;round&nbsp;3:&nbsp;encoder&nbsp;fail:&#34;</span><span class="op" id="6851762">,</span>&nbsp;<span class="ident" id="6851764"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span><span class="op" id="6851767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851773">newEt2</span>&nbsp;<span class="op" id="6851780">:=</span>&nbsp;<span class="builtinfunc" id="6851783">new</span><span class="op" id="6851786">(</span><span class="ident" id="6851787"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><span class="op" id="6851790">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851793"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851797">=</span>&nbsp;<span class="ident" id="6851799"><a href="/encoding/gob/encoder_test.go.html#6850467">dec</a></span><span class="op" id="6851802">.</span><span class="ident" id="6851803">Decode</span><span class="op" id="6851809">(</span><span class="ident" id="6851810"><a href="/encoding/gob/encoder_test.go.html#6851773">newEt2</a></span><span class="op" id="6851816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6851819">if</span>&nbsp;<span class="ident" id="6851822"><a href="/encoding/gob/encoder_test.go.html#6850347">err</a></span>&nbsp;<span class="op" id="6851826">==</span>&nbsp;<span class="ident" id="6851829">nil</span>&nbsp;<span class="op" id="6851833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6851837"><a href="/encoding/gob/encoder_test.go.html#6850233">t</a></span><span class="op" id="6851838">.</span><span class="ident" id="6851839">Fatal</span><span class="op" id="6851844">(</span><span class="string" id="6851845">&#34;round&nbsp;3:&nbsp;expected&nbsp;`bad&nbsp;type&#39;&nbsp;error&nbsp;decoding&nbsp;ET2&#34;</span><span class="op" id="6851894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6851897">}</span><br>
<span class="lineno"></span><span class="op" id="6851899">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="6851902">//&nbsp;Run&nbsp;one&nbsp;value&nbsp;through&nbsp;the&nbsp;encoder/decoder,&nbsp;but&nbsp;use&nbsp;the&nbsp;wrong&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="6851972">//&nbsp;Input&nbsp;is&nbsp;always&nbsp;an&nbsp;ET1;&nbsp;we&nbsp;compare&nbsp;it&nbsp;to&nbsp;whatever&nbsp;is&nbsp;under&nbsp;&#39;e&#39;.</span><br>
<span class="lineno"></span><span class="keyword" id="6852039">func</span>&nbsp;<span class="ident" id="6852044">badTypeCheck</span><span class="op" id="6852056">(</span><span class="ident" id="6852057">e</span>&nbsp;<span class="keyword" id="6852059">interface</span><span class="op" id="6852068">{</span><span class="op" id="6852069">}</span><span class="op" id="6852070">,</span>&nbsp;<span class="ident" id="6852072">shouldFail</span>&nbsp;<span class="builtintype" id="6852083">bool</span><span class="op" id="6852087">,</span>&nbsp;<span class="ident" id="6852089">msg</span>&nbsp;<span class="builtintype" id="6852093">string</span><span class="op" id="6852099">,</span>&nbsp;<span class="ident" id="6852101">t</span>&nbsp;<span class="op" id="6852103">*</span><span class="ident" id="6852104"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6852111">.</span><span class="ident" id="6852112">T</span><span class="op" id="6852113">)</span>&nbsp;<span class="op" id="6852115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852118">b</span>&nbsp;<span class="op" id="6852120">:=</span>&nbsp;<span class="builtinfunc" id="6852123">new</span><span class="op" id="6852126">(</span><span class="ident" id="6852127"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6852132">.</span><span class="ident" id="6852133">Buffer</span><span class="op" id="6852139">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852142">enc</span>&nbsp;<span class="op" id="6852146">:=</span>&nbsp;<span class="ident" id="6852149"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6852159">(</span><span class="ident" id="6852160"><a href="/encoding/gob/encoder_test.go.html#6852118">b</a></span><span class="op" id="6852161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852164">et1</span>&nbsp;<span class="op" id="6852168">:=</span>&nbsp;<span class="builtinfunc" id="6852171">new</span><span class="op" id="6852174">(</span><span class="ident" id="6852175"><a href="/encoding/gob/encoder_test.go.html#6849926">ET1</a></span><span class="op" id="6852178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852181"><a href="/encoding/gob/encoder_test.go.html#6852164">et1</a></span><span class="op" id="6852184">.</span><span class="ident" id="6852185">A</span>&nbsp;<span class="op" id="6852187">=</span>&nbsp;<span class="num" id="6852189">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852192"><a href="/encoding/gob/encoder_test.go.html#6852164">et1</a></span><span class="op" id="6852195">.</span><span class="ident" id="6852196">Et2</span>&nbsp;<span class="op" id="6852200">=</span>&nbsp;<span class="builtinfunc" id="6852202">new</span><span class="op" id="6852205">(</span><span class="ident" id="6852206"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><span class="op" id="6852209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852212">err</span>&nbsp;<span class="op" id="6852216">:=</span>&nbsp;<span class="ident" id="6852219"><a href="/encoding/gob/encoder_test.go.html#6852142">enc</a></span><span class="op" id="6852222">.</span><span class="ident" id="6852223">Encode</span><span class="op" id="6852229">(</span><span class="ident" id="6852230"><a href="/encoding/gob/encoder_test.go.html#6852164">et1</a></span><span class="op" id="6852233">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6852236">if</span>&nbsp;<span class="ident" id="6852239"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span>&nbsp;<span class="op" id="6852243">!=</span>&nbsp;<span class="ident" id="6852246">nil</span>&nbsp;<span class="op" id="6852250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852254"><a href="/encoding/gob/encoder_test.go.html#6852101">t</a></span><span class="op" id="6852255">.</span><span class="ident" id="6852256">Error</span><span class="op" id="6852261">(</span><span class="string" id="6852262">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6852277">,</span>&nbsp;<span class="ident" id="6852279"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span><span class="op" id="6852282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852288">dec</span>&nbsp;<span class="op" id="6852292">:=</span>&nbsp;<span class="ident" id="6852295"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6852305">(</span><span class="ident" id="6852306"><a href="/encoding/gob/encoder_test.go.html#6852118">b</a></span><span class="op" id="6852307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852310"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span>&nbsp;<span class="op" id="6852314">=</span>&nbsp;<span class="ident" id="6852316"><a href="/encoding/gob/encoder_test.go.html#6852288">dec</a></span><span class="op" id="6852319">.</span><span class="ident" id="6852320">Decode</span><span class="op" id="6852326">(</span><span class="ident" id="6852327"><a href="/encoding/gob/encoder_test.go.html#6852057">e</a></span><span class="op" id="6852328">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6852331">if</span>&nbsp;<span class="ident" id="6852334"><a href="/encoding/gob/encoder_test.go.html#6852072">shouldFail</a></span>&nbsp;<span class="op" id="6852345">&amp;&amp;</span>&nbsp;<span class="ident" id="6852348"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span>&nbsp;<span class="op" id="6852352">==</span>&nbsp;<span class="ident" id="6852355">nil</span>&nbsp;<span class="op" id="6852359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852363"><a href="/encoding/gob/encoder_test.go.html#6852101">t</a></span><span class="op" id="6852364">.</span><span class="ident" id="6852365">Error</span><span class="op" id="6852370">(</span><span class="string" id="6852371">&#34;expected&nbsp;error&nbsp;for&#34;</span><span class="op" id="6852391">,</span>&nbsp;<span class="ident" id="6852393"><a href="/encoding/gob/encoder_test.go.html#6852089">msg</a></span><span class="op" id="6852396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6852402">if</span>&nbsp;<span class="op" id="6852405">!</span><span class="ident" id="6852406"><a href="/encoding/gob/encoder_test.go.html#6852072">shouldFail</a></span>&nbsp;<span class="op" id="6852417">&amp;&amp;</span>&nbsp;<span class="ident" id="6852420"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span>&nbsp;<span class="op" id="6852424">!=</span>&nbsp;<span class="ident" id="6852427">nil</span>&nbsp;<span class="op" id="6852431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852435"><a href="/encoding/gob/encoder_test.go.html#6852101">t</a></span><span class="op" id="6852436">.</span><span class="ident" id="6852437">Error</span><span class="op" id="6852442">(</span><span class="string" id="6852443">&#34;unexpected&nbsp;error&nbsp;for&#34;</span><span class="op" id="6852465">,</span>&nbsp;<span class="ident" id="6852467"><a href="/encoding/gob/encoder_test.go.html#6852089">msg</a></span><span class="op" id="6852470">,</span>&nbsp;<span class="ident" id="6852472"><a href="/encoding/gob/encoder_test.go.html#6852212">err</a></span><span class="op" id="6852475">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852478">}</span><br>
<span class="lineno"></span><span class="op" id="6852480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6852483">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;recognize&nbsp;a&nbsp;bad&nbsp;type&nbsp;the&nbsp;first&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6852536">func</span>&nbsp;<span class="ident" id="6852541">TestWrongTypeDecoder</span><span class="op" id="6852561">(</span><span class="ident" id="6852562">t</span>&nbsp;<span class="op" id="6852564">*</span><span class="ident" id="6852565"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6852572">.</span><span class="ident" id="6852573">T</span><span class="op" id="6852574">)</span>&nbsp;<span class="op" id="6852576">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852579"><a href="/encoding/gob/encoder_test.go.html#6852044">badTypeCheck</a></span><span class="op" id="6852591">(</span><span class="builtinfunc" id="6852592">new</span><span class="op" id="6852595">(</span><span class="ident" id="6852596"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><span class="op" id="6852599">)</span><span class="op" id="6852600">,</span>&nbsp;<span class="builtintype" id="6852602">true</span><span class="op" id="6852606">,</span>&nbsp;<span class="string" id="6852608">&#34;no&nbsp;fields&nbsp;in&nbsp;common&#34;</span><span class="op" id="6852629">,</span>&nbsp;<span class="ident" id="6852631"><a href="/encoding/gob/encoder_test.go.html#6852562">t</a></span><span class="op" id="6852632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852635"><a href="/encoding/gob/encoder_test.go.html#6852044">badTypeCheck</a></span><span class="op" id="6852647">(</span><span class="builtinfunc" id="6852648">new</span><span class="op" id="6852651">(</span><span class="ident" id="6852652"><a href="/encoding/gob/encoder_test.go.html#6850029">ET3</a></span><span class="op" id="6852655">)</span><span class="op" id="6852656">,</span>&nbsp;<span class="builtintype" id="6852658">false</span><span class="op" id="6852663">,</span>&nbsp;<span class="string" id="6852665">&#34;different&nbsp;name&nbsp;of&nbsp;field&#34;</span><span class="op" id="6852690">,</span>&nbsp;<span class="ident" id="6852692"><a href="/encoding/gob/encoder_test.go.html#6852562">t</a></span><span class="op" id="6852693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852696"><a href="/encoding/gob/encoder_test.go.html#6852044">badTypeCheck</a></span><span class="op" id="6852708">(</span><span class="builtinfunc" id="6852709">new</span><span class="op" id="6852712">(</span><span class="ident" id="6852713"><a href="/encoding/gob/encoder_test.go.html#6850159">ET4</a></span><span class="op" id="6852716">)</span><span class="op" id="6852717">,</span>&nbsp;<span class="builtintype" id="6852719">true</span><span class="op" id="6852723">,</span>&nbsp;<span class="string" id="6852725">&#34;different&nbsp;type&nbsp;of&nbsp;field&#34;</span><span class="op" id="6852750">,</span>&nbsp;<span class="ident" id="6852752"><a href="/encoding/gob/encoder_test.go.html#6852562">t</a></span><span class="op" id="6852753">)</span><br>
<span class="lineno"></span><span class="op" id="6852755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="6852758">func</span>&nbsp;<span class="ident" id="6852763">corruptDataCheck</span><span class="op" id="6852779">(</span><span class="ident" id="6852780">s</span>&nbsp;<span class="builtintype" id="6852782">string</span><span class="op" id="6852788">,</span>&nbsp;<span class="ident" id="6852790">err</span>&nbsp;<span class="builtintype" id="6852794">error</span><span class="op" id="6852799">,</span>&nbsp;<span class="ident" id="6852801">t</span>&nbsp;<span class="op" id="6852803">*</span><span class="ident" id="6852804"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6852811">.</span><span class="ident" id="6852812">T</span><span class="op" id="6852813">)</span>&nbsp;<span class="op" id="6852815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852818">b</span>&nbsp;<span class="op" id="6852820">:=</span>&nbsp;<span class="ident" id="6852823"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6852828">.</span><span class="ident" id="6852829">NewBufferString</span><span class="op" id="6852844">(</span><span class="ident" id="6852845"><a href="/encoding/gob/encoder_test.go.html#6852780">s</a></span><span class="op" id="6852846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852849">dec</span>&nbsp;<span class="op" id="6852853">:=</span>&nbsp;<span class="ident" id="6852856"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6852866">(</span><span class="ident" id="6852867"><a href="/encoding/gob/encoder_test.go.html#6852818">b</a></span><span class="op" id="6852868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852871">err1</span>&nbsp;<span class="op" id="6852876">:=</span>&nbsp;<span class="ident" id="6852879"><a href="/encoding/gob/encoder_test.go.html#6852849">dec</a></span><span class="op" id="6852882">.</span><span class="ident" id="6852883">Decode</span><span class="op" id="6852889">(</span><span class="builtinfunc" id="6852890">new</span><span class="op" id="6852893">(</span><span class="ident" id="6852894"><a href="/encoding/gob/encoder_test.go.html#6849895">ET2</a></span><span class="op" id="6852897">)</span><span class="op" id="6852898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6852901">if</span>&nbsp;<span class="ident" id="6852904"><a href="/encoding/gob/encoder_test.go.html#6852871">err1</a></span>&nbsp;<span class="op" id="6852909">!=</span>&nbsp;<span class="ident" id="6852912"><a href="/encoding/gob/encoder_test.go.html#6852790">err</a></span>&nbsp;<span class="op" id="6852916">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6852920"><a href="/encoding/gob/encoder_test.go.html#6852801">t</a></span><span class="op" id="6852921">.</span><span class="ident" id="6852922">Errorf</span><span class="op" id="6852928">(</span><span class="string" id="6852929">&#34;from&nbsp;%q&nbsp;expected&nbsp;error&nbsp;%s;&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6852964">,</span>&nbsp;<span class="ident" id="6852966"><a href="/encoding/gob/encoder_test.go.html#6852780">s</a></span><span class="op" id="6852967">,</span>&nbsp;<span class="ident" id="6852969"><a href="/encoding/gob/encoder_test.go.html#6852790">err</a></span><span class="op" id="6852972">,</span>&nbsp;<span class="ident" id="6852974"><a href="/encoding/gob/encoder_test.go.html#6852871">err1</a></span><span class="op" id="6852978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6852981">}</span><br>
<span class="lineno"></span><span class="op" id="6852983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6852986">//&nbsp;Check&nbsp;that&nbsp;we&nbsp;survive&nbsp;bad&nbsp;data.</span><br>
<span class="lineno">200</span><span class="keyword" id="6853021">func</span>&nbsp;<span class="ident" id="6853026">TestBadData</span><span class="op" id="6853037">(</span><span class="ident" id="6853038">t</span>&nbsp;<span class="op" id="6853040">*</span><span class="ident" id="6853041"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6853048">.</span><span class="ident" id="6853049">T</span><span class="op" id="6853050">)</span>&nbsp;<span class="op" id="6853052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853055"><a href="/encoding/gob/encoder_test.go.html#6852763">corruptDataCheck</a></span><span class="op" id="6853071">(</span><span class="string" id="6853072">&#34;&#34;</span><span class="op" id="6853074">,</span>&nbsp;<span class="ident" id="6853076"><a href="/encoding/gob/encoder_test.go.html#6848847">io</a></span><span class="op" id="6853078">.</span><span class="ident" id="6853079">EOF</span><span class="op" id="6853082">,</span>&nbsp;<span class="ident" id="6853084"><a href="/encoding/gob/encoder_test.go.html#6853038">t</a></span><span class="op" id="6853085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853088"><a href="/encoding/gob/encoder_test.go.html#6852763">corruptDataCheck</a></span><span class="op" id="6853104">(</span><span class="string" id="6853105">&#34;\x7Fhi&#34;</span><span class="op" id="6853113">,</span>&nbsp;<span class="ident" id="6853115"><a href="/encoding/gob/encoder_test.go.html#6848847">io</a></span><span class="op" id="6853117">.</span><span class="ident" id="6853118">ErrUnexpectedEOF</span><span class="op" id="6853134">,</span>&nbsp;<span class="ident" id="6853136"><a href="/encoding/gob/encoder_test.go.html#6853038">t</a></span><span class="op" id="6853137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853140"><a href="/encoding/gob/encoder_test.go.html#6852763">corruptDataCheck</a></span><span class="op" id="6853156">(</span><span class="string" id="6853157">&#34;\x03now&nbsp;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6853195">,</span>&nbsp;<span class="ident" id="6853197"><a href="/encoding/gob/decode.go.html#5824650">errBadType</a></span><span class="op" id="6853207">,</span>&nbsp;<span class="ident" id="6853209"><a href="/encoding/gob/encoder_test.go.html#6853038">t</a></span><span class="op" id="6853210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853213">//&nbsp;issue&nbsp;6323.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853229"><a href="/encoding/gob/encoder_test.go.html#6852763">corruptDataCheck</a></span><span class="op" id="6853245">(</span><span class="string" id="6853246">&#34;\x04\x24foo&#34;</span><span class="op" id="6853259">,</span>&nbsp;<span class="ident" id="6853261"><a href="/encoding/gob/decode.go.html#5824717">errRange</a></span><span class="op" id="6853269">,</span>&nbsp;<span class="ident" id="6853271"><a href="/encoding/gob/encoder_test.go.html#6853038">t</a></span><span class="op" id="6853272">)</span><br>
<span class="lineno"></span><span class="op" id="6853274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6853277">//&nbsp;Types&nbsp;not&nbsp;supported&nbsp;at&nbsp;top&nbsp;level&nbsp;by&nbsp;the&nbsp;Encoder.</span><br>
<span class="lineno"></span><span class="keyword" id="6853329">var</span>&nbsp;<span class="ident" id="6853333">unsupportedValues</span>&nbsp;<span class="op" id="6853351">=</span>&nbsp;<span class="op" id="6853353">[</span><span class="op" id="6853354">]</span><span class="keyword" id="6853355">interface</span><span class="op" id="6853364">{</span><span class="op" id="6853365">}</span><span class="op" id="6853366">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6853369">make</span><span class="op" id="6853373">(</span><span class="keyword" id="6853374">chan</span>&nbsp;<span class="builtintype" id="6853379">int</span><span class="op" id="6853382">)</span><span class="op" id="6853383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853386">func</span><span class="op" id="6853390">(</span><span class="ident" id="6853391">a</span>&nbsp;<span class="builtintype" id="6853393">int</span><span class="op" id="6853396">)</span>&nbsp;<span class="builtintype" id="6853398">bool</span>&nbsp;<span class="op" id="6853403">{</span>&nbsp;<span class="keyword" id="6853405">return</span>&nbsp;<span class="builtintype" id="6853412">true</span>&nbsp;<span class="op" id="6853417">}</span><span class="op" id="6853418">,</span><br>
<span class="lineno"></span><span class="op" id="6853420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6853423">func</span>&nbsp;<span class="ident" id="6853428">TestUnsupported</span><span class="op" id="6853443">(</span><span class="ident" id="6853444">t</span>&nbsp;<span class="op" id="6853446">*</span><span class="ident" id="6853447"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6853454">.</span><span class="ident" id="6853455">T</span><span class="op" id="6853456">)</span>&nbsp;<span class="op" id="6853458">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853461">var</span>&nbsp;<span class="ident" id="6853465">b</span>&nbsp;<span class="ident" id="6853467"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6853472">.</span><span class="ident" id="6853473">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853481">enc</span>&nbsp;<span class="op" id="6853485">:=</span>&nbsp;<span class="ident" id="6853488"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6853498">(</span><span class="op" id="6853499">&amp;</span><span class="ident" id="6853500"><a href="/encoding/gob/encoder_test.go.html#6853465">b</a></span><span class="op" id="6853501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853504">for</span>&nbsp;<span class="ident" id="6853508">_</span><span class="op" id="6853509">,</span>&nbsp;<span class="ident" id="6853511">v</span>&nbsp;<span class="op" id="6853513">:=</span>&nbsp;<span class="keyword" id="6853516">range</span>&nbsp;<span class="ident" id="6853522"><a href="/encoding/gob/encoder_test.go.html#6853333">unsupportedValues</a></span>&nbsp;<span class="op" id="6853540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853544">err</span>&nbsp;<span class="op" id="6853548">:=</span>&nbsp;<span class="ident" id="6853551"><a href="/encoding/gob/encoder_test.go.html#6853481">enc</a></span><span class="op" id="6853554">.</span><span class="ident" id="6853555">Encode</span><span class="op" id="6853561">(</span><span class="ident" id="6853562"><a href="/encoding/gob/encoder_test.go.html#6853511">v</a></span><span class="op" id="6853563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853567">if</span>&nbsp;<span class="ident" id="6853570"><a href="/encoding/gob/encoder_test.go.html#6853544">err</a></span>&nbsp;<span class="op" id="6853574">==</span>&nbsp;<span class="ident" id="6853577">nil</span>&nbsp;<span class="op" id="6853581">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853586"><a href="/encoding/gob/encoder_test.go.html#6853444">t</a></span><span class="op" id="6853587">.</span><span class="ident" id="6853588">Errorf</span><span class="op" id="6853594">(</span><span class="string" id="6853595">&#34;expected&nbsp;error&nbsp;for&nbsp;%T;&nbsp;got&nbsp;none&#34;</span><span class="op" id="6853628">,</span>&nbsp;<span class="ident" id="6853630"><a href="/encoding/gob/encoder_test.go.html#6853511">v</a></span><span class="op" id="6853631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853638">}</span><br>
<span class="lineno"></span><span class="op" id="6853640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="6853643">func</span>&nbsp;<span class="ident" id="6853648">encAndDec</span><span class="op" id="6853657">(</span><span class="ident" id="6853658">in</span><span class="op" id="6853660">,</span>&nbsp;<span class="ident" id="6853662">out</span>&nbsp;<span class="keyword" id="6853666">interface</span><span class="op" id="6853675">{</span><span class="op" id="6853676">}</span><span class="op" id="6853677">)</span>&nbsp;<span class="builtintype" id="6853679">error</span>&nbsp;<span class="op" id="6853685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853688">b</span>&nbsp;<span class="op" id="6853690">:=</span>&nbsp;<span class="builtinfunc" id="6853693">new</span><span class="op" id="6853696">(</span><span class="ident" id="6853697"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6853702">.</span><span class="ident" id="6853703">Buffer</span><span class="op" id="6853709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853712">enc</span>&nbsp;<span class="op" id="6853716">:=</span>&nbsp;<span class="ident" id="6853719"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6853729">(</span><span class="ident" id="6853730"><a href="/encoding/gob/encoder_test.go.html#6853688">b</a></span><span class="op" id="6853731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853734">err</span>&nbsp;<span class="op" id="6853738">:=</span>&nbsp;<span class="ident" id="6853741"><a href="/encoding/gob/encoder_test.go.html#6853712">enc</a></span><span class="op" id="6853744">.</span><span class="ident" id="6853745">Encode</span><span class="op" id="6853751">(</span><span class="ident" id="6853752"><a href="/encoding/gob/encoder_test.go.html#6853658">in</a></span><span class="op" id="6853754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853757">if</span>&nbsp;<span class="ident" id="6853760"><a href="/encoding/gob/encoder_test.go.html#6853734">err</a></span>&nbsp;<span class="op" id="6853764">!=</span>&nbsp;<span class="ident" id="6853767">nil</span>&nbsp;<span class="op" id="6853771">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853775">return</span>&nbsp;<span class="ident" id="6853782"><a href="/encoding/gob/encoder_test.go.html#6853734">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853790">dec</span>&nbsp;<span class="op" id="6853794">:=</span>&nbsp;<span class="ident" id="6853797"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6853807">(</span><span class="ident" id="6853808"><a href="/encoding/gob/encoder_test.go.html#6853688">b</a></span><span class="op" id="6853809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853812"><a href="/encoding/gob/encoder_test.go.html#6853734">err</a></span>&nbsp;<span class="op" id="6853816">=</span>&nbsp;<span class="ident" id="6853818"><a href="/encoding/gob/encoder_test.go.html#6853790">dec</a></span><span class="op" id="6853821">.</span><span class="ident" id="6853822">Decode</span><span class="op" id="6853828">(</span><span class="ident" id="6853829"><a href="/encoding/gob/encoder_test.go.html#6853662">out</a></span><span class="op" id="6853832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853835">if</span>&nbsp;<span class="ident" id="6853838"><a href="/encoding/gob/encoder_test.go.html#6853734">err</a></span>&nbsp;<span class="op" id="6853842">!=</span>&nbsp;<span class="ident" id="6853845">nil</span>&nbsp;<span class="op" id="6853849">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853853">return</span>&nbsp;<span class="ident" id="6853860"><a href="/encoding/gob/encoder_test.go.html#6853734">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853868">return</span>&nbsp;<span class="ident" id="6853875">nil</span><br>
<span class="lineno"></span><span class="op" id="6853879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6853882">func</span>&nbsp;<span class="ident" id="6853887">TestTypeToPtrType</span><span class="op" id="6853904">(</span><span class="ident" id="6853905">t</span>&nbsp;<span class="op" id="6853907">*</span><span class="ident" id="6853908"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6853915">.</span><span class="ident" id="6853916">T</span><span class="op" id="6853917">)</span>&nbsp;<span class="op" id="6853919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6853922">//&nbsp;Encode&nbsp;a&nbsp;T,&nbsp;decode&nbsp;a&nbsp;*T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6853950">type</span>&nbsp;<span class="ident" id="6853955">Type0</span>&nbsp;<span class="keyword" id="6853961">struct</span>&nbsp;<span class="op" id="6853968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853972">A</span>&nbsp;<span class="builtintype" id="6853974">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853979">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853982">t0</span>&nbsp;<span class="op" id="6853985">:=</span>&nbsp;<span class="ident" id="6853988"><a href="/encoding/gob/encoder_test.go.html#6853955">Type0</a></span><span class="op" id="6853993">{</span><span class="num" id="6853994">7</span><span class="op" id="6853995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6853998">t0p</span>&nbsp;<span class="op" id="6854002">:=</span>&nbsp;<span class="builtinfunc" id="6854005">new</span><span class="op" id="6854008">(</span><span class="ident" id="6854009"><a href="/encoding/gob/encoder_test.go.html#6853955">Type0</a></span><span class="op" id="6854014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854017">if</span>&nbsp;<span class="ident" id="6854020">err</span>&nbsp;<span class="op" id="6854024">:=</span>&nbsp;<span class="ident" id="6854027"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6854036">(</span><span class="ident" id="6854037"><a href="/encoding/gob/encoder_test.go.html#6853982">t0</a></span><span class="op" id="6854039">,</span>&nbsp;<span class="ident" id="6854041"><a href="/encoding/gob/encoder_test.go.html#6853998">t0p</a></span><span class="op" id="6854044">)</span><span class="op" id="6854045">;</span>&nbsp;<span class="ident" id="6854047"><a href="/encoding/gob/encoder_test.go.html#6854020">err</a></span>&nbsp;<span class="op" id="6854051">!=</span>&nbsp;<span class="ident" id="6854054">nil</span>&nbsp;<span class="op" id="6854058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854062"><a href="/encoding/gob/encoder_test.go.html#6853905">t</a></span><span class="op" id="6854063">.</span><span class="ident" id="6854064">Error</span><span class="op" id="6854069">(</span><span class="ident" id="6854070"><a href="/encoding/gob/encoder_test.go.html#6854020">err</a></span><span class="op" id="6854073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854076">}</span><br>
<span class="lineno">250</span><span class="op" id="6854078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6854081">func</span>&nbsp;<span class="ident" id="6854086">TestPtrTypeToType</span><span class="op" id="6854103">(</span><span class="ident" id="6854104">t</span>&nbsp;<span class="op" id="6854106">*</span><span class="ident" id="6854107"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6854114">.</span><span class="ident" id="6854115">T</span><span class="op" id="6854116">)</span>&nbsp;<span class="op" id="6854118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6854121">//&nbsp;Encode&nbsp;a&nbsp;*T,&nbsp;decode&nbsp;a&nbsp;T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854149">type</span>&nbsp;<span class="ident" id="6854154">Type1</span>&nbsp;<span class="keyword" id="6854160">struct</span>&nbsp;<span class="op" id="6854167">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854171">A</span>&nbsp;<span class="builtintype" id="6854173">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854182">t1p</span>&nbsp;<span class="op" id="6854186">:=</span>&nbsp;<span class="op" id="6854189">&amp;</span><span class="ident" id="6854190"><a href="/encoding/gob/encoder_test.go.html#6854154">Type1</a></span><span class="op" id="6854195">{</span><span class="num" id="6854196">17</span><span class="op" id="6854198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854201">var</span>&nbsp;<span class="ident" id="6854205">t1</span>&nbsp;<span class="ident" id="6854208"><a href="/encoding/gob/encoder_test.go.html#6854154">Type1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854215">if</span>&nbsp;<span class="ident" id="6854218">err</span>&nbsp;<span class="op" id="6854222">:=</span>&nbsp;<span class="ident" id="6854225"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6854234">(</span><span class="ident" id="6854235"><a href="/encoding/gob/encoder_test.go.html#6854205">t1</a></span><span class="op" id="6854237">,</span>&nbsp;<span class="ident" id="6854239"><a href="/encoding/gob/encoder_test.go.html#6854182">t1p</a></span><span class="op" id="6854242">)</span><span class="op" id="6854243">;</span>&nbsp;<span class="ident" id="6854245"><a href="/encoding/gob/encoder_test.go.html#6854218">err</a></span>&nbsp;<span class="op" id="6854249">!=</span>&nbsp;<span class="ident" id="6854252">nil</span>&nbsp;<span class="op" id="6854256">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854260"><a href="/encoding/gob/encoder_test.go.html#6854104">t</a></span><span class="op" id="6854261">.</span><span class="ident" id="6854262">Error</span><span class="op" id="6854267">(</span><span class="ident" id="6854268"><a href="/encoding/gob/encoder_test.go.html#6854218">err</a></span><span class="op" id="6854271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854274">}</span><br>
<span class="lineno"></span><span class="op" id="6854276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6854279">func</span>&nbsp;<span class="ident" id="6854284">TestTypeToPtrPtrPtrPtrType</span><span class="op" id="6854310">(</span><span class="ident" id="6854311">t</span>&nbsp;<span class="op" id="6854313">*</span><span class="ident" id="6854314"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6854321">.</span><span class="ident" id="6854322">T</span><span class="op" id="6854323">)</span>&nbsp;<span class="op" id="6854325">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854328">type</span>&nbsp;<span class="ident" id="6854333">Type2</span>&nbsp;<span class="keyword" id="6854339">struct</span>&nbsp;<span class="op" id="6854346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854350">A</span>&nbsp;<span class="op" id="6854352">*</span><span class="op" id="6854353">*</span><span class="op" id="6854354">*</span><span class="op" id="6854355">*</span><span class="builtintype" id="6854356">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854368">t2</span>&nbsp;<span class="op" id="6854371">:=</span>&nbsp;<span class="ident" id="6854374"><a href="/encoding/gob/encoder_test.go.html#6854333">Type2</a></span><span class="op" id="6854379">{</span><span class="op" id="6854380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854383"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854385">.</span><span class="ident" id="6854386">A</span>&nbsp;<span class="op" id="6854388">=</span>&nbsp;<span class="builtinfunc" id="6854390">new</span><span class="op" id="6854393">(</span><span class="op" id="6854394">*</span><span class="op" id="6854395">*</span><span class="op" id="6854396">*</span><span class="builtintype" id="6854397">float64</span><span class="op" id="6854404">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854407">*</span><span class="ident" id="6854408"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854410">.</span><span class="ident" id="6854411">A</span>&nbsp;<span class="op" id="6854413">=</span>&nbsp;<span class="builtinfunc" id="6854415">new</span><span class="op" id="6854418">(</span><span class="op" id="6854419">*</span><span class="op" id="6854420">*</span><span class="builtintype" id="6854421">float64</span><span class="op" id="6854428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854431">*</span><span class="op" id="6854432">*</span><span class="ident" id="6854433"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854435">.</span><span class="ident" id="6854436">A</span>&nbsp;<span class="op" id="6854438">=</span>&nbsp;<span class="builtinfunc" id="6854440">new</span><span class="op" id="6854443">(</span><span class="op" id="6854444">*</span><span class="builtintype" id="6854445">float64</span><span class="op" id="6854452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854455">*</span><span class="op" id="6854456">*</span><span class="op" id="6854457">*</span><span class="ident" id="6854458"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854460">.</span><span class="ident" id="6854461">A</span>&nbsp;<span class="op" id="6854463">=</span>&nbsp;<span class="builtinfunc" id="6854465">new</span><span class="op" id="6854468">(</span><span class="builtintype" id="6854469">float64</span><span class="op" id="6854476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854479">*</span><span class="op" id="6854480">*</span><span class="op" id="6854481">*</span><span class="op" id="6854482">*</span><span class="ident" id="6854483"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854485">.</span><span class="ident" id="6854486">A</span>&nbsp;<span class="op" id="6854488">=</span>&nbsp;<span class="num" id="6854490">27.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854496">t2pppp</span>&nbsp;<span class="op" id="6854503">:=</span>&nbsp;<span class="builtinfunc" id="6854506">new</span><span class="op" id="6854509">(</span><span class="op" id="6854510">*</span><span class="op" id="6854511">*</span><span class="op" id="6854512">*</span><span class="ident" id="6854513"><a href="/encoding/gob/encoder_test.go.html#6854333">Type2</a></span><span class="op" id="6854518">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854521">if</span>&nbsp;<span class="ident" id="6854524">err</span>&nbsp;<span class="op" id="6854528">:=</span>&nbsp;<span class="ident" id="6854531"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6854540">(</span><span class="ident" id="6854541"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854543">,</span>&nbsp;<span class="ident" id="6854545"><a href="/encoding/gob/encoder_test.go.html#6854496">t2pppp</a></span><span class="op" id="6854551">)</span><span class="op" id="6854552">;</span>&nbsp;<span class="ident" id="6854554"><a href="/encoding/gob/encoder_test.go.html#6854524">err</a></span>&nbsp;<span class="op" id="6854558">!=</span>&nbsp;<span class="ident" id="6854561">nil</span>&nbsp;<span class="op" id="6854565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854569"><a href="/encoding/gob/encoder_test.go.html#6854311">t</a></span><span class="op" id="6854570">.</span><span class="ident" id="6854571">Fatal</span><span class="op" id="6854576">(</span><span class="ident" id="6854577"><a href="/encoding/gob/encoder_test.go.html#6854524">err</a></span><span class="op" id="6854580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854586">if</span>&nbsp;<span class="op" id="6854589">*</span><span class="op" id="6854590">*</span><span class="op" id="6854591">*</span><span class="op" id="6854592">*</span><span class="op" id="6854593">(</span><span class="op" id="6854594">*</span><span class="op" id="6854595">*</span><span class="op" id="6854596">*</span><span class="op" id="6854597">*</span><span class="ident" id="6854598"><a href="/encoding/gob/encoder_test.go.html#6854496">t2pppp</a></span><span class="op" id="6854604">)</span><span class="op" id="6854605">.</span><span class="ident" id="6854606">A</span>&nbsp;<span class="op" id="6854608">!=</span>&nbsp;<span class="op" id="6854611">*</span><span class="op" id="6854612">*</span><span class="op" id="6854613">*</span><span class="op" id="6854614">*</span><span class="ident" id="6854615"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854617">.</span><span class="ident" id="6854618">A</span>&nbsp;<span class="op" id="6854620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854624"><a href="/encoding/gob/encoder_test.go.html#6854311">t</a></span><span class="op" id="6854625">.</span><span class="ident" id="6854626">Errorf</span><span class="op" id="6854632">(</span><span class="string" id="6854633">&#34;wrong&nbsp;value&nbsp;after&nbsp;decode:&nbsp;%g&nbsp;not&nbsp;%g&#34;</span><span class="op" id="6854670">,</span>&nbsp;<span class="op" id="6854672">*</span><span class="op" id="6854673">*</span><span class="op" id="6854674">*</span><span class="op" id="6854675">*</span><span class="op" id="6854676">(</span><span class="op" id="6854677">*</span><span class="op" id="6854678">*</span><span class="op" id="6854679">*</span><span class="op" id="6854680">*</span><span class="ident" id="6854681"><a href="/encoding/gob/encoder_test.go.html#6854496">t2pppp</a></span><span class="op" id="6854687">)</span><span class="op" id="6854688">.</span><span class="ident" id="6854689">A</span><span class="op" id="6854690">,</span>&nbsp;<span class="op" id="6854692">*</span><span class="op" id="6854693">*</span><span class="op" id="6854694">*</span><span class="op" id="6854695">*</span><span class="ident" id="6854696"><a href="/encoding/gob/encoder_test.go.html#6854368">t2</a></span><span class="op" id="6854698">.</span><span class="ident" id="6854699">A</span><span class="op" id="6854700">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854703">}</span><br>
<span class="lineno"></span><span class="op" id="6854705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6854708">func</span>&nbsp;<span class="ident" id="6854713">TestSlice</span><span class="op" id="6854722">(</span><span class="ident" id="6854723">t</span>&nbsp;<span class="op" id="6854725">*</span><span class="ident" id="6854726"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6854733">.</span><span class="ident" id="6854734">T</span><span class="op" id="6854735">)</span>&nbsp;<span class="op" id="6854737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854740">type</span>&nbsp;<span class="ident" id="6854745">Type3</span>&nbsp;<span class="keyword" id="6854751">struct</span>&nbsp;<span class="op" id="6854758">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854762">A</span>&nbsp;<span class="op" id="6854764">[</span><span class="op" id="6854765">]</span><span class="builtintype" id="6854766">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854777">t3p</span>&nbsp;<span class="op" id="6854781">:=</span>&nbsp;<span class="op" id="6854784">&amp;</span><span class="ident" id="6854785"><a href="/encoding/gob/encoder_test.go.html#6854745">Type3</a></span><span class="op" id="6854790">{</span><span class="op" id="6854791">[</span><span class="op" id="6854792">]</span><span class="builtintype" id="6854793">string</span><span class="op" id="6854799">{</span><span class="string" id="6854800">&#34;hello&#34;</span><span class="op" id="6854807">,</span>&nbsp;<span class="string" id="6854809">&#34;world&#34;</span><span class="op" id="6854816">}</span><span class="op" id="6854817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854820">var</span>&nbsp;<span class="ident" id="6854824">t3</span>&nbsp;<span class="ident" id="6854827"><a href="/encoding/gob/encoder_test.go.html#6854745">Type3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854834">if</span>&nbsp;<span class="ident" id="6854837">err</span>&nbsp;<span class="op" id="6854841">:=</span>&nbsp;<span class="ident" id="6854844"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6854853">(</span><span class="ident" id="6854854"><a href="/encoding/gob/encoder_test.go.html#6854824">t3</a></span><span class="op" id="6854856">,</span>&nbsp;<span class="ident" id="6854858"><a href="/encoding/gob/encoder_test.go.html#6854777">t3p</a></span><span class="op" id="6854861">)</span><span class="op" id="6854862">;</span>&nbsp;<span class="ident" id="6854864"><a href="/encoding/gob/encoder_test.go.html#6854837">err</a></span>&nbsp;<span class="op" id="6854868">!=</span>&nbsp;<span class="ident" id="6854871">nil</span>&nbsp;<span class="op" id="6854875">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854879"><a href="/encoding/gob/encoder_test.go.html#6854723">t</a></span><span class="op" id="6854880">.</span><span class="ident" id="6854881">Error</span><span class="op" id="6854886">(</span><span class="ident" id="6854887"><a href="/encoding/gob/encoder_test.go.html#6854837">err</a></span><span class="op" id="6854890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854893">}</span><br>
<span class="lineno"></span><span class="op" id="6854895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6854898">func</span>&nbsp;<span class="ident" id="6854903">TestValueError</span><span class="op" id="6854917">(</span><span class="ident" id="6854918">t</span>&nbsp;<span class="op" id="6854920">*</span><span class="ident" id="6854921"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6854928">.</span><span class="ident" id="6854929">T</span><span class="op" id="6854930">)</span>&nbsp;<span class="op" id="6854932">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6854935">//&nbsp;Encode&nbsp;a&nbsp;*T,&nbsp;decode&nbsp;a&nbsp;T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6854963">type</span>&nbsp;<span class="ident" id="6854968">Type4</span>&nbsp;<span class="keyword" id="6854974">struct</span>&nbsp;<span class="op" id="6854981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854985">A</span>&nbsp;<span class="builtintype" id="6854987">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6854992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6854995">t4p</span>&nbsp;<span class="op" id="6854999">:=</span>&nbsp;<span class="op" id="6855002">&amp;</span><span class="ident" id="6855003"><a href="/encoding/gob/encoder_test.go.html#6854968">Type4</a></span><span class="op" id="6855008">{</span><span class="num" id="6855009">3</span><span class="op" id="6855010">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855013">var</span>&nbsp;<span class="ident" id="6855017">t4</span>&nbsp;<span class="ident" id="6855020"><a href="/encoding/gob/encoder_test.go.html#6854968">Type4</a></span>&nbsp;<span class="comment" id="6855026">//&nbsp;note:&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855051">if</span>&nbsp;<span class="ident" id="6855054">err</span>&nbsp;<span class="op" id="6855058">:=</span>&nbsp;<span class="ident" id="6855061"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6855070">(</span><span class="ident" id="6855071"><a href="/encoding/gob/encoder_test.go.html#6854995">t4p</a></span><span class="op" id="6855074">,</span>&nbsp;<span class="ident" id="6855076"><a href="/encoding/gob/encoder_test.go.html#6855017">t4</a></span><span class="op" id="6855078">)</span><span class="op" id="6855079">;</span>&nbsp;<span class="ident" id="6855081"><a href="/encoding/gob/encoder_test.go.html#6855054">err</a></span>&nbsp;<span class="op" id="6855085">==</span>&nbsp;<span class="ident" id="6855088">nil</span>&nbsp;<span class="op" id="6855092">||</span>&nbsp;<span class="ident" id="6855095"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6855102">.</span><span class="ident" id="6855103">Index</span><span class="op" id="6855108">(</span><span class="ident" id="6855109"><a href="/encoding/gob/encoder_test.go.html#6855054">err</a></span><span class="op" id="6855112">.</span><span class="ident" id="6855113">Error</span><span class="op" id="6855118">(</span><span class="op" id="6855119">)</span><span class="op" id="6855120">,</span>&nbsp;<span class="string" id="6855122">&#34;pointer&#34;</span><span class="op" id="6855131">)</span>&nbsp;<span class="op" id="6855133">&lt;</span>&nbsp;<span class="num" id="6855135">0</span>&nbsp;<span class="op" id="6855137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855141"><a href="/encoding/gob/encoder_test.go.html#6854918">t</a></span><span class="op" id="6855142">.</span><span class="ident" id="6855143">Error</span><span class="op" id="6855148">(</span><span class="string" id="6855149">&#34;expected&nbsp;error&nbsp;about&nbsp;pointer;&nbsp;got&#34;</span><span class="op" id="6855184">,</span>&nbsp;<span class="ident" id="6855186"><a href="/encoding/gob/encoder_test.go.html#6855054">err</a></span><span class="op" id="6855189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855192">}</span><br>
<span class="lineno"></span><span class="op" id="6855194">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="6855197">func</span>&nbsp;<span class="ident" id="6855202">TestArray</span><span class="op" id="6855211">(</span><span class="ident" id="6855212">t</span>&nbsp;<span class="op" id="6855214">*</span><span class="ident" id="6855215"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6855222">.</span><span class="ident" id="6855223">T</span><span class="op" id="6855224">)</span>&nbsp;<span class="op" id="6855226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855229">type</span>&nbsp;<span class="ident" id="6855234">Type5</span>&nbsp;<span class="keyword" id="6855240">struct</span>&nbsp;<span class="op" id="6855247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855251">A</span>&nbsp;<span class="op" id="6855253">[</span><span class="num" id="6855254">3</span><span class="op" id="6855255">]</span><span class="builtintype" id="6855256">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855265">B</span>&nbsp;<span class="op" id="6855267">[</span><span class="num" id="6855268">3</span><span class="op" id="6855269">]</span><span class="builtintype" id="6855270">byte</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855279">type</span>&nbsp;<span class="ident" id="6855284">Type6</span>&nbsp;<span class="keyword" id="6855290">struct</span>&nbsp;<span class="op" id="6855297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855301">A</span>&nbsp;<span class="op" id="6855303">[</span><span class="num" id="6855304">2</span><span class="op" id="6855305">]</span><span class="builtintype" id="6855306">string</span>&nbsp;<span class="comment" id="6855313">//&nbsp;can&#39;t&nbsp;hold&nbsp;t5.a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855336">t5</span>&nbsp;<span class="op" id="6855339">:=</span>&nbsp;<span class="ident" id="6855342"><a href="/encoding/gob/encoder_test.go.html#6855234">Type5</a></span><span class="op" id="6855347">{</span><span class="op" id="6855348">[</span><span class="num" id="6855349">3</span><span class="op" id="6855350">]</span><span class="builtintype" id="6855351">string</span><span class="op" id="6855357">{</span><span class="string" id="6855358">&#34;hello&#34;</span><span class="op" id="6855365">,</span>&nbsp;<span class="string" id="6855367">&#34;,&#34;</span><span class="op" id="6855370">,</span>&nbsp;<span class="string" id="6855372">&#34;world&#34;</span><span class="op" id="6855379">}</span><span class="op" id="6855380">,</span>&nbsp;<span class="op" id="6855382">[</span><span class="num" id="6855383">3</span><span class="op" id="6855384">]</span><span class="builtintype" id="6855385">byte</span><span class="op" id="6855389">{</span><span class="num" id="6855390">1</span><span class="op" id="6855391">,</span>&nbsp;<span class="num" id="6855393">2</span><span class="op" id="6855394">,</span>&nbsp;<span class="num" id="6855396">3</span><span class="op" id="6855397">}</span><span class="op" id="6855398">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855401">var</span>&nbsp;<span class="ident" id="6855405">t5p</span>&nbsp;<span class="ident" id="6855409"><a href="/encoding/gob/encoder_test.go.html#6855234">Type5</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855416">if</span>&nbsp;<span class="ident" id="6855419">err</span>&nbsp;<span class="op" id="6855423">:=</span>&nbsp;<span class="ident" id="6855426"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6855435">(</span><span class="ident" id="6855436"><a href="/encoding/gob/encoder_test.go.html#6855336">t5</a></span><span class="op" id="6855438">,</span>&nbsp;<span class="op" id="6855440">&amp;</span><span class="ident" id="6855441"><a href="/encoding/gob/encoder_test.go.html#6855405">t5p</a></span><span class="op" id="6855444">)</span><span class="op" id="6855445">;</span>&nbsp;<span class="ident" id="6855447"><a href="/encoding/gob/encoder_test.go.html#6855419">err</a></span>&nbsp;<span class="op" id="6855451">!=</span>&nbsp;<span class="ident" id="6855454">nil</span>&nbsp;<span class="op" id="6855458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855462"><a href="/encoding/gob/encoder_test.go.html#6855212">t</a></span><span class="op" id="6855463">.</span><span class="ident" id="6855464">Error</span><span class="op" id="6855469">(</span><span class="ident" id="6855470"><a href="/encoding/gob/encoder_test.go.html#6855419">err</a></span><span class="op" id="6855473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855479">var</span>&nbsp;<span class="ident" id="6855483">t6</span>&nbsp;<span class="ident" id="6855486"><a href="/encoding/gob/encoder_test.go.html#6855284">Type6</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855493">if</span>&nbsp;<span class="ident" id="6855496">err</span>&nbsp;<span class="op" id="6855500">:=</span>&nbsp;<span class="ident" id="6855503"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6855512">(</span><span class="ident" id="6855513"><a href="/encoding/gob/encoder_test.go.html#6855336">t5</a></span><span class="op" id="6855515">,</span>&nbsp;<span class="op" id="6855517">&amp;</span><span class="ident" id="6855518"><a href="/encoding/gob/encoder_test.go.html#6855483">t6</a></span><span class="op" id="6855520">)</span><span class="op" id="6855521">;</span>&nbsp;<span class="ident" id="6855523"><a href="/encoding/gob/encoder_test.go.html#6855496">err</a></span>&nbsp;<span class="op" id="6855527">==</span>&nbsp;<span class="ident" id="6855530">nil</span>&nbsp;<span class="op" id="6855534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855538"><a href="/encoding/gob/encoder_test.go.html#6855212">t</a></span><span class="op" id="6855539">.</span><span class="ident" id="6855540">Error</span><span class="op" id="6855545">(</span><span class="string" id="6855546">&#34;should&nbsp;fail&nbsp;with&nbsp;mismatched&nbsp;array&nbsp;sizes&#34;</span><span class="op" id="6855587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855590">}</span><br>
<span class="lineno"></span><span class="op" id="6855592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="6855595">func</span>&nbsp;<span class="ident" id="6855600">TestRecursiveMapType</span><span class="op" id="6855620">(</span><span class="ident" id="6855621">t</span>&nbsp;<span class="op" id="6855623">*</span><span class="ident" id="6855624"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6855631">.</span><span class="ident" id="6855632">T</span><span class="op" id="6855633">)</span>&nbsp;<span class="op" id="6855635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855638">type</span>&nbsp;<span class="ident" id="6855643">recursiveMap</span>&nbsp;<span class="keyword" id="6855656">map</span><span class="op" id="6855659">[</span><span class="builtintype" id="6855660">string</span><span class="op" id="6855666">]</span><span class="ident" id="6855667"><a href="/encoding/gob/encoder_test.go.html#6855643">recursiveMap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855681">r1</span>&nbsp;<span class="op" id="6855684">:=</span>&nbsp;<span class="ident" id="6855687"><a href="/encoding/gob/encoder_test.go.html#6855643">recursiveMap</a></span><span class="op" id="6855699">{</span><span class="string" id="6855700">&#34;A&#34;</span><span class="op" id="6855703">:</span>&nbsp;<span class="ident" id="6855705"><a href="/encoding/gob/encoder_test.go.html#6855643">recursiveMap</a></span><span class="op" id="6855717">{</span><span class="string" id="6855718">&#34;B&#34;</span><span class="op" id="6855721">:</span>&nbsp;<span class="ident" id="6855723">nil</span><span class="op" id="6855726">,</span>&nbsp;<span class="string" id="6855728">&#34;C&#34;</span><span class="op" id="6855731">:</span>&nbsp;<span class="ident" id="6855733">nil</span><span class="op" id="6855736">}</span><span class="op" id="6855737">,</span>&nbsp;<span class="string" id="6855739">&#34;D&#34;</span><span class="op" id="6855742">:</span>&nbsp;<span class="ident" id="6855744">nil</span><span class="op" id="6855747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855750">r2</span>&nbsp;<span class="op" id="6855753">:=</span>&nbsp;<span class="builtinfunc" id="6855756">make</span><span class="op" id="6855760">(</span><span class="ident" id="6855761"><a href="/encoding/gob/encoder_test.go.html#6855643">recursiveMap</a></span><span class="op" id="6855773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855776">if</span>&nbsp;<span class="ident" id="6855779">err</span>&nbsp;<span class="op" id="6855783">:=</span>&nbsp;<span class="ident" id="6855786"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6855795">(</span><span class="ident" id="6855796"><a href="/encoding/gob/encoder_test.go.html#6855681">r1</a></span><span class="op" id="6855798">,</span>&nbsp;<span class="op" id="6855800">&amp;</span><span class="ident" id="6855801"><a href="/encoding/gob/encoder_test.go.html#6855750">r2</a></span><span class="op" id="6855803">)</span><span class="op" id="6855804">;</span>&nbsp;<span class="ident" id="6855806"><a href="/encoding/gob/encoder_test.go.html#6855779">err</a></span>&nbsp;<span class="op" id="6855810">!=</span>&nbsp;<span class="ident" id="6855813">nil</span>&nbsp;<span class="op" id="6855817">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855821"><a href="/encoding/gob/encoder_test.go.html#6855621">t</a></span><span class="op" id="6855822">.</span><span class="ident" id="6855823">Error</span><span class="op" id="6855828">(</span><span class="ident" id="6855829"><a href="/encoding/gob/encoder_test.go.html#6855779">err</a></span><span class="op" id="6855832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6855835">}</span><br>
<span class="lineno"></span><span class="op" id="6855837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6855840">func</span>&nbsp;<span class="ident" id="6855845">TestRecursiveSliceType</span><span class="op" id="6855867">(</span><span class="ident" id="6855868">t</span>&nbsp;<span class="op" id="6855870">*</span><span class="ident" id="6855871"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6855878">.</span><span class="ident" id="6855879">T</span><span class="op" id="6855880">)</span>&nbsp;<span class="op" id="6855882">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6855885">type</span>&nbsp;<span class="ident" id="6855890">recursiveSlice</span>&nbsp;<span class="op" id="6855905">[</span><span class="op" id="6855906">]</span><span class="ident" id="6855907"><a href="/encoding/gob/encoder_test.go.html#6855890">recursiveSlice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855923">r1</span>&nbsp;<span class="op" id="6855926">:=</span>&nbsp;<span class="ident" id="6855929"><a href="/encoding/gob/encoder_test.go.html#6855890">recursiveSlice</a></span><span class="op" id="6855943">{</span><span class="num" id="6855944">0</span><span class="op" id="6855945">:</span>&nbsp;<span class="ident" id="6855947"><a href="/encoding/gob/encoder_test.go.html#6855890">recursiveSlice</a></span><span class="op" id="6855961">{</span><span class="num" id="6855962">0</span><span class="op" id="6855963">:</span>&nbsp;<span class="ident" id="6855965">nil</span><span class="op" id="6855968">}</span><span class="op" id="6855969">,</span>&nbsp;<span class="num" id="6855971">1</span><span class="op" id="6855972">:</span>&nbsp;<span class="ident" id="6855974">nil</span><span class="op" id="6855977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6855980">r2</span>&nbsp;<span class="op" id="6855983">:=</span>&nbsp;<span class="builtinfunc" id="6855986">make</span><span class="op" id="6855990">(</span><span class="ident" id="6855991"><a href="/encoding/gob/encoder_test.go.html#6855890">recursiveSlice</a></span><span class="op" id="6856005">,</span>&nbsp;<span class="num" id="6856007">0</span><span class="op" id="6856008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856011">if</span>&nbsp;<span class="ident" id="6856014">err</span>&nbsp;<span class="op" id="6856018">:=</span>&nbsp;<span class="ident" id="6856021"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6856030">(</span><span class="ident" id="6856031"><a href="/encoding/gob/encoder_test.go.html#6855923">r1</a></span><span class="op" id="6856033">,</span>&nbsp;<span class="op" id="6856035">&amp;</span><span class="ident" id="6856036"><a href="/encoding/gob/encoder_test.go.html#6855980">r2</a></span><span class="op" id="6856038">)</span><span class="op" id="6856039">;</span>&nbsp;<span class="ident" id="6856041"><a href="/encoding/gob/encoder_test.go.html#6856014">err</a></span>&nbsp;<span class="op" id="6856045">!=</span>&nbsp;<span class="ident" id="6856048">nil</span>&nbsp;<span class="op" id="6856052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856056"><a href="/encoding/gob/encoder_test.go.html#6855868">t</a></span><span class="op" id="6856057">.</span><span class="ident" id="6856058">Error</span><span class="op" id="6856063">(</span><span class="ident" id="6856064"><a href="/encoding/gob/encoder_test.go.html#6856014">err</a></span><span class="op" id="6856067">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856070">}</span><br>
<span class="lineno"></span><span class="op" id="6856072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6856075">//&nbsp;Regression&nbsp;test&nbsp;for&nbsp;bug:&nbsp;must&nbsp;send&nbsp;zero&nbsp;values&nbsp;inside&nbsp;arrays</span><br>
<span class="lineno"></span><span class="keyword" id="6856139">func</span>&nbsp;<span class="ident" id="6856144">TestDefaultsInArray</span><span class="op" id="6856163">(</span><span class="ident" id="6856164">t</span>&nbsp;<span class="op" id="6856166">*</span><span class="ident" id="6856167"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6856174">.</span><span class="ident" id="6856175">T</span><span class="op" id="6856176">)</span>&nbsp;<span class="op" id="6856178">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856181">type</span>&nbsp;<span class="ident" id="6856186">Type7</span>&nbsp;<span class="keyword" id="6856192">struct</span>&nbsp;<span class="op" id="6856199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856203">B</span>&nbsp;<span class="op" id="6856205">[</span><span class="op" id="6856206">]</span><span class="builtintype" id="6856207">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856214">I</span>&nbsp;<span class="op" id="6856216">[</span><span class="op" id="6856217">]</span><span class="builtintype" id="6856218">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856224">S</span>&nbsp;<span class="op" id="6856226">[</span><span class="op" id="6856227">]</span><span class="builtintype" id="6856228">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856237">F</span>&nbsp;<span class="op" id="6856239">[</span><span class="op" id="6856240">]</span><span class="builtintype" id="6856241">float64</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856253">t7</span>&nbsp;<span class="op" id="6856256">:=</span>&nbsp;<span class="ident" id="6856259"><a href="/encoding/gob/encoder_test.go.html#6856186">Type7</a></span><span class="op" id="6856264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856268">[</span><span class="op" id="6856269">]</span><span class="builtintype" id="6856270">bool</span><span class="op" id="6856274">{</span><span class="builtintype" id="6856275">false</span><span class="op" id="6856280">,</span>&nbsp;<span class="builtintype" id="6856282">false</span><span class="op" id="6856287">,</span>&nbsp;<span class="builtintype" id="6856289">true</span><span class="op" id="6856293">}</span><span class="op" id="6856294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856298">[</span><span class="op" id="6856299">]</span><span class="builtintype" id="6856300">int</span><span class="op" id="6856303">{</span><span class="num" id="6856304">0</span><span class="op" id="6856305">,</span>&nbsp;<span class="num" id="6856307">0</span><span class="op" id="6856308">,</span>&nbsp;<span class="num" id="6856310">1</span><span class="op" id="6856311">}</span><span class="op" id="6856312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856316">[</span><span class="op" id="6856317">]</span><span class="builtintype" id="6856318">string</span><span class="op" id="6856324">{</span><span class="string" id="6856325">&#34;hi&#34;</span><span class="op" id="6856329">,</span>&nbsp;<span class="string" id="6856331">&#34;&#34;</span><span class="op" id="6856333">,</span>&nbsp;<span class="string" id="6856335">&#34;there&#34;</span><span class="op" id="6856342">}</span><span class="op" id="6856343">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856347">[</span><span class="op" id="6856348">]</span><span class="builtintype" id="6856349">float64</span><span class="op" id="6856356">{</span><span class="num" id="6856357">0</span><span class="op" id="6856358">,</span>&nbsp;<span class="num" id="6856360">0</span><span class="op" id="6856361">,</span>&nbsp;<span class="num" id="6856363">1</span><span class="op" id="6856364">}</span><span class="op" id="6856365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856371">var</span>&nbsp;<span class="ident" id="6856375">t7p</span>&nbsp;<span class="ident" id="6856379"><a href="/encoding/gob/encoder_test.go.html#6856186">Type7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856386">if</span>&nbsp;<span class="ident" id="6856389">err</span>&nbsp;<span class="op" id="6856393">:=</span>&nbsp;<span class="ident" id="6856396"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6856405">(</span><span class="ident" id="6856406"><a href="/encoding/gob/encoder_test.go.html#6856253">t7</a></span><span class="op" id="6856408">,</span>&nbsp;<span class="op" id="6856410">&amp;</span><span class="ident" id="6856411"><a href="/encoding/gob/encoder_test.go.html#6856375">t7p</a></span><span class="op" id="6856414">)</span><span class="op" id="6856415">;</span>&nbsp;<span class="ident" id="6856417"><a href="/encoding/gob/encoder_test.go.html#6856389">err</a></span>&nbsp;<span class="op" id="6856421">!=</span>&nbsp;<span class="ident" id="6856424">nil</span>&nbsp;<span class="op" id="6856428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856432"><a href="/encoding/gob/encoder_test.go.html#6856164">t</a></span><span class="op" id="6856433">.</span><span class="ident" id="6856434">Error</span><span class="op" id="6856439">(</span><span class="ident" id="6856440"><a href="/encoding/gob/encoder_test.go.html#6856389">err</a></span><span class="op" id="6856443">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856446">}</span><br>
<span class="lineno"></span><span class="op" id="6856448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6856451">var</span>&nbsp;<span class="ident" id="6856455">testInt</span>&nbsp;<span class="builtintype" id="6856463">int</span><br>
<span class="lineno"></span><span class="keyword" id="6856467">var</span>&nbsp;<span class="ident" id="6856471">testFloat32</span>&nbsp;<span class="builtintype" id="6856483">float32</span><br>
<span class="lineno">365</span><span class="keyword" id="6856491">var</span>&nbsp;<span class="ident" id="6856495">testString</span>&nbsp;<span class="builtintype" id="6856506">string</span><br>
<span class="lineno"></span><span class="keyword" id="6856513">var</span>&nbsp;<span class="ident" id="6856517">testSlice</span>&nbsp;<span class="op" id="6856527">[</span><span class="op" id="6856528">]</span><span class="builtintype" id="6856529">string</span><br>
<span class="lineno"></span><span class="keyword" id="6856536">var</span>&nbsp;<span class="ident" id="6856540">testMap</span>&nbsp;<span class="keyword" id="6856548">map</span><span class="op" id="6856551">[</span><span class="builtintype" id="6856552">string</span><span class="op" id="6856558">]</span><span class="builtintype" id="6856559">int</span><br>
<span class="lineno"></span><span class="keyword" id="6856563">var</span>&nbsp;<span class="ident" id="6856567">testArray</span>&nbsp;<span class="op" id="6856577">[</span><span class="num" id="6856578">7</span><span class="op" id="6856579">]</span><span class="builtintype" id="6856580">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="6856585">type</span>&nbsp;<span class="ident" id="6856590">SingleTest</span>&nbsp;<span class="keyword" id="6856601">struct</span>&nbsp;<span class="op" id="6856608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856611">in</span>&nbsp;&nbsp;<span class="keyword" id="6856615">interface</span><span class="op" id="6856624">{</span><span class="op" id="6856625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856628">out</span>&nbsp;<span class="keyword" id="6856632">interface</span><span class="op" id="6856641">{</span><span class="op" id="6856642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856645">err</span>&nbsp;<span class="builtintype" id="6856649">string</span><br>
<span class="lineno"></span><span class="op" id="6856656">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="6856659">var</span>&nbsp;<span class="ident" id="6856663">singleTests</span>&nbsp;<span class="op" id="6856675">=</span>&nbsp;<span class="op" id="6856677">[</span><span class="op" id="6856678">]</span><span class="ident" id="6856679"><a href="/encoding/gob/encoder_test.go.html#6856590">SingleTest</a></span><span class="op" id="6856689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856692">{</span><span class="num" id="6856693">17</span><span class="op" id="6856695">,</span>&nbsp;<span class="op" id="6856697">&amp;</span><span class="ident" id="6856698"><a href="/encoding/gob/encoder_test.go.html#6856455">testInt</a></span><span class="op" id="6856705">,</span>&nbsp;<span class="string" id="6856707">&#34;&#34;</span><span class="op" id="6856709">}</span><span class="op" id="6856710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856713">{</span><span class="builtintype" id="6856714">float32</span><span class="op" id="6856721">(</span><span class="num" id="6856722">17.5</span><span class="op" id="6856726">)</span><span class="op" id="6856727">,</span>&nbsp;<span class="op" id="6856729">&amp;</span><span class="ident" id="6856730"><a href="/encoding/gob/encoder_test.go.html#6856471">testFloat32</a></span><span class="op" id="6856741">,</span>&nbsp;<span class="string" id="6856743">&#34;&#34;</span><span class="op" id="6856745">}</span><span class="op" id="6856746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856749">{</span><span class="string" id="6856750">&#34;bike&nbsp;shed&#34;</span><span class="op" id="6856761">,</span>&nbsp;<span class="op" id="6856763">&amp;</span><span class="ident" id="6856764"><a href="/encoding/gob/encoder_test.go.html#6856495">testString</a></span><span class="op" id="6856774">,</span>&nbsp;<span class="string" id="6856776">&#34;&#34;</span><span class="op" id="6856778">}</span><span class="op" id="6856779">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856782">{</span><span class="op" id="6856783">[</span><span class="op" id="6856784">]</span><span class="builtintype" id="6856785">string</span><span class="op" id="6856791">{</span><span class="string" id="6856792">&#34;bike&#34;</span><span class="op" id="6856798">,</span>&nbsp;<span class="string" id="6856800">&#34;shed&#34;</span><span class="op" id="6856806">,</span>&nbsp;<span class="string" id="6856808">&#34;paint&#34;</span><span class="op" id="6856815">,</span>&nbsp;<span class="string" id="6856817">&#34;color&#34;</span><span class="op" id="6856824">}</span><span class="op" id="6856825">,</span>&nbsp;<span class="op" id="6856827">&amp;</span><span class="ident" id="6856828"><a href="/encoding/gob/encoder_test.go.html#6856517">testSlice</a></span><span class="op" id="6856837">,</span>&nbsp;<span class="string" id="6856839">&#34;&#34;</span><span class="op" id="6856841">}</span><span class="op" id="6856842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856845">{</span><span class="keyword" id="6856846">map</span><span class="op" id="6856849">[</span><span class="builtintype" id="6856850">string</span><span class="op" id="6856856">]</span><span class="builtintype" id="6856857">int</span><span class="op" id="6856860">{</span><span class="string" id="6856861">&#34;seven&#34;</span><span class="op" id="6856868">:</span>&nbsp;<span class="num" id="6856870">7</span><span class="op" id="6856871">,</span>&nbsp;<span class="string" id="6856873">&#34;twelve&#34;</span><span class="op" id="6856881">:</span>&nbsp;<span class="num" id="6856883">12</span><span class="op" id="6856885">}</span><span class="op" id="6856886">,</span>&nbsp;<span class="op" id="6856888">&amp;</span><span class="ident" id="6856889"><a href="/encoding/gob/encoder_test.go.html#6856540">testMap</a></span><span class="op" id="6856896">,</span>&nbsp;<span class="string" id="6856898">&#34;&#34;</span><span class="op" id="6856900">}</span><span class="op" id="6856901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856904">{</span><span class="op" id="6856905">[</span><span class="num" id="6856906">7</span><span class="op" id="6856907">]</span><span class="builtintype" id="6856908">int</span><span class="op" id="6856911">{</span><span class="num" id="6856912">4</span><span class="op" id="6856913">,</span>&nbsp;<span class="num" id="6856915">55</span><span class="op" id="6856917">,</span>&nbsp;<span class="num" id="6856919">0</span><span class="op" id="6856920">,</span>&nbsp;<span class="num" id="6856922">0</span><span class="op" id="6856923">,</span>&nbsp;<span class="num" id="6856925">0</span><span class="op" id="6856926">,</span>&nbsp;<span class="num" id="6856928">0</span><span class="op" id="6856929">,</span>&nbsp;<span class="num" id="6856931">0</span><span class="op" id="6856932">}</span><span class="op" id="6856933">,</span>&nbsp;<span class="op" id="6856935">&amp;</span><span class="ident" id="6856936"><a href="/encoding/gob/encoder_test.go.html#6856567">testArray</a></span><span class="op" id="6856945">,</span>&nbsp;<span class="string" id="6856947">&#34;&#34;</span><span class="op" id="6856949">}</span><span class="op" id="6856950">,</span>&nbsp;<span class="comment" id="6856952">//&nbsp;case&nbsp;that&nbsp;once&nbsp;triggered&nbsp;a&nbsp;bug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856987">{</span><span class="op" id="6856988">[</span><span class="num" id="6856989">7</span><span class="op" id="6856990">]</span><span class="builtintype" id="6856991">int</span><span class="op" id="6856994">{</span><span class="num" id="6856995">4</span><span class="op" id="6856996">,</span>&nbsp;<span class="num" id="6856998">55</span><span class="op" id="6857000">,</span>&nbsp;<span class="num" id="6857002">1</span><span class="op" id="6857003">,</span>&nbsp;<span class="num" id="6857005">44</span><span class="op" id="6857007">,</span>&nbsp;<span class="num" id="6857009">22</span><span class="op" id="6857011">,</span>&nbsp;<span class="num" id="6857013">66</span><span class="op" id="6857015">,</span>&nbsp;<span class="num" id="6857017">1234</span><span class="op" id="6857021">}</span><span class="op" id="6857022">,</span>&nbsp;<span class="op" id="6857024">&amp;</span><span class="ident" id="6857025"><a href="/encoding/gob/encoder_test.go.html#6856567">testArray</a></span><span class="op" id="6857034">,</span>&nbsp;<span class="string" id="6857036">&#34;&#34;</span><span class="op" id="6857038">}</span><span class="op" id="6857039">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857043">//&nbsp;Decode&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857061">{</span><span class="num" id="6857062">172</span><span class="op" id="6857065">,</span>&nbsp;<span class="op" id="6857067">&amp;</span><span class="ident" id="6857068"><a href="/encoding/gob/encoder_test.go.html#6856471">testFloat32</a></span><span class="op" id="6857079">,</span>&nbsp;<span class="string" id="6857081">&#34;type&#34;</span><span class="op" id="6857087">}</span><span class="op" id="6857088">,</span><br>
<span class="lineno"></span><span class="op" id="6857090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6857093">func</span>&nbsp;<span class="ident" id="6857098">TestSingletons</span><span class="op" id="6857112">(</span><span class="ident" id="6857113">t</span>&nbsp;<span class="op" id="6857115">*</span><span class="ident" id="6857116"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6857123">.</span><span class="ident" id="6857124">T</span><span class="op" id="6857125">)</span>&nbsp;<span class="op" id="6857127">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857130">b</span>&nbsp;<span class="op" id="6857132">:=</span>&nbsp;<span class="builtinfunc" id="6857135">new</span><span class="op" id="6857138">(</span><span class="ident" id="6857139"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6857144">.</span><span class="ident" id="6857145">Buffer</span><span class="op" id="6857151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857154">enc</span>&nbsp;<span class="op" id="6857158">:=</span>&nbsp;<span class="ident" id="6857161"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6857171">(</span><span class="ident" id="6857172"><a href="/encoding/gob/encoder_test.go.html#6857130">b</a></span><span class="op" id="6857173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857176">dec</span>&nbsp;<span class="op" id="6857180">:=</span>&nbsp;<span class="ident" id="6857183"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6857193">(</span><span class="ident" id="6857194"><a href="/encoding/gob/encoder_test.go.html#6857130">b</a></span><span class="op" id="6857195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857198">for</span>&nbsp;<span class="ident" id="6857202">_</span><span class="op" id="6857203">,</span>&nbsp;<span class="ident" id="6857205">test</span>&nbsp;<span class="op" id="6857210">:=</span>&nbsp;<span class="keyword" id="6857213">range</span>&nbsp;<span class="ident" id="6857219"><a href="/encoding/gob/encoder_test.go.html#6856663">singleTests</a></span>&nbsp;<span class="op" id="6857231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857235"><a href="/encoding/gob/encoder_test.go.html#6857130">b</a></span><span class="op" id="6857236">.</span><span class="ident" id="6857237">Reset</span><span class="op" id="6857242">(</span><span class="op" id="6857243">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857247">err</span>&nbsp;<span class="op" id="6857251">:=</span>&nbsp;<span class="ident" id="6857254"><a href="/encoding/gob/encoder_test.go.html#6857154">enc</a></span><span class="op" id="6857257">.</span><span class="ident" id="6857258">Encode</span><span class="op" id="6857264">(</span><span class="ident" id="6857265"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857269">.</span><span class="ident" id="6857270">in</span><span class="op" id="6857272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857276">if</span>&nbsp;<span class="ident" id="6857279"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span>&nbsp;<span class="op" id="6857283">!=</span>&nbsp;<span class="ident" id="6857286">nil</span>&nbsp;<span class="op" id="6857290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857295"><a href="/encoding/gob/encoder_test.go.html#6857113">t</a></span><span class="op" id="6857296">.</span><span class="ident" id="6857297">Errorf</span><span class="op" id="6857303">(</span><span class="string" id="6857304">&#34;error&nbsp;encoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="6857327">,</span>&nbsp;<span class="ident" id="6857329"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857333">.</span><span class="ident" id="6857334">in</span><span class="op" id="6857336">,</span>&nbsp;<span class="ident" id="6857338"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span><span class="op" id="6857341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857346">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857357">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857361"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span>&nbsp;<span class="op" id="6857365">=</span>&nbsp;<span class="ident" id="6857367"><a href="/encoding/gob/encoder_test.go.html#6857176">dec</a></span><span class="op" id="6857370">.</span><span class="ident" id="6857371">Decode</span><span class="op" id="6857377">(</span><span class="ident" id="6857378"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857382">.</span><span class="ident" id="6857383">out</span><span class="op" id="6857386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857390">switch</span>&nbsp;<span class="op" id="6857397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857401">case</span>&nbsp;<span class="ident" id="6857406"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span>&nbsp;<span class="op" id="6857410">!=</span>&nbsp;<span class="ident" id="6857413">nil</span>&nbsp;<span class="op" id="6857417">&amp;&amp;</span>&nbsp;<span class="ident" id="6857420"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857424">.</span><span class="ident" id="6857425">err</span>&nbsp;<span class="op" id="6857429">==</span>&nbsp;<span class="string" id="6857432">&#34;&#34;</span><span class="op" id="6857434">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857439"><a href="/encoding/gob/encoder_test.go.html#6857113">t</a></span><span class="op" id="6857440">.</span><span class="ident" id="6857441">Errorf</span><span class="op" id="6857447">(</span><span class="string" id="6857448">&#34;error&nbsp;decoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="6857471">,</span>&nbsp;<span class="ident" id="6857473"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857477">.</span><span class="ident" id="6857478">in</span><span class="op" id="6857480">,</span>&nbsp;<span class="ident" id="6857482"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span><span class="op" id="6857485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857490">continue</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857501">case</span>&nbsp;<span class="ident" id="6857506"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span>&nbsp;<span class="op" id="6857510">==</span>&nbsp;<span class="ident" id="6857513">nil</span>&nbsp;<span class="op" id="6857517">&amp;&amp;</span>&nbsp;<span class="ident" id="6857520"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857524">.</span><span class="ident" id="6857525">err</span>&nbsp;<span class="op" id="6857529">!=</span>&nbsp;<span class="string" id="6857532">&#34;&#34;</span><span class="op" id="6857534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857539"><a href="/encoding/gob/encoder_test.go.html#6857113">t</a></span><span class="op" id="6857540">.</span><span class="ident" id="6857541">Errorf</span><span class="op" id="6857547">(</span><span class="string" id="6857548">&#34;expected&nbsp;error&nbsp;decoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="6857580">,</span>&nbsp;<span class="ident" id="6857582"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857586">.</span><span class="ident" id="6857587">in</span><span class="op" id="6857589">,</span>&nbsp;<span class="ident" id="6857591"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857595">.</span><span class="ident" id="6857596">err</span><span class="op" id="6857599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857604">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857615">case</span>&nbsp;<span class="ident" id="6857620"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span>&nbsp;<span class="op" id="6857624">!=</span>&nbsp;<span class="ident" id="6857627">nil</span>&nbsp;<span class="op" id="6857631">&amp;&amp;</span>&nbsp;<span class="ident" id="6857634"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857638">.</span><span class="ident" id="6857639">err</span>&nbsp;<span class="op" id="6857643">!=</span>&nbsp;<span class="string" id="6857646">&#34;&#34;</span><span class="op" id="6857648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857653">if</span>&nbsp;<span class="ident" id="6857656"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6857663">.</span><span class="ident" id="6857664">Index</span><span class="op" id="6857669">(</span><span class="ident" id="6857670"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span><span class="op" id="6857673">.</span><span class="ident" id="6857674">Error</span><span class="op" id="6857679">(</span><span class="op" id="6857680">)</span><span class="op" id="6857681">,</span>&nbsp;<span class="ident" id="6857683"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857687">.</span><span class="ident" id="6857688">err</span><span class="op" id="6857691">)</span>&nbsp;<span class="op" id="6857693">&lt;</span>&nbsp;<span class="num" id="6857695">0</span>&nbsp;<span class="op" id="6857697">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857703"><a href="/encoding/gob/encoder_test.go.html#6857113">t</a></span><span class="op" id="6857704">.</span><span class="ident" id="6857705">Errorf</span><span class="op" id="6857711">(</span><span class="string" id="6857712">&#34;wrong&nbsp;error&nbsp;decoding&nbsp;%v:&nbsp;wanted&nbsp;%s,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6857756">,</span>&nbsp;<span class="ident" id="6857758"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857762">.</span><span class="ident" id="6857763">in</span><span class="op" id="6857765">,</span>&nbsp;<span class="ident" id="6857767"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857771">.</span><span class="ident" id="6857772">err</span><span class="op" id="6857775">,</span>&nbsp;<span class="ident" id="6857777"><a href="/encoding/gob/encoder_test.go.html#6857247">err</a></span><span class="op" id="6857780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857790">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6857805">//&nbsp;Get&nbsp;rid&nbsp;of&nbsp;the&nbsp;pointer&nbsp;in&nbsp;the&nbsp;rhs</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857844">val</span>&nbsp;<span class="op" id="6857848">:=</span>&nbsp;<span class="ident" id="6857851"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6857858">.</span><span class="ident" id="6857859">ValueOf</span><span class="op" id="6857866">(</span><span class="ident" id="6857867"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857871">.</span><span class="ident" id="6857872">out</span><span class="op" id="6857875">)</span><span class="op" id="6857876">.</span><span class="ident" id="6857877">Elem</span><span class="op" id="6857881">(</span><span class="op" id="6857882">)</span><span class="op" id="6857883">.</span><span class="ident" id="6857884">Interface</span><span class="op" id="6857893">(</span><span class="op" id="6857894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857898">if</span>&nbsp;<span class="op" id="6857901">!</span><span class="ident" id="6857902"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6857909">.</span><span class="ident" id="6857910">DeepEqual</span><span class="op" id="6857919">(</span><span class="ident" id="6857920"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857924">.</span><span class="ident" id="6857925">in</span><span class="op" id="6857927">,</span>&nbsp;<span class="ident" id="6857929"><a href="/encoding/gob/encoder_test.go.html#6857844">val</a></span><span class="op" id="6857932">)</span>&nbsp;<span class="op" id="6857934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857939"><a href="/encoding/gob/encoder_test.go.html#6857113">t</a></span><span class="op" id="6857940">.</span><span class="ident" id="6857941">Errorf</span><span class="op" id="6857947">(</span><span class="string" id="6857948">&#34;decoding&nbsp;singleton:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6857988">,</span>&nbsp;<span class="ident" id="6857990"><a href="/encoding/gob/encoder_test.go.html#6857205">test</a></span><span class="op" id="6857994">.</span><span class="ident" id="6857995">in</span><span class="op" id="6857997">,</span>&nbsp;<span class="ident" id="6857999"><a href="/encoding/gob/encoder_test.go.html#6857844">val</a></span><span class="op" id="6858002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858009">}</span><br>
<span class="lineno">420</span><span class="op" id="6858011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858014">func</span>&nbsp;<span class="ident" id="6858019">TestStructNonStruct</span><span class="op" id="6858038">(</span><span class="ident" id="6858039">t</span>&nbsp;<span class="op" id="6858041">*</span><span class="ident" id="6858042"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6858049">.</span><span class="ident" id="6858050">T</span><span class="op" id="6858051">)</span>&nbsp;<span class="op" id="6858053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858056">type</span>&nbsp;<span class="ident" id="6858061">Struct</span>&nbsp;<span class="keyword" id="6858068">struct</span>&nbsp;<span class="op" id="6858075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858079">A</span>&nbsp;<span class="builtintype" id="6858081">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858092">type</span>&nbsp;<span class="ident" id="6858097">NonStruct</span>&nbsp;<span class="builtintype" id="6858107">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858115">s</span>&nbsp;<span class="op" id="6858117">:=</span>&nbsp;<span class="ident" id="6858120"><a href="/encoding/gob/encoder_test.go.html#6858061">Struct</a></span><span class="op" id="6858126">{</span><span class="string" id="6858127">&#34;hello&#34;</span><span class="op" id="6858134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858137">var</span>&nbsp;<span class="ident" id="6858141">sp</span>&nbsp;<span class="ident" id="6858144"><a href="/encoding/gob/encoder_test.go.html#6858061">Struct</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858152">if</span>&nbsp;<span class="ident" id="6858155">err</span>&nbsp;<span class="op" id="6858159">:=</span>&nbsp;<span class="ident" id="6858162"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6858171">(</span><span class="ident" id="6858172"><a href="/encoding/gob/encoder_test.go.html#6858115">s</a></span><span class="op" id="6858173">,</span>&nbsp;<span class="op" id="6858175">&amp;</span><span class="ident" id="6858176"><a href="/encoding/gob/encoder_test.go.html#6858141">sp</a></span><span class="op" id="6858178">)</span><span class="op" id="6858179">;</span>&nbsp;<span class="ident" id="6858181"><a href="/encoding/gob/encoder_test.go.html#6858155">err</a></span>&nbsp;<span class="op" id="6858185">!=</span>&nbsp;<span class="ident" id="6858188">nil</span>&nbsp;<span class="op" id="6858192">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858196"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858197">.</span><span class="ident" id="6858198">Error</span><span class="op" id="6858203">(</span><span class="ident" id="6858204"><a href="/encoding/gob/encoder_test.go.html#6858155">err</a></span><span class="op" id="6858207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858213">var</span>&nbsp;<span class="ident" id="6858217">ns</span>&nbsp;<span class="ident" id="6858220"><a href="/encoding/gob/encoder_test.go.html#6858097">NonStruct</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858231">if</span>&nbsp;<span class="ident" id="6858234">err</span>&nbsp;<span class="op" id="6858238">:=</span>&nbsp;<span class="ident" id="6858241"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6858250">(</span><span class="ident" id="6858251"><a href="/encoding/gob/encoder_test.go.html#6858115">s</a></span><span class="op" id="6858252">,</span>&nbsp;<span class="op" id="6858254">&amp;</span><span class="ident" id="6858255"><a href="/encoding/gob/encoder_test.go.html#6858217">ns</a></span><span class="op" id="6858257">)</span><span class="op" id="6858258">;</span>&nbsp;<span class="ident" id="6858260"><a href="/encoding/gob/encoder_test.go.html#6858234">err</a></span>&nbsp;<span class="op" id="6858264">==</span>&nbsp;<span class="ident" id="6858267">nil</span>&nbsp;<span class="op" id="6858271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858275"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858276">.</span><span class="ident" id="6858277">Error</span><span class="op" id="6858282">(</span><span class="string" id="6858283">&#34;should&nbsp;get&nbsp;error&nbsp;for&nbsp;struct/non-struct&#34;</span><span class="op" id="6858323">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858326">}</span>&nbsp;<span class="keyword" id="6858328">else</span>&nbsp;<span class="keyword" id="6858333">if</span>&nbsp;<span class="ident" id="6858336"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6858343">.</span><span class="ident" id="6858344">Index</span><span class="op" id="6858349">(</span><span class="ident" id="6858350"><a href="/encoding/gob/encoder_test.go.html#6858234">err</a></span><span class="op" id="6858353">.</span><span class="ident" id="6858354">Error</span><span class="op" id="6858359">(</span><span class="op" id="6858360">)</span><span class="op" id="6858361">,</span>&nbsp;<span class="string" id="6858363">&#34;type&#34;</span><span class="op" id="6858369">)</span>&nbsp;<span class="op" id="6858371">&lt;</span>&nbsp;<span class="num" id="6858373">0</span>&nbsp;<span class="op" id="6858375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858379"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858380">.</span><span class="ident" id="6858381">Error</span><span class="op" id="6858386">(</span><span class="string" id="6858387">&#34;for&nbsp;struct/non-struct&nbsp;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6858435">,</span>&nbsp;<span class="ident" id="6858437"><a href="/encoding/gob/encoder_test.go.html#6858234">err</a></span><span class="op" id="6858440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6858446">//&nbsp;Now&nbsp;try&nbsp;the&nbsp;other&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858472">var</span>&nbsp;<span class="ident" id="6858476">nsp</span>&nbsp;<span class="ident" id="6858480"><a href="/encoding/gob/encoder_test.go.html#6858097">NonStruct</a></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858491">if</span>&nbsp;<span class="ident" id="6858494">err</span>&nbsp;<span class="op" id="6858498">:=</span>&nbsp;<span class="ident" id="6858501"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6858510">(</span><span class="ident" id="6858511"><a href="/encoding/gob/encoder_test.go.html#6858217">ns</a></span><span class="op" id="6858513">,</span>&nbsp;<span class="op" id="6858515">&amp;</span><span class="ident" id="6858516"><a href="/encoding/gob/encoder_test.go.html#6858476">nsp</a></span><span class="op" id="6858519">)</span><span class="op" id="6858520">;</span>&nbsp;<span class="ident" id="6858522"><a href="/encoding/gob/encoder_test.go.html#6858494">err</a></span>&nbsp;<span class="op" id="6858526">!=</span>&nbsp;<span class="ident" id="6858529">nil</span>&nbsp;<span class="op" id="6858533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858537"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858538">.</span><span class="ident" id="6858539">Error</span><span class="op" id="6858544">(</span><span class="ident" id="6858545"><a href="/encoding/gob/encoder_test.go.html#6858494">err</a></span><span class="op" id="6858548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858554">if</span>&nbsp;<span class="ident" id="6858557">err</span>&nbsp;<span class="op" id="6858561">:=</span>&nbsp;<span class="ident" id="6858564"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6858573">(</span><span class="ident" id="6858574"><a href="/encoding/gob/encoder_test.go.html#6858217">ns</a></span><span class="op" id="6858576">,</span>&nbsp;<span class="op" id="6858578">&amp;</span><span class="ident" id="6858579"><a href="/encoding/gob/encoder_test.go.html#6858115">s</a></span><span class="op" id="6858580">)</span><span class="op" id="6858581">;</span>&nbsp;<span class="ident" id="6858583"><a href="/encoding/gob/encoder_test.go.html#6858557">err</a></span>&nbsp;<span class="op" id="6858587">==</span>&nbsp;<span class="ident" id="6858590">nil</span>&nbsp;<span class="op" id="6858594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858598"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858599">.</span><span class="ident" id="6858600">Error</span><span class="op" id="6858605">(</span><span class="string" id="6858606">&#34;should&nbsp;get&nbsp;error&nbsp;for&nbsp;non-struct/struct&#34;</span><span class="op" id="6858646">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858649">}</span>&nbsp;<span class="keyword" id="6858651">else</span>&nbsp;<span class="keyword" id="6858656">if</span>&nbsp;<span class="ident" id="6858659"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6858666">.</span><span class="ident" id="6858667">Index</span><span class="op" id="6858672">(</span><span class="ident" id="6858673"><a href="/encoding/gob/encoder_test.go.html#6858557">err</a></span><span class="op" id="6858676">.</span><span class="ident" id="6858677">Error</span><span class="op" id="6858682">(</span><span class="op" id="6858683">)</span><span class="op" id="6858684">,</span>&nbsp;<span class="string" id="6858686">&#34;type&#34;</span><span class="op" id="6858692">)</span>&nbsp;<span class="op" id="6858694">&lt;</span>&nbsp;<span class="num" id="6858696">0</span>&nbsp;<span class="op" id="6858698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858702"><a href="/encoding/gob/encoder_test.go.html#6858039">t</a></span><span class="op" id="6858703">.</span><span class="ident" id="6858704">Error</span><span class="op" id="6858709">(</span><span class="string" id="6858710">&#34;for&nbsp;non-struct/struct&nbsp;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6858758">,</span>&nbsp;<span class="ident" id="6858760"><a href="/encoding/gob/encoder_test.go.html#6858557">err</a></span><span class="op" id="6858763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858766">}</span><br>
<span class="lineno"></span><span class="op" id="6858768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span><span class="keyword" id="6858771">type</span>&nbsp;<span class="ident" id="6858776">interfaceIndirectTestI</span>&nbsp;<span class="keyword" id="6858799">interface</span>&nbsp;<span class="op" id="6858809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858812">F</span><span class="op" id="6858813">(</span><span class="op" id="6858814">)</span>&nbsp;<span class="builtintype" id="6858816">bool</span><br>
<span class="lineno"></span><span class="op" id="6858821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858824">type</span>&nbsp;<span class="ident" id="6858829">interfaceIndirectTestT</span>&nbsp;<span class="keyword" id="6858852">struct</span><span class="op" id="6858858">{</span><span class="op" id="6858859">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="keyword" id="6858862">func</span>&nbsp;<span class="op" id="6858867">(</span><span class="ident" id="6858868">this</span>&nbsp;<span class="op" id="6858873">*</span><span class="ident" id="6858874"><a href="/encoding/gob/encoder_test.go.html#6858829">interfaceIndirectTestT</a></span><span class="op" id="6858896">)</span>&nbsp;<span class="ident" id="6858898">F</span><span class="op" id="6858899">(</span><span class="op" id="6858900">)</span>&nbsp;<span class="builtintype" id="6858902">bool</span>&nbsp;<span class="op" id="6858907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858910">return</span>&nbsp;<span class="builtintype" id="6858917">true</span><br>
<span class="lineno"></span><span class="op" id="6858922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="comment" id="6858925">//&nbsp;A&nbsp;version&nbsp;of&nbsp;a&nbsp;bug&nbsp;reported&nbsp;on&nbsp;golang-nuts.&nbsp;&nbsp;Also&nbsp;tests&nbsp;top-level</span><br>
<span class="lineno"></span><span class="comment" id="6858994">//&nbsp;slice&nbsp;of&nbsp;interfaces.&nbsp;&nbsp;The&nbsp;issue&nbsp;was&nbsp;registering&nbsp;*T&nbsp;caused&nbsp;T&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6859063">//&nbsp;stored&nbsp;as&nbsp;the&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="6859095">func</span>&nbsp;<span class="ident" id="6859100">TestInterfaceIndirect</span><span class="op" id="6859121">(</span><span class="ident" id="6859122">t</span>&nbsp;<span class="op" id="6859124">*</span><span class="ident" id="6859125"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6859132">.</span><span class="ident" id="6859133">T</span><span class="op" id="6859134">)</span>&nbsp;<span class="op" id="6859136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859139"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6859147">(</span><span class="op" id="6859148">&amp;</span><span class="ident" id="6859149"><a href="/encoding/gob/encoder_test.go.html#6858829">interfaceIndirectTestT</a></span><span class="op" id="6859171">{</span><span class="op" id="6859172">}</span><span class="op" id="6859173">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859176">b</span>&nbsp;<span class="op" id="6859178">:=</span>&nbsp;<span class="builtinfunc" id="6859181">new</span><span class="op" id="6859184">(</span><span class="ident" id="6859185"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6859190">.</span><span class="ident" id="6859191">Buffer</span><span class="op" id="6859197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859200">w</span>&nbsp;<span class="op" id="6859202">:=</span>&nbsp;<span class="op" id="6859205">[</span><span class="op" id="6859206">]</span><span class="ident" id="6859207"><a href="/encoding/gob/encoder_test.go.html#6858776">interfaceIndirectTestI</a></span><span class="op" id="6859229">{</span><span class="op" id="6859230">&amp;</span><span class="ident" id="6859231"><a href="/encoding/gob/encoder_test.go.html#6858829">interfaceIndirectTestT</a></span><span class="op" id="6859253">{</span><span class="op" id="6859254">}</span><span class="op" id="6859255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859258">err</span>&nbsp;<span class="op" id="6859262">:=</span>&nbsp;<span class="ident" id="6859265"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6859275">(</span><span class="ident" id="6859276"><a href="/encoding/gob/encoder_test.go.html#6859176">b</a></span><span class="op" id="6859277">)</span><span class="op" id="6859278">.</span><span class="ident" id="6859279">Encode</span><span class="op" id="6859285">(</span><span class="ident" id="6859286"><a href="/encoding/gob/encoder_test.go.html#6859200">w</a></span><span class="op" id="6859287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859290">if</span>&nbsp;<span class="ident" id="6859293"><a href="/encoding/gob/encoder_test.go.html#6859258">err</a></span>&nbsp;<span class="op" id="6859297">!=</span>&nbsp;<span class="ident" id="6859300">nil</span>&nbsp;<span class="op" id="6859304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859308"><a href="/encoding/gob/encoder_test.go.html#6859122">t</a></span><span class="op" id="6859309">.</span><span class="ident" id="6859310">Fatal</span><span class="op" id="6859315">(</span><span class="string" id="6859316">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6859331">,</span>&nbsp;<span class="ident" id="6859333"><a href="/encoding/gob/encoder_test.go.html#6859258">err</a></span><span class="op" id="6859336">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859343">var</span>&nbsp;<span class="ident" id="6859347">r</span>&nbsp;<span class="op" id="6859349">[</span><span class="op" id="6859350">]</span><span class="ident" id="6859351"><a href="/encoding/gob/encoder_test.go.html#6858776">interfaceIndirectTestI</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859375"><a href="/encoding/gob/encoder_test.go.html#6859258">err</a></span>&nbsp;<span class="op" id="6859379">=</span>&nbsp;<span class="ident" id="6859381"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6859391">(</span><span class="ident" id="6859392"><a href="/encoding/gob/encoder_test.go.html#6859176">b</a></span><span class="op" id="6859393">)</span><span class="op" id="6859394">.</span><span class="ident" id="6859395">Decode</span><span class="op" id="6859401">(</span><span class="op" id="6859402">&amp;</span><span class="ident" id="6859403"><a href="/encoding/gob/encoder_test.go.html#6859347">r</a></span><span class="op" id="6859404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859407">if</span>&nbsp;<span class="ident" id="6859410"><a href="/encoding/gob/encoder_test.go.html#6859258">err</a></span>&nbsp;<span class="op" id="6859414">!=</span>&nbsp;<span class="ident" id="6859417">nil</span>&nbsp;<span class="op" id="6859421">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859425"><a href="/encoding/gob/encoder_test.go.html#6859122">t</a></span><span class="op" id="6859426">.</span><span class="ident" id="6859427">Fatal</span><span class="op" id="6859432">(</span><span class="string" id="6859433">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6859448">,</span>&nbsp;<span class="ident" id="6859450"><a href="/encoding/gob/encoder_test.go.html#6859258">err</a></span><span class="op" id="6859453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859456">}</span><br>
<span class="lineno"></span><span class="op" id="6859458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6859461">//&nbsp;Now&nbsp;follow&nbsp;various&nbsp;tests&nbsp;that&nbsp;decode&nbsp;into&nbsp;things&nbsp;that&nbsp;can&#39;t&nbsp;represent&nbsp;the</span><br>
<span class="lineno">480</span><span class="comment" id="6859538">//&nbsp;encoded&nbsp;value,&nbsp;all&nbsp;of&nbsp;which&nbsp;should&nbsp;be&nbsp;legal.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6859587">//&nbsp;Also,&nbsp;when&nbsp;the&nbsp;ignored&nbsp;object&nbsp;contains&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;may&nbsp;define</span><br>
<span class="lineno"></span><span class="comment" id="6859663">//&nbsp;types.&nbsp;Make&nbsp;sure&nbsp;that&nbsp;skipping&nbsp;the&nbsp;value&nbsp;still&nbsp;defines&nbsp;the&nbsp;types&nbsp;by&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="6859740">//&nbsp;the&nbsp;encoder/decoder&nbsp;pair&nbsp;to&nbsp;send&nbsp;a&nbsp;value&nbsp;afterwards.&nbsp;&nbsp;If&nbsp;an&nbsp;interface</span><br>
<span class="lineno">485</span><span class="comment" id="6859813">//&nbsp;is&nbsp;sent,&nbsp;its&nbsp;type&nbsp;in&nbsp;the&nbsp;test&nbsp;is&nbsp;always&nbsp;NewType0,&nbsp;so&nbsp;this&nbsp;checks&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6859890">//&nbsp;encoder&nbsp;and&nbsp;decoder&nbsp;don&#39;t&nbsp;skew&nbsp;with&nbsp;respect&nbsp;to&nbsp;type&nbsp;definitions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6859959">type</span>&nbsp;<span class="ident" id="6859964">Struct0</span>&nbsp;<span class="keyword" id="6859972">struct</span>&nbsp;<span class="op" id="6859979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859982">I</span>&nbsp;<span class="keyword" id="6859984">interface</span><span class="op" id="6859993">{</span><span class="op" id="6859994">}</span><br>
<span class="lineno">490</span><span class="op" id="6859996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6859999">type</span>&nbsp;<span class="ident" id="6860004">NewType0</span>&nbsp;<span class="keyword" id="6860013">struct</span>&nbsp;<span class="op" id="6860020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860023">S</span>&nbsp;<span class="builtintype" id="6860025">string</span><br>
<span class="lineno"></span><span class="op" id="6860032">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="6860035">type</span>&nbsp;<span class="ident" id="6860040">ignoreTest</span>&nbsp;<span class="keyword" id="6860051">struct</span>&nbsp;<span class="op" id="6860058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860061">in</span><span class="op" id="6860063">,</span>&nbsp;<span class="ident" id="6860065">out</span>&nbsp;<span class="keyword" id="6860069">interface</span><span class="op" id="6860078">{</span><span class="op" id="6860079">}</span><br>
<span class="lineno"></span><span class="op" id="6860081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="6860084">var</span>&nbsp;<span class="ident" id="6860088">ignoreTests</span>&nbsp;<span class="op" id="6860100">=</span>&nbsp;<span class="op" id="6860102">[</span><span class="op" id="6860103">]</span><span class="ident" id="6860104"><a href="/encoding/gob/encoder_test.go.html#6860040">ignoreTest</a></span><span class="op" id="6860114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860117">//&nbsp;Decode&nbsp;normal&nbsp;struct&nbsp;into&nbsp;an&nbsp;empty&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860163">{</span><span class="op" id="6860164">&amp;</span><span class="keyword" id="6860165">struct</span><span class="op" id="6860171">{</span>&nbsp;<span class="ident" id="6860173">A</span>&nbsp;<span class="builtintype" id="6860175">int</span>&nbsp;<span class="op" id="6860179">}</span><span class="op" id="6860180">{</span><span class="num" id="6860181">23</span><span class="op" id="6860183">}</span><span class="op" id="6860184">,</span>&nbsp;<span class="op" id="6860186">&amp;</span><span class="keyword" id="6860187">struct</span><span class="op" id="6860193">{</span><span class="op" id="6860194">}</span><span class="op" id="6860195">{</span><span class="op" id="6860196">}</span><span class="op" id="6860197">}</span><span class="op" id="6860198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860201">//&nbsp;Decode&nbsp;normal&nbsp;struct&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860238">{</span><span class="op" id="6860239">&amp;</span><span class="keyword" id="6860240">struct</span><span class="op" id="6860246">{</span>&nbsp;<span class="ident" id="6860248">A</span>&nbsp;<span class="builtintype" id="6860250">int</span>&nbsp;<span class="op" id="6860254">}</span><span class="op" id="6860255">{</span><span class="num" id="6860256">23</span><span class="op" id="6860258">}</span><span class="op" id="6860259">,</span>&nbsp;<span class="ident" id="6860261">nil</span><span class="op" id="6860264">}</span><span class="op" id="6860265">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860268">//&nbsp;Decode&nbsp;singleton&nbsp;string&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860308">{</span><span class="string" id="6860309">&#34;hello,&nbsp;world&#34;</span><span class="op" id="6860323">,</span>&nbsp;<span class="ident" id="6860325">nil</span><span class="op" id="6860328">}</span><span class="op" id="6860329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860332">//&nbsp;Decode&nbsp;singleton&nbsp;slice&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860371">{</span><span class="op" id="6860372">[</span><span class="op" id="6860373">]</span><span class="builtintype" id="6860374">int</span><span class="op" id="6860377">{</span><span class="num" id="6860378">1</span><span class="op" id="6860379">,</span>&nbsp;<span class="num" id="6860381">2</span><span class="op" id="6860382">,</span>&nbsp;<span class="num" id="6860384">3</span><span class="op" id="6860385">,</span>&nbsp;<span class="num" id="6860387">4</span><span class="op" id="6860388">}</span><span class="op" id="6860389">,</span>&nbsp;<span class="ident" id="6860391">nil</span><span class="op" id="6860394">}</span><span class="op" id="6860395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860398">//&nbsp;Decode&nbsp;struct&nbsp;containing&nbsp;an&nbsp;interface&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860452">{</span><span class="op" id="6860453">&amp;</span><span class="ident" id="6860454"><a href="/encoding/gob/encoder_test.go.html#6859964">Struct0</a></span><span class="op" id="6860461">{</span><span class="op" id="6860462">&amp;</span><span class="ident" id="6860463"><a href="/encoding/gob/encoder_test.go.html#6860004">NewType0</a></span><span class="op" id="6860471">{</span><span class="string" id="6860472">&#34;value0&#34;</span><span class="op" id="6860480">}</span><span class="op" id="6860481">}</span><span class="op" id="6860482">,</span>&nbsp;<span class="ident" id="6860484">nil</span><span class="op" id="6860487">}</span><span class="op" id="6860488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860491">//&nbsp;Decode&nbsp;singleton&nbsp;slice&nbsp;of&nbsp;interfaces&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860544">{</span><span class="op" id="6860545">[</span><span class="op" id="6860546">]</span><span class="keyword" id="6860547">interface</span><span class="op" id="6860556">{</span><span class="op" id="6860557">}</span><span class="op" id="6860558">{</span><span class="string" id="6860559">&#34;hi&#34;</span><span class="op" id="6860563">,</span>&nbsp;<span class="op" id="6860565">&amp;</span><span class="ident" id="6860566"><a href="/encoding/gob/encoder_test.go.html#6860004">NewType0</a></span><span class="op" id="6860574">{</span><span class="string" id="6860575">&#34;value1&#34;</span><span class="op" id="6860583">}</span><span class="op" id="6860584">,</span>&nbsp;<span class="num" id="6860586">23</span><span class="op" id="6860588">}</span><span class="op" id="6860589">,</span>&nbsp;<span class="ident" id="6860591">nil</span><span class="op" id="6860594">}</span><span class="op" id="6860595">,</span><br>
<span class="lineno"></span><span class="op" id="6860597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="6860600">func</span>&nbsp;<span class="ident" id="6860605">TestDecodeIntoNothing</span><span class="op" id="6860626">(</span><span class="ident" id="6860627">t</span>&nbsp;<span class="op" id="6860629">*</span><span class="ident" id="6860630"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6860637">.</span><span class="ident" id="6860638">T</span><span class="op" id="6860639">)</span>&nbsp;<span class="op" id="6860641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860644"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6860652">(</span><span class="builtinfunc" id="6860653">new</span><span class="op" id="6860656">(</span><span class="ident" id="6860657"><a href="/encoding/gob/encoder_test.go.html#6860004">NewType0</a></span><span class="op" id="6860665">)</span><span class="op" id="6860666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860669">for</span>&nbsp;<span class="ident" id="6860673">i</span><span class="op" id="6860674">,</span>&nbsp;<span class="ident" id="6860676">test</span>&nbsp;<span class="op" id="6860681">:=</span>&nbsp;<span class="keyword" id="6860684">range</span>&nbsp;<span class="ident" id="6860690"><a href="/encoding/gob/encoder_test.go.html#6860088">ignoreTests</a></span>&nbsp;<span class="op" id="6860702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860706">b</span>&nbsp;<span class="op" id="6860708">:=</span>&nbsp;<span class="builtinfunc" id="6860711">new</span><span class="op" id="6860714">(</span><span class="ident" id="6860715"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6860720">.</span><span class="ident" id="6860721">Buffer</span><span class="op" id="6860727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860731">enc</span>&nbsp;<span class="op" id="6860735">:=</span>&nbsp;<span class="ident" id="6860738"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6860748">(</span><span class="ident" id="6860749"><a href="/encoding/gob/encoder_test.go.html#6860706">b</a></span><span class="op" id="6860750">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860754">err</span>&nbsp;<span class="op" id="6860758">:=</span>&nbsp;<span class="ident" id="6860761"><a href="/encoding/gob/encoder_test.go.html#6860731">enc</a></span><span class="op" id="6860764">.</span><span class="ident" id="6860765">Encode</span><span class="op" id="6860771">(</span><span class="ident" id="6860772"><a href="/encoding/gob/encoder_test.go.html#6860676">test</a></span><span class="op" id="6860776">.</span><span class="ident" id="6860777">in</span><span class="op" id="6860779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860783">if</span>&nbsp;<span class="ident" id="6860786"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6860790">!=</span>&nbsp;<span class="ident" id="6860793">nil</span>&nbsp;<span class="op" id="6860797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860802"><a href="/encoding/gob/encoder_test.go.html#6860627">t</a></span><span class="op" id="6860803">.</span><span class="ident" id="6860804">Errorf</span><span class="op" id="6860810">(</span><span class="string" id="6860811">&#34;%d:&nbsp;encode&nbsp;error&nbsp;%s:&#34;</span><span class="op" id="6860833">,</span>&nbsp;<span class="ident" id="6860835"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6860836">,</span>&nbsp;<span class="ident" id="6860838"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span><span class="op" id="6860841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860846">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860857">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860861">dec</span>&nbsp;<span class="op" id="6860865">:=</span>&nbsp;<span class="ident" id="6860868"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6860878">(</span><span class="ident" id="6860879"><a href="/encoding/gob/encoder_test.go.html#6860706">b</a></span><span class="op" id="6860880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860884"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6860888">=</span>&nbsp;<span class="ident" id="6860890"><a href="/encoding/gob/encoder_test.go.html#6860861">dec</a></span><span class="op" id="6860893">.</span><span class="ident" id="6860894">Decode</span><span class="op" id="6860900">(</span><span class="ident" id="6860901"><a href="/encoding/gob/encoder_test.go.html#6860676">test</a></span><span class="op" id="6860905">.</span><span class="ident" id="6860906">out</span><span class="op" id="6860909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860913">if</span>&nbsp;<span class="ident" id="6860916"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6860920">!=</span>&nbsp;<span class="ident" id="6860923">nil</span>&nbsp;<span class="op" id="6860927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860932"><a href="/encoding/gob/encoder_test.go.html#6860627">t</a></span><span class="op" id="6860933">.</span><span class="ident" id="6860934">Errorf</span><span class="op" id="6860940">(</span><span class="string" id="6860941">&#34;%d:&nbsp;decode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6860963">,</span>&nbsp;<span class="ident" id="6860965"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6860966">,</span>&nbsp;<span class="ident" id="6860968"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span><span class="op" id="6860971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860976">continue</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6860991">//&nbsp;Now&nbsp;see&nbsp;if&nbsp;the&nbsp;encoder&nbsp;and&nbsp;decoder&nbsp;are&nbsp;in&nbsp;a&nbsp;consistent&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861058">str</span>&nbsp;<span class="op" id="6861062">:=</span>&nbsp;<span class="ident" id="6861065"><a href="/encoding/gob/encoder_test.go.html#6848840">fmt</a></span><span class="op" id="6861068">.</span><span class="ident" id="6861069">Sprintf</span><span class="op" id="6861076">(</span><span class="string" id="6861077">&#34;Value&nbsp;%d&#34;</span><span class="op" id="6861087">,</span>&nbsp;<span class="ident" id="6861089"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6861090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861094"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6861098">=</span>&nbsp;<span class="ident" id="6861100"><a href="/encoding/gob/encoder_test.go.html#6860731">enc</a></span><span class="op" id="6861103">.</span><span class="ident" id="6861104">Encode</span><span class="op" id="6861110">(</span><span class="op" id="6861111">&amp;</span><span class="ident" id="6861112"><a href="/encoding/gob/encoder_test.go.html#6860004">NewType0</a></span><span class="op" id="6861120">{</span><span class="ident" id="6861121"><a href="/encoding/gob/encoder_test.go.html#6861058">str</a></span><span class="op" id="6861124">}</span><span class="op" id="6861125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861129">if</span>&nbsp;<span class="ident" id="6861132"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6861136">!=</span>&nbsp;<span class="ident" id="6861139">nil</span>&nbsp;<span class="op" id="6861143">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861148"><a href="/encoding/gob/encoder_test.go.html#6860627">t</a></span><span class="op" id="6861149">.</span><span class="ident" id="6861150">Fatalf</span><span class="op" id="6861156">(</span><span class="string" id="6861157">&#34;%d:&nbsp;NewType0&nbsp;encode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6861188">,</span>&nbsp;<span class="ident" id="6861190"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6861191">,</span>&nbsp;<span class="ident" id="6861193"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span><span class="op" id="6861196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861204">ns</span>&nbsp;<span class="op" id="6861207">:=</span>&nbsp;<span class="builtinfunc" id="6861210">new</span><span class="op" id="6861213">(</span><span class="ident" id="6861214"><a href="/encoding/gob/encoder_test.go.html#6860004">NewType0</a></span><span class="op" id="6861222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861226"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6861230">=</span>&nbsp;<span class="ident" id="6861232"><a href="/encoding/gob/encoder_test.go.html#6860861">dec</a></span><span class="op" id="6861235">.</span><span class="ident" id="6861236">Decode</span><span class="op" id="6861242">(</span><span class="ident" id="6861243"><a href="/encoding/gob/encoder_test.go.html#6861204">ns</a></span><span class="op" id="6861245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861249">if</span>&nbsp;<span class="ident" id="6861252"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span>&nbsp;<span class="op" id="6861256">!=</span>&nbsp;<span class="ident" id="6861259">nil</span>&nbsp;<span class="op" id="6861263">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861268"><a href="/encoding/gob/encoder_test.go.html#6860627">t</a></span><span class="op" id="6861269">.</span><span class="ident" id="6861270">Fatalf</span><span class="op" id="6861276">(</span><span class="string" id="6861277">&#34;%d:&nbsp;NewType0&nbsp;decode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6861308">,</span>&nbsp;<span class="ident" id="6861310"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6861311">,</span>&nbsp;<span class="ident" id="6861313"><a href="/encoding/gob/encoder_test.go.html#6860754">err</a></span><span class="op" id="6861316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861324">if</span>&nbsp;<span class="ident" id="6861327"><a href="/encoding/gob/encoder_test.go.html#6861204">ns</a></span><span class="op" id="6861329">.</span><span class="ident" id="6861330">S</span>&nbsp;<span class="op" id="6861332">!=</span>&nbsp;<span class="ident" id="6861335"><a href="/encoding/gob/encoder_test.go.html#6861058">str</a></span>&nbsp;<span class="op" id="6861339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861344"><a href="/encoding/gob/encoder_test.go.html#6860627">t</a></span><span class="op" id="6861345">.</span><span class="ident" id="6861346">Fatalf</span><span class="op" id="6861352">(</span><span class="string" id="6861353">&#34;%d:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6861377">,</span>&nbsp;<span class="ident" id="6861379"><a href="/encoding/gob/encoder_test.go.html#6860673">i</a></span><span class="op" id="6861380">,</span>&nbsp;<span class="ident" id="6861382"><a href="/encoding/gob/encoder_test.go.html#6861058">str</a></span><span class="op" id="6861385">,</span>&nbsp;<span class="ident" id="6861387"><a href="/encoding/gob/encoder_test.go.html#6861204">ns</a></span><span class="op" id="6861389">.</span><span class="ident" id="6861390">S</span><span class="op" id="6861391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861395">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861398">}</span><br>
<span class="lineno"></span><span class="op" id="6861400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6861403">//&nbsp;Another&nbsp;bug&nbsp;from&nbsp;golang-nuts,&nbsp;involving&nbsp;nested&nbsp;interfaces.</span><br>
<span class="lineno"></span><span class="keyword" id="6861465">type</span>&nbsp;<span class="ident" id="6861470">Bug0Outer</span>&nbsp;<span class="keyword" id="6861480">struct</span>&nbsp;<span class="op" id="6861487">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861490">Bug0Field</span>&nbsp;<span class="keyword" id="6861500">interface</span><span class="op" id="6861509">{</span><span class="op" id="6861510">}</span><br>
<span class="lineno"></span><span class="op" id="6861512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6861515">type</span>&nbsp;<span class="ident" id="6861520">Bug0Inner</span>&nbsp;<span class="keyword" id="6861530">struct</span>&nbsp;<span class="op" id="6861537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861540">A</span>&nbsp;<span class="builtintype" id="6861542">int</span><br>
<span class="lineno">555</span><span class="op" id="6861546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6861549">func</span>&nbsp;<span class="ident" id="6861554">TestNestedInterfaces</span><span class="op" id="6861574">(</span><span class="ident" id="6861575">t</span>&nbsp;<span class="op" id="6861577">*</span><span class="ident" id="6861578"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6861585">.</span><span class="ident" id="6861586">T</span><span class="op" id="6861587">)</span>&nbsp;<span class="op" id="6861589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861592">var</span>&nbsp;<span class="ident" id="6861596">buf</span>&nbsp;<span class="ident" id="6861600"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6861605">.</span><span class="ident" id="6861606">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861614">e</span>&nbsp;<span class="op" id="6861616">:=</span>&nbsp;<span class="ident" id="6861619"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6861629">(</span><span class="op" id="6861630">&amp;</span><span class="ident" id="6861631"><a href="/encoding/gob/encoder_test.go.html#6861596">buf</a></span><span class="op" id="6861634">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861637">d</span>&nbsp;<span class="op" id="6861639">:=</span>&nbsp;<span class="ident" id="6861642"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6861652">(</span><span class="op" id="6861653">&amp;</span><span class="ident" id="6861654"><a href="/encoding/gob/encoder_test.go.html#6861596">buf</a></span><span class="op" id="6861657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861660"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6861668">(</span><span class="builtinfunc" id="6861669">new</span><span class="op" id="6861672">(</span><span class="ident" id="6861673"><a href="/encoding/gob/encoder_test.go.html#6861470">Bug0Outer</a></span><span class="op" id="6861682">)</span><span class="op" id="6861683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861686"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6861694">(</span><span class="builtinfunc" id="6861695">new</span><span class="op" id="6861698">(</span><span class="ident" id="6861699"><a href="/encoding/gob/encoder_test.go.html#6861520">Bug0Inner</a></span><span class="op" id="6861708">)</span><span class="op" id="6861709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861712">f</span>&nbsp;<span class="op" id="6861714">:=</span>&nbsp;<span class="op" id="6861717">&amp;</span><span class="ident" id="6861718"><a href="/encoding/gob/encoder_test.go.html#6861470">Bug0Outer</a></span><span class="op" id="6861727">{</span><span class="op" id="6861728">&amp;</span><span class="ident" id="6861729"><a href="/encoding/gob/encoder_test.go.html#6861470">Bug0Outer</a></span><span class="op" id="6861738">{</span><span class="op" id="6861739">&amp;</span><span class="ident" id="6861740"><a href="/encoding/gob/encoder_test.go.html#6861520">Bug0Inner</a></span><span class="op" id="6861749">{</span><span class="num" id="6861750">7</span><span class="op" id="6861751">}</span><span class="op" id="6861752">}</span><span class="op" id="6861753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861756">var</span>&nbsp;<span class="ident" id="6861760">v</span>&nbsp;<span class="keyword" id="6861762">interface</span><span class="op" id="6861771">{</span><span class="op" id="6861772">}</span>&nbsp;<span class="op" id="6861774">=</span>&nbsp;<span class="ident" id="6861776"><a href="/encoding/gob/encoder_test.go.html#6861712">f</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861779">err</span>&nbsp;<span class="op" id="6861783">:=</span>&nbsp;<span class="ident" id="6861786"><a href="/encoding/gob/encoder_test.go.html#6861614">e</a></span><span class="op" id="6861787">.</span><span class="ident" id="6861788">Encode</span><span class="op" id="6861794">(</span><span class="op" id="6861795">&amp;</span><span class="ident" id="6861796"><a href="/encoding/gob/encoder_test.go.html#6861760">v</a></span><span class="op" id="6861797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861800">if</span>&nbsp;<span class="ident" id="6861803"><a href="/encoding/gob/encoder_test.go.html#6861779">err</a></span>&nbsp;<span class="op" id="6861807">!=</span>&nbsp;<span class="ident" id="6861810">nil</span>&nbsp;<span class="op" id="6861814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861818"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6861819">.</span><span class="ident" id="6861820">Fatal</span><span class="op" id="6861825">(</span><span class="string" id="6861826">&#34;Encode:&#34;</span><span class="op" id="6861835">,</span>&nbsp;<span class="ident" id="6861837"><a href="/encoding/gob/encoder_test.go.html#6861779">err</a></span><span class="op" id="6861840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861846"><a href="/encoding/gob/encoder_test.go.html#6861779">err</a></span>&nbsp;<span class="op" id="6861850">=</span>&nbsp;<span class="ident" id="6861852"><a href="/encoding/gob/encoder_test.go.html#6861637">d</a></span><span class="op" id="6861853">.</span><span class="ident" id="6861854">Decode</span><span class="op" id="6861860">(</span><span class="op" id="6861861">&amp;</span><span class="ident" id="6861862"><a href="/encoding/gob/encoder_test.go.html#6861760">v</a></span><span class="op" id="6861863">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861866">if</span>&nbsp;<span class="ident" id="6861869"><a href="/encoding/gob/encoder_test.go.html#6861779">err</a></span>&nbsp;<span class="op" id="6861873">!=</span>&nbsp;<span class="ident" id="6861876">nil</span>&nbsp;<span class="op" id="6861880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861884"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6861885">.</span><span class="ident" id="6861886">Fatal</span><span class="op" id="6861891">(</span><span class="string" id="6861892">&#34;Decode:&#34;</span><span class="op" id="6861901">,</span>&nbsp;<span class="ident" id="6861903"><a href="/encoding/gob/encoder_test.go.html#6861779">err</a></span><span class="op" id="6861906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6861912">//&nbsp;Make&nbsp;sure&nbsp;it&nbsp;decoded&nbsp;correctly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861948">outer1</span><span class="op" id="6861954">,</span>&nbsp;<span class="ident" id="6861956">ok</span>&nbsp;<span class="op" id="6861959">:=</span>&nbsp;<span class="ident" id="6861962"><a href="/encoding/gob/encoder_test.go.html#6861760">v</a></span><span class="op" id="6861963">.</span><span class="op" id="6861964">(</span><span class="op" id="6861965">*</span><span class="ident" id="6861966"><a href="/encoding/gob/encoder_test.go.html#6861470">Bug0Outer</a></span><span class="op" id="6861975">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861978">if</span>&nbsp;<span class="op" id="6861981">!</span><span class="ident" id="6861982"><a href="/encoding/gob/encoder_test.go.html#6861956">ok</a></span>&nbsp;<span class="op" id="6861985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861989"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6861990">.</span><span class="ident" id="6861991">Fatalf</span><span class="op" id="6861997">(</span><span class="string" id="6861998">&#34;v&nbsp;not&nbsp;Bug0Outer:&nbsp;%T&#34;</span><span class="op" id="6862019">,</span>&nbsp;<span class="ident" id="6862021"><a href="/encoding/gob/encoder_test.go.html#6861760">v</a></span><span class="op" id="6862022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862028">outer2</span><span class="op" id="6862034">,</span>&nbsp;<span class="ident" id="6862036"><a href="/encoding/gob/encoder_test.go.html#6861956">ok</a></span>&nbsp;<span class="op" id="6862039">:=</span>&nbsp;<span class="ident" id="6862042"><a href="/encoding/gob/encoder_test.go.html#6861948">outer1</a></span><span class="op" id="6862048">.</span><span class="ident" id="6862049">Bug0Field</span><span class="op" id="6862058">.</span><span class="op" id="6862059">(</span><span class="op" id="6862060">*</span><span class="ident" id="6862061"><a href="/encoding/gob/encoder_test.go.html#6861470">Bug0Outer</a></span><span class="op" id="6862070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862073">if</span>&nbsp;<span class="op" id="6862076">!</span><span class="ident" id="6862077"><a href="/encoding/gob/encoder_test.go.html#6861956">ok</a></span>&nbsp;<span class="op" id="6862080">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862084"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6862085">.</span><span class="ident" id="6862086">Fatalf</span><span class="op" id="6862092">(</span><span class="string" id="6862093">&#34;v.Bug0Field&nbsp;not&nbsp;Bug0Outer:&nbsp;%T&#34;</span><span class="op" id="6862124">,</span>&nbsp;<span class="ident" id="6862126"><a href="/encoding/gob/encoder_test.go.html#6861948">outer1</a></span><span class="op" id="6862132">.</span><span class="ident" id="6862133">Bug0Field</span><span class="op" id="6862142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862148">inner</span><span class="op" id="6862153">,</span>&nbsp;<span class="ident" id="6862155"><a href="/encoding/gob/encoder_test.go.html#6861956">ok</a></span>&nbsp;<span class="op" id="6862158">:=</span>&nbsp;<span class="ident" id="6862161"><a href="/encoding/gob/encoder_test.go.html#6862028">outer2</a></span><span class="op" id="6862167">.</span><span class="ident" id="6862168">Bug0Field</span><span class="op" id="6862177">.</span><span class="op" id="6862178">(</span><span class="op" id="6862179">*</span><span class="ident" id="6862180"><a href="/encoding/gob/encoder_test.go.html#6861520">Bug0Inner</a></span><span class="op" id="6862189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862192">if</span>&nbsp;<span class="op" id="6862195">!</span><span class="ident" id="6862196"><a href="/encoding/gob/encoder_test.go.html#6861956">ok</a></span>&nbsp;<span class="op" id="6862199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862203"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6862204">.</span><span class="ident" id="6862205">Fatalf</span><span class="op" id="6862211">(</span><span class="string" id="6862212">&#34;v.Bug0Field.Bug0Field&nbsp;not&nbsp;Bug0Inner:&nbsp;%T&#34;</span><span class="op" id="6862253">,</span>&nbsp;<span class="ident" id="6862255"><a href="/encoding/gob/encoder_test.go.html#6862028">outer2</a></span><span class="op" id="6862261">.</span><span class="ident" id="6862262">Bug0Field</span><span class="op" id="6862271">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862277">if</span>&nbsp;<span class="ident" id="6862280"><a href="/encoding/gob/encoder_test.go.html#6862148">inner</a></span><span class="op" id="6862285">.</span><span class="ident" id="6862286">A</span>&nbsp;<span class="op" id="6862288">!=</span>&nbsp;<span class="num" id="6862291">7</span>&nbsp;<span class="op" id="6862293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862297"><a href="/encoding/gob/encoder_test.go.html#6861575">t</a></span><span class="op" id="6862298">.</span><span class="ident" id="6862299">Fatalf</span><span class="op" id="6862305">(</span><span class="string" id="6862306">&#34;final&nbsp;value&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6862335">,</span>&nbsp;<span class="ident" id="6862337"><a href="/encoding/gob/encoder_test.go.html#6862148">inner</a></span><span class="op" id="6862342">.</span><span class="ident" id="6862343">A</span><span class="op" id="6862344">,</span>&nbsp;<span class="num" id="6862346">7</span><span class="op" id="6862347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862350">}</span><br>
<span class="lineno"></span><span class="op" id="6862352">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="6862355">//&nbsp;The&nbsp;bugs&nbsp;keep&nbsp;coming.&nbsp;We&nbsp;forgot&nbsp;to&nbsp;send&nbsp;map&nbsp;subtypes&nbsp;before&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862428">type</span>&nbsp;<span class="ident" id="6862433">Bug1Elem</span>&nbsp;<span class="keyword" id="6862442">struct</span>&nbsp;<span class="op" id="6862449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862452">Name</span>&nbsp;<span class="builtintype" id="6862457">string</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862465">Id</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6862470">int</span><br>
<span class="lineno"></span><span class="op" id="6862474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862477">type</span>&nbsp;<span class="ident" id="6862482">Bug1StructMap</span>&nbsp;<span class="keyword" id="6862496">map</span><span class="op" id="6862499">[</span><span class="builtintype" id="6862500">string</span><span class="op" id="6862506">]</span><span class="ident" id="6862507"><a href="/encoding/gob/encoder_test.go.html#6862433">Bug1Elem</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="keyword" id="6862517">func</span>&nbsp;<span class="ident" id="6862522">bug1EncDec</span><span class="op" id="6862532">(</span><span class="ident" id="6862533">in</span>&nbsp;<span class="ident" id="6862536"><a href="/encoding/gob/encoder_test.go.html#6862482">Bug1StructMap</a></span><span class="op" id="6862549">,</span>&nbsp;<span class="ident" id="6862551">out</span>&nbsp;<span class="op" id="6862555">*</span><span class="ident" id="6862556"><a href="/encoding/gob/encoder_test.go.html#6862482">Bug1StructMap</a></span><span class="op" id="6862569">)</span>&nbsp;<span class="builtintype" id="6862571">error</span>&nbsp;<span class="op" id="6862577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862580">return</span>&nbsp;<span class="ident" id="6862587">nil</span><br>
<span class="lineno"></span><span class="op" id="6862591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862594">func</span>&nbsp;<span class="ident" id="6862599">TestMapBug1</span><span class="op" id="6862610">(</span><span class="ident" id="6862611">t</span>&nbsp;<span class="op" id="6862613">*</span><span class="ident" id="6862614"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6862621">.</span><span class="ident" id="6862622">T</span><span class="op" id="6862623">)</span>&nbsp;<span class="op" id="6862625">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862628">in</span>&nbsp;<span class="op" id="6862631">:=</span>&nbsp;<span class="builtinfunc" id="6862634">make</span><span class="op" id="6862638">(</span><span class="ident" id="6862639"><a href="/encoding/gob/encoder_test.go.html#6862482">Bug1StructMap</a></span><span class="op" id="6862652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862655"><a href="/encoding/gob/encoder_test.go.html#6862628">in</a></span><span class="op" id="6862657">[</span><span class="string" id="6862658">&#34;val1&#34;</span><span class="op" id="6862664">]</span>&nbsp;<span class="op" id="6862666">=</span>&nbsp;<span class="ident" id="6862668"><a href="/encoding/gob/encoder_test.go.html#6862433">Bug1Elem</a></span><span class="op" id="6862676">{</span><span class="string" id="6862677">&#34;elem1&#34;</span><span class="op" id="6862684">,</span>&nbsp;<span class="num" id="6862686">1</span><span class="op" id="6862687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862690"><a href="/encoding/gob/encoder_test.go.html#6862628">in</a></span><span class="op" id="6862692">[</span><span class="string" id="6862693">&#34;val2&#34;</span><span class="op" id="6862699">]</span>&nbsp;<span class="op" id="6862701">=</span>&nbsp;<span class="ident" id="6862703"><a href="/encoding/gob/encoder_test.go.html#6862433">Bug1Elem</a></span><span class="op" id="6862711">{</span><span class="string" id="6862712">&#34;elem2&#34;</span><span class="op" id="6862719">,</span>&nbsp;<span class="num" id="6862721">2</span><span class="op" id="6862722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862726">b</span>&nbsp;<span class="op" id="6862728">:=</span>&nbsp;<span class="builtinfunc" id="6862731">new</span><span class="op" id="6862734">(</span><span class="ident" id="6862735"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6862740">.</span><span class="ident" id="6862741">Buffer</span><span class="op" id="6862747">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862750">enc</span>&nbsp;<span class="op" id="6862754">:=</span>&nbsp;<span class="ident" id="6862757"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6862767">(</span><span class="ident" id="6862768"><a href="/encoding/gob/encoder_test.go.html#6862726">b</a></span><span class="op" id="6862769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862772">err</span>&nbsp;<span class="op" id="6862776">:=</span>&nbsp;<span class="ident" id="6862779"><a href="/encoding/gob/encoder_test.go.html#6862750">enc</a></span><span class="op" id="6862782">.</span><span class="ident" id="6862783">Encode</span><span class="op" id="6862789">(</span><span class="ident" id="6862790"><a href="/encoding/gob/encoder_test.go.html#6862628">in</a></span><span class="op" id="6862792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862795">if</span>&nbsp;<span class="ident" id="6862798"><a href="/encoding/gob/encoder_test.go.html#6862772">err</a></span>&nbsp;<span class="op" id="6862802">!=</span>&nbsp;<span class="ident" id="6862805">nil</span>&nbsp;<span class="op" id="6862809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862813"><a href="/encoding/gob/encoder_test.go.html#6862611">t</a></span><span class="op" id="6862814">.</span><span class="ident" id="6862815">Fatal</span><span class="op" id="6862820">(</span><span class="string" id="6862821">&#34;encode:&#34;</span><span class="op" id="6862830">,</span>&nbsp;<span class="ident" id="6862832"><a href="/encoding/gob/encoder_test.go.html#6862772">err</a></span><span class="op" id="6862835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862838">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862841">dec</span>&nbsp;<span class="op" id="6862845">:=</span>&nbsp;<span class="ident" id="6862848"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6862858">(</span><span class="ident" id="6862859"><a href="/encoding/gob/encoder_test.go.html#6862726">b</a></span><span class="op" id="6862860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862863">out</span>&nbsp;<span class="op" id="6862867">:=</span>&nbsp;<span class="builtinfunc" id="6862870">make</span><span class="op" id="6862874">(</span><span class="ident" id="6862875"><a href="/encoding/gob/encoder_test.go.html#6862482">Bug1StructMap</a></span><span class="op" id="6862888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862891"><a href="/encoding/gob/encoder_test.go.html#6862772">err</a></span>&nbsp;<span class="op" id="6862895">=</span>&nbsp;<span class="ident" id="6862897"><a href="/encoding/gob/encoder_test.go.html#6862841">dec</a></span><span class="op" id="6862900">.</span><span class="ident" id="6862901">Decode</span><span class="op" id="6862907">(</span><span class="op" id="6862908">&amp;</span><span class="ident" id="6862909"><a href="/encoding/gob/encoder_test.go.html#6862863">out</a></span><span class="op" id="6862912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862915">if</span>&nbsp;<span class="ident" id="6862918"><a href="/encoding/gob/encoder_test.go.html#6862772">err</a></span>&nbsp;<span class="op" id="6862922">!=</span>&nbsp;<span class="ident" id="6862925">nil</span>&nbsp;<span class="op" id="6862929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862933"><a href="/encoding/gob/encoder_test.go.html#6862611">t</a></span><span class="op" id="6862934">.</span><span class="ident" id="6862935">Fatal</span><span class="op" id="6862940">(</span><span class="string" id="6862941">&#34;decode:&#34;</span><span class="op" id="6862950">,</span>&nbsp;<span class="ident" id="6862952"><a href="/encoding/gob/encoder_test.go.html#6862772">err</a></span><span class="op" id="6862955">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862961">if</span>&nbsp;<span class="op" id="6862964">!</span><span class="ident" id="6862965"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6862972">.</span><span class="ident" id="6862973">DeepEqual</span><span class="op" id="6862982">(</span><span class="ident" id="6862983"><a href="/encoding/gob/encoder_test.go.html#6862628">in</a></span><span class="op" id="6862985">,</span>&nbsp;<span class="ident" id="6862987"><a href="/encoding/gob/encoder_test.go.html#6862863">out</a></span><span class="op" id="6862990">)</span>&nbsp;<span class="op" id="6862992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862996"><a href="/encoding/gob/encoder_test.go.html#6862611">t</a></span><span class="op" id="6862997">.</span><span class="ident" id="6862998">Errorf</span><span class="op" id="6863004">(</span><span class="string" id="6863005">&#34;mismatch:&nbsp;%v&nbsp;%v&#34;</span><span class="op" id="6863022">,</span>&nbsp;<span class="ident" id="6863024"><a href="/encoding/gob/encoder_test.go.html#6862628">in</a></span><span class="op" id="6863026">,</span>&nbsp;<span class="ident" id="6863028"><a href="/encoding/gob/encoder_test.go.html#6862863">out</a></span><span class="op" id="6863031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863034">}</span><br>
<span class="lineno"></span><span class="op" id="6863036">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="keyword" id="6863039">func</span>&nbsp;<span class="ident" id="6863044">TestGobMapInterfaceEncode</span><span class="op" id="6863069">(</span><span class="ident" id="6863070">t</span>&nbsp;<span class="op" id="6863072">*</span><span class="ident" id="6863073"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6863080">.</span><span class="ident" id="6863081">T</span><span class="op" id="6863082">)</span>&nbsp;<span class="op" id="6863084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863087">m</span>&nbsp;<span class="op" id="6863089">:=</span>&nbsp;<span class="keyword" id="6863092">map</span><span class="op" id="6863095">[</span><span class="builtintype" id="6863096">string</span><span class="op" id="6863102">]</span><span class="keyword" id="6863103">interface</span><span class="op" id="6863112">{</span><span class="op" id="6863113">}</span><span class="op" id="6863114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863118">&#34;up&#34;</span><span class="op" id="6863122">:</span>&nbsp;<span class="builtintype" id="6863124">uintptr</span><span class="op" id="6863131">(</span><span class="num" id="6863132">0</span><span class="op" id="6863133">)</span><span class="op" id="6863134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863138">&#34;i0&#34;</span><span class="op" id="6863142">:</span>&nbsp;<span class="op" id="6863144">[</span><span class="op" id="6863145">]</span><span class="builtintype" id="6863146">int</span><span class="op" id="6863149">{</span><span class="op" id="6863150">-</span><span class="num" id="6863151">1</span><span class="op" id="6863152">}</span><span class="op" id="6863153">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863157">&#34;i1&#34;</span><span class="op" id="6863161">:</span>&nbsp;<span class="op" id="6863163">[</span><span class="op" id="6863164">]</span><span class="builtintype" id="6863165">int8</span><span class="op" id="6863169">{</span><span class="op" id="6863170">-</span><span class="num" id="6863171">1</span><span class="op" id="6863172">}</span><span class="op" id="6863173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863177">&#34;i2&#34;</span><span class="op" id="6863181">:</span>&nbsp;<span class="op" id="6863183">[</span><span class="op" id="6863184">]</span><span class="builtintype" id="6863185">int16</span><span class="op" id="6863190">{</span><span class="op" id="6863191">-</span><span class="num" id="6863192">1</span><span class="op" id="6863193">}</span><span class="op" id="6863194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863198">&#34;i3&#34;</span><span class="op" id="6863202">:</span>&nbsp;<span class="op" id="6863204">[</span><span class="op" id="6863205">]</span><span class="builtintype" id="6863206">int32</span><span class="op" id="6863211">{</span><span class="op" id="6863212">-</span><span class="num" id="6863213">1</span><span class="op" id="6863214">}</span><span class="op" id="6863215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863219">&#34;i4&#34;</span><span class="op" id="6863223">:</span>&nbsp;<span class="op" id="6863225">[</span><span class="op" id="6863226">]</span><span class="ident" id="6863227">int64</span><span class="op" id="6863232">{</span><span class="op" id="6863233">-</span><span class="num" id="6863234">1</span><span class="op" id="6863235">}</span><span class="op" id="6863236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863240">&#34;u0&#34;</span><span class="op" id="6863244">:</span>&nbsp;<span class="op" id="6863246">[</span><span class="op" id="6863247">]</span><span class="builtintype" id="6863248">uint</span><span class="op" id="6863252">{</span><span class="num" id="6863253">1</span><span class="op" id="6863254">}</span><span class="op" id="6863255">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863259">&#34;u1&#34;</span><span class="op" id="6863263">:</span>&nbsp;<span class="op" id="6863265">[</span><span class="op" id="6863266">]</span><span class="builtintype" id="6863267">uint8</span><span class="op" id="6863272">{</span><span class="num" id="6863273">1</span><span class="op" id="6863274">}</span><span class="op" id="6863275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863279">&#34;u2&#34;</span><span class="op" id="6863283">:</span>&nbsp;<span class="op" id="6863285">[</span><span class="op" id="6863286">]</span><span class="builtintype" id="6863287">uint16</span><span class="op" id="6863293">{</span><span class="num" id="6863294">1</span><span class="op" id="6863295">}</span><span class="op" id="6863296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863300">&#34;u3&#34;</span><span class="op" id="6863304">:</span>&nbsp;<span class="op" id="6863306">[</span><span class="op" id="6863307">]</span><span class="builtintype" id="6863308">uint32</span><span class="op" id="6863314">{</span><span class="num" id="6863315">1</span><span class="op" id="6863316">}</span><span class="op" id="6863317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863321">&#34;u4&#34;</span><span class="op" id="6863325">:</span>&nbsp;<span class="op" id="6863327">[</span><span class="op" id="6863328">]</span><span class="ident" id="6863329">uint64</span><span class="op" id="6863335">{</span><span class="num" id="6863336">1</span><span class="op" id="6863337">}</span><span class="op" id="6863338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863342">&#34;f0&#34;</span><span class="op" id="6863346">:</span>&nbsp;<span class="op" id="6863348">[</span><span class="op" id="6863349">]</span><span class="builtintype" id="6863350">float32</span><span class="op" id="6863357">{</span><span class="num" id="6863358">1</span><span class="op" id="6863359">}</span><span class="op" id="6863360">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863364">&#34;f1&#34;</span><span class="op" id="6863368">:</span>&nbsp;<span class="op" id="6863370">[</span><span class="op" id="6863371">]</span><span class="builtintype" id="6863372">float64</span><span class="op" id="6863379">{</span><span class="num" id="6863380">1</span><span class="op" id="6863381">}</span><span class="op" id="6863382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863386">&#34;c0&#34;</span><span class="op" id="6863390">:</span>&nbsp;<span class="op" id="6863392">[</span><span class="op" id="6863393">]</span><span class="builtintype" id="6863394">complex64</span><span class="op" id="6863403">{</span><span class="builtinfunc" id="6863404">complex</span><span class="op" id="6863411">(</span><span class="num" id="6863412">2</span><span class="op" id="6863413">,</span>&nbsp;<span class="op" id="6863415">-</span><span class="num" id="6863416">2</span><span class="op" id="6863417">)</span><span class="op" id="6863418">}</span><span class="op" id="6863419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863423">&#34;c1&#34;</span><span class="op" id="6863427">:</span>&nbsp;<span class="op" id="6863429">[</span><span class="op" id="6863430">]</span><span class="builtintype" id="6863431">complex128</span><span class="op" id="6863441">{</span><span class="builtinfunc" id="6863442">complex</span><span class="op" id="6863449">(</span><span class="num" id="6863450">2</span><span class="op" id="6863451">,</span>&nbsp;<span class="builtintype" id="6863453">float64</span><span class="op" id="6863460">(</span><span class="op" id="6863461">-</span><span class="num" id="6863462">2</span><span class="op" id="6863463">)</span><span class="op" id="6863464">)</span><span class="op" id="6863465">}</span><span class="op" id="6863466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863470">&#34;us&#34;</span><span class="op" id="6863474">:</span>&nbsp;<span class="op" id="6863476">[</span><span class="op" id="6863477">]</span><span class="builtintype" id="6863478">uintptr</span><span class="op" id="6863485">{</span><span class="num" id="6863486">0</span><span class="op" id="6863487">}</span><span class="op" id="6863488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863492">&#34;bo&#34;</span><span class="op" id="6863496">:</span>&nbsp;<span class="op" id="6863498">[</span><span class="op" id="6863499">]</span><span class="builtintype" id="6863500">bool</span><span class="op" id="6863504">{</span><span class="builtintype" id="6863505">false</span><span class="op" id="6863510">}</span><span class="op" id="6863511">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6863515">&#34;st&#34;</span><span class="op" id="6863519">:</span>&nbsp;<span class="op" id="6863521">[</span><span class="op" id="6863522">]</span><span class="builtintype" id="6863523">string</span><span class="op" id="6863529">{</span><span class="string" id="6863530">&#34;s&#34;</span><span class="op" id="6863533">}</span><span class="op" id="6863534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863540">enc</span>&nbsp;<span class="op" id="6863544">:=</span>&nbsp;<span class="ident" id="6863547"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6863557">(</span><span class="builtinfunc" id="6863558">new</span><span class="op" id="6863561">(</span><span class="ident" id="6863562"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6863567">.</span><span class="ident" id="6863568">Buffer</span><span class="op" id="6863574">)</span><span class="op" id="6863575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863578">err</span>&nbsp;<span class="op" id="6863582">:=</span>&nbsp;<span class="ident" id="6863585"><a href="/encoding/gob/encoder_test.go.html#6863540">enc</a></span><span class="op" id="6863588">.</span><span class="ident" id="6863589">Encode</span><span class="op" id="6863595">(</span><span class="ident" id="6863596"><a href="/encoding/gob/encoder_test.go.html#6863087">m</a></span><span class="op" id="6863597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863600">if</span>&nbsp;<span class="ident" id="6863603"><a href="/encoding/gob/encoder_test.go.html#6863578">err</a></span>&nbsp;<span class="op" id="6863607">!=</span>&nbsp;<span class="ident" id="6863610">nil</span>&nbsp;<span class="op" id="6863614">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863618"><a href="/encoding/gob/encoder_test.go.html#6863070">t</a></span><span class="op" id="6863619">.</span><span class="ident" id="6863620">Errorf</span><span class="op" id="6863626">(</span><span class="string" id="6863627">&#34;encode&nbsp;map:&nbsp;%s&#34;</span><span class="op" id="6863643">,</span>&nbsp;<span class="ident" id="6863645"><a href="/encoding/gob/encoder_test.go.html#6863578">err</a></span><span class="op" id="6863648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863651">}</span><br>
<span class="lineno"></span><span class="op" id="6863653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6863656">func</span>&nbsp;<span class="ident" id="6863661">TestSliceReusesMemory</span><span class="op" id="6863682">(</span><span class="ident" id="6863683">t</span>&nbsp;<span class="op" id="6863685">*</span><span class="ident" id="6863686"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6863693">.</span><span class="ident" id="6863694">T</span><span class="op" id="6863695">)</span>&nbsp;<span class="op" id="6863697">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863700">buf</span>&nbsp;<span class="op" id="6863704">:=</span>&nbsp;<span class="builtinfunc" id="6863707">new</span><span class="op" id="6863710">(</span><span class="ident" id="6863711"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6863716">.</span><span class="ident" id="6863717">Buffer</span><span class="op" id="6863723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863726">//&nbsp;Bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863740">x</span>&nbsp;<span class="op" id="6863742">:=</span>&nbsp;<span class="op" id="6863745">[</span><span class="op" id="6863746">]</span><span class="builtintype" id="6863747">byte</span><span class="op" id="6863751">(</span><span class="string" id="6863752">&#34;abcd&#34;</span><span class="op" id="6863758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863762">enc</span>&nbsp;<span class="op" id="6863766">:=</span>&nbsp;<span class="ident" id="6863769"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6863779">(</span><span class="ident" id="6863780"><a href="/encoding/gob/encoder_test.go.html#6863700">buf</a></span><span class="op" id="6863783">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863787">err</span>&nbsp;<span class="op" id="6863791">:=</span>&nbsp;<span class="ident" id="6863794"><a href="/encoding/gob/encoder_test.go.html#6863762">enc</a></span><span class="op" id="6863797">.</span><span class="ident" id="6863798">Encode</span><span class="op" id="6863804">(</span><span class="ident" id="6863805"><a href="/encoding/gob/encoder_test.go.html#6863740">x</a></span><span class="op" id="6863806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863810">if</span>&nbsp;<span class="ident" id="6863813"><a href="/encoding/gob/encoder_test.go.html#6863787">err</a></span>&nbsp;<span class="op" id="6863817">!=</span>&nbsp;<span class="ident" id="6863820">nil</span>&nbsp;<span class="op" id="6863824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863829"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6863830">.</span><span class="ident" id="6863831">Errorf</span><span class="op" id="6863837">(</span><span class="string" id="6863838">&#34;bytes:&nbsp;encode:&nbsp;%s&#34;</span><span class="op" id="6863857">,</span>&nbsp;<span class="ident" id="6863859"><a href="/encoding/gob/encoder_test.go.html#6863787">err</a></span><span class="op" id="6863862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863870">//&nbsp;Decode&nbsp;into&nbsp;y,&nbsp;which&nbsp;is&nbsp;big&nbsp;enough.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863911">y</span>&nbsp;<span class="op" id="6863913">:=</span>&nbsp;<span class="op" id="6863916">[</span><span class="op" id="6863917">]</span><span class="builtintype" id="6863918">byte</span><span class="op" id="6863922">(</span><span class="string" id="6863923">&#34;ABCDE&#34;</span><span class="op" id="6863930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863934">addr</span>&nbsp;<span class="op" id="6863939">:=</span>&nbsp;<span class="op" id="6863942">&amp;</span><span class="ident" id="6863943"><a href="/encoding/gob/encoder_test.go.html#6863911">y</a></span><span class="op" id="6863944">[</span><span class="num" id="6863945">0</span><span class="op" id="6863946">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863950">dec</span>&nbsp;<span class="op" id="6863954">:=</span>&nbsp;<span class="ident" id="6863957"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6863967">(</span><span class="ident" id="6863968"><a href="/encoding/gob/encoder_test.go.html#6863700">buf</a></span><span class="op" id="6863971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863975"><a href="/encoding/gob/encoder_test.go.html#6863787">err</a></span>&nbsp;<span class="op" id="6863979">=</span>&nbsp;<span class="ident" id="6863981"><a href="/encoding/gob/encoder_test.go.html#6863950">dec</a></span><span class="op" id="6863984">.</span><span class="ident" id="6863985">Decode</span><span class="op" id="6863991">(</span><span class="op" id="6863992">&amp;</span><span class="ident" id="6863993"><a href="/encoding/gob/encoder_test.go.html#6863911">y</a></span><span class="op" id="6863994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863998">if</span>&nbsp;<span class="ident" id="6864001"><a href="/encoding/gob/encoder_test.go.html#6863787">err</a></span>&nbsp;<span class="op" id="6864005">!=</span>&nbsp;<span class="ident" id="6864008">nil</span>&nbsp;<span class="op" id="6864012">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864017"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864018">.</span><span class="ident" id="6864019">Fatal</span><span class="op" id="6864024">(</span><span class="string" id="6864025">&#34;bytes:&nbsp;decode:&#34;</span><span class="op" id="6864041">,</span>&nbsp;<span class="ident" id="6864043"><a href="/encoding/gob/encoder_test.go.html#6863787">err</a></span><span class="op" id="6864046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864054">if</span>&nbsp;<span class="op" id="6864057">!</span><span class="ident" id="6864058"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6864063">.</span><span class="ident" id="6864064">Equal</span><span class="op" id="6864069">(</span><span class="ident" id="6864070"><a href="/encoding/gob/encoder_test.go.html#6863740">x</a></span><span class="op" id="6864071">,</span>&nbsp;<span class="ident" id="6864073"><a href="/encoding/gob/encoder_test.go.html#6863911">y</a></span><span class="op" id="6864074">)</span>&nbsp;<span class="op" id="6864076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864081"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864082">.</span><span class="ident" id="6864083">Errorf</span><span class="op" id="6864089">(</span><span class="string" id="6864090">&#34;bytes:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q\n&#34;</span><span class="op" id="6864119">,</span>&nbsp;<span class="ident" id="6864121"><a href="/encoding/gob/encoder_test.go.html#6863740">x</a></span><span class="op" id="6864122">,</span>&nbsp;<span class="ident" id="6864124"><a href="/encoding/gob/encoder_test.go.html#6863911">y</a></span><span class="op" id="6864125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864129">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864133">if</span>&nbsp;<span class="ident" id="6864136"><a href="/encoding/gob/encoder_test.go.html#6863934">addr</a></span>&nbsp;<span class="op" id="6864141">!=</span>&nbsp;<span class="op" id="6864144">&amp;</span><span class="ident" id="6864145"><a href="/encoding/gob/encoder_test.go.html#6863911">y</a></span><span class="op" id="6864146">[</span><span class="num" id="6864147">0</span><span class="op" id="6864148">]</span>&nbsp;<span class="op" id="6864150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864155"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864156">.</span><span class="ident" id="6864157">Errorf</span><span class="op" id="6864163">(</span><span class="string" id="6864164">&#34;bytes:&nbsp;unnecessary&nbsp;reallocation&#34;</span><span class="op" id="6864197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864207">//&nbsp;general&nbsp;slice</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864229">x</span>&nbsp;<span class="op" id="6864231">:=</span>&nbsp;<span class="op" id="6864234">[</span><span class="op" id="6864235">]</span><span class="builtintype" id="6864236">rune</span><span class="op" id="6864240">(</span><span class="string" id="6864241">&#34;abcd&#34;</span><span class="op" id="6864247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864251">enc</span>&nbsp;<span class="op" id="6864255">:=</span>&nbsp;<span class="ident" id="6864258"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6864268">(</span><span class="ident" id="6864269"><a href="/encoding/gob/encoder_test.go.html#6863700">buf</a></span><span class="op" id="6864272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864276">err</span>&nbsp;<span class="op" id="6864280">:=</span>&nbsp;<span class="ident" id="6864283"><a href="/encoding/gob/encoder_test.go.html#6864251">enc</a></span><span class="op" id="6864286">.</span><span class="ident" id="6864287">Encode</span><span class="op" id="6864293">(</span><span class="ident" id="6864294"><a href="/encoding/gob/encoder_test.go.html#6864229">x</a></span><span class="op" id="6864295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864299">if</span>&nbsp;<span class="ident" id="6864302"><a href="/encoding/gob/encoder_test.go.html#6864276">err</a></span>&nbsp;<span class="op" id="6864306">!=</span>&nbsp;<span class="ident" id="6864309">nil</span>&nbsp;<span class="op" id="6864313">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864318"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864319">.</span><span class="ident" id="6864320">Errorf</span><span class="op" id="6864326">(</span><span class="string" id="6864327">&#34;ints:&nbsp;encode:&nbsp;%s&#34;</span><span class="op" id="6864345">,</span>&nbsp;<span class="ident" id="6864347"><a href="/encoding/gob/encoder_test.go.html#6864276">err</a></span><span class="op" id="6864350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864358">//&nbsp;Decode&nbsp;into&nbsp;y,&nbsp;which&nbsp;is&nbsp;big&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864399">y</span>&nbsp;<span class="op" id="6864401">:=</span>&nbsp;<span class="op" id="6864404">[</span><span class="op" id="6864405">]</span><span class="builtintype" id="6864406">rune</span><span class="op" id="6864410">(</span><span class="string" id="6864411">&#34;ABCDE&#34;</span><span class="op" id="6864418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864422">addr</span>&nbsp;<span class="op" id="6864427">:=</span>&nbsp;<span class="op" id="6864430">&amp;</span><span class="ident" id="6864431"><a href="/encoding/gob/encoder_test.go.html#6864399">y</a></span><span class="op" id="6864432">[</span><span class="num" id="6864433">0</span><span class="op" id="6864434">]</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864438">dec</span>&nbsp;<span class="op" id="6864442">:=</span>&nbsp;<span class="ident" id="6864445"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6864455">(</span><span class="ident" id="6864456"><a href="/encoding/gob/encoder_test.go.html#6863700">buf</a></span><span class="op" id="6864459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864463"><a href="/encoding/gob/encoder_test.go.html#6864276">err</a></span>&nbsp;<span class="op" id="6864467">=</span>&nbsp;<span class="ident" id="6864469"><a href="/encoding/gob/encoder_test.go.html#6864438">dec</a></span><span class="op" id="6864472">.</span><span class="ident" id="6864473">Decode</span><span class="op" id="6864479">(</span><span class="op" id="6864480">&amp;</span><span class="ident" id="6864481"><a href="/encoding/gob/encoder_test.go.html#6864399">y</a></span><span class="op" id="6864482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864486">if</span>&nbsp;<span class="ident" id="6864489"><a href="/encoding/gob/encoder_test.go.html#6864276">err</a></span>&nbsp;<span class="op" id="6864493">!=</span>&nbsp;<span class="ident" id="6864496">nil</span>&nbsp;<span class="op" id="6864500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864505"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864506">.</span><span class="ident" id="6864507">Fatal</span><span class="op" id="6864512">(</span><span class="string" id="6864513">&#34;ints:&nbsp;decode:&#34;</span><span class="op" id="6864528">,</span>&nbsp;<span class="ident" id="6864530"><a href="/encoding/gob/encoder_test.go.html#6864276">err</a></span><span class="op" id="6864533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864537">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864541">if</span>&nbsp;<span class="op" id="6864544">!</span><span class="ident" id="6864545"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6864552">.</span><span class="ident" id="6864553">DeepEqual</span><span class="op" id="6864562">(</span><span class="ident" id="6864563"><a href="/encoding/gob/encoder_test.go.html#6864229">x</a></span><span class="op" id="6864564">,</span>&nbsp;<span class="ident" id="6864566"><a href="/encoding/gob/encoder_test.go.html#6864399">y</a></span><span class="op" id="6864567">)</span>&nbsp;<span class="op" id="6864569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864574"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864575">.</span><span class="ident" id="6864576">Errorf</span><span class="op" id="6864582">(</span><span class="string" id="6864583">&#34;ints:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q\n&#34;</span><span class="op" id="6864611">,</span>&nbsp;<span class="ident" id="6864613"><a href="/encoding/gob/encoder_test.go.html#6864229">x</a></span><span class="op" id="6864614">,</span>&nbsp;<span class="ident" id="6864616"><a href="/encoding/gob/encoder_test.go.html#6864399">y</a></span><span class="op" id="6864617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864625">if</span>&nbsp;<span class="ident" id="6864628"><a href="/encoding/gob/encoder_test.go.html#6864422">addr</a></span>&nbsp;<span class="op" id="6864633">!=</span>&nbsp;<span class="op" id="6864636">&amp;</span><span class="ident" id="6864637"><a href="/encoding/gob/encoder_test.go.html#6864399">y</a></span><span class="op" id="6864638">[</span><span class="num" id="6864639">0</span><span class="op" id="6864640">]</span>&nbsp;<span class="op" id="6864642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864647"><a href="/encoding/gob/encoder_test.go.html#6863683">t</a></span><span class="op" id="6864648">.</span><span class="ident" id="6864649">Errorf</span><span class="op" id="6864655">(</span><span class="string" id="6864656">&#34;ints:&nbsp;unnecessary&nbsp;reallocation&#34;</span><span class="op" id="6864688">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864695">}</span><br>
<span class="lineno"></span><span class="op" id="6864697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6864700">//&nbsp;Used&nbsp;to&nbsp;crash:&nbsp;negative&nbsp;count&nbsp;in&nbsp;recvMessage.</span><br>
<span class="lineno">705</span><span class="keyword" id="6864749">func</span>&nbsp;<span class="ident" id="6864754">TestBadCount</span><span class="op" id="6864766">(</span><span class="ident" id="6864767">t</span>&nbsp;<span class="op" id="6864769">*</span><span class="ident" id="6864770"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6864777">.</span><span class="ident" id="6864778">T</span><span class="op" id="6864779">)</span>&nbsp;<span class="op" id="6864781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864784">b</span>&nbsp;<span class="op" id="6864786">:=</span>&nbsp;<span class="op" id="6864789">[</span><span class="op" id="6864790">]</span><span class="builtintype" id="6864791">byte</span><span class="op" id="6864795">{</span><span class="num" id="6864796">0xfb</span><span class="op" id="6864800">,</span>&nbsp;<span class="num" id="6864802">0xa5</span><span class="op" id="6864806">,</span>&nbsp;<span class="num" id="6864808">0x82</span><span class="op" id="6864812">,</span>&nbsp;<span class="num" id="6864814">0x2f</span><span class="op" id="6864818">,</span>&nbsp;<span class="num" id="6864820">0xca</span><span class="op" id="6864824">,</span>&nbsp;<span class="num" id="6864826">0x1</span><span class="op" id="6864829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6864832">if</span>&nbsp;<span class="ident" id="6864835">err</span>&nbsp;<span class="op" id="6864839">:=</span>&nbsp;<span class="ident" id="6864842"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6864852">(</span><span class="ident" id="6864853"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6864858">.</span><span class="ident" id="6864859">NewReader</span><span class="op" id="6864868">(</span><span class="ident" id="6864869"><a href="/encoding/gob/encoder_test.go.html#6864784">b</a></span><span class="op" id="6864870">)</span><span class="op" id="6864871">)</span><span class="op" id="6864872">.</span><span class="ident" id="6864873">Decode</span><span class="op" id="6864879">(</span><span class="ident" id="6864880">nil</span><span class="op" id="6864883">)</span><span class="op" id="6864884">;</span>&nbsp;<span class="ident" id="6864886"><a href="/encoding/gob/encoder_test.go.html#6864835">err</a></span>&nbsp;<span class="op" id="6864890">==</span>&nbsp;<span class="ident" id="6864893">nil</span>&nbsp;<span class="op" id="6864897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864901"><a href="/encoding/gob/encoder_test.go.html#6864767">t</a></span><span class="op" id="6864902">.</span><span class="ident" id="6864903">Error</span><span class="op" id="6864908">(</span><span class="string" id="6864909">&#34;expected&nbsp;error&nbsp;from&nbsp;bad&nbsp;count&#34;</span><span class="op" id="6864940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864943">}</span>&nbsp;<span class="keyword" id="6864945">else</span>&nbsp;<span class="keyword" id="6864950">if</span>&nbsp;<span class="ident" id="6864953"><a href="/encoding/gob/encoder_test.go.html#6864835">err</a></span><span class="op" id="6864956">.</span><span class="ident" id="6864957">Error</span><span class="op" id="6864962">(</span><span class="op" id="6864963">)</span>&nbsp;<span class="op" id="6864965">!=</span>&nbsp;<span class="ident" id="6864968"><a href="/encoding/gob/decoder.go.html#5865291">errBadCount</a></span><span class="op" id="6864979">.</span><span class="ident" id="6864980">Error</span><span class="op" id="6864985">(</span><span class="op" id="6864986">)</span>&nbsp;<span class="op" id="6864988">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6864992"><a href="/encoding/gob/encoder_test.go.html#6864767">t</a></span><span class="op" id="6864993">.</span><span class="ident" id="6864994">Error</span><span class="op" id="6864999">(</span><span class="string" id="6865000">&#34;expected&nbsp;bad&nbsp;count&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6865031">,</span>&nbsp;<span class="ident" id="6865033"><a href="/encoding/gob/encoder_test.go.html#6864835">err</a></span><span class="op" id="6865036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865039">}</span><br>
<span class="lineno"></span><span class="op" id="6865041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6865044">//&nbsp;Verify&nbsp;that&nbsp;sequential&nbsp;Decoders&nbsp;built&nbsp;on&nbsp;a&nbsp;single&nbsp;input&nbsp;will</span><br>
<span class="lineno">715</span><span class="comment" id="6865108">//&nbsp;succeed&nbsp;if&nbsp;the&nbsp;input&nbsp;implements&nbsp;ReadByte&nbsp;and&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6865168">//&nbsp;type&nbsp;information&nbsp;in&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="6865203">func</span>&nbsp;<span class="ident" id="6865208">TestSequentialDecoder</span><span class="op" id="6865229">(</span><span class="ident" id="6865230">t</span>&nbsp;<span class="op" id="6865232">*</span><span class="ident" id="6865233"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6865240">.</span><span class="ident" id="6865241">T</span><span class="op" id="6865242">)</span>&nbsp;<span class="op" id="6865244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865247">b</span>&nbsp;<span class="op" id="6865249">:=</span>&nbsp;<span class="builtinfunc" id="6865252">new</span><span class="op" id="6865255">(</span><span class="ident" id="6865256"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6865261">.</span><span class="ident" id="6865262">Buffer</span><span class="op" id="6865268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865271">enc</span>&nbsp;<span class="op" id="6865275">:=</span>&nbsp;<span class="ident" id="6865278"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6865288">(</span><span class="ident" id="6865289"><a href="/encoding/gob/encoder_test.go.html#6865247">b</a></span><span class="op" id="6865290">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865293">const</span>&nbsp;<span class="ident" id="6865299">count</span>&nbsp;<span class="op" id="6865305">=</span>&nbsp;<span class="num" id="6865307">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865311">for</span>&nbsp;<span class="ident" id="6865315">i</span>&nbsp;<span class="op" id="6865317">:=</span>&nbsp;<span class="num" id="6865320">0</span><span class="op" id="6865321">;</span>&nbsp;<span class="ident" id="6865323"><a href="/encoding/gob/encoder_test.go.html#6865315">i</a></span>&nbsp;<span class="op" id="6865325">&lt;</span>&nbsp;<span class="ident" id="6865327"><a href="/encoding/gob/encoder_test.go.html#6865299">count</a></span><span class="op" id="6865332">;</span>&nbsp;<span class="ident" id="6865334"><a href="/encoding/gob/encoder_test.go.html#6865315">i</a></span><span class="op" id="6865335">++</span>&nbsp;<span class="op" id="6865338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865342">s</span>&nbsp;<span class="op" id="6865344">:=</span>&nbsp;<span class="ident" id="6865347"><a href="/encoding/gob/encoder_test.go.html#6848840">fmt</a></span><span class="op" id="6865350">.</span><span class="ident" id="6865351">Sprintf</span><span class="op" id="6865358">(</span><span class="string" id="6865359">&#34;%d&#34;</span><span class="op" id="6865363">,</span>&nbsp;<span class="ident" id="6865365"><a href="/encoding/gob/encoder_test.go.html#6865315">i</a></span><span class="op" id="6865366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865370">if</span>&nbsp;<span class="ident" id="6865373">err</span>&nbsp;<span class="op" id="6865377">:=</span>&nbsp;<span class="ident" id="6865380"><a href="/encoding/gob/encoder_test.go.html#6865271">enc</a></span><span class="op" id="6865383">.</span><span class="ident" id="6865384">Encode</span><span class="op" id="6865390">(</span><span class="ident" id="6865391"><a href="/encoding/gob/encoder_test.go.html#6865342">s</a></span><span class="op" id="6865392">)</span><span class="op" id="6865393">;</span>&nbsp;<span class="ident" id="6865395"><a href="/encoding/gob/encoder_test.go.html#6865373">err</a></span>&nbsp;<span class="op" id="6865399">!=</span>&nbsp;<span class="ident" id="6865402">nil</span>&nbsp;<span class="op" id="6865406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865411"><a href="/encoding/gob/encoder_test.go.html#6865230">t</a></span><span class="op" id="6865412">.</span><span class="ident" id="6865413">Error</span><span class="op" id="6865418">(</span><span class="string" id="6865419">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6865434">,</span>&nbsp;<span class="ident" id="6865436"><a href="/encoding/gob/encoder_test.go.html#6865373">err</a></span><span class="op" id="6865439">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865449">for</span>&nbsp;<span class="ident" id="6865453">i</span>&nbsp;<span class="op" id="6865455">:=</span>&nbsp;<span class="num" id="6865458">0</span><span class="op" id="6865459">;</span>&nbsp;<span class="ident" id="6865461"><a href="/encoding/gob/encoder_test.go.html#6865453">i</a></span>&nbsp;<span class="op" id="6865463">&lt;</span>&nbsp;<span class="ident" id="6865465"><a href="/encoding/gob/encoder_test.go.html#6865299">count</a></span><span class="op" id="6865470">;</span>&nbsp;<span class="ident" id="6865472"><a href="/encoding/gob/encoder_test.go.html#6865453">i</a></span><span class="op" id="6865473">++</span>&nbsp;<span class="op" id="6865476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865480">dec</span>&nbsp;<span class="op" id="6865484">:=</span>&nbsp;<span class="ident" id="6865487"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6865497">(</span><span class="ident" id="6865498"><a href="/encoding/gob/encoder_test.go.html#6865247">b</a></span><span class="op" id="6865499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865503">var</span>&nbsp;<span class="ident" id="6865507">s</span>&nbsp;<span class="builtintype" id="6865509">string</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865518">if</span>&nbsp;<span class="ident" id="6865521">err</span>&nbsp;<span class="op" id="6865525">:=</span>&nbsp;<span class="ident" id="6865528"><a href="/encoding/gob/encoder_test.go.html#6865480">dec</a></span><span class="op" id="6865531">.</span><span class="ident" id="6865532">Decode</span><span class="op" id="6865538">(</span><span class="op" id="6865539">&amp;</span><span class="ident" id="6865540"><a href="/encoding/gob/encoder_test.go.html#6865507">s</a></span><span class="op" id="6865541">)</span><span class="op" id="6865542">;</span>&nbsp;<span class="ident" id="6865544"><a href="/encoding/gob/encoder_test.go.html#6865521">err</a></span>&nbsp;<span class="op" id="6865548">!=</span>&nbsp;<span class="ident" id="6865551">nil</span>&nbsp;<span class="op" id="6865555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865560"><a href="/encoding/gob/encoder_test.go.html#6865230">t</a></span><span class="op" id="6865561">.</span><span class="ident" id="6865562">Fatal</span><span class="op" id="6865567">(</span><span class="string" id="6865568">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="6865583">,</span>&nbsp;<span class="ident" id="6865585"><a href="/encoding/gob/encoder_test.go.html#6865521">err</a></span><span class="op" id="6865588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865596">if</span>&nbsp;<span class="ident" id="6865599"><a href="/encoding/gob/encoder_test.go.html#6865507">s</a></span>&nbsp;<span class="op" id="6865601">!=</span>&nbsp;<span class="ident" id="6865604"><a href="/encoding/gob/encoder_test.go.html#6848840">fmt</a></span><span class="op" id="6865607">.</span><span class="ident" id="6865608">Sprintf</span><span class="op" id="6865615">(</span><span class="string" id="6865616">&#34;%d&#34;</span><span class="op" id="6865620">,</span>&nbsp;<span class="ident" id="6865622"><a href="/encoding/gob/encoder_test.go.html#6865453">i</a></span><span class="op" id="6865623">)</span>&nbsp;<span class="op" id="6865625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865630"><a href="/encoding/gob/encoder_test.go.html#6865230">t</a></span><span class="op" id="6865631">.</span><span class="ident" id="6865632">Fatalf</span><span class="op" id="6865638">(</span><span class="string" id="6865639">&#34;decode&nbsp;expected&nbsp;%d&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6865666">,</span>&nbsp;<span class="ident" id="6865668"><a href="/encoding/gob/encoder_test.go.html#6865453">i</a></span><span class="op" id="6865669">,</span>&nbsp;<span class="ident" id="6865671"><a href="/encoding/gob/encoder_test.go.html#6865507">s</a></span><span class="op" id="6865672">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865679">}</span><br>
<span class="lineno"></span><span class="op" id="6865681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6865684">//&nbsp;Should&nbsp;be&nbsp;able&nbsp;to&nbsp;have&nbsp;unrepresentable&nbsp;fields&nbsp;(chan,&nbsp;func,&nbsp;*chan&nbsp;etc.);&nbsp;we&nbsp;just&nbsp;ignore&nbsp;them.</span><br>
<span class="lineno">740</span><span class="keyword" id="6865780">type</span>&nbsp;<span class="ident" id="6865785">Bug2</span>&nbsp;<span class="keyword" id="6865790">struct</span>&nbsp;<span class="op" id="6865797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865800">A</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6865804">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865809">C</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865813">chan</span>&nbsp;<span class="builtintype" id="6865818">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865823">CP</span>&nbsp;&nbsp;<span class="op" id="6865827">*</span><span class="keyword" id="6865828">chan</span>&nbsp;<span class="builtintype" id="6865833">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865838">F</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6865842">func</span><span class="op" id="6865846">(</span><span class="op" id="6865847">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865850">FPP</span>&nbsp;<span class="op" id="6865854">*</span><span class="op" id="6865855">*</span><span class="keyword" id="6865856">func</span><span class="op" id="6865860">(</span><span class="op" id="6865861">)</span><br>
<span class="lineno"></span><span class="op" id="6865863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6865866">func</span>&nbsp;<span class="ident" id="6865871">TestChanFuncIgnored</span><span class="op" id="6865890">(</span><span class="ident" id="6865891">t</span>&nbsp;<span class="op" id="6865893">*</span><span class="ident" id="6865894"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6865901">.</span><span class="ident" id="6865902">T</span><span class="op" id="6865903">)</span>&nbsp;<span class="op" id="6865905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865908">c</span>&nbsp;<span class="op" id="6865910">:=</span>&nbsp;<span class="builtinfunc" id="6865913">make</span><span class="op" id="6865917">(</span><span class="keyword" id="6865918">chan</span>&nbsp;<span class="builtintype" id="6865923">int</span><span class="op" id="6865926">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865929">f</span>&nbsp;<span class="op" id="6865931">:=</span>&nbsp;<span class="keyword" id="6865934">func</span><span class="op" id="6865938">(</span><span class="op" id="6865939">)</span>&nbsp;<span class="op" id="6865941">{</span><span class="op" id="6865942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865945">fp</span>&nbsp;<span class="op" id="6865948">:=</span>&nbsp;<span class="op" id="6865951">&amp;</span><span class="ident" id="6865952"><a href="/encoding/gob/encoder_test.go.html#6865929">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6865955">b0</span>&nbsp;<span class="op" id="6865958">:=</span>&nbsp;<span class="ident" id="6865961"><a href="/encoding/gob/encoder_test.go.html#6865785">Bug2</a></span><span class="op" id="6865965">{</span><span class="num" id="6865966">23</span><span class="op" id="6865968">,</span>&nbsp;<span class="ident" id="6865970"><a href="/encoding/gob/encoder_test.go.html#6865908">c</a></span><span class="op" id="6865971">,</span>&nbsp;<span class="op" id="6865973">&amp;</span><span class="ident" id="6865974"><a href="/encoding/gob/encoder_test.go.html#6865908">c</a></span><span class="op" id="6865975">,</span>&nbsp;<span class="ident" id="6865977"><a href="/encoding/gob/encoder_test.go.html#6865929">f</a></span><span class="op" id="6865978">,</span>&nbsp;<span class="op" id="6865980">&amp;</span><span class="ident" id="6865981"><a href="/encoding/gob/encoder_test.go.html#6865945">fp</a></span><span class="op" id="6865983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6865986">var</span>&nbsp;<span class="ident" id="6865990">buf</span>&nbsp;<span class="ident" id="6865994"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6865999">.</span><span class="ident" id="6866000">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866008">enc</span>&nbsp;<span class="op" id="6866012">:=</span>&nbsp;<span class="ident" id="6866015"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6866025">(</span><span class="op" id="6866026">&amp;</span><span class="ident" id="6866027"><a href="/encoding/gob/encoder_test.go.html#6865990">buf</a></span><span class="op" id="6866030">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866033">if</span>&nbsp;<span class="ident" id="6866036">err</span>&nbsp;<span class="op" id="6866040">:=</span>&nbsp;<span class="ident" id="6866043"><a href="/encoding/gob/encoder_test.go.html#6866008">enc</a></span><span class="op" id="6866046">.</span><span class="ident" id="6866047">Encode</span><span class="op" id="6866053">(</span><span class="ident" id="6866054"><a href="/encoding/gob/encoder_test.go.html#6865955">b0</a></span><span class="op" id="6866056">)</span><span class="op" id="6866057">;</span>&nbsp;<span class="ident" id="6866059"><a href="/encoding/gob/encoder_test.go.html#6866036">err</a></span>&nbsp;<span class="op" id="6866063">!=</span>&nbsp;<span class="ident" id="6866066">nil</span>&nbsp;<span class="op" id="6866070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866074"><a href="/encoding/gob/encoder_test.go.html#6865891">t</a></span><span class="op" id="6866075">.</span><span class="ident" id="6866076">Fatal</span><span class="op" id="6866081">(</span><span class="string" id="6866082">&#34;error&nbsp;encoding:&#34;</span><span class="op" id="6866099">,</span>&nbsp;<span class="ident" id="6866101"><a href="/encoding/gob/encoder_test.go.html#6866036">err</a></span><span class="op" id="6866104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866110">var</span>&nbsp;<span class="ident" id="6866114">b1</span>&nbsp;<span class="ident" id="6866117"><a href="/encoding/gob/encoder_test.go.html#6865785">Bug2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866123">err</span>&nbsp;<span class="op" id="6866127">:=</span>&nbsp;<span class="ident" id="6866130"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6866140">(</span><span class="op" id="6866141">&amp;</span><span class="ident" id="6866142"><a href="/encoding/gob/encoder_test.go.html#6865990">buf</a></span><span class="op" id="6866145">)</span><span class="op" id="6866146">.</span><span class="ident" id="6866147">Decode</span><span class="op" id="6866153">(</span><span class="op" id="6866154">&amp;</span><span class="ident" id="6866155"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866157">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866160">if</span>&nbsp;<span class="ident" id="6866163"><a href="/encoding/gob/encoder_test.go.html#6866123">err</a></span>&nbsp;<span class="op" id="6866167">!=</span>&nbsp;<span class="ident" id="6866170">nil</span>&nbsp;<span class="op" id="6866174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866178"><a href="/encoding/gob/encoder_test.go.html#6865891">t</a></span><span class="op" id="6866179">.</span><span class="ident" id="6866180">Fatal</span><span class="op" id="6866185">(</span><span class="string" id="6866186">&#34;decode:&#34;</span><span class="op" id="6866195">,</span>&nbsp;<span class="ident" id="6866197"><a href="/encoding/gob/encoder_test.go.html#6866123">err</a></span><span class="op" id="6866200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866206">if</span>&nbsp;<span class="ident" id="6866209"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866211">.</span><span class="ident" id="6866212">A</span>&nbsp;<span class="op" id="6866214">!=</span>&nbsp;<span class="ident" id="6866217"><a href="/encoding/gob/encoder_test.go.html#6865955">b0</a></span><span class="op" id="6866219">.</span><span class="ident" id="6866220">A</span>&nbsp;<span class="op" id="6866222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866226"><a href="/encoding/gob/encoder_test.go.html#6865891">t</a></span><span class="op" id="6866227">.</span><span class="ident" id="6866228">Fatalf</span><span class="op" id="6866234">(</span><span class="string" id="6866235">&#34;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6866251">,</span>&nbsp;<span class="ident" id="6866253"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866255">.</span><span class="ident" id="6866256">A</span><span class="op" id="6866257">,</span>&nbsp;<span class="ident" id="6866259"><a href="/encoding/gob/encoder_test.go.html#6865955">b0</a></span><span class="op" id="6866261">.</span><span class="ident" id="6866262">A</span><span class="op" id="6866263">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866269">if</span>&nbsp;<span class="ident" id="6866272"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866274">.</span><span class="ident" id="6866275">C</span>&nbsp;<span class="op" id="6866277">!=</span>&nbsp;<span class="ident" id="6866280">nil</span>&nbsp;<span class="op" id="6866284">||</span>&nbsp;<span class="ident" id="6866287"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866289">.</span><span class="ident" id="6866290">CP</span>&nbsp;<span class="op" id="6866293">!=</span>&nbsp;<span class="ident" id="6866296">nil</span>&nbsp;<span class="op" id="6866300">||</span>&nbsp;<span class="ident" id="6866303"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866305">.</span><span class="ident" id="6866306">F</span>&nbsp;<span class="op" id="6866308">!=</span>&nbsp;<span class="ident" id="6866311">nil</span>&nbsp;<span class="op" id="6866315">||</span>&nbsp;<span class="ident" id="6866318"><a href="/encoding/gob/encoder_test.go.html#6866114">b1</a></span><span class="op" id="6866320">.</span><span class="ident" id="6866321">FPP</span>&nbsp;<span class="op" id="6866325">!=</span>&nbsp;<span class="ident" id="6866328">nil</span>&nbsp;<span class="op" id="6866332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866336"><a href="/encoding/gob/encoder_test.go.html#6865891">t</a></span><span class="op" id="6866337">.</span><span class="ident" id="6866338">Fatal</span><span class="op" id="6866343">(</span><span class="string" id="6866344">&#34;unexpected&nbsp;value&nbsp;for&nbsp;chan&nbsp;or&nbsp;func&#34;</span><span class="op" id="6866379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866382">}</span><br>
<span class="lineno"></span><span class="op" id="6866384">}</span><br>
<span class="lineno">770</span><br>
<span class="lineno"></span><span class="keyword" id="6866387">func</span>&nbsp;<span class="ident" id="6866392">TestSliceIncompatibility</span><span class="op" id="6866416">(</span><span class="ident" id="6866417">t</span>&nbsp;<span class="op" id="6866419">*</span><span class="ident" id="6866420"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6866427">.</span><span class="ident" id="6866428">T</span><span class="op" id="6866429">)</span>&nbsp;<span class="op" id="6866431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866434">var</span>&nbsp;<span class="ident" id="6866438">in</span>&nbsp;<span class="op" id="6866441">=</span>&nbsp;<span class="op" id="6866443">[</span><span class="op" id="6866444">]</span><span class="builtintype" id="6866445">byte</span><span class="op" id="6866449">{</span><span class="num" id="6866450">1</span><span class="op" id="6866451">,</span>&nbsp;<span class="num" id="6866453">2</span><span class="op" id="6866454">,</span>&nbsp;<span class="num" id="6866456">3</span><span class="op" id="6866457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866460">var</span>&nbsp;<span class="ident" id="6866464">out</span>&nbsp;<span class="op" id="6866468">[</span><span class="op" id="6866469">]</span><span class="builtintype" id="6866470">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866475">if</span>&nbsp;<span class="ident" id="6866478">err</span>&nbsp;<span class="op" id="6866482">:=</span>&nbsp;<span class="ident" id="6866485"><a href="/encoding/gob/encoder_test.go.html#6853648">encAndDec</a></span><span class="op" id="6866494">(</span><span class="ident" id="6866495"><a href="/encoding/gob/encoder_test.go.html#6866438">in</a></span><span class="op" id="6866497">,</span>&nbsp;<span class="op" id="6866499">&amp;</span><span class="ident" id="6866500"><a href="/encoding/gob/encoder_test.go.html#6866464">out</a></span><span class="op" id="6866503">)</span><span class="op" id="6866504">;</span>&nbsp;<span class="ident" id="6866506"><a href="/encoding/gob/encoder_test.go.html#6866478">err</a></span>&nbsp;<span class="op" id="6866510">==</span>&nbsp;<span class="ident" id="6866513">nil</span>&nbsp;<span class="op" id="6866517">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866521"><a href="/encoding/gob/encoder_test.go.html#6866417">t</a></span><span class="op" id="6866522">.</span><span class="ident" id="6866523">Error</span><span class="op" id="6866528">(</span><span class="string" id="6866529">&#34;expected&nbsp;compatibility&nbsp;error&#34;</span><span class="op" id="6866559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866562">}</span><br>
<span class="lineno"></span><span class="op" id="6866564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6866567">//&nbsp;Mutually&nbsp;recursive&nbsp;slices&nbsp;of&nbsp;structs&nbsp;caused&nbsp;problems.</span><br>
<span class="lineno">780</span><span class="keyword" id="6866624">type</span>&nbsp;<span class="ident" id="6866629">Bug3</span>&nbsp;<span class="keyword" id="6866634">struct</span>&nbsp;<span class="op" id="6866641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866644">Num</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6866653">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866658">Children</span>&nbsp;<span class="op" id="6866667">[</span><span class="op" id="6866668">]</span><span class="op" id="6866669">*</span><span class="ident" id="6866670"><a href="/encoding/gob/encoder_test.go.html#6866629">Bug3</a></span><br>
<span class="lineno"></span><span class="op" id="6866675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span><span class="keyword" id="6866678">func</span>&nbsp;<span class="ident" id="6866683">TestGobPtrSlices</span><span class="op" id="6866699">(</span><span class="ident" id="6866700">t</span>&nbsp;<span class="op" id="6866702">*</span><span class="ident" id="6866703"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6866710">.</span><span class="ident" id="6866711">T</span><span class="op" id="6866712">)</span>&nbsp;<span class="op" id="6866714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866717">in</span>&nbsp;<span class="op" id="6866720">:=</span>&nbsp;<span class="op" id="6866723">[</span><span class="op" id="6866724">]</span><span class="op" id="6866725">*</span><span class="ident" id="6866726"><a href="/encoding/gob/encoder_test.go.html#6866629">Bug3</a></span><span class="op" id="6866730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866734">{</span><span class="num" id="6866735">1</span><span class="op" id="6866736">,</span>&nbsp;<span class="ident" id="6866738">nil</span><span class="op" id="6866741">}</span><span class="op" id="6866742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866746">{</span><span class="num" id="6866747">2</span><span class="op" id="6866748">,</span>&nbsp;<span class="ident" id="6866750">nil</span><span class="op" id="6866753">}</span><span class="op" id="6866754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866757">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866760">b</span>&nbsp;<span class="op" id="6866762">:=</span>&nbsp;<span class="builtinfunc" id="6866765">new</span><span class="op" id="6866768">(</span><span class="ident" id="6866769"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6866774">.</span><span class="ident" id="6866775">Buffer</span><span class="op" id="6866781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866784">err</span>&nbsp;<span class="op" id="6866788">:=</span>&nbsp;<span class="ident" id="6866791"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6866801">(</span><span class="ident" id="6866802"><a href="/encoding/gob/encoder_test.go.html#6866760">b</a></span><span class="op" id="6866803">)</span><span class="op" id="6866804">.</span><span class="ident" id="6866805">Encode</span><span class="op" id="6866811">(</span><span class="op" id="6866812">&amp;</span><span class="ident" id="6866813"><a href="/encoding/gob/encoder_test.go.html#6866717">in</a></span><span class="op" id="6866815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866818">if</span>&nbsp;<span class="ident" id="6866821"><a href="/encoding/gob/encoder_test.go.html#6866784">err</a></span>&nbsp;<span class="op" id="6866825">!=</span>&nbsp;<span class="ident" id="6866828">nil</span>&nbsp;<span class="op" id="6866832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866836"><a href="/encoding/gob/encoder_test.go.html#6866700">t</a></span><span class="op" id="6866837">.</span><span class="ident" id="6866838">Fatal</span><span class="op" id="6866843">(</span><span class="string" id="6866844">&#34;encode:&#34;</span><span class="op" id="6866853">,</span>&nbsp;<span class="ident" id="6866855"><a href="/encoding/gob/encoder_test.go.html#6866784">err</a></span><span class="op" id="6866858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866861">}</span><br>
<span class="lineno">795</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866865">var</span>&nbsp;<span class="ident" id="6866869">out</span>&nbsp;<span class="op" id="6866873">[</span><span class="op" id="6866874">]</span><span class="op" id="6866875">*</span><span class="ident" id="6866876"><a href="/encoding/gob/encoder_test.go.html#6866629">Bug3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866882"><a href="/encoding/gob/encoder_test.go.html#6866784">err</a></span>&nbsp;<span class="op" id="6866886">=</span>&nbsp;<span class="ident" id="6866888"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6866898">(</span><span class="ident" id="6866899"><a href="/encoding/gob/encoder_test.go.html#6866760">b</a></span><span class="op" id="6866900">)</span><span class="op" id="6866901">.</span><span class="ident" id="6866902">Decode</span><span class="op" id="6866908">(</span><span class="op" id="6866909">&amp;</span><span class="ident" id="6866910"><a href="/encoding/gob/encoder_test.go.html#6866869">out</a></span><span class="op" id="6866913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866916">if</span>&nbsp;<span class="ident" id="6866919"><a href="/encoding/gob/encoder_test.go.html#6866784">err</a></span>&nbsp;<span class="op" id="6866923">!=</span>&nbsp;<span class="ident" id="6866926">nil</span>&nbsp;<span class="op" id="6866930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866934"><a href="/encoding/gob/encoder_test.go.html#6866700">t</a></span><span class="op" id="6866935">.</span><span class="ident" id="6866936">Fatal</span><span class="op" id="6866941">(</span><span class="string" id="6866942">&#34;decode:&#34;</span><span class="op" id="6866951">,</span>&nbsp;<span class="ident" id="6866953"><a href="/encoding/gob/encoder_test.go.html#6866784">err</a></span><span class="op" id="6866956">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6866962">if</span>&nbsp;<span class="op" id="6866965">!</span><span class="ident" id="6866966"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6866973">.</span><span class="ident" id="6866974">DeepEqual</span><span class="op" id="6866983">(</span><span class="ident" id="6866984"><a href="/encoding/gob/encoder_test.go.html#6866717">in</a></span><span class="op" id="6866986">,</span>&nbsp;<span class="ident" id="6866988"><a href="/encoding/gob/encoder_test.go.html#6866869">out</a></span><span class="op" id="6866991">)</span>&nbsp;<span class="op" id="6866993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6866997"><a href="/encoding/gob/encoder_test.go.html#6866700">t</a></span><span class="op" id="6866998">.</span><span class="ident" id="6866999">Fatalf</span><span class="op" id="6867005">(</span><span class="string" id="6867006">&#34;got&nbsp;%v;&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6867025">,</span>&nbsp;<span class="ident" id="6867027"><a href="/encoding/gob/encoder_test.go.html#6866869">out</a></span><span class="op" id="6867030">,</span>&nbsp;<span class="ident" id="6867032"><a href="/encoding/gob/encoder_test.go.html#6866717">in</a></span><span class="op" id="6867034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867037">}</span><br>
<span class="lineno"></span><span class="op" id="6867039">}</span><br>
<span class="lineno">805</span><br>
<span class="lineno"></span><span class="comment" id="6867042">//&nbsp;getDecEnginePtr&nbsp;cached&nbsp;engine&nbsp;for&nbsp;ut.base&nbsp;instead&nbsp;of&nbsp;ut.user&nbsp;so&nbsp;we&nbsp;passed</span><br>
<span class="lineno"></span><span class="comment" id="6867119">//&nbsp;a&nbsp;*map&nbsp;and&nbsp;then&nbsp;tried&nbsp;to&nbsp;reuse&nbsp;its&nbsp;engine&nbsp;to&nbsp;decode&nbsp;the&nbsp;inner&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="6867189">func</span>&nbsp;<span class="ident" id="6867194">TestPtrToMapOfMap</span><span class="op" id="6867211">(</span><span class="ident" id="6867212">t</span>&nbsp;<span class="op" id="6867214">*</span><span class="ident" id="6867215"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6867222">.</span><span class="ident" id="6867223">T</span><span class="op" id="6867224">)</span>&nbsp;<span class="op" id="6867226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867229"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6867237">(</span><span class="builtinfunc" id="6867238">make</span><span class="op" id="6867242">(</span><span class="keyword" id="6867243">map</span><span class="op" id="6867246">[</span><span class="builtintype" id="6867247">string</span><span class="op" id="6867253">]</span><span class="keyword" id="6867254">interface</span><span class="op" id="6867263">{</span><span class="op" id="6867264">}</span><span class="op" id="6867265">)</span><span class="op" id="6867266">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867269">subdata</span>&nbsp;<span class="op" id="6867277">:=</span>&nbsp;<span class="builtinfunc" id="6867280">make</span><span class="op" id="6867284">(</span><span class="keyword" id="6867285">map</span><span class="op" id="6867288">[</span><span class="builtintype" id="6867289">string</span><span class="op" id="6867295">]</span><span class="keyword" id="6867296">interface</span><span class="op" id="6867305">{</span><span class="op" id="6867306">}</span><span class="op" id="6867307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867310"><a href="/encoding/gob/encoder_test.go.html#6867269">subdata</a></span><span class="op" id="6867317">[</span><span class="string" id="6867318">&#34;bar&#34;</span><span class="op" id="6867323">]</span>&nbsp;<span class="op" id="6867325">=</span>&nbsp;<span class="string" id="6867327">&#34;baz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867334">data</span>&nbsp;<span class="op" id="6867339">:=</span>&nbsp;<span class="builtinfunc" id="6867342">make</span><span class="op" id="6867346">(</span><span class="keyword" id="6867347">map</span><span class="op" id="6867350">[</span><span class="builtintype" id="6867351">string</span><span class="op" id="6867357">]</span><span class="keyword" id="6867358">interface</span><span class="op" id="6867367">{</span><span class="op" id="6867368">}</span><span class="op" id="6867369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867372"><a href="/encoding/gob/encoder_test.go.html#6867334">data</a></span><span class="op" id="6867376">[</span><span class="string" id="6867377">&#34;foo&#34;</span><span class="op" id="6867382">]</span>&nbsp;<span class="op" id="6867384">=</span>&nbsp;<span class="ident" id="6867386"><a href="/encoding/gob/encoder_test.go.html#6867269">subdata</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867396">b</span>&nbsp;<span class="op" id="6867398">:=</span>&nbsp;<span class="builtinfunc" id="6867401">new</span><span class="op" id="6867404">(</span><span class="ident" id="6867405"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6867410">.</span><span class="ident" id="6867411">Buffer</span><span class="op" id="6867417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867420">err</span>&nbsp;<span class="op" id="6867424">:=</span>&nbsp;<span class="ident" id="6867427"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6867437">(</span><span class="ident" id="6867438"><a href="/encoding/gob/encoder_test.go.html#6867396">b</a></span><span class="op" id="6867439">)</span><span class="op" id="6867440">.</span><span class="ident" id="6867441">Encode</span><span class="op" id="6867447">(</span><span class="ident" id="6867448"><a href="/encoding/gob/encoder_test.go.html#6867334">data</a></span><span class="op" id="6867452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867455">if</span>&nbsp;<span class="ident" id="6867458"><a href="/encoding/gob/encoder_test.go.html#6867420">err</a></span>&nbsp;<span class="op" id="6867462">!=</span>&nbsp;<span class="ident" id="6867465">nil</span>&nbsp;<span class="op" id="6867469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867473"><a href="/encoding/gob/encoder_test.go.html#6867212">t</a></span><span class="op" id="6867474">.</span><span class="ident" id="6867475">Fatal</span><span class="op" id="6867480">(</span><span class="string" id="6867481">&#34;encode:&#34;</span><span class="op" id="6867490">,</span>&nbsp;<span class="ident" id="6867492"><a href="/encoding/gob/encoder_test.go.html#6867420">err</a></span><span class="op" id="6867495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867498">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867501">var</span>&nbsp;<span class="ident" id="6867505">newData</span>&nbsp;<span class="keyword" id="6867513">map</span><span class="op" id="6867516">[</span><span class="builtintype" id="6867517">string</span><span class="op" id="6867523">]</span><span class="keyword" id="6867524">interface</span><span class="op" id="6867533">{</span><span class="op" id="6867534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867537"><a href="/encoding/gob/encoder_test.go.html#6867420">err</a></span>&nbsp;<span class="op" id="6867541">=</span>&nbsp;<span class="ident" id="6867543"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6867553">(</span><span class="ident" id="6867554"><a href="/encoding/gob/encoder_test.go.html#6867396">b</a></span><span class="op" id="6867555">)</span><span class="op" id="6867556">.</span><span class="ident" id="6867557">Decode</span><span class="op" id="6867563">(</span><span class="op" id="6867564">&amp;</span><span class="ident" id="6867565"><a href="/encoding/gob/encoder_test.go.html#6867505">newData</a></span><span class="op" id="6867572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867575">if</span>&nbsp;<span class="ident" id="6867578"><a href="/encoding/gob/encoder_test.go.html#6867420">err</a></span>&nbsp;<span class="op" id="6867582">!=</span>&nbsp;<span class="ident" id="6867585">nil</span>&nbsp;<span class="op" id="6867589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867593"><a href="/encoding/gob/encoder_test.go.html#6867212">t</a></span><span class="op" id="6867594">.</span><span class="ident" id="6867595">Fatal</span><span class="op" id="6867600">(</span><span class="string" id="6867601">&#34;decode:&#34;</span><span class="op" id="6867610">,</span>&nbsp;<span class="ident" id="6867612"><a href="/encoding/gob/encoder_test.go.html#6867420">err</a></span><span class="op" id="6867615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867618">}</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867621">if</span>&nbsp;<span class="op" id="6867624">!</span><span class="ident" id="6867625"><a href="/encoding/gob/encoder_test.go.html#6848853">reflect</a></span><span class="op" id="6867632">.</span><span class="ident" id="6867633">DeepEqual</span><span class="op" id="6867642">(</span><span class="ident" id="6867643"><a href="/encoding/gob/encoder_test.go.html#6867334">data</a></span><span class="op" id="6867647">,</span>&nbsp;<span class="ident" id="6867649"><a href="/encoding/gob/encoder_test.go.html#6867505">newData</a></span><span class="op" id="6867656">)</span>&nbsp;<span class="op" id="6867658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867662"><a href="/encoding/gob/encoder_test.go.html#6867212">t</a></span><span class="op" id="6867663">.</span><span class="ident" id="6867664">Fatalf</span><span class="op" id="6867670">(</span><span class="string" id="6867671">&#34;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6867691">,</span>&nbsp;<span class="ident" id="6867693"><a href="/encoding/gob/encoder_test.go.html#6867334">data</a></span><span class="op" id="6867697">,</span>&nbsp;<span class="ident" id="6867699"><a href="/encoding/gob/encoder_test.go.html#6867505">newData</a></span><span class="op" id="6867706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867709">}</span><br>
<span class="lineno"></span><span class="op" id="6867711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="comment" id="6867714">//&nbsp;A&nbsp;top-level&nbsp;nil&nbsp;pointer&nbsp;generates&nbsp;a&nbsp;panic&nbsp;with&nbsp;a&nbsp;helpful&nbsp;string-valued&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="6867797">func</span>&nbsp;<span class="ident" id="6867802">TestTopLevelNilPointer</span><span class="op" id="6867824">(</span><span class="ident" id="6867825">t</span>&nbsp;<span class="op" id="6867827">*</span><span class="ident" id="6867828"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6867835">.</span><span class="ident" id="6867836">T</span><span class="op" id="6867837">)</span>&nbsp;<span class="op" id="6867839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867842">errMsg</span>&nbsp;<span class="op" id="6867849">:=</span>&nbsp;<span class="ident" id="6867852"><a href="/encoding/gob/encoder_test.go.html#6868055">topLevelNilPanic</a></span><span class="op" id="6867868">(</span><span class="ident" id="6867869"><a href="/encoding/gob/encoder_test.go.html#6867825">t</a></span><span class="op" id="6867870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867873">if</span>&nbsp;<span class="ident" id="6867876"><a href="/encoding/gob/encoder_test.go.html#6867842">errMsg</a></span>&nbsp;<span class="op" id="6867883">==</span>&nbsp;<span class="string" id="6867886">&#34;&#34;</span>&nbsp;<span class="op" id="6867889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867893"><a href="/encoding/gob/encoder_test.go.html#6867825">t</a></span><span class="op" id="6867894">.</span><span class="ident" id="6867895">Fatal</span><span class="op" id="6867900">(</span><span class="string" id="6867901">&#34;top-level&nbsp;nil&nbsp;pointer&nbsp;did&nbsp;not&nbsp;panic&#34;</span><span class="op" id="6867938">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867944">if</span>&nbsp;<span class="op" id="6867947">!</span><span class="ident" id="6867948"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6867955">.</span><span class="ident" id="6867956">Contains</span><span class="op" id="6867964">(</span><span class="ident" id="6867965"><a href="/encoding/gob/encoder_test.go.html#6867842">errMsg</a></span><span class="op" id="6867971">,</span>&nbsp;<span class="string" id="6867973">&#34;nil&nbsp;pointer&#34;</span><span class="op" id="6867986">)</span>&nbsp;<span class="op" id="6867988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867992"><a href="/encoding/gob/encoder_test.go.html#6867825">t</a></span><span class="op" id="6867993">.</span><span class="ident" id="6867994">Fatal</span><span class="op" id="6867999">(</span><span class="string" id="6868000">&#34;expected&nbsp;nil&nbsp;pointer&nbsp;error,&nbsp;got:&#34;</span><span class="op" id="6868034">,</span>&nbsp;<span class="ident" id="6868036"><a href="/encoding/gob/encoder_test.go.html#6867842">errMsg</a></span><span class="op" id="6868042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868045">}</span><br>
<span class="lineno"></span><span class="op" id="6868047">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="6868050">func</span>&nbsp;<span class="ident" id="6868055">topLevelNilPanic</span><span class="op" id="6868071">(</span><span class="ident" id="6868072">t</span>&nbsp;<span class="op" id="6868074">*</span><span class="ident" id="6868075"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6868082">.</span><span class="ident" id="6868083">T</span><span class="op" id="6868084">)</span>&nbsp;<span class="op" id="6868086">(</span><span class="ident" id="6868087">panicErr</span>&nbsp;<span class="builtintype" id="6868096">string</span><span class="op" id="6868102">)</span>&nbsp;<span class="op" id="6868104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868107">defer</span>&nbsp;<span class="keyword" id="6868113">func</span><span class="op" id="6868117">(</span><span class="op" id="6868118">)</span>&nbsp;<span class="op" id="6868120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868124">e</span>&nbsp;<span class="op" id="6868126">:=</span>&nbsp;<span class="builtinfunc" id="6868129">recover</span><span class="op" id="6868136">(</span><span class="op" id="6868137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868141">if</span>&nbsp;<span class="ident" id="6868144">err</span><span class="op" id="6868147">,</span>&nbsp;<span class="ident" id="6868149">ok</span>&nbsp;<span class="op" id="6868152">:=</span>&nbsp;<span class="ident" id="6868155"><a href="/encoding/gob/encoder_test.go.html#6868124">e</a></span><span class="op" id="6868156">.</span><span class="op" id="6868157">(</span><span class="builtintype" id="6868158">string</span><span class="op" id="6868164">)</span><span class="op" id="6868165">;</span>&nbsp;<span class="ident" id="6868167"><a href="/encoding/gob/encoder_test.go.html#6868149">ok</a></span>&nbsp;<span class="op" id="6868170">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868175"><a href="/encoding/gob/encoder_test.go.html#6868087">panicErr</a></span>&nbsp;<span class="op" id="6868184">=</span>&nbsp;<span class="ident" id="6868186"><a href="/encoding/gob/encoder_test.go.html#6868144">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868195">}</span><span class="op" id="6868196">(</span><span class="op" id="6868197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868200">var</span>&nbsp;<span class="ident" id="6868204">ip</span>&nbsp;<span class="op" id="6868207">*</span><span class="builtintype" id="6868208">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868213">buf</span>&nbsp;<span class="op" id="6868217">:=</span>&nbsp;<span class="builtinfunc" id="6868220">new</span><span class="op" id="6868223">(</span><span class="ident" id="6868224"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6868229">.</span><span class="ident" id="6868230">Buffer</span><span class="op" id="6868236">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868239">if</span>&nbsp;<span class="ident" id="6868242">err</span>&nbsp;<span class="op" id="6868246">:=</span>&nbsp;<span class="ident" id="6868249"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6868259">(</span><span class="ident" id="6868260"><a href="/encoding/gob/encoder_test.go.html#6868213">buf</a></span><span class="op" id="6868263">)</span><span class="op" id="6868264">.</span><span class="ident" id="6868265">Encode</span><span class="op" id="6868271">(</span><span class="ident" id="6868272"><a href="/encoding/gob/encoder_test.go.html#6868204">ip</a></span><span class="op" id="6868274">)</span><span class="op" id="6868275">;</span>&nbsp;<span class="ident" id="6868277"><a href="/encoding/gob/encoder_test.go.html#6868242">err</a></span>&nbsp;<span class="op" id="6868281">!=</span>&nbsp;<span class="ident" id="6868284">nil</span>&nbsp;<span class="op" id="6868288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868292"><a href="/encoding/gob/encoder_test.go.html#6868072">t</a></span><span class="op" id="6868293">.</span><span class="ident" id="6868294">Fatal</span><span class="op" id="6868299">(</span><span class="string" id="6868300">&#34;error&nbsp;in&nbsp;encode:&#34;</span><span class="op" id="6868318">,</span>&nbsp;<span class="ident" id="6868320"><a href="/encoding/gob/encoder_test.go.html#6868242">err</a></span><span class="op" id="6868323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868329">return</span><br>
<span class="lineno"></span><span class="op" id="6868336">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span><span class="keyword" id="6868339">func</span>&nbsp;<span class="ident" id="6868344">TestNilPointerInsideInterface</span><span class="op" id="6868373">(</span><span class="ident" id="6868374">t</span>&nbsp;<span class="op" id="6868376">*</span><span class="ident" id="6868377"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6868384">.</span><span class="ident" id="6868385">T</span><span class="op" id="6868386">)</span>&nbsp;<span class="op" id="6868388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868391">var</span>&nbsp;<span class="ident" id="6868395">ip</span>&nbsp;<span class="op" id="6868398">*</span><span class="builtintype" id="6868399">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868404">si</span>&nbsp;<span class="op" id="6868407">:=</span>&nbsp;<span class="keyword" id="6868410">struct</span>&nbsp;<span class="op" id="6868417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868421">I</span>&nbsp;<span class="keyword" id="6868423">interface</span><span class="op" id="6868432">{</span><span class="op" id="6868433">}</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868436">}</span><span class="op" id="6868437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868441">I</span><span class="op" id="6868442">:</span>&nbsp;<span class="ident" id="6868444"><a href="/encoding/gob/encoder_test.go.html#6868395">ip</a></span><span class="op" id="6868446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868452">buf</span>&nbsp;<span class="op" id="6868456">:=</span>&nbsp;<span class="builtinfunc" id="6868459">new</span><span class="op" id="6868462">(</span><span class="ident" id="6868463"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6868468">.</span><span class="ident" id="6868469">Buffer</span><span class="op" id="6868475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868478">err</span>&nbsp;<span class="op" id="6868482">:=</span>&nbsp;<span class="ident" id="6868485"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6868495">(</span><span class="ident" id="6868496"><a href="/encoding/gob/encoder_test.go.html#6868452">buf</a></span><span class="op" id="6868499">)</span><span class="op" id="6868500">.</span><span class="ident" id="6868501">Encode</span><span class="op" id="6868507">(</span><span class="ident" id="6868508"><a href="/encoding/gob/encoder_test.go.html#6868404">si</a></span><span class="op" id="6868510">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868513">if</span>&nbsp;<span class="ident" id="6868516"><a href="/encoding/gob/encoder_test.go.html#6868478">err</a></span>&nbsp;<span class="op" id="6868520">==</span>&nbsp;<span class="ident" id="6868523">nil</span>&nbsp;<span class="op" id="6868527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868531"><a href="/encoding/gob/encoder_test.go.html#6868374">t</a></span><span class="op" id="6868532">.</span><span class="ident" id="6868533">Fatal</span><span class="op" id="6868538">(</span><span class="string" id="6868539">&#34;expected&nbsp;error,&nbsp;got&nbsp;none&#34;</span><span class="op" id="6868565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868571">errMsg</span>&nbsp;<span class="op" id="6868578">:=</span>&nbsp;<span class="ident" id="6868581"><a href="/encoding/gob/encoder_test.go.html#6868478">err</a></span><span class="op" id="6868584">.</span><span class="ident" id="6868585">Error</span><span class="op" id="6868590">(</span><span class="op" id="6868591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868594">if</span>&nbsp;<span class="op" id="6868597">!</span><span class="ident" id="6868598"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6868605">.</span><span class="ident" id="6868606">Contains</span><span class="op" id="6868614">(</span><span class="ident" id="6868615"><a href="/encoding/gob/encoder_test.go.html#6868571">errMsg</a></span><span class="op" id="6868621">,</span>&nbsp;<span class="string" id="6868623">&#34;nil&nbsp;pointer&#34;</span><span class="op" id="6868636">)</span>&nbsp;<span class="op" id="6868638">||</span>&nbsp;<span class="op" id="6868641">!</span><span class="ident" id="6868642"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6868649">.</span><span class="ident" id="6868650">Contains</span><span class="op" id="6868658">(</span><span class="ident" id="6868659"><a href="/encoding/gob/encoder_test.go.html#6868571">errMsg</a></span><span class="op" id="6868665">,</span>&nbsp;<span class="string" id="6868667">&#34;interface&#34;</span><span class="op" id="6868678">)</span>&nbsp;<span class="op" id="6868680">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868684"><a href="/encoding/gob/encoder_test.go.html#6868374">t</a></span><span class="op" id="6868685">.</span><span class="ident" id="6868686">Fatal</span><span class="op" id="6868691">(</span><span class="string" id="6868692">&#34;expected&nbsp;error&nbsp;about&nbsp;nil&nbsp;pointer&nbsp;and&nbsp;interface,&nbsp;got:&#34;</span><span class="op" id="6868746">,</span>&nbsp;<span class="ident" id="6868748"><a href="/encoding/gob/encoder_test.go.html#6868571">errMsg</a></span><span class="op" id="6868754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868757">}</span><br>
<span class="lineno"></span><span class="op" id="6868759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868762">type</span>&nbsp;<span class="ident" id="6868767">Bug4Public</span>&nbsp;<span class="keyword" id="6868778">struct</span>&nbsp;<span class="op" id="6868785">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868788">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6868795">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868803">Secret</span>&nbsp;<span class="ident" id="6868810"><a href="/encoding/gob/encoder_test.go.html#6868829">Bug4Secret</a></span><br>
<span class="lineno"></span><span class="op" id="6868821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868824">type</span>&nbsp;<span class="ident" id="6868829">Bug4Secret</span>&nbsp;<span class="keyword" id="6868840">struct</span>&nbsp;<span class="op" id="6868847">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868850">a</span>&nbsp;<span class="builtintype" id="6868852">int</span>&nbsp;<span class="comment" id="6868856">//&nbsp;error:&nbsp;no&nbsp;exported&nbsp;fields.</span><br>
<span class="lineno"></span><span class="op" id="6868886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6868889">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;failed&nbsp;compilation&nbsp;doesn&#39;t&nbsp;leave&nbsp;around&nbsp;an&nbsp;executable&nbsp;encoder.</span><br>
<span class="lineno"></span><span class="comment" id="6868967">//&nbsp;Issue&nbsp;3273.</span><br>
<span class="lineno">885</span><span class="keyword" id="6868982">func</span>&nbsp;<span class="ident" id="6868987">TestMutipleEncodingsOfBadType</span><span class="op" id="6869016">(</span><span class="ident" id="6869017">t</span>&nbsp;<span class="op" id="6869019">*</span><span class="ident" id="6869020"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6869027">.</span><span class="ident" id="6869028">T</span><span class="op" id="6869029">)</span>&nbsp;<span class="op" id="6869031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869034">x</span>&nbsp;<span class="op" id="6869036">:=</span>&nbsp;<span class="ident" id="6869039"><a href="/encoding/gob/encoder_test.go.html#6868767">Bug4Public</a></span><span class="op" id="6869049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869053">Name</span><span class="op" id="6869057">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6869061">&#34;name&#34;</span><span class="op" id="6869067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869071">Secret</span><span class="op" id="6869077">:</span>&nbsp;<span class="ident" id="6869079"><a href="/encoding/gob/encoder_test.go.html#6868829">Bug4Secret</a></span><span class="op" id="6869089">{</span><span class="num" id="6869090">1</span><span class="op" id="6869091">}</span><span class="op" id="6869092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869095">}</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869098">buf</span>&nbsp;<span class="op" id="6869102">:=</span>&nbsp;<span class="builtinfunc" id="6869105">new</span><span class="op" id="6869108">(</span><span class="ident" id="6869109"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6869114">.</span><span class="ident" id="6869115">Buffer</span><span class="op" id="6869121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869124">enc</span>&nbsp;<span class="op" id="6869128">:=</span>&nbsp;<span class="ident" id="6869131"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6869141">(</span><span class="ident" id="6869142"><a href="/encoding/gob/encoder_test.go.html#6869098">buf</a></span><span class="op" id="6869145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869148">err</span>&nbsp;<span class="op" id="6869152">:=</span>&nbsp;<span class="ident" id="6869155"><a href="/encoding/gob/encoder_test.go.html#6869124">enc</a></span><span class="op" id="6869158">.</span><span class="ident" id="6869159">Encode</span><span class="op" id="6869165">(</span><span class="ident" id="6869166"><a href="/encoding/gob/encoder_test.go.html#6869034">x</a></span><span class="op" id="6869167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869170">if</span>&nbsp;<span class="ident" id="6869173"><a href="/encoding/gob/encoder_test.go.html#6869148">err</a></span>&nbsp;<span class="op" id="6869177">==</span>&nbsp;<span class="ident" id="6869180">nil</span>&nbsp;<span class="op" id="6869184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869188"><a href="/encoding/gob/encoder_test.go.html#6869017">t</a></span><span class="op" id="6869189">.</span><span class="ident" id="6869190">Fatal</span><span class="op" id="6869195">(</span><span class="string" id="6869196">&#34;first&nbsp;encoding:&nbsp;expected&nbsp;error&#34;</span><span class="op" id="6869228">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869234"><a href="/encoding/gob/encoder_test.go.html#6869098">buf</a></span><span class="op" id="6869237">.</span><span class="ident" id="6869238">Reset</span><span class="op" id="6869243">(</span><span class="op" id="6869244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869247"><a href="/encoding/gob/encoder_test.go.html#6869124">enc</a></span>&nbsp;<span class="op" id="6869251">=</span>&nbsp;<span class="ident" id="6869253"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6869263">(</span><span class="ident" id="6869264"><a href="/encoding/gob/encoder_test.go.html#6869098">buf</a></span><span class="op" id="6869267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869270"><a href="/encoding/gob/encoder_test.go.html#6869148">err</a></span>&nbsp;<span class="op" id="6869274">=</span>&nbsp;<span class="ident" id="6869276"><a href="/encoding/gob/encoder_test.go.html#6869124">enc</a></span><span class="op" id="6869279">.</span><span class="ident" id="6869280">Encode</span><span class="op" id="6869286">(</span><span class="ident" id="6869287"><a href="/encoding/gob/encoder_test.go.html#6869034">x</a></span><span class="op" id="6869288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869291">if</span>&nbsp;<span class="ident" id="6869294"><a href="/encoding/gob/encoder_test.go.html#6869148">err</a></span>&nbsp;<span class="op" id="6869298">==</span>&nbsp;<span class="ident" id="6869301">nil</span>&nbsp;<span class="op" id="6869305">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869309"><a href="/encoding/gob/encoder_test.go.html#6869017">t</a></span><span class="op" id="6869310">.</span><span class="ident" id="6869311">Fatal</span><span class="op" id="6869316">(</span><span class="string" id="6869317">&#34;second&nbsp;encoding:&nbsp;expected&nbsp;error&#34;</span><span class="op" id="6869350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869356">if</span>&nbsp;<span class="op" id="6869359">!</span><span class="ident" id="6869360"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6869367">.</span><span class="ident" id="6869368">Contains</span><span class="op" id="6869376">(</span><span class="ident" id="6869377"><a href="/encoding/gob/encoder_test.go.html#6869148">err</a></span><span class="op" id="6869380">.</span><span class="ident" id="6869381">Error</span><span class="op" id="6869386">(</span><span class="op" id="6869387">)</span><span class="op" id="6869388">,</span>&nbsp;<span class="string" id="6869390">&#34;no&nbsp;exported&nbsp;fields&#34;</span><span class="op" id="6869410">)</span>&nbsp;<span class="op" id="6869412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869416"><a href="/encoding/gob/encoder_test.go.html#6869017">t</a></span><span class="op" id="6869417">.</span><span class="ident" id="6869418">Errorf</span><span class="op" id="6869424">(</span><span class="string" id="6869425">&#34;expected&nbsp;error&nbsp;about&nbsp;no&nbsp;exported&nbsp;fields;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6869474">,</span>&nbsp;<span class="ident" id="6869476"><a href="/encoding/gob/encoder_test.go.html#6869148">err</a></span><span class="op" id="6869479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869482">}</span><br>
<span class="lineno">905</span><span class="op" id="6869484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6869487">//&nbsp;There&nbsp;was&nbsp;an&nbsp;error&nbsp;check&nbsp;comparing&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;input&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6869558">//&nbsp;length&nbsp;of&nbsp;the&nbsp;slice&nbsp;being&nbsp;decoded.&nbsp;It&nbsp;was&nbsp;wrong&nbsp;because&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="6869626">//&nbsp;thing&nbsp;in&nbsp;the&nbsp;input&nbsp;might&nbsp;be&nbsp;a&nbsp;type&nbsp;definition,&nbsp;which&nbsp;would&nbsp;lead&nbsp;to</span><br>
<span class="lineno">910</span><span class="comment" id="6869696">//&nbsp;an&nbsp;incorrect&nbsp;length&nbsp;check.&nbsp;&nbsp;This&nbsp;test&nbsp;reproduces&nbsp;the&nbsp;corner&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6869766">type</span>&nbsp;<span class="ident" id="6869771">Z</span>&nbsp;<span class="keyword" id="6869773">struct</span>&nbsp;<span class="op" id="6869780">{</span><br>
<span class="lineno"></span><span class="op" id="6869782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="keyword" id="6869785">func</span>&nbsp;<span class="ident" id="6869790">Test29ElementSlice</span><span class="op" id="6869808">(</span><span class="ident" id="6869809">t</span>&nbsp;<span class="op" id="6869811">*</span><span class="ident" id="6869812"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6869819">.</span><span class="ident" id="6869820">T</span><span class="op" id="6869821">)</span>&nbsp;<span class="op" id="6869823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869826"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6869834">(</span><span class="ident" id="6869835"><a href="/encoding/gob/encoder_test.go.html#6869771">Z</a></span><span class="op" id="6869836">{</span><span class="op" id="6869837">}</span><span class="op" id="6869838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869841">src</span>&nbsp;<span class="op" id="6869845">:=</span>&nbsp;<span class="builtinfunc" id="6869848">make</span><span class="op" id="6869852">(</span><span class="op" id="6869853">[</span><span class="op" id="6869854">]</span><span class="keyword" id="6869855">interface</span><span class="op" id="6869864">{</span><span class="op" id="6869865">}</span><span class="op" id="6869866">,</span>&nbsp;<span class="num" id="6869868">100</span><span class="op" id="6869871">)</span>&nbsp;<span class="comment" id="6869873">//&nbsp;Size&nbsp;needs&nbsp;to&nbsp;be&nbsp;bigger&nbsp;than&nbsp;size&nbsp;of&nbsp;type&nbsp;definition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869931">for</span>&nbsp;<span class="ident" id="6869935">i</span>&nbsp;<span class="op" id="6869937">:=</span>&nbsp;<span class="keyword" id="6869940">range</span>&nbsp;<span class="ident" id="6869946"><a href="/encoding/gob/encoder_test.go.html#6869841">src</a></span>&nbsp;<span class="op" id="6869950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869954"><a href="/encoding/gob/encoder_test.go.html#6869841">src</a></span><span class="op" id="6869957">[</span><span class="ident" id="6869958"><a href="/encoding/gob/encoder_test.go.html#6869935">i</a></span><span class="op" id="6869959">]</span>&nbsp;<span class="op" id="6869961">=</span>&nbsp;<span class="ident" id="6869963"><a href="/encoding/gob/encoder_test.go.html#6869771">Z</a></span><span class="op" id="6869964">{</span><span class="op" id="6869965">}</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869971">buf</span>&nbsp;<span class="op" id="6869975">:=</span>&nbsp;<span class="builtinfunc" id="6869978">new</span><span class="op" id="6869981">(</span><span class="ident" id="6869982"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6869987">.</span><span class="ident" id="6869988">Buffer</span><span class="op" id="6869994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869997">err</span>&nbsp;<span class="op" id="6870001">:=</span>&nbsp;<span class="ident" id="6870004"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6870014">(</span><span class="ident" id="6870015"><a href="/encoding/gob/encoder_test.go.html#6869971">buf</a></span><span class="op" id="6870018">)</span><span class="op" id="6870019">.</span><span class="ident" id="6870020">Encode</span><span class="op" id="6870026">(</span><span class="ident" id="6870027"><a href="/encoding/gob/encoder_test.go.html#6869841">src</a></span><span class="op" id="6870030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870033">if</span>&nbsp;<span class="ident" id="6870036"><a href="/encoding/gob/encoder_test.go.html#6869997">err</a></span>&nbsp;<span class="op" id="6870040">!=</span>&nbsp;<span class="ident" id="6870043">nil</span>&nbsp;<span class="op" id="6870047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870051"><a href="/encoding/gob/encoder_test.go.html#6869809">t</a></span><span class="op" id="6870052">.</span><span class="ident" id="6870053">Fatalf</span><span class="op" id="6870059">(</span><span class="string" id="6870060">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="6870072">,</span>&nbsp;<span class="ident" id="6870074"><a href="/encoding/gob/encoder_test.go.html#6869997">err</a></span><span class="op" id="6870077">)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870081">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870093">var</span>&nbsp;<span class="ident" id="6870097">dst</span>&nbsp;<span class="op" id="6870101">[</span><span class="op" id="6870102">]</span><span class="keyword" id="6870103">interface</span><span class="op" id="6870112">{</span><span class="op" id="6870113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870116"><a href="/encoding/gob/encoder_test.go.html#6869997">err</a></span>&nbsp;<span class="op" id="6870120">=</span>&nbsp;<span class="ident" id="6870122"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6870132">(</span><span class="ident" id="6870133"><a href="/encoding/gob/encoder_test.go.html#6869971">buf</a></span><span class="op" id="6870136">)</span><span class="op" id="6870137">.</span><span class="ident" id="6870138">Decode</span><span class="op" id="6870144">(</span><span class="op" id="6870145">&amp;</span><span class="ident" id="6870146"><a href="/encoding/gob/encoder_test.go.html#6870097">dst</a></span><span class="op" id="6870149">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870152">if</span>&nbsp;<span class="ident" id="6870155"><a href="/encoding/gob/encoder_test.go.html#6869997">err</a></span>&nbsp;<span class="op" id="6870159">!=</span>&nbsp;<span class="ident" id="6870162">nil</span>&nbsp;<span class="op" id="6870166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870170"><a href="/encoding/gob/encoder_test.go.html#6869809">t</a></span><span class="op" id="6870171">.</span><span class="ident" id="6870172">Errorf</span><span class="op" id="6870178">(</span><span class="string" id="6870179">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6870191">,</span>&nbsp;<span class="ident" id="6870193"><a href="/encoding/gob/encoder_test.go.html#6869997">err</a></span><span class="op" id="6870196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870200">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870208">}</span><br>
<span class="lineno"></span><span class="op" id="6870210">}</span><br>
<span class="lineno">935</span><br>
<span class="lineno"></span><span class="comment" id="6870213">//&nbsp;Don&#39;t&nbsp;crash,&nbsp;just&nbsp;give&nbsp;error&nbsp;when&nbsp;allocating&nbsp;a&nbsp;huge&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6870275">//&nbsp;Issue&nbsp;8084.</span><br>
<span class="lineno"></span><span class="keyword" id="6870290">func</span>&nbsp;<span class="ident" id="6870295">TestErrorForHugeSlice</span><span class="op" id="6870316">(</span><span class="ident" id="6870317">t</span>&nbsp;<span class="op" id="6870319">*</span><span class="ident" id="6870320"><a href="/encoding/gob/encoder_test.go.html#6848875">testing</a></span><span class="op" id="6870327">.</span><span class="ident" id="6870328">T</span><span class="op" id="6870329">)</span>&nbsp;<span class="op" id="6870331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870334">//&nbsp;Encode&nbsp;an&nbsp;int&nbsp;slice.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870359">buf</span>&nbsp;<span class="op" id="6870363">:=</span>&nbsp;<span class="builtinfunc" id="6870366">new</span><span class="op" id="6870369">(</span><span class="ident" id="6870370"><a href="/encoding/gob/encoder_test.go.html#6848831">bytes</a></span><span class="op" id="6870375">.</span><span class="ident" id="6870376">Buffer</span><span class="op" id="6870382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870385">slice</span>&nbsp;<span class="op" id="6870391">:=</span>&nbsp;<span class="op" id="6870394">[</span><span class="op" id="6870395">]</span><span class="builtintype" id="6870396">int</span><span class="op" id="6870399">{</span><span class="num" id="6870400">1</span><span class="op" id="6870401">,</span>&nbsp;<span class="num" id="6870403">1</span><span class="op" id="6870404">,</span>&nbsp;<span class="num" id="6870406">1</span><span class="op" id="6870407">,</span>&nbsp;<span class="num" id="6870409">1</span><span class="op" id="6870410">,</span>&nbsp;<span class="num" id="6870412">1</span><span class="op" id="6870413">,</span>&nbsp;<span class="num" id="6870415">1</span><span class="op" id="6870416">,</span>&nbsp;<span class="num" id="6870418">1</span><span class="op" id="6870419">,</span>&nbsp;<span class="num" id="6870421">1</span><span class="op" id="6870422">,</span>&nbsp;<span class="num" id="6870424">1</span><span class="op" id="6870425">,</span>&nbsp;<span class="num" id="6870427">1</span><span class="op" id="6870428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870431">err</span>&nbsp;<span class="op" id="6870435">:=</span>&nbsp;<span class="ident" id="6870438"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6870448">(</span><span class="ident" id="6870449"><a href="/encoding/gob/encoder_test.go.html#6870359">buf</a></span><span class="op" id="6870452">)</span><span class="op" id="6870453">.</span><span class="ident" id="6870454">Encode</span><span class="op" id="6870460">(</span><span class="ident" id="6870461"><a href="/encoding/gob/encoder_test.go.html#6870385">slice</a></span><span class="op" id="6870466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870469">if</span>&nbsp;<span class="ident" id="6870472"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span>&nbsp;<span class="op" id="6870476">!=</span>&nbsp;<span class="ident" id="6870479">nil</span>&nbsp;<span class="op" id="6870483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870487"><a href="/encoding/gob/encoder_test.go.html#6870317">t</a></span><span class="op" id="6870488">.</span><span class="ident" id="6870489">Fatal</span><span class="op" id="6870494">(</span><span class="string" id="6870495">&#34;encode:&#34;</span><span class="op" id="6870504">,</span>&nbsp;<span class="ident" id="6870506"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span><span class="op" id="6870509">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870515">//&nbsp;Reach&nbsp;into&nbsp;the&nbsp;buffer&nbsp;and&nbsp;smash&nbsp;the&nbsp;count&nbsp;to&nbsp;make&nbsp;the&nbsp;encoded&nbsp;slice&nbsp;very&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870598"><a href="/encoding/gob/encoder_test.go.html#6870359">buf</a></span><span class="op" id="6870601">.</span><span class="ident" id="6870602">Bytes</span><span class="op" id="6870607">(</span><span class="op" id="6870608">)</span><span class="op" id="6870609">[</span><span class="ident" id="6870610"><a href="/encoding/gob/encoder_test.go.html#6870359">buf</a></span><span class="op" id="6870613">.</span><span class="ident" id="6870614">Len</span><span class="op" id="6870617">(</span><span class="op" id="6870618">)</span><span class="op" id="6870619">-</span><span class="builtinfunc" id="6870620">len</span><span class="op" id="6870623">(</span><span class="ident" id="6870624"><a href="/encoding/gob/encoder_test.go.html#6870385">slice</a></span><span class="op" id="6870629">)</span><span class="op" id="6870630">-</span><span class="num" id="6870631">1</span><span class="op" id="6870632">]</span>&nbsp;<span class="op" id="6870634">=</span>&nbsp;<span class="num" id="6870636">0xfa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870642">//&nbsp;Decode&nbsp;and&nbsp;see&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870668"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span>&nbsp;<span class="op" id="6870672">=</span>&nbsp;<span class="ident" id="6870674"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6870684">(</span><span class="ident" id="6870685"><a href="/encoding/gob/encoder_test.go.html#6870359">buf</a></span><span class="op" id="6870688">)</span><span class="op" id="6870689">.</span><span class="ident" id="6870690">Decode</span><span class="op" id="6870696">(</span><span class="op" id="6870697">&amp;</span><span class="ident" id="6870698"><a href="/encoding/gob/encoder_test.go.html#6870385">slice</a></span><span class="op" id="6870703">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870706">if</span>&nbsp;<span class="ident" id="6870709"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span>&nbsp;<span class="op" id="6870713">==</span>&nbsp;<span class="ident" id="6870716">nil</span>&nbsp;<span class="op" id="6870720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870724"><a href="/encoding/gob/encoder_test.go.html#6870317">t</a></span><span class="op" id="6870725">.</span><span class="ident" id="6870726">Fatal</span><span class="op" id="6870731">(</span><span class="string" id="6870732">&#34;decode:&nbsp;no&nbsp;error&#34;</span><span class="op" id="6870750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870756">if</span>&nbsp;<span class="op" id="6870759">!</span><span class="ident" id="6870760"><a href="/encoding/gob/encoder_test.go.html#6848864">strings</a></span><span class="op" id="6870767">.</span><span class="ident" id="6870768">Contains</span><span class="op" id="6870776">(</span><span class="ident" id="6870777"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span><span class="op" id="6870780">.</span><span class="ident" id="6870781">Error</span><span class="op" id="6870786">(</span><span class="op" id="6870787">)</span><span class="op" id="6870788">,</span>&nbsp;<span class="string" id="6870790">&#34;slice&nbsp;too&nbsp;big&#34;</span><span class="op" id="6870805">)</span>&nbsp;<span class="op" id="6870807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870811"><a href="/encoding/gob/encoder_test.go.html#6870317">t</a></span><span class="op" id="6870812">.</span><span class="ident" id="6870813">Fatal</span><span class="op" id="6870818">(</span><span class="string" id="6870819">&#34;decode:&nbsp;expected&nbsp;slice&nbsp;too&nbsp;big&nbsp;error,&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6870865">,</span>&nbsp;<span class="ident" id="6870867"><a href="/encoding/gob/encoder_test.go.html#6870431">err</a></span><span class="op" id="6870870">.</span><span class="ident" id="6870871">Error</span><span class="op" id="6870876">(</span><span class="op" id="6870877">)</span><span class="op" id="6870878">)</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870881">}</span><br>
<span class="lineno"></span><span class="op" id="6870883">}</span>
</div>
</body>
</html>
