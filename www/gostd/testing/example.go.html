<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6196955">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6197010">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6197064">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6197115">package</span>&nbsp;<span class="ident" id="6197123">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6197132">import</span>&nbsp;<span class="op" id="6197139">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197142">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197151">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197158">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197164">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197170">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6197181">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6197188">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6197191">type</span>&nbsp;<span class="ident" id="6197196">InternalExample</span>&nbsp;<span class="keyword" id="6197212">struct</span>&nbsp;<span class="op" id="6197219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197222">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6197229">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197237">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197244">func</span><span class="op" id="6197248">(</span><span class="op" id="6197249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197252">Output</span>&nbsp;<span class="builtintype" id="6197259">string</span><br>
<span class="lineno">20</span><span class="op" id="6197266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6197269">func</span>&nbsp;<span class="ident" id="6197274">RunExamples</span><span class="op" id="6197285">(</span><span class="ident" id="6197286">matchString</span>&nbsp;<span class="keyword" id="6197298">func</span><span class="op" id="6197302">(</span><span class="ident" id="6197303">pat</span><span class="op" id="6197306">,</span>&nbsp;<span class="ident" id="6197308">str</span>&nbsp;<span class="builtintype" id="6197312">string</span><span class="op" id="6197318">)</span>&nbsp;<span class="op" id="6197320">(</span><span class="builtintype" id="6197321">bool</span><span class="op" id="6197325">,</span>&nbsp;<span class="builtintype" id="6197327">error</span><span class="op" id="6197332">)</span><span class="op" id="6197333">,</span>&nbsp;<span class="ident" id="6197335">examples</span>&nbsp;<span class="op" id="6197344">[</span><span class="op" id="6197345">]</span><span class="ident" id="6197346">InternalExample</span><span class="op" id="6197361">)</span>&nbsp;<span class="op" id="6197363">(</span><span class="ident" id="6197364">ok</span>&nbsp;<span class="builtintype" id="6197367">bool</span><span class="op" id="6197371">)</span>&nbsp;<span class="op" id="6197373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197376">ok</span>&nbsp;<span class="op" id="6197379">=</span>&nbsp;<span class="builtintype" id="6197381">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197388">var</span>&nbsp;<span class="ident" id="6197392">eg</span>&nbsp;<span class="ident" id="6197395">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197413">for</span>&nbsp;<span class="ident" id="6197417">_</span><span class="op" id="6197418">,</span>&nbsp;<span class="ident" id="6197420">eg</span>&nbsp;<span class="op" id="6197423">=</span>&nbsp;<span class="keyword" id="6197425">range</span>&nbsp;<span class="ident" id="6197431">examples</span>&nbsp;<span class="op" id="6197440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197444">matched</span><span class="op" id="6197451">,</span>&nbsp;<span class="ident" id="6197453">err</span>&nbsp;<span class="op" id="6197457">:=</span>&nbsp;<span class="ident" id="6197460">matchString</span><span class="op" id="6197471">(</span><span class="op" id="6197472">*</span><span class="ident" id="6197473">match</span><span class="op" id="6197478">,</span>&nbsp;<span class="ident" id="6197480">eg</span><span class="op" id="6197482">.</span><span class="ident" id="6197483">Name</span><span class="op" id="6197487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197491">if</span>&nbsp;<span class="ident" id="6197494">err</span>&nbsp;<span class="op" id="6197498">!=</span>&nbsp;<span class="ident" id="6197501">nil</span>&nbsp;<span class="op" id="6197505">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197510">fmt</span><span class="op" id="6197513">.</span><span class="ident" id="6197514">Fprintf</span><span class="op" id="6197521">(</span><span class="ident" id="6197522">os</span><span class="op" id="6197524">.</span><span class="ident" id="6197525">Stderr</span><span class="op" id="6197531">,</span>&nbsp;<span class="string" id="6197533">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6197578">,</span>&nbsp;<span class="ident" id="6197580">err</span><span class="op" id="6197583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197588">os</span><span class="op" id="6197590">.</span><span class="ident" id="6197591">Exit</span><span class="op" id="6197595">(</span><span class="num" id="6197596">1</span><span class="op" id="6197597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197605">if</span>&nbsp;<span class="op" id="6197608">!</span><span class="ident" id="6197609">matched</span>&nbsp;<span class="op" id="6197617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197622">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197637">if</span>&nbsp;<span class="op" id="6197640">!</span><span class="ident" id="6197641">runExample</span><span class="op" id="6197651">(</span><span class="ident" id="6197652">eg</span><span class="op" id="6197654">)</span>&nbsp;<span class="op" id="6197656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197661">ok</span>&nbsp;<span class="op" id="6197664">=</span>&nbsp;<span class="builtintype" id="6197666">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197677">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197681">return</span><br>
<span class="lineno"></span><span class="op" id="6197688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6197691">func</span>&nbsp;<span class="ident" id="6197696">runExample</span><span class="op" id="6197706">(</span><span class="ident" id="6197707">eg</span>&nbsp;<span class="ident" id="6197710">InternalExample</span><span class="op" id="6197725">)</span>&nbsp;<span class="op" id="6197727">(</span><span class="ident" id="6197728">ok</span>&nbsp;<span class="builtintype" id="6197731">bool</span><span class="op" id="6197735">)</span>&nbsp;<span class="op" id="6197737">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197740">if</span>&nbsp;<span class="op" id="6197743">*</span><span class="ident" id="6197744">chatty</span>&nbsp;<span class="op" id="6197751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197755">fmt</span><span class="op" id="6197758">.</span><span class="ident" id="6197759">Printf</span><span class="op" id="6197765">(</span><span class="string" id="6197766">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6197781">,</span>&nbsp;<span class="ident" id="6197783">eg</span><span class="op" id="6197785">.</span><span class="ident" id="6197786">Name</span><span class="op" id="6197790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197797">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197817">stdout</span>&nbsp;<span class="op" id="6197824">:=</span>&nbsp;<span class="ident" id="6197827">os</span><span class="op" id="6197829">.</span><span class="ident" id="6197830">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197838">r</span><span class="op" id="6197839">,</span>&nbsp;<span class="ident" id="6197841">w</span><span class="op" id="6197842">,</span>&nbsp;<span class="ident" id="6197844">err</span>&nbsp;<span class="op" id="6197848">:=</span>&nbsp;<span class="ident" id="6197851">os</span><span class="op" id="6197853">.</span><span class="ident" id="6197854">Pipe</span><span class="op" id="6197858">(</span><span class="op" id="6197859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197862">if</span>&nbsp;<span class="ident" id="6197865">err</span>&nbsp;<span class="op" id="6197869">!=</span>&nbsp;<span class="ident" id="6197872">nil</span>&nbsp;<span class="op" id="6197876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197880">fmt</span><span class="op" id="6197883">.</span><span class="ident" id="6197884">Fprintln</span><span class="op" id="6197892">(</span><span class="ident" id="6197893">os</span><span class="op" id="6197895">.</span><span class="ident" id="6197896">Stderr</span><span class="op" id="6197902">,</span>&nbsp;<span class="ident" id="6197904">err</span><span class="op" id="6197907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197911">os</span><span class="op" id="6197913">.</span><span class="ident" id="6197914">Exit</span><span class="op" id="6197918">(</span><span class="num" id="6197919">1</span><span class="op" id="6197920">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197926">os</span><span class="op" id="6197928">.</span><span class="ident" id="6197929">Stdout</span>&nbsp;<span class="op" id="6197936">=</span>&nbsp;<span class="ident" id="6197938">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197941">outC</span>&nbsp;<span class="op" id="6197946">:=</span>&nbsp;<span class="builtinfunc" id="6197949">make</span><span class="op" id="6197953">(</span><span class="keyword" id="6197954">chan</span>&nbsp;<span class="builtintype" id="6197959">string</span><span class="op" id="6197965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197968">go</span>&nbsp;<span class="keyword" id="6197971">func</span><span class="op" id="6197975">(</span><span class="op" id="6197976">)</span>&nbsp;<span class="op" id="6197978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197982">buf</span>&nbsp;<span class="op" id="6197986">:=</span>&nbsp;<span class="builtinfunc" id="6197989">new</span><span class="op" id="6197992">(</span><span class="ident" id="6197993">bytes</span><span class="op" id="6197998">.</span><span class="ident" id="6197999">Buffer</span><span class="op" id="6198005">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198009">_</span><span class="op" id="6198010">,</span>&nbsp;<span class="ident" id="6198012">err</span>&nbsp;<span class="op" id="6198016">:=</span>&nbsp;<span class="ident" id="6198019">io</span><span class="op" id="6198021">.</span><span class="ident" id="6198022">Copy</span><span class="op" id="6198026">(</span><span class="ident" id="6198027">buf</span><span class="op" id="6198030">,</span>&nbsp;<span class="ident" id="6198032">r</span><span class="op" id="6198033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198037">r</span><span class="op" id="6198038">.</span><span class="ident" id="6198039">Close</span><span class="op" id="6198044">(</span><span class="op" id="6198045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198049">if</span>&nbsp;<span class="ident" id="6198052">err</span>&nbsp;<span class="op" id="6198056">!=</span>&nbsp;<span class="ident" id="6198059">nil</span>&nbsp;<span class="op" id="6198063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198068">fmt</span><span class="op" id="6198071">.</span><span class="ident" id="6198072">Fprintf</span><span class="op" id="6198079">(</span><span class="ident" id="6198080">os</span><span class="op" id="6198082">.</span><span class="ident" id="6198083">Stderr</span><span class="op" id="6198089">,</span>&nbsp;<span class="string" id="6198091">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6198120">,</span>&nbsp;<span class="ident" id="6198122">err</span><span class="op" id="6198125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198130">os</span><span class="op" id="6198132">.</span><span class="ident" id="6198133">Exit</span><span class="op" id="6198137">(</span><span class="num" id="6198138">1</span><span class="op" id="6198139">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198147">outC</span>&nbsp;<span class="op" id="6198152">&lt;-</span>&nbsp;<span class="ident" id="6198155">buf</span><span class="op" id="6198158">.</span><span class="ident" id="6198159">String</span><span class="op" id="6198165">(</span><span class="op" id="6198166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198169">}</span><span class="op" id="6198170">(</span><span class="op" id="6198171">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198175">start</span>&nbsp;<span class="op" id="6198181">:=</span>&nbsp;<span class="ident" id="6198184">time</span><span class="op" id="6198188">.</span><span class="ident" id="6198189">Now</span><span class="op" id="6198192">(</span><span class="op" id="6198193">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198196">ok</span>&nbsp;<span class="op" id="6198199">=</span>&nbsp;<span class="builtintype" id="6198201">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198208">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198281">defer</span>&nbsp;<span class="keyword" id="6198287">func</span><span class="op" id="6198291">(</span><span class="op" id="6198292">)</span>&nbsp;<span class="op" id="6198294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198298">dstr</span>&nbsp;<span class="op" id="6198303">:=</span>&nbsp;<span class="ident" id="6198306">fmtDuration</span><span class="op" id="6198317">(</span><span class="ident" id="6198318">time</span><span class="op" id="6198322">.</span><span class="ident" id="6198323">Now</span><span class="op" id="6198326">(</span><span class="op" id="6198327">)</span><span class="op" id="6198328">.</span><span class="ident" id="6198329">Sub</span><span class="op" id="6198332">(</span><span class="ident" id="6198333">start</span><span class="op" id="6198338">)</span><span class="op" id="6198339">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198344">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198389">w</span><span class="op" id="6198390">.</span><span class="ident" id="6198391">Close</span><span class="op" id="6198396">(</span><span class="op" id="6198397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198401">os</span><span class="op" id="6198403">.</span><span class="ident" id="6198404">Stdout</span>&nbsp;<span class="op" id="6198411">=</span>&nbsp;<span class="ident" id="6198413">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198422">out</span>&nbsp;<span class="op" id="6198426">:=</span>&nbsp;<span class="op" id="6198429">&lt;-</span><span class="ident" id="6198431">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198439">var</span>&nbsp;<span class="ident" id="6198443">fail</span>&nbsp;<span class="builtintype" id="6198448">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198457">err</span>&nbsp;<span class="op" id="6198461">:=</span>&nbsp;<span class="builtinfunc" id="6198464">recover</span><span class="op" id="6198471">(</span><span class="op" id="6198472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198476">if</span>&nbsp;<span class="ident" id="6198479">g</span><span class="op" id="6198480">,</span>&nbsp;<span class="ident" id="6198482">e</span>&nbsp;<span class="op" id="6198484">:=</span>&nbsp;<span class="ident" id="6198487">strings</span><span class="op" id="6198494">.</span><span class="ident" id="6198495">TrimSpace</span><span class="op" id="6198504">(</span><span class="ident" id="6198505">out</span><span class="op" id="6198508">)</span><span class="op" id="6198509">,</span>&nbsp;<span class="ident" id="6198511">strings</span><span class="op" id="6198518">.</span><span class="ident" id="6198519">TrimSpace</span><span class="op" id="6198528">(</span><span class="ident" id="6198529">eg</span><span class="op" id="6198531">.</span><span class="ident" id="6198532">Output</span><span class="op" id="6198538">)</span><span class="op" id="6198539">;</span>&nbsp;<span class="ident" id="6198541">g</span>&nbsp;<span class="op" id="6198543">!=</span>&nbsp;<span class="ident" id="6198546">e</span>&nbsp;<span class="op" id="6198548">&amp;&amp;</span>&nbsp;<span class="ident" id="6198551">err</span>&nbsp;<span class="op" id="6198555">==</span>&nbsp;<span class="ident" id="6198558">nil</span>&nbsp;<span class="op" id="6198562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198567">fail</span>&nbsp;<span class="op" id="6198572">=</span>&nbsp;<span class="ident" id="6198574">fmt</span><span class="op" id="6198577">.</span><span class="ident" id="6198578">Sprintf</span><span class="op" id="6198585">(</span><span class="string" id="6198586">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6198609">,</span>&nbsp;<span class="ident" id="6198611">g</span><span class="op" id="6198612">,</span>&nbsp;<span class="ident" id="6198614">e</span><span class="op" id="6198615">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198623">if</span>&nbsp;<span class="ident" id="6198626">fail</span>&nbsp;<span class="op" id="6198631">!=</span>&nbsp;<span class="string" id="6198634">&#34;&#34;</span>&nbsp;<span class="op" id="6198637">||</span>&nbsp;<span class="ident" id="6198640">err</span>&nbsp;<span class="op" id="6198644">!=</span>&nbsp;<span class="ident" id="6198647">nil</span>&nbsp;<span class="op" id="6198651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198656">fmt</span><span class="op" id="6198659">.</span><span class="ident" id="6198660">Printf</span><span class="op" id="6198666">(</span><span class="string" id="6198667">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6198690">,</span>&nbsp;<span class="ident" id="6198692">eg</span><span class="op" id="6198694">.</span><span class="ident" id="6198695">Name</span><span class="op" id="6198699">,</span>&nbsp;<span class="ident" id="6198701">dstr</span><span class="op" id="6198705">,</span>&nbsp;<span class="ident" id="6198707">fail</span><span class="op" id="6198711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198716">ok</span>&nbsp;<span class="op" id="6198719">=</span>&nbsp;<span class="builtintype" id="6198721">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198729">}</span>&nbsp;<span class="keyword" id="6198731">else</span>&nbsp;<span class="keyword" id="6198736">if</span>&nbsp;<span class="op" id="6198739">*</span><span class="ident" id="6198740">chatty</span>&nbsp;<span class="op" id="6198747">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198752">fmt</span><span class="op" id="6198755">.</span><span class="ident" id="6198756">Printf</span><span class="op" id="6198762">(</span><span class="string" id="6198763">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6198784">,</span>&nbsp;<span class="ident" id="6198786">eg</span><span class="op" id="6198788">.</span><span class="ident" id="6198789">Name</span><span class="op" id="6198793">,</span>&nbsp;<span class="ident" id="6198795">dstr</span><span class="op" id="6198799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198807">if</span>&nbsp;<span class="ident" id="6198810">err</span>&nbsp;<span class="op" id="6198814">!=</span>&nbsp;<span class="ident" id="6198817">nil</span>&nbsp;<span class="op" id="6198821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6198826">panic</span><span class="op" id="6198831">(</span><span class="ident" id="6198832">err</span><span class="op" id="6198835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198839">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198842">}</span><span class="op" id="6198843">(</span><span class="op" id="6198844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198848">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198865">eg</span><span class="op" id="6198867">.</span><span class="ident" id="6198868">F</span><span class="op" id="6198869">(</span><span class="op" id="6198870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198873">return</span><br>
<span class="lineno">100</span><span class="op" id="6198880">}</span>
</div>
</body>
</html>
