<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6485028">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6485083">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6485137">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6485188">package</span>&nbsp;<span class="ident" id="6485196">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6485201">import</span>&nbsp;<span class="op" id="6485208">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485211">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485220">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485239">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485255">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485261">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485274">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485280">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485297">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485307">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485318">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6485329">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6485336">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6485339">type</span>&nbsp;<span class="ident" id="6485344">ZipTest</span>&nbsp;<span class="keyword" id="6485352">struct</span>&nbsp;<span class="op" id="6485359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485362">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6485370">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485378">Source</span>&nbsp;&nbsp;<span class="keyword" id="6485386">func</span><span class="op" id="6485390">(</span><span class="op" id="6485391">)</span>&nbsp;<span class="op" id="6485393">(</span><span class="ident" id="6485394">r</span>&nbsp;<span class="ident" id="6485396">io</span><span class="op" id="6485398">.</span><span class="ident" id="6485399">ReaderAt</span><span class="op" id="6485407">,</span>&nbsp;<span class="ident" id="6485409">size</span>&nbsp;<span class="ident" id="6485414">int64</span><span class="op" id="6485419">)</span>&nbsp;<span class="comment" id="6485421">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485474">Comment</span>&nbsp;<span class="builtintype" id="6485482">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485490">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6485498">[</span><span class="op" id="6485499">]</span><span class="ident" id="6485500">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485513">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6485521">error</span>&nbsp;<span class="comment" id="6485527">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="6485577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6485580">type</span>&nbsp;<span class="ident" id="6485585">ZipTestFile</span>&nbsp;<span class="keyword" id="6485597">struct</span>&nbsp;<span class="op" id="6485604">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485607">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6485618">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485626">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6485637">[</span><span class="op" id="6485638">]</span><span class="builtintype" id="6485639">byte</span>&nbsp;<span class="comment" id="6485644">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485695">ContentErr</span>&nbsp;<span class="builtintype" id="6485706">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485713">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6485724">string</span>&nbsp;<span class="comment" id="6485731">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485786">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6485797">string</span>&nbsp;<span class="comment" id="6485804">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6485852">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6485863">os</span><span class="op" id="6485865">.</span><span class="ident" id="6485866">FileMode</span><br>
<span class="lineno"></span><span class="op" id="6485875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6485878">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6485953">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="6486028">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="6486102">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="6486176">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="6486252">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="6486326">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="6486406">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="6486485">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6486533">var</span>&nbsp;<span class="ident" id="6486537">tests</span>&nbsp;<span class="op" id="6486543">=</span>&nbsp;<span class="op" id="6486545">[</span><span class="op" id="6486546">]</span><span class="ident" id="6486547">ZipTest</span><span class="op" id="6486554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486557">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486561">Name</span><span class="op" id="6486565">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6486570">&#34;test.zip&#34;</span><span class="op" id="6486580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486584">Comment</span><span class="op" id="6486591">:</span>&nbsp;<span class="string" id="6486593">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6486621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486625">File</span><span class="op" id="6486629">:</span>&nbsp;<span class="op" id="6486631">[</span><span class="op" id="6486632">]</span><span class="ident" id="6486633">ZipTestFile</span><span class="op" id="6486644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486655">Name</span><span class="op" id="6486659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6486664">&#34;test.txt&#34;</span><span class="op" id="6486674">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486680">Content</span><span class="op" id="6486687">:</span>&nbsp;<span class="op" id="6486689">[</span><span class="op" id="6486690">]</span><span class="builtintype" id="6486691">byte</span><span class="op" id="6486695">(</span><span class="string" id="6486696">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6486725">)</span><span class="op" id="6486726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486732">Mtime</span><span class="op" id="6486737">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6486741">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6486760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486766">Mode</span><span class="op" id="6486770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6486775">0644</span><span class="op" id="6486779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486784">}</span><span class="op" id="6486785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486790">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486796">Name</span><span class="op" id="6486800">:</span>&nbsp;&nbsp;<span class="string" id="6486803">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6486825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486831">File</span><span class="op" id="6486835">:</span>&nbsp;&nbsp;<span class="string" id="6486838">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6486860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486866">Mtime</span><span class="op" id="6486871">:</span>&nbsp;<span class="string" id="6486873">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6486892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486898">Mode</span><span class="op" id="6486902">:</span>&nbsp;&nbsp;<span class="num" id="6486905">0644</span><span class="op" id="6486909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486914">}</span><span class="op" id="6486915">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486919">}</span><span class="op" id="6486920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486923">}</span><span class="op" id="6486924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6486927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486931">Name</span><span class="op" id="6486935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6486940">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="6486964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486968">Comment</span><span class="op" id="6486975">:</span>&nbsp;<span class="string" id="6486977">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6487005">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487009">File</span><span class="op" id="6487013">:</span>&nbsp;<span class="op" id="6487015">[</span><span class="op" id="6487016">]</span><span class="ident" id="6487017">ZipTestFile</span><span class="op" id="6487028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487039">Name</span><span class="op" id="6487043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6487048">&#34;test.txt&#34;</span><span class="op" id="6487058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487064">Content</span><span class="op" id="6487071">:</span>&nbsp;<span class="op" id="6487073">[</span><span class="op" id="6487074">]</span><span class="builtintype" id="6487075">byte</span><span class="op" id="6487079">(</span><span class="string" id="6487080">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6487109">)</span><span class="op" id="6487110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487116">Mtime</span><span class="op" id="6487121">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6487125">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6487144">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487150">Mode</span><span class="op" id="6487154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6487159">0644</span><span class="op" id="6487163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487168">}</span><span class="op" id="6487169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487180">Name</span><span class="op" id="6487184">:</span>&nbsp;&nbsp;<span class="string" id="6487187">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6487209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487215">File</span><span class="op" id="6487219">:</span>&nbsp;&nbsp;<span class="string" id="6487222">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6487244">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487250">Mtime</span><span class="op" id="6487255">:</span>&nbsp;<span class="string" id="6487257">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6487276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487282">Mode</span><span class="op" id="6487286">:</span>&nbsp;&nbsp;<span class="num" id="6487289">0644</span><span class="op" id="6487293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487298">}</span><span class="op" id="6487299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487303">}</span><span class="op" id="6487304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487307">}</span><span class="op" id="6487308">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487315">Name</span><span class="op" id="6487319">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6487323">&#34;r.zip&#34;</span><span class="op" id="6487330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487334">Source</span><span class="op" id="6487340">:</span>&nbsp;<span class="ident" id="6487342">returnRecursiveZip</span><span class="op" id="6487360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487364">File</span><span class="op" id="6487368">:</span>&nbsp;<span class="op" id="6487370">[</span><span class="op" id="6487371">]</span><span class="ident" id="6487372">ZipTestFile</span><span class="op" id="6487383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487388">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487394">Name</span><span class="op" id="6487398">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6487403">&#34;r/r.zip&#34;</span><span class="op" id="6487412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487418">Content</span><span class="op" id="6487425">:</span>&nbsp;<span class="ident" id="6487427">rZipBytes</span><span class="op" id="6487436">(</span><span class="op" id="6487437">)</span><span class="op" id="6487438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487444">Mtime</span><span class="op" id="6487449">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6487453">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="6487472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487478">Mode</span><span class="op" id="6487482">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6487487">0666</span><span class="op" id="6487491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487496">}</span><span class="op" id="6487497">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487501">}</span><span class="op" id="6487502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487505">}</span><span class="op" id="6487506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487513">Name</span><span class="op" id="6487517">:</span>&nbsp;<span class="string" id="6487519">&#34;symlink.zip&#34;</span><span class="op" id="6487532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487536">File</span><span class="op" id="6487540">:</span>&nbsp;<span class="op" id="6487542">[</span><span class="op" id="6487543">]</span><span class="ident" id="6487544">ZipTestFile</span><span class="op" id="6487555">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487566">Name</span><span class="op" id="6487570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6487575">&#34;symlink&#34;</span><span class="op" id="6487584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487590">Content</span><span class="op" id="6487597">:</span>&nbsp;<span class="op" id="6487599">[</span><span class="op" id="6487600">]</span><span class="builtintype" id="6487601">byte</span><span class="op" id="6487605">(</span><span class="string" id="6487606">&#34;../target&#34;</span><span class="op" id="6487617">)</span><span class="op" id="6487618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487624">Mode</span><span class="op" id="6487628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6487633">0777</span>&nbsp;<span class="op" id="6487638">|</span>&nbsp;<span class="ident" id="6487640">os</span><span class="op" id="6487642">.</span><span class="ident" id="6487643">ModeSymlink</span><span class="op" id="6487654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487659">}</span><span class="op" id="6487660">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487664">}</span><span class="op" id="6487665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487668">}</span><span class="op" id="6487669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487676">Name</span><span class="op" id="6487680">:</span>&nbsp;<span class="string" id="6487682">&#34;readme.zip&#34;</span><span class="op" id="6487694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487697">}</span><span class="op" id="6487698">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487705">Name</span><span class="op" id="6487709">:</span>&nbsp;&nbsp;<span class="string" id="6487712">&#34;readme.notzip&#34;</span><span class="op" id="6487727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487731">Error</span><span class="op" id="6487736">:</span>&nbsp;<span class="ident" id="6487738">ErrFormat</span><span class="op" id="6487747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487750">}</span><span class="op" id="6487751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487754">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487758">Name</span><span class="op" id="6487762">:</span>&nbsp;<span class="string" id="6487764">&#34;dd.zip&#34;</span><span class="op" id="6487772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487776">File</span><span class="op" id="6487780">:</span>&nbsp;<span class="op" id="6487782">[</span><span class="op" id="6487783">]</span><span class="ident" id="6487784">ZipTestFile</span><span class="op" id="6487795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487806">Name</span><span class="op" id="6487810">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6487815">&#34;filename&#34;</span><span class="op" id="6487825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487831">Content</span><span class="op" id="6487838">:</span>&nbsp;<span class="op" id="6487840">[</span><span class="op" id="6487841">]</span><span class="builtintype" id="6487842">byte</span><span class="op" id="6487846">(</span><span class="string" id="6487847">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="6487875">)</span><span class="op" id="6487876">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487882">Mtime</span><span class="op" id="6487887">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6487891">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="6487910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487916">Mode</span><span class="op" id="6487920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6487925">0666</span><span class="op" id="6487929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487934">}</span><span class="op" id="6487935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487939">}</span><span class="op" id="6487940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487943">}</span><span class="op" id="6487944">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6487947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6487951">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6487992">Name</span><span class="op" id="6487996">:</span>&nbsp;<span class="string" id="6487998">&#34;winxp.zip&#34;</span><span class="op" id="6488009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488013">File</span><span class="op" id="6488017">:</span>&nbsp;<span class="ident" id="6488019">crossPlatform</span><span class="op" id="6488032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488035">}</span><span class="op" id="6488036">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488043">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488079">Name</span><span class="op" id="6488083">:</span>&nbsp;<span class="string" id="6488085">&#34;unix.zip&#34;</span><span class="op" id="6488095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488099">File</span><span class="op" id="6488103">:</span>&nbsp;<span class="ident" id="6488105">crossPlatform</span><span class="op" id="6488118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488121">}</span><span class="op" id="6488122">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488129">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488185">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488241">Name</span><span class="op" id="6488245">:</span>&nbsp;<span class="string" id="6488247">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="6488271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488275">File</span><span class="op" id="6488279">:</span>&nbsp;<span class="op" id="6488281">[</span><span class="op" id="6488282">]</span><span class="ident" id="6488283">ZipTestFile</span><span class="op" id="6488294">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488305">Name</span><span class="op" id="6488309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6488314">&#34;foo.txt&#34;</span><span class="op" id="6488323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488329">Content</span><span class="op" id="6488336">:</span>&nbsp;<span class="op" id="6488338">[</span><span class="op" id="6488339">]</span><span class="builtintype" id="6488340">byte</span><span class="op" id="6488344">(</span><span class="string" id="6488345">&#34;foo\n&#34;</span><span class="op" id="6488352">)</span><span class="op" id="6488353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488359">Mtime</span><span class="op" id="6488364">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6488368">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6488387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488393">Mode</span><span class="op" id="6488397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6488402">0644</span><span class="op" id="6488406">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488411">}</span><span class="op" id="6488412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488423">Name</span><span class="op" id="6488427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6488432">&#34;bar.txt&#34;</span><span class="op" id="6488441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488447">Content</span><span class="op" id="6488454">:</span>&nbsp;<span class="op" id="6488456">[</span><span class="op" id="6488457">]</span><span class="builtintype" id="6488458">byte</span><span class="op" id="6488462">(</span><span class="string" id="6488463">&#34;bar\n&#34;</span><span class="op" id="6488470">)</span><span class="op" id="6488471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488477">Mtime</span><span class="op" id="6488482">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6488486">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6488505">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488511">Mode</span><span class="op" id="6488515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6488520">0644</span><span class="op" id="6488524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488529">}</span><span class="op" id="6488530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488534">}</span><span class="op" id="6488535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488538">}</span><span class="op" id="6488539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488542">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488546">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6488601">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488657">Name</span><span class="op" id="6488661">:</span>&nbsp;<span class="string" id="6488663">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6488689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488693">File</span><span class="op" id="6488697">:</span>&nbsp;<span class="op" id="6488699">[</span><span class="op" id="6488700">]</span><span class="ident" id="6488701">ZipTestFile</span><span class="op" id="6488712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488717">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488723">Name</span><span class="op" id="6488727">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6488732">&#34;foo.txt&#34;</span><span class="op" id="6488741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488747">Content</span><span class="op" id="6488754">:</span>&nbsp;<span class="op" id="6488756">[</span><span class="op" id="6488757">]</span><span class="builtintype" id="6488758">byte</span><span class="op" id="6488762">(</span><span class="string" id="6488763">&#34;foo\n&#34;</span><span class="op" id="6488770">)</span><span class="op" id="6488771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488777">Mode</span><span class="op" id="6488781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6488786">0666</span><span class="op" id="6488790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488795">}</span><span class="op" id="6488796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488801">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488807">Name</span><span class="op" id="6488811">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6488816">&#34;bar.txt&#34;</span><span class="op" id="6488825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488831">Content</span><span class="op" id="6488838">:</span>&nbsp;<span class="op" id="6488840">[</span><span class="op" id="6488841">]</span><span class="builtintype" id="6488842">byte</span><span class="op" id="6488846">(</span><span class="string" id="6488847">&#34;bar\n&#34;</span><span class="op" id="6488854">)</span><span class="op" id="6488855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488861">Mode</span><span class="op" id="6488865">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6488870">0666</span><span class="op" id="6488874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488879">}</span><span class="op" id="6488880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488884">}</span><span class="op" id="6488885">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488888">}</span><span class="op" id="6488889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488896">Name</span><span class="op" id="6488900">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6488904">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="6488934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488938">Source</span><span class="op" id="6488944">:</span>&nbsp;<span class="ident" id="6488946">returnCorruptCRC32Zip</span><span class="op" id="6488967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6488971">File</span><span class="op" id="6488975">:</span>&nbsp;<span class="op" id="6488977">[</span><span class="op" id="6488978">]</span><span class="ident" id="6488979">ZipTestFile</span><span class="op" id="6488990">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6488995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489001">Name</span><span class="op" id="6489005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489013">&#34;foo.txt&#34;</span><span class="op" id="6489022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489028">Content</span><span class="op" id="6489035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6489040">[</span><span class="op" id="6489041">]</span><span class="builtintype" id="6489042">byte</span><span class="op" id="6489046">(</span><span class="string" id="6489047">&#34;foo\n&#34;</span><span class="op" id="6489054">)</span><span class="op" id="6489055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489061">Mode</span><span class="op" id="6489065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6489073">0666</span><span class="op" id="6489077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489083">ContentErr</span><span class="op" id="6489093">:</span>&nbsp;<span class="ident" id="6489095">ErrChecksum</span><span class="op" id="6489106">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489111">}</span><span class="op" id="6489112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489123">Name</span><span class="op" id="6489127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489132">&#34;bar.txt&#34;</span><span class="op" id="6489141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489147">Content</span><span class="op" id="6489154">:</span>&nbsp;<span class="op" id="6489156">[</span><span class="op" id="6489157">]</span><span class="builtintype" id="6489158">byte</span><span class="op" id="6489162">(</span><span class="string" id="6489163">&#34;bar\n&#34;</span><span class="op" id="6489170">)</span><span class="op" id="6489171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489177">Mode</span><span class="op" id="6489181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6489186">0666</span><span class="op" id="6489190">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489195">}</span><span class="op" id="6489196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489200">}</span><span class="op" id="6489201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489204">}</span><span class="op" id="6489205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489208">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489268">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489335">Name</span><span class="op" id="6489339">:</span>&nbsp;<span class="string" id="6489341">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6489365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489369">File</span><span class="op" id="6489373">:</span>&nbsp;<span class="op" id="6489375">[</span><span class="op" id="6489376">]</span><span class="ident" id="6489377">ZipTestFile</span><span class="op" id="6489388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489399">Name</span><span class="op" id="6489403">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489408">&#34;foo.txt&#34;</span><span class="op" id="6489417">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489423">Content</span><span class="op" id="6489430">:</span>&nbsp;<span class="op" id="6489432">[</span><span class="op" id="6489433">]</span><span class="builtintype" id="6489434">byte</span><span class="op" id="6489438">(</span><span class="string" id="6489439">&#34;foo\n&#34;</span><span class="op" id="6489446">)</span><span class="op" id="6489447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489453">Mtime</span><span class="op" id="6489458">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6489462">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6489481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489487">Mode</span><span class="op" id="6489491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6489496">0644</span><span class="op" id="6489500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489505">}</span><span class="op" id="6489506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489511">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489517">Name</span><span class="op" id="6489521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489526">&#34;bar.txt&#34;</span><span class="op" id="6489535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489541">Content</span><span class="op" id="6489548">:</span>&nbsp;<span class="op" id="6489550">[</span><span class="op" id="6489551">]</span><span class="builtintype" id="6489552">byte</span><span class="op" id="6489556">(</span><span class="string" id="6489557">&#34;bar\n&#34;</span><span class="op" id="6489564">)</span><span class="op" id="6489565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489571">Mtime</span><span class="op" id="6489576">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6489580">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6489599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489605">Mode</span><span class="op" id="6489609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6489614">0644</span><span class="op" id="6489618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489623">}</span><span class="op" id="6489624">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489628">}</span><span class="op" id="6489629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489632">}</span><span class="op" id="6489633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489636">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6489698">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489761">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489765">Name</span><span class="op" id="6489769">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6489773">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6489797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489801">Source</span><span class="op" id="6489807">:</span>&nbsp;<span class="ident" id="6489809">returnCorruptNotStreamedZip</span><span class="op" id="6489836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489840">File</span><span class="op" id="6489844">:</span>&nbsp;<span class="op" id="6489846">[</span><span class="op" id="6489847">]</span><span class="ident" id="6489848">ZipTestFile</span><span class="op" id="6489859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6489864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489870">Name</span><span class="op" id="6489874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489882">&#34;foo.txt&#34;</span><span class="op" id="6489891">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489897">Content</span><span class="op" id="6489904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6489909">[</span><span class="op" id="6489910">]</span><span class="builtintype" id="6489911">byte</span><span class="op" id="6489915">(</span><span class="string" id="6489916">&#34;foo\n&#34;</span><span class="op" id="6489923">)</span><span class="op" id="6489924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489930">Mtime</span><span class="op" id="6489935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489942">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6489961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489967">Mode</span><span class="op" id="6489971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6489979">0644</span><span class="op" id="6489983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6489989">ContentErr</span><span class="op" id="6489999">:</span>&nbsp;<span class="ident" id="6490001">ErrChecksum</span><span class="op" id="6490012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490017">}</span><span class="op" id="6490018">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490029">Name</span><span class="op" id="6490033">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490038">&#34;bar.txt&#34;</span><span class="op" id="6490047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490053">Content</span><span class="op" id="6490060">:</span>&nbsp;<span class="op" id="6490062">[</span><span class="op" id="6490063">]</span><span class="builtintype" id="6490064">byte</span><span class="op" id="6490068">(</span><span class="string" id="6490069">&#34;bar\n&#34;</span><span class="op" id="6490076">)</span><span class="op" id="6490077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490083">Mtime</span><span class="op" id="6490088">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6490092">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6490111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490117">Mode</span><span class="op" id="6490121">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490126">0644</span><span class="op" id="6490130">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490135">}</span><span class="op" id="6490136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490140">}</span><span class="op" id="6490141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490144">}</span><span class="op" id="6490145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490152">Name</span><span class="op" id="6490156">:</span>&nbsp;<span class="string" id="6490158">&#34;zip64.zip&#34;</span><span class="op" id="6490169">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490173">File</span><span class="op" id="6490177">:</span>&nbsp;<span class="op" id="6490179">[</span><span class="op" id="6490180">]</span><span class="ident" id="6490181">ZipTestFile</span><span class="op" id="6490192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490203">Name</span><span class="op" id="6490207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490212">&#34;README&#34;</span><span class="op" id="6490220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490226">Content</span><span class="op" id="6490233">:</span>&nbsp;<span class="op" id="6490235">[</span><span class="op" id="6490236">]</span><span class="builtintype" id="6490237">byte</span><span class="op" id="6490241">(</span><span class="string" id="6490242">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6490281">)</span><span class="op" id="6490282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490288">Mtime</span><span class="op" id="6490293">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6490297">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6490316">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490322">Mode</span><span class="op" id="6490326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490331">0644</span><span class="op" id="6490335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490340">}</span><span class="op" id="6490341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490345">}</span><span class="op" id="6490346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490349">}</span><span class="op" id="6490350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6490353">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490434">Name</span><span class="op" id="6490438">:</span>&nbsp;<span class="string" id="6490440">&#34;zip64-2.zip&#34;</span><span class="op" id="6490453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490457">File</span><span class="op" id="6490461">:</span>&nbsp;<span class="op" id="6490463">[</span><span class="op" id="6490464">]</span><span class="ident" id="6490465">ZipTestFile</span><span class="op" id="6490476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490487">Name</span><span class="op" id="6490491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490496">&#34;README&#34;</span><span class="op" id="6490504">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490510">Content</span><span class="op" id="6490517">:</span>&nbsp;<span class="op" id="6490519">[</span><span class="op" id="6490520">]</span><span class="builtintype" id="6490521">byte</span><span class="op" id="6490525">(</span><span class="string" id="6490526">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6490565">)</span><span class="op" id="6490566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490572">Mtime</span><span class="op" id="6490577">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6490581">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6490600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490606">Mode</span><span class="op" id="6490610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490615">0644</span><span class="op" id="6490619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490624">}</span><span class="op" id="6490625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490629">}</span><span class="op" id="6490630">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490633">}</span><span class="op" id="6490634">,</span><br>
<span class="lineno"></span><span class="op" id="6490636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6490639">var</span>&nbsp;<span class="ident" id="6490643">crossPlatform</span>&nbsp;<span class="op" id="6490657">=</span>&nbsp;<span class="op" id="6490659">[</span><span class="op" id="6490660">]</span><span class="ident" id="6490661">ZipTestFile</span><span class="op" id="6490672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490675">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490679">Name</span><span class="op" id="6490683">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490688">&#34;hello&#34;</span><span class="op" id="6490695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490699">Content</span><span class="op" id="6490706">:</span>&nbsp;<span class="op" id="6490708">[</span><span class="op" id="6490709">]</span><span class="builtintype" id="6490710">byte</span><span class="op" id="6490714">(</span><span class="string" id="6490715">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="6490727">)</span><span class="op" id="6490728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490732">Mode</span><span class="op" id="6490736">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490741">0666</span><span class="op" id="6490745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490748">}</span><span class="op" id="6490749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490752">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490756">Name</span><span class="op" id="6490760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490765">&#34;dir/bar&#34;</span><span class="op" id="6490774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490778">Content</span><span class="op" id="6490785">:</span>&nbsp;<span class="op" id="6490787">[</span><span class="op" id="6490788">]</span><span class="builtintype" id="6490789">byte</span><span class="op" id="6490793">(</span><span class="string" id="6490794">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="6490804">)</span><span class="op" id="6490805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490809">Mode</span><span class="op" id="6490813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490818">0666</span><span class="op" id="6490822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490825">}</span><span class="op" id="6490826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490829">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490833">Name</span><span class="op" id="6490837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490842">&#34;dir/empty/&#34;</span><span class="op" id="6490854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490858">Content</span><span class="op" id="6490865">:</span>&nbsp;<span class="op" id="6490867">[</span><span class="op" id="6490868">]</span><span class="builtintype" id="6490869">byte</span><span class="op" id="6490873">{</span><span class="op" id="6490874">}</span><span class="op" id="6490875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490879">Mode</span><span class="op" id="6490883">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490888">os</span><span class="op" id="6490890">.</span><span class="ident" id="6490891">ModeDir</span>&nbsp;<span class="op" id="6490899">|</span>&nbsp;<span class="num" id="6490901">0777</span><span class="op" id="6490905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490908">}</span><span class="op" id="6490909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490912">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490916">Name</span><span class="op" id="6490920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490925">&#34;readonly&#34;</span><span class="op" id="6490935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490939">Content</span><span class="op" id="6490946">:</span>&nbsp;<span class="op" id="6490948">[</span><span class="op" id="6490949">]</span><span class="builtintype" id="6490950">byte</span><span class="op" id="6490954">(</span><span class="string" id="6490955">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="6490971">)</span><span class="op" id="6490972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6490976">Mode</span><span class="op" id="6490980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490985">0444</span><span class="op" id="6490989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6490992">}</span><span class="op" id="6490993">,</span><br>
<span class="lineno"></span><span class="op" id="6490995">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="6490998">func</span>&nbsp;<span class="ident" id="6491003">TestReader</span><span class="op" id="6491013">(</span><span class="ident" id="6491014">t</span>&nbsp;<span class="op" id="6491016">*</span><span class="ident" id="6491017">testing</span><span class="op" id="6491024">.</span><span class="ident" id="6491025">T</span><span class="op" id="6491026">)</span>&nbsp;<span class="op" id="6491028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491031">for</span>&nbsp;<span class="ident" id="6491035">_</span><span class="op" id="6491036">,</span>&nbsp;<span class="ident" id="6491038">zt</span>&nbsp;<span class="op" id="6491041">:=</span>&nbsp;<span class="keyword" id="6491044">range</span>&nbsp;<span class="ident" id="6491050">tests</span>&nbsp;<span class="op" id="6491056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491060">readTestZip</span><span class="op" id="6491071">(</span><span class="ident" id="6491072">t</span><span class="op" id="6491073">,</span>&nbsp;<span class="ident" id="6491075">zt</span><span class="op" id="6491077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491080">}</span><br>
<span class="lineno">280</span><span class="op" id="6491082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6491085">func</span>&nbsp;<span class="ident" id="6491090">readTestZip</span><span class="op" id="6491101">(</span><span class="ident" id="6491102">t</span>&nbsp;<span class="op" id="6491104">*</span><span class="ident" id="6491105">testing</span><span class="op" id="6491112">.</span><span class="ident" id="6491113">T</span><span class="op" id="6491114">,</span>&nbsp;<span class="ident" id="6491116">zt</span>&nbsp;<span class="ident" id="6491119">ZipTest</span><span class="op" id="6491126">)</span>&nbsp;<span class="op" id="6491128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491131">var</span>&nbsp;<span class="ident" id="6491135">z</span>&nbsp;<span class="op" id="6491137">*</span><span class="ident" id="6491138">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491146">var</span>&nbsp;<span class="ident" id="6491150">err</span>&nbsp;<span class="builtintype" id="6491154">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491161">if</span>&nbsp;<span class="ident" id="6491164">zt</span><span class="op" id="6491166">.</span><span class="ident" id="6491167">Source</span>&nbsp;<span class="op" id="6491174">!=</span>&nbsp;<span class="ident" id="6491177">nil</span>&nbsp;<span class="op" id="6491181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491185">rat</span><span class="op" id="6491188">,</span>&nbsp;<span class="ident" id="6491190">size</span>&nbsp;<span class="op" id="6491195">:=</span>&nbsp;<span class="ident" id="6491198">zt</span><span class="op" id="6491200">.</span><span class="ident" id="6491201">Source</span><span class="op" id="6491207">(</span><span class="op" id="6491208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491212">z</span><span class="op" id="6491213">,</span>&nbsp;<span class="ident" id="6491215">err</span>&nbsp;<span class="op" id="6491219">=</span>&nbsp;<span class="ident" id="6491221">NewReader</span><span class="op" id="6491230">(</span><span class="ident" id="6491231">rat</span><span class="op" id="6491234">,</span>&nbsp;<span class="ident" id="6491236">size</span><span class="op" id="6491240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491243">}</span>&nbsp;<span class="keyword" id="6491245">else</span>&nbsp;<span class="op" id="6491250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491254">var</span>&nbsp;<span class="ident" id="6491258">rc</span>&nbsp;<span class="op" id="6491261">*</span><span class="ident" id="6491262">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491275">rc</span><span class="op" id="6491277">,</span>&nbsp;<span class="ident" id="6491279">err</span>&nbsp;<span class="op" id="6491283">=</span>&nbsp;<span class="ident" id="6491285">OpenReader</span><span class="op" id="6491295">(</span><span class="ident" id="6491296">filepath</span><span class="op" id="6491304">.</span><span class="ident" id="6491305">Join</span><span class="op" id="6491309">(</span><span class="string" id="6491310">&#34;testdata&#34;</span><span class="op" id="6491320">,</span>&nbsp;<span class="ident" id="6491322">zt</span><span class="op" id="6491324">.</span><span class="ident" id="6491325">Name</span><span class="op" id="6491329">)</span><span class="op" id="6491330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491334">if</span>&nbsp;<span class="ident" id="6491337">err</span>&nbsp;<span class="op" id="6491341">==</span>&nbsp;<span class="ident" id="6491344">nil</span>&nbsp;<span class="op" id="6491348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491353">defer</span>&nbsp;<span class="ident" id="6491359">rc</span><span class="op" id="6491361">.</span><span class="ident" id="6491362">Close</span><span class="op" id="6491367">(</span><span class="op" id="6491368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491373">z</span>&nbsp;<span class="op" id="6491375">=</span>&nbsp;<span class="op" id="6491377">&amp;</span><span class="ident" id="6491378">rc</span><span class="op" id="6491380">.</span><span class="ident" id="6491381">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491390">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491396">if</span>&nbsp;<span class="ident" id="6491399">err</span>&nbsp;<span class="op" id="6491403">!=</span>&nbsp;<span class="ident" id="6491406">zt</span><span class="op" id="6491408">.</span><span class="ident" id="6491409">Error</span>&nbsp;<span class="op" id="6491415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491419">t</span><span class="op" id="6491420">.</span><span class="ident" id="6491421">Errorf</span><span class="op" id="6491427">(</span><span class="string" id="6491428">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6491451">,</span>&nbsp;<span class="ident" id="6491453">zt</span><span class="op" id="6491455">.</span><span class="ident" id="6491456">Name</span><span class="op" id="6491460">,</span>&nbsp;<span class="ident" id="6491462">err</span><span class="op" id="6491465">,</span>&nbsp;<span class="ident" id="6491467">zt</span><span class="op" id="6491469">.</span><span class="ident" id="6491470">Error</span><span class="op" id="6491475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491487">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491491">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491519">if</span>&nbsp;<span class="ident" id="6491522">err</span>&nbsp;<span class="op" id="6491526">==</span>&nbsp;<span class="ident" id="6491529">ErrFormat</span>&nbsp;<span class="op" id="6491539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491543">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491551">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491555">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491603">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491667">if</span>&nbsp;<span class="ident" id="6491670">zt</span><span class="op" id="6491672">.</span><span class="ident" id="6491673">File</span>&nbsp;<span class="op" id="6491678">==</span>&nbsp;<span class="ident" id="6491681">nil</span>&nbsp;<span class="op" id="6491685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491689">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491701">if</span>&nbsp;<span class="ident" id="6491704">z</span><span class="op" id="6491705">.</span><span class="ident" id="6491706">Comment</span>&nbsp;<span class="op" id="6491714">!=</span>&nbsp;<span class="ident" id="6491717">zt</span><span class="op" id="6491719">.</span><span class="ident" id="6491720">Comment</span>&nbsp;<span class="op" id="6491728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491732">t</span><span class="op" id="6491733">.</span><span class="ident" id="6491734">Errorf</span><span class="op" id="6491740">(</span><span class="string" id="6491741">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6491766">,</span>&nbsp;<span class="ident" id="6491768">zt</span><span class="op" id="6491770">.</span><span class="ident" id="6491771">Name</span><span class="op" id="6491775">,</span>&nbsp;<span class="ident" id="6491777">z</span><span class="op" id="6491778">.</span><span class="ident" id="6491779">Comment</span><span class="op" id="6491786">,</span>&nbsp;<span class="ident" id="6491788">zt</span><span class="op" id="6491790">.</span><span class="ident" id="6491791">Comment</span><span class="op" id="6491798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491801">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491804">if</span>&nbsp;<span class="builtinfunc" id="6491807">len</span><span class="op" id="6491810">(</span><span class="ident" id="6491811">z</span><span class="op" id="6491812">.</span><span class="ident" id="6491813">File</span><span class="op" id="6491817">)</span>&nbsp;<span class="op" id="6491819">!=</span>&nbsp;<span class="builtinfunc" id="6491822">len</span><span class="op" id="6491825">(</span><span class="ident" id="6491826">zt</span><span class="op" id="6491828">.</span><span class="ident" id="6491829">File</span><span class="op" id="6491833">)</span>&nbsp;<span class="op" id="6491835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491839">t</span><span class="op" id="6491840">.</span><span class="ident" id="6491841">Fatalf</span><span class="op" id="6491847">(</span><span class="string" id="6491848">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6491876">,</span>&nbsp;<span class="ident" id="6491878">zt</span><span class="op" id="6491880">.</span><span class="ident" id="6491881">Name</span><span class="op" id="6491885">,</span>&nbsp;<span class="builtinfunc" id="6491887">len</span><span class="op" id="6491890">(</span><span class="ident" id="6491891">z</span><span class="op" id="6491892">.</span><span class="ident" id="6491893">File</span><span class="op" id="6491897">)</span><span class="op" id="6491898">,</span>&nbsp;<span class="builtinfunc" id="6491900">len</span><span class="op" id="6491903">(</span><span class="ident" id="6491904">zt</span><span class="op" id="6491906">.</span><span class="ident" id="6491907">File</span><span class="op" id="6491911">)</span><span class="op" id="6491912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6491915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6491919">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6491946">for</span>&nbsp;<span class="ident" id="6491950">i</span><span class="op" id="6491951">,</span>&nbsp;<span class="ident" id="6491953">ft</span>&nbsp;<span class="op" id="6491956">:=</span>&nbsp;<span class="keyword" id="6491959">range</span>&nbsp;<span class="ident" id="6491965">zt</span><span class="op" id="6491967">.</span><span class="ident" id="6491968">File</span>&nbsp;<span class="op" id="6491973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6491977">readTestFile</span><span class="op" id="6491989">(</span><span class="ident" id="6491990">t</span><span class="op" id="6491991">,</span>&nbsp;<span class="ident" id="6491993">zt</span><span class="op" id="6491995">,</span>&nbsp;<span class="ident" id="6491997">ft</span><span class="op" id="6491999">,</span>&nbsp;<span class="ident" id="6492001">z</span><span class="op" id="6492002">.</span><span class="ident" id="6492003">File</span><span class="op" id="6492007">[</span><span class="ident" id="6492008">i</span><span class="op" id="6492009">]</span><span class="op" id="6492010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6492017">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492045">n</span>&nbsp;<span class="op" id="6492047">:=</span>&nbsp;<span class="num" id="6492050">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492053">done</span>&nbsp;<span class="op" id="6492058">:=</span>&nbsp;<span class="builtinfunc" id="6492061">make</span><span class="op" id="6492065">(</span><span class="keyword" id="6492066">chan</span>&nbsp;<span class="builtintype" id="6492071">bool</span><span class="op" id="6492075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492078">for</span>&nbsp;<span class="ident" id="6492082">i</span>&nbsp;<span class="op" id="6492084">:=</span>&nbsp;<span class="num" id="6492087">0</span><span class="op" id="6492088">;</span>&nbsp;<span class="ident" id="6492090">i</span>&nbsp;<span class="op" id="6492092">&lt;</span>&nbsp;<span class="num" id="6492094">5</span><span class="op" id="6492095">;</span>&nbsp;<span class="ident" id="6492097">i</span><span class="op" id="6492098">++</span>&nbsp;<span class="op" id="6492101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492105">for</span>&nbsp;<span class="ident" id="6492109">j</span><span class="op" id="6492110">,</span>&nbsp;<span class="ident" id="6492112">ft</span>&nbsp;<span class="op" id="6492115">:=</span>&nbsp;<span class="keyword" id="6492118">range</span>&nbsp;<span class="ident" id="6492124">zt</span><span class="op" id="6492126">.</span><span class="ident" id="6492127">File</span>&nbsp;<span class="op" id="6492132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492137">go</span>&nbsp;<span class="keyword" id="6492140">func</span><span class="op" id="6492144">(</span><span class="ident" id="6492145">j</span>&nbsp;<span class="builtintype" id="6492147">int</span><span class="op" id="6492150">,</span>&nbsp;<span class="ident" id="6492152">ft</span>&nbsp;<span class="ident" id="6492155">ZipTestFile</span><span class="op" id="6492166">)</span>&nbsp;<span class="op" id="6492168">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492174">readTestFile</span><span class="op" id="6492186">(</span><span class="ident" id="6492187">t</span><span class="op" id="6492188">,</span>&nbsp;<span class="ident" id="6492190">zt</span><span class="op" id="6492192">,</span>&nbsp;<span class="ident" id="6492194">ft</span><span class="op" id="6492196">,</span>&nbsp;<span class="ident" id="6492198">z</span><span class="op" id="6492199">.</span><span class="ident" id="6492200">File</span><span class="op" id="6492204">[</span><span class="ident" id="6492205">j</span><span class="op" id="6492206">]</span><span class="op" id="6492207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492213">done</span>&nbsp;<span class="op" id="6492218">&lt;-</span>&nbsp;<span class="builtintype" id="6492221">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492229">}</span><span class="op" id="6492230">(</span><span class="ident" id="6492231">j</span><span class="op" id="6492232">,</span>&nbsp;<span class="ident" id="6492234">ft</span><span class="op" id="6492236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492241">n</span><span class="op" id="6492242">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492247">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492253">for</span>&nbsp;<span class="op" id="6492257">;</span>&nbsp;<span class="ident" id="6492259">n</span>&nbsp;<span class="op" id="6492261">&gt;</span>&nbsp;<span class="num" id="6492263">0</span><span class="op" id="6492264">;</span>&nbsp;<span class="ident" id="6492266">n</span><span class="op" id="6492267">--</span>&nbsp;<span class="op" id="6492270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492274">&lt;-</span><span class="ident" id="6492276">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492282">}</span><br>
<span class="lineno"></span><span class="op" id="6492284">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6492287">func</span>&nbsp;<span class="ident" id="6492292">readTestFile</span><span class="op" id="6492304">(</span><span class="ident" id="6492305">t</span>&nbsp;<span class="op" id="6492307">*</span><span class="ident" id="6492308">testing</span><span class="op" id="6492315">.</span><span class="ident" id="6492316">T</span><span class="op" id="6492317">,</span>&nbsp;<span class="ident" id="6492319">zt</span>&nbsp;<span class="ident" id="6492322">ZipTest</span><span class="op" id="6492329">,</span>&nbsp;<span class="ident" id="6492331">ft</span>&nbsp;<span class="ident" id="6492334">ZipTestFile</span><span class="op" id="6492345">,</span>&nbsp;<span class="ident" id="6492347">f</span>&nbsp;<span class="op" id="6492349">*</span><span class="ident" id="6492350">File</span><span class="op" id="6492354">)</span>&nbsp;<span class="op" id="6492356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492359">if</span>&nbsp;<span class="ident" id="6492362">f</span><span class="op" id="6492363">.</span><span class="ident" id="6492364">Name</span>&nbsp;<span class="op" id="6492369">!=</span>&nbsp;<span class="ident" id="6492372">ft</span><span class="op" id="6492374">.</span><span class="ident" id="6492375">Name</span>&nbsp;<span class="op" id="6492380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492384">t</span><span class="op" id="6492385">.</span><span class="ident" id="6492386">Errorf</span><span class="op" id="6492392">(</span><span class="string" id="6492393">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6492415">,</span>&nbsp;<span class="ident" id="6492417">zt</span><span class="op" id="6492419">.</span><span class="ident" id="6492420">Name</span><span class="op" id="6492424">,</span>&nbsp;<span class="ident" id="6492426">f</span><span class="op" id="6492427">.</span><span class="ident" id="6492428">Name</span><span class="op" id="6492432">,</span>&nbsp;<span class="ident" id="6492434">ft</span><span class="op" id="6492436">.</span><span class="ident" id="6492437">Name</span><span class="op" id="6492441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492444">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492448">if</span>&nbsp;<span class="ident" id="6492451">ft</span><span class="op" id="6492453">.</span><span class="ident" id="6492454">Mtime</span>&nbsp;<span class="op" id="6492460">!=</span>&nbsp;<span class="string" id="6492463">&#34;&#34;</span>&nbsp;<span class="op" id="6492466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492470">mtime</span><span class="op" id="6492475">,</span>&nbsp;<span class="ident" id="6492477">err</span>&nbsp;<span class="op" id="6492481">:=</span>&nbsp;<span class="ident" id="6492484">time</span><span class="op" id="6492488">.</span><span class="ident" id="6492489">Parse</span><span class="op" id="6492494">(</span><span class="string" id="6492495">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="6492514">,</span>&nbsp;<span class="ident" id="6492516">ft</span><span class="op" id="6492518">.</span><span class="ident" id="6492519">Mtime</span><span class="op" id="6492524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492528">if</span>&nbsp;<span class="ident" id="6492531">err</span>&nbsp;<span class="op" id="6492535">!=</span>&nbsp;<span class="ident" id="6492538">nil</span>&nbsp;<span class="op" id="6492542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492547">t</span><span class="op" id="6492548">.</span><span class="ident" id="6492549">Error</span><span class="op" id="6492554">(</span><span class="ident" id="6492555">err</span><span class="op" id="6492558">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492563">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492576">if</span>&nbsp;<span class="ident" id="6492579">ft</span>&nbsp;<span class="op" id="6492582">:=</span>&nbsp;<span class="ident" id="6492585">f</span><span class="op" id="6492586">.</span><span class="ident" id="6492587">ModTime</span><span class="op" id="6492594">(</span><span class="op" id="6492595">)</span><span class="op" id="6492596">;</span>&nbsp;<span class="op" id="6492598">!</span><span class="ident" id="6492599">ft</span><span class="op" id="6492601">.</span><span class="ident" id="6492602">Equal</span><span class="op" id="6492607">(</span><span class="ident" id="6492608">mtime</span><span class="op" id="6492613">)</span>&nbsp;<span class="op" id="6492615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492620">t</span><span class="op" id="6492621">.</span><span class="ident" id="6492622">Errorf</span><span class="op" id="6492628">(</span><span class="string" id="6492629">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6492656">,</span>&nbsp;<span class="ident" id="6492658">zt</span><span class="op" id="6492660">.</span><span class="ident" id="6492661">Name</span><span class="op" id="6492665">,</span>&nbsp;<span class="ident" id="6492667">f</span><span class="op" id="6492668">.</span><span class="ident" id="6492669">Name</span><span class="op" id="6492673">,</span>&nbsp;<span class="ident" id="6492675">ft</span><span class="op" id="6492677">,</span>&nbsp;<span class="ident" id="6492679">mtime</span><span class="op" id="6492684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492688">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492695">testFileMode</span><span class="op" id="6492707">(</span><span class="ident" id="6492708">t</span><span class="op" id="6492709">,</span>&nbsp;<span class="ident" id="6492711">zt</span><span class="op" id="6492713">.</span><span class="ident" id="6492714">Name</span><span class="op" id="6492718">,</span>&nbsp;<span class="ident" id="6492720">f</span><span class="op" id="6492721">,</span>&nbsp;<span class="ident" id="6492723">ft</span><span class="op" id="6492725">.</span><span class="ident" id="6492726">Mode</span><span class="op" id="6492730">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492734">var</span>&nbsp;<span class="ident" id="6492738">b</span>&nbsp;<span class="ident" id="6492740">bytes</span><span class="op" id="6492745">.</span><span class="ident" id="6492746">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492754">r</span><span class="op" id="6492755">,</span>&nbsp;<span class="ident" id="6492757">err</span>&nbsp;<span class="op" id="6492761">:=</span>&nbsp;<span class="ident" id="6492764">f</span><span class="op" id="6492765">.</span><span class="ident" id="6492766">Open</span><span class="op" id="6492770">(</span><span class="op" id="6492771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492774">if</span>&nbsp;<span class="ident" id="6492777">err</span>&nbsp;<span class="op" id="6492781">!=</span>&nbsp;<span class="ident" id="6492784">nil</span>&nbsp;<span class="op" id="6492788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492792">t</span><span class="op" id="6492793">.</span><span class="ident" id="6492794">Errorf</span><span class="op" id="6492800">(</span><span class="string" id="6492801">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="6492809">,</span>&nbsp;<span class="ident" id="6492811">zt</span><span class="op" id="6492813">.</span><span class="ident" id="6492814">Name</span><span class="op" id="6492818">,</span>&nbsp;<span class="ident" id="6492820">err</span><span class="op" id="6492823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492835">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492839">_</span><span class="op" id="6492840">,</span>&nbsp;<span class="ident" id="6492842">err</span>&nbsp;<span class="op" id="6492846">=</span>&nbsp;<span class="ident" id="6492848">io</span><span class="op" id="6492850">.</span><span class="ident" id="6492851">Copy</span><span class="op" id="6492855">(</span><span class="op" id="6492856">&amp;</span><span class="ident" id="6492857">b</span><span class="op" id="6492858">,</span>&nbsp;<span class="ident" id="6492860">r</span><span class="op" id="6492861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492864">if</span>&nbsp;<span class="ident" id="6492867">err</span>&nbsp;<span class="op" id="6492871">!=</span>&nbsp;<span class="ident" id="6492874">ft</span><span class="op" id="6492876">.</span><span class="ident" id="6492877">ContentErr</span>&nbsp;<span class="op" id="6492888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6492892">t</span><span class="op" id="6492893">.</span><span class="ident" id="6492894">Errorf</span><span class="op" id="6492900">(</span><span class="string" id="6492901">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="6492937">,</span>&nbsp;<span class="ident" id="6492939">zt</span><span class="op" id="6492941">.</span><span class="ident" id="6492942">Name</span><span class="op" id="6492946">,</span>&nbsp;<span class="ident" id="6492948">err</span><span class="op" id="6492951">,</span>&nbsp;<span class="ident" id="6492953">ft</span><span class="op" id="6492955">.</span><span class="ident" id="6492956">ContentErr</span><span class="op" id="6492966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492969">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492972">if</span>&nbsp;<span class="ident" id="6492975">err</span>&nbsp;<span class="op" id="6492979">!=</span>&nbsp;<span class="ident" id="6492982">nil</span>&nbsp;<span class="op" id="6492986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6492990">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6492998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493001">r</span><span class="op" id="6493002">.</span><span class="ident" id="6493003">Close</span><span class="op" id="6493008">(</span><span class="op" id="6493009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493013">size</span>&nbsp;<span class="op" id="6493018">:=</span>&nbsp;<span class="ident" id="6493021">uint64</span><span class="op" id="6493027">(</span><span class="ident" id="6493028">f</span><span class="op" id="6493029">.</span><span class="ident" id="6493030">UncompressedSize</span><span class="op" id="6493046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493049">if</span>&nbsp;<span class="ident" id="6493052">size</span>&nbsp;<span class="op" id="6493057">==</span>&nbsp;<span class="ident" id="6493060">uint32max</span>&nbsp;<span class="op" id="6493070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493074">size</span>&nbsp;<span class="op" id="6493079">=</span>&nbsp;<span class="ident" id="6493081">f</span><span class="op" id="6493082">.</span><span class="ident" id="6493083">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493106">if</span>&nbsp;<span class="ident" id="6493109">g</span>&nbsp;<span class="op" id="6493111">:=</span>&nbsp;<span class="ident" id="6493114">uint64</span><span class="op" id="6493120">(</span><span class="ident" id="6493121">b</span><span class="op" id="6493122">.</span><span class="ident" id="6493123">Len</span><span class="op" id="6493126">(</span><span class="op" id="6493127">)</span><span class="op" id="6493128">)</span><span class="op" id="6493129">;</span>&nbsp;<span class="ident" id="6493131">g</span>&nbsp;<span class="op" id="6493133">!=</span>&nbsp;<span class="ident" id="6493136">size</span>&nbsp;<span class="op" id="6493141">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493145">t</span><span class="op" id="6493146">.</span><span class="ident" id="6493147">Errorf</span><span class="op" id="6493153">(</span><span class="string" id="6493154">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="6493202">,</span>&nbsp;<span class="ident" id="6493204">f</span><span class="op" id="6493205">.</span><span class="ident" id="6493206">Name</span><span class="op" id="6493210">,</span>&nbsp;<span class="ident" id="6493212">g</span><span class="op" id="6493213">,</span>&nbsp;<span class="ident" id="6493215">size</span><span class="op" id="6493219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493226">var</span>&nbsp;<span class="ident" id="6493230">c</span>&nbsp;<span class="op" id="6493232">[</span><span class="op" id="6493233">]</span><span class="builtintype" id="6493234">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493240">if</span>&nbsp;<span class="ident" id="6493243">ft</span><span class="op" id="6493245">.</span><span class="ident" id="6493246">Content</span>&nbsp;<span class="op" id="6493254">!=</span>&nbsp;<span class="ident" id="6493257">nil</span>&nbsp;<span class="op" id="6493261">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493265">c</span>&nbsp;<span class="op" id="6493267">=</span>&nbsp;<span class="ident" id="6493269">ft</span><span class="op" id="6493271">.</span><span class="ident" id="6493272">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493281">}</span>&nbsp;<span class="keyword" id="6493283">else</span>&nbsp;<span class="keyword" id="6493288">if</span>&nbsp;<span class="ident" id="6493291">c</span><span class="op" id="6493292">,</span>&nbsp;<span class="ident" id="6493294">err</span>&nbsp;<span class="op" id="6493298">=</span>&nbsp;<span class="ident" id="6493300">ioutil</span><span class="op" id="6493306">.</span><span class="ident" id="6493307">ReadFile</span><span class="op" id="6493315">(</span><span class="string" id="6493316">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="6493328">+</span>&nbsp;<span class="ident" id="6493330">ft</span><span class="op" id="6493332">.</span><span class="ident" id="6493333">File</span><span class="op" id="6493337">)</span><span class="op" id="6493338">;</span>&nbsp;<span class="ident" id="6493340">err</span>&nbsp;<span class="op" id="6493344">!=</span>&nbsp;<span class="ident" id="6493347">nil</span>&nbsp;<span class="op" id="6493351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493355">t</span><span class="op" id="6493356">.</span><span class="ident" id="6493357">Error</span><span class="op" id="6493362">(</span><span class="ident" id="6493363">err</span><span class="op" id="6493366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493370">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493378">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493382">if</span>&nbsp;<span class="ident" id="6493385">b</span><span class="op" id="6493386">.</span><span class="ident" id="6493387">Len</span><span class="op" id="6493390">(</span><span class="op" id="6493391">)</span>&nbsp;<span class="op" id="6493393">!=</span>&nbsp;<span class="builtinfunc" id="6493396">len</span><span class="op" id="6493399">(</span><span class="ident" id="6493400">c</span><span class="op" id="6493401">)</span>&nbsp;<span class="op" id="6493403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493407">t</span><span class="op" id="6493408">.</span><span class="ident" id="6493409">Errorf</span><span class="op" id="6493415">(</span><span class="string" id="6493416">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6493437">,</span>&nbsp;<span class="ident" id="6493439">f</span><span class="op" id="6493440">.</span><span class="ident" id="6493441">Name</span><span class="op" id="6493445">,</span>&nbsp;<span class="ident" id="6493447">b</span><span class="op" id="6493448">.</span><span class="ident" id="6493449">Len</span><span class="op" id="6493452">(</span><span class="op" id="6493453">)</span><span class="op" id="6493454">,</span>&nbsp;<span class="builtinfunc" id="6493456">len</span><span class="op" id="6493459">(</span><span class="ident" id="6493460">c</span><span class="op" id="6493461">)</span><span class="op" id="6493462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493466">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493474">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493478">for</span>&nbsp;<span class="ident" id="6493482">i</span><span class="op" id="6493483">,</span>&nbsp;<span class="ident" id="6493485">b</span>&nbsp;<span class="op" id="6493487">:=</span>&nbsp;<span class="keyword" id="6493490">range</span>&nbsp;<span class="ident" id="6493496">b</span><span class="op" id="6493497">.</span><span class="ident" id="6493498">Bytes</span><span class="op" id="6493503">(</span><span class="op" id="6493504">)</span>&nbsp;<span class="op" id="6493506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493510">if</span>&nbsp;<span class="ident" id="6493513">b</span>&nbsp;<span class="op" id="6493515">!=</span>&nbsp;<span class="ident" id="6493518">c</span><span class="op" id="6493519">[</span><span class="ident" id="6493520">i</span><span class="op" id="6493521">]</span>&nbsp;<span class="op" id="6493523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493528">t</span><span class="op" id="6493529">.</span><span class="ident" id="6493530">Errorf</span><span class="op" id="6493536">(</span><span class="string" id="6493537">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6493565">,</span>&nbsp;<span class="ident" id="6493567">f</span><span class="op" id="6493568">.</span><span class="ident" id="6493569">Name</span><span class="op" id="6493573">,</span>&nbsp;<span class="ident" id="6493575">i</span><span class="op" id="6493576">,</span>&nbsp;<span class="ident" id="6493578">b</span><span class="op" id="6493579">,</span>&nbsp;<span class="ident" id="6493581">c</span><span class="op" id="6493582">[</span><span class="ident" id="6493583">i</span><span class="op" id="6493584">]</span><span class="op" id="6493585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493590">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493602">}</span><br>
<span class="lineno"></span><span class="op" id="6493604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6493607">func</span>&nbsp;<span class="ident" id="6493612">testFileMode</span><span class="op" id="6493624">(</span><span class="ident" id="6493625">t</span>&nbsp;<span class="op" id="6493627">*</span><span class="ident" id="6493628">testing</span><span class="op" id="6493635">.</span><span class="ident" id="6493636">T</span><span class="op" id="6493637">,</span>&nbsp;<span class="ident" id="6493639">zipName</span>&nbsp;<span class="builtintype" id="6493647">string</span><span class="op" id="6493653">,</span>&nbsp;<span class="ident" id="6493655">f</span>&nbsp;<span class="op" id="6493657">*</span><span class="ident" id="6493658">File</span><span class="op" id="6493662">,</span>&nbsp;<span class="ident" id="6493664">want</span>&nbsp;<span class="ident" id="6493669">os</span><span class="op" id="6493671">.</span><span class="ident" id="6493672">FileMode</span><span class="op" id="6493680">)</span>&nbsp;<span class="op" id="6493682">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493685">mode</span>&nbsp;<span class="op" id="6493690">:=</span>&nbsp;<span class="ident" id="6493693">f</span><span class="op" id="6493694">.</span><span class="ident" id="6493695">Mode</span><span class="op" id="6493699">(</span><span class="op" id="6493700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493703">if</span>&nbsp;<span class="ident" id="6493706">want</span>&nbsp;<span class="op" id="6493711">==</span>&nbsp;<span class="num" id="6493714">0</span>&nbsp;<span class="op" id="6493716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493720">t</span><span class="op" id="6493721">.</span><span class="ident" id="6493722">Errorf</span><span class="op" id="6493728">(</span><span class="string" id="6493729">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="6493761">,</span>&nbsp;<span class="ident" id="6493763">zipName</span><span class="op" id="6493770">,</span>&nbsp;<span class="ident" id="6493772">f</span><span class="op" id="6493773">.</span><span class="ident" id="6493774">Name</span><span class="op" id="6493778">,</span>&nbsp;<span class="ident" id="6493780">mode</span><span class="op" id="6493784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493787">}</span>&nbsp;<span class="keyword" id="6493789">else</span>&nbsp;<span class="keyword" id="6493794">if</span>&nbsp;<span class="ident" id="6493797">mode</span>&nbsp;<span class="op" id="6493802">!=</span>&nbsp;<span class="ident" id="6493805">want</span>&nbsp;<span class="op" id="6493810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493814">t</span><span class="op" id="6493815">.</span><span class="ident" id="6493816">Errorf</span><span class="op" id="6493822">(</span><span class="string" id="6493823">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6493853">,</span>&nbsp;<span class="ident" id="6493855">zipName</span><span class="op" id="6493862">,</span>&nbsp;<span class="ident" id="6493864">f</span><span class="op" id="6493865">.</span><span class="ident" id="6493866">Name</span><span class="op" id="6493870">,</span>&nbsp;<span class="ident" id="6493872">want</span><span class="op" id="6493876">,</span>&nbsp;<span class="ident" id="6493878">mode</span><span class="op" id="6493882">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6493885">}</span><br>
<span class="lineno"></span><span class="op" id="6493887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6493890">func</span>&nbsp;<span class="ident" id="6493895">TestInvalidFiles</span><span class="op" id="6493911">(</span><span class="ident" id="6493912">t</span>&nbsp;<span class="op" id="6493914">*</span><span class="ident" id="6493915">testing</span><span class="op" id="6493922">.</span><span class="ident" id="6493923">T</span><span class="op" id="6493924">)</span>&nbsp;<span class="op" id="6493926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6493929">const</span>&nbsp;<span class="ident" id="6493935">size</span>&nbsp;<span class="op" id="6493940">=</span>&nbsp;<span class="num" id="6493942">1024</span>&nbsp;<span class="op" id="6493947">*</span>&nbsp;<span class="num" id="6493949">70</span>&nbsp;<span class="comment" id="6493952">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493961">b</span>&nbsp;<span class="op" id="6493963">:=</span>&nbsp;<span class="builtinfunc" id="6493966">make</span><span class="op" id="6493970">(</span><span class="op" id="6493971">[</span><span class="op" id="6493972">]</span><span class="builtintype" id="6493973">byte</span><span class="op" id="6493977">,</span>&nbsp;<span class="ident" id="6493979">size</span><span class="op" id="6493983">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6493987">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6493998">_</span><span class="op" id="6493999">,</span>&nbsp;<span class="ident" id="6494001">err</span>&nbsp;<span class="op" id="6494005">:=</span>&nbsp;<span class="ident" id="6494008">NewReader</span><span class="op" id="6494017">(</span><span class="ident" id="6494018">bytes</span><span class="op" id="6494023">.</span><span class="ident" id="6494024">NewReader</span><span class="op" id="6494033">(</span><span class="ident" id="6494034">b</span><span class="op" id="6494035">)</span><span class="op" id="6494036">,</span>&nbsp;<span class="ident" id="6494038">size</span><span class="op" id="6494042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494045">if</span>&nbsp;<span class="ident" id="6494048">err</span>&nbsp;<span class="op" id="6494052">!=</span>&nbsp;<span class="ident" id="6494055">ErrFormat</span>&nbsp;<span class="op" id="6494065">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494069">t</span><span class="op" id="6494070">.</span><span class="ident" id="6494071">Errorf</span><span class="op" id="6494077">(</span><span class="string" id="6494078">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6494105">,</span>&nbsp;<span class="ident" id="6494107">err</span><span class="op" id="6494110">,</span>&nbsp;<span class="ident" id="6494112">ErrFormat</span><span class="op" id="6494121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494128">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494164">sig</span>&nbsp;<span class="op" id="6494168">:=</span>&nbsp;<span class="builtinfunc" id="6494171">make</span><span class="op" id="6494175">(</span><span class="op" id="6494176">[</span><span class="op" id="6494177">]</span><span class="builtintype" id="6494178">byte</span><span class="op" id="6494182">,</span>&nbsp;<span class="num" id="6494184">4</span><span class="op" id="6494185">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494188">binary</span><span class="op" id="6494194">.</span><span class="ident" id="6494195">LittleEndian</span><span class="op" id="6494207">.</span><span class="ident" id="6494208">PutUint32</span><span class="op" id="6494217">(</span><span class="ident" id="6494218">sig</span><span class="op" id="6494221">,</span>&nbsp;<span class="ident" id="6494223">directoryEndSignature</span><span class="op" id="6494244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494247">for</span>&nbsp;<span class="ident" id="6494251">i</span>&nbsp;<span class="op" id="6494253">:=</span>&nbsp;<span class="num" id="6494256">0</span><span class="op" id="6494257">;</span>&nbsp;<span class="ident" id="6494259">i</span>&nbsp;<span class="op" id="6494261">&lt;</span>&nbsp;<span class="ident" id="6494263">size</span><span class="op" id="6494267">-</span><span class="num" id="6494268">4</span><span class="op" id="6494269">;</span>&nbsp;<span class="ident" id="6494271">i</span>&nbsp;<span class="op" id="6494273">+=</span>&nbsp;<span class="num" id="6494276">4</span>&nbsp;<span class="op" id="6494278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6494282">copy</span><span class="op" id="6494286">(</span><span class="ident" id="6494287">b</span><span class="op" id="6494288">[</span><span class="ident" id="6494289">i</span><span class="op" id="6494290">:</span><span class="ident" id="6494291">i</span><span class="op" id="6494292">+</span><span class="num" id="6494293">4</span><span class="op" id="6494294">]</span><span class="op" id="6494295">,</span>&nbsp;<span class="ident" id="6494297">sig</span><span class="op" id="6494300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494306">_</span><span class="op" id="6494307">,</span>&nbsp;<span class="ident" id="6494309">err</span>&nbsp;<span class="op" id="6494313">=</span>&nbsp;<span class="ident" id="6494315">NewReader</span><span class="op" id="6494324">(</span><span class="ident" id="6494325">bytes</span><span class="op" id="6494330">.</span><span class="ident" id="6494331">NewReader</span><span class="op" id="6494340">(</span><span class="ident" id="6494341">b</span><span class="op" id="6494342">)</span><span class="op" id="6494343">,</span>&nbsp;<span class="ident" id="6494345">size</span><span class="op" id="6494349">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494352">if</span>&nbsp;<span class="ident" id="6494355">err</span>&nbsp;<span class="op" id="6494359">!=</span>&nbsp;<span class="ident" id="6494362">ErrFormat</span>&nbsp;<span class="op" id="6494372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494376">t</span><span class="op" id="6494377">.</span><span class="ident" id="6494378">Errorf</span><span class="op" id="6494384">(</span><span class="string" id="6494385">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6494410">,</span>&nbsp;<span class="ident" id="6494412">err</span><span class="op" id="6494415">,</span>&nbsp;<span class="ident" id="6494417">ErrFormat</span><span class="op" id="6494426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494429">}</span><br>
<span class="lineno"></span><span class="op" id="6494431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="6494434">func</span>&nbsp;<span class="ident" id="6494439">messWith</span><span class="op" id="6494447">(</span><span class="ident" id="6494448">fileName</span>&nbsp;<span class="builtintype" id="6494457">string</span><span class="op" id="6494463">,</span>&nbsp;<span class="ident" id="6494465">corrupter</span>&nbsp;<span class="keyword" id="6494475">func</span><span class="op" id="6494479">(</span><span class="ident" id="6494480">b</span>&nbsp;<span class="op" id="6494482">[</span><span class="op" id="6494483">]</span><span class="builtintype" id="6494484">byte</span><span class="op" id="6494488">)</span><span class="op" id="6494489">)</span>&nbsp;<span class="op" id="6494491">(</span><span class="ident" id="6494492">r</span>&nbsp;<span class="ident" id="6494494">io</span><span class="op" id="6494496">.</span><span class="ident" id="6494497">ReaderAt</span><span class="op" id="6494505">,</span>&nbsp;<span class="ident" id="6494507">size</span>&nbsp;<span class="ident" id="6494512">int64</span><span class="op" id="6494517">)</span>&nbsp;<span class="op" id="6494519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494522">data</span><span class="op" id="6494526">,</span>&nbsp;<span class="ident" id="6494528">err</span>&nbsp;<span class="op" id="6494532">:=</span>&nbsp;<span class="ident" id="6494535">ioutil</span><span class="op" id="6494541">.</span><span class="ident" id="6494542">ReadFile</span><span class="op" id="6494550">(</span><span class="ident" id="6494551">filepath</span><span class="op" id="6494559">.</span><span class="ident" id="6494560">Join</span><span class="op" id="6494564">(</span><span class="string" id="6494565">&#34;testdata&#34;</span><span class="op" id="6494575">,</span>&nbsp;<span class="ident" id="6494577">fileName</span><span class="op" id="6494585">)</span><span class="op" id="6494586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494589">if</span>&nbsp;<span class="ident" id="6494592">err</span>&nbsp;<span class="op" id="6494596">!=</span>&nbsp;<span class="ident" id="6494599">nil</span>&nbsp;<span class="op" id="6494603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6494607">panic</span><span class="op" id="6494612">(</span><span class="string" id="6494613">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="6494630">+</span>&nbsp;<span class="ident" id="6494632">fileName</span>&nbsp;<span class="op" id="6494641">+</span>&nbsp;<span class="string" id="6494643">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="6494648">+</span>&nbsp;<span class="ident" id="6494650">err</span><span class="op" id="6494653">.</span><span class="ident" id="6494654">Error</span><span class="op" id="6494659">(</span><span class="op" id="6494660">)</span><span class="op" id="6494661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494664">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494667">corrupter</span><span class="op" id="6494676">(</span><span class="ident" id="6494677">data</span><span class="op" id="6494681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494684">return</span>&nbsp;<span class="ident" id="6494691">bytes</span><span class="op" id="6494696">.</span><span class="ident" id="6494697">NewReader</span><span class="op" id="6494706">(</span><span class="ident" id="6494707">data</span><span class="op" id="6494711">)</span><span class="op" id="6494712">,</span>&nbsp;<span class="ident" id="6494714">int64</span><span class="op" id="6494719">(</span><span class="builtinfunc" id="6494720">len</span><span class="op" id="6494723">(</span><span class="ident" id="6494724">data</span><span class="op" id="6494728">)</span><span class="op" id="6494729">)</span><br>
<span class="lineno"></span><span class="op" id="6494731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6494734">func</span>&nbsp;<span class="ident" id="6494739">returnCorruptCRC32Zip</span><span class="op" id="6494760">(</span><span class="op" id="6494761">)</span>&nbsp;<span class="op" id="6494763">(</span><span class="ident" id="6494764">r</span>&nbsp;<span class="ident" id="6494766">io</span><span class="op" id="6494768">.</span><span class="ident" id="6494769">ReaderAt</span><span class="op" id="6494777">,</span>&nbsp;<span class="ident" id="6494779">size</span>&nbsp;<span class="ident" id="6494784">int64</span><span class="op" id="6494789">)</span>&nbsp;<span class="op" id="6494791">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494794">return</span>&nbsp;<span class="ident" id="6494801">messWith</span><span class="op" id="6494809">(</span><span class="string" id="6494810">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6494836">,</span>&nbsp;<span class="keyword" id="6494838">func</span><span class="op" id="6494842">(</span><span class="ident" id="6494843">b</span>&nbsp;<span class="op" id="6494845">[</span><span class="op" id="6494846">]</span><span class="builtintype" id="6494847">byte</span><span class="op" id="6494851">)</span>&nbsp;<span class="op" id="6494853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6494857">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6494912">b</span><span class="op" id="6494913">[</span><span class="num" id="6494914">0x2d</span><span class="op" id="6494918">]</span><span class="op" id="6494919">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6494923">}</span><span class="op" id="6494924">)</span><br>
<span class="lineno"></span><span class="op" id="6494926">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="6494929">func</span>&nbsp;<span class="ident" id="6494934">returnCorruptNotStreamedZip</span><span class="op" id="6494961">(</span><span class="op" id="6494962">)</span>&nbsp;<span class="op" id="6494964">(</span><span class="ident" id="6494965">r</span>&nbsp;<span class="ident" id="6494967">io</span><span class="op" id="6494969">.</span><span class="ident" id="6494970">ReaderAt</span><span class="op" id="6494978">,</span>&nbsp;<span class="ident" id="6494980">size</span>&nbsp;<span class="ident" id="6494985">int64</span><span class="op" id="6494990">)</span>&nbsp;<span class="op" id="6494992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6494995">return</span>&nbsp;<span class="ident" id="6495002">messWith</span><span class="op" id="6495010">(</span><span class="string" id="6495011">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6495035">,</span>&nbsp;<span class="keyword" id="6495037">func</span><span class="op" id="6495041">(</span><span class="ident" id="6495042">b</span>&nbsp;<span class="op" id="6495044">[</span><span class="op" id="6495045">]</span><span class="builtintype" id="6495046">byte</span><span class="op" id="6495050">)</span>&nbsp;<span class="op" id="6495052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495056">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495105">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495150">b</span><span class="op" id="6495151">[</span><span class="num" id="6495152">0x11</span><span class="op" id="6495156">]</span><span class="op" id="6495157">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495162">b</span><span class="op" id="6495163">[</span><span class="num" id="6495164">0x9d</span><span class="op" id="6495168">]</span><span class="op" id="6495169">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495175">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495230">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495287">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495345">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495399">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6495454">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6495475">}</span><span class="op" id="6495476">)</span><br>
<span class="lineno">465</span><span class="op" id="6495478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6495481">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="6495545">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="6495606">func</span>&nbsp;<span class="ident" id="6495611">rZipBytes</span><span class="op" id="6495620">(</span><span class="op" id="6495621">)</span>&nbsp;<span class="op" id="6495623">[</span><span class="op" id="6495624">]</span><span class="builtintype" id="6495625">byte</span>&nbsp;<span class="op" id="6495630">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6495633">s</span>&nbsp;<span class="op" id="6495635">:=</span>&nbsp;<span class="string" id="6495638">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497186">s</span>&nbsp;<span class="op" id="6497188">=</span>&nbsp;<span class="ident" id="6497190">regexp</span><span class="op" id="6497196">.</span><span class="ident" id="6497197">MustCompile</span><span class="op" id="6497208">(</span><span class="string" id="6497209">`[0-9a-f]{7}`</span><span class="op" id="6497222">)</span><span class="op" id="6497223">.</span><span class="ident" id="6497224">ReplaceAllString</span><span class="op" id="6497240">(</span><span class="ident" id="6497241">s</span><span class="op" id="6497242">,</span>&nbsp;<span class="string" id="6497244">&#34;&#34;</span><span class="op" id="6497246">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497249">s</span>&nbsp;<span class="op" id="6497251">=</span>&nbsp;<span class="ident" id="6497253">regexp</span><span class="op" id="6497259">.</span><span class="ident" id="6497260">MustCompile</span><span class="op" id="6497271">(</span><span class="string" id="6497272">`\s+`</span><span class="op" id="6497277">)</span><span class="op" id="6497278">.</span><span class="ident" id="6497279">ReplaceAllString</span><span class="op" id="6497295">(</span><span class="ident" id="6497296">s</span><span class="op" id="6497297">,</span>&nbsp;<span class="string" id="6497299">&#34;&#34;</span><span class="op" id="6497301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497304">b</span><span class="op" id="6497305">,</span>&nbsp;<span class="ident" id="6497307">err</span>&nbsp;<span class="op" id="6497311">:=</span>&nbsp;<span class="ident" id="6497314">hex</span><span class="op" id="6497317">.</span><span class="ident" id="6497318">DecodeString</span><span class="op" id="6497330">(</span><span class="ident" id="6497331">s</span><span class="op" id="6497332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497335">if</span>&nbsp;<span class="ident" id="6497338">err</span>&nbsp;<span class="op" id="6497342">!=</span>&nbsp;<span class="ident" id="6497345">nil</span>&nbsp;<span class="op" id="6497349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6497353">panic</span><span class="op" id="6497358">(</span><span class="ident" id="6497359">err</span><span class="op" id="6497362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6497365">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497368">return</span>&nbsp;<span class="ident" id="6497375">b</span><br>
<span class="lineno"></span><span class="op" id="6497377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6497380">func</span>&nbsp;<span class="ident" id="6497385">returnRecursiveZip</span><span class="op" id="6497403">(</span><span class="op" id="6497404">)</span>&nbsp;<span class="op" id="6497406">(</span><span class="ident" id="6497407">r</span>&nbsp;<span class="ident" id="6497409">io</span><span class="op" id="6497411">.</span><span class="ident" id="6497412">ReaderAt</span><span class="op" id="6497420">,</span>&nbsp;<span class="ident" id="6497422">size</span>&nbsp;<span class="ident" id="6497427">int64</span><span class="op" id="6497432">)</span>&nbsp;<span class="op" id="6497434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497437">b</span>&nbsp;<span class="op" id="6497439">:=</span>&nbsp;<span class="ident" id="6497442">rZipBytes</span><span class="op" id="6497451">(</span><span class="op" id="6497452">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6497455">return</span>&nbsp;<span class="ident" id="6497462">bytes</span><span class="op" id="6497467">.</span><span class="ident" id="6497468">NewReader</span><span class="op" id="6497477">(</span><span class="ident" id="6497478">b</span><span class="op" id="6497479">)</span><span class="op" id="6497480">,</span>&nbsp;<span class="ident" id="6497482">int64</span><span class="op" id="6497487">(</span><span class="builtinfunc" id="6497488">len</span><span class="op" id="6497491">(</span><span class="ident" id="6497492">b</span><span class="op" id="6497493">)</span><span class="op" id="6497494">)</span><br>
<span class="lineno"></span><span class="op" id="6497496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6497499">func</span>&nbsp;<span class="ident" id="6497504">TestIssue8186</span><span class="op" id="6497517">(</span><span class="ident" id="6497518">t</span>&nbsp;<span class="op" id="6497520">*</span><span class="ident" id="6497521">testing</span><span class="op" id="6497528">.</span><span class="ident" id="6497529">T</span><span class="op" id="6497530">)</span>&nbsp;<span class="op" id="6497532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6497535">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6497596">dirEnts</span>&nbsp;<span class="op" id="6497604">:=</span>&nbsp;<span class="op" id="6497607">[</span><span class="op" id="6497608">]</span><span class="builtintype" id="6497609">string</span><span class="op" id="6497615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6497619">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="6497846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6497850">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="6498028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498032">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="6498203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498207">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="6498375">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498379">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="6498562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498566">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="6498748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498752">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="6498922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6498926">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="6499095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6499099">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="6499272">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499278">for</span>&nbsp;<span class="ident" id="6499282">i</span><span class="op" id="6499283">,</span>&nbsp;<span class="ident" id="6499285">s</span>&nbsp;<span class="op" id="6499287">:=</span>&nbsp;<span class="keyword" id="6499290">range</span>&nbsp;<span class="ident" id="6499296">dirEnts</span>&nbsp;<span class="op" id="6499304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499308">var</span>&nbsp;<span class="ident" id="6499312">f</span>&nbsp;<span class="ident" id="6499314">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499321">err</span>&nbsp;<span class="op" id="6499325">:=</span>&nbsp;<span class="ident" id="6499328">readDirectoryHeader</span><span class="op" id="6499347">(</span><span class="op" id="6499348">&amp;</span><span class="ident" id="6499349">f</span><span class="op" id="6499350">,</span>&nbsp;<span class="ident" id="6499352">strings</span><span class="op" id="6499359">.</span><span class="ident" id="6499360">NewReader</span><span class="op" id="6499369">(</span><span class="ident" id="6499370">s</span><span class="op" id="6499371">)</span><span class="op" id="6499372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6499376">if</span>&nbsp;<span class="ident" id="6499379">err</span>&nbsp;<span class="op" id="6499383">!=</span>&nbsp;<span class="ident" id="6499386">nil</span>&nbsp;<span class="op" id="6499390">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6499395">t</span><span class="op" id="6499396">.</span><span class="ident" id="6499397">Errorf</span><span class="op" id="6499403">(</span><span class="string" id="6499404">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="6499427">,</span>&nbsp;<span class="ident" id="6499429">i</span><span class="op" id="6499430">,</span>&nbsp;<span class="ident" id="6499432">err</span><span class="op" id="6499435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6499442">}</span><br>
<span class="lineno"></span><span class="op" id="6499444">}</span>
</div>
</body>
</html>
