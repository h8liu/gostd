<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="159791">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="159846">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="159900">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="159951">package</span>&nbsp;<span class="ident" id="159959">sql_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="159969">import</span>&nbsp;<span class="op" id="159976">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="159979">&#34;database/sql&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="159995">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="160002">&#34;log&#34;</span><br>
<span class="lineno"></span><span class="op" id="160008">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="160011">var</span>&nbsp;<span class="ident" id="160015">db</span>&nbsp;<span class="op" id="160018">*</span><span class="ident" id="160019"><a href="/database/sql/example_test.go.html#159979">sql</a></span><span class="op" id="160022">.</span><span class="ident" id="160023">DB</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="160027">func</span>&nbsp;<span class="ident" id="160032">ExampleDB_Query</span><span class="op" id="160047">(</span><span class="op" id="160048">)</span>&nbsp;<span class="op" id="160050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160053">age</span>&nbsp;<span class="op" id="160057">:=</span>&nbsp;<span class="num" id="160060">27</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160064">rows</span><span class="op" id="160068">,</span>&nbsp;<span class="ident" id="160070">err</span>&nbsp;<span class="op" id="160074">:=</span>&nbsp;<span class="ident" id="160077"><a href="/database/sql/example_test.go.html#160015">db</a></span><span class="op" id="160079">.</span><span class="ident" id="160080">Query</span><span class="op" id="160085">(</span><span class="string" id="160086">&#34;SELECT&nbsp;name&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;age=?&#34;</span><span class="op" id="160122">,</span>&nbsp;<span class="ident" id="160124"><a href="/database/sql/example_test.go.html#160053">age</a></span><span class="op" id="160127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160130">if</span>&nbsp;<span class="ident" id="160133"><a href="/database/sql/example_test.go.html#160070">err</a></span>&nbsp;<span class="op" id="160137">!=</span>&nbsp;<span class="ident" id="160140">nil</span>&nbsp;<span class="op" id="160144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160148"><a href="/database/sql/example_test.go.html#160002">log</a></span><span class="op" id="160151">.</span><span class="ident" id="160152">Fatal</span><span class="op" id="160157">(</span><span class="ident" id="160158"><a href="/database/sql/example_test.go.html#160070">err</a></span><span class="op" id="160161">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="160164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160167">defer</span>&nbsp;<span class="ident" id="160173"><a href="/database/sql/example_test.go.html#160064">rows</a></span><span class="op" id="160177">.</span><span class="ident" id="160178">Close</span><span class="op" id="160183">(</span><span class="op" id="160184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160187">for</span>&nbsp;<span class="ident" id="160191"><a href="/database/sql/example_test.go.html#160064">rows</a></span><span class="op" id="160195">.</span><span class="ident" id="160196">Next</span><span class="op" id="160200">(</span><span class="op" id="160201">)</span>&nbsp;<span class="op" id="160203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160207">var</span>&nbsp;<span class="ident" id="160211">name</span>&nbsp;<span class="builtintype" id="160216">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160225">if</span>&nbsp;<span class="ident" id="160228">err</span>&nbsp;<span class="op" id="160232">:=</span>&nbsp;<span class="ident" id="160235"><a href="/database/sql/example_test.go.html#160064">rows</a></span><span class="op" id="160239">.</span><span class="ident" id="160240">Scan</span><span class="op" id="160244">(</span><span class="op" id="160245">&amp;</span><span class="ident" id="160246"><a href="/database/sql/example_test.go.html#160211">name</a></span><span class="op" id="160250">)</span><span class="op" id="160251">;</span>&nbsp;<span class="ident" id="160253"><a href="/database/sql/example_test.go.html#160228">err</a></span>&nbsp;<span class="op" id="160257">!=</span>&nbsp;<span class="ident" id="160260">nil</span>&nbsp;<span class="op" id="160264">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160269"><a href="/database/sql/example_test.go.html#160002">log</a></span><span class="op" id="160272">.</span><span class="ident" id="160273">Fatal</span><span class="op" id="160278">(</span><span class="ident" id="160279"><a href="/database/sql/example_test.go.html#160228">err</a></span><span class="op" id="160282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="160286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160290"><a href="/database/sql/example_test.go.html#159995">fmt</a></span><span class="op" id="160293">.</span><span class="ident" id="160294">Printf</span><span class="op" id="160300">(</span><span class="string" id="160301">&#34;%s&nbsp;is&nbsp;%d\n&#34;</span><span class="op" id="160313">,</span>&nbsp;<span class="ident" id="160315"><a href="/database/sql/example_test.go.html#160211">name</a></span><span class="op" id="160319">,</span>&nbsp;<span class="ident" id="160321"><a href="/database/sql/example_test.go.html#160053">age</a></span><span class="op" id="160324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="160327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160330">if</span>&nbsp;<span class="ident" id="160333">err</span>&nbsp;<span class="op" id="160337">:=</span>&nbsp;<span class="ident" id="160340"><a href="/database/sql/example_test.go.html#160064">rows</a></span><span class="op" id="160344">.</span><span class="ident" id="160345">Err</span><span class="op" id="160348">(</span><span class="op" id="160349">)</span><span class="op" id="160350">;</span>&nbsp;<span class="ident" id="160352"><a href="/database/sql/example_test.go.html#160333">err</a></span>&nbsp;<span class="op" id="160356">!=</span>&nbsp;<span class="ident" id="160359">nil</span>&nbsp;<span class="op" id="160363">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160367"><a href="/database/sql/example_test.go.html#160002">log</a></span><span class="op" id="160370">.</span><span class="ident" id="160371">Fatal</span><span class="op" id="160376">(</span><span class="ident" id="160377"><a href="/database/sql/example_test.go.html#160333">err</a></span><span class="op" id="160380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="160383">}</span><br>
<span class="lineno"></span><span class="op" id="160385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="160388">func</span>&nbsp;<span class="ident" id="160393">ExampleDB_QueryRow</span><span class="op" id="160411">(</span><span class="op" id="160412">)</span>&nbsp;<span class="op" id="160414">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160417">id</span>&nbsp;<span class="op" id="160420">:=</span>&nbsp;<span class="num" id="160423">123</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160428">var</span>&nbsp;<span class="ident" id="160432">username</span>&nbsp;<span class="builtintype" id="160441">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160449">err</span>&nbsp;<span class="op" id="160453">:=</span>&nbsp;<span class="ident" id="160456"><a href="/database/sql/example_test.go.html#160015">db</a></span><span class="op" id="160458">.</span><span class="ident" id="160459">QueryRow</span><span class="op" id="160467">(</span><span class="string" id="160468">&#34;SELECT&nbsp;username&nbsp;FROM&nbsp;users&nbsp;WHERE&nbsp;id=?&#34;</span><span class="op" id="160507">,</span>&nbsp;<span class="ident" id="160509"><a href="/database/sql/example_test.go.html#160417">id</a></span><span class="op" id="160511">)</span><span class="op" id="160512">.</span><span class="ident" id="160513">Scan</span><span class="op" id="160517">(</span><span class="op" id="160518">&amp;</span><span class="ident" id="160519"><a href="/database/sql/example_test.go.html#160432">username</a></span><span class="op" id="160527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160530">switch</span>&nbsp;<span class="op" id="160537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160540">case</span>&nbsp;<span class="ident" id="160545"><a href="/database/sql/example_test.go.html#160449">err</a></span>&nbsp;<span class="op" id="160549">==</span>&nbsp;<span class="ident" id="160552"><a href="/database/sql/example_test.go.html#159979">sql</a></span><span class="op" id="160555">.</span><span class="ident" id="160556">ErrNoRows</span><span class="op" id="160565">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160569"><a href="/database/sql/example_test.go.html#160002">log</a></span><span class="op" id="160572">.</span><span class="ident" id="160573">Printf</span><span class="op" id="160579">(</span><span class="string" id="160580">&#34;No&nbsp;user&nbsp;with&nbsp;that&nbsp;ID.&#34;</span><span class="op" id="160603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160606">case</span>&nbsp;<span class="ident" id="160611"><a href="/database/sql/example_test.go.html#160449">err</a></span>&nbsp;<span class="op" id="160615">!=</span>&nbsp;<span class="ident" id="160618">nil</span><span class="op" id="160621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160625"><a href="/database/sql/example_test.go.html#160002">log</a></span><span class="op" id="160628">.</span><span class="ident" id="160629">Fatal</span><span class="op" id="160634">(</span><span class="ident" id="160635"><a href="/database/sql/example_test.go.html#160449">err</a></span><span class="op" id="160638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="160641">default</span><span class="op" id="160648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="160652"><a href="/database/sql/example_test.go.html#159995">fmt</a></span><span class="op" id="160655">.</span><span class="ident" id="160656">Printf</span><span class="op" id="160662">(</span><span class="string" id="160663">&#34;Username&nbsp;is&nbsp;%s\n&#34;</span><span class="op" id="160681">,</span>&nbsp;<span class="ident" id="160683"><a href="/database/sql/example_test.go.html#160432">username</a></span><span class="op" id="160691">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="160694">}</span><br>
<span class="lineno"></span><span class="op" id="160696">}</span>
</div>
</body>
</html>
