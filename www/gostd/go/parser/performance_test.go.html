<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8409836">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8409891">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8409945">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8409996">package</span>&nbsp;<span class="ident" id="8410004">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8410012">import</span>&nbsp;<span class="op" id="8410019">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8410022">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8410034">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8410047">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8410057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8410060">var</span>&nbsp;<span class="ident" id="8410064">src</span>&nbsp;<span class="op" id="8410068">=</span>&nbsp;<span class="ident" id="8410070">readFile</span><span class="op" id="8410078">(</span><span class="string" id="8410079">&#34;parser.go&#34;</span><span class="op" id="8410090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8410093">func</span>&nbsp;<span class="ident" id="8410098">readFile</span><span class="op" id="8410106">(</span><span class="ident" id="8410107">filename</span>&nbsp;<span class="builtintype" id="8410116">string</span><span class="op" id="8410122">)</span>&nbsp;<span class="op" id="8410124">[</span><span class="op" id="8410125">]</span><span class="builtintype" id="8410126">byte</span>&nbsp;<span class="op" id="8410131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8410134">data</span><span class="op" id="8410138">,</span>&nbsp;<span class="ident" id="8410140">err</span>&nbsp;<span class="op" id="8410144">:=</span>&nbsp;<span class="ident" id="8410147">ioutil</span><span class="op" id="8410153">.</span><span class="ident" id="8410154">ReadFile</span><span class="op" id="8410162">(</span><span class="ident" id="8410163">filename</span><span class="op" id="8410171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8410174">if</span>&nbsp;<span class="ident" id="8410177">err</span>&nbsp;<span class="op" id="8410181">!=</span>&nbsp;<span class="ident" id="8410184">nil</span>&nbsp;<span class="op" id="8410188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8410192">panic</span><span class="op" id="8410197">(</span><span class="ident" id="8410198">err</span><span class="op" id="8410201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8410204">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8410207">return</span>&nbsp;<span class="ident" id="8410214">data</span><br>
<span class="lineno"></span><span class="op" id="8410219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8410222">func</span>&nbsp;<span class="ident" id="8410227">BenchmarkParse</span><span class="op" id="8410241">(</span><span class="ident" id="8410242">b</span>&nbsp;<span class="op" id="8410244">*</span><span class="ident" id="8410245">testing</span><span class="op" id="8410252">.</span><span class="ident" id="8410253">B</span><span class="op" id="8410254">)</span>&nbsp;<span class="op" id="8410256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8410259">b</span><span class="op" id="8410260">.</span><span class="ident" id="8410261">SetBytes</span><span class="op" id="8410269">(</span><span class="ident" id="8410270">int64</span><span class="op" id="8410275">(</span><span class="builtinfunc" id="8410276">len</span><span class="op" id="8410279">(</span><span class="ident" id="8410280">src</span><span class="op" id="8410283">)</span><span class="op" id="8410284">)</span><span class="op" id="8410285">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8410288">for</span>&nbsp;<span class="ident" id="8410292">i</span>&nbsp;<span class="op" id="8410294">:=</span>&nbsp;<span class="num" id="8410297">0</span><span class="op" id="8410298">;</span>&nbsp;<span class="ident" id="8410300">i</span>&nbsp;<span class="op" id="8410302">&lt;</span>&nbsp;<span class="ident" id="8410304">b</span><span class="op" id="8410305">.</span><span class="ident" id="8410306">N</span><span class="op" id="8410307">;</span>&nbsp;<span class="ident" id="8410309">i</span><span class="op" id="8410310">++</span>&nbsp;<span class="op" id="8410313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8410317">if</span>&nbsp;<span class="ident" id="8410320">_</span><span class="op" id="8410321">,</span>&nbsp;<span class="ident" id="8410323">err</span>&nbsp;<span class="op" id="8410327">:=</span>&nbsp;<span class="ident" id="8410330">ParseFile</span><span class="op" id="8410339">(</span><span class="ident" id="8410340">token</span><span class="op" id="8410345">.</span><span class="ident" id="8410346">NewFileSet</span><span class="op" id="8410356">(</span><span class="op" id="8410357">)</span><span class="op" id="8410358">,</span>&nbsp;<span class="string" id="8410360">&#34;&#34;</span><span class="op" id="8410362">,</span>&nbsp;<span class="ident" id="8410364">src</span><span class="op" id="8410367">,</span>&nbsp;<span class="ident" id="8410369">ParseComments</span><span class="op" id="8410382">)</span><span class="op" id="8410383">;</span>&nbsp;<span class="ident" id="8410385">err</span>&nbsp;<span class="op" id="8410389">!=</span>&nbsp;<span class="ident" id="8410392">nil</span>&nbsp;<span class="op" id="8410396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8410401">b</span><span class="op" id="8410402">.</span><span class="ident" id="8410403">Fatalf</span><span class="op" id="8410409">(</span><span class="string" id="8410410">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8410451">,</span>&nbsp;<span class="ident" id="8410453">err</span><span class="op" id="8410456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8410460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8410463">}</span><br>
<span class="lineno">30</span><span class="op" id="8410465">}</span>
</div>
</body>
</html>
