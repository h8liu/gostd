<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5923717">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5923772">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5923826">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5923877">package</span>&nbsp;<span class="ident" id="5923885">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5923896">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5923959">import</span>&nbsp;<span class="op" id="5923966">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5923969">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5923976">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5923987">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5924002">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5924005">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5924059">//</span><br>
<span class="lineno"></span><span class="comment" id="5924062">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5924141">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5924191">const</span>&nbsp;<span class="op" id="5924197">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924200">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924212">int32</span>&nbsp;<span class="op" id="5924218">=</span>&nbsp;<span class="num" id="5924220">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924224">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924236">int32</span>&nbsp;<span class="op" id="5924242">=</span>&nbsp;<span class="num" id="5924244">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924249">initialBias</span>&nbsp;<span class="builtintype" id="5924261">int32</span>&nbsp;<span class="op" id="5924267">=</span>&nbsp;<span class="num" id="5924269">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924273">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924285">int32</span>&nbsp;<span class="op" id="5924291">=</span>&nbsp;<span class="num" id="5924293">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924298">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924310">int32</span>&nbsp;<span class="op" id="5924316">=</span>&nbsp;<span class="num" id="5924318">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924322">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924334">int32</span>&nbsp;<span class="op" id="5924340">=</span>&nbsp;<span class="num" id="5924342">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924346">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5924358">int32</span>&nbsp;<span class="op" id="5924364">=</span>&nbsp;<span class="num" id="5924366">1</span><br>
<span class="lineno"></span><span class="op" id="5924368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5924371">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5924449">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5924464">//</span><br>
<span class="lineno"></span><span class="comment" id="5924467">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5924539">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5924619">func</span>&nbsp;<span class="ident" id="5924624">encode</span><span class="op" id="5924630">(</span><span class="ident" id="5924631">prefix</span><span class="op" id="5924637">,</span>&nbsp;<span class="ident" id="5924639">s</span>&nbsp;<span class="builtintype" id="5924641">string</span><span class="op" id="5924647">)</span>&nbsp;<span class="op" id="5924649">(</span><span class="builtintype" id="5924650">string</span><span class="op" id="5924656">,</span>&nbsp;<span class="builtintype" id="5924658">error</span><span class="op" id="5924663">)</span>&nbsp;<span class="op" id="5924665">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924668">output</span>&nbsp;<span class="op" id="5924675">:=</span>&nbsp;<span class="builtinfunc" id="5924678">make</span><span class="op" id="5924682">(</span><span class="op" id="5924683">[</span><span class="op" id="5924684">]</span><span class="builtintype" id="5924685">byte</span><span class="op" id="5924689">,</span>&nbsp;<span class="builtinfunc" id="5924691">len</span><span class="op" id="5924694">(</span><span class="ident" id="5924695">prefix</span><span class="op" id="5924701">)</span><span class="op" id="5924702">,</span>&nbsp;<span class="builtinfunc" id="5924704">len</span><span class="op" id="5924707">(</span><span class="ident" id="5924708">prefix</span><span class="op" id="5924714">)</span><span class="op" id="5924715">+</span><span class="num" id="5924716">1</span><span class="op" id="5924717">+</span><span class="num" id="5924718">2</span><span class="op" id="5924719">*</span><span class="builtinfunc" id="5924720">len</span><span class="op" id="5924723">(</span><span class="ident" id="5924724">s</span><span class="op" id="5924725">)</span><span class="op" id="5924726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5924729">copy</span><span class="op" id="5924733">(</span><span class="ident" id="5924734">output</span><span class="op" id="5924740">,</span>&nbsp;<span class="ident" id="5924742">prefix</span><span class="op" id="5924748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924751">delta</span><span class="op" id="5924756">,</span>&nbsp;<span class="ident" id="5924758">n</span><span class="op" id="5924759">,</span>&nbsp;<span class="ident" id="5924761">bias</span>&nbsp;<span class="op" id="5924766">:=</span>&nbsp;<span class="builtintype" id="5924769">int32</span><span class="op" id="5924774">(</span><span class="num" id="5924775">0</span><span class="op" id="5924776">)</span><span class="op" id="5924777">,</span>&nbsp;<span class="ident" id="5924779">initialN</span><span class="op" id="5924787">,</span>&nbsp;<span class="ident" id="5924789">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924802">b</span><span class="op" id="5924803">,</span>&nbsp;<span class="ident" id="5924805">remaining</span>&nbsp;<span class="op" id="5924815">:=</span>&nbsp;<span class="builtintype" id="5924818">int32</span><span class="op" id="5924823">(</span><span class="num" id="5924824">0</span><span class="op" id="5924825">)</span><span class="op" id="5924826">,</span>&nbsp;<span class="builtintype" id="5924828">int32</span><span class="op" id="5924833">(</span><span class="num" id="5924834">0</span><span class="op" id="5924835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924838">for</span>&nbsp;<span class="ident" id="5924842">_</span><span class="op" id="5924843">,</span>&nbsp;<span class="ident" id="5924845">r</span>&nbsp;<span class="op" id="5924847">:=</span>&nbsp;<span class="keyword" id="5924850">range</span>&nbsp;<span class="ident" id="5924856">s</span>&nbsp;<span class="op" id="5924858">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924862">if</span>&nbsp;<span class="ident" id="5924865">r</span>&nbsp;<span class="op" id="5924867">&lt;</span>&nbsp;<span class="num" id="5924869">0x80</span>&nbsp;<span class="op" id="5924874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924879">b</span><span class="op" id="5924880">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924886">output</span>&nbsp;<span class="op" id="5924893">=</span>&nbsp;<span class="builtinfunc" id="5924895">append</span><span class="op" id="5924901">(</span><span class="ident" id="5924902">output</span><span class="op" id="5924908">,</span>&nbsp;<span class="builtintype" id="5924910">byte</span><span class="op" id="5924914">(</span><span class="ident" id="5924915">r</span><span class="op" id="5924916">)</span><span class="op" id="5924917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924921">}</span>&nbsp;<span class="keyword" id="5924923">else</span>&nbsp;<span class="op" id="5924928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924933">remaining</span><span class="op" id="5924942">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5924950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924953">h</span>&nbsp;<span class="op" id="5924955">:=</span>&nbsp;<span class="ident" id="5924958">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5924961">if</span>&nbsp;<span class="ident" id="5924964">b</span>&nbsp;<span class="op" id="5924966">&gt;</span>&nbsp;<span class="num" id="5924968">0</span>&nbsp;<span class="op" id="5924970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5924974">output</span>&nbsp;<span class="op" id="5924981">=</span>&nbsp;<span class="builtinfunc" id="5924983">append</span><span class="op" id="5924989">(</span><span class="ident" id="5924990">output</span><span class="op" id="5924996">,</span>&nbsp;<span class="string" id="5924998">&#39;-&#39;</span><span class="op" id="5925001">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925007">for</span>&nbsp;<span class="ident" id="5925011">remaining</span>&nbsp;<span class="op" id="5925021">!=</span>&nbsp;<span class="num" id="5925024">0</span>&nbsp;<span class="op" id="5925026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925030">m</span>&nbsp;<span class="op" id="5925032">:=</span>&nbsp;<span class="builtintype" id="5925035">int32</span><span class="op" id="5925040">(</span><span class="num" id="5925041">0x7fffffff</span><span class="op" id="5925051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925055">for</span>&nbsp;<span class="ident" id="5925059">_</span><span class="op" id="5925060">,</span>&nbsp;<span class="ident" id="5925062">r</span>&nbsp;<span class="op" id="5925064">:=</span>&nbsp;<span class="keyword" id="5925067">range</span>&nbsp;<span class="ident" id="5925073">s</span>&nbsp;<span class="op" id="5925075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925080">if</span>&nbsp;<span class="ident" id="5925083">m</span>&nbsp;<span class="op" id="5925085">&gt;</span>&nbsp;<span class="ident" id="5925087">r</span>&nbsp;<span class="op" id="5925089">&amp;&amp;</span>&nbsp;<span class="ident" id="5925092">r</span>&nbsp;<span class="op" id="5925094">&gt;=</span>&nbsp;<span class="ident" id="5925097">n</span>&nbsp;<span class="op" id="5925099">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925105">m</span>&nbsp;<span class="op" id="5925107">=</span>&nbsp;<span class="ident" id="5925109">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925122">delta</span>&nbsp;<span class="op" id="5925128">+=</span>&nbsp;<span class="op" id="5925131">(</span><span class="ident" id="5925132">m</span>&nbsp;<span class="op" id="5925134">-</span>&nbsp;<span class="ident" id="5925136">n</span><span class="op" id="5925137">)</span>&nbsp;<span class="op" id="5925139">*</span>&nbsp;<span class="op" id="5925141">(</span><span class="ident" id="5925142">h</span>&nbsp;<span class="op" id="5925144">+</span>&nbsp;<span class="num" id="5925146">1</span><span class="op" id="5925147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925151">if</span>&nbsp;<span class="ident" id="5925154">delta</span>&nbsp;<span class="op" id="5925160">&lt;</span>&nbsp;<span class="num" id="5925162">0</span>&nbsp;<span class="op" id="5925164">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925169">return</span>&nbsp;<span class="string" id="5925176">&#34;&#34;</span><span class="op" id="5925178">,</span>&nbsp;<span class="ident" id="5925180">fmt</span><span class="op" id="5925183">.</span><span class="ident" id="5925184">Errorf</span><span class="op" id="5925190">(</span><span class="string" id="5925191">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5925220">,</span>&nbsp;<span class="ident" id="5925222">s</span><span class="op" id="5925223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925231">n</span>&nbsp;<span class="op" id="5925233">=</span>&nbsp;<span class="ident" id="5925235">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925239">for</span>&nbsp;<span class="ident" id="5925243">_</span><span class="op" id="5925244">,</span>&nbsp;<span class="ident" id="5925246">r</span>&nbsp;<span class="op" id="5925248">:=</span>&nbsp;<span class="keyword" id="5925251">range</span>&nbsp;<span class="ident" id="5925257">s</span>&nbsp;<span class="op" id="5925259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925264">if</span>&nbsp;<span class="ident" id="5925267">r</span>&nbsp;<span class="op" id="5925269">&lt;</span>&nbsp;<span class="ident" id="5925271">n</span>&nbsp;<span class="op" id="5925273">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925279">delta</span><span class="op" id="5925284">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925291">if</span>&nbsp;<span class="ident" id="5925294">delta</span>&nbsp;<span class="op" id="5925300">&lt;</span>&nbsp;<span class="num" id="5925302">0</span>&nbsp;<span class="op" id="5925304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925311">return</span>&nbsp;<span class="string" id="5925318">&#34;&#34;</span><span class="op" id="5925320">,</span>&nbsp;<span class="ident" id="5925322">fmt</span><span class="op" id="5925325">.</span><span class="ident" id="5925326">Errorf</span><span class="op" id="5925332">(</span><span class="string" id="5925333">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5925362">,</span>&nbsp;<span class="ident" id="5925364">s</span><span class="op" id="5925365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925377">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925394">if</span>&nbsp;<span class="ident" id="5925397">r</span>&nbsp;<span class="op" id="5925399">&gt;</span>&nbsp;<span class="ident" id="5925401">n</span>&nbsp;<span class="op" id="5925403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925409">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925426">q</span>&nbsp;<span class="op" id="5925428">:=</span>&nbsp;<span class="ident" id="5925431">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925440">for</span>&nbsp;<span class="ident" id="5925444">k</span>&nbsp;<span class="op" id="5925446">:=</span>&nbsp;<span class="ident" id="5925449">base</span><span class="op" id="5925453">;</span>&nbsp;<span class="op" id="5925455">;</span>&nbsp;<span class="ident" id="5925457">k</span>&nbsp;<span class="op" id="5925459">+=</span>&nbsp;<span class="ident" id="5925462">base</span>&nbsp;<span class="op" id="5925467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925473">t</span>&nbsp;<span class="op" id="5925475">:=</span>&nbsp;<span class="ident" id="5925478">k</span>&nbsp;<span class="op" id="5925480">-</span>&nbsp;<span class="ident" id="5925482">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925491">if</span>&nbsp;<span class="ident" id="5925494">t</span>&nbsp;<span class="op" id="5925496">&lt;</span>&nbsp;<span class="ident" id="5925498">tmin</span>&nbsp;<span class="op" id="5925503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925510">t</span>&nbsp;<span class="op" id="5925512">=</span>&nbsp;<span class="ident" id="5925514">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925523">}</span>&nbsp;<span class="keyword" id="5925525">else</span>&nbsp;<span class="keyword" id="5925530">if</span>&nbsp;<span class="ident" id="5925533">t</span>&nbsp;<span class="op" id="5925535">&gt;</span>&nbsp;<span class="ident" id="5925537">tmax</span>&nbsp;<span class="op" id="5925542">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925549">t</span>&nbsp;<span class="op" id="5925551">=</span>&nbsp;<span class="ident" id="5925553">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925568">if</span>&nbsp;<span class="ident" id="5925571">q</span>&nbsp;<span class="op" id="5925573">&lt;</span>&nbsp;<span class="ident" id="5925575">t</span>&nbsp;<span class="op" id="5925577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925584">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925594">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925600">output</span>&nbsp;<span class="op" id="5925607">=</span>&nbsp;<span class="builtinfunc" id="5925609">append</span><span class="op" id="5925615">(</span><span class="ident" id="5925616">output</span><span class="op" id="5925622">,</span>&nbsp;<span class="ident" id="5925624">encodeDigit</span><span class="op" id="5925635">(</span><span class="ident" id="5925636">t</span><span class="op" id="5925637">+</span><span class="op" id="5925638">(</span><span class="ident" id="5925639">q</span><span class="op" id="5925640">-</span><span class="ident" id="5925641">t</span><span class="op" id="5925642">)</span><span class="op" id="5925643">%</span><span class="op" id="5925644">(</span><span class="ident" id="5925645">base</span><span class="op" id="5925649">-</span><span class="ident" id="5925650">t</span><span class="op" id="5925651">)</span><span class="op" id="5925652">)</span><span class="op" id="5925653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925659">q</span>&nbsp;<span class="op" id="5925661">=</span>&nbsp;<span class="op" id="5925663">(</span><span class="ident" id="5925664">q</span>&nbsp;<span class="op" id="5925666">-</span>&nbsp;<span class="ident" id="5925668">t</span><span class="op" id="5925669">)</span>&nbsp;<span class="op" id="5925671">/</span>&nbsp;<span class="op" id="5925673">(</span><span class="ident" id="5925674">base</span>&nbsp;<span class="op" id="5925679">-</span>&nbsp;<span class="ident" id="5925681">t</span><span class="op" id="5925682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925692">output</span>&nbsp;<span class="op" id="5925699">=</span>&nbsp;<span class="builtinfunc" id="5925701">append</span><span class="op" id="5925707">(</span><span class="ident" id="5925708">output</span><span class="op" id="5925714">,</span>&nbsp;<span class="ident" id="5925716">encodeDigit</span><span class="op" id="5925727">(</span><span class="ident" id="5925728">q</span><span class="op" id="5925729">)</span><span class="op" id="5925730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925735">bias</span>&nbsp;<span class="op" id="5925740">=</span>&nbsp;<span class="ident" id="5925742">adapt</span><span class="op" id="5925747">(</span><span class="ident" id="5925748">delta</span><span class="op" id="5925753">,</span>&nbsp;<span class="ident" id="5925755">h</span><span class="op" id="5925756">+</span><span class="num" id="5925757">1</span><span class="op" id="5925758">,</span>&nbsp;<span class="ident" id="5925760">h</span>&nbsp;<span class="op" id="5925762">==</span>&nbsp;<span class="ident" id="5925765">b</span><span class="op" id="5925766">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925771">delta</span>&nbsp;<span class="op" id="5925777">=</span>&nbsp;<span class="num" id="5925779">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925784">h</span><span class="op" id="5925785">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925791">remaining</span><span class="op" id="5925800">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925809">delta</span><span class="op" id="5925814">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5925819">n</span><span class="op" id="5925820">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5925824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925827">return</span>&nbsp;<span class="builtintype" id="5925834">string</span><span class="op" id="5925840">(</span><span class="ident" id="5925841">output</span><span class="op" id="5925847">)</span><span class="op" id="5925848">,</span>&nbsp;<span class="builtintype" id="5925850">nil</span><br>
<span class="lineno"></span><span class="op" id="5925854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5925857">func</span>&nbsp;<span class="ident" id="5925862">encodeDigit</span><span class="op" id="5925873">(</span><span class="ident" id="5925874">digit</span>&nbsp;<span class="builtintype" id="5925880">int32</span><span class="op" id="5925885">)</span>&nbsp;<span class="builtintype" id="5925887">byte</span>&nbsp;<span class="op" id="5925892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925895">switch</span>&nbsp;<span class="op" id="5925902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925905">case</span>&nbsp;<span class="num" id="5925910">0</span>&nbsp;<span class="op" id="5925912">&lt;=</span>&nbsp;<span class="ident" id="5925915">digit</span>&nbsp;<span class="op" id="5925921">&amp;&amp;</span>&nbsp;<span class="ident" id="5925924">digit</span>&nbsp;<span class="op" id="5925930">&lt;</span>&nbsp;<span class="num" id="5925932">26</span><span class="op" id="5925934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925938">return</span>&nbsp;<span class="builtintype" id="5925945">byte</span><span class="op" id="5925949">(</span><span class="ident" id="5925950">digit</span>&nbsp;<span class="op" id="5925956">+</span>&nbsp;<span class="string" id="5925958">&#39;a&#39;</span><span class="op" id="5925961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925964">case</span>&nbsp;<span class="num" id="5925969">26</span>&nbsp;<span class="op" id="5925972">&lt;=</span>&nbsp;<span class="ident" id="5925975">digit</span>&nbsp;<span class="op" id="5925981">&amp;&amp;</span>&nbsp;<span class="ident" id="5925984">digit</span>&nbsp;<span class="op" id="5925990">&lt;</span>&nbsp;<span class="num" id="5925992">36</span><span class="op" id="5925994">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5925998">return</span>&nbsp;<span class="builtintype" id="5926005">byte</span><span class="op" id="5926009">(</span><span class="ident" id="5926010">digit</span>&nbsp;<span class="op" id="5926016">+</span>&nbsp;<span class="op" id="5926018">(</span><span class="string" id="5926019">&#39;0&#39;</span>&nbsp;<span class="op" id="5926023">-</span>&nbsp;<span class="num" id="5926025">26</span><span class="op" id="5926027">)</span><span class="op" id="5926028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5926034">panic</span><span class="op" id="5926039">(</span><span class="string" id="5926040">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5926088">)</span><br>
<span class="lineno"></span><span class="op" id="5926090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5926093">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5926160">func</span>&nbsp;<span class="ident" id="5926165">adapt</span><span class="op" id="5926170">(</span><span class="ident" id="5926171">delta</span><span class="op" id="5926176">,</span>&nbsp;<span class="ident" id="5926178">numPoints</span>&nbsp;<span class="builtintype" id="5926188">int32</span><span class="op" id="5926193">,</span>&nbsp;<span class="ident" id="5926195">firstTime</span>&nbsp;<span class="builtintype" id="5926205">bool</span><span class="op" id="5926209">)</span>&nbsp;<span class="builtintype" id="5926211">int32</span>&nbsp;<span class="op" id="5926217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926220">if</span>&nbsp;<span class="ident" id="5926223">firstTime</span>&nbsp;<span class="op" id="5926233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926237">delta</span>&nbsp;<span class="op" id="5926243">/=</span>&nbsp;<span class="ident" id="5926246">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926252">}</span>&nbsp;<span class="keyword" id="5926254">else</span>&nbsp;<span class="op" id="5926259">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926263">delta</span>&nbsp;<span class="op" id="5926269">/=</span>&nbsp;<span class="num" id="5926272">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926278">delta</span>&nbsp;<span class="op" id="5926284">+=</span>&nbsp;<span class="ident" id="5926287">delta</span>&nbsp;<span class="op" id="5926293">/</span>&nbsp;<span class="ident" id="5926295">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926306">k</span>&nbsp;<span class="op" id="5926308">:=</span>&nbsp;<span class="builtintype" id="5926311">int32</span><span class="op" id="5926316">(</span><span class="num" id="5926317">0</span><span class="op" id="5926318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926321">for</span>&nbsp;<span class="ident" id="5926325">delta</span>&nbsp;<span class="op" id="5926331">&gt;</span>&nbsp;<span class="op" id="5926333">(</span><span class="op" id="5926334">(</span><span class="ident" id="5926335">base</span><span class="op" id="5926339">-</span><span class="ident" id="5926340">tmin</span><span class="op" id="5926344">)</span><span class="op" id="5926345">*</span><span class="ident" id="5926346">tmax</span><span class="op" id="5926350">)</span><span class="op" id="5926351">/</span><span class="num" id="5926352">2</span>&nbsp;<span class="op" id="5926354">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926358">delta</span>&nbsp;<span class="op" id="5926364">/=</span>&nbsp;<span class="ident" id="5926367">base</span>&nbsp;<span class="op" id="5926372">-</span>&nbsp;<span class="ident" id="5926374">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926381">k</span>&nbsp;<span class="op" id="5926383">+=</span>&nbsp;<span class="ident" id="5926386">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926395">return</span>&nbsp;<span class="ident" id="5926402">k</span>&nbsp;<span class="op" id="5926404">+</span>&nbsp;<span class="op" id="5926406">(</span><span class="ident" id="5926407">base</span><span class="op" id="5926411">-</span><span class="ident" id="5926412">tmin</span><span class="op" id="5926416">+</span><span class="num" id="5926417">1</span><span class="op" id="5926418">)</span><span class="op" id="5926419">*</span><span class="ident" id="5926420">delta</span><span class="op" id="5926425">/</span><span class="op" id="5926426">(</span><span class="ident" id="5926427">delta</span><span class="op" id="5926432">+</span><span class="ident" id="5926433">skew</span><span class="op" id="5926437">)</span><br>
<span class="lineno"></span><span class="op" id="5926439">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5926442">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5926519">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5926568">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5926622">const</span>&nbsp;<span class="ident" id="5926628">acePrefix</span>&nbsp;<span class="op" id="5926638">=</span>&nbsp;<span class="string" id="5926640">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5926648">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5926725">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5926795">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5926829">func</span>&nbsp;<span class="ident" id="5926834">toASCII</span><span class="op" id="5926841">(</span><span class="ident" id="5926842">s</span>&nbsp;<span class="builtintype" id="5926844">string</span><span class="op" id="5926850">)</span>&nbsp;<span class="op" id="5926852">(</span><span class="builtintype" id="5926853">string</span><span class="op" id="5926859">,</span>&nbsp;<span class="builtintype" id="5926861">error</span><span class="op" id="5926866">)</span>&nbsp;<span class="op" id="5926868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926871">if</span>&nbsp;<span class="ident" id="5926874">ascii</span><span class="op" id="5926879">(</span><span class="ident" id="5926880">s</span><span class="op" id="5926881">)</span>&nbsp;<span class="op" id="5926883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926887">return</span>&nbsp;<span class="ident" id="5926894">s</span><span class="op" id="5926895">,</span>&nbsp;<span class="builtintype" id="5926897">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5926902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926905">labels</span>&nbsp;<span class="op" id="5926912">:=</span>&nbsp;<span class="ident" id="5926915">strings</span><span class="op" id="5926922">.</span><span class="ident" id="5926923">Split</span><span class="op" id="5926928">(</span><span class="ident" id="5926929">s</span><span class="op" id="5926930">,</span>&nbsp;<span class="string" id="5926932">&#34;.&#34;</span><span class="op" id="5926935">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926938">for</span>&nbsp;<span class="ident" id="5926942">i</span><span class="op" id="5926943">,</span>&nbsp;<span class="ident" id="5926945">label</span>&nbsp;<span class="op" id="5926951">:=</span>&nbsp;<span class="keyword" id="5926954">range</span>&nbsp;<span class="ident" id="5926960">labels</span>&nbsp;<span class="op" id="5926967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5926971">if</span>&nbsp;<span class="op" id="5926974">!</span><span class="ident" id="5926975">ascii</span><span class="op" id="5926980">(</span><span class="ident" id="5926981">label</span><span class="op" id="5926986">)</span>&nbsp;<span class="op" id="5926988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5926993">a</span><span class="op" id="5926994">,</span>&nbsp;<span class="ident" id="5926996">err</span>&nbsp;<span class="op" id="5927000">:=</span>&nbsp;<span class="ident" id="5927003">encode</span><span class="op" id="5927009">(</span><span class="ident" id="5927010">acePrefix</span><span class="op" id="5927019">,</span>&nbsp;<span class="ident" id="5927021">label</span><span class="op" id="5927026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927031">if</span>&nbsp;<span class="ident" id="5927034">err</span>&nbsp;<span class="op" id="5927038">!=</span>&nbsp;<span class="builtintype" id="5927041">nil</span>&nbsp;<span class="op" id="5927045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927051">return</span>&nbsp;<span class="string" id="5927058">&#34;&#34;</span><span class="op" id="5927060">,</span>&nbsp;<span class="ident" id="5927062">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5927074">labels</span><span class="op" id="5927080">[</span><span class="ident" id="5927081">i</span><span class="op" id="5927082">]</span>&nbsp;<span class="op" id="5927084">=</span>&nbsp;<span class="ident" id="5927086">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927096">return</span>&nbsp;<span class="ident" id="5927103">strings</span><span class="op" id="5927110">.</span><span class="ident" id="5927111">Join</span><span class="op" id="5927115">(</span><span class="ident" id="5927116">labels</span><span class="op" id="5927122">,</span>&nbsp;<span class="string" id="5927124">&#34;.&#34;</span><span class="op" id="5927127">)</span><span class="op" id="5927128">,</span>&nbsp;<span class="builtintype" id="5927130">nil</span><br>
<span class="lineno">150</span><span class="op" id="5927134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5927137">func</span>&nbsp;<span class="ident" id="5927142">ascii</span><span class="op" id="5927147">(</span><span class="ident" id="5927148">s</span>&nbsp;<span class="builtintype" id="5927150">string</span><span class="op" id="5927156">)</span>&nbsp;<span class="builtintype" id="5927158">bool</span>&nbsp;<span class="op" id="5927163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927166">for</span>&nbsp;<span class="ident" id="5927170">i</span>&nbsp;<span class="op" id="5927172">:=</span>&nbsp;<span class="num" id="5927175">0</span><span class="op" id="5927176">;</span>&nbsp;<span class="ident" id="5927178">i</span>&nbsp;<span class="op" id="5927180">&lt;</span>&nbsp;<span class="builtinfunc" id="5927182">len</span><span class="op" id="5927185">(</span><span class="ident" id="5927186">s</span><span class="op" id="5927187">)</span><span class="op" id="5927188">;</span>&nbsp;<span class="ident" id="5927190">i</span><span class="op" id="5927191">++</span>&nbsp;<span class="op" id="5927194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927198">if</span>&nbsp;<span class="ident" id="5927201">s</span><span class="op" id="5927202">[</span><span class="ident" id="5927203">i</span><span class="op" id="5927204">]</span>&nbsp;<span class="op" id="5927206">&gt;=</span>&nbsp;<span class="ident" id="5927209">utf8</span><span class="op" id="5927213">.</span><span class="ident" id="5927214">RuneSelf</span>&nbsp;<span class="op" id="5927223">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927228">return</span>&nbsp;<span class="builtintype" id="5927235">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5927246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5927249">return</span>&nbsp;<span class="builtintype" id="5927256">true</span><br>
<span class="lineno"></span><span class="op" id="5927261">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
