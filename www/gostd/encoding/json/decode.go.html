<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5279364">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5279419">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5279473">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5279524">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="5279599">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5279630">package</span>&nbsp;<span class="ident" id="5279638">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5279644">import</span>&nbsp;<span class="op" id="5279651">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279654">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279663">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279675">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279694">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279704">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279711">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279722">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279733">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279744">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279755">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5279772">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5279787">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5279790">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="5279854">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5279887">//</span><br>
<span class="lineno"></span><span class="comment" id="5279890">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5279942">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5280011">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="5280051">//</span><br>
<span class="lineno"></span><span class="comment" id="5280054">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5280127">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5280198">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="5280268">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="5280342">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="5280387">//</span><br>
<span class="lineno"></span><span class="comment" id="5280390">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="5280460">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="5280539">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="5280613">//</span><br>
<span class="lineno"></span><span class="comment" id="5280616">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5280662">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="5280719">//</span><br>
<span class="lineno"></span><span class="comment" id="5280722">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="5280749">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="5280778">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="5280806">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="5280840">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5280884">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="5280905">//</span><br>
<span class="lineno"></span><span class="comment" id="5280908">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="5280971">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5281031">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="5281099">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="5281163">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5281224">//</span><br>
<span class="lineno"></span><span class="comment" id="5281227">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="5281303">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="5281382">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="5281464">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5281503">//</span><br>
<span class="lineno"></span><span class="comment" id="5281506">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5281560">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5281623">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="5281680">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="5281701">//</span><br>
<span class="lineno"></span><span class="keyword" id="5281704">func</span>&nbsp;<span class="ident" id="5281709">Unmarshal</span><span class="op" id="5281718">(</span><span class="ident" id="5281719">data</span>&nbsp;<span class="op" id="5281724">[</span><span class="op" id="5281725">]</span><span class="builtintype" id="5281726">byte</span><span class="op" id="5281730">,</span>&nbsp;<span class="ident" id="5281732">v</span>&nbsp;<span class="keyword" id="5281734">interface</span><span class="op" id="5281743">{</span><span class="op" id="5281744">}</span><span class="op" id="5281745">)</span>&nbsp;<span class="builtintype" id="5281747">error</span>&nbsp;<span class="op" id="5281753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281756">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281787">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281832">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281876">var</span>&nbsp;<span class="ident" id="5281880">d</span>&nbsp;<span class="ident" id="5281882">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281895">err</span>&nbsp;<span class="op" id="5281899">:=</span>&nbsp;<span class="ident" id="5281902">checkValid</span><span class="op" id="5281912">(</span><span class="ident" id="5281913">data</span><span class="op" id="5281917">,</span>&nbsp;<span class="op" id="5281919">&amp;</span><span class="ident" id="5281920">d</span><span class="op" id="5281921">.</span><span class="ident" id="5281922">scan</span><span class="op" id="5281926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281929">if</span>&nbsp;<span class="ident" id="5281932">err</span>&nbsp;<span class="op" id="5281936">!=</span>&nbsp;<span class="ident" id="5281939">nil</span>&nbsp;<span class="op" id="5281943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281947">return</span>&nbsp;<span class="ident" id="5281954">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281963">d</span><span class="op" id="5281964">.</span><span class="ident" id="5281965">init</span><span class="op" id="5281969">(</span><span class="ident" id="5281970">data</span><span class="op" id="5281974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281977">return</span>&nbsp;<span class="ident" id="5281984">d</span><span class="op" id="5281985">.</span><span class="ident" id="5281986">unmarshal</span><span class="op" id="5281995">(</span><span class="ident" id="5281996">v</span><span class="op" id="5281997">)</span><br>
<span class="lineno"></span><span class="op" id="5281999">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5282002">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="5282057">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5282113">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5282167">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="5282222">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="5282274">type</span>&nbsp;<span class="ident" id="5282279">Unmarshaler</span>&nbsp;<span class="keyword" id="5282291">interface</span>&nbsp;<span class="op" id="5282301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282304">UnmarshalJSON</span><span class="op" id="5282317">(</span><span class="op" id="5282318">[</span><span class="op" id="5282319">]</span><span class="builtintype" id="5282320">byte</span><span class="op" id="5282324">)</span>&nbsp;<span class="builtintype" id="5282326">error</span><br>
<span class="lineno"></span><span class="op" id="5282332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="5282335">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="5282392">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5282446">type</span>&nbsp;<span class="ident" id="5282451">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="5282470">struct</span>&nbsp;<span class="op" id="5282477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282480">Value</span>&nbsp;<span class="builtintype" id="5282486">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5282499">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282560">Type</span>&nbsp;&nbsp;<span class="ident" id="5282566">reflect</span><span class="op" id="5282573">.</span><span class="ident" id="5282574">Type</span>&nbsp;<span class="comment" id="5282579">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="5282627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5282630">func</span>&nbsp;<span class="op" id="5282635">(</span><span class="ident" id="5282636">e</span>&nbsp;<span class="op" id="5282638">*</span><span class="ident" id="5282639">UnmarshalTypeError</span><span class="op" id="5282657">)</span>&nbsp;<span class="ident" id="5282659">Error</span><span class="op" id="5282664">(</span><span class="op" id="5282665">)</span>&nbsp;<span class="builtintype" id="5282667">string</span>&nbsp;<span class="op" id="5282674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282677">return</span>&nbsp;<span class="string" id="5282684">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="5282710">+</span>&nbsp;<span class="ident" id="5282712">e</span><span class="op" id="5282713">.</span><span class="ident" id="5282714">Value</span>&nbsp;<span class="op" id="5282720">+</span>&nbsp;<span class="string" id="5282722">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5282748">+</span>&nbsp;<span class="ident" id="5282750">e</span><span class="op" id="5282751">.</span><span class="ident" id="5282752">Type</span><span class="op" id="5282756">.</span><span class="ident" id="5282757">String</span><span class="op" id="5282763">(</span><span class="op" id="5282764">)</span><br>
<span class="lineno"></span><span class="op" id="5282766">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5282769">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5282828">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5282893">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="5282938">type</span>&nbsp;<span class="ident" id="5282943">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="5282963">struct</span>&nbsp;<span class="op" id="5282970">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282973">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5282979">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282987">Type</span>&nbsp;&nbsp;<span class="ident" id="5282993">reflect</span><span class="op" id="5283000">.</span><span class="ident" id="5283001">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283007">Field</span>&nbsp;<span class="ident" id="5283013">reflect</span><span class="op" id="5283020">.</span><span class="ident" id="5283021">StructField</span><br>
<span class="lineno"></span><span class="op" id="5283033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="5283036">func</span>&nbsp;<span class="op" id="5283041">(</span><span class="ident" id="5283042">e</span>&nbsp;<span class="op" id="5283044">*</span><span class="ident" id="5283045">UnmarshalFieldError</span><span class="op" id="5283064">)</span>&nbsp;<span class="ident" id="5283066">Error</span><span class="op" id="5283071">(</span><span class="op" id="5283072">)</span>&nbsp;<span class="builtintype" id="5283074">string</span>&nbsp;<span class="op" id="5283081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283084">return</span>&nbsp;<span class="string" id="5283091">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="5283128">+</span>&nbsp;<span class="ident" id="5283130">strconv</span><span class="op" id="5283137">.</span><span class="ident" id="5283138">Quote</span><span class="op" id="5283143">(</span><span class="ident" id="5283144">e</span><span class="op" id="5283145">.</span><span class="ident" id="5283146">Key</span><span class="op" id="5283149">)</span>&nbsp;<span class="op" id="5283151">+</span>&nbsp;<span class="string" id="5283153">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="5283179">+</span>&nbsp;<span class="ident" id="5283181">e</span><span class="op" id="5283182">.</span><span class="ident" id="5283183">Field</span><span class="op" id="5283188">.</span><span class="ident" id="5283189">Name</span>&nbsp;<span class="op" id="5283194">+</span>&nbsp;<span class="string" id="5283196">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5283208">+</span>&nbsp;<span class="ident" id="5283210">e</span><span class="op" id="5283211">.</span><span class="ident" id="5283212">Type</span><span class="op" id="5283216">.</span><span class="ident" id="5283217">String</span><span class="op" id="5283223">(</span><span class="op" id="5283224">)</span><br>
<span class="lineno"></span><span class="op" id="5283226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5283229">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="5283308">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="5283366">type</span>&nbsp;<span class="ident" id="5283371">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="5283393">struct</span>&nbsp;<span class="op" id="5283400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283403">Type</span>&nbsp;<span class="ident" id="5283408">reflect</span><span class="op" id="5283415">.</span><span class="ident" id="5283416">Type</span><br>
<span class="lineno"></span><span class="op" id="5283421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="5283424">func</span>&nbsp;<span class="op" id="5283429">(</span><span class="ident" id="5283430">e</span>&nbsp;<span class="op" id="5283432">*</span><span class="ident" id="5283433">InvalidUnmarshalError</span><span class="op" id="5283454">)</span>&nbsp;<span class="ident" id="5283456">Error</span><span class="op" id="5283461">(</span><span class="op" id="5283462">)</span>&nbsp;<span class="builtintype" id="5283464">string</span>&nbsp;<span class="op" id="5283471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283474">if</span>&nbsp;<span class="ident" id="5283477">e</span><span class="op" id="5283478">.</span><span class="ident" id="5283479">Type</span>&nbsp;<span class="op" id="5283484">==</span>&nbsp;<span class="ident" id="5283487">nil</span>&nbsp;<span class="op" id="5283491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283495">return</span>&nbsp;<span class="string" id="5283502">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283530">if</span>&nbsp;<span class="ident" id="5283533">e</span><span class="op" id="5283534">.</span><span class="ident" id="5283535">Type</span><span class="op" id="5283539">.</span><span class="ident" id="5283540">Kind</span><span class="op" id="5283544">(</span><span class="op" id="5283545">)</span>&nbsp;<span class="op" id="5283547">!=</span>&nbsp;<span class="ident" id="5283550">reflect</span><span class="op" id="5283557">.</span><span class="ident" id="5283558">Ptr</span>&nbsp;<span class="op" id="5283562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283566">return</span>&nbsp;<span class="string" id="5283573">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="5283604">+</span>&nbsp;<span class="ident" id="5283606">e</span><span class="op" id="5283607">.</span><span class="ident" id="5283608">Type</span><span class="op" id="5283612">.</span><span class="ident" id="5283613">String</span><span class="op" id="5283619">(</span><span class="op" id="5283620">)</span>&nbsp;<span class="op" id="5283622">+</span>&nbsp;<span class="string" id="5283624">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283632">return</span>&nbsp;<span class="string" id="5283639">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="5283662">+</span>&nbsp;<span class="ident" id="5283664">e</span><span class="op" id="5283665">.</span><span class="ident" id="5283666">Type</span><span class="op" id="5283670">.</span><span class="ident" id="5283671">String</span><span class="op" id="5283677">(</span><span class="op" id="5283678">)</span>&nbsp;<span class="op" id="5283680">+</span>&nbsp;<span class="string" id="5283682">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5283686">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="5283689">func</span>&nbsp;<span class="op" id="5283694">(</span><span class="ident" id="5283695">d</span>&nbsp;<span class="op" id="5283697">*</span><span class="ident" id="5283698">decodeState</span><span class="op" id="5283709">)</span>&nbsp;<span class="ident" id="5283711">unmarshal</span><span class="op" id="5283720">(</span><span class="ident" id="5283721">v</span>&nbsp;<span class="keyword" id="5283723">interface</span><span class="op" id="5283732">{</span><span class="op" id="5283733">}</span><span class="op" id="5283734">)</span>&nbsp;<span class="op" id="5283736">(</span><span class="ident" id="5283737">err</span>&nbsp;<span class="builtintype" id="5283741">error</span><span class="op" id="5283746">)</span>&nbsp;<span class="op" id="5283748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283751">defer</span>&nbsp;<span class="keyword" id="5283757">func</span><span class="op" id="5283761">(</span><span class="op" id="5283762">)</span>&nbsp;<span class="op" id="5283764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283768">if</span>&nbsp;<span class="ident" id="5283771">r</span>&nbsp;<span class="op" id="5283773">:=</span>&nbsp;<span class="builtinfunc" id="5283776">recover</span><span class="op" id="5283783">(</span><span class="op" id="5283784">)</span><span class="op" id="5283785">;</span>&nbsp;<span class="ident" id="5283787">r</span>&nbsp;<span class="op" id="5283789">!=</span>&nbsp;<span class="ident" id="5283792">nil</span>&nbsp;<span class="op" id="5283796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283801">if</span>&nbsp;<span class="ident" id="5283804">_</span><span class="op" id="5283805">,</span>&nbsp;<span class="ident" id="5283807">ok</span>&nbsp;<span class="op" id="5283810">:=</span>&nbsp;<span class="ident" id="5283813">r</span><span class="op" id="5283814">.</span><span class="op" id="5283815">(</span><span class="ident" id="5283816">runtime</span><span class="op" id="5283823">.</span><span class="ident" id="5283824">Error</span><span class="op" id="5283829">)</span><span class="op" id="5283830">;</span>&nbsp;<span class="ident" id="5283832">ok</span>&nbsp;<span class="op" id="5283835">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5283841">panic</span><span class="op" id="5283846">(</span><span class="ident" id="5283847">r</span><span class="op" id="5283848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283858">err</span>&nbsp;<span class="op" id="5283862">=</span>&nbsp;<span class="ident" id="5283864">r</span><span class="op" id="5283865">.</span><span class="op" id="5283866">(</span><span class="builtintype" id="5283867">error</span><span class="op" id="5283872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283879">}</span><span class="op" id="5283880">(</span><span class="op" id="5283881">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283885">rv</span>&nbsp;<span class="op" id="5283888">:=</span>&nbsp;<span class="ident" id="5283891">reflect</span><span class="op" id="5283898">.</span><span class="ident" id="5283899">ValueOf</span><span class="op" id="5283906">(</span><span class="ident" id="5283907">v</span><span class="op" id="5283908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283911">if</span>&nbsp;<span class="ident" id="5283914">rv</span><span class="op" id="5283916">.</span><span class="ident" id="5283917">Kind</span><span class="op" id="5283921">(</span><span class="op" id="5283922">)</span>&nbsp;<span class="op" id="5283924">!=</span>&nbsp;<span class="ident" id="5283927">reflect</span><span class="op" id="5283934">.</span><span class="ident" id="5283935">Ptr</span>&nbsp;<span class="op" id="5283939">||</span>&nbsp;<span class="ident" id="5283942">rv</span><span class="op" id="5283944">.</span><span class="ident" id="5283945">IsNil</span><span class="op" id="5283950">(</span><span class="op" id="5283951">)</span>&nbsp;<span class="op" id="5283953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283957">return</span>&nbsp;<span class="op" id="5283964">&amp;</span><span class="ident" id="5283965">InvalidUnmarshalError</span><span class="op" id="5283986">{</span><span class="ident" id="5283987">reflect</span><span class="op" id="5283994">.</span><span class="ident" id="5283995">TypeOf</span><span class="op" id="5284001">(</span><span class="ident" id="5284002">v</span><span class="op" id="5284003">)</span><span class="op" id="5284004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284007">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284011">d</span><span class="op" id="5284012">.</span><span class="ident" id="5284013">scan</span><span class="op" id="5284017">.</span><span class="ident" id="5284018">reset</span><span class="op" id="5284023">(</span><span class="op" id="5284024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5284027">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5284090">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284146">d</span><span class="op" id="5284147">.</span><span class="ident" id="5284148">value</span><span class="op" id="5284153">(</span><span class="ident" id="5284154">rv</span><span class="op" id="5284156">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284159">return</span>&nbsp;<span class="ident" id="5284166">d</span><span class="op" id="5284167">.</span><span class="ident" id="5284168">savedError</span><br>
<span class="lineno"></span><span class="op" id="5284179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284182">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5284228">type</span>&nbsp;<span class="ident" id="5284233">Number</span>&nbsp;<span class="builtintype" id="5284240">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5284248">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="5284298">func</span>&nbsp;<span class="op" id="5284303">(</span><span class="ident" id="5284304">n</span>&nbsp;<span class="ident" id="5284306">Number</span><span class="op" id="5284312">)</span>&nbsp;<span class="ident" id="5284314">String</span><span class="op" id="5284320">(</span><span class="op" id="5284321">)</span>&nbsp;<span class="builtintype" id="5284323">string</span>&nbsp;<span class="op" id="5284330">{</span>&nbsp;<span class="keyword" id="5284332">return</span>&nbsp;<span class="builtintype" id="5284339">string</span><span class="op" id="5284345">(</span><span class="ident" id="5284346">n</span><span class="op" id="5284347">)</span>&nbsp;<span class="op" id="5284349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284352">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="5284396">func</span>&nbsp;<span class="op" id="5284401">(</span><span class="ident" id="5284402">n</span>&nbsp;<span class="ident" id="5284404">Number</span><span class="op" id="5284410">)</span>&nbsp;<span class="ident" id="5284412">Float64</span><span class="op" id="5284419">(</span><span class="op" id="5284420">)</span>&nbsp;<span class="op" id="5284422">(</span><span class="builtintype" id="5284423">float64</span><span class="op" id="5284430">,</span>&nbsp;<span class="builtintype" id="5284432">error</span><span class="op" id="5284437">)</span>&nbsp;<span class="op" id="5284439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284442">return</span>&nbsp;<span class="ident" id="5284449">strconv</span><span class="op" id="5284456">.</span><span class="ident" id="5284457">ParseFloat</span><span class="op" id="5284467">(</span><span class="builtintype" id="5284468">string</span><span class="op" id="5284474">(</span><span class="ident" id="5284475">n</span><span class="op" id="5284476">)</span><span class="op" id="5284477">,</span>&nbsp;<span class="num" id="5284479">64</span><span class="op" id="5284481">)</span><br>
<span class="lineno"></span><span class="op" id="5284483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284486">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="5284527">func</span>&nbsp;<span class="op" id="5284532">(</span><span class="ident" id="5284533">n</span>&nbsp;<span class="ident" id="5284535">Number</span><span class="op" id="5284541">)</span>&nbsp;<span class="ident" id="5284543">Int64</span><span class="op" id="5284548">(</span><span class="op" id="5284549">)</span>&nbsp;<span class="op" id="5284551">(</span><span class="ident" id="5284552">int64</span><span class="op" id="5284557">,</span>&nbsp;<span class="builtintype" id="5284559">error</span><span class="op" id="5284564">)</span>&nbsp;<span class="op" id="5284566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284569">return</span>&nbsp;<span class="ident" id="5284576">strconv</span><span class="op" id="5284583">.</span><span class="ident" id="5284584">ParseInt</span><span class="op" id="5284592">(</span><span class="builtintype" id="5284593">string</span><span class="op" id="5284599">(</span><span class="ident" id="5284600">n</span><span class="op" id="5284601">)</span><span class="op" id="5284602">,</span>&nbsp;<span class="num" id="5284604">10</span><span class="op" id="5284606">,</span>&nbsp;<span class="num" id="5284608">64</span><span class="op" id="5284610">)</span><br>
<span class="lineno"></span><span class="op" id="5284612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284615">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="5284680">type</span>&nbsp;<span class="ident" id="5284685">decodeState</span>&nbsp;<span class="keyword" id="5284697">struct</span>&nbsp;<span class="op" id="5284704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284707">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5284718">[</span><span class="op" id="5284719">]</span><span class="builtintype" id="5284720">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284726">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5284737">int</span>&nbsp;<span class="comment" id="5284741">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284765">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5284776">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284785">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5284796">scanner</span>&nbsp;<span class="comment" id="5284804">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284831">savedError</span>&nbsp;<span class="builtintype" id="5284842">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284849">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="5284860">bool</span><br>
<span class="lineno"></span><span class="op" id="5284865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284868">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="5284929">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="5284991">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="5285037">var</span>&nbsp;<span class="ident" id="5285041">errPhase</span>&nbsp;<span class="op" id="5285050">=</span>&nbsp;<span class="ident" id="5285052">errors</span><span class="op" id="5285058">.</span><span class="ident" id="5285059">New</span><span class="op" id="5285062">(</span><span class="string" id="5285063">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="5285116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5285119">func</span>&nbsp;<span class="op" id="5285124">(</span><span class="ident" id="5285125">d</span>&nbsp;<span class="op" id="5285127">*</span><span class="ident" id="5285128">decodeState</span><span class="op" id="5285139">)</span>&nbsp;<span class="ident" id="5285141">init</span><span class="op" id="5285145">(</span><span class="ident" id="5285146">data</span>&nbsp;<span class="op" id="5285151">[</span><span class="op" id="5285152">]</span><span class="builtintype" id="5285153">byte</span><span class="op" id="5285157">)</span>&nbsp;<span class="op" id="5285159">*</span><span class="ident" id="5285160">decodeState</span>&nbsp;<span class="op" id="5285172">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285175">d</span><span class="op" id="5285176">.</span><span class="ident" id="5285177">data</span>&nbsp;<span class="op" id="5285182">=</span>&nbsp;<span class="ident" id="5285184">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285190">d</span><span class="op" id="5285191">.</span><span class="ident" id="5285192">off</span>&nbsp;<span class="op" id="5285196">=</span>&nbsp;<span class="num" id="5285198">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285201">d</span><span class="op" id="5285202">.</span><span class="ident" id="5285203">savedError</span>&nbsp;<span class="op" id="5285214">=</span>&nbsp;<span class="ident" id="5285216">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285221">return</span>&nbsp;<span class="ident" id="5285228">d</span><br>
<span class="lineno"></span><span class="op" id="5285230">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5285233">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5285285">func</span>&nbsp;<span class="op" id="5285290">(</span><span class="ident" id="5285291">d</span>&nbsp;<span class="op" id="5285293">*</span><span class="ident" id="5285294">decodeState</span><span class="op" id="5285305">)</span>&nbsp;<span class="builtintype" id="5285307">error</span><span class="op" id="5285312">(</span><span class="ident" id="5285313">err</span>&nbsp;<span class="builtintype" id="5285317">error</span><span class="op" id="5285322">)</span>&nbsp;<span class="op" id="5285324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5285327">panic</span><span class="op" id="5285332">(</span><span class="ident" id="5285333">err</span><span class="op" id="5285336">)</span><br>
<span class="lineno"></span><span class="op" id="5285338">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5285341">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="5285393">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="5285439">func</span>&nbsp;<span class="op" id="5285444">(</span><span class="ident" id="5285445">d</span>&nbsp;<span class="op" id="5285447">*</span><span class="ident" id="5285448">decodeState</span><span class="op" id="5285459">)</span>&nbsp;<span class="ident" id="5285461">saveError</span><span class="op" id="5285470">(</span><span class="ident" id="5285471">err</span>&nbsp;<span class="builtintype" id="5285475">error</span><span class="op" id="5285480">)</span>&nbsp;<span class="op" id="5285482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285485">if</span>&nbsp;<span class="ident" id="5285488">d</span><span class="op" id="5285489">.</span><span class="ident" id="5285490">savedError</span>&nbsp;<span class="op" id="5285501">==</span>&nbsp;<span class="ident" id="5285504">nil</span>&nbsp;<span class="op" id="5285508">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285512">d</span><span class="op" id="5285513">.</span><span class="ident" id="5285514">savedError</span>&nbsp;<span class="op" id="5285525">=</span>&nbsp;<span class="ident" id="5285527">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5285532">}</span><br>
<span class="lineno"></span><span class="op" id="5285534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5285537">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="5285610">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="5285678">func</span>&nbsp;<span class="op" id="5285683">(</span><span class="ident" id="5285684">d</span>&nbsp;<span class="op" id="5285686">*</span><span class="ident" id="5285687">decodeState</span><span class="op" id="5285698">)</span>&nbsp;<span class="ident" id="5285700">next</span><span class="op" id="5285704">(</span><span class="op" id="5285705">)</span>&nbsp;<span class="op" id="5285707">[</span><span class="op" id="5285708">]</span><span class="builtintype" id="5285709">byte</span>&nbsp;<span class="op" id="5285714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285717">c</span>&nbsp;<span class="op" id="5285719">:=</span>&nbsp;<span class="ident" id="5285722">d</span><span class="op" id="5285723">.</span><span class="ident" id="5285724">data</span><span class="op" id="5285728">[</span><span class="ident" id="5285729">d</span><span class="op" id="5285730">.</span><span class="ident" id="5285731">off</span><span class="op" id="5285734">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285737">item</span><span class="op" id="5285741">,</span>&nbsp;<span class="ident" id="5285743">rest</span><span class="op" id="5285747">,</span>&nbsp;<span class="ident" id="5285749">err</span>&nbsp;<span class="op" id="5285753">:=</span>&nbsp;<span class="ident" id="5285756">nextValue</span><span class="op" id="5285765">(</span><span class="ident" id="5285766">d</span><span class="op" id="5285767">.</span><span class="ident" id="5285768">data</span><span class="op" id="5285772">[</span><span class="ident" id="5285773">d</span><span class="op" id="5285774">.</span><span class="ident" id="5285775">off</span><span class="op" id="5285778">:</span><span class="op" id="5285779">]</span><span class="op" id="5285780">,</span>&nbsp;<span class="op" id="5285782">&amp;</span><span class="ident" id="5285783">d</span><span class="op" id="5285784">.</span><span class="ident" id="5285785">nextscan</span><span class="op" id="5285793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285796">if</span>&nbsp;<span class="ident" id="5285799">err</span>&nbsp;<span class="op" id="5285803">!=</span>&nbsp;<span class="ident" id="5285806">nil</span>&nbsp;<span class="op" id="5285810">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285814">d</span><span class="op" id="5285815">.</span><span class="builtintype" id="5285816">error</span><span class="op" id="5285821">(</span><span class="ident" id="5285822">err</span><span class="op" id="5285825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5285828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285831">d</span><span class="op" id="5285832">.</span><span class="ident" id="5285833">off</span>&nbsp;<span class="op" id="5285837">=</span>&nbsp;<span class="builtinfunc" id="5285839">len</span><span class="op" id="5285842">(</span><span class="ident" id="5285843">d</span><span class="op" id="5285844">.</span><span class="ident" id="5285845">data</span><span class="op" id="5285849">)</span>&nbsp;<span class="op" id="5285851">-</span>&nbsp;<span class="builtinfunc" id="5285853">len</span><span class="op" id="5285856">(</span><span class="ident" id="5285857">rest</span><span class="op" id="5285861">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5285865">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5285916">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5285972">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286022">if</span>&nbsp;<span class="ident" id="5286025">c</span>&nbsp;<span class="op" id="5286027">==</span>&nbsp;<span class="string" id="5286030">&#39;{&#39;</span>&nbsp;<span class="op" id="5286034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286038">d</span><span class="op" id="5286039">.</span><span class="ident" id="5286040">scan</span><span class="op" id="5286044">.</span><span class="ident" id="5286045">step</span><span class="op" id="5286049">(</span><span class="op" id="5286050">&amp;</span><span class="ident" id="5286051">d</span><span class="op" id="5286052">.</span><span class="ident" id="5286053">scan</span><span class="op" id="5286057">,</span>&nbsp;<span class="string" id="5286059">&#39;}&#39;</span><span class="op" id="5286062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286065">}</span>&nbsp;<span class="keyword" id="5286067">else</span>&nbsp;<span class="op" id="5286072">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286076">d</span><span class="op" id="5286077">.</span><span class="ident" id="5286078">scan</span><span class="op" id="5286082">.</span><span class="ident" id="5286083">step</span><span class="op" id="5286087">(</span><span class="op" id="5286088">&amp;</span><span class="ident" id="5286089">d</span><span class="op" id="5286090">.</span><span class="ident" id="5286091">scan</span><span class="op" id="5286095">,</span>&nbsp;<span class="string" id="5286097">&#39;]&#39;</span><span class="op" id="5286100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286107">return</span>&nbsp;<span class="ident" id="5286114">item</span><br>
<span class="lineno"></span><span class="op" id="5286119">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5286122">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5286178">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="5286219">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="5286270">func</span>&nbsp;<span class="op" id="5286275">(</span><span class="ident" id="5286276">d</span>&nbsp;<span class="op" id="5286278">*</span><span class="ident" id="5286279">decodeState</span><span class="op" id="5286290">)</span>&nbsp;<span class="ident" id="5286292">scanWhile</span><span class="op" id="5286301">(</span><span class="ident" id="5286302">op</span>&nbsp;<span class="builtintype" id="5286305">int</span><span class="op" id="5286308">)</span>&nbsp;<span class="builtintype" id="5286310">int</span>&nbsp;<span class="op" id="5286314">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286317">var</span>&nbsp;<span class="ident" id="5286321">newOp</span>&nbsp;<span class="builtintype" id="5286327">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286332">for</span>&nbsp;<span class="op" id="5286336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286340">if</span>&nbsp;<span class="ident" id="5286343">d</span><span class="op" id="5286344">.</span><span class="ident" id="5286345">off</span>&nbsp;<span class="op" id="5286349">&gt;=</span>&nbsp;<span class="builtinfunc" id="5286352">len</span><span class="op" id="5286355">(</span><span class="ident" id="5286356">d</span><span class="op" id="5286357">.</span><span class="ident" id="5286358">data</span><span class="op" id="5286362">)</span>&nbsp;<span class="op" id="5286364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286369">newOp</span>&nbsp;<span class="op" id="5286375">=</span>&nbsp;<span class="ident" id="5286377">d</span><span class="op" id="5286378">.</span><span class="ident" id="5286379">scan</span><span class="op" id="5286383">.</span><span class="ident" id="5286384">eof</span><span class="op" id="5286387">(</span><span class="op" id="5286388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286393">d</span><span class="op" id="5286394">.</span><span class="ident" id="5286395">off</span>&nbsp;<span class="op" id="5286399">=</span>&nbsp;<span class="builtinfunc" id="5286401">len</span><span class="op" id="5286404">(</span><span class="ident" id="5286405">d</span><span class="op" id="5286406">.</span><span class="ident" id="5286407">data</span><span class="op" id="5286411">)</span>&nbsp;<span class="op" id="5286413">+</span>&nbsp;<span class="num" id="5286415">1</span>&nbsp;<span class="comment" id="5286417">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286452">}</span>&nbsp;<span class="keyword" id="5286454">else</span>&nbsp;<span class="op" id="5286459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286464">c</span>&nbsp;<span class="op" id="5286466">:=</span>&nbsp;<span class="builtintype" id="5286469">int</span><span class="op" id="5286472">(</span><span class="ident" id="5286473">d</span><span class="op" id="5286474">.</span><span class="ident" id="5286475">data</span><span class="op" id="5286479">[</span><span class="ident" id="5286480">d</span><span class="op" id="5286481">.</span><span class="ident" id="5286482">off</span><span class="op" id="5286485">]</span><span class="op" id="5286486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286491">d</span><span class="op" id="5286492">.</span><span class="ident" id="5286493">off</span><span class="op" id="5286496">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286502">newOp</span>&nbsp;<span class="op" id="5286508">=</span>&nbsp;<span class="ident" id="5286510">d</span><span class="op" id="5286511">.</span><span class="ident" id="5286512">scan</span><span class="op" id="5286516">.</span><span class="ident" id="5286517">step</span><span class="op" id="5286521">(</span><span class="op" id="5286522">&amp;</span><span class="ident" id="5286523">d</span><span class="op" id="5286524">.</span><span class="ident" id="5286525">scan</span><span class="op" id="5286529">,</span>&nbsp;<span class="ident" id="5286531">c</span><span class="op" id="5286532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286536">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286540">if</span>&nbsp;<span class="ident" id="5286543">newOp</span>&nbsp;<span class="op" id="5286549">!=</span>&nbsp;<span class="ident" id="5286552">op</span>&nbsp;<span class="op" id="5286555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286560">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286574">return</span>&nbsp;<span class="ident" id="5286581">newOp</span><br>
<span class="lineno">245</span><span class="op" id="5286587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5286590">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5286656">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5286709">func</span>&nbsp;<span class="op" id="5286714">(</span><span class="ident" id="5286715">d</span>&nbsp;<span class="op" id="5286717">*</span><span class="ident" id="5286718">decodeState</span><span class="op" id="5286729">)</span>&nbsp;<span class="ident" id="5286731">value</span><span class="op" id="5286736">(</span><span class="ident" id="5286737">v</span>&nbsp;<span class="ident" id="5286739">reflect</span><span class="op" id="5286746">.</span><span class="ident" id="5286747">Value</span><span class="op" id="5286752">)</span>&nbsp;<span class="op" id="5286754">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286757">if</span>&nbsp;<span class="op" id="5286760">!</span><span class="ident" id="5286761">v</span><span class="op" id="5286762">.</span><span class="ident" id="5286763">IsValid</span><span class="op" id="5286770">(</span><span class="op" id="5286771">)</span>&nbsp;<span class="op" id="5286773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286777">_</span><span class="op" id="5286778">,</span>&nbsp;<span class="ident" id="5286780">rest</span><span class="op" id="5286784">,</span>&nbsp;<span class="ident" id="5286786">err</span>&nbsp;<span class="op" id="5286790">:=</span>&nbsp;<span class="ident" id="5286793">nextValue</span><span class="op" id="5286802">(</span><span class="ident" id="5286803">d</span><span class="op" id="5286804">.</span><span class="ident" id="5286805">data</span><span class="op" id="5286809">[</span><span class="ident" id="5286810">d</span><span class="op" id="5286811">.</span><span class="ident" id="5286812">off</span><span class="op" id="5286815">:</span><span class="op" id="5286816">]</span><span class="op" id="5286817">,</span>&nbsp;<span class="op" id="5286819">&amp;</span><span class="ident" id="5286820">d</span><span class="op" id="5286821">.</span><span class="ident" id="5286822">nextscan</span><span class="op" id="5286830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286834">if</span>&nbsp;<span class="ident" id="5286837">err</span>&nbsp;<span class="op" id="5286841">!=</span>&nbsp;<span class="ident" id="5286844">nil</span>&nbsp;<span class="op" id="5286848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286853">d</span><span class="op" id="5286854">.</span><span class="builtintype" id="5286855">error</span><span class="op" id="5286860">(</span><span class="ident" id="5286861">err</span><span class="op" id="5286864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286868">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286872">d</span><span class="op" id="5286873">.</span><span class="ident" id="5286874">off</span>&nbsp;<span class="op" id="5286878">=</span>&nbsp;<span class="builtinfunc" id="5286880">len</span><span class="op" id="5286883">(</span><span class="ident" id="5286884">d</span><span class="op" id="5286885">.</span><span class="ident" id="5286886">data</span><span class="op" id="5286890">)</span>&nbsp;<span class="op" id="5286892">-</span>&nbsp;<span class="builtinfunc" id="5286894">len</span><span class="op" id="5286897">(</span><span class="ident" id="5286898">rest</span><span class="op" id="5286902">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5286907">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5286968">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5287030">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287084">if</span>&nbsp;<span class="ident" id="5287087">d</span><span class="op" id="5287088">.</span><span class="ident" id="5287089">scan</span><span class="op" id="5287093">.</span><span class="ident" id="5287094">redo</span>&nbsp;<span class="op" id="5287099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5287104">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287118">d</span><span class="op" id="5287119">.</span><span class="ident" id="5287120">scan</span><span class="op" id="5287124">.</span><span class="ident" id="5287125">redo</span>&nbsp;<span class="op" id="5287130">=</span>&nbsp;<span class="builtintype" id="5287132">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287141">d</span><span class="op" id="5287142">.</span><span class="ident" id="5287143">scan</span><span class="op" id="5287147">.</span><span class="ident" id="5287148">step</span>&nbsp;<span class="op" id="5287153">=</span>&nbsp;<span class="ident" id="5287155">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287173">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287177">d</span><span class="op" id="5287178">.</span><span class="ident" id="5287179">scan</span><span class="op" id="5287183">.</span><span class="ident" id="5287184">step</span><span class="op" id="5287188">(</span><span class="op" id="5287189">&amp;</span><span class="ident" id="5287190">d</span><span class="op" id="5287191">.</span><span class="ident" id="5287192">scan</span><span class="op" id="5287196">,</span>&nbsp;<span class="string" id="5287198">&#39;&#34;&#39;</span><span class="op" id="5287201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287205">d</span><span class="op" id="5287206">.</span><span class="ident" id="5287207">scan</span><span class="op" id="5287211">.</span><span class="ident" id="5287212">step</span><span class="op" id="5287216">(</span><span class="op" id="5287217">&amp;</span><span class="ident" id="5287218">d</span><span class="op" id="5287219">.</span><span class="ident" id="5287220">scan</span><span class="op" id="5287224">,</span>&nbsp;<span class="string" id="5287226">&#39;&#34;&#39;</span><span class="op" id="5287229">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287234">n</span>&nbsp;<span class="op" id="5287236">:=</span>&nbsp;<span class="builtinfunc" id="5287239">len</span><span class="op" id="5287242">(</span><span class="ident" id="5287243">d</span><span class="op" id="5287244">.</span><span class="ident" id="5287245">scan</span><span class="op" id="5287249">.</span><span class="ident" id="5287250">parseState</span><span class="op" id="5287260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287264">if</span>&nbsp;<span class="ident" id="5287267">n</span>&nbsp;<span class="op" id="5287269">&gt;</span>&nbsp;<span class="num" id="5287271">0</span>&nbsp;<span class="op" id="5287273">&amp;&amp;</span>&nbsp;<span class="ident" id="5287276">d</span><span class="op" id="5287277">.</span><span class="ident" id="5287278">scan</span><span class="op" id="5287282">.</span><span class="ident" id="5287283">parseState</span><span class="op" id="5287293">[</span><span class="ident" id="5287294">n</span><span class="op" id="5287295">-</span><span class="num" id="5287296">1</span><span class="op" id="5287297">]</span>&nbsp;<span class="op" id="5287299">==</span>&nbsp;<span class="ident" id="5287302">parseObjectKey</span>&nbsp;<span class="op" id="5287317">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5287322">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287388">d</span><span class="op" id="5287389">.</span><span class="ident" id="5287390">scan</span><span class="op" id="5287394">.</span><span class="ident" id="5287395">step</span><span class="op" id="5287399">(</span><span class="op" id="5287400">&amp;</span><span class="ident" id="5287401">d</span><span class="op" id="5287402">.</span><span class="ident" id="5287403">scan</span><span class="op" id="5287407">,</span>&nbsp;<span class="string" id="5287409">&#39;:&#39;</span><span class="op" id="5287412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287417">d</span><span class="op" id="5287418">.</span><span class="ident" id="5287419">scan</span><span class="op" id="5287423">.</span><span class="ident" id="5287424">step</span><span class="op" id="5287428">(</span><span class="op" id="5287429">&amp;</span><span class="ident" id="5287430">d</span><span class="op" id="5287431">.</span><span class="ident" id="5287432">scan</span><span class="op" id="5287436">,</span>&nbsp;<span class="string" id="5287438">&#39;&#34;&#39;</span><span class="op" id="5287441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287446">d</span><span class="op" id="5287447">.</span><span class="ident" id="5287448">scan</span><span class="op" id="5287452">.</span><span class="ident" id="5287453">step</span><span class="op" id="5287457">(</span><span class="op" id="5287458">&amp;</span><span class="ident" id="5287459">d</span><span class="op" id="5287460">.</span><span class="ident" id="5287461">scan</span><span class="op" id="5287465">,</span>&nbsp;<span class="string" id="5287467">&#39;&#34;&#39;</span><span class="op" id="5287470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287475">d</span><span class="op" id="5287476">.</span><span class="ident" id="5287477">scan</span><span class="op" id="5287481">.</span><span class="ident" id="5287482">step</span><span class="op" id="5287486">(</span><span class="op" id="5287487">&amp;</span><span class="ident" id="5287488">d</span><span class="op" id="5287489">.</span><span class="ident" id="5287490">scan</span><span class="op" id="5287494">,</span>&nbsp;<span class="string" id="5287496">&#39;}&#39;</span><span class="op" id="5287499">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287520">switch</span>&nbsp;<span class="ident" id="5287527">op</span>&nbsp;<span class="op" id="5287530">:=</span>&nbsp;<span class="ident" id="5287533">d</span><span class="op" id="5287534">.</span><span class="ident" id="5287535">scanWhile</span><span class="op" id="5287544">(</span><span class="ident" id="5287545">scanSkipSpace</span><span class="op" id="5287558">)</span><span class="op" id="5287559">;</span>&nbsp;<span class="ident" id="5287561">op</span>&nbsp;<span class="op" id="5287564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287567">default</span><span class="op" id="5287574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287578">d</span><span class="op" id="5287579">.</span><span class="builtintype" id="5287580">error</span><span class="op" id="5287585">(</span><span class="ident" id="5287586">errPhase</span><span class="op" id="5287594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287598">case</span>&nbsp;<span class="ident" id="5287603">scanBeginArray</span><span class="op" id="5287617">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287621">d</span><span class="op" id="5287622">.</span><span class="ident" id="5287623">array</span><span class="op" id="5287628">(</span><span class="ident" id="5287629">v</span><span class="op" id="5287630">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287634">case</span>&nbsp;<span class="ident" id="5287639">scanBeginObject</span><span class="op" id="5287654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287658">d</span><span class="op" id="5287659">.</span><span class="ident" id="5287660">object</span><span class="op" id="5287666">(</span><span class="ident" id="5287667">v</span><span class="op" id="5287668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287672">case</span>&nbsp;<span class="ident" id="5287677">scanBeginLiteral</span><span class="op" id="5287693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287697">d</span><span class="op" id="5287698">.</span><span class="ident" id="5287699">literal</span><span class="op" id="5287706">(</span><span class="ident" id="5287707">v</span><span class="op" id="5287708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287711">}</span><br>
<span class="lineno"></span><span class="op" id="5287713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="5287716">type</span>&nbsp;<span class="ident" id="5287721">unquotedValue</span>&nbsp;<span class="keyword" id="5287735">struct</span><span class="op" id="5287741">{</span><span class="op" id="5287742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5287745">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5287788">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5287854">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="5287922">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5287962">func</span>&nbsp;<span class="op" id="5287967">(</span><span class="ident" id="5287968">d</span>&nbsp;<span class="op" id="5287970">*</span><span class="ident" id="5287971">decodeState</span><span class="op" id="5287982">)</span>&nbsp;<span class="ident" id="5287984">valueQuoted</span><span class="op" id="5287995">(</span><span class="op" id="5287996">)</span>&nbsp;<span class="keyword" id="5287998">interface</span><span class="op" id="5288007">{</span><span class="op" id="5288008">}</span>&nbsp;<span class="op" id="5288010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288013">switch</span>&nbsp;<span class="ident" id="5288020">op</span>&nbsp;<span class="op" id="5288023">:=</span>&nbsp;<span class="ident" id="5288026">d</span><span class="op" id="5288027">.</span><span class="ident" id="5288028">scanWhile</span><span class="op" id="5288037">(</span><span class="ident" id="5288038">scanSkipSpace</span><span class="op" id="5288051">)</span><span class="op" id="5288052">;</span>&nbsp;<span class="ident" id="5288054">op</span>&nbsp;<span class="op" id="5288057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288060">default</span><span class="op" id="5288067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288071">d</span><span class="op" id="5288072">.</span><span class="builtintype" id="5288073">error</span><span class="op" id="5288078">(</span><span class="ident" id="5288079">errPhase</span><span class="op" id="5288087">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288091">case</span>&nbsp;<span class="ident" id="5288096">scanBeginArray</span><span class="op" id="5288110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288114">d</span><span class="op" id="5288115">.</span><span class="ident" id="5288116">array</span><span class="op" id="5288121">(</span><span class="ident" id="5288122">reflect</span><span class="op" id="5288129">.</span><span class="ident" id="5288130">Value</span><span class="op" id="5288135">{</span><span class="op" id="5288136">}</span><span class="op" id="5288137">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288141">case</span>&nbsp;<span class="ident" id="5288146">scanBeginObject</span><span class="op" id="5288161">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288165">d</span><span class="op" id="5288166">.</span><span class="ident" id="5288167">object</span><span class="op" id="5288173">(</span><span class="ident" id="5288174">reflect</span><span class="op" id="5288181">.</span><span class="ident" id="5288182">Value</span><span class="op" id="5288187">{</span><span class="op" id="5288188">}</span><span class="op" id="5288189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288193">case</span>&nbsp;<span class="ident" id="5288198">scanBeginLiteral</span><span class="op" id="5288214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288218">switch</span>&nbsp;<span class="ident" id="5288225">v</span>&nbsp;<span class="op" id="5288227">:=</span>&nbsp;<span class="ident" id="5288230">d</span><span class="op" id="5288231">.</span><span class="ident" id="5288232">literalInterface</span><span class="op" id="5288248">(</span><span class="op" id="5288249">)</span><span class="op" id="5288250">.</span><span class="op" id="5288251">(</span><span class="keyword" id="5288252">type</span><span class="op" id="5288256">)</span>&nbsp;<span class="op" id="5288258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288262">case</span>&nbsp;<span class="ident" id="5288267">nil</span><span class="op" id="5288270">,</span>&nbsp;<span class="builtintype" id="5288272">string</span><span class="op" id="5288278">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288283">return</span>&nbsp;<span class="ident" id="5288290">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288300">return</span>&nbsp;<span class="ident" id="5288307">unquotedValue</span><span class="op" id="5288320">{</span><span class="op" id="5288321">}</span><br>
<span class="lineno"></span><span class="op" id="5288323">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5288326">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="5288382">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="5288417">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="5288486">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="5288574">func</span>&nbsp;<span class="op" id="5288579">(</span><span class="ident" id="5288580">d</span>&nbsp;<span class="op" id="5288582">*</span><span class="ident" id="5288583">decodeState</span><span class="op" id="5288594">)</span>&nbsp;<span class="ident" id="5288596">indirect</span><span class="op" id="5288604">(</span><span class="ident" id="5288605">v</span>&nbsp;<span class="ident" id="5288607">reflect</span><span class="op" id="5288614">.</span><span class="ident" id="5288615">Value</span><span class="op" id="5288620">,</span>&nbsp;<span class="ident" id="5288622">decodingNull</span>&nbsp;<span class="builtintype" id="5288635">bool</span><span class="op" id="5288639">)</span>&nbsp;<span class="op" id="5288641">(</span><span class="ident" id="5288642">Unmarshaler</span><span class="op" id="5288653">,</span>&nbsp;<span class="ident" id="5288655">encoding</span><span class="op" id="5288663">.</span><span class="ident" id="5288664">TextUnmarshaler</span><span class="op" id="5288679">,</span>&nbsp;<span class="ident" id="5288681">reflect</span><span class="op" id="5288688">.</span><span class="ident" id="5288689">Value</span><span class="op" id="5288694">)</span>&nbsp;<span class="op" id="5288696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5288699">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5288744">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5288813">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288831">if</span>&nbsp;<span class="ident" id="5288834">v</span><span class="op" id="5288835">.</span><span class="ident" id="5288836">Kind</span><span class="op" id="5288840">(</span><span class="op" id="5288841">)</span>&nbsp;<span class="op" id="5288843">!=</span>&nbsp;<span class="ident" id="5288846">reflect</span><span class="op" id="5288853">.</span><span class="ident" id="5288854">Ptr</span>&nbsp;<span class="op" id="5288858">&amp;&amp;</span>&nbsp;<span class="ident" id="5288861">v</span><span class="op" id="5288862">.</span><span class="ident" id="5288863">Type</span><span class="op" id="5288867">(</span><span class="op" id="5288868">)</span><span class="op" id="5288869">.</span><span class="ident" id="5288870">Name</span><span class="op" id="5288874">(</span><span class="op" id="5288875">)</span>&nbsp;<span class="op" id="5288877">!=</span>&nbsp;<span class="string" id="5288880">&#34;&#34;</span>&nbsp;<span class="op" id="5288883">&amp;&amp;</span>&nbsp;<span class="ident" id="5288886">v</span><span class="op" id="5288887">.</span><span class="ident" id="5288888">CanAddr</span><span class="op" id="5288895">(</span><span class="op" id="5288896">)</span>&nbsp;<span class="op" id="5288898">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288902">v</span>&nbsp;<span class="op" id="5288904">=</span>&nbsp;<span class="ident" id="5288906">v</span><span class="op" id="5288907">.</span><span class="ident" id="5288908">Addr</span><span class="op" id="5288912">(</span><span class="op" id="5288913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288919">for</span>&nbsp;<span class="op" id="5288923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5288927">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5288990">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289017">if</span>&nbsp;<span class="ident" id="5289020">v</span><span class="op" id="5289021">.</span><span class="ident" id="5289022">Kind</span><span class="op" id="5289026">(</span><span class="op" id="5289027">)</span>&nbsp;<span class="op" id="5289029">==</span>&nbsp;<span class="ident" id="5289032">reflect</span><span class="op" id="5289039">.</span><span class="ident" id="5289040">Interface</span>&nbsp;<span class="op" id="5289050">&amp;&amp;</span>&nbsp;<span class="op" id="5289053">!</span><span class="ident" id="5289054">v</span><span class="op" id="5289055">.</span><span class="ident" id="5289056">IsNil</span><span class="op" id="5289061">(</span><span class="op" id="5289062">)</span>&nbsp;<span class="op" id="5289064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289069">e</span>&nbsp;<span class="op" id="5289071">:=</span>&nbsp;<span class="ident" id="5289074">v</span><span class="op" id="5289075">.</span><span class="ident" id="5289076">Elem</span><span class="op" id="5289080">(</span><span class="op" id="5289081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289086">if</span>&nbsp;<span class="ident" id="5289089">e</span><span class="op" id="5289090">.</span><span class="ident" id="5289091">Kind</span><span class="op" id="5289095">(</span><span class="op" id="5289096">)</span>&nbsp;<span class="op" id="5289098">==</span>&nbsp;<span class="ident" id="5289101">reflect</span><span class="op" id="5289108">.</span><span class="ident" id="5289109">Ptr</span>&nbsp;<span class="op" id="5289113">&amp;&amp;</span>&nbsp;<span class="op" id="5289116">!</span><span class="ident" id="5289117">e</span><span class="op" id="5289118">.</span><span class="ident" id="5289119">IsNil</span><span class="op" id="5289124">(</span><span class="op" id="5289125">)</span>&nbsp;<span class="op" id="5289127">&amp;&amp;</span>&nbsp;<span class="op" id="5289130">(</span><span class="op" id="5289131">!</span><span class="ident" id="5289132">decodingNull</span>&nbsp;<span class="op" id="5289145">||</span>&nbsp;<span class="ident" id="5289148">e</span><span class="op" id="5289149">.</span><span class="ident" id="5289150">Elem</span><span class="op" id="5289154">(</span><span class="op" id="5289155">)</span><span class="op" id="5289156">.</span><span class="ident" id="5289157">Kind</span><span class="op" id="5289161">(</span><span class="op" id="5289162">)</span>&nbsp;<span class="op" id="5289164">==</span>&nbsp;<span class="ident" id="5289167">reflect</span><span class="op" id="5289174">.</span><span class="ident" id="5289175">Ptr</span><span class="op" id="5289178">)</span>&nbsp;<span class="op" id="5289180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289186">v</span>&nbsp;<span class="op" id="5289188">=</span>&nbsp;<span class="ident" id="5289190">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289196">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289217">if</span>&nbsp;<span class="ident" id="5289220">v</span><span class="op" id="5289221">.</span><span class="ident" id="5289222">Kind</span><span class="op" id="5289226">(</span><span class="op" id="5289227">)</span>&nbsp;<span class="op" id="5289229">!=</span>&nbsp;<span class="ident" id="5289232">reflect</span><span class="op" id="5289239">.</span><span class="ident" id="5289240">Ptr</span>&nbsp;<span class="op" id="5289244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289249">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289262">if</span>&nbsp;<span class="ident" id="5289265">v</span><span class="op" id="5289266">.</span><span class="ident" id="5289267">Elem</span><span class="op" id="5289271">(</span><span class="op" id="5289272">)</span><span class="op" id="5289273">.</span><span class="ident" id="5289274">Kind</span><span class="op" id="5289278">(</span><span class="op" id="5289279">)</span>&nbsp;<span class="op" id="5289281">!=</span>&nbsp;<span class="ident" id="5289284">reflect</span><span class="op" id="5289291">.</span><span class="ident" id="5289292">Ptr</span>&nbsp;<span class="op" id="5289296">&amp;&amp;</span>&nbsp;<span class="ident" id="5289299">decodingNull</span>&nbsp;<span class="op" id="5289312">&amp;&amp;</span>&nbsp;<span class="ident" id="5289315">v</span><span class="op" id="5289316">.</span><span class="ident" id="5289317">CanSet</span><span class="op" id="5289323">(</span><span class="op" id="5289324">)</span>&nbsp;<span class="op" id="5289326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289331">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289339">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289343">if</span>&nbsp;<span class="ident" id="5289346">v</span><span class="op" id="5289347">.</span><span class="ident" id="5289348">IsNil</span><span class="op" id="5289353">(</span><span class="op" id="5289354">)</span>&nbsp;<span class="op" id="5289356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289361">v</span><span class="op" id="5289362">.</span><span class="ident" id="5289363">Set</span><span class="op" id="5289366">(</span><span class="ident" id="5289367">reflect</span><span class="op" id="5289374">.</span><span class="ident" id="5289375">New</span><span class="op" id="5289378">(</span><span class="ident" id="5289379">v</span><span class="op" id="5289380">.</span><span class="ident" id="5289381">Type</span><span class="op" id="5289385">(</span><span class="op" id="5289386">)</span><span class="op" id="5289387">.</span><span class="ident" id="5289388">Elem</span><span class="op" id="5289392">(</span><span class="op" id="5289393">)</span><span class="op" id="5289394">)</span><span class="op" id="5289395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289403">if</span>&nbsp;<span class="ident" id="5289406">v</span><span class="op" id="5289407">.</span><span class="ident" id="5289408">Type</span><span class="op" id="5289412">(</span><span class="op" id="5289413">)</span><span class="op" id="5289414">.</span><span class="ident" id="5289415">NumMethod</span><span class="op" id="5289424">(</span><span class="op" id="5289425">)</span>&nbsp;<span class="op" id="5289427">&gt;</span>&nbsp;<span class="num" id="5289429">0</span>&nbsp;<span class="op" id="5289431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289436">if</span>&nbsp;<span class="ident" id="5289439">u</span><span class="op" id="5289440">,</span>&nbsp;<span class="ident" id="5289442">ok</span>&nbsp;<span class="op" id="5289445">:=</span>&nbsp;<span class="ident" id="5289448">v</span><span class="op" id="5289449">.</span><span class="ident" id="5289450">Interface</span><span class="op" id="5289459">(</span><span class="op" id="5289460">)</span><span class="op" id="5289461">.</span><span class="op" id="5289462">(</span><span class="ident" id="5289463">Unmarshaler</span><span class="op" id="5289474">)</span><span class="op" id="5289475">;</span>&nbsp;<span class="ident" id="5289477">ok</span>&nbsp;<span class="op" id="5289480">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289486">return</span>&nbsp;<span class="ident" id="5289493">u</span><span class="op" id="5289494">,</span>&nbsp;<span class="ident" id="5289496">nil</span><span class="op" id="5289499">,</span>&nbsp;<span class="ident" id="5289501">reflect</span><span class="op" id="5289508">.</span><span class="ident" id="5289509">Value</span><span class="op" id="5289514">{</span><span class="op" id="5289515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289525">if</span>&nbsp;<span class="ident" id="5289528">u</span><span class="op" id="5289529">,</span>&nbsp;<span class="ident" id="5289531">ok</span>&nbsp;<span class="op" id="5289534">:=</span>&nbsp;<span class="ident" id="5289537">v</span><span class="op" id="5289538">.</span><span class="ident" id="5289539">Interface</span><span class="op" id="5289548">(</span><span class="op" id="5289549">)</span><span class="op" id="5289550">.</span><span class="op" id="5289551">(</span><span class="ident" id="5289552">encoding</span><span class="op" id="5289560">.</span><span class="ident" id="5289561">TextUnmarshaler</span><span class="op" id="5289576">)</span><span class="op" id="5289577">;</span>&nbsp;<span class="ident" id="5289579">ok</span>&nbsp;<span class="op" id="5289582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289588">return</span>&nbsp;<span class="ident" id="5289595">nil</span><span class="op" id="5289598">,</span>&nbsp;<span class="ident" id="5289600">u</span><span class="op" id="5289601">,</span>&nbsp;<span class="ident" id="5289603">reflect</span><span class="op" id="5289610">.</span><span class="ident" id="5289611">Value</span><span class="op" id="5289616">{</span><span class="op" id="5289617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289622">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289630">v</span>&nbsp;<span class="op" id="5289632">=</span>&nbsp;<span class="ident" id="5289634">v</span><span class="op" id="5289635">.</span><span class="ident" id="5289636">Elem</span><span class="op" id="5289640">(</span><span class="op" id="5289641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289647">return</span>&nbsp;<span class="ident" id="5289654">nil</span><span class="op" id="5289657">,</span>&nbsp;<span class="ident" id="5289659">nil</span><span class="op" id="5289662">,</span>&nbsp;<span class="ident" id="5289664">v</span><br>
<span class="lineno"></span><span class="op" id="5289666">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="5289669">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5289746">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5289806">func</span>&nbsp;<span class="op" id="5289811">(</span><span class="ident" id="5289812">d</span>&nbsp;<span class="op" id="5289814">*</span><span class="ident" id="5289815">decodeState</span><span class="op" id="5289826">)</span>&nbsp;<span class="ident" id="5289828">array</span><span class="op" id="5289833">(</span><span class="ident" id="5289834">v</span>&nbsp;<span class="ident" id="5289836">reflect</span><span class="op" id="5289843">.</span><span class="ident" id="5289844">Value</span><span class="op" id="5289849">)</span>&nbsp;<span class="op" id="5289851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5289854">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289881">u</span><span class="op" id="5289882">,</span>&nbsp;<span class="ident" id="5289884">ut</span><span class="op" id="5289886">,</span>&nbsp;<span class="ident" id="5289888">pv</span>&nbsp;<span class="op" id="5289891">:=</span>&nbsp;<span class="ident" id="5289894">d</span><span class="op" id="5289895">.</span><span class="ident" id="5289896">indirect</span><span class="op" id="5289904">(</span><span class="ident" id="5289905">v</span><span class="op" id="5289906">,</span>&nbsp;<span class="builtintype" id="5289908">false</span><span class="op" id="5289913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289916">if</span>&nbsp;<span class="ident" id="5289919">u</span>&nbsp;<span class="op" id="5289921">!=</span>&nbsp;<span class="ident" id="5289924">nil</span>&nbsp;<span class="op" id="5289928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289932">d</span><span class="op" id="5289933">.</span><span class="ident" id="5289934">off</span><span class="op" id="5289937">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289942">err</span>&nbsp;<span class="op" id="5289946">:=</span>&nbsp;<span class="ident" id="5289949">u</span><span class="op" id="5289950">.</span><span class="ident" id="5289951">UnmarshalJSON</span><span class="op" id="5289964">(</span><span class="ident" id="5289965">d</span><span class="op" id="5289966">.</span><span class="ident" id="5289967">next</span><span class="op" id="5289971">(</span><span class="op" id="5289972">)</span><span class="op" id="5289973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289977">if</span>&nbsp;<span class="ident" id="5289980">err</span>&nbsp;<span class="op" id="5289984">!=</span>&nbsp;<span class="ident" id="5289987">nil</span>&nbsp;<span class="op" id="5289991">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5289996">d</span><span class="op" id="5289997">.</span><span class="builtintype" id="5289998">error</span><span class="op" id="5290003">(</span><span class="ident" id="5290004">err</span><span class="op" id="5290007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290015">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290026">if</span>&nbsp;<span class="ident" id="5290029">ut</span>&nbsp;<span class="op" id="5290032">!=</span>&nbsp;<span class="ident" id="5290035">nil</span>&nbsp;<span class="op" id="5290039">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290043">d</span><span class="op" id="5290044">.</span><span class="ident" id="5290045">saveError</span><span class="op" id="5290054">(</span><span class="op" id="5290055">&amp;</span><span class="ident" id="5290056">UnmarshalTypeError</span><span class="op" id="5290074">{</span><span class="string" id="5290075">&#34;array&#34;</span><span class="op" id="5290082">,</span>&nbsp;<span class="ident" id="5290084">v</span><span class="op" id="5290085">.</span><span class="ident" id="5290086">Type</span><span class="op" id="5290090">(</span><span class="op" id="5290091">)</span><span class="op" id="5290092">}</span><span class="op" id="5290093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290097">d</span><span class="op" id="5290098">.</span><span class="ident" id="5290099">off</span><span class="op" id="5290102">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290107">d</span><span class="op" id="5290108">.</span><span class="ident" id="5290109">next</span><span class="op" id="5290113">(</span><span class="op" id="5290114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290118">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290126">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290130">v</span>&nbsp;<span class="op" id="5290132">=</span>&nbsp;<span class="ident" id="5290134">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290139">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290165">switch</span>&nbsp;<span class="ident" id="5290172">v</span><span class="op" id="5290173">.</span><span class="ident" id="5290174">Kind</span><span class="op" id="5290178">(</span><span class="op" id="5290179">)</span>&nbsp;<span class="op" id="5290181">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290184">case</span>&nbsp;<span class="ident" id="5290189">reflect</span><span class="op" id="5290196">.</span><span class="ident" id="5290197">Interface</span><span class="op" id="5290206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290210">if</span>&nbsp;<span class="ident" id="5290213">v</span><span class="op" id="5290214">.</span><span class="ident" id="5290215">NumMethod</span><span class="op" id="5290224">(</span><span class="op" id="5290225">)</span>&nbsp;<span class="op" id="5290227">==</span>&nbsp;<span class="num" id="5290230">0</span>&nbsp;<span class="op" id="5290232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290237">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290301">v</span><span class="op" id="5290302">.</span><span class="ident" id="5290303">Set</span><span class="op" id="5290306">(</span><span class="ident" id="5290307">reflect</span><span class="op" id="5290314">.</span><span class="ident" id="5290315">ValueOf</span><span class="op" id="5290322">(</span><span class="ident" id="5290323">d</span><span class="op" id="5290324">.</span><span class="ident" id="5290325">arrayInterface</span><span class="op" id="5290339">(</span><span class="op" id="5290340">)</span><span class="op" id="5290341">)</span><span class="op" id="5290342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290347">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290360">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290389">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290402">default</span><span class="op" id="5290409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290413">d</span><span class="op" id="5290414">.</span><span class="ident" id="5290415">saveError</span><span class="op" id="5290424">(</span><span class="op" id="5290425">&amp;</span><span class="ident" id="5290426">UnmarshalTypeError</span><span class="op" id="5290444">{</span><span class="string" id="5290445">&#34;array&#34;</span><span class="op" id="5290452">,</span>&nbsp;<span class="ident" id="5290454">v</span><span class="op" id="5290455">.</span><span class="ident" id="5290456">Type</span><span class="op" id="5290460">(</span><span class="op" id="5290461">)</span><span class="op" id="5290462">}</span><span class="op" id="5290463">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290467">d</span><span class="op" id="5290468">.</span><span class="ident" id="5290469">off</span><span class="op" id="5290472">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290477">d</span><span class="op" id="5290478">.</span><span class="ident" id="5290479">next</span><span class="op" id="5290483">(</span><span class="op" id="5290484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290488">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290496">case</span>&nbsp;<span class="ident" id="5290501">reflect</span><span class="op" id="5290508">.</span><span class="ident" id="5290509">Array</span><span class="op" id="5290514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290517">case</span>&nbsp;<span class="ident" id="5290522">reflect</span><span class="op" id="5290529">.</span><span class="ident" id="5290530">Slice</span><span class="op" id="5290535">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290539">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290550">i</span>&nbsp;<span class="op" id="5290552">:=</span>&nbsp;<span class="num" id="5290555">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290558">for</span>&nbsp;<span class="op" id="5290562">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290566">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290626">op</span>&nbsp;<span class="op" id="5290629">:=</span>&nbsp;<span class="ident" id="5290632">d</span><span class="op" id="5290633">.</span><span class="ident" id="5290634">scanWhile</span><span class="op" id="5290643">(</span><span class="ident" id="5290644">scanSkipSpace</span><span class="op" id="5290657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290661">if</span>&nbsp;<span class="ident" id="5290664">op</span>&nbsp;<span class="op" id="5290667">==</span>&nbsp;<span class="ident" id="5290670">scanEndArray</span>&nbsp;<span class="op" id="5290683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290688">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290696">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290701">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290757">d</span><span class="op" id="5290758">.</span><span class="ident" id="5290759">off</span><span class="op" id="5290762">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290767">d</span><span class="op" id="5290768">.</span><span class="ident" id="5290769">scan</span><span class="op" id="5290773">.</span><span class="ident" id="5290774">undo</span><span class="op" id="5290778">(</span><span class="ident" id="5290779">op</span><span class="op" id="5290781">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290786">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290835">if</span>&nbsp;<span class="ident" id="5290838">v</span><span class="op" id="5290839">.</span><span class="ident" id="5290840">Kind</span><span class="op" id="5290844">(</span><span class="op" id="5290845">)</span>&nbsp;<span class="op" id="5290847">==</span>&nbsp;<span class="ident" id="5290850">reflect</span><span class="op" id="5290857">.</span><span class="ident" id="5290858">Slice</span>&nbsp;<span class="op" id="5290864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5290869">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290899">if</span>&nbsp;<span class="ident" id="5290902">i</span>&nbsp;<span class="op" id="5290904">&gt;=</span>&nbsp;<span class="ident" id="5290907">v</span><span class="op" id="5290908">.</span><span class="ident" id="5290909">Cap</span><span class="op" id="5290912">(</span><span class="op" id="5290913">)</span>&nbsp;<span class="op" id="5290915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290921">newcap</span>&nbsp;<span class="op" id="5290928">:=</span>&nbsp;<span class="ident" id="5290931">v</span><span class="op" id="5290932">.</span><span class="ident" id="5290933">Cap</span><span class="op" id="5290936">(</span><span class="op" id="5290937">)</span>&nbsp;<span class="op" id="5290939">+</span>&nbsp;<span class="ident" id="5290941">v</span><span class="op" id="5290942">.</span><span class="ident" id="5290943">Cap</span><span class="op" id="5290946">(</span><span class="op" id="5290947">)</span><span class="op" id="5290948">/</span><span class="num" id="5290949">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5290955">if</span>&nbsp;<span class="ident" id="5290958">newcap</span>&nbsp;<span class="op" id="5290965">&lt;</span>&nbsp;<span class="num" id="5290967">4</span>&nbsp;<span class="op" id="5290969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290976">newcap</span>&nbsp;<span class="op" id="5290983">=</span>&nbsp;<span class="num" id="5290985">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5290991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5290997">newv</span>&nbsp;<span class="op" id="5291002">:=</span>&nbsp;<span class="ident" id="5291005">reflect</span><span class="op" id="5291012">.</span><span class="ident" id="5291013">MakeSlice</span><span class="op" id="5291022">(</span><span class="ident" id="5291023">v</span><span class="op" id="5291024">.</span><span class="ident" id="5291025">Type</span><span class="op" id="5291029">(</span><span class="op" id="5291030">)</span><span class="op" id="5291031">,</span>&nbsp;<span class="ident" id="5291033">v</span><span class="op" id="5291034">.</span><span class="ident" id="5291035">Len</span><span class="op" id="5291038">(</span><span class="op" id="5291039">)</span><span class="op" id="5291040">,</span>&nbsp;<span class="ident" id="5291042">newcap</span><span class="op" id="5291048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291054">reflect</span><span class="op" id="5291061">.</span><span class="ident" id="5291062">Copy</span><span class="op" id="5291066">(</span><span class="ident" id="5291067">newv</span><span class="op" id="5291071">,</span>&nbsp;<span class="ident" id="5291073">v</span><span class="op" id="5291074">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291080">v</span><span class="op" id="5291081">.</span><span class="ident" id="5291082">Set</span><span class="op" id="5291085">(</span><span class="ident" id="5291086">newv</span><span class="op" id="5291090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291100">if</span>&nbsp;<span class="ident" id="5291103">i</span>&nbsp;<span class="op" id="5291105">&gt;=</span>&nbsp;<span class="ident" id="5291108">v</span><span class="op" id="5291109">.</span><span class="ident" id="5291110">Len</span><span class="op" id="5291113">(</span><span class="op" id="5291114">)</span>&nbsp;<span class="op" id="5291116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291122">v</span><span class="op" id="5291123">.</span><span class="ident" id="5291124">SetLen</span><span class="op" id="5291130">(</span><span class="ident" id="5291131">i</span>&nbsp;<span class="op" id="5291133">+</span>&nbsp;<span class="num" id="5291135">1</span><span class="op" id="5291136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291141">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291150">if</span>&nbsp;<span class="ident" id="5291153">i</span>&nbsp;<span class="op" id="5291155">&lt;</span>&nbsp;<span class="ident" id="5291157">v</span><span class="op" id="5291158">.</span><span class="ident" id="5291159">Len</span><span class="op" id="5291162">(</span><span class="op" id="5291163">)</span>&nbsp;<span class="op" id="5291165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291170">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291197">d</span><span class="op" id="5291198">.</span><span class="ident" id="5291199">value</span><span class="op" id="5291204">(</span><span class="ident" id="5291205">v</span><span class="op" id="5291206">.</span><span class="ident" id="5291207">Index</span><span class="op" id="5291212">(</span><span class="ident" id="5291213">i</span><span class="op" id="5291214">)</span><span class="op" id="5291215">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291219">}</span>&nbsp;<span class="keyword" id="5291221">else</span>&nbsp;<span class="op" id="5291226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291231">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291267">d</span><span class="op" id="5291268">.</span><span class="ident" id="5291269">value</span><span class="op" id="5291274">(</span><span class="ident" id="5291275">reflect</span><span class="op" id="5291282">.</span><span class="ident" id="5291283">Value</span><span class="op" id="5291288">{</span><span class="op" id="5291289">}</span><span class="op" id="5291290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291298">i</span><span class="op" id="5291299">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291305">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291337">op</span>&nbsp;<span class="op" id="5291340">=</span>&nbsp;<span class="ident" id="5291342">d</span><span class="op" id="5291343">.</span><span class="ident" id="5291344">scanWhile</span><span class="op" id="5291353">(</span><span class="ident" id="5291354">scanSkipSpace</span><span class="op" id="5291367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291371">if</span>&nbsp;<span class="ident" id="5291374">op</span>&nbsp;<span class="op" id="5291377">==</span>&nbsp;<span class="ident" id="5291380">scanEndArray</span>&nbsp;<span class="op" id="5291393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291398">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291410">if</span>&nbsp;<span class="ident" id="5291413">op</span>&nbsp;<span class="op" id="5291416">!=</span>&nbsp;<span class="ident" id="5291419">scanArrayValue</span>&nbsp;<span class="op" id="5291434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291439">d</span><span class="op" id="5291440">.</span><span class="builtintype" id="5291441">error</span><span class="op" id="5291446">(</span><span class="ident" id="5291447">errPhase</span><span class="op" id="5291455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291462">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291466">if</span>&nbsp;<span class="ident" id="5291469">i</span>&nbsp;<span class="op" id="5291471">&lt;</span>&nbsp;<span class="ident" id="5291473">v</span><span class="op" id="5291474">.</span><span class="ident" id="5291475">Len</span><span class="op" id="5291478">(</span><span class="op" id="5291479">)</span>&nbsp;<span class="op" id="5291481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291485">if</span>&nbsp;<span class="ident" id="5291488">v</span><span class="op" id="5291489">.</span><span class="ident" id="5291490">Kind</span><span class="op" id="5291494">(</span><span class="op" id="5291495">)</span>&nbsp;<span class="op" id="5291497">==</span>&nbsp;<span class="ident" id="5291500">reflect</span><span class="op" id="5291507">.</span><span class="ident" id="5291508">Array</span>&nbsp;<span class="op" id="5291514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291519">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291548">z</span>&nbsp;<span class="op" id="5291550">:=</span>&nbsp;<span class="ident" id="5291553">reflect</span><span class="op" id="5291560">.</span><span class="ident" id="5291561">Zero</span><span class="op" id="5291565">(</span><span class="ident" id="5291566">v</span><span class="op" id="5291567">.</span><span class="ident" id="5291568">Type</span><span class="op" id="5291572">(</span><span class="op" id="5291573">)</span><span class="op" id="5291574">.</span><span class="ident" id="5291575">Elem</span><span class="op" id="5291579">(</span><span class="op" id="5291580">)</span><span class="op" id="5291581">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291586">for</span>&nbsp;<span class="op" id="5291590">;</span>&nbsp;<span class="ident" id="5291592">i</span>&nbsp;<span class="op" id="5291594">&lt;</span>&nbsp;<span class="ident" id="5291596">v</span><span class="op" id="5291597">.</span><span class="ident" id="5291598">Len</span><span class="op" id="5291601">(</span><span class="op" id="5291602">)</span><span class="op" id="5291603">;</span>&nbsp;<span class="ident" id="5291605">i</span><span class="op" id="5291606">++</span>&nbsp;<span class="op" id="5291609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291615">v</span><span class="op" id="5291616">.</span><span class="ident" id="5291617">Index</span><span class="op" id="5291622">(</span><span class="ident" id="5291623">i</span><span class="op" id="5291624">)</span><span class="op" id="5291625">.</span><span class="ident" id="5291626">Set</span><span class="op" id="5291629">(</span><span class="ident" id="5291630">z</span><span class="op" id="5291631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291640">}</span>&nbsp;<span class="keyword" id="5291642">else</span>&nbsp;<span class="op" id="5291647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291652">v</span><span class="op" id="5291653">.</span><span class="ident" id="5291654">SetLen</span><span class="op" id="5291660">(</span><span class="ident" id="5291661">i</span><span class="op" id="5291662">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5291672">if</span>&nbsp;<span class="ident" id="5291675">i</span>&nbsp;<span class="op" id="5291677">==</span>&nbsp;<span class="num" id="5291680">0</span>&nbsp;<span class="op" id="5291682">&amp;&amp;</span>&nbsp;<span class="ident" id="5291685">v</span><span class="op" id="5291686">.</span><span class="ident" id="5291687">Kind</span><span class="op" id="5291691">(</span><span class="op" id="5291692">)</span>&nbsp;<span class="op" id="5291694">==</span>&nbsp;<span class="ident" id="5291697">reflect</span><span class="op" id="5291704">.</span><span class="ident" id="5291705">Slice</span>&nbsp;<span class="op" id="5291711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5291715">v</span><span class="op" id="5291716">.</span><span class="ident" id="5291717">Set</span><span class="op" id="5291720">(</span><span class="ident" id="5291721">reflect</span><span class="op" id="5291728">.</span><span class="ident" id="5291729">MakeSlice</span><span class="op" id="5291738">(</span><span class="ident" id="5291739">v</span><span class="op" id="5291740">.</span><span class="ident" id="5291741">Type</span><span class="op" id="5291745">(</span><span class="op" id="5291746">)</span><span class="op" id="5291747">,</span>&nbsp;<span class="num" id="5291749">0</span><span class="op" id="5291750">,</span>&nbsp;<span class="num" id="5291752">0</span><span class="op" id="5291753">)</span><span class="op" id="5291754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5291757">}</span><br>
<span class="lineno">470</span><span class="op" id="5291759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5291762">var</span>&nbsp;<span class="ident" id="5291766">nullLiteral</span>&nbsp;<span class="op" id="5291778">=</span>&nbsp;<span class="op" id="5291780">[</span><span class="op" id="5291781">]</span><span class="builtintype" id="5291782">byte</span><span class="op" id="5291786">(</span><span class="string" id="5291787">&#34;null&#34;</span><span class="op" id="5291793">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5291796">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="5291875">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="5291936">func</span>&nbsp;<span class="op" id="5291941">(</span><span class="ident" id="5291942">d</span>&nbsp;<span class="op" id="5291944">*</span><span class="ident" id="5291945">decodeState</span><span class="op" id="5291956">)</span>&nbsp;<span class="ident" id="5291958">object</span><span class="op" id="5291964">(</span><span class="ident" id="5291965">v</span>&nbsp;<span class="ident" id="5291967">reflect</span><span class="op" id="5291974">.</span><span class="ident" id="5291975">Value</span><span class="op" id="5291980">)</span>&nbsp;<span class="op" id="5291982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5291985">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292012">u</span><span class="op" id="5292013">,</span>&nbsp;<span class="ident" id="5292015">ut</span><span class="op" id="5292017">,</span>&nbsp;<span class="ident" id="5292019">pv</span>&nbsp;<span class="op" id="5292022">:=</span>&nbsp;<span class="ident" id="5292025">d</span><span class="op" id="5292026">.</span><span class="ident" id="5292027">indirect</span><span class="op" id="5292035">(</span><span class="ident" id="5292036">v</span><span class="op" id="5292037">,</span>&nbsp;<span class="builtintype" id="5292039">false</span><span class="op" id="5292044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292047">if</span>&nbsp;<span class="ident" id="5292050">u</span>&nbsp;<span class="op" id="5292052">!=</span>&nbsp;<span class="ident" id="5292055">nil</span>&nbsp;<span class="op" id="5292059">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292063">d</span><span class="op" id="5292064">.</span><span class="ident" id="5292065">off</span><span class="op" id="5292068">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292073">err</span>&nbsp;<span class="op" id="5292077">:=</span>&nbsp;<span class="ident" id="5292080">u</span><span class="op" id="5292081">.</span><span class="ident" id="5292082">UnmarshalJSON</span><span class="op" id="5292095">(</span><span class="ident" id="5292096">d</span><span class="op" id="5292097">.</span><span class="ident" id="5292098">next</span><span class="op" id="5292102">(</span><span class="op" id="5292103">)</span><span class="op" id="5292104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292108">if</span>&nbsp;<span class="ident" id="5292111">err</span>&nbsp;<span class="op" id="5292115">!=</span>&nbsp;<span class="ident" id="5292118">nil</span>&nbsp;<span class="op" id="5292122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292127">d</span><span class="op" id="5292128">.</span><span class="builtintype" id="5292129">error</span><span class="op" id="5292134">(</span><span class="ident" id="5292135">err</span><span class="op" id="5292138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292142">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292157">if</span>&nbsp;<span class="ident" id="5292160">ut</span>&nbsp;<span class="op" id="5292163">!=</span>&nbsp;<span class="ident" id="5292166">nil</span>&nbsp;<span class="op" id="5292170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292174">d</span><span class="op" id="5292175">.</span><span class="ident" id="5292176">saveError</span><span class="op" id="5292185">(</span><span class="op" id="5292186">&amp;</span><span class="ident" id="5292187">UnmarshalTypeError</span><span class="op" id="5292205">{</span><span class="string" id="5292206">&#34;object&#34;</span><span class="op" id="5292214">,</span>&nbsp;<span class="ident" id="5292216">v</span><span class="op" id="5292217">.</span><span class="ident" id="5292218">Type</span><span class="op" id="5292222">(</span><span class="op" id="5292223">)</span><span class="op" id="5292224">}</span><span class="op" id="5292225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292229">d</span><span class="op" id="5292230">.</span><span class="ident" id="5292231">off</span><span class="op" id="5292234">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292239">d</span><span class="op" id="5292240">.</span><span class="ident" id="5292241">next</span><span class="op" id="5292245">(</span><span class="op" id="5292246">)</span>&nbsp;<span class="comment" id="5292248">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292276">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292287">v</span>&nbsp;<span class="op" id="5292289">=</span>&nbsp;<span class="ident" id="5292291">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5292296">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292358">if</span>&nbsp;<span class="ident" id="5292361">v</span><span class="op" id="5292362">.</span><span class="ident" id="5292363">Kind</span><span class="op" id="5292367">(</span><span class="op" id="5292368">)</span>&nbsp;<span class="op" id="5292370">==</span>&nbsp;<span class="ident" id="5292373">reflect</span><span class="op" id="5292380">.</span><span class="ident" id="5292381">Interface</span>&nbsp;<span class="op" id="5292391">&amp;&amp;</span>&nbsp;<span class="ident" id="5292394">v</span><span class="op" id="5292395">.</span><span class="ident" id="5292396">NumMethod</span><span class="op" id="5292405">(</span><span class="op" id="5292406">)</span>&nbsp;<span class="op" id="5292408">==</span>&nbsp;<span class="num" id="5292411">0</span>&nbsp;<span class="op" id="5292413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292417">v</span><span class="op" id="5292418">.</span><span class="ident" id="5292419">Set</span><span class="op" id="5292422">(</span><span class="ident" id="5292423">reflect</span><span class="op" id="5292430">.</span><span class="ident" id="5292431">ValueOf</span><span class="op" id="5292438">(</span><span class="ident" id="5292439">d</span><span class="op" id="5292440">.</span><span class="ident" id="5292441">objectInterface</span><span class="op" id="5292456">(</span><span class="op" id="5292457">)</span><span class="op" id="5292458">)</span><span class="op" id="5292459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292463">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292471">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5292475">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292524">switch</span>&nbsp;<span class="ident" id="5292531">v</span><span class="op" id="5292532">.</span><span class="ident" id="5292533">Kind</span><span class="op" id="5292537">(</span><span class="op" id="5292538">)</span>&nbsp;<span class="op" id="5292540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292543">case</span>&nbsp;<span class="ident" id="5292548">reflect</span><span class="op" id="5292555">.</span><span class="ident" id="5292556">Map</span><span class="op" id="5292559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5292563">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292594">t</span>&nbsp;<span class="op" id="5292596">:=</span>&nbsp;<span class="ident" id="5292599">v</span><span class="op" id="5292600">.</span><span class="ident" id="5292601">Type</span><span class="op" id="5292605">(</span><span class="op" id="5292606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292610">if</span>&nbsp;<span class="ident" id="5292613">t</span><span class="op" id="5292614">.</span><span class="ident" id="5292615">Key</span><span class="op" id="5292618">(</span><span class="op" id="5292619">)</span><span class="op" id="5292620">.</span><span class="ident" id="5292621">Kind</span><span class="op" id="5292625">(</span><span class="op" id="5292626">)</span>&nbsp;<span class="op" id="5292628">!=</span>&nbsp;<span class="ident" id="5292631">reflect</span><span class="op" id="5292638">.</span><span class="ident" id="5292639">String</span>&nbsp;<span class="op" id="5292646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292651">d</span><span class="op" id="5292652">.</span><span class="ident" id="5292653">saveError</span><span class="op" id="5292662">(</span><span class="op" id="5292663">&amp;</span><span class="ident" id="5292664">UnmarshalTypeError</span><span class="op" id="5292682">{</span><span class="string" id="5292683">&#34;object&#34;</span><span class="op" id="5292691">,</span>&nbsp;<span class="ident" id="5292693">v</span><span class="op" id="5292694">.</span><span class="ident" id="5292695">Type</span><span class="op" id="5292699">(</span><span class="op" id="5292700">)</span><span class="op" id="5292701">}</span><span class="op" id="5292702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292707">d</span><span class="op" id="5292708">.</span><span class="ident" id="5292709">off</span><span class="op" id="5292712">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292718">d</span><span class="op" id="5292719">.</span><span class="ident" id="5292720">next</span><span class="op" id="5292724">(</span><span class="op" id="5292725">)</span>&nbsp;<span class="comment" id="5292727">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292756">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292769">if</span>&nbsp;<span class="ident" id="5292772">v</span><span class="op" id="5292773">.</span><span class="ident" id="5292774">IsNil</span><span class="op" id="5292779">(</span><span class="op" id="5292780">)</span>&nbsp;<span class="op" id="5292782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292787">v</span><span class="op" id="5292788">.</span><span class="ident" id="5292789">Set</span><span class="op" id="5292792">(</span><span class="ident" id="5292793">reflect</span><span class="op" id="5292800">.</span><span class="ident" id="5292801">MakeMap</span><span class="op" id="5292808">(</span><span class="ident" id="5292809">t</span><span class="op" id="5292810">)</span><span class="op" id="5292811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292815">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292818">case</span>&nbsp;<span class="ident" id="5292823">reflect</span><span class="op" id="5292830">.</span><span class="ident" id="5292831">Struct</span><span class="op" id="5292837">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292841">default</span><span class="op" id="5292848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292852">d</span><span class="op" id="5292853">.</span><span class="ident" id="5292854">saveError</span><span class="op" id="5292863">(</span><span class="op" id="5292864">&amp;</span><span class="ident" id="5292865">UnmarshalTypeError</span><span class="op" id="5292883">{</span><span class="string" id="5292884">&#34;object&#34;</span><span class="op" id="5292892">,</span>&nbsp;<span class="ident" id="5292894">v</span><span class="op" id="5292895">.</span><span class="ident" id="5292896">Type</span><span class="op" id="5292900">(</span><span class="op" id="5292901">)</span><span class="op" id="5292902">}</span><span class="op" id="5292903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292907">d</span><span class="op" id="5292908">.</span><span class="ident" id="5292909">off</span><span class="op" id="5292912">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5292917">d</span><span class="op" id="5292918">.</span><span class="ident" id="5292919">next</span><span class="op" id="5292923">(</span><span class="op" id="5292924">)</span>&nbsp;<span class="comment" id="5292926">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292954">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5292962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292966">var</span>&nbsp;<span class="ident" id="5292970">mapElem</span>&nbsp;<span class="ident" id="5292978">reflect</span><span class="op" id="5292985">.</span><span class="ident" id="5292986">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5292994">for</span>&nbsp;<span class="op" id="5292998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5293002">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293050">op</span>&nbsp;<span class="op" id="5293053">:=</span>&nbsp;<span class="ident" id="5293056">d</span><span class="op" id="5293057">.</span><span class="ident" id="5293058">scanWhile</span><span class="op" id="5293067">(</span><span class="ident" id="5293068">scanSkipSpace</span><span class="op" id="5293081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293085">if</span>&nbsp;<span class="ident" id="5293088">op</span>&nbsp;<span class="op" id="5293091">==</span>&nbsp;<span class="ident" id="5293094">scanEndObject</span>&nbsp;<span class="op" id="5293108">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5293113">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293167">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293179">if</span>&nbsp;<span class="ident" id="5293182">op</span>&nbsp;<span class="op" id="5293185">!=</span>&nbsp;<span class="ident" id="5293188">scanBeginLiteral</span>&nbsp;<span class="op" id="5293205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293210">d</span><span class="op" id="5293211">.</span><span class="builtintype" id="5293212">error</span><span class="op" id="5293217">(</span><span class="ident" id="5293218">errPhase</span><span class="op" id="5293226">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5293235">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293250">start</span>&nbsp;<span class="op" id="5293256">:=</span>&nbsp;<span class="ident" id="5293259">d</span><span class="op" id="5293260">.</span><span class="ident" id="5293261">off</span>&nbsp;<span class="op" id="5293265">-</span>&nbsp;<span class="num" id="5293267">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293271">op</span>&nbsp;<span class="op" id="5293274">=</span>&nbsp;<span class="ident" id="5293276">d</span><span class="op" id="5293277">.</span><span class="ident" id="5293278">scanWhile</span><span class="op" id="5293287">(</span><span class="ident" id="5293288">scanContinue</span><span class="op" id="5293300">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293304">item</span>&nbsp;<span class="op" id="5293309">:=</span>&nbsp;<span class="ident" id="5293312">d</span><span class="op" id="5293313">.</span><span class="ident" id="5293314">data</span><span class="op" id="5293318">[</span><span class="ident" id="5293319">start</span>&nbsp;<span class="op" id="5293325">:</span>&nbsp;<span class="ident" id="5293327">d</span><span class="op" id="5293328">.</span><span class="ident" id="5293329">off</span><span class="op" id="5293332">-</span><span class="num" id="5293333">1</span><span class="op" id="5293334">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293338">key</span><span class="op" id="5293341">,</span>&nbsp;<span class="ident" id="5293343">ok</span>&nbsp;<span class="op" id="5293346">:=</span>&nbsp;<span class="ident" id="5293349">unquoteBytes</span><span class="op" id="5293361">(</span><span class="ident" id="5293362">item</span><span class="op" id="5293366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293370">if</span>&nbsp;<span class="op" id="5293373">!</span><span class="ident" id="5293374">ok</span>&nbsp;<span class="op" id="5293377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293382">d</span><span class="op" id="5293383">.</span><span class="builtintype" id="5293384">error</span><span class="op" id="5293389">(</span><span class="ident" id="5293390">errPhase</span><span class="op" id="5293398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293402">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5293407">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293451">var</span>&nbsp;<span class="ident" id="5293455">subv</span>&nbsp;<span class="ident" id="5293460">reflect</span><span class="op" id="5293467">.</span><span class="ident" id="5293468">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293476">destring</span>&nbsp;<span class="op" id="5293485">:=</span>&nbsp;<span class="builtintype" id="5293488">false</span>&nbsp;<span class="comment" id="5293494">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293561">if</span>&nbsp;<span class="ident" id="5293564">v</span><span class="op" id="5293565">.</span><span class="ident" id="5293566">Kind</span><span class="op" id="5293570">(</span><span class="op" id="5293571">)</span>&nbsp;<span class="op" id="5293573">==</span>&nbsp;<span class="ident" id="5293576">reflect</span><span class="op" id="5293583">.</span><span class="ident" id="5293584">Map</span>&nbsp;<span class="op" id="5293588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293593">elemType</span>&nbsp;<span class="op" id="5293602">:=</span>&nbsp;<span class="ident" id="5293605">v</span><span class="op" id="5293606">.</span><span class="ident" id="5293607">Type</span><span class="op" id="5293611">(</span><span class="op" id="5293612">)</span><span class="op" id="5293613">.</span><span class="ident" id="5293614">Elem</span><span class="op" id="5293618">(</span><span class="op" id="5293619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293624">if</span>&nbsp;<span class="op" id="5293627">!</span><span class="ident" id="5293628">mapElem</span><span class="op" id="5293635">.</span><span class="ident" id="5293636">IsValid</span><span class="op" id="5293643">(</span><span class="op" id="5293644">)</span>&nbsp;<span class="op" id="5293646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293652">mapElem</span>&nbsp;<span class="op" id="5293660">=</span>&nbsp;<span class="ident" id="5293662">reflect</span><span class="op" id="5293669">.</span><span class="ident" id="5293670">New</span><span class="op" id="5293673">(</span><span class="ident" id="5293674">elemType</span><span class="op" id="5293682">)</span><span class="op" id="5293683">.</span><span class="ident" id="5293684">Elem</span><span class="op" id="5293688">(</span><span class="op" id="5293689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293694">}</span>&nbsp;<span class="keyword" id="5293696">else</span>&nbsp;<span class="op" id="5293701">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293707">mapElem</span><span class="op" id="5293714">.</span><span class="ident" id="5293715">Set</span><span class="op" id="5293718">(</span><span class="ident" id="5293719">reflect</span><span class="op" id="5293726">.</span><span class="ident" id="5293727">Zero</span><span class="op" id="5293731">(</span><span class="ident" id="5293732">elemType</span><span class="op" id="5293740">)</span><span class="op" id="5293741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293751">subv</span>&nbsp;<span class="op" id="5293756">=</span>&nbsp;<span class="ident" id="5293758">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293768">}</span>&nbsp;<span class="keyword" id="5293770">else</span>&nbsp;<span class="op" id="5293775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293780">var</span>&nbsp;<span class="ident" id="5293784">f</span>&nbsp;<span class="op" id="5293786">*</span><span class="ident" id="5293787">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293796">fields</span>&nbsp;<span class="op" id="5293803">:=</span>&nbsp;<span class="ident" id="5293806">cachedTypeFields</span><span class="op" id="5293822">(</span><span class="ident" id="5293823">v</span><span class="op" id="5293824">.</span><span class="ident" id="5293825">Type</span><span class="op" id="5293829">(</span><span class="op" id="5293830">)</span><span class="op" id="5293831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293836">for</span>&nbsp;<span class="ident" id="5293840">i</span>&nbsp;<span class="op" id="5293842">:=</span>&nbsp;<span class="keyword" id="5293845">range</span>&nbsp;<span class="ident" id="5293851">fields</span>&nbsp;<span class="op" id="5293858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293864">ff</span>&nbsp;<span class="op" id="5293867">:=</span>&nbsp;<span class="op" id="5293870">&amp;</span><span class="ident" id="5293871">fields</span><span class="op" id="5293877">[</span><span class="ident" id="5293878">i</span><span class="op" id="5293879">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293885">if</span>&nbsp;<span class="ident" id="5293888">bytes</span><span class="op" id="5293893">.</span><span class="ident" id="5293894">Equal</span><span class="op" id="5293899">(</span><span class="ident" id="5293900">ff</span><span class="op" id="5293902">.</span><span class="ident" id="5293903">nameBytes</span><span class="op" id="5293912">,</span>&nbsp;<span class="ident" id="5293914">key</span><span class="op" id="5293917">)</span>&nbsp;<span class="op" id="5293919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5293926">f</span>&nbsp;<span class="op" id="5293928">=</span>&nbsp;<span class="ident" id="5293930">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293938">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5293948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5293954">if</span>&nbsp;<span class="ident" id="5293957">f</span>&nbsp;<span class="op" id="5293959">==</span>&nbsp;<span class="ident" id="5293962">nil</span>&nbsp;<span class="op" id="5293966">&amp;&amp;</span>&nbsp;<span class="ident" id="5293969">ff</span><span class="op" id="5293971">.</span><span class="ident" id="5293972">equalFold</span><span class="op" id="5293981">(</span><span class="ident" id="5293982">ff</span><span class="op" id="5293984">.</span><span class="ident" id="5293985">nameBytes</span><span class="op" id="5293994">,</span>&nbsp;<span class="ident" id="5293996">key</span><span class="op" id="5293999">)</span>&nbsp;<span class="op" id="5294001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294008">f</span>&nbsp;<span class="op" id="5294010">=</span>&nbsp;<span class="ident" id="5294012">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294019">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294029">if</span>&nbsp;<span class="ident" id="5294032">f</span>&nbsp;<span class="op" id="5294034">!=</span>&nbsp;<span class="ident" id="5294037">nil</span>&nbsp;<span class="op" id="5294041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294047">subv</span>&nbsp;<span class="op" id="5294052">=</span>&nbsp;<span class="ident" id="5294054">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294060">destring</span>&nbsp;<span class="op" id="5294069">=</span>&nbsp;<span class="ident" id="5294071">f</span><span class="op" id="5294072">.</span><span class="ident" id="5294073">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294084">for</span>&nbsp;<span class="ident" id="5294088">_</span><span class="op" id="5294089">,</span>&nbsp;<span class="ident" id="5294091">i</span>&nbsp;<span class="op" id="5294093">:=</span>&nbsp;<span class="keyword" id="5294096">range</span>&nbsp;<span class="ident" id="5294102">f</span><span class="op" id="5294103">.</span><span class="ident" id="5294104">index</span>&nbsp;<span class="op" id="5294110">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294117">if</span>&nbsp;<span class="ident" id="5294120">subv</span><span class="op" id="5294124">.</span><span class="ident" id="5294125">Kind</span><span class="op" id="5294129">(</span><span class="op" id="5294130">)</span>&nbsp;<span class="op" id="5294132">==</span>&nbsp;<span class="ident" id="5294135">reflect</span><span class="op" id="5294142">.</span><span class="ident" id="5294143">Ptr</span>&nbsp;<span class="op" id="5294147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294155">if</span>&nbsp;<span class="ident" id="5294158">subv</span><span class="op" id="5294162">.</span><span class="ident" id="5294163">IsNil</span><span class="op" id="5294168">(</span><span class="op" id="5294169">)</span>&nbsp;<span class="op" id="5294171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294180">subv</span><span class="op" id="5294184">.</span><span class="ident" id="5294185">Set</span><span class="op" id="5294188">(</span><span class="ident" id="5294189">reflect</span><span class="op" id="5294196">.</span><span class="ident" id="5294197">New</span><span class="op" id="5294200">(</span><span class="ident" id="5294201">subv</span><span class="op" id="5294205">.</span><span class="ident" id="5294206">Type</span><span class="op" id="5294210">(</span><span class="op" id="5294211">)</span><span class="op" id="5294212">.</span><span class="ident" id="5294213">Elem</span><span class="op" id="5294217">(</span><span class="op" id="5294218">)</span><span class="op" id="5294219">)</span><span class="op" id="5294220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294236">subv</span>&nbsp;<span class="op" id="5294241">=</span>&nbsp;<span class="ident" id="5294243">subv</span><span class="op" id="5294247">.</span><span class="ident" id="5294248">Elem</span><span class="op" id="5294252">(</span><span class="op" id="5294253">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294267">subv</span>&nbsp;<span class="op" id="5294272">=</span>&nbsp;<span class="ident" id="5294274">subv</span><span class="op" id="5294278">.</span><span class="ident" id="5294279">Field</span><span class="op" id="5294284">(</span><span class="ident" id="5294285">i</span><span class="op" id="5294286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294301">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5294306">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294332">if</span>&nbsp;<span class="ident" id="5294335">op</span>&nbsp;<span class="op" id="5294338">==</span>&nbsp;<span class="ident" id="5294341">scanSkipSpace</span>&nbsp;<span class="op" id="5294355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294360">op</span>&nbsp;<span class="op" id="5294363">=</span>&nbsp;<span class="ident" id="5294365">d</span><span class="op" id="5294366">.</span><span class="ident" id="5294367">scanWhile</span><span class="op" id="5294376">(</span><span class="ident" id="5294377">scanSkipSpace</span><span class="op" id="5294390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294394">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294398">if</span>&nbsp;<span class="ident" id="5294401">op</span>&nbsp;<span class="op" id="5294404">!=</span>&nbsp;<span class="ident" id="5294407">scanObjectKey</span>&nbsp;<span class="op" id="5294421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294426">d</span><span class="op" id="5294427">.</span><span class="builtintype" id="5294428">error</span><span class="op" id="5294433">(</span><span class="ident" id="5294434">errPhase</span><span class="op" id="5294442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5294451">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294468">if</span>&nbsp;<span class="ident" id="5294471">destring</span>&nbsp;<span class="op" id="5294480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294485">switch</span>&nbsp;<span class="ident" id="5294492">qv</span>&nbsp;<span class="op" id="5294495">:=</span>&nbsp;<span class="ident" id="5294498">d</span><span class="op" id="5294499">.</span><span class="ident" id="5294500">valueQuoted</span><span class="op" id="5294511">(</span><span class="op" id="5294512">)</span><span class="op" id="5294513">.</span><span class="op" id="5294514">(</span><span class="keyword" id="5294515">type</span><span class="op" id="5294519">)</span>&nbsp;<span class="op" id="5294521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294526">case</span>&nbsp;<span class="ident" id="5294531">nil</span><span class="op" id="5294534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294540">d</span><span class="op" id="5294541">.</span><span class="ident" id="5294542">literalStore</span><span class="op" id="5294554">(</span><span class="ident" id="5294555">nullLiteral</span><span class="op" id="5294566">,</span>&nbsp;<span class="ident" id="5294568">subv</span><span class="op" id="5294572">,</span>&nbsp;<span class="builtintype" id="5294574">false</span><span class="op" id="5294579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294584">case</span>&nbsp;<span class="builtintype" id="5294589">string</span><span class="op" id="5294595">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294601">d</span><span class="op" id="5294602">.</span><span class="ident" id="5294603">literalStore</span><span class="op" id="5294615">(</span><span class="op" id="5294616">[</span><span class="op" id="5294617">]</span><span class="builtintype" id="5294618">byte</span><span class="op" id="5294622">(</span><span class="ident" id="5294623">qv</span><span class="op" id="5294625">)</span><span class="op" id="5294626">,</span>&nbsp;<span class="ident" id="5294628">subv</span><span class="op" id="5294632">,</span>&nbsp;<span class="builtintype" id="5294634">true</span><span class="op" id="5294638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294643">default</span><span class="op" id="5294650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294656">d</span><span class="op" id="5294657">.</span><span class="ident" id="5294658">saveError</span><span class="op" id="5294667">(</span><span class="ident" id="5294668">fmt</span><span class="op" id="5294671">.</span><span class="ident" id="5294672">Errorf</span><span class="op" id="5294678">(</span><span class="string" id="5294679">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5294764">,</span>&nbsp;<span class="ident" id="5294766">item</span><span class="op" id="5294770">,</span>&nbsp;<span class="ident" id="5294772">v</span><span class="op" id="5294773">.</span><span class="ident" id="5294774">Type</span><span class="op" id="5294778">(</span><span class="op" id="5294779">)</span><span class="op" id="5294780">)</span><span class="op" id="5294781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294790">}</span>&nbsp;<span class="keyword" id="5294792">else</span>&nbsp;<span class="op" id="5294797">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294802">d</span><span class="op" id="5294803">.</span><span class="ident" id="5294804">value</span><span class="op" id="5294809">(</span><span class="ident" id="5294810">subv</span><span class="op" id="5294814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5294818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5294823">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5294853">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5294908">if</span>&nbsp;<span class="ident" id="5294911">v</span><span class="op" id="5294912">.</span><span class="ident" id="5294913">Kind</span><span class="op" id="5294917">(</span><span class="op" id="5294918">)</span>&nbsp;<span class="op" id="5294920">==</span>&nbsp;<span class="ident" id="5294923">reflect</span><span class="op" id="5294930">.</span><span class="ident" id="5294931">Map</span>&nbsp;<span class="op" id="5294935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294940">kv</span>&nbsp;<span class="op" id="5294943">:=</span>&nbsp;<span class="ident" id="5294946">reflect</span><span class="op" id="5294953">.</span><span class="ident" id="5294954">ValueOf</span><span class="op" id="5294961">(</span><span class="ident" id="5294962">key</span><span class="op" id="5294965">)</span><span class="op" id="5294966">.</span><span class="ident" id="5294967">Convert</span><span class="op" id="5294974">(</span><span class="ident" id="5294975">v</span><span class="op" id="5294976">.</span><span class="ident" id="5294977">Type</span><span class="op" id="5294981">(</span><span class="op" id="5294982">)</span><span class="op" id="5294983">.</span><span class="ident" id="5294984">Key</span><span class="op" id="5294987">(</span><span class="op" id="5294988">)</span><span class="op" id="5294989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5294994">v</span><span class="op" id="5294995">.</span><span class="ident" id="5294996">SetMapIndex</span><span class="op" id="5295007">(</span><span class="ident" id="5295008">kv</span><span class="op" id="5295010">,</span>&nbsp;<span class="ident" id="5295012">subv</span><span class="op" id="5295016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5295020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5295025">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295057">op</span>&nbsp;<span class="op" id="5295060">=</span>&nbsp;<span class="ident" id="5295062">d</span><span class="op" id="5295063">.</span><span class="ident" id="5295064">scanWhile</span><span class="op" id="5295073">(</span><span class="ident" id="5295074">scanSkipSpace</span><span class="op" id="5295087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295091">if</span>&nbsp;<span class="ident" id="5295094">op</span>&nbsp;<span class="op" id="5295097">==</span>&nbsp;<span class="ident" id="5295100">scanEndObject</span>&nbsp;<span class="op" id="5295114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295119">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5295127">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295131">if</span>&nbsp;<span class="ident" id="5295134">op</span>&nbsp;<span class="op" id="5295137">!=</span>&nbsp;<span class="ident" id="5295140">scanObjectValue</span>&nbsp;<span class="op" id="5295156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295161">d</span><span class="op" id="5295162">.</span><span class="builtintype" id="5295163">error</span><span class="op" id="5295168">(</span><span class="ident" id="5295169">errPhase</span><span class="op" id="5295177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5295181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5295184">}</span><br>
<span class="lineno"></span><span class="op" id="5295186">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="5295189">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5295269">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="5295324">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="5295373">func</span>&nbsp;<span class="op" id="5295378">(</span><span class="ident" id="5295379">d</span>&nbsp;<span class="op" id="5295381">*</span><span class="ident" id="5295382">decodeState</span><span class="op" id="5295393">)</span>&nbsp;<span class="ident" id="5295395">literal</span><span class="op" id="5295402">(</span><span class="ident" id="5295403">v</span>&nbsp;<span class="ident" id="5295405">reflect</span><span class="op" id="5295412">.</span><span class="ident" id="5295413">Value</span><span class="op" id="5295418">)</span>&nbsp;<span class="op" id="5295420">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5295423">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295481">start</span>&nbsp;<span class="op" id="5295487">:=</span>&nbsp;<span class="ident" id="5295490">d</span><span class="op" id="5295491">.</span><span class="ident" id="5295492">off</span>&nbsp;<span class="op" id="5295496">-</span>&nbsp;<span class="num" id="5295498">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295501">op</span>&nbsp;<span class="op" id="5295504">:=</span>&nbsp;<span class="ident" id="5295507">d</span><span class="op" id="5295508">.</span><span class="ident" id="5295509">scanWhile</span><span class="op" id="5295518">(</span><span class="ident" id="5295519">scanContinue</span><span class="op" id="5295531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5295535">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295576">d</span><span class="op" id="5295577">.</span><span class="ident" id="5295578">off</span><span class="op" id="5295581">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295585">d</span><span class="op" id="5295586">.</span><span class="ident" id="5295587">scan</span><span class="op" id="5295591">.</span><span class="ident" id="5295592">undo</span><span class="op" id="5295596">(</span><span class="ident" id="5295597">op</span><span class="op" id="5295599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295603">d</span><span class="op" id="5295604">.</span><span class="ident" id="5295605">literalStore</span><span class="op" id="5295617">(</span><span class="ident" id="5295618">d</span><span class="op" id="5295619">.</span><span class="ident" id="5295620">data</span><span class="op" id="5295624">[</span><span class="ident" id="5295625">start</span><span class="op" id="5295630">:</span><span class="ident" id="5295631">d</span><span class="op" id="5295632">.</span><span class="ident" id="5295633">off</span><span class="op" id="5295636">]</span><span class="op" id="5295637">,</span>&nbsp;<span class="ident" id="5295639">v</span><span class="op" id="5295640">,</span>&nbsp;<span class="builtintype" id="5295642">false</span><span class="op" id="5295647">)</span><br>
<span class="lineno"></span><span class="op" id="5295649">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="5295652">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="5295724">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="5295768">func</span>&nbsp;<span class="op" id="5295773">(</span><span class="ident" id="5295774">d</span>&nbsp;<span class="op" id="5295776">*</span><span class="ident" id="5295777">decodeState</span><span class="op" id="5295788">)</span>&nbsp;<span class="ident" id="5295790">convertNumber</span><span class="op" id="5295803">(</span><span class="ident" id="5295804">s</span>&nbsp;<span class="builtintype" id="5295806">string</span><span class="op" id="5295812">)</span>&nbsp;<span class="op" id="5295814">(</span><span class="keyword" id="5295815">interface</span><span class="op" id="5295824">{</span><span class="op" id="5295825">}</span><span class="op" id="5295826">,</span>&nbsp;<span class="builtintype" id="5295828">error</span><span class="op" id="5295833">)</span>&nbsp;<span class="op" id="5295835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295838">if</span>&nbsp;<span class="ident" id="5295841">d</span><span class="op" id="5295842">.</span><span class="ident" id="5295843">useNumber</span>&nbsp;<span class="op" id="5295853">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295857">return</span>&nbsp;<span class="ident" id="5295864">Number</span><span class="op" id="5295870">(</span><span class="ident" id="5295871">s</span><span class="op" id="5295872">)</span><span class="op" id="5295873">,</span>&nbsp;<span class="ident" id="5295875">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5295880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5295883">f</span><span class="op" id="5295884">,</span>&nbsp;<span class="ident" id="5295886">err</span>&nbsp;<span class="op" id="5295890">:=</span>&nbsp;<span class="ident" id="5295893">strconv</span><span class="op" id="5295900">.</span><span class="ident" id="5295901">ParseFloat</span><span class="op" id="5295911">(</span><span class="ident" id="5295912">s</span><span class="op" id="5295913">,</span>&nbsp;<span class="num" id="5295915">64</span><span class="op" id="5295917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295920">if</span>&nbsp;<span class="ident" id="5295923">err</span>&nbsp;<span class="op" id="5295927">!=</span>&nbsp;<span class="ident" id="5295930">nil</span>&nbsp;<span class="op" id="5295934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5295938">return</span>&nbsp;<span class="ident" id="5295945">nil</span><span class="op" id="5295948">,</span>&nbsp;<span class="op" id="5295950">&amp;</span><span class="ident" id="5295951">UnmarshalTypeError</span><span class="op" id="5295969">{</span><span class="string" id="5295970">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5295980">+</span>&nbsp;<span class="ident" id="5295982">s</span><span class="op" id="5295983">,</span>&nbsp;<span class="ident" id="5295985">reflect</span><span class="op" id="5295992">.</span><span class="ident" id="5295993">TypeOf</span><span class="op" id="5295999">(</span><span class="num" id="5296000">0.0</span><span class="op" id="5296003">)</span><span class="op" id="5296004">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5296007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296010">return</span>&nbsp;<span class="ident" id="5296017">f</span><span class="op" id="5296018">,</span>&nbsp;<span class="ident" id="5296020">nil</span><br>
<span class="lineno"></span><span class="op" id="5296024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5296027">var</span>&nbsp;<span class="ident" id="5296031">numberType</span>&nbsp;<span class="op" id="5296042">=</span>&nbsp;<span class="ident" id="5296044">reflect</span><span class="op" id="5296051">.</span><span class="ident" id="5296052">TypeOf</span><span class="op" id="5296058">(</span><span class="ident" id="5296059">Number</span><span class="op" id="5296065">(</span><span class="string" id="5296066">&#34;&#34;</span><span class="op" id="5296068">)</span><span class="op" id="5296069">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="5296072">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5296129">//</span><br>
<span class="lineno"></span><span class="comment" id="5296132">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5296200">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="5296269">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="5296309">func</span>&nbsp;<span class="op" id="5296314">(</span><span class="ident" id="5296315">d</span>&nbsp;<span class="op" id="5296317">*</span><span class="ident" id="5296318">decodeState</span><span class="op" id="5296329">)</span>&nbsp;<span class="ident" id="5296331">literalStore</span><span class="op" id="5296343">(</span><span class="ident" id="5296344">item</span>&nbsp;<span class="op" id="5296349">[</span><span class="op" id="5296350">]</span><span class="builtintype" id="5296351">byte</span><span class="op" id="5296355">,</span>&nbsp;<span class="ident" id="5296357">v</span>&nbsp;<span class="ident" id="5296359">reflect</span><span class="op" id="5296366">.</span><span class="ident" id="5296367">Value</span><span class="op" id="5296372">,</span>&nbsp;<span class="ident" id="5296374">fromQuoted</span>&nbsp;<span class="builtintype" id="5296385">bool</span><span class="op" id="5296389">)</span>&nbsp;<span class="op" id="5296391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5296394">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296421">if</span>&nbsp;<span class="builtinfunc" id="5296424">len</span><span class="op" id="5296427">(</span><span class="ident" id="5296428">item</span><span class="op" id="5296432">)</span>&nbsp;<span class="op" id="5296434">==</span>&nbsp;<span class="num" id="5296437">0</span>&nbsp;<span class="op" id="5296439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5296443">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296466">d</span><span class="op" id="5296467">.</span><span class="ident" id="5296468">saveError</span><span class="op" id="5296477">(</span><span class="ident" id="5296478">fmt</span><span class="op" id="5296481">.</span><span class="ident" id="5296482">Errorf</span><span class="op" id="5296488">(</span><span class="string" id="5296489">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5296562">,</span>&nbsp;<span class="ident" id="5296564">item</span><span class="op" id="5296568">,</span>&nbsp;<span class="ident" id="5296570">v</span><span class="op" id="5296571">.</span><span class="ident" id="5296572">Type</span><span class="op" id="5296576">(</span><span class="op" id="5296577">)</span><span class="op" id="5296578">)</span><span class="op" id="5296579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296583">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5296591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296594">wantptr</span>&nbsp;<span class="op" id="5296602">:=</span>&nbsp;<span class="ident" id="5296605">item</span><span class="op" id="5296609">[</span><span class="num" id="5296610">0</span><span class="op" id="5296611">]</span>&nbsp;<span class="op" id="5296613">==</span>&nbsp;<span class="string" id="5296616">&#39;n&#39;</span>&nbsp;<span class="comment" id="5296620">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296629">u</span><span class="op" id="5296630">,</span>&nbsp;<span class="ident" id="5296632">ut</span><span class="op" id="5296634">,</span>&nbsp;<span class="ident" id="5296636">pv</span>&nbsp;<span class="op" id="5296639">:=</span>&nbsp;<span class="ident" id="5296642">d</span><span class="op" id="5296643">.</span><span class="ident" id="5296644">indirect</span><span class="op" id="5296652">(</span><span class="ident" id="5296653">v</span><span class="op" id="5296654">,</span>&nbsp;<span class="ident" id="5296656">wantptr</span><span class="op" id="5296663">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296666">if</span>&nbsp;<span class="ident" id="5296669">u</span>&nbsp;<span class="op" id="5296671">!=</span>&nbsp;<span class="ident" id="5296674">nil</span>&nbsp;<span class="op" id="5296678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296682">err</span>&nbsp;<span class="op" id="5296686">:=</span>&nbsp;<span class="ident" id="5296689">u</span><span class="op" id="5296690">.</span><span class="ident" id="5296691">UnmarshalJSON</span><span class="op" id="5296704">(</span><span class="ident" id="5296705">item</span><span class="op" id="5296709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296713">if</span>&nbsp;<span class="ident" id="5296716">err</span>&nbsp;<span class="op" id="5296720">!=</span>&nbsp;<span class="ident" id="5296723">nil</span>&nbsp;<span class="op" id="5296727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296732">d</span><span class="op" id="5296733">.</span><span class="builtintype" id="5296734">error</span><span class="op" id="5296739">(</span><span class="ident" id="5296740">err</span><span class="op" id="5296743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5296747">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296751">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5296759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296762">if</span>&nbsp;<span class="ident" id="5296765">ut</span>&nbsp;<span class="op" id="5296768">!=</span>&nbsp;<span class="ident" id="5296771">nil</span>&nbsp;<span class="op" id="5296775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296779">if</span>&nbsp;<span class="ident" id="5296782">item</span><span class="op" id="5296786">[</span><span class="num" id="5296787">0</span><span class="op" id="5296788">]</span>&nbsp;<span class="op" id="5296790">!=</span>&nbsp;<span class="string" id="5296793">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5296797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5296802">if</span>&nbsp;<span class="ident" id="5296805">fromQuoted</span>&nbsp;<span class="op" id="5296816">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296822">d</span><span class="op" id="5296823">.</span><span class="ident" id="5296824">saveError</span><span class="op" id="5296833">(</span><span class="ident" id="5296834">fmt</span><span class="op" id="5296837">.</span><span class="ident" id="5296838">Errorf</span><span class="op" id="5296844">(</span><span class="string" id="5296845">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5296918">,</span>&nbsp;<span class="ident" id="5296920">item</span><span class="op" id="5296924">,</span>&nbsp;<span class="ident" id="5296926">v</span><span class="op" id="5296927">.</span><span class="ident" id="5296928">Type</span><span class="op" id="5296932">(</span><span class="op" id="5296933">)</span><span class="op" id="5296934">)</span><span class="op" id="5296935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5296940">}</span>&nbsp;<span class="keyword" id="5296942">else</span>&nbsp;<span class="op" id="5296947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5296953">d</span><span class="op" id="5296954">.</span><span class="ident" id="5296955">saveError</span><span class="op" id="5296964">(</span><span class="op" id="5296965">&amp;</span><span class="ident" id="5296966">UnmarshalTypeError</span><span class="op" id="5296984">{</span><span class="string" id="5296985">&#34;string&#34;</span><span class="op" id="5296993">,</span>&nbsp;<span class="ident" id="5296995">v</span><span class="op" id="5296996">.</span><span class="ident" id="5296997">Type</span><span class="op" id="5297001">(</span><span class="op" id="5297002">)</span><span class="op" id="5297003">}</span><span class="op" id="5297004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297013">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297017">s</span><span class="op" id="5297018">,</span>&nbsp;<span class="ident" id="5297020">ok</span>&nbsp;<span class="op" id="5297023">:=</span>&nbsp;<span class="ident" id="5297026">unquoteBytes</span><span class="op" id="5297038">(</span><span class="ident" id="5297039">item</span><span class="op" id="5297043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297047">if</span>&nbsp;<span class="op" id="5297050">!</span><span class="ident" id="5297051">ok</span>&nbsp;<span class="op" id="5297054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297059">if</span>&nbsp;<span class="ident" id="5297062">fromQuoted</span>&nbsp;<span class="op" id="5297073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297079">d</span><span class="op" id="5297080">.</span><span class="builtintype" id="5297081">error</span><span class="op" id="5297086">(</span><span class="ident" id="5297087">fmt</span><span class="op" id="5297090">.</span><span class="ident" id="5297091">Errorf</span><span class="op" id="5297097">(</span><span class="string" id="5297098">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5297171">,</span>&nbsp;<span class="ident" id="5297173">item</span><span class="op" id="5297177">,</span>&nbsp;<span class="ident" id="5297179">v</span><span class="op" id="5297180">.</span><span class="ident" id="5297181">Type</span><span class="op" id="5297185">(</span><span class="op" id="5297186">)</span><span class="op" id="5297187">)</span><span class="op" id="5297188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297193">}</span>&nbsp;<span class="keyword" id="5297195">else</span>&nbsp;<span class="op" id="5297200">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297206">d</span><span class="op" id="5297207">.</span><span class="builtintype" id="5297208">error</span><span class="op" id="5297213">(</span><span class="ident" id="5297214">errPhase</span><span class="op" id="5297222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297235">err</span>&nbsp;<span class="op" id="5297239">:=</span>&nbsp;<span class="ident" id="5297242">ut</span><span class="op" id="5297244">.</span><span class="ident" id="5297245">UnmarshalText</span><span class="op" id="5297258">(</span><span class="ident" id="5297259">s</span><span class="op" id="5297260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297264">if</span>&nbsp;<span class="ident" id="5297267">err</span>&nbsp;<span class="op" id="5297271">!=</span>&nbsp;<span class="ident" id="5297274">nil</span>&nbsp;<span class="op" id="5297278">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297283">d</span><span class="op" id="5297284">.</span><span class="builtintype" id="5297285">error</span><span class="op" id="5297290">(</span><span class="ident" id="5297291">err</span><span class="op" id="5297294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297302">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297314">v</span>&nbsp;<span class="op" id="5297316">=</span>&nbsp;<span class="ident" id="5297318">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297323">switch</span>&nbsp;<span class="ident" id="5297330">c</span>&nbsp;<span class="op" id="5297332">:=</span>&nbsp;<span class="ident" id="5297335">item</span><span class="op" id="5297339">[</span><span class="num" id="5297340">0</span><span class="op" id="5297341">]</span><span class="op" id="5297342">;</span>&nbsp;<span class="ident" id="5297344">c</span>&nbsp;<span class="op" id="5297346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297349">case</span>&nbsp;<span class="string" id="5297354">&#39;n&#39;</span><span class="op" id="5297357">:</span>&nbsp;<span class="comment" id="5297359">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297369">switch</span>&nbsp;<span class="ident" id="5297376">v</span><span class="op" id="5297377">.</span><span class="ident" id="5297378">Kind</span><span class="op" id="5297382">(</span><span class="op" id="5297383">)</span>&nbsp;<span class="op" id="5297385">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297389">case</span>&nbsp;<span class="ident" id="5297394">reflect</span><span class="op" id="5297401">.</span><span class="ident" id="5297402">Interface</span><span class="op" id="5297411">,</span>&nbsp;<span class="ident" id="5297413">reflect</span><span class="op" id="5297420">.</span><span class="ident" id="5297421">Ptr</span><span class="op" id="5297424">,</span>&nbsp;<span class="ident" id="5297426">reflect</span><span class="op" id="5297433">.</span><span class="ident" id="5297434">Map</span><span class="op" id="5297437">,</span>&nbsp;<span class="ident" id="5297439">reflect</span><span class="op" id="5297446">.</span><span class="ident" id="5297447">Slice</span><span class="op" id="5297452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297457">v</span><span class="op" id="5297458">.</span><span class="ident" id="5297459">Set</span><span class="op" id="5297462">(</span><span class="ident" id="5297463">reflect</span><span class="op" id="5297470">.</span><span class="ident" id="5297471">Zero</span><span class="op" id="5297475">(</span><span class="ident" id="5297476">v</span><span class="op" id="5297477">.</span><span class="ident" id="5297478">Type</span><span class="op" id="5297482">(</span><span class="op" id="5297483">)</span><span class="op" id="5297484">)</span><span class="op" id="5297485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5297490">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297543">case</span>&nbsp;<span class="string" id="5297548">&#39;t&#39;</span><span class="op" id="5297551">,</span>&nbsp;<span class="string" id="5297553">&#39;f&#39;</span><span class="op" id="5297556">:</span>&nbsp;<span class="comment" id="5297558">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297575">value</span>&nbsp;<span class="op" id="5297581">:=</span>&nbsp;<span class="ident" id="5297584">c</span>&nbsp;<span class="op" id="5297586">==</span>&nbsp;<span class="string" id="5297589">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297595">switch</span>&nbsp;<span class="ident" id="5297602">v</span><span class="op" id="5297603">.</span><span class="ident" id="5297604">Kind</span><span class="op" id="5297608">(</span><span class="op" id="5297609">)</span>&nbsp;<span class="op" id="5297611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297615">default</span><span class="op" id="5297622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297627">if</span>&nbsp;<span class="ident" id="5297630">fromQuoted</span>&nbsp;<span class="op" id="5297641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297647">d</span><span class="op" id="5297648">.</span><span class="ident" id="5297649">saveError</span><span class="op" id="5297658">(</span><span class="ident" id="5297659">fmt</span><span class="op" id="5297662">.</span><span class="ident" id="5297663">Errorf</span><span class="op" id="5297669">(</span><span class="string" id="5297670">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5297743">,</span>&nbsp;<span class="ident" id="5297745">item</span><span class="op" id="5297749">,</span>&nbsp;<span class="ident" id="5297751">v</span><span class="op" id="5297752">.</span><span class="ident" id="5297753">Type</span><span class="op" id="5297757">(</span><span class="op" id="5297758">)</span><span class="op" id="5297759">)</span><span class="op" id="5297760">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297765">}</span>&nbsp;<span class="keyword" id="5297767">else</span>&nbsp;<span class="op" id="5297772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297778">d</span><span class="op" id="5297779">.</span><span class="ident" id="5297780">saveError</span><span class="op" id="5297789">(</span><span class="op" id="5297790">&amp;</span><span class="ident" id="5297791">UnmarshalTypeError</span><span class="op" id="5297809">{</span><span class="string" id="5297810">&#34;bool&#34;</span><span class="op" id="5297816">,</span>&nbsp;<span class="ident" id="5297818">v</span><span class="op" id="5297819">.</span><span class="ident" id="5297820">Type</span><span class="op" id="5297824">(</span><span class="op" id="5297825">)</span><span class="op" id="5297826">}</span><span class="op" id="5297827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297836">case</span>&nbsp;<span class="ident" id="5297841">reflect</span><span class="op" id="5297848">.</span><span class="ident" id="5297849">Bool</span><span class="op" id="5297853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297858">v</span><span class="op" id="5297859">.</span><span class="ident" id="5297860">SetBool</span><span class="op" id="5297867">(</span><span class="ident" id="5297868">value</span><span class="op" id="5297873">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297877">case</span>&nbsp;<span class="ident" id="5297882">reflect</span><span class="op" id="5297889">.</span><span class="ident" id="5297890">Interface</span><span class="op" id="5297899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5297904">if</span>&nbsp;<span class="ident" id="5297907">v</span><span class="op" id="5297908">.</span><span class="ident" id="5297909">NumMethod</span><span class="op" id="5297918">(</span><span class="op" id="5297919">)</span>&nbsp;<span class="op" id="5297921">==</span>&nbsp;<span class="num" id="5297924">0</span>&nbsp;<span class="op" id="5297926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297932">v</span><span class="op" id="5297933">.</span><span class="ident" id="5297934">Set</span><span class="op" id="5297937">(</span><span class="ident" id="5297938">reflect</span><span class="op" id="5297945">.</span><span class="ident" id="5297946">ValueOf</span><span class="op" id="5297953">(</span><span class="ident" id="5297954">value</span><span class="op" id="5297959">)</span><span class="op" id="5297960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5297965">}</span>&nbsp;<span class="keyword" id="5297967">else</span>&nbsp;<span class="op" id="5297972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5297978">d</span><span class="op" id="5297979">.</span><span class="ident" id="5297980">saveError</span><span class="op" id="5297989">(</span><span class="op" id="5297990">&amp;</span><span class="ident" id="5297991">UnmarshalTypeError</span><span class="op" id="5298009">{</span><span class="string" id="5298010">&#34;bool&#34;</span><span class="op" id="5298016">,</span>&nbsp;<span class="ident" id="5298018">v</span><span class="op" id="5298019">.</span><span class="ident" id="5298020">Type</span><span class="op" id="5298024">(</span><span class="op" id="5298025">)</span><span class="op" id="5298026">}</span><span class="op" id="5298027">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298040">case</span>&nbsp;<span class="string" id="5298045">&#39;&#34;&#39;</span><span class="op" id="5298048">:</span>&nbsp;<span class="comment" id="5298050">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298062">s</span><span class="op" id="5298063">,</span>&nbsp;<span class="ident" id="5298065">ok</span>&nbsp;<span class="op" id="5298068">:=</span>&nbsp;<span class="ident" id="5298071">unquoteBytes</span><span class="op" id="5298083">(</span><span class="ident" id="5298084">item</span><span class="op" id="5298088">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298092">if</span>&nbsp;<span class="op" id="5298095">!</span><span class="ident" id="5298096">ok</span>&nbsp;<span class="op" id="5298099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298104">if</span>&nbsp;<span class="ident" id="5298107">fromQuoted</span>&nbsp;<span class="op" id="5298118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298124">d</span><span class="op" id="5298125">.</span><span class="builtintype" id="5298126">error</span><span class="op" id="5298131">(</span><span class="ident" id="5298132">fmt</span><span class="op" id="5298135">.</span><span class="ident" id="5298136">Errorf</span><span class="op" id="5298142">(</span><span class="string" id="5298143">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5298216">,</span>&nbsp;<span class="ident" id="5298218">item</span><span class="op" id="5298222">,</span>&nbsp;<span class="ident" id="5298224">v</span><span class="op" id="5298225">.</span><span class="ident" id="5298226">Type</span><span class="op" id="5298230">(</span><span class="op" id="5298231">)</span><span class="op" id="5298232">)</span><span class="op" id="5298233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298238">}</span>&nbsp;<span class="keyword" id="5298240">else</span>&nbsp;<span class="op" id="5298245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298251">d</span><span class="op" id="5298252">.</span><span class="builtintype" id="5298253">error</span><span class="op" id="5298258">(</span><span class="ident" id="5298259">errPhase</span><span class="op" id="5298267">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298280">switch</span>&nbsp;<span class="ident" id="5298287">v</span><span class="op" id="5298288">.</span><span class="ident" id="5298289">Kind</span><span class="op" id="5298293">(</span><span class="op" id="5298294">)</span>&nbsp;<span class="op" id="5298296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298300">default</span><span class="op" id="5298307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298312">d</span><span class="op" id="5298313">.</span><span class="ident" id="5298314">saveError</span><span class="op" id="5298323">(</span><span class="op" id="5298324">&amp;</span><span class="ident" id="5298325">UnmarshalTypeError</span><span class="op" id="5298343">{</span><span class="string" id="5298344">&#34;string&#34;</span><span class="op" id="5298352">,</span>&nbsp;<span class="ident" id="5298354">v</span><span class="op" id="5298355">.</span><span class="ident" id="5298356">Type</span><span class="op" id="5298360">(</span><span class="op" id="5298361">)</span><span class="op" id="5298362">}</span><span class="op" id="5298363">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298367">case</span>&nbsp;<span class="ident" id="5298372">reflect</span><span class="op" id="5298379">.</span><span class="ident" id="5298380">Slice</span><span class="op" id="5298385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298390">if</span>&nbsp;<span class="ident" id="5298393">v</span><span class="op" id="5298394">.</span><span class="ident" id="5298395">Type</span><span class="op" id="5298399">(</span><span class="op" id="5298400">)</span>&nbsp;<span class="op" id="5298402">!=</span>&nbsp;<span class="ident" id="5298405">byteSliceType</span>&nbsp;<span class="op" id="5298419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298425">d</span><span class="op" id="5298426">.</span><span class="ident" id="5298427">saveError</span><span class="op" id="5298436">(</span><span class="op" id="5298437">&amp;</span><span class="ident" id="5298438">UnmarshalTypeError</span><span class="op" id="5298456">{</span><span class="string" id="5298457">&#34;string&#34;</span><span class="op" id="5298465">,</span>&nbsp;<span class="ident" id="5298467">v</span><span class="op" id="5298468">.</span><span class="ident" id="5298469">Type</span><span class="op" id="5298473">(</span><span class="op" id="5298474">)</span><span class="op" id="5298475">}</span><span class="op" id="5298476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298482">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298491">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298496">b</span>&nbsp;<span class="op" id="5298498">:=</span>&nbsp;<span class="builtinfunc" id="5298501">make</span><span class="op" id="5298505">(</span><span class="op" id="5298506">[</span><span class="op" id="5298507">]</span><span class="builtintype" id="5298508">byte</span><span class="op" id="5298512">,</span>&nbsp;<span class="ident" id="5298514">base64</span><span class="op" id="5298520">.</span><span class="ident" id="5298521">StdEncoding</span><span class="op" id="5298532">.</span><span class="ident" id="5298533">DecodedLen</span><span class="op" id="5298543">(</span><span class="builtinfunc" id="5298544">len</span><span class="op" id="5298547">(</span><span class="ident" id="5298548">s</span><span class="op" id="5298549">)</span><span class="op" id="5298550">)</span><span class="op" id="5298551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298556">n</span><span class="op" id="5298557">,</span>&nbsp;<span class="ident" id="5298559">err</span>&nbsp;<span class="op" id="5298563">:=</span>&nbsp;<span class="ident" id="5298566">base64</span><span class="op" id="5298572">.</span><span class="ident" id="5298573">StdEncoding</span><span class="op" id="5298584">.</span><span class="ident" id="5298585">Decode</span><span class="op" id="5298591">(</span><span class="ident" id="5298592">b</span><span class="op" id="5298593">,</span>&nbsp;<span class="ident" id="5298595">s</span><span class="op" id="5298596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298601">if</span>&nbsp;<span class="ident" id="5298604">err</span>&nbsp;<span class="op" id="5298608">!=</span>&nbsp;<span class="ident" id="5298611">nil</span>&nbsp;<span class="op" id="5298615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298621">d</span><span class="op" id="5298622">.</span><span class="ident" id="5298623">saveError</span><span class="op" id="5298632">(</span><span class="ident" id="5298633">err</span><span class="op" id="5298636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298642">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298656">v</span><span class="op" id="5298657">.</span><span class="ident" id="5298658">Set</span><span class="op" id="5298661">(</span><span class="ident" id="5298662">reflect</span><span class="op" id="5298669">.</span><span class="ident" id="5298670">ValueOf</span><span class="op" id="5298677">(</span><span class="ident" id="5298678">b</span><span class="op" id="5298679">[</span><span class="num" id="5298680">0</span><span class="op" id="5298681">:</span><span class="ident" id="5298682">n</span><span class="op" id="5298683">]</span><span class="op" id="5298684">)</span><span class="op" id="5298685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298689">case</span>&nbsp;<span class="ident" id="5298694">reflect</span><span class="op" id="5298701">.</span><span class="ident" id="5298702">String</span><span class="op" id="5298708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298713">v</span><span class="op" id="5298714">.</span><span class="ident" id="5298715">SetString</span><span class="op" id="5298724">(</span><span class="builtintype" id="5298725">string</span><span class="op" id="5298731">(</span><span class="ident" id="5298732">s</span><span class="op" id="5298733">)</span><span class="op" id="5298734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298738">case</span>&nbsp;<span class="ident" id="5298743">reflect</span><span class="op" id="5298750">.</span><span class="ident" id="5298751">Interface</span><span class="op" id="5298760">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298765">if</span>&nbsp;<span class="ident" id="5298768">v</span><span class="op" id="5298769">.</span><span class="ident" id="5298770">NumMethod</span><span class="op" id="5298779">(</span><span class="op" id="5298780">)</span>&nbsp;<span class="op" id="5298782">==</span>&nbsp;<span class="num" id="5298785">0</span>&nbsp;<span class="op" id="5298787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298793">v</span><span class="op" id="5298794">.</span><span class="ident" id="5298795">Set</span><span class="op" id="5298798">(</span><span class="ident" id="5298799">reflect</span><span class="op" id="5298806">.</span><span class="ident" id="5298807">ValueOf</span><span class="op" id="5298814">(</span><span class="builtintype" id="5298815">string</span><span class="op" id="5298821">(</span><span class="ident" id="5298822">s</span><span class="op" id="5298823">)</span><span class="op" id="5298824">)</span><span class="op" id="5298825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298830">}</span>&nbsp;<span class="keyword" id="5298832">else</span>&nbsp;<span class="op" id="5298837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298843">d</span><span class="op" id="5298844">.</span><span class="ident" id="5298845">saveError</span><span class="op" id="5298854">(</span><span class="op" id="5298855">&amp;</span><span class="ident" id="5298856">UnmarshalTypeError</span><span class="op" id="5298874">{</span><span class="string" id="5298875">&#34;string&#34;</span><span class="op" id="5298883">,</span>&nbsp;<span class="ident" id="5298885">v</span><span class="op" id="5298886">.</span><span class="ident" id="5298887">Type</span><span class="op" id="5298891">(</span><span class="op" id="5298892">)</span><span class="op" id="5298893">}</span><span class="op" id="5298894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298899">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5298903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298907">default</span><span class="op" id="5298914">:</span>&nbsp;<span class="comment" id="5298916">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298928">if</span>&nbsp;<span class="ident" id="5298931">c</span>&nbsp;<span class="op" id="5298933">!=</span>&nbsp;<span class="string" id="5298936">&#39;-&#39;</span>&nbsp;<span class="op" id="5298940">&amp;&amp;</span>&nbsp;<span class="op" id="5298943">(</span><span class="ident" id="5298944">c</span>&nbsp;<span class="op" id="5298946">&lt;</span>&nbsp;<span class="string" id="5298948">&#39;0&#39;</span>&nbsp;<span class="op" id="5298952">||</span>&nbsp;<span class="ident" id="5298955">c</span>&nbsp;<span class="op" id="5298957">&gt;</span>&nbsp;<span class="string" id="5298959">&#39;9&#39;</span><span class="op" id="5298962">)</span>&nbsp;<span class="op" id="5298964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5298969">if</span>&nbsp;<span class="ident" id="5298972">fromQuoted</span>&nbsp;<span class="op" id="5298983">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5298989">d</span><span class="op" id="5298990">.</span><span class="builtintype" id="5298991">error</span><span class="op" id="5298996">(</span><span class="ident" id="5298997">fmt</span><span class="op" id="5299000">.</span><span class="ident" id="5299001">Errorf</span><span class="op" id="5299007">(</span><span class="string" id="5299008">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5299081">,</span>&nbsp;<span class="ident" id="5299083">item</span><span class="op" id="5299087">,</span>&nbsp;<span class="ident" id="5299089">v</span><span class="op" id="5299090">.</span><span class="ident" id="5299091">Type</span><span class="op" id="5299095">(</span><span class="op" id="5299096">)</span><span class="op" id="5299097">)</span><span class="op" id="5299098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299103">}</span>&nbsp;<span class="keyword" id="5299105">else</span>&nbsp;<span class="op" id="5299110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299116">d</span><span class="op" id="5299117">.</span><span class="builtintype" id="5299118">error</span><span class="op" id="5299123">(</span><span class="ident" id="5299124">errPhase</span><span class="op" id="5299132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299141">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299145">s</span>&nbsp;<span class="op" id="5299147">:=</span>&nbsp;<span class="builtintype" id="5299150">string</span><span class="op" id="5299156">(</span><span class="ident" id="5299157">item</span><span class="op" id="5299161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299165">switch</span>&nbsp;<span class="ident" id="5299172">v</span><span class="op" id="5299173">.</span><span class="ident" id="5299174">Kind</span><span class="op" id="5299178">(</span><span class="op" id="5299179">)</span>&nbsp;<span class="op" id="5299181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299185">default</span><span class="op" id="5299192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299197">if</span>&nbsp;<span class="ident" id="5299200">v</span><span class="op" id="5299201">.</span><span class="ident" id="5299202">Kind</span><span class="op" id="5299206">(</span><span class="op" id="5299207">)</span>&nbsp;<span class="op" id="5299209">==</span>&nbsp;<span class="ident" id="5299212">reflect</span><span class="op" id="5299219">.</span><span class="ident" id="5299220">String</span>&nbsp;<span class="op" id="5299227">&amp;&amp;</span>&nbsp;<span class="ident" id="5299230">v</span><span class="op" id="5299231">.</span><span class="ident" id="5299232">Type</span><span class="op" id="5299236">(</span><span class="op" id="5299237">)</span>&nbsp;<span class="op" id="5299239">==</span>&nbsp;<span class="ident" id="5299242">numberType</span>&nbsp;<span class="op" id="5299253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299259">v</span><span class="op" id="5299260">.</span><span class="ident" id="5299261">SetString</span><span class="op" id="5299270">(</span><span class="ident" id="5299271">s</span><span class="op" id="5299272">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299278">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299292">if</span>&nbsp;<span class="ident" id="5299295">fromQuoted</span>&nbsp;<span class="op" id="5299306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299312">d</span><span class="op" id="5299313">.</span><span class="builtintype" id="5299314">error</span><span class="op" id="5299319">(</span><span class="ident" id="5299320">fmt</span><span class="op" id="5299323">.</span><span class="ident" id="5299324">Errorf</span><span class="op" id="5299330">(</span><span class="string" id="5299331">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="5299404">,</span>&nbsp;<span class="ident" id="5299406">item</span><span class="op" id="5299410">,</span>&nbsp;<span class="ident" id="5299412">v</span><span class="op" id="5299413">.</span><span class="ident" id="5299414">Type</span><span class="op" id="5299418">(</span><span class="op" id="5299419">)</span><span class="op" id="5299420">)</span><span class="op" id="5299421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299426">}</span>&nbsp;<span class="keyword" id="5299428">else</span>&nbsp;<span class="op" id="5299433">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299439">d</span><span class="op" id="5299440">.</span><span class="builtintype" id="5299441">error</span><span class="op" id="5299446">(</span><span class="op" id="5299447">&amp;</span><span class="ident" id="5299448">UnmarshalTypeError</span><span class="op" id="5299466">{</span><span class="string" id="5299467">&#34;number&#34;</span><span class="op" id="5299475">,</span>&nbsp;<span class="ident" id="5299477">v</span><span class="op" id="5299478">.</span><span class="ident" id="5299479">Type</span><span class="op" id="5299483">(</span><span class="op" id="5299484">)</span><span class="op" id="5299485">}</span><span class="op" id="5299486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299495">case</span>&nbsp;<span class="ident" id="5299500">reflect</span><span class="op" id="5299507">.</span><span class="ident" id="5299508">Interface</span><span class="op" id="5299517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299522">n</span><span class="op" id="5299523">,</span>&nbsp;<span class="ident" id="5299525">err</span>&nbsp;<span class="op" id="5299529">:=</span>&nbsp;<span class="ident" id="5299532">d</span><span class="op" id="5299533">.</span><span class="ident" id="5299534">convertNumber</span><span class="op" id="5299547">(</span><span class="ident" id="5299548">s</span><span class="op" id="5299549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299554">if</span>&nbsp;<span class="ident" id="5299557">err</span>&nbsp;<span class="op" id="5299561">!=</span>&nbsp;<span class="ident" id="5299564">nil</span>&nbsp;<span class="op" id="5299568">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299574">d</span><span class="op" id="5299575">.</span><span class="ident" id="5299576">saveError</span><span class="op" id="5299585">(</span><span class="ident" id="5299586">err</span><span class="op" id="5299589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299595">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299609">if</span>&nbsp;<span class="ident" id="5299612">v</span><span class="op" id="5299613">.</span><span class="ident" id="5299614">NumMethod</span><span class="op" id="5299623">(</span><span class="op" id="5299624">)</span>&nbsp;<span class="op" id="5299626">!=</span>&nbsp;<span class="num" id="5299629">0</span>&nbsp;<span class="op" id="5299631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299637">d</span><span class="op" id="5299638">.</span><span class="ident" id="5299639">saveError</span><span class="op" id="5299648">(</span><span class="op" id="5299649">&amp;</span><span class="ident" id="5299650">UnmarshalTypeError</span><span class="op" id="5299668">{</span><span class="string" id="5299669">&#34;number&#34;</span><span class="op" id="5299677">,</span>&nbsp;<span class="ident" id="5299679">v</span><span class="op" id="5299680">.</span><span class="ident" id="5299681">Type</span><span class="op" id="5299685">(</span><span class="op" id="5299686">)</span><span class="op" id="5299687">}</span><span class="op" id="5299688">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299694">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299708">v</span><span class="op" id="5299709">.</span><span class="ident" id="5299710">Set</span><span class="op" id="5299713">(</span><span class="ident" id="5299714">reflect</span><span class="op" id="5299721">.</span><span class="ident" id="5299722">ValueOf</span><span class="op" id="5299729">(</span><span class="ident" id="5299730">n</span><span class="op" id="5299731">)</span><span class="op" id="5299732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299737">case</span>&nbsp;<span class="ident" id="5299742">reflect</span><span class="op" id="5299749">.</span><span class="ident" id="5299750">Int</span><span class="op" id="5299753">,</span>&nbsp;<span class="ident" id="5299755">reflect</span><span class="op" id="5299762">.</span><span class="ident" id="5299763">Int8</span><span class="op" id="5299767">,</span>&nbsp;<span class="ident" id="5299769">reflect</span><span class="op" id="5299776">.</span><span class="ident" id="5299777">Int16</span><span class="op" id="5299782">,</span>&nbsp;<span class="ident" id="5299784">reflect</span><span class="op" id="5299791">.</span><span class="ident" id="5299792">Int32</span><span class="op" id="5299797">,</span>&nbsp;<span class="ident" id="5299799">reflect</span><span class="op" id="5299806">.</span><span class="ident" id="5299807">Int64</span><span class="op" id="5299812">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299817">n</span><span class="op" id="5299818">,</span>&nbsp;<span class="ident" id="5299820">err</span>&nbsp;<span class="op" id="5299824">:=</span>&nbsp;<span class="ident" id="5299827">strconv</span><span class="op" id="5299834">.</span><span class="ident" id="5299835">ParseInt</span><span class="op" id="5299843">(</span><span class="ident" id="5299844">s</span><span class="op" id="5299845">,</span>&nbsp;<span class="num" id="5299847">10</span><span class="op" id="5299849">,</span>&nbsp;<span class="num" id="5299851">64</span><span class="op" id="5299853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299858">if</span>&nbsp;<span class="ident" id="5299861">err</span>&nbsp;<span class="op" id="5299865">!=</span>&nbsp;<span class="ident" id="5299868">nil</span>&nbsp;<span class="op" id="5299872">||</span>&nbsp;<span class="ident" id="5299875">v</span><span class="op" id="5299876">.</span><span class="ident" id="5299877">OverflowInt</span><span class="op" id="5299888">(</span><span class="ident" id="5299889">n</span><span class="op" id="5299890">)</span>&nbsp;<span class="op" id="5299892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299898">d</span><span class="op" id="5299899">.</span><span class="ident" id="5299900">saveError</span><span class="op" id="5299909">(</span><span class="op" id="5299910">&amp;</span><span class="ident" id="5299911">UnmarshalTypeError</span><span class="op" id="5299929">{</span><span class="string" id="5299930">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5299940">+</span>&nbsp;<span class="ident" id="5299942">s</span><span class="op" id="5299943">,</span>&nbsp;<span class="ident" id="5299945">v</span><span class="op" id="5299946">.</span><span class="ident" id="5299947">Type</span><span class="op" id="5299951">(</span><span class="op" id="5299952">)</span><span class="op" id="5299953">}</span><span class="op" id="5299954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299960">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5299969">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5299974">v</span><span class="op" id="5299975">.</span><span class="ident" id="5299976">SetInt</span><span class="op" id="5299982">(</span><span class="ident" id="5299983">n</span><span class="op" id="5299984">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5299989">case</span>&nbsp;<span class="ident" id="5299994">reflect</span><span class="op" id="5300001">.</span><span class="ident" id="5300002">Uint</span><span class="op" id="5300006">,</span>&nbsp;<span class="ident" id="5300008">reflect</span><span class="op" id="5300015">.</span><span class="ident" id="5300016">Uint8</span><span class="op" id="5300021">,</span>&nbsp;<span class="ident" id="5300023">reflect</span><span class="op" id="5300030">.</span><span class="ident" id="5300031">Uint16</span><span class="op" id="5300037">,</span>&nbsp;<span class="ident" id="5300039">reflect</span><span class="op" id="5300046">.</span><span class="ident" id="5300047">Uint32</span><span class="op" id="5300053">,</span>&nbsp;<span class="ident" id="5300055">reflect</span><span class="op" id="5300062">.</span><span class="ident" id="5300063">Uint64</span><span class="op" id="5300069">,</span>&nbsp;<span class="ident" id="5300071">reflect</span><span class="op" id="5300078">.</span><span class="ident" id="5300079">Uintptr</span><span class="op" id="5300086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300091">n</span><span class="op" id="5300092">,</span>&nbsp;<span class="ident" id="5300094">err</span>&nbsp;<span class="op" id="5300098">:=</span>&nbsp;<span class="ident" id="5300101">strconv</span><span class="op" id="5300108">.</span><span class="ident" id="5300109">ParseUint</span><span class="op" id="5300118">(</span><span class="ident" id="5300119">s</span><span class="op" id="5300120">,</span>&nbsp;<span class="num" id="5300122">10</span><span class="op" id="5300124">,</span>&nbsp;<span class="num" id="5300126">64</span><span class="op" id="5300128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300133">if</span>&nbsp;<span class="ident" id="5300136">err</span>&nbsp;<span class="op" id="5300140">!=</span>&nbsp;<span class="ident" id="5300143">nil</span>&nbsp;<span class="op" id="5300147">||</span>&nbsp;<span class="ident" id="5300150">v</span><span class="op" id="5300151">.</span><span class="ident" id="5300152">OverflowUint</span><span class="op" id="5300164">(</span><span class="ident" id="5300165">n</span><span class="op" id="5300166">)</span>&nbsp;<span class="op" id="5300168">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300174">d</span><span class="op" id="5300175">.</span><span class="ident" id="5300176">saveError</span><span class="op" id="5300185">(</span><span class="op" id="5300186">&amp;</span><span class="ident" id="5300187">UnmarshalTypeError</span><span class="op" id="5300205">{</span><span class="string" id="5300206">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5300216">+</span>&nbsp;<span class="ident" id="5300218">s</span><span class="op" id="5300219">,</span>&nbsp;<span class="ident" id="5300221">v</span><span class="op" id="5300222">.</span><span class="ident" id="5300223">Type</span><span class="op" id="5300227">(</span><span class="op" id="5300228">)</span><span class="op" id="5300229">}</span><span class="op" id="5300230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300236">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300250">v</span><span class="op" id="5300251">.</span><span class="ident" id="5300252">SetUint</span><span class="op" id="5300259">(</span><span class="ident" id="5300260">n</span><span class="op" id="5300261">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300266">case</span>&nbsp;<span class="ident" id="5300271">reflect</span><span class="op" id="5300278">.</span><span class="ident" id="5300279">Float32</span><span class="op" id="5300286">,</span>&nbsp;<span class="ident" id="5300288">reflect</span><span class="op" id="5300295">.</span><span class="ident" id="5300296">Float64</span><span class="op" id="5300303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300308">n</span><span class="op" id="5300309">,</span>&nbsp;<span class="ident" id="5300311">err</span>&nbsp;<span class="op" id="5300315">:=</span>&nbsp;<span class="ident" id="5300318">strconv</span><span class="op" id="5300325">.</span><span class="ident" id="5300326">ParseFloat</span><span class="op" id="5300336">(</span><span class="ident" id="5300337">s</span><span class="op" id="5300338">,</span>&nbsp;<span class="ident" id="5300340">v</span><span class="op" id="5300341">.</span><span class="ident" id="5300342">Type</span><span class="op" id="5300346">(</span><span class="op" id="5300347">)</span><span class="op" id="5300348">.</span><span class="ident" id="5300349">Bits</span><span class="op" id="5300353">(</span><span class="op" id="5300354">)</span><span class="op" id="5300355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300360">if</span>&nbsp;<span class="ident" id="5300363">err</span>&nbsp;<span class="op" id="5300367">!=</span>&nbsp;<span class="ident" id="5300370">nil</span>&nbsp;<span class="op" id="5300374">||</span>&nbsp;<span class="ident" id="5300377">v</span><span class="op" id="5300378">.</span><span class="ident" id="5300379">OverflowFloat</span><span class="op" id="5300392">(</span><span class="ident" id="5300393">n</span><span class="op" id="5300394">)</span>&nbsp;<span class="op" id="5300396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300402">d</span><span class="op" id="5300403">.</span><span class="ident" id="5300404">saveError</span><span class="op" id="5300413">(</span><span class="op" id="5300414">&amp;</span><span class="ident" id="5300415">UnmarshalTypeError</span><span class="op" id="5300433">{</span><span class="string" id="5300434">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="5300444">+</span>&nbsp;<span class="ident" id="5300446">s</span><span class="op" id="5300447">,</span>&nbsp;<span class="ident" id="5300449">v</span><span class="op" id="5300450">.</span><span class="ident" id="5300451">Type</span><span class="op" id="5300455">(</span><span class="op" id="5300456">)</span><span class="op" id="5300457">}</span><span class="op" id="5300458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300464">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300478">v</span><span class="op" id="5300479">.</span><span class="ident" id="5300480">SetFloat</span><span class="op" id="5300488">(</span><span class="ident" id="5300489">n</span><span class="op" id="5300490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5300497">}</span><br>
<span class="lineno"></span><span class="op" id="5300499">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="5300502">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="5300561">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="5300621">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="5300686">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="5300742">func</span>&nbsp;<span class="op" id="5300747">(</span><span class="ident" id="5300748">d</span>&nbsp;<span class="op" id="5300750">*</span><span class="ident" id="5300751">decodeState</span><span class="op" id="5300762">)</span>&nbsp;<span class="ident" id="5300764">valueInterface</span><span class="op" id="5300778">(</span><span class="op" id="5300779">)</span>&nbsp;<span class="keyword" id="5300781">interface</span><span class="op" id="5300790">{</span><span class="op" id="5300791">}</span>&nbsp;<span class="op" id="5300793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300796">switch</span>&nbsp;<span class="ident" id="5300803">d</span><span class="op" id="5300804">.</span><span class="ident" id="5300805">scanWhile</span><span class="op" id="5300814">(</span><span class="ident" id="5300815">scanSkipSpace</span><span class="op" id="5300828">)</span>&nbsp;<span class="op" id="5300830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300833">default</span><span class="op" id="5300840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5300844">d</span><span class="op" id="5300845">.</span><span class="builtintype" id="5300846">error</span><span class="op" id="5300851">(</span><span class="ident" id="5300852">errPhase</span><span class="op" id="5300860">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5300864">panic</span><span class="op" id="5300869">(</span><span class="string" id="5300870">&#34;unreachable&#34;</span><span class="op" id="5300883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300886">case</span>&nbsp;<span class="ident" id="5300891">scanBeginArray</span><span class="op" id="5300905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300909">return</span>&nbsp;<span class="ident" id="5300916">d</span><span class="op" id="5300917">.</span><span class="ident" id="5300918">arrayInterface</span><span class="op" id="5300932">(</span><span class="op" id="5300933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300936">case</span>&nbsp;<span class="ident" id="5300941">scanBeginObject</span><span class="op" id="5300956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300960">return</span>&nbsp;<span class="ident" id="5300967">d</span><span class="op" id="5300968">.</span><span class="ident" id="5300969">objectInterface</span><span class="op" id="5300984">(</span><span class="op" id="5300985">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5300988">case</span>&nbsp;<span class="ident" id="5300993">scanBeginLiteral</span><span class="op" id="5301009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301013">return</span>&nbsp;<span class="ident" id="5301020">d</span><span class="op" id="5301021">.</span><span class="ident" id="5301022">literalInterface</span><span class="op" id="5301038">(</span><span class="op" id="5301039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301042">}</span><br>
<span class="lineno"></span><span class="op" id="5301044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="5301047">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5301106">func</span>&nbsp;<span class="op" id="5301111">(</span><span class="ident" id="5301112">d</span>&nbsp;<span class="op" id="5301114">*</span><span class="ident" id="5301115">decodeState</span><span class="op" id="5301126">)</span>&nbsp;<span class="ident" id="5301128">arrayInterface</span><span class="op" id="5301142">(</span><span class="op" id="5301143">)</span>&nbsp;<span class="op" id="5301145">[</span><span class="op" id="5301146">]</span><span class="keyword" id="5301147">interface</span><span class="op" id="5301156">{</span><span class="op" id="5301157">}</span>&nbsp;<span class="op" id="5301159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301162">var</span>&nbsp;<span class="ident" id="5301166">v</span>&nbsp;<span class="op" id="5301168">=</span>&nbsp;<span class="builtinfunc" id="5301170">make</span><span class="op" id="5301174">(</span><span class="op" id="5301175">[</span><span class="op" id="5301176">]</span><span class="keyword" id="5301177">interface</span><span class="op" id="5301186">{</span><span class="op" id="5301187">}</span><span class="op" id="5301188">,</span>&nbsp;<span class="num" id="5301190">0</span><span class="op" id="5301191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301194">for</span>&nbsp;<span class="op" id="5301198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301202">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301262">op</span>&nbsp;<span class="op" id="5301265">:=</span>&nbsp;<span class="ident" id="5301268">d</span><span class="op" id="5301269">.</span><span class="ident" id="5301270">scanWhile</span><span class="op" id="5301279">(</span><span class="ident" id="5301280">scanSkipSpace</span><span class="op" id="5301293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301297">if</span>&nbsp;<span class="ident" id="5301300">op</span>&nbsp;<span class="op" id="5301303">==</span>&nbsp;<span class="ident" id="5301306">scanEndArray</span>&nbsp;<span class="op" id="5301319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301324">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301337">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301393">d</span><span class="op" id="5301394">.</span><span class="ident" id="5301395">off</span><span class="op" id="5301398">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301403">d</span><span class="op" id="5301404">.</span><span class="ident" id="5301405">scan</span><span class="op" id="5301409">.</span><span class="ident" id="5301410">undo</span><span class="op" id="5301414">(</span><span class="ident" id="5301415">op</span><span class="op" id="5301417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301422">v</span>&nbsp;<span class="op" id="5301424">=</span>&nbsp;<span class="builtinfunc" id="5301426">append</span><span class="op" id="5301432">(</span><span class="ident" id="5301433">v</span><span class="op" id="5301434">,</span>&nbsp;<span class="ident" id="5301436">d</span><span class="op" id="5301437">.</span><span class="ident" id="5301438">valueInterface</span><span class="op" id="5301452">(</span><span class="op" id="5301453">)</span><span class="op" id="5301454">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301459">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301491">op</span>&nbsp;<span class="op" id="5301494">=</span>&nbsp;<span class="ident" id="5301496">d</span><span class="op" id="5301497">.</span><span class="ident" id="5301498">scanWhile</span><span class="op" id="5301507">(</span><span class="ident" id="5301508">scanSkipSpace</span><span class="op" id="5301521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301525">if</span>&nbsp;<span class="ident" id="5301528">op</span>&nbsp;<span class="op" id="5301531">==</span>&nbsp;<span class="ident" id="5301534">scanEndArray</span>&nbsp;<span class="op" id="5301547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301552">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301564">if</span>&nbsp;<span class="ident" id="5301567">op</span>&nbsp;<span class="op" id="5301570">!=</span>&nbsp;<span class="ident" id="5301573">scanArrayValue</span>&nbsp;<span class="op" id="5301588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301593">d</span><span class="op" id="5301594">.</span><span class="builtintype" id="5301595">error</span><span class="op" id="5301600">(</span><span class="ident" id="5301601">errPhase</span><span class="op" id="5301609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301616">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301619">return</span>&nbsp;<span class="ident" id="5301626">v</span><br>
<span class="lineno"></span><span class="op" id="5301628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5301631">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="5301701">func</span>&nbsp;<span class="op" id="5301706">(</span><span class="ident" id="5301707">d</span>&nbsp;<span class="op" id="5301709">*</span><span class="ident" id="5301710">decodeState</span><span class="op" id="5301721">)</span>&nbsp;<span class="ident" id="5301723">objectInterface</span><span class="op" id="5301738">(</span><span class="op" id="5301739">)</span>&nbsp;<span class="keyword" id="5301741">map</span><span class="op" id="5301744">[</span><span class="builtintype" id="5301745">string</span><span class="op" id="5301751">]</span><span class="keyword" id="5301752">interface</span><span class="op" id="5301761">{</span><span class="op" id="5301762">}</span>&nbsp;<span class="op" id="5301764">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301767">m</span>&nbsp;<span class="op" id="5301769">:=</span>&nbsp;<span class="builtinfunc" id="5301772">make</span><span class="op" id="5301776">(</span><span class="keyword" id="5301777">map</span><span class="op" id="5301780">[</span><span class="builtintype" id="5301781">string</span><span class="op" id="5301787">]</span><span class="keyword" id="5301788">interface</span><span class="op" id="5301797">{</span><span class="op" id="5301798">}</span><span class="op" id="5301799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301802">for</span>&nbsp;<span class="op" id="5301806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301810">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5301858">op</span>&nbsp;<span class="op" id="5301861">:=</span>&nbsp;<span class="ident" id="5301864">d</span><span class="op" id="5301865">.</span><span class="ident" id="5301866">scanWhile</span><span class="op" id="5301875">(</span><span class="ident" id="5301876">scanSkipSpace</span><span class="op" id="5301889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301893">if</span>&nbsp;<span class="ident" id="5301896">op</span>&nbsp;<span class="op" id="5301899">==</span>&nbsp;<span class="ident" id="5301902">scanEndObject</span>&nbsp;<span class="op" id="5301916">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5301921">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301975">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5301983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5301987">if</span>&nbsp;<span class="ident" id="5301990">op</span>&nbsp;<span class="op" id="5301993">!=</span>&nbsp;<span class="ident" id="5301996">scanBeginLiteral</span>&nbsp;<span class="op" id="5302013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302018">d</span><span class="op" id="5302019">.</span><span class="builtintype" id="5302020">error</span><span class="op" id="5302025">(</span><span class="ident" id="5302026">errPhase</span><span class="op" id="5302034">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302043">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302065">start</span>&nbsp;<span class="op" id="5302071">:=</span>&nbsp;<span class="ident" id="5302074">d</span><span class="op" id="5302075">.</span><span class="ident" id="5302076">off</span>&nbsp;<span class="op" id="5302080">-</span>&nbsp;<span class="num" id="5302082">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302086">op</span>&nbsp;<span class="op" id="5302089">=</span>&nbsp;<span class="ident" id="5302091">d</span><span class="op" id="5302092">.</span><span class="ident" id="5302093">scanWhile</span><span class="op" id="5302102">(</span><span class="ident" id="5302103">scanContinue</span><span class="op" id="5302115">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302119">item</span>&nbsp;<span class="op" id="5302124">:=</span>&nbsp;<span class="ident" id="5302127">d</span><span class="op" id="5302128">.</span><span class="ident" id="5302129">data</span><span class="op" id="5302133">[</span><span class="ident" id="5302134">start</span>&nbsp;<span class="op" id="5302140">:</span>&nbsp;<span class="ident" id="5302142">d</span><span class="op" id="5302143">.</span><span class="ident" id="5302144">off</span><span class="op" id="5302147">-</span><span class="num" id="5302148">1</span><span class="op" id="5302149">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302153">key</span><span class="op" id="5302156">,</span>&nbsp;<span class="ident" id="5302158">ok</span>&nbsp;<span class="op" id="5302161">:=</span>&nbsp;<span class="ident" id="5302164">unquote</span><span class="op" id="5302171">(</span><span class="ident" id="5302172">item</span><span class="op" id="5302176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302180">if</span>&nbsp;<span class="op" id="5302183">!</span><span class="ident" id="5302184">ok</span>&nbsp;<span class="op" id="5302187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302192">d</span><span class="op" id="5302193">.</span><span class="builtintype" id="5302194">error</span><span class="op" id="5302199">(</span><span class="ident" id="5302200">errPhase</span><span class="op" id="5302208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302212">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302217">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302243">if</span>&nbsp;<span class="ident" id="5302246">op</span>&nbsp;<span class="op" id="5302249">==</span>&nbsp;<span class="ident" id="5302252">scanSkipSpace</span>&nbsp;<span class="op" id="5302266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302271">op</span>&nbsp;<span class="op" id="5302274">=</span>&nbsp;<span class="ident" id="5302276">d</span><span class="op" id="5302277">.</span><span class="ident" id="5302278">scanWhile</span><span class="op" id="5302287">(</span><span class="ident" id="5302288">scanSkipSpace</span><span class="op" id="5302301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302305">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302309">if</span>&nbsp;<span class="ident" id="5302312">op</span>&nbsp;<span class="op" id="5302315">!=</span>&nbsp;<span class="ident" id="5302318">scanObjectKey</span>&nbsp;<span class="op" id="5302332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302337">d</span><span class="op" id="5302338">.</span><span class="builtintype" id="5302339">error</span><span class="op" id="5302344">(</span><span class="ident" id="5302345">errPhase</span><span class="op" id="5302353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302362">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302379">m</span><span class="op" id="5302380">[</span><span class="ident" id="5302381">key</span><span class="op" id="5302384">]</span>&nbsp;<span class="op" id="5302386">=</span>&nbsp;<span class="ident" id="5302388">d</span><span class="op" id="5302389">.</span><span class="ident" id="5302390">valueInterface</span><span class="op" id="5302404">(</span><span class="op" id="5302405">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302410">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302442">op</span>&nbsp;<span class="op" id="5302445">=</span>&nbsp;<span class="ident" id="5302447">d</span><span class="op" id="5302448">.</span><span class="ident" id="5302449">scanWhile</span><span class="op" id="5302458">(</span><span class="ident" id="5302459">scanSkipSpace</span><span class="op" id="5302472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302476">if</span>&nbsp;<span class="ident" id="5302479">op</span>&nbsp;<span class="op" id="5302482">==</span>&nbsp;<span class="ident" id="5302485">scanEndObject</span>&nbsp;<span class="op" id="5302499">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302504">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302516">if</span>&nbsp;<span class="ident" id="5302519">op</span>&nbsp;<span class="op" id="5302522">!=</span>&nbsp;<span class="ident" id="5302525">scanObjectValue</span>&nbsp;<span class="op" id="5302541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302546">d</span><span class="op" id="5302547">.</span><span class="builtintype" id="5302548">error</span><span class="op" id="5302553">(</span><span class="ident" id="5302554">errPhase</span><span class="op" id="5302562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302566">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5302569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302572">return</span>&nbsp;<span class="ident" id="5302579">m</span><br>
<span class="lineno"></span><span class="op" id="5302581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5302584">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="5302652">func</span>&nbsp;<span class="op" id="5302657">(</span><span class="ident" id="5302658">d</span>&nbsp;<span class="op" id="5302660">*</span><span class="ident" id="5302661">decodeState</span><span class="op" id="5302672">)</span>&nbsp;<span class="ident" id="5302674">literalInterface</span><span class="op" id="5302690">(</span><span class="op" id="5302691">)</span>&nbsp;<span class="keyword" id="5302693">interface</span><span class="op" id="5302702">{</span><span class="op" id="5302703">}</span>&nbsp;<span class="op" id="5302705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302708">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302766">start</span>&nbsp;<span class="op" id="5302772">:=</span>&nbsp;<span class="ident" id="5302775">d</span><span class="op" id="5302776">.</span><span class="ident" id="5302777">off</span>&nbsp;<span class="op" id="5302781">-</span>&nbsp;<span class="num" id="5302783">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302786">op</span>&nbsp;<span class="op" id="5302789">:=</span>&nbsp;<span class="ident" id="5302792">d</span><span class="op" id="5302793">.</span><span class="ident" id="5302794">scanWhile</span><span class="op" id="5302803">(</span><span class="ident" id="5302804">scanContinue</span><span class="op" id="5302816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5302820">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302861">d</span><span class="op" id="5302862">.</span><span class="ident" id="5302863">off</span><span class="op" id="5302866">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302870">d</span><span class="op" id="5302871">.</span><span class="ident" id="5302872">scan</span><span class="op" id="5302876">.</span><span class="ident" id="5302877">undo</span><span class="op" id="5302881">(</span><span class="ident" id="5302882">op</span><span class="op" id="5302884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5302887">item</span>&nbsp;<span class="op" id="5302892">:=</span>&nbsp;<span class="ident" id="5302895">d</span><span class="op" id="5302896">.</span><span class="ident" id="5302897">data</span><span class="op" id="5302901">[</span><span class="ident" id="5302902">start</span><span class="op" id="5302907">:</span><span class="ident" id="5302908">d</span><span class="op" id="5302909">.</span><span class="ident" id="5302910">off</span><span class="op" id="5302913">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302917">switch</span>&nbsp;<span class="ident" id="5302924">c</span>&nbsp;<span class="op" id="5302926">:=</span>&nbsp;<span class="ident" id="5302929">item</span><span class="op" id="5302933">[</span><span class="num" id="5302934">0</span><span class="op" id="5302935">]</span><span class="op" id="5302936">;</span>&nbsp;<span class="ident" id="5302938">c</span>&nbsp;<span class="op" id="5302940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302943">case</span>&nbsp;<span class="string" id="5302948">&#39;n&#39;</span><span class="op" id="5302951">:</span>&nbsp;<span class="comment" id="5302953">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302963">return</span>&nbsp;<span class="ident" id="5302970">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5302976">case</span>&nbsp;<span class="string" id="5302981">&#39;t&#39;</span><span class="op" id="5302984">,</span>&nbsp;<span class="string" id="5302986">&#39;f&#39;</span><span class="op" id="5302989">:</span>&nbsp;<span class="comment" id="5302991">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303008">return</span>&nbsp;<span class="ident" id="5303015">c</span>&nbsp;<span class="op" id="5303017">==</span>&nbsp;<span class="string" id="5303020">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303026">case</span>&nbsp;<span class="string" id="5303031">&#39;&#34;&#39;</span><span class="op" id="5303034">:</span>&nbsp;<span class="comment" id="5303036">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303048">s</span><span class="op" id="5303049">,</span>&nbsp;<span class="ident" id="5303051">ok</span>&nbsp;<span class="op" id="5303054">:=</span>&nbsp;<span class="ident" id="5303057">unquote</span><span class="op" id="5303064">(</span><span class="ident" id="5303065">item</span><span class="op" id="5303069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303073">if</span>&nbsp;<span class="op" id="5303076">!</span><span class="ident" id="5303077">ok</span>&nbsp;<span class="op" id="5303080">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303085">d</span><span class="op" id="5303086">.</span><span class="builtintype" id="5303087">error</span><span class="op" id="5303092">(</span><span class="ident" id="5303093">errPhase</span><span class="op" id="5303101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303109">return</span>&nbsp;<span class="ident" id="5303116">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303120">default</span><span class="op" id="5303127">:</span>&nbsp;<span class="comment" id="5303129">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303141">if</span>&nbsp;<span class="ident" id="5303144">c</span>&nbsp;<span class="op" id="5303146">!=</span>&nbsp;<span class="string" id="5303149">&#39;-&#39;</span>&nbsp;<span class="op" id="5303153">&amp;&amp;</span>&nbsp;<span class="op" id="5303156">(</span><span class="ident" id="5303157">c</span>&nbsp;<span class="op" id="5303159">&lt;</span>&nbsp;<span class="string" id="5303161">&#39;0&#39;</span>&nbsp;<span class="op" id="5303165">||</span>&nbsp;<span class="ident" id="5303168">c</span>&nbsp;<span class="op" id="5303170">&gt;</span>&nbsp;<span class="string" id="5303172">&#39;9&#39;</span><span class="op" id="5303175">)</span>&nbsp;<span class="op" id="5303177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303182">d</span><span class="op" id="5303183">.</span><span class="builtintype" id="5303184">error</span><span class="op" id="5303189">(</span><span class="ident" id="5303190">errPhase</span><span class="op" id="5303198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303206">n</span><span class="op" id="5303207">,</span>&nbsp;<span class="ident" id="5303209">err</span>&nbsp;<span class="op" id="5303213">:=</span>&nbsp;<span class="ident" id="5303216">d</span><span class="op" id="5303217">.</span><span class="ident" id="5303218">convertNumber</span><span class="op" id="5303231">(</span><span class="builtintype" id="5303232">string</span><span class="op" id="5303238">(</span><span class="ident" id="5303239">item</span><span class="op" id="5303243">)</span><span class="op" id="5303244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303248">if</span>&nbsp;<span class="ident" id="5303251">err</span>&nbsp;<span class="op" id="5303255">!=</span>&nbsp;<span class="ident" id="5303258">nil</span>&nbsp;<span class="op" id="5303262">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303267">d</span><span class="op" id="5303268">.</span><span class="ident" id="5303269">saveError</span><span class="op" id="5303278">(</span><span class="ident" id="5303279">err</span><span class="op" id="5303282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303290">return</span>&nbsp;<span class="ident" id="5303297">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303300">}</span><br>
<span class="lineno"></span><span class="op" id="5303302">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="5303305">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="5303379">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="5303400">func</span>&nbsp;<span class="ident" id="5303405">getu4</span><span class="op" id="5303410">(</span><span class="ident" id="5303411">s</span>&nbsp;<span class="op" id="5303413">[</span><span class="op" id="5303414">]</span><span class="builtintype" id="5303415">byte</span><span class="op" id="5303419">)</span>&nbsp;<span class="builtintype" id="5303421">rune</span>&nbsp;<span class="op" id="5303426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303429">if</span>&nbsp;<span class="builtinfunc" id="5303432">len</span><span class="op" id="5303435">(</span><span class="ident" id="5303436">s</span><span class="op" id="5303437">)</span>&nbsp;<span class="op" id="5303439">&lt;</span>&nbsp;<span class="num" id="5303441">6</span>&nbsp;<span class="op" id="5303443">||</span>&nbsp;<span class="ident" id="5303446">s</span><span class="op" id="5303447">[</span><span class="num" id="5303448">0</span><span class="op" id="5303449">]</span>&nbsp;<span class="op" id="5303451">!=</span>&nbsp;<span class="string" id="5303454">&#39;\\&#39;</span>&nbsp;<span class="op" id="5303459">||</span>&nbsp;<span class="ident" id="5303462">s</span><span class="op" id="5303463">[</span><span class="num" id="5303464">1</span><span class="op" id="5303465">]</span>&nbsp;<span class="op" id="5303467">!=</span>&nbsp;<span class="string" id="5303470">&#39;u&#39;</span>&nbsp;<span class="op" id="5303474">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303478">return</span>&nbsp;<span class="op" id="5303485">-</span><span class="num" id="5303486">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303492">r</span><span class="op" id="5303493">,</span>&nbsp;<span class="ident" id="5303495">err</span>&nbsp;<span class="op" id="5303499">:=</span>&nbsp;<span class="ident" id="5303502">strconv</span><span class="op" id="5303509">.</span><span class="ident" id="5303510">ParseUint</span><span class="op" id="5303519">(</span><span class="builtintype" id="5303520">string</span><span class="op" id="5303526">(</span><span class="ident" id="5303527">s</span><span class="op" id="5303528">[</span><span class="num" id="5303529">2</span><span class="op" id="5303530">:</span><span class="num" id="5303531">6</span><span class="op" id="5303532">]</span><span class="op" id="5303533">)</span><span class="op" id="5303534">,</span>&nbsp;<span class="num" id="5303536">16</span><span class="op" id="5303538">,</span>&nbsp;<span class="num" id="5303540">64</span><span class="op" id="5303542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303545">if</span>&nbsp;<span class="ident" id="5303548">err</span>&nbsp;<span class="op" id="5303552">!=</span>&nbsp;<span class="ident" id="5303555">nil</span>&nbsp;<span class="op" id="5303559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303563">return</span>&nbsp;<span class="op" id="5303570">-</span><span class="num" id="5303571">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303577">return</span>&nbsp;<span class="builtintype" id="5303584">rune</span><span class="op" id="5303588">(</span><span class="ident" id="5303589">r</span><span class="op" id="5303590">)</span><br>
<span class="lineno"></span><span class="op" id="5303592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5303595">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="5303671">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="5303742">func</span>&nbsp;<span class="ident" id="5303747">unquote</span><span class="op" id="5303754">(</span><span class="ident" id="5303755">s</span>&nbsp;<span class="op" id="5303757">[</span><span class="op" id="5303758">]</span><span class="builtintype" id="5303759">byte</span><span class="op" id="5303763">)</span>&nbsp;<span class="op" id="5303765">(</span><span class="ident" id="5303766">t</span>&nbsp;<span class="builtintype" id="5303768">string</span><span class="op" id="5303774">,</span>&nbsp;<span class="ident" id="5303776">ok</span>&nbsp;<span class="builtintype" id="5303779">bool</span><span class="op" id="5303783">)</span>&nbsp;<span class="op" id="5303785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303788">s</span><span class="op" id="5303789">,</span>&nbsp;<span class="ident" id="5303791">ok</span>&nbsp;<span class="op" id="5303794">=</span>&nbsp;<span class="ident" id="5303796">unquoteBytes</span><span class="op" id="5303808">(</span><span class="ident" id="5303809">s</span><span class="op" id="5303810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303813">t</span>&nbsp;<span class="op" id="5303815">=</span>&nbsp;<span class="builtintype" id="5303817">string</span><span class="op" id="5303823">(</span><span class="ident" id="5303824">s</span><span class="op" id="5303825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303828">return</span><br>
<span class="lineno">970</span><span class="op" id="5303835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5303838">func</span>&nbsp;<span class="ident" id="5303843">unquoteBytes</span><span class="op" id="5303855">(</span><span class="ident" id="5303856">s</span>&nbsp;<span class="op" id="5303858">[</span><span class="op" id="5303859">]</span><span class="builtintype" id="5303860">byte</span><span class="op" id="5303864">)</span>&nbsp;<span class="op" id="5303866">(</span><span class="ident" id="5303867">t</span>&nbsp;<span class="op" id="5303869">[</span><span class="op" id="5303870">]</span><span class="builtintype" id="5303871">byte</span><span class="op" id="5303875">,</span>&nbsp;<span class="ident" id="5303877">ok</span>&nbsp;<span class="builtintype" id="5303880">bool</span><span class="op" id="5303884">)</span>&nbsp;<span class="op" id="5303886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303889">if</span>&nbsp;<span class="builtinfunc" id="5303892">len</span><span class="op" id="5303895">(</span><span class="ident" id="5303896">s</span><span class="op" id="5303897">)</span>&nbsp;<span class="op" id="5303899">&lt;</span>&nbsp;<span class="num" id="5303901">2</span>&nbsp;<span class="op" id="5303903">||</span>&nbsp;<span class="ident" id="5303906">s</span><span class="op" id="5303907">[</span><span class="num" id="5303908">0</span><span class="op" id="5303909">]</span>&nbsp;<span class="op" id="5303911">!=</span>&nbsp;<span class="string" id="5303914">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5303918">||</span>&nbsp;<span class="ident" id="5303921">s</span><span class="op" id="5303922">[</span><span class="builtinfunc" id="5303923">len</span><span class="op" id="5303926">(</span><span class="ident" id="5303927">s</span><span class="op" id="5303928">)</span><span class="op" id="5303929">-</span><span class="num" id="5303930">1</span><span class="op" id="5303931">]</span>&nbsp;<span class="op" id="5303933">!=</span>&nbsp;<span class="string" id="5303936">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5303940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5303944">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5303952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5303955">s</span>&nbsp;<span class="op" id="5303957">=</span>&nbsp;<span class="ident" id="5303959">s</span><span class="op" id="5303960">[</span><span class="num" id="5303961">1</span>&nbsp;<span class="op" id="5303963">:</span>&nbsp;<span class="builtinfunc" id="5303965">len</span><span class="op" id="5303968">(</span><span class="ident" id="5303969">s</span><span class="op" id="5303970">)</span><span class="op" id="5303971">-</span><span class="num" id="5303972">1</span><span class="op" id="5303973">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5303977">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5304030">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5304088">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304108">r</span>&nbsp;<span class="op" id="5304110">:=</span>&nbsp;<span class="num" id="5304113">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304116">for</span>&nbsp;<span class="ident" id="5304120">r</span>&nbsp;<span class="op" id="5304122">&lt;</span>&nbsp;<span class="builtinfunc" id="5304124">len</span><span class="op" id="5304127">(</span><span class="ident" id="5304128">s</span><span class="op" id="5304129">)</span>&nbsp;<span class="op" id="5304131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304135">c</span>&nbsp;<span class="op" id="5304137">:=</span>&nbsp;<span class="ident" id="5304140">s</span><span class="op" id="5304141">[</span><span class="ident" id="5304142">r</span><span class="op" id="5304143">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304147">if</span>&nbsp;<span class="ident" id="5304150">c</span>&nbsp;<span class="op" id="5304152">==</span>&nbsp;<span class="string" id="5304155">&#39;\\&#39;</span>&nbsp;<span class="op" id="5304160">||</span>&nbsp;<span class="ident" id="5304163">c</span>&nbsp;<span class="op" id="5304165">==</span>&nbsp;<span class="string" id="5304168">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5304172">||</span>&nbsp;<span class="ident" id="5304175">c</span>&nbsp;<span class="op" id="5304177">&lt;</span>&nbsp;<span class="string" id="5304179">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5304183">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304188">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304200">if</span>&nbsp;<span class="ident" id="5304203">c</span>&nbsp;<span class="op" id="5304205">&lt;</span>&nbsp;<span class="ident" id="5304207">utf8</span><span class="op" id="5304211">.</span><span class="ident" id="5304212">RuneSelf</span>&nbsp;<span class="op" id="5304221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304226">r</span><span class="op" id="5304227">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304233">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304248">rr</span><span class="op" id="5304250">,</span>&nbsp;<span class="ident" id="5304252">size</span>&nbsp;<span class="op" id="5304257">:=</span>&nbsp;<span class="ident" id="5304260">utf8</span><span class="op" id="5304264">.</span><span class="ident" id="5304265">DecodeRune</span><span class="op" id="5304275">(</span><span class="ident" id="5304276">s</span><span class="op" id="5304277">[</span><span class="ident" id="5304278">r</span><span class="op" id="5304279">:</span><span class="op" id="5304280">]</span><span class="op" id="5304281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304285">if</span>&nbsp;<span class="ident" id="5304288">rr</span>&nbsp;<span class="op" id="5304291">==</span>&nbsp;<span class="ident" id="5304294">utf8</span><span class="op" id="5304298">.</span><span class="ident" id="5304299">RuneError</span>&nbsp;<span class="op" id="5304309">&amp;&amp;</span>&nbsp;<span class="ident" id="5304312">size</span>&nbsp;<span class="op" id="5304317">==</span>&nbsp;<span class="num" id="5304320">1</span>&nbsp;<span class="op" id="5304322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304327">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304335">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304339">r</span>&nbsp;<span class="op" id="5304341">+=</span>&nbsp;<span class="ident" id="5304344">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304353">if</span>&nbsp;<span class="ident" id="5304356">r</span>&nbsp;<span class="op" id="5304358">==</span>&nbsp;<span class="builtinfunc" id="5304361">len</span><span class="op" id="5304364">(</span><span class="ident" id="5304365">s</span><span class="op" id="5304366">)</span>&nbsp;<span class="op" id="5304368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304372">return</span>&nbsp;<span class="ident" id="5304379">s</span><span class="op" id="5304380">,</span>&nbsp;<span class="builtintype" id="5304382">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304388">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304392">b</span>&nbsp;<span class="op" id="5304394">:=</span>&nbsp;<span class="builtinfunc" id="5304397">make</span><span class="op" id="5304401">(</span><span class="op" id="5304402">[</span><span class="op" id="5304403">]</span><span class="builtintype" id="5304404">byte</span><span class="op" id="5304408">,</span>&nbsp;<span class="builtinfunc" id="5304410">len</span><span class="op" id="5304413">(</span><span class="ident" id="5304414">s</span><span class="op" id="5304415">)</span><span class="op" id="5304416">+</span><span class="num" id="5304417">2</span><span class="op" id="5304418">*</span><span class="ident" id="5304419">utf8</span><span class="op" id="5304423">.</span><span class="ident" id="5304424">UTFMax</span><span class="op" id="5304430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304433">w</span>&nbsp;<span class="op" id="5304435">:=</span>&nbsp;<span class="builtinfunc" id="5304438">copy</span><span class="op" id="5304442">(</span><span class="ident" id="5304443">b</span><span class="op" id="5304444">,</span>&nbsp;<span class="ident" id="5304446">s</span><span class="op" id="5304447">[</span><span class="num" id="5304448">0</span><span class="op" id="5304449">:</span><span class="ident" id="5304450">r</span><span class="op" id="5304451">]</span><span class="op" id="5304452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304455">for</span>&nbsp;<span class="ident" id="5304459">r</span>&nbsp;<span class="op" id="5304461">&lt;</span>&nbsp;<span class="builtinfunc" id="5304463">len</span><span class="op" id="5304466">(</span><span class="ident" id="5304467">s</span><span class="op" id="5304468">)</span>&nbsp;<span class="op" id="5304470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5304474">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5304525">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5304571">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304597">if</span>&nbsp;<span class="ident" id="5304600">w</span>&nbsp;<span class="op" id="5304602">&gt;=</span>&nbsp;<span class="builtinfunc" id="5304605">len</span><span class="op" id="5304608">(</span><span class="ident" id="5304609">b</span><span class="op" id="5304610">)</span><span class="op" id="5304611">-</span><span class="num" id="5304612">2</span><span class="op" id="5304613">*</span><span class="ident" id="5304614">utf8</span><span class="op" id="5304618">.</span><span class="ident" id="5304619">UTFMax</span>&nbsp;<span class="op" id="5304626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304631">nb</span>&nbsp;<span class="op" id="5304634">:=</span>&nbsp;<span class="builtinfunc" id="5304637">make</span><span class="op" id="5304641">(</span><span class="op" id="5304642">[</span><span class="op" id="5304643">]</span><span class="builtintype" id="5304644">byte</span><span class="op" id="5304648">,</span>&nbsp;<span class="op" id="5304650">(</span><span class="builtinfunc" id="5304651">len</span><span class="op" id="5304654">(</span><span class="ident" id="5304655">b</span><span class="op" id="5304656">)</span><span class="op" id="5304657">+</span><span class="ident" id="5304658">utf8</span><span class="op" id="5304662">.</span><span class="ident" id="5304663">UTFMax</span><span class="op" id="5304669">)</span><span class="op" id="5304670">*</span><span class="num" id="5304671">2</span><span class="op" id="5304672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5304677">copy</span><span class="op" id="5304681">(</span><span class="ident" id="5304682">nb</span><span class="op" id="5304684">,</span>&nbsp;<span class="ident" id="5304686">b</span><span class="op" id="5304687">[</span><span class="num" id="5304688">0</span><span class="op" id="5304689">:</span><span class="ident" id="5304690">w</span><span class="op" id="5304691">]</span><span class="op" id="5304692">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304697">b</span>&nbsp;<span class="op" id="5304699">=</span>&nbsp;<span class="ident" id="5304701">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304710">switch</span>&nbsp;<span class="ident" id="5304717">c</span>&nbsp;<span class="op" id="5304719">:=</span>&nbsp;<span class="ident" id="5304722">s</span><span class="op" id="5304723">[</span><span class="ident" id="5304724">r</span><span class="op" id="5304725">]</span><span class="op" id="5304726">;</span>&nbsp;<span class="op" id="5304728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304732">case</span>&nbsp;<span class="ident" id="5304737">c</span>&nbsp;<span class="op" id="5304739">==</span>&nbsp;<span class="string" id="5304742">&#39;\\&#39;</span><span class="op" id="5304746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304751">r</span><span class="op" id="5304752">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304758">if</span>&nbsp;<span class="ident" id="5304761">r</span>&nbsp;<span class="op" id="5304763">&gt;=</span>&nbsp;<span class="builtinfunc" id="5304766">len</span><span class="op" id="5304769">(</span><span class="ident" id="5304770">s</span><span class="op" id="5304771">)</span>&nbsp;<span class="op" id="5304773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304779">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5304789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304794">switch</span>&nbsp;<span class="ident" id="5304801">s</span><span class="op" id="5304802">[</span><span class="ident" id="5304803">r</span><span class="op" id="5304804">]</span>&nbsp;<span class="op" id="5304806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304811">default</span><span class="op" id="5304818">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304824">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304834">case</span>&nbsp;<span class="string" id="5304839">&#39;&#34;&#39;</span><span class="op" id="5304842">,</span>&nbsp;<span class="string" id="5304844">&#39;\\&#39;</span><span class="op" id="5304848">,</span>&nbsp;<span class="string" id="5304850">&#39;/&#39;</span><span class="op" id="5304853">,</span>&nbsp;<span class="string" id="5304855">&#39;\&#39;&#39;</span><span class="op" id="5304859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304865">b</span><span class="op" id="5304866">[</span><span class="ident" id="5304867">w</span><span class="op" id="5304868">]</span>&nbsp;<span class="op" id="5304870">=</span>&nbsp;<span class="ident" id="5304872">s</span><span class="op" id="5304873">[</span><span class="ident" id="5304874">r</span><span class="op" id="5304875">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304881">r</span><span class="op" id="5304882">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304889">w</span><span class="op" id="5304890">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304896">case</span>&nbsp;<span class="string" id="5304901">&#39;b&#39;</span><span class="op" id="5304904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304910">b</span><span class="op" id="5304911">[</span><span class="ident" id="5304912">w</span><span class="op" id="5304913">]</span>&nbsp;<span class="op" id="5304915">=</span>&nbsp;<span class="string" id="5304917">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304926">r</span><span class="op" id="5304927">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304934">w</span><span class="op" id="5304935">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304941">case</span>&nbsp;<span class="string" id="5304946">&#39;f&#39;</span><span class="op" id="5304949">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304955">b</span><span class="op" id="5304956">[</span><span class="ident" id="5304957">w</span><span class="op" id="5304958">]</span>&nbsp;<span class="op" id="5304960">=</span>&nbsp;<span class="string" id="5304962">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304971">r</span><span class="op" id="5304972">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5304979">w</span><span class="op" id="5304980">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5304986">case</span>&nbsp;<span class="string" id="5304991">&#39;n&#39;</span><span class="op" id="5304994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305000">b</span><span class="op" id="5305001">[</span><span class="ident" id="5305002">w</span><span class="op" id="5305003">]</span>&nbsp;<span class="op" id="5305005">=</span>&nbsp;<span class="string" id="5305007">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305016">r</span><span class="op" id="5305017">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305024">w</span><span class="op" id="5305025">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305031">case</span>&nbsp;<span class="string" id="5305036">&#39;r&#39;</span><span class="op" id="5305039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305045">b</span><span class="op" id="5305046">[</span><span class="ident" id="5305047">w</span><span class="op" id="5305048">]</span>&nbsp;<span class="op" id="5305050">=</span>&nbsp;<span class="string" id="5305052">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305061">r</span><span class="op" id="5305062">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305069">w</span><span class="op" id="5305070">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305076">case</span>&nbsp;<span class="string" id="5305081">&#39;t&#39;</span><span class="op" id="5305084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305090">b</span><span class="op" id="5305091">[</span><span class="ident" id="5305092">w</span><span class="op" id="5305093">]</span>&nbsp;<span class="op" id="5305095">=</span>&nbsp;<span class="string" id="5305097">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305106">r</span><span class="op" id="5305107">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305114">w</span><span class="op" id="5305115">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305121">case</span>&nbsp;<span class="string" id="5305126">&#39;u&#39;</span><span class="op" id="5305129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305135">r</span><span class="op" id="5305136">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305143">rr</span>&nbsp;<span class="op" id="5305146">:=</span>&nbsp;<span class="ident" id="5305149">getu4</span><span class="op" id="5305154">(</span><span class="ident" id="5305155">s</span><span class="op" id="5305156">[</span><span class="ident" id="5305157">r</span><span class="op" id="5305158">:</span><span class="op" id="5305159">]</span><span class="op" id="5305160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305166">if</span>&nbsp;<span class="ident" id="5305169">rr</span>&nbsp;<span class="op" id="5305172">&lt;</span>&nbsp;<span class="num" id="5305174">0</span>&nbsp;<span class="op" id="5305176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305183">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305200">r</span>&nbsp;<span class="op" id="5305202">+=</span>&nbsp;<span class="num" id="5305205">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305211">if</span>&nbsp;<span class="ident" id="5305214">utf16</span><span class="op" id="5305219">.</span><span class="ident" id="5305220">IsSurrogate</span><span class="op" id="5305231">(</span><span class="ident" id="5305232">rr</span><span class="op" id="5305234">)</span>&nbsp;<span class="op" id="5305236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305243">rr1</span>&nbsp;<span class="op" id="5305247">:=</span>&nbsp;<span class="ident" id="5305250">getu4</span><span class="op" id="5305255">(</span><span class="ident" id="5305256">s</span><span class="op" id="5305257">[</span><span class="ident" id="5305258">r</span><span class="op" id="5305259">:</span><span class="op" id="5305260">]</span><span class="op" id="5305261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305268">if</span>&nbsp;<span class="ident" id="5305271">dec</span>&nbsp;<span class="op" id="5305275">:=</span>&nbsp;<span class="ident" id="5305278">utf16</span><span class="op" id="5305283">.</span><span class="ident" id="5305284">DecodeRune</span><span class="op" id="5305294">(</span><span class="ident" id="5305295">rr</span><span class="op" id="5305297">,</span>&nbsp;<span class="ident" id="5305299">rr1</span><span class="op" id="5305302">)</span><span class="op" id="5305303">;</span>&nbsp;<span class="ident" id="5305305">dec</span>&nbsp;<span class="op" id="5305309">!=</span>&nbsp;<span class="ident" id="5305312">unicode</span><span class="op" id="5305319">.</span><span class="ident" id="5305320">ReplacementChar</span>&nbsp;<span class="op" id="5305336">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5305344">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305376">r</span>&nbsp;<span class="op" id="5305378">+=</span>&nbsp;<span class="num" id="5305381">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305389">w</span>&nbsp;<span class="op" id="5305391">+=</span>&nbsp;<span class="ident" id="5305394">utf8</span><span class="op" id="5305398">.</span><span class="ident" id="5305399">EncodeRune</span><span class="op" id="5305409">(</span><span class="ident" id="5305410">b</span><span class="op" id="5305411">[</span><span class="ident" id="5305412">w</span><span class="op" id="5305413">:</span><span class="op" id="5305414">]</span><span class="op" id="5305415">,</span>&nbsp;<span class="ident" id="5305417">dec</span><span class="op" id="5305420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305428">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305439">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5305446">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305504">rr</span>&nbsp;<span class="op" id="5305507">=</span>&nbsp;<span class="ident" id="5305509">unicode</span><span class="op" id="5305516">.</span><span class="ident" id="5305517">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305543">w</span>&nbsp;<span class="op" id="5305545">+=</span>&nbsp;<span class="ident" id="5305548">utf8</span><span class="op" id="5305552">.</span><span class="ident" id="5305553">EncodeRune</span><span class="op" id="5305563">(</span><span class="ident" id="5305564">b</span><span class="op" id="5305565">[</span><span class="ident" id="5305566">w</span><span class="op" id="5305567">:</span><span class="op" id="5305568">]</span><span class="op" id="5305569">,</span>&nbsp;<span class="ident" id="5305571">rr</span><span class="op" id="5305573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305578">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5305583">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305627">case</span>&nbsp;<span class="ident" id="5305632">c</span>&nbsp;<span class="op" id="5305634">==</span>&nbsp;<span class="string" id="5305637">&#39;&#34;&#39;</span><span class="op" id="5305640">,</span>&nbsp;<span class="ident" id="5305642">c</span>&nbsp;<span class="op" id="5305644">&lt;</span>&nbsp;<span class="string" id="5305646">&#39;&nbsp;&#39;</span><span class="op" id="5305649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305654">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5305664">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305675">case</span>&nbsp;<span class="ident" id="5305680">c</span>&nbsp;<span class="op" id="5305682">&lt;</span>&nbsp;<span class="ident" id="5305684">utf8</span><span class="op" id="5305688">.</span><span class="ident" id="5305689">RuneSelf</span><span class="op" id="5305697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305702">b</span><span class="op" id="5305703">[</span><span class="ident" id="5305704">w</span><span class="op" id="5305705">]</span>&nbsp;<span class="op" id="5305707">=</span>&nbsp;<span class="ident" id="5305709">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305714">r</span><span class="op" id="5305715">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305721">w</span><span class="op" id="5305722">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5305728">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305762">default</span><span class="op" id="5305769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305774">rr</span><span class="op" id="5305776">,</span>&nbsp;<span class="ident" id="5305778">size</span>&nbsp;<span class="op" id="5305783">:=</span>&nbsp;<span class="ident" id="5305786">utf8</span><span class="op" id="5305790">.</span><span class="ident" id="5305791">DecodeRune</span><span class="op" id="5305801">(</span><span class="ident" id="5305802">s</span><span class="op" id="5305803">[</span><span class="ident" id="5305804">r</span><span class="op" id="5305805">:</span><span class="op" id="5305806">]</span><span class="op" id="5305807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305812">r</span>&nbsp;<span class="op" id="5305814">+=</span>&nbsp;<span class="ident" id="5305817">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5305825">w</span>&nbsp;<span class="op" id="5305827">+=</span>&nbsp;<span class="ident" id="5305830">utf8</span><span class="op" id="5305834">.</span><span class="ident" id="5305835">EncodeRune</span><span class="op" id="5305845">(</span><span class="ident" id="5305846">b</span><span class="op" id="5305847">[</span><span class="ident" id="5305848">w</span><span class="op" id="5305849">:</span><span class="op" id="5305850">]</span><span class="op" id="5305851">,</span>&nbsp;<span class="ident" id="5305853">rr</span><span class="op" id="5305855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5305862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5305865">return</span>&nbsp;<span class="ident" id="5305872">b</span><span class="op" id="5305873">[</span><span class="num" id="5305874">0</span><span class="op" id="5305875">:</span><span class="ident" id="5305876">w</span><span class="op" id="5305877">]</span><span class="op" id="5305878">,</span>&nbsp;<span class="builtintype" id="5305880">true</span><br>
<span class="lineno"></span><span class="op" id="5305885">}</span>
</div>
</body>
</html>
