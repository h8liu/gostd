<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6404841">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6404896">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6404950">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6405001">package</span>&nbsp;<span class="ident" id="6405009">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405014">import</span>&nbsp;<span class="op" id="6405021">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405024">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405033">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405047">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405054">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405060">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405073">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405079">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405090">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405101">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405112">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6405119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6405122">type</span>&nbsp;<span class="ident" id="6405127">untarTest</span>&nbsp;<span class="keyword" id="6405137">struct</span>&nbsp;<span class="op" id="6405144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405147">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405155">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405163">headers</span>&nbsp;<span class="op" id="6405171">[</span><span class="op" id="6405172">]</span><span class="op" id="6405173">*</span><span class="ident" id="6405174">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405182">cksums</span>&nbsp;&nbsp;<span class="op" id="6405190">[</span><span class="op" id="6405191">]</span><span class="builtintype" id="6405192">string</span><br>
<span class="lineno"></span><span class="op" id="6405199">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6405202">var</span>&nbsp;<span class="ident" id="6405206">gnuTarTest</span>&nbsp;<span class="op" id="6405217">=</span>&nbsp;<span class="op" id="6405219">&amp;</span><span class="ident" id="6405220">untarTest</span><span class="op" id="6405229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405232">file</span><span class="op" id="6405236">:</span>&nbsp;<span class="string" id="6405238">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6405256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405259">headers</span><span class="op" id="6405266">:</span>&nbsp;<span class="op" id="6405268">[</span><span class="op" id="6405269">]</span><span class="op" id="6405270">*</span><span class="ident" id="6405271">Header</span><span class="op" id="6405277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405281">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405286">Name</span><span class="op" id="6405290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405296">&#34;small.txt&#34;</span><span class="op" id="6405307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405312">Mode</span><span class="op" id="6405316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405322">0640</span><span class="op" id="6405326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405331">Uid</span><span class="op" id="6405334">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405341">73025</span><span class="op" id="6405346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405351">Gid</span><span class="op" id="6405354">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405361">5000</span><span class="op" id="6405365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405370">Size</span><span class="op" id="6405374">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405380">5</span><span class="op" id="6405381">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405386">ModTime</span><span class="op" id="6405393">:</span>&nbsp;&nbsp;<span class="ident" id="6405396">time</span><span class="op" id="6405400">.</span><span class="ident" id="6405401">Unix</span><span class="op" id="6405405">(</span><span class="num" id="6405406">1244428340</span><span class="op" id="6405416">,</span>&nbsp;<span class="num" id="6405418">0</span><span class="op" id="6405419">)</span><span class="op" id="6405420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405425">Typeflag</span><span class="op" id="6405433">:</span>&nbsp;<span class="string" id="6405435">&#39;0&#39;</span><span class="op" id="6405438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405443">Uname</span><span class="op" id="6405448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405453">&#34;dsymonds&#34;</span><span class="op" id="6405463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405468">Gname</span><span class="op" id="6405473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405478">&#34;eng&#34;</span><span class="op" id="6405483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405487">}</span><span class="op" id="6405488">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405497">Name</span><span class="op" id="6405501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405507">&#34;small2.txt&#34;</span><span class="op" id="6405519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405524">Mode</span><span class="op" id="6405528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405534">0640</span><span class="op" id="6405538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405543">Uid</span><span class="op" id="6405546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405553">73025</span><span class="op" id="6405558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405563">Gid</span><span class="op" id="6405566">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405573">5000</span><span class="op" id="6405577">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405582">Size</span><span class="op" id="6405586">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405592">11</span><span class="op" id="6405594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405599">ModTime</span><span class="op" id="6405606">:</span>&nbsp;&nbsp;<span class="ident" id="6405609">time</span><span class="op" id="6405613">.</span><span class="ident" id="6405614">Unix</span><span class="op" id="6405618">(</span><span class="num" id="6405619">1244436044</span><span class="op" id="6405629">,</span>&nbsp;<span class="num" id="6405631">0</span><span class="op" id="6405632">)</span><span class="op" id="6405633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405638">Typeflag</span><span class="op" id="6405646">:</span>&nbsp;<span class="string" id="6405648">&#39;0&#39;</span><span class="op" id="6405651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405656">Uname</span><span class="op" id="6405661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405666">&#34;dsymonds&#34;</span><span class="op" id="6405676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405681">Gname</span><span class="op" id="6405686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405691">&#34;eng&#34;</span><span class="op" id="6405696">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405700">}</span><span class="op" id="6405701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405704">}</span><span class="op" id="6405705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405708">cksums</span><span class="op" id="6405714">:</span>&nbsp;<span class="op" id="6405716">[</span><span class="op" id="6405717">]</span><span class="builtintype" id="6405718">string</span><span class="op" id="6405724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405728">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6405762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405766">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6405800">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405803">}</span><span class="op" id="6405804">,</span><br>
<span class="lineno"></span><span class="op" id="6405806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405809">var</span>&nbsp;<span class="ident" id="6405813">sparseTarTest</span>&nbsp;<span class="op" id="6405827">=</span>&nbsp;<span class="op" id="6405829">&amp;</span><span class="ident" id="6405830">untarTest</span><span class="op" id="6405839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405842">file</span><span class="op" id="6405846">:</span>&nbsp;<span class="string" id="6405848">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6405877">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405880">headers</span><span class="op" id="6405887">:</span>&nbsp;<span class="op" id="6405889">[</span><span class="op" id="6405890">]</span><span class="op" id="6405891">*</span><span class="ident" id="6405892">Header</span><span class="op" id="6405898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405907">Name</span><span class="op" id="6405911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6405917">&#34;sparse-gnu&#34;</span><span class="op" id="6405929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405934">Mode</span><span class="op" id="6405938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405944">420</span><span class="op" id="6405947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405952">Uid</span><span class="op" id="6405955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405962">1000</span><span class="op" id="6405966">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405971">Gid</span><span class="op" id="6405974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6405981">1000</span><span class="op" id="6405985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6405990">Size</span><span class="op" id="6405994">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406000">200</span><span class="op" id="6406003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406008">ModTime</span><span class="op" id="6406015">:</span>&nbsp;&nbsp;<span class="ident" id="6406018">time</span><span class="op" id="6406022">.</span><span class="ident" id="6406023">Unix</span><span class="op" id="6406027">(</span><span class="num" id="6406028">1392395740</span><span class="op" id="6406038">,</span>&nbsp;<span class="num" id="6406040">0</span><span class="op" id="6406041">)</span><span class="op" id="6406042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406047">Typeflag</span><span class="op" id="6406055">:</span>&nbsp;<span class="num" id="6406057">0x53</span><span class="op" id="6406061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406066">Linkname</span><span class="op" id="6406074">:</span>&nbsp;<span class="string" id="6406076">&#34;&#34;</span><span class="op" id="6406078">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406083">Uname</span><span class="op" id="6406088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406093">&#34;david&#34;</span><span class="op" id="6406100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406105">Gname</span><span class="op" id="6406110">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406115">&#34;david&#34;</span><span class="op" id="6406122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406127">Devmajor</span><span class="op" id="6406135">:</span>&nbsp;<span class="num" id="6406137">0</span><span class="op" id="6406138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406143">Devminor</span><span class="op" id="6406151">:</span>&nbsp;<span class="num" id="6406153">0</span><span class="op" id="6406154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406158">}</span><span class="op" id="6406159">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406168">Name</span><span class="op" id="6406172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406178">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6406196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406201">Mode</span><span class="op" id="6406205">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406211">420</span><span class="op" id="6406214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406219">Uid</span><span class="op" id="6406222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406229">1000</span><span class="op" id="6406233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406238">Gid</span><span class="op" id="6406241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406248">1000</span><span class="op" id="6406252">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406257">Size</span><span class="op" id="6406261">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406267">200</span><span class="op" id="6406270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406275">ModTime</span><span class="op" id="6406282">:</span>&nbsp;&nbsp;<span class="ident" id="6406285">time</span><span class="op" id="6406289">.</span><span class="ident" id="6406290">Unix</span><span class="op" id="6406294">(</span><span class="num" id="6406295">1392342187</span><span class="op" id="6406305">,</span>&nbsp;<span class="num" id="6406307">0</span><span class="op" id="6406308">)</span><span class="op" id="6406309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406314">Typeflag</span><span class="op" id="6406322">:</span>&nbsp;<span class="num" id="6406324">0x30</span><span class="op" id="6406328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406333">Linkname</span><span class="op" id="6406341">:</span>&nbsp;<span class="string" id="6406343">&#34;&#34;</span><span class="op" id="6406345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406350">Uname</span><span class="op" id="6406355">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406360">&#34;david&#34;</span><span class="op" id="6406367">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406372">Gname</span><span class="op" id="6406377">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406382">&#34;david&#34;</span><span class="op" id="6406389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406394">Devmajor</span><span class="op" id="6406402">:</span>&nbsp;<span class="num" id="6406404">0</span><span class="op" id="6406405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406410">Devminor</span><span class="op" id="6406418">:</span>&nbsp;<span class="num" id="6406420">0</span><span class="op" id="6406421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406425">}</span><span class="op" id="6406426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406430">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406435">Name</span><span class="op" id="6406439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406445">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6406463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406468">Mode</span><span class="op" id="6406472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406478">420</span><span class="op" id="6406481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406486">Uid</span><span class="op" id="6406489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406496">1000</span><span class="op" id="6406500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406505">Gid</span><span class="op" id="6406508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406515">1000</span><span class="op" id="6406519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406524">Size</span><span class="op" id="6406528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406534">200</span><span class="op" id="6406537">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406542">ModTime</span><span class="op" id="6406549">:</span>&nbsp;&nbsp;<span class="ident" id="6406552">time</span><span class="op" id="6406556">.</span><span class="ident" id="6406557">Unix</span><span class="op" id="6406561">(</span><span class="num" id="6406562">1392340456</span><span class="op" id="6406572">,</span>&nbsp;<span class="num" id="6406574">0</span><span class="op" id="6406575">)</span><span class="op" id="6406576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406581">Typeflag</span><span class="op" id="6406589">:</span>&nbsp;<span class="num" id="6406591">0x30</span><span class="op" id="6406595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406600">Linkname</span><span class="op" id="6406608">:</span>&nbsp;<span class="string" id="6406610">&#34;&#34;</span><span class="op" id="6406612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406617">Uname</span><span class="op" id="6406622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406627">&#34;david&#34;</span><span class="op" id="6406634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406639">Gname</span><span class="op" id="6406644">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406649">&#34;david&#34;</span><span class="op" id="6406656">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406661">Devmajor</span><span class="op" id="6406669">:</span>&nbsp;<span class="num" id="6406671">0</span><span class="op" id="6406672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406677">Devminor</span><span class="op" id="6406685">:</span>&nbsp;<span class="num" id="6406687">0</span><span class="op" id="6406688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406692">}</span><span class="op" id="6406693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406702">Name</span><span class="op" id="6406706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406712">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6406730">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406735">Mode</span><span class="op" id="6406739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406745">420</span><span class="op" id="6406748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406753">Uid</span><span class="op" id="6406756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406763">1000</span><span class="op" id="6406767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406772">Gid</span><span class="op" id="6406775">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406782">1000</span><span class="op" id="6406786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406791">Size</span><span class="op" id="6406795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406801">200</span><span class="op" id="6406804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406809">ModTime</span><span class="op" id="6406816">:</span>&nbsp;&nbsp;<span class="ident" id="6406819">time</span><span class="op" id="6406823">.</span><span class="ident" id="6406824">Unix</span><span class="op" id="6406828">(</span><span class="num" id="6406829">1392337404</span><span class="op" id="6406839">,</span>&nbsp;<span class="num" id="6406841">0</span><span class="op" id="6406842">)</span><span class="op" id="6406843">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406848">Typeflag</span><span class="op" id="6406856">:</span>&nbsp;<span class="num" id="6406858">0x30</span><span class="op" id="6406862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406867">Linkname</span><span class="op" id="6406875">:</span>&nbsp;<span class="string" id="6406877">&#34;&#34;</span><span class="op" id="6406879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406884">Uname</span><span class="op" id="6406889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406894">&#34;david&#34;</span><span class="op" id="6406901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406906">Gname</span><span class="op" id="6406911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406916">&#34;david&#34;</span><span class="op" id="6406923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406928">Devmajor</span><span class="op" id="6406936">:</span>&nbsp;<span class="num" id="6406938">0</span><span class="op" id="6406939">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406944">Devminor</span><span class="op" id="6406952">:</span>&nbsp;<span class="num" id="6406954">0</span><span class="op" id="6406955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406959">}</span><span class="op" id="6406960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6406964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406969">Name</span><span class="op" id="6406973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6406979">&#34;end&#34;</span><span class="op" id="6406984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406989">Mode</span><span class="op" id="6406993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6406999">420</span><span class="op" id="6407002">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407007">Uid</span><span class="op" id="6407010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407017">1000</span><span class="op" id="6407021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407026">Gid</span><span class="op" id="6407029">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407036">1000</span><span class="op" id="6407040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407045">Size</span><span class="op" id="6407049">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407055">4</span><span class="op" id="6407056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407061">ModTime</span><span class="op" id="6407068">:</span>&nbsp;&nbsp;<span class="ident" id="6407071">time</span><span class="op" id="6407075">.</span><span class="ident" id="6407076">Unix</span><span class="op" id="6407080">(</span><span class="num" id="6407081">1392398319</span><span class="op" id="6407091">,</span>&nbsp;<span class="num" id="6407093">0</span><span class="op" id="6407094">)</span><span class="op" id="6407095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407100">Typeflag</span><span class="op" id="6407108">:</span>&nbsp;<span class="num" id="6407110">0x30</span><span class="op" id="6407114">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407119">Linkname</span><span class="op" id="6407127">:</span>&nbsp;<span class="string" id="6407129">&#34;&#34;</span><span class="op" id="6407131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407136">Uname</span><span class="op" id="6407141">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407146">&#34;david&#34;</span><span class="op" id="6407153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407158">Gname</span><span class="op" id="6407163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407168">&#34;david&#34;</span><span class="op" id="6407175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407180">Devmajor</span><span class="op" id="6407188">:</span>&nbsp;<span class="num" id="6407190">0</span><span class="op" id="6407191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407196">Devminor</span><span class="op" id="6407204">:</span>&nbsp;<span class="num" id="6407206">0</span><span class="op" id="6407207">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407211">}</span><span class="op" id="6407212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407215">}</span><span class="op" id="6407216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407219">cksums</span><span class="op" id="6407225">:</span>&nbsp;<span class="op" id="6407227">[</span><span class="op" id="6407228">]</span><span class="builtintype" id="6407229">string</span><span class="op" id="6407235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407239">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6407273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407277">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6407311">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407315">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6407349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407353">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6407387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407391">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6407425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407428">}</span><span class="op" id="6407429">,</span><br>
<span class="lineno"></span><span class="op" id="6407431">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6407434">var</span>&nbsp;<span class="ident" id="6407438">untarTests</span>&nbsp;<span class="op" id="6407449">=</span>&nbsp;<span class="op" id="6407451">[</span><span class="op" id="6407452">]</span><span class="op" id="6407453">*</span><span class="ident" id="6407454">untarTest</span><span class="op" id="6407463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407466">gnuTarTest</span><span class="op" id="6407476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407479">sparseTarTest</span><span class="op" id="6407492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407495">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407499">file</span><span class="op" id="6407503">:</span>&nbsp;<span class="string" id="6407505">&#34;testdata/star.tar&#34;</span><span class="op" id="6407524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407528">headers</span><span class="op" id="6407535">:</span>&nbsp;<span class="op" id="6407537">[</span><span class="op" id="6407538">]</span><span class="op" id="6407539">*</span><span class="ident" id="6407540">Header</span><span class="op" id="6407546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407557">Name</span><span class="op" id="6407561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407569">&#34;small.txt&#34;</span><span class="op" id="6407580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407586">Mode</span><span class="op" id="6407590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407598">0640</span><span class="op" id="6407602">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407608">Uid</span><span class="op" id="6407611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407620">73025</span><span class="op" id="6407625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407631">Gid</span><span class="op" id="6407634">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407643">5000</span><span class="op" id="6407647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407653">Size</span><span class="op" id="6407657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407665">5</span><span class="op" id="6407666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407672">ModTime</span><span class="op" id="6407679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407684">time</span><span class="op" id="6407688">.</span><span class="ident" id="6407689">Unix</span><span class="op" id="6407693">(</span><span class="num" id="6407694">1244592783</span><span class="op" id="6407704">,</span>&nbsp;<span class="num" id="6407706">0</span><span class="op" id="6407707">)</span><span class="op" id="6407708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407714">Typeflag</span><span class="op" id="6407722">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6407726">&#39;0&#39;</span><span class="op" id="6407729">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407735">Uname</span><span class="op" id="6407740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407747">&#34;dsymonds&#34;</span><span class="op" id="6407757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407763">Gname</span><span class="op" id="6407768">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407775">&#34;eng&#34;</span><span class="op" id="6407780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407786">AccessTime</span><span class="op" id="6407796">:</span>&nbsp;<span class="ident" id="6407798">time</span><span class="op" id="6407802">.</span><span class="ident" id="6407803">Unix</span><span class="op" id="6407807">(</span><span class="num" id="6407808">1244592783</span><span class="op" id="6407818">,</span>&nbsp;<span class="num" id="6407820">0</span><span class="op" id="6407821">)</span><span class="op" id="6407822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407828">ChangeTime</span><span class="op" id="6407838">:</span>&nbsp;<span class="ident" id="6407840">time</span><span class="op" id="6407844">.</span><span class="ident" id="6407845">Unix</span><span class="op" id="6407849">(</span><span class="num" id="6407850">1244592783</span><span class="op" id="6407860">,</span>&nbsp;<span class="num" id="6407862">0</span><span class="op" id="6407863">)</span><span class="op" id="6407864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407869">}</span><span class="op" id="6407870">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6407875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407881">Name</span><span class="op" id="6407885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407893">&#34;small2.txt&#34;</span><span class="op" id="6407905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407911">Mode</span><span class="op" id="6407915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407923">0640</span><span class="op" id="6407927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407933">Uid</span><span class="op" id="6407936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407945">73025</span><span class="op" id="6407950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407956">Gid</span><span class="op" id="6407959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407968">5000</span><span class="op" id="6407972">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407978">Size</span><span class="op" id="6407982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6407990">11</span><span class="op" id="6407992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407998">ModTime</span><span class="op" id="6408005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408010">time</span><span class="op" id="6408014">.</span><span class="ident" id="6408015">Unix</span><span class="op" id="6408019">(</span><span class="num" id="6408020">1244592783</span><span class="op" id="6408030">,</span>&nbsp;<span class="num" id="6408032">0</span><span class="op" id="6408033">)</span><span class="op" id="6408034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408040">Typeflag</span><span class="op" id="6408048">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6408052">&#39;0&#39;</span><span class="op" id="6408055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408061">Uname</span><span class="op" id="6408066">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408073">&#34;dsymonds&#34;</span><span class="op" id="6408083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408089">Gname</span><span class="op" id="6408094">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408101">&#34;eng&#34;</span><span class="op" id="6408106">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408112">AccessTime</span><span class="op" id="6408122">:</span>&nbsp;<span class="ident" id="6408124">time</span><span class="op" id="6408128">.</span><span class="ident" id="6408129">Unix</span><span class="op" id="6408133">(</span><span class="num" id="6408134">1244592783</span><span class="op" id="6408144">,</span>&nbsp;<span class="num" id="6408146">0</span><span class="op" id="6408147">)</span><span class="op" id="6408148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408154">ChangeTime</span><span class="op" id="6408164">:</span>&nbsp;<span class="ident" id="6408166">time</span><span class="op" id="6408170">.</span><span class="ident" id="6408171">Unix</span><span class="op" id="6408175">(</span><span class="num" id="6408176">1244592783</span><span class="op" id="6408186">,</span>&nbsp;<span class="num" id="6408188">0</span><span class="op" id="6408189">)</span><span class="op" id="6408190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408195">}</span><span class="op" id="6408196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408200">}</span><span class="op" id="6408201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408204">}</span><span class="op" id="6408205">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408212">file</span><span class="op" id="6408216">:</span>&nbsp;<span class="string" id="6408218">&#34;testdata/v7.tar&#34;</span><span class="op" id="6408235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408239">headers</span><span class="op" id="6408246">:</span>&nbsp;<span class="op" id="6408248">[</span><span class="op" id="6408249">]</span><span class="op" id="6408250">*</span><span class="ident" id="6408251">Header</span><span class="op" id="6408257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408268">Name</span><span class="op" id="6408272">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408278">&#34;small.txt&#34;</span><span class="op" id="6408289">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408295">Mode</span><span class="op" id="6408299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408305">0444</span><span class="op" id="6408309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408315">Uid</span><span class="op" id="6408318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408325">73025</span><span class="op" id="6408330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408336">Gid</span><span class="op" id="6408339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408346">5000</span><span class="op" id="6408350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408356">Size</span><span class="op" id="6408360">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408366">5</span><span class="op" id="6408367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408373">ModTime</span><span class="op" id="6408380">:</span>&nbsp;&nbsp;<span class="ident" id="6408383">time</span><span class="op" id="6408387">.</span><span class="ident" id="6408388">Unix</span><span class="op" id="6408392">(</span><span class="num" id="6408393">1244593104</span><span class="op" id="6408403">,</span>&nbsp;<span class="num" id="6408405">0</span><span class="op" id="6408406">)</span><span class="op" id="6408407">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408413">Typeflag</span><span class="op" id="6408421">:</span>&nbsp;<span class="string" id="6408423">&#39;\x00&#39;</span><span class="op" id="6408429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408434">}</span><span class="op" id="6408435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408446">Name</span><span class="op" id="6408450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408456">&#34;small2.txt&#34;</span><span class="op" id="6408468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408474">Mode</span><span class="op" id="6408478">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408484">0444</span><span class="op" id="6408488">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408494">Uid</span><span class="op" id="6408497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408504">73025</span><span class="op" id="6408509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408515">Gid</span><span class="op" id="6408518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408525">5000</span><span class="op" id="6408529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408535">Size</span><span class="op" id="6408539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408545">11</span><span class="op" id="6408547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408553">ModTime</span><span class="op" id="6408560">:</span>&nbsp;&nbsp;<span class="ident" id="6408563">time</span><span class="op" id="6408567">.</span><span class="ident" id="6408568">Unix</span><span class="op" id="6408572">(</span><span class="num" id="6408573">1244593104</span><span class="op" id="6408583">,</span>&nbsp;<span class="num" id="6408585">0</span><span class="op" id="6408586">)</span><span class="op" id="6408587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408593">Typeflag</span><span class="op" id="6408601">:</span>&nbsp;<span class="string" id="6408603">&#39;\x00&#39;</span><span class="op" id="6408609">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408614">}</span><span class="op" id="6408615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408619">}</span><span class="op" id="6408620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408623">}</span><span class="op" id="6408624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408631">file</span><span class="op" id="6408635">:</span>&nbsp;<span class="string" id="6408637">&#34;testdata/pax.tar&#34;</span><span class="op" id="6408655">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408659">headers</span><span class="op" id="6408666">:</span>&nbsp;<span class="op" id="6408668">[</span><span class="op" id="6408669">]</span><span class="op" id="6408670">*</span><span class="ident" id="6408671">Header</span><span class="op" id="6408677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408688">Name</span><span class="op" id="6408692">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408700">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6408896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408902">Mode</span><span class="op" id="6408906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408914">0664</span><span class="op" id="6408918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408924">Uid</span><span class="op" id="6408927">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408936">1000</span><span class="op" id="6408940">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408946">Gid</span><span class="op" id="6408949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6408958">1000</span><span class="op" id="6408962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408968">Uname</span><span class="op" id="6408973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6408980">&#34;shane&#34;</span><span class="op" id="6408987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408993">Gname</span><span class="op" id="6408998">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6409005">&#34;shane&#34;</span><span class="op" id="6409012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409018">Size</span><span class="op" id="6409022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409030">7</span><span class="op" id="6409031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409037">ModTime</span><span class="op" id="6409044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409049">time</span><span class="op" id="6409053">.</span><span class="ident" id="6409054">Unix</span><span class="op" id="6409058">(</span><span class="num" id="6409059">1350244992</span><span class="op" id="6409069">,</span>&nbsp;<span class="num" id="6409071">23960108</span><span class="op" id="6409079">)</span><span class="op" id="6409080">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409086">ChangeTime</span><span class="op" id="6409096">:</span>&nbsp;<span class="ident" id="6409098">time</span><span class="op" id="6409102">.</span><span class="ident" id="6409103">Unix</span><span class="op" id="6409107">(</span><span class="num" id="6409108">1350244992</span><span class="op" id="6409118">,</span>&nbsp;<span class="num" id="6409120">23960108</span><span class="op" id="6409128">)</span><span class="op" id="6409129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409135">AccessTime</span><span class="op" id="6409145">:</span>&nbsp;<span class="ident" id="6409147">time</span><span class="op" id="6409151">.</span><span class="ident" id="6409152">Unix</span><span class="op" id="6409156">(</span><span class="num" id="6409157">1350244992</span><span class="op" id="6409167">,</span>&nbsp;<span class="num" id="6409169">23960108</span><span class="op" id="6409177">)</span><span class="op" id="6409178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409184">Typeflag</span><span class="op" id="6409192">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6409196">TypeReg</span><span class="op" id="6409203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409208">}</span><span class="op" id="6409209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409214">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409220">Name</span><span class="op" id="6409224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6409232">&#34;a/b&#34;</span><span class="op" id="6409237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409243">Mode</span><span class="op" id="6409247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409255">0777</span><span class="op" id="6409259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409265">Uid</span><span class="op" id="6409268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409277">1000</span><span class="op" id="6409281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409287">Gid</span><span class="op" id="6409290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409299">1000</span><span class="op" id="6409303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409309">Uname</span><span class="op" id="6409314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6409321">&#34;shane&#34;</span><span class="op" id="6409328">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409334">Gname</span><span class="op" id="6409339">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6409346">&#34;shane&#34;</span><span class="op" id="6409353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409359">Size</span><span class="op" id="6409363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409371">0</span><span class="op" id="6409372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409378">ModTime</span><span class="op" id="6409385">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409390">time</span><span class="op" id="6409394">.</span><span class="ident" id="6409395">Unix</span><span class="op" id="6409399">(</span><span class="num" id="6409400">1350266320</span><span class="op" id="6409410">,</span>&nbsp;<span class="num" id="6409412">910238425</span><span class="op" id="6409421">)</span><span class="op" id="6409422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409428">ChangeTime</span><span class="op" id="6409438">:</span>&nbsp;<span class="ident" id="6409440">time</span><span class="op" id="6409444">.</span><span class="ident" id="6409445">Unix</span><span class="op" id="6409449">(</span><span class="num" id="6409450">1350266320</span><span class="op" id="6409460">,</span>&nbsp;<span class="num" id="6409462">910238425</span><span class="op" id="6409471">)</span><span class="op" id="6409472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409478">AccessTime</span><span class="op" id="6409488">:</span>&nbsp;<span class="ident" id="6409490">time</span><span class="op" id="6409494">.</span><span class="ident" id="6409495">Unix</span><span class="op" id="6409499">(</span><span class="num" id="6409500">1350266320</span><span class="op" id="6409510">,</span>&nbsp;<span class="num" id="6409512">910238425</span><span class="op" id="6409521">)</span><span class="op" id="6409522">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409528">Typeflag</span><span class="op" id="6409536">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6409540">TypeSymlink</span><span class="op" id="6409551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409557">Linkname</span><span class="op" id="6409565">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6409569">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6409763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409768">}</span><span class="op" id="6409769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409773">}</span><span class="op" id="6409774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409777">}</span><span class="op" id="6409778">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409785">file</span><span class="op" id="6409789">:</span>&nbsp;<span class="string" id="6409791">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6409813">,</span>&nbsp;<span class="comment" id="6409815">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409842">headers</span><span class="op" id="6409849">:</span>&nbsp;<span class="op" id="6409851">[</span><span class="op" id="6409852">]</span><span class="op" id="6409853">*</span><span class="ident" id="6409854">Header</span><span class="op" id="6409860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409871">Name</span><span class="op" id="6409875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6409881">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6409899">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409905">Mode</span><span class="op" id="6409909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409915">0664</span><span class="op" id="6409919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409925">Uid</span><span class="op" id="6409928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409935">0</span><span class="op" id="6409936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409942">Gid</span><span class="op" id="6409945">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409952">0</span><span class="op" id="6409953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409959">Size</span><span class="op" id="6409963">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6409969">14</span><span class="op" id="6409971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409977">ModTime</span><span class="op" id="6409984">:</span>&nbsp;&nbsp;<span class="ident" id="6409987">time</span><span class="op" id="6409991">.</span><span class="ident" id="6409992">Unix</span><span class="op" id="6409996">(</span><span class="num" id="6409997">1365454838</span><span class="op" id="6410007">,</span>&nbsp;<span class="num" id="6410009">0</span><span class="op" id="6410010">)</span><span class="op" id="6410011">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410017">Typeflag</span><span class="op" id="6410025">:</span>&nbsp;<span class="ident" id="6410027">TypeReg</span><span class="op" id="6410034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410040">Linkname</span><span class="op" id="6410048">:</span>&nbsp;<span class="string" id="6410050">&#34;&#34;</span><span class="op" id="6410052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410058">Uname</span><span class="op" id="6410063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410068">&#34;eyefi&#34;</span><span class="op" id="6410075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410081">Gname</span><span class="op" id="6410086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410091">&#34;eyefi&#34;</span><span class="op" id="6410098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410104">Devmajor</span><span class="op" id="6410112">:</span>&nbsp;<span class="num" id="6410114">0</span><span class="op" id="6410115">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410121">Devminor</span><span class="op" id="6410129">:</span>&nbsp;<span class="num" id="6410131">0</span><span class="op" id="6410132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410137">}</span><span class="op" id="6410138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410142">}</span><span class="op" id="6410143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410146">}</span><span class="op" id="6410147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410150">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410154">file</span><span class="op" id="6410158">:</span>&nbsp;<span class="string" id="6410160">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6410181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410185">headers</span><span class="op" id="6410192">:</span>&nbsp;<span class="op" id="6410194">[</span><span class="op" id="6410195">]</span><span class="op" id="6410196">*</span><span class="ident" id="6410197">Header</span><span class="op" id="6410203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410214">Name</span><span class="op" id="6410218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410226">&#34;small.txt&#34;</span><span class="op" id="6410237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410243">Mode</span><span class="op" id="6410247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410255">0644</span><span class="op" id="6410259">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410265">Uid</span><span class="op" id="6410268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410277">1000</span><span class="op" id="6410281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410287">Gid</span><span class="op" id="6410290">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410299">10</span><span class="op" id="6410301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410307">Size</span><span class="op" id="6410311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410319">5</span><span class="op" id="6410320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410326">ModTime</span><span class="op" id="6410333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410338">time</span><span class="op" id="6410342">.</span><span class="ident" id="6410343">Unix</span><span class="op" id="6410347">(</span><span class="num" id="6410348">1386065770</span><span class="op" id="6410358">,</span>&nbsp;<span class="num" id="6410360">448252320</span><span class="op" id="6410369">)</span><span class="op" id="6410370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410376">Typeflag</span><span class="op" id="6410384">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6410388">&#39;0&#39;</span><span class="op" id="6410391">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410397">Uname</span><span class="op" id="6410402">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410409">&#34;alex&#34;</span><span class="op" id="6410415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410421">Gname</span><span class="op" id="6410426">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410433">&#34;wheel&#34;</span><span class="op" id="6410440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410446">AccessTime</span><span class="op" id="6410456">:</span>&nbsp;<span class="ident" id="6410458">time</span><span class="op" id="6410462">.</span><span class="ident" id="6410463">Unix</span><span class="op" id="6410467">(</span><span class="num" id="6410468">1389782991</span><span class="op" id="6410478">,</span>&nbsp;<span class="num" id="6410480">419875220</span><span class="op" id="6410489">)</span><span class="op" id="6410490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410496">ChangeTime</span><span class="op" id="6410506">:</span>&nbsp;<span class="ident" id="6410508">time</span><span class="op" id="6410512">.</span><span class="ident" id="6410513">Unix</span><span class="op" id="6410517">(</span><span class="num" id="6410518">1389782956</span><span class="op" id="6410528">,</span>&nbsp;<span class="num" id="6410530">794414986</span><span class="op" id="6410539">)</span><span class="op" id="6410540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410546">Xattrs</span><span class="op" id="6410552">:</span>&nbsp;<span class="keyword" id="6410554">map</span><span class="op" id="6410557">[</span><span class="builtintype" id="6410558">string</span><span class="op" id="6410564">]</span><span class="builtintype" id="6410565">string</span><span class="op" id="6410571">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410578">&#34;user.key&#34;</span><span class="op" id="6410588">:</span>&nbsp;&nbsp;<span class="string" id="6410591">&#34;value&#34;</span><span class="op" id="6410598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410605">&#34;user.key2&#34;</span><span class="op" id="6410616">:</span>&nbsp;<span class="string" id="6410618">&#34;value2&#34;</span><span class="op" id="6410626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6410633">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410710">&#34;security.selinux&#34;</span><span class="op" id="6410728">:</span>&nbsp;<span class="string" id="6410730">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6410770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410776">}</span><span class="op" id="6410777">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410782">}</span><span class="op" id="6410783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410794">Name</span><span class="op" id="6410798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410806">&#34;small2.txt&#34;</span><span class="op" id="6410818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410824">Mode</span><span class="op" id="6410828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410836">0644</span><span class="op" id="6410840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410846">Uid</span><span class="op" id="6410849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410858">1000</span><span class="op" id="6410862">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410868">Gid</span><span class="op" id="6410871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410880">10</span><span class="op" id="6410882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410888">Size</span><span class="op" id="6410892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6410900">11</span><span class="op" id="6410902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410908">ModTime</span><span class="op" id="6410915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410920">time</span><span class="op" id="6410924">.</span><span class="ident" id="6410925">Unix</span><span class="op" id="6410929">(</span><span class="num" id="6410930">1386065770</span><span class="op" id="6410940">,</span>&nbsp;<span class="num" id="6410942">449252304</span><span class="op" id="6410951">)</span><span class="op" id="6410952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410958">Typeflag</span><span class="op" id="6410966">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6410970">&#39;0&#39;</span><span class="op" id="6410973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410979">Uname</span><span class="op" id="6410984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6410991">&#34;alex&#34;</span><span class="op" id="6410997">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411003">Gname</span><span class="op" id="6411008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6411015">&#34;wheel&#34;</span><span class="op" id="6411022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411028">AccessTime</span><span class="op" id="6411038">:</span>&nbsp;<span class="ident" id="6411040">time</span><span class="op" id="6411044">.</span><span class="ident" id="6411045">Unix</span><span class="op" id="6411049">(</span><span class="num" id="6411050">1389782991</span><span class="op" id="6411060">,</span>&nbsp;<span class="num" id="6411062">419875220</span><span class="op" id="6411071">)</span><span class="op" id="6411072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411078">ChangeTime</span><span class="op" id="6411088">:</span>&nbsp;<span class="ident" id="6411090">time</span><span class="op" id="6411094">.</span><span class="ident" id="6411095">Unix</span><span class="op" id="6411099">(</span><span class="num" id="6411100">1386065770</span><span class="op" id="6411110">,</span>&nbsp;<span class="num" id="6411112">449252304</span><span class="op" id="6411121">)</span><span class="op" id="6411122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411128">Xattrs</span><span class="op" id="6411134">:</span>&nbsp;<span class="keyword" id="6411136">map</span><span class="op" id="6411139">[</span><span class="builtintype" id="6411140">string</span><span class="op" id="6411146">]</span><span class="builtintype" id="6411147">string</span><span class="op" id="6411153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6411160">&#34;security.selinux&#34;</span><span class="op" id="6411178">:</span>&nbsp;<span class="string" id="6411180">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6411220">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411226">}</span><span class="op" id="6411227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411232">}</span><span class="op" id="6411233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411237">}</span><span class="op" id="6411238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411241">}</span><span class="op" id="6411242">,</span><br>
<span class="lineno"></span><span class="op" id="6411244">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6411247">func</span>&nbsp;<span class="ident" id="6411252">TestReader</span><span class="op" id="6411262">(</span><span class="ident" id="6411263">t</span>&nbsp;<span class="op" id="6411265">*</span><span class="ident" id="6411266">testing</span><span class="op" id="6411273">.</span><span class="ident" id="6411274">T</span><span class="op" id="6411275">)</span>&nbsp;<span class="op" id="6411277">{</span><br>
<span class="lineno"></span><span class="ident" id="6411279">testLoop</span><span class="op" id="6411287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411290">for</span>&nbsp;<span class="ident" id="6411294">i</span><span class="op" id="6411295">,</span>&nbsp;<span class="ident" id="6411297">test</span>&nbsp;<span class="op" id="6411302">:=</span>&nbsp;<span class="keyword" id="6411305">range</span>&nbsp;<span class="ident" id="6411311">untarTests</span>&nbsp;<span class="op" id="6411322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411326">f</span><span class="op" id="6411327">,</span>&nbsp;<span class="ident" id="6411329">err</span>&nbsp;<span class="op" id="6411333">:=</span>&nbsp;<span class="ident" id="6411336">os</span><span class="op" id="6411338">.</span><span class="ident" id="6411339">Open</span><span class="op" id="6411343">(</span><span class="ident" id="6411344">test</span><span class="op" id="6411348">.</span><span class="ident" id="6411349">file</span><span class="op" id="6411353">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411357">if</span>&nbsp;<span class="ident" id="6411360">err</span>&nbsp;<span class="op" id="6411364">!=</span>&nbsp;<span class="builtintype" id="6411367">nil</span>&nbsp;<span class="op" id="6411371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411376">t</span><span class="op" id="6411377">.</span><span class="ident" id="6411378">Errorf</span><span class="op" id="6411384">(</span><span class="string" id="6411385">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6411416">,</span>&nbsp;<span class="ident" id="6411418">i</span><span class="op" id="6411419">,</span>&nbsp;<span class="ident" id="6411421">err</span><span class="op" id="6411424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411429">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411444">defer</span>&nbsp;<span class="ident" id="6411450">f</span><span class="op" id="6411451">.</span><span class="ident" id="6411452">Close</span><span class="op" id="6411457">(</span><span class="op" id="6411458">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411462">tr</span>&nbsp;<span class="op" id="6411465">:=</span>&nbsp;<span class="ident" id="6411468">NewReader</span><span class="op" id="6411477">(</span><span class="ident" id="6411478">f</span><span class="op" id="6411479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411483">for</span>&nbsp;<span class="ident" id="6411487">j</span><span class="op" id="6411488">,</span>&nbsp;<span class="ident" id="6411490">header</span>&nbsp;<span class="op" id="6411497">:=</span>&nbsp;<span class="keyword" id="6411500">range</span>&nbsp;<span class="ident" id="6411506">test</span><span class="op" id="6411510">.</span><span class="ident" id="6411511">headers</span>&nbsp;<span class="op" id="6411519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411524">hdr</span><span class="op" id="6411527">,</span>&nbsp;<span class="ident" id="6411529">err</span>&nbsp;<span class="op" id="6411533">:=</span>&nbsp;<span class="ident" id="6411536">tr</span><span class="op" id="6411538">.</span><span class="ident" id="6411539">Next</span><span class="op" id="6411543">(</span><span class="op" id="6411544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411549">if</span>&nbsp;<span class="ident" id="6411552">err</span>&nbsp;<span class="op" id="6411556">!=</span>&nbsp;<span class="builtintype" id="6411559">nil</span>&nbsp;<span class="op" id="6411563">||</span>&nbsp;<span class="ident" id="6411566">hdr</span>&nbsp;<span class="op" id="6411570">==</span>&nbsp;<span class="builtintype" id="6411573">nil</span>&nbsp;<span class="op" id="6411577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411583">t</span><span class="op" id="6411584">.</span><span class="ident" id="6411585">Errorf</span><span class="op" id="6411591">(</span><span class="string" id="6411592">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6411633">,</span>&nbsp;<span class="ident" id="6411635">i</span><span class="op" id="6411636">,</span>&nbsp;<span class="ident" id="6411638">j</span><span class="op" id="6411639">,</span>&nbsp;<span class="ident" id="6411641">err</span><span class="op" id="6411644">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411650">f</span><span class="op" id="6411651">.</span><span class="ident" id="6411652">Close</span><span class="op" id="6411657">(</span><span class="op" id="6411658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411664">continue</span>&nbsp;<span class="ident" id="6411673">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411690">if</span>&nbsp;<span class="op" id="6411693">!</span><span class="ident" id="6411694">reflect</span><span class="op" id="6411701">.</span><span class="ident" id="6411702">DeepEqual</span><span class="op" id="6411711">(</span><span class="op" id="6411712">*</span><span class="ident" id="6411713">hdr</span><span class="op" id="6411716">,</span>&nbsp;<span class="op" id="6411718">*</span><span class="ident" id="6411719">header</span><span class="op" id="6411725">)</span>&nbsp;<span class="op" id="6411727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411733">t</span><span class="op" id="6411734">.</span><span class="ident" id="6411735">Errorf</span><span class="op" id="6411741">(</span><span class="string" id="6411742">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6411800">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411807">i</span><span class="op" id="6411808">,</span>&nbsp;<span class="ident" id="6411810">j</span><span class="op" id="6411811">,</span>&nbsp;<span class="op" id="6411813">*</span><span class="ident" id="6411814">hdr</span><span class="op" id="6411817">,</span>&nbsp;<span class="op" id="6411819">*</span><span class="ident" id="6411820">header</span><span class="op" id="6411826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411839">hdr</span><span class="op" id="6411842">,</span>&nbsp;<span class="ident" id="6411844">err</span>&nbsp;<span class="op" id="6411848">:=</span>&nbsp;<span class="ident" id="6411851">tr</span><span class="op" id="6411853">.</span><span class="ident" id="6411854">Next</span><span class="op" id="6411858">(</span><span class="op" id="6411859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411863">if</span>&nbsp;<span class="ident" id="6411866">err</span>&nbsp;<span class="op" id="6411870">==</span>&nbsp;<span class="ident" id="6411873">io</span><span class="op" id="6411875">.</span><span class="ident" id="6411876">EOF</span>&nbsp;<span class="op" id="6411880">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411885">continue</span>&nbsp;<span class="ident" id="6411894">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6411905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6411909">if</span>&nbsp;<span class="ident" id="6411912">hdr</span>&nbsp;<span class="op" id="6411916">!=</span>&nbsp;<span class="builtintype" id="6411919">nil</span>&nbsp;<span class="op" id="6411923">||</span>&nbsp;<span class="ident" id="6411926">err</span>&nbsp;<span class="op" id="6411930">!=</span>&nbsp;<span class="builtintype" id="6411933">nil</span>&nbsp;<span class="op" id="6411937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6411942">t</span><span class="op" id="6411943">.</span><span class="ident" id="6411944">Errorf</span><span class="op" id="6411950">(</span><span class="string" id="6411951">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6412002">,</span>&nbsp;<span class="ident" id="6412004">i</span><span class="op" id="6412005">,</span>&nbsp;<span class="ident" id="6412007">hdr</span><span class="op" id="6412010">,</span>&nbsp;<span class="ident" id="6412012">err</span><span class="op" id="6412015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412019">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412022">}</span><br>
<span class="lineno"></span><span class="op" id="6412024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6412027">func</span>&nbsp;<span class="ident" id="6412032">TestPartialRead</span><span class="op" id="6412047">(</span><span class="ident" id="6412048">t</span>&nbsp;<span class="op" id="6412050">*</span><span class="ident" id="6412051">testing</span><span class="op" id="6412058">.</span><span class="ident" id="6412059">T</span><span class="op" id="6412060">)</span>&nbsp;<span class="op" id="6412062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412065">f</span><span class="op" id="6412066">,</span>&nbsp;<span class="ident" id="6412068">err</span>&nbsp;<span class="op" id="6412072">:=</span>&nbsp;<span class="ident" id="6412075">os</span><span class="op" id="6412077">.</span><span class="ident" id="6412078">Open</span><span class="op" id="6412082">(</span><span class="string" id="6412083">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6412101">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412104">if</span>&nbsp;<span class="ident" id="6412107">err</span>&nbsp;<span class="op" id="6412111">!=</span>&nbsp;<span class="builtintype" id="6412114">nil</span>&nbsp;<span class="op" id="6412118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412122">t</span><span class="op" id="6412123">.</span><span class="ident" id="6412124">Fatalf</span><span class="op" id="6412130">(</span><span class="string" id="6412131">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6412153">,</span>&nbsp;<span class="ident" id="6412155">err</span><span class="op" id="6412158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412164">defer</span>&nbsp;<span class="ident" id="6412170">f</span><span class="op" id="6412171">.</span><span class="ident" id="6412172">Close</span><span class="op" id="6412177">(</span><span class="op" id="6412178">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412182">tr</span>&nbsp;<span class="op" id="6412185">:=</span>&nbsp;<span class="ident" id="6412188">NewReader</span><span class="op" id="6412197">(</span><span class="ident" id="6412198">f</span><span class="op" id="6412199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6412203">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412268">hdr</span><span class="op" id="6412271">,</span>&nbsp;<span class="ident" id="6412273">err</span>&nbsp;<span class="op" id="6412277">:=</span>&nbsp;<span class="ident" id="6412280">tr</span><span class="op" id="6412282">.</span><span class="ident" id="6412283">Next</span><span class="op" id="6412287">(</span><span class="op" id="6412288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412291">if</span>&nbsp;<span class="ident" id="6412294">err</span>&nbsp;<span class="op" id="6412298">!=</span>&nbsp;<span class="builtintype" id="6412301">nil</span>&nbsp;<span class="op" id="6412305">||</span>&nbsp;<span class="ident" id="6412308">hdr</span>&nbsp;<span class="op" id="6412312">==</span>&nbsp;<span class="builtintype" id="6412315">nil</span>&nbsp;<span class="op" id="6412319">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412323">t</span><span class="op" id="6412324">.</span><span class="ident" id="6412325">Fatalf</span><span class="op" id="6412331">(</span><span class="string" id="6412332">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6412359">,</span>&nbsp;<span class="ident" id="6412361">err</span><span class="op" id="6412364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412370">buf</span>&nbsp;<span class="op" id="6412374">:=</span>&nbsp;<span class="builtinfunc" id="6412377">make</span><span class="op" id="6412381">(</span><span class="op" id="6412382">[</span><span class="op" id="6412383">]</span><span class="builtintype" id="6412384">byte</span><span class="op" id="6412388">,</span>&nbsp;<span class="num" id="6412390">4</span><span class="op" id="6412391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412394">if</span>&nbsp;<span class="ident" id="6412397">_</span><span class="op" id="6412398">,</span>&nbsp;<span class="ident" id="6412400">err</span>&nbsp;<span class="op" id="6412404">:=</span>&nbsp;<span class="ident" id="6412407">io</span><span class="op" id="6412409">.</span><span class="ident" id="6412410">ReadFull</span><span class="op" id="6412418">(</span><span class="ident" id="6412419">tr</span><span class="op" id="6412421">,</span>&nbsp;<span class="ident" id="6412423">buf</span><span class="op" id="6412426">)</span><span class="op" id="6412427">;</span>&nbsp;<span class="ident" id="6412429">err</span>&nbsp;<span class="op" id="6412433">!=</span>&nbsp;<span class="builtintype" id="6412436">nil</span>&nbsp;<span class="op" id="6412440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412444">t</span><span class="op" id="6412445">.</span><span class="ident" id="6412446">Fatalf</span><span class="op" id="6412452">(</span><span class="string" id="6412453">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6412475">,</span>&nbsp;<span class="ident" id="6412477">err</span><span class="op" id="6412480">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412486">if</span>&nbsp;<span class="ident" id="6412489">expected</span>&nbsp;<span class="op" id="6412498">:=</span>&nbsp;<span class="op" id="6412501">[</span><span class="op" id="6412502">]</span><span class="builtintype" id="6412503">byte</span><span class="op" id="6412507">(</span><span class="string" id="6412508">&#34;Kilt&#34;</span><span class="op" id="6412514">)</span><span class="op" id="6412515">;</span>&nbsp;<span class="op" id="6412517">!</span><span class="ident" id="6412518">bytes</span><span class="op" id="6412523">.</span><span class="ident" id="6412524">Equal</span><span class="op" id="6412529">(</span><span class="ident" id="6412530">buf</span><span class="op" id="6412533">,</span>&nbsp;<span class="ident" id="6412535">expected</span><span class="op" id="6412543">)</span>&nbsp;<span class="op" id="6412545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412549">t</span><span class="op" id="6412550">.</span><span class="ident" id="6412551">Errorf</span><span class="op" id="6412557">(</span><span class="string" id="6412558">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6412582">,</span>&nbsp;<span class="ident" id="6412584">buf</span><span class="op" id="6412587">,</span>&nbsp;<span class="ident" id="6412589">expected</span><span class="op" id="6412597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6412604">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412620">hdr</span><span class="op" id="6412623">,</span>&nbsp;<span class="ident" id="6412625">err</span>&nbsp;<span class="op" id="6412629">=</span>&nbsp;<span class="ident" id="6412631">tr</span><span class="op" id="6412633">.</span><span class="ident" id="6412634">Next</span><span class="op" id="6412638">(</span><span class="op" id="6412639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412642">if</span>&nbsp;<span class="ident" id="6412645">err</span>&nbsp;<span class="op" id="6412649">!=</span>&nbsp;<span class="builtintype" id="6412652">nil</span>&nbsp;<span class="op" id="6412656">||</span>&nbsp;<span class="ident" id="6412659">hdr</span>&nbsp;<span class="op" id="6412663">==</span>&nbsp;<span class="builtintype" id="6412666">nil</span>&nbsp;<span class="op" id="6412670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412674">t</span><span class="op" id="6412675">.</span><span class="ident" id="6412676">Fatalf</span><span class="op" id="6412682">(</span><span class="string" id="6412683">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6412711">,</span>&nbsp;<span class="ident" id="6412713">err</span><span class="op" id="6412716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412719">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412722">buf</span>&nbsp;<span class="op" id="6412726">=</span>&nbsp;<span class="builtinfunc" id="6412728">make</span><span class="op" id="6412732">(</span><span class="op" id="6412733">[</span><span class="op" id="6412734">]</span><span class="builtintype" id="6412735">byte</span><span class="op" id="6412739">,</span>&nbsp;<span class="num" id="6412741">6</span><span class="op" id="6412742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412745">if</span>&nbsp;<span class="ident" id="6412748">_</span><span class="op" id="6412749">,</span>&nbsp;<span class="ident" id="6412751">err</span>&nbsp;<span class="op" id="6412755">:=</span>&nbsp;<span class="ident" id="6412758">io</span><span class="op" id="6412760">.</span><span class="ident" id="6412761">ReadFull</span><span class="op" id="6412769">(</span><span class="ident" id="6412770">tr</span><span class="op" id="6412772">,</span>&nbsp;<span class="ident" id="6412774">buf</span><span class="op" id="6412777">)</span><span class="op" id="6412778">;</span>&nbsp;<span class="ident" id="6412780">err</span>&nbsp;<span class="op" id="6412784">!=</span>&nbsp;<span class="builtintype" id="6412787">nil</span>&nbsp;<span class="op" id="6412791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412795">t</span><span class="op" id="6412796">.</span><span class="ident" id="6412797">Fatalf</span><span class="op" id="6412803">(</span><span class="string" id="6412804">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6412826">,</span>&nbsp;<span class="ident" id="6412828">err</span><span class="op" id="6412831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6412837">if</span>&nbsp;<span class="ident" id="6412840">expected</span>&nbsp;<span class="op" id="6412849">:=</span>&nbsp;<span class="op" id="6412852">[</span><span class="op" id="6412853">]</span><span class="builtintype" id="6412854">byte</span><span class="op" id="6412858">(</span><span class="string" id="6412859">&#34;Google&#34;</span><span class="op" id="6412867">)</span><span class="op" id="6412868">;</span>&nbsp;<span class="op" id="6412870">!</span><span class="ident" id="6412871">bytes</span><span class="op" id="6412876">.</span><span class="ident" id="6412877">Equal</span><span class="op" id="6412882">(</span><span class="ident" id="6412883">buf</span><span class="op" id="6412886">,</span>&nbsp;<span class="ident" id="6412888">expected</span><span class="op" id="6412896">)</span>&nbsp;<span class="op" id="6412898">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6412902">t</span><span class="op" id="6412903">.</span><span class="ident" id="6412904">Errorf</span><span class="op" id="6412910">(</span><span class="string" id="6412911">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6412935">,</span>&nbsp;<span class="ident" id="6412937">buf</span><span class="op" id="6412940">,</span>&nbsp;<span class="ident" id="6412942">expected</span><span class="op" id="6412950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412953">}</span><br>
<span class="lineno"></span><span class="op" id="6412955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6412958">func</span>&nbsp;<span class="ident" id="6412963">TestIncrementalRead</span><span class="op" id="6412982">(</span><span class="ident" id="6412983">t</span>&nbsp;<span class="op" id="6412985">*</span><span class="ident" id="6412986">testing</span><span class="op" id="6412993">.</span><span class="ident" id="6412994">T</span><span class="op" id="6412995">)</span>&nbsp;<span class="op" id="6412997">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413000">test</span>&nbsp;<span class="op" id="6413005">:=</span>&nbsp;<span class="ident" id="6413008">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413020">f</span><span class="op" id="6413021">,</span>&nbsp;<span class="ident" id="6413023">err</span>&nbsp;<span class="op" id="6413027">:=</span>&nbsp;<span class="ident" id="6413030">os</span><span class="op" id="6413032">.</span><span class="ident" id="6413033">Open</span><span class="op" id="6413037">(</span><span class="ident" id="6413038">test</span><span class="op" id="6413042">.</span><span class="ident" id="6413043">file</span><span class="op" id="6413047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413050">if</span>&nbsp;<span class="ident" id="6413053">err</span>&nbsp;<span class="op" id="6413057">!=</span>&nbsp;<span class="builtintype" id="6413060">nil</span>&nbsp;<span class="op" id="6413064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413068">t</span><span class="op" id="6413069">.</span><span class="ident" id="6413070">Fatalf</span><span class="op" id="6413076">(</span><span class="string" id="6413077">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6413099">,</span>&nbsp;<span class="ident" id="6413101">err</span><span class="op" id="6413104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413107">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413110">defer</span>&nbsp;<span class="ident" id="6413116">f</span><span class="op" id="6413117">.</span><span class="ident" id="6413118">Close</span><span class="op" id="6413123">(</span><span class="op" id="6413124">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413128">tr</span>&nbsp;<span class="op" id="6413131">:=</span>&nbsp;<span class="ident" id="6413134">NewReader</span><span class="op" id="6413143">(</span><span class="ident" id="6413144">f</span><span class="op" id="6413145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413149">headers</span>&nbsp;<span class="op" id="6413157">:=</span>&nbsp;<span class="ident" id="6413160">test</span><span class="op" id="6413164">.</span><span class="ident" id="6413165">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413174">cksums</span>&nbsp;<span class="op" id="6413181">:=</span>&nbsp;<span class="ident" id="6413184">test</span><span class="op" id="6413188">.</span><span class="ident" id="6413189">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413197">nread</span>&nbsp;<span class="op" id="6413203">:=</span>&nbsp;<span class="num" id="6413206">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6413210">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413234">for</span>&nbsp;<span class="op" id="6413238">;</span>&nbsp;<span class="op" id="6413240">;</span>&nbsp;<span class="ident" id="6413242">nread</span><span class="op" id="6413247">++</span>&nbsp;<span class="op" id="6413250">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413254">hdr</span><span class="op" id="6413257">,</span>&nbsp;<span class="ident" id="6413259">err</span>&nbsp;<span class="op" id="6413263">:=</span>&nbsp;<span class="ident" id="6413266">tr</span><span class="op" id="6413268">.</span><span class="ident" id="6413269">Next</span><span class="op" id="6413273">(</span><span class="op" id="6413274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413278">if</span>&nbsp;<span class="ident" id="6413281">hdr</span>&nbsp;<span class="op" id="6413285">==</span>&nbsp;<span class="builtintype" id="6413288">nil</span>&nbsp;<span class="op" id="6413292">||</span>&nbsp;<span class="ident" id="6413295">err</span>&nbsp;<span class="op" id="6413299">==</span>&nbsp;<span class="ident" id="6413302">io</span><span class="op" id="6413304">.</span><span class="ident" id="6413305">EOF</span>&nbsp;<span class="op" id="6413309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413314">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6413327">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413349">if</span>&nbsp;<span class="op" id="6413352">!</span><span class="ident" id="6413353">reflect</span><span class="op" id="6413360">.</span><span class="ident" id="6413361">DeepEqual</span><span class="op" id="6413370">(</span><span class="op" id="6413371">*</span><span class="ident" id="6413372">hdr</span><span class="op" id="6413375">,</span>&nbsp;<span class="op" id="6413377">*</span><span class="ident" id="6413378">headers</span><span class="op" id="6413385">[</span><span class="ident" id="6413386">nread</span><span class="op" id="6413391">]</span><span class="op" id="6413392">)</span>&nbsp;<span class="op" id="6413394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413399">t</span><span class="op" id="6413400">.</span><span class="ident" id="6413401">Errorf</span><span class="op" id="6413407">(</span><span class="string" id="6413408">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6413447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413453">*</span><span class="ident" id="6413454">hdr</span><span class="op" id="6413457">,</span>&nbsp;<span class="ident" id="6413459">headers</span><span class="op" id="6413466">[</span><span class="ident" id="6413467">nread</span><span class="op" id="6413472">]</span><span class="op" id="6413473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413477">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6413482">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6413528">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413558">h</span>&nbsp;<span class="op" id="6413560">:=</span>&nbsp;<span class="ident" id="6413563">md5</span><span class="op" id="6413566">.</span><span class="ident" id="6413567">New</span><span class="op" id="6413570">(</span><span class="op" id="6413571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413575">rdbuf</span>&nbsp;<span class="op" id="6413581">:=</span>&nbsp;<span class="builtinfunc" id="6413584">make</span><span class="op" id="6413588">(</span><span class="op" id="6413589">[</span><span class="op" id="6413590">]</span><span class="builtintype" id="6413591">uint8</span><span class="op" id="6413596">,</span>&nbsp;<span class="num" id="6413598">8</span><span class="op" id="6413599">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413603">for</span>&nbsp;<span class="op" id="6413607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413612">nr</span><span class="op" id="6413614">,</span>&nbsp;<span class="ident" id="6413616">err</span>&nbsp;<span class="op" id="6413620">:=</span>&nbsp;<span class="ident" id="6413623">tr</span><span class="op" id="6413625">.</span><span class="ident" id="6413626">Read</span><span class="op" id="6413630">(</span><span class="ident" id="6413631">rdbuf</span><span class="op" id="6413636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413641">if</span>&nbsp;<span class="ident" id="6413644">err</span>&nbsp;<span class="op" id="6413648">==</span>&nbsp;<span class="ident" id="6413651">io</span><span class="op" id="6413653">.</span><span class="ident" id="6413654">EOF</span>&nbsp;<span class="op" id="6413658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413664">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413673">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413678">if</span>&nbsp;<span class="ident" id="6413681">err</span>&nbsp;<span class="op" id="6413685">!=</span>&nbsp;<span class="builtintype" id="6413688">nil</span>&nbsp;<span class="op" id="6413692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413698">t</span><span class="op" id="6413699">.</span><span class="ident" id="6413700">Errorf</span><span class="op" id="6413706">(</span><span class="string" id="6413707">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6413736">,</span>&nbsp;<span class="ident" id="6413738">err</span><span class="op" id="6413741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413747">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413761">h</span><span class="op" id="6413762">.</span><span class="ident" id="6413763">Write</span><span class="op" id="6413768">(</span><span class="ident" id="6413769">rdbuf</span><span class="op" id="6413774">[</span><span class="num" id="6413775">0</span><span class="op" id="6413776">:</span><span class="ident" id="6413777">nr</span><span class="op" id="6413779">]</span><span class="op" id="6413780">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6413788">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413809">have</span>&nbsp;<span class="op" id="6413814">:=</span>&nbsp;<span class="ident" id="6413817">fmt</span><span class="op" id="6413820">.</span><span class="ident" id="6413821">Sprintf</span><span class="op" id="6413828">(</span><span class="string" id="6413829">&#34;%x&#34;</span><span class="op" id="6413833">,</span>&nbsp;<span class="ident" id="6413835">h</span><span class="op" id="6413836">.</span><span class="ident" id="6413837">Sum</span><span class="op" id="6413840">(</span><span class="builtintype" id="6413841">nil</span><span class="op" id="6413844">)</span><span class="op" id="6413845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413849">want</span>&nbsp;<span class="op" id="6413854">:=</span>&nbsp;<span class="ident" id="6413857">cksums</span><span class="op" id="6413863">[</span><span class="ident" id="6413864">nread</span><span class="op" id="6413869">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413873">if</span>&nbsp;<span class="ident" id="6413876">want</span>&nbsp;<span class="op" id="6413881">!=</span>&nbsp;<span class="ident" id="6413884">have</span>&nbsp;<span class="op" id="6413889">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6413894">t</span><span class="op" id="6413895">.</span><span class="ident" id="6413896">Errorf</span><span class="op" id="6413902">(</span><span class="string" id="6413903">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6413949">,</span>&nbsp;<span class="ident" id="6413951">hdr</span><span class="op" id="6413954">.</span><span class="ident" id="6413955">Name</span><span class="op" id="6413959">,</span>&nbsp;<span class="ident" id="6413961">have</span><span class="op" id="6413965">,</span>&nbsp;<span class="ident" id="6413967">want</span><span class="op" id="6413971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6413978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6413981">if</span>&nbsp;<span class="ident" id="6413984">nread</span>&nbsp;<span class="op" id="6413990">!=</span>&nbsp;<span class="builtinfunc" id="6413993">len</span><span class="op" id="6413996">(</span><span class="ident" id="6413997">headers</span><span class="op" id="6414004">)</span>&nbsp;<span class="op" id="6414006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414010">t</span><span class="op" id="6414011">.</span><span class="ident" id="6414012">Errorf</span><span class="op" id="6414018">(</span><span class="string" id="6414019">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6414075">,</span>&nbsp;<span class="builtinfunc" id="6414077">len</span><span class="op" id="6414080">(</span><span class="ident" id="6414081">headers</span><span class="op" id="6414088">)</span><span class="op" id="6414089">,</span>&nbsp;<span class="ident" id="6414091">nread</span><span class="op" id="6414096">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414099">}</span><br>
<span class="lineno"></span><span class="op" id="6414101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6414104">func</span>&nbsp;<span class="ident" id="6414109">TestNonSeekable</span><span class="op" id="6414124">(</span><span class="ident" id="6414125">t</span>&nbsp;<span class="op" id="6414127">*</span><span class="ident" id="6414128">testing</span><span class="op" id="6414135">.</span><span class="ident" id="6414136">T</span><span class="op" id="6414137">)</span>&nbsp;<span class="op" id="6414139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414142">test</span>&nbsp;<span class="op" id="6414147">:=</span>&nbsp;<span class="ident" id="6414150">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414162">f</span><span class="op" id="6414163">,</span>&nbsp;<span class="ident" id="6414165">err</span>&nbsp;<span class="op" id="6414169">:=</span>&nbsp;<span class="ident" id="6414172">os</span><span class="op" id="6414174">.</span><span class="ident" id="6414175">Open</span><span class="op" id="6414179">(</span><span class="ident" id="6414180">test</span><span class="op" id="6414184">.</span><span class="ident" id="6414185">file</span><span class="op" id="6414189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414192">if</span>&nbsp;<span class="ident" id="6414195">err</span>&nbsp;<span class="op" id="6414199">!=</span>&nbsp;<span class="builtintype" id="6414202">nil</span>&nbsp;<span class="op" id="6414206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414210">t</span><span class="op" id="6414211">.</span><span class="ident" id="6414212">Fatalf</span><span class="op" id="6414218">(</span><span class="string" id="6414219">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6414241">,</span>&nbsp;<span class="ident" id="6414243">err</span><span class="op" id="6414246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414252">defer</span>&nbsp;<span class="ident" id="6414258">f</span><span class="op" id="6414259">.</span><span class="ident" id="6414260">Close</span><span class="op" id="6414265">(</span><span class="op" id="6414266">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414270">type</span>&nbsp;<span class="ident" id="6414275">readerOnly</span>&nbsp;<span class="keyword" id="6414286">struct</span>&nbsp;<span class="op" id="6414293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414297">io</span><span class="op" id="6414299">.</span><span class="ident" id="6414300">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414311">tr</span>&nbsp;<span class="op" id="6414314">:=</span>&nbsp;<span class="ident" id="6414317">NewReader</span><span class="op" id="6414326">(</span><span class="ident" id="6414327">readerOnly</span><span class="op" id="6414337">{</span><span class="ident" id="6414338">f</span><span class="op" id="6414339">}</span><span class="op" id="6414340">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414343">nread</span>&nbsp;<span class="op" id="6414349">:=</span>&nbsp;<span class="num" id="6414352">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414356">for</span>&nbsp;<span class="op" id="6414360">;</span>&nbsp;<span class="op" id="6414362">;</span>&nbsp;<span class="ident" id="6414364">nread</span><span class="op" id="6414369">++</span>&nbsp;<span class="op" id="6414372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414376">_</span><span class="op" id="6414377">,</span>&nbsp;<span class="ident" id="6414379">err</span>&nbsp;<span class="op" id="6414383">:=</span>&nbsp;<span class="ident" id="6414386">tr</span><span class="op" id="6414388">.</span><span class="ident" id="6414389">Next</span><span class="op" id="6414393">(</span><span class="op" id="6414394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414398">if</span>&nbsp;<span class="ident" id="6414401">err</span>&nbsp;<span class="op" id="6414405">==</span>&nbsp;<span class="ident" id="6414408">io</span><span class="op" id="6414410">.</span><span class="ident" id="6414411">EOF</span>&nbsp;<span class="op" id="6414415">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414420">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414432">if</span>&nbsp;<span class="ident" id="6414435">err</span>&nbsp;<span class="op" id="6414439">!=</span>&nbsp;<span class="builtintype" id="6414442">nil</span>&nbsp;<span class="op" id="6414446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414451">t</span><span class="op" id="6414452">.</span><span class="ident" id="6414453">Fatalf</span><span class="op" id="6414459">(</span><span class="string" id="6414460">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6414482">,</span>&nbsp;<span class="ident" id="6414484">err</span><span class="op" id="6414487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414491">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414498">if</span>&nbsp;<span class="ident" id="6414501">nread</span>&nbsp;<span class="op" id="6414507">!=</span>&nbsp;<span class="builtinfunc" id="6414510">len</span><span class="op" id="6414513">(</span><span class="ident" id="6414514">test</span><span class="op" id="6414518">.</span><span class="ident" id="6414519">headers</span><span class="op" id="6414526">)</span>&nbsp;<span class="op" id="6414528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414532">t</span><span class="op" id="6414533">.</span><span class="ident" id="6414534">Errorf</span><span class="op" id="6414540">(</span><span class="string" id="6414541">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6414597">,</span>&nbsp;<span class="builtinfunc" id="6414599">len</span><span class="op" id="6414602">(</span><span class="ident" id="6414603">test</span><span class="op" id="6414607">.</span><span class="ident" id="6414608">headers</span><span class="op" id="6414615">)</span><span class="op" id="6414616">,</span>&nbsp;<span class="ident" id="6414618">nread</span><span class="op" id="6414623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414626">}</span><br>
<span class="lineno">440</span><span class="op" id="6414628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6414631">func</span>&nbsp;<span class="ident" id="6414636">TestParsePAXHeader</span><span class="op" id="6414654">(</span><span class="ident" id="6414655">t</span>&nbsp;<span class="op" id="6414657">*</span><span class="ident" id="6414658">testing</span><span class="op" id="6414665">.</span><span class="ident" id="6414666">T</span><span class="op" id="6414667">)</span>&nbsp;<span class="op" id="6414669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414672">paxTests</span>&nbsp;<span class="op" id="6414681">:=</span>&nbsp;<span class="op" id="6414684">[</span><span class="op" id="6414685">]</span><span class="op" id="6414686">[</span><span class="num" id="6414687">3</span><span class="op" id="6414688">]</span><span class="builtintype" id="6414689">string</span><span class="op" id="6414695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414699">{</span><span class="string" id="6414700">&#34;a&#34;</span><span class="op" id="6414703">,</span>&nbsp;<span class="string" id="6414705">&#34;a=name&#34;</span><span class="op" id="6414713">,</span>&nbsp;<span class="string" id="6414715">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6414728">}</span><span class="op" id="6414729">,</span>&nbsp;<span class="comment" id="6414731">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414784">{</span><span class="string" id="6414785">&#34;a&#34;</span><span class="op" id="6414788">,</span>&nbsp;<span class="string" id="6414790">&#34;a=name&#34;</span><span class="op" id="6414798">,</span>&nbsp;<span class="string" id="6414800">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6414812">}</span><span class="op" id="6414813">,</span>&nbsp;&nbsp;<span class="comment" id="6414816">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414868">{</span><span class="string" id="6414869">&#34;mtime&#34;</span><span class="op" id="6414876">,</span>&nbsp;<span class="string" id="6414878">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6414906">,</span>&nbsp;<span class="string" id="6414908">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6414941">}</span><span class="op" id="6414942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414945">for</span>&nbsp;<span class="ident" id="6414949">_</span><span class="op" id="6414950">,</span>&nbsp;<span class="ident" id="6414952">test</span>&nbsp;<span class="op" id="6414957">:=</span>&nbsp;<span class="keyword" id="6414960">range</span>&nbsp;<span class="ident" id="6414966">paxTests</span>&nbsp;<span class="op" id="6414975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414979">key</span><span class="op" id="6414982">,</span>&nbsp;<span class="ident" id="6414984">expected</span><span class="op" id="6414992">,</span>&nbsp;<span class="ident" id="6414994">raw</span>&nbsp;<span class="op" id="6414998">:=</span>&nbsp;<span class="ident" id="6415001">test</span><span class="op" id="6415005">[</span><span class="num" id="6415006">0</span><span class="op" id="6415007">]</span><span class="op" id="6415008">,</span>&nbsp;<span class="ident" id="6415010">test</span><span class="op" id="6415014">[</span><span class="num" id="6415015">1</span><span class="op" id="6415016">]</span><span class="op" id="6415017">,</span>&nbsp;<span class="ident" id="6415019">test</span><span class="op" id="6415023">[</span><span class="num" id="6415024">2</span><span class="op" id="6415025">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415029">reader</span>&nbsp;<span class="op" id="6415036">:=</span>&nbsp;<span class="ident" id="6415039">bytes</span><span class="op" id="6415044">.</span><span class="ident" id="6415045">NewReader</span><span class="op" id="6415054">(</span><span class="op" id="6415055">[</span><span class="op" id="6415056">]</span><span class="builtintype" id="6415057">byte</span><span class="op" id="6415061">(</span><span class="ident" id="6415062">raw</span><span class="op" id="6415065">)</span><span class="op" id="6415066">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415070">headers</span><span class="op" id="6415077">,</span>&nbsp;<span class="ident" id="6415079">err</span>&nbsp;<span class="op" id="6415083">:=</span>&nbsp;<span class="ident" id="6415086">parsePAX</span><span class="op" id="6415094">(</span><span class="ident" id="6415095">reader</span><span class="op" id="6415101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415105">if</span>&nbsp;<span class="ident" id="6415108">err</span>&nbsp;<span class="op" id="6415112">!=</span>&nbsp;<span class="builtintype" id="6415115">nil</span>&nbsp;<span class="op" id="6415119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415124">t</span><span class="op" id="6415125">.</span><span class="ident" id="6415126">Errorf</span><span class="op" id="6415132">(</span><span class="string" id="6415133">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6415181">,</span>&nbsp;<span class="ident" id="6415183">err</span><span class="op" id="6415186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415191">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415202">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415206">if</span>&nbsp;<span class="ident" id="6415209">strings</span><span class="op" id="6415216">.</span><span class="ident" id="6415217">EqualFold</span><span class="op" id="6415226">(</span><span class="ident" id="6415227">headers</span><span class="op" id="6415234">[</span><span class="ident" id="6415235">key</span><span class="op" id="6415238">]</span><span class="op" id="6415239">,</span>&nbsp;<span class="ident" id="6415241">expected</span><span class="op" id="6415249">)</span>&nbsp;<span class="op" id="6415251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415256">t</span><span class="op" id="6415257">.</span><span class="ident" id="6415258">Errorf</span><span class="op" id="6415264">(</span><span class="string" id="6415265">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6415317">,</span>&nbsp;<span class="ident" id="6415319">headers</span><span class="op" id="6415326">[</span><span class="ident" id="6415327">key</span><span class="op" id="6415330">]</span><span class="op" id="6415331">,</span>&nbsp;<span class="ident" id="6415333">expected</span><span class="op" id="6415341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415346">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415361">trailer</span>&nbsp;<span class="op" id="6415369">:=</span>&nbsp;<span class="builtinfunc" id="6415372">make</span><span class="op" id="6415376">(</span><span class="op" id="6415377">[</span><span class="op" id="6415378">]</span><span class="builtintype" id="6415379">byte</span><span class="op" id="6415383">,</span>&nbsp;<span class="num" id="6415385">100</span><span class="op" id="6415388">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415392">n</span><span class="op" id="6415393">,</span>&nbsp;<span class="ident" id="6415395">err</span>&nbsp;<span class="op" id="6415399">:=</span>&nbsp;<span class="ident" id="6415402">reader</span><span class="op" id="6415408">.</span><span class="ident" id="6415409">Read</span><span class="op" id="6415413">(</span><span class="ident" id="6415414">trailer</span><span class="op" id="6415421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415425">if</span>&nbsp;<span class="ident" id="6415428">err</span>&nbsp;<span class="op" id="6415432">!=</span>&nbsp;<span class="ident" id="6415435">io</span><span class="op" id="6415437">.</span><span class="ident" id="6415438">EOF</span>&nbsp;<span class="op" id="6415442">||</span>&nbsp;<span class="ident" id="6415445">n</span>&nbsp;<span class="op" id="6415447">!=</span>&nbsp;<span class="num" id="6415450">0</span>&nbsp;<span class="op" id="6415452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415457">t</span><span class="op" id="6415458">.</span><span class="ident" id="6415459">Error</span><span class="op" id="6415464">(</span><span class="string" id="6415465">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6415489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415496">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415499">badHeader</span>&nbsp;<span class="op" id="6415509">:=</span>&nbsp;<span class="ident" id="6415512">bytes</span><span class="op" id="6415517">.</span><span class="ident" id="6415518">NewReader</span><span class="op" id="6415527">(</span><span class="op" id="6415528">[</span><span class="op" id="6415529">]</span><span class="builtintype" id="6415530">byte</span><span class="op" id="6415534">(</span><span class="string" id="6415535">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6415551">)</span><span class="op" id="6415552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415555">if</span>&nbsp;<span class="ident" id="6415558">_</span><span class="op" id="6415559">,</span>&nbsp;<span class="ident" id="6415561">err</span>&nbsp;<span class="op" id="6415565">:=</span>&nbsp;<span class="ident" id="6415568">parsePAX</span><span class="op" id="6415576">(</span><span class="ident" id="6415577">badHeader</span><span class="op" id="6415586">)</span><span class="op" id="6415587">;</span>&nbsp;<span class="ident" id="6415589">err</span>&nbsp;<span class="op" id="6415593">!=</span>&nbsp;<span class="ident" id="6415596">ErrHeader</span>&nbsp;<span class="op" id="6415606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415610">t</span><span class="op" id="6415611">.</span><span class="ident" id="6415612">Fatal</span><span class="op" id="6415617">(</span><span class="string" id="6415618">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6415662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415665">}</span><br>
<span class="lineno"></span><span class="op" id="6415667">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6415670">func</span>&nbsp;<span class="ident" id="6415675">TestParsePAXTime</span><span class="op" id="6415691">(</span><span class="ident" id="6415692">t</span>&nbsp;<span class="op" id="6415694">*</span><span class="ident" id="6415695">testing</span><span class="op" id="6415702">.</span><span class="ident" id="6415703">T</span><span class="op" id="6415704">)</span>&nbsp;<span class="op" id="6415706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415709">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415740">timestamps</span>&nbsp;<span class="op" id="6415751">:=</span>&nbsp;<span class="keyword" id="6415754">map</span><span class="op" id="6415757">[</span><span class="builtintype" id="6415758">string</span><span class="op" id="6415764">]</span><span class="ident" id="6415765">time</span><span class="op" id="6415769">.</span><span class="ident" id="6415770">Time</span><span class="op" id="6415774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6415778">&#34;1350244992.023960108&#34;</span><span class="op" id="6415800">:</span>&nbsp;&nbsp;<span class="ident" id="6415803">time</span><span class="op" id="6415807">.</span><span class="ident" id="6415808">Unix</span><span class="op" id="6415812">(</span><span class="num" id="6415813">1350244992</span><span class="op" id="6415823">,</span>&nbsp;<span class="num" id="6415825">23960108</span><span class="op" id="6415833">)</span><span class="op" id="6415834">,</span>&nbsp;<span class="comment" id="6415836">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6415857">&#34;1350244992.02396010&#34;</span><span class="op" id="6415878">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6415882">time</span><span class="op" id="6415886">.</span><span class="ident" id="6415887">Unix</span><span class="op" id="6415891">(</span><span class="num" id="6415892">1350244992</span><span class="op" id="6415902">,</span>&nbsp;<span class="num" id="6415904">23960100</span><span class="op" id="6415912">)</span><span class="op" id="6415913">,</span>&nbsp;<span class="comment" id="6415915">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6415942">&#34;1350244992.0239601089&#34;</span><span class="op" id="6415965">:</span>&nbsp;<span class="ident" id="6415967">time</span><span class="op" id="6415971">.</span><span class="ident" id="6415972">Unix</span><span class="op" id="6415976">(</span><span class="num" id="6415977">1350244992</span><span class="op" id="6415987">,</span>&nbsp;<span class="num" id="6415989">23960108</span><span class="op" id="6415997">)</span><span class="op" id="6415998">,</span>&nbsp;<span class="comment" id="6416000">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416028">&#34;1350244992&#34;</span><span class="op" id="6416040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416053">time</span><span class="op" id="6416057">.</span><span class="ident" id="6416058">Unix</span><span class="op" id="6416062">(</span><span class="num" id="6416063">1350244992</span><span class="op" id="6416073">,</span>&nbsp;<span class="num" id="6416075">0</span><span class="op" id="6416076">)</span><span class="op" id="6416077">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6416086">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416113">for</span>&nbsp;<span class="ident" id="6416117">input</span><span class="op" id="6416122">,</span>&nbsp;<span class="ident" id="6416124">expected</span>&nbsp;<span class="op" id="6416133">:=</span>&nbsp;<span class="keyword" id="6416136">range</span>&nbsp;<span class="ident" id="6416142">timestamps</span>&nbsp;<span class="op" id="6416153">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416157">ts</span><span class="op" id="6416159">,</span>&nbsp;<span class="ident" id="6416161">err</span>&nbsp;<span class="op" id="6416165">:=</span>&nbsp;<span class="ident" id="6416168">parsePAXTime</span><span class="op" id="6416180">(</span><span class="ident" id="6416181">input</span><span class="op" id="6416186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416190">if</span>&nbsp;<span class="ident" id="6416193">err</span>&nbsp;<span class="op" id="6416197">!=</span>&nbsp;<span class="builtintype" id="6416200">nil</span>&nbsp;<span class="op" id="6416204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416209">t</span><span class="op" id="6416210">.</span><span class="ident" id="6416211">Fatal</span><span class="op" id="6416216">(</span><span class="ident" id="6416217">err</span><span class="op" id="6416220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416228">if</span>&nbsp;<span class="op" id="6416231">!</span><span class="ident" id="6416232">ts</span><span class="op" id="6416234">.</span><span class="ident" id="6416235">Equal</span><span class="op" id="6416240">(</span><span class="ident" id="6416241">expected</span><span class="op" id="6416249">)</span>&nbsp;<span class="op" id="6416251">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416256">t</span><span class="op" id="6416257">.</span><span class="ident" id="6416258">Fatalf</span><span class="op" id="6416264">(</span><span class="string" id="6416265">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6416293">,</span>&nbsp;<span class="ident" id="6416295">ts</span><span class="op" id="6416297">,</span>&nbsp;<span class="ident" id="6416299">expected</span><span class="op" id="6416307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416314">}</span><br>
<span class="lineno"></span><span class="op" id="6416316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6416319">func</span>&nbsp;<span class="ident" id="6416324">TestMergePAX</span><span class="op" id="6416336">(</span><span class="ident" id="6416337">t</span>&nbsp;<span class="op" id="6416339">*</span><span class="ident" id="6416340">testing</span><span class="op" id="6416347">.</span><span class="ident" id="6416348">T</span><span class="op" id="6416349">)</span>&nbsp;<span class="op" id="6416351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416354">hdr</span>&nbsp;<span class="op" id="6416358">:=</span>&nbsp;<span class="builtinfunc" id="6416361">new</span><span class="op" id="6416364">(</span><span class="ident" id="6416365">Header</span><span class="op" id="6416371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6416374">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416424">headers</span>&nbsp;<span class="op" id="6416432">:=</span>&nbsp;<span class="keyword" id="6416435">map</span><span class="op" id="6416438">[</span><span class="builtintype" id="6416439">string</span><span class="op" id="6416445">]</span><span class="builtintype" id="6416446">string</span><span class="op" id="6416452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416456">&#34;path&#34;</span><span class="op" id="6416462">:</span>&nbsp;&nbsp;<span class="string" id="6416465">&#34;a/b/c&#34;</span><span class="op" id="6416472">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416476">&#34;uid&#34;</span><span class="op" id="6416481">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6416485">&#34;1000&#34;</span><span class="op" id="6416491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416495">&#34;mtime&#34;</span><span class="op" id="6416502">:</span>&nbsp;<span class="string" id="6416504">&#34;1350244992.023960108&#34;</span><span class="op" id="6416526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416532">err</span>&nbsp;<span class="op" id="6416536">:=</span>&nbsp;<span class="ident" id="6416539">mergePAX</span><span class="op" id="6416547">(</span><span class="ident" id="6416548">hdr</span><span class="op" id="6416551">,</span>&nbsp;<span class="ident" id="6416553">headers</span><span class="op" id="6416560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416563">if</span>&nbsp;<span class="ident" id="6416566">err</span>&nbsp;<span class="op" id="6416570">!=</span>&nbsp;<span class="builtintype" id="6416573">nil</span>&nbsp;<span class="op" id="6416577">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416581">t</span><span class="op" id="6416582">.</span><span class="ident" id="6416583">Fatal</span><span class="op" id="6416588">(</span><span class="ident" id="6416589">err</span><span class="op" id="6416592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416598">want</span>&nbsp;<span class="op" id="6416603">:=</span>&nbsp;<span class="op" id="6416606">&amp;</span><span class="ident" id="6416607">Header</span><span class="op" id="6416613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416617">Name</span><span class="op" id="6416621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6416626">&#34;a/b/c&#34;</span><span class="op" id="6416633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416637">Uid</span><span class="op" id="6416640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6416646">1000</span><span class="op" id="6416650">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416654">ModTime</span><span class="op" id="6416661">:</span>&nbsp;<span class="ident" id="6416663">time</span><span class="op" id="6416667">.</span><span class="ident" id="6416668">Unix</span><span class="op" id="6416672">(</span><span class="num" id="6416673">1350244992</span><span class="op" id="6416683">,</span>&nbsp;<span class="num" id="6416685">23960108</span><span class="op" id="6416693">)</span><span class="op" id="6416694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416700">if</span>&nbsp;<span class="op" id="6416703">!</span><span class="ident" id="6416704">reflect</span><span class="op" id="6416711">.</span><span class="ident" id="6416712">DeepEqual</span><span class="op" id="6416721">(</span><span class="ident" id="6416722">hdr</span><span class="op" id="6416725">,</span>&nbsp;<span class="ident" id="6416727">want</span><span class="op" id="6416731">)</span>&nbsp;<span class="op" id="6416733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416737">t</span><span class="op" id="6416738">.</span><span class="ident" id="6416739">Errorf</span><span class="op" id="6416745">(</span><span class="string" id="6416746">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6416782">,</span>&nbsp;<span class="ident" id="6416784">hdr</span><span class="op" id="6416787">,</span>&nbsp;<span class="ident" id="6416789">want</span><span class="op" id="6416793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416796">}</span><br>
<span class="lineno">510</span><span class="op" id="6416798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6416801">func</span>&nbsp;<span class="ident" id="6416806">TestSparseEndToEnd</span><span class="op" id="6416824">(</span><span class="ident" id="6416825">t</span>&nbsp;<span class="op" id="6416827">*</span><span class="ident" id="6416828">testing</span><span class="op" id="6416835">.</span><span class="ident" id="6416836">T</span><span class="op" id="6416837">)</span>&nbsp;<span class="op" id="6416839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416842">test</span>&nbsp;<span class="op" id="6416847">:=</span>&nbsp;<span class="ident" id="6416850">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416865">f</span><span class="op" id="6416866">,</span>&nbsp;<span class="ident" id="6416868">err</span>&nbsp;<span class="op" id="6416872">:=</span>&nbsp;<span class="ident" id="6416875">os</span><span class="op" id="6416877">.</span><span class="ident" id="6416878">Open</span><span class="op" id="6416882">(</span><span class="ident" id="6416883">test</span><span class="op" id="6416887">.</span><span class="ident" id="6416888">file</span><span class="op" id="6416892">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416895">if</span>&nbsp;<span class="ident" id="6416898">err</span>&nbsp;<span class="op" id="6416902">!=</span>&nbsp;<span class="builtintype" id="6416905">nil</span>&nbsp;<span class="op" id="6416909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416913">t</span><span class="op" id="6416914">.</span><span class="ident" id="6416915">Fatalf</span><span class="op" id="6416921">(</span><span class="string" id="6416922">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6416944">,</span>&nbsp;<span class="ident" id="6416946">err</span><span class="op" id="6416949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6416952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6416955">defer</span>&nbsp;<span class="ident" id="6416961">f</span><span class="op" id="6416962">.</span><span class="ident" id="6416963">Close</span><span class="op" id="6416968">(</span><span class="op" id="6416969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416973">tr</span>&nbsp;<span class="op" id="6416976">:=</span>&nbsp;<span class="ident" id="6416979">NewReader</span><span class="op" id="6416988">(</span><span class="ident" id="6416989">f</span><span class="op" id="6416990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6416994">headers</span>&nbsp;<span class="op" id="6417002">:=</span>&nbsp;<span class="ident" id="6417005">test</span><span class="op" id="6417009">.</span><span class="ident" id="6417010">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417019">cksums</span>&nbsp;<span class="op" id="6417026">:=</span>&nbsp;<span class="ident" id="6417029">test</span><span class="op" id="6417033">.</span><span class="ident" id="6417034">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417042">nread</span>&nbsp;<span class="op" id="6417048">:=</span>&nbsp;<span class="num" id="6417051">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6417055">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417079">for</span>&nbsp;<span class="op" id="6417083">;</span>&nbsp;<span class="op" id="6417085">;</span>&nbsp;<span class="ident" id="6417087">nread</span><span class="op" id="6417092">++</span>&nbsp;<span class="op" id="6417095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417099">hdr</span><span class="op" id="6417102">,</span>&nbsp;<span class="ident" id="6417104">err</span>&nbsp;<span class="op" id="6417108">:=</span>&nbsp;<span class="ident" id="6417111">tr</span><span class="op" id="6417113">.</span><span class="ident" id="6417114">Next</span><span class="op" id="6417118">(</span><span class="op" id="6417119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417123">if</span>&nbsp;<span class="ident" id="6417126">hdr</span>&nbsp;<span class="op" id="6417130">==</span>&nbsp;<span class="builtintype" id="6417133">nil</span>&nbsp;<span class="op" id="6417137">||</span>&nbsp;<span class="ident" id="6417140">err</span>&nbsp;<span class="op" id="6417144">==</span>&nbsp;<span class="ident" id="6417147">io</span><span class="op" id="6417149">.</span><span class="ident" id="6417150">EOF</span>&nbsp;<span class="op" id="6417154">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417159">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6417172">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417194">if</span>&nbsp;<span class="op" id="6417197">!</span><span class="ident" id="6417198">reflect</span><span class="op" id="6417205">.</span><span class="ident" id="6417206">DeepEqual</span><span class="op" id="6417215">(</span><span class="op" id="6417216">*</span><span class="ident" id="6417217">hdr</span><span class="op" id="6417220">,</span>&nbsp;<span class="op" id="6417222">*</span><span class="ident" id="6417223">headers</span><span class="op" id="6417230">[</span><span class="ident" id="6417231">nread</span><span class="op" id="6417236">]</span><span class="op" id="6417237">)</span>&nbsp;<span class="op" id="6417239">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417244">t</span><span class="op" id="6417245">.</span><span class="ident" id="6417246">Errorf</span><span class="op" id="6417252">(</span><span class="string" id="6417253">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6417292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417298">*</span><span class="ident" id="6417299">hdr</span><span class="op" id="6417302">,</span>&nbsp;<span class="ident" id="6417304">headers</span><span class="op" id="6417311">[</span><span class="ident" id="6417312">nread</span><span class="op" id="6417317">]</span><span class="op" id="6417318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6417327">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417364">h</span>&nbsp;<span class="op" id="6417366">:=</span>&nbsp;<span class="ident" id="6417369">md5</span><span class="op" id="6417372">.</span><span class="ident" id="6417373">New</span><span class="op" id="6417376">(</span><span class="op" id="6417377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417381">_</span><span class="op" id="6417382">,</span>&nbsp;<span class="ident" id="6417384">err</span>&nbsp;<span class="op" id="6417388">=</span>&nbsp;<span class="ident" id="6417390">io</span><span class="op" id="6417392">.</span><span class="ident" id="6417393">Copy</span><span class="op" id="6417397">(</span><span class="ident" id="6417398">h</span><span class="op" id="6417399">,</span>&nbsp;<span class="ident" id="6417401">tr</span><span class="op" id="6417403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417407">if</span>&nbsp;<span class="ident" id="6417410">err</span>&nbsp;<span class="op" id="6417414">!=</span>&nbsp;<span class="builtintype" id="6417417">nil</span>&nbsp;<span class="op" id="6417421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417426">t</span><span class="op" id="6417427">.</span><span class="ident" id="6417428">Fatalf</span><span class="op" id="6417434">(</span><span class="string" id="6417435">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6417457">,</span>&nbsp;<span class="ident" id="6417459">err</span><span class="op" id="6417462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417466">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6417471">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417492">have</span>&nbsp;<span class="op" id="6417497">:=</span>&nbsp;<span class="ident" id="6417500">fmt</span><span class="op" id="6417503">.</span><span class="ident" id="6417504">Sprintf</span><span class="op" id="6417511">(</span><span class="string" id="6417512">&#34;%x&#34;</span><span class="op" id="6417516">,</span>&nbsp;<span class="ident" id="6417518">h</span><span class="op" id="6417519">.</span><span class="ident" id="6417520">Sum</span><span class="op" id="6417523">(</span><span class="builtintype" id="6417524">nil</span><span class="op" id="6417527">)</span><span class="op" id="6417528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417532">want</span>&nbsp;<span class="op" id="6417537">:=</span>&nbsp;<span class="ident" id="6417540">cksums</span><span class="op" id="6417546">[</span><span class="ident" id="6417547">nread</span><span class="op" id="6417552">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417556">if</span>&nbsp;<span class="ident" id="6417559">want</span>&nbsp;<span class="op" id="6417564">!=</span>&nbsp;<span class="ident" id="6417567">have</span>&nbsp;<span class="op" id="6417572">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417577">t</span><span class="op" id="6417578">.</span><span class="ident" id="6417579">Errorf</span><span class="op" id="6417585">(</span><span class="string" id="6417586">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6417632">,</span>&nbsp;<span class="ident" id="6417634">hdr</span><span class="op" id="6417637">.</span><span class="ident" id="6417638">Name</span><span class="op" id="6417642">,</span>&nbsp;<span class="ident" id="6417644">have</span><span class="op" id="6417648">,</span>&nbsp;<span class="ident" id="6417650">want</span><span class="op" id="6417654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6417664">if</span>&nbsp;<span class="ident" id="6417667">nread</span>&nbsp;<span class="op" id="6417673">!=</span>&nbsp;<span class="builtinfunc" id="6417676">len</span><span class="op" id="6417679">(</span><span class="ident" id="6417680">headers</span><span class="op" id="6417687">)</span>&nbsp;<span class="op" id="6417689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417693">t</span><span class="op" id="6417694">.</span><span class="ident" id="6417695">Errorf</span><span class="op" id="6417701">(</span><span class="string" id="6417702">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6417758">,</span>&nbsp;<span class="builtinfunc" id="6417760">len</span><span class="op" id="6417763">(</span><span class="ident" id="6417764">headers</span><span class="op" id="6417771">)</span><span class="op" id="6417772">,</span>&nbsp;<span class="ident" id="6417774">nread</span><span class="op" id="6417779">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417782">}</span><br>
<span class="lineno"></span><span class="op" id="6417784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6417787">type</span>&nbsp;<span class="ident" id="6417792">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6417811">struct</span>&nbsp;<span class="op" id="6417818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417821">sparseData</span>&nbsp;<span class="op" id="6417832">[</span><span class="op" id="6417833">]</span><span class="builtintype" id="6417834">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417840">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6417851">[</span><span class="op" id="6417852">]</span><span class="ident" id="6417853">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417866">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6417877">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417884">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6417895">[</span><span class="op" id="6417896">]</span><span class="builtintype" id="6417897">byte</span><br>
<span class="lineno"></span><span class="op" id="6417902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6417905">var</span>&nbsp;<span class="ident" id="6417909">sparseFileReadTests</span>&nbsp;<span class="op" id="6417929">=</span>&nbsp;<span class="op" id="6417931">[</span><span class="op" id="6417932">]</span><span class="ident" id="6417933">sparseFileReadTest</span><span class="op" id="6417951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6417954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417958">sparseData</span><span class="op" id="6417968">:</span>&nbsp;<span class="op" id="6417970">[</span><span class="op" id="6417971">]</span><span class="builtintype" id="6417972">byte</span><span class="op" id="6417976">(</span><span class="string" id="6417977">&#34;abcde&#34;</span><span class="op" id="6417984">)</span><span class="op" id="6417985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6417989">sparseMap</span><span class="op" id="6417998">:</span>&nbsp;<span class="op" id="6418000">[</span><span class="op" id="6418001">]</span><span class="ident" id="6418002">sparseEntry</span><span class="op" id="6418013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418018">{</span><span class="ident" id="6418019">offset</span><span class="op" id="6418025">:</span>&nbsp;<span class="num" id="6418027">0</span><span class="op" id="6418028">,</span>&nbsp;<span class="ident" id="6418030">numBytes</span><span class="op" id="6418038">:</span>&nbsp;<span class="num" id="6418040">2</span><span class="op" id="6418041">}</span><span class="op" id="6418042">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418047">{</span><span class="ident" id="6418048">offset</span><span class="op" id="6418054">:</span>&nbsp;<span class="num" id="6418056">5</span><span class="op" id="6418057">,</span>&nbsp;<span class="ident" id="6418059">numBytes</span><span class="op" id="6418067">:</span>&nbsp;<span class="num" id="6418069">3</span><span class="op" id="6418070">}</span><span class="op" id="6418071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418075">}</span><span class="op" id="6418076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418080">realSize</span><span class="op" id="6418088">:</span>&nbsp;<span class="num" id="6418090">8</span><span class="op" id="6418091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418095">expected</span><span class="op" id="6418103">:</span>&nbsp;<span class="op" id="6418105">[</span><span class="op" id="6418106">]</span><span class="builtintype" id="6418107">byte</span><span class="op" id="6418111">(</span><span class="string" id="6418112">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6418131">)</span><span class="op" id="6418132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418135">}</span><span class="op" id="6418136">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418143">sparseData</span><span class="op" id="6418153">:</span>&nbsp;<span class="op" id="6418155">[</span><span class="op" id="6418156">]</span><span class="builtintype" id="6418157">byte</span><span class="op" id="6418161">(</span><span class="string" id="6418162">&#34;abcde&#34;</span><span class="op" id="6418169">)</span><span class="op" id="6418170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418174">sparseMap</span><span class="op" id="6418183">:</span>&nbsp;<span class="op" id="6418185">[</span><span class="op" id="6418186">]</span><span class="ident" id="6418187">sparseEntry</span><span class="op" id="6418198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418203">{</span><span class="ident" id="6418204">offset</span><span class="op" id="6418210">:</span>&nbsp;<span class="num" id="6418212">0</span><span class="op" id="6418213">,</span>&nbsp;<span class="ident" id="6418215">numBytes</span><span class="op" id="6418223">:</span>&nbsp;<span class="num" id="6418225">2</span><span class="op" id="6418226">}</span><span class="op" id="6418227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418232">{</span><span class="ident" id="6418233">offset</span><span class="op" id="6418239">:</span>&nbsp;<span class="num" id="6418241">5</span><span class="op" id="6418242">,</span>&nbsp;<span class="ident" id="6418244">numBytes</span><span class="op" id="6418252">:</span>&nbsp;<span class="num" id="6418254">3</span><span class="op" id="6418255">}</span><span class="op" id="6418256">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418260">}</span><span class="op" id="6418261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418265">realSize</span><span class="op" id="6418273">:</span>&nbsp;<span class="num" id="6418275">10</span><span class="op" id="6418277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418281">expected</span><span class="op" id="6418289">:</span>&nbsp;<span class="op" id="6418291">[</span><span class="op" id="6418292">]</span><span class="builtintype" id="6418293">byte</span><span class="op" id="6418297">(</span><span class="string" id="6418298">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6418325">)</span><span class="op" id="6418326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418329">}</span><span class="op" id="6418330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418333">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418337">sparseData</span><span class="op" id="6418347">:</span>&nbsp;<span class="op" id="6418349">[</span><span class="op" id="6418350">]</span><span class="builtintype" id="6418351">byte</span><span class="op" id="6418355">(</span><span class="string" id="6418356">&#34;abcde&#34;</span><span class="op" id="6418363">)</span><span class="op" id="6418364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418368">sparseMap</span><span class="op" id="6418377">:</span>&nbsp;<span class="op" id="6418379">[</span><span class="op" id="6418380">]</span><span class="ident" id="6418381">sparseEntry</span><span class="op" id="6418392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418397">{</span><span class="ident" id="6418398">offset</span><span class="op" id="6418404">:</span>&nbsp;<span class="num" id="6418406">1</span><span class="op" id="6418407">,</span>&nbsp;<span class="ident" id="6418409">numBytes</span><span class="op" id="6418417">:</span>&nbsp;<span class="num" id="6418419">3</span><span class="op" id="6418420">}</span><span class="op" id="6418421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418426">{</span><span class="ident" id="6418427">offset</span><span class="op" id="6418433">:</span>&nbsp;<span class="num" id="6418435">6</span><span class="op" id="6418436">,</span>&nbsp;<span class="ident" id="6418438">numBytes</span><span class="op" id="6418446">:</span>&nbsp;<span class="num" id="6418448">2</span><span class="op" id="6418449">}</span><span class="op" id="6418450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418454">}</span><span class="op" id="6418455">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418459">realSize</span><span class="op" id="6418467">:</span>&nbsp;<span class="num" id="6418469">8</span><span class="op" id="6418470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418474">expected</span><span class="op" id="6418482">:</span>&nbsp;<span class="op" id="6418484">[</span><span class="op" id="6418485">]</span><span class="builtintype" id="6418486">byte</span><span class="op" id="6418490">(</span><span class="string" id="6418491">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6418510">)</span><span class="op" id="6418511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418514">}</span><span class="op" id="6418515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418522">sparseData</span><span class="op" id="6418532">:</span>&nbsp;<span class="op" id="6418534">[</span><span class="op" id="6418535">]</span><span class="builtintype" id="6418536">byte</span><span class="op" id="6418540">(</span><span class="string" id="6418541">&#34;abcde&#34;</span><span class="op" id="6418548">)</span><span class="op" id="6418549">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418553">sparseMap</span><span class="op" id="6418562">:</span>&nbsp;<span class="op" id="6418564">[</span><span class="op" id="6418565">]</span><span class="ident" id="6418566">sparseEntry</span><span class="op" id="6418577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418582">{</span><span class="ident" id="6418583">offset</span><span class="op" id="6418589">:</span>&nbsp;<span class="num" id="6418591">1</span><span class="op" id="6418592">,</span>&nbsp;<span class="ident" id="6418594">numBytes</span><span class="op" id="6418602">:</span>&nbsp;<span class="num" id="6418604">3</span><span class="op" id="6418605">}</span><span class="op" id="6418606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418611">{</span><span class="ident" id="6418612">offset</span><span class="op" id="6418618">:</span>&nbsp;<span class="num" id="6418620">6</span><span class="op" id="6418621">,</span>&nbsp;<span class="ident" id="6418623">numBytes</span><span class="op" id="6418631">:</span>&nbsp;<span class="num" id="6418633">2</span><span class="op" id="6418634">}</span><span class="op" id="6418635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418639">}</span><span class="op" id="6418640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418644">realSize</span><span class="op" id="6418652">:</span>&nbsp;<span class="num" id="6418654">10</span><span class="op" id="6418656">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418660">expected</span><span class="op" id="6418668">:</span>&nbsp;<span class="op" id="6418670">[</span><span class="op" id="6418671">]</span><span class="builtintype" id="6418672">byte</span><span class="op" id="6418676">(</span><span class="string" id="6418677">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6418704">)</span><span class="op" id="6418705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418708">}</span><span class="op" id="6418709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418716">sparseData</span><span class="op" id="6418726">:</span>&nbsp;<span class="op" id="6418728">[</span><span class="op" id="6418729">]</span><span class="builtintype" id="6418730">byte</span><span class="op" id="6418734">(</span><span class="string" id="6418735">&#34;&#34;</span><span class="op" id="6418737">)</span><span class="op" id="6418738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418742">sparseMap</span><span class="op" id="6418751">:</span>&nbsp;&nbsp;<span class="builtintype" id="6418754">nil</span><span class="op" id="6418757">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418761">realSize</span><span class="op" id="6418769">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6418773">2</span><span class="op" id="6418774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418778">expected</span><span class="op" id="6418786">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6418790">[</span><span class="op" id="6418791">]</span><span class="builtintype" id="6418792">byte</span><span class="op" id="6418796">(</span><span class="string" id="6418797">&#34;\x00\x00&#34;</span><span class="op" id="6418807">)</span><span class="op" id="6418808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6418811">}</span><span class="op" id="6418812">,</span><br>
<span class="lineno"></span><span class="op" id="6418814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6418817">func</span>&nbsp;<span class="ident" id="6418822">TestSparseFileReader</span><span class="op" id="6418842">(</span><span class="ident" id="6418843">t</span>&nbsp;<span class="op" id="6418845">*</span><span class="ident" id="6418846">testing</span><span class="op" id="6418853">.</span><span class="ident" id="6418854">T</span><span class="op" id="6418855">)</span>&nbsp;<span class="op" id="6418857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6418860">for</span>&nbsp;<span class="ident" id="6418864">i</span><span class="op" id="6418865">,</span>&nbsp;<span class="ident" id="6418867">test</span>&nbsp;<span class="op" id="6418872">:=</span>&nbsp;<span class="keyword" id="6418875">range</span>&nbsp;<span class="ident" id="6418881">sparseFileReadTests</span>&nbsp;<span class="op" id="6418901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418905">r</span>&nbsp;<span class="op" id="6418907">:=</span>&nbsp;<span class="ident" id="6418910">bytes</span><span class="op" id="6418915">.</span><span class="ident" id="6418916">NewReader</span><span class="op" id="6418925">(</span><span class="ident" id="6418926">test</span><span class="op" id="6418930">.</span><span class="ident" id="6418931">sparseData</span><span class="op" id="6418941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418945">nb</span>&nbsp;<span class="op" id="6418948">:=</span>&nbsp;<span class="ident" id="6418951">int64</span><span class="op" id="6418956">(</span><span class="ident" id="6418957">r</span><span class="op" id="6418958">.</span><span class="ident" id="6418959">Len</span><span class="op" id="6418962">(</span><span class="op" id="6418963">)</span><span class="op" id="6418964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418968">sfr</span>&nbsp;<span class="op" id="6418972">:=</span>&nbsp;<span class="op" id="6418975">&amp;</span><span class="ident" id="6418976">sparseFileReader</span><span class="op" id="6418992">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6418997">rfr</span><span class="op" id="6419000">:</span>&nbsp;<span class="op" id="6419002">&amp;</span><span class="ident" id="6419003">regFileReader</span><span class="op" id="6419016">{</span><span class="ident" id="6419017">r</span><span class="op" id="6419018">:</span>&nbsp;<span class="ident" id="6419020">r</span><span class="op" id="6419021">,</span>&nbsp;<span class="ident" id="6419023">nb</span><span class="op" id="6419025">:</span>&nbsp;<span class="ident" id="6419027">nb</span><span class="op" id="6419029">}</span><span class="op" id="6419030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419035">sp</span><span class="op" id="6419037">:</span>&nbsp;&nbsp;<span class="ident" id="6419040">test</span><span class="op" id="6419044">.</span><span class="ident" id="6419045">sparseMap</span><span class="op" id="6419054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419059">pos</span><span class="op" id="6419062">:</span>&nbsp;<span class="num" id="6419064">0</span><span class="op" id="6419065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419070">tot</span><span class="op" id="6419073">:</span>&nbsp;<span class="ident" id="6419075">test</span><span class="op" id="6419079">.</span><span class="ident" id="6419080">realSize</span><span class="op" id="6419088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419092">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419096">if</span>&nbsp;<span class="ident" id="6419099">sfr</span><span class="op" id="6419102">.</span><span class="ident" id="6419103">numBytes</span><span class="op" id="6419111">(</span><span class="op" id="6419112">)</span>&nbsp;<span class="op" id="6419114">!=</span>&nbsp;<span class="ident" id="6419117">nb</span>&nbsp;<span class="op" id="6419120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419125">t</span><span class="op" id="6419126">.</span><span class="ident" id="6419127">Errorf</span><span class="op" id="6419133">(</span><span class="string" id="6419134">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6419189">,</span>&nbsp;<span class="ident" id="6419191">i</span><span class="op" id="6419192">,</span>&nbsp;<span class="ident" id="6419194">sfr</span><span class="op" id="6419197">.</span><span class="ident" id="6419198">numBytes</span><span class="op" id="6419206">(</span><span class="op" id="6419207">)</span><span class="op" id="6419208">,</span>&nbsp;<span class="ident" id="6419210">nb</span><span class="op" id="6419212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419220">buf</span><span class="op" id="6419223">,</span>&nbsp;<span class="ident" id="6419225">err</span>&nbsp;<span class="op" id="6419229">:=</span>&nbsp;<span class="ident" id="6419232">ioutil</span><span class="op" id="6419238">.</span><span class="ident" id="6419239">ReadAll</span><span class="op" id="6419246">(</span><span class="ident" id="6419247">sfr</span><span class="op" id="6419250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419254">if</span>&nbsp;<span class="ident" id="6419257">err</span>&nbsp;<span class="op" id="6419261">!=</span>&nbsp;<span class="builtintype" id="6419264">nil</span>&nbsp;<span class="op" id="6419268">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419273">t</span><span class="op" id="6419274">.</span><span class="ident" id="6419275">Errorf</span><span class="op" id="6419281">(</span><span class="string" id="6419282">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6419313">,</span>&nbsp;<span class="ident" id="6419315">i</span><span class="op" id="6419316">,</span>&nbsp;<span class="ident" id="6419318">err</span><span class="op" id="6419321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419329">if</span>&nbsp;<span class="ident" id="6419332">e</span>&nbsp;<span class="op" id="6419334">:=</span>&nbsp;<span class="ident" id="6419337">test</span><span class="op" id="6419341">.</span><span class="ident" id="6419342">expected</span><span class="op" id="6419350">;</span>&nbsp;<span class="op" id="6419352">!</span><span class="ident" id="6419353">bytes</span><span class="op" id="6419358">.</span><span class="ident" id="6419359">Equal</span><span class="op" id="6419364">(</span><span class="ident" id="6419365">buf</span><span class="op" id="6419368">,</span>&nbsp;<span class="ident" id="6419370">e</span><span class="op" id="6419371">)</span>&nbsp;<span class="op" id="6419373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419378">t</span><span class="op" id="6419379">.</span><span class="ident" id="6419380">Errorf</span><span class="op" id="6419386">(</span><span class="string" id="6419387">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6419420">,</span>&nbsp;<span class="ident" id="6419422">i</span><span class="op" id="6419423">,</span>&nbsp;<span class="ident" id="6419425">buf</span><span class="op" id="6419428">,</span>&nbsp;<span class="ident" id="6419430">e</span><span class="op" id="6419431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419435">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6419439">if</span>&nbsp;<span class="ident" id="6419442">sfr</span><span class="op" id="6419445">.</span><span class="ident" id="6419446">numBytes</span><span class="op" id="6419454">(</span><span class="op" id="6419455">)</span>&nbsp;<span class="op" id="6419457">!=</span>&nbsp;<span class="num" id="6419460">0</span>&nbsp;<span class="op" id="6419462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419467">t</span><span class="op" id="6419468">.</span><span class="ident" id="6419469">Errorf</span><span class="op" id="6419475">(</span><span class="string" id="6419476">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6419536">,</span>&nbsp;<span class="ident" id="6419538">i</span><span class="op" id="6419539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419546">}</span><br>
<span class="lineno"></span><span class="op" id="6419548">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6419551">func</span>&nbsp;<span class="ident" id="6419556">TestSparseIncrementalRead</span><span class="op" id="6419581">(</span><span class="ident" id="6419582">t</span>&nbsp;<span class="op" id="6419584">*</span><span class="ident" id="6419585">testing</span><span class="op" id="6419592">.</span><span class="ident" id="6419593">T</span><span class="op" id="6419594">)</span>&nbsp;<span class="op" id="6419596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419599">sparseMap</span>&nbsp;<span class="op" id="6419609">:=</span>&nbsp;<span class="op" id="6419612">[</span><span class="op" id="6419613">]</span><span class="ident" id="6419614">sparseEntry</span><span class="op" id="6419625">{</span><span class="op" id="6419626">{</span><span class="num" id="6419627">10</span><span class="op" id="6419629">,</span>&nbsp;<span class="num" id="6419631">2</span><span class="op" id="6419632">}</span><span class="op" id="6419633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419636">sparseData</span>&nbsp;<span class="op" id="6419647">:=</span>&nbsp;<span class="op" id="6419650">[</span><span class="op" id="6419651">]</span><span class="builtintype" id="6419652">byte</span><span class="op" id="6419656">(</span><span class="string" id="6419657">&#34;Go&#34;</span><span class="op" id="6419661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419664">expected</span>&nbsp;<span class="op" id="6419673">:=</span>&nbsp;<span class="string" id="6419676">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419755">r</span>&nbsp;<span class="op" id="6419757">:=</span>&nbsp;<span class="ident" id="6419760">bytes</span><span class="op" id="6419765">.</span><span class="ident" id="6419766">NewReader</span><span class="op" id="6419775">(</span><span class="ident" id="6419776">sparseData</span><span class="op" id="6419786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419789">nb</span>&nbsp;<span class="op" id="6419792">:=</span>&nbsp;<span class="ident" id="6419795">int64</span><span class="op" id="6419800">(</span><span class="ident" id="6419801">r</span><span class="op" id="6419802">.</span><span class="ident" id="6419803">Len</span><span class="op" id="6419806">(</span><span class="op" id="6419807">)</span><span class="op" id="6419808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419811">sfr</span>&nbsp;<span class="op" id="6419815">:=</span>&nbsp;<span class="op" id="6419818">&amp;</span><span class="ident" id="6419819">sparseFileReader</span><span class="op" id="6419835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419839">rfr</span><span class="op" id="6419842">:</span>&nbsp;<span class="op" id="6419844">&amp;</span><span class="ident" id="6419845">regFileReader</span><span class="op" id="6419858">{</span><span class="ident" id="6419859">r</span><span class="op" id="6419860">:</span>&nbsp;<span class="ident" id="6419862">r</span><span class="op" id="6419863">,</span>&nbsp;<span class="ident" id="6419865">nb</span><span class="op" id="6419867">:</span>&nbsp;<span class="ident" id="6419869">nb</span><span class="op" id="6419871">}</span><span class="op" id="6419872">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419876">sp</span><span class="op" id="6419878">:</span>&nbsp;&nbsp;<span class="ident" id="6419881">sparseMap</span><span class="op" id="6419890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419894">pos</span><span class="op" id="6419897">:</span>&nbsp;<span class="num" id="6419899">0</span><span class="op" id="6419900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6419904">tot</span><span class="op" id="6419907">:</span>&nbsp;<span class="ident" id="6419909">int64</span><span class="op" id="6419914">(</span><span class="builtinfunc" id="6419915">len</span><span class="op" id="6419918">(</span><span class="ident" id="6419919">expected</span><span class="op" id="6419927">)</span><span class="op" id="6419928">)</span><span class="op" id="6419929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6419932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6419936">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6420005">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420053">var</span>&nbsp;<span class="ident" id="6420057">outputBuf</span>&nbsp;<span class="ident" id="6420067">bytes</span><span class="op" id="6420072">.</span><span class="ident" id="6420073">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420081">buf</span>&nbsp;<span class="op" id="6420085">:=</span>&nbsp;<span class="builtinfunc" id="6420088">make</span><span class="op" id="6420092">(</span><span class="op" id="6420093">[</span><span class="op" id="6420094">]</span><span class="builtintype" id="6420095">byte</span><span class="op" id="6420099">,</span>&nbsp;<span class="num" id="6420101">6</span><span class="op" id="6420102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420105">for</span>&nbsp;<span class="op" id="6420109">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420113">n</span><span class="op" id="6420114">,</span>&nbsp;<span class="ident" id="6420116">err</span>&nbsp;<span class="op" id="6420120">:=</span>&nbsp;<span class="ident" id="6420123">sfr</span><span class="op" id="6420126">.</span><span class="ident" id="6420127">Read</span><span class="op" id="6420131">(</span><span class="ident" id="6420132">buf</span><span class="op" id="6420135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420139">if</span>&nbsp;<span class="ident" id="6420142">err</span>&nbsp;<span class="op" id="6420146">==</span>&nbsp;<span class="ident" id="6420149">io</span><span class="op" id="6420151">.</span><span class="ident" id="6420152">EOF</span>&nbsp;<span class="op" id="6420156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420161">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420173">if</span>&nbsp;<span class="ident" id="6420176">err</span>&nbsp;<span class="op" id="6420180">!=</span>&nbsp;<span class="builtintype" id="6420183">nil</span>&nbsp;<span class="op" id="6420187">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420192">t</span><span class="op" id="6420193">.</span><span class="ident" id="6420194">Errorf</span><span class="op" id="6420200">(</span><span class="string" id="6420201">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6420230">,</span>&nbsp;<span class="ident" id="6420232">err</span><span class="op" id="6420235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420243">if</span>&nbsp;<span class="ident" id="6420246">n</span>&nbsp;<span class="op" id="6420248">&gt;</span>&nbsp;<span class="num" id="6420250">0</span>&nbsp;<span class="op" id="6420252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420257">_</span><span class="op" id="6420258">,</span>&nbsp;<span class="ident" id="6420260">err</span>&nbsp;<span class="op" id="6420264">:=</span>&nbsp;<span class="ident" id="6420267">outputBuf</span><span class="op" id="6420276">.</span><span class="ident" id="6420277">Write</span><span class="op" id="6420282">(</span><span class="ident" id="6420283">buf</span><span class="op" id="6420286">[</span><span class="op" id="6420287">:</span><span class="ident" id="6420288">n</span><span class="op" id="6420289">]</span><span class="op" id="6420290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420295">if</span>&nbsp;<span class="ident" id="6420298">err</span>&nbsp;<span class="op" id="6420302">!=</span>&nbsp;<span class="builtintype" id="6420305">nil</span>&nbsp;<span class="op" id="6420309">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420315">t</span><span class="op" id="6420316">.</span><span class="ident" id="6420317">Errorf</span><span class="op" id="6420323">(</span><span class="string" id="6420324">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6420354">,</span>&nbsp;<span class="ident" id="6420356">err</span><span class="op" id="6420359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420374">got</span>&nbsp;<span class="op" id="6420378">:=</span>&nbsp;<span class="ident" id="6420381">outputBuf</span><span class="op" id="6420390">.</span><span class="ident" id="6420391">String</span><span class="op" id="6420397">(</span><span class="op" id="6420398">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420401">if</span>&nbsp;<span class="ident" id="6420404">got</span>&nbsp;<span class="op" id="6420408">!=</span>&nbsp;<span class="ident" id="6420411">expected</span>&nbsp;<span class="op" id="6420420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420424">t</span><span class="op" id="6420425">.</span><span class="ident" id="6420426">Errorf</span><span class="op" id="6420432">(</span><span class="string" id="6420433">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6420457">,</span>&nbsp;<span class="ident" id="6420459">got</span><span class="op" id="6420462">,</span>&nbsp;<span class="ident" id="6420464">expected</span><span class="op" id="6420472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420475">}</span><br>
<span class="lineno"></span><span class="op" id="6420477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6420480">func</span>&nbsp;<span class="ident" id="6420485">TestReadGNUSparseMap0x1</span><span class="op" id="6420508">(</span><span class="ident" id="6420509">t</span>&nbsp;<span class="op" id="6420511">*</span><span class="ident" id="6420512">testing</span><span class="op" id="6420519">.</span><span class="ident" id="6420520">T</span><span class="op" id="6420521">)</span>&nbsp;<span class="op" id="6420523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420526">headers</span>&nbsp;<span class="op" id="6420534">:=</span>&nbsp;<span class="keyword" id="6420537">map</span><span class="op" id="6420540">[</span><span class="builtintype" id="6420541">string</span><span class="op" id="6420547">]</span><span class="builtintype" id="6420548">string</span><span class="op" id="6420554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420558">paxGNUSparseNumBlocks</span><span class="op" id="6420579">:</span>&nbsp;<span class="string" id="6420581">&#34;4&#34;</span><span class="op" id="6420584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420588">paxGNUSparseMap</span><span class="op" id="6420603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6420611">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6420631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420634">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420637">expected</span>&nbsp;<span class="op" id="6420646">:=</span>&nbsp;<span class="op" id="6420649">[</span><span class="op" id="6420650">]</span><span class="ident" id="6420651">sparseEntry</span><span class="op" id="6420662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420666">{</span><span class="ident" id="6420667">offset</span><span class="op" id="6420673">:</span>&nbsp;<span class="num" id="6420675">0</span><span class="op" id="6420676">,</span>&nbsp;<span class="ident" id="6420678">numBytes</span><span class="op" id="6420686">:</span>&nbsp;<span class="num" id="6420688">5</span><span class="op" id="6420689">}</span><span class="op" id="6420690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420694">{</span><span class="ident" id="6420695">offset</span><span class="op" id="6420701">:</span>&nbsp;<span class="num" id="6420703">10</span><span class="op" id="6420705">,</span>&nbsp;<span class="ident" id="6420707">numBytes</span><span class="op" id="6420715">:</span>&nbsp;<span class="num" id="6420717">5</span><span class="op" id="6420718">}</span><span class="op" id="6420719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420723">{</span><span class="ident" id="6420724">offset</span><span class="op" id="6420730">:</span>&nbsp;<span class="num" id="6420732">20</span><span class="op" id="6420734">,</span>&nbsp;<span class="ident" id="6420736">numBytes</span><span class="op" id="6420744">:</span>&nbsp;<span class="num" id="6420746">5</span><span class="op" id="6420747">}</span><span class="op" id="6420748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420752">{</span><span class="ident" id="6420753">offset</span><span class="op" id="6420759">:</span>&nbsp;<span class="num" id="6420761">30</span><span class="op" id="6420763">,</span>&nbsp;<span class="ident" id="6420765">numBytes</span><span class="op" id="6420773">:</span>&nbsp;<span class="num" id="6420775">5</span><span class="op" id="6420776">}</span><span class="op" id="6420777">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420784">sp</span><span class="op" id="6420786">,</span>&nbsp;<span class="ident" id="6420788">err</span>&nbsp;<span class="op" id="6420792">:=</span>&nbsp;<span class="ident" id="6420795">readGNUSparseMap0x1</span><span class="op" id="6420814">(</span><span class="ident" id="6420815">headers</span><span class="op" id="6420822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420825">if</span>&nbsp;<span class="ident" id="6420828">err</span>&nbsp;<span class="op" id="6420832">!=</span>&nbsp;<span class="builtintype" id="6420835">nil</span>&nbsp;<span class="op" id="6420839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420843">t</span><span class="op" id="6420844">.</span><span class="ident" id="6420845">Errorf</span><span class="op" id="6420851">(</span><span class="string" id="6420852">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6420874">,</span>&nbsp;<span class="ident" id="6420876">err</span><span class="op" id="6420879">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6420885">if</span>&nbsp;<span class="op" id="6420888">!</span><span class="ident" id="6420889">reflect</span><span class="op" id="6420896">.</span><span class="ident" id="6420897">DeepEqual</span><span class="op" id="6420906">(</span><span class="ident" id="6420907">sp</span><span class="op" id="6420909">,</span>&nbsp;<span class="ident" id="6420911">expected</span><span class="op" id="6420919">)</span>&nbsp;<span class="op" id="6420921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6420925">t</span><span class="op" id="6420926">.</span><span class="ident" id="6420927">Errorf</span><span class="op" id="6420933">(</span><span class="string" id="6420934">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6420975">,</span>&nbsp;<span class="ident" id="6420977">sp</span><span class="op" id="6420979">,</span>&nbsp;<span class="ident" id="6420981">expected</span><span class="op" id="6420989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6420992">}</span><br>
<span class="lineno"></span><span class="op" id="6420994">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6420997">func</span>&nbsp;<span class="ident" id="6421002">TestReadGNUSparseMap1x0</span><span class="op" id="6421025">(</span><span class="ident" id="6421026">t</span>&nbsp;<span class="op" id="6421028">*</span><span class="ident" id="6421029">testing</span><span class="op" id="6421036">.</span><span class="ident" id="6421037">T</span><span class="op" id="6421038">)</span>&nbsp;<span class="op" id="6421040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6421043">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421127">numEntries</span>&nbsp;<span class="op" id="6421138">:=</span>&nbsp;<span class="num" id="6421141">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421146">expected</span>&nbsp;<span class="op" id="6421155">:=</span>&nbsp;<span class="builtinfunc" id="6421158">make</span><span class="op" id="6421162">(</span><span class="op" id="6421163">[</span><span class="op" id="6421164">]</span><span class="ident" id="6421165">sparseEntry</span><span class="op" id="6421176">,</span>&nbsp;<span class="num" id="6421178">0</span><span class="op" id="6421179">,</span>&nbsp;<span class="ident" id="6421181">numEntries</span><span class="op" id="6421191">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421194">sparseMap</span>&nbsp;<span class="op" id="6421204">:=</span>&nbsp;<span class="builtinfunc" id="6421207">new</span><span class="op" id="6421210">(</span><span class="ident" id="6421211">bytes</span><span class="op" id="6421216">.</span><span class="ident" id="6421217">Buffer</span><span class="op" id="6421223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421227">fmt</span><span class="op" id="6421230">.</span><span class="ident" id="6421231">Fprintf</span><span class="op" id="6421238">(</span><span class="ident" id="6421239">sparseMap</span><span class="op" id="6421248">,</span>&nbsp;<span class="string" id="6421250">&#34;%d\n&#34;</span><span class="op" id="6421256">,</span>&nbsp;<span class="ident" id="6421258">numEntries</span><span class="op" id="6421268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6421271">for</span>&nbsp;<span class="ident" id="6421275">i</span>&nbsp;<span class="op" id="6421277">:=</span>&nbsp;<span class="num" id="6421280">0</span><span class="op" id="6421281">;</span>&nbsp;<span class="ident" id="6421283">i</span>&nbsp;<span class="op" id="6421285">&lt;</span>&nbsp;<span class="ident" id="6421287">numEntries</span><span class="op" id="6421297">;</span>&nbsp;<span class="ident" id="6421299">i</span><span class="op" id="6421300">++</span>&nbsp;<span class="op" id="6421303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421307">offset</span>&nbsp;<span class="op" id="6421314">:=</span>&nbsp;<span class="ident" id="6421317">int64</span><span class="op" id="6421322">(</span><span class="num" id="6421323">2048</span>&nbsp;<span class="op" id="6421328">*</span>&nbsp;<span class="ident" id="6421330">i</span><span class="op" id="6421331">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421335">numBytes</span>&nbsp;<span class="op" id="6421344">:=</span>&nbsp;<span class="ident" id="6421347">int64</span><span class="op" id="6421352">(</span><span class="num" id="6421353">1024</span><span class="op" id="6421357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421361">expected</span>&nbsp;<span class="op" id="6421370">=</span>&nbsp;<span class="builtinfunc" id="6421372">append</span><span class="op" id="6421378">(</span><span class="ident" id="6421379">expected</span><span class="op" id="6421387">,</span>&nbsp;<span class="ident" id="6421389">sparseEntry</span><span class="op" id="6421400">{</span><span class="ident" id="6421401">offset</span><span class="op" id="6421407">:</span>&nbsp;<span class="ident" id="6421409">offset</span><span class="op" id="6421415">,</span>&nbsp;<span class="ident" id="6421417">numBytes</span><span class="op" id="6421425">:</span>&nbsp;<span class="ident" id="6421427">numBytes</span><span class="op" id="6421435">}</span><span class="op" id="6421436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421440">fmt</span><span class="op" id="6421443">.</span><span class="ident" id="6421444">Fprintf</span><span class="op" id="6421451">(</span><span class="ident" id="6421452">sparseMap</span><span class="op" id="6421461">,</span>&nbsp;<span class="string" id="6421463">&#34;%d\n%d\n&#34;</span><span class="op" id="6421473">,</span>&nbsp;<span class="ident" id="6421475">offset</span><span class="op" id="6421481">,</span>&nbsp;<span class="ident" id="6421483">numBytes</span><span class="op" id="6421491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6421494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6421498">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421577">headerBlocks</span>&nbsp;<span class="op" id="6421590">:=</span>&nbsp;<span class="op" id="6421593">(</span><span class="ident" id="6421594">sparseMap</span><span class="op" id="6421603">.</span><span class="ident" id="6421604">Len</span><span class="op" id="6421607">(</span><span class="op" id="6421608">)</span>&nbsp;<span class="op" id="6421610">+</span>&nbsp;<span class="ident" id="6421612">blockSize</span>&nbsp;<span class="op" id="6421622">-</span>&nbsp;<span class="num" id="6421624">1</span><span class="op" id="6421625">)</span>&nbsp;<span class="op" id="6421627">/</span>&nbsp;<span class="ident" id="6421629">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421640">bufLen</span>&nbsp;<span class="op" id="6421647">:=</span>&nbsp;<span class="ident" id="6421650">blockSize</span>&nbsp;<span class="op" id="6421660">*</span>&nbsp;<span class="ident" id="6421662">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421676">buf</span>&nbsp;<span class="op" id="6421680">:=</span>&nbsp;<span class="builtinfunc" id="6421683">make</span><span class="op" id="6421687">(</span><span class="op" id="6421688">[</span><span class="op" id="6421689">]</span><span class="builtintype" id="6421690">byte</span><span class="op" id="6421694">,</span>&nbsp;<span class="ident" id="6421696">bufLen</span><span class="op" id="6421702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6421705">copy</span><span class="op" id="6421709">(</span><span class="ident" id="6421710">buf</span><span class="op" id="6421713">,</span>&nbsp;<span class="ident" id="6421715">sparseMap</span><span class="op" id="6421724">.</span><span class="ident" id="6421725">Bytes</span><span class="op" id="6421730">(</span><span class="op" id="6421731">)</span><span class="op" id="6421732">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6421736">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421777">r</span>&nbsp;<span class="op" id="6421779">:=</span>&nbsp;<span class="ident" id="6421782">bytes</span><span class="op" id="6421787">.</span><span class="ident" id="6421788">NewReader</span><span class="op" id="6421797">(</span><span class="ident" id="6421798">buf</span><span class="op" id="6421801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6421805">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421829">sp</span><span class="op" id="6421831">,</span>&nbsp;<span class="ident" id="6421833">err</span>&nbsp;<span class="op" id="6421837">:=</span>&nbsp;<span class="ident" id="6421840">readGNUSparseMap1x0</span><span class="op" id="6421859">(</span><span class="ident" id="6421860">r</span><span class="op" id="6421861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6421864">if</span>&nbsp;<span class="ident" id="6421867">err</span>&nbsp;<span class="op" id="6421871">!=</span>&nbsp;<span class="builtintype" id="6421874">nil</span>&nbsp;<span class="op" id="6421878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421882">t</span><span class="op" id="6421883">.</span><span class="ident" id="6421884">Errorf</span><span class="op" id="6421890">(</span><span class="string" id="6421891">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6421913">,</span>&nbsp;<span class="ident" id="6421915">err</span><span class="op" id="6421918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6421921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6421924">if</span>&nbsp;<span class="op" id="6421927">!</span><span class="ident" id="6421928">reflect</span><span class="op" id="6421935">.</span><span class="ident" id="6421936">DeepEqual</span><span class="op" id="6421945">(</span><span class="ident" id="6421946">sp</span><span class="op" id="6421948">,</span>&nbsp;<span class="ident" id="6421950">expected</span><span class="op" id="6421958">)</span>&nbsp;<span class="op" id="6421960">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6421964">t</span><span class="op" id="6421965">.</span><span class="ident" id="6421966">Errorf</span><span class="op" id="6421972">(</span><span class="string" id="6421973">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6422014">,</span>&nbsp;<span class="ident" id="6422016">sp</span><span class="op" id="6422018">,</span>&nbsp;<span class="ident" id="6422020">expected</span><span class="op" id="6422028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6422031">}</span><br>
<span class="lineno"></span><span class="op" id="6422033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6422036">func</span>&nbsp;<span class="ident" id="6422041">TestUninitializedRead</span><span class="op" id="6422062">(</span><span class="ident" id="6422063">t</span>&nbsp;<span class="op" id="6422065">*</span><span class="ident" id="6422066">testing</span><span class="op" id="6422073">.</span><span class="ident" id="6422074">T</span><span class="op" id="6422075">)</span>&nbsp;<span class="op" id="6422077">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422080">test</span>&nbsp;<span class="op" id="6422085">:=</span>&nbsp;<span class="ident" id="6422088">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422100">f</span><span class="op" id="6422101">,</span>&nbsp;<span class="ident" id="6422103">err</span>&nbsp;<span class="op" id="6422107">:=</span>&nbsp;<span class="ident" id="6422110">os</span><span class="op" id="6422112">.</span><span class="ident" id="6422113">Open</span><span class="op" id="6422117">(</span><span class="ident" id="6422118">test</span><span class="op" id="6422122">.</span><span class="ident" id="6422123">file</span><span class="op" id="6422127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6422130">if</span>&nbsp;<span class="ident" id="6422133">err</span>&nbsp;<span class="op" id="6422137">!=</span>&nbsp;<span class="builtintype" id="6422140">nil</span>&nbsp;<span class="op" id="6422144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422148">t</span><span class="op" id="6422149">.</span><span class="ident" id="6422150">Fatalf</span><span class="op" id="6422156">(</span><span class="string" id="6422157">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6422179">,</span>&nbsp;<span class="ident" id="6422181">err</span><span class="op" id="6422184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6422187">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6422190">defer</span>&nbsp;<span class="ident" id="6422196">f</span><span class="op" id="6422197">.</span><span class="ident" id="6422198">Close</span><span class="op" id="6422203">(</span><span class="op" id="6422204">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422208">tr</span>&nbsp;<span class="op" id="6422211">:=</span>&nbsp;<span class="ident" id="6422214">NewReader</span><span class="op" id="6422223">(</span><span class="ident" id="6422224">f</span><span class="op" id="6422225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422228">_</span><span class="op" id="6422229">,</span>&nbsp;<span class="ident" id="6422231">err</span>&nbsp;<span class="op" id="6422235">=</span>&nbsp;<span class="ident" id="6422237">tr</span><span class="op" id="6422239">.</span><span class="ident" id="6422240">Read</span><span class="op" id="6422244">(</span><span class="op" id="6422245">[</span><span class="op" id="6422246">]</span><span class="builtintype" id="6422247">byte</span><span class="op" id="6422251">{</span><span class="op" id="6422252">}</span><span class="op" id="6422253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6422256">if</span>&nbsp;<span class="ident" id="6422259">err</span>&nbsp;<span class="op" id="6422263">==</span>&nbsp;<span class="builtintype" id="6422266">nil</span>&nbsp;<span class="op" id="6422270">||</span>&nbsp;<span class="ident" id="6422273">err</span>&nbsp;<span class="op" id="6422277">!=</span>&nbsp;<span class="ident" id="6422280">io</span><span class="op" id="6422282">.</span><span class="ident" id="6422283">EOF</span>&nbsp;<span class="op" id="6422287">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6422291">t</span><span class="op" id="6422292">.</span><span class="ident" id="6422293">Errorf</span><span class="op" id="6422299">(</span><span class="string" id="6422300">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6422333">,</span>&nbsp;<span class="ident" id="6422335">err</span><span class="op" id="6422338">,</span>&nbsp;<span class="ident" id="6422340">io</span><span class="op" id="6422342">.</span><span class="ident" id="6422343">EOF</span><span class="op" id="6422346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6422349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6422352">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
