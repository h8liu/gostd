<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html" class="current">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7732893">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7732949">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7733003">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7733054">package</span>&nbsp;<span class="ident" id="7733062">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733068">import</span>&nbsp;<span class="op" id="7733075">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733078">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733087">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733096">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733113">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733128">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733135">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733141">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733154">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733175">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733186">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733197">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733207">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733218">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7733228">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733231">type</span>&nbsp;<span class="ident" id="7733236">respTest</span>&nbsp;<span class="keyword" id="7733245">struct</span>&nbsp;<span class="op" id="7733252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733255">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="7733260">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733268">Resp</span>&nbsp;<span class="ident" id="7733273">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733283">Body</span>&nbsp;<span class="builtintype" id="7733288">string</span><br>
<span class="lineno"></span><span class="op" id="7733295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733298">func</span>&nbsp;<span class="ident" id="7733303">dummyReq</span><span class="op" id="7733311">(</span><span class="ident" id="7733312">method</span>&nbsp;<span class="builtintype" id="7733319">string</span><span class="op" id="7733325">)</span>&nbsp;<span class="op" id="7733327">*</span><span class="ident" id="7733328">Request</span>&nbsp;<span class="op" id="7733336">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733339">return</span>&nbsp;<span class="op" id="7733346">&amp;</span><span class="ident" id="7733347">Request</span><span class="op" id="7733354">{</span><span class="ident" id="7733355">Method</span><span class="op" id="7733361">:</span>&nbsp;<span class="ident" id="7733363">method</span><span class="op" id="7733369">}</span><br>
<span class="lineno"></span><span class="op" id="7733371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733374">func</span>&nbsp;<span class="ident" id="7733379">dummyReq11</span><span class="op" id="7733389">(</span><span class="ident" id="7733390">method</span>&nbsp;<span class="builtintype" id="7733397">string</span><span class="op" id="7733403">)</span>&nbsp;<span class="op" id="7733405">*</span><span class="ident" id="7733406">Request</span>&nbsp;<span class="op" id="7733414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7733417">return</span>&nbsp;<span class="op" id="7733424">&amp;</span><span class="ident" id="7733425">Request</span><span class="op" id="7733432">{</span><span class="ident" id="7733433">Method</span><span class="op" id="7733439">:</span>&nbsp;<span class="ident" id="7733441">method</span><span class="op" id="7733447">,</span>&nbsp;<span class="ident" id="7733449">Proto</span><span class="op" id="7733454">:</span>&nbsp;<span class="string" id="7733456">&#34;HTTP/1.1&#34;</span><span class="op" id="7733466">,</span>&nbsp;<span class="ident" id="7733468">ProtoMajor</span><span class="op" id="7733478">:</span>&nbsp;<span class="num" id="7733480">1</span><span class="op" id="7733481">,</span>&nbsp;<span class="ident" id="7733483">ProtoMinor</span><span class="op" id="7733493">:</span>&nbsp;<span class="num" id="7733495">1</span><span class="op" id="7733496">}</span><br>
<span class="lineno">35</span><span class="op" id="7733498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733501">var</span>&nbsp;<span class="ident" id="7733505">respTests</span>&nbsp;<span class="op" id="7733515">=</span>&nbsp;<span class="op" id="7733517">[</span><span class="op" id="7733518">]</span><span class="ident" id="7733519">respTest</span><span class="op" id="7733527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7733530">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733577">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733581">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7733603">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733608">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7733632">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733637">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7733644">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733649">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7733662">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733667">Response</span><span class="op" id="7733675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733680">Status</span><span class="op" id="7733686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733692">&#34;200&nbsp;OK&#34;</span><span class="op" id="7733700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733705">StatusCode</span><span class="op" id="7733715">:</span>&nbsp;<span class="num" id="7733717">200</span><span class="op" id="7733720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733725">Proto</span><span class="op" id="7733730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733737">&#34;HTTP/1.0&#34;</span><span class="op" id="7733747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733752">ProtoMajor</span><span class="op" id="7733762">:</span>&nbsp;<span class="num" id="7733764">1</span><span class="op" id="7733765">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733770">ProtoMinor</span><span class="op" id="7733780">:</span>&nbsp;<span class="num" id="7733782">0</span><span class="op" id="7733783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733788">Request</span><span class="op" id="7733795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733800">dummyReq</span><span class="op" id="7733808">(</span><span class="string" id="7733809">&#34;GET&#34;</span><span class="op" id="7733814">)</span><span class="op" id="7733815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733820">Header</span><span class="op" id="7733826">:</span>&nbsp;<span class="ident" id="7733828">Header</span><span class="op" id="7733834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733840">&#34;Connection&#34;</span><span class="op" id="7733852">:</span>&nbsp;<span class="op" id="7733854">{</span><span class="string" id="7733855">&#34;close&#34;</span><span class="op" id="7733862">}</span><span class="op" id="7733863">,</span>&nbsp;<span class="comment" id="7733865">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733890">}</span><span class="op" id="7733891">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733896">Close</span><span class="op" id="7733901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7733911">true</span><span class="op" id="7733915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7733920">ContentLength</span><span class="op" id="7733933">:</span>&nbsp;<span class="op" id="7733935">-</span><span class="num" id="7733936">1</span><span class="op" id="7733937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733941">}</span><span class="op" id="7733942">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7733947">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7733960">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7733963">}</span><span class="op" id="7733964">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7733968">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7734026">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734050">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734054">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7734076">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734081">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7734088">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734093">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7734106">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734111">Response</span><span class="op" id="7734119">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734124">Status</span><span class="op" id="7734130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734139">&#34;200&nbsp;OK&#34;</span><span class="op" id="7734147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734152">StatusCode</span><span class="op" id="7734162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734167">200</span><span class="op" id="7734170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734175">Proto</span><span class="op" id="7734180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734190">&#34;HTTP/1.1&#34;</span><span class="op" id="7734200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734205">ProtoMajor</span><span class="op" id="7734215">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734220">1</span><span class="op" id="7734221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734226">ProtoMinor</span><span class="op" id="7734236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734241">1</span><span class="op" id="7734242">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734247">Header</span><span class="op" id="7734253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734262">Header</span><span class="op" id="7734268">{</span><span class="op" id="7734269">}</span><span class="op" id="7734270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734275">Request</span><span class="op" id="7734282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734290">dummyReq</span><span class="op" id="7734298">(</span><span class="string" id="7734299">&#34;GET&#34;</span><span class="op" id="7734304">)</span><span class="op" id="7734305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734310">Close</span><span class="op" id="7734315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7734325">true</span><span class="op" id="7734329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734334">ContentLength</span><span class="op" id="7734347">:</span>&nbsp;<span class="op" id="7734349">-</span><span class="num" id="7734350">1</span><span class="op" id="7734351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734355">}</span><span class="op" id="7734356">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734361">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7734374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734377">}</span><span class="op" id="7734378">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7734382">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734446">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7734476">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734481">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7734488">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734493">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="7734521">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734526">Response</span><span class="op" id="7734534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734539">Status</span><span class="op" id="7734545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734554">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="7734570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734575">StatusCode</span><span class="op" id="7734585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734590">204</span><span class="op" id="7734593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734598">Proto</span><span class="op" id="7734603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734613">&#34;HTTP/1.1&#34;</span><span class="op" id="7734623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734628">ProtoMajor</span><span class="op" id="7734638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734643">1</span><span class="op" id="7734644">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734649">ProtoMinor</span><span class="op" id="7734659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7734664">1</span><span class="op" id="7734665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734670">Header</span><span class="op" id="7734676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734685">Header</span><span class="op" id="7734691">{</span><span class="op" id="7734692">}</span><span class="op" id="7734693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734698">Request</span><span class="op" id="7734705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734713">dummyReq</span><span class="op" id="7734721">(</span><span class="string" id="7734722">&#34;GET&#34;</span><span class="op" id="7734727">)</span><span class="op" id="7734728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734733">Close</span><span class="op" id="7734738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7734748">false</span><span class="op" id="7734753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734758">ContentLength</span><span class="op" id="7734771">:</span>&nbsp;<span class="num" id="7734773">0</span><span class="op" id="7734774">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734778">}</span><span class="op" id="7734779">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734784">&#34;&#34;</span><span class="op" id="7734786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734789">}</span><span class="op" id="7734790">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7734794">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7734838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734842">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7734864">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734869">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7734894">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734899">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7734923">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734928">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7734935">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734940">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7734953">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734958">Response</span><span class="op" id="7734966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734971">Status</span><span class="op" id="7734977">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734983">&#34;200&nbsp;OK&#34;</span><span class="op" id="7734991">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7734996">StatusCode</span><span class="op" id="7735006">:</span>&nbsp;<span class="num" id="7735008">200</span><span class="op" id="7735011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735016">Proto</span><span class="op" id="7735021">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735028">&#34;HTTP/1.0&#34;</span><span class="op" id="7735038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735043">ProtoMajor</span><span class="op" id="7735053">:</span>&nbsp;<span class="num" id="7735055">1</span><span class="op" id="7735056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735061">ProtoMinor</span><span class="op" id="7735071">:</span>&nbsp;<span class="num" id="7735073">0</span><span class="op" id="7735074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735079">Request</span><span class="op" id="7735086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735091">dummyReq</span><span class="op" id="7735099">(</span><span class="string" id="7735100">&#34;GET&#34;</span><span class="op" id="7735105">)</span><span class="op" id="7735106">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735111">Header</span><span class="op" id="7735117">:</span>&nbsp;<span class="ident" id="7735119">Header</span><span class="op" id="7735125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735131">&#34;Connection&#34;</span><span class="op" id="7735143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735149">{</span><span class="string" id="7735150">&#34;close&#34;</span><span class="op" id="7735157">}</span><span class="op" id="7735158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735164">&#34;Content-Length&#34;</span><span class="op" id="7735180">:</span>&nbsp;<span class="op" id="7735182">{</span><span class="string" id="7735183">&#34;10&#34;</span><span class="op" id="7735187">}</span><span class="op" id="7735188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735193">}</span><span class="op" id="7735194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735199">Close</span><span class="op" id="7735204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7735214">true</span><span class="op" id="7735218">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735223">ContentLength</span><span class="op" id="7735236">:</span>&nbsp;<span class="num" id="7735238">10</span><span class="op" id="7735240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735244">}</span><span class="op" id="7735245">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735250">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7735263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735266">}</span><span class="op" id="7735267">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735271">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735320">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7735342">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735347">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7735380">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735385">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7735392">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735397">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7735406">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735411">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7735429">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735434">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="7735443">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735448">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="7735464">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735469">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7735477">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735482">&#34;\r\n&#34;</span><span class="op" id="7735488">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735493">Response</span><span class="op" id="7735501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735506">Status</span><span class="op" id="7735512">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735524">&#34;200&nbsp;OK&#34;</span><span class="op" id="7735532">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735537">StatusCode</span><span class="op" id="7735547">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7735555">200</span><span class="op" id="7735558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735563">Proto</span><span class="op" id="7735568">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735581">&#34;HTTP/1.1&#34;</span><span class="op" id="7735591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735596">ProtoMajor</span><span class="op" id="7735606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7735614">1</span><span class="op" id="7735615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735620">ProtoMinor</span><span class="op" id="7735630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7735638">1</span><span class="op" id="7735639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735644">Request</span><span class="op" id="7735651">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735662">dummyReq</span><span class="op" id="7735670">(</span><span class="string" id="7735671">&#34;GET&#34;</span><span class="op" id="7735676">)</span><span class="op" id="7735677">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735682">Header</span><span class="op" id="7735688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735700">Header</span><span class="op" id="7735706">{</span><span class="op" id="7735707">}</span><span class="op" id="7735708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735713">Close</span><span class="op" id="7735718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7735731">false</span><span class="op" id="7735736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735741">ContentLength</span><span class="op" id="7735754">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735759">-</span><span class="num" id="7735760">1</span><span class="op" id="7735761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7735766">TransferEncoding</span><span class="op" id="7735782">:</span>&nbsp;<span class="op" id="7735784">[</span><span class="op" id="7735785">]</span><span class="builtintype" id="7735786">string</span><span class="op" id="7735792">{</span><span class="string" id="7735793">&#34;chunked&#34;</span><span class="op" id="7735802">}</span><span class="op" id="7735803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735807">}</span><span class="op" id="7735808">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735813">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="7735835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735838">}</span><span class="op" id="7735839">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7735843">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7735885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735889">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7735911">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735916">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7735949">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735954">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7735979">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735984">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7735991">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7735996">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7736005">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736010">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7736028">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736033">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7736041">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736046">&#34;\r\n&#34;</span><span class="op" id="7736052">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736057">Response</span><span class="op" id="7736065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736070">Status</span><span class="op" id="7736076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736088">&#34;200&nbsp;OK&#34;</span><span class="op" id="7736096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736101">StatusCode</span><span class="op" id="7736111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736119">200</span><span class="op" id="7736122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736127">Proto</span><span class="op" id="7736132">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736145">&#34;HTTP/1.1&#34;</span><span class="op" id="7736155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736160">ProtoMajor</span><span class="op" id="7736170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736178">1</span><span class="op" id="7736179">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736184">ProtoMinor</span><span class="op" id="7736194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736202">1</span><span class="op" id="7736203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736208">Request</span><span class="op" id="7736215">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736226">dummyReq</span><span class="op" id="7736234">(</span><span class="string" id="7736235">&#34;GET&#34;</span><span class="op" id="7736240">)</span><span class="op" id="7736241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736246">Header</span><span class="op" id="7736252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736264">Header</span><span class="op" id="7736270">{</span><span class="op" id="7736271">}</span><span class="op" id="7736272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736277">Close</span><span class="op" id="7736282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7736295">false</span><span class="op" id="7736300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736305">ContentLength</span><span class="op" id="7736318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736323">-</span><span class="num" id="7736324">1</span><span class="op" id="7736325">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736330">TransferEncoding</span><span class="op" id="7736346">:</span>&nbsp;<span class="op" id="7736348">[</span><span class="op" id="7736349">]</span><span class="builtintype" id="7736350">string</span><span class="op" id="7736356">{</span><span class="string" id="7736357">&#34;chunked&#34;</span><span class="op" id="7736366">}</span><span class="op" id="7736367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736371">}</span><span class="op" id="7736372">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736377">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7736390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736393">}</span><span class="op" id="7736394">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7736398">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736453">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7736475">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736480">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7736513">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736518">&#34;\r\n&#34;</span><span class="op" id="7736524">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736529">Response</span><span class="op" id="7736537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736542">Status</span><span class="op" id="7736548">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736560">&#34;200&nbsp;OK&#34;</span><span class="op" id="7736568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736573">StatusCode</span><span class="op" id="7736583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736591">200</span><span class="op" id="7736594">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736599">Proto</span><span class="op" id="7736604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736617">&#34;HTTP/1.1&#34;</span><span class="op" id="7736627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736632">ProtoMajor</span><span class="op" id="7736642">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736650">1</span><span class="op" id="7736651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736656">ProtoMinor</span><span class="op" id="7736666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7736674">1</span><span class="op" id="7736675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736680">Request</span><span class="op" id="7736687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736698">dummyReq</span><span class="op" id="7736706">(</span><span class="string" id="7736707">&#34;HEAD&#34;</span><span class="op" id="7736713">)</span><span class="op" id="7736714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736719">Header</span><span class="op" id="7736725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736737">Header</span><span class="op" id="7736743">{</span><span class="op" id="7736744">}</span><span class="op" id="7736745">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736750">TransferEncoding</span><span class="op" id="7736766">:</span>&nbsp;<span class="op" id="7736768">[</span><span class="op" id="7736769">]</span><span class="builtintype" id="7736770">string</span><span class="op" id="7736776">{</span><span class="string" id="7736777">&#34;chunked&#34;</span><span class="op" id="7736786">}</span><span class="op" id="7736787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736792">Close</span><span class="op" id="7736797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7736810">false</span><span class="op" id="7736815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736820">ContentLength</span><span class="op" id="7736833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736838">-</span><span class="num" id="7736839">1</span><span class="op" id="7736840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736844">}</span><span class="op" id="7736845">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736850">&#34;&#34;</span><span class="op" id="7736852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736855">}</span><span class="op" id="7736856">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7736860">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7736909">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736913">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7736935">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736940">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7736966">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7736971">&#34;\r\n&#34;</span><span class="op" id="7736977">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736982">Response</span><span class="op" id="7736990">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7736995">Status</span><span class="op" id="7737001">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737013">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737026">StatusCode</span><span class="op" id="7737036">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737044">200</span><span class="op" id="7737047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737052">Proto</span><span class="op" id="7737057">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737070">&#34;HTTP/1.0&#34;</span><span class="op" id="7737080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737085">ProtoMajor</span><span class="op" id="7737095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737103">1</span><span class="op" id="7737104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737109">ProtoMinor</span><span class="op" id="7737119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737127">0</span><span class="op" id="7737128">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737133">Request</span><span class="op" id="7737140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737151">dummyReq</span><span class="op" id="7737159">(</span><span class="string" id="7737160">&#34;HEAD&#34;</span><span class="op" id="7737166">)</span><span class="op" id="7737167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737172">Header</span><span class="op" id="7737178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737190">Header</span><span class="op" id="7737196">{</span><span class="string" id="7737197">&#34;Content-Length&#34;</span><span class="op" id="7737213">:</span>&nbsp;<span class="op" id="7737215">{</span><span class="string" id="7737216">&#34;256&#34;</span><span class="op" id="7737221">}</span><span class="op" id="7737222">}</span><span class="op" id="7737223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737228">TransferEncoding</span><span class="op" id="7737244">:</span>&nbsp;<span class="builtintype" id="7737246">nil</span><span class="op" id="7737249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737254">Close</span><span class="op" id="7737259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7737272">true</span><span class="op" id="7737276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737281">ContentLength</span><span class="op" id="7737294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737299">256</span><span class="op" id="7737302">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737306">}</span><span class="op" id="7737307">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737312">&#34;&#34;</span><span class="op" id="7737314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737317">}</span><span class="op" id="7737318">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7737322">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737389">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7737411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737416">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7737442">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737447">&#34;\r\n&#34;</span><span class="op" id="7737453">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737458">Response</span><span class="op" id="7737466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737471">Status</span><span class="op" id="7737477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737489">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737502">StatusCode</span><span class="op" id="7737512">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737520">200</span><span class="op" id="7737523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737528">Proto</span><span class="op" id="7737533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737546">&#34;HTTP/1.1&#34;</span><span class="op" id="7737556">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737561">ProtoMajor</span><span class="op" id="7737571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737579">1</span><span class="op" id="7737580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737585">ProtoMinor</span><span class="op" id="7737595">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737603">1</span><span class="op" id="7737604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737609">Request</span><span class="op" id="7737616">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737627">dummyReq</span><span class="op" id="7737635">(</span><span class="string" id="7737636">&#34;HEAD&#34;</span><span class="op" id="7737642">)</span><span class="op" id="7737643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737648">Header</span><span class="op" id="7737654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737666">Header</span><span class="op" id="7737672">{</span><span class="string" id="7737673">&#34;Content-Length&#34;</span><span class="op" id="7737689">:</span>&nbsp;<span class="op" id="7737691">{</span><span class="string" id="7737692">&#34;256&#34;</span><span class="op" id="7737697">}</span><span class="op" id="7737698">}</span><span class="op" id="7737699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737704">TransferEncoding</span><span class="op" id="7737720">:</span>&nbsp;<span class="builtintype" id="7737722">nil</span><span class="op" id="7737725">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737730">Close</span><span class="op" id="7737735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7737748">false</span><span class="op" id="7737753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737758">ContentLength</span><span class="op" id="7737771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737776">256</span><span class="op" id="7737779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737783">}</span><span class="op" id="7737784">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737789">&#34;&#34;</span><span class="op" id="7737791">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737794">}</span><span class="op" id="7737795">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7737799">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7737862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737866">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7737888">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737893">&#34;\r\n&#34;</span><span class="op" id="7737899">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737904">Response</span><span class="op" id="7737912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737917">Status</span><span class="op" id="7737923">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737935">&#34;200&nbsp;OK&#34;</span><span class="op" id="7737943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737948">StatusCode</span><span class="op" id="7737958">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7737966">200</span><span class="op" id="7737969">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7737974">Proto</span><span class="op" id="7737979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7737992">&#34;HTTP/1.0&#34;</span><span class="op" id="7738002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738007">ProtoMajor</span><span class="op" id="7738017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738025">1</span><span class="op" id="7738026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738031">ProtoMinor</span><span class="op" id="7738041">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738049">0</span><span class="op" id="7738050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738055">Request</span><span class="op" id="7738062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738073">dummyReq</span><span class="op" id="7738081">(</span><span class="string" id="7738082">&#34;HEAD&#34;</span><span class="op" id="7738088">)</span><span class="op" id="7738089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738094">Header</span><span class="op" id="7738100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738112">Header</span><span class="op" id="7738118">{</span><span class="op" id="7738119">}</span><span class="op" id="7738120">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738125">TransferEncoding</span><span class="op" id="7738141">:</span>&nbsp;<span class="builtintype" id="7738143">nil</span><span class="op" id="7738146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738151">Close</span><span class="op" id="7738156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7738169">true</span><span class="op" id="7738173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738178">ContentLength</span><span class="op" id="7738191">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738196">-</span><span class="num" id="7738197">1</span><span class="op" id="7738198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738202">}</span><span class="op" id="7738203">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738208">&#34;&#34;</span><span class="op" id="7738210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738213">}</span><span class="op" id="7738214">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7738218">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738252">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738256">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7738278">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738283">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7738307">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738312">&#34;\r\n&#34;</span><span class="op" id="7738318">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738323">Response</span><span class="op" id="7738331">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738336">Status</span><span class="op" id="7738342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738348">&#34;200&nbsp;OK&#34;</span><span class="op" id="7738356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738361">StatusCode</span><span class="op" id="7738371">:</span>&nbsp;<span class="num" id="7738373">200</span><span class="op" id="7738376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738381">Proto</span><span class="op" id="7738386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738393">&#34;HTTP/1.1&#34;</span><span class="op" id="7738403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738408">ProtoMajor</span><span class="op" id="7738418">:</span>&nbsp;<span class="num" id="7738420">1</span><span class="op" id="7738421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738426">ProtoMinor</span><span class="op" id="7738436">:</span>&nbsp;<span class="num" id="7738438">1</span><span class="op" id="7738439">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738444">Request</span><span class="op" id="7738451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738456">dummyReq</span><span class="op" id="7738464">(</span><span class="string" id="7738465">&#34;GET&#34;</span><span class="op" id="7738470">)</span><span class="op" id="7738471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738476">Header</span><span class="op" id="7738482">:</span>&nbsp;<span class="ident" id="7738484">Header</span><span class="op" id="7738490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738496">&#34;Content-Length&#34;</span><span class="op" id="7738512">:</span>&nbsp;<span class="op" id="7738514">{</span><span class="string" id="7738515">&#34;0&#34;</span><span class="op" id="7738518">}</span><span class="op" id="7738519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738524">}</span><span class="op" id="7738525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738530">Close</span><span class="op" id="7738535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7738545">false</span><span class="op" id="7738550">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738555">ContentLength</span><span class="op" id="7738568">:</span>&nbsp;<span class="num" id="7738570">0</span><span class="op" id="7738571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738575">}</span><span class="op" id="7738576">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738581">&#34;&#34;</span><span class="op" id="7738583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738586">}</span><span class="op" id="7738587">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7738591">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7738652">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738684">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="7738707">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738711">Response</span><span class="op" id="7738719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738724">Status</span><span class="op" id="7738730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738739">&#34;303&nbsp;&#34;</span><span class="op" id="7738745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738750">StatusCode</span><span class="op" id="7738760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738765">303</span><span class="op" id="7738768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738773">Proto</span><span class="op" id="7738778">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738788">&#34;HTTP/1.0&#34;</span><span class="op" id="7738798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738803">ProtoMajor</span><span class="op" id="7738813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738818">1</span><span class="op" id="7738819">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738824">ProtoMinor</span><span class="op" id="7738834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7738839">0</span><span class="op" id="7738840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738845">Request</span><span class="op" id="7738852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738860">dummyReq</span><span class="op" id="7738868">(</span><span class="string" id="7738869">&#34;GET&#34;</span><span class="op" id="7738874">)</span><span class="op" id="7738875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738880">Header</span><span class="op" id="7738886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738895">Header</span><span class="op" id="7738901">{</span><span class="op" id="7738902">}</span><span class="op" id="7738903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738908">Close</span><span class="op" id="7738913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7738923">true</span><span class="op" id="7738927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7738932">ContentLength</span><span class="op" id="7738945">:</span>&nbsp;<span class="op" id="7738947">-</span><span class="num" id="7738948">1</span><span class="op" id="7738949">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738953">}</span><span class="op" id="7738954">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7738959">&#34;&#34;</span><span class="op" id="7738961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7738964">}</span><span class="op" id="7738965">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7738969">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7739033">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739097">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="7739119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739123">Response</span><span class="op" id="7739131">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739136">Status</span><span class="op" id="7739142">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739151">&#34;303&nbsp;&#34;</span><span class="op" id="7739157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739162">StatusCode</span><span class="op" id="7739172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739177">303</span><span class="op" id="7739180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739185">Proto</span><span class="op" id="7739190">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739200">&#34;HTTP/1.0&#34;</span><span class="op" id="7739210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739215">ProtoMajor</span><span class="op" id="7739225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739230">1</span><span class="op" id="7739231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739236">ProtoMinor</span><span class="op" id="7739246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7739251">0</span><span class="op" id="7739252">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739257">Request</span><span class="op" id="7739264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739272">dummyReq</span><span class="op" id="7739280">(</span><span class="string" id="7739281">&#34;GET&#34;</span><span class="op" id="7739286">)</span><span class="op" id="7739287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739292">Header</span><span class="op" id="7739298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739307">Header</span><span class="op" id="7739313">{</span><span class="op" id="7739314">}</span><span class="op" id="7739315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739320">Close</span><span class="op" id="7739325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7739335">true</span><span class="op" id="7739339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739344">ContentLength</span><span class="op" id="7739357">:</span>&nbsp;<span class="op" id="7739359">-</span><span class="num" id="7739360">1</span><span class="op" id="7739361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739365">}</span><span class="op" id="7739366">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739371">&#34;&#34;</span><span class="op" id="7739373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739376">}</span><span class="op" id="7739377">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7739381">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739462">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="7739583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739587">Response</span><span class="op" id="7739595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739600">Status</span><span class="op" id="7739606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739612">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7739633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739638">StatusCode</span><span class="op" id="7739648">:</span>&nbsp;<span class="num" id="7739650">206</span><span class="op" id="7739653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739658">Proto</span><span class="op" id="7739663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739670">&#34;HTTP/1.1&#34;</span><span class="op" id="7739680">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739685">ProtoMajor</span><span class="op" id="7739695">:</span>&nbsp;<span class="num" id="7739697">1</span><span class="op" id="7739698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739703">ProtoMinor</span><span class="op" id="7739713">:</span>&nbsp;<span class="num" id="7739715">1</span><span class="op" id="7739716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739721">Request</span><span class="op" id="7739728">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739733">dummyReq</span><span class="op" id="7739741">(</span><span class="string" id="7739742">&#34;GET&#34;</span><span class="op" id="7739747">)</span><span class="op" id="7739748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739753">Header</span><span class="op" id="7739759">:</span>&nbsp;<span class="ident" id="7739761">Header</span><span class="op" id="7739767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739773">&#34;Content-Type&#34;</span><span class="op" id="7739787">:</span>&nbsp;<span class="op" id="7739789">[</span><span class="op" id="7739790">]</span><span class="builtintype" id="7739791">string</span><span class="op" id="7739797">{</span><span class="string" id="7739798">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="7739847">}</span><span class="op" id="7739848">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739853">}</span><span class="op" id="7739854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739859">Close</span><span class="op" id="7739864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7739874">true</span><span class="op" id="7739878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7739883">ContentLength</span><span class="op" id="7739896">:</span>&nbsp;<span class="op" id="7739898">-</span><span class="num" id="7739899">1</span><span class="op" id="7739900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739904">}</span><span class="op" id="7739905">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739910">&#34;some&nbsp;body&#34;</span><span class="op" id="7739921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739924">}</span><span class="op" id="7739925">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7739929">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7739991">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7739995">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7740017">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740022">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7740046">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740051">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7740058">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740063">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7740076">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740081">Response</span><span class="op" id="7740089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740094">Status</span><span class="op" id="7740100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740106">&#34;200&nbsp;OK&#34;</span><span class="op" id="7740114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740119">StatusCode</span><span class="op" id="7740129">:</span>&nbsp;<span class="num" id="7740131">200</span><span class="op" id="7740134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740139">Proto</span><span class="op" id="7740144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740151">&#34;HTTP/1.0&#34;</span><span class="op" id="7740161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740166">ProtoMajor</span><span class="op" id="7740176">:</span>&nbsp;<span class="num" id="7740178">1</span><span class="op" id="7740179">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740184">ProtoMinor</span><span class="op" id="7740194">:</span>&nbsp;<span class="num" id="7740196">0</span><span class="op" id="7740197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740202">Header</span><span class="op" id="7740208">:</span>&nbsp;<span class="ident" id="7740210">Header</span><span class="op" id="7740216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740222">&#34;Connection&#34;</span><span class="op" id="7740234">:</span>&nbsp;<span class="op" id="7740236">{</span><span class="string" id="7740237">&#34;close&#34;</span><span class="op" id="7740244">}</span><span class="op" id="7740245">,</span>&nbsp;<span class="comment" id="7740247">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740272">}</span><span class="op" id="7740273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740278">Close</span><span class="op" id="7740283">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7740293">true</span><span class="op" id="7740297">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740302">ContentLength</span><span class="op" id="7740315">:</span>&nbsp;<span class="op" id="7740317">-</span><span class="num" id="7740318">1</span><span class="op" id="7740319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740323">}</span><span class="op" id="7740324">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740329">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7740342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740345">}</span><span class="op" id="7740346">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7740350">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740401">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7740436">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740441">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="7740487">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740492">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="7740519">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740524">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="7740560">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740565">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7740593">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740598">&#34;foobar&#34;</span><span class="op" id="7740606">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740611">Response</span><span class="op" id="7740619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740624">Status</span><span class="op" id="7740630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740636">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7740657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740662">StatusCode</span><span class="op" id="7740672">:</span>&nbsp;<span class="num" id="7740674">206</span><span class="op" id="7740677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740682">Proto</span><span class="op" id="7740687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740694">&#34;HTTP/1.1&#34;</span><span class="op" id="7740704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740709">ProtoMajor</span><span class="op" id="7740719">:</span>&nbsp;<span class="num" id="7740721">1</span><span class="op" id="7740722">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740727">ProtoMinor</span><span class="op" id="7740737">:</span>&nbsp;<span class="num" id="7740739">1</span><span class="op" id="7740740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740745">Request</span><span class="op" id="7740752">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740757">dummyReq</span><span class="op" id="7740765">(</span><span class="string" id="7740766">&#34;GET&#34;</span><span class="op" id="7740771">)</span><span class="op" id="7740772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740777">Header</span><span class="op" id="7740783">:</span>&nbsp;<span class="ident" id="7740785">Header</span><span class="op" id="7740791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740797">&#34;Accept-Ranges&#34;</span><span class="op" id="7740812">:</span>&nbsp;&nbsp;<span class="op" id="7740815">[</span><span class="op" id="7740816">]</span><span class="builtintype" id="7740817">string</span><span class="op" id="7740823">{</span><span class="string" id="7740824">&#34;bytes&#34;</span><span class="op" id="7740831">}</span><span class="op" id="7740832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740838">&#34;Content-Length&#34;</span><span class="op" id="7740854">:</span>&nbsp;<span class="op" id="7740856">[</span><span class="op" id="7740857">]</span><span class="builtintype" id="7740858">string</span><span class="op" id="7740864">{</span><span class="string" id="7740865">&#34;6&#34;</span><span class="op" id="7740868">}</span><span class="op" id="7740869">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740875">&#34;Content-Type&#34;</span><span class="op" id="7740889">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7740893">[</span><span class="op" id="7740894">]</span><span class="builtintype" id="7740895">string</span><span class="op" id="7740901">{</span><span class="string" id="7740902">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="7740929">}</span><span class="op" id="7740930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7740936">&#34;Content-Range&#34;</span><span class="op" id="7740951">:</span>&nbsp;&nbsp;<span class="op" id="7740954">[</span><span class="op" id="7740955">]</span><span class="builtintype" id="7740956">string</span><span class="op" id="7740962">{</span><span class="string" id="7740963">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="7740979">}</span><span class="op" id="7740980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7740985">}</span><span class="op" id="7740986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7740991">ContentLength</span><span class="op" id="7741004">:</span>&nbsp;<span class="num" id="7741006">6</span><span class="op" id="7741007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741011">}</span><span class="op" id="7741012">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7741017">&#34;foobar&#34;</span><span class="op" id="7741025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741028">}</span><span class="op" id="7741029">,</span><br>
<span class="lineno"></span><span class="op" id="7741031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7741034">func</span>&nbsp;<span class="ident" id="7741039">TestReadResponse</span><span class="op" id="7741055">(</span><span class="ident" id="7741056">t</span>&nbsp;<span class="op" id="7741058">*</span><span class="ident" id="7741059">testing</span><span class="op" id="7741066">.</span><span class="ident" id="7741067">T</span><span class="op" id="7741068">)</span>&nbsp;<span class="op" id="7741070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741073">for</span>&nbsp;<span class="ident" id="7741077">i</span><span class="op" id="7741078">,</span>&nbsp;<span class="ident" id="7741080">tt</span>&nbsp;<span class="op" id="7741083">:=</span>&nbsp;<span class="keyword" id="7741086">range</span>&nbsp;<span class="ident" id="7741092">respTests</span>&nbsp;<span class="op" id="7741102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741106">resp</span><span class="op" id="7741110">,</span>&nbsp;<span class="ident" id="7741112">err</span>&nbsp;<span class="op" id="7741116">:=</span>&nbsp;<span class="ident" id="7741119">ReadResponse</span><span class="op" id="7741131">(</span><span class="ident" id="7741132">bufio</span><span class="op" id="7741137">.</span><span class="ident" id="7741138">NewReader</span><span class="op" id="7741147">(</span><span class="ident" id="7741148">strings</span><span class="op" id="7741155">.</span><span class="ident" id="7741156">NewReader</span><span class="op" id="7741165">(</span><span class="ident" id="7741166">tt</span><span class="op" id="7741168">.</span><span class="ident" id="7741169">Raw</span><span class="op" id="7741172">)</span><span class="op" id="7741173">)</span><span class="op" id="7741174">,</span>&nbsp;<span class="ident" id="7741176">tt</span><span class="op" id="7741178">.</span><span class="ident" id="7741179">Resp</span><span class="op" id="7741183">.</span><span class="ident" id="7741184">Request</span><span class="op" id="7741191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741195">if</span>&nbsp;<span class="ident" id="7741198">err</span>&nbsp;<span class="op" id="7741202">!=</span>&nbsp;<span class="builtintype" id="7741205">nil</span>&nbsp;<span class="op" id="7741209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741214">t</span><span class="op" id="7741215">.</span><span class="ident" id="7741216">Errorf</span><span class="op" id="7741222">(</span><span class="string" id="7741223">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7741232">,</span>&nbsp;<span class="ident" id="7741234">i</span><span class="op" id="7741235">,</span>&nbsp;<span class="ident" id="7741237">err</span><span class="op" id="7741240">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741245">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741260">rbody</span>&nbsp;<span class="op" id="7741266">:=</span>&nbsp;<span class="ident" id="7741269">resp</span><span class="op" id="7741273">.</span><span class="ident" id="7741274">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741281">resp</span><span class="op" id="7741285">.</span><span class="ident" id="7741286">Body</span>&nbsp;<span class="op" id="7741291">=</span>&nbsp;<span class="builtintype" id="7741293">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741299">diff</span><span class="op" id="7741303">(</span><span class="ident" id="7741304">t</span><span class="op" id="7741305">,</span>&nbsp;<span class="ident" id="7741307">fmt</span><span class="op" id="7741310">.</span><span class="ident" id="7741311">Sprintf</span><span class="op" id="7741318">(</span><span class="string" id="7741319">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="7741333">,</span>&nbsp;<span class="ident" id="7741335">i</span><span class="op" id="7741336">)</span><span class="op" id="7741337">,</span>&nbsp;<span class="ident" id="7741339">resp</span><span class="op" id="7741343">,</span>&nbsp;<span class="op" id="7741345">&amp;</span><span class="ident" id="7741346">tt</span><span class="op" id="7741348">.</span><span class="ident" id="7741349">Resp</span><span class="op" id="7741353">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741357">var</span>&nbsp;<span class="ident" id="7741361">bout</span>&nbsp;<span class="ident" id="7741366">bytes</span><span class="op" id="7741371">.</span><span class="ident" id="7741372">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741381">if</span>&nbsp;<span class="ident" id="7741384">rbody</span>&nbsp;<span class="op" id="7741390">!=</span>&nbsp;<span class="builtintype" id="7741393">nil</span>&nbsp;<span class="op" id="7741397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741402">_</span><span class="op" id="7741403">,</span>&nbsp;<span class="ident" id="7741405">err</span>&nbsp;<span class="op" id="7741409">=</span>&nbsp;<span class="ident" id="7741411">io</span><span class="op" id="7741413">.</span><span class="ident" id="7741414">Copy</span><span class="op" id="7741418">(</span><span class="op" id="7741419">&amp;</span><span class="ident" id="7741420">bout</span><span class="op" id="7741424">,</span>&nbsp;<span class="ident" id="7741426">rbody</span><span class="op" id="7741431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741436">if</span>&nbsp;<span class="ident" id="7741439">err</span>&nbsp;<span class="op" id="7741443">!=</span>&nbsp;<span class="builtintype" id="7741446">nil</span>&nbsp;<span class="op" id="7741450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741456">t</span><span class="op" id="7741457">.</span><span class="ident" id="7741458">Errorf</span><span class="op" id="7741464">(</span><span class="string" id="7741465">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7741474">,</span>&nbsp;<span class="ident" id="7741476">i</span><span class="op" id="7741477">,</span>&nbsp;<span class="ident" id="7741479">err</span><span class="op" id="7741482">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741488">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741505">rbody</span><span class="op" id="7741510">.</span><span class="ident" id="7741511">Close</span><span class="op" id="7741516">(</span><span class="op" id="7741517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741525">body</span>&nbsp;<span class="op" id="7741530">:=</span>&nbsp;<span class="ident" id="7741533">bout</span><span class="op" id="7741537">.</span><span class="ident" id="7741538">String</span><span class="op" id="7741544">(</span><span class="op" id="7741545">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741549">if</span>&nbsp;<span class="ident" id="7741552">body</span>&nbsp;<span class="op" id="7741557">!=</span>&nbsp;<span class="ident" id="7741560">tt</span><span class="op" id="7741562">.</span><span class="ident" id="7741563">Body</span>&nbsp;<span class="op" id="7741568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741573">t</span><span class="op" id="7741574">.</span><span class="ident" id="7741575">Errorf</span><span class="op" id="7741581">(</span><span class="string" id="7741582">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7741606">,</span>&nbsp;<span class="ident" id="7741608">i</span><span class="op" id="7741609">,</span>&nbsp;<span class="ident" id="7741611">body</span><span class="op" id="7741615">,</span>&nbsp;<span class="ident" id="7741617">tt</span><span class="op" id="7741619">.</span><span class="ident" id="7741620">Body</span><span class="op" id="7741624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741631">}</span><br>
<span class="lineno"></span><span class="op" id="7741633">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7741636">func</span>&nbsp;<span class="ident" id="7741641">TestWriteResponse</span><span class="op" id="7741658">(</span><span class="ident" id="7741659">t</span>&nbsp;<span class="op" id="7741661">*</span><span class="ident" id="7741662">testing</span><span class="op" id="7741669">.</span><span class="ident" id="7741670">T</span><span class="op" id="7741671">)</span>&nbsp;<span class="op" id="7741673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741676">for</span>&nbsp;<span class="ident" id="7741680">i</span><span class="op" id="7741681">,</span>&nbsp;<span class="ident" id="7741683">tt</span>&nbsp;<span class="op" id="7741686">:=</span>&nbsp;<span class="keyword" id="7741689">range</span>&nbsp;<span class="ident" id="7741695">respTests</span>&nbsp;<span class="op" id="7741705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741709">resp</span><span class="op" id="7741713">,</span>&nbsp;<span class="ident" id="7741715">err</span>&nbsp;<span class="op" id="7741719">:=</span>&nbsp;<span class="ident" id="7741722">ReadResponse</span><span class="op" id="7741734">(</span><span class="ident" id="7741735">bufio</span><span class="op" id="7741740">.</span><span class="ident" id="7741741">NewReader</span><span class="op" id="7741750">(</span><span class="ident" id="7741751">strings</span><span class="op" id="7741758">.</span><span class="ident" id="7741759">NewReader</span><span class="op" id="7741768">(</span><span class="ident" id="7741769">tt</span><span class="op" id="7741771">.</span><span class="ident" id="7741772">Raw</span><span class="op" id="7741775">)</span><span class="op" id="7741776">)</span><span class="op" id="7741777">,</span>&nbsp;<span class="ident" id="7741779">tt</span><span class="op" id="7741781">.</span><span class="ident" id="7741782">Resp</span><span class="op" id="7741786">.</span><span class="ident" id="7741787">Request</span><span class="op" id="7741794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741798">if</span>&nbsp;<span class="ident" id="7741801">err</span>&nbsp;<span class="op" id="7741805">!=</span>&nbsp;<span class="builtintype" id="7741808">nil</span>&nbsp;<span class="op" id="7741812">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741817">t</span><span class="op" id="7741818">.</span><span class="ident" id="7741819">Errorf</span><span class="op" id="7741825">(</span><span class="string" id="7741826">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7741835">,</span>&nbsp;<span class="ident" id="7741837">i</span><span class="op" id="7741838">,</span>&nbsp;<span class="ident" id="7741840">err</span><span class="op" id="7741843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741848">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741863">err</span>&nbsp;<span class="op" id="7741867">=</span>&nbsp;<span class="ident" id="7741869">resp</span><span class="op" id="7741873">.</span><span class="ident" id="7741874">Write</span><span class="op" id="7741879">(</span><span class="ident" id="7741880">ioutil</span><span class="op" id="7741886">.</span><span class="ident" id="7741887">Discard</span><span class="op" id="7741894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741898">if</span>&nbsp;<span class="ident" id="7741901">err</span>&nbsp;<span class="op" id="7741905">!=</span>&nbsp;<span class="builtintype" id="7741908">nil</span>&nbsp;<span class="op" id="7741912">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7741917">t</span><span class="op" id="7741918">.</span><span class="ident" id="7741919">Errorf</span><span class="op" id="7741925">(</span><span class="string" id="7741926">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7741935">,</span>&nbsp;<span class="ident" id="7741937">i</span><span class="op" id="7741938">,</span>&nbsp;<span class="ident" id="7741940">err</span><span class="op" id="7741943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7741948">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741962">}</span><br>
<span class="lineno"></span><span class="op" id="7741964">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7741967">var</span>&nbsp;<span class="ident" id="7741971">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7742002">=</span>&nbsp;<span class="op" id="7742004">[</span><span class="op" id="7742005">]</span><span class="keyword" id="7742006">struct</span>&nbsp;<span class="op" id="7742013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742016">chunked</span><span class="op" id="7742023">,</span>&nbsp;<span class="ident" id="7742025">compressed</span>&nbsp;<span class="builtintype" id="7742036">bool</span><br>
<span class="lineno"></span><span class="op" id="7742041">}</span><span class="op" id="7742042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742045">{</span><span class="builtintype" id="7742046">false</span><span class="op" id="7742051">,</span>&nbsp;<span class="builtintype" id="7742053">false</span><span class="op" id="7742058">}</span><span class="op" id="7742059">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742062">{</span><span class="builtintype" id="7742063">true</span><span class="op" id="7742067">,</span>&nbsp;<span class="builtintype" id="7742069">false</span><span class="op" id="7742074">}</span><span class="op" id="7742075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742078">{</span><span class="builtintype" id="7742079">true</span><span class="op" id="7742083">,</span>&nbsp;<span class="builtintype" id="7742085">true</span><span class="op" id="7742089">}</span><span class="op" id="7742090">,</span><br>
<span class="lineno"></span><span class="op" id="7742092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7742095">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="7742160">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="7742229">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="7742278">func</span>&nbsp;<span class="ident" id="7742283">TestReadResponseCloseInMiddle</span><span class="op" id="7742312">(</span><span class="ident" id="7742313">t</span>&nbsp;<span class="op" id="7742315">*</span><span class="ident" id="7742316">testing</span><span class="op" id="7742323">.</span><span class="ident" id="7742324">T</span><span class="op" id="7742325">)</span>&nbsp;<span class="op" id="7742327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742330">for</span>&nbsp;<span class="ident" id="7742334">_</span><span class="op" id="7742335">,</span>&nbsp;<span class="ident" id="7742337">test</span>&nbsp;<span class="op" id="7742342">:=</span>&nbsp;<span class="keyword" id="7742345">range</span>&nbsp;<span class="ident" id="7742351">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7742382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742386">fatalf</span>&nbsp;<span class="op" id="7742393">:=</span>&nbsp;<span class="keyword" id="7742396">func</span><span class="op" id="7742400">(</span><span class="ident" id="7742401">format</span>&nbsp;<span class="builtintype" id="7742408">string</span><span class="op" id="7742414">,</span>&nbsp;<span class="ident" id="7742416">args</span>&nbsp;<span class="op" id="7742421">...</span><span class="keyword" id="7742424">interface</span><span class="op" id="7742433">{</span><span class="op" id="7742434">}</span><span class="op" id="7742435">)</span>&nbsp;<span class="op" id="7742437">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742442">args</span>&nbsp;<span class="op" id="7742447">=</span>&nbsp;<span class="builtinfunc" id="7742449">append</span><span class="op" id="7742455">(</span><span class="op" id="7742456">[</span><span class="op" id="7742457">]</span><span class="keyword" id="7742458">interface</span><span class="op" id="7742467">{</span><span class="op" id="7742468">}</span><span class="op" id="7742469">{</span><span class="ident" id="7742470">test</span><span class="op" id="7742474">.</span><span class="ident" id="7742475">chunked</span><span class="op" id="7742482">,</span>&nbsp;<span class="ident" id="7742484">test</span><span class="op" id="7742488">.</span><span class="ident" id="7742489">compressed</span><span class="op" id="7742499">}</span><span class="op" id="7742500">,</span>&nbsp;<span class="ident" id="7742502">args</span><span class="op" id="7742506">...</span><span class="op" id="7742509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742514">t</span><span class="op" id="7742515">.</span><span class="ident" id="7742516">Fatalf</span><span class="op" id="7742522">(</span><span class="string" id="7742523">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="7742560">+</span><span class="ident" id="7742561">format</span><span class="op" id="7742567">,</span>&nbsp;<span class="ident" id="7742569">args</span><span class="op" id="7742573">...</span><span class="op" id="7742576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742584">checkErr</span>&nbsp;<span class="op" id="7742593">:=</span>&nbsp;<span class="keyword" id="7742596">func</span><span class="op" id="7742600">(</span><span class="ident" id="7742601">err</span>&nbsp;<span class="builtintype" id="7742605">error</span><span class="op" id="7742610">,</span>&nbsp;<span class="ident" id="7742612">msg</span>&nbsp;<span class="builtintype" id="7742616">string</span><span class="op" id="7742622">)</span>&nbsp;<span class="op" id="7742624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742629">if</span>&nbsp;<span class="ident" id="7742632">err</span>&nbsp;<span class="op" id="7742636">==</span>&nbsp;<span class="builtintype" id="7742639">nil</span>&nbsp;<span class="op" id="7742643">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742649">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742664">fatalf</span><span class="op" id="7742670">(</span><span class="ident" id="7742671">msg</span><span class="op" id="7742674">+</span><span class="string" id="7742675">&#34;:&nbsp;%v&#34;</span><span class="op" id="7742681">,</span>&nbsp;<span class="ident" id="7742683">err</span><span class="op" id="7742686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742694">var</span>&nbsp;<span class="ident" id="7742698">buf</span>&nbsp;<span class="ident" id="7742702">bytes</span><span class="op" id="7742707">.</span><span class="ident" id="7742708">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742717">buf</span><span class="op" id="7742720">.</span><span class="ident" id="7742721">WriteString</span><span class="op" id="7742732">(</span><span class="string" id="7742733">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="7742754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742758">if</span>&nbsp;<span class="ident" id="7742761">test</span><span class="op" id="7742765">.</span><span class="ident" id="7742766">chunked</span>&nbsp;<span class="op" id="7742774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742779">buf</span><span class="op" id="7742782">.</span><span class="ident" id="7742783">WriteString</span><span class="op" id="7742794">(</span><span class="string" id="7742795">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="7742827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742831">}</span>&nbsp;<span class="keyword" id="7742833">else</span>&nbsp;<span class="op" id="7742838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742843">buf</span><span class="op" id="7742846">.</span><span class="ident" id="7742847">WriteString</span><span class="op" id="7742858">(</span><span class="string" id="7742859">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="7742888">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742896">var</span>&nbsp;<span class="ident" id="7742900">wr</span>&nbsp;<span class="ident" id="7742903">io</span><span class="op" id="7742905">.</span><span class="ident" id="7742906">Writer</span>&nbsp;<span class="op" id="7742913">=</span>&nbsp;<span class="op" id="7742915">&amp;</span><span class="ident" id="7742916">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742922">if</span>&nbsp;<span class="ident" id="7742925">test</span><span class="op" id="7742929">.</span><span class="ident" id="7742930">chunked</span>&nbsp;<span class="op" id="7742938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7742943">wr</span>&nbsp;<span class="op" id="7742946">=</span>&nbsp;<span class="ident" id="7742948">internal</span><span class="op" id="7742956">.</span><span class="ident" id="7742957">NewChunkedWriter</span><span class="op" id="7742973">(</span><span class="ident" id="7742974">wr</span><span class="op" id="7742976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7742980">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7742984">if</span>&nbsp;<span class="ident" id="7742987">test</span><span class="op" id="7742991">.</span><span class="ident" id="7742992">compressed</span>&nbsp;<span class="op" id="7743003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743008">buf</span><span class="op" id="7743011">.</span><span class="ident" id="7743012">WriteString</span><span class="op" id="7743023">(</span><span class="string" id="7743024">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="7743052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743057">wr</span>&nbsp;<span class="op" id="7743060">=</span>&nbsp;<span class="ident" id="7743062">gzip</span><span class="op" id="7743066">.</span><span class="ident" id="7743067">NewWriter</span><span class="op" id="7743076">(</span><span class="ident" id="7743077">wr</span><span class="op" id="7743079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743087">buf</span><span class="op" id="7743090">.</span><span class="ident" id="7743091">WriteString</span><span class="op" id="7743102">(</span><span class="string" id="7743103">&#34;\r\n&#34;</span><span class="op" id="7743109">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743114">chunk</span>&nbsp;<span class="op" id="7743120">:=</span>&nbsp;<span class="ident" id="7743123">bytes</span><span class="op" id="7743128">.</span><span class="ident" id="7743129">Repeat</span><span class="op" id="7743135">(</span><span class="op" id="7743136">[</span><span class="op" id="7743137">]</span><span class="builtintype" id="7743138">byte</span><span class="op" id="7743142">{</span><span class="string" id="7743143">&#39;x&#39;</span><span class="op" id="7743146">}</span><span class="op" id="7743147">,</span>&nbsp;<span class="num" id="7743149">1000</span><span class="op" id="7743153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743157">for</span>&nbsp;<span class="ident" id="7743161">i</span>&nbsp;<span class="op" id="7743163">:=</span>&nbsp;<span class="num" id="7743166">0</span><span class="op" id="7743167">;</span>&nbsp;<span class="ident" id="7743169">i</span>&nbsp;<span class="op" id="7743171">&lt;</span>&nbsp;<span class="num" id="7743173">1000</span><span class="op" id="7743177">;</span>&nbsp;<span class="ident" id="7743179">i</span><span class="op" id="7743180">++</span>&nbsp;<span class="op" id="7743183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743188">if</span>&nbsp;<span class="ident" id="7743191">test</span><span class="op" id="7743195">.</span><span class="ident" id="7743196">compressed</span>&nbsp;<span class="op" id="7743207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7743213">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743256">_</span><span class="op" id="7743257">,</span>&nbsp;<span class="ident" id="7743259">err</span>&nbsp;<span class="op" id="7743263">:=</span>&nbsp;<span class="ident" id="7743266">io</span><span class="op" id="7743268">.</span><span class="ident" id="7743269">ReadFull</span><span class="op" id="7743277">(</span><span class="ident" id="7743278">rand</span><span class="op" id="7743282">.</span><span class="ident" id="7743283">Reader</span><span class="op" id="7743289">,</span>&nbsp;<span class="ident" id="7743291">chunk</span><span class="op" id="7743296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743302">checkErr</span><span class="op" id="7743310">(</span><span class="ident" id="7743311">err</span><span class="op" id="7743314">,</span>&nbsp;<span class="string" id="7743316">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="7743338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743348">wr</span><span class="op" id="7743350">.</span><span class="ident" id="7743351">Write</span><span class="op" id="7743356">(</span><span class="ident" id="7743357">chunk</span><span class="op" id="7743362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743366">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743370">if</span>&nbsp;<span class="ident" id="7743373">test</span><span class="op" id="7743377">.</span><span class="ident" id="7743378">compressed</span>&nbsp;<span class="op" id="7743389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743394">err</span>&nbsp;<span class="op" id="7743398">:=</span>&nbsp;<span class="ident" id="7743401">wr</span><span class="op" id="7743403">.</span><span class="op" id="7743404">(</span><span class="op" id="7743405">*</span><span class="ident" id="7743406">gzip</span><span class="op" id="7743410">.</span><span class="ident" id="7743411">Writer</span><span class="op" id="7743417">)</span><span class="op" id="7743418">.</span><span class="ident" id="7743419">Close</span><span class="op" id="7743424">(</span><span class="op" id="7743425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743430">checkErr</span><span class="op" id="7743438">(</span><span class="ident" id="7743439">err</span><span class="op" id="7743442">,</span>&nbsp;<span class="string" id="7743444">&#34;compressor&nbsp;close&#34;</span><span class="op" id="7743462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743470">if</span>&nbsp;<span class="ident" id="7743473">test</span><span class="op" id="7743477">.</span><span class="ident" id="7743478">chunked</span>&nbsp;<span class="op" id="7743486">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743491">buf</span><span class="op" id="7743494">.</span><span class="ident" id="7743495">WriteString</span><span class="op" id="7743506">(</span><span class="string" id="7743507">&#34;0\r\n\r\n&#34;</span><span class="op" id="7743518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743526">buf</span><span class="op" id="7743529">.</span><span class="ident" id="7743530">WriteString</span><span class="op" id="7743541">(</span><span class="string" id="7743542">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7743561">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743566">bufr</span>&nbsp;<span class="op" id="7743571">:=</span>&nbsp;<span class="ident" id="7743574">bufio</span><span class="op" id="7743579">.</span><span class="ident" id="7743580">NewReader</span><span class="op" id="7743589">(</span><span class="op" id="7743590">&amp;</span><span class="ident" id="7743591">buf</span><span class="op" id="7743594">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743598">resp</span><span class="op" id="7743602">,</span>&nbsp;<span class="ident" id="7743604">err</span>&nbsp;<span class="op" id="7743608">:=</span>&nbsp;<span class="ident" id="7743611">ReadResponse</span><span class="op" id="7743623">(</span><span class="ident" id="7743624">bufr</span><span class="op" id="7743628">,</span>&nbsp;<span class="ident" id="7743630">dummyReq</span><span class="op" id="7743638">(</span><span class="string" id="7743639">&#34;GET&#34;</span><span class="op" id="7743644">)</span><span class="op" id="7743645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743649">checkErr</span><span class="op" id="7743657">(</span><span class="ident" id="7743658">err</span><span class="op" id="7743661">,</span>&nbsp;<span class="string" id="7743663">&#34;ReadResponse&#34;</span><span class="op" id="7743677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743681">expectedLength</span>&nbsp;<span class="op" id="7743696">:=</span>&nbsp;<span class="ident" id="7743699">int64</span><span class="op" id="7743704">(</span><span class="op" id="7743705">-</span><span class="num" id="7743706">1</span><span class="op" id="7743707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743711">if</span>&nbsp;<span class="op" id="7743714">!</span><span class="ident" id="7743715">test</span><span class="op" id="7743719">.</span><span class="ident" id="7743720">chunked</span>&nbsp;<span class="op" id="7743728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743733">expectedLength</span>&nbsp;<span class="op" id="7743748">=</span>&nbsp;<span class="num" id="7743750">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743764">if</span>&nbsp;<span class="ident" id="7743767">resp</span><span class="op" id="7743771">.</span><span class="ident" id="7743772">ContentLength</span>&nbsp;<span class="op" id="7743786">!=</span>&nbsp;<span class="ident" id="7743789">expectedLength</span>&nbsp;<span class="op" id="7743804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743809">fatalf</span><span class="op" id="7743815">(</span><span class="string" id="7743816">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7743853">,</span>&nbsp;<span class="ident" id="7743855">expectedLength</span><span class="op" id="7743869">,</span>&nbsp;<span class="ident" id="7743871">resp</span><span class="op" id="7743875">.</span><span class="ident" id="7743876">ContentLength</span><span class="op" id="7743889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743897">if</span>&nbsp;<span class="ident" id="7743900">resp</span><span class="op" id="7743904">.</span><span class="ident" id="7743905">Body</span>&nbsp;<span class="op" id="7743910">==</span>&nbsp;<span class="builtintype" id="7743913">nil</span>&nbsp;<span class="op" id="7743917">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743922">fatalf</span><span class="op" id="7743928">(</span><span class="string" id="7743929">&#34;nil&nbsp;body&#34;</span><span class="op" id="7743939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7743943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7743947">if</span>&nbsp;<span class="ident" id="7743950">test</span><span class="op" id="7743954">.</span><span class="ident" id="7743955">compressed</span>&nbsp;<span class="op" id="7743966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7743971">gzReader</span><span class="op" id="7743979">,</span>&nbsp;<span class="ident" id="7743981">err</span>&nbsp;<span class="op" id="7743985">:=</span>&nbsp;<span class="ident" id="7743988">gzip</span><span class="op" id="7743992">.</span><span class="ident" id="7743993">NewReader</span><span class="op" id="7744002">(</span><span class="ident" id="7744003">resp</span><span class="op" id="7744007">.</span><span class="ident" id="7744008">Body</span><span class="op" id="7744012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744017">checkErr</span><span class="op" id="7744025">(</span><span class="ident" id="7744026">err</span><span class="op" id="7744029">,</span>&nbsp;<span class="string" id="7744031">&#34;gzip.NewReader&#34;</span><span class="op" id="7744047">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744052">resp</span><span class="op" id="7744056">.</span><span class="ident" id="7744057">Body</span>&nbsp;<span class="op" id="7744062">=</span>&nbsp;<span class="op" id="7744064">&amp;</span><span class="ident" id="7744065">readerAndCloser</span><span class="op" id="7744080">{</span><span class="ident" id="7744081">gzReader</span><span class="op" id="7744089">,</span>&nbsp;<span class="ident" id="7744091">resp</span><span class="op" id="7744095">.</span><span class="ident" id="7744096">Body</span><span class="op" id="7744100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744109">rbuf</span>&nbsp;<span class="op" id="7744114">:=</span>&nbsp;<span class="builtinfunc" id="7744117">make</span><span class="op" id="7744121">(</span><span class="op" id="7744122">[</span><span class="op" id="7744123">]</span><span class="builtintype" id="7744124">byte</span><span class="op" id="7744128">,</span>&nbsp;<span class="num" id="7744130">2500</span><span class="op" id="7744134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744138">n</span><span class="op" id="7744139">,</span>&nbsp;<span class="ident" id="7744141">err</span>&nbsp;<span class="op" id="7744145">:=</span>&nbsp;<span class="ident" id="7744148">io</span><span class="op" id="7744150">.</span><span class="ident" id="7744151">ReadFull</span><span class="op" id="7744159">(</span><span class="ident" id="7744160">resp</span><span class="op" id="7744164">.</span><span class="ident" id="7744165">Body</span><span class="op" id="7744169">,</span>&nbsp;<span class="ident" id="7744171">rbuf</span><span class="op" id="7744175">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744179">checkErr</span><span class="op" id="7744187">(</span><span class="ident" id="7744188">err</span><span class="op" id="7744191">,</span>&nbsp;<span class="string" id="7744193">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="7744213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7744217">if</span>&nbsp;<span class="ident" id="7744220">n</span>&nbsp;<span class="op" id="7744222">!=</span>&nbsp;<span class="num" id="7744225">2500</span>&nbsp;<span class="op" id="7744230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744235">fatalf</span><span class="op" id="7744241">(</span><span class="string" id="7744242">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7744271">,</span>&nbsp;<span class="ident" id="7744273">n</span><span class="op" id="7744274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7744282">if</span>&nbsp;<span class="ident" id="7744285">test</span><span class="op" id="7744289">.</span><span class="ident" id="7744290">compressed</span>&nbsp;<span class="op" id="7744301">==</span>&nbsp;<span class="builtintype" id="7744304">false</span>&nbsp;<span class="op" id="7744310">&amp;&amp;</span>&nbsp;<span class="op" id="7744313">!</span><span class="ident" id="7744314">bytes</span><span class="op" id="7744319">.</span><span class="ident" id="7744320">Equal</span><span class="op" id="7744325">(</span><span class="ident" id="7744326">bytes</span><span class="op" id="7744331">.</span><span class="ident" id="7744332">Repeat</span><span class="op" id="7744338">(</span><span class="op" id="7744339">[</span><span class="op" id="7744340">]</span><span class="builtintype" id="7744341">byte</span><span class="op" id="7744345">{</span><span class="string" id="7744346">&#39;x&#39;</span><span class="op" id="7744349">}</span><span class="op" id="7744350">,</span>&nbsp;<span class="num" id="7744352">2500</span><span class="op" id="7744356">)</span><span class="op" id="7744357">,</span>&nbsp;<span class="ident" id="7744359">rbuf</span><span class="op" id="7744363">)</span>&nbsp;<span class="op" id="7744365">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744370">fatalf</span><span class="op" id="7744376">(</span><span class="string" id="7744377">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7744416">,</span>&nbsp;<span class="builtintype" id="7744418">string</span><span class="op" id="7744424">(</span><span class="ident" id="7744425">rbuf</span><span class="op" id="7744429">)</span><span class="op" id="7744430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744438">resp</span><span class="op" id="7744442">.</span><span class="ident" id="7744443">Body</span><span class="op" id="7744447">.</span><span class="ident" id="7744448">Close</span><span class="op" id="7744453">(</span><span class="op" id="7744454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744459">rest</span><span class="op" id="7744463">,</span>&nbsp;<span class="ident" id="7744465">err</span>&nbsp;<span class="op" id="7744469">:=</span>&nbsp;<span class="ident" id="7744472">ioutil</span><span class="op" id="7744478">.</span><span class="ident" id="7744479">ReadAll</span><span class="op" id="7744486">(</span><span class="ident" id="7744487">bufr</span><span class="op" id="7744491">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744495">checkErr</span><span class="op" id="7744503">(</span><span class="ident" id="7744504">err</span><span class="op" id="7744507">,</span>&nbsp;<span class="string" id="7744509">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="7744531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7744535">if</span>&nbsp;<span class="ident" id="7744538">e</span><span class="op" id="7744539">,</span>&nbsp;<span class="ident" id="7744541">g</span>&nbsp;<span class="op" id="7744543">:=</span>&nbsp;<span class="string" id="7744546">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7744565">,</span>&nbsp;<span class="builtintype" id="7744567">string</span><span class="op" id="7744573">(</span><span class="ident" id="7744574">rest</span><span class="op" id="7744578">)</span><span class="op" id="7744579">;</span>&nbsp;<span class="ident" id="7744581">e</span>&nbsp;<span class="op" id="7744583">!=</span>&nbsp;<span class="ident" id="7744586">g</span>&nbsp;<span class="op" id="7744588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744593">g</span>&nbsp;<span class="op" id="7744595">=</span>&nbsp;<span class="ident" id="7744597">regexp</span><span class="op" id="7744603">.</span><span class="ident" id="7744604">MustCompile</span><span class="op" id="7744615">(</span><span class="string" id="7744616">`(xx+)`</span><span class="op" id="7744623">)</span><span class="op" id="7744624">.</span><span class="ident" id="7744625">ReplaceAllStringFunc</span><span class="op" id="7744645">(</span><span class="ident" id="7744646">g</span><span class="op" id="7744647">,</span>&nbsp;<span class="keyword" id="7744649">func</span><span class="op" id="7744653">(</span><span class="ident" id="7744654">match</span>&nbsp;<span class="builtintype" id="7744660">string</span><span class="op" id="7744666">)</span>&nbsp;<span class="builtintype" id="7744668">string</span>&nbsp;<span class="op" id="7744675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7744681">return</span>&nbsp;<span class="ident" id="7744688">fmt</span><span class="op" id="7744691">.</span><span class="ident" id="7744692">Sprintf</span><span class="op" id="7744699">(</span><span class="string" id="7744700">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="7744717">,</span>&nbsp;<span class="builtinfunc" id="7744719">len</span><span class="op" id="7744722">(</span><span class="ident" id="7744723">match</span><span class="op" id="7744728">)</span><span class="op" id="7744729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744734">}</span><span class="op" id="7744735">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744740">fatalf</span><span class="op" id="7744746">(</span><span class="string" id="7744747">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7744776">,</span>&nbsp;<span class="ident" id="7744778">g</span><span class="op" id="7744779">,</span>&nbsp;<span class="ident" id="7744781">e</span><span class="op" id="7744782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7744789">}</span><br>
<span class="lineno"></span><span class="op" id="7744791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="7744794">func</span>&nbsp;<span class="ident" id="7744799">diff</span><span class="op" id="7744803">(</span><span class="ident" id="7744804">t</span>&nbsp;<span class="op" id="7744806">*</span><span class="ident" id="7744807">testing</span><span class="op" id="7744814">.</span><span class="ident" id="7744815">T</span><span class="op" id="7744816">,</span>&nbsp;<span class="ident" id="7744818">prefix</span>&nbsp;<span class="builtintype" id="7744825">string</span><span class="op" id="7744831">,</span>&nbsp;<span class="ident" id="7744833">have</span><span class="op" id="7744837">,</span>&nbsp;<span class="ident" id="7744839">want</span>&nbsp;<span class="keyword" id="7744844">interface</span><span class="op" id="7744853">{</span><span class="op" id="7744854">}</span><span class="op" id="7744855">)</span>&nbsp;<span class="op" id="7744857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744860">hv</span>&nbsp;<span class="op" id="7744863">:=</span>&nbsp;<span class="ident" id="7744866">reflect</span><span class="op" id="7744873">.</span><span class="ident" id="7744874">ValueOf</span><span class="op" id="7744881">(</span><span class="ident" id="7744882">have</span><span class="op" id="7744886">)</span><span class="op" id="7744887">.</span><span class="ident" id="7744888">Elem</span><span class="op" id="7744892">(</span><span class="op" id="7744893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744896">wv</span>&nbsp;<span class="op" id="7744899">:=</span>&nbsp;<span class="ident" id="7744902">reflect</span><span class="op" id="7744909">.</span><span class="ident" id="7744910">ValueOf</span><span class="op" id="7744917">(</span><span class="ident" id="7744918">want</span><span class="op" id="7744922">)</span><span class="op" id="7744923">.</span><span class="ident" id="7744924">Elem</span><span class="op" id="7744928">(</span><span class="op" id="7744929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7744932">if</span>&nbsp;<span class="ident" id="7744935">hv</span><span class="op" id="7744937">.</span><span class="ident" id="7744938">Type</span><span class="op" id="7744942">(</span><span class="op" id="7744943">)</span>&nbsp;<span class="op" id="7744945">!=</span>&nbsp;<span class="ident" id="7744948">wv</span><span class="op" id="7744950">.</span><span class="ident" id="7744951">Type</span><span class="op" id="7744955">(</span><span class="op" id="7744956">)</span>&nbsp;<span class="op" id="7744958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7744962">t</span><span class="op" id="7744963">.</span><span class="ident" id="7744964">Errorf</span><span class="op" id="7744970">(</span><span class="string" id="7744971">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7745001">,</span>&nbsp;<span class="ident" id="7745003">prefix</span><span class="op" id="7745009">,</span>&nbsp;<span class="ident" id="7745011">hv</span><span class="op" id="7745013">.</span><span class="ident" id="7745014">Type</span><span class="op" id="7745018">(</span><span class="op" id="7745019">)</span><span class="op" id="7745020">,</span>&nbsp;<span class="ident" id="7745022">wv</span><span class="op" id="7745024">.</span><span class="ident" id="7745025">Type</span><span class="op" id="7745029">(</span><span class="op" id="7745030">)</span><span class="op" id="7745031">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745037">for</span>&nbsp;<span class="ident" id="7745041">i</span>&nbsp;<span class="op" id="7745043">:=</span>&nbsp;<span class="num" id="7745046">0</span><span class="op" id="7745047">;</span>&nbsp;<span class="ident" id="7745049">i</span>&nbsp;<span class="op" id="7745051">&lt;</span>&nbsp;<span class="ident" id="7745053">hv</span><span class="op" id="7745055">.</span><span class="ident" id="7745056">NumField</span><span class="op" id="7745064">(</span><span class="op" id="7745065">)</span><span class="op" id="7745066">;</span>&nbsp;<span class="ident" id="7745068">i</span><span class="op" id="7745069">++</span>&nbsp;<span class="op" id="7745072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745076">hf</span>&nbsp;<span class="op" id="7745079">:=</span>&nbsp;<span class="ident" id="7745082">hv</span><span class="op" id="7745084">.</span><span class="ident" id="7745085">Field</span><span class="op" id="7745090">(</span><span class="ident" id="7745091">i</span><span class="op" id="7745092">)</span><span class="op" id="7745093">.</span><span class="ident" id="7745094">Interface</span><span class="op" id="7745103">(</span><span class="op" id="7745104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745108">wf</span>&nbsp;<span class="op" id="7745111">:=</span>&nbsp;<span class="ident" id="7745114">wv</span><span class="op" id="7745116">.</span><span class="ident" id="7745117">Field</span><span class="op" id="7745122">(</span><span class="ident" id="7745123">i</span><span class="op" id="7745124">)</span><span class="op" id="7745125">.</span><span class="ident" id="7745126">Interface</span><span class="op" id="7745135">(</span><span class="op" id="7745136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745140">if</span>&nbsp;<span class="op" id="7745143">!</span><span class="ident" id="7745144">reflect</span><span class="op" id="7745151">.</span><span class="ident" id="7745152">DeepEqual</span><span class="op" id="7745161">(</span><span class="ident" id="7745162">hf</span><span class="op" id="7745164">,</span>&nbsp;<span class="ident" id="7745166">wf</span><span class="op" id="7745168">)</span>&nbsp;<span class="op" id="7745170">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745175">t</span><span class="op" id="7745176">.</span><span class="ident" id="7745177">Errorf</span><span class="op" id="7745183">(</span><span class="string" id="7745184">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7745205">,</span>&nbsp;<span class="ident" id="7745207">prefix</span><span class="op" id="7745213">,</span>&nbsp;<span class="ident" id="7745215">hv</span><span class="op" id="7745217">.</span><span class="ident" id="7745218">Type</span><span class="op" id="7745222">(</span><span class="op" id="7745223">)</span><span class="op" id="7745224">.</span><span class="ident" id="7745225">Field</span><span class="op" id="7745230">(</span><span class="ident" id="7745231">i</span><span class="op" id="7745232">)</span><span class="op" id="7745233">.</span><span class="ident" id="7745234">Name</span><span class="op" id="7745238">,</span>&nbsp;<span class="ident" id="7745240">hf</span><span class="op" id="7745242">,</span>&nbsp;<span class="ident" id="7745244">wf</span><span class="op" id="7745246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745253">}</span><br>
<span class="lineno"></span><span class="op" id="7745255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7745258">type</span>&nbsp;<span class="ident" id="7745263">responseLocationTest</span>&nbsp;<span class="keyword" id="7745284">struct</span>&nbsp;<span class="op" id="7745291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745294">location</span>&nbsp;<span class="builtintype" id="7745303">string</span>&nbsp;<span class="comment" id="7745310">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745347">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7745356">string</span>&nbsp;<span class="comment" id="7745363">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745394">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7745403">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745411">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="7745420">error</span><br>
<span class="lineno">570</span><span class="op" id="7745426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745429">var</span>&nbsp;<span class="ident" id="7745433">responseLocationTests</span>&nbsp;<span class="op" id="7745455">=</span>&nbsp;<span class="op" id="7745457">[</span><span class="op" id="7745458">]</span><span class="ident" id="7745459">responseLocationTest</span><span class="op" id="7745479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745482">{</span><span class="string" id="7745483">&#34;/foo&#34;</span><span class="op" id="7745489">,</span>&nbsp;<span class="string" id="7745491">&#34;http://bar.com/baz&#34;</span><span class="op" id="7745511">,</span>&nbsp;<span class="string" id="7745513">&#34;http://bar.com/foo&#34;</span><span class="op" id="7745533">,</span>&nbsp;<span class="builtintype" id="7745535">nil</span><span class="op" id="7745538">}</span><span class="op" id="7745539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745542">{</span><span class="string" id="7745543">&#34;http://foo.com/&#34;</span><span class="op" id="7745560">,</span>&nbsp;<span class="string" id="7745562">&#34;http://bar.com/baz&#34;</span><span class="op" id="7745582">,</span>&nbsp;<span class="string" id="7745584">&#34;http://foo.com/&#34;</span><span class="op" id="7745601">,</span>&nbsp;<span class="builtintype" id="7745603">nil</span><span class="op" id="7745606">}</span><span class="op" id="7745607">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745610">{</span><span class="string" id="7745611">&#34;&#34;</span><span class="op" id="7745613">,</span>&nbsp;<span class="string" id="7745615">&#34;http://bar.com/baz&#34;</span><span class="op" id="7745635">,</span>&nbsp;<span class="string" id="7745637">&#34;&#34;</span><span class="op" id="7745639">,</span>&nbsp;<span class="ident" id="7745641">ErrNoLocation</span><span class="op" id="7745654">}</span><span class="op" id="7745655">,</span><br>
<span class="lineno"></span><span class="op" id="7745657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745660">func</span>&nbsp;<span class="ident" id="7745665">TestLocationResponse</span><span class="op" id="7745685">(</span><span class="ident" id="7745686">t</span>&nbsp;<span class="op" id="7745688">*</span><span class="ident" id="7745689">testing</span><span class="op" id="7745696">.</span><span class="ident" id="7745697">T</span><span class="op" id="7745698">)</span>&nbsp;<span class="op" id="7745700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745703">for</span>&nbsp;<span class="ident" id="7745707">i</span><span class="op" id="7745708">,</span>&nbsp;<span class="ident" id="7745710">tt</span>&nbsp;<span class="op" id="7745713">:=</span>&nbsp;<span class="keyword" id="7745716">range</span>&nbsp;<span class="ident" id="7745722">responseLocationTests</span>&nbsp;<span class="op" id="7745744">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745748">res</span>&nbsp;<span class="op" id="7745752">:=</span>&nbsp;<span class="builtinfunc" id="7745755">new</span><span class="op" id="7745758">(</span><span class="ident" id="7745759">Response</span><span class="op" id="7745767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745771">res</span><span class="op" id="7745774">.</span><span class="ident" id="7745775">Header</span>&nbsp;<span class="op" id="7745782">=</span>&nbsp;<span class="builtinfunc" id="7745784">make</span><span class="op" id="7745788">(</span><span class="ident" id="7745789">Header</span><span class="op" id="7745795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745799">res</span><span class="op" id="7745802">.</span><span class="ident" id="7745803">Header</span><span class="op" id="7745809">.</span><span class="ident" id="7745810">Set</span><span class="op" id="7745813">(</span><span class="string" id="7745814">&#34;Location&#34;</span><span class="op" id="7745824">,</span>&nbsp;<span class="ident" id="7745826">tt</span><span class="op" id="7745828">.</span><span class="ident" id="7745829">location</span><span class="op" id="7745837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745841">if</span>&nbsp;<span class="ident" id="7745844">tt</span><span class="op" id="7745846">.</span><span class="ident" id="7745847">requrl</span>&nbsp;<span class="op" id="7745854">!=</span>&nbsp;<span class="string" id="7745857">&#34;&#34;</span>&nbsp;<span class="op" id="7745860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745865">res</span><span class="op" id="7745868">.</span><span class="ident" id="7745869">Request</span>&nbsp;<span class="op" id="7745877">=</span>&nbsp;<span class="op" id="7745879">&amp;</span><span class="ident" id="7745880">Request</span><span class="op" id="7745887">{</span><span class="op" id="7745888">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745893">var</span>&nbsp;<span class="ident" id="7745897">err</span>&nbsp;<span class="builtintype" id="7745901">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745910">res</span><span class="op" id="7745913">.</span><span class="ident" id="7745914">Request</span><span class="op" id="7745921">.</span><span class="ident" id="7745922">URL</span><span class="op" id="7745925">,</span>&nbsp;<span class="ident" id="7745927">err</span>&nbsp;<span class="op" id="7745931">=</span>&nbsp;<span class="ident" id="7745933">url</span><span class="op" id="7745936">.</span><span class="ident" id="7745937">Parse</span><span class="op" id="7745942">(</span><span class="ident" id="7745943">tt</span><span class="op" id="7745945">.</span><span class="ident" id="7745946">requrl</span><span class="op" id="7745952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7745957">if</span>&nbsp;<span class="ident" id="7745960">err</span>&nbsp;<span class="op" id="7745964">!=</span>&nbsp;<span class="builtintype" id="7745967">nil</span>&nbsp;<span class="op" id="7745971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7745977">t</span><span class="op" id="7745978">.</span><span class="ident" id="7745979">Fatalf</span><span class="op" id="7745985">(</span><span class="string" id="7745986">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7746007">,</span>&nbsp;<span class="ident" id="7746009">tt</span><span class="op" id="7746011">.</span><span class="ident" id="7746012">requrl</span><span class="op" id="7746018">,</span>&nbsp;<span class="ident" id="7746020">err</span><span class="op" id="7746023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746028">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746037">got</span><span class="op" id="7746040">,</span>&nbsp;<span class="ident" id="7746042">err</span>&nbsp;<span class="op" id="7746046">:=</span>&nbsp;<span class="ident" id="7746049">res</span><span class="op" id="7746052">.</span><span class="ident" id="7746053">Location</span><span class="op" id="7746061">(</span><span class="op" id="7746062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746066">if</span>&nbsp;<span class="ident" id="7746069">tt</span><span class="op" id="7746071">.</span><span class="ident" id="7746072">wantErr</span>&nbsp;<span class="op" id="7746080">!=</span>&nbsp;<span class="builtintype" id="7746083">nil</span>&nbsp;<span class="op" id="7746087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746092">if</span>&nbsp;<span class="ident" id="7746095">err</span>&nbsp;<span class="op" id="7746099">==</span>&nbsp;<span class="builtintype" id="7746102">nil</span>&nbsp;<span class="op" id="7746106">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746112">t</span><span class="op" id="7746113">.</span><span class="ident" id="7746114">Errorf</span><span class="op" id="7746120">(</span><span class="string" id="7746121">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7746143">,</span>&nbsp;<span class="ident" id="7746145">i</span><span class="op" id="7746146">,</span>&nbsp;<span class="ident" id="7746148">tt</span><span class="op" id="7746150">.</span><span class="ident" id="7746151">wantErr</span><span class="op" id="7746158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746164">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746181">if</span>&nbsp;<span class="ident" id="7746184">g</span><span class="op" id="7746185">,</span>&nbsp;<span class="ident" id="7746187">e</span>&nbsp;<span class="op" id="7746189">:=</span>&nbsp;<span class="ident" id="7746192">err</span><span class="op" id="7746195">.</span><span class="ident" id="7746196">Error</span><span class="op" id="7746201">(</span><span class="op" id="7746202">)</span><span class="op" id="7746203">,</span>&nbsp;<span class="ident" id="7746205">tt</span><span class="op" id="7746207">.</span><span class="ident" id="7746208">wantErr</span><span class="op" id="7746215">.</span><span class="ident" id="7746216">Error</span><span class="op" id="7746221">(</span><span class="op" id="7746222">)</span><span class="op" id="7746223">;</span>&nbsp;<span class="ident" id="7746225">g</span>&nbsp;<span class="op" id="7746227">!=</span>&nbsp;<span class="ident" id="7746230">e</span>&nbsp;<span class="op" id="7746232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746238">t</span><span class="op" id="7746239">.</span><span class="ident" id="7746240">Errorf</span><span class="op" id="7746246">(</span><span class="string" id="7746247">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7746268">,</span>&nbsp;<span class="ident" id="7746270">i</span><span class="op" id="7746271">,</span>&nbsp;<span class="ident" id="7746273">g</span><span class="op" id="7746274">,</span>&nbsp;<span class="ident" id="7746276">e</span><span class="op" id="7746277">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746283">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746300">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746315">if</span>&nbsp;<span class="ident" id="7746318">err</span>&nbsp;<span class="op" id="7746322">!=</span>&nbsp;<span class="builtintype" id="7746325">nil</span>&nbsp;<span class="op" id="7746329">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746334">t</span><span class="op" id="7746335">.</span><span class="ident" id="7746336">Errorf</span><span class="op" id="7746342">(</span><span class="string" id="7746343">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="7746355">,</span>&nbsp;<span class="ident" id="7746357">i</span><span class="op" id="7746358">,</span>&nbsp;<span class="ident" id="7746360">err</span><span class="op" id="7746363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746368">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746383">if</span>&nbsp;<span class="ident" id="7746386">g</span><span class="op" id="7746387">,</span>&nbsp;<span class="ident" id="7746389">e</span>&nbsp;<span class="op" id="7746391">:=</span>&nbsp;<span class="ident" id="7746394">got</span><span class="op" id="7746397">.</span><span class="ident" id="7746398">String</span><span class="op" id="7746404">(</span><span class="op" id="7746405">)</span><span class="op" id="7746406">,</span>&nbsp;<span class="ident" id="7746408">tt</span><span class="op" id="7746410">.</span><span class="ident" id="7746411">want</span><span class="op" id="7746415">;</span>&nbsp;<span class="ident" id="7746417">g</span>&nbsp;<span class="op" id="7746419">!=</span>&nbsp;<span class="ident" id="7746422">e</span>&nbsp;<span class="op" id="7746424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746429">t</span><span class="op" id="7746430">.</span><span class="ident" id="7746431">Errorf</span><span class="op" id="7746437">(</span><span class="string" id="7746438">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7746464">,</span>&nbsp;<span class="ident" id="7746466">i</span><span class="op" id="7746467">,</span>&nbsp;<span class="ident" id="7746469">g</span><span class="op" id="7746470">,</span>&nbsp;<span class="ident" id="7746472">e</span><span class="op" id="7746473">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746480">}</span><br>
<span class="lineno"></span><span class="op" id="7746482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7746485">func</span>&nbsp;<span class="ident" id="7746490">TestResponseStatusStutter</span><span class="op" id="7746515">(</span><span class="ident" id="7746516">t</span>&nbsp;<span class="op" id="7746518">*</span><span class="ident" id="7746519">testing</span><span class="op" id="7746526">.</span><span class="ident" id="7746527">T</span><span class="op" id="7746528">)</span>&nbsp;<span class="op" id="7746530">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746533">r</span>&nbsp;<span class="op" id="7746535">:=</span>&nbsp;<span class="op" id="7746538">&amp;</span><span class="ident" id="7746539">Response</span><span class="op" id="7746547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746551">Status</span><span class="op" id="7746557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746563">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="7746580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746584">StatusCode</span><span class="op" id="7746594">:</span>&nbsp;<span class="num" id="7746596">123</span><span class="op" id="7746599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746603">ProtoMajor</span><span class="op" id="7746613">:</span>&nbsp;<span class="num" id="7746615">1</span><span class="op" id="7746616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746620">ProtoMinor</span><span class="op" id="7746630">:</span>&nbsp;<span class="num" id="7746632">3</span><span class="op" id="7746633">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746639">var</span>&nbsp;<span class="ident" id="7746643">buf</span>&nbsp;<span class="ident" id="7746647">bytes</span><span class="op" id="7746652">.</span><span class="ident" id="7746653">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746661">r</span><span class="op" id="7746662">.</span><span class="ident" id="7746663">Write</span><span class="op" id="7746668">(</span><span class="op" id="7746669">&amp;</span><span class="ident" id="7746670">buf</span><span class="op" id="7746673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746676">if</span>&nbsp;<span class="ident" id="7746679">strings</span><span class="op" id="7746686">.</span><span class="ident" id="7746687">Contains</span><span class="op" id="7746695">(</span><span class="ident" id="7746696">buf</span><span class="op" id="7746699">.</span><span class="ident" id="7746700">String</span><span class="op" id="7746706">(</span><span class="op" id="7746707">)</span><span class="op" id="7746708">,</span>&nbsp;<span class="string" id="7746710">&#34;123&nbsp;123&#34;</span><span class="op" id="7746719">)</span>&nbsp;<span class="op" id="7746721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746725">t</span><span class="op" id="7746726">.</span><span class="ident" id="7746727">Errorf</span><span class="op" id="7746733">(</span><span class="string" id="7746734">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="7746757">,</span>&nbsp;<span class="ident" id="7746759">buf</span><span class="op" id="7746762">.</span><span class="ident" id="7746763">String</span><span class="op" id="7746769">(</span><span class="op" id="7746770">)</span><span class="op" id="7746771">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7746774">}</span><br>
<span class="lineno"></span><span class="op" id="7746776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7746779">func</span>&nbsp;<span class="ident" id="7746784">TestResponseContentLengthShortBody</span><span class="op" id="7746818">(</span><span class="ident" id="7746819">t</span>&nbsp;<span class="op" id="7746821">*</span><span class="ident" id="7746822">testing</span><span class="op" id="7746829">.</span><span class="ident" id="7746830">T</span><span class="op" id="7746831">)</span>&nbsp;<span class="op" id="7746833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7746836">const</span>&nbsp;<span class="ident" id="7746842">shortBody</span>&nbsp;<span class="op" id="7746852">=</span>&nbsp;<span class="string" id="7746854">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746884">br</span>&nbsp;<span class="op" id="7746887">:=</span>&nbsp;<span class="ident" id="7746890">bufio</span><span class="op" id="7746895">.</span><span class="ident" id="7746896">NewReader</span><span class="op" id="7746905">(</span><span class="ident" id="7746906">strings</span><span class="op" id="7746913">.</span><span class="ident" id="7746914">NewReader</span><span class="op" id="7746923">(</span><span class="string" id="7746924">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7746946">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746950">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7746976">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7746980">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7746987">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746991">shortBody</span><span class="op" id="7747000">)</span><span class="op" id="7747001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747004">res</span><span class="op" id="7747007">,</span>&nbsp;<span class="ident" id="7747009">err</span>&nbsp;<span class="op" id="7747013">:=</span>&nbsp;<span class="ident" id="7747016">ReadResponse</span><span class="op" id="7747028">(</span><span class="ident" id="7747029">br</span><span class="op" id="7747031">,</span>&nbsp;<span class="op" id="7747033">&amp;</span><span class="ident" id="7747034">Request</span><span class="op" id="7747041">{</span><span class="ident" id="7747042">Method</span><span class="op" id="7747048">:</span>&nbsp;<span class="string" id="7747050">&#34;GET&#34;</span><span class="op" id="7747055">}</span><span class="op" id="7747056">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747059">if</span>&nbsp;<span class="ident" id="7747062">err</span>&nbsp;<span class="op" id="7747066">!=</span>&nbsp;<span class="builtintype" id="7747069">nil</span>&nbsp;<span class="op" id="7747073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747077">t</span><span class="op" id="7747078">.</span><span class="ident" id="7747079">Fatal</span><span class="op" id="7747084">(</span><span class="ident" id="7747085">err</span><span class="op" id="7747088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747094">if</span>&nbsp;<span class="ident" id="7747097">res</span><span class="op" id="7747100">.</span><span class="ident" id="7747101">ContentLength</span>&nbsp;<span class="op" id="7747115">!=</span>&nbsp;<span class="num" id="7747118">123</span>&nbsp;<span class="op" id="7747122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747126">t</span><span class="op" id="7747127">.</span><span class="ident" id="7747128">Fatalf</span><span class="op" id="7747134">(</span><span class="string" id="7747135">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="7747166">,</span>&nbsp;<span class="ident" id="7747168">res</span><span class="op" id="7747171">.</span><span class="ident" id="7747172">ContentLength</span><span class="op" id="7747185">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747191">var</span>&nbsp;<span class="ident" id="7747195">buf</span>&nbsp;<span class="ident" id="7747199">bytes</span><span class="op" id="7747204">.</span><span class="ident" id="7747205">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747213">n</span><span class="op" id="7747214">,</span>&nbsp;<span class="ident" id="7747216">err</span>&nbsp;<span class="op" id="7747220">:=</span>&nbsp;<span class="ident" id="7747223">io</span><span class="op" id="7747225">.</span><span class="ident" id="7747226">Copy</span><span class="op" id="7747230">(</span><span class="op" id="7747231">&amp;</span><span class="ident" id="7747232">buf</span><span class="op" id="7747235">,</span>&nbsp;<span class="ident" id="7747237">res</span><span class="op" id="7747240">.</span><span class="ident" id="7747241">Body</span><span class="op" id="7747245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747248">if</span>&nbsp;<span class="ident" id="7747251">n</span>&nbsp;<span class="op" id="7747253">!=</span>&nbsp;<span class="ident" id="7747256">int64</span><span class="op" id="7747261">(</span><span class="builtinfunc" id="7747262">len</span><span class="op" id="7747265">(</span><span class="ident" id="7747266">shortBody</span><span class="op" id="7747275">)</span><span class="op" id="7747276">)</span>&nbsp;<span class="op" id="7747278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747282">t</span><span class="op" id="7747283">.</span><span class="ident" id="7747284">Errorf</span><span class="op" id="7747290">(</span><span class="string" id="7747291">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="7747326">,</span>&nbsp;<span class="ident" id="7747328">n</span><span class="op" id="7747329">,</span>&nbsp;<span class="builtinfunc" id="7747331">len</span><span class="op" id="7747334">(</span><span class="ident" id="7747335">shortBody</span><span class="op" id="7747344">)</span><span class="op" id="7747345">,</span>&nbsp;<span class="ident" id="7747347">shortBody</span><span class="op" id="7747356">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747362">if</span>&nbsp;<span class="ident" id="7747365">buf</span><span class="op" id="7747368">.</span><span class="ident" id="7747369">String</span><span class="op" id="7747375">(</span><span class="op" id="7747376">)</span>&nbsp;<span class="op" id="7747378">!=</span>&nbsp;<span class="ident" id="7747381">shortBody</span>&nbsp;<span class="op" id="7747391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747395">t</span><span class="op" id="7747396">.</span><span class="ident" id="7747397">Errorf</span><span class="op" id="7747403">(</span><span class="string" id="7747404">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7747427">,</span>&nbsp;<span class="ident" id="7747429">buf</span><span class="op" id="7747432">.</span><span class="ident" id="7747433">String</span><span class="op" id="7747439">(</span><span class="op" id="7747440">)</span><span class="op" id="7747441">,</span>&nbsp;<span class="ident" id="7747443">shortBody</span><span class="op" id="7747452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747458">if</span>&nbsp;<span class="ident" id="7747461">err</span>&nbsp;<span class="op" id="7747465">!=</span>&nbsp;<span class="ident" id="7747468">io</span><span class="op" id="7747470">.</span><span class="ident" id="7747471">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7747488">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747492">t</span><span class="op" id="7747493">.</span><span class="ident" id="7747494">Errorf</span><span class="op" id="7747500">(</span><span class="string" id="7747501">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7747548">,</span>&nbsp;<span class="ident" id="7747550">err</span><span class="op" id="7747553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747556">}</span><br>
<span class="lineno"></span><span class="op" id="7747558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7747561">func</span>&nbsp;<span class="ident" id="7747566">TestReadResponseUnexpectedEOF</span><span class="op" id="7747595">(</span><span class="ident" id="7747596">t</span>&nbsp;<span class="op" id="7747598">*</span><span class="ident" id="7747599">testing</span><span class="op" id="7747606">.</span><span class="ident" id="7747607">T</span><span class="op" id="7747608">)</span>&nbsp;<span class="op" id="7747610">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747613">br</span>&nbsp;<span class="op" id="7747616">:=</span>&nbsp;<span class="ident" id="7747619">bufio</span><span class="op" id="7747624">.</span><span class="ident" id="7747625">NewReader</span><span class="op" id="7747634">(</span><span class="ident" id="7747635">strings</span><span class="op" id="7747642">.</span><span class="ident" id="7747643">NewReader</span><span class="op" id="7747652">(</span><span class="string" id="7747653">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="7747690">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7747694">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="7747724">)</span><span class="op" id="7747725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747728">_</span><span class="op" id="7747729">,</span>&nbsp;<span class="ident" id="7747731">err</span>&nbsp;<span class="op" id="7747735">:=</span>&nbsp;<span class="ident" id="7747738">ReadResponse</span><span class="op" id="7747750">(</span><span class="ident" id="7747751">br</span><span class="op" id="7747753">,</span>&nbsp;<span class="builtintype" id="7747755">nil</span><span class="op" id="7747758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747761">if</span>&nbsp;<span class="ident" id="7747764">err</span>&nbsp;<span class="op" id="7747768">!=</span>&nbsp;<span class="ident" id="7747771">io</span><span class="op" id="7747773">.</span><span class="ident" id="7747774">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7747791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747795">t</span><span class="op" id="7747796">.</span><span class="ident" id="7747797">Errorf</span><span class="op" id="7747803">(</span><span class="string" id="7747804">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7747849">,</span>&nbsp;<span class="ident" id="7747851">err</span><span class="op" id="7747854">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7747857">}</span><br>
<span class="lineno"></span><span class="op" id="7747859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7747862">func</span>&nbsp;<span class="ident" id="7747867">TestNeedsSniff</span><span class="op" id="7747881">(</span><span class="ident" id="7747882">t</span>&nbsp;<span class="op" id="7747884">*</span><span class="ident" id="7747885">testing</span><span class="op" id="7747892">.</span><span class="ident" id="7747893">T</span><span class="op" id="7747894">)</span>&nbsp;<span class="op" id="7747896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7747899">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7747951">r</span>&nbsp;<span class="op" id="7747953">:=</span>&nbsp;<span class="op" id="7747956">&amp;</span><span class="ident" id="7747957">response</span><span class="op" id="7747965">{</span><span class="op" id="7747966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7747969">if</span>&nbsp;<span class="ident" id="7747972">got</span><span class="op" id="7747975">,</span>&nbsp;<span class="ident" id="7747977">want</span>&nbsp;<span class="op" id="7747982">:=</span>&nbsp;<span class="ident" id="7747985">r</span><span class="op" id="7747986">.</span><span class="ident" id="7747987">needsSniff</span><span class="op" id="7747997">(</span><span class="op" id="7747998">)</span><span class="op" id="7747999">,</span>&nbsp;<span class="builtintype" id="7748001">true</span><span class="op" id="7748005">;</span>&nbsp;<span class="ident" id="7748007">got</span>&nbsp;<span class="op" id="7748011">!=</span>&nbsp;<span class="ident" id="7748014">want</span>&nbsp;<span class="op" id="7748019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748023">t</span><span class="op" id="7748024">.</span><span class="ident" id="7748025">Errorf</span><span class="op" id="7748031">(</span><span class="string" id="7748032">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7748058">,</span>&nbsp;<span class="ident" id="7748060">got</span><span class="op" id="7748063">,</span>&nbsp;<span class="ident" id="7748065">want</span><span class="op" id="7748069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7748075">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748129">r</span><span class="op" id="7748130">.</span><span class="ident" id="7748131">handlerHeader</span>&nbsp;<span class="op" id="7748145">=</span>&nbsp;<span class="ident" id="7748147">Header</span><span class="op" id="7748153">{</span><span class="string" id="7748154">&#34;Content-Type&#34;</span><span class="op" id="7748168">:</span>&nbsp;<span class="builtintype" id="7748170">nil</span><span class="op" id="7748173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7748176">if</span>&nbsp;<span class="ident" id="7748179">got</span><span class="op" id="7748182">,</span>&nbsp;<span class="ident" id="7748184">want</span>&nbsp;<span class="op" id="7748189">:=</span>&nbsp;<span class="ident" id="7748192">r</span><span class="op" id="7748193">.</span><span class="ident" id="7748194">needsSniff</span><span class="op" id="7748204">(</span><span class="op" id="7748205">)</span><span class="op" id="7748206">,</span>&nbsp;<span class="builtintype" id="7748208">false</span><span class="op" id="7748213">;</span>&nbsp;<span class="ident" id="7748215">got</span>&nbsp;<span class="op" id="7748219">!=</span>&nbsp;<span class="ident" id="7748222">want</span>&nbsp;<span class="op" id="7748227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7748231">t</span><span class="op" id="7748232">.</span><span class="ident" id="7748233">Errorf</span><span class="op" id="7748239">(</span><span class="string" id="7748240">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7748285">,</span>&nbsp;<span class="ident" id="7748287">got</span><span class="op" id="7748290">,</span>&nbsp;<span class="ident" id="7748292">want</span><span class="op" id="7748296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748299">}</span><br>
<span class="lineno"></span><span class="op" id="7748301">}</span>
</div>
</body>
</html>
