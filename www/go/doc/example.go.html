<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5988284">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5988339">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5988393">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5988444">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5988490">package</span>&nbsp;<span class="ident" id="5988498">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5988503">import</span>&nbsp;<span class="op" id="5988510">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988513">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988523">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988535">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988543">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988553">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988561">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988572">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988583">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5988594">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5988609">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5988612">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5988682">type</span>&nbsp;<span class="ident" id="5988687">Example</span>&nbsp;<span class="keyword" id="5988695">struct</span>&nbsp;<span class="op" id="5988702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988705">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5988717">string</span>&nbsp;<span class="comment" id="5988724">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988763">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5988775">string</span>&nbsp;<span class="comment" id="5988782">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988814">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5988826"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5988829">.</span><span class="ident" id="5988830">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988836">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5988848">*</span><span class="ident" id="5988849"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5988852">.</span><span class="ident" id="5988853">File</span>&nbsp;<span class="comment" id="5988858">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988901">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5988913">[</span><span class="op" id="5988914">]</span><span class="op" id="5988915">*</span><span class="ident" id="5988916"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5988919">.</span><span class="ident" id="5988920">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988934">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5988946">string</span>&nbsp;<span class="comment" id="5988953">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5988973">EmptyOutput</span>&nbsp;<span class="builtintype" id="5988985">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5988992">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5989016">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5989028">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5989035">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="5989065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5989068">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5989143">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="5989220">//</span><br>
<span class="lineno"></span><span class="comment" id="5989223">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5989293">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5989368">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="5989386">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="5989462">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5989538">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="5989601">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5989675">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5989751">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="5989824">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5989858">func</span>&nbsp;<span class="ident" id="5989863">Examples</span><span class="op" id="5989871">(</span><span class="ident" id="5989872">files</span>&nbsp;<span class="op" id="5989878">...</span><span class="op" id="5989881">*</span><span class="ident" id="5989882"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5989885">.</span><span class="ident" id="5989886">File</span><span class="op" id="5989890">)</span>&nbsp;<span class="op" id="5989892">[</span><span class="op" id="5989893">]</span><span class="op" id="5989894">*</span><span class="ident" id="5989895"><a href="/go/doc/example.go.html#5988687">Example</a></span>&nbsp;<span class="op" id="5989903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5989906">var</span>&nbsp;<span class="ident" id="5989910">list</span>&nbsp;<span class="op" id="5989915">[</span><span class="op" id="5989916">]</span><span class="op" id="5989917">*</span><span class="ident" id="5989918"><a href="/go/doc/example.go.html#5988687">Example</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5989927">for</span>&nbsp;<span class="ident" id="5989931">_</span><span class="op" id="5989932">,</span>&nbsp;<span class="ident" id="5989934">file</span>&nbsp;<span class="op" id="5989939">:=</span>&nbsp;<span class="keyword" id="5989942">range</span>&nbsp;<span class="ident" id="5989948"><a href="/go/doc/example.go.html#5989872">files</a></span>&nbsp;<span class="op" id="5989954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5989958">hasTests</span>&nbsp;<span class="op" id="5989967">:=</span>&nbsp;<span class="ident" id="5989970">false</span>&nbsp;<span class="comment" id="5989976">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990015">numDecl</span>&nbsp;<span class="op" id="5990023">:=</span>&nbsp;<span class="num" id="5990026">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5990033">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990084">var</span>&nbsp;<span class="ident" id="5990088">flist</span>&nbsp;<span class="op" id="5990094">[</span><span class="op" id="5990095">]</span><span class="op" id="5990096">*</span><span class="ident" id="5990097"><a href="/go/doc/example.go.html#5988687">Example</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990107">for</span>&nbsp;<span class="ident" id="5990111">_</span><span class="op" id="5990112">,</span>&nbsp;<span class="ident" id="5990114">decl</span>&nbsp;<span class="op" id="5990119">:=</span>&nbsp;<span class="keyword" id="5990122">range</span>&nbsp;<span class="ident" id="5990128"><a href="/go/doc/example.go.html#5989934">file</a></span><span class="op" id="5990132">.</span><span class="ident" id="5990133">Decls</span>&nbsp;<span class="op" id="5990139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990144">if</span>&nbsp;<span class="ident" id="5990147">g</span><span class="op" id="5990148">,</span>&nbsp;<span class="ident" id="5990150">ok</span>&nbsp;<span class="op" id="5990153">:=</span>&nbsp;<span class="ident" id="5990156"><a href="/go/doc/example.go.html#5990114">decl</a></span><span class="op" id="5990160">.</span><span class="op" id="5990161">(</span><span class="op" id="5990162">*</span><span class="ident" id="5990163"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5990166">.</span><span class="ident" id="5990167">GenDecl</span><span class="op" id="5990174">)</span><span class="op" id="5990175">;</span>&nbsp;<span class="ident" id="5990177"><a href="/go/doc/example.go.html#5990150">ok</a></span>&nbsp;<span class="op" id="5990180">&amp;&amp;</span>&nbsp;<span class="ident" id="5990183"><a href="/go/doc/example.go.html#5990147">g</a></span><span class="op" id="5990184">.</span><span class="ident" id="5990185">Tok</span>&nbsp;<span class="op" id="5990189">!=</span>&nbsp;<span class="ident" id="5990192"><a href="/go/doc/example.go.html#5988523">token</a></span><span class="op" id="5990197">.</span><span class="ident" id="5990198">IMPORT</span>&nbsp;<span class="op" id="5990205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990211"><a href="/go/doc/example.go.html#5990015">numDecl</a></span><span class="op" id="5990218">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990225">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990242">f</span><span class="op" id="5990243">,</span>&nbsp;<span class="ident" id="5990245">ok</span>&nbsp;<span class="op" id="5990248">:=</span>&nbsp;<span class="ident" id="5990251"><a href="/go/doc/example.go.html#5990114">decl</a></span><span class="op" id="5990255">.</span><span class="op" id="5990256">(</span><span class="op" id="5990257">*</span><span class="ident" id="5990258"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5990261">.</span><span class="ident" id="5990262">FuncDecl</span><span class="op" id="5990270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990275">if</span>&nbsp;<span class="op" id="5990278">!</span><span class="ident" id="5990279"><a href="/go/doc/example.go.html#5990245">ok</a></span>&nbsp;<span class="op" id="5990282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990288">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990305"><a href="/go/doc/example.go.html#5990015">numDecl</a></span><span class="op" id="5990312">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990318">name</span>&nbsp;<span class="op" id="5990323">:=</span>&nbsp;<span class="ident" id="5990326"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990327">.</span><span class="ident" id="5990328">Name</span><span class="op" id="5990332">.</span><span class="ident" id="5990333">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990341">if</span>&nbsp;<span class="ident" id="5990344"><a href="/go/doc/example.go.html#5992175">isTest</a></span><span class="op" id="5990350">(</span><span class="ident" id="5990351"><a href="/go/doc/example.go.html#5990318">name</a></span><span class="op" id="5990355">,</span>&nbsp;<span class="string" id="5990357">&#34;Test&#34;</span><span class="op" id="5990363">)</span>&nbsp;<span class="op" id="5990365">||</span>&nbsp;<span class="ident" id="5990368"><a href="/go/doc/example.go.html#5992175">isTest</a></span><span class="op" id="5990374">(</span><span class="ident" id="5990375"><a href="/go/doc/example.go.html#5990318">name</a></span><span class="op" id="5990379">,</span>&nbsp;<span class="string" id="5990381">&#34;Benchmark&#34;</span><span class="op" id="5990392">)</span>&nbsp;<span class="op" id="5990394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990400"><a href="/go/doc/example.go.html#5989958">hasTests</a></span>&nbsp;<span class="op" id="5990409">=</span>&nbsp;<span class="ident" id="5990411">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990420">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990437">if</span>&nbsp;<span class="op" id="5990440">!</span><span class="ident" id="5990441"><a href="/go/doc/example.go.html#5992175">isTest</a></span><span class="op" id="5990447">(</span><span class="ident" id="5990448"><a href="/go/doc/example.go.html#5990318">name</a></span><span class="op" id="5990452">,</span>&nbsp;<span class="string" id="5990454">&#34;Example&#34;</span><span class="op" id="5990463">)</span>&nbsp;<span class="op" id="5990465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990471">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990483">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990488">var</span>&nbsp;<span class="ident" id="5990492">doc</span>&nbsp;<span class="builtintype" id="5990496">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990506">if</span>&nbsp;<span class="ident" id="5990509"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990510">.</span><span class="ident" id="5990511">Doc</span>&nbsp;<span class="op" id="5990515">!=</span>&nbsp;<span class="ident" id="5990518">nil</span>&nbsp;<span class="op" id="5990522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990528"><a href="/go/doc/example.go.html#5990492">doc</a></span>&nbsp;<span class="op" id="5990532">=</span>&nbsp;<span class="ident" id="5990534"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990535">.</span><span class="ident" id="5990536">Doc</span><span class="op" id="5990539">.</span><span class="ident" id="5990540">Text</span><span class="op" id="5990544">(</span><span class="op" id="5990545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990555">output</span><span class="op" id="5990561">,</span>&nbsp;<span class="ident" id="5990563">hasOutput</span>&nbsp;<span class="op" id="5990573">:=</span>&nbsp;<span class="ident" id="5990576"><a href="/go/doc/example.go.html#5991431">exampleOutput</a></span><span class="op" id="5990589">(</span><span class="ident" id="5990590"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990591">.</span><span class="ident" id="5990592">Body</span><span class="op" id="5990596">,</span>&nbsp;<span class="ident" id="5990598"><a href="/go/doc/example.go.html#5989934">file</a></span><span class="op" id="5990602">.</span><span class="ident" id="5990603">Comments</span><span class="op" id="5990611">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990616"><a href="/go/doc/example.go.html#5990088">flist</a></span>&nbsp;<span class="op" id="5990622">=</span>&nbsp;<span class="builtinfunc" id="5990624">append</span><span class="op" id="5990630">(</span><span class="ident" id="5990631"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5990636">,</span>&nbsp;<span class="op" id="5990638">&amp;</span><span class="ident" id="5990639"><a href="/go/doc/example.go.html#5988687">Example</a></span><span class="op" id="5990646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990652">Name</span><span class="op" id="5990656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990665"><a href="/go/doc/example.go.html#5990318">name</a></span><span class="op" id="5990669">[</span><span class="builtinfunc" id="5990670">len</span><span class="op" id="5990673">(</span><span class="string" id="5990674">&#34;Example&#34;</span><span class="op" id="5990683">)</span><span class="op" id="5990684">:</span><span class="op" id="5990685">]</span><span class="op" id="5990686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990692">Doc</span><span class="op" id="5990695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990705"><a href="/go/doc/example.go.html#5990492">doc</a></span><span class="op" id="5990708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990714">Code</span><span class="op" id="5990718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990727"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990728">.</span><span class="ident" id="5990729">Body</span><span class="op" id="5990733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990739">Play</span><span class="op" id="5990743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990752"><a href="/go/doc/example.go.html#5992792">playExample</a></span><span class="op" id="5990763">(</span><span class="ident" id="5990764"><a href="/go/doc/example.go.html#5989934">file</a></span><span class="op" id="5990768">,</span>&nbsp;<span class="ident" id="5990770"><a href="/go/doc/example.go.html#5990242">f</a></span><span class="op" id="5990771">.</span><span class="ident" id="5990772">Body</span><span class="op" id="5990776">)</span><span class="op" id="5990777">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990783">Comments</span><span class="op" id="5990791">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990796"><a href="/go/doc/example.go.html#5989934">file</a></span><span class="op" id="5990800">.</span><span class="ident" id="5990801">Comments</span><span class="op" id="5990809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990815">Output</span><span class="op" id="5990821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5990828"><a href="/go/doc/example.go.html#5990555">output</a></span><span class="op" id="5990834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990840">EmptyOutput</span><span class="op" id="5990851">:</span>&nbsp;<span class="ident" id="5990853"><a href="/go/doc/example.go.html#5990555">output</a></span>&nbsp;<span class="op" id="5990860">==</span>&nbsp;<span class="string" id="5990863">&#34;&#34;</span>&nbsp;<span class="op" id="5990866">&amp;&amp;</span>&nbsp;<span class="ident" id="5990869"><a href="/go/doc/example.go.html#5990563">hasOutput</a></span><span class="op" id="5990878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5990884">Order</span><span class="op" id="5990889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5990897">len</span><span class="op" id="5990900">(</span><span class="ident" id="5990901"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5990906">)</span><span class="op" id="5990907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990912">}</span><span class="op" id="5990913">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5990917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5990921">if</span>&nbsp;<span class="op" id="5990924">!</span><span class="ident" id="5990925"><a href="/go/doc/example.go.html#5989958">hasTests</a></span>&nbsp;<span class="op" id="5990934">&amp;&amp;</span>&nbsp;<span class="ident" id="5990937"><a href="/go/doc/example.go.html#5990015">numDecl</a></span>&nbsp;<span class="op" id="5990945">&gt;</span>&nbsp;<span class="num" id="5990947">1</span>&nbsp;<span class="op" id="5990949">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5990952">len</span><span class="op" id="5990955">(</span><span class="ident" id="5990956"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5990961">)</span>&nbsp;<span class="op" id="5990963">==</span>&nbsp;<span class="num" id="5990966">1</span>&nbsp;<span class="op" id="5990968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5990973">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5991028">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5991080">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991133"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5991138">[</span><span class="num" id="5991139">0</span><span class="op" id="5991140">]</span><span class="op" id="5991141">.</span><span class="ident" id="5991142">Code</span>&nbsp;<span class="op" id="5991147">=</span>&nbsp;<span class="ident" id="5991149"><a href="/go/doc/example.go.html#5989934">file</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991157"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5991162">[</span><span class="num" id="5991163">0</span><span class="op" id="5991164">]</span><span class="op" id="5991165">.</span><span class="ident" id="5991166">Play</span>&nbsp;<span class="op" id="5991171">=</span>&nbsp;<span class="ident" id="5991173"><a href="/go/doc/example.go.html#5997016">playExampleFile</a></span><span class="op" id="5991188">(</span><span class="ident" id="5991189"><a href="/go/doc/example.go.html#5989934">file</a></span><span class="op" id="5991193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5991197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991201"><a href="/go/doc/example.go.html#5989910">list</a></span>&nbsp;<span class="op" id="5991206">=</span>&nbsp;<span class="builtinfunc" id="5991208">append</span><span class="op" id="5991214">(</span><span class="ident" id="5991215"><a href="/go/doc/example.go.html#5989910">list</a></span><span class="op" id="5991219">,</span>&nbsp;<span class="ident" id="5991221"><a href="/go/doc/example.go.html#5990088">flist</a></span><span class="op" id="5991226">...</span><span class="op" id="5991229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5991232">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991235"><a href="/go/doc/example.go.html#5988553">sort</a></span><span class="op" id="5991239">.</span><span class="ident" id="5991240">Sort</span><span class="op" id="5991244">(</span><span class="ident" id="5991245"><a href="/go/doc/example.go.html#5992426">exampleByName</a></span><span class="op" id="5991258">(</span><span class="ident" id="5991259"><a href="/go/doc/example.go.html#5989910">list</a></span><span class="op" id="5991263">)</span><span class="op" id="5991264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991267">return</span>&nbsp;<span class="ident" id="5991274"><a href="/go/doc/example.go.html#5989910">list</a></span><br>
<span class="lineno"></span><span class="op" id="5991279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5991282">var</span>&nbsp;<span class="ident" id="5991286">outputPrefix</span>&nbsp;<span class="op" id="5991299">=</span>&nbsp;<span class="ident" id="5991301"><a href="/go/doc/example.go.html#5988543">regexp</a></span><span class="op" id="5991307">.</span><span class="ident" id="5991308">MustCompile</span><span class="op" id="5991319">(</span><span class="string" id="5991320">`(?i)^[[:space:]]*output:`</span><span class="op" id="5991346">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5991349">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="5991426">func</span>&nbsp;<span class="ident" id="5991431">exampleOutput</span><span class="op" id="5991444">(</span><span class="ident" id="5991445">b</span>&nbsp;<span class="op" id="5991447">*</span><span class="ident" id="5991448"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5991451">.</span><span class="ident" id="5991452">BlockStmt</span><span class="op" id="5991461">,</span>&nbsp;<span class="ident" id="5991463">comments</span>&nbsp;<span class="op" id="5991472">[</span><span class="op" id="5991473">]</span><span class="op" id="5991474">*</span><span class="ident" id="5991475"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5991478">.</span><span class="ident" id="5991479">CommentGroup</span><span class="op" id="5991491">)</span>&nbsp;<span class="op" id="5991493">(</span><span class="ident" id="5991494">output</span>&nbsp;<span class="builtintype" id="5991501">string</span><span class="op" id="5991507">,</span>&nbsp;<span class="ident" id="5991509">ok</span>&nbsp;<span class="builtintype" id="5991512">bool</span><span class="op" id="5991516">)</span>&nbsp;<span class="op" id="5991518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991521">if</span>&nbsp;<span class="ident" id="5991524">_</span><span class="op" id="5991525">,</span>&nbsp;<span class="ident" id="5991527">last</span>&nbsp;<span class="op" id="5991532">:=</span>&nbsp;<span class="ident" id="5991535"><a href="/go/doc/example.go.html#5998609">lastComment</a></span><span class="op" id="5991546">(</span><span class="ident" id="5991547"><a href="/go/doc/example.go.html#5991445">b</a></span><span class="op" id="5991548">,</span>&nbsp;<span class="ident" id="5991550"><a href="/go/doc/example.go.html#5991463">comments</a></span><span class="op" id="5991558">)</span><span class="op" id="5991559">;</span>&nbsp;<span class="ident" id="5991561"><a href="/go/doc/example.go.html#5991527">last</a></span>&nbsp;<span class="op" id="5991566">!=</span>&nbsp;<span class="ident" id="5991569">nil</span>&nbsp;<span class="op" id="5991573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5991577">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991626">text</span>&nbsp;<span class="op" id="5991631">:=</span>&nbsp;<span class="ident" id="5991634"><a href="/go/doc/example.go.html#5991527">last</a></span><span class="op" id="5991638">.</span><span class="ident" id="5991639">Text</span><span class="op" id="5991643">(</span><span class="op" id="5991644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991648">if</span>&nbsp;<span class="ident" id="5991651">loc</span>&nbsp;<span class="op" id="5991655">:=</span>&nbsp;<span class="ident" id="5991658"><a href="/go/doc/example.go.html#5991286">outputPrefix</a></span><span class="op" id="5991670">.</span><span class="ident" id="5991671">FindStringIndex</span><span class="op" id="5991686">(</span><span class="ident" id="5991687"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991691">)</span><span class="op" id="5991692">;</span>&nbsp;<span class="ident" id="5991694"><a href="/go/doc/example.go.html#5991651">loc</a></span>&nbsp;<span class="op" id="5991698">!=</span>&nbsp;<span class="ident" id="5991701">nil</span>&nbsp;<span class="op" id="5991705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991710"><a href="/go/doc/example.go.html#5991626">text</a></span>&nbsp;<span class="op" id="5991715">=</span>&nbsp;<span class="ident" id="5991717"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991721">[</span><span class="ident" id="5991722"><a href="/go/doc/example.go.html#5991651">loc</a></span><span class="op" id="5991725">[</span><span class="num" id="5991726">1</span><span class="op" id="5991727">]</span><span class="op" id="5991728">:</span><span class="op" id="5991729">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5991734">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991800"><a href="/go/doc/example.go.html#5991626">text</a></span>&nbsp;<span class="op" id="5991805">=</span>&nbsp;<span class="ident" id="5991807"><a href="/go/doc/example.go.html#5988572">strings</a></span><span class="op" id="5991814">.</span><span class="ident" id="5991815">TrimLeft</span><span class="op" id="5991823">(</span><span class="ident" id="5991824"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991828">,</span>&nbsp;<span class="string" id="5991830">&#34;&nbsp;&#34;</span><span class="op" id="5991833">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991838">if</span>&nbsp;<span class="builtinfunc" id="5991841">len</span><span class="op" id="5991844">(</span><span class="ident" id="5991845"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991849">)</span>&nbsp;<span class="op" id="5991851">&gt;</span>&nbsp;<span class="num" id="5991853">0</span>&nbsp;<span class="op" id="5991855">&amp;&amp;</span>&nbsp;<span class="ident" id="5991858"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991862">[</span><span class="num" id="5991863">0</span><span class="op" id="5991864">]</span>&nbsp;<span class="op" id="5991866">==</span>&nbsp;<span class="string" id="5991869">&#39;\n&#39;</span>&nbsp;<span class="op" id="5991874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5991880"><a href="/go/doc/example.go.html#5991626">text</a></span>&nbsp;<span class="op" id="5991885">=</span>&nbsp;<span class="ident" id="5991887"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991891">[</span><span class="num" id="5991892">1</span><span class="op" id="5991893">:</span><span class="op" id="5991894">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5991899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991904">return</span>&nbsp;<span class="ident" id="5991911"><a href="/go/doc/example.go.html#5991626">text</a></span><span class="op" id="5991915">,</span>&nbsp;<span class="ident" id="5991917">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5991924">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5991927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5991930">return</span>&nbsp;<span class="string" id="5991937">&#34;&#34;</span><span class="op" id="5991939">,</span>&nbsp;<span class="ident" id="5991941">false</span>&nbsp;<span class="comment" id="5991947">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="5991976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5991979">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="5992050">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5992121">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="5992170">func</span>&nbsp;<span class="ident" id="5992175">isTest</span><span class="op" id="5992181">(</span><span class="ident" id="5992182">name</span><span class="op" id="5992186">,</span>&nbsp;<span class="ident" id="5992188">prefix</span>&nbsp;<span class="builtintype" id="5992195">string</span><span class="op" id="5992201">)</span>&nbsp;<span class="builtintype" id="5992203">bool</span>&nbsp;<span class="op" id="5992208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992211">if</span>&nbsp;<span class="op" id="5992214">!</span><span class="ident" id="5992215"><a href="/go/doc/example.go.html#5988572">strings</a></span><span class="op" id="5992222">.</span><span class="ident" id="5992223">HasPrefix</span><span class="op" id="5992232">(</span><span class="ident" id="5992233"><a href="/go/doc/example.go.html#5992182">name</a></span><span class="op" id="5992237">,</span>&nbsp;<span class="ident" id="5992239"><a href="/go/doc/example.go.html#5992188">prefix</a></span><span class="op" id="5992245">)</span>&nbsp;<span class="op" id="5992247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992251">return</span>&nbsp;<span class="ident" id="5992258">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5992265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992268">if</span>&nbsp;<span class="builtinfunc" id="5992271">len</span><span class="op" id="5992274">(</span><span class="ident" id="5992275"><a href="/go/doc/example.go.html#5992182">name</a></span><span class="op" id="5992279">)</span>&nbsp;<span class="op" id="5992281">==</span>&nbsp;<span class="builtinfunc" id="5992284">len</span><span class="op" id="5992287">(</span><span class="ident" id="5992288"><a href="/go/doc/example.go.html#5992188">prefix</a></span><span class="op" id="5992294">)</span>&nbsp;<span class="op" id="5992296">{</span>&nbsp;<span class="comment" id="5992298">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992316">return</span>&nbsp;<span class="ident" id="5992323">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5992329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5992332">rune</span><span class="op" id="5992336">,</span>&nbsp;<span class="ident" id="5992338">_</span>&nbsp;<span class="op" id="5992340">:=</span>&nbsp;<span class="ident" id="5992343"><a href="/go/doc/example.go.html#5988594">utf8</a></span><span class="op" id="5992347">.</span><span class="ident" id="5992348">DecodeRuneInString</span><span class="op" id="5992366">(</span><span class="ident" id="5992367"><a href="/go/doc/example.go.html#5992182">name</a></span><span class="op" id="5992371">[</span><span class="builtinfunc" id="5992372">len</span><span class="op" id="5992375">(</span><span class="ident" id="5992376"><a href="/go/doc/example.go.html#5992188">prefix</a></span><span class="op" id="5992382">)</span><span class="op" id="5992383">:</span><span class="op" id="5992384">]</span><span class="op" id="5992385">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992388">return</span>&nbsp;<span class="op" id="5992395">!</span><span class="ident" id="5992396"><a href="/go/doc/example.go.html#5988583">unicode</a></span><span class="op" id="5992403">.</span><span class="ident" id="5992404">IsLower</span><span class="op" id="5992411">(</span><span class="builtintype" id="5992412"><a href="/go/doc/example.go.html#5992332">rune</a></span><span class="op" id="5992416">)</span><br>
<span class="lineno"></span><span class="op" id="5992418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5992421">type</span>&nbsp;<span class="ident" id="5992426">exampleByName</span>&nbsp;<span class="op" id="5992440">[</span><span class="op" id="5992441">]</span><span class="op" id="5992442">*</span><span class="ident" id="5992443"><a href="/go/doc/example.go.html#5988687">Example</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="5992452">func</span>&nbsp;<span class="op" id="5992457">(</span><span class="ident" id="5992458">s</span>&nbsp;<span class="ident" id="5992460"><a href="/go/doc/example.go.html#5992426">exampleByName</a></span><span class="op" id="5992473">)</span>&nbsp;<span class="ident" id="5992475">Len</span><span class="op" id="5992478">(</span><span class="op" id="5992479">)</span>&nbsp;<span class="builtintype" id="5992481">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5992495">{</span>&nbsp;<span class="keyword" id="5992497">return</span>&nbsp;<span class="builtinfunc" id="5992504">len</span><span class="op" id="5992507">(</span><span class="ident" id="5992508"><a href="/go/doc/example.go.html#5992458">s</a></span><span class="op" id="5992509">)</span>&nbsp;<span class="op" id="5992511">}</span><br>
<span class="lineno"></span><span class="keyword" id="5992513">func</span>&nbsp;<span class="op" id="5992518">(</span><span class="ident" id="5992519">s</span>&nbsp;<span class="ident" id="5992521"><a href="/go/doc/example.go.html#5992426">exampleByName</a></span><span class="op" id="5992534">)</span>&nbsp;<span class="ident" id="5992536">Swap</span><span class="op" id="5992540">(</span><span class="ident" id="5992541">i</span><span class="op" id="5992542">,</span>&nbsp;<span class="ident" id="5992544">j</span>&nbsp;<span class="builtintype" id="5992546">int</span><span class="op" id="5992549">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5992556">{</span>&nbsp;<span class="ident" id="5992558"><a href="/go/doc/example.go.html#5992519">s</a></span><span class="op" id="5992559">[</span><span class="ident" id="5992560"><a href="/go/doc/example.go.html#5992541">i</a></span><span class="op" id="5992561">]</span><span class="op" id="5992562">,</span>&nbsp;<span class="ident" id="5992564"><a href="/go/doc/example.go.html#5992519">s</a></span><span class="op" id="5992565">[</span><span class="ident" id="5992566"><a href="/go/doc/example.go.html#5992544">j</a></span><span class="op" id="5992567">]</span>&nbsp;<span class="op" id="5992569">=</span>&nbsp;<span class="ident" id="5992571"><a href="/go/doc/example.go.html#5992519">s</a></span><span class="op" id="5992572">[</span><span class="ident" id="5992573"><a href="/go/doc/example.go.html#5992544">j</a></span><span class="op" id="5992574">]</span><span class="op" id="5992575">,</span>&nbsp;<span class="ident" id="5992577"><a href="/go/doc/example.go.html#5992519">s</a></span><span class="op" id="5992578">[</span><span class="ident" id="5992579"><a href="/go/doc/example.go.html#5992541">i</a></span><span class="op" id="5992580">]</span>&nbsp;<span class="op" id="5992582">}</span><br>
<span class="lineno"></span><span class="keyword" id="5992584">func</span>&nbsp;<span class="op" id="5992589">(</span><span class="ident" id="5992590">s</span>&nbsp;<span class="ident" id="5992592"><a href="/go/doc/example.go.html#5992426">exampleByName</a></span><span class="op" id="5992605">)</span>&nbsp;<span class="ident" id="5992607">Less</span><span class="op" id="5992611">(</span><span class="ident" id="5992612">i</span><span class="op" id="5992613">,</span>&nbsp;<span class="ident" id="5992615">j</span>&nbsp;<span class="builtintype" id="5992617">int</span><span class="op" id="5992620">)</span>&nbsp;<span class="builtintype" id="5992622">bool</span>&nbsp;<span class="op" id="5992627">{</span>&nbsp;<span class="keyword" id="5992629">return</span>&nbsp;<span class="ident" id="5992636"><a href="/go/doc/example.go.html#5992590">s</a></span><span class="op" id="5992637">[</span><span class="ident" id="5992638"><a href="/go/doc/example.go.html#5992612">i</a></span><span class="op" id="5992639">]</span><span class="op" id="5992640">.</span><span class="ident" id="5992641">Name</span>&nbsp;<span class="op" id="5992646">&lt;</span>&nbsp;<span class="ident" id="5992648"><a href="/go/doc/example.go.html#5992590">s</a></span><span class="op" id="5992649">[</span><span class="ident" id="5992650"><a href="/go/doc/example.go.html#5992615">j</a></span><span class="op" id="5992651">]</span><span class="op" id="5992652">.</span><span class="ident" id="5992653">Name</span>&nbsp;<span class="op" id="5992658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5992661">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="5992726">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5992787">func</span>&nbsp;<span class="ident" id="5992792">playExample</span><span class="op" id="5992803">(</span><span class="ident" id="5992804">file</span>&nbsp;<span class="op" id="5992809">*</span><span class="ident" id="5992810"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5992813">.</span><span class="ident" id="5992814">File</span><span class="op" id="5992818">,</span>&nbsp;<span class="ident" id="5992820">body</span>&nbsp;<span class="op" id="5992825">*</span><span class="ident" id="5992826"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5992829">.</span><span class="ident" id="5992830">BlockStmt</span><span class="op" id="5992839">)</span>&nbsp;<span class="op" id="5992841">*</span><span class="ident" id="5992842"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5992845">.</span><span class="ident" id="5992846">File</span>&nbsp;<span class="op" id="5992851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992854">if</span>&nbsp;<span class="op" id="5992857">!</span><span class="ident" id="5992858"><a href="/go/doc/example.go.html#5988572">strings</a></span><span class="op" id="5992865">.</span><span class="ident" id="5992866">HasSuffix</span><span class="op" id="5992875">(</span><span class="ident" id="5992876"><a href="/go/doc/example.go.html#5992804">file</a></span><span class="op" id="5992880">.</span><span class="ident" id="5992881">Name</span><span class="op" id="5992885">.</span><span class="ident" id="5992886">Name</span><span class="op" id="5992890">,</span>&nbsp;<span class="string" id="5992892">&#34;_test&#34;</span><span class="op" id="5992899">)</span>&nbsp;<span class="op" id="5992901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5992905">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5992957">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5992985">return</span>&nbsp;<span class="ident" id="5992992">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5992997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993001">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993046">topDecls</span>&nbsp;<span class="op" id="5993055">:=</span>&nbsp;<span class="builtinfunc" id="5993058">make</span><span class="op" id="5993062">(</span><span class="keyword" id="5993063">map</span><span class="op" id="5993066">[</span><span class="op" id="5993067">*</span><span class="ident" id="5993068"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993071">.</span><span class="ident" id="5993072">Object</span><span class="op" id="5993078">]</span><span class="builtintype" id="5993079">bool</span><span class="op" id="5993083">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993086">for</span>&nbsp;<span class="ident" id="5993090">_</span><span class="op" id="5993091">,</span>&nbsp;<span class="ident" id="5993093">decl</span>&nbsp;<span class="op" id="5993098">:=</span>&nbsp;<span class="keyword" id="5993101">range</span>&nbsp;<span class="ident" id="5993107"><a href="/go/doc/example.go.html#5992804">file</a></span><span class="op" id="5993111">.</span><span class="ident" id="5993112">Decls</span>&nbsp;<span class="op" id="5993118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993122">switch</span>&nbsp;<span class="ident" id="5993129">d</span>&nbsp;<span class="op" id="5993131">:=</span>&nbsp;<span class="ident" id="5993134"><a href="/go/doc/example.go.html#5993093">decl</a></span><span class="op" id="5993138">.</span><span class="op" id="5993139">(</span><span class="keyword" id="5993140">type</span><span class="op" id="5993144">)</span>&nbsp;<span class="op" id="5993146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993150">case</span>&nbsp;<span class="op" id="5993155">*</span><span class="ident" id="5993156"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993159">.</span><span class="ident" id="5993160">FuncDecl</span><span class="op" id="5993168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993173"><a href="/go/doc/example.go.html#5993046">topDecls</a></span><span class="op" id="5993181">[</span><span class="ident" id="5993182"><a href="/go/doc/example.go.html#5993129">d</a></span><span class="op" id="5993183">.</span><span class="ident" id="5993184">Name</span><span class="op" id="5993188">.</span><span class="ident" id="5993189">Obj</span><span class="op" id="5993192">]</span>&nbsp;<span class="op" id="5993194">=</span>&nbsp;<span class="ident" id="5993196">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993203">case</span>&nbsp;<span class="op" id="5993208">*</span><span class="ident" id="5993209"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993212">.</span><span class="ident" id="5993213">GenDecl</span><span class="op" id="5993220">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993225">for</span>&nbsp;<span class="ident" id="5993229">_</span><span class="op" id="5993230">,</span>&nbsp;<span class="ident" id="5993232">spec</span>&nbsp;<span class="op" id="5993237">:=</span>&nbsp;<span class="keyword" id="5993240">range</span>&nbsp;<span class="ident" id="5993246"><a href="/go/doc/example.go.html#5993129">d</a></span><span class="op" id="5993247">.</span><span class="ident" id="5993248">Specs</span>&nbsp;<span class="op" id="5993254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993260">switch</span>&nbsp;<span class="ident" id="5993267">s</span>&nbsp;<span class="op" id="5993269">:=</span>&nbsp;<span class="ident" id="5993272"><a href="/go/doc/example.go.html#5993232">spec</a></span><span class="op" id="5993276">.</span><span class="op" id="5993277">(</span><span class="keyword" id="5993278">type</span><span class="op" id="5993282">)</span>&nbsp;<span class="op" id="5993284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993290">case</span>&nbsp;<span class="op" id="5993295">*</span><span class="ident" id="5993296"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993299">.</span><span class="ident" id="5993300">TypeSpec</span><span class="op" id="5993308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993315"><a href="/go/doc/example.go.html#5993046">topDecls</a></span><span class="op" id="5993323">[</span><span class="ident" id="5993324"><a href="/go/doc/example.go.html#5993267">s</a></span><span class="op" id="5993325">.</span><span class="ident" id="5993326">Name</span><span class="op" id="5993330">.</span><span class="ident" id="5993331">Obj</span><span class="op" id="5993334">]</span>&nbsp;<span class="op" id="5993336">=</span>&nbsp;<span class="ident" id="5993338">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993347">case</span>&nbsp;<span class="op" id="5993352">*</span><span class="ident" id="5993353"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993356">.</span><span class="ident" id="5993357">ValueSpec</span><span class="op" id="5993366">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993373">for</span>&nbsp;<span class="ident" id="5993377">_</span><span class="op" id="5993378">,</span>&nbsp;<span class="ident" id="5993380">id</span>&nbsp;<span class="op" id="5993383">:=</span>&nbsp;<span class="keyword" id="5993386">range</span>&nbsp;<span class="ident" id="5993392"><a href="/go/doc/example.go.html#5993267">s</a></span><span class="op" id="5993393">.</span><span class="ident" id="5993394">Names</span>&nbsp;<span class="op" id="5993400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993408"><a href="/go/doc/example.go.html#5993046">topDecls</a></span><span class="op" id="5993416">[</span><span class="ident" id="5993417"><a href="/go/doc/example.go.html#5993380">id</a></span><span class="op" id="5993419">.</span><span class="ident" id="5993420">Obj</span><span class="op" id="5993423">]</span>&nbsp;<span class="op" id="5993425">=</span>&nbsp;<span class="ident" id="5993427">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993448">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993459">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993527">unresolved</span>&nbsp;<span class="op" id="5993538">:=</span>&nbsp;<span class="builtinfunc" id="5993541">make</span><span class="op" id="5993545">(</span><span class="keyword" id="5993546">map</span><span class="op" id="5993549">[</span><span class="builtintype" id="5993550">string</span><span class="op" id="5993556">]</span><span class="builtintype" id="5993557">bool</span><span class="op" id="5993561">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993564">usesTopDecl</span>&nbsp;<span class="op" id="5993576">:=</span>&nbsp;<span class="ident" id="5993579">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993586">var</span>&nbsp;<span class="ident" id="5993590">inspectFunc</span>&nbsp;<span class="keyword" id="5993602">func</span><span class="op" id="5993606">(</span><span class="ident" id="5993607"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993610">.</span><span class="ident" id="5993611">Node</span><span class="op" id="5993615">)</span>&nbsp;<span class="builtintype" id="5993617">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993623"><a href="/go/doc/example.go.html#5993590">inspectFunc</a></span>&nbsp;<span class="op" id="5993635">=</span>&nbsp;<span class="keyword" id="5993637">func</span><span class="op" id="5993641">(</span><span class="ident" id="5993642">n</span>&nbsp;<span class="ident" id="5993644"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993647">.</span><span class="ident" id="5993648">Node</span><span class="op" id="5993652">)</span>&nbsp;<span class="builtintype" id="5993654">bool</span>&nbsp;<span class="op" id="5993659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993663">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993727">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993791">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993837">if</span>&nbsp;<span class="ident" id="5993840">e</span><span class="op" id="5993841">,</span>&nbsp;<span class="ident" id="5993843">ok</span>&nbsp;<span class="op" id="5993846">:=</span>&nbsp;<span class="ident" id="5993849"><a href="/go/doc/example.go.html#5993642">n</a></span><span class="op" id="5993850">.</span><span class="op" id="5993851">(</span><span class="op" id="5993852">*</span><span class="ident" id="5993853"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993856">.</span><span class="ident" id="5993857">SelectorExpr</span><span class="op" id="5993869">)</span><span class="op" id="5993870">;</span>&nbsp;<span class="ident" id="5993872"><a href="/go/doc/example.go.html#5993843">ok</a></span>&nbsp;<span class="op" id="5993875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5993880"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5993883">.</span><span class="ident" id="5993884">Inspect</span><span class="op" id="5993891">(</span><span class="ident" id="5993892"><a href="/go/doc/example.go.html#5993840">e</a></span><span class="op" id="5993893">.</span><span class="ident" id="5993894">X</span><span class="op" id="5993895">,</span>&nbsp;<span class="ident" id="5993897"><a href="/go/doc/example.go.html#5993590">inspectFunc</a></span><span class="op" id="5993908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5993913">return</span>&nbsp;<span class="ident" id="5993920">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5993928">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993932">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5993987">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994041">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994065">if</span>&nbsp;<span class="ident" id="5994068">e</span><span class="op" id="5994069">,</span>&nbsp;<span class="ident" id="5994071">ok</span>&nbsp;<span class="op" id="5994074">:=</span>&nbsp;<span class="ident" id="5994077"><a href="/go/doc/example.go.html#5993642">n</a></span><span class="op" id="5994078">.</span><span class="op" id="5994079">(</span><span class="op" id="5994080">*</span><span class="ident" id="5994081"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5994084">.</span><span class="ident" id="5994085">KeyValueExpr</span><span class="op" id="5994097">)</span><span class="op" id="5994098">;</span>&nbsp;<span class="ident" id="5994100"><a href="/go/doc/example.go.html#5994071">ok</a></span>&nbsp;<span class="op" id="5994103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994108"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5994111">.</span><span class="ident" id="5994112">Inspect</span><span class="op" id="5994119">(</span><span class="ident" id="5994120"><a href="/go/doc/example.go.html#5994068">e</a></span><span class="op" id="5994121">.</span><span class="ident" id="5994122">Value</span><span class="op" id="5994127">,</span>&nbsp;<span class="ident" id="5994129"><a href="/go/doc/example.go.html#5993590">inspectFunc</a></span><span class="op" id="5994140">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994145">return</span>&nbsp;<span class="ident" id="5994152">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994164">if</span>&nbsp;<span class="ident" id="5994167">id</span><span class="op" id="5994169">,</span>&nbsp;<span class="ident" id="5994171">ok</span>&nbsp;<span class="op" id="5994174">:=</span>&nbsp;<span class="ident" id="5994177"><a href="/go/doc/example.go.html#5993642">n</a></span><span class="op" id="5994178">.</span><span class="op" id="5994179">(</span><span class="op" id="5994180">*</span><span class="ident" id="5994181"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5994184">.</span><span class="ident" id="5994185">Ident</span><span class="op" id="5994190">)</span><span class="op" id="5994191">;</span>&nbsp;<span class="ident" id="5994193"><a href="/go/doc/example.go.html#5994171">ok</a></span>&nbsp;<span class="op" id="5994196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994201">if</span>&nbsp;<span class="ident" id="5994204"><a href="/go/doc/example.go.html#5994167">id</a></span><span class="op" id="5994206">.</span><span class="ident" id="5994207">Obj</span>&nbsp;<span class="op" id="5994211">==</span>&nbsp;<span class="ident" id="5994214">nil</span>&nbsp;<span class="op" id="5994218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994224"><a href="/go/doc/example.go.html#5993527">unresolved</a></span><span class="op" id="5994234">[</span><span class="ident" id="5994235"><a href="/go/doc/example.go.html#5994167">id</a></span><span class="op" id="5994237">.</span><span class="ident" id="5994238">Name</span><span class="op" id="5994242">]</span>&nbsp;<span class="op" id="5994244">=</span>&nbsp;<span class="ident" id="5994246">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994254">}</span>&nbsp;<span class="keyword" id="5994256">else</span>&nbsp;<span class="keyword" id="5994261">if</span>&nbsp;<span class="ident" id="5994264"><a href="/go/doc/example.go.html#5993046">topDecls</a></span><span class="op" id="5994272">[</span><span class="ident" id="5994273"><a href="/go/doc/example.go.html#5994167">id</a></span><span class="op" id="5994275">.</span><span class="ident" id="5994276">Obj</span><span class="op" id="5994279">]</span>&nbsp;<span class="op" id="5994281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994287"><a href="/go/doc/example.go.html#5993564">usesTopDecl</a></span>&nbsp;<span class="op" id="5994299">=</span>&nbsp;<span class="ident" id="5994301">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994317">return</span>&nbsp;<span class="ident" id="5994324">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994333"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5994336">.</span><span class="ident" id="5994337">Inspect</span><span class="op" id="5994344">(</span><span class="ident" id="5994345"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5994349">,</span>&nbsp;<span class="ident" id="5994351"><a href="/go/doc/example.go.html#5993590">inspectFunc</a></span><span class="op" id="5994362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994365">if</span>&nbsp;<span class="ident" id="5994368"><a href="/go/doc/example.go.html#5993564">usesTopDecl</a></span>&nbsp;<span class="op" id="5994380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994384">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994450">return</span>&nbsp;<span class="ident" id="5994457">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994466">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994523">for</span>&nbsp;<span class="ident" id="5994527">n</span>&nbsp;<span class="op" id="5994529">:=</span>&nbsp;<span class="keyword" id="5994532">range</span>&nbsp;<span class="ident" id="5994538"><a href="/go/doc/example.go.html#5993527">unresolved</a></span>&nbsp;<span class="op" id="5994549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994553">if</span>&nbsp;<span class="ident" id="5994556"><a href="/go/doc/reader.go.html#6028695">predeclaredTypes</a></span><span class="op" id="5994572">[</span><span class="ident" id="5994573"><a href="/go/doc/example.go.html#5994527">n</a></span><span class="op" id="5994574">]</span>&nbsp;<span class="op" id="5994576">||</span>&nbsp;<span class="ident" id="5994579"><a href="/go/doc/reader.go.html#6029471">predeclaredConstants</a></span><span class="op" id="5994599">[</span><span class="ident" id="5994600"><a href="/go/doc/example.go.html#5994527">n</a></span><span class="op" id="5994601">]</span>&nbsp;<span class="op" id="5994603">||</span>&nbsp;<span class="ident" id="5994606"><a href="/go/doc/reader.go.html#6029158">predeclaredFuncs</a></span><span class="op" id="5994622">[</span><span class="ident" id="5994623"><a href="/go/doc/example.go.html#5994527">n</a></span><span class="op" id="5994624">]</span>&nbsp;<span class="op" id="5994626">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5994631">delete</span><span class="op" id="5994637">(</span><span class="ident" id="5994638"><a href="/go/doc/example.go.html#5993527">unresolved</a></span><span class="op" id="5994648">,</span>&nbsp;<span class="ident" id="5994650"><a href="/go/doc/example.go.html#5994527">n</a></span><span class="op" id="5994651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5994658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994662">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994731">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5994798">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5994874">namedImports</span>&nbsp;<span class="op" id="5994887">:=</span>&nbsp;<span class="builtinfunc" id="5994890">make</span><span class="op" id="5994894">(</span><span class="keyword" id="5994895">map</span><span class="op" id="5994898">[</span><span class="builtintype" id="5994899">string</span><span class="op" id="5994905">]</span><span class="builtintype" id="5994906">string</span><span class="op" id="5994912">)</span>&nbsp;<span class="comment" id="5994914">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994929">var</span>&nbsp;<span class="ident" id="5994933">blankImports</span>&nbsp;<span class="op" id="5994946">[</span><span class="op" id="5994947">]</span><span class="ident" id="5994948"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5994951">.</span><span class="ident" id="5994952">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5994969">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5994983">for</span>&nbsp;<span class="ident" id="5994987">_</span><span class="op" id="5994988">,</span>&nbsp;<span class="ident" id="5994990">s</span>&nbsp;<span class="op" id="5994992">:=</span>&nbsp;<span class="keyword" id="5994995">range</span>&nbsp;<span class="ident" id="5995001"><a href="/go/doc/example.go.html#5992804">file</a></span><span class="op" id="5995005">.</span><span class="ident" id="5995006">Imports</span>&nbsp;<span class="op" id="5995014">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995018">p</span><span class="op" id="5995019">,</span>&nbsp;<span class="ident" id="5995021">err</span>&nbsp;<span class="op" id="5995025">:=</span>&nbsp;<span class="ident" id="5995028"><a href="/go/doc/example.go.html#5988561">strconv</a></span><span class="op" id="5995035">.</span><span class="ident" id="5995036">Unquote</span><span class="op" id="5995043">(</span><span class="ident" id="5995044"><a href="/go/doc/example.go.html#5994990">s</a></span><span class="op" id="5995045">.</span><span class="ident" id="5995046">Path</span><span class="op" id="5995050">.</span><span class="ident" id="5995051">Value</span><span class="op" id="5995056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995060">if</span>&nbsp;<span class="ident" id="5995063"><a href="/go/doc/example.go.html#5995021">err</a></span>&nbsp;<span class="op" id="5995067">!=</span>&nbsp;<span class="ident" id="5995070">nil</span>&nbsp;<span class="op" id="5995074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995079">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995094">n</span>&nbsp;<span class="op" id="5995096">:=</span>&nbsp;<span class="ident" id="5995099"><a href="/go/doc/example.go.html#5988535">path</a></span><span class="op" id="5995103">.</span><span class="ident" id="5995104">Base</span><span class="op" id="5995108">(</span><span class="ident" id="5995109"><a href="/go/doc/example.go.html#5995018">p</a></span><span class="op" id="5995110">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995114">if</span>&nbsp;<span class="ident" id="5995117"><a href="/go/doc/example.go.html#5994990">s</a></span><span class="op" id="5995118">.</span><span class="ident" id="5995119">Name</span>&nbsp;<span class="op" id="5995124">!=</span>&nbsp;<span class="ident" id="5995127">nil</span>&nbsp;<span class="op" id="5995131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995136"><a href="/go/doc/example.go.html#5995094">n</a></span>&nbsp;<span class="op" id="5995138">=</span>&nbsp;<span class="ident" id="5995140"><a href="/go/doc/example.go.html#5994990">s</a></span><span class="op" id="5995141">.</span><span class="ident" id="5995142">Name</span><span class="op" id="5995146">.</span><span class="ident" id="5995147">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995155">switch</span>&nbsp;<span class="ident" id="5995162"><a href="/go/doc/example.go.html#5995094">n</a></span>&nbsp;<span class="op" id="5995164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995169">case</span>&nbsp;<span class="string" id="5995174">&#34;_&#34;</span><span class="op" id="5995177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995183"><a href="/go/doc/example.go.html#5994933">blankImports</a></span>&nbsp;<span class="op" id="5995196">=</span>&nbsp;<span class="builtinfunc" id="5995198">append</span><span class="op" id="5995204">(</span><span class="ident" id="5995205"><a href="/go/doc/example.go.html#5994933">blankImports</a></span><span class="op" id="5995217">,</span>&nbsp;<span class="ident" id="5995219"><a href="/go/doc/example.go.html#5994990">s</a></span><span class="op" id="5995220">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995226">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995238">case</span>&nbsp;<span class="string" id="5995243">&#34;.&#34;</span><span class="op" id="5995246">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995252">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995295">return</span>&nbsp;<span class="ident" id="5995302">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995309">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995317">if</span>&nbsp;<span class="ident" id="5995320"><a href="/go/doc/example.go.html#5993527">unresolved</a></span><span class="op" id="5995330">[</span><span class="ident" id="5995331"><a href="/go/doc/example.go.html#5995094">n</a></span><span class="op" id="5995332">]</span>&nbsp;<span class="op" id="5995334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995339"><a href="/go/doc/example.go.html#5994874">namedImports</a></span><span class="op" id="5995351">[</span><span class="ident" id="5995352"><a href="/go/doc/example.go.html#5995094">n</a></span><span class="op" id="5995353">]</span>&nbsp;<span class="op" id="5995355">=</span>&nbsp;<span class="ident" id="5995357"><a href="/go/doc/example.go.html#5995018">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5995362">delete</span><span class="op" id="5995368">(</span><span class="ident" id="5995369"><a href="/go/doc/example.go.html#5993527">unresolved</a></span><span class="op" id="5995379">,</span>&nbsp;<span class="ident" id="5995381"><a href="/go/doc/example.go.html#5995094">n</a></span><span class="op" id="5995382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995386">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995393">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995461">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995505">if</span>&nbsp;<span class="builtinfunc" id="5995508">len</span><span class="op" id="5995511">(</span><span class="ident" id="5995512"><a href="/go/doc/example.go.html#5993527">unresolved</a></span><span class="op" id="5995522">)</span>&nbsp;<span class="op" id="5995524">&gt;</span>&nbsp;<span class="num" id="5995526">0</span>&nbsp;<span class="op" id="5995528">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995532">return</span>&nbsp;<span class="ident" id="5995539">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995548">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995602">var</span>&nbsp;<span class="ident" id="5995606">comments</span>&nbsp;<span class="op" id="5995615">[</span><span class="op" id="5995616">]</span><span class="op" id="5995617">*</span><span class="ident" id="5995618"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5995621">.</span><span class="ident" id="5995622">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995636">for</span>&nbsp;<span class="ident" id="5995640">_</span><span class="op" id="5995641">,</span>&nbsp;<span class="ident" id="5995643">s</span>&nbsp;<span class="op" id="5995645">:=</span>&nbsp;<span class="keyword" id="5995648">range</span>&nbsp;<span class="ident" id="5995654"><a href="/go/doc/example.go.html#5994933">blankImports</a></span>&nbsp;<span class="op" id="5995667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995671">if</span>&nbsp;<span class="ident" id="5995674">c</span>&nbsp;<span class="op" id="5995676">:=</span>&nbsp;<span class="ident" id="5995679"><a href="/go/doc/example.go.html#5995643">s</a></span><span class="op" id="5995680">.</span><span class="op" id="5995681">(</span><span class="op" id="5995682">*</span><span class="ident" id="5995683"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5995686">.</span><span class="ident" id="5995687">ImportSpec</span><span class="op" id="5995697">)</span><span class="op" id="5995698">.</span><span class="ident" id="5995699">Doc</span><span class="op" id="5995702">;</span>&nbsp;<span class="ident" id="5995704"><a href="/go/doc/example.go.html#5995674">c</a></span>&nbsp;<span class="op" id="5995706">!=</span>&nbsp;<span class="ident" id="5995709">nil</span>&nbsp;<span class="op" id="5995713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995718"><a href="/go/doc/example.go.html#5995606">comments</a></span>&nbsp;<span class="op" id="5995727">=</span>&nbsp;<span class="builtinfunc" id="5995729">append</span><span class="op" id="5995735">(</span><span class="ident" id="5995736"><a href="/go/doc/example.go.html#5995606">comments</a></span><span class="op" id="5995744">,</span>&nbsp;<span class="ident" id="5995746"><a href="/go/doc/example.go.html#5995674">c</a></span><span class="op" id="5995747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995754">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995758">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995814">for</span>&nbsp;<span class="ident" id="5995818">_</span><span class="op" id="5995819">,</span>&nbsp;<span class="ident" id="5995821">c</span>&nbsp;<span class="op" id="5995823">:=</span>&nbsp;<span class="keyword" id="5995826">range</span>&nbsp;<span class="ident" id="5995832"><a href="/go/doc/example.go.html#5992804">file</a></span><span class="op" id="5995836">.</span><span class="ident" id="5995837">Comments</span>&nbsp;<span class="op" id="5995846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5995850">if</span>&nbsp;<span class="ident" id="5995853"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5995857">.</span><span class="ident" id="5995858">Pos</span><span class="op" id="5995861">(</span><span class="op" id="5995862">)</span>&nbsp;<span class="op" id="5995864">&lt;=</span>&nbsp;<span class="ident" id="5995867"><a href="/go/doc/example.go.html#5995821">c</a></span><span class="op" id="5995868">.</span><span class="ident" id="5995869">Pos</span><span class="op" id="5995872">(</span><span class="op" id="5995873">)</span>&nbsp;<span class="op" id="5995875">&amp;&amp;</span>&nbsp;<span class="ident" id="5995878"><a href="/go/doc/example.go.html#5995821">c</a></span><span class="op" id="5995879">.</span><span class="ident" id="5995880">End</span><span class="op" id="5995883">(</span><span class="op" id="5995884">)</span>&nbsp;<span class="op" id="5995886">&lt;=</span>&nbsp;<span class="ident" id="5995889"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5995893">.</span><span class="ident" id="5995894">End</span><span class="op" id="5995897">(</span><span class="op" id="5995898">)</span>&nbsp;<span class="op" id="5995900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5995905"><a href="/go/doc/example.go.html#5995606">comments</a></span>&nbsp;<span class="op" id="5995914">=</span>&nbsp;<span class="builtinfunc" id="5995916">append</span><span class="op" id="5995922">(</span><span class="ident" id="5995923"><a href="/go/doc/example.go.html#5995606">comments</a></span><span class="op" id="5995931">,</span>&nbsp;<span class="ident" id="5995933"><a href="/go/doc/example.go.html#5995821">c</a></span><span class="op" id="5995934">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5995941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5995945">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996003"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5996007">,</span>&nbsp;<span class="ident" id="5996009"><a href="/go/doc/example.go.html#5995606">comments</a></span>&nbsp;<span class="op" id="5996018">=</span>&nbsp;<span class="ident" id="5996020"><a href="/go/doc/example.go.html#5997925">stripOutputComment</a></span><span class="op" id="5996038">(</span><span class="ident" id="5996039"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5996043">,</span>&nbsp;<span class="ident" id="5996045"><a href="/go/doc/example.go.html#5995606">comments</a></span><span class="op" id="5996053">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5996057">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996092">importDecl</span>&nbsp;<span class="op" id="5996103">:=</span>&nbsp;<span class="op" id="5996106">&amp;</span><span class="ident" id="5996107"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996110">.</span><span class="ident" id="5996111">GenDecl</span><span class="op" id="5996118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996122">Tok</span><span class="op" id="5996125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5996130"><a href="/go/doc/example.go.html#5988523">token</a></span><span class="op" id="5996135">.</span><span class="ident" id="5996136">IMPORT</span><span class="op" id="5996142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996146">Lparen</span><span class="op" id="5996152">:</span>&nbsp;<span class="num" id="5996154">1</span><span class="op" id="5996155">,</span>&nbsp;<span class="comment" id="5996157">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996210">Rparen</span><span class="op" id="5996216">:</span>&nbsp;<span class="num" id="5996218">1</span><span class="op" id="5996219">,</span>&nbsp;<span class="comment" id="5996221">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5996259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5996262">for</span>&nbsp;<span class="ident" id="5996266">n</span><span class="op" id="5996267">,</span>&nbsp;<span class="ident" id="5996269">p</span>&nbsp;<span class="op" id="5996271">:=</span>&nbsp;<span class="keyword" id="5996274">range</span>&nbsp;<span class="ident" id="5996280"><a href="/go/doc/example.go.html#5994874">namedImports</a></span>&nbsp;<span class="op" id="5996293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996297">s</span>&nbsp;<span class="op" id="5996299">:=</span>&nbsp;<span class="op" id="5996302">&amp;</span><span class="ident" id="5996303"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996306">.</span><span class="ident" id="5996307">ImportSpec</span><span class="op" id="5996317">{</span><span class="ident" id="5996318">Path</span><span class="op" id="5996322">:</span>&nbsp;<span class="op" id="5996324">&amp;</span><span class="ident" id="5996325"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996328">.</span><span class="ident" id="5996329">BasicLit</span><span class="op" id="5996337">{</span><span class="ident" id="5996338">Value</span><span class="op" id="5996343">:</span>&nbsp;<span class="ident" id="5996345"><a href="/go/doc/example.go.html#5988561">strconv</a></span><span class="op" id="5996352">.</span><span class="ident" id="5996353">Quote</span><span class="op" id="5996358">(</span><span class="ident" id="5996359"><a href="/go/doc/example.go.html#5996269">p</a></span><span class="op" id="5996360">)</span><span class="op" id="5996361">}</span><span class="op" id="5996362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5996366">if</span>&nbsp;<span class="ident" id="5996369"><a href="/go/doc/example.go.html#5988535">path</a></span><span class="op" id="5996373">.</span><span class="ident" id="5996374">Base</span><span class="op" id="5996378">(</span><span class="ident" id="5996379"><a href="/go/doc/example.go.html#5996269">p</a></span><span class="op" id="5996380">)</span>&nbsp;<span class="op" id="5996382">!=</span>&nbsp;<span class="ident" id="5996385"><a href="/go/doc/example.go.html#5996266">n</a></span>&nbsp;<span class="op" id="5996387">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996392"><a href="/go/doc/example.go.html#5996297">s</a></span><span class="op" id="5996393">.</span><span class="ident" id="5996394">Name</span>&nbsp;<span class="op" id="5996399">=</span>&nbsp;<span class="ident" id="5996401"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996404">.</span><span class="ident" id="5996405">NewIdent</span><span class="op" id="5996413">(</span><span class="ident" id="5996414"><a href="/go/doc/example.go.html#5996266">n</a></span><span class="op" id="5996415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5996419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996423"><a href="/go/doc/example.go.html#5996092">importDecl</a></span><span class="op" id="5996433">.</span><span class="ident" id="5996434">Specs</span>&nbsp;<span class="op" id="5996440">=</span>&nbsp;<span class="builtinfunc" id="5996442">append</span><span class="op" id="5996448">(</span><span class="ident" id="5996449"><a href="/go/doc/example.go.html#5996092">importDecl</a></span><span class="op" id="5996459">.</span><span class="ident" id="5996460">Specs</span><span class="op" id="5996465">,</span>&nbsp;<span class="ident" id="5996467"><a href="/go/doc/example.go.html#5996297">s</a></span><span class="op" id="5996468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5996471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996474"><a href="/go/doc/example.go.html#5996092">importDecl</a></span><span class="op" id="5996484">.</span><span class="ident" id="5996485">Specs</span>&nbsp;<span class="op" id="5996491">=</span>&nbsp;<span class="builtinfunc" id="5996493">append</span><span class="op" id="5996499">(</span><span class="ident" id="5996500"><a href="/go/doc/example.go.html#5996092">importDecl</a></span><span class="op" id="5996510">.</span><span class="ident" id="5996511">Specs</span><span class="op" id="5996516">,</span>&nbsp;<span class="ident" id="5996518"><a href="/go/doc/example.go.html#5994933">blankImports</a></span><span class="op" id="5996530">...</span><span class="op" id="5996533">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5996537">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996567">funcDecl</span>&nbsp;<span class="op" id="5996576">:=</span>&nbsp;<span class="op" id="5996579">&amp;</span><span class="ident" id="5996580"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996583">.</span><span class="ident" id="5996584">FuncDecl</span><span class="op" id="5996592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996596">Name</span><span class="op" id="5996600">:</span>&nbsp;<span class="ident" id="5996602"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996605">.</span><span class="ident" id="5996606">NewIdent</span><span class="op" id="5996614">(</span><span class="string" id="5996615">&#34;main&#34;</span><span class="op" id="5996621">)</span><span class="op" id="5996622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996626">Type</span><span class="op" id="5996630">:</span>&nbsp;<span class="op" id="5996632">&amp;</span><span class="ident" id="5996633"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996636">.</span><span class="ident" id="5996637">FuncType</span><span class="op" id="5996645">{</span><span class="ident" id="5996646">Params</span><span class="op" id="5996652">:</span>&nbsp;<span class="op" id="5996654">&amp;</span><span class="ident" id="5996655"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996658">.</span><span class="ident" id="5996659">FieldList</span><span class="op" id="5996668">{</span><span class="op" id="5996669">}</span><span class="op" id="5996670">}</span><span class="op" id="5996671">,</span>&nbsp;<span class="comment" id="5996673">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996710">Body</span><span class="op" id="5996714">:</span>&nbsp;<span class="ident" id="5996716"><a href="/go/doc/example.go.html#5992820">body</a></span><span class="op" id="5996720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5996723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5996727">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5996748">return</span>&nbsp;<span class="op" id="5996755">&amp;</span><span class="ident" id="5996756"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996759">.</span><span class="ident" id="5996760">File</span><span class="op" id="5996764">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996768">Name</span><span class="op" id="5996772">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5996778"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996781">.</span><span class="ident" id="5996782">NewIdent</span><span class="op" id="5996790">(</span><span class="string" id="5996791">&#34;main&#34;</span><span class="op" id="5996797">)</span><span class="op" id="5996798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996802">Decls</span><span class="op" id="5996807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5996812">[</span><span class="op" id="5996813">]</span><span class="ident" id="5996814"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5996817">.</span><span class="ident" id="5996818">Decl</span><span class="op" id="5996822">{</span><span class="ident" id="5996823"><a href="/go/doc/example.go.html#5996092">importDecl</a></span><span class="op" id="5996833">,</span>&nbsp;<span class="ident" id="5996835"><a href="/go/doc/example.go.html#5996567">funcDecl</a></span><span class="op" id="5996843">}</span><span class="op" id="5996844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5996848">Comments</span><span class="op" id="5996856">:</span>&nbsp;<span class="ident" id="5996858"><a href="/go/doc/example.go.html#5995606">comments</a></span><span class="op" id="5996866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5996869">}</span><br>
<span class="lineno"></span><span class="op" id="5996871">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5996874">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="5996952">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5997011">func</span>&nbsp;<span class="ident" id="5997016">playExampleFile</span><span class="op" id="5997031">(</span><span class="ident" id="5997032">file</span>&nbsp;<span class="op" id="5997037">*</span><span class="ident" id="5997038"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997041">.</span><span class="ident" id="5997042">File</span><span class="op" id="5997046">)</span>&nbsp;<span class="op" id="5997048">*</span><span class="ident" id="5997049"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997052">.</span><span class="ident" id="5997053">File</span>&nbsp;<span class="op" id="5997058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5997061">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997101">comments</span>&nbsp;<span class="op" id="5997110">:=</span>&nbsp;<span class="ident" id="5997113"><a href="/go/doc/example.go.html#5997032">file</a></span><span class="op" id="5997117">.</span><span class="ident" id="5997118">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5997128">if</span>&nbsp;<span class="builtinfunc" id="5997131">len</span><span class="op" id="5997134">(</span><span class="ident" id="5997135"><a href="/go/doc/example.go.html#5997101">comments</a></span><span class="op" id="5997143">)</span>&nbsp;<span class="op" id="5997145">&gt;</span>&nbsp;<span class="num" id="5997147">0</span>&nbsp;<span class="op" id="5997149">&amp;&amp;</span>&nbsp;<span class="ident" id="5997152"><a href="/go/doc/example.go.html#5988572">strings</a></span><span class="op" id="5997159">.</span><span class="ident" id="5997160">HasPrefix</span><span class="op" id="5997169">(</span><span class="ident" id="5997170"><a href="/go/doc/example.go.html#5997101">comments</a></span><span class="op" id="5997178">[</span><span class="num" id="5997179">0</span><span class="op" id="5997180">]</span><span class="op" id="5997181">.</span><span class="ident" id="5997182">Text</span><span class="op" id="5997186">(</span><span class="op" id="5997187">)</span><span class="op" id="5997188">,</span>&nbsp;<span class="string" id="5997190">&#34;Copyright&#34;</span><span class="op" id="5997201">)</span>&nbsp;<span class="op" id="5997203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997207"><a href="/go/doc/example.go.html#5997101">comments</a></span>&nbsp;<span class="op" id="5997216">=</span>&nbsp;<span class="ident" id="5997218"><a href="/go/doc/example.go.html#5997101">comments</a></span><span class="op" id="5997226">[</span><span class="num" id="5997227">1</span><span class="op" id="5997228">:</span><span class="op" id="5997229">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5997232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5997236">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5997305">var</span>&nbsp;<span class="ident" id="5997309">decls</span>&nbsp;<span class="op" id="5997315">[</span><span class="op" id="5997316">]</span><span class="ident" id="5997317"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997320">.</span><span class="ident" id="5997321">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5997327">for</span>&nbsp;<span class="ident" id="5997331">_</span><span class="op" id="5997332">,</span>&nbsp;<span class="ident" id="5997334">d</span>&nbsp;<span class="op" id="5997336">:=</span>&nbsp;<span class="keyword" id="5997339">range</span>&nbsp;<span class="ident" id="5997345"><a href="/go/doc/example.go.html#5997032">file</a></span><span class="op" id="5997349">.</span><span class="ident" id="5997350">Decls</span>&nbsp;<span class="op" id="5997356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5997360">if</span>&nbsp;<span class="ident" id="5997363">f</span><span class="op" id="5997364">,</span>&nbsp;<span class="ident" id="5997366">ok</span>&nbsp;<span class="op" id="5997369">:=</span>&nbsp;<span class="ident" id="5997372"><a href="/go/doc/example.go.html#5997334">d</a></span><span class="op" id="5997373">.</span><span class="op" id="5997374">(</span><span class="op" id="5997375">*</span><span class="ident" id="5997376"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997379">.</span><span class="ident" id="5997380">FuncDecl</span><span class="op" id="5997388">)</span><span class="op" id="5997389">;</span>&nbsp;<span class="ident" id="5997391"><a href="/go/doc/example.go.html#5997366">ok</a></span>&nbsp;<span class="op" id="5997394">&amp;&amp;</span>&nbsp;<span class="ident" id="5997397"><a href="/go/doc/example.go.html#5992175">isTest</a></span><span class="op" id="5997403">(</span><span class="ident" id="5997404"><a href="/go/doc/example.go.html#5997363">f</a></span><span class="op" id="5997405">.</span><span class="ident" id="5997406">Name</span><span class="op" id="5997410">.</span><span class="ident" id="5997411">Name</span><span class="op" id="5997415">,</span>&nbsp;<span class="string" id="5997417">&#34;Example&#34;</span><span class="op" id="5997426">)</span>&nbsp;<span class="op" id="5997428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5997433">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997487">newF</span>&nbsp;<span class="op" id="5997492">:=</span>&nbsp;<span class="op" id="5997495">*</span><span class="ident" id="5997496"><a href="/go/doc/example.go.html#5997363">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997501"><a href="/go/doc/example.go.html#5997487">newF</a></span><span class="op" id="5997505">.</span><span class="ident" id="5997506">Name</span>&nbsp;<span class="op" id="5997511">=</span>&nbsp;<span class="ident" id="5997513"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997516">.</span><span class="ident" id="5997517">NewIdent</span><span class="op" id="5997525">(</span><span class="string" id="5997526">&#34;main&#34;</span><span class="op" id="5997532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997537"><a href="/go/doc/example.go.html#5997487">newF</a></span><span class="op" id="5997541">.</span><span class="ident" id="5997542">Body</span><span class="op" id="5997546">,</span>&nbsp;<span class="ident" id="5997548"><a href="/go/doc/example.go.html#5997101">comments</a></span>&nbsp;<span class="op" id="5997557">=</span>&nbsp;<span class="ident" id="5997559"><a href="/go/doc/example.go.html#5997925">stripOutputComment</a></span><span class="op" id="5997577">(</span><span class="ident" id="5997578"><a href="/go/doc/example.go.html#5997363">f</a></span><span class="op" id="5997579">.</span><span class="ident" id="5997580">Body</span><span class="op" id="5997584">,</span>&nbsp;<span class="ident" id="5997586"><a href="/go/doc/example.go.html#5997101">comments</a></span><span class="op" id="5997594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997599"><a href="/go/doc/example.go.html#5997334">d</a></span>&nbsp;<span class="op" id="5997601">=</span>&nbsp;<span class="op" id="5997603">&amp;</span><span class="ident" id="5997604"><a href="/go/doc/example.go.html#5997487">newF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5997611">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997615"><a href="/go/doc/example.go.html#5997309">decls</a></span>&nbsp;<span class="op" id="5997621">=</span>&nbsp;<span class="builtinfunc" id="5997623">append</span><span class="op" id="5997629">(</span><span class="ident" id="5997630"><a href="/go/doc/example.go.html#5997309">decls</a></span><span class="op" id="5997635">,</span>&nbsp;<span class="ident" id="5997637"><a href="/go/doc/example.go.html#5997334">d</a></span><span class="op" id="5997638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5997641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5997645">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997693">f</span>&nbsp;<span class="op" id="5997695">:=</span>&nbsp;<span class="op" id="5997698">*</span><span class="ident" id="5997699"><a href="/go/doc/example.go.html#5997032">file</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997705"><a href="/go/doc/example.go.html#5997693">f</a></span><span class="op" id="5997706">.</span><span class="ident" id="5997707">Name</span>&nbsp;<span class="op" id="5997712">=</span>&nbsp;<span class="ident" id="5997714"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997717">.</span><span class="ident" id="5997718">NewIdent</span><span class="op" id="5997726">(</span><span class="string" id="5997727">&#34;main&#34;</span><span class="op" id="5997733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997736"><a href="/go/doc/example.go.html#5997693">f</a></span><span class="op" id="5997737">.</span><span class="ident" id="5997738">Decls</span>&nbsp;<span class="op" id="5997744">=</span>&nbsp;<span class="ident" id="5997746"><a href="/go/doc/example.go.html#5997309">decls</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5997753"><a href="/go/doc/example.go.html#5997693">f</a></span><span class="op" id="5997754">.</span><span class="ident" id="5997755">Comments</span>&nbsp;<span class="op" id="5997764">=</span>&nbsp;<span class="ident" id="5997766"><a href="/go/doc/example.go.html#5997101">comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5997776">return</span>&nbsp;<span class="op" id="5997783">&amp;</span><span class="ident" id="5997784"><a href="/go/doc/example.go.html#5997693">f</a></span><br>
<span class="lineno"></span><span class="op" id="5997786">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5997789">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="5997860">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="5997920">func</span>&nbsp;<span class="ident" id="5997925">stripOutputComment</span><span class="op" id="5997943">(</span><span class="ident" id="5997944">body</span>&nbsp;<span class="op" id="5997949">*</span><span class="ident" id="5997950"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997953">.</span><span class="ident" id="5997954">BlockStmt</span><span class="op" id="5997963">,</span>&nbsp;<span class="ident" id="5997965">comments</span>&nbsp;<span class="op" id="5997974">[</span><span class="op" id="5997975">]</span><span class="op" id="5997976">*</span><span class="ident" id="5997977"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5997980">.</span><span class="ident" id="5997981">CommentGroup</span><span class="op" id="5997993">)</span>&nbsp;<span class="op" id="5997995">(</span><span class="op" id="5997996">*</span><span class="ident" id="5997997"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998000">.</span><span class="ident" id="5998001">BlockStmt</span><span class="op" id="5998010">,</span>&nbsp;<span class="op" id="5998012">[</span><span class="op" id="5998013">]</span><span class="op" id="5998014">*</span><span class="ident" id="5998015"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998018">.</span><span class="ident" id="5998019">CommentGroup</span><span class="op" id="5998031">)</span>&nbsp;<span class="op" id="5998033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5998036">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998082">i</span><span class="op" id="5998083">,</span>&nbsp;<span class="ident" id="5998085">last</span>&nbsp;<span class="op" id="5998090">:=</span>&nbsp;<span class="ident" id="5998093"><a href="/go/doc/example.go.html#5998609">lastComment</a></span><span class="op" id="5998104">(</span><span class="ident" id="5998105"><a href="/go/doc/example.go.html#5997944">body</a></span><span class="op" id="5998109">,</span>&nbsp;<span class="ident" id="5998111"><a href="/go/doc/example.go.html#5997965">comments</a></span><span class="op" id="5998119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998122">if</span>&nbsp;<span class="ident" id="5998125"><a href="/go/doc/example.go.html#5998085">last</a></span>&nbsp;<span class="op" id="5998130">==</span>&nbsp;<span class="ident" id="5998133">nil</span>&nbsp;<span class="op" id="5998137">||</span>&nbsp;<span class="op" id="5998140">!</span><span class="ident" id="5998141"><a href="/go/doc/example.go.html#5991286">outputPrefix</a></span><span class="op" id="5998153">.</span><span class="ident" id="5998154">MatchString</span><span class="op" id="5998165">(</span><span class="ident" id="5998166"><a href="/go/doc/example.go.html#5998085">last</a></span><span class="op" id="5998170">.</span><span class="ident" id="5998171">Text</span><span class="op" id="5998175">(</span><span class="op" id="5998176">)</span><span class="op" id="5998177">)</span>&nbsp;<span class="op" id="5998179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998183">return</span>&nbsp;<span class="ident" id="5998190"><a href="/go/doc/example.go.html#5997944">body</a></span><span class="op" id="5998194">,</span>&nbsp;<span class="ident" id="5998196"><a href="/go/doc/example.go.html#5997965">comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5998206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5998210">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998278">newBody</span>&nbsp;<span class="op" id="5998286">:=</span>&nbsp;<span class="op" id="5998289">&amp;</span><span class="ident" id="5998290"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998293">.</span><span class="ident" id="5998294">BlockStmt</span><span class="op" id="5998303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998307">Lbrace</span><span class="op" id="5998313">:</span>&nbsp;<span class="ident" id="5998315"><a href="/go/doc/example.go.html#5997944">body</a></span><span class="op" id="5998319">.</span><span class="ident" id="5998320">Lbrace</span><span class="op" id="5998326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998330">List</span><span class="op" id="5998334">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5998338"><a href="/go/doc/example.go.html#5997944">body</a></span><span class="op" id="5998342">.</span><span class="ident" id="5998343">List</span><span class="op" id="5998347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998351">Rbrace</span><span class="op" id="5998357">:</span>&nbsp;<span class="ident" id="5998359"><a href="/go/doc/example.go.html#5998085">last</a></span><span class="op" id="5998363">.</span><span class="ident" id="5998364">Pos</span><span class="op" id="5998367">(</span><span class="op" id="5998368">)</span><span class="op" id="5998369">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5998372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998375">newComments</span>&nbsp;<span class="op" id="5998387">:=</span>&nbsp;<span class="builtinfunc" id="5998390">make</span><span class="op" id="5998394">(</span><span class="op" id="5998395">[</span><span class="op" id="5998396">]</span><span class="op" id="5998397">*</span><span class="ident" id="5998398"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998401">.</span><span class="ident" id="5998402">CommentGroup</span><span class="op" id="5998414">,</span>&nbsp;<span class="builtinfunc" id="5998416">len</span><span class="op" id="5998419">(</span><span class="ident" id="5998420"><a href="/go/doc/example.go.html#5997965">comments</a></span><span class="op" id="5998428">)</span><span class="op" id="5998429">-</span><span class="num" id="5998430">1</span><span class="op" id="5998431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5998434">copy</span><span class="op" id="5998438">(</span><span class="ident" id="5998439"><a href="/go/doc/example.go.html#5998375">newComments</a></span><span class="op" id="5998450">,</span>&nbsp;<span class="ident" id="5998452"><a href="/go/doc/example.go.html#5997965">comments</a></span><span class="op" id="5998460">[</span><span class="op" id="5998461">:</span><span class="ident" id="5998462"><a href="/go/doc/example.go.html#5998082">i</a></span><span class="op" id="5998463">]</span><span class="op" id="5998464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5998467">copy</span><span class="op" id="5998471">(</span><span class="ident" id="5998472"><a href="/go/doc/example.go.html#5998375">newComments</a></span><span class="op" id="5998483">[</span><span class="ident" id="5998484"><a href="/go/doc/example.go.html#5998082">i</a></span><span class="op" id="5998485">:</span><span class="op" id="5998486">]</span><span class="op" id="5998487">,</span>&nbsp;<span class="ident" id="5998489"><a href="/go/doc/example.go.html#5997965">comments</a></span><span class="op" id="5998497">[</span><span class="ident" id="5998498"><a href="/go/doc/example.go.html#5998082">i</a></span><span class="op" id="5998499">+</span><span class="num" id="5998500">1</span><span class="op" id="5998501">:</span><span class="op" id="5998502">]</span><span class="op" id="5998503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998506">return</span>&nbsp;<span class="ident" id="5998513"><a href="/go/doc/example.go.html#5998278">newBody</a></span><span class="op" id="5998520">,</span>&nbsp;<span class="ident" id="5998522"><a href="/go/doc/example.go.html#5998375">newComments</a></span><br>
<span class="lineno">340</span><span class="op" id="5998534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5998537">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="5998604">func</span>&nbsp;<span class="ident" id="5998609">lastComment</span><span class="op" id="5998620">(</span><span class="ident" id="5998621">b</span>&nbsp;<span class="op" id="5998623">*</span><span class="ident" id="5998624"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998627">.</span><span class="ident" id="5998628">BlockStmt</span><span class="op" id="5998637">,</span>&nbsp;<span class="ident" id="5998639">c</span>&nbsp;<span class="op" id="5998641">[</span><span class="op" id="5998642">]</span><span class="op" id="5998643">*</span><span class="ident" id="5998644"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998647">.</span><span class="ident" id="5998648">CommentGroup</span><span class="op" id="5998660">)</span>&nbsp;<span class="op" id="5998662">(</span><span class="ident" id="5998663">i</span>&nbsp;<span class="builtintype" id="5998665">int</span><span class="op" id="5998668">,</span>&nbsp;<span class="ident" id="5998670">last</span>&nbsp;<span class="op" id="5998675">*</span><span class="ident" id="5998676"><a href="/go/doc/example.go.html#5988513">ast</a></span><span class="op" id="5998679">.</span><span class="ident" id="5998680">CommentGroup</span><span class="op" id="5998692">)</span>&nbsp;<span class="op" id="5998694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998697">pos</span><span class="op" id="5998700">,</span>&nbsp;<span class="ident" id="5998702">end</span>&nbsp;<span class="op" id="5998706">:=</span>&nbsp;<span class="ident" id="5998709"><a href="/go/doc/example.go.html#5998621">b</a></span><span class="op" id="5998710">.</span><span class="ident" id="5998711">Pos</span><span class="op" id="5998714">(</span><span class="op" id="5998715">)</span><span class="op" id="5998716">,</span>&nbsp;<span class="ident" id="5998718"><a href="/go/doc/example.go.html#5998621">b</a></span><span class="op" id="5998719">.</span><span class="ident" id="5998720">End</span><span class="op" id="5998723">(</span><span class="op" id="5998724">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998727">for</span>&nbsp;<span class="ident" id="5998731">j</span><span class="op" id="5998732">,</span>&nbsp;<span class="ident" id="5998734">cg</span>&nbsp;<span class="op" id="5998737">:=</span>&nbsp;<span class="keyword" id="5998740">range</span>&nbsp;<span class="ident" id="5998746"><a href="/go/doc/example.go.html#5998639">c</a></span>&nbsp;<span class="op" id="5998748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998752">if</span>&nbsp;<span class="ident" id="5998755"><a href="/go/doc/example.go.html#5998734">cg</a></span><span class="op" id="5998757">.</span><span class="ident" id="5998758">Pos</span><span class="op" id="5998761">(</span><span class="op" id="5998762">)</span>&nbsp;<span class="op" id="5998764">&lt;</span>&nbsp;<span class="ident" id="5998766"><a href="/go/doc/example.go.html#5998697">pos</a></span>&nbsp;<span class="op" id="5998770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998775">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5998786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998790">if</span>&nbsp;<span class="ident" id="5998793"><a href="/go/doc/example.go.html#5998734">cg</a></span><span class="op" id="5998795">.</span><span class="ident" id="5998796">End</span><span class="op" id="5998799">(</span><span class="op" id="5998800">)</span>&nbsp;<span class="op" id="5998802">&gt;</span>&nbsp;<span class="ident" id="5998804"><a href="/go/doc/example.go.html#5998702">end</a></span>&nbsp;<span class="op" id="5998808">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998813">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5998821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5998825"><a href="/go/doc/example.go.html#5998663">i</a></span><span class="op" id="5998826">,</span>&nbsp;<span class="ident" id="5998828"><a href="/go/doc/example.go.html#5998670">last</a></span>&nbsp;<span class="op" id="5998833">=</span>&nbsp;<span class="ident" id="5998835"><a href="/go/doc/example.go.html#5998731">j</a></span><span class="op" id="5998836">,</span>&nbsp;<span class="ident" id="5998838"><a href="/go/doc/example.go.html#5998734">cg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5998842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5998845">return</span><br>
<span class="lineno">355</span><span class="op" id="5998852">}</span>
</div>
</body>
</html>
