<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html" class="current">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1745605">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1745660">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1745714">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1745765">package</span>&nbsp;<span class="ident" id="1745773">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1745782">import</span>&nbsp;<span class="string" id="1745789">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1745799">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1745883">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1745966">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1745993">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1746068">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1746126">type</span>&nbsp;<span class="ident" id="1746131">Func</span>&nbsp;<span class="keyword" id="1746136">struct</span>&nbsp;<span class="op" id="1746143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746146">opaque</span>&nbsp;<span class="keyword" id="1746153">struct</span><span class="op" id="1746159">{</span><span class="op" id="1746160">}</span>&nbsp;<span class="comment" id="1746162">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1746206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1746209">func</span>&nbsp;<span class="op" id="1746214">(</span><span class="ident" id="1746215">f</span>&nbsp;<span class="op" id="1746217">*</span><span class="ident" id="1746218">Func</span><span class="op" id="1746222">)</span>&nbsp;<span class="ident" id="1746224">raw</span><span class="op" id="1746227">(</span><span class="op" id="1746228">)</span>&nbsp;<span class="op" id="1746230">*</span><span class="ident" id="1746231">_func</span>&nbsp;<span class="op" id="1746237">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746240">return</span>&nbsp;<span class="op" id="1746247">(</span><span class="op" id="1746248">*</span><span class="ident" id="1746249">_func</span><span class="op" id="1746254">)</span><span class="op" id="1746255">(</span><span class="ident" id="1746256">unsafe</span><span class="op" id="1746262">.</span><span class="ident" id="1746263">Pointer</span><span class="op" id="1746270">(</span><span class="ident" id="1746271">f</span><span class="op" id="1746272">)</span><span class="op" id="1746273">)</span><br>
<span class="lineno"></span><span class="op" id="1746275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1746278">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1746292">const</span>&nbsp;<span class="op" id="1746298">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746301">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1746329">=</span>&nbsp;<span class="num" id="1746331">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746334">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1746362">=</span>&nbsp;<span class="num" id="1746364">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746367">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1746395">=</span>&nbsp;<span class="num" id="1746397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746400">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1746428">=</span>&nbsp;<span class="num" id="1746430">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746433">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1746461">=</span>&nbsp;<span class="num" id="1746463">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746466">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1746494">=</span>&nbsp;<span class="op" id="1746496">-</span><span class="num" id="1746497">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1746508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1746511">var</span>&nbsp;<span class="op" id="1746515">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746518">pclntable</span>&nbsp;<span class="op" id="1746528">[</span><span class="op" id="1746529">]</span><span class="builtintype" id="1746530">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746536">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1746546">[</span><span class="op" id="1746547">]</span><span class="ident" id="1746548">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746557">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1746567">[</span><span class="op" id="1746568">]</span><span class="builtintype" id="1746569">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746578">pclntab</span><span class="op" id="1746585">,</span>&nbsp;<span class="ident" id="1746587">epclntab</span>&nbsp;<span class="keyword" id="1746596">struct</span><span class="op" id="1746602">{</span><span class="op" id="1746603">}</span>&nbsp;<span class="comment" id="1746605">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1746623">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1746626">type</span>&nbsp;<span class="ident" id="1746631">functab</span>&nbsp;<span class="keyword" id="1746639">struct</span>&nbsp;<span class="op" id="1746646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746649">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1746657">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746666">funcoff</span>&nbsp;<span class="builtintype" id="1746674">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1746682">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1746685">func</span>&nbsp;<span class="ident" id="1746690">symtabinit</span><span class="op" id="1746700">(</span><span class="op" id="1746701">)</span>&nbsp;<span class="op" id="1746703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746706">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746762">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1746812">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746862">pcln</span>&nbsp;<span class="op" id="1746867">:=</span>&nbsp;<span class="op" id="1746870">(</span><span class="op" id="1746871">*</span><span class="op" id="1746872">[</span><span class="num" id="1746873">8</span><span class="op" id="1746874">]</span><span class="builtintype" id="1746875">byte</span><span class="op" id="1746879">)</span><span class="op" id="1746880">(</span><span class="ident" id="1746881">unsafe</span><span class="op" id="1746887">.</span><span class="ident" id="1746888">Pointer</span><span class="op" id="1746895">(</span><span class="op" id="1746896">&amp;</span><span class="ident" id="1746897">pclntab</span><span class="op" id="1746904">)</span><span class="op" id="1746905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746908">pcln32</span>&nbsp;<span class="op" id="1746915">:=</span>&nbsp;<span class="op" id="1746918">(</span><span class="op" id="1746919">*</span><span class="op" id="1746920">[</span><span class="num" id="1746921">2</span><span class="op" id="1746922">]</span><span class="builtintype" id="1746923">uint32</span><span class="op" id="1746929">)</span><span class="op" id="1746930">(</span><span class="ident" id="1746931">unsafe</span><span class="op" id="1746937">.</span><span class="ident" id="1746938">Pointer</span><span class="op" id="1746945">(</span><span class="op" id="1746946">&amp;</span><span class="ident" id="1746947">pclntab</span><span class="op" id="1746954">)</span><span class="op" id="1746955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746958">if</span>&nbsp;<span class="ident" id="1746961">pcln32</span><span class="op" id="1746967">[</span><span class="num" id="1746968">0</span><span class="op" id="1746969">]</span>&nbsp;<span class="op" id="1746971">!=</span>&nbsp;<span class="num" id="1746974">0xfffffffb</span>&nbsp;<span class="op" id="1746985">||</span>&nbsp;<span class="ident" id="1746988">pcln</span><span class="op" id="1746992">[</span><span class="num" id="1746993">4</span><span class="op" id="1746994">]</span>&nbsp;<span class="op" id="1746996">!=</span>&nbsp;<span class="num" id="1746999">0</span>&nbsp;<span class="op" id="1747001">||</span>&nbsp;<span class="ident" id="1747004">pcln</span><span class="op" id="1747008">[</span><span class="num" id="1747009">5</span><span class="op" id="1747010">]</span>&nbsp;<span class="op" id="1747012">!=</span>&nbsp;<span class="num" id="1747015">0</span>&nbsp;<span class="op" id="1747017">||</span>&nbsp;<span class="ident" id="1747020">pcln</span><span class="op" id="1747024">[</span><span class="num" id="1747025">6</span><span class="op" id="1747026">]</span>&nbsp;<span class="op" id="1747028">!=</span>&nbsp;<span class="ident" id="1747031">_PCQuantum</span>&nbsp;<span class="op" id="1747042">||</span>&nbsp;<span class="ident" id="1747045">pcln</span><span class="op" id="1747049">[</span><span class="num" id="1747050">7</span><span class="op" id="1747051">]</span>&nbsp;<span class="op" id="1747053">!=</span>&nbsp;<span class="ident" id="1747056">ptrSize</span>&nbsp;<span class="op" id="1747064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1747068">println</span><span class="op" id="1747075">(</span><span class="string" id="1747076">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1747116">,</span>&nbsp;<span class="ident" id="1747118">hex</span><span class="op" id="1747121">(</span><span class="ident" id="1747122">pcln32</span><span class="op" id="1747128">[</span><span class="num" id="1747129">0</span><span class="op" id="1747130">]</span><span class="op" id="1747131">)</span><span class="op" id="1747132">,</span>&nbsp;<span class="ident" id="1747134">hex</span><span class="op" id="1747137">(</span><span class="ident" id="1747138">pcln</span><span class="op" id="1747142">[</span><span class="num" id="1747143">4</span><span class="op" id="1747144">]</span><span class="op" id="1747145">)</span><span class="op" id="1747146">,</span>&nbsp;<span class="ident" id="1747148">hex</span><span class="op" id="1747151">(</span><span class="ident" id="1747152">pcln</span><span class="op" id="1747156">[</span><span class="num" id="1747157">5</span><span class="op" id="1747158">]</span><span class="op" id="1747159">)</span><span class="op" id="1747160">,</span>&nbsp;<span class="ident" id="1747162">hex</span><span class="op" id="1747165">(</span><span class="ident" id="1747166">pcln</span><span class="op" id="1747170">[</span><span class="num" id="1747171">6</span><span class="op" id="1747172">]</span><span class="op" id="1747173">)</span><span class="op" id="1747174">,</span>&nbsp;<span class="ident" id="1747176">hex</span><span class="op" id="1747179">(</span><span class="ident" id="1747180">pcln</span><span class="op" id="1747184">[</span><span class="num" id="1747185">7</span><span class="op" id="1747186">]</span><span class="op" id="1747187">)</span><span class="op" id="1747188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747192">gothrow</span><span class="op" id="1747199">(</span><span class="string" id="1747200">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1747233">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1747236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1747240">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747286">sp</span>&nbsp;<span class="op" id="1747289">:=</span>&nbsp;<span class="op" id="1747292">(</span><span class="op" id="1747293">*</span><span class="ident" id="1747294">sliceStruct</span><span class="op" id="1747305">)</span><span class="op" id="1747306">(</span><span class="ident" id="1747307">unsafe</span><span class="op" id="1747313">.</span><span class="ident" id="1747314">Pointer</span><span class="op" id="1747321">(</span><span class="op" id="1747322">&amp;</span><span class="ident" id="1747323">pclntable</span><span class="op" id="1747332">)</span><span class="op" id="1747333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747336">sp</span><span class="op" id="1747338">.</span><span class="ident" id="1747339">array</span>&nbsp;<span class="op" id="1747345">=</span>&nbsp;<span class="ident" id="1747347">unsafe</span><span class="op" id="1747353">.</span><span class="ident" id="1747354">Pointer</span><span class="op" id="1747361">(</span><span class="op" id="1747362">&amp;</span><span class="ident" id="1747363">pclntab</span><span class="op" id="1747370">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747373">sp</span><span class="op" id="1747375">.</span><span class="builtinfunc" id="1747376">len</span>&nbsp;<span class="op" id="1747380">=</span>&nbsp;<span class="builtintype" id="1747382">int</span><span class="op" id="1747385">(</span><span class="builtintype" id="1747386">uintptr</span><span class="op" id="1747393">(</span><span class="ident" id="1747394">unsafe</span><span class="op" id="1747400">.</span><span class="ident" id="1747401">Pointer</span><span class="op" id="1747408">(</span><span class="op" id="1747409">&amp;</span><span class="ident" id="1747410">epclntab</span><span class="op" id="1747418">)</span><span class="op" id="1747419">)</span>&nbsp;<span class="op" id="1747421">-</span>&nbsp;<span class="builtintype" id="1747423">uintptr</span><span class="op" id="1747430">(</span><span class="ident" id="1747431">unsafe</span><span class="op" id="1747437">.</span><span class="ident" id="1747438">Pointer</span><span class="op" id="1747445">(</span><span class="op" id="1747446">&amp;</span><span class="ident" id="1747447">pclntab</span><span class="op" id="1747454">)</span><span class="op" id="1747455">)</span><span class="op" id="1747456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747459">sp</span><span class="op" id="1747461">.</span><span class="builtinfunc" id="1747462">cap</span>&nbsp;<span class="op" id="1747466">=</span>&nbsp;<span class="ident" id="1747468">sp</span><span class="op" id="1747470">.</span><span class="builtinfunc" id="1747471">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1747477">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747535">nftab</span>&nbsp;<span class="op" id="1747541">:=</span>&nbsp;<span class="builtintype" id="1747544">int</span><span class="op" id="1747547">(</span><span class="op" id="1747548">*</span><span class="op" id="1747549">(</span><span class="op" id="1747550">*</span><span class="builtintype" id="1747551">uintptr</span><span class="op" id="1747558">)</span><span class="op" id="1747559">(</span><span class="ident" id="1747560">add</span><span class="op" id="1747563">(</span><span class="ident" id="1747564">unsafe</span><span class="op" id="1747570">.</span><span class="ident" id="1747571">Pointer</span><span class="op" id="1747578">(</span><span class="ident" id="1747579">pcln</span><span class="op" id="1747583">)</span><span class="op" id="1747584">,</span>&nbsp;<span class="num" id="1747586">8</span><span class="op" id="1747587">)</span><span class="op" id="1747588">)</span><span class="op" id="1747589">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747592">p</span>&nbsp;<span class="op" id="1747594">:=</span>&nbsp;<span class="ident" id="1747597">add</span><span class="op" id="1747600">(</span><span class="ident" id="1747601">unsafe</span><span class="op" id="1747607">.</span><span class="ident" id="1747608">Pointer</span><span class="op" id="1747615">(</span><span class="ident" id="1747616">pcln</span><span class="op" id="1747620">)</span><span class="op" id="1747621">,</span>&nbsp;<span class="num" id="1747623">8</span><span class="op" id="1747624">+</span><span class="ident" id="1747625">ptrSize</span><span class="op" id="1747632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747635">sp</span>&nbsp;<span class="op" id="1747638">=</span>&nbsp;<span class="op" id="1747640">(</span><span class="op" id="1747641">*</span><span class="ident" id="1747642">sliceStruct</span><span class="op" id="1747653">)</span><span class="op" id="1747654">(</span><span class="ident" id="1747655">unsafe</span><span class="op" id="1747661">.</span><span class="ident" id="1747662">Pointer</span><span class="op" id="1747669">(</span><span class="op" id="1747670">&amp;</span><span class="ident" id="1747671">ftab</span><span class="op" id="1747675">)</span><span class="op" id="1747676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747679">sp</span><span class="op" id="1747681">.</span><span class="ident" id="1747682">array</span>&nbsp;<span class="op" id="1747688">=</span>&nbsp;<span class="ident" id="1747690">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747693">sp</span><span class="op" id="1747695">.</span><span class="builtinfunc" id="1747696">len</span>&nbsp;<span class="op" id="1747700">=</span>&nbsp;<span class="ident" id="1747702">nftab</span>&nbsp;<span class="op" id="1747708">+</span>&nbsp;<span class="num" id="1747710">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747713">sp</span><span class="op" id="1747715">.</span><span class="builtinfunc" id="1747716">cap</span>&nbsp;<span class="op" id="1747720">=</span>&nbsp;<span class="ident" id="1747722">sp</span><span class="op" id="1747724">.</span><span class="builtinfunc" id="1747725">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1747730">for</span>&nbsp;<span class="ident" id="1747734">i</span>&nbsp;<span class="op" id="1747736">:=</span>&nbsp;<span class="num" id="1747739">0</span><span class="op" id="1747740">;</span>&nbsp;<span class="ident" id="1747742">i</span>&nbsp;<span class="op" id="1747744">&lt;</span>&nbsp;<span class="ident" id="1747746">nftab</span><span class="op" id="1747751">;</span>&nbsp;<span class="ident" id="1747753">i</span><span class="op" id="1747754">++</span>&nbsp;<span class="op" id="1747757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1747761">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1747845">if</span>&nbsp;<span class="ident" id="1747848">ftab</span><span class="op" id="1747852">[</span><span class="ident" id="1747853">i</span><span class="op" id="1747854">]</span><span class="op" id="1747855">.</span><span class="ident" id="1747856">entry</span>&nbsp;<span class="op" id="1747862">&gt;</span>&nbsp;<span class="ident" id="1747864">ftab</span><span class="op" id="1747868">[</span><span class="ident" id="1747869">i</span><span class="op" id="1747870">+</span><span class="num" id="1747871">1</span><span class="op" id="1747872">]</span><span class="op" id="1747873">.</span><span class="ident" id="1747874">entry</span>&nbsp;<span class="op" id="1747880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747885">f1</span>&nbsp;<span class="op" id="1747888">:=</span>&nbsp;<span class="op" id="1747891">(</span><span class="op" id="1747892">*</span><span class="ident" id="1747893">_func</span><span class="op" id="1747898">)</span><span class="op" id="1747899">(</span><span class="ident" id="1747900">unsafe</span><span class="op" id="1747906">.</span><span class="ident" id="1747907">Pointer</span><span class="op" id="1747914">(</span><span class="op" id="1747915">&amp;</span><span class="ident" id="1747916">pclntable</span><span class="op" id="1747925">[</span><span class="ident" id="1747926">ftab</span><span class="op" id="1747930">[</span><span class="ident" id="1747931">i</span><span class="op" id="1747932">]</span><span class="op" id="1747933">.</span><span class="ident" id="1747934">funcoff</span><span class="op" id="1747941">]</span><span class="op" id="1747942">)</span><span class="op" id="1747943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1747948">f2</span>&nbsp;<span class="op" id="1747951">:=</span>&nbsp;<span class="op" id="1747954">(</span><span class="op" id="1747955">*</span><span class="ident" id="1747956">_func</span><span class="op" id="1747961">)</span><span class="op" id="1747962">(</span><span class="ident" id="1747963">unsafe</span><span class="op" id="1747969">.</span><span class="ident" id="1747970">Pointer</span><span class="op" id="1747977">(</span><span class="op" id="1747978">&amp;</span><span class="ident" id="1747979">pclntable</span><span class="op" id="1747988">[</span><span class="ident" id="1747989">ftab</span><span class="op" id="1747993">[</span><span class="ident" id="1747994">i</span><span class="op" id="1747995">+</span><span class="num" id="1747996">1</span><span class="op" id="1747997">]</span><span class="op" id="1747998">.</span><span class="ident" id="1747999">funcoff</span><span class="op" id="1748006">]</span><span class="op" id="1748007">)</span><span class="op" id="1748008">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748013">f2name</span>&nbsp;<span class="op" id="1748020">:=</span>&nbsp;<span class="string" id="1748023">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748032">if</span>&nbsp;<span class="ident" id="1748035">i</span><span class="op" id="1748036">+</span><span class="num" id="1748037">1</span>&nbsp;<span class="op" id="1748039">&lt;</span>&nbsp;<span class="ident" id="1748041">nftab</span>&nbsp;<span class="op" id="1748047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748053">f2name</span>&nbsp;<span class="op" id="1748060">=</span>&nbsp;<span class="ident" id="1748062">gofuncname</span><span class="op" id="1748072">(</span><span class="ident" id="1748073">f2</span><span class="op" id="1748075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1748085">println</span><span class="op" id="1748092">(</span><span class="string" id="1748093">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1748147">,</span>&nbsp;<span class="ident" id="1748149">hex</span><span class="op" id="1748152">(</span><span class="ident" id="1748153">ftab</span><span class="op" id="1748157">[</span><span class="ident" id="1748158">i</span><span class="op" id="1748159">]</span><span class="op" id="1748160">.</span><span class="ident" id="1748161">entry</span><span class="op" id="1748166">)</span><span class="op" id="1748167">,</span>&nbsp;<span class="ident" id="1748169">gofuncname</span><span class="op" id="1748179">(</span><span class="ident" id="1748180">f1</span><span class="op" id="1748182">)</span><span class="op" id="1748183">,</span>&nbsp;<span class="string" id="1748185">&#34;&gt;&#34;</span><span class="op" id="1748188">,</span>&nbsp;<span class="ident" id="1748190">hex</span><span class="op" id="1748193">(</span><span class="ident" id="1748194">ftab</span><span class="op" id="1748198">[</span><span class="ident" id="1748199">i</span><span class="op" id="1748200">+</span><span class="num" id="1748201">1</span><span class="op" id="1748202">]</span><span class="op" id="1748203">.</span><span class="ident" id="1748204">entry</span><span class="op" id="1748209">)</span><span class="op" id="1748210">,</span>&nbsp;<span class="ident" id="1748212">f2name</span><span class="op" id="1748218">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1748223">for</span>&nbsp;<span class="ident" id="1748227">j</span>&nbsp;<span class="op" id="1748229">:=</span>&nbsp;<span class="num" id="1748232">0</span><span class="op" id="1748233">;</span>&nbsp;<span class="ident" id="1748235">j</span>&nbsp;<span class="op" id="1748237">&lt;=</span>&nbsp;<span class="ident" id="1748240">i</span><span class="op" id="1748241">;</span>&nbsp;<span class="ident" id="1748243">j</span><span class="op" id="1748244">++</span>&nbsp;<span class="op" id="1748247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1748253">print</span><span class="op" id="1748258">(</span><span class="string" id="1748259">&#34;\t&#34;</span><span class="op" id="1748263">,</span>&nbsp;<span class="ident" id="1748265">hex</span><span class="op" id="1748268">(</span><span class="ident" id="1748269">ftab</span><span class="op" id="1748273">[</span><span class="ident" id="1748274">j</span><span class="op" id="1748275">]</span><span class="op" id="1748276">.</span><span class="ident" id="1748277">entry</span><span class="op" id="1748282">)</span><span class="op" id="1748283">,</span>&nbsp;<span class="string" id="1748285">&#34;&nbsp;&#34;</span><span class="op" id="1748288">,</span>&nbsp;<span class="ident" id="1748290">gofuncname</span><span class="op" id="1748300">(</span><span class="op" id="1748301">(</span><span class="op" id="1748302">*</span><span class="ident" id="1748303">_func</span><span class="op" id="1748308">)</span><span class="op" id="1748309">(</span><span class="ident" id="1748310">unsafe</span><span class="op" id="1748316">.</span><span class="ident" id="1748317">Pointer</span><span class="op" id="1748324">(</span><span class="op" id="1748325">&amp;</span><span class="ident" id="1748326">pclntable</span><span class="op" id="1748335">[</span><span class="ident" id="1748336">ftab</span><span class="op" id="1748340">[</span><span class="ident" id="1748341">j</span><span class="op" id="1748342">]</span><span class="op" id="1748343">.</span><span class="ident" id="1748344">funcoff</span><span class="op" id="1748351">]</span><span class="op" id="1748352">)</span><span class="op" id="1748353">)</span><span class="op" id="1748354">)</span><span class="op" id="1748355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748365">gothrow</span><span class="op" id="1748372">(</span><span class="string" id="1748373">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1748403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748407">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1748410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748414">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748471">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748530">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748560">sp</span>&nbsp;<span class="op" id="1748563">=</span>&nbsp;<span class="op" id="1748565">(</span><span class="op" id="1748566">*</span><span class="ident" id="1748567">sliceStruct</span><span class="op" id="1748578">)</span><span class="op" id="1748579">(</span><span class="ident" id="1748580">unsafe</span><span class="op" id="1748586">.</span><span class="ident" id="1748587">Pointer</span><span class="op" id="1748594">(</span><span class="op" id="1748595">&amp;</span><span class="ident" id="1748596">filetab</span><span class="op" id="1748603">)</span><span class="op" id="1748604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748607">end</span>&nbsp;<span class="op" id="1748611">:=</span>&nbsp;<span class="ident" id="1748614">unsafe</span><span class="op" id="1748620">.</span><span class="ident" id="1748621">Pointer</span><span class="op" id="1748628">(</span><span class="op" id="1748629">&amp;</span><span class="ident" id="1748630">ftab</span><span class="op" id="1748634">[</span><span class="ident" id="1748635">nftab</span><span class="op" id="1748640">]</span><span class="op" id="1748641">.</span><span class="ident" id="1748642">funcoff</span><span class="op" id="1748649">)</span>&nbsp;<span class="comment" id="1748651">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748672">fileoffset</span>&nbsp;<span class="op" id="1748683">:=</span>&nbsp;<span class="op" id="1748686">*</span><span class="op" id="1748687">(</span><span class="op" id="1748688">*</span><span class="builtintype" id="1748689">uint32</span><span class="op" id="1748695">)</span><span class="op" id="1748696">(</span><span class="ident" id="1748697">end</span><span class="op" id="1748700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748703">sp</span><span class="op" id="1748705">.</span><span class="ident" id="1748706">array</span>&nbsp;<span class="op" id="1748712">=</span>&nbsp;<span class="ident" id="1748714">unsafe</span><span class="op" id="1748720">.</span><span class="ident" id="1748721">Pointer</span><span class="op" id="1748728">(</span><span class="op" id="1748729">&amp;</span><span class="ident" id="1748730">pclntable</span><span class="op" id="1748739">[</span><span class="ident" id="1748740">fileoffset</span><span class="op" id="1748750">]</span><span class="op" id="1748751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748754">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1748795">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748841">sp</span><span class="op" id="1748843">.</span><span class="builtinfunc" id="1748844">len</span>&nbsp;<span class="op" id="1748848">=</span>&nbsp;<span class="num" id="1748850">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748853">sp</span><span class="op" id="1748855">.</span><span class="builtinfunc" id="1748856">cap</span>&nbsp;<span class="op" id="1748860">=</span>&nbsp;<span class="num" id="1748862">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748865">sp</span><span class="op" id="1748867">.</span><span class="builtinfunc" id="1748868">len</span>&nbsp;<span class="op" id="1748872">=</span>&nbsp;<span class="builtintype" id="1748874">int</span><span class="op" id="1748877">(</span><span class="ident" id="1748878">filetab</span><span class="op" id="1748885">[</span><span class="num" id="1748886">0</span><span class="op" id="1748887">]</span><span class="op" id="1748888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1748891">sp</span><span class="op" id="1748893">.</span><span class="builtinfunc" id="1748894">cap</span>&nbsp;<span class="op" id="1748898">=</span>&nbsp;<span class="ident" id="1748900">sp</span><span class="op" id="1748902">.</span><span class="builtinfunc" id="1748903">len</span><br>
<span class="lineno">100</span><span class="op" id="1748907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1748910">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1748981">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1749028">func</span>&nbsp;<span class="ident" id="1749033">FuncForPC</span><span class="op" id="1749042">(</span><span class="ident" id="1749043">pc</span>&nbsp;<span class="builtintype" id="1749046">uintptr</span><span class="op" id="1749053">)</span>&nbsp;<span class="op" id="1749055">*</span><span class="ident" id="1749056">Func</span>&nbsp;<span class="op" id="1749061">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749064">return</span>&nbsp;<span class="op" id="1749071">(</span><span class="op" id="1749072">*</span><span class="ident" id="1749073">Func</span><span class="op" id="1749077">)</span><span class="op" id="1749078">(</span><span class="ident" id="1749079">unsafe</span><span class="op" id="1749085">.</span><span class="ident" id="1749086">Pointer</span><span class="op" id="1749093">(</span><span class="ident" id="1749094">findfunc</span><span class="op" id="1749102">(</span><span class="ident" id="1749103">pc</span><span class="op" id="1749105">)</span><span class="op" id="1749106">)</span><span class="op" id="1749107">)</span><br>
<span class="lineno"></span><span class="op" id="1749109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1749112">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1749154">func</span>&nbsp;<span class="op" id="1749159">(</span><span class="ident" id="1749160">f</span>&nbsp;<span class="op" id="1749162">*</span><span class="ident" id="1749163">Func</span><span class="op" id="1749167">)</span>&nbsp;<span class="ident" id="1749169">Name</span><span class="op" id="1749173">(</span><span class="op" id="1749174">)</span>&nbsp;<span class="builtintype" id="1749176">string</span>&nbsp;<span class="op" id="1749183">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749186">return</span>&nbsp;<span class="ident" id="1749193">gofuncname</span><span class="op" id="1749203">(</span><span class="ident" id="1749204">f</span><span class="op" id="1749205">.</span><span class="ident" id="1749206">raw</span><span class="op" id="1749209">(</span><span class="op" id="1749210">)</span><span class="op" id="1749211">)</span><br>
<span class="lineno"></span><span class="op" id="1749213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1749216">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1749268">func</span>&nbsp;<span class="op" id="1749273">(</span><span class="ident" id="1749274">f</span>&nbsp;<span class="op" id="1749276">*</span><span class="ident" id="1749277">Func</span><span class="op" id="1749281">)</span>&nbsp;<span class="ident" id="1749283">Entry</span><span class="op" id="1749288">(</span><span class="op" id="1749289">)</span>&nbsp;<span class="builtintype" id="1749291">uintptr</span>&nbsp;<span class="op" id="1749299">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749302">return</span>&nbsp;<span class="ident" id="1749309">f</span><span class="op" id="1749310">.</span><span class="ident" id="1749311">raw</span><span class="op" id="1749314">(</span><span class="op" id="1749315">)</span><span class="op" id="1749316">.</span><span class="ident" id="1749317">entry</span><br>
<span class="lineno"></span><span class="op" id="1749323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1749326">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1749383">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1749439">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1749497">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1749518">func</span>&nbsp;<span class="op" id="1749523">(</span><span class="ident" id="1749524">f</span>&nbsp;<span class="op" id="1749526">*</span><span class="ident" id="1749527">Func</span><span class="op" id="1749531">)</span>&nbsp;<span class="ident" id="1749533">FileLine</span><span class="op" id="1749541">(</span><span class="ident" id="1749542">pc</span>&nbsp;<span class="builtintype" id="1749545">uintptr</span><span class="op" id="1749552">)</span>&nbsp;<span class="op" id="1749554">(</span><span class="ident" id="1749555">file</span>&nbsp;<span class="builtintype" id="1749560">string</span><span class="op" id="1749566">,</span>&nbsp;<span class="ident" id="1749568">line</span>&nbsp;<span class="builtintype" id="1749573">int</span><span class="op" id="1749576">)</span>&nbsp;<span class="op" id="1749578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749581">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749648">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749712">line</span>&nbsp;<span class="op" id="1749717">=</span>&nbsp;<span class="builtintype" id="1749719">int</span><span class="op" id="1749722">(</span><span class="ident" id="1749723">funcline1</span><span class="op" id="1749732">(</span><span class="ident" id="1749733">f</span><span class="op" id="1749734">.</span><span class="ident" id="1749735">raw</span><span class="op" id="1749738">(</span><span class="op" id="1749739">)</span><span class="op" id="1749740">,</span>&nbsp;<span class="ident" id="1749742">pc</span><span class="op" id="1749744">,</span>&nbsp;<span class="op" id="1749746">&amp;</span><span class="ident" id="1749747">file</span><span class="op" id="1749751">,</span>&nbsp;<span class="builtintype" id="1749753">false</span><span class="op" id="1749758">)</span><span class="op" id="1749759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749762">return</span>&nbsp;<span class="ident" id="1749769">file</span><span class="op" id="1749773">,</span>&nbsp;<span class="ident" id="1749775">line</span><br>
<span class="lineno"></span><span class="op" id="1749780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1749783">func</span>&nbsp;<span class="ident" id="1749788">findfunc</span><span class="op" id="1749796">(</span><span class="ident" id="1749797">pc</span>&nbsp;<span class="builtintype" id="1749800">uintptr</span><span class="op" id="1749807">)</span>&nbsp;<span class="op" id="1749809">*</span><span class="ident" id="1749810">_func</span>&nbsp;<span class="op" id="1749816">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749819">if</span>&nbsp;<span class="builtinfunc" id="1749822">len</span><span class="op" id="1749825">(</span><span class="ident" id="1749826">ftab</span><span class="op" id="1749830">)</span>&nbsp;<span class="op" id="1749832">==</span>&nbsp;<span class="num" id="1749835">0</span>&nbsp;<span class="op" id="1749837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749841">return</span>&nbsp;<span class="ident" id="1749848">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749857">if</span>&nbsp;<span class="ident" id="1749860">pc</span>&nbsp;<span class="op" id="1749863">&lt;</span>&nbsp;<span class="ident" id="1749865">ftab</span><span class="op" id="1749869">[</span><span class="num" id="1749870">0</span><span class="op" id="1749871">]</span><span class="op" id="1749872">.</span><span class="ident" id="1749873">entry</span>&nbsp;<span class="op" id="1749879">||</span>&nbsp;<span class="ident" id="1749882">pc</span>&nbsp;<span class="op" id="1749885">&gt;=</span>&nbsp;<span class="ident" id="1749888">ftab</span><span class="op" id="1749892">[</span><span class="builtinfunc" id="1749893">len</span><span class="op" id="1749896">(</span><span class="ident" id="1749897">ftab</span><span class="op" id="1749901">)</span><span class="op" id="1749902">-</span><span class="num" id="1749903">1</span><span class="op" id="1749904">]</span><span class="op" id="1749905">.</span><span class="ident" id="1749906">entry</span>&nbsp;<span class="op" id="1749912">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1749916">return</span>&nbsp;<span class="ident" id="1749923">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1749928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1749932">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749981">lo</span>&nbsp;<span class="op" id="1749984">:=</span>&nbsp;<span class="num" id="1749987">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1749990">nf</span>&nbsp;<span class="op" id="1749993">:=</span>&nbsp;<span class="builtinfunc" id="1749996">len</span><span class="op" id="1749999">(</span><span class="ident" id="1750000">ftab</span><span class="op" id="1750004">)</span>&nbsp;<span class="op" id="1750006">-</span>&nbsp;<span class="num" id="1750008">1</span>&nbsp;<span class="comment" id="1750010">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750037">for</span>&nbsp;<span class="ident" id="1750041">nf</span>&nbsp;<span class="op" id="1750044">&gt;</span>&nbsp;<span class="num" id="1750046">0</span>&nbsp;<span class="op" id="1750048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750052">n</span>&nbsp;<span class="op" id="1750054">:=</span>&nbsp;<span class="ident" id="1750057">nf</span>&nbsp;<span class="op" id="1750060">/</span>&nbsp;<span class="num" id="1750062">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750066">f</span>&nbsp;<span class="op" id="1750068">:=</span>&nbsp;<span class="op" id="1750071">&amp;</span><span class="ident" id="1750072">ftab</span><span class="op" id="1750076">[</span><span class="ident" id="1750077">lo</span><span class="op" id="1750079">+</span><span class="ident" id="1750080">n</span><span class="op" id="1750081">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750085">if</span>&nbsp;<span class="ident" id="1750088">f</span><span class="op" id="1750089">.</span><span class="ident" id="1750090">entry</span>&nbsp;<span class="op" id="1750096">&lt;=</span>&nbsp;<span class="ident" id="1750099">pc</span>&nbsp;<span class="op" id="1750102">&amp;&amp;</span>&nbsp;<span class="ident" id="1750105">pc</span>&nbsp;<span class="op" id="1750108">&lt;</span>&nbsp;<span class="ident" id="1750110">ftab</span><span class="op" id="1750114">[</span><span class="ident" id="1750115">lo</span><span class="op" id="1750117">+</span><span class="ident" id="1750118">n</span><span class="op" id="1750119">+</span><span class="num" id="1750120">1</span><span class="op" id="1750121">]</span><span class="op" id="1750122">.</span><span class="ident" id="1750123">entry</span>&nbsp;<span class="op" id="1750129">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750134">return</span>&nbsp;<span class="op" id="1750141">(</span><span class="op" id="1750142">*</span><span class="ident" id="1750143">_func</span><span class="op" id="1750148">)</span><span class="op" id="1750149">(</span><span class="ident" id="1750150">unsafe</span><span class="op" id="1750156">.</span><span class="ident" id="1750157">Pointer</span><span class="op" id="1750164">(</span><span class="op" id="1750165">&amp;</span><span class="ident" id="1750166">pclntable</span><span class="op" id="1750175">[</span><span class="ident" id="1750176">f</span><span class="op" id="1750177">.</span><span class="ident" id="1750178">funcoff</span><span class="op" id="1750185">]</span><span class="op" id="1750186">)</span><span class="op" id="1750187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750191">}</span>&nbsp;<span class="keyword" id="1750193">else</span>&nbsp;<span class="keyword" id="1750198">if</span>&nbsp;<span class="ident" id="1750201">pc</span>&nbsp;<span class="op" id="1750204">&lt;</span>&nbsp;<span class="ident" id="1750206">f</span><span class="op" id="1750207">.</span><span class="ident" id="1750208">entry</span>&nbsp;<span class="op" id="1750214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750219">nf</span>&nbsp;<span class="op" id="1750222">=</span>&nbsp;<span class="ident" id="1750224">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750228">}</span>&nbsp;<span class="keyword" id="1750230">else</span>&nbsp;<span class="op" id="1750235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750240">lo</span>&nbsp;<span class="op" id="1750243">+=</span>&nbsp;<span class="ident" id="1750246">n</span>&nbsp;<span class="op" id="1750248">+</span>&nbsp;<span class="num" id="1750250">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750255">nf</span>&nbsp;<span class="op" id="1750258">-=</span>&nbsp;<span class="ident" id="1750261">n</span>&nbsp;<span class="op" id="1750263">+</span>&nbsp;<span class="num" id="1750265">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750276">gothrow</span><span class="op" id="1750283">(</span><span class="string" id="1750284">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1750316">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750319">return</span>&nbsp;<span class="ident" id="1750326">nil</span><br>
<span class="lineno"></span><span class="op" id="1750330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1750333">func</span>&nbsp;<span class="ident" id="1750338">pcvalue</span><span class="op" id="1750345">(</span><span class="ident" id="1750346">f</span>&nbsp;<span class="op" id="1750348">*</span><span class="ident" id="1750349">_func</span><span class="op" id="1750354">,</span>&nbsp;<span class="ident" id="1750356">off</span>&nbsp;<span class="builtintype" id="1750360">int32</span><span class="op" id="1750365">,</span>&nbsp;<span class="ident" id="1750367">targetpc</span>&nbsp;<span class="builtintype" id="1750376">uintptr</span><span class="op" id="1750383">,</span>&nbsp;<span class="ident" id="1750385">strict</span>&nbsp;<span class="builtintype" id="1750392">bool</span><span class="op" id="1750396">)</span>&nbsp;<span class="builtintype" id="1750398">int32</span>&nbsp;<span class="op" id="1750404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750407">if</span>&nbsp;<span class="ident" id="1750410">off</span>&nbsp;<span class="op" id="1750414">==</span>&nbsp;<span class="num" id="1750417">0</span>&nbsp;<span class="op" id="1750419">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750423">return</span>&nbsp;<span class="op" id="1750430">-</span><span class="num" id="1750431">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750437">p</span>&nbsp;<span class="op" id="1750439">:=</span>&nbsp;<span class="ident" id="1750442">pclntable</span><span class="op" id="1750451">[</span><span class="ident" id="1750452">off</span><span class="op" id="1750455">:</span><span class="op" id="1750456">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750459">pc</span>&nbsp;<span class="op" id="1750462">:=</span>&nbsp;<span class="ident" id="1750465">f</span><span class="op" id="1750466">.</span><span class="ident" id="1750467">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750474">val</span>&nbsp;<span class="op" id="1750478">:=</span>&nbsp;<span class="builtintype" id="1750481">int32</span><span class="op" id="1750486">(</span><span class="op" id="1750487">-</span><span class="num" id="1750488">1</span><span class="op" id="1750489">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750492">for</span>&nbsp;<span class="op" id="1750496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750500">var</span>&nbsp;<span class="ident" id="1750504">ok</span>&nbsp;<span class="builtintype" id="1750507">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750514">p</span><span class="op" id="1750515">,</span>&nbsp;<span class="ident" id="1750517">ok</span>&nbsp;<span class="op" id="1750520">=</span>&nbsp;<span class="ident" id="1750522">step</span><span class="op" id="1750526">(</span><span class="ident" id="1750527">p</span><span class="op" id="1750528">,</span>&nbsp;<span class="op" id="1750530">&amp;</span><span class="ident" id="1750531">pc</span><span class="op" id="1750533">,</span>&nbsp;<span class="op" id="1750535">&amp;</span><span class="ident" id="1750536">val</span><span class="op" id="1750539">,</span>&nbsp;<span class="ident" id="1750541">pc</span>&nbsp;<span class="op" id="1750544">==</span>&nbsp;<span class="ident" id="1750547">f</span><span class="op" id="1750548">.</span><span class="ident" id="1750549">entry</span><span class="op" id="1750554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750558">if</span>&nbsp;<span class="op" id="1750561">!</span><span class="ident" id="1750562">ok</span>&nbsp;<span class="op" id="1750565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750570">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750582">if</span>&nbsp;<span class="ident" id="1750585">targetpc</span>&nbsp;<span class="op" id="1750594">&lt;</span>&nbsp;<span class="ident" id="1750596">pc</span>&nbsp;<span class="op" id="1750599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750604">return</span>&nbsp;<span class="ident" id="1750611">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750620">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750624">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1750695">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750727">if</span>&nbsp;<span class="ident" id="1750730">panicking</span>&nbsp;<span class="op" id="1750740">!=</span>&nbsp;<span class="num" id="1750743">0</span>&nbsp;<span class="op" id="1750745">||</span>&nbsp;<span class="op" id="1750748">!</span><span class="ident" id="1750749">strict</span>&nbsp;<span class="op" id="1750756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750760">return</span>&nbsp;<span class="op" id="1750767">-</span><span class="num" id="1750768">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1750771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1750775">print</span><span class="op" id="1750780">(</span><span class="string" id="1750781">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1750819">,</span>&nbsp;<span class="ident" id="1750821">gofuncname</span><span class="op" id="1750831">(</span><span class="ident" id="1750832">f</span><span class="op" id="1750833">)</span><span class="op" id="1750834">,</span>&nbsp;<span class="string" id="1750836">&#34;&nbsp;pc=&#34;</span><span class="op" id="1750842">,</span>&nbsp;<span class="ident" id="1750844">hex</span><span class="op" id="1750847">(</span><span class="ident" id="1750848">pc</span><span class="op" id="1750850">)</span><span class="op" id="1750851">,</span>&nbsp;<span class="string" id="1750853">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1750865">,</span>&nbsp;<span class="ident" id="1750867">hex</span><span class="op" id="1750870">(</span><span class="ident" id="1750871">targetpc</span><span class="op" id="1750879">)</span><span class="op" id="1750880">,</span>&nbsp;<span class="string" id="1750882">&#34;&nbsp;tab=&#34;</span><span class="op" id="1750889">,</span>&nbsp;<span class="ident" id="1750891">p</span><span class="op" id="1750892">,</span>&nbsp;<span class="string" id="1750894">&#34;\n&#34;</span><span class="op" id="1750898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750902">p</span>&nbsp;<span class="op" id="1750904">=</span>&nbsp;<span class="ident" id="1750906">pclntable</span><span class="op" id="1750915">[</span><span class="ident" id="1750916">off</span><span class="op" id="1750919">:</span><span class="op" id="1750920">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750923">pc</span>&nbsp;<span class="op" id="1750926">=</span>&nbsp;<span class="ident" id="1750928">f</span><span class="op" id="1750929">.</span><span class="ident" id="1750930">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750937">val</span>&nbsp;<span class="op" id="1750941">=</span>&nbsp;<span class="op" id="1750943">-</span><span class="num" id="1750944">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750947">for</span>&nbsp;<span class="op" id="1750951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1750955">var</span>&nbsp;<span class="ident" id="1750959">ok</span>&nbsp;<span class="builtintype" id="1750962">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1750969">p</span><span class="op" id="1750970">,</span>&nbsp;<span class="ident" id="1750972">ok</span>&nbsp;<span class="op" id="1750975">=</span>&nbsp;<span class="ident" id="1750977">step</span><span class="op" id="1750981">(</span><span class="ident" id="1750982">p</span><span class="op" id="1750983">,</span>&nbsp;<span class="op" id="1750985">&amp;</span><span class="ident" id="1750986">pc</span><span class="op" id="1750988">,</span>&nbsp;<span class="op" id="1750990">&amp;</span><span class="ident" id="1750991">val</span><span class="op" id="1750994">,</span>&nbsp;<span class="ident" id="1750996">pc</span>&nbsp;<span class="op" id="1750999">==</span>&nbsp;<span class="ident" id="1751002">f</span><span class="op" id="1751003">.</span><span class="ident" id="1751004">entry</span><span class="op" id="1751009">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751013">if</span>&nbsp;<span class="op" id="1751016">!</span><span class="ident" id="1751017">ok</span>&nbsp;<span class="op" id="1751020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751025">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1751037">print</span><span class="op" id="1751042">(</span><span class="string" id="1751043">&#34;\tvalue=&#34;</span><span class="op" id="1751053">,</span>&nbsp;<span class="ident" id="1751055">val</span><span class="op" id="1751058">,</span>&nbsp;<span class="string" id="1751060">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1751072">,</span>&nbsp;<span class="ident" id="1751074">hex</span><span class="op" id="1751077">(</span><span class="ident" id="1751078">pc</span><span class="op" id="1751080">)</span><span class="op" id="1751081">,</span>&nbsp;<span class="string" id="1751083">&#34;\n&#34;</span><span class="op" id="1751087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751090">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751094">gothrow</span><span class="op" id="1751101">(</span><span class="string" id="1751102">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1751132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751135">return</span>&nbsp;<span class="op" id="1751142">-</span><span class="num" id="1751143">1</span><br>
<span class="lineno"></span><span class="op" id="1751145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1751148">func</span>&nbsp;<span class="ident" id="1751153">funcname</span><span class="op" id="1751161">(</span><span class="ident" id="1751162">f</span>&nbsp;<span class="op" id="1751164">*</span><span class="ident" id="1751165">_func</span><span class="op" id="1751170">)</span>&nbsp;<span class="op" id="1751172">*</span><span class="builtintype" id="1751173">byte</span>&nbsp;<span class="op" id="1751178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751181">if</span>&nbsp;<span class="ident" id="1751184">f</span>&nbsp;<span class="op" id="1751186">==</span>&nbsp;<span class="ident" id="1751189">nil</span>&nbsp;<span class="op" id="1751193">||</span>&nbsp;<span class="ident" id="1751196">f</span><span class="op" id="1751197">.</span><span class="ident" id="1751198">nameoff</span>&nbsp;<span class="op" id="1751206">==</span>&nbsp;<span class="num" id="1751209">0</span>&nbsp;<span class="op" id="1751211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751215">return</span>&nbsp;<span class="ident" id="1751222">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751230">return</span>&nbsp;<span class="op" id="1751237">(</span><span class="op" id="1751238">*</span><span class="builtintype" id="1751239">byte</span><span class="op" id="1751243">)</span><span class="op" id="1751244">(</span><span class="ident" id="1751245">unsafe</span><span class="op" id="1751251">.</span><span class="ident" id="1751252">Pointer</span><span class="op" id="1751259">(</span><span class="op" id="1751260">&amp;</span><span class="ident" id="1751261">pclntable</span><span class="op" id="1751270">[</span><span class="ident" id="1751271">f</span><span class="op" id="1751272">.</span><span class="ident" id="1751273">nameoff</span><span class="op" id="1751280">]</span><span class="op" id="1751281">)</span><span class="op" id="1751282">)</span><br>
<span class="lineno">205</span><span class="op" id="1751284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1751287">func</span>&nbsp;<span class="ident" id="1751292">gofuncname</span><span class="op" id="1751302">(</span><span class="ident" id="1751303">f</span>&nbsp;<span class="op" id="1751305">*</span><span class="ident" id="1751306">_func</span><span class="op" id="1751311">)</span>&nbsp;<span class="builtintype" id="1751313">string</span>&nbsp;<span class="op" id="1751320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751323">return</span>&nbsp;<span class="ident" id="1751330">gostringnocopy</span><span class="op" id="1751344">(</span><span class="ident" id="1751345">funcname</span><span class="op" id="1751353">(</span><span class="ident" id="1751354">f</span><span class="op" id="1751355">)</span><span class="op" id="1751356">)</span><br>
<span class="lineno"></span><span class="op" id="1751358">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1751361">func</span>&nbsp;<span class="ident" id="1751366">funcline1</span><span class="op" id="1751375">(</span><span class="ident" id="1751376">f</span>&nbsp;<span class="op" id="1751378">*</span><span class="ident" id="1751379">_func</span><span class="op" id="1751384">,</span>&nbsp;<span class="ident" id="1751386">targetpc</span>&nbsp;<span class="builtintype" id="1751395">uintptr</span><span class="op" id="1751402">,</span>&nbsp;<span class="ident" id="1751404">file</span>&nbsp;<span class="op" id="1751409">*</span><span class="builtintype" id="1751410">string</span><span class="op" id="1751416">,</span>&nbsp;<span class="ident" id="1751418">strict</span>&nbsp;<span class="builtintype" id="1751425">bool</span><span class="op" id="1751429">)</span>&nbsp;<span class="builtintype" id="1751431">int32</span>&nbsp;<span class="op" id="1751437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751440">*</span><span class="ident" id="1751441">file</span>&nbsp;<span class="op" id="1751446">=</span>&nbsp;<span class="string" id="1751448">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751453">fileno</span>&nbsp;<span class="op" id="1751460">:=</span>&nbsp;<span class="builtintype" id="1751463">int</span><span class="op" id="1751466">(</span><span class="ident" id="1751467">pcvalue</span><span class="op" id="1751474">(</span><span class="ident" id="1751475">f</span><span class="op" id="1751476">,</span>&nbsp;<span class="ident" id="1751478">f</span><span class="op" id="1751479">.</span><span class="ident" id="1751480">pcfile</span><span class="op" id="1751486">,</span>&nbsp;<span class="ident" id="1751488">targetpc</span><span class="op" id="1751496">,</span>&nbsp;<span class="ident" id="1751498">strict</span><span class="op" id="1751504">)</span><span class="op" id="1751505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751508">line</span>&nbsp;<span class="op" id="1751513">:=</span>&nbsp;<span class="ident" id="1751516">pcvalue</span><span class="op" id="1751523">(</span><span class="ident" id="1751524">f</span><span class="op" id="1751525">,</span>&nbsp;<span class="ident" id="1751527">f</span><span class="op" id="1751528">.</span><span class="ident" id="1751529">pcln</span><span class="op" id="1751533">,</span>&nbsp;<span class="ident" id="1751535">targetpc</span><span class="op" id="1751543">,</span>&nbsp;<span class="ident" id="1751545">strict</span><span class="op" id="1751551">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751554">if</span>&nbsp;<span class="ident" id="1751557">fileno</span>&nbsp;<span class="op" id="1751564">==</span>&nbsp;<span class="op" id="1751567">-</span><span class="num" id="1751568">1</span>&nbsp;<span class="op" id="1751570">||</span>&nbsp;<span class="ident" id="1751573">line</span>&nbsp;<span class="op" id="1751578">==</span>&nbsp;<span class="op" id="1751581">-</span><span class="num" id="1751582">1</span>&nbsp;<span class="op" id="1751584">||</span>&nbsp;<span class="ident" id="1751587">fileno</span>&nbsp;<span class="op" id="1751594">&gt;=</span>&nbsp;<span class="builtinfunc" id="1751597">len</span><span class="op" id="1751600">(</span><span class="ident" id="1751601">filetab</span><span class="op" id="1751608">)</span>&nbsp;<span class="op" id="1751610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1751614">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751725">return</span>&nbsp;<span class="num" id="1751732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1751738">*</span><span class="ident" id="1751739">file</span>&nbsp;<span class="op" id="1751744">=</span>&nbsp;<span class="ident" id="1751746">gostringnocopy</span><span class="op" id="1751760">(</span><span class="op" id="1751761">&amp;</span><span class="ident" id="1751762">pclntable</span><span class="op" id="1751771">[</span><span class="ident" id="1751772">filetab</span><span class="op" id="1751779">[</span><span class="ident" id="1751780">fileno</span><span class="op" id="1751786">]</span><span class="op" id="1751787">]</span><span class="op" id="1751788">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751791">return</span>&nbsp;<span class="ident" id="1751798">line</span><br>
<span class="lineno"></span><span class="op" id="1751803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1751806">func</span>&nbsp;<span class="ident" id="1751811">funcline</span><span class="op" id="1751819">(</span><span class="ident" id="1751820">f</span>&nbsp;<span class="op" id="1751822">*</span><span class="ident" id="1751823">_func</span><span class="op" id="1751828">,</span>&nbsp;<span class="ident" id="1751830">targetpc</span>&nbsp;<span class="builtintype" id="1751839">uintptr</span><span class="op" id="1751846">,</span>&nbsp;<span class="ident" id="1751848">file</span>&nbsp;<span class="op" id="1751853">*</span><span class="builtintype" id="1751854">string</span><span class="op" id="1751860">)</span>&nbsp;<span class="builtintype" id="1751862">int32</span>&nbsp;<span class="op" id="1751868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1751871">return</span>&nbsp;<span class="ident" id="1751878">funcline1</span><span class="op" id="1751887">(</span><span class="ident" id="1751888">f</span><span class="op" id="1751889">,</span>&nbsp;<span class="ident" id="1751891">targetpc</span><span class="op" id="1751899">,</span>&nbsp;<span class="ident" id="1751901">file</span><span class="op" id="1751905">,</span>&nbsp;<span class="builtintype" id="1751907">true</span><span class="op" id="1751911">)</span><br>
<span class="lineno">225</span><span class="op" id="1751913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1751916">func</span>&nbsp;<span class="ident" id="1751921">funcspdelta</span><span class="op" id="1751932">(</span><span class="ident" id="1751933">f</span>&nbsp;<span class="op" id="1751935">*</span><span class="ident" id="1751936">_func</span><span class="op" id="1751941">,</span>&nbsp;<span class="ident" id="1751943">targetpc</span>&nbsp;<span class="builtintype" id="1751952">uintptr</span><span class="op" id="1751959">)</span>&nbsp;<span class="builtintype" id="1751961">int32</span>&nbsp;<span class="op" id="1751967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1751970">x</span>&nbsp;<span class="op" id="1751972">:=</span>&nbsp;<span class="ident" id="1751975">pcvalue</span><span class="op" id="1751982">(</span><span class="ident" id="1751983">f</span><span class="op" id="1751984">,</span>&nbsp;<span class="ident" id="1751986">f</span><span class="op" id="1751987">.</span><span class="ident" id="1751988">pcsp</span><span class="op" id="1751992">,</span>&nbsp;<span class="ident" id="1751994">targetpc</span><span class="op" id="1752002">,</span>&nbsp;<span class="builtintype" id="1752004">true</span><span class="op" id="1752008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752011">if</span>&nbsp;<span class="ident" id="1752014">x</span><span class="op" id="1752015">&amp;</span><span class="op" id="1752016">(</span><span class="ident" id="1752017">ptrSize</span><span class="op" id="1752024">-</span><span class="num" id="1752025">1</span><span class="op" id="1752026">)</span>&nbsp;<span class="op" id="1752028">!=</span>&nbsp;<span class="num" id="1752031">0</span>&nbsp;<span class="op" id="1752033">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1752037">print</span><span class="op" id="1752042">(</span><span class="string" id="1752043">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1752061">,</span>&nbsp;<span class="ident" id="1752063">hex</span><span class="op" id="1752066">(</span><span class="ident" id="1752067">f</span><span class="op" id="1752068">.</span><span class="ident" id="1752069">entry</span><span class="op" id="1752074">)</span><span class="op" id="1752075">,</span>&nbsp;<span class="string" id="1752077">&#34;&nbsp;&#34;</span><span class="op" id="1752080">,</span>&nbsp;<span class="ident" id="1752082">hex</span><span class="op" id="1752085">(</span><span class="ident" id="1752086">targetpc</span><span class="op" id="1752094">)</span><span class="op" id="1752095">,</span>&nbsp;<span class="string" id="1752097">&#34;&nbsp;&#34;</span><span class="op" id="1752100">,</span>&nbsp;<span class="ident" id="1752102">hex</span><span class="op" id="1752105">(</span><span class="ident" id="1752106">f</span><span class="op" id="1752107">.</span><span class="ident" id="1752108">pcsp</span><span class="op" id="1752112">)</span><span class="op" id="1752113">,</span>&nbsp;<span class="string" id="1752115">&#34;&nbsp;&#34;</span><span class="op" id="1752118">,</span>&nbsp;<span class="ident" id="1752120">x</span><span class="op" id="1752121">,</span>&nbsp;<span class="string" id="1752123">&#34;\n&#34;</span><span class="op" id="1752127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1752130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752133">return</span>&nbsp;<span class="ident" id="1752140">x</span><br>
<span class="lineno"></span><span class="op" id="1752142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1752145">func</span>&nbsp;<span class="ident" id="1752150">pcdatavalue</span><span class="op" id="1752161">(</span><span class="ident" id="1752162">f</span>&nbsp;<span class="op" id="1752164">*</span><span class="ident" id="1752165">_func</span><span class="op" id="1752170">,</span>&nbsp;<span class="ident" id="1752172">table</span>&nbsp;<span class="builtintype" id="1752178">int32</span><span class="op" id="1752183">,</span>&nbsp;<span class="ident" id="1752185">targetpc</span>&nbsp;<span class="builtintype" id="1752194">uintptr</span><span class="op" id="1752201">)</span>&nbsp;<span class="builtintype" id="1752203">int32</span>&nbsp;<span class="op" id="1752209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752212">if</span>&nbsp;<span class="ident" id="1752215">table</span>&nbsp;<span class="op" id="1752221">&lt;</span>&nbsp;<span class="num" id="1752223">0</span>&nbsp;<span class="op" id="1752225">||</span>&nbsp;<span class="ident" id="1752228">table</span>&nbsp;<span class="op" id="1752234">&gt;=</span>&nbsp;<span class="ident" id="1752237">f</span><span class="op" id="1752238">.</span><span class="ident" id="1752239">npcdata</span>&nbsp;<span class="op" id="1752247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752251">return</span>&nbsp;<span class="op" id="1752258">-</span><span class="num" id="1752259">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1752262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1752265">off</span>&nbsp;<span class="op" id="1752269">:=</span>&nbsp;<span class="op" id="1752272">*</span><span class="op" id="1752273">(</span><span class="op" id="1752274">*</span><span class="builtintype" id="1752275">int32</span><span class="op" id="1752280">)</span><span class="op" id="1752281">(</span><span class="ident" id="1752282">add</span><span class="op" id="1752285">(</span><span class="ident" id="1752286">unsafe</span><span class="op" id="1752292">.</span><span class="ident" id="1752293">Pointer</span><span class="op" id="1752300">(</span><span class="op" id="1752301">&amp;</span><span class="ident" id="1752302">f</span><span class="op" id="1752303">.</span><span class="ident" id="1752304">nfuncdata</span><span class="op" id="1752313">)</span><span class="op" id="1752314">,</span>&nbsp;<span class="ident" id="1752316">unsafe</span><span class="op" id="1752322">.</span><span class="ident" id="1752323">Sizeof</span><span class="op" id="1752329">(</span><span class="ident" id="1752330">f</span><span class="op" id="1752331">.</span><span class="ident" id="1752332">nfuncdata</span><span class="op" id="1752341">)</span><span class="op" id="1752342">+</span><span class="builtintype" id="1752343">uintptr</span><span class="op" id="1752350">(</span><span class="ident" id="1752351">table</span><span class="op" id="1752356">)</span><span class="op" id="1752357">*</span><span class="num" id="1752358">4</span><span class="op" id="1752359">)</span><span class="op" id="1752360">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752363">return</span>&nbsp;<span class="ident" id="1752370">pcvalue</span><span class="op" id="1752377">(</span><span class="ident" id="1752378">f</span><span class="op" id="1752379">,</span>&nbsp;<span class="ident" id="1752381">off</span><span class="op" id="1752384">,</span>&nbsp;<span class="ident" id="1752386">targetpc</span><span class="op" id="1752394">,</span>&nbsp;<span class="builtintype" id="1752396">true</span><span class="op" id="1752400">)</span><br>
<span class="lineno"></span><span class="op" id="1752402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1752405">func</span>&nbsp;<span class="ident" id="1752410">funcdata</span><span class="op" id="1752418">(</span><span class="ident" id="1752419">f</span>&nbsp;<span class="op" id="1752421">*</span><span class="ident" id="1752422">_func</span><span class="op" id="1752427">,</span>&nbsp;<span class="ident" id="1752429">i</span>&nbsp;<span class="builtintype" id="1752431">int32</span><span class="op" id="1752436">)</span>&nbsp;<span class="ident" id="1752438">unsafe</span><span class="op" id="1752444">.</span><span class="ident" id="1752445">Pointer</span>&nbsp;<span class="op" id="1752453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752456">if</span>&nbsp;<span class="ident" id="1752459">i</span>&nbsp;<span class="op" id="1752461">&lt;</span>&nbsp;<span class="num" id="1752463">0</span>&nbsp;<span class="op" id="1752465">||</span>&nbsp;<span class="ident" id="1752468">i</span>&nbsp;<span class="op" id="1752470">&gt;=</span>&nbsp;<span class="ident" id="1752473">f</span><span class="op" id="1752474">.</span><span class="ident" id="1752475">nfuncdata</span>&nbsp;<span class="op" id="1752485">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752489">return</span>&nbsp;<span class="ident" id="1752496">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1752501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1752504">p</span>&nbsp;<span class="op" id="1752506">:=</span>&nbsp;<span class="ident" id="1752509">add</span><span class="op" id="1752512">(</span><span class="ident" id="1752513">unsafe</span><span class="op" id="1752519">.</span><span class="ident" id="1752520">Pointer</span><span class="op" id="1752527">(</span><span class="op" id="1752528">&amp;</span><span class="ident" id="1752529">f</span><span class="op" id="1752530">.</span><span class="ident" id="1752531">nfuncdata</span><span class="op" id="1752540">)</span><span class="op" id="1752541">,</span>&nbsp;<span class="ident" id="1752543">unsafe</span><span class="op" id="1752549">.</span><span class="ident" id="1752550">Sizeof</span><span class="op" id="1752556">(</span><span class="ident" id="1752557">f</span><span class="op" id="1752558">.</span><span class="ident" id="1752559">nfuncdata</span><span class="op" id="1752568">)</span><span class="op" id="1752569">+</span><span class="builtintype" id="1752570">uintptr</span><span class="op" id="1752577">(</span><span class="ident" id="1752578">f</span><span class="op" id="1752579">.</span><span class="ident" id="1752580">npcdata</span><span class="op" id="1752587">)</span><span class="op" id="1752588">*</span><span class="num" id="1752589">4</span><span class="op" id="1752590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752593">if</span>&nbsp;<span class="ident" id="1752596">ptrSize</span>&nbsp;<span class="op" id="1752604">==</span>&nbsp;<span class="num" id="1752607">8</span>&nbsp;<span class="op" id="1752609">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1752612">uintptr</span><span class="op" id="1752619">(</span><span class="ident" id="1752620">p</span><span class="op" id="1752621">)</span><span class="op" id="1752622">&amp;</span><span class="num" id="1752623">4</span>&nbsp;<span class="op" id="1752625">!=</span>&nbsp;<span class="num" id="1752628">0</span>&nbsp;<span class="op" id="1752630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752634">if</span>&nbsp;<span class="builtintype" id="1752637">uintptr</span><span class="op" id="1752644">(</span><span class="ident" id="1752645">unsafe</span><span class="op" id="1752651">.</span><span class="ident" id="1752652">Pointer</span><span class="op" id="1752659">(</span><span class="ident" id="1752660">f</span><span class="op" id="1752661">)</span><span class="op" id="1752662">)</span><span class="op" id="1752663">&amp;</span><span class="num" id="1752664">4</span>&nbsp;<span class="op" id="1752666">!=</span>&nbsp;<span class="num" id="1752669">0</span>&nbsp;<span class="op" id="1752671">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1752676">println</span><span class="op" id="1752683">(</span><span class="string" id="1752684">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1752710">,</span>&nbsp;<span class="ident" id="1752712">f</span><span class="op" id="1752713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1752717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1752721">p</span>&nbsp;<span class="op" id="1752723">=</span>&nbsp;<span class="ident" id="1752725">add</span><span class="op" id="1752728">(</span><span class="ident" id="1752729">p</span><span class="op" id="1752730">,</span>&nbsp;<span class="num" id="1752732">4</span><span class="op" id="1752733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1752736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752739">return</span>&nbsp;<span class="op" id="1752746">*</span><span class="op" id="1752747">(</span><span class="op" id="1752748">*</span><span class="ident" id="1752749">unsafe</span><span class="op" id="1752755">.</span><span class="ident" id="1752756">Pointer</span><span class="op" id="1752763">)</span><span class="op" id="1752764">(</span><span class="ident" id="1752765">add</span><span class="op" id="1752768">(</span><span class="ident" id="1752769">p</span><span class="op" id="1752770">,</span>&nbsp;<span class="builtintype" id="1752772">uintptr</span><span class="op" id="1752779">(</span><span class="ident" id="1752780">i</span><span class="op" id="1752781">)</span><span class="op" id="1752782">*</span><span class="ident" id="1752783">ptrSize</span><span class="op" id="1752790">)</span><span class="op" id="1752791">)</span><br>
<span class="lineno">255</span><span class="op" id="1752793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1752796">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1752862">func</span>&nbsp;<span class="ident" id="1752867">step</span><span class="op" id="1752871">(</span><span class="ident" id="1752872">p</span>&nbsp;<span class="op" id="1752874">[</span><span class="op" id="1752875">]</span><span class="builtintype" id="1752876">byte</span><span class="op" id="1752880">,</span>&nbsp;<span class="ident" id="1752882">pc</span>&nbsp;<span class="op" id="1752885">*</span><span class="builtintype" id="1752886">uintptr</span><span class="op" id="1752893">,</span>&nbsp;<span class="ident" id="1752895">val</span>&nbsp;<span class="op" id="1752899">*</span><span class="builtintype" id="1752900">int32</span><span class="op" id="1752905">,</span>&nbsp;<span class="ident" id="1752907">first</span>&nbsp;<span class="builtintype" id="1752913">bool</span><span class="op" id="1752917">)</span>&nbsp;<span class="op" id="1752919">(</span><span class="ident" id="1752920">newp</span>&nbsp;<span class="op" id="1752925">[</span><span class="op" id="1752926">]</span><span class="builtintype" id="1752927">byte</span><span class="op" id="1752931">,</span>&nbsp;<span class="ident" id="1752933">ok</span>&nbsp;<span class="builtintype" id="1752936">bool</span><span class="op" id="1752940">)</span>&nbsp;<span class="op" id="1752942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1752945">p</span><span class="op" id="1752946">,</span>&nbsp;<span class="ident" id="1752948">uvdelta</span>&nbsp;<span class="op" id="1752956">:=</span>&nbsp;<span class="ident" id="1752959">readvarint</span><span class="op" id="1752969">(</span><span class="ident" id="1752970">p</span><span class="op" id="1752971">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1752974">if</span>&nbsp;<span class="ident" id="1752977">uvdelta</span>&nbsp;<span class="op" id="1752985">==</span>&nbsp;<span class="num" id="1752988">0</span>&nbsp;<span class="op" id="1752990">&amp;&amp;</span>&nbsp;<span class="op" id="1752993">!</span><span class="ident" id="1752994">first</span>&nbsp;<span class="op" id="1753000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753004">return</span>&nbsp;<span class="ident" id="1753011">nil</span><span class="op" id="1753014">,</span>&nbsp;<span class="builtintype" id="1753016">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753026">if</span>&nbsp;<span class="ident" id="1753029">uvdelta</span><span class="op" id="1753036">&amp;</span><span class="num" id="1753037">1</span>&nbsp;<span class="op" id="1753039">!=</span>&nbsp;<span class="num" id="1753042">0</span>&nbsp;<span class="op" id="1753044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753048">uvdelta</span>&nbsp;<span class="op" id="1753056">=</span>&nbsp;<span class="op" id="1753058">^</span><span class="op" id="1753059">(</span><span class="ident" id="1753060">uvdelta</span>&nbsp;<span class="op" id="1753068">&gt;&gt;</span>&nbsp;<span class="num" id="1753071">1</span><span class="op" id="1753072">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753075">}</span>&nbsp;<span class="keyword" id="1753077">else</span>&nbsp;<span class="op" id="1753082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753086">uvdelta</span>&nbsp;<span class="op" id="1753094">&gt;&gt;=</span>&nbsp;<span class="num" id="1753098">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753104">vdelta</span>&nbsp;<span class="op" id="1753111">:=</span>&nbsp;<span class="builtintype" id="1753114">int32</span><span class="op" id="1753119">(</span><span class="ident" id="1753120">uvdelta</span><span class="op" id="1753127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753130">p</span><span class="op" id="1753131">,</span>&nbsp;<span class="ident" id="1753133">pcdelta</span>&nbsp;<span class="op" id="1753141">:=</span>&nbsp;<span class="ident" id="1753144">readvarint</span><span class="op" id="1753154">(</span><span class="ident" id="1753155">p</span><span class="op" id="1753156">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753159">*</span><span class="ident" id="1753160">pc</span>&nbsp;<span class="op" id="1753163">+=</span>&nbsp;<span class="builtintype" id="1753166">uintptr</span><span class="op" id="1753173">(</span><span class="ident" id="1753174">pcdelta</span>&nbsp;<span class="op" id="1753182">*</span>&nbsp;<span class="ident" id="1753184">_PCQuantum</span><span class="op" id="1753194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753197">*</span><span class="ident" id="1753198">val</span>&nbsp;<span class="op" id="1753202">+=</span>&nbsp;<span class="ident" id="1753205">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753213">return</span>&nbsp;<span class="ident" id="1753220">p</span><span class="op" id="1753221">,</span>&nbsp;<span class="builtintype" id="1753223">true</span><br>
<span class="lineno"></span><span class="op" id="1753228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1753231">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1753268">func</span>&nbsp;<span class="ident" id="1753273">readvarint</span><span class="op" id="1753283">(</span><span class="ident" id="1753284">p</span>&nbsp;<span class="op" id="1753286">[</span><span class="op" id="1753287">]</span><span class="builtintype" id="1753288">byte</span><span class="op" id="1753292">)</span>&nbsp;<span class="op" id="1753294">(</span><span class="ident" id="1753295">newp</span>&nbsp;<span class="op" id="1753300">[</span><span class="op" id="1753301">]</span><span class="builtintype" id="1753302">byte</span><span class="op" id="1753306">,</span>&nbsp;<span class="ident" id="1753308">val</span>&nbsp;<span class="builtintype" id="1753312">uint32</span><span class="op" id="1753318">)</span>&nbsp;<span class="op" id="1753320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753323">var</span>&nbsp;<span class="ident" id="1753327">v</span><span class="op" id="1753328">,</span>&nbsp;<span class="ident" id="1753330">shift</span>&nbsp;<span class="builtintype" id="1753336">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753344">for</span>&nbsp;<span class="op" id="1753348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753352">b</span>&nbsp;<span class="op" id="1753354">:=</span>&nbsp;<span class="ident" id="1753357">p</span><span class="op" id="1753358">[</span><span class="num" id="1753359">0</span><span class="op" id="1753360">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753364">p</span>&nbsp;<span class="op" id="1753366">=</span>&nbsp;<span class="ident" id="1753368">p</span><span class="op" id="1753369">[</span><span class="num" id="1753370">1</span><span class="op" id="1753371">:</span><span class="op" id="1753372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753376">v</span>&nbsp;<span class="op" id="1753378">|=</span>&nbsp;<span class="op" id="1753381">(</span><span class="builtintype" id="1753382">uint32</span><span class="op" id="1753388">(</span><span class="ident" id="1753389">b</span><span class="op" id="1753390">)</span>&nbsp;<span class="op" id="1753392">&amp;</span>&nbsp;<span class="num" id="1753394">0x7F</span><span class="op" id="1753398">)</span>&nbsp;<span class="op" id="1753400">&lt;&lt;</span>&nbsp;<span class="ident" id="1753403">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753411">if</span>&nbsp;<span class="ident" id="1753414">b</span><span class="op" id="1753415">&amp;</span><span class="num" id="1753416">0x80</span>&nbsp;<span class="op" id="1753421">==</span>&nbsp;<span class="num" id="1753424">0</span>&nbsp;<span class="op" id="1753426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753431">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753439">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1753443">shift</span>&nbsp;<span class="op" id="1753449">+=</span>&nbsp;<span class="num" id="1753452">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1753455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1753458">return</span>&nbsp;<span class="ident" id="1753465">p</span><span class="op" id="1753466">,</span>&nbsp;<span class="ident" id="1753468">v</span><br>
<span class="lineno"></span><span class="op" id="1753470">}</span>
</div>
</body>
</html>
