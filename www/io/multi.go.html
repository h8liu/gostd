<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2414337">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2414392">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2414446">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2414497">package</span>&nbsp;<span class="ident" id="2414505">io</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2414509">type</span>&nbsp;<span class="ident" id="2414514">multiReader</span>&nbsp;<span class="keyword" id="2414526">struct</span>&nbsp;<span class="op" id="2414533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2414536">readers</span>&nbsp;<span class="op" id="2414544">[</span><span class="op" id="2414545">]</span><span class="ident" id="2414546"><a href="/io/io.go.html#2401732">Reader</a></span><br>
<span class="lineno"></span><span class="op" id="2414553">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2414556">func</span>&nbsp;<span class="op" id="2414561">(</span><span class="ident" id="2414562">mr</span>&nbsp;<span class="op" id="2414565">*</span><span class="ident" id="2414566"><a href="/io/multi.go.html#2414514">multiReader</a></span><span class="op" id="2414577">)</span>&nbsp;<span class="ident" id="2414579">Read</span><span class="op" id="2414583">(</span><span class="ident" id="2414584">p</span>&nbsp;<span class="op" id="2414586">[</span><span class="op" id="2414587">]</span><span class="builtintype" id="2414588">byte</span><span class="op" id="2414592">)</span>&nbsp;<span class="op" id="2414594">(</span><span class="ident" id="2414595">n</span>&nbsp;<span class="builtintype" id="2414597">int</span><span class="op" id="2414600">,</span>&nbsp;<span class="ident" id="2414602">err</span>&nbsp;<span class="builtintype" id="2414606">error</span><span class="op" id="2414611">)</span>&nbsp;<span class="op" id="2414613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2414616">for</span>&nbsp;<span class="builtinfunc" id="2414620">len</span><span class="op" id="2414623">(</span><span class="ident" id="2414624"><a href="/io/multi.go.html#2414562">mr</a></span><span class="op" id="2414626">.</span><span class="ident" id="2414627">readers</span><span class="op" id="2414634">)</span>&nbsp;<span class="op" id="2414636">&gt;</span>&nbsp;<span class="num" id="2414638">0</span>&nbsp;<span class="op" id="2414640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2414644"><a href="/io/multi.go.html#2414595">n</a></span><span class="op" id="2414645">,</span>&nbsp;<span class="ident" id="2414647"><a href="/io/multi.go.html#2414602">err</a></span>&nbsp;<span class="op" id="2414651">=</span>&nbsp;<span class="ident" id="2414653"><a href="/io/multi.go.html#2414562">mr</a></span><span class="op" id="2414655">.</span><span class="ident" id="2414656">readers</span><span class="op" id="2414663">[</span><span class="num" id="2414664">0</span><span class="op" id="2414665">]</span><span class="op" id="2414666">.</span><span class="ident" id="2414667">Read</span><span class="op" id="2414671">(</span><span class="ident" id="2414672"><a href="/io/multi.go.html#2414584">p</a></span><span class="op" id="2414673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2414677">if</span>&nbsp;<span class="ident" id="2414680"><a href="/io/multi.go.html#2414595">n</a></span>&nbsp;<span class="op" id="2414682">&gt;</span>&nbsp;<span class="num" id="2414684">0</span>&nbsp;<span class="op" id="2414686">||</span>&nbsp;<span class="ident" id="2414689"><a href="/io/multi.go.html#2414602">err</a></span>&nbsp;<span class="op" id="2414693">!=</span>&nbsp;<span class="ident" id="2414696"><a href="/io/io.go.html#2399859">EOF</a></span>&nbsp;<span class="op" id="2414700">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2414705">if</span>&nbsp;<span class="ident" id="2414708"><a href="/io/multi.go.html#2414602">err</a></span>&nbsp;<span class="op" id="2414712">==</span>&nbsp;<span class="ident" id="2414715"><a href="/io/io.go.html#2399859">EOF</a></span>&nbsp;<span class="op" id="2414719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2414725">//&nbsp;Don&#39;t&nbsp;return&nbsp;EOF&nbsp;yet.&nbsp;There&nbsp;may&nbsp;be&nbsp;more&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2414778">//&nbsp;in&nbsp;the&nbsp;remaining&nbsp;readers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2414811"><a href="/io/multi.go.html#2414602">err</a></span>&nbsp;<span class="op" id="2414815">=</span>&nbsp;<span class="ident" id="2414817">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2414824">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2414829">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2414838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2414842"><a href="/io/multi.go.html#2414562">mr</a></span><span class="op" id="2414844">.</span><span class="ident" id="2414845">readers</span>&nbsp;<span class="op" id="2414853">=</span>&nbsp;<span class="ident" id="2414855"><a href="/io/multi.go.html#2414562">mr</a></span><span class="op" id="2414857">.</span><span class="ident" id="2414858">readers</span><span class="op" id="2414865">[</span><span class="num" id="2414866">1</span><span class="op" id="2414867">:</span><span class="op" id="2414868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2414871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2414874">return</span>&nbsp;<span class="num" id="2414881">0</span><span class="op" id="2414882">,</span>&nbsp;<span class="ident" id="2414884"><a href="/io/io.go.html#2399859">EOF</a></span><br>
<span class="lineno">25</span><span class="op" id="2414888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2414891">//&nbsp;MultiReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&#39;s&nbsp;the&nbsp;logical&nbsp;concatenation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2414959">//&nbsp;the&nbsp;provided&nbsp;input&nbsp;readers.&nbsp;&nbsp;They&#39;re&nbsp;read&nbsp;sequentially.&nbsp;&nbsp;Once&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2415028">//&nbsp;inputs&nbsp;have&nbsp;returned&nbsp;EOF,&nbsp;Read&nbsp;will&nbsp;return&nbsp;EOF.&nbsp;&nbsp;If&nbsp;any&nbsp;of&nbsp;the&nbsp;readers</span><br>
<span class="lineno">30</span><span class="comment" id="2415102">//&nbsp;return&nbsp;a&nbsp;non-nil,&nbsp;non-EOF&nbsp;error,&nbsp;Read&nbsp;will&nbsp;return&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="2415167">func</span>&nbsp;<span class="ident" id="2415172">MultiReader</span><span class="op" id="2415183">(</span><span class="ident" id="2415184">readers</span>&nbsp;<span class="op" id="2415192">...</span><span class="ident" id="2415195"><a href="/io/io.go.html#2401732">Reader</a></span><span class="op" id="2415201">)</span>&nbsp;<span class="ident" id="2415203"><a href="/io/io.go.html#2401732">Reader</a></span>&nbsp;<span class="op" id="2415210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2415213">r</span>&nbsp;<span class="op" id="2415215">:=</span>&nbsp;<span class="builtinfunc" id="2415218">make</span><span class="op" id="2415222">(</span><span class="op" id="2415223">[</span><span class="op" id="2415224">]</span><span class="ident" id="2415225"><a href="/io/io.go.html#2401732">Reader</a></span><span class="op" id="2415231">,</span>&nbsp;<span class="builtinfunc" id="2415233">len</span><span class="op" id="2415236">(</span><span class="ident" id="2415237"><a href="/io/multi.go.html#2415184">readers</a></span><span class="op" id="2415244">)</span><span class="op" id="2415245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2415248">copy</span><span class="op" id="2415252">(</span><span class="ident" id="2415253"><a href="/io/multi.go.html#2415213">r</a></span><span class="op" id="2415254">,</span>&nbsp;<span class="ident" id="2415256"><a href="/io/multi.go.html#2415184">readers</a></span><span class="op" id="2415263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415266">return</span>&nbsp;<span class="op" id="2415273">&amp;</span><span class="ident" id="2415274"><a href="/io/multi.go.html#2414514">multiReader</a></span><span class="op" id="2415285">{</span><span class="ident" id="2415286"><a href="/io/multi.go.html#2415213">r</a></span><span class="op" id="2415287">}</span><br>
<span class="lineno">35</span><span class="op" id="2415289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2415292">type</span>&nbsp;<span class="ident" id="2415297">multiWriter</span>&nbsp;<span class="keyword" id="2415309">struct</span>&nbsp;<span class="op" id="2415316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2415319">writers</span>&nbsp;<span class="op" id="2415327">[</span><span class="op" id="2415328">]</span><span class="ident" id="2415329"><a href="/io/io.go.html#2402223">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="2415336">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="2415339">func</span>&nbsp;<span class="op" id="2415344">(</span><span class="ident" id="2415345">t</span>&nbsp;<span class="op" id="2415347">*</span><span class="ident" id="2415348"><a href="/io/multi.go.html#2415297">multiWriter</a></span><span class="op" id="2415359">)</span>&nbsp;<span class="ident" id="2415361">Write</span><span class="op" id="2415366">(</span><span class="ident" id="2415367">p</span>&nbsp;<span class="op" id="2415369">[</span><span class="op" id="2415370">]</span><span class="builtintype" id="2415371">byte</span><span class="op" id="2415375">)</span>&nbsp;<span class="op" id="2415377">(</span><span class="ident" id="2415378">n</span>&nbsp;<span class="builtintype" id="2415380">int</span><span class="op" id="2415383">,</span>&nbsp;<span class="ident" id="2415385">err</span>&nbsp;<span class="builtintype" id="2415389">error</span><span class="op" id="2415394">)</span>&nbsp;<span class="op" id="2415396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415399">for</span>&nbsp;<span class="ident" id="2415403">_</span><span class="op" id="2415404">,</span>&nbsp;<span class="ident" id="2415406">w</span>&nbsp;<span class="op" id="2415408">:=</span>&nbsp;<span class="keyword" id="2415411">range</span>&nbsp;<span class="ident" id="2415417"><a href="/io/multi.go.html#2415345">t</a></span><span class="op" id="2415418">.</span><span class="ident" id="2415419">writers</span>&nbsp;<span class="op" id="2415427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2415431"><a href="/io/multi.go.html#2415378">n</a></span><span class="op" id="2415432">,</span>&nbsp;<span class="ident" id="2415434"><a href="/io/multi.go.html#2415385">err</a></span>&nbsp;<span class="op" id="2415438">=</span>&nbsp;<span class="ident" id="2415440"><a href="/io/multi.go.html#2415406">w</a></span><span class="op" id="2415441">.</span><span class="ident" id="2415442">Write</span><span class="op" id="2415447">(</span><span class="ident" id="2415448"><a href="/io/multi.go.html#2415367">p</a></span><span class="op" id="2415449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415453">if</span>&nbsp;<span class="ident" id="2415456"><a href="/io/multi.go.html#2415385">err</a></span>&nbsp;<span class="op" id="2415460">!=</span>&nbsp;<span class="ident" id="2415463">nil</span>&nbsp;<span class="op" id="2415467">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415472">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2415481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415485">if</span>&nbsp;<span class="ident" id="2415488"><a href="/io/multi.go.html#2415378">n</a></span>&nbsp;<span class="op" id="2415490">!=</span>&nbsp;<span class="builtinfunc" id="2415493">len</span><span class="op" id="2415496">(</span><span class="ident" id="2415497"><a href="/io/multi.go.html#2415367">p</a></span><span class="op" id="2415498">)</span>&nbsp;<span class="op" id="2415500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2415505"><a href="/io/multi.go.html#2415385">err</a></span>&nbsp;<span class="op" id="2415509">=</span>&nbsp;<span class="ident" id="2415511"><a href="/io/io.go.html#2399384">ErrShortWrite</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415528">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2415537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2415540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415543">return</span>&nbsp;<span class="builtinfunc" id="2415550">len</span><span class="op" id="2415553">(</span><span class="ident" id="2415554"><a href="/io/multi.go.html#2415367">p</a></span><span class="op" id="2415555">)</span><span class="op" id="2415556">,</span>&nbsp;<span class="ident" id="2415558">nil</span><br>
<span class="lineno"></span><span class="op" id="2415562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2415565">//&nbsp;MultiWriter&nbsp;creates&nbsp;a&nbsp;writer&nbsp;that&nbsp;duplicates&nbsp;its&nbsp;writes&nbsp;to&nbsp;all&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2415635">//&nbsp;provided&nbsp;writers,&nbsp;similar&nbsp;to&nbsp;the&nbsp;Unix&nbsp;tee(1)&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="2415692">func</span>&nbsp;<span class="ident" id="2415697">MultiWriter</span><span class="op" id="2415708">(</span><span class="ident" id="2415709">writers</span>&nbsp;<span class="op" id="2415717">...</span><span class="ident" id="2415720"><a href="/io/io.go.html#2402223">Writer</a></span><span class="op" id="2415726">)</span>&nbsp;<span class="ident" id="2415728"><a href="/io/io.go.html#2402223">Writer</a></span>&nbsp;<span class="op" id="2415735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2415738">w</span>&nbsp;<span class="op" id="2415740">:=</span>&nbsp;<span class="builtinfunc" id="2415743">make</span><span class="op" id="2415747">(</span><span class="op" id="2415748">[</span><span class="op" id="2415749">]</span><span class="ident" id="2415750"><a href="/io/io.go.html#2402223">Writer</a></span><span class="op" id="2415756">,</span>&nbsp;<span class="builtinfunc" id="2415758">len</span><span class="op" id="2415761">(</span><span class="ident" id="2415762"><a href="/io/multi.go.html#2415709">writers</a></span><span class="op" id="2415769">)</span><span class="op" id="2415770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2415773">copy</span><span class="op" id="2415777">(</span><span class="ident" id="2415778"><a href="/io/multi.go.html#2415738">w</a></span><span class="op" id="2415779">,</span>&nbsp;<span class="ident" id="2415781"><a href="/io/multi.go.html#2415709">writers</a></span><span class="op" id="2415788">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2415791">return</span>&nbsp;<span class="op" id="2415798">&amp;</span><span class="ident" id="2415799"><a href="/io/multi.go.html#2415297">multiWriter</a></span><span class="op" id="2415810">{</span><span class="ident" id="2415811"><a href="/io/multi.go.html#2415738">w</a></span><span class="op" id="2415812">}</span><br>
<span class="lineno"></span><span class="op" id="2415814">}</span>
</div>
</body>
</html>
