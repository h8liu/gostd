<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3204864">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3204919">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3204973">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3205024">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3205081">package</span>&nbsp;<span class="ident" id="3205089">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3205097">import</span>&nbsp;<span class="op" id="3205104">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3205107">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3205116">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3205122">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3205128">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3205136">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3205143">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3205146">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3205221">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3205286">func</span>&nbsp;<span class="ident" id="3205291">readAll</span><span class="op" id="3205298">(</span><span class="ident" id="3205299">r</span>&nbsp;<span class="ident" id="3205301">io</span><span class="op" id="3205303">.</span><span class="ident" id="3205304">Reader</span><span class="op" id="3205310">,</span>&nbsp;<span class="ident" id="3205312">capacity</span>&nbsp;<span class="ident" id="3205321">int64</span><span class="op" id="3205326">)</span>&nbsp;<span class="op" id="3205328">(</span><span class="ident" id="3205329">b</span>&nbsp;<span class="op" id="3205331">[</span><span class="op" id="3205332">]</span><span class="builtintype" id="3205333">byte</span><span class="op" id="3205337">,</span>&nbsp;<span class="ident" id="3205339">err</span>&nbsp;<span class="builtintype" id="3205343">error</span><span class="op" id="3205348">)</span>&nbsp;<span class="op" id="3205350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205353">buf</span>&nbsp;<span class="op" id="3205357">:=</span>&nbsp;<span class="ident" id="3205360">bytes</span><span class="op" id="3205365">.</span><span class="ident" id="3205366">NewBuffer</span><span class="op" id="3205375">(</span><span class="builtinfunc" id="3205376">make</span><span class="op" id="3205380">(</span><span class="op" id="3205381">[</span><span class="op" id="3205382">]</span><span class="builtintype" id="3205383">byte</span><span class="op" id="3205387">,</span>&nbsp;<span class="num" id="3205389">0</span><span class="op" id="3205390">,</span>&nbsp;<span class="ident" id="3205392">capacity</span><span class="op" id="3205400">)</span><span class="op" id="3205401">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3205404">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3205464">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205518">defer</span>&nbsp;<span class="keyword" id="3205524">func</span><span class="op" id="3205528">(</span><span class="op" id="3205529">)</span>&nbsp;<span class="op" id="3205531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205535">e</span>&nbsp;<span class="op" id="3205537">:=</span>&nbsp;<span class="builtinfunc" id="3205540">recover</span><span class="op" id="3205547">(</span><span class="op" id="3205548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205552">if</span>&nbsp;<span class="ident" id="3205555">e</span>&nbsp;<span class="op" id="3205557">==</span>&nbsp;<span class="ident" id="3205560">nil</span>&nbsp;<span class="op" id="3205564">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205569">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205582">if</span>&nbsp;<span class="ident" id="3205585">panicErr</span><span class="op" id="3205593">,</span>&nbsp;<span class="ident" id="3205595">ok</span>&nbsp;<span class="op" id="3205598">:=</span>&nbsp;<span class="ident" id="3205601">e</span><span class="op" id="3205602">.</span><span class="op" id="3205603">(</span><span class="builtintype" id="3205604">error</span><span class="op" id="3205609">)</span><span class="op" id="3205610">;</span>&nbsp;<span class="ident" id="3205612">ok</span>&nbsp;<span class="op" id="3205615">&amp;&amp;</span>&nbsp;<span class="ident" id="3205618">panicErr</span>&nbsp;<span class="op" id="3205627">==</span>&nbsp;<span class="ident" id="3205630">bytes</span><span class="op" id="3205635">.</span><span class="ident" id="3205636">ErrTooLarge</span>&nbsp;<span class="op" id="3205648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205653">err</span>&nbsp;<span class="op" id="3205657">=</span>&nbsp;<span class="ident" id="3205659">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205670">}</span>&nbsp;<span class="keyword" id="3205672">else</span>&nbsp;<span class="op" id="3205677">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3205682">panic</span><span class="op" id="3205687">(</span><span class="ident" id="3205688">e</span><span class="op" id="3205689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3205696">}</span><span class="op" id="3205697">(</span><span class="op" id="3205698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3205701">_</span><span class="op" id="3205702">,</span>&nbsp;<span class="ident" id="3205704">err</span>&nbsp;<span class="op" id="3205708">=</span>&nbsp;<span class="ident" id="3205710">buf</span><span class="op" id="3205713">.</span><span class="ident" id="3205714">ReadFrom</span><span class="op" id="3205722">(</span><span class="ident" id="3205723">r</span><span class="op" id="3205724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3205727">return</span>&nbsp;<span class="ident" id="3205734">buf</span><span class="op" id="3205737">.</span><span class="ident" id="3205738">Bytes</span><span class="op" id="3205743">(</span><span class="op" id="3205744">)</span><span class="op" id="3205745">,</span>&nbsp;<span class="ident" id="3205747">err</span><br>
<span class="lineno">35</span><span class="op" id="3205751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3205754">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3205830">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3205906">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3205980">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3206011">func</span>&nbsp;<span class="ident" id="3206016">ReadAll</span><span class="op" id="3206023">(</span><span class="ident" id="3206024">r</span>&nbsp;<span class="ident" id="3206026">io</span><span class="op" id="3206028">.</span><span class="ident" id="3206029">Reader</span><span class="op" id="3206035">)</span>&nbsp;<span class="op" id="3206037">(</span><span class="op" id="3206038">[</span><span class="op" id="3206039">]</span><span class="builtintype" id="3206040">byte</span><span class="op" id="3206044">,</span>&nbsp;<span class="builtintype" id="3206046">error</span><span class="op" id="3206051">)</span>&nbsp;<span class="op" id="3206053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206056">return</span>&nbsp;<span class="ident" id="3206063">readAll</span><span class="op" id="3206070">(</span><span class="ident" id="3206071">r</span><span class="op" id="3206072">,</span>&nbsp;<span class="ident" id="3206074">bytes</span><span class="op" id="3206079">.</span><span class="ident" id="3206080">MinRead</span><span class="op" id="3206087">)</span><br>
<span class="lineno"></span><span class="op" id="3206089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3206092">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3206163">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3206237">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3206309">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3206328">func</span>&nbsp;<span class="ident" id="3206333">ReadFile</span><span class="op" id="3206341">(</span><span class="ident" id="3206342">filename</span>&nbsp;<span class="builtintype" id="3206351">string</span><span class="op" id="3206357">)</span>&nbsp;<span class="op" id="3206359">(</span><span class="op" id="3206360">[</span><span class="op" id="3206361">]</span><span class="builtintype" id="3206362">byte</span><span class="op" id="3206366">,</span>&nbsp;<span class="builtintype" id="3206368">error</span><span class="op" id="3206373">)</span>&nbsp;<span class="op" id="3206375">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206378">f</span><span class="op" id="3206379">,</span>&nbsp;<span class="ident" id="3206381">err</span>&nbsp;<span class="op" id="3206385">:=</span>&nbsp;<span class="ident" id="3206388">os</span><span class="op" id="3206390">.</span><span class="ident" id="3206391">Open</span><span class="op" id="3206395">(</span><span class="ident" id="3206396">filename</span><span class="op" id="3206404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206407">if</span>&nbsp;<span class="ident" id="3206410">err</span>&nbsp;<span class="op" id="3206414">!=</span>&nbsp;<span class="ident" id="3206417">nil</span>&nbsp;<span class="op" id="3206421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206425">return</span>&nbsp;<span class="ident" id="3206432">nil</span><span class="op" id="3206435">,</span>&nbsp;<span class="ident" id="3206437">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206445">defer</span>&nbsp;<span class="ident" id="3206451">f</span><span class="op" id="3206452">.</span><span class="ident" id="3206453">Close</span><span class="op" id="3206458">(</span><span class="op" id="3206459">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206462">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206545">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206615">var</span>&nbsp;<span class="ident" id="3206619">n</span>&nbsp;<span class="ident" id="3206621">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206629">if</span>&nbsp;<span class="ident" id="3206632">fi</span><span class="op" id="3206634">,</span>&nbsp;<span class="ident" id="3206636">err</span>&nbsp;<span class="op" id="3206640">:=</span>&nbsp;<span class="ident" id="3206643">f</span><span class="op" id="3206644">.</span><span class="ident" id="3206645">Stat</span><span class="op" id="3206649">(</span><span class="op" id="3206650">)</span><span class="op" id="3206651">;</span>&nbsp;<span class="ident" id="3206653">err</span>&nbsp;<span class="op" id="3206657">==</span>&nbsp;<span class="ident" id="3206660">nil</span>&nbsp;<span class="op" id="3206664">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206668">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3206720">if</span>&nbsp;<span class="ident" id="3206723">size</span>&nbsp;<span class="op" id="3206728">:=</span>&nbsp;<span class="ident" id="3206731">fi</span><span class="op" id="3206733">.</span><span class="ident" id="3206734">Size</span><span class="op" id="3206738">(</span><span class="op" id="3206739">)</span><span class="op" id="3206740">;</span>&nbsp;<span class="ident" id="3206742">size</span>&nbsp;<span class="op" id="3206747">&lt;</span>&nbsp;<span class="num" id="3206749">1e9</span>&nbsp;<span class="op" id="3206753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3206758">n</span>&nbsp;<span class="op" id="3206760">=</span>&nbsp;<span class="ident" id="3206762">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3206772">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206775">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206857">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3206940">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207020">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3207102">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207165">return</span>&nbsp;<span class="ident" id="3207172">readAll</span><span class="op" id="3207179">(</span><span class="ident" id="3207180">f</span><span class="op" id="3207181">,</span>&nbsp;<span class="ident" id="3207183">n</span><span class="op" id="3207184">+</span><span class="ident" id="3207185">bytes</span><span class="op" id="3207190">.</span><span class="ident" id="3207191">MinRead</span><span class="op" id="3207198">)</span><br>
<span class="lineno"></span><span class="op" id="3207200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3207203">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3207257">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3207332">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3207384">func</span>&nbsp;<span class="ident" id="3207389">WriteFile</span><span class="op" id="3207398">(</span><span class="ident" id="3207399">filename</span>&nbsp;<span class="builtintype" id="3207408">string</span><span class="op" id="3207414">,</span>&nbsp;<span class="ident" id="3207416">data</span>&nbsp;<span class="op" id="3207421">[</span><span class="op" id="3207422">]</span><span class="builtintype" id="3207423">byte</span><span class="op" id="3207427">,</span>&nbsp;<span class="ident" id="3207429">perm</span>&nbsp;<span class="ident" id="3207434">os</span><span class="op" id="3207436">.</span><span class="ident" id="3207437">FileMode</span><span class="op" id="3207445">)</span>&nbsp;<span class="builtintype" id="3207447">error</span>&nbsp;<span class="op" id="3207453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207456">f</span><span class="op" id="3207457">,</span>&nbsp;<span class="ident" id="3207459">err</span>&nbsp;<span class="op" id="3207463">:=</span>&nbsp;<span class="ident" id="3207466">os</span><span class="op" id="3207468">.</span><span class="ident" id="3207469">OpenFile</span><span class="op" id="3207477">(</span><span class="ident" id="3207478">filename</span><span class="op" id="3207486">,</span>&nbsp;<span class="ident" id="3207488">os</span><span class="op" id="3207490">.</span><span class="ident" id="3207491">O_WRONLY</span><span class="op" id="3207499">|</span><span class="ident" id="3207500">os</span><span class="op" id="3207502">.</span><span class="ident" id="3207503">O_CREATE</span><span class="op" id="3207511">|</span><span class="ident" id="3207512">os</span><span class="op" id="3207514">.</span><span class="ident" id="3207515">O_TRUNC</span><span class="op" id="3207522">,</span>&nbsp;<span class="ident" id="3207524">perm</span><span class="op" id="3207528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207531">if</span>&nbsp;<span class="ident" id="3207534">err</span>&nbsp;<span class="op" id="3207538">!=</span>&nbsp;<span class="ident" id="3207541">nil</span>&nbsp;<span class="op" id="3207545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207549">return</span>&nbsp;<span class="ident" id="3207556">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3207561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207564">n</span><span class="op" id="3207565">,</span>&nbsp;<span class="ident" id="3207567">err</span>&nbsp;<span class="op" id="3207571">:=</span>&nbsp;<span class="ident" id="3207574">f</span><span class="op" id="3207575">.</span><span class="ident" id="3207576">Write</span><span class="op" id="3207581">(</span><span class="ident" id="3207582">data</span><span class="op" id="3207586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207589">if</span>&nbsp;<span class="ident" id="3207592">err</span>&nbsp;<span class="op" id="3207596">==</span>&nbsp;<span class="ident" id="3207599">nil</span>&nbsp;<span class="op" id="3207603">&amp;&amp;</span>&nbsp;<span class="ident" id="3207606">n</span>&nbsp;<span class="op" id="3207608">&lt;</span>&nbsp;<span class="builtinfunc" id="3207610">len</span><span class="op" id="3207613">(</span><span class="ident" id="3207614">data</span><span class="op" id="3207618">)</span>&nbsp;<span class="op" id="3207620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207624">err</span>&nbsp;<span class="op" id="3207628">=</span>&nbsp;<span class="ident" id="3207630">io</span><span class="op" id="3207632">.</span><span class="ident" id="3207633">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3207648">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207651">if</span>&nbsp;<span class="ident" id="3207654">err1</span>&nbsp;<span class="op" id="3207659">:=</span>&nbsp;<span class="ident" id="3207662">f</span><span class="op" id="3207663">.</span><span class="ident" id="3207664">Close</span><span class="op" id="3207669">(</span><span class="op" id="3207670">)</span><span class="op" id="3207671">;</span>&nbsp;<span class="ident" id="3207673">err</span>&nbsp;<span class="op" id="3207677">==</span>&nbsp;<span class="ident" id="3207680">nil</span>&nbsp;<span class="op" id="3207684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3207688">err</span>&nbsp;<span class="op" id="3207692">=</span>&nbsp;<span class="ident" id="3207694">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3207700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3207703">return</span>&nbsp;<span class="ident" id="3207710">err</span><br>
<span class="lineno"></span><span class="op" id="3207714">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3207717">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3207754">type</span>&nbsp;<span class="ident" id="3207759">byName</span>&nbsp;<span class="op" id="3207766">[</span><span class="op" id="3207767">]</span><span class="ident" id="3207768">os</span><span class="op" id="3207770">.</span><span class="ident" id="3207771">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3207781">func</span>&nbsp;<span class="op" id="3207786">(</span><span class="ident" id="3207787">f</span>&nbsp;<span class="ident" id="3207789">byName</span><span class="op" id="3207795">)</span>&nbsp;<span class="ident" id="3207797">Len</span><span class="op" id="3207800">(</span><span class="op" id="3207801">)</span>&nbsp;<span class="builtintype" id="3207803">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3207817">{</span>&nbsp;<span class="keyword" id="3207819">return</span>&nbsp;<span class="builtinfunc" id="3207826">len</span><span class="op" id="3207829">(</span><span class="ident" id="3207830">f</span><span class="op" id="3207831">)</span>&nbsp;<span class="op" id="3207833">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3207835">func</span>&nbsp;<span class="op" id="3207840">(</span><span class="ident" id="3207841">f</span>&nbsp;<span class="ident" id="3207843">byName</span><span class="op" id="3207849">)</span>&nbsp;<span class="ident" id="3207851">Less</span><span class="op" id="3207855">(</span><span class="ident" id="3207856">i</span><span class="op" id="3207857">,</span>&nbsp;<span class="ident" id="3207859">j</span>&nbsp;<span class="builtintype" id="3207861">int</span><span class="op" id="3207864">)</span>&nbsp;<span class="builtintype" id="3207866">bool</span>&nbsp;<span class="op" id="3207871">{</span>&nbsp;<span class="keyword" id="3207873">return</span>&nbsp;<span class="ident" id="3207880">f</span><span class="op" id="3207881">[</span><span class="ident" id="3207882">i</span><span class="op" id="3207883">]</span><span class="op" id="3207884">.</span><span class="ident" id="3207885">Name</span><span class="op" id="3207889">(</span><span class="op" id="3207890">)</span>&nbsp;<span class="op" id="3207892">&lt;</span>&nbsp;<span class="ident" id="3207894">f</span><span class="op" id="3207895">[</span><span class="ident" id="3207896">j</span><span class="op" id="3207897">]</span><span class="op" id="3207898">.</span><span class="ident" id="3207899">Name</span><span class="op" id="3207903">(</span><span class="op" id="3207904">)</span>&nbsp;<span class="op" id="3207906">}</span><br>
<span class="lineno"></span><span class="keyword" id="3207908">func</span>&nbsp;<span class="op" id="3207913">(</span><span class="ident" id="3207914">f</span>&nbsp;<span class="ident" id="3207916">byName</span><span class="op" id="3207922">)</span>&nbsp;<span class="ident" id="3207924">Swap</span><span class="op" id="3207928">(</span><span class="ident" id="3207929">i</span><span class="op" id="3207930">,</span>&nbsp;<span class="ident" id="3207932">j</span>&nbsp;<span class="builtintype" id="3207934">int</span><span class="op" id="3207937">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3207944">{</span>&nbsp;<span class="ident" id="3207946">f</span><span class="op" id="3207947">[</span><span class="ident" id="3207948">i</span><span class="op" id="3207949">]</span><span class="op" id="3207950">,</span>&nbsp;<span class="ident" id="3207952">f</span><span class="op" id="3207953">[</span><span class="ident" id="3207954">j</span><span class="op" id="3207955">]</span>&nbsp;<span class="op" id="3207957">=</span>&nbsp;<span class="ident" id="3207959">f</span><span class="op" id="3207960">[</span><span class="ident" id="3207961">j</span><span class="op" id="3207962">]</span><span class="op" id="3207963">,</span>&nbsp;<span class="ident" id="3207965">f</span><span class="op" id="3207966">[</span><span class="ident" id="3207967">i</span><span class="op" id="3207968">]</span>&nbsp;<span class="op" id="3207970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3207973">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3208033">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3208072">func</span>&nbsp;<span class="ident" id="3208077">ReadDir</span><span class="op" id="3208084">(</span><span class="ident" id="3208085">dirname</span>&nbsp;<span class="builtintype" id="3208093">string</span><span class="op" id="3208099">)</span>&nbsp;<span class="op" id="3208101">(</span><span class="op" id="3208102">[</span><span class="op" id="3208103">]</span><span class="ident" id="3208104">os</span><span class="op" id="3208106">.</span><span class="ident" id="3208107">FileInfo</span><span class="op" id="3208115">,</span>&nbsp;<span class="builtintype" id="3208117">error</span><span class="op" id="3208122">)</span>&nbsp;<span class="op" id="3208124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208127">f</span><span class="op" id="3208128">,</span>&nbsp;<span class="ident" id="3208130">err</span>&nbsp;<span class="op" id="3208134">:=</span>&nbsp;<span class="ident" id="3208137">os</span><span class="op" id="3208139">.</span><span class="ident" id="3208140">Open</span><span class="op" id="3208144">(</span><span class="ident" id="3208145">dirname</span><span class="op" id="3208152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208155">if</span>&nbsp;<span class="ident" id="3208158">err</span>&nbsp;<span class="op" id="3208162">!=</span>&nbsp;<span class="ident" id="3208165">nil</span>&nbsp;<span class="op" id="3208169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208173">return</span>&nbsp;<span class="ident" id="3208180">nil</span><span class="op" id="3208183">,</span>&nbsp;<span class="ident" id="3208185">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208190">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208193">list</span><span class="op" id="3208197">,</span>&nbsp;<span class="ident" id="3208199">err</span>&nbsp;<span class="op" id="3208203">:=</span>&nbsp;<span class="ident" id="3208206">f</span><span class="op" id="3208207">.</span><span class="ident" id="3208208">Readdir</span><span class="op" id="3208215">(</span><span class="op" id="3208216">-</span><span class="num" id="3208217">1</span><span class="op" id="3208218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208221">f</span><span class="op" id="3208222">.</span><span class="ident" id="3208223">Close</span><span class="op" id="3208228">(</span><span class="op" id="3208229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208232">if</span>&nbsp;<span class="ident" id="3208235">err</span>&nbsp;<span class="op" id="3208239">!=</span>&nbsp;<span class="ident" id="3208242">nil</span>&nbsp;<span class="op" id="3208246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208250">return</span>&nbsp;<span class="ident" id="3208257">nil</span><span class="op" id="3208260">,</span>&nbsp;<span class="ident" id="3208262">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208267">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208270">sort</span><span class="op" id="3208274">.</span><span class="ident" id="3208275">Sort</span><span class="op" id="3208279">(</span><span class="ident" id="3208280">byName</span><span class="op" id="3208286">(</span><span class="ident" id="3208287">list</span><span class="op" id="3208291">)</span><span class="op" id="3208292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208295">return</span>&nbsp;<span class="ident" id="3208302">list</span><span class="op" id="3208306">,</span>&nbsp;<span class="ident" id="3208308">nil</span><br>
<span class="lineno"></span><span class="op" id="3208312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3208315">type</span>&nbsp;<span class="ident" id="3208320">nopCloser</span>&nbsp;<span class="keyword" id="3208330">struct</span>&nbsp;<span class="op" id="3208337">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208340">io</span><span class="op" id="3208342">.</span><span class="ident" id="3208343">Reader</span><br>
<span class="lineno"></span><span class="op" id="3208350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3208353">func</span>&nbsp;<span class="op" id="3208358">(</span><span class="ident" id="3208359">nopCloser</span><span class="op" id="3208368">)</span>&nbsp;<span class="ident" id="3208370">Close</span><span class="op" id="3208375">(</span><span class="op" id="3208376">)</span>&nbsp;<span class="builtintype" id="3208378">error</span>&nbsp;<span class="op" id="3208384">{</span>&nbsp;<span class="keyword" id="3208386">return</span>&nbsp;<span class="ident" id="3208393">nil</span>&nbsp;<span class="op" id="3208397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3208400">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3208469">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3208495">func</span>&nbsp;<span class="ident" id="3208500">NopCloser</span><span class="op" id="3208509">(</span><span class="ident" id="3208510">r</span>&nbsp;<span class="ident" id="3208512">io</span><span class="op" id="3208514">.</span><span class="ident" id="3208515">Reader</span><span class="op" id="3208521">)</span>&nbsp;<span class="ident" id="3208523">io</span><span class="op" id="3208525">.</span><span class="ident" id="3208526">ReadCloser</span>&nbsp;<span class="op" id="3208537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208540">return</span>&nbsp;<span class="ident" id="3208547">nopCloser</span><span class="op" id="3208556">{</span><span class="ident" id="3208557">r</span><span class="op" id="3208558">}</span><br>
<span class="lineno"></span><span class="op" id="3208560">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3208563">type</span>&nbsp;<span class="ident" id="3208568">devNull</span>&nbsp;<span class="builtintype" id="3208576">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3208581">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3208647">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3208699">var</span>&nbsp;<span class="ident" id="3208703">_</span>&nbsp;<span class="ident" id="3208705">io</span><span class="op" id="3208707">.</span><span class="ident" id="3208708">ReaderFrom</span>&nbsp;<span class="op" id="3208719">=</span>&nbsp;<span class="ident" id="3208721">devNull</span><span class="op" id="3208728">(</span><span class="num" id="3208729">0</span><span class="op" id="3208730">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3208733">func</span>&nbsp;<span class="op" id="3208738">(</span><span class="ident" id="3208739">devNull</span><span class="op" id="3208746">)</span>&nbsp;<span class="ident" id="3208748">Write</span><span class="op" id="3208753">(</span><span class="ident" id="3208754">p</span>&nbsp;<span class="op" id="3208756">[</span><span class="op" id="3208757">]</span><span class="builtintype" id="3208758">byte</span><span class="op" id="3208762">)</span>&nbsp;<span class="op" id="3208764">(</span><span class="builtintype" id="3208765">int</span><span class="op" id="3208768">,</span>&nbsp;<span class="builtintype" id="3208770">error</span><span class="op" id="3208775">)</span>&nbsp;<span class="op" id="3208777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208780">return</span>&nbsp;<span class="builtinfunc" id="3208787">len</span><span class="op" id="3208790">(</span><span class="ident" id="3208791">p</span><span class="op" id="3208792">)</span><span class="op" id="3208793">,</span>&nbsp;<span class="ident" id="3208795">nil</span><br>
<span class="lineno"></span><span class="op" id="3208799">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3208802">func</span>&nbsp;<span class="op" id="3208807">(</span><span class="ident" id="3208808">devNull</span><span class="op" id="3208815">)</span>&nbsp;<span class="ident" id="3208817">WriteString</span><span class="op" id="3208828">(</span><span class="ident" id="3208829">s</span>&nbsp;<span class="builtintype" id="3208831">string</span><span class="op" id="3208837">)</span>&nbsp;<span class="op" id="3208839">(</span><span class="builtintype" id="3208840">int</span><span class="op" id="3208843">,</span>&nbsp;<span class="builtintype" id="3208845">error</span><span class="op" id="3208850">)</span>&nbsp;<span class="op" id="3208852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208855">return</span>&nbsp;<span class="builtinfunc" id="3208862">len</span><span class="op" id="3208865">(</span><span class="ident" id="3208866">s</span><span class="op" id="3208867">)</span><span class="op" id="3208868">,</span>&nbsp;<span class="ident" id="3208870">nil</span><br>
<span class="lineno"></span><span class="op" id="3208874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3208877">var</span>&nbsp;<span class="ident" id="3208881">blackHolePool</span>&nbsp;<span class="op" id="3208895">=</span>&nbsp;<span class="ident" id="3208897">sync</span><span class="op" id="3208901">.</span><span class="ident" id="3208902">Pool</span><span class="op" id="3208906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208909">New</span><span class="op" id="3208912">:</span>&nbsp;<span class="keyword" id="3208914">func</span><span class="op" id="3208918">(</span><span class="op" id="3208919">)</span>&nbsp;<span class="keyword" id="3208921">interface</span><span class="op" id="3208930">{</span><span class="op" id="3208931">}</span>&nbsp;<span class="op" id="3208933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3208937">b</span>&nbsp;<span class="op" id="3208939">:=</span>&nbsp;<span class="builtinfunc" id="3208942">make</span><span class="op" id="3208946">(</span><span class="op" id="3208947">[</span><span class="op" id="3208948">]</span><span class="builtintype" id="3208949">byte</span><span class="op" id="3208953">,</span>&nbsp;<span class="num" id="3208955">8192</span><span class="op" id="3208959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3208963">return</span>&nbsp;<span class="op" id="3208970">&amp;</span><span class="ident" id="3208971">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3208974">}</span><span class="op" id="3208975">,</span><br>
<span class="lineno">145</span><span class="op" id="3208977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3208980">func</span>&nbsp;<span class="op" id="3208985">(</span><span class="ident" id="3208986">devNull</span><span class="op" id="3208993">)</span>&nbsp;<span class="ident" id="3208995">ReadFrom</span><span class="op" id="3209003">(</span><span class="ident" id="3209004">r</span>&nbsp;<span class="ident" id="3209006">io</span><span class="op" id="3209008">.</span><span class="ident" id="3209009">Reader</span><span class="op" id="3209015">)</span>&nbsp;<span class="op" id="3209017">(</span><span class="ident" id="3209018">n</span>&nbsp;<span class="ident" id="3209020">int64</span><span class="op" id="3209025">,</span>&nbsp;<span class="ident" id="3209027">err</span>&nbsp;<span class="builtintype" id="3209031">error</span><span class="op" id="3209036">)</span>&nbsp;<span class="op" id="3209038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209041">bufp</span>&nbsp;<span class="op" id="3209046">:=</span>&nbsp;<span class="ident" id="3209049">blackHolePool</span><span class="op" id="3209062">.</span><span class="ident" id="3209063">Get</span><span class="op" id="3209066">(</span><span class="op" id="3209067">)</span><span class="op" id="3209068">.</span><span class="op" id="3209069">(</span><span class="op" id="3209070">*</span><span class="op" id="3209071">[</span><span class="op" id="3209072">]</span><span class="builtintype" id="3209073">byte</span><span class="op" id="3209077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209080">readSize</span>&nbsp;<span class="op" id="3209089">:=</span>&nbsp;<span class="num" id="3209092">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209095">for</span>&nbsp;<span class="op" id="3209099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209103">readSize</span><span class="op" id="3209111">,</span>&nbsp;<span class="ident" id="3209113">err</span>&nbsp;<span class="op" id="3209117">=</span>&nbsp;<span class="ident" id="3209119">r</span><span class="op" id="3209120">.</span><span class="ident" id="3209121">Read</span><span class="op" id="3209125">(</span><span class="op" id="3209126">*</span><span class="ident" id="3209127">bufp</span><span class="op" id="3209131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209135">n</span>&nbsp;<span class="op" id="3209137">+=</span>&nbsp;<span class="ident" id="3209140">int64</span><span class="op" id="3209145">(</span><span class="ident" id="3209146">readSize</span><span class="op" id="3209154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209158">if</span>&nbsp;<span class="ident" id="3209161">err</span>&nbsp;<span class="op" id="3209165">!=</span>&nbsp;<span class="ident" id="3209168">nil</span>&nbsp;<span class="op" id="3209172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3209177">blackHolePool</span><span class="op" id="3209190">.</span><span class="ident" id="3209191">Put</span><span class="op" id="3209194">(</span><span class="ident" id="3209195">bufp</span><span class="op" id="3209199">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209204">if</span>&nbsp;<span class="ident" id="3209207">err</span>&nbsp;<span class="op" id="3209211">==</span>&nbsp;<span class="ident" id="3209214">io</span><span class="op" id="3209216">.</span><span class="ident" id="3209217">EOF</span>&nbsp;<span class="op" id="3209221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209227">return</span>&nbsp;<span class="ident" id="3209234">n</span><span class="op" id="3209235">,</span>&nbsp;<span class="ident" id="3209237">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3209244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3209249">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3209258">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3209261">}</span><br>
<span class="lineno"></span><span class="op" id="3209263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3209266">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3209326">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3209353">var</span>&nbsp;<span class="ident" id="3209357">Discard</span>&nbsp;<span class="ident" id="3209365">io</span><span class="op" id="3209367">.</span><span class="ident" id="3209368">Writer</span>&nbsp;<span class="op" id="3209375">=</span>&nbsp;<span class="ident" id="3209377">devNull</span><span class="op" id="3209384">(</span><span class="num" id="3209385">0</span><span class="op" id="3209386">)</span>
</div>
</body>
</html>
