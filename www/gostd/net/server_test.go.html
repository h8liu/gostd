<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7873206">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7873261">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7873315">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7873366">package</span>&nbsp;<span class="ident" id="7873374">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7873379">import</span>&nbsp;<span class="op" id="7873386">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873389">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873397">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873403">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873409">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873420">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7873431">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7873438">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7873441">func</span>&nbsp;<span class="ident" id="7873446">skipServerTest</span><span class="op" id="7873460">(</span><span class="ident" id="7873461">net</span><span class="op" id="7873464">,</span>&nbsp;<span class="ident" id="7873466">unixsotype</span><span class="op" id="7873476">,</span>&nbsp;<span class="ident" id="7873478">addr</span>&nbsp;<span class="builtintype" id="7873483">string</span><span class="op" id="7873489">,</span>&nbsp;<span class="ident" id="7873491">ipv6</span><span class="op" id="7873495">,</span>&nbsp;<span class="ident" id="7873497">ipv4map</span><span class="op" id="7873504">,</span>&nbsp;<span class="ident" id="7873506">linuxOnly</span>&nbsp;<span class="builtintype" id="7873516">bool</span><span class="op" id="7873520">)</span>&nbsp;<span class="builtintype" id="7873522">bool</span>&nbsp;<span class="op" id="7873527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873530">switch</span>&nbsp;<span class="ident" id="7873537">runtime</span><span class="op" id="7873544">.</span><span class="ident" id="7873545">GOOS</span>&nbsp;<span class="op" id="7873550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873553">case</span>&nbsp;<span class="string" id="7873558">&#34;linux&#34;</span><span class="op" id="7873565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873568">case</span>&nbsp;<span class="string" id="7873573">&#34;nacl&#34;</span><span class="op" id="7873579">,</span>&nbsp;<span class="string" id="7873581">&#34;plan9&#34;</span><span class="op" id="7873588">,</span>&nbsp;<span class="string" id="7873590">&#34;windows&#34;</span><span class="op" id="7873599">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7873603">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873664">if</span>&nbsp;<span class="ident" id="7873667">net</span>&nbsp;<span class="op" id="7873671">==</span>&nbsp;<span class="ident" id="7873674">unixsotype</span>&nbsp;<span class="op" id="7873685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873690">return</span>&nbsp;<span class="builtintype" id="7873697">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873707">default</span><span class="op" id="7873714">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873718">if</span>&nbsp;<span class="ident" id="7873721">net</span>&nbsp;<span class="op" id="7873725">==</span>&nbsp;<span class="ident" id="7873728">unixsotype</span>&nbsp;<span class="op" id="7873739">&amp;&amp;</span>&nbsp;<span class="ident" id="7873742">linuxOnly</span>&nbsp;<span class="op" id="7873752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873757">return</span>&nbsp;<span class="builtintype" id="7873764">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873777">switch</span>&nbsp;<span class="ident" id="7873784">addr</span>&nbsp;<span class="op" id="7873789">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873792">case</span>&nbsp;<span class="string" id="7873797">&#34;&#34;</span><span class="op" id="7873799">,</span>&nbsp;<span class="string" id="7873801">&#34;0.0.0.0&#34;</span><span class="op" id="7873810">,</span>&nbsp;<span class="string" id="7873812">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7873830">,</span>&nbsp;<span class="string" id="7873832">&#34;[::]&#34;</span><span class="op" id="7873838">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873842">if</span>&nbsp;<span class="ident" id="7873845">testing</span><span class="op" id="7873852">.</span><span class="ident" id="7873853">Short</span><span class="op" id="7873858">(</span><span class="op" id="7873859">)</span>&nbsp;<span class="op" id="7873861">||</span>&nbsp;<span class="op" id="7873864">!</span><span class="op" id="7873865">*</span><span class="ident" id="7873866">testExternal</span>&nbsp;<span class="op" id="7873879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873884">return</span>&nbsp;<span class="builtintype" id="7873891">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873901">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873904">if</span>&nbsp;<span class="ident" id="7873907">ipv6</span>&nbsp;<span class="op" id="7873912">&amp;&amp;</span>&nbsp;<span class="op" id="7873915">!</span><span class="ident" id="7873916">supportsIPv6</span>&nbsp;<span class="op" id="7873929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873933">return</span>&nbsp;<span class="builtintype" id="7873940">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873949">if</span>&nbsp;<span class="ident" id="7873952">ipv4map</span>&nbsp;<span class="op" id="7873960">&amp;&amp;</span>&nbsp;<span class="op" id="7873963">!</span><span class="ident" id="7873964">supportsIPv4map</span>&nbsp;<span class="op" id="7873980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7873984">return</span>&nbsp;<span class="builtintype" id="7873991">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7873997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7874000">return</span>&nbsp;<span class="builtintype" id="7874007">false</span><br>
<span class="lineno"></span><span class="op" id="7874013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7874016">var</span>&nbsp;<span class="ident" id="7874020">streamConnServerTests</span>&nbsp;<span class="op" id="7874042">=</span>&nbsp;<span class="op" id="7874044">[</span><span class="op" id="7874045">]</span><span class="keyword" id="7874046">struct</span>&nbsp;<span class="op" id="7874053">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874056">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874066">string</span>&nbsp;<span class="comment" id="7874073">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874089">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874099">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874107">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874117">string</span>&nbsp;<span class="comment" id="7874124">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874140">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874158">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874168">bool</span>&nbsp;<span class="comment" id="7874173">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874214">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874224">bool</span>&nbsp;<span class="comment" id="7874229">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874275">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7874285">bool</span>&nbsp;<span class="comment" id="7874290">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7874315">linuxOnly</span>&nbsp;<span class="builtintype" id="7874325">bool</span>&nbsp;<span class="comment" id="7874330">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7874384">}</span><span class="op" id="7874385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874388">{</span><span class="ident" id="7874389">snet</span><span class="op" id="7874393">:</span>&nbsp;<span class="string" id="7874395">&#34;tcp&#34;</span><span class="op" id="7874400">,</span>&nbsp;<span class="ident" id="7874402">saddr</span><span class="op" id="7874407">:</span>&nbsp;<span class="string" id="7874409">&#34;&#34;</span><span class="op" id="7874411">,</span>&nbsp;<span class="ident" id="7874413">cnet</span><span class="op" id="7874417">:</span>&nbsp;<span class="string" id="7874419">&#34;tcp&#34;</span><span class="op" id="7874424">,</span>&nbsp;<span class="ident" id="7874426">caddr</span><span class="op" id="7874431">:</span>&nbsp;<span class="string" id="7874433">&#34;127.0.0.1&#34;</span><span class="op" id="7874444">}</span><span class="op" id="7874445">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874448">{</span><span class="ident" id="7874449">snet</span><span class="op" id="7874453">:</span>&nbsp;<span class="string" id="7874455">&#34;tcp&#34;</span><span class="op" id="7874460">,</span>&nbsp;<span class="ident" id="7874462">saddr</span><span class="op" id="7874467">:</span>&nbsp;<span class="string" id="7874469">&#34;0.0.0.0&#34;</span><span class="op" id="7874478">,</span>&nbsp;<span class="ident" id="7874480">cnet</span><span class="op" id="7874484">:</span>&nbsp;<span class="string" id="7874486">&#34;tcp&#34;</span><span class="op" id="7874491">,</span>&nbsp;<span class="ident" id="7874493">caddr</span><span class="op" id="7874498">:</span>&nbsp;<span class="string" id="7874500">&#34;127.0.0.1&#34;</span><span class="op" id="7874511">}</span><span class="op" id="7874512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874515">{</span><span class="ident" id="7874516">snet</span><span class="op" id="7874520">:</span>&nbsp;<span class="string" id="7874522">&#34;tcp&#34;</span><span class="op" id="7874527">,</span>&nbsp;<span class="ident" id="7874529">saddr</span><span class="op" id="7874534">:</span>&nbsp;<span class="string" id="7874536">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7874554">,</span>&nbsp;<span class="ident" id="7874556">cnet</span><span class="op" id="7874560">:</span>&nbsp;<span class="string" id="7874562">&#34;tcp&#34;</span><span class="op" id="7874567">,</span>&nbsp;<span class="ident" id="7874569">caddr</span><span class="op" id="7874574">:</span>&nbsp;<span class="string" id="7874576">&#34;127.0.0.1&#34;</span><span class="op" id="7874587">}</span><span class="op" id="7874588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874591">{</span><span class="ident" id="7874592">snet</span><span class="op" id="7874596">:</span>&nbsp;<span class="string" id="7874598">&#34;tcp&#34;</span><span class="op" id="7874603">,</span>&nbsp;<span class="ident" id="7874605">saddr</span><span class="op" id="7874610">:</span>&nbsp;<span class="string" id="7874612">&#34;[::]&#34;</span><span class="op" id="7874618">,</span>&nbsp;<span class="ident" id="7874620">cnet</span><span class="op" id="7874624">:</span>&nbsp;<span class="string" id="7874626">&#34;tcp&#34;</span><span class="op" id="7874631">,</span>&nbsp;<span class="ident" id="7874633">caddr</span><span class="op" id="7874638">:</span>&nbsp;<span class="string" id="7874640">&#34;[::1]&#34;</span><span class="op" id="7874647">,</span>&nbsp;<span class="ident" id="7874649">ipv6</span><span class="op" id="7874653">:</span>&nbsp;<span class="builtintype" id="7874655">true</span><span class="op" id="7874659">}</span><span class="op" id="7874660">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874664">{</span><span class="ident" id="7874665">snet</span><span class="op" id="7874669">:</span>&nbsp;<span class="string" id="7874671">&#34;tcp&#34;</span><span class="op" id="7874676">,</span>&nbsp;<span class="ident" id="7874678">saddr</span><span class="op" id="7874683">:</span>&nbsp;<span class="string" id="7874685">&#34;&#34;</span><span class="op" id="7874687">,</span>&nbsp;<span class="ident" id="7874689">cnet</span><span class="op" id="7874693">:</span>&nbsp;<span class="string" id="7874695">&#34;tcp&#34;</span><span class="op" id="7874700">,</span>&nbsp;<span class="ident" id="7874702">caddr</span><span class="op" id="7874707">:</span>&nbsp;<span class="string" id="7874709">&#34;[::1]&#34;</span><span class="op" id="7874716">,</span>&nbsp;<span class="ident" id="7874718">ipv4map</span><span class="op" id="7874725">:</span>&nbsp;<span class="builtintype" id="7874727">true</span><span class="op" id="7874731">}</span><span class="op" id="7874732">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874735">{</span><span class="ident" id="7874736">snet</span><span class="op" id="7874740">:</span>&nbsp;<span class="string" id="7874742">&#34;tcp&#34;</span><span class="op" id="7874747">,</span>&nbsp;<span class="ident" id="7874749">saddr</span><span class="op" id="7874754">:</span>&nbsp;<span class="string" id="7874756">&#34;0.0.0.0&#34;</span><span class="op" id="7874765">,</span>&nbsp;<span class="ident" id="7874767">cnet</span><span class="op" id="7874771">:</span>&nbsp;<span class="string" id="7874773">&#34;tcp&#34;</span><span class="op" id="7874778">,</span>&nbsp;<span class="ident" id="7874780">caddr</span><span class="op" id="7874785">:</span>&nbsp;<span class="string" id="7874787">&#34;[::1]&#34;</span><span class="op" id="7874794">,</span>&nbsp;<span class="ident" id="7874796">ipv4map</span><span class="op" id="7874803">:</span>&nbsp;<span class="builtintype" id="7874805">true</span><span class="op" id="7874809">}</span><span class="op" id="7874810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874813">{</span><span class="ident" id="7874814">snet</span><span class="op" id="7874818">:</span>&nbsp;<span class="string" id="7874820">&#34;tcp&#34;</span><span class="op" id="7874825">,</span>&nbsp;<span class="ident" id="7874827">saddr</span><span class="op" id="7874832">:</span>&nbsp;<span class="string" id="7874834">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7874852">,</span>&nbsp;<span class="ident" id="7874854">cnet</span><span class="op" id="7874858">:</span>&nbsp;<span class="string" id="7874860">&#34;tcp&#34;</span><span class="op" id="7874865">,</span>&nbsp;<span class="ident" id="7874867">caddr</span><span class="op" id="7874872">:</span>&nbsp;<span class="string" id="7874874">&#34;[::1]&#34;</span><span class="op" id="7874881">,</span>&nbsp;<span class="ident" id="7874883">ipv4map</span><span class="op" id="7874890">:</span>&nbsp;<span class="builtintype" id="7874892">true</span><span class="op" id="7874896">}</span><span class="op" id="7874897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874900">{</span><span class="ident" id="7874901">snet</span><span class="op" id="7874905">:</span>&nbsp;<span class="string" id="7874907">&#34;tcp&#34;</span><span class="op" id="7874912">,</span>&nbsp;<span class="ident" id="7874914">saddr</span><span class="op" id="7874919">:</span>&nbsp;<span class="string" id="7874921">&#34;[::]&#34;</span><span class="op" id="7874927">,</span>&nbsp;<span class="ident" id="7874929">cnet</span><span class="op" id="7874933">:</span>&nbsp;<span class="string" id="7874935">&#34;tcp&#34;</span><span class="op" id="7874940">,</span>&nbsp;<span class="ident" id="7874942">caddr</span><span class="op" id="7874947">:</span>&nbsp;<span class="string" id="7874949">&#34;127.0.0.1&#34;</span><span class="op" id="7874960">,</span>&nbsp;<span class="ident" id="7874962">ipv4map</span><span class="op" id="7874969">:</span>&nbsp;<span class="builtintype" id="7874971">true</span><span class="op" id="7874975">}</span><span class="op" id="7874976">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7874980">{</span><span class="ident" id="7874981">snet</span><span class="op" id="7874985">:</span>&nbsp;<span class="string" id="7874987">&#34;tcp&#34;</span><span class="op" id="7874992">,</span>&nbsp;<span class="ident" id="7874994">saddr</span><span class="op" id="7874999">:</span>&nbsp;<span class="string" id="7875001">&#34;&#34;</span><span class="op" id="7875003">,</span>&nbsp;<span class="ident" id="7875005">cnet</span><span class="op" id="7875009">:</span>&nbsp;<span class="string" id="7875011">&#34;tcp4&#34;</span><span class="op" id="7875017">,</span>&nbsp;<span class="ident" id="7875019">caddr</span><span class="op" id="7875024">:</span>&nbsp;<span class="string" id="7875026">&#34;127.0.0.1&#34;</span><span class="op" id="7875037">}</span><span class="op" id="7875038">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875041">{</span><span class="ident" id="7875042">snet</span><span class="op" id="7875046">:</span>&nbsp;<span class="string" id="7875048">&#34;tcp&#34;</span><span class="op" id="7875053">,</span>&nbsp;<span class="ident" id="7875055">saddr</span><span class="op" id="7875060">:</span>&nbsp;<span class="string" id="7875062">&#34;0.0.0.0&#34;</span><span class="op" id="7875071">,</span>&nbsp;<span class="ident" id="7875073">cnet</span><span class="op" id="7875077">:</span>&nbsp;<span class="string" id="7875079">&#34;tcp4&#34;</span><span class="op" id="7875085">,</span>&nbsp;<span class="ident" id="7875087">caddr</span><span class="op" id="7875092">:</span>&nbsp;<span class="string" id="7875094">&#34;127.0.0.1&#34;</span><span class="op" id="7875105">}</span><span class="op" id="7875106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875109">{</span><span class="ident" id="7875110">snet</span><span class="op" id="7875114">:</span>&nbsp;<span class="string" id="7875116">&#34;tcp&#34;</span><span class="op" id="7875121">,</span>&nbsp;<span class="ident" id="7875123">saddr</span><span class="op" id="7875128">:</span>&nbsp;<span class="string" id="7875130">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7875148">,</span>&nbsp;<span class="ident" id="7875150">cnet</span><span class="op" id="7875154">:</span>&nbsp;<span class="string" id="7875156">&#34;tcp4&#34;</span><span class="op" id="7875162">,</span>&nbsp;<span class="ident" id="7875164">caddr</span><span class="op" id="7875169">:</span>&nbsp;<span class="string" id="7875171">&#34;127.0.0.1&#34;</span><span class="op" id="7875182">}</span><span class="op" id="7875183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875186">{</span><span class="ident" id="7875187">snet</span><span class="op" id="7875191">:</span>&nbsp;<span class="string" id="7875193">&#34;tcp&#34;</span><span class="op" id="7875198">,</span>&nbsp;<span class="ident" id="7875200">saddr</span><span class="op" id="7875205">:</span>&nbsp;<span class="string" id="7875207">&#34;[::]&#34;</span><span class="op" id="7875213">,</span>&nbsp;<span class="ident" id="7875215">cnet</span><span class="op" id="7875219">:</span>&nbsp;<span class="string" id="7875221">&#34;tcp6&#34;</span><span class="op" id="7875227">,</span>&nbsp;<span class="ident" id="7875229">caddr</span><span class="op" id="7875234">:</span>&nbsp;<span class="string" id="7875236">&#34;[::1]&#34;</span><span class="op" id="7875243">,</span>&nbsp;<span class="ident" id="7875245">ipv6</span><span class="op" id="7875249">:</span>&nbsp;<span class="builtintype" id="7875251">true</span><span class="op" id="7875255">}</span><span class="op" id="7875256">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875260">{</span><span class="ident" id="7875261">snet</span><span class="op" id="7875265">:</span>&nbsp;<span class="string" id="7875267">&#34;tcp&#34;</span><span class="op" id="7875272">,</span>&nbsp;<span class="ident" id="7875274">saddr</span><span class="op" id="7875279">:</span>&nbsp;<span class="string" id="7875281">&#34;&#34;</span><span class="op" id="7875283">,</span>&nbsp;<span class="ident" id="7875285">cnet</span><span class="op" id="7875289">:</span>&nbsp;<span class="string" id="7875291">&#34;tcp6&#34;</span><span class="op" id="7875297">,</span>&nbsp;<span class="ident" id="7875299">caddr</span><span class="op" id="7875304">:</span>&nbsp;<span class="string" id="7875306">&#34;[::1]&#34;</span><span class="op" id="7875313">,</span>&nbsp;<span class="ident" id="7875315">ipv4map</span><span class="op" id="7875322">:</span>&nbsp;<span class="builtintype" id="7875324">true</span><span class="op" id="7875328">}</span><span class="op" id="7875329">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875332">{</span><span class="ident" id="7875333">snet</span><span class="op" id="7875337">:</span>&nbsp;<span class="string" id="7875339">&#34;tcp&#34;</span><span class="op" id="7875344">,</span>&nbsp;<span class="ident" id="7875346">saddr</span><span class="op" id="7875351">:</span>&nbsp;<span class="string" id="7875353">&#34;0.0.0.0&#34;</span><span class="op" id="7875362">,</span>&nbsp;<span class="ident" id="7875364">cnet</span><span class="op" id="7875368">:</span>&nbsp;<span class="string" id="7875370">&#34;tcp6&#34;</span><span class="op" id="7875376">,</span>&nbsp;<span class="ident" id="7875378">caddr</span><span class="op" id="7875383">:</span>&nbsp;<span class="string" id="7875385">&#34;[::1]&#34;</span><span class="op" id="7875392">,</span>&nbsp;<span class="ident" id="7875394">ipv4map</span><span class="op" id="7875401">:</span>&nbsp;<span class="builtintype" id="7875403">true</span><span class="op" id="7875407">}</span><span class="op" id="7875408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875411">{</span><span class="ident" id="7875412">snet</span><span class="op" id="7875416">:</span>&nbsp;<span class="string" id="7875418">&#34;tcp&#34;</span><span class="op" id="7875423">,</span>&nbsp;<span class="ident" id="7875425">saddr</span><span class="op" id="7875430">:</span>&nbsp;<span class="string" id="7875432">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7875450">,</span>&nbsp;<span class="ident" id="7875452">cnet</span><span class="op" id="7875456">:</span>&nbsp;<span class="string" id="7875458">&#34;tcp6&#34;</span><span class="op" id="7875464">,</span>&nbsp;<span class="ident" id="7875466">caddr</span><span class="op" id="7875471">:</span>&nbsp;<span class="string" id="7875473">&#34;[::1]&#34;</span><span class="op" id="7875480">,</span>&nbsp;<span class="ident" id="7875482">ipv4map</span><span class="op" id="7875489">:</span>&nbsp;<span class="builtintype" id="7875491">true</span><span class="op" id="7875495">}</span><span class="op" id="7875496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875499">{</span><span class="ident" id="7875500">snet</span><span class="op" id="7875504">:</span>&nbsp;<span class="string" id="7875506">&#34;tcp&#34;</span><span class="op" id="7875511">,</span>&nbsp;<span class="ident" id="7875513">saddr</span><span class="op" id="7875518">:</span>&nbsp;<span class="string" id="7875520">&#34;[::]&#34;</span><span class="op" id="7875526">,</span>&nbsp;<span class="ident" id="7875528">cnet</span><span class="op" id="7875532">:</span>&nbsp;<span class="string" id="7875534">&#34;tcp4&#34;</span><span class="op" id="7875540">,</span>&nbsp;<span class="ident" id="7875542">caddr</span><span class="op" id="7875547">:</span>&nbsp;<span class="string" id="7875549">&#34;127.0.0.1&#34;</span><span class="op" id="7875560">,</span>&nbsp;<span class="ident" id="7875562">ipv4map</span><span class="op" id="7875569">:</span>&nbsp;<span class="builtintype" id="7875571">true</span><span class="op" id="7875575">}</span><span class="op" id="7875576">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875580">{</span><span class="ident" id="7875581">snet</span><span class="op" id="7875585">:</span>&nbsp;<span class="string" id="7875587">&#34;tcp&#34;</span><span class="op" id="7875592">,</span>&nbsp;<span class="ident" id="7875594">saddr</span><span class="op" id="7875599">:</span>&nbsp;<span class="string" id="7875601">&#34;127.0.0.1&#34;</span><span class="op" id="7875612">,</span>&nbsp;<span class="ident" id="7875614">cnet</span><span class="op" id="7875618">:</span>&nbsp;<span class="string" id="7875620">&#34;tcp&#34;</span><span class="op" id="7875625">,</span>&nbsp;<span class="ident" id="7875627">caddr</span><span class="op" id="7875632">:</span>&nbsp;<span class="string" id="7875634">&#34;127.0.0.1&#34;</span><span class="op" id="7875645">}</span><span class="op" id="7875646">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875649">{</span><span class="ident" id="7875650">snet</span><span class="op" id="7875654">:</span>&nbsp;<span class="string" id="7875656">&#34;tcp&#34;</span><span class="op" id="7875661">,</span>&nbsp;<span class="ident" id="7875663">saddr</span><span class="op" id="7875668">:</span>&nbsp;<span class="string" id="7875670">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7875690">,</span>&nbsp;<span class="ident" id="7875692">cnet</span><span class="op" id="7875696">:</span>&nbsp;<span class="string" id="7875698">&#34;tcp&#34;</span><span class="op" id="7875703">,</span>&nbsp;<span class="ident" id="7875705">caddr</span><span class="op" id="7875710">:</span>&nbsp;<span class="string" id="7875712">&#34;127.0.0.1&#34;</span><span class="op" id="7875723">}</span><span class="op" id="7875724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875727">{</span><span class="ident" id="7875728">snet</span><span class="op" id="7875732">:</span>&nbsp;<span class="string" id="7875734">&#34;tcp&#34;</span><span class="op" id="7875739">,</span>&nbsp;<span class="ident" id="7875741">saddr</span><span class="op" id="7875746">:</span>&nbsp;<span class="string" id="7875748">&#34;[::1]&#34;</span><span class="op" id="7875755">,</span>&nbsp;<span class="ident" id="7875757">cnet</span><span class="op" id="7875761">:</span>&nbsp;<span class="string" id="7875763">&#34;tcp&#34;</span><span class="op" id="7875768">,</span>&nbsp;<span class="ident" id="7875770">caddr</span><span class="op" id="7875775">:</span>&nbsp;<span class="string" id="7875777">&#34;[::1]&#34;</span><span class="op" id="7875784">,</span>&nbsp;<span class="ident" id="7875786">ipv6</span><span class="op" id="7875790">:</span>&nbsp;<span class="builtintype" id="7875792">true</span><span class="op" id="7875796">}</span><span class="op" id="7875797">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875801">{</span><span class="ident" id="7875802">snet</span><span class="op" id="7875806">:</span>&nbsp;<span class="string" id="7875808">&#34;tcp4&#34;</span><span class="op" id="7875814">,</span>&nbsp;<span class="ident" id="7875816">saddr</span><span class="op" id="7875821">:</span>&nbsp;<span class="string" id="7875823">&#34;&#34;</span><span class="op" id="7875825">,</span>&nbsp;<span class="ident" id="7875827">cnet</span><span class="op" id="7875831">:</span>&nbsp;<span class="string" id="7875833">&#34;tcp4&#34;</span><span class="op" id="7875839">,</span>&nbsp;<span class="ident" id="7875841">caddr</span><span class="op" id="7875846">:</span>&nbsp;<span class="string" id="7875848">&#34;127.0.0.1&#34;</span><span class="op" id="7875859">}</span><span class="op" id="7875860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875863">{</span><span class="ident" id="7875864">snet</span><span class="op" id="7875868">:</span>&nbsp;<span class="string" id="7875870">&#34;tcp4&#34;</span><span class="op" id="7875876">,</span>&nbsp;<span class="ident" id="7875878">saddr</span><span class="op" id="7875883">:</span>&nbsp;<span class="string" id="7875885">&#34;0.0.0.0&#34;</span><span class="op" id="7875894">,</span>&nbsp;<span class="ident" id="7875896">cnet</span><span class="op" id="7875900">:</span>&nbsp;<span class="string" id="7875902">&#34;tcp4&#34;</span><span class="op" id="7875908">,</span>&nbsp;<span class="ident" id="7875910">caddr</span><span class="op" id="7875915">:</span>&nbsp;<span class="string" id="7875917">&#34;127.0.0.1&#34;</span><span class="op" id="7875928">}</span><span class="op" id="7875929">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7875932">{</span><span class="ident" id="7875933">snet</span><span class="op" id="7875937">:</span>&nbsp;<span class="string" id="7875939">&#34;tcp4&#34;</span><span class="op" id="7875945">,</span>&nbsp;<span class="ident" id="7875947">saddr</span><span class="op" id="7875952">:</span>&nbsp;<span class="string" id="7875954">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7875972">,</span>&nbsp;<span class="ident" id="7875974">cnet</span><span class="op" id="7875978">:</span>&nbsp;<span class="string" id="7875980">&#34;tcp4&#34;</span><span class="op" id="7875986">,</span>&nbsp;<span class="ident" id="7875988">caddr</span><span class="op" id="7875993">:</span>&nbsp;<span class="string" id="7875995">&#34;127.0.0.1&#34;</span><span class="op" id="7876006">}</span><span class="op" id="7876007">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876011">{</span><span class="ident" id="7876012">snet</span><span class="op" id="7876016">:</span>&nbsp;<span class="string" id="7876018">&#34;tcp4&#34;</span><span class="op" id="7876024">,</span>&nbsp;<span class="ident" id="7876026">saddr</span><span class="op" id="7876031">:</span>&nbsp;<span class="string" id="7876033">&#34;127.0.0.1&#34;</span><span class="op" id="7876044">,</span>&nbsp;<span class="ident" id="7876046">cnet</span><span class="op" id="7876050">:</span>&nbsp;<span class="string" id="7876052">&#34;tcp4&#34;</span><span class="op" id="7876058">,</span>&nbsp;<span class="ident" id="7876060">caddr</span><span class="op" id="7876065">:</span>&nbsp;<span class="string" id="7876067">&#34;127.0.0.1&#34;</span><span class="op" id="7876078">}</span><span class="op" id="7876079">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876083">{</span><span class="ident" id="7876084">snet</span><span class="op" id="7876088">:</span>&nbsp;<span class="string" id="7876090">&#34;tcp6&#34;</span><span class="op" id="7876096">,</span>&nbsp;<span class="ident" id="7876098">saddr</span><span class="op" id="7876103">:</span>&nbsp;<span class="string" id="7876105">&#34;&#34;</span><span class="op" id="7876107">,</span>&nbsp;<span class="ident" id="7876109">cnet</span><span class="op" id="7876113">:</span>&nbsp;<span class="string" id="7876115">&#34;tcp6&#34;</span><span class="op" id="7876121">,</span>&nbsp;<span class="ident" id="7876123">caddr</span><span class="op" id="7876128">:</span>&nbsp;<span class="string" id="7876130">&#34;[::1]&#34;</span><span class="op" id="7876137">,</span>&nbsp;<span class="ident" id="7876139">ipv6</span><span class="op" id="7876143">:</span>&nbsp;<span class="builtintype" id="7876145">true</span><span class="op" id="7876149">}</span><span class="op" id="7876150">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876153">{</span><span class="ident" id="7876154">snet</span><span class="op" id="7876158">:</span>&nbsp;<span class="string" id="7876160">&#34;tcp6&#34;</span><span class="op" id="7876166">,</span>&nbsp;<span class="ident" id="7876168">saddr</span><span class="op" id="7876173">:</span>&nbsp;<span class="string" id="7876175">&#34;[::]&#34;</span><span class="op" id="7876181">,</span>&nbsp;<span class="ident" id="7876183">cnet</span><span class="op" id="7876187">:</span>&nbsp;<span class="string" id="7876189">&#34;tcp6&#34;</span><span class="op" id="7876195">,</span>&nbsp;<span class="ident" id="7876197">caddr</span><span class="op" id="7876202">:</span>&nbsp;<span class="string" id="7876204">&#34;[::1]&#34;</span><span class="op" id="7876211">,</span>&nbsp;<span class="ident" id="7876213">ipv6</span><span class="op" id="7876217">:</span>&nbsp;<span class="builtintype" id="7876219">true</span><span class="op" id="7876223">}</span><span class="op" id="7876224">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876228">{</span><span class="ident" id="7876229">snet</span><span class="op" id="7876233">:</span>&nbsp;<span class="string" id="7876235">&#34;tcp6&#34;</span><span class="op" id="7876241">,</span>&nbsp;<span class="ident" id="7876243">saddr</span><span class="op" id="7876248">:</span>&nbsp;<span class="string" id="7876250">&#34;[::1]&#34;</span><span class="op" id="7876257">,</span>&nbsp;<span class="ident" id="7876259">cnet</span><span class="op" id="7876263">:</span>&nbsp;<span class="string" id="7876265">&#34;tcp6&#34;</span><span class="op" id="7876271">,</span>&nbsp;<span class="ident" id="7876273">caddr</span><span class="op" id="7876278">:</span>&nbsp;<span class="string" id="7876280">&#34;[::1]&#34;</span><span class="op" id="7876287">,</span>&nbsp;<span class="ident" id="7876289">ipv6</span><span class="op" id="7876293">:</span>&nbsp;<span class="builtintype" id="7876295">true</span><span class="op" id="7876299">}</span><span class="op" id="7876300">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876304">{</span><span class="ident" id="7876305">snet</span><span class="op" id="7876309">:</span>&nbsp;<span class="string" id="7876311">&#34;unix&#34;</span><span class="op" id="7876317">,</span>&nbsp;<span class="ident" id="7876319">saddr</span><span class="op" id="7876324">:</span>&nbsp;<span class="ident" id="7876326">testUnixAddr</span><span class="op" id="7876338">(</span><span class="op" id="7876339">)</span><span class="op" id="7876340">,</span>&nbsp;<span class="ident" id="7876342">cnet</span><span class="op" id="7876346">:</span>&nbsp;<span class="string" id="7876348">&#34;unix&#34;</span><span class="op" id="7876354">,</span>&nbsp;<span class="ident" id="7876356">caddr</span><span class="op" id="7876361">:</span>&nbsp;<span class="ident" id="7876363">testUnixAddr</span><span class="op" id="7876375">(</span><span class="op" id="7876376">)</span><span class="op" id="7876377">}</span><span class="op" id="7876378">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876381">{</span><span class="ident" id="7876382">snet</span><span class="op" id="7876386">:</span>&nbsp;<span class="string" id="7876388">&#34;unix&#34;</span><span class="op" id="7876394">,</span>&nbsp;<span class="ident" id="7876396">saddr</span><span class="op" id="7876401">:</span>&nbsp;<span class="string" id="7876403">&#34;@gotest2/net&#34;</span><span class="op" id="7876417">,</span>&nbsp;<span class="ident" id="7876419">cnet</span><span class="op" id="7876423">:</span>&nbsp;<span class="string" id="7876425">&#34;unix&#34;</span><span class="op" id="7876431">,</span>&nbsp;<span class="ident" id="7876433">caddr</span><span class="op" id="7876438">:</span>&nbsp;<span class="string" id="7876440">&#34;@gotest2/net.local&#34;</span><span class="op" id="7876460">,</span>&nbsp;<span class="ident" id="7876462">linuxOnly</span><span class="op" id="7876471">:</span>&nbsp;<span class="builtintype" id="7876473">true</span><span class="op" id="7876477">}</span><span class="op" id="7876478">,</span><br>
<span class="lineno"></span><span class="op" id="7876480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7876483">func</span>&nbsp;<span class="ident" id="7876488">TestStreamConnServer</span><span class="op" id="7876508">(</span><span class="ident" id="7876509">t</span>&nbsp;<span class="op" id="7876511">*</span><span class="ident" id="7876512">testing</span><span class="op" id="7876519">.</span><span class="ident" id="7876520">T</span><span class="op" id="7876521">)</span>&nbsp;<span class="op" id="7876523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876526">for</span>&nbsp;<span class="ident" id="7876530">_</span><span class="op" id="7876531">,</span>&nbsp;<span class="ident" id="7876533">tt</span>&nbsp;<span class="op" id="7876536">:=</span>&nbsp;<span class="keyword" id="7876539">range</span>&nbsp;<span class="ident" id="7876545">streamConnServerTests</span>&nbsp;<span class="op" id="7876567">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876571">if</span>&nbsp;<span class="ident" id="7876574">skipServerTest</span><span class="op" id="7876588">(</span><span class="ident" id="7876589">tt</span><span class="op" id="7876591">.</span><span class="ident" id="7876592">snet</span><span class="op" id="7876596">,</span>&nbsp;<span class="string" id="7876598">&#34;unix&#34;</span><span class="op" id="7876604">,</span>&nbsp;<span class="ident" id="7876606">tt</span><span class="op" id="7876608">.</span><span class="ident" id="7876609">saddr</span><span class="op" id="7876614">,</span>&nbsp;<span class="ident" id="7876616">tt</span><span class="op" id="7876618">.</span><span class="ident" id="7876619">ipv6</span><span class="op" id="7876623">,</span>&nbsp;<span class="ident" id="7876625">tt</span><span class="op" id="7876627">.</span><span class="ident" id="7876628">ipv4map</span><span class="op" id="7876635">,</span>&nbsp;<span class="ident" id="7876637">tt</span><span class="op" id="7876639">.</span><span class="ident" id="7876640">linuxOnly</span><span class="op" id="7876649">)</span>&nbsp;<span class="op" id="7876651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876656">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876672">listening</span>&nbsp;<span class="op" id="7876682">:=</span>&nbsp;<span class="builtinfunc" id="7876685">make</span><span class="op" id="7876689">(</span><span class="keyword" id="7876690">chan</span>&nbsp;<span class="builtintype" id="7876695">string</span><span class="op" id="7876701">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876705">done</span>&nbsp;<span class="op" id="7876710">:=</span>&nbsp;<span class="builtinfunc" id="7876713">make</span><span class="op" id="7876717">(</span><span class="keyword" id="7876718">chan</span>&nbsp;<span class="builtintype" id="7876723">int</span><span class="op" id="7876726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876730">switch</span>&nbsp;<span class="ident" id="7876737">tt</span><span class="op" id="7876739">.</span><span class="ident" id="7876740">snet</span>&nbsp;<span class="op" id="7876745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876749">case</span>&nbsp;<span class="string" id="7876754">&#34;tcp&#34;</span><span class="op" id="7876759">,</span>&nbsp;<span class="string" id="7876761">&#34;tcp4&#34;</span><span class="op" id="7876767">,</span>&nbsp;<span class="string" id="7876769">&#34;tcp6&#34;</span><span class="op" id="7876775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876780">tt</span><span class="op" id="7876782">.</span><span class="ident" id="7876783">saddr</span>&nbsp;<span class="op" id="7876789">+=</span>&nbsp;<span class="string" id="7876792">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876799">case</span>&nbsp;<span class="string" id="7876804">&#34;unix&#34;</span><span class="op" id="7876810">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876815">os</span><span class="op" id="7876817">.</span><span class="ident" id="7876818">Remove</span><span class="op" id="7876824">(</span><span class="ident" id="7876825">tt</span><span class="op" id="7876827">.</span><span class="ident" id="7876828">saddr</span><span class="op" id="7876833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876838">os</span><span class="op" id="7876840">.</span><span class="ident" id="7876841">Remove</span><span class="op" id="7876847">(</span><span class="ident" id="7876848">tt</span><span class="op" id="7876850">.</span><span class="ident" id="7876851">caddr</span><span class="op" id="7876856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7876860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876865">go</span>&nbsp;<span class="ident" id="7876868">runStreamConnServer</span><span class="op" id="7876887">(</span><span class="ident" id="7876888">t</span><span class="op" id="7876889">,</span>&nbsp;<span class="ident" id="7876891">tt</span><span class="op" id="7876893">.</span><span class="ident" id="7876894">snet</span><span class="op" id="7876898">,</span>&nbsp;<span class="ident" id="7876900">tt</span><span class="op" id="7876902">.</span><span class="ident" id="7876903">saddr</span><span class="op" id="7876908">,</span>&nbsp;<span class="ident" id="7876910">listening</span><span class="op" id="7876919">,</span>&nbsp;<span class="ident" id="7876921">done</span><span class="op" id="7876925">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7876929">taddr</span>&nbsp;<span class="op" id="7876935">:=</span>&nbsp;<span class="op" id="7876938">&lt;-</span><span class="ident" id="7876940">listening</span>&nbsp;<span class="comment" id="7876950">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7876981">switch</span>&nbsp;<span class="ident" id="7876988">tt</span><span class="op" id="7876990">.</span><span class="ident" id="7876991">cnet</span>&nbsp;<span class="op" id="7876996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877000">case</span>&nbsp;<span class="string" id="7877005">&#34;tcp&#34;</span><span class="op" id="7877010">,</span>&nbsp;<span class="string" id="7877012">&#34;tcp4&#34;</span><span class="op" id="7877018">,</span>&nbsp;<span class="string" id="7877020">&#34;tcp6&#34;</span><span class="op" id="7877026">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877031">_</span><span class="op" id="7877032">,</span>&nbsp;<span class="ident" id="7877034">port</span><span class="op" id="7877038">,</span>&nbsp;<span class="ident" id="7877040">err</span>&nbsp;<span class="op" id="7877044">:=</span>&nbsp;<span class="ident" id="7877047">SplitHostPort</span><span class="op" id="7877060">(</span><span class="ident" id="7877061">taddr</span><span class="op" id="7877066">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877071">if</span>&nbsp;<span class="ident" id="7877074">err</span>&nbsp;<span class="op" id="7877078">!=</span>&nbsp;<span class="ident" id="7877081">nil</span>&nbsp;<span class="op" id="7877085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877091">t</span><span class="op" id="7877092">.</span><span class="ident" id="7877093">Fatalf</span><span class="op" id="7877099">(</span><span class="string" id="7877100">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7877130">,</span>&nbsp;<span class="ident" id="7877132">taddr</span><span class="op" id="7877137">,</span>&nbsp;<span class="ident" id="7877139">err</span><span class="op" id="7877142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877152">taddr</span>&nbsp;<span class="op" id="7877158">=</span>&nbsp;<span class="ident" id="7877160">tt</span><span class="op" id="7877162">.</span><span class="ident" id="7877163">caddr</span>&nbsp;<span class="op" id="7877169">+</span>&nbsp;<span class="string" id="7877171">&#34;:&#34;</span>&nbsp;<span class="op" id="7877175">+</span>&nbsp;<span class="ident" id="7877177">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877184">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877189">runStreamConnClient</span><span class="op" id="7877208">(</span><span class="ident" id="7877209">t</span><span class="op" id="7877210">,</span>&nbsp;<span class="ident" id="7877212">tt</span><span class="op" id="7877214">.</span><span class="ident" id="7877215">cnet</span><span class="op" id="7877219">,</span>&nbsp;<span class="ident" id="7877221">taddr</span><span class="op" id="7877226">,</span>&nbsp;<span class="ident" id="7877228">tt</span><span class="op" id="7877230">.</span><span class="ident" id="7877231">empty</span><span class="op" id="7877236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877240">&lt;-</span><span class="ident" id="7877242">done</span>&nbsp;<span class="comment" id="7877247">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877278">switch</span>&nbsp;<span class="ident" id="7877285">tt</span><span class="op" id="7877287">.</span><span class="ident" id="7877288">snet</span>&nbsp;<span class="op" id="7877293">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877297">case</span>&nbsp;<span class="string" id="7877302">&#34;unix&#34;</span><span class="op" id="7877308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877313">os</span><span class="op" id="7877315">.</span><span class="ident" id="7877316">Remove</span><span class="op" id="7877322">(</span><span class="ident" id="7877323">tt</span><span class="op" id="7877325">.</span><span class="ident" id="7877326">saddr</span><span class="op" id="7877331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877336">os</span><span class="op" id="7877338">.</span><span class="ident" id="7877339">Remove</span><span class="op" id="7877345">(</span><span class="ident" id="7877346">tt</span><span class="op" id="7877348">.</span><span class="ident" id="7877349">caddr</span><span class="op" id="7877354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877361">}</span><br>
<span class="lineno">130</span><span class="op" id="7877363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7877366">var</span>&nbsp;<span class="ident" id="7877370">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7877395">=</span>&nbsp;<span class="op" id="7877397">[</span><span class="op" id="7877398">]</span><span class="keyword" id="7877399">struct</span>&nbsp;<span class="op" id="7877406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877409">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7877419">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877427">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7877437">string</span>&nbsp;<span class="comment" id="7877444">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877463">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7877473">string</span>&nbsp;<span class="comment" id="7877480">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877499">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7877509">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7877516">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877541">linuxOnly</span>&nbsp;<span class="builtintype" id="7877551">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7877558">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7877612">}</span><span class="op" id="7877613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877616">{</span><span class="ident" id="7877617">net</span><span class="op" id="7877620">:</span>&nbsp;<span class="string" id="7877622">&#34;unixpacket&#34;</span><span class="op" id="7877634">,</span>&nbsp;<span class="ident" id="7877636">saddr</span><span class="op" id="7877641">:</span>&nbsp;<span class="ident" id="7877643">testUnixAddr</span><span class="op" id="7877655">(</span><span class="op" id="7877656">)</span><span class="op" id="7877657">,</span>&nbsp;<span class="ident" id="7877659">caddr</span><span class="op" id="7877664">:</span>&nbsp;<span class="ident" id="7877666">testUnixAddr</span><span class="op" id="7877678">(</span><span class="op" id="7877679">)</span><span class="op" id="7877680">}</span><span class="op" id="7877681">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7877684">{</span><span class="ident" id="7877685">net</span><span class="op" id="7877688">:</span>&nbsp;<span class="string" id="7877690">&#34;unixpacket&#34;</span><span class="op" id="7877702">,</span>&nbsp;<span class="ident" id="7877704">saddr</span><span class="op" id="7877709">:</span>&nbsp;<span class="string" id="7877711">&#34;@gotest4/net&#34;</span><span class="op" id="7877725">,</span>&nbsp;<span class="ident" id="7877727">caddr</span><span class="op" id="7877732">:</span>&nbsp;<span class="string" id="7877734">&#34;@gotest4/net.local&#34;</span><span class="op" id="7877754">,</span>&nbsp;<span class="ident" id="7877756">linuxOnly</span><span class="op" id="7877765">:</span>&nbsp;<span class="builtintype" id="7877767">true</span><span class="op" id="7877771">}</span><span class="op" id="7877772">,</span><br>
<span class="lineno"></span><span class="op" id="7877774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7877777">func</span>&nbsp;<span class="ident" id="7877782">TestSeqpacketConnServer</span><span class="op" id="7877805">(</span><span class="ident" id="7877806">t</span>&nbsp;<span class="op" id="7877808">*</span><span class="ident" id="7877809">testing</span><span class="op" id="7877816">.</span><span class="ident" id="7877817">T</span><span class="op" id="7877818">)</span>&nbsp;<span class="op" id="7877820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877823">switch</span>&nbsp;<span class="ident" id="7877830">runtime</span><span class="op" id="7877837">.</span><span class="ident" id="7877838">GOOS</span>&nbsp;<span class="op" id="7877843">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877846">case</span>&nbsp;<span class="string" id="7877851">&#34;darwin&#34;</span><span class="op" id="7877859">,</span>&nbsp;<span class="string" id="7877861">&#34;nacl&#34;</span><span class="op" id="7877867">,</span>&nbsp;<span class="string" id="7877869">&#34;openbsd&#34;</span><span class="op" id="7877878">,</span>&nbsp;<span class="string" id="7877880">&#34;plan9&#34;</span><span class="op" id="7877887">,</span>&nbsp;<span class="string" id="7877889">&#34;windows&#34;</span><span class="op" id="7877898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877902">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7877915">case</span>&nbsp;<span class="string" id="7877920">&#34;freebsd&#34;</span><span class="op" id="7877929">:</span>&nbsp;<span class="comment" id="7877931">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7877973">t</span><span class="op" id="7877974">.</span><span class="ident" id="7877975">Skipf</span><span class="op" id="7877980">(</span><span class="string" id="7877981">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7878002">,</span>&nbsp;<span class="ident" id="7878004">runtime</span><span class="op" id="7878011">.</span><span class="ident" id="7878012">GOOS</span><span class="op" id="7878016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878019">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878023">for</span>&nbsp;<span class="ident" id="7878027">_</span><span class="op" id="7878028">,</span>&nbsp;<span class="ident" id="7878030">tt</span>&nbsp;<span class="op" id="7878033">:=</span>&nbsp;<span class="keyword" id="7878036">range</span>&nbsp;<span class="ident" id="7878042">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7878067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878071">if</span>&nbsp;<span class="ident" id="7878074">runtime</span><span class="op" id="7878081">.</span><span class="ident" id="7878082">GOOS</span>&nbsp;<span class="op" id="7878087">!=</span>&nbsp;<span class="string" id="7878090">&#34;linux&#34;</span>&nbsp;<span class="op" id="7878098">&amp;&amp;</span>&nbsp;<span class="ident" id="7878101">tt</span><span class="op" id="7878103">.</span><span class="ident" id="7878104">linuxOnly</span>&nbsp;<span class="op" id="7878114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878119">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878130">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878134">listening</span>&nbsp;<span class="op" id="7878144">:=</span>&nbsp;<span class="builtinfunc" id="7878147">make</span><span class="op" id="7878151">(</span><span class="keyword" id="7878152">chan</span>&nbsp;<span class="builtintype" id="7878157">string</span><span class="op" id="7878163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878167">done</span>&nbsp;<span class="op" id="7878172">:=</span>&nbsp;<span class="builtinfunc" id="7878175">make</span><span class="op" id="7878179">(</span><span class="keyword" id="7878180">chan</span>&nbsp;<span class="builtintype" id="7878185">int</span><span class="op" id="7878188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878192">switch</span>&nbsp;<span class="ident" id="7878199">tt</span><span class="op" id="7878201">.</span><span class="ident" id="7878202">net</span>&nbsp;<span class="op" id="7878206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878210">case</span>&nbsp;<span class="string" id="7878215">&#34;unixpacket&#34;</span><span class="op" id="7878227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878232">os</span><span class="op" id="7878234">.</span><span class="ident" id="7878235">Remove</span><span class="op" id="7878241">(</span><span class="ident" id="7878242">tt</span><span class="op" id="7878244">.</span><span class="ident" id="7878245">saddr</span><span class="op" id="7878250">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878255">os</span><span class="op" id="7878257">.</span><span class="ident" id="7878258">Remove</span><span class="op" id="7878264">(</span><span class="ident" id="7878265">tt</span><span class="op" id="7878267">.</span><span class="ident" id="7878268">caddr</span><span class="op" id="7878273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878282">go</span>&nbsp;<span class="ident" id="7878285">runStreamConnServer</span><span class="op" id="7878304">(</span><span class="ident" id="7878305">t</span><span class="op" id="7878306">,</span>&nbsp;<span class="ident" id="7878308">tt</span><span class="op" id="7878310">.</span><span class="ident" id="7878311">net</span><span class="op" id="7878314">,</span>&nbsp;<span class="ident" id="7878316">tt</span><span class="op" id="7878318">.</span><span class="ident" id="7878319">saddr</span><span class="op" id="7878324">,</span>&nbsp;<span class="ident" id="7878326">listening</span><span class="op" id="7878335">,</span>&nbsp;<span class="ident" id="7878337">done</span><span class="op" id="7878341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878345">taddr</span>&nbsp;<span class="op" id="7878351">:=</span>&nbsp;<span class="op" id="7878354">&lt;-</span><span class="ident" id="7878356">listening</span>&nbsp;<span class="comment" id="7878366">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878397">runStreamConnClient</span><span class="op" id="7878416">(</span><span class="ident" id="7878417">t</span><span class="op" id="7878418">,</span>&nbsp;<span class="ident" id="7878420">tt</span><span class="op" id="7878422">.</span><span class="ident" id="7878423">net</span><span class="op" id="7878426">,</span>&nbsp;<span class="ident" id="7878428">taddr</span><span class="op" id="7878433">,</span>&nbsp;<span class="ident" id="7878435">tt</span><span class="op" id="7878437">.</span><span class="ident" id="7878438">empty</span><span class="op" id="7878443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878447">&lt;-</span><span class="ident" id="7878449">done</span>&nbsp;<span class="comment" id="7878454">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878485">switch</span>&nbsp;<span class="ident" id="7878492">tt</span><span class="op" id="7878494">.</span><span class="ident" id="7878495">net</span>&nbsp;<span class="op" id="7878499">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878503">case</span>&nbsp;<span class="string" id="7878508">&#34;unixpacket&#34;</span><span class="op" id="7878520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878525">os</span><span class="op" id="7878527">.</span><span class="ident" id="7878528">Remove</span><span class="op" id="7878534">(</span><span class="ident" id="7878535">tt</span><span class="op" id="7878537">.</span><span class="ident" id="7878538">saddr</span><span class="op" id="7878543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878548">os</span><span class="op" id="7878550">.</span><span class="ident" id="7878551">Remove</span><span class="op" id="7878557">(</span><span class="ident" id="7878558">tt</span><span class="op" id="7878560">.</span><span class="ident" id="7878561">caddr</span><span class="op" id="7878566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878573">}</span><br>
<span class="lineno">175</span><span class="op" id="7878575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7878578">func</span>&nbsp;<span class="ident" id="7878583">runStreamConnServer</span><span class="op" id="7878602">(</span><span class="ident" id="7878603">t</span>&nbsp;<span class="op" id="7878605">*</span><span class="ident" id="7878606">testing</span><span class="op" id="7878613">.</span><span class="ident" id="7878614">T</span><span class="op" id="7878615">,</span>&nbsp;<span class="ident" id="7878617">net</span><span class="op" id="7878620">,</span>&nbsp;<span class="ident" id="7878622">laddr</span>&nbsp;<span class="builtintype" id="7878628">string</span><span class="op" id="7878634">,</span>&nbsp;<span class="ident" id="7878636">listening</span>&nbsp;<span class="keyword" id="7878646">chan</span><span class="op" id="7878650">&lt;-</span>&nbsp;<span class="builtintype" id="7878653">string</span><span class="op" id="7878659">,</span>&nbsp;<span class="ident" id="7878661">done</span>&nbsp;<span class="keyword" id="7878666">chan</span><span class="op" id="7878670">&lt;-</span>&nbsp;<span class="builtintype" id="7878673">int</span><span class="op" id="7878676">)</span>&nbsp;<span class="op" id="7878678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878681">defer</span>&nbsp;<span class="builtinfunc" id="7878687">close</span><span class="op" id="7878692">(</span><span class="ident" id="7878693">done</span><span class="op" id="7878697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878700">l</span><span class="op" id="7878701">,</span>&nbsp;<span class="ident" id="7878703">err</span>&nbsp;<span class="op" id="7878707">:=</span>&nbsp;<span class="ident" id="7878710">Listen</span><span class="op" id="7878716">(</span><span class="ident" id="7878717">net</span><span class="op" id="7878720">,</span>&nbsp;<span class="ident" id="7878722">laddr</span><span class="op" id="7878727">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878730">if</span>&nbsp;<span class="ident" id="7878733">err</span>&nbsp;<span class="op" id="7878737">!=</span>&nbsp;<span class="ident" id="7878740">nil</span>&nbsp;<span class="op" id="7878744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878748">t</span><span class="op" id="7878749">.</span><span class="ident" id="7878750">Errorf</span><span class="op" id="7878756">(</span><span class="string" id="7878757">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7878784">,</span>&nbsp;<span class="ident" id="7878786">net</span><span class="op" id="7878789">,</span>&nbsp;<span class="ident" id="7878791">laddr</span><span class="op" id="7878796">,</span>&nbsp;<span class="ident" id="7878798">err</span><span class="op" id="7878801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878805">listening</span>&nbsp;<span class="op" id="7878815">&lt;-</span>&nbsp;<span class="string" id="7878818">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878828">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878836">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878839">defer</span>&nbsp;<span class="ident" id="7878845">l</span><span class="op" id="7878846">.</span><span class="ident" id="7878847">Close</span><span class="op" id="7878852">(</span><span class="op" id="7878853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878856">listening</span>&nbsp;<span class="op" id="7878866">&lt;-</span>&nbsp;<span class="ident" id="7878869">l</span><span class="op" id="7878870">.</span><span class="ident" id="7878871">Addr</span><span class="op" id="7878875">(</span><span class="op" id="7878876">)</span><span class="op" id="7878877">.</span><span class="ident" id="7878878">String</span><span class="op" id="7878884">(</span><span class="op" id="7878885">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878889">echo</span>&nbsp;<span class="op" id="7878894">:=</span>&nbsp;<span class="keyword" id="7878897">func</span><span class="op" id="7878901">(</span><span class="ident" id="7878902">rw</span>&nbsp;<span class="ident" id="7878905">io</span><span class="op" id="7878907">.</span><span class="ident" id="7878908">ReadWriter</span><span class="op" id="7878918">,</span>&nbsp;<span class="ident" id="7878920">done</span>&nbsp;<span class="keyword" id="7878925">chan</span><span class="op" id="7878929">&lt;-</span>&nbsp;<span class="builtintype" id="7878932">int</span><span class="op" id="7878935">)</span>&nbsp;<span class="op" id="7878937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878941">buf</span>&nbsp;<span class="op" id="7878945">:=</span>&nbsp;<span class="builtinfunc" id="7878948">make</span><span class="op" id="7878952">(</span><span class="op" id="7878953">[</span><span class="op" id="7878954">]</span><span class="builtintype" id="7878955">byte</span><span class="op" id="7878959">,</span>&nbsp;<span class="num" id="7878961">1024</span><span class="op" id="7878965">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7878969">for</span>&nbsp;<span class="op" id="7878973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878978">n</span><span class="op" id="7878979">,</span>&nbsp;<span class="ident" id="7878981">err</span>&nbsp;<span class="op" id="7878985">:=</span>&nbsp;<span class="ident" id="7878988">rw</span><span class="op" id="7878990">.</span><span class="ident" id="7878991">Read</span><span class="op" id="7878995">(</span><span class="ident" id="7878996">buf</span><span class="op" id="7878999">[</span><span class="num" id="7879000">0</span><span class="op" id="7879001">:</span><span class="op" id="7879002">]</span><span class="op" id="7879003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879008">if</span>&nbsp;<span class="ident" id="7879011">err</span>&nbsp;<span class="op" id="7879015">!=</span>&nbsp;<span class="ident" id="7879018">nil</span>&nbsp;<span class="op" id="7879022">||</span>&nbsp;<span class="ident" id="7879025">n</span>&nbsp;<span class="op" id="7879027">==</span>&nbsp;<span class="num" id="7879030">0</span>&nbsp;<span class="op" id="7879032">||</span>&nbsp;<span class="builtintype" id="7879035">string</span><span class="op" id="7879041">(</span><span class="ident" id="7879042">buf</span><span class="op" id="7879045">[</span><span class="op" id="7879046">:</span><span class="ident" id="7879047">n</span><span class="op" id="7879048">]</span><span class="op" id="7879049">)</span>&nbsp;<span class="op" id="7879051">==</span>&nbsp;<span class="string" id="7879054">&#34;END&#34;</span>&nbsp;<span class="op" id="7879060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879066">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879075">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879080">rw</span><span class="op" id="7879082">.</span><span class="ident" id="7879083">Write</span><span class="op" id="7879088">(</span><span class="ident" id="7879089">buf</span><span class="op" id="7879092">[</span><span class="num" id="7879093">0</span><span class="op" id="7879094">:</span><span class="ident" id="7879095">n</span><span class="op" id="7879096">]</span><span class="op" id="7879097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7879105">close</span><span class="op" id="7879110">(</span><span class="ident" id="7879111">done</span><span class="op" id="7879115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="7879121">run</span><span class="op" id="7879124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879127">for</span>&nbsp;<span class="op" id="7879131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879135">c</span><span class="op" id="7879136">,</span>&nbsp;<span class="ident" id="7879138">err</span>&nbsp;<span class="op" id="7879142">:=</span>&nbsp;<span class="ident" id="7879145">l</span><span class="op" id="7879146">.</span><span class="ident" id="7879147">Accept</span><span class="op" id="7879153">(</span><span class="op" id="7879154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879158">if</span>&nbsp;<span class="ident" id="7879161">err</span>&nbsp;<span class="op" id="7879165">!=</span>&nbsp;<span class="ident" id="7879168">nil</span>&nbsp;<span class="op" id="7879172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879177">t</span><span class="op" id="7879178">.</span><span class="ident" id="7879179">Logf</span><span class="op" id="7879183">(</span><span class="string" id="7879184">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7879203">,</span>&nbsp;<span class="ident" id="7879205">err</span><span class="op" id="7879208">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879213">continue</span>&nbsp;<span class="ident" id="7879222">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879232">echodone</span>&nbsp;<span class="op" id="7879241">:=</span>&nbsp;<span class="builtinfunc" id="7879244">make</span><span class="op" id="7879248">(</span><span class="keyword" id="7879249">chan</span>&nbsp;<span class="builtintype" id="7879254">int</span><span class="op" id="7879257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879261">go</span>&nbsp;<span class="ident" id="7879264">echo</span><span class="op" id="7879268">(</span><span class="ident" id="7879269">c</span><span class="op" id="7879270">,</span>&nbsp;<span class="ident" id="7879272">echodone</span><span class="op" id="7879280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879284">&lt;-</span><span class="ident" id="7879286">echodone</span>&nbsp;<span class="comment" id="7879295">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879323">c</span><span class="op" id="7879324">.</span><span class="ident" id="7879325">Close</span><span class="op" id="7879330">(</span><span class="op" id="7879331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879335">break</span>&nbsp;<span class="ident" id="7879341">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879346">}</span><br>
<span class="lineno"></span><span class="op" id="7879348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7879351">func</span>&nbsp;<span class="ident" id="7879356">runStreamConnClient</span><span class="op" id="7879375">(</span><span class="ident" id="7879376">t</span>&nbsp;<span class="op" id="7879378">*</span><span class="ident" id="7879379">testing</span><span class="op" id="7879386">.</span><span class="ident" id="7879387">T</span><span class="op" id="7879388">,</span>&nbsp;<span class="ident" id="7879390">net</span><span class="op" id="7879393">,</span>&nbsp;<span class="ident" id="7879395">taddr</span>&nbsp;<span class="builtintype" id="7879401">string</span><span class="op" id="7879407">,</span>&nbsp;<span class="ident" id="7879409">isEmpty</span>&nbsp;<span class="builtintype" id="7879417">bool</span><span class="op" id="7879421">)</span>&nbsp;<span class="op" id="7879423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879426">c</span><span class="op" id="7879427">,</span>&nbsp;<span class="ident" id="7879429">err</span>&nbsp;<span class="op" id="7879433">:=</span>&nbsp;<span class="ident" id="7879436">Dial</span><span class="op" id="7879440">(</span><span class="ident" id="7879441">net</span><span class="op" id="7879444">,</span>&nbsp;<span class="ident" id="7879446">taddr</span><span class="op" id="7879451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879454">if</span>&nbsp;<span class="ident" id="7879457">err</span>&nbsp;<span class="op" id="7879461">!=</span>&nbsp;<span class="ident" id="7879464">nil</span>&nbsp;<span class="op" id="7879468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879472">t</span><span class="op" id="7879473">.</span><span class="ident" id="7879474">Fatalf</span><span class="op" id="7879480">(</span><span class="string" id="7879481">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7879506">,</span>&nbsp;<span class="ident" id="7879508">net</span><span class="op" id="7879511">,</span>&nbsp;<span class="ident" id="7879513">taddr</span><span class="op" id="7879518">,</span>&nbsp;<span class="ident" id="7879520">err</span><span class="op" id="7879523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879526">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879529">defer</span>&nbsp;<span class="ident" id="7879535">c</span><span class="op" id="7879536">.</span><span class="ident" id="7879537">Close</span><span class="op" id="7879542">(</span><span class="op" id="7879543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879546">c</span><span class="op" id="7879547">.</span><span class="ident" id="7879548">SetReadDeadline</span><span class="op" id="7879563">(</span><span class="ident" id="7879564">time</span><span class="op" id="7879568">.</span><span class="ident" id="7879569">Now</span><span class="op" id="7879572">(</span><span class="op" id="7879573">)</span><span class="op" id="7879574">.</span><span class="ident" id="7879575">Add</span><span class="op" id="7879578">(</span><span class="num" id="7879579">1</span>&nbsp;<span class="op" id="7879581">*</span>&nbsp;<span class="ident" id="7879583">time</span><span class="op" id="7879587">.</span><span class="ident" id="7879588">Second</span><span class="op" id="7879594">)</span><span class="op" id="7879595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879599">var</span>&nbsp;<span class="ident" id="7879603">wb</span>&nbsp;<span class="op" id="7879606">[</span><span class="op" id="7879607">]</span><span class="builtintype" id="7879608">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879614">if</span>&nbsp;<span class="op" id="7879617">!</span><span class="ident" id="7879618">isEmpty</span>&nbsp;<span class="op" id="7879626">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879630">wb</span>&nbsp;<span class="op" id="7879633">=</span>&nbsp;<span class="op" id="7879635">[</span><span class="op" id="7879636">]</span><span class="builtintype" id="7879637">byte</span><span class="op" id="7879641">(</span><span class="string" id="7879642">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7879670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879676">if</span>&nbsp;<span class="ident" id="7879679">n</span><span class="op" id="7879680">,</span>&nbsp;<span class="ident" id="7879682">err</span>&nbsp;<span class="op" id="7879686">:=</span>&nbsp;<span class="ident" id="7879689">c</span><span class="op" id="7879690">.</span><span class="ident" id="7879691">Write</span><span class="op" id="7879696">(</span><span class="ident" id="7879697">wb</span><span class="op" id="7879699">)</span><span class="op" id="7879700">;</span>&nbsp;<span class="ident" id="7879702">err</span>&nbsp;<span class="op" id="7879706">!=</span>&nbsp;<span class="ident" id="7879709">nil</span>&nbsp;<span class="op" id="7879713">||</span>&nbsp;<span class="ident" id="7879716">n</span>&nbsp;<span class="op" id="7879718">!=</span>&nbsp;<span class="builtinfunc" id="7879721">len</span><span class="op" id="7879724">(</span><span class="ident" id="7879725">wb</span><span class="op" id="7879727">)</span>&nbsp;<span class="op" id="7879729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879733">t</span><span class="op" id="7879734">.</span><span class="ident" id="7879735">Fatalf</span><span class="op" id="7879741">(</span><span class="string" id="7879742">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7879780">,</span>&nbsp;<span class="ident" id="7879782">n</span><span class="op" id="7879783">,</span>&nbsp;<span class="ident" id="7879785">err</span><span class="op" id="7879788">,</span>&nbsp;<span class="builtinfunc" id="7879790">len</span><span class="op" id="7879793">(</span><span class="ident" id="7879794">wb</span><span class="op" id="7879796">)</span><span class="op" id="7879797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879800">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879804">rb</span>&nbsp;<span class="op" id="7879807">:=</span>&nbsp;<span class="builtinfunc" id="7879810">make</span><span class="op" id="7879814">(</span><span class="op" id="7879815">[</span><span class="op" id="7879816">]</span><span class="builtintype" id="7879817">byte</span><span class="op" id="7879821">,</span>&nbsp;<span class="num" id="7879823">1024</span><span class="op" id="7879827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7879830">if</span>&nbsp;<span class="ident" id="7879833">n</span><span class="op" id="7879834">,</span>&nbsp;<span class="ident" id="7879836">err</span>&nbsp;<span class="op" id="7879840">:=</span>&nbsp;<span class="ident" id="7879843">c</span><span class="op" id="7879844">.</span><span class="ident" id="7879845">Read</span><span class="op" id="7879849">(</span><span class="ident" id="7879850">rb</span><span class="op" id="7879852">[</span><span class="num" id="7879853">0</span><span class="op" id="7879854">:</span><span class="op" id="7879855">]</span><span class="op" id="7879856">)</span><span class="op" id="7879857">;</span>&nbsp;<span class="ident" id="7879859">err</span>&nbsp;<span class="op" id="7879863">!=</span>&nbsp;<span class="ident" id="7879866">nil</span>&nbsp;<span class="op" id="7879870">||</span>&nbsp;<span class="ident" id="7879873">n</span>&nbsp;<span class="op" id="7879875">!=</span>&nbsp;<span class="builtinfunc" id="7879878">len</span><span class="op" id="7879881">(</span><span class="ident" id="7879882">wb</span><span class="op" id="7879884">)</span>&nbsp;<span class="op" id="7879886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879890">t</span><span class="op" id="7879891">.</span><span class="ident" id="7879892">Fatalf</span><span class="op" id="7879898">(</span><span class="string" id="7879899">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7879936">,</span>&nbsp;<span class="ident" id="7879938">n</span><span class="op" id="7879939">,</span>&nbsp;<span class="ident" id="7879941">err</span><span class="op" id="7879944">,</span>&nbsp;<span class="builtinfunc" id="7879946">len</span><span class="op" id="7879949">(</span><span class="ident" id="7879950">wb</span><span class="op" id="7879952">)</span><span class="op" id="7879953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879956">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7879960">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7880001">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7880053">switch</span>&nbsp;<span class="ident" id="7880060">net</span>&nbsp;<span class="op" id="7880064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7880067">case</span>&nbsp;<span class="string" id="7880072">&#34;unixpacket&#34;</span><span class="op" id="7880084">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880088">c</span><span class="op" id="7880089">.</span><span class="ident" id="7880090">Write</span><span class="op" id="7880095">(</span><span class="op" id="7880096">[</span><span class="op" id="7880097">]</span><span class="builtintype" id="7880098">byte</span><span class="op" id="7880102">(</span><span class="string" id="7880103">&#34;END&#34;</span><span class="op" id="7880108">)</span><span class="op" id="7880109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880112">}</span><br>
<span class="lineno"></span><span class="op" id="7880114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7880117">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="7880160">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="7880211">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="7880263">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="7880293">var</span>&nbsp;<span class="ident" id="7880297">testDatagram</span>&nbsp;<span class="op" id="7880310">=</span>&nbsp;<span class="ident" id="7880312">flag</span><span class="op" id="7880316">.</span><span class="ident" id="7880317">Bool</span><span class="op" id="7880321">(</span><span class="string" id="7880322">&#34;datagram&#34;</span><span class="op" id="7880332">,</span>&nbsp;<span class="builtintype" id="7880334">false</span><span class="op" id="7880339">,</span>&nbsp;<span class="string" id="7880341">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="7880375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7880378">var</span>&nbsp;<span class="ident" id="7880382">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7880412">=</span>&nbsp;<span class="op" id="7880414">[</span><span class="op" id="7880415">]</span><span class="keyword" id="7880416">struct</span>&nbsp;<span class="op" id="7880423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880426">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880436">string</span>&nbsp;<span class="comment" id="7880443">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880459">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880469">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880477">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880487">string</span>&nbsp;<span class="comment" id="7880494">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880510">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880520">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880528">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880538">bool</span>&nbsp;<span class="comment" id="7880543">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880584">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880594">bool</span>&nbsp;<span class="comment" id="7880599">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880645">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880655">bool</span>&nbsp;<span class="comment" id="7880660">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880691">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7880701">bool</span>&nbsp;<span class="comment" id="7880706">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880731">linuxOnly</span>&nbsp;<span class="builtintype" id="7880741">bool</span>&nbsp;<span class="comment" id="7880746">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="7880800">}</span><span class="op" id="7880801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880804">{</span><span class="ident" id="7880805">snet</span><span class="op" id="7880809">:</span>&nbsp;<span class="string" id="7880811">&#34;udp&#34;</span><span class="op" id="7880816">,</span>&nbsp;<span class="ident" id="7880818">saddr</span><span class="op" id="7880823">:</span>&nbsp;<span class="string" id="7880825">&#34;&#34;</span><span class="op" id="7880827">,</span>&nbsp;<span class="ident" id="7880829">cnet</span><span class="op" id="7880833">:</span>&nbsp;<span class="string" id="7880835">&#34;udp&#34;</span><span class="op" id="7880840">,</span>&nbsp;<span class="ident" id="7880842">caddr</span><span class="op" id="7880847">:</span>&nbsp;<span class="string" id="7880849">&#34;127.0.0.1&#34;</span><span class="op" id="7880860">}</span><span class="op" id="7880861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880864">{</span><span class="ident" id="7880865">snet</span><span class="op" id="7880869">:</span>&nbsp;<span class="string" id="7880871">&#34;udp&#34;</span><span class="op" id="7880876">,</span>&nbsp;<span class="ident" id="7880878">saddr</span><span class="op" id="7880883">:</span>&nbsp;<span class="string" id="7880885">&#34;0.0.0.0&#34;</span><span class="op" id="7880894">,</span>&nbsp;<span class="ident" id="7880896">cnet</span><span class="op" id="7880900">:</span>&nbsp;<span class="string" id="7880902">&#34;udp&#34;</span><span class="op" id="7880907">,</span>&nbsp;<span class="ident" id="7880909">caddr</span><span class="op" id="7880914">:</span>&nbsp;<span class="string" id="7880916">&#34;127.0.0.1&#34;</span><span class="op" id="7880927">}</span><span class="op" id="7880928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880931">{</span><span class="ident" id="7880932">snet</span><span class="op" id="7880936">:</span>&nbsp;<span class="string" id="7880938">&#34;udp&#34;</span><span class="op" id="7880943">,</span>&nbsp;<span class="ident" id="7880945">saddr</span><span class="op" id="7880950">:</span>&nbsp;<span class="string" id="7880952">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7880970">,</span>&nbsp;<span class="ident" id="7880972">cnet</span><span class="op" id="7880976">:</span>&nbsp;<span class="string" id="7880978">&#34;udp&#34;</span><span class="op" id="7880983">,</span>&nbsp;<span class="ident" id="7880985">caddr</span><span class="op" id="7880990">:</span>&nbsp;<span class="string" id="7880992">&#34;127.0.0.1&#34;</span><span class="op" id="7881003">}</span><span class="op" id="7881004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881007">{</span><span class="ident" id="7881008">snet</span><span class="op" id="7881012">:</span>&nbsp;<span class="string" id="7881014">&#34;udp&#34;</span><span class="op" id="7881019">,</span>&nbsp;<span class="ident" id="7881021">saddr</span><span class="op" id="7881026">:</span>&nbsp;<span class="string" id="7881028">&#34;[::]&#34;</span><span class="op" id="7881034">,</span>&nbsp;<span class="ident" id="7881036">cnet</span><span class="op" id="7881040">:</span>&nbsp;<span class="string" id="7881042">&#34;udp&#34;</span><span class="op" id="7881047">,</span>&nbsp;<span class="ident" id="7881049">caddr</span><span class="op" id="7881054">:</span>&nbsp;<span class="string" id="7881056">&#34;[::1]&#34;</span><span class="op" id="7881063">,</span>&nbsp;<span class="ident" id="7881065">ipv6</span><span class="op" id="7881069">:</span>&nbsp;<span class="builtintype" id="7881071">true</span><span class="op" id="7881075">}</span><span class="op" id="7881076">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881080">{</span><span class="ident" id="7881081">snet</span><span class="op" id="7881085">:</span>&nbsp;<span class="string" id="7881087">&#34;udp&#34;</span><span class="op" id="7881092">,</span>&nbsp;<span class="ident" id="7881094">saddr</span><span class="op" id="7881099">:</span>&nbsp;<span class="string" id="7881101">&#34;&#34;</span><span class="op" id="7881103">,</span>&nbsp;<span class="ident" id="7881105">cnet</span><span class="op" id="7881109">:</span>&nbsp;<span class="string" id="7881111">&#34;udp&#34;</span><span class="op" id="7881116">,</span>&nbsp;<span class="ident" id="7881118">caddr</span><span class="op" id="7881123">:</span>&nbsp;<span class="string" id="7881125">&#34;[::1]&#34;</span><span class="op" id="7881132">,</span>&nbsp;<span class="ident" id="7881134">ipv4map</span><span class="op" id="7881141">:</span>&nbsp;<span class="builtintype" id="7881143">true</span><span class="op" id="7881147">}</span><span class="op" id="7881148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881151">{</span><span class="ident" id="7881152">snet</span><span class="op" id="7881156">:</span>&nbsp;<span class="string" id="7881158">&#34;udp&#34;</span><span class="op" id="7881163">,</span>&nbsp;<span class="ident" id="7881165">saddr</span><span class="op" id="7881170">:</span>&nbsp;<span class="string" id="7881172">&#34;0.0.0.0&#34;</span><span class="op" id="7881181">,</span>&nbsp;<span class="ident" id="7881183">cnet</span><span class="op" id="7881187">:</span>&nbsp;<span class="string" id="7881189">&#34;udp&#34;</span><span class="op" id="7881194">,</span>&nbsp;<span class="ident" id="7881196">caddr</span><span class="op" id="7881201">:</span>&nbsp;<span class="string" id="7881203">&#34;[::1]&#34;</span><span class="op" id="7881210">,</span>&nbsp;<span class="ident" id="7881212">ipv4map</span><span class="op" id="7881219">:</span>&nbsp;<span class="builtintype" id="7881221">true</span><span class="op" id="7881225">}</span><span class="op" id="7881226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881229">{</span><span class="ident" id="7881230">snet</span><span class="op" id="7881234">:</span>&nbsp;<span class="string" id="7881236">&#34;udp&#34;</span><span class="op" id="7881241">,</span>&nbsp;<span class="ident" id="7881243">saddr</span><span class="op" id="7881248">:</span>&nbsp;<span class="string" id="7881250">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7881268">,</span>&nbsp;<span class="ident" id="7881270">cnet</span><span class="op" id="7881274">:</span>&nbsp;<span class="string" id="7881276">&#34;udp&#34;</span><span class="op" id="7881281">,</span>&nbsp;<span class="ident" id="7881283">caddr</span><span class="op" id="7881288">:</span>&nbsp;<span class="string" id="7881290">&#34;[::1]&#34;</span><span class="op" id="7881297">,</span>&nbsp;<span class="ident" id="7881299">ipv4map</span><span class="op" id="7881306">:</span>&nbsp;<span class="builtintype" id="7881308">true</span><span class="op" id="7881312">}</span><span class="op" id="7881313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881316">{</span><span class="ident" id="7881317">snet</span><span class="op" id="7881321">:</span>&nbsp;<span class="string" id="7881323">&#34;udp&#34;</span><span class="op" id="7881328">,</span>&nbsp;<span class="ident" id="7881330">saddr</span><span class="op" id="7881335">:</span>&nbsp;<span class="string" id="7881337">&#34;[::]&#34;</span><span class="op" id="7881343">,</span>&nbsp;<span class="ident" id="7881345">cnet</span><span class="op" id="7881349">:</span>&nbsp;<span class="string" id="7881351">&#34;udp&#34;</span><span class="op" id="7881356">,</span>&nbsp;<span class="ident" id="7881358">caddr</span><span class="op" id="7881363">:</span>&nbsp;<span class="string" id="7881365">&#34;127.0.0.1&#34;</span><span class="op" id="7881376">,</span>&nbsp;<span class="ident" id="7881378">ipv4map</span><span class="op" id="7881385">:</span>&nbsp;<span class="builtintype" id="7881387">true</span><span class="op" id="7881391">}</span><span class="op" id="7881392">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881396">{</span><span class="ident" id="7881397">snet</span><span class="op" id="7881401">:</span>&nbsp;<span class="string" id="7881403">&#34;udp&#34;</span><span class="op" id="7881408">,</span>&nbsp;<span class="ident" id="7881410">saddr</span><span class="op" id="7881415">:</span>&nbsp;<span class="string" id="7881417">&#34;&#34;</span><span class="op" id="7881419">,</span>&nbsp;<span class="ident" id="7881421">cnet</span><span class="op" id="7881425">:</span>&nbsp;<span class="string" id="7881427">&#34;udp4&#34;</span><span class="op" id="7881433">,</span>&nbsp;<span class="ident" id="7881435">caddr</span><span class="op" id="7881440">:</span>&nbsp;<span class="string" id="7881442">&#34;127.0.0.1&#34;</span><span class="op" id="7881453">}</span><span class="op" id="7881454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881457">{</span><span class="ident" id="7881458">snet</span><span class="op" id="7881462">:</span>&nbsp;<span class="string" id="7881464">&#34;udp&#34;</span><span class="op" id="7881469">,</span>&nbsp;<span class="ident" id="7881471">saddr</span><span class="op" id="7881476">:</span>&nbsp;<span class="string" id="7881478">&#34;0.0.0.0&#34;</span><span class="op" id="7881487">,</span>&nbsp;<span class="ident" id="7881489">cnet</span><span class="op" id="7881493">:</span>&nbsp;<span class="string" id="7881495">&#34;udp4&#34;</span><span class="op" id="7881501">,</span>&nbsp;<span class="ident" id="7881503">caddr</span><span class="op" id="7881508">:</span>&nbsp;<span class="string" id="7881510">&#34;127.0.0.1&#34;</span><span class="op" id="7881521">}</span><span class="op" id="7881522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881525">{</span><span class="ident" id="7881526">snet</span><span class="op" id="7881530">:</span>&nbsp;<span class="string" id="7881532">&#34;udp&#34;</span><span class="op" id="7881537">,</span>&nbsp;<span class="ident" id="7881539">saddr</span><span class="op" id="7881544">:</span>&nbsp;<span class="string" id="7881546">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7881564">,</span>&nbsp;<span class="ident" id="7881566">cnet</span><span class="op" id="7881570">:</span>&nbsp;<span class="string" id="7881572">&#34;udp4&#34;</span><span class="op" id="7881578">,</span>&nbsp;<span class="ident" id="7881580">caddr</span><span class="op" id="7881585">:</span>&nbsp;<span class="string" id="7881587">&#34;127.0.0.1&#34;</span><span class="op" id="7881598">}</span><span class="op" id="7881599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881602">{</span><span class="ident" id="7881603">snet</span><span class="op" id="7881607">:</span>&nbsp;<span class="string" id="7881609">&#34;udp&#34;</span><span class="op" id="7881614">,</span>&nbsp;<span class="ident" id="7881616">saddr</span><span class="op" id="7881621">:</span>&nbsp;<span class="string" id="7881623">&#34;[::]&#34;</span><span class="op" id="7881629">,</span>&nbsp;<span class="ident" id="7881631">cnet</span><span class="op" id="7881635">:</span>&nbsp;<span class="string" id="7881637">&#34;udp6&#34;</span><span class="op" id="7881643">,</span>&nbsp;<span class="ident" id="7881645">caddr</span><span class="op" id="7881650">:</span>&nbsp;<span class="string" id="7881652">&#34;[::1]&#34;</span><span class="op" id="7881659">,</span>&nbsp;<span class="ident" id="7881661">ipv6</span><span class="op" id="7881665">:</span>&nbsp;<span class="builtintype" id="7881667">true</span><span class="op" id="7881671">}</span><span class="op" id="7881672">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881676">{</span><span class="ident" id="7881677">snet</span><span class="op" id="7881681">:</span>&nbsp;<span class="string" id="7881683">&#34;udp&#34;</span><span class="op" id="7881688">,</span>&nbsp;<span class="ident" id="7881690">saddr</span><span class="op" id="7881695">:</span>&nbsp;<span class="string" id="7881697">&#34;&#34;</span><span class="op" id="7881699">,</span>&nbsp;<span class="ident" id="7881701">cnet</span><span class="op" id="7881705">:</span>&nbsp;<span class="string" id="7881707">&#34;udp6&#34;</span><span class="op" id="7881713">,</span>&nbsp;<span class="ident" id="7881715">caddr</span><span class="op" id="7881720">:</span>&nbsp;<span class="string" id="7881722">&#34;[::1]&#34;</span><span class="op" id="7881729">,</span>&nbsp;<span class="ident" id="7881731">ipv4map</span><span class="op" id="7881738">:</span>&nbsp;<span class="builtintype" id="7881740">true</span><span class="op" id="7881744">}</span><span class="op" id="7881745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881748">{</span><span class="ident" id="7881749">snet</span><span class="op" id="7881753">:</span>&nbsp;<span class="string" id="7881755">&#34;udp&#34;</span><span class="op" id="7881760">,</span>&nbsp;<span class="ident" id="7881762">saddr</span><span class="op" id="7881767">:</span>&nbsp;<span class="string" id="7881769">&#34;0.0.0.0&#34;</span><span class="op" id="7881778">,</span>&nbsp;<span class="ident" id="7881780">cnet</span><span class="op" id="7881784">:</span>&nbsp;<span class="string" id="7881786">&#34;udp6&#34;</span><span class="op" id="7881792">,</span>&nbsp;<span class="ident" id="7881794">caddr</span><span class="op" id="7881799">:</span>&nbsp;<span class="string" id="7881801">&#34;[::1]&#34;</span><span class="op" id="7881808">,</span>&nbsp;<span class="ident" id="7881810">ipv4map</span><span class="op" id="7881817">:</span>&nbsp;<span class="builtintype" id="7881819">true</span><span class="op" id="7881823">}</span><span class="op" id="7881824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881827">{</span><span class="ident" id="7881828">snet</span><span class="op" id="7881832">:</span>&nbsp;<span class="string" id="7881834">&#34;udp&#34;</span><span class="op" id="7881839">,</span>&nbsp;<span class="ident" id="7881841">saddr</span><span class="op" id="7881846">:</span>&nbsp;<span class="string" id="7881848">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7881866">,</span>&nbsp;<span class="ident" id="7881868">cnet</span><span class="op" id="7881872">:</span>&nbsp;<span class="string" id="7881874">&#34;udp6&#34;</span><span class="op" id="7881880">,</span>&nbsp;<span class="ident" id="7881882">caddr</span><span class="op" id="7881887">:</span>&nbsp;<span class="string" id="7881889">&#34;[::1]&#34;</span><span class="op" id="7881896">,</span>&nbsp;<span class="ident" id="7881898">ipv4map</span><span class="op" id="7881905">:</span>&nbsp;<span class="builtintype" id="7881907">true</span><span class="op" id="7881911">}</span><span class="op" id="7881912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881915">{</span><span class="ident" id="7881916">snet</span><span class="op" id="7881920">:</span>&nbsp;<span class="string" id="7881922">&#34;udp&#34;</span><span class="op" id="7881927">,</span>&nbsp;<span class="ident" id="7881929">saddr</span><span class="op" id="7881934">:</span>&nbsp;<span class="string" id="7881936">&#34;[::]&#34;</span><span class="op" id="7881942">,</span>&nbsp;<span class="ident" id="7881944">cnet</span><span class="op" id="7881948">:</span>&nbsp;<span class="string" id="7881950">&#34;udp4&#34;</span><span class="op" id="7881956">,</span>&nbsp;<span class="ident" id="7881958">caddr</span><span class="op" id="7881963">:</span>&nbsp;<span class="string" id="7881965">&#34;127.0.0.1&#34;</span><span class="op" id="7881976">,</span>&nbsp;<span class="ident" id="7881978">ipv4map</span><span class="op" id="7881985">:</span>&nbsp;<span class="builtintype" id="7881987">true</span><span class="op" id="7881991">}</span><span class="op" id="7881992">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881996">{</span><span class="ident" id="7881997">snet</span><span class="op" id="7882001">:</span>&nbsp;<span class="string" id="7882003">&#34;udp&#34;</span><span class="op" id="7882008">,</span>&nbsp;<span class="ident" id="7882010">saddr</span><span class="op" id="7882015">:</span>&nbsp;<span class="string" id="7882017">&#34;127.0.0.1&#34;</span><span class="op" id="7882028">,</span>&nbsp;<span class="ident" id="7882030">cnet</span><span class="op" id="7882034">:</span>&nbsp;<span class="string" id="7882036">&#34;udp&#34;</span><span class="op" id="7882041">,</span>&nbsp;<span class="ident" id="7882043">caddr</span><span class="op" id="7882048">:</span>&nbsp;<span class="string" id="7882050">&#34;127.0.0.1&#34;</span><span class="op" id="7882061">}</span><span class="op" id="7882062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882065">{</span><span class="ident" id="7882066">snet</span><span class="op" id="7882070">:</span>&nbsp;<span class="string" id="7882072">&#34;udp&#34;</span><span class="op" id="7882077">,</span>&nbsp;<span class="ident" id="7882079">saddr</span><span class="op" id="7882084">:</span>&nbsp;<span class="string" id="7882086">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7882106">,</span>&nbsp;<span class="ident" id="7882108">cnet</span><span class="op" id="7882112">:</span>&nbsp;<span class="string" id="7882114">&#34;udp&#34;</span><span class="op" id="7882119">,</span>&nbsp;<span class="ident" id="7882121">caddr</span><span class="op" id="7882126">:</span>&nbsp;<span class="string" id="7882128">&#34;127.0.0.1&#34;</span><span class="op" id="7882139">}</span><span class="op" id="7882140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882143">{</span><span class="ident" id="7882144">snet</span><span class="op" id="7882148">:</span>&nbsp;<span class="string" id="7882150">&#34;udp&#34;</span><span class="op" id="7882155">,</span>&nbsp;<span class="ident" id="7882157">saddr</span><span class="op" id="7882162">:</span>&nbsp;<span class="string" id="7882164">&#34;[::1]&#34;</span><span class="op" id="7882171">,</span>&nbsp;<span class="ident" id="7882173">cnet</span><span class="op" id="7882177">:</span>&nbsp;<span class="string" id="7882179">&#34;udp&#34;</span><span class="op" id="7882184">,</span>&nbsp;<span class="ident" id="7882186">caddr</span><span class="op" id="7882191">:</span>&nbsp;<span class="string" id="7882193">&#34;[::1]&#34;</span><span class="op" id="7882200">,</span>&nbsp;<span class="ident" id="7882202">ipv6</span><span class="op" id="7882206">:</span>&nbsp;<span class="builtintype" id="7882208">true</span><span class="op" id="7882212">}</span><span class="op" id="7882213">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882217">{</span><span class="ident" id="7882218">snet</span><span class="op" id="7882222">:</span>&nbsp;<span class="string" id="7882224">&#34;udp4&#34;</span><span class="op" id="7882230">,</span>&nbsp;<span class="ident" id="7882232">saddr</span><span class="op" id="7882237">:</span>&nbsp;<span class="string" id="7882239">&#34;&#34;</span><span class="op" id="7882241">,</span>&nbsp;<span class="ident" id="7882243">cnet</span><span class="op" id="7882247">:</span>&nbsp;<span class="string" id="7882249">&#34;udp4&#34;</span><span class="op" id="7882255">,</span>&nbsp;<span class="ident" id="7882257">caddr</span><span class="op" id="7882262">:</span>&nbsp;<span class="string" id="7882264">&#34;127.0.0.1&#34;</span><span class="op" id="7882275">}</span><span class="op" id="7882276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882279">{</span><span class="ident" id="7882280">snet</span><span class="op" id="7882284">:</span>&nbsp;<span class="string" id="7882286">&#34;udp4&#34;</span><span class="op" id="7882292">,</span>&nbsp;<span class="ident" id="7882294">saddr</span><span class="op" id="7882299">:</span>&nbsp;<span class="string" id="7882301">&#34;0.0.0.0&#34;</span><span class="op" id="7882310">,</span>&nbsp;<span class="ident" id="7882312">cnet</span><span class="op" id="7882316">:</span>&nbsp;<span class="string" id="7882318">&#34;udp4&#34;</span><span class="op" id="7882324">,</span>&nbsp;<span class="ident" id="7882326">caddr</span><span class="op" id="7882331">:</span>&nbsp;<span class="string" id="7882333">&#34;127.0.0.1&#34;</span><span class="op" id="7882344">}</span><span class="op" id="7882345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882348">{</span><span class="ident" id="7882349">snet</span><span class="op" id="7882353">:</span>&nbsp;<span class="string" id="7882355">&#34;udp4&#34;</span><span class="op" id="7882361">,</span>&nbsp;<span class="ident" id="7882363">saddr</span><span class="op" id="7882368">:</span>&nbsp;<span class="string" id="7882370">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7882388">,</span>&nbsp;<span class="ident" id="7882390">cnet</span><span class="op" id="7882394">:</span>&nbsp;<span class="string" id="7882396">&#34;udp4&#34;</span><span class="op" id="7882402">,</span>&nbsp;<span class="ident" id="7882404">caddr</span><span class="op" id="7882409">:</span>&nbsp;<span class="string" id="7882411">&#34;127.0.0.1&#34;</span><span class="op" id="7882422">}</span><span class="op" id="7882423">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882427">{</span><span class="ident" id="7882428">snet</span><span class="op" id="7882432">:</span>&nbsp;<span class="string" id="7882434">&#34;udp4&#34;</span><span class="op" id="7882440">,</span>&nbsp;<span class="ident" id="7882442">saddr</span><span class="op" id="7882447">:</span>&nbsp;<span class="string" id="7882449">&#34;127.0.0.1&#34;</span><span class="op" id="7882460">,</span>&nbsp;<span class="ident" id="7882462">cnet</span><span class="op" id="7882466">:</span>&nbsp;<span class="string" id="7882468">&#34;udp4&#34;</span><span class="op" id="7882474">,</span>&nbsp;<span class="ident" id="7882476">caddr</span><span class="op" id="7882481">:</span>&nbsp;<span class="string" id="7882483">&#34;127.0.0.1&#34;</span><span class="op" id="7882494">}</span><span class="op" id="7882495">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882499">{</span><span class="ident" id="7882500">snet</span><span class="op" id="7882504">:</span>&nbsp;<span class="string" id="7882506">&#34;udp6&#34;</span><span class="op" id="7882512">,</span>&nbsp;<span class="ident" id="7882514">saddr</span><span class="op" id="7882519">:</span>&nbsp;<span class="string" id="7882521">&#34;&#34;</span><span class="op" id="7882523">,</span>&nbsp;<span class="ident" id="7882525">cnet</span><span class="op" id="7882529">:</span>&nbsp;<span class="string" id="7882531">&#34;udp6&#34;</span><span class="op" id="7882537">,</span>&nbsp;<span class="ident" id="7882539">caddr</span><span class="op" id="7882544">:</span>&nbsp;<span class="string" id="7882546">&#34;[::1]&#34;</span><span class="op" id="7882553">,</span>&nbsp;<span class="ident" id="7882555">ipv6</span><span class="op" id="7882559">:</span>&nbsp;<span class="builtintype" id="7882561">true</span><span class="op" id="7882565">}</span><span class="op" id="7882566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882569">{</span><span class="ident" id="7882570">snet</span><span class="op" id="7882574">:</span>&nbsp;<span class="string" id="7882576">&#34;udp6&#34;</span><span class="op" id="7882582">,</span>&nbsp;<span class="ident" id="7882584">saddr</span><span class="op" id="7882589">:</span>&nbsp;<span class="string" id="7882591">&#34;[::]&#34;</span><span class="op" id="7882597">,</span>&nbsp;<span class="ident" id="7882599">cnet</span><span class="op" id="7882603">:</span>&nbsp;<span class="string" id="7882605">&#34;udp6&#34;</span><span class="op" id="7882611">,</span>&nbsp;<span class="ident" id="7882613">caddr</span><span class="op" id="7882618">:</span>&nbsp;<span class="string" id="7882620">&#34;[::1]&#34;</span><span class="op" id="7882627">,</span>&nbsp;<span class="ident" id="7882629">ipv6</span><span class="op" id="7882633">:</span>&nbsp;<span class="builtintype" id="7882635">true</span><span class="op" id="7882639">}</span><span class="op" id="7882640">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882644">{</span><span class="ident" id="7882645">snet</span><span class="op" id="7882649">:</span>&nbsp;<span class="string" id="7882651">&#34;udp6&#34;</span><span class="op" id="7882657">,</span>&nbsp;<span class="ident" id="7882659">saddr</span><span class="op" id="7882664">:</span>&nbsp;<span class="string" id="7882666">&#34;[::1]&#34;</span><span class="op" id="7882673">,</span>&nbsp;<span class="ident" id="7882675">cnet</span><span class="op" id="7882679">:</span>&nbsp;<span class="string" id="7882681">&#34;udp6&#34;</span><span class="op" id="7882687">,</span>&nbsp;<span class="ident" id="7882689">caddr</span><span class="op" id="7882694">:</span>&nbsp;<span class="string" id="7882696">&#34;[::1]&#34;</span><span class="op" id="7882703">,</span>&nbsp;<span class="ident" id="7882705">ipv6</span><span class="op" id="7882709">:</span>&nbsp;<span class="builtintype" id="7882711">true</span><span class="op" id="7882715">}</span><span class="op" id="7882716">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882720">{</span><span class="ident" id="7882721">snet</span><span class="op" id="7882725">:</span>&nbsp;<span class="string" id="7882727">&#34;udp&#34;</span><span class="op" id="7882732">,</span>&nbsp;<span class="ident" id="7882734">saddr</span><span class="op" id="7882739">:</span>&nbsp;<span class="string" id="7882741">&#34;127.0.0.1&#34;</span><span class="op" id="7882752">,</span>&nbsp;<span class="ident" id="7882754">cnet</span><span class="op" id="7882758">:</span>&nbsp;<span class="string" id="7882760">&#34;udp&#34;</span><span class="op" id="7882765">,</span>&nbsp;<span class="ident" id="7882767">caddr</span><span class="op" id="7882772">:</span>&nbsp;<span class="string" id="7882774">&#34;127.0.0.1&#34;</span><span class="op" id="7882785">,</span>&nbsp;<span class="ident" id="7882787">dial</span><span class="op" id="7882791">:</span>&nbsp;<span class="builtintype" id="7882793">true</span><span class="op" id="7882797">}</span><span class="op" id="7882798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882801">{</span><span class="ident" id="7882802">snet</span><span class="op" id="7882806">:</span>&nbsp;<span class="string" id="7882808">&#34;udp&#34;</span><span class="op" id="7882813">,</span>&nbsp;<span class="ident" id="7882815">saddr</span><span class="op" id="7882820">:</span>&nbsp;<span class="string" id="7882822">&#34;127.0.0.1&#34;</span><span class="op" id="7882833">,</span>&nbsp;<span class="ident" id="7882835">cnet</span><span class="op" id="7882839">:</span>&nbsp;<span class="string" id="7882841">&#34;udp&#34;</span><span class="op" id="7882846">,</span>&nbsp;<span class="ident" id="7882848">caddr</span><span class="op" id="7882853">:</span>&nbsp;<span class="string" id="7882855">&#34;127.0.0.1&#34;</span><span class="op" id="7882866">,</span>&nbsp;<span class="ident" id="7882868">empty</span><span class="op" id="7882873">:</span>&nbsp;<span class="builtintype" id="7882875">true</span><span class="op" id="7882879">}</span><span class="op" id="7882880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882883">{</span><span class="ident" id="7882884">snet</span><span class="op" id="7882888">:</span>&nbsp;<span class="string" id="7882890">&#34;udp&#34;</span><span class="op" id="7882895">,</span>&nbsp;<span class="ident" id="7882897">saddr</span><span class="op" id="7882902">:</span>&nbsp;<span class="string" id="7882904">&#34;127.0.0.1&#34;</span><span class="op" id="7882915">,</span>&nbsp;<span class="ident" id="7882917">cnet</span><span class="op" id="7882921">:</span>&nbsp;<span class="string" id="7882923">&#34;udp&#34;</span><span class="op" id="7882928">,</span>&nbsp;<span class="ident" id="7882930">caddr</span><span class="op" id="7882935">:</span>&nbsp;<span class="string" id="7882937">&#34;127.0.0.1&#34;</span><span class="op" id="7882948">,</span>&nbsp;<span class="ident" id="7882950">dial</span><span class="op" id="7882954">:</span>&nbsp;<span class="builtintype" id="7882956">true</span><span class="op" id="7882960">,</span>&nbsp;<span class="ident" id="7882962">empty</span><span class="op" id="7882967">:</span>&nbsp;<span class="builtintype" id="7882969">true</span><span class="op" id="7882973">}</span><span class="op" id="7882974">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882978">{</span><span class="ident" id="7882979">snet</span><span class="op" id="7882983">:</span>&nbsp;<span class="string" id="7882985">&#34;udp&#34;</span><span class="op" id="7882990">,</span>&nbsp;<span class="ident" id="7882992">saddr</span><span class="op" id="7882997">:</span>&nbsp;<span class="string" id="7882999">&#34;[::1]&#34;</span><span class="op" id="7883006">,</span>&nbsp;<span class="ident" id="7883008">cnet</span><span class="op" id="7883012">:</span>&nbsp;<span class="string" id="7883014">&#34;udp&#34;</span><span class="op" id="7883019">,</span>&nbsp;<span class="ident" id="7883021">caddr</span><span class="op" id="7883026">:</span>&nbsp;<span class="string" id="7883028">&#34;[::1]&#34;</span><span class="op" id="7883035">,</span>&nbsp;<span class="ident" id="7883037">ipv6</span><span class="op" id="7883041">:</span>&nbsp;<span class="builtintype" id="7883043">true</span><span class="op" id="7883047">,</span>&nbsp;<span class="ident" id="7883049">dial</span><span class="op" id="7883053">:</span>&nbsp;<span class="builtintype" id="7883055">true</span><span class="op" id="7883059">}</span><span class="op" id="7883060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883063">{</span><span class="ident" id="7883064">snet</span><span class="op" id="7883068">:</span>&nbsp;<span class="string" id="7883070">&#34;udp&#34;</span><span class="op" id="7883075">,</span>&nbsp;<span class="ident" id="7883077">saddr</span><span class="op" id="7883082">:</span>&nbsp;<span class="string" id="7883084">&#34;[::1]&#34;</span><span class="op" id="7883091">,</span>&nbsp;<span class="ident" id="7883093">cnet</span><span class="op" id="7883097">:</span>&nbsp;<span class="string" id="7883099">&#34;udp&#34;</span><span class="op" id="7883104">,</span>&nbsp;<span class="ident" id="7883106">caddr</span><span class="op" id="7883111">:</span>&nbsp;<span class="string" id="7883113">&#34;[::1]&#34;</span><span class="op" id="7883120">,</span>&nbsp;<span class="ident" id="7883122">ipv6</span><span class="op" id="7883126">:</span>&nbsp;<span class="builtintype" id="7883128">true</span><span class="op" id="7883132">,</span>&nbsp;<span class="ident" id="7883134">empty</span><span class="op" id="7883139">:</span>&nbsp;<span class="builtintype" id="7883141">true</span><span class="op" id="7883145">}</span><span class="op" id="7883146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883149">{</span><span class="ident" id="7883150">snet</span><span class="op" id="7883154">:</span>&nbsp;<span class="string" id="7883156">&#34;udp&#34;</span><span class="op" id="7883161">,</span>&nbsp;<span class="ident" id="7883163">saddr</span><span class="op" id="7883168">:</span>&nbsp;<span class="string" id="7883170">&#34;[::1]&#34;</span><span class="op" id="7883177">,</span>&nbsp;<span class="ident" id="7883179">cnet</span><span class="op" id="7883183">:</span>&nbsp;<span class="string" id="7883185">&#34;udp&#34;</span><span class="op" id="7883190">,</span>&nbsp;<span class="ident" id="7883192">caddr</span><span class="op" id="7883197">:</span>&nbsp;<span class="string" id="7883199">&#34;[::1]&#34;</span><span class="op" id="7883206">,</span>&nbsp;<span class="ident" id="7883208">ipv6</span><span class="op" id="7883212">:</span>&nbsp;<span class="builtintype" id="7883214">true</span><span class="op" id="7883218">,</span>&nbsp;<span class="ident" id="7883220">dial</span><span class="op" id="7883224">:</span>&nbsp;<span class="builtintype" id="7883226">true</span><span class="op" id="7883230">,</span>&nbsp;<span class="ident" id="7883232">empty</span><span class="op" id="7883237">:</span>&nbsp;<span class="builtintype" id="7883239">true</span><span class="op" id="7883243">}</span><span class="op" id="7883244">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883248">{</span><span class="ident" id="7883249">snet</span><span class="op" id="7883253">:</span>&nbsp;<span class="string" id="7883255">&#34;unixgram&#34;</span><span class="op" id="7883265">,</span>&nbsp;<span class="ident" id="7883267">saddr</span><span class="op" id="7883272">:</span>&nbsp;<span class="ident" id="7883274">testUnixAddr</span><span class="op" id="7883286">(</span><span class="op" id="7883287">)</span><span class="op" id="7883288">,</span>&nbsp;<span class="ident" id="7883290">cnet</span><span class="op" id="7883294">:</span>&nbsp;<span class="string" id="7883296">&#34;unixgram&#34;</span><span class="op" id="7883306">,</span>&nbsp;<span class="ident" id="7883308">caddr</span><span class="op" id="7883313">:</span>&nbsp;<span class="ident" id="7883315">testUnixAddr</span><span class="op" id="7883327">(</span><span class="op" id="7883328">)</span><span class="op" id="7883329">}</span><span class="op" id="7883330">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883333">{</span><span class="ident" id="7883334">snet</span><span class="op" id="7883338">:</span>&nbsp;<span class="string" id="7883340">&#34;unixgram&#34;</span><span class="op" id="7883350">,</span>&nbsp;<span class="ident" id="7883352">saddr</span><span class="op" id="7883357">:</span>&nbsp;<span class="ident" id="7883359">testUnixAddr</span><span class="op" id="7883371">(</span><span class="op" id="7883372">)</span><span class="op" id="7883373">,</span>&nbsp;<span class="ident" id="7883375">cnet</span><span class="op" id="7883379">:</span>&nbsp;<span class="string" id="7883381">&#34;unixgram&#34;</span><span class="op" id="7883391">,</span>&nbsp;<span class="ident" id="7883393">caddr</span><span class="op" id="7883398">:</span>&nbsp;<span class="ident" id="7883400">testUnixAddr</span><span class="op" id="7883412">(</span><span class="op" id="7883413">)</span><span class="op" id="7883414">,</span>&nbsp;<span class="ident" id="7883416">dial</span><span class="op" id="7883420">:</span>&nbsp;<span class="builtintype" id="7883422">true</span><span class="op" id="7883426">}</span><span class="op" id="7883427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883430">{</span><span class="ident" id="7883431">snet</span><span class="op" id="7883435">:</span>&nbsp;<span class="string" id="7883437">&#34;unixgram&#34;</span><span class="op" id="7883447">,</span>&nbsp;<span class="ident" id="7883449">saddr</span><span class="op" id="7883454">:</span>&nbsp;<span class="ident" id="7883456">testUnixAddr</span><span class="op" id="7883468">(</span><span class="op" id="7883469">)</span><span class="op" id="7883470">,</span>&nbsp;<span class="ident" id="7883472">cnet</span><span class="op" id="7883476">:</span>&nbsp;<span class="string" id="7883478">&#34;unixgram&#34;</span><span class="op" id="7883488">,</span>&nbsp;<span class="ident" id="7883490">caddr</span><span class="op" id="7883495">:</span>&nbsp;<span class="ident" id="7883497">testUnixAddr</span><span class="op" id="7883509">(</span><span class="op" id="7883510">)</span><span class="op" id="7883511">,</span>&nbsp;<span class="ident" id="7883513">empty</span><span class="op" id="7883518">:</span>&nbsp;<span class="builtintype" id="7883520">true</span><span class="op" id="7883524">}</span><span class="op" id="7883525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883528">{</span><span class="ident" id="7883529">snet</span><span class="op" id="7883533">:</span>&nbsp;<span class="string" id="7883535">&#34;unixgram&#34;</span><span class="op" id="7883545">,</span>&nbsp;<span class="ident" id="7883547">saddr</span><span class="op" id="7883552">:</span>&nbsp;<span class="ident" id="7883554">testUnixAddr</span><span class="op" id="7883566">(</span><span class="op" id="7883567">)</span><span class="op" id="7883568">,</span>&nbsp;<span class="ident" id="7883570">cnet</span><span class="op" id="7883574">:</span>&nbsp;<span class="string" id="7883576">&#34;unixgram&#34;</span><span class="op" id="7883586">,</span>&nbsp;<span class="ident" id="7883588">caddr</span><span class="op" id="7883593">:</span>&nbsp;<span class="ident" id="7883595">testUnixAddr</span><span class="op" id="7883607">(</span><span class="op" id="7883608">)</span><span class="op" id="7883609">,</span>&nbsp;<span class="ident" id="7883611">dial</span><span class="op" id="7883615">:</span>&nbsp;<span class="builtintype" id="7883617">true</span><span class="op" id="7883621">,</span>&nbsp;<span class="ident" id="7883623">empty</span><span class="op" id="7883628">:</span>&nbsp;<span class="builtintype" id="7883630">true</span><span class="op" id="7883634">}</span><span class="op" id="7883635">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883639">{</span><span class="ident" id="7883640">snet</span><span class="op" id="7883644">:</span>&nbsp;<span class="string" id="7883646">&#34;unixgram&#34;</span><span class="op" id="7883656">,</span>&nbsp;<span class="ident" id="7883658">saddr</span><span class="op" id="7883663">:</span>&nbsp;<span class="string" id="7883665">&#34;@gotest6/net&#34;</span><span class="op" id="7883679">,</span>&nbsp;<span class="ident" id="7883681">cnet</span><span class="op" id="7883685">:</span>&nbsp;<span class="string" id="7883687">&#34;unixgram&#34;</span><span class="op" id="7883697">,</span>&nbsp;<span class="ident" id="7883699">caddr</span><span class="op" id="7883704">:</span>&nbsp;<span class="string" id="7883706">&#34;@gotest6/net.local&#34;</span><span class="op" id="7883726">,</span>&nbsp;<span class="ident" id="7883728">linuxOnly</span><span class="op" id="7883737">:</span>&nbsp;<span class="builtintype" id="7883739">true</span><span class="op" id="7883743">}</span><span class="op" id="7883744">,</span><br>
<span class="lineno">310</span><span class="op" id="7883746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7883749">func</span>&nbsp;<span class="ident" id="7883754">TestDatagramPacketConnServer</span><span class="op" id="7883782">(</span><span class="ident" id="7883783">t</span>&nbsp;<span class="op" id="7883785">*</span><span class="ident" id="7883786">testing</span><span class="op" id="7883793">.</span><span class="ident" id="7883794">T</span><span class="op" id="7883795">)</span>&nbsp;<span class="op" id="7883797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883800">if</span>&nbsp;<span class="op" id="7883803">!</span><span class="op" id="7883804">*</span><span class="ident" id="7883805">testDatagram</span>&nbsp;<span class="op" id="7883818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883822">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883834">for</span>&nbsp;<span class="ident" id="7883838">_</span><span class="op" id="7883839">,</span>&nbsp;<span class="ident" id="7883841">tt</span>&nbsp;<span class="op" id="7883844">:=</span>&nbsp;<span class="keyword" id="7883847">range</span>&nbsp;<span class="ident" id="7883853">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7883883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883887">if</span>&nbsp;<span class="ident" id="7883890">skipServerTest</span><span class="op" id="7883904">(</span><span class="ident" id="7883905">tt</span><span class="op" id="7883907">.</span><span class="ident" id="7883908">snet</span><span class="op" id="7883912">,</span>&nbsp;<span class="string" id="7883914">&#34;unixgram&#34;</span><span class="op" id="7883924">,</span>&nbsp;<span class="ident" id="7883926">tt</span><span class="op" id="7883928">.</span><span class="ident" id="7883929">saddr</span><span class="op" id="7883934">,</span>&nbsp;<span class="ident" id="7883936">tt</span><span class="op" id="7883938">.</span><span class="ident" id="7883939">ipv6</span><span class="op" id="7883943">,</span>&nbsp;<span class="ident" id="7883945">tt</span><span class="op" id="7883947">.</span><span class="ident" id="7883948">ipv4map</span><span class="op" id="7883955">,</span>&nbsp;<span class="ident" id="7883957">tt</span><span class="op" id="7883959">.</span><span class="ident" id="7883960">linuxOnly</span><span class="op" id="7883969">)</span>&nbsp;<span class="op" id="7883971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883976">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883992">listening</span>&nbsp;<span class="op" id="7884002">:=</span>&nbsp;<span class="builtinfunc" id="7884005">make</span><span class="op" id="7884009">(</span><span class="keyword" id="7884010">chan</span>&nbsp;<span class="builtintype" id="7884015">string</span><span class="op" id="7884021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884025">done</span>&nbsp;<span class="op" id="7884030">:=</span>&nbsp;<span class="builtinfunc" id="7884033">make</span><span class="op" id="7884037">(</span><span class="keyword" id="7884038">chan</span>&nbsp;<span class="builtintype" id="7884043">int</span><span class="op" id="7884046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884050">switch</span>&nbsp;<span class="ident" id="7884057">tt</span><span class="op" id="7884059">.</span><span class="ident" id="7884060">snet</span>&nbsp;<span class="op" id="7884065">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884069">case</span>&nbsp;<span class="string" id="7884074">&#34;udp&#34;</span><span class="op" id="7884079">,</span>&nbsp;<span class="string" id="7884081">&#34;udp4&#34;</span><span class="op" id="7884087">,</span>&nbsp;<span class="string" id="7884089">&#34;udp6&#34;</span><span class="op" id="7884095">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884100">tt</span><span class="op" id="7884102">.</span><span class="ident" id="7884103">saddr</span>&nbsp;<span class="op" id="7884109">+=</span>&nbsp;<span class="string" id="7884112">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884119">case</span>&nbsp;<span class="string" id="7884124">&#34;unixgram&#34;</span><span class="op" id="7884134">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884139">os</span><span class="op" id="7884141">.</span><span class="ident" id="7884142">Remove</span><span class="op" id="7884148">(</span><span class="ident" id="7884149">tt</span><span class="op" id="7884151">.</span><span class="ident" id="7884152">saddr</span><span class="op" id="7884157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884162">os</span><span class="op" id="7884164">.</span><span class="ident" id="7884165">Remove</span><span class="op" id="7884171">(</span><span class="ident" id="7884172">tt</span><span class="op" id="7884174">.</span><span class="ident" id="7884175">caddr</span><span class="op" id="7884180">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884189">go</span>&nbsp;<span class="ident" id="7884192">runDatagramPacketConnServer</span><span class="op" id="7884219">(</span><span class="ident" id="7884220">t</span><span class="op" id="7884221">,</span>&nbsp;<span class="ident" id="7884223">tt</span><span class="op" id="7884225">.</span><span class="ident" id="7884226">snet</span><span class="op" id="7884230">,</span>&nbsp;<span class="ident" id="7884232">tt</span><span class="op" id="7884234">.</span><span class="ident" id="7884235">saddr</span><span class="op" id="7884240">,</span>&nbsp;<span class="ident" id="7884242">listening</span><span class="op" id="7884251">,</span>&nbsp;<span class="ident" id="7884253">done</span><span class="op" id="7884257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884261">taddr</span>&nbsp;<span class="op" id="7884267">:=</span>&nbsp;<span class="op" id="7884270">&lt;-</span><span class="ident" id="7884272">listening</span>&nbsp;<span class="comment" id="7884282">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884313">switch</span>&nbsp;<span class="ident" id="7884320">tt</span><span class="op" id="7884322">.</span><span class="ident" id="7884323">cnet</span>&nbsp;<span class="op" id="7884328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884332">case</span>&nbsp;<span class="string" id="7884337">&#34;udp&#34;</span><span class="op" id="7884342">,</span>&nbsp;<span class="string" id="7884344">&#34;udp4&#34;</span><span class="op" id="7884350">,</span>&nbsp;<span class="string" id="7884352">&#34;udp6&#34;</span><span class="op" id="7884358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884363">_</span><span class="op" id="7884364">,</span>&nbsp;<span class="ident" id="7884366">port</span><span class="op" id="7884370">,</span>&nbsp;<span class="ident" id="7884372">err</span>&nbsp;<span class="op" id="7884376">:=</span>&nbsp;<span class="ident" id="7884379">SplitHostPort</span><span class="op" id="7884392">(</span><span class="ident" id="7884393">taddr</span><span class="op" id="7884398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884403">if</span>&nbsp;<span class="ident" id="7884406">err</span>&nbsp;<span class="op" id="7884410">!=</span>&nbsp;<span class="ident" id="7884413">nil</span>&nbsp;<span class="op" id="7884417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884423">t</span><span class="op" id="7884424">.</span><span class="ident" id="7884425">Fatalf</span><span class="op" id="7884431">(</span><span class="string" id="7884432">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7884462">,</span>&nbsp;<span class="ident" id="7884464">taddr</span><span class="op" id="7884469">,</span>&nbsp;<span class="ident" id="7884471">err</span><span class="op" id="7884474">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884484">taddr</span>&nbsp;<span class="op" id="7884490">=</span>&nbsp;<span class="ident" id="7884492">tt</span><span class="op" id="7884494">.</span><span class="ident" id="7884495">caddr</span>&nbsp;<span class="op" id="7884501">+</span>&nbsp;<span class="string" id="7884503">&#34;:&#34;</span>&nbsp;<span class="op" id="7884507">+</span>&nbsp;<span class="ident" id="7884509">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884517">tt</span><span class="op" id="7884519">.</span><span class="ident" id="7884520">caddr</span>&nbsp;<span class="op" id="7884526">+=</span>&nbsp;<span class="string" id="7884529">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884540">if</span>&nbsp;<span class="ident" id="7884543">tt</span><span class="op" id="7884545">.</span><span class="ident" id="7884546">dial</span>&nbsp;<span class="op" id="7884551">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884556">runDatagramConnClient</span><span class="op" id="7884577">(</span><span class="ident" id="7884578">t</span><span class="op" id="7884579">,</span>&nbsp;<span class="ident" id="7884581">tt</span><span class="op" id="7884583">.</span><span class="ident" id="7884584">cnet</span><span class="op" id="7884588">,</span>&nbsp;<span class="ident" id="7884590">tt</span><span class="op" id="7884592">.</span><span class="ident" id="7884593">caddr</span><span class="op" id="7884598">,</span>&nbsp;<span class="ident" id="7884600">taddr</span><span class="op" id="7884605">,</span>&nbsp;<span class="ident" id="7884607">tt</span><span class="op" id="7884609">.</span><span class="ident" id="7884610">empty</span><span class="op" id="7884615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884619">}</span>&nbsp;<span class="keyword" id="7884621">else</span>&nbsp;<span class="op" id="7884626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884631">runDatagramPacketConnClient</span><span class="op" id="7884658">(</span><span class="ident" id="7884659">t</span><span class="op" id="7884660">,</span>&nbsp;<span class="ident" id="7884662">tt</span><span class="op" id="7884664">.</span><span class="ident" id="7884665">cnet</span><span class="op" id="7884669">,</span>&nbsp;<span class="ident" id="7884671">tt</span><span class="op" id="7884673">.</span><span class="ident" id="7884674">caddr</span><span class="op" id="7884679">,</span>&nbsp;<span class="ident" id="7884681">taddr</span><span class="op" id="7884686">,</span>&nbsp;<span class="ident" id="7884688">tt</span><span class="op" id="7884690">.</span><span class="ident" id="7884691">empty</span><span class="op" id="7884696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884704">&lt;-</span><span class="ident" id="7884706">done</span>&nbsp;<span class="comment" id="7884711">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884736">&lt;-</span><span class="ident" id="7884738">done</span>&nbsp;<span class="comment" id="7884743">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884774">switch</span>&nbsp;<span class="ident" id="7884781">tt</span><span class="op" id="7884783">.</span><span class="ident" id="7884784">snet</span>&nbsp;<span class="op" id="7884789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884793">case</span>&nbsp;<span class="string" id="7884798">&#34;unixgram&#34;</span><span class="op" id="7884808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884813">os</span><span class="op" id="7884815">.</span><span class="ident" id="7884816">Remove</span><span class="op" id="7884822">(</span><span class="ident" id="7884823">tt</span><span class="op" id="7884825">.</span><span class="ident" id="7884826">saddr</span><span class="op" id="7884831">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884836">os</span><span class="op" id="7884838">.</span><span class="ident" id="7884839">Remove</span><span class="op" id="7884845">(</span><span class="ident" id="7884846">tt</span><span class="op" id="7884848">.</span><span class="ident" id="7884849">caddr</span><span class="op" id="7884854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884861">}</span><br>
<span class="lineno"></span><span class="op" id="7884863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="7884866">func</span>&nbsp;<span class="ident" id="7884871">runDatagramPacketConnServer</span><span class="op" id="7884898">(</span><span class="ident" id="7884899">t</span>&nbsp;<span class="op" id="7884901">*</span><span class="ident" id="7884902">testing</span><span class="op" id="7884909">.</span><span class="ident" id="7884910">T</span><span class="op" id="7884911">,</span>&nbsp;<span class="ident" id="7884913">net</span><span class="op" id="7884916">,</span>&nbsp;<span class="ident" id="7884918">laddr</span>&nbsp;<span class="builtintype" id="7884924">string</span><span class="op" id="7884930">,</span>&nbsp;<span class="ident" id="7884932">listening</span>&nbsp;<span class="keyword" id="7884942">chan</span><span class="op" id="7884946">&lt;-</span>&nbsp;<span class="builtintype" id="7884949">string</span><span class="op" id="7884955">,</span>&nbsp;<span class="ident" id="7884957">done</span>&nbsp;<span class="keyword" id="7884962">chan</span><span class="op" id="7884966">&lt;-</span>&nbsp;<span class="builtintype" id="7884969">int</span><span class="op" id="7884972">)</span>&nbsp;<span class="op" id="7884974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884977">c</span><span class="op" id="7884978">,</span>&nbsp;<span class="ident" id="7884980">err</span>&nbsp;<span class="op" id="7884984">:=</span>&nbsp;<span class="ident" id="7884987">ListenPacket</span><span class="op" id="7884999">(</span><span class="ident" id="7885000">net</span><span class="op" id="7885003">,</span>&nbsp;<span class="ident" id="7885005">laddr</span><span class="op" id="7885010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885013">if</span>&nbsp;<span class="ident" id="7885016">err</span>&nbsp;<span class="op" id="7885020">!=</span>&nbsp;<span class="ident" id="7885023">nil</span>&nbsp;<span class="op" id="7885027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885031">t</span><span class="op" id="7885032">.</span><span class="ident" id="7885033">Errorf</span><span class="op" id="7885039">(</span><span class="string" id="7885040">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7885073">,</span>&nbsp;<span class="ident" id="7885075">net</span><span class="op" id="7885078">,</span>&nbsp;<span class="ident" id="7885080">laddr</span><span class="op" id="7885085">,</span>&nbsp;<span class="ident" id="7885087">err</span><span class="op" id="7885090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885094">listening</span>&nbsp;<span class="op" id="7885104">&lt;-</span>&nbsp;<span class="string" id="7885107">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885117">done</span>&nbsp;<span class="op" id="7885122">&lt;-</span>&nbsp;<span class="num" id="7885125">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885129">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885140">defer</span>&nbsp;<span class="ident" id="7885146">c</span><span class="op" id="7885147">.</span><span class="ident" id="7885148">Close</span><span class="op" id="7885153">(</span><span class="op" id="7885154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885157">listening</span>&nbsp;<span class="op" id="7885167">&lt;-</span>&nbsp;<span class="ident" id="7885170">c</span><span class="op" id="7885171">.</span><span class="ident" id="7885172">LocalAddr</span><span class="op" id="7885181">(</span><span class="op" id="7885182">)</span><span class="op" id="7885183">.</span><span class="ident" id="7885184">String</span><span class="op" id="7885190">(</span><span class="op" id="7885191">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885195">buf</span>&nbsp;<span class="op" id="7885199">:=</span>&nbsp;<span class="builtinfunc" id="7885202">make</span><span class="op" id="7885206">(</span><span class="op" id="7885207">[</span><span class="op" id="7885208">]</span><span class="builtintype" id="7885209">byte</span><span class="op" id="7885213">,</span>&nbsp;<span class="num" id="7885215">1024</span><span class="op" id="7885219">)</span><br>
<span class="lineno"></span><span class="ident" id="7885221">run</span><span class="op" id="7885224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885227">for</span>&nbsp;<span class="op" id="7885231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885235">c</span><span class="op" id="7885236">.</span><span class="ident" id="7885237">SetReadDeadline</span><span class="op" id="7885252">(</span><span class="ident" id="7885253">time</span><span class="op" id="7885257">.</span><span class="ident" id="7885258">Now</span><span class="op" id="7885261">(</span><span class="op" id="7885262">)</span><span class="op" id="7885263">.</span><span class="ident" id="7885264">Add</span><span class="op" id="7885267">(</span><span class="num" id="7885268">10</span>&nbsp;<span class="op" id="7885271">*</span>&nbsp;<span class="ident" id="7885273">time</span><span class="op" id="7885277">.</span><span class="ident" id="7885278">Millisecond</span><span class="op" id="7885289">)</span><span class="op" id="7885290">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885294">n</span><span class="op" id="7885295">,</span>&nbsp;<span class="ident" id="7885297">ra</span><span class="op" id="7885299">,</span>&nbsp;<span class="ident" id="7885301">err</span>&nbsp;<span class="op" id="7885305">:=</span>&nbsp;<span class="ident" id="7885308">c</span><span class="op" id="7885309">.</span><span class="ident" id="7885310">ReadFrom</span><span class="op" id="7885318">(</span><span class="ident" id="7885319">buf</span><span class="op" id="7885322">[</span><span class="num" id="7885323">0</span><span class="op" id="7885324">:</span><span class="op" id="7885325">]</span><span class="op" id="7885326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885330">if</span>&nbsp;<span class="ident" id="7885333">nerr</span><span class="op" id="7885337">,</span>&nbsp;<span class="ident" id="7885339">ok</span>&nbsp;<span class="op" id="7885342">:=</span>&nbsp;<span class="ident" id="7885345">err</span><span class="op" id="7885348">.</span><span class="op" id="7885349">(</span><span class="ident" id="7885350">Error</span><span class="op" id="7885355">)</span><span class="op" id="7885356">;</span>&nbsp;<span class="ident" id="7885358">ok</span>&nbsp;<span class="op" id="7885361">&amp;&amp;</span>&nbsp;<span class="ident" id="7885364">nerr</span><span class="op" id="7885368">.</span><span class="ident" id="7885369">Timeout</span><span class="op" id="7885376">(</span><span class="op" id="7885377">)</span>&nbsp;<span class="op" id="7885379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885384">select</span>&nbsp;<span class="op" id="7885391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885396">case</span>&nbsp;<span class="ident" id="7885401">done</span>&nbsp;<span class="op" id="7885406">&lt;-</span>&nbsp;<span class="num" id="7885409">1</span><span class="op" id="7885410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885416">break</span>&nbsp;<span class="ident" id="7885422">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885429">default</span><span class="op" id="7885436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885442">continue</span>&nbsp;<span class="ident" id="7885451">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885466">if</span>&nbsp;<span class="ident" id="7885469">err</span>&nbsp;<span class="op" id="7885473">!=</span>&nbsp;<span class="ident" id="7885476">nil</span>&nbsp;<span class="op" id="7885480">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885485">break</span>&nbsp;<span class="ident" id="7885491">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885501">if</span>&nbsp;<span class="ident" id="7885504">_</span><span class="op" id="7885505">,</span>&nbsp;<span class="ident" id="7885507">err</span>&nbsp;<span class="op" id="7885511">=</span>&nbsp;<span class="ident" id="7885513">c</span><span class="op" id="7885514">.</span><span class="ident" id="7885515">WriteTo</span><span class="op" id="7885522">(</span><span class="ident" id="7885523">buf</span><span class="op" id="7885526">[</span><span class="num" id="7885527">0</span><span class="op" id="7885528">:</span><span class="ident" id="7885529">n</span><span class="op" id="7885530">]</span><span class="op" id="7885531">,</span>&nbsp;<span class="ident" id="7885533">ra</span><span class="op" id="7885535">)</span><span class="op" id="7885536">;</span>&nbsp;<span class="ident" id="7885538">err</span>&nbsp;<span class="op" id="7885542">!=</span>&nbsp;<span class="ident" id="7885545">nil</span>&nbsp;<span class="op" id="7885549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885554">t</span><span class="op" id="7885555">.</span><span class="ident" id="7885556">Errorf</span><span class="op" id="7885562">(</span><span class="string" id="7885563">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7885587">,</span>&nbsp;<span class="ident" id="7885589">ra</span><span class="op" id="7885591">,</span>&nbsp;<span class="ident" id="7885593">err</span><span class="op" id="7885596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885601">break</span>&nbsp;<span class="ident" id="7885607">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885619">done</span>&nbsp;<span class="op" id="7885624">&lt;-</span>&nbsp;<span class="num" id="7885627">1</span><br>
<span class="lineno"></span><span class="op" id="7885629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="7885632">func</span>&nbsp;<span class="ident" id="7885637">runDatagramConnClient</span><span class="op" id="7885658">(</span><span class="ident" id="7885659">t</span>&nbsp;<span class="op" id="7885661">*</span><span class="ident" id="7885662">testing</span><span class="op" id="7885669">.</span><span class="ident" id="7885670">T</span><span class="op" id="7885671">,</span>&nbsp;<span class="ident" id="7885673">net</span><span class="op" id="7885676">,</span>&nbsp;<span class="ident" id="7885678">laddr</span><span class="op" id="7885683">,</span>&nbsp;<span class="ident" id="7885685">taddr</span>&nbsp;<span class="builtintype" id="7885691">string</span><span class="op" id="7885697">,</span>&nbsp;<span class="ident" id="7885699">isEmpty</span>&nbsp;<span class="builtintype" id="7885707">bool</span><span class="op" id="7885711">)</span>&nbsp;<span class="op" id="7885713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885716">var</span>&nbsp;<span class="ident" id="7885720">c</span>&nbsp;<span class="ident" id="7885722">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885728">var</span>&nbsp;<span class="ident" id="7885732">err</span>&nbsp;<span class="builtintype" id="7885736">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885743">switch</span>&nbsp;<span class="ident" id="7885750">net</span>&nbsp;<span class="op" id="7885754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885757">case</span>&nbsp;<span class="string" id="7885762">&#34;udp&#34;</span><span class="op" id="7885767">,</span>&nbsp;<span class="string" id="7885769">&#34;udp4&#34;</span><span class="op" id="7885775">,</span>&nbsp;<span class="string" id="7885777">&#34;udp6&#34;</span><span class="op" id="7885783">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885787">c</span><span class="op" id="7885788">,</span>&nbsp;<span class="ident" id="7885790">err</span>&nbsp;<span class="op" id="7885794">=</span>&nbsp;<span class="ident" id="7885796">Dial</span><span class="op" id="7885800">(</span><span class="ident" id="7885801">net</span><span class="op" id="7885804">,</span>&nbsp;<span class="ident" id="7885806">taddr</span><span class="op" id="7885811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885815">if</span>&nbsp;<span class="ident" id="7885818">err</span>&nbsp;<span class="op" id="7885822">!=</span>&nbsp;<span class="ident" id="7885825">nil</span>&nbsp;<span class="op" id="7885829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885834">t</span><span class="op" id="7885835">.</span><span class="ident" id="7885836">Fatalf</span><span class="op" id="7885842">(</span><span class="string" id="7885843">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7885868">,</span>&nbsp;<span class="ident" id="7885870">net</span><span class="op" id="7885873">,</span>&nbsp;<span class="ident" id="7885875">taddr</span><span class="op" id="7885880">,</span>&nbsp;<span class="ident" id="7885882">err</span><span class="op" id="7885885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885892">case</span>&nbsp;<span class="string" id="7885897">&#34;unixgram&#34;</span><span class="op" id="7885907">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885911">c</span><span class="op" id="7885912">,</span>&nbsp;<span class="ident" id="7885914">err</span>&nbsp;<span class="op" id="7885918">=</span>&nbsp;<span class="ident" id="7885920">DialUnix</span><span class="op" id="7885928">(</span><span class="ident" id="7885929">net</span><span class="op" id="7885932">,</span>&nbsp;<span class="op" id="7885934">&amp;</span><span class="ident" id="7885935">UnixAddr</span><span class="op" id="7885943">{</span><span class="ident" id="7885944">Name</span><span class="op" id="7885948">:</span>&nbsp;<span class="ident" id="7885950">laddr</span><span class="op" id="7885955">,</span>&nbsp;<span class="ident" id="7885957">Net</span><span class="op" id="7885960">:</span>&nbsp;<span class="ident" id="7885962">net</span><span class="op" id="7885965">}</span><span class="op" id="7885966">,</span>&nbsp;<span class="op" id="7885968">&amp;</span><span class="ident" id="7885969">UnixAddr</span><span class="op" id="7885977">{</span><span class="ident" id="7885978">Name</span><span class="op" id="7885982">:</span>&nbsp;<span class="ident" id="7885984">taddr</span><span class="op" id="7885989">,</span>&nbsp;<span class="ident" id="7885991">Net</span><span class="op" id="7885994">:</span>&nbsp;<span class="ident" id="7885996">net</span><span class="op" id="7885999">}</span><span class="op" id="7886000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886004">if</span>&nbsp;<span class="ident" id="7886007">err</span>&nbsp;<span class="op" id="7886011">!=</span>&nbsp;<span class="ident" id="7886014">nil</span>&nbsp;<span class="op" id="7886018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886023">t</span><span class="op" id="7886024">.</span><span class="ident" id="7886025">Fatalf</span><span class="op" id="7886031">(</span><span class="string" id="7886032">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7886067">,</span>&nbsp;<span class="ident" id="7886069">net</span><span class="op" id="7886072">,</span>&nbsp;<span class="ident" id="7886074">laddr</span><span class="op" id="7886079">,</span>&nbsp;<span class="ident" id="7886081">taddr</span><span class="op" id="7886086">,</span>&nbsp;<span class="ident" id="7886088">err</span><span class="op" id="7886091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886098">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886101">defer</span>&nbsp;<span class="ident" id="7886107">c</span><span class="op" id="7886108">.</span><span class="ident" id="7886109">Close</span><span class="op" id="7886114">(</span><span class="op" id="7886115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886118">c</span><span class="op" id="7886119">.</span><span class="ident" id="7886120">SetReadDeadline</span><span class="op" id="7886135">(</span><span class="ident" id="7886136">time</span><span class="op" id="7886140">.</span><span class="ident" id="7886141">Now</span><span class="op" id="7886144">(</span><span class="op" id="7886145">)</span><span class="op" id="7886146">.</span><span class="ident" id="7886147">Add</span><span class="op" id="7886150">(</span><span class="num" id="7886151">1</span>&nbsp;<span class="op" id="7886153">*</span>&nbsp;<span class="ident" id="7886155">time</span><span class="op" id="7886159">.</span><span class="ident" id="7886160">Second</span><span class="op" id="7886166">)</span><span class="op" id="7886167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886171">var</span>&nbsp;<span class="ident" id="7886175">wb</span>&nbsp;<span class="op" id="7886178">[</span><span class="op" id="7886179">]</span><span class="builtintype" id="7886180">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886186">if</span>&nbsp;<span class="op" id="7886189">!</span><span class="ident" id="7886190">isEmpty</span>&nbsp;<span class="op" id="7886198">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886202">wb</span>&nbsp;<span class="op" id="7886205">=</span>&nbsp;<span class="op" id="7886207">[</span><span class="op" id="7886208">]</span><span class="builtintype" id="7886209">byte</span><span class="op" id="7886213">(</span><span class="string" id="7886214">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7886244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886250">if</span>&nbsp;<span class="ident" id="7886253">n</span><span class="op" id="7886254">,</span>&nbsp;<span class="ident" id="7886256">err</span>&nbsp;<span class="op" id="7886260">:=</span>&nbsp;<span class="ident" id="7886263">c</span><span class="op" id="7886264">.</span><span class="ident" id="7886265">Write</span><span class="op" id="7886270">(</span><span class="ident" id="7886271">wb</span><span class="op" id="7886273">[</span><span class="num" id="7886274">0</span><span class="op" id="7886275">:</span><span class="op" id="7886276">]</span><span class="op" id="7886277">)</span><span class="op" id="7886278">;</span>&nbsp;<span class="ident" id="7886280">err</span>&nbsp;<span class="op" id="7886284">!=</span>&nbsp;<span class="ident" id="7886287">nil</span>&nbsp;<span class="op" id="7886291">||</span>&nbsp;<span class="ident" id="7886294">n</span>&nbsp;<span class="op" id="7886296">!=</span>&nbsp;<span class="builtinfunc" id="7886299">len</span><span class="op" id="7886302">(</span><span class="ident" id="7886303">wb</span><span class="op" id="7886305">)</span>&nbsp;<span class="op" id="7886307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886311">t</span><span class="op" id="7886312">.</span><span class="ident" id="7886313">Fatalf</span><span class="op" id="7886319">(</span><span class="string" id="7886320">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7886358">,</span>&nbsp;<span class="ident" id="7886360">n</span><span class="op" id="7886361">,</span>&nbsp;<span class="ident" id="7886363">err</span><span class="op" id="7886366">,</span>&nbsp;<span class="builtinfunc" id="7886368">len</span><span class="op" id="7886371">(</span><span class="ident" id="7886372">wb</span><span class="op" id="7886374">)</span><span class="op" id="7886375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886378">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886382">rb</span>&nbsp;<span class="op" id="7886385">:=</span>&nbsp;<span class="builtinfunc" id="7886388">make</span><span class="op" id="7886392">(</span><span class="op" id="7886393">[</span><span class="op" id="7886394">]</span><span class="builtintype" id="7886395">byte</span><span class="op" id="7886399">,</span>&nbsp;<span class="num" id="7886401">1024</span><span class="op" id="7886405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886408">if</span>&nbsp;<span class="ident" id="7886411">n</span><span class="op" id="7886412">,</span>&nbsp;<span class="ident" id="7886414">err</span>&nbsp;<span class="op" id="7886418">:=</span>&nbsp;<span class="ident" id="7886421">c</span><span class="op" id="7886422">.</span><span class="ident" id="7886423">Read</span><span class="op" id="7886427">(</span><span class="ident" id="7886428">rb</span><span class="op" id="7886430">[</span><span class="num" id="7886431">0</span><span class="op" id="7886432">:</span><span class="op" id="7886433">]</span><span class="op" id="7886434">)</span><span class="op" id="7886435">;</span>&nbsp;<span class="ident" id="7886437">err</span>&nbsp;<span class="op" id="7886441">!=</span>&nbsp;<span class="ident" id="7886444">nil</span>&nbsp;<span class="op" id="7886448">||</span>&nbsp;<span class="ident" id="7886451">n</span>&nbsp;<span class="op" id="7886453">!=</span>&nbsp;<span class="builtinfunc" id="7886456">len</span><span class="op" id="7886459">(</span><span class="ident" id="7886460">wb</span><span class="op" id="7886462">)</span>&nbsp;<span class="op" id="7886464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886468">t</span><span class="op" id="7886469">.</span><span class="ident" id="7886470">Fatalf</span><span class="op" id="7886476">(</span><span class="string" id="7886477">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7886514">,</span>&nbsp;<span class="ident" id="7886516">n</span><span class="op" id="7886517">,</span>&nbsp;<span class="ident" id="7886519">err</span><span class="op" id="7886522">,</span>&nbsp;<span class="builtinfunc" id="7886524">len</span><span class="op" id="7886527">(</span><span class="ident" id="7886528">wb</span><span class="op" id="7886530">)</span><span class="op" id="7886531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886534">}</span><br>
<span class="lineno">425</span><span class="op" id="7886536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886539">func</span>&nbsp;<span class="ident" id="7886544">runDatagramPacketConnClient</span><span class="op" id="7886571">(</span><span class="ident" id="7886572">t</span>&nbsp;<span class="op" id="7886574">*</span><span class="ident" id="7886575">testing</span><span class="op" id="7886582">.</span><span class="ident" id="7886583">T</span><span class="op" id="7886584">,</span>&nbsp;<span class="ident" id="7886586">net</span><span class="op" id="7886589">,</span>&nbsp;<span class="ident" id="7886591">laddr</span><span class="op" id="7886596">,</span>&nbsp;<span class="ident" id="7886598">taddr</span>&nbsp;<span class="builtintype" id="7886604">string</span><span class="op" id="7886610">,</span>&nbsp;<span class="ident" id="7886612">isEmpty</span>&nbsp;<span class="builtintype" id="7886620">bool</span><span class="op" id="7886624">)</span>&nbsp;<span class="op" id="7886626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886629">var</span>&nbsp;<span class="ident" id="7886633">ra</span>&nbsp;<span class="ident" id="7886636">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886642">var</span>&nbsp;<span class="ident" id="7886646">err</span>&nbsp;<span class="builtintype" id="7886650">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886657">switch</span>&nbsp;<span class="ident" id="7886664">net</span>&nbsp;<span class="op" id="7886668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886671">case</span>&nbsp;<span class="string" id="7886676">&#34;udp&#34;</span><span class="op" id="7886681">,</span>&nbsp;<span class="string" id="7886683">&#34;udp4&#34;</span><span class="op" id="7886689">,</span>&nbsp;<span class="string" id="7886691">&#34;udp6&#34;</span><span class="op" id="7886697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886701">ra</span><span class="op" id="7886703">,</span>&nbsp;<span class="ident" id="7886705">err</span>&nbsp;<span class="op" id="7886709">=</span>&nbsp;<span class="ident" id="7886711">ResolveUDPAddr</span><span class="op" id="7886725">(</span><span class="ident" id="7886726">net</span><span class="op" id="7886729">,</span>&nbsp;<span class="ident" id="7886731">taddr</span><span class="op" id="7886736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886740">if</span>&nbsp;<span class="ident" id="7886743">err</span>&nbsp;<span class="op" id="7886747">!=</span>&nbsp;<span class="ident" id="7886750">nil</span>&nbsp;<span class="op" id="7886754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886759">t</span><span class="op" id="7886760">.</span><span class="ident" id="7886761">Fatalf</span><span class="op" id="7886767">(</span><span class="string" id="7886768">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7886803">,</span>&nbsp;<span class="ident" id="7886805">net</span><span class="op" id="7886808">,</span>&nbsp;<span class="ident" id="7886810">taddr</span><span class="op" id="7886815">,</span>&nbsp;<span class="ident" id="7886817">err</span><span class="op" id="7886820">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886827">case</span>&nbsp;<span class="string" id="7886832">&#34;unixgram&#34;</span><span class="op" id="7886842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886846">ra</span><span class="op" id="7886848">,</span>&nbsp;<span class="ident" id="7886850">err</span>&nbsp;<span class="op" id="7886854">=</span>&nbsp;<span class="ident" id="7886856">ResolveUnixAddr</span><span class="op" id="7886871">(</span><span class="ident" id="7886872">net</span><span class="op" id="7886875">,</span>&nbsp;<span class="ident" id="7886877">taddr</span><span class="op" id="7886882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886886">if</span>&nbsp;<span class="ident" id="7886889">err</span>&nbsp;<span class="op" id="7886893">!=</span>&nbsp;<span class="ident" id="7886896">nil</span>&nbsp;<span class="op" id="7886900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886905">t</span><span class="op" id="7886906">.</span><span class="ident" id="7886907">Fatalf</span><span class="op" id="7886913">(</span><span class="string" id="7886914">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7886950">,</span>&nbsp;<span class="ident" id="7886952">net</span><span class="op" id="7886955">,</span>&nbsp;<span class="ident" id="7886957">taddr</span><span class="op" id="7886962">,</span>&nbsp;<span class="ident" id="7886964">err</span><span class="op" id="7886967">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7886977">c</span><span class="op" id="7886978">,</span>&nbsp;<span class="ident" id="7886980">err</span>&nbsp;<span class="op" id="7886984">:=</span>&nbsp;<span class="ident" id="7886987">ListenPacket</span><span class="op" id="7886999">(</span><span class="ident" id="7887000">net</span><span class="op" id="7887003">,</span>&nbsp;<span class="ident" id="7887005">laddr</span><span class="op" id="7887010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887013">if</span>&nbsp;<span class="ident" id="7887016">err</span>&nbsp;<span class="op" id="7887020">!=</span>&nbsp;<span class="ident" id="7887023">nil</span>&nbsp;<span class="op" id="7887027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887031">t</span><span class="op" id="7887032">.</span><span class="ident" id="7887033">Fatalf</span><span class="op" id="7887039">(</span><span class="string" id="7887040">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="7887072">,</span>&nbsp;<span class="ident" id="7887074">net</span><span class="op" id="7887077">,</span>&nbsp;<span class="ident" id="7887079">laddr</span><span class="op" id="7887084">,</span>&nbsp;<span class="ident" id="7887086">err</span><span class="op" id="7887089">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887095">defer</span>&nbsp;<span class="ident" id="7887101">c</span><span class="op" id="7887102">.</span><span class="ident" id="7887103">Close</span><span class="op" id="7887108">(</span><span class="op" id="7887109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887112">c</span><span class="op" id="7887113">.</span><span class="ident" id="7887114">SetReadDeadline</span><span class="op" id="7887129">(</span><span class="ident" id="7887130">time</span><span class="op" id="7887134">.</span><span class="ident" id="7887135">Now</span><span class="op" id="7887138">(</span><span class="op" id="7887139">)</span><span class="op" id="7887140">.</span><span class="ident" id="7887141">Add</span><span class="op" id="7887144">(</span><span class="num" id="7887145">1</span>&nbsp;<span class="op" id="7887147">*</span>&nbsp;<span class="ident" id="7887149">time</span><span class="op" id="7887153">.</span><span class="ident" id="7887154">Second</span><span class="op" id="7887160">)</span><span class="op" id="7887161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887165">var</span>&nbsp;<span class="ident" id="7887169">wb</span>&nbsp;<span class="op" id="7887172">[</span><span class="op" id="7887173">]</span><span class="builtintype" id="7887174">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887180">if</span>&nbsp;<span class="op" id="7887183">!</span><span class="ident" id="7887184">isEmpty</span>&nbsp;<span class="op" id="7887192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887196">wb</span>&nbsp;<span class="op" id="7887199">=</span>&nbsp;<span class="op" id="7887201">[</span><span class="op" id="7887202">]</span><span class="builtintype" id="7887203">byte</span><span class="op" id="7887207">(</span><span class="string" id="7887208">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="7887252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887258">if</span>&nbsp;<span class="ident" id="7887261">n</span><span class="op" id="7887262">,</span>&nbsp;<span class="ident" id="7887264">err</span>&nbsp;<span class="op" id="7887268">:=</span>&nbsp;<span class="ident" id="7887271">c</span><span class="op" id="7887272">.</span><span class="ident" id="7887273">WriteTo</span><span class="op" id="7887280">(</span><span class="ident" id="7887281">wb</span><span class="op" id="7887283">[</span><span class="num" id="7887284">0</span><span class="op" id="7887285">:</span><span class="op" id="7887286">]</span><span class="op" id="7887287">,</span>&nbsp;<span class="ident" id="7887289">ra</span><span class="op" id="7887291">)</span><span class="op" id="7887292">;</span>&nbsp;<span class="ident" id="7887294">err</span>&nbsp;<span class="op" id="7887298">!=</span>&nbsp;<span class="ident" id="7887301">nil</span>&nbsp;<span class="op" id="7887305">||</span>&nbsp;<span class="ident" id="7887308">n</span>&nbsp;<span class="op" id="7887310">!=</span>&nbsp;<span class="builtinfunc" id="7887313">len</span><span class="op" id="7887316">(</span><span class="ident" id="7887317">wb</span><span class="op" id="7887319">)</span>&nbsp;<span class="op" id="7887321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887325">t</span><span class="op" id="7887326">.</span><span class="ident" id="7887327">Fatalf</span><span class="op" id="7887333">(</span><span class="string" id="7887334">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7887378">,</span>&nbsp;<span class="ident" id="7887380">ra</span><span class="op" id="7887382">,</span>&nbsp;<span class="ident" id="7887384">n</span><span class="op" id="7887385">,</span>&nbsp;<span class="ident" id="7887387">err</span><span class="op" id="7887390">,</span>&nbsp;<span class="builtinfunc" id="7887392">len</span><span class="op" id="7887395">(</span><span class="ident" id="7887396">wb</span><span class="op" id="7887398">)</span><span class="op" id="7887399">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887406">rb</span>&nbsp;<span class="op" id="7887409">:=</span>&nbsp;<span class="builtinfunc" id="7887412">make</span><span class="op" id="7887416">(</span><span class="op" id="7887417">[</span><span class="op" id="7887418">]</span><span class="builtintype" id="7887419">byte</span><span class="op" id="7887423">,</span>&nbsp;<span class="num" id="7887425">1024</span><span class="op" id="7887429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7887432">if</span>&nbsp;<span class="ident" id="7887435">n</span><span class="op" id="7887436">,</span>&nbsp;<span class="ident" id="7887438">_</span><span class="op" id="7887439">,</span>&nbsp;<span class="ident" id="7887441">err</span>&nbsp;<span class="op" id="7887445">:=</span>&nbsp;<span class="ident" id="7887448">c</span><span class="op" id="7887449">.</span><span class="ident" id="7887450">ReadFrom</span><span class="op" id="7887458">(</span><span class="ident" id="7887459">rb</span><span class="op" id="7887461">[</span><span class="num" id="7887462">0</span><span class="op" id="7887463">:</span><span class="op" id="7887464">]</span><span class="op" id="7887465">)</span><span class="op" id="7887466">;</span>&nbsp;<span class="ident" id="7887468">err</span>&nbsp;<span class="op" id="7887472">!=</span>&nbsp;<span class="ident" id="7887475">nil</span>&nbsp;<span class="op" id="7887479">||</span>&nbsp;<span class="ident" id="7887482">n</span>&nbsp;<span class="op" id="7887484">!=</span>&nbsp;<span class="builtinfunc" id="7887487">len</span><span class="op" id="7887490">(</span><span class="ident" id="7887491">wb</span><span class="op" id="7887493">)</span>&nbsp;<span class="op" id="7887495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7887499">t</span><span class="op" id="7887500">.</span><span class="ident" id="7887501">Fatalf</span><span class="op" id="7887507">(</span><span class="string" id="7887508">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7887549">,</span>&nbsp;<span class="ident" id="7887551">n</span><span class="op" id="7887552">,</span>&nbsp;<span class="ident" id="7887554">err</span><span class="op" id="7887557">,</span>&nbsp;<span class="builtinfunc" id="7887559">len</span><span class="op" id="7887562">(</span><span class="ident" id="7887563">wb</span><span class="op" id="7887565">)</span><span class="op" id="7887566">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887569">}</span><br>
<span class="lineno"></span><span class="op" id="7887571">}</span>
</div>
</body>
</html>
