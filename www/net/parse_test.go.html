<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7941487">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7941542">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7941596">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7941647">package</span>&nbsp;<span class="ident" id="7941655">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7941660">import</span>&nbsp;<span class="op" id="7941667">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7941670">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7941679">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7941685">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7941696">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7941706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7941709">func</span>&nbsp;<span class="ident" id="7941714">TestReadLine</span><span class="op" id="7941726">(</span><span class="ident" id="7941727">t</span>&nbsp;<span class="op" id="7941729">*</span><span class="ident" id="7941730"><a href="/net/parse_test.go.html#7941696">testing</a></span><span class="op" id="7941737">.</span><span class="ident" id="7941738">T</span><span class="op" id="7941739">)</span>&nbsp;<span class="op" id="7941741">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7941744">//&nbsp;/etc/services&nbsp;file&nbsp;does&nbsp;not&nbsp;exist&nbsp;on&nbsp;android,&nbsp;plan9,&nbsp;windows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941810">switch</span>&nbsp;<span class="ident" id="7941817"><a href="/net/parse_test.go.html#7941685">runtime</a></span><span class="op" id="7941824">.</span><span class="ident" id="7941825">GOOS</span>&nbsp;<span class="op" id="7941830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941833">case</span>&nbsp;<span class="string" id="7941838">&#34;android&#34;</span><span class="op" id="7941847">,</span>&nbsp;<span class="string" id="7941849">&#34;plan9&#34;</span><span class="op" id="7941856">,</span>&nbsp;<span class="string" id="7941858">&#34;windows&#34;</span><span class="op" id="7941867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941871"><a href="/net/parse_test.go.html#7941727">t</a></span><span class="op" id="7941872">.</span><span class="ident" id="7941873">Skipf</span><span class="op" id="7941878">(</span><span class="string" id="7941879">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7941900">,</span>&nbsp;<span class="ident" id="7941902"><a href="/net/parse_test.go.html#7941685">runtime</a></span><span class="op" id="7941909">.</span><span class="ident" id="7941910">GOOS</span><span class="op" id="7941914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7941917">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941920">filename</span>&nbsp;<span class="op" id="7941929">:=</span>&nbsp;<span class="string" id="7941932">&#34;/etc/services&#34;</span>&nbsp;<span class="comment" id="7941948">//&nbsp;a&nbsp;nice&nbsp;big&nbsp;file</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7941969">fd</span><span class="op" id="7941971">,</span>&nbsp;<span class="ident" id="7941973">err</span>&nbsp;<span class="op" id="7941977">:=</span>&nbsp;<span class="ident" id="7941980"><a href="/net/parse_test.go.html#7941679">os</a></span><span class="op" id="7941982">.</span><span class="ident" id="7941983">Open</span><span class="op" id="7941987">(</span><span class="ident" id="7941988"><a href="/net/parse_test.go.html#7941920">filename</a></span><span class="op" id="7941996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7941999">if</span>&nbsp;<span class="ident" id="7942002"><a href="/net/parse_test.go.html#7941973">err</a></span>&nbsp;<span class="op" id="7942006">!=</span>&nbsp;<span class="ident" id="7942009">nil</span>&nbsp;<span class="op" id="7942013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942017"><a href="/net/parse_test.go.html#7941727">t</a></span><span class="op" id="7942018">.</span><span class="ident" id="7942019">Fatalf</span><span class="op" id="7942025">(</span><span class="string" id="7942026">&#34;open&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="7942039">,</span>&nbsp;<span class="ident" id="7942041"><a href="/net/parse_test.go.html#7941920">filename</a></span><span class="op" id="7942049">,</span>&nbsp;<span class="ident" id="7942051"><a href="/net/parse_test.go.html#7941973">err</a></span><span class="op" id="7942054">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942060">defer</span>&nbsp;<span class="ident" id="7942066"><a href="/net/parse_test.go.html#7941969">fd</a></span><span class="op" id="7942068">.</span><span class="ident" id="7942069">Close</span><span class="op" id="7942074">(</span><span class="op" id="7942075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942078">br</span>&nbsp;<span class="op" id="7942081">:=</span>&nbsp;<span class="ident" id="7942084"><a href="/net/parse_test.go.html#7941670">bufio</a></span><span class="op" id="7942089">.</span><span class="ident" id="7942090">NewReader</span><span class="op" id="7942099">(</span><span class="ident" id="7942100"><a href="/net/parse_test.go.html#7941969">fd</a></span><span class="op" id="7942102">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942106">file</span><span class="op" id="7942110">,</span>&nbsp;<span class="ident" id="7942112"><a href="/net/parse_test.go.html#7941973">err</a></span>&nbsp;<span class="op" id="7942116">:=</span>&nbsp;<span class="ident" id="7942119"><a href="/net/parse.go.html#1476797">open</a></span><span class="op" id="7942123">(</span><span class="ident" id="7942124"><a href="/net/parse_test.go.html#7941920">filename</a></span><span class="op" id="7942132">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942135">if</span>&nbsp;<span class="ident" id="7942138"><a href="/net/parse_test.go.html#7942106">file</a></span>&nbsp;<span class="op" id="7942143">==</span>&nbsp;<span class="ident" id="7942146">nil</span>&nbsp;<span class="op" id="7942150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942154"><a href="/net/parse_test.go.html#7941727">t</a></span><span class="op" id="7942155">.</span><span class="ident" id="7942156">Fatalf</span><span class="op" id="7942162">(</span><span class="string" id="7942163">&#34;net.open(%s)&nbsp;=&nbsp;nil&#34;</span><span class="op" id="7942183">,</span>&nbsp;<span class="ident" id="7942185"><a href="/net/parse_test.go.html#7941920">filename</a></span><span class="op" id="7942193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942199">defer</span>&nbsp;<span class="ident" id="7942205"><a href="/net/parse_test.go.html#7942106">file</a></span><span class="op" id="7942209">.</span><span class="builtinfunc" id="7942210">close</span><span class="op" id="7942215">(</span><span class="op" id="7942216">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942220">lineno</span>&nbsp;<span class="op" id="7942227">:=</span>&nbsp;<span class="num" id="7942230">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942233">byteno</span>&nbsp;<span class="op" id="7942240">:=</span>&nbsp;<span class="num" id="7942243">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942246">for</span>&nbsp;<span class="op" id="7942250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942254">bline</span><span class="op" id="7942259">,</span>&nbsp;<span class="ident" id="7942261">berr</span>&nbsp;<span class="op" id="7942266">:=</span>&nbsp;<span class="ident" id="7942269"><a href="/net/parse_test.go.html#7942078">br</a></span><span class="op" id="7942271">.</span><span class="ident" id="7942272">ReadString</span><span class="op" id="7942282">(</span><span class="string" id="7942283">&#39;\n&#39;</span><span class="op" id="7942287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942291">if</span>&nbsp;<span class="ident" id="7942294">n</span>&nbsp;<span class="op" id="7942296">:=</span>&nbsp;<span class="builtinfunc" id="7942299">len</span><span class="op" id="7942302">(</span><span class="ident" id="7942303"><a href="/net/parse_test.go.html#7942254">bline</a></span><span class="op" id="7942308">)</span><span class="op" id="7942309">;</span>&nbsp;<span class="ident" id="7942311"><a href="/net/parse_test.go.html#7942294">n</a></span>&nbsp;<span class="op" id="7942313">&gt;</span>&nbsp;<span class="num" id="7942315">0</span>&nbsp;<span class="op" id="7942317">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942322"><a href="/net/parse_test.go.html#7942254">bline</a></span>&nbsp;<span class="op" id="7942328">=</span>&nbsp;<span class="ident" id="7942330"><a href="/net/parse_test.go.html#7942254">bline</a></span><span class="op" id="7942335">[</span><span class="num" id="7942336">0</span>&nbsp;<span class="op" id="7942338">:</span>&nbsp;<span class="ident" id="7942340"><a href="/net/parse_test.go.html#7942294">n</a></span><span class="op" id="7942341">-</span><span class="num" id="7942342">1</span><span class="op" id="7942343">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942351">line</span><span class="op" id="7942355">,</span>&nbsp;<span class="ident" id="7942357">ok</span>&nbsp;<span class="op" id="7942360">:=</span>&nbsp;<span class="ident" id="7942363"><a href="/net/parse_test.go.html#7942106">file</a></span><span class="op" id="7942367">.</span><span class="ident" id="7942368">readLine</span><span class="op" id="7942376">(</span><span class="op" id="7942377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942381">if</span>&nbsp;<span class="op" id="7942384">(</span><span class="ident" id="7942385"><a href="/net/parse_test.go.html#7942261">berr</a></span>&nbsp;<span class="op" id="7942390">!=</span>&nbsp;<span class="ident" id="7942393">nil</span><span class="op" id="7942396">)</span>&nbsp;<span class="op" id="7942398">!=</span>&nbsp;<span class="op" id="7942401">!</span><span class="ident" id="7942402"><a href="/net/parse_test.go.html#7942357">ok</a></span>&nbsp;<span class="op" id="7942405">||</span>&nbsp;<span class="ident" id="7942408"><a href="/net/parse_test.go.html#7942254">bline</a></span>&nbsp;<span class="op" id="7942414">!=</span>&nbsp;<span class="ident" id="7942417"><a href="/net/parse_test.go.html#7942351">line</a></span>&nbsp;<span class="op" id="7942422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942427"><a href="/net/parse_test.go.html#7941727">t</a></span><span class="op" id="7942428">.</span><span class="ident" id="7942429">Fatalf</span><span class="op" id="7942435">(</span><span class="string" id="7942436">&#34;%s:%d&nbsp;(#%d)\nbufio&nbsp;=&gt;&nbsp;%q,&nbsp;%v\nnet&nbsp;=&gt;&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7942481">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942487"><a href="/net/parse_test.go.html#7941920">filename</a></span><span class="op" id="7942495">,</span>&nbsp;<span class="ident" id="7942497"><a href="/net/parse_test.go.html#7942220">lineno</a></span><span class="op" id="7942503">,</span>&nbsp;<span class="ident" id="7942505"><a href="/net/parse_test.go.html#7942233">byteno</a></span><span class="op" id="7942511">,</span>&nbsp;<span class="ident" id="7942513"><a href="/net/parse_test.go.html#7942254">bline</a></span><span class="op" id="7942518">,</span>&nbsp;<span class="ident" id="7942520"><a href="/net/parse_test.go.html#7942261">berr</a></span><span class="op" id="7942524">,</span>&nbsp;<span class="ident" id="7942526"><a href="/net/parse_test.go.html#7942351">line</a></span><span class="op" id="7942530">,</span>&nbsp;<span class="ident" id="7942532"><a href="/net/parse_test.go.html#7942357">ok</a></span><span class="op" id="7942534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942542">if</span>&nbsp;<span class="op" id="7942545">!</span><span class="ident" id="7942546"><a href="/net/parse_test.go.html#7942357">ok</a></span>&nbsp;<span class="op" id="7942549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7942554">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942562">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942566"><a href="/net/parse_test.go.html#7942220">lineno</a></span><span class="op" id="7942572">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7942577"><a href="/net/parse_test.go.html#7942233">byteno</a></span>&nbsp;<span class="op" id="7942584">+=</span>&nbsp;<span class="builtinfunc" id="7942587">len</span><span class="op" id="7942590">(</span><span class="ident" id="7942591"><a href="/net/parse_test.go.html#7942351">line</a></span><span class="op" id="7942595">)</span>&nbsp;<span class="op" id="7942597">+</span>&nbsp;<span class="num" id="7942599">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7942602">}</span><br>
<span class="lineno"></span><span class="op" id="7942604">}</span>
</div>
</body>
</html>
