<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4084982">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4085037">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4085091">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4085142">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="4085193">package</span>&nbsp;<span class="ident" id="4085201">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4085208">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="4085285">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="4085317">type</span>&nbsp;<span class="ident" id="4085322">Color</span>&nbsp;<span class="keyword" id="4085328">interface</span>&nbsp;<span class="op" id="4085338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085341">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085416">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085492">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4085568">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085582">RGBA</span><span class="op" id="4085586">(</span><span class="op" id="4085587">)</span>&nbsp;<span class="op" id="4085589">(</span><span class="ident" id="4085590">r</span><span class="op" id="4085591">,</span>&nbsp;<span class="ident" id="4085593">g</span><span class="op" id="4085594">,</span>&nbsp;<span class="ident" id="4085596">b</span><span class="op" id="4085597">,</span>&nbsp;<span class="ident" id="4085599">a</span>&nbsp;<span class="builtintype" id="4085601">uint32</span><span class="op" id="4085607">)</span><br>
<span class="lineno"></span><span class="op" id="4085609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4085612">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="4085679">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="4085736">type</span>&nbsp;<span class="ident" id="4085741">RGBA</span>&nbsp;<span class="keyword" id="4085746">struct</span>&nbsp;<span class="op" id="4085753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085756">R</span><span class="op" id="4085757">,</span>&nbsp;<span class="ident" id="4085759">G</span><span class="op" id="4085760">,</span>&nbsp;<span class="ident" id="4085762">B</span><span class="op" id="4085763">,</span>&nbsp;<span class="ident" id="4085765">A</span>&nbsp;<span class="builtintype" id="4085767">uint8</span><br>
<span class="lineno"></span><span class="op" id="4085773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4085776">func</span>&nbsp;<span class="op" id="4085781">(</span><span class="ident" id="4085782">c</span>&nbsp;<span class="ident" id="4085784">RGBA</span><span class="op" id="4085788">)</span>&nbsp;<span class="ident" id="4085790">RGBA</span><span class="op" id="4085794">(</span><span class="op" id="4085795">)</span>&nbsp;<span class="op" id="4085797">(</span><span class="ident" id="4085798">r</span><span class="op" id="4085799">,</span>&nbsp;<span class="ident" id="4085801">g</span><span class="op" id="4085802">,</span>&nbsp;<span class="ident" id="4085804">b</span><span class="op" id="4085805">,</span>&nbsp;<span class="ident" id="4085807">a</span>&nbsp;<span class="builtintype" id="4085809">uint32</span><span class="op" id="4085815">)</span>&nbsp;<span class="op" id="4085817">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085820">r</span>&nbsp;<span class="op" id="4085822">=</span>&nbsp;<span class="builtintype" id="4085824">uint32</span><span class="op" id="4085830">(</span><span class="ident" id="4085831">c</span><span class="op" id="4085832">.</span><span class="ident" id="4085833">R</span><span class="op" id="4085834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085837">r</span>&nbsp;<span class="op" id="4085839">|=</span>&nbsp;<span class="ident" id="4085842">r</span>&nbsp;<span class="op" id="4085844">&lt;&lt;</span>&nbsp;<span class="num" id="4085847">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085850">g</span>&nbsp;<span class="op" id="4085852">=</span>&nbsp;<span class="builtintype" id="4085854">uint32</span><span class="op" id="4085860">(</span><span class="ident" id="4085861">c</span><span class="op" id="4085862">.</span><span class="ident" id="4085863">G</span><span class="op" id="4085864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085867">g</span>&nbsp;<span class="op" id="4085869">|=</span>&nbsp;<span class="ident" id="4085872">g</span>&nbsp;<span class="op" id="4085874">&lt;&lt;</span>&nbsp;<span class="num" id="4085877">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085880">b</span>&nbsp;<span class="op" id="4085882">=</span>&nbsp;<span class="builtintype" id="4085884">uint32</span><span class="op" id="4085890">(</span><span class="ident" id="4085891">c</span><span class="op" id="4085892">.</span><span class="ident" id="4085893">B</span><span class="op" id="4085894">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085897">b</span>&nbsp;<span class="op" id="4085899">|=</span>&nbsp;<span class="ident" id="4085902">b</span>&nbsp;<span class="op" id="4085904">&lt;&lt;</span>&nbsp;<span class="num" id="4085907">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085910">a</span>&nbsp;<span class="op" id="4085912">=</span>&nbsp;<span class="builtintype" id="4085914">uint32</span><span class="op" id="4085920">(</span><span class="ident" id="4085921">c</span><span class="op" id="4085922">.</span><span class="ident" id="4085923">A</span><span class="op" id="4085924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4085927">a</span>&nbsp;<span class="op" id="4085929">|=</span>&nbsp;<span class="ident" id="4085932">a</span>&nbsp;<span class="op" id="4085934">&lt;&lt;</span>&nbsp;<span class="num" id="4085937">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4085940">return</span><br>
<span class="lineno"></span><span class="op" id="4085947">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4085950">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="4086007">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="4086065">type</span>&nbsp;<span class="ident" id="4086070">RGBA64</span>&nbsp;<span class="keyword" id="4086077">struct</span>&nbsp;<span class="op" id="4086084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086087">R</span><span class="op" id="4086088">,</span>&nbsp;<span class="ident" id="4086090">G</span><span class="op" id="4086091">,</span>&nbsp;<span class="ident" id="4086093">B</span><span class="op" id="4086094">,</span>&nbsp;<span class="ident" id="4086096">A</span>&nbsp;<span class="builtintype" id="4086098">uint16</span><br>
<span class="lineno">40</span><span class="op" id="4086105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4086108">func</span>&nbsp;<span class="op" id="4086113">(</span><span class="ident" id="4086114">c</span>&nbsp;<span class="ident" id="4086116">RGBA64</span><span class="op" id="4086122">)</span>&nbsp;<span class="ident" id="4086124">RGBA</span><span class="op" id="4086128">(</span><span class="op" id="4086129">)</span>&nbsp;<span class="op" id="4086131">(</span><span class="ident" id="4086132">r</span><span class="op" id="4086133">,</span>&nbsp;<span class="ident" id="4086135">g</span><span class="op" id="4086136">,</span>&nbsp;<span class="ident" id="4086138">b</span><span class="op" id="4086139">,</span>&nbsp;<span class="ident" id="4086141">a</span>&nbsp;<span class="builtintype" id="4086143">uint32</span><span class="op" id="4086149">)</span>&nbsp;<span class="op" id="4086151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086154">return</span>&nbsp;<span class="builtintype" id="4086161">uint32</span><span class="op" id="4086167">(</span><span class="ident" id="4086168">c</span><span class="op" id="4086169">.</span><span class="ident" id="4086170">R</span><span class="op" id="4086171">)</span><span class="op" id="4086172">,</span>&nbsp;<span class="builtintype" id="4086174">uint32</span><span class="op" id="4086180">(</span><span class="ident" id="4086181">c</span><span class="op" id="4086182">.</span><span class="ident" id="4086183">G</span><span class="op" id="4086184">)</span><span class="op" id="4086185">,</span>&nbsp;<span class="builtintype" id="4086187">uint32</span><span class="op" id="4086193">(</span><span class="ident" id="4086194">c</span><span class="op" id="4086195">.</span><span class="ident" id="4086196">B</span><span class="op" id="4086197">)</span><span class="op" id="4086198">,</span>&nbsp;<span class="builtintype" id="4086200">uint32</span><span class="op" id="4086206">(</span><span class="ident" id="4086207">c</span><span class="op" id="4086208">.</span><span class="ident" id="4086209">A</span><span class="op" id="4086210">)</span><br>
<span class="lineno"></span><span class="op" id="4086212">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4086215">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4086275">type</span>&nbsp;<span class="ident" id="4086280">NRGBA</span>&nbsp;<span class="keyword" id="4086286">struct</span>&nbsp;<span class="op" id="4086293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086296">R</span><span class="op" id="4086297">,</span>&nbsp;<span class="ident" id="4086299">G</span><span class="op" id="4086300">,</span>&nbsp;<span class="ident" id="4086302">B</span><span class="op" id="4086303">,</span>&nbsp;<span class="ident" id="4086305">A</span>&nbsp;<span class="builtintype" id="4086307">uint8</span><br>
<span class="lineno"></span><span class="op" id="4086313">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4086316">func</span>&nbsp;<span class="op" id="4086321">(</span><span class="ident" id="4086322">c</span>&nbsp;<span class="ident" id="4086324">NRGBA</span><span class="op" id="4086329">)</span>&nbsp;<span class="ident" id="4086331">RGBA</span><span class="op" id="4086335">(</span><span class="op" id="4086336">)</span>&nbsp;<span class="op" id="4086338">(</span><span class="ident" id="4086339">r</span><span class="op" id="4086340">,</span>&nbsp;<span class="ident" id="4086342">g</span><span class="op" id="4086343">,</span>&nbsp;<span class="ident" id="4086345">b</span><span class="op" id="4086346">,</span>&nbsp;<span class="ident" id="4086348">a</span>&nbsp;<span class="builtintype" id="4086350">uint32</span><span class="op" id="4086356">)</span>&nbsp;<span class="op" id="4086358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086361">r</span>&nbsp;<span class="op" id="4086363">=</span>&nbsp;<span class="builtintype" id="4086365">uint32</span><span class="op" id="4086371">(</span><span class="ident" id="4086372">c</span><span class="op" id="4086373">.</span><span class="ident" id="4086374">R</span><span class="op" id="4086375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086378">r</span>&nbsp;<span class="op" id="4086380">|=</span>&nbsp;<span class="ident" id="4086383">r</span>&nbsp;<span class="op" id="4086385">&lt;&lt;</span>&nbsp;<span class="num" id="4086388">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086391">r</span>&nbsp;<span class="op" id="4086393">*=</span>&nbsp;<span class="builtintype" id="4086396">uint32</span><span class="op" id="4086402">(</span><span class="ident" id="4086403">c</span><span class="op" id="4086404">.</span><span class="ident" id="4086405">A</span><span class="op" id="4086406">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086409">r</span>&nbsp;<span class="op" id="4086411">/=</span>&nbsp;<span class="num" id="4086414">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086420">g</span>&nbsp;<span class="op" id="4086422">=</span>&nbsp;<span class="builtintype" id="4086424">uint32</span><span class="op" id="4086430">(</span><span class="ident" id="4086431">c</span><span class="op" id="4086432">.</span><span class="ident" id="4086433">G</span><span class="op" id="4086434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086437">g</span>&nbsp;<span class="op" id="4086439">|=</span>&nbsp;<span class="ident" id="4086442">g</span>&nbsp;<span class="op" id="4086444">&lt;&lt;</span>&nbsp;<span class="num" id="4086447">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086450">g</span>&nbsp;<span class="op" id="4086452">*=</span>&nbsp;<span class="builtintype" id="4086455">uint32</span><span class="op" id="4086461">(</span><span class="ident" id="4086462">c</span><span class="op" id="4086463">.</span><span class="ident" id="4086464">A</span><span class="op" id="4086465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086468">g</span>&nbsp;<span class="op" id="4086470">/=</span>&nbsp;<span class="num" id="4086473">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086479">b</span>&nbsp;<span class="op" id="4086481">=</span>&nbsp;<span class="builtintype" id="4086483">uint32</span><span class="op" id="4086489">(</span><span class="ident" id="4086490">c</span><span class="op" id="4086491">.</span><span class="ident" id="4086492">B</span><span class="op" id="4086493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086496">b</span>&nbsp;<span class="op" id="4086498">|=</span>&nbsp;<span class="ident" id="4086501">b</span>&nbsp;<span class="op" id="4086503">&lt;&lt;</span>&nbsp;<span class="num" id="4086506">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086509">b</span>&nbsp;<span class="op" id="4086511">*=</span>&nbsp;<span class="builtintype" id="4086514">uint32</span><span class="op" id="4086520">(</span><span class="ident" id="4086521">c</span><span class="op" id="4086522">.</span><span class="ident" id="4086523">A</span><span class="op" id="4086524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086527">b</span>&nbsp;<span class="op" id="4086529">/=</span>&nbsp;<span class="num" id="4086532">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086538">a</span>&nbsp;<span class="op" id="4086540">=</span>&nbsp;<span class="builtintype" id="4086542">uint32</span><span class="op" id="4086548">(</span><span class="ident" id="4086549">c</span><span class="op" id="4086550">.</span><span class="ident" id="4086551">A</span><span class="op" id="4086552">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086555">a</span>&nbsp;<span class="op" id="4086557">|=</span>&nbsp;<span class="ident" id="4086560">a</span>&nbsp;<span class="op" id="4086562">&lt;&lt;</span>&nbsp;<span class="num" id="4086565">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086568">return</span><br>
<span class="lineno"></span><span class="op" id="4086575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086578">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="4086640">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="4086698">type</span>&nbsp;<span class="ident" id="4086703">NRGBA64</span>&nbsp;<span class="keyword" id="4086711">struct</span>&nbsp;<span class="op" id="4086718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086721">R</span><span class="op" id="4086722">,</span>&nbsp;<span class="ident" id="4086724">G</span><span class="op" id="4086725">,</span>&nbsp;<span class="ident" id="4086727">B</span><span class="op" id="4086728">,</span>&nbsp;<span class="ident" id="4086730">A</span>&nbsp;<span class="builtintype" id="4086732">uint16</span><br>
<span class="lineno"></span><span class="op" id="4086739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4086742">func</span>&nbsp;<span class="op" id="4086747">(</span><span class="ident" id="4086748">c</span>&nbsp;<span class="ident" id="4086750">NRGBA64</span><span class="op" id="4086757">)</span>&nbsp;<span class="ident" id="4086759">RGBA</span><span class="op" id="4086763">(</span><span class="op" id="4086764">)</span>&nbsp;<span class="op" id="4086766">(</span><span class="ident" id="4086767">r</span><span class="op" id="4086768">,</span>&nbsp;<span class="ident" id="4086770">g</span><span class="op" id="4086771">,</span>&nbsp;<span class="ident" id="4086773">b</span><span class="op" id="4086774">,</span>&nbsp;<span class="ident" id="4086776">a</span>&nbsp;<span class="builtintype" id="4086778">uint32</span><span class="op" id="4086784">)</span>&nbsp;<span class="op" id="4086786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086789">r</span>&nbsp;<span class="op" id="4086791">=</span>&nbsp;<span class="builtintype" id="4086793">uint32</span><span class="op" id="4086799">(</span><span class="ident" id="4086800">c</span><span class="op" id="4086801">.</span><span class="ident" id="4086802">R</span><span class="op" id="4086803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086806">r</span>&nbsp;<span class="op" id="4086808">*=</span>&nbsp;<span class="builtintype" id="4086811">uint32</span><span class="op" id="4086817">(</span><span class="ident" id="4086818">c</span><span class="op" id="4086819">.</span><span class="ident" id="4086820">A</span><span class="op" id="4086821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086824">r</span>&nbsp;<span class="op" id="4086826">/=</span>&nbsp;<span class="num" id="4086829">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086837">g</span>&nbsp;<span class="op" id="4086839">=</span>&nbsp;<span class="builtintype" id="4086841">uint32</span><span class="op" id="4086847">(</span><span class="ident" id="4086848">c</span><span class="op" id="4086849">.</span><span class="ident" id="4086850">G</span><span class="op" id="4086851">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086854">g</span>&nbsp;<span class="op" id="4086856">*=</span>&nbsp;<span class="builtintype" id="4086859">uint32</span><span class="op" id="4086865">(</span><span class="ident" id="4086866">c</span><span class="op" id="4086867">.</span><span class="ident" id="4086868">A</span><span class="op" id="4086869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086872">g</span>&nbsp;<span class="op" id="4086874">/=</span>&nbsp;<span class="num" id="4086877">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086885">b</span>&nbsp;<span class="op" id="4086887">=</span>&nbsp;<span class="builtintype" id="4086889">uint32</span><span class="op" id="4086895">(</span><span class="ident" id="4086896">c</span><span class="op" id="4086897">.</span><span class="ident" id="4086898">B</span><span class="op" id="4086899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086902">b</span>&nbsp;<span class="op" id="4086904">*=</span>&nbsp;<span class="builtintype" id="4086907">uint32</span><span class="op" id="4086913">(</span><span class="ident" id="4086914">c</span><span class="op" id="4086915">.</span><span class="ident" id="4086916">A</span><span class="op" id="4086917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086920">b</span>&nbsp;<span class="op" id="4086922">/=</span>&nbsp;<span class="num" id="4086925">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4086933">a</span>&nbsp;<span class="op" id="4086935">=</span>&nbsp;<span class="builtintype" id="4086937">uint32</span><span class="op" id="4086943">(</span><span class="ident" id="4086944">c</span><span class="op" id="4086945">.</span><span class="ident" id="4086946">A</span><span class="op" id="4086947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4086950">return</span><br>
<span class="lineno"></span><span class="op" id="4086957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4086960">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="4087002">type</span>&nbsp;<span class="ident" id="4087007">Alpha</span>&nbsp;<span class="keyword" id="4087013">struct</span>&nbsp;<span class="op" id="4087020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087023">A</span>&nbsp;<span class="builtintype" id="4087025">uint8</span><br>
<span class="lineno"></span><span class="op" id="4087031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4087034">func</span>&nbsp;<span class="op" id="4087039">(</span><span class="ident" id="4087040">c</span>&nbsp;<span class="ident" id="4087042">Alpha</span><span class="op" id="4087047">)</span>&nbsp;<span class="ident" id="4087049">RGBA</span><span class="op" id="4087053">(</span><span class="op" id="4087054">)</span>&nbsp;<span class="op" id="4087056">(</span><span class="ident" id="4087057">r</span><span class="op" id="4087058">,</span>&nbsp;<span class="ident" id="4087060">g</span><span class="op" id="4087061">,</span>&nbsp;<span class="ident" id="4087063">b</span><span class="op" id="4087064">,</span>&nbsp;<span class="ident" id="4087066">a</span>&nbsp;<span class="builtintype" id="4087068">uint32</span><span class="op" id="4087074">)</span>&nbsp;<span class="op" id="4087076">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087079">a</span>&nbsp;<span class="op" id="4087081">=</span>&nbsp;<span class="builtintype" id="4087083">uint32</span><span class="op" id="4087089">(</span><span class="ident" id="4087090">c</span><span class="op" id="4087091">.</span><span class="ident" id="4087092">A</span><span class="op" id="4087093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087096">a</span>&nbsp;<span class="op" id="4087098">|=</span>&nbsp;<span class="ident" id="4087101">a</span>&nbsp;<span class="op" id="4087103">&lt;&lt;</span>&nbsp;<span class="num" id="4087106">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087109">return</span>&nbsp;<span class="ident" id="4087116">a</span><span class="op" id="4087117">,</span>&nbsp;<span class="ident" id="4087119">a</span><span class="op" id="4087120">,</span>&nbsp;<span class="ident" id="4087122">a</span><span class="op" id="4087123">,</span>&nbsp;<span class="ident" id="4087125">a</span><br>
<span class="lineno"></span><span class="op" id="4087127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="4087130">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4087174">type</span>&nbsp;<span class="ident" id="4087179">Alpha16</span>&nbsp;<span class="keyword" id="4087187">struct</span>&nbsp;<span class="op" id="4087194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087197">A</span>&nbsp;<span class="builtintype" id="4087199">uint16</span><br>
<span class="lineno"></span><span class="op" id="4087206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="4087209">func</span>&nbsp;<span class="op" id="4087214">(</span><span class="ident" id="4087215">c</span>&nbsp;<span class="ident" id="4087217">Alpha16</span><span class="op" id="4087224">)</span>&nbsp;<span class="ident" id="4087226">RGBA</span><span class="op" id="4087230">(</span><span class="op" id="4087231">)</span>&nbsp;<span class="op" id="4087233">(</span><span class="ident" id="4087234">r</span><span class="op" id="4087235">,</span>&nbsp;<span class="ident" id="4087237">g</span><span class="op" id="4087238">,</span>&nbsp;<span class="ident" id="4087240">b</span><span class="op" id="4087241">,</span>&nbsp;<span class="ident" id="4087243">a</span>&nbsp;<span class="builtintype" id="4087245">uint32</span><span class="op" id="4087251">)</span>&nbsp;<span class="op" id="4087253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087256">a</span>&nbsp;<span class="op" id="4087258">=</span>&nbsp;<span class="builtintype" id="4087260">uint32</span><span class="op" id="4087266">(</span><span class="ident" id="4087267">c</span><span class="op" id="4087268">.</span><span class="ident" id="4087269">A</span><span class="op" id="4087270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087273">return</span>&nbsp;<span class="ident" id="4087280">a</span><span class="op" id="4087281">,</span>&nbsp;<span class="ident" id="4087283">a</span><span class="op" id="4087284">,</span>&nbsp;<span class="ident" id="4087286">a</span><span class="op" id="4087287">,</span>&nbsp;<span class="ident" id="4087289">a</span><br>
<span class="lineno"></span><span class="op" id="4087291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="4087294">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4087339">type</span>&nbsp;<span class="ident" id="4087344">Gray</span>&nbsp;<span class="keyword" id="4087349">struct</span>&nbsp;<span class="op" id="4087356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087359">Y</span>&nbsp;<span class="builtintype" id="4087361">uint8</span><br>
<span class="lineno"></span><span class="op" id="4087367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="4087370">func</span>&nbsp;<span class="op" id="4087375">(</span><span class="ident" id="4087376">c</span>&nbsp;<span class="ident" id="4087378">Gray</span><span class="op" id="4087382">)</span>&nbsp;<span class="ident" id="4087384">RGBA</span><span class="op" id="4087388">(</span><span class="op" id="4087389">)</span>&nbsp;<span class="op" id="4087391">(</span><span class="ident" id="4087392">r</span><span class="op" id="4087393">,</span>&nbsp;<span class="ident" id="4087395">g</span><span class="op" id="4087396">,</span>&nbsp;<span class="ident" id="4087398">b</span><span class="op" id="4087399">,</span>&nbsp;<span class="ident" id="4087401">a</span>&nbsp;<span class="builtintype" id="4087403">uint32</span><span class="op" id="4087409">)</span>&nbsp;<span class="op" id="4087411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087414">y</span>&nbsp;<span class="op" id="4087416">:=</span>&nbsp;<span class="builtintype" id="4087419">uint32</span><span class="op" id="4087425">(</span><span class="ident" id="4087426">c</span><span class="op" id="4087427">.</span><span class="ident" id="4087428">Y</span><span class="op" id="4087429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087432">y</span>&nbsp;<span class="op" id="4087434">|=</span>&nbsp;<span class="ident" id="4087437">y</span>&nbsp;<span class="op" id="4087439">&lt;&lt;</span>&nbsp;<span class="num" id="4087442">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087445">return</span>&nbsp;<span class="ident" id="4087452">y</span><span class="op" id="4087453">,</span>&nbsp;<span class="ident" id="4087455">y</span><span class="op" id="4087456">,</span>&nbsp;<span class="ident" id="4087458">y</span><span class="op" id="4087459">,</span>&nbsp;<span class="num" id="4087461">0xffff</span><br>
<span class="lineno"></span><span class="op" id="4087468">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="4087471">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4087518">type</span>&nbsp;<span class="ident" id="4087523">Gray16</span>&nbsp;<span class="keyword" id="4087530">struct</span>&nbsp;<span class="op" id="4087537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087540">Y</span>&nbsp;<span class="builtintype" id="4087542">uint16</span><br>
<span class="lineno"></span><span class="op" id="4087549">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="4087552">func</span>&nbsp;<span class="op" id="4087557">(</span><span class="ident" id="4087558">c</span>&nbsp;<span class="ident" id="4087560">Gray16</span><span class="op" id="4087566">)</span>&nbsp;<span class="ident" id="4087568">RGBA</span><span class="op" id="4087572">(</span><span class="op" id="4087573">)</span>&nbsp;<span class="op" id="4087575">(</span><span class="ident" id="4087576">r</span><span class="op" id="4087577">,</span>&nbsp;<span class="ident" id="4087579">g</span><span class="op" id="4087580">,</span>&nbsp;<span class="ident" id="4087582">b</span><span class="op" id="4087583">,</span>&nbsp;<span class="ident" id="4087585">a</span>&nbsp;<span class="builtintype" id="4087587">uint32</span><span class="op" id="4087593">)</span>&nbsp;<span class="op" id="4087595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087598">y</span>&nbsp;<span class="op" id="4087600">:=</span>&nbsp;<span class="builtintype" id="4087603">uint32</span><span class="op" id="4087609">(</span><span class="ident" id="4087610">c</span><span class="op" id="4087611">.</span><span class="ident" id="4087612">Y</span><span class="op" id="4087613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4087616">return</span>&nbsp;<span class="ident" id="4087623">y</span><span class="op" id="4087624">,</span>&nbsp;<span class="ident" id="4087626">y</span><span class="op" id="4087627">,</span>&nbsp;<span class="ident" id="4087629">y</span><span class="op" id="4087630">,</span>&nbsp;<span class="num" id="4087632">0xffff</span><br>
<span class="lineno"></span><span class="op" id="4087639">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="4087642">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="4087721">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="4087738">type</span>&nbsp;<span class="ident" id="4087743">Model</span>&nbsp;<span class="keyword" id="4087749">interface</span>&nbsp;<span class="op" id="4087759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4087762">Convert</span><span class="op" id="4087769">(</span><span class="ident" id="4087770">c</span>&nbsp;<span class="ident" id="4087772">Color</span><span class="op" id="4087777">)</span>&nbsp;<span class="ident" id="4087779">Color</span><br>
<span class="lineno">135</span><span class="op" id="4087785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4087788">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="4087861">func</span>&nbsp;<span class="ident" id="4087866">ModelFunc</span><span class="op" id="4087875">(</span><span class="ident" id="4087876">f</span>&nbsp;<span class="keyword" id="4087878">func</span><span class="op" id="4087882">(</span><span class="ident" id="4087883">Color</span><span class="op" id="4087888">)</span>&nbsp;<span class="ident" id="4087890">Color</span><span class="op" id="4087895">)</span>&nbsp;<span class="ident" id="4087897">Model</span>&nbsp;<span class="op" id="4087903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4087906">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4087955">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088004">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088054">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4088104">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088134">return</span>&nbsp;<span class="op" id="4088141">&amp;</span><span class="ident" id="4088142">modelFunc</span><span class="op" id="4088151">{</span><span class="ident" id="4088152">f</span><span class="op" id="4088153">}</span><br>
<span class="lineno">145</span><span class="op" id="4088155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4088158">type</span>&nbsp;<span class="ident" id="4088163">modelFunc</span>&nbsp;<span class="keyword" id="4088173">struct</span>&nbsp;<span class="op" id="4088180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088183">f</span>&nbsp;<span class="keyword" id="4088185">func</span><span class="op" id="4088189">(</span><span class="ident" id="4088190">Color</span><span class="op" id="4088195">)</span>&nbsp;<span class="ident" id="4088197">Color</span><br>
<span class="lineno"></span><span class="op" id="4088203">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="4088206">func</span>&nbsp;<span class="op" id="4088211">(</span><span class="ident" id="4088212">m</span>&nbsp;<span class="op" id="4088214">*</span><span class="ident" id="4088215">modelFunc</span><span class="op" id="4088224">)</span>&nbsp;<span class="ident" id="4088226">Convert</span><span class="op" id="4088233">(</span><span class="ident" id="4088234">c</span>&nbsp;<span class="ident" id="4088236">Color</span><span class="op" id="4088241">)</span>&nbsp;<span class="ident" id="4088243">Color</span>&nbsp;<span class="op" id="4088249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088252">return</span>&nbsp;<span class="ident" id="4088259">m</span><span class="op" id="4088260">.</span><span class="ident" id="4088261">f</span><span class="op" id="4088262">(</span><span class="ident" id="4088263">c</span><span class="op" id="4088264">)</span><br>
<span class="lineno"></span><span class="op" id="4088266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4088269">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="4088309">var</span>&nbsp;<span class="op" id="4088313">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088316">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088329">Model</span>&nbsp;<span class="op" id="4088335">=</span>&nbsp;<span class="ident" id="4088337">ModelFunc</span><span class="op" id="4088346">(</span><span class="ident" id="4088347">rgbaModel</span><span class="op" id="4088356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088359">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="4088372">Model</span>&nbsp;<span class="op" id="4088378">=</span>&nbsp;<span class="ident" id="4088380">ModelFunc</span><span class="op" id="4088389">(</span><span class="ident" id="4088390">rgba64Model</span><span class="op" id="4088401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088404">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4088417">Model</span>&nbsp;<span class="op" id="4088423">=</span>&nbsp;<span class="ident" id="4088425">ModelFunc</span><span class="op" id="4088434">(</span><span class="ident" id="4088435">nrgbaModel</span><span class="op" id="4088445">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088448">NRGBA64Model</span>&nbsp;<span class="ident" id="4088461">Model</span>&nbsp;<span class="op" id="4088467">=</span>&nbsp;<span class="ident" id="4088469">ModelFunc</span><span class="op" id="4088478">(</span><span class="ident" id="4088479">nrgba64Model</span><span class="op" id="4088491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088494">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4088507">Model</span>&nbsp;<span class="op" id="4088513">=</span>&nbsp;<span class="ident" id="4088515">ModelFunc</span><span class="op" id="4088524">(</span><span class="ident" id="4088525">alphaModel</span><span class="op" id="4088535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088538">Alpha16Model</span>&nbsp;<span class="ident" id="4088551">Model</span>&nbsp;<span class="op" id="4088557">=</span>&nbsp;<span class="ident" id="4088559">ModelFunc</span><span class="op" id="4088568">(</span><span class="ident" id="4088569">alpha16Model</span><span class="op" id="4088581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088584">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088597">Model</span>&nbsp;<span class="op" id="4088603">=</span>&nbsp;<span class="ident" id="4088605">ModelFunc</span><span class="op" id="4088614">(</span><span class="ident" id="4088615">grayModel</span><span class="op" id="4088624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088627">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="4088640">Model</span>&nbsp;<span class="op" id="4088646">=</span>&nbsp;<span class="ident" id="4088648">ModelFunc</span><span class="op" id="4088657">(</span><span class="ident" id="4088658">gray16Model</span><span class="op" id="4088669">)</span><br>
<span class="lineno">165</span><span class="op" id="4088671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4088674">func</span>&nbsp;<span class="ident" id="4088679">rgbaModel</span><span class="op" id="4088688">(</span><span class="ident" id="4088689">c</span>&nbsp;<span class="ident" id="4088691">Color</span><span class="op" id="4088696">)</span>&nbsp;<span class="ident" id="4088698">Color</span>&nbsp;<span class="op" id="4088704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088707">if</span>&nbsp;<span class="ident" id="4088710">_</span><span class="op" id="4088711">,</span>&nbsp;<span class="ident" id="4088713">ok</span>&nbsp;<span class="op" id="4088716">:=</span>&nbsp;<span class="ident" id="4088719">c</span><span class="op" id="4088720">.</span><span class="op" id="4088721">(</span><span class="ident" id="4088722">RGBA</span><span class="op" id="4088726">)</span><span class="op" id="4088727">;</span>&nbsp;<span class="ident" id="4088729">ok</span>&nbsp;<span class="op" id="4088732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088736">return</span>&nbsp;<span class="ident" id="4088743">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088749">r</span><span class="op" id="4088750">,</span>&nbsp;<span class="ident" id="4088752">g</span><span class="op" id="4088753">,</span>&nbsp;<span class="ident" id="4088755">b</span><span class="op" id="4088756">,</span>&nbsp;<span class="ident" id="4088758">a</span>&nbsp;<span class="op" id="4088760">:=</span>&nbsp;<span class="ident" id="4088763">c</span><span class="op" id="4088764">.</span><span class="ident" id="4088765">RGBA</span><span class="op" id="4088769">(</span><span class="op" id="4088770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088773">return</span>&nbsp;<span class="ident" id="4088780">RGBA</span><span class="op" id="4088784">{</span><span class="builtintype" id="4088785">uint8</span><span class="op" id="4088790">(</span><span class="ident" id="4088791">r</span>&nbsp;<span class="op" id="4088793">&gt;&gt;</span>&nbsp;<span class="num" id="4088796">8</span><span class="op" id="4088797">)</span><span class="op" id="4088798">,</span>&nbsp;<span class="builtintype" id="4088800">uint8</span><span class="op" id="4088805">(</span><span class="ident" id="4088806">g</span>&nbsp;<span class="op" id="4088808">&gt;&gt;</span>&nbsp;<span class="num" id="4088811">8</span><span class="op" id="4088812">)</span><span class="op" id="4088813">,</span>&nbsp;<span class="builtintype" id="4088815">uint8</span><span class="op" id="4088820">(</span><span class="ident" id="4088821">b</span>&nbsp;<span class="op" id="4088823">&gt;&gt;</span>&nbsp;<span class="num" id="4088826">8</span><span class="op" id="4088827">)</span><span class="op" id="4088828">,</span>&nbsp;<span class="builtintype" id="4088830">uint8</span><span class="op" id="4088835">(</span><span class="ident" id="4088836">a</span>&nbsp;<span class="op" id="4088838">&gt;&gt;</span>&nbsp;<span class="num" id="4088841">8</span><span class="op" id="4088842">)</span><span class="op" id="4088843">}</span><br>
<span class="lineno"></span><span class="op" id="4088845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="4088848">func</span>&nbsp;<span class="ident" id="4088853">rgba64Model</span><span class="op" id="4088864">(</span><span class="ident" id="4088865">c</span>&nbsp;<span class="ident" id="4088867">Color</span><span class="op" id="4088872">)</span>&nbsp;<span class="ident" id="4088874">Color</span>&nbsp;<span class="op" id="4088880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088883">if</span>&nbsp;<span class="ident" id="4088886">_</span><span class="op" id="4088887">,</span>&nbsp;<span class="ident" id="4088889">ok</span>&nbsp;<span class="op" id="4088892">:=</span>&nbsp;<span class="ident" id="4088895">c</span><span class="op" id="4088896">.</span><span class="op" id="4088897">(</span><span class="ident" id="4088898">RGBA64</span><span class="op" id="4088904">)</span><span class="op" id="4088905">;</span>&nbsp;<span class="ident" id="4088907">ok</span>&nbsp;<span class="op" id="4088910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088914">return</span>&nbsp;<span class="ident" id="4088921">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088927">r</span><span class="op" id="4088928">,</span>&nbsp;<span class="ident" id="4088930">g</span><span class="op" id="4088931">,</span>&nbsp;<span class="ident" id="4088933">b</span><span class="op" id="4088934">,</span>&nbsp;<span class="ident" id="4088936">a</span>&nbsp;<span class="op" id="4088938">:=</span>&nbsp;<span class="ident" id="4088941">c</span><span class="op" id="4088942">.</span><span class="ident" id="4088943">RGBA</span><span class="op" id="4088947">(</span><span class="op" id="4088948">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088951">return</span>&nbsp;<span class="ident" id="4088958">RGBA64</span><span class="op" id="4088964">{</span><span class="builtintype" id="4088965">uint16</span><span class="op" id="4088971">(</span><span class="ident" id="4088972">r</span><span class="op" id="4088973">)</span><span class="op" id="4088974">,</span>&nbsp;<span class="builtintype" id="4088976">uint16</span><span class="op" id="4088982">(</span><span class="ident" id="4088983">g</span><span class="op" id="4088984">)</span><span class="op" id="4088985">,</span>&nbsp;<span class="builtintype" id="4088987">uint16</span><span class="op" id="4088993">(</span><span class="ident" id="4088994">b</span><span class="op" id="4088995">)</span><span class="op" id="4088996">,</span>&nbsp;<span class="builtintype" id="4088998">uint16</span><span class="op" id="4089004">(</span><span class="ident" id="4089005">a</span><span class="op" id="4089006">)</span><span class="op" id="4089007">}</span><br>
<span class="lineno"></span><span class="op" id="4089009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4089012">func</span>&nbsp;<span class="ident" id="4089017">nrgbaModel</span><span class="op" id="4089027">(</span><span class="ident" id="4089028">c</span>&nbsp;<span class="ident" id="4089030">Color</span><span class="op" id="4089035">)</span>&nbsp;<span class="ident" id="4089037">Color</span>&nbsp;<span class="op" id="4089043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089046">if</span>&nbsp;<span class="ident" id="4089049">_</span><span class="op" id="4089050">,</span>&nbsp;<span class="ident" id="4089052">ok</span>&nbsp;<span class="op" id="4089055">:=</span>&nbsp;<span class="ident" id="4089058">c</span><span class="op" id="4089059">.</span><span class="op" id="4089060">(</span><span class="ident" id="4089061">NRGBA</span><span class="op" id="4089066">)</span><span class="op" id="4089067">;</span>&nbsp;<span class="ident" id="4089069">ok</span>&nbsp;<span class="op" id="4089072">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089076">return</span>&nbsp;<span class="ident" id="4089083">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089089">r</span><span class="op" id="4089090">,</span>&nbsp;<span class="ident" id="4089092">g</span><span class="op" id="4089093">,</span>&nbsp;<span class="ident" id="4089095">b</span><span class="op" id="4089096">,</span>&nbsp;<span class="ident" id="4089098">a</span>&nbsp;<span class="op" id="4089100">:=</span>&nbsp;<span class="ident" id="4089103">c</span><span class="op" id="4089104">.</span><span class="ident" id="4089105">RGBA</span><span class="op" id="4089109">(</span><span class="op" id="4089110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089113">if</span>&nbsp;<span class="ident" id="4089116">a</span>&nbsp;<span class="op" id="4089118">==</span>&nbsp;<span class="num" id="4089121">0xffff</span>&nbsp;<span class="op" id="4089128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089132">return</span>&nbsp;<span class="ident" id="4089139">NRGBA</span><span class="op" id="4089144">{</span><span class="builtintype" id="4089145">uint8</span><span class="op" id="4089150">(</span><span class="ident" id="4089151">r</span>&nbsp;<span class="op" id="4089153">&gt;&gt;</span>&nbsp;<span class="num" id="4089156">8</span><span class="op" id="4089157">)</span><span class="op" id="4089158">,</span>&nbsp;<span class="builtintype" id="4089160">uint8</span><span class="op" id="4089165">(</span><span class="ident" id="4089166">g</span>&nbsp;<span class="op" id="4089168">&gt;&gt;</span>&nbsp;<span class="num" id="4089171">8</span><span class="op" id="4089172">)</span><span class="op" id="4089173">,</span>&nbsp;<span class="builtintype" id="4089175">uint8</span><span class="op" id="4089180">(</span><span class="ident" id="4089181">b</span>&nbsp;<span class="op" id="4089183">&gt;&gt;</span>&nbsp;<span class="num" id="4089186">8</span><span class="op" id="4089187">)</span><span class="op" id="4089188">,</span>&nbsp;<span class="num" id="4089190">0xff</span><span class="op" id="4089194">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089200">if</span>&nbsp;<span class="ident" id="4089203">a</span>&nbsp;<span class="op" id="4089205">==</span>&nbsp;<span class="num" id="4089208">0</span>&nbsp;<span class="op" id="4089210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089214">return</span>&nbsp;<span class="ident" id="4089221">NRGBA</span><span class="op" id="4089226">{</span><span class="num" id="4089227">0</span><span class="op" id="4089228">,</span>&nbsp;<span class="num" id="4089230">0</span><span class="op" id="4089231">,</span>&nbsp;<span class="num" id="4089233">0</span><span class="op" id="4089234">,</span>&nbsp;<span class="num" id="4089236">0</span><span class="op" id="4089237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4089243">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089344">r</span>&nbsp;<span class="op" id="4089346">=</span>&nbsp;<span class="op" id="4089348">(</span><span class="ident" id="4089349">r</span>&nbsp;<span class="op" id="4089351">*</span>&nbsp;<span class="num" id="4089353">0xffff</span><span class="op" id="4089359">)</span>&nbsp;<span class="op" id="4089361">/</span>&nbsp;<span class="ident" id="4089363">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089366">g</span>&nbsp;<span class="op" id="4089368">=</span>&nbsp;<span class="op" id="4089370">(</span><span class="ident" id="4089371">g</span>&nbsp;<span class="op" id="4089373">*</span>&nbsp;<span class="num" id="4089375">0xffff</span><span class="op" id="4089381">)</span>&nbsp;<span class="op" id="4089383">/</span>&nbsp;<span class="ident" id="4089385">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089388">b</span>&nbsp;<span class="op" id="4089390">=</span>&nbsp;<span class="op" id="4089392">(</span><span class="ident" id="4089393">b</span>&nbsp;<span class="op" id="4089395">*</span>&nbsp;<span class="num" id="4089397">0xffff</span><span class="op" id="4089403">)</span>&nbsp;<span class="op" id="4089405">/</span>&nbsp;<span class="ident" id="4089407">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089410">return</span>&nbsp;<span class="ident" id="4089417">NRGBA</span><span class="op" id="4089422">{</span><span class="builtintype" id="4089423">uint8</span><span class="op" id="4089428">(</span><span class="ident" id="4089429">r</span>&nbsp;<span class="op" id="4089431">&gt;&gt;</span>&nbsp;<span class="num" id="4089434">8</span><span class="op" id="4089435">)</span><span class="op" id="4089436">,</span>&nbsp;<span class="builtintype" id="4089438">uint8</span><span class="op" id="4089443">(</span><span class="ident" id="4089444">g</span>&nbsp;<span class="op" id="4089446">&gt;&gt;</span>&nbsp;<span class="num" id="4089449">8</span><span class="op" id="4089450">)</span><span class="op" id="4089451">,</span>&nbsp;<span class="builtintype" id="4089453">uint8</span><span class="op" id="4089458">(</span><span class="ident" id="4089459">b</span>&nbsp;<span class="op" id="4089461">&gt;&gt;</span>&nbsp;<span class="num" id="4089464">8</span><span class="op" id="4089465">)</span><span class="op" id="4089466">,</span>&nbsp;<span class="builtintype" id="4089468">uint8</span><span class="op" id="4089473">(</span><span class="ident" id="4089474">a</span>&nbsp;<span class="op" id="4089476">&gt;&gt;</span>&nbsp;<span class="num" id="4089479">8</span><span class="op" id="4089480">)</span><span class="op" id="4089481">}</span><br>
<span class="lineno"></span><span class="op" id="4089483">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="4089486">func</span>&nbsp;<span class="ident" id="4089491">nrgba64Model</span><span class="op" id="4089503">(</span><span class="ident" id="4089504">c</span>&nbsp;<span class="ident" id="4089506">Color</span><span class="op" id="4089511">)</span>&nbsp;<span class="ident" id="4089513">Color</span>&nbsp;<span class="op" id="4089519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089522">if</span>&nbsp;<span class="ident" id="4089525">_</span><span class="op" id="4089526">,</span>&nbsp;<span class="ident" id="4089528">ok</span>&nbsp;<span class="op" id="4089531">:=</span>&nbsp;<span class="ident" id="4089534">c</span><span class="op" id="4089535">.</span><span class="op" id="4089536">(</span><span class="ident" id="4089537">NRGBA64</span><span class="op" id="4089544">)</span><span class="op" id="4089545">;</span>&nbsp;<span class="ident" id="4089547">ok</span>&nbsp;<span class="op" id="4089550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089554">return</span>&nbsp;<span class="ident" id="4089561">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089564">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089567">r</span><span class="op" id="4089568">,</span>&nbsp;<span class="ident" id="4089570">g</span><span class="op" id="4089571">,</span>&nbsp;<span class="ident" id="4089573">b</span><span class="op" id="4089574">,</span>&nbsp;<span class="ident" id="4089576">a</span>&nbsp;<span class="op" id="4089578">:=</span>&nbsp;<span class="ident" id="4089581">c</span><span class="op" id="4089582">.</span><span class="ident" id="4089583">RGBA</span><span class="op" id="4089587">(</span><span class="op" id="4089588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089591">if</span>&nbsp;<span class="ident" id="4089594">a</span>&nbsp;<span class="op" id="4089596">==</span>&nbsp;<span class="num" id="4089599">0xffff</span>&nbsp;<span class="op" id="4089606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089610">return</span>&nbsp;<span class="ident" id="4089617">NRGBA64</span><span class="op" id="4089624">{</span><span class="builtintype" id="4089625">uint16</span><span class="op" id="4089631">(</span><span class="ident" id="4089632">r</span><span class="op" id="4089633">)</span><span class="op" id="4089634">,</span>&nbsp;<span class="builtintype" id="4089636">uint16</span><span class="op" id="4089642">(</span><span class="ident" id="4089643">g</span><span class="op" id="4089644">)</span><span class="op" id="4089645">,</span>&nbsp;<span class="builtintype" id="4089647">uint16</span><span class="op" id="4089653">(</span><span class="ident" id="4089654">b</span><span class="op" id="4089655">)</span><span class="op" id="4089656">,</span>&nbsp;<span class="num" id="4089658">0xffff</span><span class="op" id="4089664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089670">if</span>&nbsp;<span class="ident" id="4089673">a</span>&nbsp;<span class="op" id="4089675">==</span>&nbsp;<span class="num" id="4089678">0</span>&nbsp;<span class="op" id="4089680">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089684">return</span>&nbsp;<span class="ident" id="4089691">NRGBA64</span><span class="op" id="4089698">{</span><span class="num" id="4089699">0</span><span class="op" id="4089700">,</span>&nbsp;<span class="num" id="4089702">0</span><span class="op" id="4089703">,</span>&nbsp;<span class="num" id="4089705">0</span><span class="op" id="4089706">,</span>&nbsp;<span class="num" id="4089708">0</span><span class="op" id="4089709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4089715">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089816">r</span>&nbsp;<span class="op" id="4089818">=</span>&nbsp;<span class="op" id="4089820">(</span><span class="ident" id="4089821">r</span>&nbsp;<span class="op" id="4089823">*</span>&nbsp;<span class="num" id="4089825">0xffff</span><span class="op" id="4089831">)</span>&nbsp;<span class="op" id="4089833">/</span>&nbsp;<span class="ident" id="4089835">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089838">g</span>&nbsp;<span class="op" id="4089840">=</span>&nbsp;<span class="op" id="4089842">(</span><span class="ident" id="4089843">g</span>&nbsp;<span class="op" id="4089845">*</span>&nbsp;<span class="num" id="4089847">0xffff</span><span class="op" id="4089853">)</span>&nbsp;<span class="op" id="4089855">/</span>&nbsp;<span class="ident" id="4089857">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089860">b</span>&nbsp;<span class="op" id="4089862">=</span>&nbsp;<span class="op" id="4089864">(</span><span class="ident" id="4089865">b</span>&nbsp;<span class="op" id="4089867">*</span>&nbsp;<span class="num" id="4089869">0xffff</span><span class="op" id="4089875">)</span>&nbsp;<span class="op" id="4089877">/</span>&nbsp;<span class="ident" id="4089879">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089882">return</span>&nbsp;<span class="ident" id="4089889">NRGBA64</span><span class="op" id="4089896">{</span><span class="builtintype" id="4089897">uint16</span><span class="op" id="4089903">(</span><span class="ident" id="4089904">r</span><span class="op" id="4089905">)</span><span class="op" id="4089906">,</span>&nbsp;<span class="builtintype" id="4089908">uint16</span><span class="op" id="4089914">(</span><span class="ident" id="4089915">g</span><span class="op" id="4089916">)</span><span class="op" id="4089917">,</span>&nbsp;<span class="builtintype" id="4089919">uint16</span><span class="op" id="4089925">(</span><span class="ident" id="4089926">b</span><span class="op" id="4089927">)</span><span class="op" id="4089928">,</span>&nbsp;<span class="builtintype" id="4089930">uint16</span><span class="op" id="4089936">(</span><span class="ident" id="4089937">a</span><span class="op" id="4089938">)</span><span class="op" id="4089939">}</span><br>
<span class="lineno"></span><span class="op" id="4089941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4089944">func</span>&nbsp;<span class="ident" id="4089949">alphaModel</span><span class="op" id="4089959">(</span><span class="ident" id="4089960">c</span>&nbsp;<span class="ident" id="4089962">Color</span><span class="op" id="4089967">)</span>&nbsp;<span class="ident" id="4089969">Color</span>&nbsp;<span class="op" id="4089975">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089978">if</span>&nbsp;<span class="ident" id="4089981">_</span><span class="op" id="4089982">,</span>&nbsp;<span class="ident" id="4089984">ok</span>&nbsp;<span class="op" id="4089987">:=</span>&nbsp;<span class="ident" id="4089990">c</span><span class="op" id="4089991">.</span><span class="op" id="4089992">(</span><span class="ident" id="4089993">Alpha</span><span class="op" id="4089998">)</span><span class="op" id="4089999">;</span>&nbsp;<span class="ident" id="4090001">ok</span>&nbsp;<span class="op" id="4090004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090008">return</span>&nbsp;<span class="ident" id="4090015">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090021">_</span><span class="op" id="4090022">,</span>&nbsp;<span class="ident" id="4090024">_</span><span class="op" id="4090025">,</span>&nbsp;<span class="ident" id="4090027">_</span><span class="op" id="4090028">,</span>&nbsp;<span class="ident" id="4090030">a</span>&nbsp;<span class="op" id="4090032">:=</span>&nbsp;<span class="ident" id="4090035">c</span><span class="op" id="4090036">.</span><span class="ident" id="4090037">RGBA</span><span class="op" id="4090041">(</span><span class="op" id="4090042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090045">return</span>&nbsp;<span class="ident" id="4090052">Alpha</span><span class="op" id="4090057">{</span><span class="builtintype" id="4090058">uint8</span><span class="op" id="4090063">(</span><span class="ident" id="4090064">a</span>&nbsp;<span class="op" id="4090066">&gt;&gt;</span>&nbsp;<span class="num" id="4090069">8</span><span class="op" id="4090070">)</span><span class="op" id="4090071">}</span><br>
<span class="lineno">225</span><span class="op" id="4090073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4090076">func</span>&nbsp;<span class="ident" id="4090081">alpha16Model</span><span class="op" id="4090093">(</span><span class="ident" id="4090094">c</span>&nbsp;<span class="ident" id="4090096">Color</span><span class="op" id="4090101">)</span>&nbsp;<span class="ident" id="4090103">Color</span>&nbsp;<span class="op" id="4090109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090112">if</span>&nbsp;<span class="ident" id="4090115">_</span><span class="op" id="4090116">,</span>&nbsp;<span class="ident" id="4090118">ok</span>&nbsp;<span class="op" id="4090121">:=</span>&nbsp;<span class="ident" id="4090124">c</span><span class="op" id="4090125">.</span><span class="op" id="4090126">(</span><span class="ident" id="4090127">Alpha16</span><span class="op" id="4090134">)</span><span class="op" id="4090135">;</span>&nbsp;<span class="ident" id="4090137">ok</span>&nbsp;<span class="op" id="4090140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090144">return</span>&nbsp;<span class="ident" id="4090151">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090157">_</span><span class="op" id="4090158">,</span>&nbsp;<span class="ident" id="4090160">_</span><span class="op" id="4090161">,</span>&nbsp;<span class="ident" id="4090163">_</span><span class="op" id="4090164">,</span>&nbsp;<span class="ident" id="4090166">a</span>&nbsp;<span class="op" id="4090168">:=</span>&nbsp;<span class="ident" id="4090171">c</span><span class="op" id="4090172">.</span><span class="ident" id="4090173">RGBA</span><span class="op" id="4090177">(</span><span class="op" id="4090178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090181">return</span>&nbsp;<span class="ident" id="4090188">Alpha16</span><span class="op" id="4090195">{</span><span class="builtintype" id="4090196">uint16</span><span class="op" id="4090202">(</span><span class="ident" id="4090203">a</span><span class="op" id="4090204">)</span><span class="op" id="4090205">}</span><br>
<span class="lineno"></span><span class="op" id="4090207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4090210">func</span>&nbsp;<span class="ident" id="4090215">grayModel</span><span class="op" id="4090224">(</span><span class="ident" id="4090225">c</span>&nbsp;<span class="ident" id="4090227">Color</span><span class="op" id="4090232">)</span>&nbsp;<span class="ident" id="4090234">Color</span>&nbsp;<span class="op" id="4090240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090243">if</span>&nbsp;<span class="ident" id="4090246">_</span><span class="op" id="4090247">,</span>&nbsp;<span class="ident" id="4090249">ok</span>&nbsp;<span class="op" id="4090252">:=</span>&nbsp;<span class="ident" id="4090255">c</span><span class="op" id="4090256">.</span><span class="op" id="4090257">(</span><span class="ident" id="4090258">Gray</span><span class="op" id="4090262">)</span><span class="op" id="4090263">;</span>&nbsp;<span class="ident" id="4090265">ok</span>&nbsp;<span class="op" id="4090268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090272">return</span>&nbsp;<span class="ident" id="4090279">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090285">r</span><span class="op" id="4090286">,</span>&nbsp;<span class="ident" id="4090288">g</span><span class="op" id="4090289">,</span>&nbsp;<span class="ident" id="4090291">b</span><span class="op" id="4090292">,</span>&nbsp;<span class="ident" id="4090294">_</span>&nbsp;<span class="op" id="4090296">:=</span>&nbsp;<span class="ident" id="4090299">c</span><span class="op" id="4090300">.</span><span class="ident" id="4090301">RGBA</span><span class="op" id="4090305">(</span><span class="op" id="4090306">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090309">y</span>&nbsp;<span class="op" id="4090311">:=</span>&nbsp;<span class="op" id="4090314">(</span><span class="num" id="4090315">299</span><span class="op" id="4090318">*</span><span class="ident" id="4090319">r</span>&nbsp;<span class="op" id="4090321">+</span>&nbsp;<span class="num" id="4090323">587</span><span class="op" id="4090326">*</span><span class="ident" id="4090327">g</span>&nbsp;<span class="op" id="4090329">+</span>&nbsp;<span class="num" id="4090331">114</span><span class="op" id="4090334">*</span><span class="ident" id="4090335">b</span>&nbsp;<span class="op" id="4090337">+</span>&nbsp;<span class="num" id="4090339">500</span><span class="op" id="4090342">)</span>&nbsp;<span class="op" id="4090344">/</span>&nbsp;<span class="num" id="4090346">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090352">return</span>&nbsp;<span class="ident" id="4090359">Gray</span><span class="op" id="4090363">{</span><span class="builtintype" id="4090364">uint8</span><span class="op" id="4090369">(</span><span class="ident" id="4090370">y</span>&nbsp;<span class="op" id="4090372">&gt;&gt;</span>&nbsp;<span class="num" id="4090375">8</span><span class="op" id="4090376">)</span><span class="op" id="4090377">}</span><br>
<span class="lineno"></span><span class="op" id="4090379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4090382">func</span>&nbsp;<span class="ident" id="4090387">gray16Model</span><span class="op" id="4090398">(</span><span class="ident" id="4090399">c</span>&nbsp;<span class="ident" id="4090401">Color</span><span class="op" id="4090406">)</span>&nbsp;<span class="ident" id="4090408">Color</span>&nbsp;<span class="op" id="4090414">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090417">if</span>&nbsp;<span class="ident" id="4090420">_</span><span class="op" id="4090421">,</span>&nbsp;<span class="ident" id="4090423">ok</span>&nbsp;<span class="op" id="4090426">:=</span>&nbsp;<span class="ident" id="4090429">c</span><span class="op" id="4090430">.</span><span class="op" id="4090431">(</span><span class="ident" id="4090432">Gray16</span><span class="op" id="4090438">)</span><span class="op" id="4090439">;</span>&nbsp;<span class="ident" id="4090441">ok</span>&nbsp;<span class="op" id="4090444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090448">return</span>&nbsp;<span class="ident" id="4090455">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090461">r</span><span class="op" id="4090462">,</span>&nbsp;<span class="ident" id="4090464">g</span><span class="op" id="4090465">,</span>&nbsp;<span class="ident" id="4090467">b</span><span class="op" id="4090468">,</span>&nbsp;<span class="ident" id="4090470">_</span>&nbsp;<span class="op" id="4090472">:=</span>&nbsp;<span class="ident" id="4090475">c</span><span class="op" id="4090476">.</span><span class="ident" id="4090477">RGBA</span><span class="op" id="4090481">(</span><span class="op" id="4090482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090485">y</span>&nbsp;<span class="op" id="4090487">:=</span>&nbsp;<span class="op" id="4090490">(</span><span class="num" id="4090491">299</span><span class="op" id="4090494">*</span><span class="ident" id="4090495">r</span>&nbsp;<span class="op" id="4090497">+</span>&nbsp;<span class="num" id="4090499">587</span><span class="op" id="4090502">*</span><span class="ident" id="4090503">g</span>&nbsp;<span class="op" id="4090505">+</span>&nbsp;<span class="num" id="4090507">114</span><span class="op" id="4090510">*</span><span class="ident" id="4090511">b</span>&nbsp;<span class="op" id="4090513">+</span>&nbsp;<span class="num" id="4090515">500</span><span class="op" id="4090518">)</span>&nbsp;<span class="op" id="4090520">/</span>&nbsp;<span class="num" id="4090522">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090528">return</span>&nbsp;<span class="ident" id="4090535">Gray16</span><span class="op" id="4090541">{</span><span class="builtintype" id="4090542">uint16</span><span class="op" id="4090548">(</span><span class="ident" id="4090549">y</span><span class="op" id="4090550">)</span><span class="op" id="4090551">}</span><br>
<span class="lineno"></span><span class="op" id="4090553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090556">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="4090591">type</span>&nbsp;<span class="ident" id="4090596">Palette</span>&nbsp;<span class="op" id="4090604">[</span><span class="op" id="4090605">]</span><span class="ident" id="4090606">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="4090613">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4090689">func</span>&nbsp;<span class="op" id="4090694">(</span><span class="ident" id="4090695">p</span>&nbsp;<span class="ident" id="4090697">Palette</span><span class="op" id="4090704">)</span>&nbsp;<span class="ident" id="4090706">Convert</span><span class="op" id="4090713">(</span><span class="ident" id="4090714">c</span>&nbsp;<span class="ident" id="4090716">Color</span><span class="op" id="4090721">)</span>&nbsp;<span class="ident" id="4090723">Color</span>&nbsp;<span class="op" id="4090729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090732">if</span>&nbsp;<span class="builtinfunc" id="4090735">len</span><span class="op" id="4090738">(</span><span class="ident" id="4090739">p</span><span class="op" id="4090740">)</span>&nbsp;<span class="op" id="4090742">==</span>&nbsp;<span class="num" id="4090745">0</span>&nbsp;<span class="op" id="4090747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090751">return</span>&nbsp;<span class="ident" id="4090758">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090766">return</span>&nbsp;<span class="ident" id="4090773">p</span><span class="op" id="4090774">[</span><span class="ident" id="4090775">p</span><span class="op" id="4090776">.</span><span class="ident" id="4090777">Index</span><span class="op" id="4090782">(</span><span class="ident" id="4090783">c</span><span class="op" id="4090784">)</span><span class="op" id="4090785">]</span><br>
<span class="lineno"></span><span class="op" id="4090787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090790">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="4090864">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4090880">func</span>&nbsp;<span class="op" id="4090885">(</span><span class="ident" id="4090886">p</span>&nbsp;<span class="ident" id="4090888">Palette</span><span class="op" id="4090895">)</span>&nbsp;<span class="ident" id="4090897">Index</span><span class="op" id="4090902">(</span><span class="ident" id="4090903">c</span>&nbsp;<span class="ident" id="4090905">Color</span><span class="op" id="4090910">)</span>&nbsp;<span class="builtintype" id="4090912">int</span>&nbsp;<span class="op" id="4090916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4090919">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090986">cr</span><span class="op" id="4090988">,</span>&nbsp;<span class="ident" id="4090990">cg</span><span class="op" id="4090992">,</span>&nbsp;<span class="ident" id="4090994">cb</span><span class="op" id="4090996">,</span>&nbsp;<span class="ident" id="4090998">_</span>&nbsp;<span class="op" id="4091000">:=</span>&nbsp;<span class="ident" id="4091003">c</span><span class="op" id="4091004">.</span><span class="ident" id="4091005">RGBA</span><span class="op" id="4091009">(</span><span class="op" id="4091010">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091013">ret</span><span class="op" id="4091016">,</span>&nbsp;<span class="ident" id="4091018">bestSSD</span>&nbsp;<span class="op" id="4091026">:=</span>&nbsp;<span class="num" id="4091029">0</span><span class="op" id="4091030">,</span>&nbsp;<span class="builtintype" id="4091032">uint32</span><span class="op" id="4091038">(</span><span class="num" id="4091039">1</span><span class="op" id="4091040">&lt;&lt;</span><span class="num" id="4091042">32</span><span class="op" id="4091044">-</span><span class="num" id="4091045">1</span><span class="op" id="4091046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091049">for</span>&nbsp;<span class="ident" id="4091053">i</span><span class="op" id="4091054">,</span>&nbsp;<span class="ident" id="4091056">v</span>&nbsp;<span class="op" id="4091058">:=</span>&nbsp;<span class="keyword" id="4091061">range</span>&nbsp;<span class="ident" id="4091067">p</span>&nbsp;<span class="op" id="4091069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091073">vr</span><span class="op" id="4091075">,</span>&nbsp;<span class="ident" id="4091077">vg</span><span class="op" id="4091079">,</span>&nbsp;<span class="ident" id="4091081">vb</span><span class="op" id="4091083">,</span>&nbsp;<span class="ident" id="4091085">_</span>&nbsp;<span class="op" id="4091087">:=</span>&nbsp;<span class="ident" id="4091090">v</span><span class="op" id="4091091">.</span><span class="ident" id="4091092">RGBA</span><span class="op" id="4091096">(</span><span class="op" id="4091097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091101">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091162">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091191">delta</span>&nbsp;<span class="op" id="4091197">:=</span>&nbsp;<span class="op" id="4091200">(</span><span class="builtintype" id="4091201">int32</span><span class="op" id="4091206">(</span><span class="ident" id="4091207">cr</span><span class="op" id="4091209">)</span>&nbsp;<span class="op" id="4091211">-</span>&nbsp;<span class="builtintype" id="4091213">int32</span><span class="op" id="4091218">(</span><span class="ident" id="4091219">vr</span><span class="op" id="4091221">)</span><span class="op" id="4091222">)</span>&nbsp;<span class="op" id="4091224">&gt;&gt;</span>&nbsp;<span class="num" id="4091227">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091231">ssd</span>&nbsp;<span class="op" id="4091235">:=</span>&nbsp;<span class="builtintype" id="4091238">uint32</span><span class="op" id="4091244">(</span><span class="ident" id="4091245">delta</span>&nbsp;<span class="op" id="4091251">*</span>&nbsp;<span class="ident" id="4091253">delta</span><span class="op" id="4091258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091262">delta</span>&nbsp;<span class="op" id="4091268">=</span>&nbsp;<span class="op" id="4091270">(</span><span class="builtintype" id="4091271">int32</span><span class="op" id="4091276">(</span><span class="ident" id="4091277">cg</span><span class="op" id="4091279">)</span>&nbsp;<span class="op" id="4091281">-</span>&nbsp;<span class="builtintype" id="4091283">int32</span><span class="op" id="4091288">(</span><span class="ident" id="4091289">vg</span><span class="op" id="4091291">)</span><span class="op" id="4091292">)</span>&nbsp;<span class="op" id="4091294">&gt;&gt;</span>&nbsp;<span class="num" id="4091297">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091301">ssd</span>&nbsp;<span class="op" id="4091305">+=</span>&nbsp;<span class="builtintype" id="4091308">uint32</span><span class="op" id="4091314">(</span><span class="ident" id="4091315">delta</span>&nbsp;<span class="op" id="4091321">*</span>&nbsp;<span class="ident" id="4091323">delta</span><span class="op" id="4091328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091332">delta</span>&nbsp;<span class="op" id="4091338">=</span>&nbsp;<span class="op" id="4091340">(</span><span class="builtintype" id="4091341">int32</span><span class="op" id="4091346">(</span><span class="ident" id="4091347">cb</span><span class="op" id="4091349">)</span>&nbsp;<span class="op" id="4091351">-</span>&nbsp;<span class="builtintype" id="4091353">int32</span><span class="op" id="4091358">(</span><span class="ident" id="4091359">vb</span><span class="op" id="4091361">)</span><span class="op" id="4091362">)</span>&nbsp;<span class="op" id="4091364">&gt;&gt;</span>&nbsp;<span class="num" id="4091367">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091371">ssd</span>&nbsp;<span class="op" id="4091375">+=</span>&nbsp;<span class="builtintype" id="4091378">uint32</span><span class="op" id="4091384">(</span><span class="ident" id="4091385">delta</span>&nbsp;<span class="op" id="4091391">*</span>&nbsp;<span class="ident" id="4091393">delta</span><span class="op" id="4091398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091402">if</span>&nbsp;<span class="ident" id="4091405">ssd</span>&nbsp;<span class="op" id="4091409">&lt;</span>&nbsp;<span class="ident" id="4091411">bestSSD</span>&nbsp;<span class="op" id="4091419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091424">if</span>&nbsp;<span class="ident" id="4091427">ssd</span>&nbsp;<span class="op" id="4091431">==</span>&nbsp;<span class="num" id="4091434">0</span>&nbsp;<span class="op" id="4091436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091442">return</span>&nbsp;<span class="ident" id="4091449">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091454">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091459">ret</span><span class="op" id="4091462">,</span>&nbsp;<span class="ident" id="4091464">bestSSD</span>&nbsp;<span class="op" id="4091472">=</span>&nbsp;<span class="ident" id="4091474">i</span><span class="op" id="4091475">,</span>&nbsp;<span class="ident" id="4091477">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091489">return</span>&nbsp;<span class="ident" id="4091496">ret</span><br>
<span class="lineno"></span><span class="op" id="4091500">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="4091503">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="4091523">var</span>&nbsp;<span class="op" id="4091527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091530">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091542">=</span>&nbsp;<span class="ident" id="4091544">Gray16</span><span class="op" id="4091550">{</span><span class="num" id="4091551">0</span><span class="op" id="4091552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091555">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091567">=</span>&nbsp;<span class="ident" id="4091569">Gray16</span><span class="op" id="4091575">{</span><span class="num" id="4091576">0xffff</span><span class="op" id="4091582">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091585">Transparent</span>&nbsp;<span class="op" id="4091597">=</span>&nbsp;<span class="ident" id="4091599">Alpha16</span><span class="op" id="4091606">{</span><span class="num" id="4091607">0</span><span class="op" id="4091608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091611">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091623">=</span>&nbsp;<span class="ident" id="4091625">Alpha16</span><span class="op" id="4091632">{</span><span class="num" id="4091633">0xffff</span><span class="op" id="4091639">}</span><br>
<span class="lineno"></span><span class="op" id="4091641">)</span>
</div>
</body>
</html>
