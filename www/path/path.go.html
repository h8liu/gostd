<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2480501">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2480556">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2480610">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2480661">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="2480738">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="2480748">package</span>&nbsp;<span class="ident" id="2480756">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2480762">import</span>&nbsp;<span class="op" id="2480769">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2480772">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="2480782">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2480785">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="2480835">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="2480893">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="2480959">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="2481016">type</span>&nbsp;<span class="ident" id="2481021">lazybuf</span>&nbsp;<span class="keyword" id="2481029">struct</span>&nbsp;<span class="op" id="2481036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481039">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2481043">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481051">buf</span>&nbsp;<span class="op" id="2481055">[</span><span class="op" id="2481056">]</span><span class="builtintype" id="2481057">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481063">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2481067">int</span><br>
<span class="lineno"></span><span class="op" id="2481071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2481074">func</span>&nbsp;<span class="op" id="2481079">(</span><span class="ident" id="2481080">b</span>&nbsp;<span class="op" id="2481082">*</span><span class="ident" id="2481083"><a href="/path/path.go.html#2481021">lazybuf</a></span><span class="op" id="2481090">)</span>&nbsp;<span class="ident" id="2481092">index</span><span class="op" id="2481097">(</span><span class="ident" id="2481098">i</span>&nbsp;<span class="builtintype" id="2481100">int</span><span class="op" id="2481103">)</span>&nbsp;<span class="builtintype" id="2481105">byte</span>&nbsp;<span class="op" id="2481110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481113">if</span>&nbsp;<span class="ident" id="2481116"><a href="/path/path.go.html#2481080">b</a></span><span class="op" id="2481117">.</span><span class="ident" id="2481118">buf</span>&nbsp;<span class="op" id="2481122">!=</span>&nbsp;<span class="ident" id="2481125">nil</span>&nbsp;<span class="op" id="2481129">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481133">return</span>&nbsp;<span class="ident" id="2481140"><a href="/path/path.go.html#2481080">b</a></span><span class="op" id="2481141">.</span><span class="ident" id="2481142">buf</span><span class="op" id="2481145">[</span><span class="ident" id="2481146"><a href="/path/path.go.html#2481098">i</a></span><span class="op" id="2481147">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481153">return</span>&nbsp;<span class="ident" id="2481160"><a href="/path/path.go.html#2481080">b</a></span><span class="op" id="2481161">.</span><span class="ident" id="2481162">s</span><span class="op" id="2481163">[</span><span class="ident" id="2481164"><a href="/path/path.go.html#2481098">i</a></span><span class="op" id="2481165">]</span><br>
<span class="lineno"></span><span class="op" id="2481167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2481170">func</span>&nbsp;<span class="op" id="2481175">(</span><span class="ident" id="2481176">b</span>&nbsp;<span class="op" id="2481178">*</span><span class="ident" id="2481179"><a href="/path/path.go.html#2481021">lazybuf</a></span><span class="op" id="2481186">)</span>&nbsp;<span class="builtinfunc" id="2481188">append</span><span class="op" id="2481194">(</span><span class="ident" id="2481195">c</span>&nbsp;<span class="builtintype" id="2481197">byte</span><span class="op" id="2481201">)</span>&nbsp;<span class="op" id="2481203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481206">if</span>&nbsp;<span class="ident" id="2481209"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481210">.</span><span class="ident" id="2481211">buf</span>&nbsp;<span class="op" id="2481215">==</span>&nbsp;<span class="ident" id="2481218">nil</span>&nbsp;<span class="op" id="2481222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481226">if</span>&nbsp;<span class="ident" id="2481229"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481230">.</span><span class="ident" id="2481231">w</span>&nbsp;<span class="op" id="2481233">&lt;</span>&nbsp;<span class="builtinfunc" id="2481235">len</span><span class="op" id="2481238">(</span><span class="ident" id="2481239"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481240">.</span><span class="ident" id="2481241">s</span><span class="op" id="2481242">)</span>&nbsp;<span class="op" id="2481244">&amp;&amp;</span>&nbsp;<span class="ident" id="2481247"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481248">.</span><span class="ident" id="2481249">s</span><span class="op" id="2481250">[</span><span class="ident" id="2481251"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481252">.</span><span class="ident" id="2481253">w</span><span class="op" id="2481254">]</span>&nbsp;<span class="op" id="2481256">==</span>&nbsp;<span class="ident" id="2481259"><a href="/path/path.go.html#2481195">c</a></span>&nbsp;<span class="op" id="2481261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481266"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481267">.</span><span class="ident" id="2481268">w</span><span class="op" id="2481269">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481275">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481288"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481289">.</span><span class="ident" id="2481290">buf</span>&nbsp;<span class="op" id="2481294">=</span>&nbsp;<span class="builtinfunc" id="2481296">make</span><span class="op" id="2481300">(</span><span class="op" id="2481301">[</span><span class="op" id="2481302">]</span><span class="builtintype" id="2481303">byte</span><span class="op" id="2481307">,</span>&nbsp;<span class="builtinfunc" id="2481309">len</span><span class="op" id="2481312">(</span><span class="ident" id="2481313"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481314">.</span><span class="ident" id="2481315">s</span><span class="op" id="2481316">)</span><span class="op" id="2481317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2481321">copy</span><span class="op" id="2481325">(</span><span class="ident" id="2481326"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481327">.</span><span class="ident" id="2481328">buf</span><span class="op" id="2481331">,</span>&nbsp;<span class="ident" id="2481333"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481334">.</span><span class="ident" id="2481335">s</span><span class="op" id="2481336">[</span><span class="op" id="2481337">:</span><span class="ident" id="2481338"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481339">.</span><span class="ident" id="2481340">w</span><span class="op" id="2481341">]</span><span class="op" id="2481342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481348"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481349">.</span><span class="ident" id="2481350">buf</span><span class="op" id="2481353">[</span><span class="ident" id="2481354"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481355">.</span><span class="ident" id="2481356">w</span><span class="op" id="2481357">]</span>&nbsp;<span class="op" id="2481359">=</span>&nbsp;<span class="ident" id="2481361"><a href="/path/path.go.html#2481195">c</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2481364"><a href="/path/path.go.html#2481176">b</a></span><span class="op" id="2481365">.</span><span class="ident" id="2481366">w</span><span class="op" id="2481367">++</span><br>
<span class="lineno"></span><span class="op" id="2481370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2481373">func</span>&nbsp;<span class="op" id="2481378">(</span><span class="ident" id="2481379">b</span>&nbsp;<span class="op" id="2481381">*</span><span class="ident" id="2481382"><a href="/path/path.go.html#2481021">lazybuf</a></span><span class="op" id="2481389">)</span>&nbsp;<span class="builtintype" id="2481391">string</span><span class="op" id="2481397">(</span><span class="op" id="2481398">)</span>&nbsp;<span class="builtintype" id="2481400">string</span>&nbsp;<span class="op" id="2481407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481410">if</span>&nbsp;<span class="ident" id="2481413"><a href="/path/path.go.html#2481379">b</a></span><span class="op" id="2481414">.</span><span class="ident" id="2481415">buf</span>&nbsp;<span class="op" id="2481419">==</span>&nbsp;<span class="ident" id="2481422">nil</span>&nbsp;<span class="op" id="2481426">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481430">return</span>&nbsp;<span class="ident" id="2481437"><a href="/path/path.go.html#2481379">b</a></span><span class="op" id="2481438">.</span><span class="ident" id="2481439">s</span><span class="op" id="2481440">[</span><span class="op" id="2481441">:</span><span class="ident" id="2481442"><a href="/path/path.go.html#2481379">b</a></span><span class="op" id="2481443">.</span><span class="ident" id="2481444">w</span><span class="op" id="2481445">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2481448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2481451">return</span>&nbsp;<span class="builtintype" id="2481458">string</span><span class="op" id="2481464">(</span><span class="ident" id="2481465"><a href="/path/path.go.html#2481379">b</a></span><span class="op" id="2481466">.</span><span class="ident" id="2481467">buf</span><span class="op" id="2481470">[</span><span class="op" id="2481471">:</span><span class="ident" id="2481472"><a href="/path/path.go.html#2481379">b</a></span><span class="op" id="2481473">.</span><span class="ident" id="2481474">w</span><span class="op" id="2481475">]</span><span class="op" id="2481476">)</span><br>
<span class="lineno"></span><span class="op" id="2481478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="2481481">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="2481540">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="2481605">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="2481661">//</span><br>
<span class="lineno"></span><span class="comment" id="2481664">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="2481716">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="2481782">//&nbsp;&nbsp;&nbsp;&nbsp3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="2481853">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2481907">//&nbsp;&nbsp;&nbsp;&nbsp4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="2481961">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="2482025">//</span><br>
<span class="lineno"></span><span class="comment" id="2482028">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2482093">//</span><br>
<span class="lineno"></span><span class="comment" id="2482096">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="2482155">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="2482182">//</span><br>
<span class="lineno"></span><span class="comment" id="2482185">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2482241">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2482269">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="2482321">func</span>&nbsp;<span class="ident" id="2482326">Clean</span><span class="op" id="2482331">(</span><span class="ident" id="2482332">path</span>&nbsp;<span class="builtintype" id="2482337">string</span><span class="op" id="2482343">)</span>&nbsp;<span class="builtintype" id="2482345">string</span>&nbsp;<span class="op" id="2482352">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482355">if</span>&nbsp;<span class="ident" id="2482358"><a href="/path/path.go.html#2482332">path</a></span>&nbsp;<span class="op" id="2482363">==</span>&nbsp;<span class="string" id="2482366">&#34;&#34;</span>&nbsp;<span class="op" id="2482369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482373">return</span>&nbsp;<span class="string" id="2482380">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482389">rooted</span>&nbsp;<span class="op" id="2482396">:=</span>&nbsp;<span class="ident" id="2482399"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482403">[</span><span class="num" id="2482404">0</span><span class="op" id="2482405">]</span>&nbsp;<span class="op" id="2482407">==</span>&nbsp;<span class="string" id="2482410">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482415">n</span>&nbsp;<span class="op" id="2482417">:=</span>&nbsp;<span class="builtinfunc" id="2482420">len</span><span class="op" id="2482423">(</span><span class="ident" id="2482424"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482428">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482432">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482448">//&nbsp;&nbsp;&nbsp;&nbspreading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482507">//&nbsp;&nbsp;&nbsp;&nbspwriting&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482561">//&nbsp;&nbsp;&nbsp;&nbspdotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482623">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspit&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482688">out</span>&nbsp;<span class="op" id="2482692">:=</span>&nbsp;<span class="ident" id="2482695"><a href="/path/path.go.html#2481021">lazybuf</a></span><span class="op" id="2482702">{</span><span class="ident" id="2482703">s</span><span class="op" id="2482704">:</span>&nbsp;<span class="ident" id="2482706"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482713">r</span><span class="op" id="2482714">,</span>&nbsp;<span class="ident" id="2482716">dotdot</span>&nbsp;<span class="op" id="2482723">:=</span>&nbsp;<span class="num" id="2482726">0</span><span class="op" id="2482727">,</span>&nbsp;<span class="num" id="2482729">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482732">if</span>&nbsp;<span class="ident" id="2482735"><a href="/path/path.go.html#2482389">rooted</a></span>&nbsp;<span class="op" id="2482742">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482746"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2482749">.</span><span class="builtinfunc" id="2482750">append</span><span class="op" id="2482756">(</span><span class="string" id="2482757">&#39;/&#39;</span><span class="op" id="2482760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482764"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482765">,</span>&nbsp;<span class="ident" id="2482767"><a href="/path/path.go.html#2482716">dotdot</a></span>&nbsp;<span class="op" id="2482774">=</span>&nbsp;<span class="num" id="2482776">1</span><span class="op" id="2482777">,</span>&nbsp;<span class="num" id="2482779">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2482782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482786">for</span>&nbsp;<span class="ident" id="2482790"><a href="/path/path.go.html#2482713">r</a></span>&nbsp;<span class="op" id="2482792">&lt;</span>&nbsp;<span class="ident" id="2482794"><a href="/path/path.go.html#2482415">n</a></span>&nbsp;<span class="op" id="2482796">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482800">switch</span>&nbsp;<span class="op" id="2482807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482811">case</span>&nbsp;<span class="ident" id="2482816"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482820">[</span><span class="ident" id="2482821"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482822">]</span>&nbsp;<span class="op" id="2482824">==</span>&nbsp;<span class="string" id="2482827">&#39;/&#39;</span><span class="op" id="2482830">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482835">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482860"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482861">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482866">case</span>&nbsp;<span class="ident" id="2482871"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482875">[</span><span class="ident" id="2482876"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482877">]</span>&nbsp;<span class="op" id="2482879">==</span>&nbsp;<span class="string" id="2482882">&#39;.&#39;</span>&nbsp;<span class="op" id="2482886">&amp;&amp;</span>&nbsp;<span class="op" id="2482889">(</span><span class="ident" id="2482890"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482891">+</span><span class="num" id="2482892">1</span>&nbsp;<span class="op" id="2482894">==</span>&nbsp;<span class="ident" id="2482897"><a href="/path/path.go.html#2482415">n</a></span>&nbsp;<span class="op" id="2482899">||</span>&nbsp;<span class="ident" id="2482902"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482906">[</span><span class="ident" id="2482907"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482908">+</span><span class="num" id="2482909">1</span><span class="op" id="2482910">]</span>&nbsp;<span class="op" id="2482912">==</span>&nbsp;<span class="string" id="2482915">&#39;/&#39;</span><span class="op" id="2482918">)</span><span class="op" id="2482919">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2482924">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2482940"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482941">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2482946">case</span>&nbsp;<span class="ident" id="2482951"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482955">[</span><span class="ident" id="2482956"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482957">]</span>&nbsp;<span class="op" id="2482959">==</span>&nbsp;<span class="string" id="2482962">&#39;.&#39;</span>&nbsp;<span class="op" id="2482966">&amp;&amp;</span>&nbsp;<span class="ident" id="2482969"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2482973">[</span><span class="ident" id="2482974"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482975">+</span><span class="num" id="2482976">1</span><span class="op" id="2482977">]</span>&nbsp;<span class="op" id="2482979">==</span>&nbsp;<span class="string" id="2482982">&#39;.&#39;</span>&nbsp;<span class="op" id="2482986">&amp;&amp;</span>&nbsp;<span class="op" id="2482989">(</span><span class="ident" id="2482990"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2482991">+</span><span class="num" id="2482992">2</span>&nbsp;<span class="op" id="2482994">==</span>&nbsp;<span class="ident" id="2482997"><a href="/path/path.go.html#2482415">n</a></span>&nbsp;<span class="op" id="2482999">||</span>&nbsp;<span class="ident" id="2483002"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2483006">[</span><span class="ident" id="2483007"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2483008">+</span><span class="num" id="2483009">2</span><span class="op" id="2483010">]</span>&nbsp;<span class="op" id="2483012">==</span>&nbsp;<span class="string" id="2483015">&#39;/&#39;</span><span class="op" id="2483018">)</span><span class="op" id="2483019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483024">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483059"><a href="/path/path.go.html#2482713">r</a></span>&nbsp;<span class="op" id="2483061">+=</span>&nbsp;<span class="num" id="2483064">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483069">switch</span>&nbsp;<span class="op" id="2483076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483081">case</span>&nbsp;<span class="ident" id="2483086"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483089">.</span><span class="ident" id="2483090">w</span>&nbsp;<span class="op" id="2483092">&gt;</span>&nbsp;<span class="ident" id="2483094"><a href="/path/path.go.html#2482716">dotdot</a></span><span class="op" id="2483100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483106">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483127"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483130">.</span><span class="ident" id="2483131">w</span><span class="op" id="2483132">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483139">for</span>&nbsp;<span class="ident" id="2483143"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483146">.</span><span class="ident" id="2483147">w</span>&nbsp;<span class="op" id="2483149">&gt;</span>&nbsp;<span class="ident" id="2483151"><a href="/path/path.go.html#2482716">dotdot</a></span>&nbsp;<span class="op" id="2483158">&amp;&amp;</span>&nbsp;<span class="ident" id="2483161"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483164">.</span><span class="ident" id="2483165">index</span><span class="op" id="2483170">(</span><span class="ident" id="2483171"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483174">.</span><span class="ident" id="2483175">w</span><span class="op" id="2483176">)</span>&nbsp;<span class="op" id="2483178">!=</span>&nbsp;<span class="string" id="2483181">&#39;/&#39;</span>&nbsp;<span class="op" id="2483185">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483192"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483195">.</span><span class="ident" id="2483196">w</span><span class="op" id="2483197">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483209">case</span>&nbsp;<span class="op" id="2483214">!</span><span class="ident" id="2483215"><a href="/path/path.go.html#2482389">rooted</a></span><span class="op" id="2483221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483227">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483290">if</span>&nbsp;<span class="ident" id="2483293"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483296">.</span><span class="ident" id="2483297">w</span>&nbsp;<span class="op" id="2483299">&gt;</span>&nbsp;<span class="num" id="2483301">0</span>&nbsp;<span class="op" id="2483303">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483310"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483313">.</span><span class="builtinfunc" id="2483314">append</span><span class="op" id="2483320">(</span><span class="string" id="2483321">&#39;/&#39;</span><span class="op" id="2483324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483336"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483339">.</span><span class="builtinfunc" id="2483340">append</span><span class="op" id="2483346">(</span><span class="string" id="2483347">&#39;.&#39;</span><span class="op" id="2483350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483356"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483359">.</span><span class="builtinfunc" id="2483360">append</span><span class="op" id="2483366">(</span><span class="string" id="2483367">&#39;.&#39;</span><span class="op" id="2483370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483376"><a href="/path/path.go.html#2482716">dotdot</a></span>&nbsp;<span class="op" id="2483383">=</span>&nbsp;<span class="ident" id="2483385"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483388">.</span><span class="ident" id="2483389">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483398">default</span><span class="op" id="2483405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483410">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483435">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483461">if</span>&nbsp;<span class="ident" id="2483464"><a href="/path/path.go.html#2482389">rooted</a></span>&nbsp;<span class="op" id="2483471">&amp;&amp;</span>&nbsp;<span class="ident" id="2483474"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483477">.</span><span class="ident" id="2483478">w</span>&nbsp;<span class="op" id="2483480">!=</span>&nbsp;<span class="num" id="2483483">1</span>&nbsp;<span class="op" id="2483485">||</span>&nbsp;<span class="op" id="2483488">!</span><span class="ident" id="2483489"><a href="/path/path.go.html#2482389">rooted</a></span>&nbsp;<span class="op" id="2483496">&amp;&amp;</span>&nbsp;<span class="ident" id="2483499"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483502">.</span><span class="ident" id="2483503">w</span>&nbsp;<span class="op" id="2483505">!=</span>&nbsp;<span class="num" id="2483508">0</span>&nbsp;<span class="op" id="2483510">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483516"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483519">.</span><span class="builtinfunc" id="2483520">append</span><span class="op" id="2483526">(</span><span class="string" id="2483527">&#39;/&#39;</span><span class="op" id="2483530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483540">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483559">for</span>&nbsp;<span class="op" id="2483563">;</span>&nbsp;<span class="ident" id="2483565"><a href="/path/path.go.html#2482713">r</a></span>&nbsp;<span class="op" id="2483567">&lt;</span>&nbsp;<span class="ident" id="2483569"><a href="/path/path.go.html#2482415">n</a></span>&nbsp;<span class="op" id="2483571">&amp;&amp;</span>&nbsp;<span class="ident" id="2483574"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2483578">[</span><span class="ident" id="2483579"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2483580">]</span>&nbsp;<span class="op" id="2483582">!=</span>&nbsp;<span class="string" id="2483585">&#39;/&#39;</span><span class="op" id="2483588">;</span>&nbsp;<span class="ident" id="2483590"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2483591">++</span>&nbsp;<span class="op" id="2483594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2483600"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483603">.</span><span class="builtinfunc" id="2483604">append</span><span class="op" id="2483610">(</span><span class="ident" id="2483611"><a href="/path/path.go.html#2482332">path</a></span><span class="op" id="2483615">[</span><span class="ident" id="2483616"><a href="/path/path.go.html#2482713">r</a></span><span class="op" id="2483617">]</span><span class="op" id="2483618">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2483634">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483665">if</span>&nbsp;<span class="ident" id="2483668"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483671">.</span><span class="ident" id="2483672">w</span>&nbsp;<span class="op" id="2483674">==</span>&nbsp;<span class="num" id="2483677">0</span>&nbsp;<span class="op" id="2483679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483683">return</span>&nbsp;<span class="string" id="2483690">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2483695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2483699">return</span>&nbsp;<span class="ident" id="2483706"><a href="/path/path.go.html#2482688">out</a></span><span class="op" id="2483709">.</span><span class="builtintype" id="2483710">string</span><span class="op" id="2483716">(</span><span class="op" id="2483717">)</span><br>
<span class="lineno">135</span><span class="op" id="2483719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2483722">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="2483782">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="2483841">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="2483902">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="2483923">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="2483986">func</span>&nbsp;<span class="ident" id="2483991">Split</span><span class="op" id="2483996">(</span><span class="ident" id="2483997">path</span>&nbsp;<span class="builtintype" id="2484002">string</span><span class="op" id="2484008">)</span>&nbsp;<span class="op" id="2484010">(</span><span class="ident" id="2484011">dir</span><span class="op" id="2484014">,</span>&nbsp;<span class="ident" id="2484016">file</span>&nbsp;<span class="builtintype" id="2484021">string</span><span class="op" id="2484027">)</span>&nbsp;<span class="op" id="2484029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2484032">i</span>&nbsp;<span class="op" id="2484034">:=</span>&nbsp;<span class="ident" id="2484037"><a href="/path/path.go.html#2480772">strings</a></span><span class="op" id="2484044">.</span><span class="ident" id="2484045">LastIndex</span><span class="op" id="2484054">(</span><span class="ident" id="2484055"><a href="/path/path.go.html#2483997">path</a></span><span class="op" id="2484059">,</span>&nbsp;<span class="string" id="2484061">&#34;/&#34;</span><span class="op" id="2484064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484067">return</span>&nbsp;<span class="ident" id="2484074"><a href="/path/path.go.html#2483997">path</a></span><span class="op" id="2484078">[</span><span class="op" id="2484079">:</span><span class="ident" id="2484080"><a href="/path/path.go.html#2484032">i</a></span><span class="op" id="2484081">+</span><span class="num" id="2484082">1</span><span class="op" id="2484083">]</span><span class="op" id="2484084">,</span>&nbsp;<span class="ident" id="2484086"><a href="/path/path.go.html#2483997">path</a></span><span class="op" id="2484090">[</span><span class="ident" id="2484091"><a href="/path/path.go.html#2484032">i</a></span><span class="op" id="2484092">+</span><span class="num" id="2484093">1</span><span class="op" id="2484094">:</span><span class="op" id="2484095">]</span><br>
<span class="lineno">145</span><span class="op" id="2484097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2484100">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2484171">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="2484243">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="2484277">func</span>&nbsp;<span class="ident" id="2484282">Join</span><span class="op" id="2484286">(</span><span class="ident" id="2484287">elem</span>&nbsp;<span class="op" id="2484292">...</span><span class="builtintype" id="2484295">string</span><span class="op" id="2484301">)</span>&nbsp;<span class="builtintype" id="2484303">string</span>&nbsp;<span class="op" id="2484310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484313">for</span>&nbsp;<span class="ident" id="2484317">i</span><span class="op" id="2484318">,</span>&nbsp;<span class="ident" id="2484320">e</span>&nbsp;<span class="op" id="2484322">:=</span>&nbsp;<span class="keyword" id="2484325">range</span>&nbsp;<span class="ident" id="2484331"><a href="/path/path.go.html#2484287">elem</a></span>&nbsp;<span class="op" id="2484336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484340">if</span>&nbsp;<span class="ident" id="2484343"><a href="/path/path.go.html#2484320">e</a></span>&nbsp;<span class="op" id="2484345">!=</span>&nbsp;<span class="string" id="2484348">&#34;&#34;</span>&nbsp;<span class="op" id="2484351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484356">return</span>&nbsp;<span class="ident" id="2484363"><a href="/path/path.go.html#2482326">Clean</a></span><span class="op" id="2484368">(</span><span class="ident" id="2484369"><a href="/path/path.go.html#2480772">strings</a></span><span class="op" id="2484376">.</span><span class="ident" id="2484377">Join</span><span class="op" id="2484381">(</span><span class="ident" id="2484382"><a href="/path/path.go.html#2484287">elem</a></span><span class="op" id="2484386">[</span><span class="ident" id="2484387"><a href="/path/path.go.html#2484317">i</a></span><span class="op" id="2484388">:</span><span class="op" id="2484389">]</span><span class="op" id="2484390">,</span>&nbsp;<span class="string" id="2484392">&#34;/&#34;</span><span class="op" id="2484395">)</span><span class="op" id="2484396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484400">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484406">return</span>&nbsp;<span class="string" id="2484413">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2484416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2484419">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="2484472">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="2484530">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="2484579">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="2484614">func</span>&nbsp;<span class="ident" id="2484619">Ext</span><span class="op" id="2484622">(</span><span class="ident" id="2484623">path</span>&nbsp;<span class="builtintype" id="2484628">string</span><span class="op" id="2484634">)</span>&nbsp;<span class="builtintype" id="2484636">string</span>&nbsp;<span class="op" id="2484643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484646">for</span>&nbsp;<span class="ident" id="2484650">i</span>&nbsp;<span class="op" id="2484652">:=</span>&nbsp;<span class="builtinfunc" id="2484655">len</span><span class="op" id="2484658">(</span><span class="ident" id="2484659"><a href="/path/path.go.html#2484623">path</a></span><span class="op" id="2484663">)</span>&nbsp;<span class="op" id="2484665">-</span>&nbsp;<span class="num" id="2484667">1</span><span class="op" id="2484668">;</span>&nbsp;<span class="ident" id="2484670"><a href="/path/path.go.html#2484650">i</a></span>&nbsp;<span class="op" id="2484672">&gt;=</span>&nbsp;<span class="num" id="2484675">0</span>&nbsp;<span class="op" id="2484677">&amp;&amp;</span>&nbsp;<span class="ident" id="2484680"><a href="/path/path.go.html#2484623">path</a></span><span class="op" id="2484684">[</span><span class="ident" id="2484685"><a href="/path/path.go.html#2484650">i</a></span><span class="op" id="2484686">]</span>&nbsp;<span class="op" id="2484688">!=</span>&nbsp;<span class="string" id="2484691">&#39;/&#39;</span><span class="op" id="2484694">;</span>&nbsp;<span class="ident" id="2484696"><a href="/path/path.go.html#2484650">i</a></span><span class="op" id="2484697">--</span>&nbsp;<span class="op" id="2484700">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484704">if</span>&nbsp;<span class="ident" id="2484707"><a href="/path/path.go.html#2484623">path</a></span><span class="op" id="2484711">[</span><span class="ident" id="2484712"><a href="/path/path.go.html#2484650">i</a></span><span class="op" id="2484713">]</span>&nbsp;<span class="op" id="2484715">==</span>&nbsp;<span class="string" id="2484718">&#39;.&#39;</span>&nbsp;<span class="op" id="2484722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484727">return</span>&nbsp;<span class="ident" id="2484734"><a href="/path/path.go.html#2484623">path</a></span><span class="op" id="2484738">[</span><span class="ident" id="2484739"><a href="/path/path.go.html#2484650">i</a></span><span class="op" id="2484740">:</span><span class="op" id="2484741">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2484748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2484751">return</span>&nbsp;<span class="string" id="2484758">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="2484761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2484764">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="2484806">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2484874">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="2484917">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2484980">func</span>&nbsp;<span class="ident" id="2484985">Base</span><span class="op" id="2484989">(</span><span class="ident" id="2484990">path</span>&nbsp;<span class="builtintype" id="2484995">string</span><span class="op" id="2485001">)</span>&nbsp;<span class="builtintype" id="2485003">string</span>&nbsp;<span class="op" id="2485010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485013">if</span>&nbsp;<span class="ident" id="2485016"><a href="/path/path.go.html#2484990">path</a></span>&nbsp;<span class="op" id="2485021">==</span>&nbsp;<span class="string" id="2485024">&#34;&#34;</span>&nbsp;<span class="op" id="2485027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485031">return</span>&nbsp;<span class="string" id="2485038">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485043">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485046">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485074">for</span>&nbsp;<span class="builtinfunc" id="2485078">len</span><span class="op" id="2485081">(</span><span class="ident" id="2485082"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485086">)</span>&nbsp;<span class="op" id="2485088">&gt;</span>&nbsp;<span class="num" id="2485090">0</span>&nbsp;<span class="op" id="2485092">&amp;&amp;</span>&nbsp;<span class="ident" id="2485095"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485099">[</span><span class="builtinfunc" id="2485100">len</span><span class="op" id="2485103">(</span><span class="ident" id="2485104"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485108">)</span><span class="op" id="2485109">-</span><span class="num" id="2485110">1</span><span class="op" id="2485111">]</span>&nbsp;<span class="op" id="2485113">==</span>&nbsp;<span class="string" id="2485116">&#39;/&#39;</span>&nbsp;<span class="op" id="2485120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485124"><a href="/path/path.go.html#2484990">path</a></span>&nbsp;<span class="op" id="2485129">=</span>&nbsp;<span class="ident" id="2485131"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485135">[</span><span class="num" id="2485136">0</span>&nbsp;<span class="op" id="2485138">:</span>&nbsp;<span class="builtinfunc" id="2485140">len</span><span class="op" id="2485143">(</span><span class="ident" id="2485144"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485148">)</span><span class="op" id="2485149">-</span><span class="num" id="2485150">1</span><span class="op" id="2485151">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485157">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485183">if</span>&nbsp;<span class="ident" id="2485186">i</span>&nbsp;<span class="op" id="2485188">:=</span>&nbsp;<span class="ident" id="2485191"><a href="/path/path.go.html#2480772">strings</a></span><span class="op" id="2485198">.</span><span class="ident" id="2485199">LastIndex</span><span class="op" id="2485208">(</span><span class="ident" id="2485209"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485213">,</span>&nbsp;<span class="string" id="2485215">&#34;/&#34;</span><span class="op" id="2485218">)</span><span class="op" id="2485219">;</span>&nbsp;<span class="ident" id="2485221"><a href="/path/path.go.html#2485186">i</a></span>&nbsp;<span class="op" id="2485223">&gt;=</span>&nbsp;<span class="num" id="2485226">0</span>&nbsp;<span class="op" id="2485228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485232"><a href="/path/path.go.html#2484990">path</a></span>&nbsp;<span class="op" id="2485237">=</span>&nbsp;<span class="ident" id="2485239"><a href="/path/path.go.html#2484990">path</a></span><span class="op" id="2485243">[</span><span class="ident" id="2485244"><a href="/path/path.go.html#2485186">i</a></span><span class="op" id="2485245">+</span><span class="num" id="2485246">1</span><span class="op" id="2485247">:</span><span class="op" id="2485248">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2485254">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485293">if</span>&nbsp;<span class="ident" id="2485296"><a href="/path/path.go.html#2484990">path</a></span>&nbsp;<span class="op" id="2485301">==</span>&nbsp;<span class="string" id="2485304">&#34;&#34;</span>&nbsp;<span class="op" id="2485307">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485311">return</span>&nbsp;<span class="string" id="2485318">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2485323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485326">return</span>&nbsp;<span class="ident" id="2485333"><a href="/path/path.go.html#2484990">path</a></span><br>
<span class="lineno"></span><span class="op" id="2485338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="2485341">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="2485388">func</span>&nbsp;<span class="ident" id="2485393">IsAbs</span><span class="op" id="2485398">(</span><span class="ident" id="2485399">path</span>&nbsp;<span class="builtintype" id="2485404">string</span><span class="op" id="2485410">)</span>&nbsp;<span class="builtintype" id="2485412">bool</span>&nbsp;<span class="op" id="2485417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485420">return</span>&nbsp;<span class="builtinfunc" id="2485427">len</span><span class="op" id="2485430">(</span><span class="ident" id="2485431"><a href="/path/path.go.html#2485399">path</a></span><span class="op" id="2485435">)</span>&nbsp;<span class="op" id="2485437">&gt;</span>&nbsp;<span class="num" id="2485439">0</span>&nbsp;<span class="op" id="2485441">&amp;&amp;</span>&nbsp;<span class="ident" id="2485444"><a href="/path/path.go.html#2485399">path</a></span><span class="op" id="2485448">[</span><span class="num" id="2485449">0</span><span class="op" id="2485450">]</span>&nbsp;<span class="op" id="2485452">==</span>&nbsp;<span class="string" id="2485455">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="2485459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="2485462">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2485543">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="2485625">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="2485649">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2485691">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="2485768">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2485850">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="2485860">func</span>&nbsp;<span class="ident" id="2485865">Dir</span><span class="op" id="2485868">(</span><span class="ident" id="2485869">path</span>&nbsp;<span class="builtintype" id="2485874">string</span><span class="op" id="2485880">)</span>&nbsp;<span class="builtintype" id="2485882">string</span>&nbsp;<span class="op" id="2485889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2485892">dir</span><span class="op" id="2485895">,</span>&nbsp;<span class="ident" id="2485897">_</span>&nbsp;<span class="op" id="2485899">:=</span>&nbsp;<span class="ident" id="2485902"><a href="/path/path.go.html#2483991">Split</a></span><span class="op" id="2485907">(</span><span class="ident" id="2485908"><a href="/path/path.go.html#2485869">path</a></span><span class="op" id="2485912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2485915">return</span>&nbsp;<span class="ident" id="2485922"><a href="/path/path.go.html#2482326">Clean</a></span><span class="op" id="2485927">(</span><span class="ident" id="2485928"><a href="/path/path.go.html#2485892">dir</a></span><span class="op" id="2485931">)</span><br>
<span class="lineno">210</span><span class="op" id="2485933">}</span>
</div>
</body>
</html>
