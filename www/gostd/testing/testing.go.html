<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html" class="current">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5467261">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5467316">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5467370">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5467421">//&nbsp;Package&nbsp;testing&nbsp;provides&nbsp;support&nbsp;for&nbsp;automated&nbsp;testing&nbsp;of&nbsp;Go&nbsp;packages.</span><br>
<span class="lineno"></span><span class="comment" id="5467495">//&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;concert&nbsp;with&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command,&nbsp;which&nbsp;automates</span><br>
<span class="lineno"></span><span class="comment" id="5467581">//&nbsp;execution&nbsp;of&nbsp;any&nbsp;function&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5467622">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestXxx(*testing.T)</span><br>
<span class="lineno"></span><span class="comment" id="5467654">//&nbsp;where&nbsp;Xxx&nbsp;can&nbsp;be&nbsp;any&nbsp;alphanumeric&nbsp;string&nbsp;(but&nbsp;the&nbsp;first&nbsp;letter&nbsp;must&nbsp;not&nbsp;be&nbsp;in</span><br>
<span class="lineno">10</span><span class="comment" id="5467735">//&nbsp;[a-z])&nbsp;and&nbsp;serves&nbsp;to&nbsp;identify&nbsp;the&nbsp;test&nbsp;routine.</span><br>
<span class="lineno"></span><span class="comment" id="5467786">//</span><br>
<span class="lineno"></span><span class="comment" id="5467789">//&nbsp;Within&nbsp;these&nbsp;functions,&nbsp;use&nbsp;the&nbsp;Error,&nbsp;Fail&nbsp;or&nbsp;related&nbsp;methods&nbsp;to&nbsp;signal&nbsp;failure.</span><br>
<span class="lineno"></span><span class="comment" id="5467874">//</span><br>
<span class="lineno"></span><span class="comment" id="5467877">//&nbsp;To&nbsp;write&nbsp;a&nbsp;new&nbsp;test&nbsp;suite,&nbsp;create&nbsp;a&nbsp;file&nbsp;whose&nbsp;name&nbsp;ends&nbsp;_test.go&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="5467951">//&nbsp;contains&nbsp;the&nbsp;TestXxx&nbsp;functions&nbsp;as&nbsp;described&nbsp;here.&nbsp;Put&nbsp;the&nbsp;file&nbsp;in&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="5468029">//&nbsp;package&nbsp;as&nbsp;the&nbsp;one&nbsp;being&nbsp;tested.&nbsp;The&nbsp;file&nbsp;will&nbsp;be&nbsp;excluded&nbsp;from&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="5468104">//&nbsp;package&nbsp;builds&nbsp;but&nbsp;will&nbsp;be&nbsp;included&nbsp;when&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span><span class="comment" id="5468180">//&nbsp;For&nbsp;more&nbsp;detail,&nbsp;run&nbsp;``go&nbsp;help&nbsp;test&#39;&#39;&nbsp;and&nbsp;``go&nbsp;help&nbsp;testflag&#39;&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5468247">//</span><br>
<span class="lineno">20</span><span class="comment" id="5468250">//&nbsp;Tests&nbsp;and&nbsp;benchmarks&nbsp;may&nbsp;be&nbsp;skipped&nbsp;if&nbsp;not&nbsp;applicable&nbsp;with&nbsp;a&nbsp;call&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5468322">//&nbsp;the&nbsp;Skip&nbsp;method&nbsp;of&nbsp;*T&nbsp;and&nbsp;*B:</span><br>
<span class="lineno"></span><span class="comment" id="5468355">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestTimeConsuming(t&nbsp;*testing.T)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5468401">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;testing.Short()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5468433">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Skip(&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode.&#34;)</span><br>
<span class="lineno">25</span><span class="comment" id="5468487">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5468500">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="lineno"></span><span class="comment" id="5468515">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5468524">//</span><br>
<span class="lineno"></span><span class="comment" id="5468527">//&nbsp;Benchmarks</span><br>
<span class="lineno">30</span><span class="comment" id="5468541">//</span><br>
<span class="lineno"></span><span class="comment" id="5468544">//&nbsp;Functions&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5468569">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkXxx(*testing.B)</span><br>
<span class="lineno"></span><span class="comment" id="5468606">//&nbsp;are&nbsp;considered&nbsp;benchmarks,&nbsp;and&nbsp;are&nbsp;executed&nbsp;by&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5468683">//&nbsp;its&nbsp;-bench&nbsp;flag&nbsp;is&nbsp;provided.&nbsp;Benchmarks&nbsp;are&nbsp;run&nbsp;sequentially.</span><br>
<span class="lineno">35</span><span class="comment" id="5468748">//</span><br>
<span class="lineno"></span><span class="comment" id="5468751">//&nbsp;For&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;testing&nbsp;flags,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="5468798">//&nbsp;http://golang.org/cmd/go/#hdr-Description_of_testing_flags.</span><br>
<span class="lineno"></span><span class="comment" id="5468861">//</span><br>
<span class="lineno"></span><span class="comment" id="5468864">//&nbsp;A&nbsp;sample&nbsp;benchmark&nbsp;function&nbsp;looks&nbsp;like&nbsp;this:</span><br>
<span class="lineno">40</span><span class="comment" id="5468912">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkHello(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5468955">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5468993">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprintf(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5469029">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5469042">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">45</span><span class="comment" id="5469051">//</span><br>
<span class="lineno"></span><span class="comment" id="5469054">//&nbsp;The&nbsp;benchmark&nbsp;function&nbsp;must&nbsp;run&nbsp;the&nbsp;target&nbsp;code&nbsp;b.N&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="5469116">//&nbsp;During&nbsp;benchark&nbsp;execution,&nbsp;b.N&nbsp;is&nbsp;adjusted&nbsp;until&nbsp;the&nbsp;benchmark&nbsp;function&nbsp;lasts</span><br>
<span class="lineno"></span><span class="comment" id="5469197">//&nbsp;long&nbsp;enough&nbsp;to&nbsp;be&nbsp;timed&nbsp;reliably.&nbsp;&nbsp;The&nbsp;output</span><br>
<span class="lineno"></span><span class="comment" id="5469246">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BenchmarkHello&nbsp;&nbsp;&nbsp;&nbsp;10000000&nbsp;&nbsp;&nbsp;&nbsp;282&nbsp;ns/op</span><br>
<span class="lineno">50</span><span class="comment" id="5469293">//&nbsp;means&nbsp;that&nbsp;the&nbsp;loop&nbsp;ran&nbsp;10000000&nbsp;times&nbsp;at&nbsp;a&nbsp;speed&nbsp;of&nbsp;282&nbsp;ns&nbsp;per&nbsp;loop.</span><br>
<span class="lineno"></span><span class="comment" id="5469366">//</span><br>
<span class="lineno"></span><span class="comment" id="5469369">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;some&nbsp;expensive&nbsp;setup&nbsp;before&nbsp;running,&nbsp;the&nbsp;timer</span><br>
<span class="lineno"></span><span class="comment" id="5469440">//&nbsp;may&nbsp;be&nbsp;reset:</span><br>
<span class="lineno"></span><span class="comment" id="5469457">//</span><br>
<span class="lineno">55</span><span class="comment" id="5469460">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkBigLen(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5469504">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big&nbsp;:=&nbsp;NewBig()</span><br>
<span class="lineno"></span><span class="comment" id="5469531">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.ResetTimer()</span><br>
<span class="lineno"></span><span class="comment" id="5469557">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5469595">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big.Len()</span><br>
<span class="lineno">60</span><span class="comment" id="5469620">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5469633">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5469642">//</span><br>
<span class="lineno"></span><span class="comment" id="5469645">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;to&nbsp;test&nbsp;performance&nbsp;in&nbsp;a&nbsp;parallel&nbsp;setting,&nbsp;it&nbsp;may&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="5469723">//&nbsp;the&nbsp;RunParallel&nbsp;helper&nbsp;function;&nbsp;such&nbsp;benchmarks&nbsp;are&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;with</span><br>
<span class="lineno">65</span><span class="comment" id="5469804">//&nbsp;the&nbsp;go&nbsp;test&nbsp;-cpu&nbsp;flag:</span><br>
<span class="lineno"></span><span class="comment" id="5469830">//</span><br>
<span class="lineno"></span><span class="comment" id="5469833">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkTemplateParallel(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5469887">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ&nbsp;:=&nbsp;template.Must(template.New(&#34;test&#34;).Parse(&#34;Hello,&nbsp;{{.}}!&#34;))</span><br>
<span class="lineno"></span><span class="comment" id="5469966">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.RunParallel(func(pb&nbsp;*testing.PB)&nbsp;{</span><br>
<span class="lineno">70</span><span class="comment" id="5470014">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;buf&nbsp;bytes.Buffer</span><br>
<span class="lineno"></span><span class="comment" id="5470050">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pb.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5470081">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf.Reset()</span><br>
<span class="lineno"></span><span class="comment" id="5470112">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ.Execute(&amp;buf,&nbsp;&#34;World&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5470160">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">75</span><span class="comment" id="5470177">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><br>
<span class="lineno"></span><span class="comment" id="5470191">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5470200">//</span><br>
<span class="lineno"></span><span class="comment" id="5470203">//&nbsp;Examples</span><br>
<span class="lineno"></span><span class="comment" id="5470215">//</span><br>
<span class="lineno">80</span><span class="comment" id="5470218">//&nbsp;The&nbsp;package&nbsp;also&nbsp;runs&nbsp;and&nbsp;verifies&nbsp;example&nbsp;code.&nbsp;Example&nbsp;functions&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="5470292">//&nbsp;include&nbsp;a&nbsp;concluding&nbsp;line&nbsp;comment&nbsp;that&nbsp;begins&nbsp;with&nbsp;&#34;Output:&#34;&nbsp;and&nbsp;is&nbsp;compared&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5470377">//&nbsp;the&nbsp;standard&nbsp;output&nbsp;of&nbsp;the&nbsp;function&nbsp;when&nbsp;the&nbsp;tests&nbsp;are&nbsp;run.&nbsp;(The&nbsp;comparison</span><br>
<span class="lineno"></span><span class="comment" id="5470456">//&nbsp;ignores&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space.)&nbsp;These&nbsp;are&nbsp;examples&nbsp;of&nbsp;an&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="5470530">//</span><br>
<span class="lineno">85</span><span class="comment" id="5470533">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleHello()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5470562">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5470598">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:&nbsp;hello</span><br>
<span class="lineno"></span><span class="comment" id="5470630">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5470639">//</span><br>
<span class="lineno">90</span><span class="comment" id="5470642">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleSalutations()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5470677">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello,&nbsp;and&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5470718">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;goodbye&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5470756">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:</span><br>
<span class="lineno"></span><span class="comment" id="5470782">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hello,&nbsp;and</span><br>
<span class="lineno">95</span><span class="comment" id="5470811">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;goodbye</span><br>
<span class="lineno"></span><span class="comment" id="5470837">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5470846">//</span><br>
<span class="lineno"></span><span class="comment" id="5470849">//&nbsp;Example&nbsp;functions&nbsp;without&nbsp;output&nbsp;comments&nbsp;are&nbsp;compiled&nbsp;but&nbsp;not&nbsp;executed.</span><br>
<span class="lineno"></span><span class="comment" id="5470925">//</span><br>
<span class="lineno">100</span><span class="comment" id="5470928">//&nbsp;The&nbsp;naming&nbsp;convention&nbsp;to&nbsp;declare&nbsp;examples&nbsp;for&nbsp;the&nbsp;package,&nbsp;a&nbsp;function&nbsp;F,&nbsp;a&nbsp;type&nbsp;T&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5471017">//&nbsp;method&nbsp;M&nbsp;on&nbsp;type&nbsp;T&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5471044">//</span><br>
<span class="lineno"></span><span class="comment" id="5471047">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471077">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">105</span><span class="comment" id="5471108">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471139">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471172">//</span><br>
<span class="lineno"></span><span class="comment" id="5471175">//&nbsp;Multiple&nbsp;example&nbsp;functions&nbsp;for&nbsp;a&nbsp;package/type/function/method&nbsp;may&nbsp;be&nbsp;provided&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5471259">//&nbsp;appending&nbsp;a&nbsp;distinct&nbsp;suffix&nbsp;to&nbsp;the&nbsp;name.&nbsp;The&nbsp;suffix&nbsp;must&nbsp;start&nbsp;with&nbsp;a</span><br>
<span class="lineno">110</span><span class="comment" id="5471332">//&nbsp;lower-case&nbsp;letter.</span><br>
<span class="lineno"></span><span class="comment" id="5471354">//</span><br>
<span class="lineno"></span><span class="comment" id="5471357">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471394">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471432">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">115</span><span class="comment" id="5471470">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5471510">//</span><br>
<span class="lineno"></span><span class="comment" id="5471513">//&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;presented&nbsp;as&nbsp;the&nbsp;example&nbsp;when&nbsp;it&nbsp;contains&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span><span class="comment" id="5471591">//&nbsp;example&nbsp;function,&nbsp;at&nbsp;least&nbsp;one&nbsp;other&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant</span><br>
<span class="lineno"></span><span class="comment" id="5471669">//&nbsp;declaration,&nbsp;and&nbsp;no&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions.</span><br>
<span class="lineno">120</span><span class="comment" id="5471721">//</span><br>
<span class="lineno"></span><span class="comment" id="5471724">//&nbsp;Main</span><br>
<span class="lineno"></span><span class="comment" id="5471732">//</span><br>
<span class="lineno"></span><span class="comment" id="5471735">//&nbsp;It&nbsp;is&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;program&nbsp;to&nbsp;do&nbsp;extra&nbsp;setup&nbsp;or&nbsp;teardown</span><br>
<span class="lineno"></span><span class="comment" id="5471813">//&nbsp;before&nbsp;or&nbsp;after&nbsp;testing.&nbsp;It&nbsp;is&nbsp;also&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;to&nbsp;control</span><br>
<span class="lineno">125</span><span class="comment" id="5471894">//&nbsp;which&nbsp;code&nbsp;runs&nbsp;on&nbsp;the&nbsp;main&nbsp;thread.&nbsp;To&nbsp;support&nbsp;these&nbsp;and&nbsp;other&nbsp;cases,</span><br>
<span class="lineno"></span><span class="comment" id="5471967">//&nbsp;if&nbsp;a&nbsp;test&nbsp;file&nbsp;contains&nbsp;a&nbsp;function:</span><br>
<span class="lineno"></span><span class="comment" id="5472006">//</span><br>
<span class="lineno"></span><span class="comment" id="5472009">//&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestMain(m&nbsp;*testing.M)</span><br>
<span class="lineno"></span><span class="comment" id="5472040">//</span><br>
<span class="lineno">130</span><span class="comment" id="5472043">//&nbsp;then&nbsp;the&nbsp;generated&nbsp;test&nbsp;will&nbsp;call&nbsp;TestMain(m)&nbsp;instead&nbsp;of&nbsp;running&nbsp;the&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="5472121">//&nbsp;directly.&nbsp;TestMain&nbsp;runs&nbsp;in&nbsp;the&nbsp;main&nbsp;goroutine&nbsp;and&nbsp;can&nbsp;do&nbsp;whatever&nbsp;setup</span><br>
<span class="lineno"></span><span class="comment" id="5472196">//&nbsp;and&nbsp;teardown&nbsp;is&nbsp;necessary&nbsp;around&nbsp;a&nbsp;call&nbsp;to&nbsp;m.Run.&nbsp;It&nbsp;should&nbsp;then&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="5472269">//&nbsp;os.Exit&nbsp;with&nbsp;the&nbsp;result&nbsp;of&nbsp;m.Run.</span><br>
<span class="lineno"></span><span class="comment" id="5472306">//</span><br>
<span class="lineno">135</span><span class="comment" id="5472309">//&nbsp;The&nbsp;minimal&nbsp;implementation&nbsp;of&nbsp;TestMain&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="5472355">//</span><br>
<span class="lineno"></span><span class="comment" id="5472358">//&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestMain(m&nbsp;*testing.M)&nbsp;{&nbsp;os.Exit(m.Run())&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5472410">//</span><br>
<span class="lineno"></span><span class="comment" id="5472413">//&nbsp;In&nbsp;effect,&nbsp;that&nbsp;is&nbsp;the&nbsp;implementation&nbsp;used&nbsp;when&nbsp;no&nbsp;TestMain&nbsp;is&nbsp;explicitly&nbsp;defined.</span><br>
<span class="lineno">140</span><span class="keyword" id="5472499">package</span>&nbsp;<span class="ident" id="5472507">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5472516">import</span>&nbsp;<span class="op" id="5472523">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472526">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472535">&#34;flag&#34;</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472543">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472550">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472556">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472567">&#34;runtime/pprof&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472584">&#34;strconv&#34;</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472595">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472606">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5472614">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5472621">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="5472624">var</span>&nbsp;<span class="op" id="5472628">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5472631">//&nbsp;The&nbsp;short&nbsp;flag&nbsp;requests&nbsp;that&nbsp;tests&nbsp;run&nbsp;more&nbsp;quickly,&nbsp;but&nbsp;its&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5472710">//&nbsp;is&nbsp;provided&nbsp;by&nbsp;test&nbsp;writers&nbsp;themselves.&nbsp;&nbsp;The&nbsp;testing&nbsp;package&nbsp;is&nbsp;just&nbsp;its</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5472787">//&nbsp;home.&nbsp;&nbsp;The&nbsp;all.bash&nbsp;installation&nbsp;script&nbsp;sets&nbsp;it&nbsp;to&nbsp;make&nbsp;installation&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5472865">//&nbsp;efficient,&nbsp;but&nbsp;by&nbsp;default&nbsp;the&nbsp;flag&nbsp;is&nbsp;off&nbsp;so&nbsp;a&nbsp;plain&nbsp;&#34;go&nbsp;test&#34;&nbsp;will&nbsp;do&nbsp;a</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5472942">//&nbsp;full&nbsp;test&nbsp;of&nbsp;the&nbsp;package.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5472972">short</span>&nbsp;<span class="op" id="5472978">=</span>&nbsp;<span class="ident" id="5472980"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5472984">.</span><span class="ident" id="5472985"><a href="/gostd/flag/flag.go.html#3948389">Bool</a></span><span class="op" id="5472989">(</span><span class="string" id="5472990">&#34;test.short&#34;</span><span class="op" id="5473002">,</span>&nbsp;<span class="builtintype" id="5473004">false</span><span class="op" id="5473009">,</span>&nbsp;<span class="string" id="5473011">&#34;run&nbsp;smaller&nbsp;test&nbsp;suite&nbsp;to&nbsp;save&nbsp;time&#34;</span><span class="op" id="5473048">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5473052">//&nbsp;The&nbsp;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;create&nbsp;profile&nbsp;files&nbsp;and&nbsp;the&nbsp;like.&nbsp;When&nbsp;run&nbsp;from</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5473131">//&nbsp;&#34;go&nbsp;test&#34;,&nbsp;the&nbsp;binary&nbsp;always&nbsp;runs&nbsp;in&nbsp;the&nbsp;source&nbsp;directory&nbsp;for&nbsp;the&nbsp;package;</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5473210">//&nbsp;this&nbsp;flag&nbsp;lets&nbsp;&#34;go&nbsp;test&#34;&nbsp;tell&nbsp;the&nbsp;binary&nbsp;to&nbsp;write&nbsp;the&nbsp;files&nbsp;in&nbsp;the&nbsp;directory&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5473297">//&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473331">outputDir</span>&nbsp;<span class="op" id="5473341">=</span>&nbsp;<span class="ident" id="5473343"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473347">.</span><span class="ident" id="5473348"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5473354">(</span><span class="string" id="5473355">&#34;test.outputdir&#34;</span><span class="op" id="5473371">,</span>&nbsp;<span class="string" id="5473373">&#34;&#34;</span><span class="op" id="5473375">,</span>&nbsp;<span class="string" id="5473377">&#34;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;write&nbsp;profiles&#34;</span><span class="op" id="5473415">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5473419">//&nbsp;Report&nbsp;as&nbsp;tests&nbsp;are&nbsp;run;&nbsp;default&nbsp;is&nbsp;silent&nbsp;for&nbsp;success.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473479">chatty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5473496">=</span>&nbsp;<span class="ident" id="5473498"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473502">.</span><span class="ident" id="5473503"><a href="/gostd/flag/flag.go.html#3948389">Bool</a></span><span class="op" id="5473507">(</span><span class="string" id="5473508">&#34;test.v&#34;</span><span class="op" id="5473516">,</span>&nbsp;<span class="builtintype" id="5473518">false</span><span class="op" id="5473523">,</span>&nbsp;<span class="string" id="5473525">&#34;verbose:&nbsp;print&nbsp;additional&nbsp;output&#34;</span><span class="op" id="5473559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473562">coverProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5473579">=</span>&nbsp;<span class="ident" id="5473581"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473585">.</span><span class="ident" id="5473586"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5473592">(</span><span class="string" id="5473593">&#34;test.coverprofile&#34;</span><span class="op" id="5473612">,</span>&nbsp;<span class="string" id="5473614">&#34;&#34;</span><span class="op" id="5473616">,</span>&nbsp;<span class="string" id="5473618">&#34;write&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5473678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473681">match</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5473698">=</span>&nbsp;<span class="ident" id="5473700"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473704">.</span><span class="ident" id="5473705"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5473711">(</span><span class="string" id="5473712">&#34;test.run&#34;</span><span class="op" id="5473722">,</span>&nbsp;<span class="string" id="5473724">&#34;&#34;</span><span class="op" id="5473726">,</span>&nbsp;<span class="string" id="5473728">&#34;regular&nbsp;expression&nbsp;to&nbsp;select&nbsp;tests&nbsp;and&nbsp;examples&nbsp;to&nbsp;run&#34;</span><span class="op" id="5473784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473787">memProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5473804">=</span>&nbsp;<span class="ident" id="5473806"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473810">.</span><span class="ident" id="5473811"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5473817">(</span><span class="string" id="5473818">&#34;test.memprofile&#34;</span><span class="op" id="5473835">,</span>&nbsp;<span class="string" id="5473837">&#34;&#34;</span><span class="op" id="5473839">,</span>&nbsp;<span class="string" id="5473841">&#34;write&nbsp;a&nbsp;memory&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5473899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473902">memProfileRate</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5473919">=</span>&nbsp;<span class="ident" id="5473921"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5473925">.</span><span class="ident" id="5473926"><a href="/gostd/flag/flag.go.html#3949535">Int</a></span><span class="op" id="5473929">(</span><span class="string" id="5473930">&#34;test.memprofilerate&#34;</span><span class="op" id="5473951">,</span>&nbsp;<span class="num" id="5473953">0</span><span class="op" id="5473954">,</span>&nbsp;<span class="string" id="5473956">&#34;if&nbsp;&gt;=0,&nbsp;sets&nbsp;runtime.MemProfileRate&#34;</span><span class="op" id="5473993">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473996">cpuProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474013">=</span>&nbsp;<span class="ident" id="5474015"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474019">.</span><span class="ident" id="5474020"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5474026">(</span><span class="string" id="5474027">&#34;test.cpuprofile&#34;</span><span class="op" id="5474044">,</span>&nbsp;<span class="string" id="5474046">&#34;&#34;</span><span class="op" id="5474048">,</span>&nbsp;<span class="string" id="5474050">&#34;write&nbsp;a&nbsp;cpu&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;during&nbsp;execution&#34;</span><span class="op" id="5474106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474109">blockProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474126">=</span>&nbsp;<span class="ident" id="5474128"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474132">.</span><span class="ident" id="5474133"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5474139">(</span><span class="string" id="5474140">&#34;test.blockprofile&#34;</span><span class="op" id="5474159">,</span>&nbsp;<span class="string" id="5474161">&#34;&#34;</span><span class="op" id="5474163">,</span>&nbsp;<span class="string" id="5474165">&#34;write&nbsp;a&nbsp;goroutine&nbsp;blocking&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5474235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474238">blockProfileRate</span>&nbsp;<span class="op" id="5474255">=</span>&nbsp;<span class="ident" id="5474257"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474261">.</span><span class="ident" id="5474262"><a href="/gostd/flag/flag.go.html#3949535">Int</a></span><span class="op" id="5474265">(</span><span class="string" id="5474266">&#34;test.blockprofilerate&#34;</span><span class="op" id="5474289">,</span>&nbsp;<span class="num" id="5474291">1</span><span class="op" id="5474292">,</span>&nbsp;<span class="string" id="5474294">&#34;if&nbsp;&gt;=&nbsp;0,&nbsp;calls&nbsp;runtime.SetBlockProfileRate()&#34;</span><span class="op" id="5474340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474343">timeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474360">=</span>&nbsp;<span class="ident" id="5474362"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474366">.</span><span class="ident" id="5474367"><a href="/gostd/flag/flag.go.html#3957175">Duration</a></span><span class="op" id="5474375">(</span><span class="string" id="5474376">&#34;test.timeout&#34;</span><span class="op" id="5474390">,</span>&nbsp;<span class="num" id="5474392">0</span><span class="op" id="5474393">,</span>&nbsp;<span class="string" id="5474395">&#34;if&nbsp;positive,&nbsp;sets&nbsp;an&nbsp;aggregate&nbsp;time&nbsp;limit&nbsp;for&nbsp;all&nbsp;tests&#34;</span><span class="op" id="5474452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474455">cpuListStr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474472">=</span>&nbsp;<span class="ident" id="5474474"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474478">.</span><span class="ident" id="5474479"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="5474485">(</span><span class="string" id="5474486">&#34;test.cpu&#34;</span><span class="op" id="5474496">,</span>&nbsp;<span class="string" id="5474498">&#34;&#34;</span><span class="op" id="5474500">,</span>&nbsp;<span class="string" id="5474502">&#34;comma-separated&nbsp;list&nbsp;of&nbsp;number&nbsp;of&nbsp;CPUs&nbsp;to&nbsp;use&nbsp;for&nbsp;each&nbsp;test&#34;</span><span class="op" id="5474563">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474566">parallel</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5474583">=</span>&nbsp;<span class="ident" id="5474585"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5474589">.</span><span class="ident" id="5474590"><a href="/gostd/flag/flag.go.html#3949535">Int</a></span><span class="op" id="5474593">(</span><span class="string" id="5474594">&#34;test.parallel&#34;</span><span class="op" id="5474609">,</span>&nbsp;<span class="ident" id="5474611"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5474618">.</span><span class="ident" id="5474619"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="5474629">(</span><span class="num" id="5474630">0</span><span class="op" id="5474631">)</span><span class="op" id="5474632">,</span>&nbsp;<span class="string" id="5474634">&#34;maximum&nbsp;test&nbsp;parallelism&#34;</span><span class="op" id="5474660">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474664">haveExamples</span>&nbsp;<span class="builtintype" id="5474677">bool</span>&nbsp;<span class="comment" id="5474682">//&nbsp;are&nbsp;there&nbsp;examples?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474707">cpuList</span>&nbsp;<span class="op" id="5474715">[</span><span class="op" id="5474716">]</span><span class="builtintype" id="5474717">int</span><br>
<span class="lineno">185</span><span class="op" id="5474721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5474724">//&nbsp;common&nbsp;holds&nbsp;the&nbsp;elements&nbsp;common&nbsp;between&nbsp;T&nbsp;and&nbsp;B&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5474780">//&nbsp;captures&nbsp;common&nbsp;methods&nbsp;such&nbsp;as&nbsp;Errorf.</span><br>
<span class="lineno"></span><span class="keyword" id="5474823">type</span>&nbsp;<span class="ident" id="5474828">common</span>&nbsp;<span class="keyword" id="5474835">struct</span>&nbsp;<span class="op" id="5474842">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474845">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474854"><a href="/gostd/testing/testing.go.html#5472606">sync</a></span><span class="op" id="5474858">.</span><span class="ident" id="5474859"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span>&nbsp;<span class="comment" id="5474867">//&nbsp;guards&nbsp;output&nbsp;and&nbsp;failed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474896">output</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5474905">[</span><span class="op" id="5474906">]</span><span class="builtintype" id="5474907">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5474918">//&nbsp;Output&nbsp;generated&nbsp;by&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5474961">failed</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5474970">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5474983">//&nbsp;Test&nbsp;or&nbsp;benchmark&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475017">skipped</span>&nbsp;&nbsp;<span class="builtintype" id="5475026">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5475039">//&nbsp;Test&nbsp;of&nbsp;benchmark&nbsp;has&nbsp;been&nbsp;skipped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475079">finished</span>&nbsp;<span class="builtintype" id="5475088">bool</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475095">start</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475104"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5475108">.</span><span class="ident" id="5475109"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="comment" id="5475114">//&nbsp;Time&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;started</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475149">duration</span>&nbsp;<span class="ident" id="5475158"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5475162">.</span><span class="ident" id="5475163"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475173">self</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475182">interface</span><span class="op" id="5475191">{</span><span class="op" id="5475192">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5475199">//&nbsp;To&nbsp;be&nbsp;sent&nbsp;on&nbsp;signal&nbsp;channel&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475243">signal</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475252">chan</span>&nbsp;<span class="keyword" id="5475257">interface</span><span class="op" id="5475266">{</span><span class="op" id="5475267">}</span>&nbsp;<span class="comment" id="5475269">//&nbsp;Output&nbsp;for&nbsp;serial&nbsp;tests.</span><br>
<span class="lineno">200</span><span class="op" id="5475297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5475300">//&nbsp;Short&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.short&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5475354">func</span>&nbsp;<span class="ident" id="5475359">Short</span><span class="op" id="5475364">(</span><span class="op" id="5475365">)</span>&nbsp;<span class="builtintype" id="5475367">bool</span>&nbsp;<span class="op" id="5475372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475375">return</span>&nbsp;<span class="op" id="5475382">*</span><span class="ident" id="5475383"><a href="/gostd/testing/testing.go.html#5472972">short</a></span><br>
<span class="lineno">205</span><span class="op" id="5475389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5475392">//&nbsp;Verbose&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5475444">func</span>&nbsp;<span class="ident" id="5475449">Verbose</span><span class="op" id="5475456">(</span><span class="op" id="5475457">)</span>&nbsp;<span class="builtintype" id="5475459">bool</span>&nbsp;<span class="op" id="5475464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475467">return</span>&nbsp;<span class="op" id="5475474">*</span><span class="ident" id="5475475"><a href="/gostd/testing/testing.go.html#5473479">chatty</a></span><br>
<span class="lineno">210</span><span class="op" id="5475482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5475485">//&nbsp;decorate&nbsp;prefixes&nbsp;the&nbsp;string&nbsp;with&nbsp;the&nbsp;file&nbsp;and&nbsp;line&nbsp;of&nbsp;the&nbsp;call&nbsp;site</span><br>
<span class="lineno"></span><span class="comment" id="5475557">//&nbsp;and&nbsp;inserts&nbsp;the&nbsp;final&nbsp;newline&nbsp;if&nbsp;needed&nbsp;and&nbsp;indentation&nbsp;tabs&nbsp;for&nbsp;formatting.</span><br>
<span class="lineno"></span><span class="keyword" id="5475637">func</span>&nbsp;<span class="ident" id="5475642">decorate</span><span class="op" id="5475650">(</span><span class="ident" id="5475651">s</span>&nbsp;<span class="builtintype" id="5475653">string</span><span class="op" id="5475659">)</span>&nbsp;<span class="builtintype" id="5475661">string</span>&nbsp;<span class="op" id="5475668">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475671">_</span><span class="op" id="5475672">,</span>&nbsp;<span class="ident" id="5475674">file</span><span class="op" id="5475678">,</span>&nbsp;<span class="ident" id="5475680">line</span><span class="op" id="5475684">,</span>&nbsp;<span class="ident" id="5475686">ok</span>&nbsp;<span class="op" id="5475689">:=</span>&nbsp;<span class="ident" id="5475692"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5475699">.</span><span class="ident" id="5475700"><a href="/gostd/runtime/extern.go.html#1531150">Caller</a></span><span class="op" id="5475706">(</span><span class="num" id="5475707">3</span><span class="op" id="5475708">)</span>&nbsp;<span class="comment" id="5475710">//&nbsp;decorate&nbsp;+&nbsp;log&nbsp;+&nbsp;public&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475748">if</span>&nbsp;<span class="ident" id="5475751"><a href="/gostd/testing/testing.go.html#5475686">ok</a></span>&nbsp;<span class="op" id="5475754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5475758">//&nbsp;Truncate&nbsp;file&nbsp;name&nbsp;at&nbsp;last&nbsp;file&nbsp;name&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5475811">if</span>&nbsp;<span class="ident" id="5475814">index</span>&nbsp;<span class="op" id="5475820">:=</span>&nbsp;<span class="ident" id="5475823"><a href="/gostd/testing/testing.go.html#5472595">strings</a></span><span class="op" id="5475830">.</span><span class="ident" id="5475831"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="5475840">(</span><span class="ident" id="5475841"><a href="/gostd/testing/testing.go.html#5475674">file</a></span><span class="op" id="5475845">,</span>&nbsp;<span class="string" id="5475847">&#34;/&#34;</span><span class="op" id="5475850">)</span><span class="op" id="5475851">;</span>&nbsp;<span class="ident" id="5475853"><a href="/gostd/testing/testing.go.html#5475814">index</a></span>&nbsp;<span class="op" id="5475859">&gt;=</span>&nbsp;<span class="num" id="5475862">0</span>&nbsp;<span class="op" id="5475864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475869"><a href="/gostd/testing/testing.go.html#5475674">file</a></span>&nbsp;<span class="op" id="5475874">=</span>&nbsp;<span class="ident" id="5475876"><a href="/gostd/testing/testing.go.html#5475674">file</a></span><span class="op" id="5475880">[</span><span class="ident" id="5475881"><a href="/gostd/testing/testing.go.html#5475814">index</a></span><span class="op" id="5475886">+</span><span class="num" id="5475887">1</span><span class="op" id="5475888">:</span><span class="op" id="5475889">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5475893">}</span>&nbsp;<span class="keyword" id="5475895">else</span>&nbsp;<span class="keyword" id="5475900">if</span>&nbsp;<span class="ident" id="5475903"><a href="/gostd/testing/testing.go.html#5475814">index</a></span>&nbsp;<span class="op" id="5475909">=</span>&nbsp;<span class="ident" id="5475911"><a href="/gostd/testing/testing.go.html#5472595">strings</a></span><span class="op" id="5475918">.</span><span class="ident" id="5475919"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="5475928">(</span><span class="ident" id="5475929"><a href="/gostd/testing/testing.go.html#5475674">file</a></span><span class="op" id="5475933">,</span>&nbsp;<span class="string" id="5475935">&#34;\\&#34;</span><span class="op" id="5475939">)</span><span class="op" id="5475940">;</span>&nbsp;<span class="ident" id="5475942"><a href="/gostd/testing/testing.go.html#5475814">index</a></span>&nbsp;<span class="op" id="5475948">&gt;=</span>&nbsp;<span class="num" id="5475951">0</span>&nbsp;<span class="op" id="5475953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475958"><a href="/gostd/testing/testing.go.html#5475674">file</a></span>&nbsp;<span class="op" id="5475963">=</span>&nbsp;<span class="ident" id="5475965"><a href="/gostd/testing/testing.go.html#5475674">file</a></span><span class="op" id="5475969">[</span><span class="ident" id="5475970"><a href="/gostd/testing/testing.go.html#5475814">index</a></span><span class="op" id="5475975">+</span><span class="num" id="5475976">1</span><span class="op" id="5475977">:</span><span class="op" id="5475978">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5475982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5475985">}</span>&nbsp;<span class="keyword" id="5475987">else</span>&nbsp;<span class="op" id="5475992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475996"><a href="/gostd/testing/testing.go.html#5475674">file</a></span>&nbsp;<span class="op" id="5476001">=</span>&nbsp;<span class="string" id="5476003">&#34;???&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476011"><a href="/gostd/testing/testing.go.html#5475680">line</a></span>&nbsp;<span class="op" id="5476016">=</span>&nbsp;<span class="num" id="5476018">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5476021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476024">buf</span>&nbsp;<span class="op" id="5476028">:=</span>&nbsp;<span class="builtinfunc" id="5476031">new</span><span class="op" id="5476034">(</span><span class="ident" id="5476035"><a href="/gostd/testing/testing.go.html#5472526">bytes</a></span><span class="op" id="5476040">.</span><span class="ident" id="5476041"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="5476047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5476050">//&nbsp;Every&nbsp;line&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;one&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476095"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476098">.</span><span class="ident" id="5476099"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="5476108">(</span><span class="string" id="5476109">&#39;\t&#39;</span><span class="op" id="5476113">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476116"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5476119">.</span><span class="ident" id="5476120"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5476127">(</span><span class="ident" id="5476128"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476131">,</span>&nbsp;<span class="string" id="5476133">&#34;%s:%d:&nbsp;&#34;</span><span class="op" id="5476142">,</span>&nbsp;<span class="ident" id="5476144"><a href="/gostd/testing/testing.go.html#5475674">file</a></span><span class="op" id="5476148">,</span>&nbsp;<span class="ident" id="5476150"><a href="/gostd/testing/testing.go.html#5475680">line</a></span><span class="op" id="5476154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476157">lines</span>&nbsp;<span class="op" id="5476163">:=</span>&nbsp;<span class="ident" id="5476166"><a href="/gostd/testing/testing.go.html#5472595">strings</a></span><span class="op" id="5476173">.</span><span class="ident" id="5476174"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5476179">(</span><span class="ident" id="5476180"><a href="/gostd/testing/testing.go.html#5475651">s</a></span><span class="op" id="5476181">,</span>&nbsp;<span class="string" id="5476183">&#34;\n&#34;</span><span class="op" id="5476187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5476190">if</span>&nbsp;<span class="ident" id="5476193">l</span>&nbsp;<span class="op" id="5476195">:=</span>&nbsp;<span class="builtinfunc" id="5476198">len</span><span class="op" id="5476201">(</span><span class="ident" id="5476202"><a href="/gostd/testing/testing.go.html#5476157">lines</a></span><span class="op" id="5476207">)</span><span class="op" id="5476208">;</span>&nbsp;<span class="ident" id="5476210"><a href="/gostd/testing/testing.go.html#5476193">l</a></span>&nbsp;<span class="op" id="5476212">&gt;</span>&nbsp;<span class="num" id="5476214">1</span>&nbsp;<span class="op" id="5476216">&amp;&amp;</span>&nbsp;<span class="ident" id="5476219"><a href="/gostd/testing/testing.go.html#5476157">lines</a></span><span class="op" id="5476224">[</span><span class="ident" id="5476225"><a href="/gostd/testing/testing.go.html#5476193">l</a></span><span class="op" id="5476226">-</span><span class="num" id="5476227">1</span><span class="op" id="5476228">]</span>&nbsp;<span class="op" id="5476230">==</span>&nbsp;<span class="string" id="5476233">&#34;&#34;</span>&nbsp;<span class="op" id="5476236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476240"><a href="/gostd/testing/testing.go.html#5476157">lines</a></span>&nbsp;<span class="op" id="5476246">=</span>&nbsp;<span class="ident" id="5476248"><a href="/gostd/testing/testing.go.html#5476157">lines</a></span><span class="op" id="5476253">[</span><span class="op" id="5476254">:</span><span class="ident" id="5476255"><a href="/gostd/testing/testing.go.html#5476193">l</a></span><span class="op" id="5476256">-</span><span class="num" id="5476257">1</span><span class="op" id="5476258">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5476261">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5476264">for</span>&nbsp;<span class="ident" id="5476268">i</span><span class="op" id="5476269">,</span>&nbsp;<span class="ident" id="5476271">line</span>&nbsp;<span class="op" id="5476276">:=</span>&nbsp;<span class="keyword" id="5476279">range</span>&nbsp;<span class="ident" id="5476285"><a href="/gostd/testing/testing.go.html#5476157">lines</a></span>&nbsp;<span class="op" id="5476291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5476295">if</span>&nbsp;<span class="ident" id="5476298"><a href="/gostd/testing/testing.go.html#5476268">i</a></span>&nbsp;<span class="op" id="5476300">&gt;</span>&nbsp;<span class="num" id="5476302">0</span>&nbsp;<span class="op" id="5476304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5476309">//&nbsp;Second&nbsp;and&nbsp;subsequent&nbsp;lines&nbsp;are&nbsp;indented&nbsp;an&nbsp;extra&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476370"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476373">.</span><span class="ident" id="5476374"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="5476385">(</span><span class="string" id="5476386">&#34;\n\t\t&#34;</span><span class="op" id="5476394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5476398">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476402"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476405">.</span><span class="ident" id="5476406"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="5476417">(</span><span class="ident" id="5476418"><a href="/gostd/testing/testing.go.html#5476271">line</a></span><span class="op" id="5476422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5476425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476428"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476431">.</span><span class="ident" id="5476432"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="5476441">(</span><span class="string" id="5476442">&#39;\n&#39;</span><span class="op" id="5476446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5476449">return</span>&nbsp;<span class="ident" id="5476456"><a href="/gostd/testing/testing.go.html#5476024">buf</a></span><span class="op" id="5476459">.</span><span class="ident" id="5476460"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="5476466">(</span><span class="op" id="5476467">)</span><br>
<span class="lineno"></span><span class="op" id="5476469">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="5476472">//&nbsp;fmtDuration&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;d&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;87.00s&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5476541">func</span>&nbsp;<span class="ident" id="5476546">fmtDuration</span><span class="op" id="5476557">(</span><span class="ident" id="5476558">d</span>&nbsp;<span class="ident" id="5476560"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5476564">.</span><span class="ident" id="5476565"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><span class="op" id="5476573">)</span>&nbsp;<span class="builtintype" id="5476575">string</span>&nbsp;<span class="op" id="5476582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5476585">return</span>&nbsp;<span class="ident" id="5476592"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5476595">.</span><span class="ident" id="5476596"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5476603">(</span><span class="string" id="5476604">&#34;%.2fs&#34;</span><span class="op" id="5476611">,</span>&nbsp;<span class="ident" id="5476613"><a href="/gostd/testing/testing.go.html#5476558">d</a></span><span class="op" id="5476614">.</span><span class="ident" id="5476615"><a href="/gostd/time/time.go.html#2738077">Seconds</a></span><span class="op" id="5476622">(</span><span class="op" id="5476623">)</span><span class="op" id="5476624">)</span><br>
<span class="lineno"></span><span class="op" id="5476626">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5476629">//&nbsp;TB&nbsp;is&nbsp;the&nbsp;interface&nbsp;common&nbsp;to&nbsp;T&nbsp;and&nbsp;B.</span><br>
<span class="lineno"></span><span class="keyword" id="5476671">type</span>&nbsp;<span class="ident" id="5476676">TB</span>&nbsp;<span class="keyword" id="5476679">interface</span>&nbsp;<span class="op" id="5476689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476692">Error</span><span class="op" id="5476697">(</span><span class="ident" id="5476698">args</span>&nbsp;<span class="op" id="5476703">...</span><span class="keyword" id="5476706">interface</span><span class="op" id="5476715">{</span><span class="op" id="5476716">}</span><span class="op" id="5476717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476720">Errorf</span><span class="op" id="5476726">(</span><span class="ident" id="5476727">format</span>&nbsp;<span class="builtintype" id="5476734">string</span><span class="op" id="5476740">,</span>&nbsp;<span class="ident" id="5476742">args</span>&nbsp;<span class="op" id="5476747">...</span><span class="keyword" id="5476750">interface</span><span class="op" id="5476759">{</span><span class="op" id="5476760">}</span><span class="op" id="5476761">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476764">Fail</span><span class="op" id="5476768">(</span><span class="op" id="5476769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476772">FailNow</span><span class="op" id="5476779">(</span><span class="op" id="5476780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476783">Failed</span><span class="op" id="5476789">(</span><span class="op" id="5476790">)</span>&nbsp;<span class="builtintype" id="5476792">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476798">Fatal</span><span class="op" id="5476803">(</span><span class="ident" id="5476804">args</span>&nbsp;<span class="op" id="5476809">...</span><span class="keyword" id="5476812">interface</span><span class="op" id="5476821">{</span><span class="op" id="5476822">}</span><span class="op" id="5476823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476826">Fatalf</span><span class="op" id="5476832">(</span><span class="ident" id="5476833">format</span>&nbsp;<span class="builtintype" id="5476840">string</span><span class="op" id="5476846">,</span>&nbsp;<span class="ident" id="5476848">args</span>&nbsp;<span class="op" id="5476853">...</span><span class="keyword" id="5476856">interface</span><span class="op" id="5476865">{</span><span class="op" id="5476866">}</span><span class="op" id="5476867">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476870">Log</span><span class="op" id="5476873">(</span><span class="ident" id="5476874">args</span>&nbsp;<span class="op" id="5476879">...</span><span class="keyword" id="5476882">interface</span><span class="op" id="5476891">{</span><span class="op" id="5476892">}</span><span class="op" id="5476893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476896">Logf</span><span class="op" id="5476900">(</span><span class="ident" id="5476901">format</span>&nbsp;<span class="builtintype" id="5476908">string</span><span class="op" id="5476914">,</span>&nbsp;<span class="ident" id="5476916">args</span>&nbsp;<span class="op" id="5476921">...</span><span class="keyword" id="5476924">interface</span><span class="op" id="5476933">{</span><span class="op" id="5476934">}</span><span class="op" id="5476935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476938">Skip</span><span class="op" id="5476942">(</span><span class="ident" id="5476943">args</span>&nbsp;<span class="op" id="5476948">...</span><span class="keyword" id="5476951">interface</span><span class="op" id="5476960">{</span><span class="op" id="5476961">}</span><span class="op" id="5476962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476965">SkipNow</span><span class="op" id="5476972">(</span><span class="op" id="5476973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5476976">Skipf</span><span class="op" id="5476981">(</span><span class="ident" id="5476982">format</span>&nbsp;<span class="builtintype" id="5476989">string</span><span class="op" id="5476995">,</span>&nbsp;<span class="ident" id="5476997">args</span>&nbsp;<span class="op" id="5477002">...</span><span class="keyword" id="5477005">interface</span><span class="op" id="5477014">{</span><span class="op" id="5477015">}</span><span class="op" id="5477016">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477019">Skipped</span><span class="op" id="5477026">(</span><span class="op" id="5477027">)</span>&nbsp;<span class="builtintype" id="5477029">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5477036">//&nbsp;A&nbsp;private&nbsp;method&nbsp;to&nbsp;prevent&nbsp;users&nbsp;implementing&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5477091">//&nbsp;interface&nbsp;and&nbsp;so&nbsp;future&nbsp;additions&nbsp;to&nbsp;it&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5477144">//&nbsp;violate&nbsp;Go&nbsp;1&nbsp;compatibility.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477176">private</span><span class="op" id="5477183">(</span><span class="op" id="5477184">)</span><br>
<span class="lineno"></span><span class="op" id="5477186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5477189">var</span>&nbsp;<span class="ident" id="5477193">_</span>&nbsp;<span class="ident" id="5477195"><a href="/gostd/testing/testing.go.html#5476676">TB</a></span>&nbsp;<span class="op" id="5477198">=</span>&nbsp;<span class="op" id="5477200">(</span><span class="op" id="5477201">*</span><span class="ident" id="5477202"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5477203">)</span><span class="op" id="5477204">(</span><span class="builtintype" id="5477205">nil</span><span class="op" id="5477208">)</span><br>
<span class="lineno"></span><span class="keyword" id="5477210">var</span>&nbsp;<span class="ident" id="5477214">_</span>&nbsp;<span class="ident" id="5477216"><a href="/gostd/testing/testing.go.html#5476676">TB</a></span>&nbsp;<span class="op" id="5477219">=</span>&nbsp;<span class="op" id="5477221">(</span><span class="op" id="5477222">*</span><span class="ident" id="5477223"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="5477224">)</span><span class="op" id="5477225">(</span><span class="builtintype" id="5477226">nil</span><span class="op" id="5477229">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5477232">//&nbsp;T&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;Test&nbsp;functions&nbsp;to&nbsp;manage&nbsp;test&nbsp;state&nbsp;and&nbsp;support&nbsp;formatted&nbsp;test&nbsp;logs.</span><br>
<span class="lineno"></span><span class="comment" id="5477326">//&nbsp;Logs&nbsp;are&nbsp;accumulated&nbsp;during&nbsp;execution&nbsp;and&nbsp;dumped&nbsp;to&nbsp;standard&nbsp;error&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="keyword" id="5477407">type</span>&nbsp;<span class="ident" id="5477412">T</span>&nbsp;<span class="keyword" id="5477414">struct</span>&nbsp;<span class="op" id="5477421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477424"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477432">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5477446">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5477456">//&nbsp;Name&nbsp;of&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477474">startParallel</span>&nbsp;<span class="keyword" id="5477488">chan</span>&nbsp;<span class="builtintype" id="5477493">bool</span>&nbsp;<span class="comment" id="5477498">//&nbsp;Parallel&nbsp;tests&nbsp;will&nbsp;wait&nbsp;on&nbsp;this.</span><br>
<span class="lineno"></span><span class="op" id="5477535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5477538">func</span>&nbsp;<span class="op" id="5477543">(</span><span class="ident" id="5477544">c</span>&nbsp;<span class="op" id="5477546">*</span><span class="ident" id="5477547"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5477553">)</span>&nbsp;<span class="ident" id="5477555">private</span><span class="op" id="5477562">(</span><span class="op" id="5477563">)</span>&nbsp;<span class="op" id="5477565">{</span><span class="op" id="5477566">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="comment" id="5477569">//&nbsp;Fail&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;but&nbsp;continues&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="5477638">func</span>&nbsp;<span class="op" id="5477643">(</span><span class="ident" id="5477644">c</span>&nbsp;<span class="op" id="5477646">*</span><span class="ident" id="5477647"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5477653">)</span>&nbsp;<span class="ident" id="5477655">Fail</span><span class="op" id="5477659">(</span><span class="op" id="5477660">)</span>&nbsp;<span class="op" id="5477662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477665"><a href="/gostd/testing/testing.go.html#5477644">c</a></span><span class="op" id="5477666">.</span><span class="ident" id="5477667"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5477669">.</span><span class="ident" id="5477670"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="5477674">(</span><span class="op" id="5477675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5477678">defer</span>&nbsp;<span class="ident" id="5477684"><a href="/gostd/testing/testing.go.html#5477644">c</a></span><span class="op" id="5477685">.</span><span class="ident" id="5477686"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5477688">.</span><span class="ident" id="5477689"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="5477695">(</span><span class="op" id="5477696">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477699"><a href="/gostd/testing/testing.go.html#5477644">c</a></span><span class="op" id="5477700">.</span><span class="ident" id="5477701"><a href="/gostd/testing/testing.go.html#5474961">failed</a></span>&nbsp;<span class="op" id="5477708">=</span>&nbsp;<span class="builtintype" id="5477710">true</span><br>
<span class="lineno"></span><span class="op" id="5477715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5477718">//&nbsp;Failed&nbsp;reports&nbsp;whether&nbsp;the&nbsp;function&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="5477769">func</span>&nbsp;<span class="op" id="5477774">(</span><span class="ident" id="5477775">c</span>&nbsp;<span class="op" id="5477777">*</span><span class="ident" id="5477778"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5477784">)</span>&nbsp;<span class="ident" id="5477786">Failed</span><span class="op" id="5477792">(</span><span class="op" id="5477793">)</span>&nbsp;<span class="builtintype" id="5477795">bool</span>&nbsp;<span class="op" id="5477800">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5477803"><a href="/gostd/testing/testing.go.html#5477775">c</a></span><span class="op" id="5477804">.</span><span class="ident" id="5477805"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5477807">.</span><span class="ident" id="5477808"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="5477813">(</span><span class="op" id="5477814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5477817">defer</span>&nbsp;<span class="ident" id="5477823"><a href="/gostd/testing/testing.go.html#5477775">c</a></span><span class="op" id="5477824">.</span><span class="ident" id="5477825"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5477827">.</span><span class="ident" id="5477828"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="5477835">(</span><span class="op" id="5477836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5477839">return</span>&nbsp;<span class="ident" id="5477846"><a href="/gostd/testing/testing.go.html#5477775">c</a></span><span class="op" id="5477847">.</span><span class="ident" id="5477848"><a href="/gostd/testing/testing.go.html#5474961">failed</a></span><br>
<span class="lineno"></span><span class="op" id="5477855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="5477858">//&nbsp;FailNow&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="5477930">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="5477988">//&nbsp;FailNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5478045">//&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;function,&nbsp;not&nbsp;from&nbsp;other&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="5478102">//&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;FailNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno">305</span><span class="comment" id="5478160">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="5478187">func</span>&nbsp;<span class="op" id="5478192">(</span><span class="ident" id="5478193">c</span>&nbsp;<span class="op" id="5478195">*</span><span class="ident" id="5478196"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5478202">)</span>&nbsp;<span class="ident" id="5478204">FailNow</span><span class="op" id="5478211">(</span><span class="op" id="5478212">)</span>&nbsp;<span class="op" id="5478214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5478217"><a href="/gostd/testing/testing.go.html#5478193">c</a></span><span class="op" id="5478218">.</span><span class="ident" id="5478219"><a href="/gostd/testing/testing.go.html#5477655">Fail</a></span><span class="op" id="5478223">(</span><span class="op" id="5478224">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478228">//&nbsp;Calling&nbsp;runtime.Goexit&nbsp;will&nbsp;exit&nbsp;the&nbsp;goroutine,&nbsp;which</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478286">//&nbsp;will&nbsp;run&nbsp;the&nbsp;deferred&nbsp;functions&nbsp;in&nbsp;this&nbsp;goroutine,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478341">//&nbsp;which&nbsp;will&nbsp;eventually&nbsp;run&nbsp;the&nbsp;deferred&nbsp;lines&nbsp;in&nbsp;tRunner,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478402">//&nbsp;which&nbsp;will&nbsp;signal&nbsp;to&nbsp;the&nbsp;test&nbsp;loop&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478465">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478469">//&nbsp;A&nbsp;previous&nbsp;version&nbsp;of&nbsp;this&nbsp;code&nbsp;said:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478511">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478515">//&nbsp;&nbsp;&nbsp;&nbsp;c.duration&nbsp;=&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478536">//&nbsp;&nbsp;&nbsp;&nbsp;c.signal&nbsp;&lt;-&nbsp;c.self</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478559">//&nbsp;&nbsp;&nbsp;&nbsp;runtime.Goexit()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478580">//</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478584">//&nbsp;This&nbsp;previous&nbsp;version&nbsp;duplicated&nbsp;code&nbsp;(those&nbsp;lines&nbsp;are&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478646">//&nbsp;tRunner&nbsp;no&nbsp;matter&nbsp;what),&nbsp;but&nbsp;worse&nbsp;the&nbsp;goroutine&nbsp;teardown</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478708">//&nbsp;implicit&nbsp;in&nbsp;runtime.Goexit&nbsp;was&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;complete</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478770">//&nbsp;before&nbsp;the&nbsp;test&nbsp;exited.&nbsp;&nbsp;If&nbsp;a&nbsp;test&nbsp;deferred&nbsp;an&nbsp;important&nbsp;cleanup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478839">//&nbsp;function&nbsp;(like&nbsp;removing&nbsp;temporary&nbsp;files),&nbsp;there&nbsp;was&nbsp;no&nbsp;guarantee</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478908">//&nbsp;it&nbsp;would&nbsp;run&nbsp;on&nbsp;a&nbsp;test&nbsp;failure.&nbsp;&nbsp;Because&nbsp;we&nbsp;send&nbsp;on&nbsp;c.signal&nbsp;during</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5478980">//&nbsp;a&nbsp;top-of-stack&nbsp;deferred&nbsp;function&nbsp;now,&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5479044">//&nbsp;only&nbsp;happens&nbsp;after&nbsp;any&nbsp;other&nbsp;stacked&nbsp;defers&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5479108"><a href="/gostd/testing/testing.go.html#5478193">c</a></span><span class="op" id="5479109">.</span><span class="ident" id="5479110"><a href="/gostd/testing/testing.go.html#5475079">finished</a></span>&nbsp;<span class="op" id="5479119">=</span>&nbsp;<span class="builtintype" id="5479121">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5479127"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5479134">.</span><span class="ident" id="5479135"><a href="/gostd/runtime/panic.go.html#1658535">Goexit</a></span><span class="op" id="5479141">(</span><span class="op" id="5479142">)</span><br>
<span class="lineno">330</span><span class="op" id="5479144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479147">//&nbsp;log&nbsp;generates&nbsp;the&nbsp;output.&nbsp;It&#39;s&nbsp;always&nbsp;at&nbsp;the&nbsp;same&nbsp;stack&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="5479213">func</span>&nbsp;<span class="op" id="5479218">(</span><span class="ident" id="5479219">c</span>&nbsp;<span class="op" id="5479221">*</span><span class="ident" id="5479222"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5479228">)</span>&nbsp;<span class="ident" id="5479230">log</span><span class="op" id="5479233">(</span><span class="ident" id="5479234">s</span>&nbsp;<span class="builtintype" id="5479236">string</span><span class="op" id="5479242">)</span>&nbsp;<span class="op" id="5479244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5479247"><a href="/gostd/testing/testing.go.html#5479219">c</a></span><span class="op" id="5479248">.</span><span class="ident" id="5479249"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5479251">.</span><span class="ident" id="5479252"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="5479256">(</span><span class="op" id="5479257">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5479260">defer</span>&nbsp;<span class="ident" id="5479266"><a href="/gostd/testing/testing.go.html#5479219">c</a></span><span class="op" id="5479267">.</span><span class="ident" id="5479268"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5479270">.</span><span class="ident" id="5479271"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="5479277">(</span><span class="op" id="5479278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5479281"><a href="/gostd/testing/testing.go.html#5479219">c</a></span><span class="op" id="5479282">.</span><span class="ident" id="5479283"><a href="/gostd/testing/testing.go.html#5474896">output</a></span>&nbsp;<span class="op" id="5479290">=</span>&nbsp;<span class="builtinfunc" id="5479292">append</span><span class="op" id="5479298">(</span><span class="ident" id="5479299"><a href="/gostd/testing/testing.go.html#5479219">c</a></span><span class="op" id="5479300">.</span><span class="ident" id="5479301"><a href="/gostd/testing/testing.go.html#5474896">output</a></span><span class="op" id="5479307">,</span>&nbsp;<span class="ident" id="5479309"><a href="/gostd/testing/testing.go.html#5475642">decorate</a></span><span class="op" id="5479317">(</span><span class="ident" id="5479318"><a href="/gostd/testing/testing.go.html#5479234">s</a></span><span class="op" id="5479319">)</span><span class="op" id="5479320">...</span><span class="op" id="5479323">)</span><br>
<span class="lineno"></span><span class="op" id="5479325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479328">//&nbsp;Log&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;using&nbsp;default&nbsp;formatting,&nbsp;analogous&nbsp;to&nbsp;Println,</span><br>
<span class="lineno">340</span><span class="comment" id="5479405">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5479480">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5479526">func</span>&nbsp;<span class="op" id="5479531">(</span><span class="ident" id="5479532">c</span>&nbsp;<span class="op" id="5479534">*</span><span class="ident" id="5479535"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5479541">)</span>&nbsp;<span class="ident" id="5479543">Log</span><span class="op" id="5479546">(</span><span class="ident" id="5479547">args</span>&nbsp;<span class="op" id="5479552">...</span><span class="keyword" id="5479555">interface</span><span class="op" id="5479564">{</span><span class="op" id="5479565">}</span><span class="op" id="5479566">)</span>&nbsp;<span class="op" id="5479568">{</span>&nbsp;<span class="ident" id="5479570"><a href="/gostd/testing/testing.go.html#5479532">c</a></span><span class="op" id="5479571">.</span><span class="ident" id="5479572"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5479575">(</span><span class="ident" id="5479576"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5479579">.</span><span class="ident" id="5479580"><a href="/gostd/fmt/print.go.html#2146029">Sprintln</a></span><span class="op" id="5479588">(</span><span class="ident" id="5479589"><a href="/gostd/testing/testing.go.html#5479547">args</a></span><span class="op" id="5479593">...</span><span class="op" id="5479596">)</span><span class="op" id="5479597">)</span>&nbsp;<span class="op" id="5479599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479602">//&nbsp;Logf&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;according&nbsp;to&nbsp;the&nbsp;format,&nbsp;analogous&nbsp;to&nbsp;Printf,</span><br>
<span class="lineno">345</span><span class="comment" id="5479678">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5479753">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5479799">func</span>&nbsp;<span class="op" id="5479804">(</span><span class="ident" id="5479805">c</span>&nbsp;<span class="op" id="5479807">*</span><span class="ident" id="5479808"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5479814">)</span>&nbsp;<span class="ident" id="5479816">Logf</span><span class="op" id="5479820">(</span><span class="ident" id="5479821">format</span>&nbsp;<span class="builtintype" id="5479828">string</span><span class="op" id="5479834">,</span>&nbsp;<span class="ident" id="5479836">args</span>&nbsp;<span class="op" id="5479841">...</span><span class="keyword" id="5479844">interface</span><span class="op" id="5479853">{</span><span class="op" id="5479854">}</span><span class="op" id="5479855">)</span>&nbsp;<span class="op" id="5479857">{</span>&nbsp;<span class="ident" id="5479859"><a href="/gostd/testing/testing.go.html#5479805">c</a></span><span class="op" id="5479860">.</span><span class="ident" id="5479861"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5479864">(</span><span class="ident" id="5479865"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5479868">.</span><span class="ident" id="5479869"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5479876">(</span><span class="ident" id="5479877"><a href="/gostd/testing/testing.go.html#5479821">format</a></span><span class="op" id="5479883">,</span>&nbsp;<span class="ident" id="5479885"><a href="/gostd/testing/testing.go.html#5479836">args</a></span><span class="op" id="5479889">...</span><span class="op" id="5479892">)</span><span class="op" id="5479893">)</span>&nbsp;<span class="op" id="5479895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479898">//&nbsp;Error&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno">350</span><span class="keyword" id="5479946">func</span>&nbsp;<span class="op" id="5479951">(</span><span class="ident" id="5479952">c</span>&nbsp;<span class="op" id="5479954">*</span><span class="ident" id="5479955"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5479961">)</span>&nbsp;<span class="ident" id="5479963">Error</span><span class="op" id="5479968">(</span><span class="ident" id="5479969">args</span>&nbsp;<span class="op" id="5479974">...</span><span class="keyword" id="5479977">interface</span><span class="op" id="5479986">{</span><span class="op" id="5479987">}</span><span class="op" id="5479988">)</span>&nbsp;<span class="op" id="5479990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5479993"><a href="/gostd/testing/testing.go.html#5479952">c</a></span><span class="op" id="5479994">.</span><span class="ident" id="5479995"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5479998">(</span><span class="ident" id="5479999"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480002">.</span><span class="ident" id="5480003"><a href="/gostd/fmt/print.go.html#2146029">Sprintln</a></span><span class="op" id="5480011">(</span><span class="ident" id="5480012"><a href="/gostd/testing/testing.go.html#5479969">args</a></span><span class="op" id="5480016">...</span><span class="op" id="5480019">)</span><span class="op" id="5480020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480023"><a href="/gostd/testing/testing.go.html#5479952">c</a></span><span class="op" id="5480024">.</span><span class="ident" id="5480025"><a href="/gostd/testing/testing.go.html#5477655">Fail</a></span><span class="op" id="5480029">(</span><span class="op" id="5480030">)</span><br>
<span class="lineno"></span><span class="op" id="5480032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5480035">//&nbsp;Errorf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno"></span><span class="keyword" id="5480085">func</span>&nbsp;<span class="op" id="5480090">(</span><span class="ident" id="5480091">c</span>&nbsp;<span class="op" id="5480093">*</span><span class="ident" id="5480094"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5480100">)</span>&nbsp;<span class="ident" id="5480102">Errorf</span><span class="op" id="5480108">(</span><span class="ident" id="5480109">format</span>&nbsp;<span class="builtintype" id="5480116">string</span><span class="op" id="5480122">,</span>&nbsp;<span class="ident" id="5480124">args</span>&nbsp;<span class="op" id="5480129">...</span><span class="keyword" id="5480132">interface</span><span class="op" id="5480141">{</span><span class="op" id="5480142">}</span><span class="op" id="5480143">)</span>&nbsp;<span class="op" id="5480145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480148"><a href="/gostd/testing/testing.go.html#5480091">c</a></span><span class="op" id="5480149">.</span><span class="ident" id="5480150"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5480153">(</span><span class="ident" id="5480154"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480157">.</span><span class="ident" id="5480158"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5480165">(</span><span class="ident" id="5480166"><a href="/gostd/testing/testing.go.html#5480109">format</a></span><span class="op" id="5480172">,</span>&nbsp;<span class="ident" id="5480174"><a href="/gostd/testing/testing.go.html#5480124">args</a></span><span class="op" id="5480178">...</span><span class="op" id="5480181">)</span><span class="op" id="5480182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480185"><a href="/gostd/testing/testing.go.html#5480091">c</a></span><span class="op" id="5480186">.</span><span class="ident" id="5480187"><a href="/gostd/testing/testing.go.html#5477655">Fail</a></span><span class="op" id="5480191">(</span><span class="op" id="5480192">)</span><br>
<span class="lineno"></span><span class="op" id="5480194">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="5480197">//&nbsp;Fatal&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5480248">func</span>&nbsp;<span class="op" id="5480253">(</span><span class="ident" id="5480254">c</span>&nbsp;<span class="op" id="5480256">*</span><span class="ident" id="5480257"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5480263">)</span>&nbsp;<span class="ident" id="5480265">Fatal</span><span class="op" id="5480270">(</span><span class="ident" id="5480271">args</span>&nbsp;<span class="op" id="5480276">...</span><span class="keyword" id="5480279">interface</span><span class="op" id="5480288">{</span><span class="op" id="5480289">}</span><span class="op" id="5480290">)</span>&nbsp;<span class="op" id="5480292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480295"><a href="/gostd/testing/testing.go.html#5480254">c</a></span><span class="op" id="5480296">.</span><span class="ident" id="5480297"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5480300">(</span><span class="ident" id="5480301"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480304">.</span><span class="ident" id="5480305"><a href="/gostd/fmt/print.go.html#2146029">Sprintln</a></span><span class="op" id="5480313">(</span><span class="ident" id="5480314"><a href="/gostd/testing/testing.go.html#5480271">args</a></span><span class="op" id="5480318">...</span><span class="op" id="5480321">)</span><span class="op" id="5480322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480325"><a href="/gostd/testing/testing.go.html#5480254">c</a></span><span class="op" id="5480326">.</span><span class="ident" id="5480327"><a href="/gostd/testing/testing.go.html#5478204">FailNow</a></span><span class="op" id="5480334">(</span><span class="op" id="5480335">)</span><br>
<span class="lineno">365</span><span class="op" id="5480337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480340">//&nbsp;Fatalf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5480393">func</span>&nbsp;<span class="op" id="5480398">(</span><span class="ident" id="5480399">c</span>&nbsp;<span class="op" id="5480401">*</span><span class="ident" id="5480402"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5480408">)</span>&nbsp;<span class="ident" id="5480410">Fatalf</span><span class="op" id="5480416">(</span><span class="ident" id="5480417">format</span>&nbsp;<span class="builtintype" id="5480424">string</span><span class="op" id="5480430">,</span>&nbsp;<span class="ident" id="5480432">args</span>&nbsp;<span class="op" id="5480437">...</span><span class="keyword" id="5480440">interface</span><span class="op" id="5480449">{</span><span class="op" id="5480450">}</span><span class="op" id="5480451">)</span>&nbsp;<span class="op" id="5480453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480456"><a href="/gostd/testing/testing.go.html#5480399">c</a></span><span class="op" id="5480457">.</span><span class="ident" id="5480458"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5480461">(</span><span class="ident" id="5480462"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480465">.</span><span class="ident" id="5480466"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5480473">(</span><span class="ident" id="5480474"><a href="/gostd/testing/testing.go.html#5480417">format</a></span><span class="op" id="5480480">,</span>&nbsp;<span class="ident" id="5480482"><a href="/gostd/testing/testing.go.html#5480432">args</a></span><span class="op" id="5480486">...</span><span class="op" id="5480489">)</span><span class="op" id="5480490">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480493"><a href="/gostd/testing/testing.go.html#5480399">c</a></span><span class="op" id="5480494">.</span><span class="ident" id="5480495"><a href="/gostd/testing/testing.go.html#5478204">FailNow</a></span><span class="op" id="5480502">(</span><span class="op" id="5480503">)</span><br>
<span class="lineno"></span><span class="op" id="5480505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480508">//&nbsp;Skip&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5480558">func</span>&nbsp;<span class="op" id="5480563">(</span><span class="ident" id="5480564">c</span>&nbsp;<span class="op" id="5480566">*</span><span class="ident" id="5480567"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5480573">)</span>&nbsp;<span class="ident" id="5480575">Skip</span><span class="op" id="5480579">(</span><span class="ident" id="5480580">args</span>&nbsp;<span class="op" id="5480585">...</span><span class="keyword" id="5480588">interface</span><span class="op" id="5480597">{</span><span class="op" id="5480598">}</span><span class="op" id="5480599">)</span>&nbsp;<span class="op" id="5480601">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480604"><a href="/gostd/testing/testing.go.html#5480564">c</a></span><span class="op" id="5480605">.</span><span class="ident" id="5480606"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5480609">(</span><span class="ident" id="5480610"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480613">.</span><span class="ident" id="5480614"><a href="/gostd/fmt/print.go.html#2146029">Sprintln</a></span><span class="op" id="5480622">(</span><span class="ident" id="5480623"><a href="/gostd/testing/testing.go.html#5480580">args</a></span><span class="op" id="5480627">...</span><span class="op" id="5480630">)</span><span class="op" id="5480631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480634"><a href="/gostd/testing/testing.go.html#5480564">c</a></span><span class="op" id="5480635">.</span><span class="ident" id="5480636"><a href="/gostd/testing/testing.go.html#5481156">SkipNow</a></span><span class="op" id="5480643">(</span><span class="op" id="5480644">)</span><br>
<span class="lineno"></span><span class="op" id="5480646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480649">//&nbsp;Skipf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno">380</span><span class="keyword" id="5480701">func</span>&nbsp;<span class="op" id="5480706">(</span><span class="ident" id="5480707">c</span>&nbsp;<span class="op" id="5480709">*</span><span class="ident" id="5480710"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5480716">)</span>&nbsp;<span class="ident" id="5480718">Skipf</span><span class="op" id="5480723">(</span><span class="ident" id="5480724">format</span>&nbsp;<span class="builtintype" id="5480731">string</span><span class="op" id="5480737">,</span>&nbsp;<span class="ident" id="5480739">args</span>&nbsp;<span class="op" id="5480744">...</span><span class="keyword" id="5480747">interface</span><span class="op" id="5480756">{</span><span class="op" id="5480757">}</span><span class="op" id="5480758">)</span>&nbsp;<span class="op" id="5480760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480763"><a href="/gostd/testing/testing.go.html#5480707">c</a></span><span class="op" id="5480764">.</span><span class="ident" id="5480765"><a href="/gostd/testing/testing.go.html#5479230">log</a></span><span class="op" id="5480768">(</span><span class="ident" id="5480769"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5480772">.</span><span class="ident" id="5480773"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5480780">(</span><span class="ident" id="5480781"><a href="/gostd/testing/testing.go.html#5480724">format</a></span><span class="op" id="5480787">,</span>&nbsp;<span class="ident" id="5480789"><a href="/gostd/testing/testing.go.html#5480739">args</a></span><span class="op" id="5480793">...</span><span class="op" id="5480796">)</span><span class="op" id="5480797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480800"><a href="/gostd/testing/testing.go.html#5480707">c</a></span><span class="op" id="5480801">.</span><span class="ident" id="5480802"><a href="/gostd/testing/testing.go.html#5481156">SkipNow</a></span><span class="op" id="5480809">(</span><span class="op" id="5480810">)</span><br>
<span class="lineno"></span><span class="op" id="5480812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="5480815">//&nbsp;SkipNow&nbsp;marks&nbsp;the&nbsp;test&nbsp;as&nbsp;having&nbsp;been&nbsp;skipped&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="5480889">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.&nbsp;See&nbsp;also&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="comment" id="5480965">//&nbsp;SkipNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the&nbsp;test,&nbsp;not&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5481037">//&nbsp;other&nbsp;goroutines&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;SkipNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno"></span><span class="comment" id="5481112">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno">390</span><span class="keyword" id="5481139">func</span>&nbsp;<span class="op" id="5481144">(</span><span class="ident" id="5481145">c</span>&nbsp;<span class="op" id="5481147">*</span><span class="ident" id="5481148"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5481154">)</span>&nbsp;<span class="ident" id="5481156">SkipNow</span><span class="op" id="5481163">(</span><span class="op" id="5481164">)</span>&nbsp;<span class="op" id="5481166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481169"><a href="/gostd/testing/testing.go.html#5481145">c</a></span><span class="op" id="5481170">.</span><span class="ident" id="5481171"><a href="/gostd/testing/testing.go.html#5481235">skip</a></span><span class="op" id="5481175">(</span><span class="op" id="5481176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481179"><a href="/gostd/testing/testing.go.html#5481145">c</a></span><span class="op" id="5481180">.</span><span class="ident" id="5481181"><a href="/gostd/testing/testing.go.html#5475079">finished</a></span>&nbsp;<span class="op" id="5481190">=</span>&nbsp;<span class="builtintype" id="5481192">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481198"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5481205">.</span><span class="ident" id="5481206"><a href="/gostd/runtime/panic.go.html#1658535">Goexit</a></span><span class="op" id="5481212">(</span><span class="op" id="5481213">)</span><br>
<span class="lineno"></span><span class="op" id="5481215">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="5481218">func</span>&nbsp;<span class="op" id="5481223">(</span><span class="ident" id="5481224">c</span>&nbsp;<span class="op" id="5481226">*</span><span class="ident" id="5481227"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5481233">)</span>&nbsp;<span class="ident" id="5481235">skip</span><span class="op" id="5481239">(</span><span class="op" id="5481240">)</span>&nbsp;<span class="op" id="5481242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481245"><a href="/gostd/testing/testing.go.html#5481224">c</a></span><span class="op" id="5481246">.</span><span class="ident" id="5481247"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5481249">.</span><span class="ident" id="5481250"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="5481254">(</span><span class="op" id="5481255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481258">defer</span>&nbsp;<span class="ident" id="5481264"><a href="/gostd/testing/testing.go.html#5481224">c</a></span><span class="op" id="5481265">.</span><span class="ident" id="5481266"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5481268">.</span><span class="ident" id="5481269"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="5481275">(</span><span class="op" id="5481276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481279"><a href="/gostd/testing/testing.go.html#5481224">c</a></span><span class="op" id="5481280">.</span><span class="ident" id="5481281"><a href="/gostd/testing/testing.go.html#5475017">skipped</a></span>&nbsp;<span class="op" id="5481289">=</span>&nbsp;<span class="builtintype" id="5481291">true</span><br>
<span class="lineno">400</span><span class="op" id="5481296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5481299">//&nbsp;Skipped&nbsp;reports&nbsp;whether&nbsp;the&nbsp;test&nbsp;was&nbsp;skipped.</span><br>
<span class="lineno"></span><span class="keyword" id="5481348">func</span>&nbsp;<span class="op" id="5481353">(</span><span class="ident" id="5481354">c</span>&nbsp;<span class="op" id="5481356">*</span><span class="ident" id="5481357"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5481363">)</span>&nbsp;<span class="ident" id="5481365">Skipped</span><span class="op" id="5481372">(</span><span class="op" id="5481373">)</span>&nbsp;<span class="builtintype" id="5481375">bool</span>&nbsp;<span class="op" id="5481380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481383"><a href="/gostd/testing/testing.go.html#5481354">c</a></span><span class="op" id="5481384">.</span><span class="ident" id="5481385"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5481387">.</span><span class="ident" id="5481388"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="5481393">(</span><span class="op" id="5481394">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481397">defer</span>&nbsp;<span class="ident" id="5481403"><a href="/gostd/testing/testing.go.html#5481354">c</a></span><span class="op" id="5481404">.</span><span class="ident" id="5481405"><a href="/gostd/testing/testing.go.html#5474845">mu</a></span><span class="op" id="5481407">.</span><span class="ident" id="5481408"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="5481415">(</span><span class="op" id="5481416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5481419">return</span>&nbsp;<span class="ident" id="5481426"><a href="/gostd/testing/testing.go.html#5481354">c</a></span><span class="op" id="5481427">.</span><span class="ident" id="5481428"><a href="/gostd/testing/testing.go.html#5475017">skipped</a></span><br>
<span class="lineno"></span><span class="op" id="5481436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5481439">//&nbsp;Parallel&nbsp;signals&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;to&nbsp;be&nbsp;run&nbsp;in&nbsp;parallel&nbsp;with&nbsp;(and&nbsp;only&nbsp;with)</span><br>
<span class="lineno">410</span><span class="comment" id="5481520">//&nbsp;other&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="5481545">func</span>&nbsp;<span class="op" id="5481550">(</span><span class="ident" id="5481551">t</span>&nbsp;<span class="op" id="5481553">*</span><span class="ident" id="5481554"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5481555">)</span>&nbsp;<span class="ident" id="5481557">Parallel</span><span class="op" id="5481565">(</span><span class="op" id="5481566">)</span>&nbsp;<span class="op" id="5481568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481571"><a href="/gostd/testing/testing.go.html#5481551">t</a></span><span class="op" id="5481572">.</span><span class="ident" id="5481573"><a href="/gostd/testing/testing.go.html#5475243">signal</a></span>&nbsp;<span class="op" id="5481580">&lt;-</span>&nbsp;<span class="op" id="5481583">(</span><span class="op" id="5481584">*</span><span class="ident" id="5481585"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5481586">)</span><span class="op" id="5481587">(</span><span class="builtintype" id="5481588">nil</span><span class="op" id="5481591">)</span>&nbsp;<span class="comment" id="5481593">//&nbsp;Release&nbsp;main&nbsp;testing&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5481623">&lt;-</span><span class="ident" id="5481625"><a href="/gostd/testing/testing.go.html#5481551">t</a></span><span class="op" id="5481626">.</span><span class="ident" id="5481627"><a href="/gostd/testing/testing.go.html#5477474">startParallel</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481645">//&nbsp;Wait&nbsp;for&nbsp;serial&nbsp;tests&nbsp;to&nbsp;finish</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481681">//&nbsp;Assuming&nbsp;Parallel&nbsp;is&nbsp;the&nbsp;first&nbsp;thing&nbsp;a&nbsp;test&nbsp;does,&nbsp;which&nbsp;is&nbsp;reasonable,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5481756">//&nbsp;reinitialize&nbsp;the&nbsp;test&#39;s&nbsp;start&nbsp;time&nbsp;because&nbsp;it&#39;s&nbsp;actually&nbsp;starting&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5481831"><a href="/gostd/testing/testing.go.html#5481551">t</a></span><span class="op" id="5481832">.</span><span class="ident" id="5481833"><a href="/gostd/testing/testing.go.html#5475095">start</a></span>&nbsp;<span class="op" id="5481839">=</span>&nbsp;<span class="ident" id="5481841"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5481845">.</span><span class="ident" id="5481846"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="5481849">(</span><span class="op" id="5481850">)</span><br>
<span class="lineno"></span><span class="op" id="5481852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5481855">//&nbsp;An&nbsp;internal&nbsp;type&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">420</span><span class="comment" id="5481944">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5481973">type</span>&nbsp;<span class="ident" id="5481978">InternalTest</span>&nbsp;<span class="keyword" id="5481991">struct</span>&nbsp;<span class="op" id="5481998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482001">Name</span>&nbsp;<span class="builtintype" id="5482006">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482014">F</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482019">func</span><span class="op" id="5482023">(</span><span class="op" id="5482024">*</span><span class="ident" id="5482025"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5482026">)</span><br>
<span class="lineno"></span><span class="op" id="5482028">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span><span class="keyword" id="5482031">func</span>&nbsp;<span class="ident" id="5482036">tRunner</span><span class="op" id="5482043">(</span><span class="ident" id="5482044">t</span>&nbsp;<span class="op" id="5482046">*</span><span class="ident" id="5482047"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5482048">,</span>&nbsp;<span class="ident" id="5482050">test</span>&nbsp;<span class="op" id="5482055">*</span><span class="ident" id="5482056"><a href="/gostd/testing/testing.go.html#5481978">InternalTest</a></span><span class="op" id="5482068">)</span>&nbsp;<span class="op" id="5482070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482073">//&nbsp;When&nbsp;this&nbsp;goroutine&nbsp;is&nbsp;done,&nbsp;either&nbsp;because&nbsp;test.F(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482131">//&nbsp;returned&nbsp;normally&nbsp;or&nbsp;because&nbsp;a&nbsp;test&nbsp;failure&nbsp;triggered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482189">//&nbsp;a&nbsp;call&nbsp;to&nbsp;runtime.Goexit,&nbsp;record&nbsp;the&nbsp;duration&nbsp;and&nbsp;send</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482248">//&nbsp;a&nbsp;signal&nbsp;saying&nbsp;that&nbsp;the&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482291">defer</span>&nbsp;<span class="keyword" id="5482297">func</span><span class="op" id="5482301">(</span><span class="op" id="5482302">)</span>&nbsp;<span class="op" id="5482304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482308"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482309">.</span><span class="ident" id="5482310"><a href="/gostd/testing/testing.go.html#5475149">duration</a></span>&nbsp;<span class="op" id="5482319">=</span>&nbsp;<span class="ident" id="5482321"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5482325">.</span><span class="ident" id="5482326"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="5482329">(</span><span class="op" id="5482330">)</span><span class="op" id="5482331">.</span><span class="ident" id="5482332"><a href="/gostd/time/time.go.html#2739063">Sub</a></span><span class="op" id="5482335">(</span><span class="ident" id="5482336"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482337">.</span><span class="ident" id="5482338"><a href="/gostd/testing/testing.go.html#5475095">start</a></span><span class="op" id="5482343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5482347">//&nbsp;If&nbsp;the&nbsp;test&nbsp;panicked,&nbsp;print&nbsp;any&nbsp;test&nbsp;output&nbsp;before&nbsp;dying.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482410">err</span>&nbsp;<span class="op" id="5482414">:=</span>&nbsp;<span class="builtinfunc" id="5482417">recover</span><span class="op" id="5482424">(</span><span class="op" id="5482425">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482429">if</span>&nbsp;<span class="op" id="5482432">!</span><span class="ident" id="5482433"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482434">.</span><span class="ident" id="5482435"><a href="/gostd/testing/testing.go.html#5475079">finished</a></span>&nbsp;<span class="op" id="5482444">&amp;&amp;</span>&nbsp;<span class="ident" id="5482447"><a href="/gostd/testing/testing.go.html#5482410">err</a></span>&nbsp;<span class="op" id="5482451">==</span>&nbsp;<span class="builtintype" id="5482454">nil</span>&nbsp;<span class="op" id="5482458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482463"><a href="/gostd/testing/testing.go.html#5482410">err</a></span>&nbsp;<span class="op" id="5482467">=</span>&nbsp;<span class="ident" id="5482469"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5482472">.</span><span class="ident" id="5482473"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5482479">(</span><span class="string" id="5482480">&#34;test&nbsp;executed&nbsp;panic(nil)&nbsp;or&nbsp;runtime.Goexit&#34;</span><span class="op" id="5482524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5482532">if</span>&nbsp;<span class="ident" id="5482535"><a href="/gostd/testing/testing.go.html#5482410">err</a></span>&nbsp;<span class="op" id="5482539">!=</span>&nbsp;<span class="builtintype" id="5482542">nil</span>&nbsp;<span class="op" id="5482546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482551"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482552">.</span><span class="ident" id="5482553"><a href="/gostd/testing/testing.go.html#5477655">Fail</a></span><span class="op" id="5482557">(</span><span class="op" id="5482558">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482563"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482564">.</span><span class="ident" id="5482565"><a href="/gostd/testing/testing.go.html#5484182">report</a></span><span class="op" id="5482571">(</span><span class="op" id="5482572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5482577">panic</span><span class="op" id="5482582">(</span><span class="ident" id="5482583"><a href="/gostd/testing/testing.go.html#5482410">err</a></span><span class="op" id="5482586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482594"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482595">.</span><span class="ident" id="5482596"><a href="/gostd/testing/testing.go.html#5475243">signal</a></span>&nbsp;<span class="op" id="5482603">&lt;-</span>&nbsp;<span class="ident" id="5482606"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5482609">}</span><span class="op" id="5482610">(</span><span class="op" id="5482611">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482615"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482616">.</span><span class="ident" id="5482617"><a href="/gostd/testing/testing.go.html#5475095">start</a></span>&nbsp;<span class="op" id="5482623">=</span>&nbsp;<span class="ident" id="5482625"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5482629">.</span><span class="ident" id="5482630"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="5482633">(</span><span class="op" id="5482634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482637"><a href="/gostd/testing/testing.go.html#5482050">test</a></span><span class="op" id="5482641">.</span><span class="ident" id="5482642"><a href="/gostd/testing/testing.go.html#5482014">F</a></span><span class="op" id="5482643">(</span><span class="ident" id="5482644"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482648"><a href="/gostd/testing/testing.go.html#5482044">t</a></span><span class="op" id="5482649">.</span><span class="ident" id="5482650"><a href="/gostd/testing/testing.go.html#5475079">finished</a></span>&nbsp;<span class="op" id="5482659">=</span>&nbsp;<span class="builtintype" id="5482661">true</span><br>
<span class="lineno"></span><span class="op" id="5482666">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="5482669">//&nbsp;An&nbsp;internal&nbsp;function&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="5482762">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5482791">func</span>&nbsp;<span class="ident" id="5482796">Main</span><span class="op" id="5482800">(</span><span class="ident" id="5482801">matchString</span>&nbsp;<span class="keyword" id="5482813">func</span><span class="op" id="5482817">(</span><span class="ident" id="5482818">pat</span><span class="op" id="5482821">,</span>&nbsp;<span class="ident" id="5482823">str</span>&nbsp;<span class="builtintype" id="5482827">string</span><span class="op" id="5482833">)</span>&nbsp;<span class="op" id="5482835">(</span><span class="builtintype" id="5482836">bool</span><span class="op" id="5482840">,</span>&nbsp;<span class="builtintype" id="5482842">error</span><span class="op" id="5482847">)</span><span class="op" id="5482848">,</span>&nbsp;<span class="ident" id="5482850">tests</span>&nbsp;<span class="op" id="5482856">[</span><span class="op" id="5482857">]</span><span class="ident" id="5482858"><a href="/gostd/testing/testing.go.html#5481978">InternalTest</a></span><span class="op" id="5482870">,</span>&nbsp;<span class="ident" id="5482872">benchmarks</span>&nbsp;<span class="op" id="5482883">[</span><span class="op" id="5482884">]</span><span class="ident" id="5482885"><a href="/gostd/testing/benchmark.go.html#5450775">InternalBenchmark</a></span><span class="op" id="5482902">,</span>&nbsp;<span class="ident" id="5482904">examples</span>&nbsp;<span class="op" id="5482913">[</span><span class="op" id="5482914">]</span><span class="ident" id="5482915"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><span class="op" id="5482930">)</span>&nbsp;<span class="op" id="5482932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5482935"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5482937">.</span><span class="ident" id="5482938"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5482942">(</span><span class="ident" id="5482943"><a href="/gostd/testing/testing.go.html#5483451">MainStart</a></span><span class="op" id="5482952">(</span><span class="ident" id="5482953"><a href="/gostd/testing/testing.go.html#5482801">matchString</a></span><span class="op" id="5482964">,</span>&nbsp;<span class="ident" id="5482966"><a href="/gostd/testing/testing.go.html#5482850">tests</a></span><span class="op" id="5482971">,</span>&nbsp;<span class="ident" id="5482973"><a href="/gostd/testing/testing.go.html#5482872">benchmarks</a></span><span class="op" id="5482983">,</span>&nbsp;<span class="ident" id="5482985"><a href="/gostd/testing/testing.go.html#5482904">examples</a></span><span class="op" id="5482993">)</span><span class="op" id="5482994">.</span><span class="ident" id="5482995"><a href="/gostd/testing/testing.go.html#5483796">Run</a></span><span class="op" id="5482998">(</span><span class="op" id="5482999">)</span><span class="op" id="5483000">)</span><br>
<span class="lineno">455</span><span class="op" id="5483002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5483005">//&nbsp;M&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;a&nbsp;TestMain&nbsp;function&nbsp;to&nbsp;run&nbsp;the&nbsp;actual&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="5483075">type</span>&nbsp;<span class="ident" id="5483080">M</span>&nbsp;<span class="keyword" id="5483082">struct</span>&nbsp;<span class="op" id="5483089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483092">matchString</span>&nbsp;<span class="keyword" id="5483104">func</span><span class="op" id="5483108">(</span><span class="ident" id="5483109">pat</span><span class="op" id="5483112">,</span>&nbsp;<span class="ident" id="5483114">str</span>&nbsp;<span class="builtintype" id="5483118">string</span><span class="op" id="5483124">)</span>&nbsp;<span class="op" id="5483126">(</span><span class="builtintype" id="5483127">bool</span><span class="op" id="5483131">,</span>&nbsp;<span class="builtintype" id="5483133">error</span><span class="op" id="5483138">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483141">tests</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5483153">[</span><span class="op" id="5483154">]</span><span class="ident" id="5483155"><a href="/gostd/testing/testing.go.html#5481978">InternalTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483169">benchmarks</span>&nbsp;&nbsp;<span class="op" id="5483181">[</span><span class="op" id="5483182">]</span><span class="ident" id="5483183"><a href="/gostd/testing/benchmark.go.html#5450775">InternalBenchmark</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483202">examples</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5483214">[</span><span class="op" id="5483215">]</span><span class="ident" id="5483216"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><br>
<span class="lineno"></span><span class="op" id="5483232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span><span class="comment" id="5483235">//&nbsp;MainStart&nbsp;is&nbsp;meant&nbsp;for&nbsp;use&nbsp;by&nbsp;tests&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5483298">//&nbsp;It&nbsp;is&nbsp;not&nbsp;meant&nbsp;to&nbsp;be&nbsp;called&nbsp;directly&nbsp;and&nbsp;is&nbsp;not&nbsp;subject&nbsp;to&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;document.</span><br>
<span class="lineno"></span><span class="comment" id="5483394">//&nbsp;It&nbsp;may&nbsp;change&nbsp;signature&nbsp;from&nbsp;release&nbsp;to&nbsp;release.</span><br>
<span class="lineno"></span><span class="keyword" id="5483446">func</span>&nbsp;<span class="ident" id="5483451">MainStart</span><span class="op" id="5483460">(</span><span class="ident" id="5483461">matchString</span>&nbsp;<span class="keyword" id="5483473">func</span><span class="op" id="5483477">(</span><span class="ident" id="5483478">pat</span><span class="op" id="5483481">,</span>&nbsp;<span class="ident" id="5483483">str</span>&nbsp;<span class="builtintype" id="5483487">string</span><span class="op" id="5483493">)</span>&nbsp;<span class="op" id="5483495">(</span><span class="builtintype" id="5483496">bool</span><span class="op" id="5483500">,</span>&nbsp;<span class="builtintype" id="5483502">error</span><span class="op" id="5483507">)</span><span class="op" id="5483508">,</span>&nbsp;<span class="ident" id="5483510">tests</span>&nbsp;<span class="op" id="5483516">[</span><span class="op" id="5483517">]</span><span class="ident" id="5483518"><a href="/gostd/testing/testing.go.html#5481978">InternalTest</a></span><span class="op" id="5483530">,</span>&nbsp;<span class="ident" id="5483532">benchmarks</span>&nbsp;<span class="op" id="5483543">[</span><span class="op" id="5483544">]</span><span class="ident" id="5483545"><a href="/gostd/testing/benchmark.go.html#5450775">InternalBenchmark</a></span><span class="op" id="5483562">,</span>&nbsp;<span class="ident" id="5483564">examples</span>&nbsp;<span class="op" id="5483573">[</span><span class="op" id="5483574">]</span><span class="ident" id="5483575"><a href="/gostd/testing/example.go.html#5465574">InternalExample</a></span><span class="op" id="5483590">)</span>&nbsp;<span class="op" id="5483592">*</span><span class="ident" id="5483593"><a href="/gostd/testing/testing.go.html#5483080">M</a></span>&nbsp;<span class="op" id="5483595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5483598">return</span>&nbsp;<span class="op" id="5483605">&amp;</span><span class="ident" id="5483606"><a href="/gostd/testing/testing.go.html#5483080">M</a></span><span class="op" id="5483607">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483611"><a href="/gostd/testing/testing.go.html#5483092">matchString</a></span><span class="op" id="5483622">:</span>&nbsp;<span class="ident" id="5483624"><a href="/gostd/testing/testing.go.html#5483461">matchString</a></span><span class="op" id="5483635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483639"><a href="/gostd/testing/testing.go.html#5483141">tests</a></span><span class="op" id="5483644">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483652"><a href="/gostd/testing/testing.go.html#5483510">tests</a></span><span class="op" id="5483657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483661"><a href="/gostd/testing/testing.go.html#5483169">benchmarks</a></span><span class="op" id="5483671">:</span>&nbsp;&nbsp;<span class="ident" id="5483674"><a href="/gostd/testing/testing.go.html#5483532">benchmarks</a></span><span class="op" id="5483684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483688"><a href="/gostd/testing/testing.go.html#5483202">examples</a></span><span class="op" id="5483696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483701"><a href="/gostd/testing/testing.go.html#5483564">examples</a></span><span class="op" id="5483709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5483712">}</span><br>
<span class="lineno">475</span><span class="op" id="5483714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5483717">//&nbsp;Run&nbsp;runs&nbsp;the&nbsp;tests.&nbsp;It&nbsp;returns&nbsp;an&nbsp;exit&nbsp;code&nbsp;to&nbsp;pass&nbsp;to&nbsp;os.Exit.</span><br>
<span class="lineno"></span><span class="keyword" id="5483784">func</span>&nbsp;<span class="op" id="5483789">(</span><span class="ident" id="5483790">m</span>&nbsp;<span class="op" id="5483792">*</span><span class="ident" id="5483793"><a href="/gostd/testing/testing.go.html#5483080">M</a></span><span class="op" id="5483794">)</span>&nbsp;<span class="ident" id="5483796">Run</span><span class="op" id="5483799">(</span><span class="op" id="5483800">)</span>&nbsp;<span class="builtintype" id="5483802">int</span>&nbsp;<span class="op" id="5483806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483809"><a href="/gostd/testing/testing.go.html#5472535">flag</a></span><span class="op" id="5483813">.</span><span class="ident" id="5483814"><a href="/gostd/flag/flag.go.html#3962136">Parse</a></span><span class="op" id="5483819">(</span><span class="op" id="5483820">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483823"><a href="/gostd/testing/testing.go.html#5489326">parseCpuList</a></span><span class="op" id="5483835">(</span><span class="op" id="5483836">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483840"><a href="/gostd/testing/testing.go.html#5486320">before</a></span><span class="op" id="5483846">(</span><span class="op" id="5483847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483850"><a href="/gostd/testing/testing.go.html#5489080">startAlarm</a></span><span class="op" id="5483860">(</span><span class="op" id="5483861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483864"><a href="/gostd/testing/testing.go.html#5474664">haveExamples</a></span>&nbsp;<span class="op" id="5483877">=</span>&nbsp;<span class="builtinfunc" id="5483879">len</span><span class="op" id="5483882">(</span><span class="ident" id="5483883"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5483884">.</span><span class="ident" id="5483885"><a href="/gostd/testing/testing.go.html#5483202">examples</a></span><span class="op" id="5483893">)</span>&nbsp;<span class="op" id="5483895">&gt;</span>&nbsp;<span class="num" id="5483897">0</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483900">testOk</span>&nbsp;<span class="op" id="5483907">:=</span>&nbsp;<span class="ident" id="5483910"><a href="/gostd/testing/testing.go.html#5484503">RunTests</a></span><span class="op" id="5483918">(</span><span class="ident" id="5483919"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5483920">.</span><span class="ident" id="5483921"><a href="/gostd/testing/testing.go.html#5483092">matchString</a></span><span class="op" id="5483932">,</span>&nbsp;<span class="ident" id="5483934"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5483935">.</span><span class="ident" id="5483936"><a href="/gostd/testing/testing.go.html#5483141">tests</a></span><span class="op" id="5483941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483944">exampleOk</span>&nbsp;<span class="op" id="5483954">:=</span>&nbsp;<span class="ident" id="5483957"><a href="/gostd/testing/example.go.html#5465652">RunExamples</a></span><span class="op" id="5483968">(</span><span class="ident" id="5483969"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5483970">.</span><span class="ident" id="5483971"><a href="/gostd/testing/testing.go.html#5483092">matchString</a></span><span class="op" id="5483982">,</span>&nbsp;<span class="ident" id="5483984"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5483985">.</span><span class="ident" id="5483986"><a href="/gostd/testing/testing.go.html#5483202">examples</a></span><span class="op" id="5483994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5483997"><a href="/gostd/testing/testing.go.html#5489267">stopAlarm</a></span><span class="op" id="5484006">(</span><span class="op" id="5484007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484010">if</span>&nbsp;<span class="op" id="5484013">!</span><span class="ident" id="5484014"><a href="/gostd/testing/testing.go.html#5483900">testOk</a></span>&nbsp;<span class="op" id="5484021">||</span>&nbsp;<span class="op" id="5484024">!</span><span class="ident" id="5484025"><a href="/gostd/testing/testing.go.html#5483944">exampleOk</a></span>&nbsp;<span class="op" id="5484035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484039"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484042">.</span><span class="ident" id="5484043"><a href="/gostd/fmt/print.go.html#2145772">Println</a></span><span class="op" id="5484050">(</span><span class="string" id="5484051">&#34;FAIL&#34;</span><span class="op" id="5484057">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484061"><a href="/gostd/testing/testing.go.html#5487104">after</a></span><span class="op" id="5484066">(</span><span class="op" id="5484067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484071">return</span>&nbsp;<span class="num" id="5484078">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484084"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484087">.</span><span class="ident" id="5484088"><a href="/gostd/fmt/print.go.html#2145772">Println</a></span><span class="op" id="5484095">(</span><span class="string" id="5484096">&#34;PASS&#34;</span><span class="op" id="5484102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484105"><a href="/gostd/testing/benchmark.go.html#5457401">RunBenchmarks</a></span><span class="op" id="5484118">(</span><span class="ident" id="5484119"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5484120">.</span><span class="ident" id="5484121"><a href="/gostd/testing/testing.go.html#5483092">matchString</a></span><span class="op" id="5484132">,</span>&nbsp;<span class="ident" id="5484134"><a href="/gostd/testing/testing.go.html#5483790">m</a></span><span class="op" id="5484135">.</span><span class="ident" id="5484136"><a href="/gostd/testing/testing.go.html#5483169">benchmarks</a></span><span class="op" id="5484146">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484149"><a href="/gostd/testing/testing.go.html#5487104">after</a></span><span class="op" id="5484154">(</span><span class="op" id="5484155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484158">return</span>&nbsp;<span class="num" id="5484165">0</span><br>
<span class="lineno"></span><span class="op" id="5484167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484170">func</span>&nbsp;<span class="op" id="5484175">(</span><span class="ident" id="5484176">t</span>&nbsp;<span class="op" id="5484178">*</span><span class="ident" id="5484179"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5484180">)</span>&nbsp;<span class="ident" id="5484182">report</span><span class="op" id="5484188">(</span><span class="op" id="5484189">)</span>&nbsp;<span class="op" id="5484191">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484194">dstr</span>&nbsp;<span class="op" id="5484199">:=</span>&nbsp;<span class="ident" id="5484202"><a href="/gostd/testing/testing.go.html#5476546">fmtDuration</a></span><span class="op" id="5484213">(</span><span class="ident" id="5484214"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484215">.</span><span class="ident" id="5484216"><a href="/gostd/testing/testing.go.html#5475149">duration</a></span><span class="op" id="5484224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484227">format</span>&nbsp;<span class="op" id="5484234">:=</span>&nbsp;<span class="string" id="5484237">&#34;---&nbsp;%s:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484260">if</span>&nbsp;<span class="ident" id="5484263"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484264">.</span><span class="ident" id="5484265"><a href="/gostd/testing/testing.go.html#5477786">Failed</a></span><span class="op" id="5484271">(</span><span class="op" id="5484272">)</span>&nbsp;<span class="op" id="5484274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484278"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484281">.</span><span class="ident" id="5484282"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5484288">(</span><span class="ident" id="5484289"><a href="/gostd/testing/testing.go.html#5484227">format</a></span><span class="op" id="5484295">,</span>&nbsp;<span class="string" id="5484297">&#34;FAIL&#34;</span><span class="op" id="5484303">,</span>&nbsp;<span class="ident" id="5484305"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484306">.</span><span class="ident" id="5484307"><a href="/gostd/testing/testing.go.html#5477432">name</a></span><span class="op" id="5484311">,</span>&nbsp;<span class="ident" id="5484313"><a href="/gostd/testing/testing.go.html#5484194">dstr</a></span><span class="op" id="5484317">,</span>&nbsp;<span class="ident" id="5484319"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484320">.</span><span class="ident" id="5484321"><a href="/gostd/testing/testing.go.html#5474896">output</a></span><span class="op" id="5484327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484330">}</span>&nbsp;<span class="keyword" id="5484332">else</span>&nbsp;<span class="keyword" id="5484337">if</span>&nbsp;<span class="op" id="5484340">*</span><span class="ident" id="5484341"><a href="/gostd/testing/testing.go.html#5473479">chatty</a></span>&nbsp;<span class="op" id="5484348">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484352">if</span>&nbsp;<span class="ident" id="5484355"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484356">.</span><span class="ident" id="5484357"><a href="/gostd/testing/testing.go.html#5481365">Skipped</a></span><span class="op" id="5484364">(</span><span class="op" id="5484365">)</span>&nbsp;<span class="op" id="5484367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484372"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484375">.</span><span class="ident" id="5484376"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5484382">(</span><span class="ident" id="5484383"><a href="/gostd/testing/testing.go.html#5484227">format</a></span><span class="op" id="5484389">,</span>&nbsp;<span class="string" id="5484391">&#34;SKIP&#34;</span><span class="op" id="5484397">,</span>&nbsp;<span class="ident" id="5484399"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484400">.</span><span class="ident" id="5484401"><a href="/gostd/testing/testing.go.html#5477432">name</a></span><span class="op" id="5484405">,</span>&nbsp;<span class="ident" id="5484407"><a href="/gostd/testing/testing.go.html#5484194">dstr</a></span><span class="op" id="5484411">,</span>&nbsp;<span class="ident" id="5484413"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484414">.</span><span class="ident" id="5484415"><a href="/gostd/testing/testing.go.html#5474896">output</a></span><span class="op" id="5484421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484425">}</span>&nbsp;<span class="keyword" id="5484427">else</span>&nbsp;<span class="op" id="5484432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484437"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484440">.</span><span class="ident" id="5484441"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5484447">(</span><span class="ident" id="5484448"><a href="/gostd/testing/testing.go.html#5484227">format</a></span><span class="op" id="5484454">,</span>&nbsp;<span class="string" id="5484456">&#34;PASS&#34;</span><span class="op" id="5484462">,</span>&nbsp;<span class="ident" id="5484464"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484465">.</span><span class="ident" id="5484466"><a href="/gostd/testing/testing.go.html#5477432">name</a></span><span class="op" id="5484470">,</span>&nbsp;<span class="ident" id="5484472"><a href="/gostd/testing/testing.go.html#5484194">dstr</a></span><span class="op" id="5484476">,</span>&nbsp;<span class="ident" id="5484478"><a href="/gostd/testing/testing.go.html#5484176">t</a></span><span class="op" id="5484479">.</span><span class="ident" id="5484480"><a href="/gostd/testing/testing.go.html#5474896">output</a></span><span class="op" id="5484486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484490">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484493">}</span><br>
<span class="lineno"></span><span class="op" id="5484495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5484498">func</span>&nbsp;<span class="ident" id="5484503">RunTests</span><span class="op" id="5484511">(</span><span class="ident" id="5484512">matchString</span>&nbsp;<span class="keyword" id="5484524">func</span><span class="op" id="5484528">(</span><span class="ident" id="5484529">pat</span><span class="op" id="5484532">,</span>&nbsp;<span class="ident" id="5484534">str</span>&nbsp;<span class="builtintype" id="5484538">string</span><span class="op" id="5484544">)</span>&nbsp;<span class="op" id="5484546">(</span><span class="builtintype" id="5484547">bool</span><span class="op" id="5484551">,</span>&nbsp;<span class="builtintype" id="5484553">error</span><span class="op" id="5484558">)</span><span class="op" id="5484559">,</span>&nbsp;<span class="ident" id="5484561">tests</span>&nbsp;<span class="op" id="5484567">[</span><span class="op" id="5484568">]</span><span class="ident" id="5484569"><a href="/gostd/testing/testing.go.html#5481978">InternalTest</a></span><span class="op" id="5484581">)</span>&nbsp;<span class="op" id="5484583">(</span><span class="ident" id="5484584">ok</span>&nbsp;<span class="builtintype" id="5484587">bool</span><span class="op" id="5484591">)</span>&nbsp;<span class="op" id="5484593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484596"><a href="/gostd/testing/testing.go.html#5484584">ok</a></span>&nbsp;<span class="op" id="5484599">=</span>&nbsp;<span class="builtintype" id="5484601">true</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484607">if</span>&nbsp;<span class="builtinfunc" id="5484610">len</span><span class="op" id="5484613">(</span><span class="ident" id="5484614"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5484619">)</span>&nbsp;<span class="op" id="5484621">==</span>&nbsp;<span class="num" id="5484624">0</span>&nbsp;<span class="op" id="5484626">&amp;&amp;</span>&nbsp;<span class="op" id="5484629">!</span><span class="ident" id="5484630"><a href="/gostd/testing/testing.go.html#5474664">haveExamples</a></span>&nbsp;<span class="op" id="5484643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484647"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5484650">.</span><span class="ident" id="5484651"><a href="/gostd/fmt/print.go.html#2145376">Fprintln</a></span><span class="op" id="5484659">(</span><span class="ident" id="5484660"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5484662">.</span><span class="ident" id="5484663"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5484669">,</span>&nbsp;<span class="string" id="5484671">&#34;testing:&nbsp;warning:&nbsp;no&nbsp;tests&nbsp;to&nbsp;run&#34;</span><span class="op" id="5484706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484710">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5484718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484721">for</span>&nbsp;<span class="ident" id="5484725">_</span><span class="op" id="5484726">,</span>&nbsp;<span class="ident" id="5484728">procs</span>&nbsp;<span class="op" id="5484734">:=</span>&nbsp;<span class="keyword" id="5484737">range</span>&nbsp;<span class="ident" id="5484743"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span>&nbsp;<span class="op" id="5484751">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5484755"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5484762">.</span><span class="ident" id="5484763"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="5484773">(</span><span class="ident" id="5484774"><a href="/gostd/testing/testing.go.html#5484728">procs</a></span><span class="op" id="5484779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484783">//&nbsp;We&nbsp;build&nbsp;a&nbsp;new&nbsp;channel&nbsp;tree&nbsp;for&nbsp;each&nbsp;run&nbsp;of&nbsp;the&nbsp;loop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484842">//&nbsp;collector&nbsp;merges&nbsp;in&nbsp;one&nbsp;channel&nbsp;all&nbsp;the&nbsp;upstream&nbsp;signals&nbsp;from&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484925">//&nbsp;If&nbsp;all&nbsp;tests&nbsp;pump&nbsp;to&nbsp;the&nbsp;same&nbsp;channel,&nbsp;a&nbsp;bug&nbsp;can&nbsp;occur&nbsp;where&nbsp;a&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5484998">//&nbsp;kicks&nbsp;off&nbsp;a&nbsp;goroutine&nbsp;that&nbsp;Fails,&nbsp;yet&nbsp;the&nbsp;test&nbsp;still&nbsp;delivers&nbsp;a&nbsp;completion&nbsp;signal,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5485086">//&nbsp;which&nbsp;skews&nbsp;the&nbsp;counting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485117">var</span>&nbsp;<span class="ident" id="5485121">collector</span>&nbsp;<span class="op" id="5485131">=</span>&nbsp;<span class="builtinfunc" id="5485133">make</span><span class="op" id="5485137">(</span><span class="keyword" id="5485138">chan</span>&nbsp;<span class="keyword" id="5485143">interface</span><span class="op" id="5485152">{</span><span class="op" id="5485153">}</span><span class="op" id="5485154">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485159">numParallel</span>&nbsp;<span class="op" id="5485171">:=</span>&nbsp;<span class="num" id="5485174">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485178">startParallel</span>&nbsp;<span class="op" id="5485192">:=</span>&nbsp;<span class="builtinfunc" id="5485195">make</span><span class="op" id="5485199">(</span><span class="keyword" id="5485200">chan</span>&nbsp;<span class="builtintype" id="5485205">bool</span><span class="op" id="5485209">)</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485214">for</span>&nbsp;<span class="ident" id="5485218">i</span>&nbsp;<span class="op" id="5485220">:=</span>&nbsp;<span class="num" id="5485223">0</span><span class="op" id="5485224">;</span>&nbsp;<span class="ident" id="5485226"><a href="/gostd/testing/testing.go.html#5485218">i</a></span>&nbsp;<span class="op" id="5485228">&lt;</span>&nbsp;<span class="builtinfunc" id="5485230">len</span><span class="op" id="5485233">(</span><span class="ident" id="5485234"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5485239">)</span><span class="op" id="5485240">;</span>&nbsp;<span class="ident" id="5485242"><a href="/gostd/testing/testing.go.html#5485218">i</a></span><span class="op" id="5485243">++</span>&nbsp;<span class="op" id="5485246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485251">matched</span><span class="op" id="5485258">,</span>&nbsp;<span class="ident" id="5485260">err</span>&nbsp;<span class="op" id="5485264">:=</span>&nbsp;<span class="ident" id="5485267"><a href="/gostd/testing/testing.go.html#5484512">matchString</a></span><span class="op" id="5485278">(</span><span class="op" id="5485279">*</span><span class="ident" id="5485280"><a href="/gostd/testing/testing.go.html#5473681">match</a></span><span class="op" id="5485285">,</span>&nbsp;<span class="ident" id="5485287"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5485292">[</span><span class="ident" id="5485293"><a href="/gostd/testing/testing.go.html#5485218">i</a></span><span class="op" id="5485294">]</span><span class="op" id="5485295">.</span><span class="ident" id="5485296"><a href="/gostd/testing/testing.go.html#5482001">Name</a></span><span class="op" id="5485300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485305">if</span>&nbsp;<span class="ident" id="5485308"><a href="/gostd/testing/testing.go.html#5485260">err</a></span>&nbsp;<span class="op" id="5485312">!=</span>&nbsp;<span class="builtintype" id="5485315">nil</span>&nbsp;<span class="op" id="5485319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485325"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5485328">.</span><span class="ident" id="5485329"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5485336">(</span><span class="ident" id="5485337"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5485339">.</span><span class="ident" id="5485340"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5485346">,</span>&nbsp;<span class="string" id="5485348">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5485393">,</span>&nbsp;<span class="ident" id="5485395"><a href="/gostd/testing/testing.go.html#5485260">err</a></span><span class="op" id="5485398">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485404"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5485406">.</span><span class="ident" id="5485407"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5485411">(</span><span class="num" id="5485412">1</span><span class="op" id="5485413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485423">if</span>&nbsp;<span class="op" id="5485426">!</span><span class="ident" id="5485427"><a href="/gostd/testing/testing.go.html#5485251">matched</a></span>&nbsp;<span class="op" id="5485435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485441">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485453">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485458">testName</span>&nbsp;<span class="op" id="5485467">:=</span>&nbsp;<span class="ident" id="5485470"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5485475">[</span><span class="ident" id="5485476"><a href="/gostd/testing/testing.go.html#5485218">i</a></span><span class="op" id="5485477">]</span><span class="op" id="5485478">.</span><span class="ident" id="5485479"><a href="/gostd/testing/testing.go.html#5482001">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485487">if</span>&nbsp;<span class="ident" id="5485490"><a href="/gostd/testing/testing.go.html#5484728">procs</a></span>&nbsp;<span class="op" id="5485496">!=</span>&nbsp;<span class="num" id="5485499">1</span>&nbsp;<span class="op" id="5485501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485507"><a href="/gostd/testing/testing.go.html#5485458">testName</a></span>&nbsp;<span class="op" id="5485516">=</span>&nbsp;<span class="ident" id="5485518"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5485521">.</span><span class="ident" id="5485522"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5485529">(</span><span class="string" id="5485530">&#34;%s-%d&#34;</span><span class="op" id="5485537">,</span>&nbsp;<span class="ident" id="5485539"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5485544">[</span><span class="ident" id="5485545"><a href="/gostd/testing/testing.go.html#5485218">i</a></span><span class="op" id="5485546">]</span><span class="op" id="5485547">.</span><span class="ident" id="5485548"><a href="/gostd/testing/testing.go.html#5482001">Name</a></span><span class="op" id="5485552">,</span>&nbsp;<span class="ident" id="5485554"><a href="/gostd/testing/testing.go.html#5484728">procs</a></span><span class="op" id="5485559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485569">t</span>&nbsp;<span class="op" id="5485571">:=</span>&nbsp;<span class="op" id="5485574">&amp;</span><span class="ident" id="5485575"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5485576">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485582"><a href="/gostd/testing/testing.go.html#5477424">common</a></span><span class="op" id="5485588">:</span>&nbsp;<span class="ident" id="5485590"><a href="/gostd/testing/testing.go.html#5474828">common</a></span><span class="op" id="5485596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485603"><a href="/gostd/testing/testing.go.html#5475243">signal</a></span><span class="op" id="5485609">:</span>&nbsp;<span class="builtinfunc" id="5485611">make</span><span class="op" id="5485615">(</span><span class="keyword" id="5485616">chan</span>&nbsp;<span class="keyword" id="5485621">interface</span><span class="op" id="5485630">{</span><span class="op" id="5485631">}</span><span class="op" id="5485632">)</span><span class="op" id="5485633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485639">}</span><span class="op" id="5485640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485646"><a href="/gostd/testing/testing.go.html#5477432">name</a></span><span class="op" id="5485650">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485661"><a href="/gostd/testing/testing.go.html#5485458">testName</a></span><span class="op" id="5485669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485675"><a href="/gostd/testing/testing.go.html#5477474">startParallel</a></span><span class="op" id="5485688">:</span>&nbsp;<span class="ident" id="5485690"><a href="/gostd/testing/testing.go.html#5485178">startParallel</a></span><span class="op" id="5485703">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485713"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485714">.</span><span class="ident" id="5485715"><a href="/gostd/testing/testing.go.html#5475173">self</a></span>&nbsp;<span class="op" id="5485720">=</span>&nbsp;<span class="ident" id="5485722"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485727">if</span>&nbsp;<span class="op" id="5485730">*</span><span class="ident" id="5485731"><a href="/gostd/testing/testing.go.html#5473479">chatty</a></span>&nbsp;<span class="op" id="5485738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485744"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5485747">.</span><span class="ident" id="5485748"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5485754">(</span><span class="string" id="5485755">&#34;===&nbsp;RUN&nbsp;%s\n&#34;</span><span class="op" id="5485769">,</span>&nbsp;<span class="ident" id="5485771"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485772">.</span><span class="ident" id="5485773"><a href="/gostd/testing/testing.go.html#5477432">name</a></span><span class="op" id="5485777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485782">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485787">go</span>&nbsp;<span class="ident" id="5485790"><a href="/gostd/testing/testing.go.html#5482036">tRunner</a></span><span class="op" id="5485797">(</span><span class="ident" id="5485798"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485799">,</span>&nbsp;<span class="op" id="5485801">&amp;</span><span class="ident" id="5485802"><a href="/gostd/testing/testing.go.html#5484561">tests</a></span><span class="op" id="5485807">[</span><span class="ident" id="5485808"><a href="/gostd/testing/testing.go.html#5485218">i</a></span><span class="op" id="5485809">]</span><span class="op" id="5485810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485815">out</span>&nbsp;<span class="op" id="5485819">:=</span>&nbsp;<span class="op" id="5485822">(</span><span class="op" id="5485823">&lt;-</span><span class="ident" id="5485825"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485826">.</span><span class="ident" id="5485827"><a href="/gostd/testing/testing.go.html#5475243">signal</a></span><span class="op" id="5485833">)</span><span class="op" id="5485834">.</span><span class="op" id="5485835">(</span><span class="op" id="5485836">*</span><span class="ident" id="5485837"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5485838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485843">if</span>&nbsp;<span class="ident" id="5485846"><a href="/gostd/testing/testing.go.html#5485815">out</a></span>&nbsp;<span class="op" id="5485850">==</span>&nbsp;<span class="builtintype" id="5485853">nil</span>&nbsp;<span class="op" id="5485857">{</span>&nbsp;<span class="comment" id="5485859">//&nbsp;Parallel&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485880">go</span>&nbsp;<span class="keyword" id="5485883">func</span><span class="op" id="5485887">(</span><span class="op" id="5485888">)</span>&nbsp;<span class="op" id="5485890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485897"><a href="/gostd/testing/testing.go.html#5485121">collector</a></span>&nbsp;<span class="op" id="5485907">&lt;-</span>&nbsp;<span class="op" id="5485910">&lt;-</span><span class="ident" id="5485912"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485913">.</span><span class="ident" id="5485914"><a href="/gostd/testing/testing.go.html#5475243">signal</a></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485925">}</span><span class="op" id="5485926">(</span><span class="op" id="5485927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485933"><a href="/gostd/testing/testing.go.html#5485159">numParallel</a></span><span class="op" id="5485944">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5485951">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5485963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485968"><a href="/gostd/testing/testing.go.html#5485569">t</a></span><span class="op" id="5485969">.</span><span class="ident" id="5485970"><a href="/gostd/testing/testing.go.html#5484182">report</a></span><span class="op" id="5485976">(</span><span class="op" id="5485977">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5485982"><a href="/gostd/testing/testing.go.html#5484584">ok</a></span>&nbsp;<span class="op" id="5485985">=</span>&nbsp;<span class="ident" id="5485987"><a href="/gostd/testing/testing.go.html#5484584">ok</a></span>&nbsp;<span class="op" id="5485990">&amp;&amp;</span>&nbsp;<span class="op" id="5485993">!</span><span class="ident" id="5485994"><a href="/gostd/testing/testing.go.html#5485815">out</a></span><span class="op" id="5485997">.</span><span class="ident" id="5485998"><a href="/gostd/testing/testing.go.html#5477786">Failed</a></span><span class="op" id="5486004">(</span><span class="op" id="5486005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486014">running</span>&nbsp;<span class="op" id="5486022">:=</span>&nbsp;<span class="num" id="5486025">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486029">for</span>&nbsp;<span class="ident" id="5486033"><a href="/gostd/testing/testing.go.html#5485159">numParallel</a></span><span class="op" id="5486044">+</span><span class="ident" id="5486045"><a href="/gostd/testing/testing.go.html#5486014">running</a></span>&nbsp;<span class="op" id="5486053">&gt;</span>&nbsp;<span class="num" id="5486055">0</span>&nbsp;<span class="op" id="5486057">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486062">if</span>&nbsp;<span class="ident" id="5486065"><a href="/gostd/testing/testing.go.html#5486014">running</a></span>&nbsp;<span class="op" id="5486073">&lt;</span>&nbsp;<span class="op" id="5486075">*</span><span class="ident" id="5486076"><a href="/gostd/testing/testing.go.html#5474566">parallel</a></span>&nbsp;<span class="op" id="5486085">&amp;&amp;</span>&nbsp;<span class="ident" id="5486088"><a href="/gostd/testing/testing.go.html#5485159">numParallel</a></span>&nbsp;<span class="op" id="5486100">&gt;</span>&nbsp;<span class="num" id="5486102">0</span>&nbsp;<span class="op" id="5486104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486110"><a href="/gostd/testing/testing.go.html#5485178">startParallel</a></span>&nbsp;<span class="op" id="5486124">&lt;-</span>&nbsp;<span class="builtintype" id="5486127">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486136"><a href="/gostd/testing/testing.go.html#5486014">running</a></span><span class="op" id="5486143">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486150"><a href="/gostd/testing/testing.go.html#5485159">numParallel</a></span><span class="op" id="5486161">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486168">continue</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486185">t</span>&nbsp;<span class="op" id="5486187">:=</span>&nbsp;<span class="op" id="5486190">(</span><span class="op" id="5486191">&lt;-</span><span class="ident" id="5486193"><a href="/gostd/testing/testing.go.html#5485121">collector</a></span><span class="op" id="5486202">)</span><span class="op" id="5486203">.</span><span class="op" id="5486204">(</span><span class="op" id="5486205">*</span><span class="ident" id="5486206"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="5486207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486212"><a href="/gostd/testing/testing.go.html#5486185">t</a></span><span class="op" id="5486213">.</span><span class="ident" id="5486214"><a href="/gostd/testing/testing.go.html#5484182">report</a></span><span class="op" id="5486220">(</span><span class="op" id="5486221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486226"><a href="/gostd/testing/testing.go.html#5484584">ok</a></span>&nbsp;<span class="op" id="5486229">=</span>&nbsp;<span class="ident" id="5486231"><a href="/gostd/testing/testing.go.html#5484584">ok</a></span>&nbsp;<span class="op" id="5486234">&amp;&amp;</span>&nbsp;<span class="op" id="5486237">!</span><span class="ident" id="5486238"><a href="/gostd/testing/testing.go.html#5486185">t</a></span><span class="op" id="5486239">.</span><span class="ident" id="5486240"><a href="/gostd/testing/testing.go.html#5477786">Failed</a></span><span class="op" id="5486246">(</span><span class="op" id="5486247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486252"><a href="/gostd/testing/testing.go.html#5486014">running</a></span><span class="op" id="5486259">--</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486270">return</span><br>
<span class="lineno"></span><span class="op" id="5486277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="comment" id="5486280">//&nbsp;before&nbsp;runs&nbsp;before&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="5486315">func</span>&nbsp;<span class="ident" id="5486320">before</span><span class="op" id="5486326">(</span><span class="op" id="5486327">)</span>&nbsp;<span class="op" id="5486329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486332">if</span>&nbsp;<span class="op" id="5486335">*</span><span class="ident" id="5486336"><a href="/gostd/testing/testing.go.html#5473902">memProfileRate</a></span>&nbsp;<span class="op" id="5486351">&gt;</span>&nbsp;<span class="num" id="5486353">0</span>&nbsp;<span class="op" id="5486355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486359"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5486366">.</span><span class="ident" id="5486367"><a href="/gostd/runtime/mprof.go.html#1628650">MemProfileRate</a></span>&nbsp;<span class="op" id="5486382">=</span>&nbsp;<span class="op" id="5486384">*</span><span class="ident" id="5486385"><a href="/gostd/testing/testing.go.html#5473902">memProfileRate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486401">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486404">if</span>&nbsp;<span class="op" id="5486407">*</span><span class="ident" id="5486408"><a href="/gostd/testing/testing.go.html#5473996">cpuProfile</a></span>&nbsp;<span class="op" id="5486419">!=</span>&nbsp;<span class="string" id="5486422">&#34;&#34;</span>&nbsp;<span class="op" id="5486425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486429">f</span><span class="op" id="5486430">,</span>&nbsp;<span class="ident" id="5486432">err</span>&nbsp;<span class="op" id="5486436">:=</span>&nbsp;<span class="ident" id="5486439"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5486441">.</span><span class="ident" id="5486442"><a href="/gostd/os/file.go.html#2447225">Create</a></span><span class="op" id="5486448">(</span><span class="ident" id="5486449"><a href="/gostd/testing/testing.go.html#5488099">toOutputDir</a></span><span class="op" id="5486460">(</span><span class="op" id="5486461">*</span><span class="ident" id="5486462"><a href="/gostd/testing/testing.go.html#5473996">cpuProfile</a></span><span class="op" id="5486472">)</span><span class="op" id="5486473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486477">if</span>&nbsp;<span class="ident" id="5486480"><a href="/gostd/testing/testing.go.html#5486432">err</a></span>&nbsp;<span class="op" id="5486484">!=</span>&nbsp;<span class="builtintype" id="5486487">nil</span>&nbsp;<span class="op" id="5486491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486496"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5486499">.</span><span class="ident" id="5486500"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5486507">(</span><span class="ident" id="5486508"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5486510">.</span><span class="ident" id="5486511"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5486517">,</span>&nbsp;<span class="string" id="5486519">&#34;testing:&nbsp;%s&#34;</span><span class="op" id="5486532">,</span>&nbsp;<span class="ident" id="5486534"><a href="/gostd/testing/testing.go.html#5486432">err</a></span><span class="op" id="5486537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486542">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486555">if</span>&nbsp;<span class="ident" id="5486558">err</span>&nbsp;<span class="op" id="5486562">:=</span>&nbsp;<span class="ident" id="5486565"><a href="/gostd/testing/testing.go.html#5472567">pprof</a></span><span class="op" id="5486570">.</span><span class="ident" id="5486571"><a href="/gostd/runtime/pprof/pprof.go.html#5505843">StartCPUProfile</a></span><span class="op" id="5486586">(</span><span class="ident" id="5486587"><a href="/gostd/testing/testing.go.html#5486429">f</a></span><span class="op" id="5486588">)</span><span class="op" id="5486589">;</span>&nbsp;<span class="ident" id="5486591"><a href="/gostd/testing/testing.go.html#5486558">err</a></span>&nbsp;<span class="op" id="5486595">!=</span>&nbsp;<span class="builtintype" id="5486598">nil</span>&nbsp;<span class="op" id="5486602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486607"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5486610">.</span><span class="ident" id="5486611"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5486618">(</span><span class="ident" id="5486619"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5486621">.</span><span class="ident" id="5486622"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5486628">,</span>&nbsp;<span class="string" id="5486630">&#34;testing:&nbsp;can&#39;t&nbsp;start&nbsp;cpu&nbsp;profile:&nbsp;%s&#34;</span><span class="op" id="5486668">,</span>&nbsp;<span class="ident" id="5486670"><a href="/gostd/testing/testing.go.html#5486558">err</a></span><span class="op" id="5486673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486678"><a href="/gostd/testing/testing.go.html#5486429">f</a></span><span class="op" id="5486679">.</span><span class="ident" id="5486680"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5486685">(</span><span class="op" id="5486686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486691">return</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5486704">//&nbsp;Could&nbsp;save&nbsp;f&nbsp;so&nbsp;after&nbsp;can&nbsp;call&nbsp;f.Close;&nbsp;not&nbsp;worth&nbsp;the&nbsp;effort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486773">if</span>&nbsp;<span class="op" id="5486776">*</span><span class="ident" id="5486777"><a href="/gostd/testing/testing.go.html#5474109">blockProfile</a></span>&nbsp;<span class="op" id="5486790">!=</span>&nbsp;<span class="string" id="5486793">&#34;&#34;</span>&nbsp;<span class="op" id="5486796">&amp;&amp;</span>&nbsp;<span class="op" id="5486799">*</span><span class="ident" id="5486800"><a href="/gostd/testing/testing.go.html#5474238">blockProfileRate</a></span>&nbsp;<span class="op" id="5486817">&gt;=</span>&nbsp;<span class="num" id="5486820">0</span>&nbsp;<span class="op" id="5486822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486826"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5486833">.</span><span class="ident" id="5486834"><a href="/gostd/runtime/mprof.go.html#1626598">SetBlockProfileRate</a></span><span class="op" id="5486853">(</span><span class="op" id="5486854">*</span><span class="ident" id="5486855"><a href="/gostd/testing/testing.go.html#5474238">blockProfileRate</a></span><span class="op" id="5486871">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5486874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5486877">if</span>&nbsp;<span class="op" id="5486880">*</span><span class="ident" id="5486881"><a href="/gostd/testing/testing.go.html#5473562">coverProfile</a></span>&nbsp;<span class="op" id="5486894">!=</span>&nbsp;<span class="string" id="5486897">&#34;&#34;</span>&nbsp;<span class="op" id="5486900">&amp;&amp;</span>&nbsp;<span class="ident" id="5486903"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5486908">.</span><span class="ident" id="5486909"><a href="/gostd/testing/cover.go.html#5463145">Mode</a></span>&nbsp;<span class="op" id="5486914">==</span>&nbsp;<span class="string" id="5486917">&#34;&#34;</span>&nbsp;<span class="op" id="5486920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5486924"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5486927">.</span><span class="ident" id="5486928"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5486935">(</span><span class="ident" id="5486936"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5486938">.</span><span class="ident" id="5486939"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5486945">,</span>&nbsp;<span class="string" id="5486947">&#34;testing:&nbsp;cannot&nbsp;use&nbsp;-test.coverprofile&nbsp;because&nbsp;test&nbsp;binary&nbsp;was&nbsp;not&nbsp;built&nbsp;with&nbsp;coverage&nbsp;enabled\n&#34;</span><span class="op" id="5487045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487049"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487051">.</span><span class="ident" id="5487052"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5487056">(</span><span class="num" id="5487057">2</span><span class="op" id="5487058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487061">}</span><br>
<span class="lineno">610</span><span class="op" id="5487063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5487066">//&nbsp;after&nbsp;runs&nbsp;after&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="5487099">func</span>&nbsp;<span class="ident" id="5487104">after</span><span class="op" id="5487109">(</span><span class="op" id="5487110">)</span>&nbsp;<span class="op" id="5487112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487115">if</span>&nbsp;<span class="op" id="5487118">*</span><span class="ident" id="5487119"><a href="/gostd/testing/testing.go.html#5473996">cpuProfile</a></span>&nbsp;<span class="op" id="5487130">!=</span>&nbsp;<span class="string" id="5487133">&#34;&#34;</span>&nbsp;<span class="op" id="5487136">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487140"><a href="/gostd/testing/testing.go.html#5472567">pprof</a></span><span class="op" id="5487145">.</span><span class="ident" id="5487146"><a href="/gostd/runtime/pprof/pprof.go.html#5506983">StopCPUProfile</a></span><span class="op" id="5487160">(</span><span class="op" id="5487161">)</span>&nbsp;<span class="comment" id="5487163">//&nbsp;flushes&nbsp;profile&nbsp;to&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487194">if</span>&nbsp;<span class="op" id="5487197">*</span><span class="ident" id="5487198"><a href="/gostd/testing/testing.go.html#5473787">memProfile</a></span>&nbsp;<span class="op" id="5487209">!=</span>&nbsp;<span class="string" id="5487212">&#34;&#34;</span>&nbsp;<span class="op" id="5487215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487219">f</span><span class="op" id="5487220">,</span>&nbsp;<span class="ident" id="5487222">err</span>&nbsp;<span class="op" id="5487226">:=</span>&nbsp;<span class="ident" id="5487229"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487231">.</span><span class="ident" id="5487232"><a href="/gostd/os/file.go.html#2447225">Create</a></span><span class="op" id="5487238">(</span><span class="ident" id="5487239"><a href="/gostd/testing/testing.go.html#5488099">toOutputDir</a></span><span class="op" id="5487250">(</span><span class="op" id="5487251">*</span><span class="ident" id="5487252"><a href="/gostd/testing/testing.go.html#5473787">memProfile</a></span><span class="op" id="5487262">)</span><span class="op" id="5487263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487267">if</span>&nbsp;<span class="ident" id="5487270"><a href="/gostd/testing/testing.go.html#5487222">err</a></span>&nbsp;<span class="op" id="5487274">!=</span>&nbsp;<span class="builtintype" id="5487277">nil</span>&nbsp;<span class="op" id="5487281">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487286"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5487289">.</span><span class="ident" id="5487290"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5487297">(</span><span class="ident" id="5487298"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487300">.</span><span class="ident" id="5487301"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5487307">,</span>&nbsp;<span class="string" id="5487309">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5487324">,</span>&nbsp;<span class="ident" id="5487326"><a href="/gostd/testing/testing.go.html#5487222">err</a></span><span class="op" id="5487329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487334"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487336">.</span><span class="ident" id="5487337"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5487341">(</span><span class="num" id="5487342">2</span><span class="op" id="5487343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487351"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5487358">.</span><span class="ident" id="5487359"><a href="/gostd/runtime/malloc.go.html#1602269">GC</a></span><span class="op" id="5487361">(</span><span class="op" id="5487362">)</span>&nbsp;<span class="comment" id="5487364">//&nbsp;materialize&nbsp;all&nbsp;statistics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487396">if</span>&nbsp;<span class="ident" id="5487399"><a href="/gostd/testing/testing.go.html#5487222">err</a></span>&nbsp;<span class="op" id="5487403">=</span>&nbsp;<span class="ident" id="5487405"><a href="/gostd/testing/testing.go.html#5472567">pprof</a></span><span class="op" id="5487410">.</span><span class="ident" id="5487411"><a href="/gostd/runtime/pprof/pprof.go.html#5499870">WriteHeapProfile</a></span><span class="op" id="5487427">(</span><span class="ident" id="5487428"><a href="/gostd/testing/testing.go.html#5487219">f</a></span><span class="op" id="5487429">)</span><span class="op" id="5487430">;</span>&nbsp;<span class="ident" id="5487432"><a href="/gostd/testing/testing.go.html#5487222">err</a></span>&nbsp;<span class="op" id="5487436">!=</span>&nbsp;<span class="builtintype" id="5487439">nil</span>&nbsp;<span class="op" id="5487443">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487448"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5487451">.</span><span class="ident" id="5487452"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5487459">(</span><span class="ident" id="5487460"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487462">.</span><span class="ident" id="5487463"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5487469">,</span>&nbsp;<span class="string" id="5487471">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="5487502">,</span>&nbsp;<span class="op" id="5487504">*</span><span class="ident" id="5487505"><a href="/gostd/testing/testing.go.html#5473787">memProfile</a></span><span class="op" id="5487515">,</span>&nbsp;<span class="ident" id="5487517"><a href="/gostd/testing/testing.go.html#5487222">err</a></span><span class="op" id="5487520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487525"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487527">.</span><span class="ident" id="5487528"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5487532">(</span><span class="num" id="5487533">2</span><span class="op" id="5487534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487542"><a href="/gostd/testing/testing.go.html#5487219">f</a></span><span class="op" id="5487543">.</span><span class="ident" id="5487544"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5487549">(</span><span class="op" id="5487550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487553">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487556">if</span>&nbsp;<span class="op" id="5487559">*</span><span class="ident" id="5487560"><a href="/gostd/testing/testing.go.html#5474109">blockProfile</a></span>&nbsp;<span class="op" id="5487573">!=</span>&nbsp;<span class="string" id="5487576">&#34;&#34;</span>&nbsp;<span class="op" id="5487579">&amp;&amp;</span>&nbsp;<span class="op" id="5487582">*</span><span class="ident" id="5487583"><a href="/gostd/testing/testing.go.html#5474238">blockProfileRate</a></span>&nbsp;<span class="op" id="5487600">&gt;=</span>&nbsp;<span class="num" id="5487603">0</span>&nbsp;<span class="op" id="5487605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487609">f</span><span class="op" id="5487610">,</span>&nbsp;<span class="ident" id="5487612">err</span>&nbsp;<span class="op" id="5487616">:=</span>&nbsp;<span class="ident" id="5487619"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487621">.</span><span class="ident" id="5487622"><a href="/gostd/os/file.go.html#2447225">Create</a></span><span class="op" id="5487628">(</span><span class="ident" id="5487629"><a href="/gostd/testing/testing.go.html#5488099">toOutputDir</a></span><span class="op" id="5487640">(</span><span class="op" id="5487641">*</span><span class="ident" id="5487642"><a href="/gostd/testing/testing.go.html#5474109">blockProfile</a></span><span class="op" id="5487654">)</span><span class="op" id="5487655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487659">if</span>&nbsp;<span class="ident" id="5487662"><a href="/gostd/testing/testing.go.html#5487612">err</a></span>&nbsp;<span class="op" id="5487666">!=</span>&nbsp;<span class="builtintype" id="5487669">nil</span>&nbsp;<span class="op" id="5487673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487678"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5487681">.</span><span class="ident" id="5487682"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5487689">(</span><span class="ident" id="5487690"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487692">.</span><span class="ident" id="5487693"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5487699">,</span>&nbsp;<span class="string" id="5487701">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5487716">,</span>&nbsp;<span class="ident" id="5487718"><a href="/gostd/testing/testing.go.html#5487612">err</a></span><span class="op" id="5487721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487726"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487728">.</span><span class="ident" id="5487729"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5487733">(</span><span class="num" id="5487734">2</span><span class="op" id="5487735">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487743">if</span>&nbsp;<span class="ident" id="5487746"><a href="/gostd/testing/testing.go.html#5487612">err</a></span>&nbsp;<span class="op" id="5487750">=</span>&nbsp;<span class="ident" id="5487752"><a href="/gostd/testing/testing.go.html#5472567">pprof</a></span><span class="op" id="5487757">.</span><span class="ident" id="5487758"><a href="/gostd/runtime/pprof/pprof.go.html#5493000">Lookup</a></span><span class="op" id="5487764">(</span><span class="string" id="5487765">&#34;block&#34;</span><span class="op" id="5487772">)</span><span class="op" id="5487773">.</span><span class="ident" id="5487774"><a href="/gostd/runtime/pprof/pprof.go.html#5496076">WriteTo</a></span><span class="op" id="5487781">(</span><span class="ident" id="5487782"><a href="/gostd/testing/testing.go.html#5487609">f</a></span><span class="op" id="5487783">,</span>&nbsp;<span class="num" id="5487785">0</span><span class="op" id="5487786">)</span><span class="op" id="5487787">;</span>&nbsp;<span class="ident" id="5487789"><a href="/gostd/testing/testing.go.html#5487612">err</a></span>&nbsp;<span class="op" id="5487793">!=</span>&nbsp;<span class="builtintype" id="5487796">nil</span>&nbsp;<span class="op" id="5487800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487805"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5487808">.</span><span class="ident" id="5487809"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5487816">(</span><span class="ident" id="5487817"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487819">.</span><span class="ident" id="5487820"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5487826">,</span>&nbsp;<span class="string" id="5487828">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="5487859">,</span>&nbsp;<span class="op" id="5487861">*</span><span class="ident" id="5487862"><a href="/gostd/testing/testing.go.html#5474109">blockProfile</a></span><span class="op" id="5487874">,</span>&nbsp;<span class="ident" id="5487876"><a href="/gostd/testing/testing.go.html#5487612">err</a></span><span class="op" id="5487879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487884"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5487886">.</span><span class="ident" id="5487887"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5487891">(</span><span class="num" id="5487892">2</span><span class="op" id="5487893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487897">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487901"><a href="/gostd/testing/testing.go.html#5487609">f</a></span><span class="op" id="5487902">.</span><span class="ident" id="5487903"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5487908">(</span><span class="op" id="5487909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5487915">if</span>&nbsp;<span class="ident" id="5487918"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5487923">.</span><span class="ident" id="5487924"><a href="/gostd/testing/cover.go.html#5463145">Mode</a></span>&nbsp;<span class="op" id="5487929">!=</span>&nbsp;<span class="string" id="5487932">&#34;&#34;</span>&nbsp;<span class="op" id="5487935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5487939"><a href="/gostd/testing/cover.go.html#5464450">coverReport</a></span><span class="op" id="5487950">(</span><span class="op" id="5487951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5487954">}</span><br>
<span class="lineno">645</span><span class="op" id="5487956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5487959">//&nbsp;toOutputDir&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;relocated,&nbsp;if&nbsp;required,&nbsp;to&nbsp;outputDir.</span><br>
<span class="lineno"></span><span class="comment" id="5488034">//&nbsp;Simple&nbsp;implementation&nbsp;to&nbsp;avoid&nbsp;pulling&nbsp;in&nbsp;path/filepath.</span><br>
<span class="lineno"></span><span class="keyword" id="5488094">func</span>&nbsp;<span class="ident" id="5488099">toOutputDir</span><span class="op" id="5488110">(</span><span class="ident" id="5488111">path</span>&nbsp;<span class="builtintype" id="5488116">string</span><span class="op" id="5488122">)</span>&nbsp;<span class="builtintype" id="5488124">string</span>&nbsp;<span class="op" id="5488131">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488134">if</span>&nbsp;<span class="op" id="5488137">*</span><span class="ident" id="5488138"><a href="/gostd/testing/testing.go.html#5473331">outputDir</a></span>&nbsp;<span class="op" id="5488148">==</span>&nbsp;<span class="string" id="5488151">&#34;&#34;</span>&nbsp;<span class="op" id="5488154">||</span>&nbsp;<span class="ident" id="5488157"><a href="/gostd/testing/testing.go.html#5488111">path</a></span>&nbsp;<span class="op" id="5488162">==</span>&nbsp;<span class="string" id="5488165">&#34;&#34;</span>&nbsp;<span class="op" id="5488168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488172">return</span>&nbsp;<span class="ident" id="5488179"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488188">if</span>&nbsp;<span class="ident" id="5488191"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5488198">.</span><span class="ident" id="5488199"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="5488204">==</span>&nbsp;<span class="string" id="5488207">&#34;windows&#34;</span>&nbsp;<span class="op" id="5488217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488221">//&nbsp;On&nbsp;Windows,&nbsp;it&#39;s&nbsp;clumsy,&nbsp;but&nbsp;we&nbsp;can&nbsp;be&nbsp;almost&nbsp;always&nbsp;correct</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488287">//&nbsp;by&nbsp;just&nbsp;looking&nbsp;for&nbsp;a&nbsp;drive&nbsp;letter&nbsp;and&nbsp;a&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488340">//&nbsp;Absolute&nbsp;paths&nbsp;always&nbsp;have&nbsp;a&nbsp;drive&nbsp;letter&nbsp;(ignoring&nbsp;UNC).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488403">//&nbsp;Problem:&nbsp;if&nbsp;path&nbsp;==&nbsp;&#34;C:A&#34;&nbsp;and&nbsp;outputdir&nbsp;==&nbsp;&#34;C:\Go&#34;&nbsp;it&#39;s&nbsp;unclear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488472">//&nbsp;what&nbsp;to&nbsp;do,&nbsp;but&nbsp;even&nbsp;then&nbsp;path/filepath&nbsp;doesn&#39;t&nbsp;help.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488531">//&nbsp;TODO:&nbsp;Worth&nbsp;doing&nbsp;better?&nbsp;Probably&nbsp;not,&nbsp;because&nbsp;we&#39;re&nbsp;here&nbsp;only</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488600">//&nbsp;under&nbsp;the&nbsp;management&nbsp;of&nbsp;go&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488638">if</span>&nbsp;<span class="builtinfunc" id="5488641">len</span><span class="op" id="5488644">(</span><span class="ident" id="5488645"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><span class="op" id="5488649">)</span>&nbsp;<span class="op" id="5488651">&gt;=</span>&nbsp;<span class="num" id="5488654">2</span>&nbsp;<span class="op" id="5488656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5488661">letter</span><span class="op" id="5488667">,</span>&nbsp;<span class="ident" id="5488669">colon</span>&nbsp;<span class="op" id="5488675">:=</span>&nbsp;<span class="ident" id="5488678"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><span class="op" id="5488682">[</span><span class="num" id="5488683">0</span><span class="op" id="5488684">]</span><span class="op" id="5488685">,</span>&nbsp;<span class="ident" id="5488687"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><span class="op" id="5488691">[</span><span class="num" id="5488692">1</span><span class="op" id="5488693">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488698">if</span>&nbsp;<span class="op" id="5488701">(</span><span class="string" id="5488702">&#39;a&#39;</span>&nbsp;<span class="op" id="5488706">&lt;=</span>&nbsp;<span class="ident" id="5488709"><a href="/gostd/testing/testing.go.html#5488661">letter</a></span>&nbsp;<span class="op" id="5488716">&amp;&amp;</span>&nbsp;<span class="ident" id="5488719"><a href="/gostd/testing/testing.go.html#5488661">letter</a></span>&nbsp;<span class="op" id="5488726">&lt;=</span>&nbsp;<span class="string" id="5488729">&#39;z&#39;</span>&nbsp;<span class="op" id="5488733">||</span>&nbsp;<span class="string" id="5488736">&#39;A&#39;</span>&nbsp;<span class="op" id="5488740">&lt;=</span>&nbsp;<span class="ident" id="5488743"><a href="/gostd/testing/testing.go.html#5488661">letter</a></span>&nbsp;<span class="op" id="5488750">&amp;&amp;</span>&nbsp;<span class="ident" id="5488753"><a href="/gostd/testing/testing.go.html#5488661">letter</a></span>&nbsp;<span class="op" id="5488760">&lt;=</span>&nbsp;<span class="string" id="5488763">&#39;Z&#39;</span><span class="op" id="5488766">)</span>&nbsp;<span class="op" id="5488768">&amp;&amp;</span>&nbsp;<span class="ident" id="5488771"><a href="/gostd/testing/testing.go.html#5488669">colon</a></span>&nbsp;<span class="op" id="5488777">==</span>&nbsp;<span class="string" id="5488780">&#39;:&#39;</span>&nbsp;<span class="op" id="5488784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5488790">//&nbsp;If&nbsp;path&nbsp;starts&nbsp;with&nbsp;a&nbsp;drive&nbsp;letter&nbsp;we&#39;re&nbsp;stuck&nbsp;with&nbsp;it&nbsp;regardless.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488864">return</span>&nbsp;<span class="ident" id="5488871"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488889">if</span>&nbsp;<span class="ident" id="5488892"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5488894">.</span><span class="ident" id="5488895"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="5488910">(</span><span class="ident" id="5488911"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><span class="op" id="5488915">[</span><span class="num" id="5488916">0</span><span class="op" id="5488917">]</span><span class="op" id="5488918">)</span>&nbsp;<span class="op" id="5488920">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488924">return</span>&nbsp;<span class="ident" id="5488931"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5488937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5488940">return</span>&nbsp;<span class="ident" id="5488947"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5488950">.</span><span class="ident" id="5488951"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5488958">(</span><span class="string" id="5488959">&#34;%s%c%s&#34;</span><span class="op" id="5488967">,</span>&nbsp;<span class="op" id="5488969">*</span><span class="ident" id="5488970"><a href="/gostd/testing/testing.go.html#5473331">outputDir</a></span><span class="op" id="5488979">,</span>&nbsp;<span class="ident" id="5488981"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5488983">.</span><span class="ident" id="5488984"><a href="/gostd/os/path_unix.go.html#2467185">PathSeparator</a></span><span class="op" id="5488997">,</span>&nbsp;<span class="ident" id="5488999"><a href="/gostd/testing/testing.go.html#5488111">path</a></span><span class="op" id="5489003">)</span><br>
<span class="lineno"></span><span class="op" id="5489005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5489008">var</span>&nbsp;<span class="ident" id="5489012">timer</span>&nbsp;<span class="op" id="5489018">*</span><span class="ident" id="5489019"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5489023">.</span><span class="ident" id="5489024"><a href="/gostd/time/sleep.go.html#2715079">Timer</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5489031">//&nbsp;startAlarm&nbsp;starts&nbsp;an&nbsp;alarm&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="5489075">func</span>&nbsp;<span class="ident" id="5489080">startAlarm</span><span class="op" id="5489090">(</span><span class="op" id="5489091">)</span>&nbsp;<span class="op" id="5489093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489096">if</span>&nbsp;<span class="op" id="5489099">*</span><span class="ident" id="5489100"><a href="/gostd/testing/testing.go.html#5474343">timeout</a></span>&nbsp;<span class="op" id="5489108">&gt;</span>&nbsp;<span class="num" id="5489110">0</span>&nbsp;<span class="op" id="5489112">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489116"><a href="/gostd/testing/testing.go.html#5489012">timer</a></span>&nbsp;<span class="op" id="5489122">=</span>&nbsp;<span class="ident" id="5489124"><a href="/gostd/testing/testing.go.html#5472614">time</a></span><span class="op" id="5489128">.</span><span class="ident" id="5489129"><a href="/gostd/time/sleep.go.html#2716875">AfterFunc</a></span><span class="op" id="5489138">(</span><span class="op" id="5489139">*</span><span class="ident" id="5489140"><a href="/gostd/testing/testing.go.html#5474343">timeout</a></span><span class="op" id="5489147">,</span>&nbsp;<span class="keyword" id="5489149">func</span><span class="op" id="5489153">(</span><span class="op" id="5489154">)</span>&nbsp;<span class="op" id="5489156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5489161">panic</span><span class="op" id="5489166">(</span><span class="ident" id="5489167"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5489170">.</span><span class="ident" id="5489171"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5489178">(</span><span class="string" id="5489179">&#34;test&nbsp;timed&nbsp;out&nbsp;after&nbsp;%v&#34;</span><span class="op" id="5489204">,</span>&nbsp;<span class="op" id="5489206">*</span><span class="ident" id="5489207"><a href="/gostd/testing/testing.go.html#5474343">timeout</a></span><span class="op" id="5489214">)</span><span class="op" id="5489215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489219">}</span><span class="op" id="5489220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489223">}</span><br>
<span class="lineno"></span><span class="op" id="5489225">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="5489228">//&nbsp;stopAlarm&nbsp;turns&nbsp;off&nbsp;the&nbsp;alarm.</span><br>
<span class="lineno"></span><span class="keyword" id="5489262">func</span>&nbsp;<span class="ident" id="5489267">stopAlarm</span><span class="op" id="5489276">(</span><span class="op" id="5489277">)</span>&nbsp;<span class="op" id="5489279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489282">if</span>&nbsp;<span class="op" id="5489285">*</span><span class="ident" id="5489286"><a href="/gostd/testing/testing.go.html#5474343">timeout</a></span>&nbsp;<span class="op" id="5489294">&gt;</span>&nbsp;<span class="num" id="5489296">0</span>&nbsp;<span class="op" id="5489298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489302"><a href="/gostd/testing/testing.go.html#5489012">timer</a></span><span class="op" id="5489307">.</span><span class="ident" id="5489308"><a href="/gostd/time/sleep.go.html#2715389">Stop</a></span><span class="op" id="5489312">(</span><span class="op" id="5489313">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489316">}</span><br>
<span class="lineno"></span><span class="op" id="5489318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5489321">func</span>&nbsp;<span class="ident" id="5489326">parseCpuList</span><span class="op" id="5489338">(</span><span class="op" id="5489339">)</span>&nbsp;<span class="op" id="5489341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489344">for</span>&nbsp;<span class="ident" id="5489348">_</span><span class="op" id="5489349">,</span>&nbsp;<span class="ident" id="5489351">val</span>&nbsp;<span class="op" id="5489355">:=</span>&nbsp;<span class="keyword" id="5489358">range</span>&nbsp;<span class="ident" id="5489364"><a href="/gostd/testing/testing.go.html#5472595">strings</a></span><span class="op" id="5489371">.</span><span class="ident" id="5489372"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5489377">(</span><span class="op" id="5489378">*</span><span class="ident" id="5489379"><a href="/gostd/testing/testing.go.html#5474455">cpuListStr</a></span><span class="op" id="5489389">,</span>&nbsp;<span class="string" id="5489391">&#34;,&#34;</span><span class="op" id="5489394">)</span>&nbsp;<span class="op" id="5489396">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489400"><a href="/gostd/testing/testing.go.html#5489351">val</a></span>&nbsp;<span class="op" id="5489404">=</span>&nbsp;<span class="ident" id="5489406"><a href="/gostd/testing/testing.go.html#5472595">strings</a></span><span class="op" id="5489413">.</span><span class="ident" id="5489414"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5489423">(</span><span class="ident" id="5489424"><a href="/gostd/testing/testing.go.html#5489351">val</a></span><span class="op" id="5489427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489431">if</span>&nbsp;<span class="ident" id="5489434"><a href="/gostd/testing/testing.go.html#5489351">val</a></span>&nbsp;<span class="op" id="5489438">==</span>&nbsp;<span class="string" id="5489441">&#34;&#34;</span>&nbsp;<span class="op" id="5489444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489449">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489464">cpu</span><span class="op" id="5489467">,</span>&nbsp;<span class="ident" id="5489469">err</span>&nbsp;<span class="op" id="5489473">:=</span>&nbsp;<span class="ident" id="5489476"><a href="/gostd/testing/testing.go.html#5472584">strconv</a></span><span class="op" id="5489483">.</span><span class="ident" id="5489484"><a href="/gostd/strconv/atoi.go.html#2357032">Atoi</a></span><span class="op" id="5489488">(</span><span class="ident" id="5489489"><a href="/gostd/testing/testing.go.html#5489351">val</a></span><span class="op" id="5489492">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489496">if</span>&nbsp;<span class="ident" id="5489499"><a href="/gostd/testing/testing.go.html#5489469">err</a></span>&nbsp;<span class="op" id="5489503">!=</span>&nbsp;<span class="builtintype" id="5489506">nil</span>&nbsp;<span class="op" id="5489510">||</span>&nbsp;<span class="ident" id="5489513"><a href="/gostd/testing/testing.go.html#5489464">cpu</a></span>&nbsp;<span class="op" id="5489517">&lt;=</span>&nbsp;<span class="num" id="5489520">0</span>&nbsp;<span class="op" id="5489522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489527"><a href="/gostd/testing/testing.go.html#5472543">fmt</a></span><span class="op" id="5489530">.</span><span class="ident" id="5489531"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5489538">(</span><span class="ident" id="5489539"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5489541">.</span><span class="ident" id="5489542"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5489548">,</span>&nbsp;<span class="string" id="5489550">&#34;testing:&nbsp;invalid&nbsp;value&nbsp;%q&nbsp;for&nbsp;-test.cpu\n&#34;</span><span class="op" id="5489593">,</span>&nbsp;<span class="ident" id="5489595"><a href="/gostd/testing/testing.go.html#5489351">val</a></span><span class="op" id="5489598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489603"><a href="/gostd/testing/testing.go.html#5472550">os</a></span><span class="op" id="5489605">.</span><span class="ident" id="5489606"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5489610">(</span><span class="num" id="5489611">1</span><span class="op" id="5489612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489620"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span>&nbsp;<span class="op" id="5489628">=</span>&nbsp;<span class="builtinfunc" id="5489630">append</span><span class="op" id="5489636">(</span><span class="ident" id="5489637"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span><span class="op" id="5489644">,</span>&nbsp;<span class="ident" id="5489646"><a href="/gostd/testing/testing.go.html#5489464">cpu</a></span><span class="op" id="5489649">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5489655">if</span>&nbsp;<span class="ident" id="5489658"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span>&nbsp;<span class="op" id="5489666">==</span>&nbsp;<span class="builtintype" id="5489669">nil</span>&nbsp;<span class="op" id="5489673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5489677"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span>&nbsp;<span class="op" id="5489685">=</span>&nbsp;<span class="builtinfunc" id="5489687">append</span><span class="op" id="5489693">(</span><span class="ident" id="5489694"><a href="/gostd/testing/testing.go.html#5474707">cpuList</a></span><span class="op" id="5489701">,</span>&nbsp;<span class="ident" id="5489703"><a href="/gostd/testing/testing.go.html#5472556">runtime</a></span><span class="op" id="5489710">.</span><span class="ident" id="5489711"><a href="/gostd/runtime/debug.go.html#1521359">GOMAXPROCS</a></span><span class="op" id="5489721">(</span><span class="op" id="5489722">-</span><span class="num" id="5489723">1</span><span class="op" id="5489724">)</span><span class="op" id="5489725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5489728">}</span><br>
<span class="lineno"></span><span class="op" id="5489730">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
