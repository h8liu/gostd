<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5099627">package</span>&nbsp;<span class="ident" id="5099635">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5099641">import</span>&nbsp;<span class="op" id="5099648">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5099651">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5099658">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5099680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5099683">func</span>&nbsp;<span class="ident" id="5099688">lexAsm8</span><span class="op" id="5099695">(</span><span class="ident" id="5099696">x</span>&nbsp;<span class="op" id="5099698">*</span><span class="ident" id="5099699">lex8</span><span class="op" id="5099703">.</span><span class="ident" id="5099704">Lexer</span><span class="op" id="5099709">)</span>&nbsp;<span class="op" id="5099711">*</span><span class="ident" id="5099712">lex8</span><span class="op" id="5099716">.</span><span class="ident" id="5099717">Token</span>&nbsp;<span class="op" id="5099723">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5099726">r</span>&nbsp;<span class="op" id="5099728">:=</span>&nbsp;<span class="ident" id="5099731">x</span><span class="op" id="5099732">.</span><span class="ident" id="5099733">Rune</span><span class="op" id="5099737">(</span><span class="op" id="5099738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099741">if</span>&nbsp;<span class="ident" id="5099744">x</span><span class="op" id="5099745">.</span><span class="ident" id="5099746">IsWhite</span><span class="op" id="5099753">(</span><span class="ident" id="5099754">r</span><span class="op" id="5099755">)</span>&nbsp;<span class="op" id="5099757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5099761">panic</span><span class="op" id="5099766">(</span><span class="string" id="5099767">&#34;incorrect&nbsp;token&nbsp;start&#34;</span><span class="op" id="5099790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5099793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099797">switch</span>&nbsp;<span class="ident" id="5099804">r</span>&nbsp;<span class="op" id="5099806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099809">case</span>&nbsp;<span class="string" id="5099814">&#39;\n&#39;</span><span class="op" id="5099818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5099822">x</span><span class="op" id="5099823">.</span><span class="ident" id="5099824">Next</span><span class="op" id="5099828">(</span><span class="op" id="5099829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099833">return</span>&nbsp;<span class="ident" id="5099840">x</span><span class="op" id="5099841">.</span><span class="ident" id="5099842">MakeToken</span><span class="op" id="5099851">(</span><span class="ident" id="5099852">Endl</span><span class="op" id="5099856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099859">case</span>&nbsp;<span class="string" id="5099864">&#39;{&#39;</span><span class="op" id="5099867">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5099871">x</span><span class="op" id="5099872">.</span><span class="ident" id="5099873">Next</span><span class="op" id="5099877">(</span><span class="op" id="5099878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099882">return</span>&nbsp;<span class="ident" id="5099889">x</span><span class="op" id="5099890">.</span><span class="ident" id="5099891">MakeToken</span><span class="op" id="5099900">(</span><span class="ident" id="5099901">Lbrace</span><span class="op" id="5099907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099910">case</span>&nbsp;<span class="string" id="5099915">&#39;}&#39;</span><span class="op" id="5099918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5099922">x</span><span class="op" id="5099923">.</span><span class="ident" id="5099924">Next</span><span class="op" id="5099928">(</span><span class="op" id="5099929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099933">return</span>&nbsp;<span class="ident" id="5099940">x</span><span class="op" id="5099941">.</span><span class="ident" id="5099942">MakeToken</span><span class="op" id="5099951">(</span><span class="ident" id="5099952">Rbrace</span><span class="op" id="5099958">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099961">case</span>&nbsp;<span class="string" id="5099966">&#39;/&#39;</span><span class="op" id="5099969">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099973">return</span>&nbsp;<span class="ident" id="5099980">lexComment</span><span class="op" id="5099990">(</span><span class="ident" id="5099991">x</span><span class="op" id="5099992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5099995">case</span>&nbsp;<span class="string" id="5100000">&#39;&#34;&#39;</span><span class="op" id="5100003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100007">return</span>&nbsp;<span class="ident" id="5100014">lexString</span><span class="op" id="5100023">(</span><span class="ident" id="5100024">x</span><span class="op" id="5100025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5100028">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100032">if</span>&nbsp;<span class="ident" id="5100035">isOperandChar</span><span class="op" id="5100048">(</span><span class="ident" id="5100049">r</span><span class="op" id="5100050">)</span>&nbsp;<span class="op" id="5100052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100056">return</span>&nbsp;<span class="ident" id="5100063">lexOperand</span><span class="op" id="5100073">(</span><span class="ident" id="5100074">x</span><span class="op" id="5100075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5100078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100082">x</span><span class="op" id="5100083">.</span><span class="ident" id="5100084">Err</span><span class="op" id="5100087">(</span><span class="string" id="5100088">&#34;illegal&nbsp;char&nbsp;%q&#34;</span><span class="op" id="5100105">,</span>&nbsp;<span class="ident" id="5100107">r</span><span class="op" id="5100108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100111">x</span><span class="op" id="5100112">.</span><span class="ident" id="5100113">Next</span><span class="op" id="5100117">(</span><span class="op" id="5100118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100121">return</span>&nbsp;<span class="ident" id="5100128">x</span><span class="op" id="5100129">.</span><span class="ident" id="5100130">MakeToken</span><span class="op" id="5100139">(</span><span class="ident" id="5100140">lex8</span><span class="op" id="5100144">.</span><span class="ident" id="5100145">Illegal</span><span class="op" id="5100152">)</span><br>
<span class="lineno"></span><span class="op" id="5100154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="5100157">//&nbsp;NewLexer&nbsp;creates&nbsp;a&nbsp;new&nbsp;lexer&nbsp;of&nbsp;a&nbsp;file&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="5100207">func</span>&nbsp;<span class="ident" id="5100212">newLexer</span><span class="op" id="5100220">(</span><span class="ident" id="5100221">file</span>&nbsp;<span class="builtintype" id="5100226">string</span><span class="op" id="5100232">,</span>&nbsp;<span class="ident" id="5100234">r</span>&nbsp;<span class="ident" id="5100236">io</span><span class="op" id="5100238">.</span><span class="ident" id="5100239">ReadCloser</span><span class="op" id="5100249">)</span>&nbsp;<span class="op" id="5100251">*</span><span class="ident" id="5100252">lex8</span><span class="op" id="5100256">.</span><span class="ident" id="5100257">Lexer</span>&nbsp;<span class="op" id="5100263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100266">ret</span>&nbsp;<span class="op" id="5100270">:=</span>&nbsp;<span class="ident" id="5100273">lex8</span><span class="op" id="5100277">.</span><span class="ident" id="5100278">NewLexer</span><span class="op" id="5100286">(</span><span class="ident" id="5100287">file</span><span class="op" id="5100291">,</span>&nbsp;<span class="ident" id="5100293">r</span><span class="op" id="5100294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100297">ret</span><span class="op" id="5100300">.</span><span class="ident" id="5100301">LexFunc</span>&nbsp;<span class="op" id="5100309">=</span>&nbsp;<span class="ident" id="5100311">lexAsm8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100320">return</span>&nbsp;<span class="ident" id="5100327">ret</span><br>
<span class="lineno">45</span><span class="op" id="5100331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5100334">//&nbsp;Tokens&nbsp;parses&nbsp;a&nbsp;file&nbsp;in&nbsp;a&nbsp;token&nbsp;array</span><br>
<span class="lineno"></span><span class="keyword" id="5100375">func</span>&nbsp;<span class="ident" id="5100380">Tokens</span><span class="op" id="5100386">(</span><span class="ident" id="5100387">f</span>&nbsp;<span class="builtintype" id="5100389">string</span><span class="op" id="5100395">,</span>&nbsp;<span class="ident" id="5100397">r</span>&nbsp;<span class="ident" id="5100399">io</span><span class="op" id="5100401">.</span><span class="ident" id="5100402">ReadCloser</span><span class="op" id="5100412">)</span>&nbsp;<span class="op" id="5100414">(</span><span class="op" id="5100415">[</span><span class="op" id="5100416">]</span><span class="op" id="5100417">*</span><span class="ident" id="5100418">lex8</span><span class="op" id="5100422">.</span><span class="ident" id="5100423">Token</span><span class="op" id="5100428">,</span>&nbsp;<span class="op" id="5100430">[</span><span class="op" id="5100431">]</span><span class="op" id="5100432">*</span><span class="ident" id="5100433">lex8</span><span class="op" id="5100437">.</span><span class="ident" id="5100438">Error</span><span class="op" id="5100443">)</span>&nbsp;<span class="op" id="5100445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100448">x</span>&nbsp;<span class="op" id="5100450">:=</span>&nbsp;<span class="ident" id="5100453">newLexer</span><span class="op" id="5100461">(</span><span class="ident" id="5100462">f</span><span class="op" id="5100463">,</span>&nbsp;<span class="ident" id="5100465">r</span><span class="op" id="5100466">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100470">var</span>&nbsp;<span class="ident" id="5100474">ret</span>&nbsp;<span class="op" id="5100478">[</span><span class="op" id="5100479">]</span><span class="op" id="5100480">*</span><span class="ident" id="5100481">lex8</span><span class="op" id="5100485">.</span><span class="ident" id="5100486">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100494">for</span>&nbsp;<span class="op" id="5100498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100502">t</span>&nbsp;<span class="op" id="5100504">:=</span>&nbsp;<span class="ident" id="5100507">x</span><span class="op" id="5100508">.</span><span class="ident" id="5100509">Token</span><span class="op" id="5100514">(</span><span class="op" id="5100515">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100519">ret</span>&nbsp;<span class="op" id="5100523">=</span>&nbsp;<span class="builtinfunc" id="5100525">append</span><span class="op" id="5100531">(</span><span class="ident" id="5100532">ret</span><span class="op" id="5100535">,</span>&nbsp;<span class="ident" id="5100537">t</span><span class="op" id="5100538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100542">if</span>&nbsp;<span class="ident" id="5100545">t</span><span class="op" id="5100546">.</span><span class="ident" id="5100547">Type</span>&nbsp;<span class="op" id="5100552">==</span>&nbsp;<span class="ident" id="5100555">lex8</span><span class="op" id="5100559">.</span><span class="ident" id="5100560">EOF</span>&nbsp;<span class="op" id="5100564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100569">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5100577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5100580">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5100584">errs</span>&nbsp;<span class="op" id="5100589">:=</span>&nbsp;<span class="ident" id="5100592">x</span><span class="op" id="5100593">.</span><span class="ident" id="5100594">Errs</span><span class="op" id="5100598">(</span><span class="op" id="5100599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100602">if</span>&nbsp;<span class="ident" id="5100605">errs</span>&nbsp;<span class="op" id="5100610">!=</span>&nbsp;<span class="ident" id="5100613">nil</span>&nbsp;<span class="op" id="5100617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100621">return</span>&nbsp;<span class="ident" id="5100628">nil</span><span class="op" id="5100631">,</span>&nbsp;<span class="ident" id="5100633">errs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5100639">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5100643">return</span>&nbsp;<span class="ident" id="5100650">ret</span><span class="op" id="5100653">,</span>&nbsp;<span class="ident" id="5100655">nil</span><br>
<span class="lineno"></span><span class="op" id="5100659">}</span>
</div>
</body>
</html>
