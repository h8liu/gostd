<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1664395">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1664450">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1664504">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1664555">package</span>&nbsp;<span class="ident" id="1664563">io</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1664567">type</span>&nbsp;<span class="ident" id="1664572">multiReader</span>&nbsp;<span class="keyword" id="1664584">struct</span>&nbsp;<span class="op" id="1664591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1664594">readers</span>&nbsp;<span class="op" id="1664602">[</span><span class="op" id="1664603">]</span><span class="ident" id="1664604"><a href="/io/io.go.html#1651790">Reader</a></span><br>
<span class="lineno"></span><span class="op" id="1664611">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1664614">func</span>&nbsp;<span class="op" id="1664619">(</span><span class="ident" id="1664620">mr</span>&nbsp;<span class="op" id="1664623">*</span><span class="ident" id="1664624"><a href="/io/multi.go.html#1664572">multiReader</a></span><span class="op" id="1664635">)</span>&nbsp;<span class="ident" id="1664637">Read</span><span class="op" id="1664641">(</span><span class="ident" id="1664642">p</span>&nbsp;<span class="op" id="1664644">[</span><span class="op" id="1664645">]</span><span class="builtintype" id="1664646">byte</span><span class="op" id="1664650">)</span>&nbsp;<span class="op" id="1664652">(</span><span class="ident" id="1664653">n</span>&nbsp;<span class="builtintype" id="1664655">int</span><span class="op" id="1664658">,</span>&nbsp;<span class="ident" id="1664660">err</span>&nbsp;<span class="builtintype" id="1664664">error</span><span class="op" id="1664669">)</span>&nbsp;<span class="op" id="1664671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1664674">for</span>&nbsp;<span class="builtinfunc" id="1664678">len</span><span class="op" id="1664681">(</span><span class="ident" id="1664682"><a href="/io/multi.go.html#1664620">mr</a></span><span class="op" id="1664684">.</span><span class="ident" id="1664685">readers</span><span class="op" id="1664692">)</span>&nbsp;<span class="op" id="1664694">&gt;</span>&nbsp;<span class="num" id="1664696">0</span>&nbsp;<span class="op" id="1664698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1664702"><a href="/io/multi.go.html#1664653">n</a></span><span class="op" id="1664703">,</span>&nbsp;<span class="ident" id="1664705"><a href="/io/multi.go.html#1664660">err</a></span>&nbsp;<span class="op" id="1664709">=</span>&nbsp;<span class="ident" id="1664711"><a href="/io/multi.go.html#1664620">mr</a></span><span class="op" id="1664713">.</span><span class="ident" id="1664714">readers</span><span class="op" id="1664721">[</span><span class="num" id="1664722">0</span><span class="op" id="1664723">]</span><span class="op" id="1664724">.</span><span class="ident" id="1664725">Read</span><span class="op" id="1664729">(</span><span class="ident" id="1664730"><a href="/io/multi.go.html#1664642">p</a></span><span class="op" id="1664731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1664735">if</span>&nbsp;<span class="ident" id="1664738"><a href="/io/multi.go.html#1664653">n</a></span>&nbsp;<span class="op" id="1664740">&gt;</span>&nbsp;<span class="num" id="1664742">0</span>&nbsp;<span class="op" id="1664744">||</span>&nbsp;<span class="ident" id="1664747"><a href="/io/multi.go.html#1664660">err</a></span>&nbsp;<span class="op" id="1664751">!=</span>&nbsp;<span class="ident" id="1664754"><a href="/io/io.go.html#1649917">EOF</a></span>&nbsp;<span class="op" id="1664758">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1664763">if</span>&nbsp;<span class="ident" id="1664766"><a href="/io/multi.go.html#1664660">err</a></span>&nbsp;<span class="op" id="1664770">==</span>&nbsp;<span class="ident" id="1664773"><a href="/io/io.go.html#1649917">EOF</a></span>&nbsp;<span class="op" id="1664777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1664783">//&nbsp;Don&#39;t&nbsp;return&nbsp;EOF&nbsp;yet.&nbsp;There&nbsp;may&nbsp;be&nbsp;more&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1664836">//&nbsp;in&nbsp;the&nbsp;remaining&nbsp;readers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1664869"><a href="/io/multi.go.html#1664660">err</a></span>&nbsp;<span class="op" id="1664873">=</span>&nbsp;<span class="ident" id="1664875">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1664882">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1664887">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1664896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1664900"><a href="/io/multi.go.html#1664620">mr</a></span><span class="op" id="1664902">.</span><span class="ident" id="1664903">readers</span>&nbsp;<span class="op" id="1664911">=</span>&nbsp;<span class="ident" id="1664913"><a href="/io/multi.go.html#1664620">mr</a></span><span class="op" id="1664915">.</span><span class="ident" id="1664916">readers</span><span class="op" id="1664923">[</span><span class="num" id="1664924">1</span><span class="op" id="1664925">:</span><span class="op" id="1664926">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1664929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1664932">return</span>&nbsp;<span class="num" id="1664939">0</span><span class="op" id="1664940">,</span>&nbsp;<span class="ident" id="1664942"><a href="/io/io.go.html#1649917">EOF</a></span><br>
<span class="lineno">25</span><span class="op" id="1664946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1664949">//&nbsp;MultiReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&#39;s&nbsp;the&nbsp;logical&nbsp;concatenation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1665017">//&nbsp;the&nbsp;provided&nbsp;input&nbsp;readers.&nbsp;&nbsp;They&#39;re&nbsp;read&nbsp;sequentially.&nbsp;&nbsp;Once&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="1665086">//&nbsp;inputs&nbsp;have&nbsp;returned&nbsp;EOF,&nbsp;Read&nbsp;will&nbsp;return&nbsp;EOF.&nbsp;&nbsp;If&nbsp;any&nbsp;of&nbsp;the&nbsp;readers</span><br>
<span class="lineno">30</span><span class="comment" id="1665160">//&nbsp;return&nbsp;a&nbsp;non-nil,&nbsp;non-EOF&nbsp;error,&nbsp;Read&nbsp;will&nbsp;return&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="1665225">func</span>&nbsp;<span class="ident" id="1665230">MultiReader</span><span class="op" id="1665241">(</span><span class="ident" id="1665242">readers</span>&nbsp;<span class="op" id="1665250">...</span><span class="ident" id="1665253"><a href="/io/io.go.html#1651790">Reader</a></span><span class="op" id="1665259">)</span>&nbsp;<span class="ident" id="1665261"><a href="/io/io.go.html#1651790">Reader</a></span>&nbsp;<span class="op" id="1665268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1665271">r</span>&nbsp;<span class="op" id="1665273">:=</span>&nbsp;<span class="builtinfunc" id="1665276">make</span><span class="op" id="1665280">(</span><span class="op" id="1665281">[</span><span class="op" id="1665282">]</span><span class="ident" id="1665283"><a href="/io/io.go.html#1651790">Reader</a></span><span class="op" id="1665289">,</span>&nbsp;<span class="builtinfunc" id="1665291">len</span><span class="op" id="1665294">(</span><span class="ident" id="1665295"><a href="/io/multi.go.html#1665242">readers</a></span><span class="op" id="1665302">)</span><span class="op" id="1665303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1665306">copy</span><span class="op" id="1665310">(</span><span class="ident" id="1665311"><a href="/io/multi.go.html#1665271">r</a></span><span class="op" id="1665312">,</span>&nbsp;<span class="ident" id="1665314"><a href="/io/multi.go.html#1665242">readers</a></span><span class="op" id="1665321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665324">return</span>&nbsp;<span class="op" id="1665331">&amp;</span><span class="ident" id="1665332"><a href="/io/multi.go.html#1664572">multiReader</a></span><span class="op" id="1665343">{</span><span class="ident" id="1665344"><a href="/io/multi.go.html#1665271">r</a></span><span class="op" id="1665345">}</span><br>
<span class="lineno">35</span><span class="op" id="1665347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1665350">type</span>&nbsp;<span class="ident" id="1665355">multiWriter</span>&nbsp;<span class="keyword" id="1665367">struct</span>&nbsp;<span class="op" id="1665374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1665377">writers</span>&nbsp;<span class="op" id="1665385">[</span><span class="op" id="1665386">]</span><span class="ident" id="1665387"><a href="/io/io.go.html#1652281">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="1665394">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1665397">func</span>&nbsp;<span class="op" id="1665402">(</span><span class="ident" id="1665403">t</span>&nbsp;<span class="op" id="1665405">*</span><span class="ident" id="1665406"><a href="/io/multi.go.html#1665355">multiWriter</a></span><span class="op" id="1665417">)</span>&nbsp;<span class="ident" id="1665419">Write</span><span class="op" id="1665424">(</span><span class="ident" id="1665425">p</span>&nbsp;<span class="op" id="1665427">[</span><span class="op" id="1665428">]</span><span class="builtintype" id="1665429">byte</span><span class="op" id="1665433">)</span>&nbsp;<span class="op" id="1665435">(</span><span class="ident" id="1665436">n</span>&nbsp;<span class="builtintype" id="1665438">int</span><span class="op" id="1665441">,</span>&nbsp;<span class="ident" id="1665443">err</span>&nbsp;<span class="builtintype" id="1665447">error</span><span class="op" id="1665452">)</span>&nbsp;<span class="op" id="1665454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665457">for</span>&nbsp;<span class="ident" id="1665461">_</span><span class="op" id="1665462">,</span>&nbsp;<span class="ident" id="1665464">w</span>&nbsp;<span class="op" id="1665466">:=</span>&nbsp;<span class="keyword" id="1665469">range</span>&nbsp;<span class="ident" id="1665475"><a href="/io/multi.go.html#1665403">t</a></span><span class="op" id="1665476">.</span><span class="ident" id="1665477">writers</span>&nbsp;<span class="op" id="1665485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1665489"><a href="/io/multi.go.html#1665436">n</a></span><span class="op" id="1665490">,</span>&nbsp;<span class="ident" id="1665492"><a href="/io/multi.go.html#1665443">err</a></span>&nbsp;<span class="op" id="1665496">=</span>&nbsp;<span class="ident" id="1665498"><a href="/io/multi.go.html#1665464">w</a></span><span class="op" id="1665499">.</span><span class="ident" id="1665500">Write</span><span class="op" id="1665505">(</span><span class="ident" id="1665506"><a href="/io/multi.go.html#1665425">p</a></span><span class="op" id="1665507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665511">if</span>&nbsp;<span class="ident" id="1665514"><a href="/io/multi.go.html#1665443">err</a></span>&nbsp;<span class="op" id="1665518">!=</span>&nbsp;<span class="ident" id="1665521">nil</span>&nbsp;<span class="op" id="1665525">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665530">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1665539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665543">if</span>&nbsp;<span class="ident" id="1665546"><a href="/io/multi.go.html#1665436">n</a></span>&nbsp;<span class="op" id="1665548">!=</span>&nbsp;<span class="builtinfunc" id="1665551">len</span><span class="op" id="1665554">(</span><span class="ident" id="1665555"><a href="/io/multi.go.html#1665425">p</a></span><span class="op" id="1665556">)</span>&nbsp;<span class="op" id="1665558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1665563"><a href="/io/multi.go.html#1665443">err</a></span>&nbsp;<span class="op" id="1665567">=</span>&nbsp;<span class="ident" id="1665569"><a href="/io/io.go.html#1649442">ErrShortWrite</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665586">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1665595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1665598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665601">return</span>&nbsp;<span class="builtinfunc" id="1665608">len</span><span class="op" id="1665611">(</span><span class="ident" id="1665612"><a href="/io/multi.go.html#1665425">p</a></span><span class="op" id="1665613">)</span><span class="op" id="1665614">,</span>&nbsp;<span class="ident" id="1665616">nil</span><br>
<span class="lineno"></span><span class="op" id="1665620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="1665623">//&nbsp;MultiWriter&nbsp;creates&nbsp;a&nbsp;writer&nbsp;that&nbsp;duplicates&nbsp;its&nbsp;writes&nbsp;to&nbsp;all&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1665693">//&nbsp;provided&nbsp;writers,&nbsp;similar&nbsp;to&nbsp;the&nbsp;Unix&nbsp;tee(1)&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="1665750">func</span>&nbsp;<span class="ident" id="1665755">MultiWriter</span><span class="op" id="1665766">(</span><span class="ident" id="1665767">writers</span>&nbsp;<span class="op" id="1665775">...</span><span class="ident" id="1665778"><a href="/io/io.go.html#1652281">Writer</a></span><span class="op" id="1665784">)</span>&nbsp;<span class="ident" id="1665786"><a href="/io/io.go.html#1652281">Writer</a></span>&nbsp;<span class="op" id="1665793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1665796">w</span>&nbsp;<span class="op" id="1665798">:=</span>&nbsp;<span class="builtinfunc" id="1665801">make</span><span class="op" id="1665805">(</span><span class="op" id="1665806">[</span><span class="op" id="1665807">]</span><span class="ident" id="1665808"><a href="/io/io.go.html#1652281">Writer</a></span><span class="op" id="1665814">,</span>&nbsp;<span class="builtinfunc" id="1665816">len</span><span class="op" id="1665819">(</span><span class="ident" id="1665820"><a href="/io/multi.go.html#1665767">writers</a></span><span class="op" id="1665827">)</span><span class="op" id="1665828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1665831">copy</span><span class="op" id="1665835">(</span><span class="ident" id="1665836"><a href="/io/multi.go.html#1665796">w</a></span><span class="op" id="1665837">,</span>&nbsp;<span class="ident" id="1665839"><a href="/io/multi.go.html#1665767">writers</a></span><span class="op" id="1665846">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1665849">return</span>&nbsp;<span class="op" id="1665856">&amp;</span><span class="ident" id="1665857"><a href="/io/multi.go.html#1665355">multiWriter</a></span><span class="op" id="1665868">{</span><span class="ident" id="1665869"><a href="/io/multi.go.html#1665796">w</a></span><span class="op" id="1665870">}</span><br>
<span class="lineno"></span><span class="op" id="1665872">}</span>
</div>
</body>
</html>
