<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html" class="current">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7506003">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7506058">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7506112">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7506163">package</span>&nbsp;<span class="ident" id="7506171">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506177">import</span>&nbsp;<span class="op" id="7506184">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506187">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506200">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506206">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506223">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7506233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506236">func</span>&nbsp;<span class="ident" id="7506241">checker</span><span class="op" id="7506248">(</span><span class="ident" id="7506249">t</span>&nbsp;<span class="op" id="7506251">*</span><span class="ident" id="7506252"><a href="/gostd/net/http/filetransport_test.go.html#7506223">testing</a></span><span class="op" id="7506259">.</span><span class="ident" id="7506260"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7506261">)</span>&nbsp;<span class="keyword" id="7506263">func</span><span class="op" id="7506267">(</span><span class="builtintype" id="7506268">string</span><span class="op" id="7506274">,</span>&nbsp;<span class="builtintype" id="7506276">error</span><span class="op" id="7506281">)</span>&nbsp;<span class="op" id="7506283">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506286">return</span>&nbsp;<span class="keyword" id="7506293">func</span><span class="op" id="7506297">(</span><span class="ident" id="7506298">call</span>&nbsp;<span class="builtintype" id="7506303">string</span><span class="op" id="7506309">,</span>&nbsp;<span class="ident" id="7506311">err</span>&nbsp;<span class="builtintype" id="7506315">error</span><span class="op" id="7506320">)</span>&nbsp;<span class="op" id="7506322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506326">if</span>&nbsp;<span class="ident" id="7506329"><a href="/gostd/net/http/filetransport_test.go.html#7506311">err</a></span>&nbsp;<span class="op" id="7506333">==</span>&nbsp;<span class="builtintype" id="7506336">nil</span>&nbsp;<span class="op" id="7506340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506345">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7506354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506358"><a href="/gostd/net/http/filetransport_test.go.html#7506249">t</a></span><span class="op" id="7506359">.</span><span class="ident" id="7506360"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7506366">(</span><span class="string" id="7506367">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7506375">,</span>&nbsp;<span class="ident" id="7506377"><a href="/gostd/net/http/filetransport_test.go.html#7506298">call</a></span><span class="op" id="7506381">,</span>&nbsp;<span class="ident" id="7506383"><a href="/gostd/net/http/filetransport_test.go.html#7506311">err</a></span><span class="op" id="7506386">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7506389">}</span><br>
<span class="lineno"></span><span class="op" id="7506391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506394">func</span>&nbsp;<span class="ident" id="7506399">TestFileTransport</span><span class="op" id="7506416">(</span><span class="ident" id="7506417">t</span>&nbsp;<span class="op" id="7506419">*</span><span class="ident" id="7506420"><a href="/gostd/net/http/filetransport_test.go.html#7506223">testing</a></span><span class="op" id="7506427">.</span><span class="ident" id="7506428"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7506429">)</span>&nbsp;<span class="op" id="7506431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506434">check</span>&nbsp;<span class="op" id="7506440">:=</span>&nbsp;<span class="ident" id="7506443"><a href="/gostd/net/http/filetransport_test.go.html#7506241">checker</a></span><span class="op" id="7506450">(</span><span class="ident" id="7506451"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7506452">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506456">dname</span><span class="op" id="7506461">,</span>&nbsp;<span class="ident" id="7506463">err</span>&nbsp;<span class="op" id="7506467">:=</span>&nbsp;<span class="ident" id="7506470"><a href="/gostd/net/http/filetransport_test.go.html#7506187">ioutil</a></span><span class="op" id="7506476">.</span><span class="ident" id="7506477"><a href="/gostd/io/ioutil/tempfile.go.html#3770600">TempDir</a></span><span class="op" id="7506484">(</span><span class="string" id="7506485">&#34;&#34;</span><span class="op" id="7506487">,</span>&nbsp;<span class="string" id="7506489">&#34;&#34;</span><span class="op" id="7506491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506494"><a href="/gostd/net/http/filetransport_test.go.html#7506434">check</a></span><span class="op" id="7506499">(</span><span class="string" id="7506500">&#34;TempDir&#34;</span><span class="op" id="7506509">,</span>&nbsp;<span class="ident" id="7506511"><a href="/gostd/net/http/filetransport_test.go.html#7506463">err</a></span><span class="op" id="7506514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506517">fname</span>&nbsp;<span class="op" id="7506523">:=</span>&nbsp;<span class="ident" id="7506526"><a href="/gostd/net/http/filetransport_test.go.html#7506206">filepath</a></span><span class="op" id="7506534">.</span><span class="ident" id="7506535"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="7506539">(</span><span class="ident" id="7506540"><a href="/gostd/net/http/filetransport_test.go.html#7506456">dname</a></span><span class="op" id="7506545">,</span>&nbsp;<span class="string" id="7506547">&#34;foo.txt&#34;</span><span class="op" id="7506556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506559"><a href="/gostd/net/http/filetransport_test.go.html#7506463">err</a></span>&nbsp;<span class="op" id="7506563">=</span>&nbsp;<span class="ident" id="7506565"><a href="/gostd/net/http/filetransport_test.go.html#7506187">ioutil</a></span><span class="op" id="7506571">.</span><span class="ident" id="7506572"><a href="/gostd/io/ioutil/ioutil.go.html#3766490">WriteFile</a></span><span class="op" id="7506581">(</span><span class="ident" id="7506582"><a href="/gostd/net/http/filetransport_test.go.html#7506517">fname</a></span><span class="op" id="7506587">,</span>&nbsp;<span class="op" id="7506589">[</span><span class="op" id="7506590">]</span><span class="builtintype" id="7506591">byte</span><span class="op" id="7506595">(</span><span class="string" id="7506596">&#34;Bar&#34;</span><span class="op" id="7506601">)</span><span class="op" id="7506602">,</span>&nbsp;<span class="num" id="7506604">0644</span><span class="op" id="7506608">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506611"><a href="/gostd/net/http/filetransport_test.go.html#7506434">check</a></span><span class="op" id="7506616">(</span><span class="string" id="7506617">&#34;WriteFile&#34;</span><span class="op" id="7506628">,</span>&nbsp;<span class="ident" id="7506630"><a href="/gostd/net/http/filetransport_test.go.html#7506463">err</a></span><span class="op" id="7506633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506636">defer</span>&nbsp;<span class="ident" id="7506642"><a href="/gostd/net/http/filetransport_test.go.html#7506200">os</a></span><span class="op" id="7506644">.</span><span class="ident" id="7506645"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7506651">(</span><span class="ident" id="7506652"><a href="/gostd/net/http/filetransport_test.go.html#7506456">dname</a></span><span class="op" id="7506657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506660">defer</span>&nbsp;<span class="ident" id="7506666"><a href="/gostd/net/http/filetransport_test.go.html#7506200">os</a></span><span class="op" id="7506668">.</span><span class="ident" id="7506669"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7506675">(</span><span class="ident" id="7506676"><a href="/gostd/net/http/filetransport_test.go.html#7506517">fname</a></span><span class="op" id="7506681">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506685">tr</span>&nbsp;<span class="op" id="7506688">:=</span>&nbsp;<span class="op" id="7506691">&amp;</span><span class="ident" id="7506692"><a href="/gostd/net/http/transport.go.html#4260801">Transport</a></span><span class="op" id="7506701">{</span><span class="op" id="7506702">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506705"><a href="/gostd/net/http/filetransport_test.go.html#7506685">tr</a></span><span class="op" id="7506707">.</span><span class="ident" id="7506708"><a href="/gostd/net/http/transport.go.html#4267358">RegisterProtocol</a></span><span class="op" id="7506724">(</span><span class="string" id="7506725">&#34;file&#34;</span><span class="op" id="7506731">,</span>&nbsp;<span class="ident" id="7506733"><a href="/gostd/net/http/filetransport.go.html#4107474">NewFileTransport</a></span><span class="op" id="7506749">(</span><span class="ident" id="7506750"><a href="/gostd/net/http/fs.go.html#4110341">Dir</a></span><span class="op" id="7506753">(</span><span class="ident" id="7506754"><a href="/gostd/net/http/filetransport_test.go.html#7506456">dname</a></span><span class="op" id="7506759">)</span><span class="op" id="7506760">)</span><span class="op" id="7506761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506764">c</span>&nbsp;<span class="op" id="7506766">:=</span>&nbsp;<span class="op" id="7506769">&amp;</span><span class="ident" id="7506770"><a href="/gostd/net/http/client.go.html#4080782">Client</a></span><span class="op" id="7506776">{</span><span class="ident" id="7506777"><a href="/gostd/net/http/client.go.html#4080923">Transport</a></span><span class="op" id="7506786">:</span>&nbsp;<span class="ident" id="7506788"><a href="/gostd/net/http/filetransport_test.go.html#7506685">tr</a></span><span class="op" id="7506790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506794">fooURLs</span>&nbsp;<span class="op" id="7506802">:=</span>&nbsp;<span class="op" id="7506805">[</span><span class="op" id="7506806">]</span><span class="builtintype" id="7506807">string</span><span class="op" id="7506813">{</span><span class="string" id="7506814">&#34;file:///foo.txt&#34;</span><span class="op" id="7506831">,</span>&nbsp;<span class="string" id="7506833">&#34;file://../foo.txt&#34;</span><span class="op" id="7506852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506855">for</span>&nbsp;<span class="ident" id="7506859">_</span><span class="op" id="7506860">,</span>&nbsp;<span class="ident" id="7506862">urlstr</span>&nbsp;<span class="op" id="7506869">:=</span>&nbsp;<span class="keyword" id="7506872">range</span>&nbsp;<span class="ident" id="7506878"><a href="/gostd/net/http/filetransport_test.go.html#7506794">fooURLs</a></span>&nbsp;<span class="op" id="7506886">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506890">res</span><span class="op" id="7506893">,</span>&nbsp;<span class="ident" id="7506895">err</span>&nbsp;<span class="op" id="7506899">:=</span>&nbsp;<span class="ident" id="7506902"><a href="/gostd/net/http/filetransport_test.go.html#7506764">c</a></span><span class="op" id="7506903">.</span><span class="ident" id="7506904"><a href="/gostd/net/http/client.go.html#4089623">Get</a></span><span class="op" id="7506907">(</span><span class="ident" id="7506908"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7506914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506918"><a href="/gostd/net/http/filetransport_test.go.html#7506434">check</a></span><span class="op" id="7506923">(</span><span class="string" id="7506924">&#34;Get&nbsp;&#34;</span><span class="op" id="7506930">+</span><span class="ident" id="7506931"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7506937">,</span>&nbsp;<span class="ident" id="7506939"><a href="/gostd/net/http/filetransport_test.go.html#7506895">err</a></span><span class="op" id="7506942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7506946">if</span>&nbsp;<span class="ident" id="7506949"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7506952">.</span><span class="ident" id="7506953"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span>&nbsp;<span class="op" id="7506964">!=</span>&nbsp;<span class="num" id="7506967">200</span>&nbsp;<span class="op" id="7506971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7506976"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7506977">.</span><span class="ident" id="7506978"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7506984">(</span><span class="string" id="7506985">&#34;for&nbsp;%s,&nbsp;StatusCode&nbsp;=&nbsp;%d,&nbsp;want&nbsp;200&#34;</span><span class="op" id="7507020">,</span>&nbsp;<span class="ident" id="7507022"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7507028">,</span>&nbsp;<span class="ident" id="7507030"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7507033">.</span><span class="ident" id="7507034"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="7507044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507048">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7507052">if</span>&nbsp;<span class="ident" id="7507055"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7507058">.</span><span class="ident" id="7507059"><a href="/gostd/net/http/response.go.html#4162765">ContentLength</a></span>&nbsp;<span class="op" id="7507073">!=</span>&nbsp;<span class="op" id="7507076">-</span><span class="num" id="7507077">1</span>&nbsp;<span class="op" id="7507079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507084"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7507085">.</span><span class="ident" id="7507086"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7507092">(</span><span class="string" id="7507093">&#34;for&nbsp;%s,&nbsp;ContentLength&nbsp;=&nbsp;%d,&nbsp;want&nbsp;-1&#34;</span><span class="op" id="7507130">,</span>&nbsp;<span class="ident" id="7507132"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7507138">,</span>&nbsp;<span class="ident" id="7507140"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7507143">.</span><span class="ident" id="7507144"><a href="/gostd/net/http/response.go.html#4162765">ContentLength</a></span><span class="op" id="7507157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7507165">if</span>&nbsp;<span class="ident" id="7507168"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7507171">.</span><span class="ident" id="7507172"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span>&nbsp;<span class="op" id="7507177">==</span>&nbsp;<span class="builtintype" id="7507180">nil</span>&nbsp;<span class="op" id="7507184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507189"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7507190">.</span><span class="ident" id="7507191"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7507197">(</span><span class="string" id="7507198">&#34;for&nbsp;%s,&nbsp;nil&nbsp;Body&#34;</span><span class="op" id="7507216">,</span>&nbsp;<span class="ident" id="7507218"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7507224">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507232">slurp</span><span class="op" id="7507237">,</span>&nbsp;<span class="ident" id="7507239"><a href="/gostd/net/http/filetransport_test.go.html#7506895">err</a></span>&nbsp;<span class="op" id="7507243">:=</span>&nbsp;<span class="ident" id="7507246"><a href="/gostd/net/http/filetransport_test.go.html#7506187">ioutil</a></span><span class="op" id="7507252">.</span><span class="ident" id="7507253"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7507260">(</span><span class="ident" id="7507261"><a href="/gostd/net/http/filetransport_test.go.html#7506890">res</a></span><span class="op" id="7507264">.</span><span class="ident" id="7507265"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="7507269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507273"><a href="/gostd/net/http/filetransport_test.go.html#7506434">check</a></span><span class="op" id="7507278">(</span><span class="string" id="7507279">&#34;ReadAll&nbsp;&#34;</span><span class="op" id="7507289">+</span><span class="ident" id="7507290"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7507296">,</span>&nbsp;<span class="ident" id="7507298"><a href="/gostd/net/http/filetransport_test.go.html#7506895">err</a></span><span class="op" id="7507301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7507305">if</span>&nbsp;<span class="builtintype" id="7507308">string</span><span class="op" id="7507314">(</span><span class="ident" id="7507315"><a href="/gostd/net/http/filetransport_test.go.html#7507232">slurp</a></span><span class="op" id="7507320">)</span>&nbsp;<span class="op" id="7507322">!=</span>&nbsp;<span class="string" id="7507325">&#34;Bar&#34;</span>&nbsp;<span class="op" id="7507331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507336"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7507337">.</span><span class="ident" id="7507338"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7507344">(</span><span class="string" id="7507345">&#34;for&nbsp;%s,&nbsp;got&nbsp;content&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7507378">,</span>&nbsp;<span class="ident" id="7507380"><a href="/gostd/net/http/filetransport_test.go.html#7506862">urlstr</a></span><span class="op" id="7507386">,</span>&nbsp;<span class="builtintype" id="7507388">string</span><span class="op" id="7507394">(</span><span class="ident" id="7507395"><a href="/gostd/net/http/filetransport_test.go.html#7507232">slurp</a></span><span class="op" id="7507400">)</span><span class="op" id="7507401">,</span>&nbsp;<span class="string" id="7507403">&#34;Bar&#34;</span><span class="op" id="7507408">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7507419">const</span>&nbsp;<span class="ident" id="7507425">badURL</span>&nbsp;<span class="op" id="7507432">=</span>&nbsp;<span class="string" id="7507434">&#34;file://../no-exist.txt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507460">res</span><span class="op" id="7507463">,</span>&nbsp;<span class="ident" id="7507465"><a href="/gostd/net/http/filetransport_test.go.html#7506463">err</a></span>&nbsp;<span class="op" id="7507469">:=</span>&nbsp;<span class="ident" id="7507472"><a href="/gostd/net/http/filetransport_test.go.html#7506764">c</a></span><span class="op" id="7507473">.</span><span class="ident" id="7507474"><a href="/gostd/net/http/client.go.html#4089623">Get</a></span><span class="op" id="7507477">(</span><span class="ident" id="7507478"><a href="/gostd/net/http/filetransport_test.go.html#7507425">badURL</a></span><span class="op" id="7507484">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507487"><a href="/gostd/net/http/filetransport_test.go.html#7506434">check</a></span><span class="op" id="7507492">(</span><span class="string" id="7507493">&#34;Get&nbsp;&#34;</span><span class="op" id="7507499">+</span><span class="ident" id="7507500"><a href="/gostd/net/http/filetransport_test.go.html#7507425">badURL</a></span><span class="op" id="7507506">,</span>&nbsp;<span class="ident" id="7507508"><a href="/gostd/net/http/filetransport_test.go.html#7506463">err</a></span><span class="op" id="7507511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7507514">if</span>&nbsp;<span class="ident" id="7507517"><a href="/gostd/net/http/filetransport_test.go.html#7507460">res</a></span><span class="op" id="7507520">.</span><span class="ident" id="7507521"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span>&nbsp;<span class="op" id="7507532">!=</span>&nbsp;<span class="num" id="7507535">404</span>&nbsp;<span class="op" id="7507539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507543"><a href="/gostd/net/http/filetransport_test.go.html#7506417">t</a></span><span class="op" id="7507544">.</span><span class="ident" id="7507545"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7507551">(</span><span class="string" id="7507552">&#34;for&nbsp;%s,&nbsp;StatusCode&nbsp;=&nbsp;%d,&nbsp;want&nbsp;404&#34;</span><span class="op" id="7507587">,</span>&nbsp;<span class="ident" id="7507589"><a href="/gostd/net/http/filetransport_test.go.html#7507425">badURL</a></span><span class="op" id="7507595">,</span>&nbsp;<span class="ident" id="7507597"><a href="/gostd/net/http/filetransport_test.go.html#7507460">res</a></span><span class="op" id="7507600">.</span><span class="ident" id="7507601"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="7507611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7507617"><a href="/gostd/net/http/filetransport_test.go.html#7507460">res</a></span><span class="op" id="7507620">.</span><span class="ident" id="7507621"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="7507625">.</span><span class="ident" id="7507626"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7507631">(</span><span class="op" id="7507632">)</span><br>
<span class="lineno">65</span><span class="op" id="7507634">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
