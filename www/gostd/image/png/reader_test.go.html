<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8318583">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8318638">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8318692">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8318743">package</span>&nbsp;<span class="ident" id="8318751">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318756">import</span>&nbsp;<span class="op" id="8318763">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318766">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318775">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318782">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318791">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318806">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318812">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318825">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318831">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318842">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8318852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8318855">var</span>&nbsp;<span class="ident" id="8318859">filenames</span>&nbsp;<span class="op" id="8318869">=</span>&nbsp;<span class="op" id="8318871">[</span><span class="op" id="8318872">]</span><span class="builtintype" id="8318873">string</span><span class="op" id="8318879">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318882">&#34;basn0g01&#34;</span><span class="op" id="8318892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318895">&#34;basn0g01-30&#34;</span><span class="op" id="8318908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318911">&#34;basn0g02&#34;</span><span class="op" id="8318921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318924">&#34;basn0g02-29&#34;</span><span class="op" id="8318937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318940">&#34;basn0g04&#34;</span><span class="op" id="8318950">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318953">&#34;basn0g04-31&#34;</span><span class="op" id="8318966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318969">&#34;basn0g08&#34;</span><span class="op" id="8318979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318982">&#34;basn0g16&#34;</span><span class="op" id="8318992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8318995">&#34;basn2c08&#34;</span><span class="op" id="8319005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319008">&#34;basn2c16&#34;</span><span class="op" id="8319018">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319021">&#34;basn3p01&#34;</span><span class="op" id="8319031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319034">&#34;basn3p02&#34;</span><span class="op" id="8319044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319047">&#34;basn3p04&#34;</span><span class="op" id="8319057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319060">&#34;basn3p04-31i&#34;</span><span class="op" id="8319074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319077">&#34;basn3p08&#34;</span><span class="op" id="8319087">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319090">&#34;basn3p08-trns&#34;</span><span class="op" id="8319105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319108">&#34;basn4a08&#34;</span><span class="op" id="8319118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319121">&#34;basn4a16&#34;</span><span class="op" id="8319131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319134">&#34;basn6a08&#34;</span><span class="op" id="8319144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319147">&#34;basn6a16&#34;</span><span class="op" id="8319157">,</span><br>
<span class="lineno">40</span><span class="op" id="8319159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8319162">var</span>&nbsp;<span class="ident" id="8319166">filenamesPaletted</span>&nbsp;<span class="op" id="8319184">=</span>&nbsp;<span class="op" id="8319186">[</span><span class="op" id="8319187">]</span><span class="builtintype" id="8319188">string</span><span class="op" id="8319194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319197">&#34;basn3p01&#34;</span><span class="op" id="8319207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319210">&#34;basn3p02&#34;</span><span class="op" id="8319220">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319223">&#34;basn3p04&#34;</span><span class="op" id="8319233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319236">&#34;basn3p08&#34;</span><span class="op" id="8319246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319249">&#34;basn3p08-trns&#34;</span><span class="op" id="8319264">,</span><br>
<span class="lineno"></span><span class="op" id="8319266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8319269">var</span>&nbsp;<span class="ident" id="8319273">filenamesShort</span>&nbsp;<span class="op" id="8319288">=</span>&nbsp;<span class="op" id="8319290">[</span><span class="op" id="8319291">]</span><span class="builtintype" id="8319292">string</span><span class="op" id="8319298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319301">&#34;basn0g01&#34;</span><span class="op" id="8319311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319314">&#34;basn0g04-31&#34;</span><span class="op" id="8319327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8319330">&#34;basn6a16&#34;</span><span class="op" id="8319340">,</span><br>
<span class="lineno"></span><span class="op" id="8319342">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8319345">func</span>&nbsp;<span class="ident" id="8319350">readPNG</span><span class="op" id="8319357">(</span><span class="ident" id="8319358">filename</span>&nbsp;<span class="builtintype" id="8319367">string</span><span class="op" id="8319373">)</span>&nbsp;<span class="op" id="8319375">(</span><span class="ident" id="8319376"><a href="/gostd/image/png/reader_test.go.html#8318782">image</a></span><span class="op" id="8319381">.</span><span class="ident" id="8319382"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="8319387">,</span>&nbsp;<span class="builtintype" id="8319389">error</span><span class="op" id="8319394">)</span>&nbsp;<span class="op" id="8319396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319399">f</span><span class="op" id="8319400">,</span>&nbsp;<span class="ident" id="8319402">err</span>&nbsp;<span class="op" id="8319406">:=</span>&nbsp;<span class="ident" id="8319409"><a href="/gostd/image/png/reader_test.go.html#8318825">os</a></span><span class="op" id="8319411">.</span><span class="ident" id="8319412"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="8319416">(</span><span class="ident" id="8319417"><a href="/gostd/image/png/reader_test.go.html#8319358">filename</a></span><span class="op" id="8319425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319428">if</span>&nbsp;<span class="ident" id="8319431"><a href="/gostd/image/png/reader_test.go.html#8319402">err</a></span>&nbsp;<span class="op" id="8319435">!=</span>&nbsp;<span class="builtintype" id="8319438">nil</span>&nbsp;<span class="op" id="8319442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319446">return</span>&nbsp;<span class="builtintype" id="8319453">nil</span><span class="op" id="8319456">,</span>&nbsp;<span class="ident" id="8319458"><a href="/gostd/image/png/reader_test.go.html#8319402">err</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319466">defer</span>&nbsp;<span class="ident" id="8319472"><a href="/gostd/image/png/reader_test.go.html#8319399">f</a></span><span class="op" id="8319473">.</span><span class="ident" id="8319474"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="8319479">(</span><span class="op" id="8319480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319483">return</span>&nbsp;<span class="ident" id="8319490"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="8319496">(</span><span class="ident" id="8319497"><a href="/gostd/image/png/reader_test.go.html#8319399">f</a></span><span class="op" id="8319498">)</span><br>
<span class="lineno"></span><span class="op" id="8319500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="8319503">//&nbsp;An&nbsp;approximation&nbsp;of&nbsp;the&nbsp;sng&nbsp;command-line&nbsp;tool.</span><br>
<span class="lineno"></span><span class="keyword" id="8319553">func</span>&nbsp;<span class="ident" id="8319558">sng</span><span class="op" id="8319561">(</span><span class="ident" id="8319562">w</span>&nbsp;<span class="ident" id="8319564"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8319566">.</span><span class="ident" id="8319567"><a href="/gostd/io/io.go.html#1423540">WriteCloser</a></span><span class="op" id="8319578">,</span>&nbsp;<span class="ident" id="8319580">filename</span>&nbsp;<span class="builtintype" id="8319589">string</span><span class="op" id="8319595">,</span>&nbsp;<span class="ident" id="8319597">png</span>&nbsp;<span class="ident" id="8319601"><a href="/gostd/image/png/reader_test.go.html#8318782">image</a></span><span class="op" id="8319606">.</span><span class="ident" id="8319607"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="8319612">)</span>&nbsp;<span class="op" id="8319614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319617">defer</span>&nbsp;<span class="ident" id="8319623"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8319624">.</span><span class="ident" id="8319625"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="8319630">(</span><span class="op" id="8319631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319634">bounds</span>&nbsp;<span class="op" id="8319641">:=</span>&nbsp;<span class="ident" id="8319644"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8319647">.</span><span class="ident" id="8319648"><a href="/gostd/image/image.go.html#5155130">Bounds</a></span><span class="op" id="8319654">(</span><span class="op" id="8319655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319658">cm</span>&nbsp;<span class="op" id="8319661">:=</span>&nbsp;<span class="ident" id="8319664"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8319667">.</span><span class="ident" id="8319668"><a href="/gostd/image/image.go.html#5154974">ColorModel</a></span><span class="op" id="8319678">(</span><span class="op" id="8319679">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319682">var</span>&nbsp;<span class="ident" id="8319686">bitdepth</span>&nbsp;<span class="builtintype" id="8319695">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319700">switch</span>&nbsp;<span class="ident" id="8319707"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8319710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319713">case</span>&nbsp;<span class="ident" id="8319718"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8319723">.</span><span class="ident" id="8319724"><a href="/gostd/image/color/color.go.html#5188187">RGBAModel</a></span><span class="op" id="8319733">,</span>&nbsp;<span class="ident" id="8319735"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8319740">.</span><span class="ident" id="8319741"><a href="/gostd/image/color/color.go.html#5188275">NRGBAModel</a></span><span class="op" id="8319751">,</span>&nbsp;<span class="ident" id="8319753"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8319758">.</span><span class="ident" id="8319759"><a href="/gostd/image/color/color.go.html#5188365">AlphaModel</a></span><span class="op" id="8319769">,</span>&nbsp;<span class="ident" id="8319771"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8319776">.</span><span class="ident" id="8319777"><a href="/gostd/image/color/color.go.html#5188455">GrayModel</a></span><span class="op" id="8319786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319790"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8319799">=</span>&nbsp;<span class="num" id="8319801">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319804">default</span><span class="op" id="8319811">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319815"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8319824">=</span>&nbsp;<span class="num" id="8319826">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8319830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319833">cpm</span><span class="op" id="8319836">,</span>&nbsp;<span class="ident" id="8319838">_</span>&nbsp;<span class="op" id="8319840">:=</span>&nbsp;<span class="ident" id="8319843"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span><span class="op" id="8319845">.</span><span class="op" id="8319846">(</span><span class="ident" id="8319847"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8319852">.</span><span class="ident" id="8319853"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="8319860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319863">var</span>&nbsp;<span class="ident" id="8319867">paletted</span>&nbsp;<span class="op" id="8319876">*</span><span class="ident" id="8319877"><a href="/gostd/image/png/reader_test.go.html#8318782">image</a></span><span class="op" id="8319882">.</span><span class="ident" id="8319883"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319893">if</span>&nbsp;<span class="ident" id="8319896"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span>&nbsp;<span class="op" id="8319900">!=</span>&nbsp;<span class="builtintype" id="8319903">nil</span>&nbsp;<span class="op" id="8319907">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319911">switch</span>&nbsp;<span class="op" id="8319918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319922">case</span>&nbsp;<span class="builtinfunc" id="8319927">len</span><span class="op" id="8319930">(</span><span class="ident" id="8319931"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span><span class="op" id="8319934">)</span>&nbsp;<span class="op" id="8319936">&lt;=</span>&nbsp;<span class="num" id="8319939">2</span><span class="op" id="8319940">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319945"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8319954">=</span>&nbsp;<span class="num" id="8319956">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319960">case</span>&nbsp;<span class="builtinfunc" id="8319965">len</span><span class="op" id="8319968">(</span><span class="ident" id="8319969"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span><span class="op" id="8319972">)</span>&nbsp;<span class="op" id="8319974">&lt;=</span>&nbsp;<span class="num" id="8319977">4</span><span class="op" id="8319978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8319983"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8319992">=</span>&nbsp;<span class="num" id="8319994">2</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8319998">case</span>&nbsp;<span class="builtinfunc" id="8320003">len</span><span class="op" id="8320006">(</span><span class="ident" id="8320007"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span><span class="op" id="8320010">)</span>&nbsp;<span class="op" id="8320012">&lt;=</span>&nbsp;<span class="num" id="8320015">16</span><span class="op" id="8320017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320022"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8320031">=</span>&nbsp;<span class="num" id="8320033">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320037">default</span><span class="op" id="8320044">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320049"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8320058">=</span>&nbsp;<span class="num" id="8320060">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320064">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320068"><a href="/gostd/image/png/reader_test.go.html#8319867">paletted</a></span>&nbsp;<span class="op" id="8320077">=</span>&nbsp;<span class="ident" id="8320079"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8320082">.</span><span class="op" id="8320083">(</span><span class="op" id="8320084">*</span><span class="ident" id="8320085"><a href="/gostd/image/png/reader_test.go.html#8318782">image</a></span><span class="op" id="8320090">.</span><span class="ident" id="8320091"><a href="/gostd/image/image.go.html#5176435">Paletted</a></span><span class="op" id="8320099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8320106">//&nbsp;Write&nbsp;the&nbsp;filename&nbsp;and&nbsp;IHDR.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320139"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320141">.</span><span class="ident" id="8320142"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320153">(</span><span class="ident" id="8320154"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320155">,</span>&nbsp;<span class="string" id="8320157">&#34;#SNG:&nbsp;from&nbsp;&#34;</span><span class="op" id="8320170">+</span><span class="ident" id="8320171"><a href="/gostd/image/png/reader_test.go.html#8319580">filename</a></span><span class="op" id="8320179">+</span><span class="string" id="8320180">&#34;.png\nIHDR&nbsp;{\n&#34;</span><span class="op" id="8320196">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320199"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8320202">.</span><span class="ident" id="8320203"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8320210">(</span><span class="ident" id="8320211"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320212">,</span>&nbsp;<span class="string" id="8320214">&#34;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;%d;&nbsp;height:&nbsp;%d;&nbsp;bitdepth:&nbsp;%d;\n&#34;</span><span class="op" id="8320258">,</span>&nbsp;<span class="ident" id="8320260"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8320266">.</span><span class="ident" id="8320267"><a href="/gostd/image/geom.go.html#5150231">Dx</a></span><span class="op" id="8320269">(</span><span class="op" id="8320270">)</span><span class="op" id="8320271">,</span>&nbsp;<span class="ident" id="8320273"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8320279">.</span><span class="ident" id="8320280"><a href="/gostd/image/geom.go.html#5150316">Dy</a></span><span class="op" id="8320282">(</span><span class="op" id="8320283">)</span><span class="op" id="8320284">,</span>&nbsp;<span class="ident" id="8320286"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span><span class="op" id="8320294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320297">switch</span>&nbsp;<span class="op" id="8320304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320307">case</span>&nbsp;<span class="ident" id="8320312"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320315">==</span>&nbsp;<span class="ident" id="8320318"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320323">.</span><span class="ident" id="8320324"><a href="/gostd/image/color/color.go.html#5188187">RGBAModel</a></span><span class="op" id="8320333">,</span>&nbsp;<span class="ident" id="8320335"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320338">==</span>&nbsp;<span class="ident" id="8320341"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320346">.</span><span class="ident" id="8320347"><a href="/gostd/image/color/color.go.html#5188230">RGBA64Model</a></span><span class="op" id="8320358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320362"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320364">.</span><span class="ident" id="8320365"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320376">(</span><span class="ident" id="8320377"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320378">,</span>&nbsp;<span class="string" id="8320380">&#34;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;color;\n&#34;</span><span class="op" id="8320400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320403">case</span>&nbsp;<span class="ident" id="8320408"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320411">==</span>&nbsp;<span class="ident" id="8320414"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320419">.</span><span class="ident" id="8320420"><a href="/gostd/image/color/color.go.html#5188275">NRGBAModel</a></span><span class="op" id="8320430">,</span>&nbsp;<span class="ident" id="8320432"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320435">==</span>&nbsp;<span class="ident" id="8320438"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320443">.</span><span class="ident" id="8320444"><a href="/gostd/image/color/color.go.html#5188319">NRGBA64Model</a></span><span class="op" id="8320456">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320460"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320462">.</span><span class="ident" id="8320463"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320474">(</span><span class="ident" id="8320475"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320476">,</span>&nbsp;<span class="string" id="8320478">&#34;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;color&nbsp;alpha;\n&#34;</span><span class="op" id="8320504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320507">case</span>&nbsp;<span class="ident" id="8320512"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320515">==</span>&nbsp;<span class="ident" id="8320518"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320523">.</span><span class="ident" id="8320524"><a href="/gostd/image/color/color.go.html#5188455">GrayModel</a></span><span class="op" id="8320533">,</span>&nbsp;<span class="ident" id="8320535"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8320538">==</span>&nbsp;<span class="ident" id="8320541"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8320546">.</span><span class="ident" id="8320547"><a href="/gostd/image/color/color.go.html#5188498">Gray16Model</a></span><span class="op" id="8320558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320562"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320564">.</span><span class="ident" id="8320565"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320576">(</span><span class="ident" id="8320577"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320578">,</span>&nbsp;<span class="string" id="8320580">&#34;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;grayscale;\n&#34;</span><span class="op" id="8320604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320607">case</span>&nbsp;<span class="ident" id="8320612"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span>&nbsp;<span class="op" id="8320616">!=</span>&nbsp;<span class="builtintype" id="8320619">nil</span><span class="op" id="8320622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320626"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320628">.</span><span class="ident" id="8320629"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320640">(</span><span class="ident" id="8320641"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320642">,</span>&nbsp;<span class="string" id="8320644">&#34;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;color&nbsp;palette;\n&#34;</span><span class="op" id="8320672">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8320675">default</span><span class="op" id="8320682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320686"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320688">.</span><span class="ident" id="8320689"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320700">(</span><span class="ident" id="8320701"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320702">,</span>&nbsp;<span class="string" id="8320704">&#34;unknown&nbsp;PNG&nbsp;decoder&nbsp;color&nbsp;model\n&#34;</span><span class="op" id="8320739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8320742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320745"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320747">.</span><span class="ident" id="8320748"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320759">(</span><span class="ident" id="8320760"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320761">,</span>&nbsp;<span class="string" id="8320763">&#34;}\n&#34;</span><span class="op" id="8320768">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8320772">//&nbsp;We&nbsp;fake&nbsp;a&nbsp;gAMA&nbsp;output.&nbsp;The&nbsp;test&nbsp;files&nbsp;have&nbsp;a&nbsp;gAMA&nbsp;chunk&nbsp;but&nbsp;the&nbsp;go&nbsp;PNG&nbsp;parser&nbsp;ignores&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8320865">//&nbsp;(the&nbsp;PNG&nbsp;spec&nbsp;section&nbsp;11.3&nbsp;says&nbsp;&#34;Ancillary&nbsp;chunks&nbsp;may&nbsp;be&nbsp;ignored&nbsp;by&nbsp;a&nbsp;decoder&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8320950"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8320952">.</span><span class="ident" id="8320953"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8320964">(</span><span class="ident" id="8320965"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8320966">,</span>&nbsp;<span class="string" id="8320968">&#34;gAMA&nbsp;{1.0000}\n&#34;</span><span class="op" id="8320985">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8320989">//&nbsp;Write&nbsp;the&nbsp;PLTE&nbsp;and&nbsp;tRNS&nbsp;(if&nbsp;applicable).</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321034">if</span>&nbsp;<span class="ident" id="8321037"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span>&nbsp;<span class="op" id="8321041">!=</span>&nbsp;<span class="builtintype" id="8321044">nil</span>&nbsp;<span class="op" id="8321048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321052">lastAlpha</span>&nbsp;<span class="op" id="8321062">:=</span>&nbsp;<span class="op" id="8321065">-</span><span class="num" id="8321066">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321070"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8321072">.</span><span class="ident" id="8321073"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8321084">(</span><span class="ident" id="8321085"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321086">,</span>&nbsp;<span class="string" id="8321088">&#34;PLTE&nbsp;{\n&#34;</span><span class="op" id="8321098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321102">for</span>&nbsp;<span class="ident" id="8321106">i</span><span class="op" id="8321107">,</span>&nbsp;<span class="ident" id="8321109">c</span>&nbsp;<span class="op" id="8321111">:=</span>&nbsp;<span class="keyword" id="8321114">range</span>&nbsp;<span class="ident" id="8321120"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span>&nbsp;<span class="op" id="8321124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321129">var</span>&nbsp;<span class="ident" id="8321133">r</span><span class="op" id="8321134">,</span>&nbsp;<span class="ident" id="8321136">g</span><span class="op" id="8321137">,</span>&nbsp;<span class="ident" id="8321139">b</span><span class="op" id="8321140">,</span>&nbsp;<span class="ident" id="8321142">a</span>&nbsp;<span class="builtintype" id="8321144">uint8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321153">switch</span>&nbsp;<span class="ident" id="8321160">c</span>&nbsp;<span class="op" id="8321162">:=</span>&nbsp;<span class="ident" id="8321165"><a href="/gostd/image/png/reader_test.go.html#8321109">c</a></span><span class="op" id="8321166">.</span><span class="op" id="8321167">(</span><span class="keyword" id="8321168">type</span><span class="op" id="8321172">)</span>&nbsp;<span class="op" id="8321174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321179">case</span>&nbsp;<span class="ident" id="8321184"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8321189">.</span><span class="ident" id="8321190"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8321194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321200"><a href="/gostd/image/png/reader_test.go.html#8321133">r</a></span><span class="op" id="8321201">,</span>&nbsp;<span class="ident" id="8321203"><a href="/gostd/image/png/reader_test.go.html#8321136">g</a></span><span class="op" id="8321204">,</span>&nbsp;<span class="ident" id="8321206"><a href="/gostd/image/png/reader_test.go.html#8321139">b</a></span><span class="op" id="8321207">,</span>&nbsp;<span class="ident" id="8321209"><a href="/gostd/image/png/reader_test.go.html#8321142">a</a></span>&nbsp;<span class="op" id="8321211">=</span>&nbsp;<span class="ident" id="8321213"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321214">.</span><span class="ident" id="8321215"><a href="/gostd/image/color/color.go.html#5185627">R</a></span><span class="op" id="8321216">,</span>&nbsp;<span class="ident" id="8321218"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321219">.</span><span class="ident" id="8321220"><a href="/gostd/image/color/color.go.html#5185630">G</a></span><span class="op" id="8321221">,</span>&nbsp;<span class="ident" id="8321223"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321224">.</span><span class="ident" id="8321225"><a href="/gostd/image/color/color.go.html#5185633">B</a></span><span class="op" id="8321226">,</span>&nbsp;<span class="num" id="8321228">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321236">case</span>&nbsp;<span class="ident" id="8321241"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8321246">.</span><span class="ident" id="8321247"><a href="/gostd/image/color/color.go.html#5186151">NRGBA</a></span><span class="op" id="8321252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321258"><a href="/gostd/image/png/reader_test.go.html#8321133">r</a></span><span class="op" id="8321259">,</span>&nbsp;<span class="ident" id="8321261"><a href="/gostd/image/png/reader_test.go.html#8321136">g</a></span><span class="op" id="8321262">,</span>&nbsp;<span class="ident" id="8321264"><a href="/gostd/image/png/reader_test.go.html#8321139">b</a></span><span class="op" id="8321265">,</span>&nbsp;<span class="ident" id="8321267"><a href="/gostd/image/png/reader_test.go.html#8321142">a</a></span>&nbsp;<span class="op" id="8321269">=</span>&nbsp;<span class="ident" id="8321271"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321272">.</span><span class="ident" id="8321273"><a href="/gostd/image/color/color.go.html#5186167">R</a></span><span class="op" id="8321274">,</span>&nbsp;<span class="ident" id="8321276"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321277">.</span><span class="ident" id="8321278"><a href="/gostd/image/color/color.go.html#5186170">G</a></span><span class="op" id="8321279">,</span>&nbsp;<span class="ident" id="8321281"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321282">.</span><span class="ident" id="8321283"><a href="/gostd/image/color/color.go.html#5186173">B</a></span><span class="op" id="8321284">,</span>&nbsp;<span class="ident" id="8321286"><a href="/gostd/image/png/reader_test.go.html#8321160">c</a></span><span class="op" id="8321287">.</span><span class="ident" id="8321288"><a href="/gostd/image/color/color.go.html#5186176">A</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321293">default</span><span class="op" id="8321300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8321306">panic</span><span class="op" id="8321311">(</span><span class="string" id="8321312">&#34;unknown&nbsp;palette&nbsp;color&nbsp;type&#34;</span><span class="op" id="8321340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321350">if</span>&nbsp;<span class="ident" id="8321353"><a href="/gostd/image/png/reader_test.go.html#8321142">a</a></span>&nbsp;<span class="op" id="8321355">!=</span>&nbsp;<span class="num" id="8321358">0xff</span>&nbsp;<span class="op" id="8321363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321369"><a href="/gostd/image/png/reader_test.go.html#8321052">lastAlpha</a></span>&nbsp;<span class="op" id="8321379">=</span>&nbsp;<span class="ident" id="8321381"><a href="/gostd/image/png/reader_test.go.html#8321106">i</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321391"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8321394">.</span><span class="ident" id="8321395"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8321402">(</span><span class="ident" id="8321403"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321404">,</span>&nbsp;<span class="string" id="8321406">&#34;&nbsp;&nbsp;&nbsp;&nbsp;(%3d,%3d,%3d)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;rgb&nbsp;=&nbsp;(0x%02x,0x%02x,0x%02x)\n&#34;</span><span class="op" id="8321462">,</span>&nbsp;<span class="ident" id="8321464"><a href="/gostd/image/png/reader_test.go.html#8321133">r</a></span><span class="op" id="8321465">,</span>&nbsp;<span class="ident" id="8321467"><a href="/gostd/image/png/reader_test.go.html#8321136">g</a></span><span class="op" id="8321468">,</span>&nbsp;<span class="ident" id="8321470"><a href="/gostd/image/png/reader_test.go.html#8321139">b</a></span><span class="op" id="8321471">,</span>&nbsp;<span class="ident" id="8321473"><a href="/gostd/image/png/reader_test.go.html#8321133">r</a></span><span class="op" id="8321474">,</span>&nbsp;<span class="ident" id="8321476"><a href="/gostd/image/png/reader_test.go.html#8321136">g</a></span><span class="op" id="8321477">,</span>&nbsp;<span class="ident" id="8321479"><a href="/gostd/image/png/reader_test.go.html#8321139">b</a></span><span class="op" id="8321480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321488"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8321490">.</span><span class="ident" id="8321491"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8321502">(</span><span class="ident" id="8321503"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321504">,</span>&nbsp;<span class="string" id="8321506">&#34;}\n&#34;</span><span class="op" id="8321511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321515">if</span>&nbsp;<span class="ident" id="8321518"><a href="/gostd/image/png/reader_test.go.html#8321052">lastAlpha</a></span>&nbsp;<span class="op" id="8321528">!=</span>&nbsp;<span class="op" id="8321531">-</span><span class="num" id="8321532">1</span>&nbsp;<span class="op" id="8321534">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321539"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8321541">.</span><span class="ident" id="8321542"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8321553">(</span><span class="ident" id="8321554"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321555">,</span>&nbsp;<span class="string" id="8321557">&#34;tRNS&nbsp;{\n&#34;</span><span class="op" id="8321567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321572">for</span>&nbsp;<span class="ident" id="8321576">i</span>&nbsp;<span class="op" id="8321578">:=</span>&nbsp;<span class="num" id="8321581">0</span><span class="op" id="8321582">;</span>&nbsp;<span class="ident" id="8321584"><a href="/gostd/image/png/reader_test.go.html#8321576">i</a></span>&nbsp;<span class="op" id="8321586">&lt;=</span>&nbsp;<span class="ident" id="8321589"><a href="/gostd/image/png/reader_test.go.html#8321052">lastAlpha</a></span><span class="op" id="8321598">;</span>&nbsp;<span class="ident" id="8321600"><a href="/gostd/image/png/reader_test.go.html#8321576">i</a></span><span class="op" id="8321601">++</span>&nbsp;<span class="op" id="8321604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321610">_</span><span class="op" id="8321611">,</span>&nbsp;<span class="ident" id="8321613">_</span><span class="op" id="8321614">,</span>&nbsp;<span class="ident" id="8321616">_</span><span class="op" id="8321617">,</span>&nbsp;<span class="ident" id="8321619">a</span>&nbsp;<span class="op" id="8321621">:=</span>&nbsp;<span class="ident" id="8321624"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span><span class="op" id="8321627">[</span><span class="ident" id="8321628"><a href="/gostd/image/png/reader_test.go.html#8321576">i</a></span><span class="op" id="8321629">]</span><span class="op" id="8321630">.</span><span class="ident" id="8321631"><a href="/gostd/image/color/color.go.html#5185453">RGBA</a></span><span class="op" id="8321635">(</span><span class="op" id="8321636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321642"><a href="/gostd/image/png/reader_test.go.html#8321619">a</a></span>&nbsp;<span class="op" id="8321644">&gt;&gt;=</span>&nbsp;<span class="num" id="8321648">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321654"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8321657">.</span><span class="ident" id="8321658"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8321665">(</span><span class="ident" id="8321666"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321667">,</span>&nbsp;<span class="string" id="8321669">&#34;&nbsp;%d&#34;</span><span class="op" id="8321674">,</span>&nbsp;<span class="ident" id="8321676"><a href="/gostd/image/png/reader_test.go.html#8321619">a</a></span><span class="op" id="8321677">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321687"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8321689">.</span><span class="ident" id="8321690"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8321701">(</span><span class="ident" id="8321702"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321703">,</span>&nbsp;<span class="string" id="8321705">&#34;}\n&#34;</span><span class="op" id="8321710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8321717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8321721">//&nbsp;Write&nbsp;the&nbsp;IMAGE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321742"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8321744">.</span><span class="ident" id="8321745"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8321756">(</span><span class="ident" id="8321757"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321758">,</span>&nbsp;<span class="string" id="8321760">&#34;IMAGE&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;pixels&nbsp;hex\n&#34;</span><span class="op" id="8321787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321790">for</span>&nbsp;<span class="ident" id="8321794">y</span>&nbsp;<span class="op" id="8321796">:=</span>&nbsp;<span class="ident" id="8321799"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8321805">.</span><span class="ident" id="8321806"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8321809">.</span><span class="ident" id="8321810"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8321811">;</span>&nbsp;<span class="ident" id="8321813"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span>&nbsp;<span class="op" id="8321815">&lt;</span>&nbsp;<span class="ident" id="8321817"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8321823">.</span><span class="ident" id="8321824"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8321827">.</span><span class="ident" id="8321828"><a href="/gostd/image/geom.go.html#5148454">Y</a></span><span class="op" id="8321829">;</span>&nbsp;<span class="ident" id="8321831"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8321832">++</span>&nbsp;<span class="op" id="8321835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321839">switch</span>&nbsp;<span class="op" id="8321846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321850">case</span>&nbsp;<span class="ident" id="8321855"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8321858">==</span>&nbsp;<span class="ident" id="8321861"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8321866">.</span><span class="ident" id="8321867"><a href="/gostd/image/color/color.go.html#5188455">GrayModel</a></span><span class="op" id="8321876">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8321881">for</span>&nbsp;<span class="ident" id="8321885">x</span>&nbsp;<span class="op" id="8321887">:=</span>&nbsp;<span class="ident" id="8321890"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8321896">.</span><span class="ident" id="8321897"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8321900">.</span><span class="ident" id="8321901"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8321902">;</span>&nbsp;<span class="ident" id="8321904"><a href="/gostd/image/png/reader_test.go.html#8321885">x</a></span>&nbsp;<span class="op" id="8321906">&lt;</span>&nbsp;<span class="ident" id="8321908"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8321914">.</span><span class="ident" id="8321915"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8321918">.</span><span class="ident" id="8321919"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8321920">;</span>&nbsp;<span class="ident" id="8321922"><a href="/gostd/image/png/reader_test.go.html#8321885">x</a></span><span class="op" id="8321923">++</span>&nbsp;<span class="op" id="8321926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321932">gray</span>&nbsp;<span class="op" id="8321937">:=</span>&nbsp;<span class="ident" id="8321940"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8321943">.</span><span class="ident" id="8321944"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8321946">(</span><span class="ident" id="8321947"><a href="/gostd/image/png/reader_test.go.html#8321885">x</a></span><span class="op" id="8321948">,</span>&nbsp;<span class="ident" id="8321950"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8321951">)</span><span class="op" id="8321952">.</span><span class="op" id="8321953">(</span><span class="ident" id="8321954"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8321959">.</span><span class="ident" id="8321960"><a href="/gostd/image/color/color.go.html#5187215">Gray</a></span><span class="op" id="8321964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8321970"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8321973">.</span><span class="ident" id="8321974"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8321981">(</span><span class="ident" id="8321982"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8321983">,</span>&nbsp;<span class="string" id="8321985">&#34;%02x&#34;</span><span class="op" id="8321991">,</span>&nbsp;<span class="ident" id="8321993"><a href="/gostd/image/png/reader_test.go.html#8321932">gray</a></span><span class="op" id="8321997">.</span><span class="ident" id="8321998"><a href="/gostd/image/color/color.go.html#5187230">Y</a></span><span class="op" id="8321999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322008">case</span>&nbsp;<span class="ident" id="8322013"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8322016">==</span>&nbsp;<span class="ident" id="8322019"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322024">.</span><span class="ident" id="8322025"><a href="/gostd/image/color/color.go.html#5188498">Gray16Model</a></span><span class="op" id="8322036">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322041">for</span>&nbsp;<span class="ident" id="8322045">x</span>&nbsp;<span class="op" id="8322047">:=</span>&nbsp;<span class="ident" id="8322050"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322056">.</span><span class="ident" id="8322057"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8322060">.</span><span class="ident" id="8322061"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322062">;</span>&nbsp;<span class="ident" id="8322064"><a href="/gostd/image/png/reader_test.go.html#8322045">x</a></span>&nbsp;<span class="op" id="8322066">&lt;</span>&nbsp;<span class="ident" id="8322068"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322074">.</span><span class="ident" id="8322075"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8322078">.</span><span class="ident" id="8322079"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322080">;</span>&nbsp;<span class="ident" id="8322082"><a href="/gostd/image/png/reader_test.go.html#8322045">x</a></span><span class="op" id="8322083">++</span>&nbsp;<span class="op" id="8322086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322092">gray16</span>&nbsp;<span class="op" id="8322099">:=</span>&nbsp;<span class="ident" id="8322102"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8322105">.</span><span class="ident" id="8322106"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8322108">(</span><span class="ident" id="8322109"><a href="/gostd/image/png/reader_test.go.html#8322045">x</a></span><span class="op" id="8322110">,</span>&nbsp;<span class="ident" id="8322112"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8322113">)</span><span class="op" id="8322114">.</span><span class="op" id="8322115">(</span><span class="ident" id="8322116"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322121">.</span><span class="ident" id="8322122"><a href="/gostd/image/color/color.go.html#5187394">Gray16</a></span><span class="op" id="8322128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322134"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8322137">.</span><span class="ident" id="8322138"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8322145">(</span><span class="ident" id="8322146"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8322147">,</span>&nbsp;<span class="string" id="8322149">&#34;%04x&nbsp;&#34;</span><span class="op" id="8322156">,</span>&nbsp;<span class="ident" id="8322158"><a href="/gostd/image/png/reader_test.go.html#8322092">gray16</a></span><span class="op" id="8322164">.</span><span class="ident" id="8322165"><a href="/gostd/image/color/color.go.html#5187411">Y</a></span><span class="op" id="8322166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322175">case</span>&nbsp;<span class="ident" id="8322180"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8322183">==</span>&nbsp;<span class="ident" id="8322186"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322191">.</span><span class="ident" id="8322192"><a href="/gostd/image/color/color.go.html#5188187">RGBAModel</a></span><span class="op" id="8322201">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322206">for</span>&nbsp;<span class="ident" id="8322210">x</span>&nbsp;<span class="op" id="8322212">:=</span>&nbsp;<span class="ident" id="8322215"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322221">.</span><span class="ident" id="8322222"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8322225">.</span><span class="ident" id="8322226"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322227">;</span>&nbsp;<span class="ident" id="8322229"><a href="/gostd/image/png/reader_test.go.html#8322210">x</a></span>&nbsp;<span class="op" id="8322231">&lt;</span>&nbsp;<span class="ident" id="8322233"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322239">.</span><span class="ident" id="8322240"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8322243">.</span><span class="ident" id="8322244"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322245">;</span>&nbsp;<span class="ident" id="8322247"><a href="/gostd/image/png/reader_test.go.html#8322210">x</a></span><span class="op" id="8322248">++</span>&nbsp;<span class="op" id="8322251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322257">rgba</span>&nbsp;<span class="op" id="8322262">:=</span>&nbsp;<span class="ident" id="8322265"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8322268">.</span><span class="ident" id="8322269"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8322271">(</span><span class="ident" id="8322272"><a href="/gostd/image/png/reader_test.go.html#8322210">x</a></span><span class="op" id="8322273">,</span>&nbsp;<span class="ident" id="8322275"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8322276">)</span><span class="op" id="8322277">.</span><span class="op" id="8322278">(</span><span class="ident" id="8322279"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322284">.</span><span class="ident" id="8322285"><a href="/gostd/image/color/color.go.html#5185612">RGBA</a></span><span class="op" id="8322289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322295"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8322298">.</span><span class="ident" id="8322299"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8322306">(</span><span class="ident" id="8322307"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8322308">,</span>&nbsp;<span class="string" id="8322310">&#34;%02x%02x%02x&nbsp;&#34;</span><span class="op" id="8322325">,</span>&nbsp;<span class="ident" id="8322327"><a href="/gostd/image/png/reader_test.go.html#8322257">rgba</a></span><span class="op" id="8322331">.</span><span class="ident" id="8322332"><a href="/gostd/image/color/color.go.html#5185627">R</a></span><span class="op" id="8322333">,</span>&nbsp;<span class="ident" id="8322335"><a href="/gostd/image/png/reader_test.go.html#8322257">rgba</a></span><span class="op" id="8322339">.</span><span class="ident" id="8322340"><a href="/gostd/image/color/color.go.html#5185630">G</a></span><span class="op" id="8322341">,</span>&nbsp;<span class="ident" id="8322343"><a href="/gostd/image/png/reader_test.go.html#8322257">rgba</a></span><span class="op" id="8322347">.</span><span class="ident" id="8322348"><a href="/gostd/image/color/color.go.html#5185633">B</a></span><span class="op" id="8322349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322358">case</span>&nbsp;<span class="ident" id="8322363"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8322366">==</span>&nbsp;<span class="ident" id="8322369"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322374">.</span><span class="ident" id="8322375"><a href="/gostd/image/color/color.go.html#5188230">RGBA64Model</a></span><span class="op" id="8322386">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322391">for</span>&nbsp;<span class="ident" id="8322395">x</span>&nbsp;<span class="op" id="8322397">:=</span>&nbsp;<span class="ident" id="8322400"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322406">.</span><span class="ident" id="8322407"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8322410">.</span><span class="ident" id="8322411"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322412">;</span>&nbsp;<span class="ident" id="8322414"><a href="/gostd/image/png/reader_test.go.html#8322395">x</a></span>&nbsp;<span class="op" id="8322416">&lt;</span>&nbsp;<span class="ident" id="8322418"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322424">.</span><span class="ident" id="8322425"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8322428">.</span><span class="ident" id="8322429"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322430">;</span>&nbsp;<span class="ident" id="8322432"><a href="/gostd/image/png/reader_test.go.html#8322395">x</a></span><span class="op" id="8322433">++</span>&nbsp;<span class="op" id="8322436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322442">rgba64</span>&nbsp;<span class="op" id="8322449">:=</span>&nbsp;<span class="ident" id="8322452"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8322455">.</span><span class="ident" id="8322456"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8322458">(</span><span class="ident" id="8322459"><a href="/gostd/image/png/reader_test.go.html#8322395">x</a></span><span class="op" id="8322460">,</span>&nbsp;<span class="ident" id="8322462"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8322463">)</span><span class="op" id="8322464">.</span><span class="op" id="8322465">(</span><span class="ident" id="8322466"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322471">.</span><span class="ident" id="8322472"><a href="/gostd/image/color/color.go.html#5185941">RGBA64</a></span><span class="op" id="8322478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322484"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8322487">.</span><span class="ident" id="8322488"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8322495">(</span><span class="ident" id="8322496"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8322497">,</span>&nbsp;<span class="string" id="8322499">&#34;%04x%04x%04x&nbsp;&#34;</span><span class="op" id="8322514">,</span>&nbsp;<span class="ident" id="8322516"><a href="/gostd/image/png/reader_test.go.html#8322442">rgba64</a></span><span class="op" id="8322522">.</span><span class="ident" id="8322523"><a href="/gostd/image/color/color.go.html#5185958">R</a></span><span class="op" id="8322524">,</span>&nbsp;<span class="ident" id="8322526"><a href="/gostd/image/png/reader_test.go.html#8322442">rgba64</a></span><span class="op" id="8322532">.</span><span class="ident" id="8322533"><a href="/gostd/image/color/color.go.html#5185961">G</a></span><span class="op" id="8322534">,</span>&nbsp;<span class="ident" id="8322536"><a href="/gostd/image/png/reader_test.go.html#8322442">rgba64</a></span><span class="op" id="8322542">.</span><span class="ident" id="8322543"><a href="/gostd/image/color/color.go.html#5185964">B</a></span><span class="op" id="8322544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322553">case</span>&nbsp;<span class="ident" id="8322558"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8322561">==</span>&nbsp;<span class="ident" id="8322564"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322569">.</span><span class="ident" id="8322570"><a href="/gostd/image/color/color.go.html#5188275">NRGBAModel</a></span><span class="op" id="8322580">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322585">for</span>&nbsp;<span class="ident" id="8322589">x</span>&nbsp;<span class="op" id="8322591">:=</span>&nbsp;<span class="ident" id="8322594"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322600">.</span><span class="ident" id="8322601"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8322604">.</span><span class="ident" id="8322605"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322606">;</span>&nbsp;<span class="ident" id="8322608"><a href="/gostd/image/png/reader_test.go.html#8322589">x</a></span>&nbsp;<span class="op" id="8322610">&lt;</span>&nbsp;<span class="ident" id="8322612"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322618">.</span><span class="ident" id="8322619"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8322622">.</span><span class="ident" id="8322623"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322624">;</span>&nbsp;<span class="ident" id="8322626"><a href="/gostd/image/png/reader_test.go.html#8322589">x</a></span><span class="op" id="8322627">++</span>&nbsp;<span class="op" id="8322630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322636">nrgba</span>&nbsp;<span class="op" id="8322642">:=</span>&nbsp;<span class="ident" id="8322645"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8322648">.</span><span class="ident" id="8322649"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8322651">(</span><span class="ident" id="8322652"><a href="/gostd/image/png/reader_test.go.html#8322589">x</a></span><span class="op" id="8322653">,</span>&nbsp;<span class="ident" id="8322655"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8322656">)</span><span class="op" id="8322657">.</span><span class="op" id="8322658">(</span><span class="ident" id="8322659"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322664">.</span><span class="ident" id="8322665"><a href="/gostd/image/color/color.go.html#5186151">NRGBA</a></span><span class="op" id="8322670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322676"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8322679">.</span><span class="ident" id="8322680"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8322687">(</span><span class="ident" id="8322688"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8322689">,</span>&nbsp;<span class="string" id="8322691">&#34;%02x%02x%02x%02x&nbsp;&#34;</span><span class="op" id="8322710">,</span>&nbsp;<span class="ident" id="8322712"><a href="/gostd/image/png/reader_test.go.html#8322636">nrgba</a></span><span class="op" id="8322717">.</span><span class="ident" id="8322718"><a href="/gostd/image/color/color.go.html#5186167">R</a></span><span class="op" id="8322719">,</span>&nbsp;<span class="ident" id="8322721"><a href="/gostd/image/png/reader_test.go.html#8322636">nrgba</a></span><span class="op" id="8322726">.</span><span class="ident" id="8322727"><a href="/gostd/image/color/color.go.html#5186170">G</a></span><span class="op" id="8322728">,</span>&nbsp;<span class="ident" id="8322730"><a href="/gostd/image/png/reader_test.go.html#8322636">nrgba</a></span><span class="op" id="8322735">.</span><span class="ident" id="8322736"><a href="/gostd/image/color/color.go.html#5186173">B</a></span><span class="op" id="8322737">,</span>&nbsp;<span class="ident" id="8322739"><a href="/gostd/image/png/reader_test.go.html#8322636">nrgba</a></span><span class="op" id="8322744">.</span><span class="ident" id="8322745"><a href="/gostd/image/color/color.go.html#5186176">A</a></span><span class="op" id="8322746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322755">case</span>&nbsp;<span class="ident" id="8322760"><a href="/gostd/image/png/reader_test.go.html#8319658">cm</a></span>&nbsp;<span class="op" id="8322763">==</span>&nbsp;<span class="ident" id="8322766"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322771">.</span><span class="ident" id="8322772"><a href="/gostd/image/color/color.go.html#5188319">NRGBA64Model</a></span><span class="op" id="8322784">:</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322789">for</span>&nbsp;<span class="ident" id="8322793">x</span>&nbsp;<span class="op" id="8322795">:=</span>&nbsp;<span class="ident" id="8322798"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322804">.</span><span class="ident" id="8322805"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8322808">.</span><span class="ident" id="8322809"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322810">;</span>&nbsp;<span class="ident" id="8322812"><a href="/gostd/image/png/reader_test.go.html#8322793">x</a></span>&nbsp;<span class="op" id="8322814">&lt;</span>&nbsp;<span class="ident" id="8322816"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8322822">.</span><span class="ident" id="8322823"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8322826">.</span><span class="ident" id="8322827"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8322828">;</span>&nbsp;<span class="ident" id="8322830"><a href="/gostd/image/png/reader_test.go.html#8322793">x</a></span><span class="op" id="8322831">++</span>&nbsp;<span class="op" id="8322834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322840">nrgba64</span>&nbsp;<span class="op" id="8322848">:=</span>&nbsp;<span class="ident" id="8322851"><a href="/gostd/image/png/reader_test.go.html#8319597">png</a></span><span class="op" id="8322854">.</span><span class="ident" id="8322855"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8322857">(</span><span class="ident" id="8322858"><a href="/gostd/image/png/reader_test.go.html#8322793">x</a></span><span class="op" id="8322859">,</span>&nbsp;<span class="ident" id="8322861"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8322862">)</span><span class="op" id="8322863">.</span><span class="op" id="8322864">(</span><span class="ident" id="8322865"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8322870">.</span><span class="ident" id="8322871"><a href="/gostd/image/color/color.go.html#5186574">NRGBA64</a></span><span class="op" id="8322878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8322884"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8322887">.</span><span class="ident" id="8322888"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8322895">(</span><span class="ident" id="8322896"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8322897">,</span>&nbsp;<span class="string" id="8322899">&#34;%04x%04x%04x%04x&nbsp;&#34;</span><span class="op" id="8322918">,</span>&nbsp;<span class="ident" id="8322920"><a href="/gostd/image/png/reader_test.go.html#8322840">nrgba64</a></span><span class="op" id="8322927">.</span><span class="ident" id="8322928"><a href="/gostd/image/color/color.go.html#5186592">R</a></span><span class="op" id="8322929">,</span>&nbsp;<span class="ident" id="8322931"><a href="/gostd/image/png/reader_test.go.html#8322840">nrgba64</a></span><span class="op" id="8322938">.</span><span class="ident" id="8322939"><a href="/gostd/image/color/color.go.html#5186595">G</a></span><span class="op" id="8322940">,</span>&nbsp;<span class="ident" id="8322942"><a href="/gostd/image/png/reader_test.go.html#8322840">nrgba64</a></span><span class="op" id="8322949">.</span><span class="ident" id="8322950"><a href="/gostd/image/color/color.go.html#5186598">B</a></span><span class="op" id="8322951">,</span>&nbsp;<span class="ident" id="8322953"><a href="/gostd/image/png/reader_test.go.html#8322840">nrgba64</a></span><span class="op" id="8322960">.</span><span class="ident" id="8322961"><a href="/gostd/image/color/color.go.html#5186601">A</a></span><span class="op" id="8322962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8322967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322971">case</span>&nbsp;<span class="ident" id="8322976"><a href="/gostd/image/png/reader_test.go.html#8319833">cpm</a></span>&nbsp;<span class="op" id="8322980">!=</span>&nbsp;<span class="builtintype" id="8322983">nil</span><span class="op" id="8322986">:</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8322991">var</span>&nbsp;<span class="ident" id="8322995">b</span><span class="op" id="8322996">,</span>&nbsp;<span class="ident" id="8322998">c</span>&nbsp;<span class="builtintype" id="8323000">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323007">for</span>&nbsp;<span class="ident" id="8323011">x</span>&nbsp;<span class="op" id="8323013">:=</span>&nbsp;<span class="ident" id="8323016"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8323022">.</span><span class="ident" id="8323023"><a href="/gostd/image/geom.go.html#5150016">Min</a></span><span class="op" id="8323026">.</span><span class="ident" id="8323027"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8323028">;</span>&nbsp;<span class="ident" id="8323030"><a href="/gostd/image/png/reader_test.go.html#8323011">x</a></span>&nbsp;<span class="op" id="8323032">&lt;</span>&nbsp;<span class="ident" id="8323034"><a href="/gostd/image/png/reader_test.go.html#8319634">bounds</a></span><span class="op" id="8323040">.</span><span class="ident" id="8323041"><a href="/gostd/image/geom.go.html#5150021">Max</a></span><span class="op" id="8323044">.</span><span class="ident" id="8323045"><a href="/gostd/image/geom.go.html#5148451">X</a></span><span class="op" id="8323046">;</span>&nbsp;<span class="ident" id="8323048"><a href="/gostd/image/png/reader_test.go.html#8323011">x</a></span><span class="op" id="8323049">++</span>&nbsp;<span class="op" id="8323052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323058"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span>&nbsp;<span class="op" id="8323060">=</span>&nbsp;<span class="ident" id="8323062"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span><span class="op" id="8323063">&lt;&lt;</span><span class="builtintype" id="8323065">uint</span><span class="op" id="8323069">(</span><span class="ident" id="8323070"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span><span class="op" id="8323078">)</span>&nbsp;<span class="op" id="8323080">|</span>&nbsp;<span class="builtintype" id="8323082">int</span><span class="op" id="8323085">(</span><span class="ident" id="8323086"><a href="/gostd/image/png/reader_test.go.html#8319867">paletted</a></span><span class="op" id="8323094">.</span><span class="ident" id="8323095"><a href="/gostd/image/image.go.html#5177506">ColorIndexAt</a></span><span class="op" id="8323107">(</span><span class="ident" id="8323108"><a href="/gostd/image/png/reader_test.go.html#8323011">x</a></span><span class="op" id="8323109">,</span>&nbsp;<span class="ident" id="8323111"><a href="/gostd/image/png/reader_test.go.html#8321794">y</a></span><span class="op" id="8323112">)</span><span class="op" id="8323113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323119"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span><span class="op" id="8323120">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323127">if</span>&nbsp;<span class="ident" id="8323130"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span>&nbsp;<span class="op" id="8323132">==</span>&nbsp;<span class="num" id="8323135">8</span><span class="op" id="8323136">/</span><span class="ident" id="8323137"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8323146">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323153"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8323156">.</span><span class="ident" id="8323157"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8323164">(</span><span class="ident" id="8323165"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8323166">,</span>&nbsp;<span class="string" id="8323168">&#34;%02x&#34;</span><span class="op" id="8323174">,</span>&nbsp;<span class="ident" id="8323176"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span><span class="op" id="8323177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323184"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span>&nbsp;<span class="op" id="8323186">=</span>&nbsp;<span class="num" id="8323188">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323195"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span>&nbsp;<span class="op" id="8323197">=</span>&nbsp;<span class="num" id="8323199">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323210">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323215">if</span>&nbsp;<span class="ident" id="8323218"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span>&nbsp;<span class="op" id="8323220">!=</span>&nbsp;<span class="num" id="8323223">0</span>&nbsp;<span class="op" id="8323225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323231">for</span>&nbsp;<span class="ident" id="8323235"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span>&nbsp;<span class="op" id="8323237">!=</span>&nbsp;<span class="num" id="8323240">8</span><span class="op" id="8323241">/</span><span class="ident" id="8323242"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span>&nbsp;<span class="op" id="8323251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323258"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span>&nbsp;<span class="op" id="8323260">=</span>&nbsp;<span class="ident" id="8323262"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span>&nbsp;<span class="op" id="8323264">&lt;&lt;</span>&nbsp;<span class="builtintype" id="8323267">uint</span><span class="op" id="8323271">(</span><span class="ident" id="8323272"><a href="/gostd/image/png/reader_test.go.html#8319686">bitdepth</a></span><span class="op" id="8323280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323287"><a href="/gostd/image/png/reader_test.go.html#8322998">c</a></span><span class="op" id="8323288">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323295">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323301"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8323304">.</span><span class="ident" id="8323305"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="8323312">(</span><span class="ident" id="8323313"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8323314">,</span>&nbsp;<span class="string" id="8323316">&#34;%02x&#34;</span><span class="op" id="8323322">,</span>&nbsp;<span class="ident" id="8323324"><a href="/gostd/image/png/reader_test.go.html#8322995">b</a></span><span class="op" id="8323325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323338"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8323340">.</span><span class="ident" id="8323341"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8323352">(</span><span class="ident" id="8323353"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8323354">,</span>&nbsp;<span class="string" id="8323356">&#34;\n&#34;</span><span class="op" id="8323360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323363">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323366"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8323368">.</span><span class="ident" id="8323369"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="8323380">(</span><span class="ident" id="8323381"><a href="/gostd/image/png/reader_test.go.html#8319562">w</a></span><span class="op" id="8323382">,</span>&nbsp;<span class="string" id="8323384">&#34;}\n&#34;</span><span class="op" id="8323389">)</span><br>
<span class="lineno"></span><span class="op" id="8323391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8323394">func</span>&nbsp;<span class="ident" id="8323399">TestReader</span><span class="op" id="8323409">(</span><span class="ident" id="8323410">t</span>&nbsp;<span class="op" id="8323412">*</span><span class="ident" id="8323413"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8323420">.</span><span class="ident" id="8323421"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8323422">)</span>&nbsp;<span class="op" id="8323424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323427">names</span>&nbsp;<span class="op" id="8323433">:=</span>&nbsp;<span class="ident" id="8323436"><a href="/gostd/image/png/reader_test.go.html#8318859">filenames</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323447">if</span>&nbsp;<span class="ident" id="8323450"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8323457">.</span><span class="ident" id="8323458"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="8323463">(</span><span class="op" id="8323464">)</span>&nbsp;<span class="op" id="8323466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323470"><a href="/gostd/image/png/reader_test.go.html#8323427">names</a></span>&nbsp;<span class="op" id="8323476">=</span>&nbsp;<span class="ident" id="8323478"><a href="/gostd/image/png/reader_test.go.html#8319273">filenamesShort</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323497">for</span>&nbsp;<span class="ident" id="8323501">_</span><span class="op" id="8323502">,</span>&nbsp;<span class="ident" id="8323504">fn</span>&nbsp;<span class="op" id="8323507">:=</span>&nbsp;<span class="keyword" id="8323510">range</span>&nbsp;<span class="ident" id="8323516"><a href="/gostd/image/png/reader_test.go.html#8323427">names</a></span>&nbsp;<span class="op" id="8323522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8323526">//&nbsp;Read&nbsp;the&nbsp;.png&nbsp;file.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323551">img</span><span class="op" id="8323554">,</span>&nbsp;<span class="ident" id="8323556">err</span>&nbsp;<span class="op" id="8323560">:=</span>&nbsp;<span class="ident" id="8323563"><a href="/gostd/image/png/reader_test.go.html#8319350">readPNG</a></span><span class="op" id="8323570">(</span><span class="string" id="8323571">&#34;testdata/pngsuite/&#34;</span>&nbsp;<span class="op" id="8323592">+</span>&nbsp;<span class="ident" id="8323594"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span>&nbsp;<span class="op" id="8323597">+</span>&nbsp;<span class="string" id="8323599">&#34;.png&#34;</span><span class="op" id="8323605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323609">if</span>&nbsp;<span class="ident" id="8323612"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span>&nbsp;<span class="op" id="8323616">!=</span>&nbsp;<span class="builtintype" id="8323619">nil</span>&nbsp;<span class="op" id="8323623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323628"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8323629">.</span><span class="ident" id="8323630"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8323635">(</span><span class="ident" id="8323636"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8323638">,</span>&nbsp;<span class="ident" id="8323640"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span><span class="op" id="8323643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323648">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323659">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323664">if</span>&nbsp;<span class="ident" id="8323667"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span>&nbsp;<span class="op" id="8323670">==</span>&nbsp;<span class="string" id="8323673">&#34;basn4a16&#34;</span>&nbsp;<span class="op" id="8323684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8323689">//&nbsp;basn4a16.sng&nbsp;is&nbsp;gray&nbsp;+&nbsp;alpha&nbsp;but&nbsp;sng()&nbsp;will&nbsp;produce&nbsp;true&nbsp;color&nbsp;+&nbsp;alpha</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8323766">//&nbsp;so&nbsp;we&nbsp;just&nbsp;check&nbsp;a&nbsp;single&nbsp;random&nbsp;pixel.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323812">c</span>&nbsp;<span class="op" id="8323814">:=</span>&nbsp;<span class="ident" id="8323817"><a href="/gostd/image/png/reader_test.go.html#8323551">img</a></span><span class="op" id="8323820">.</span><span class="ident" id="8323821"><a href="/gostd/image/image.go.html#5155352">At</a></span><span class="op" id="8323823">(</span><span class="num" id="8323824">2</span><span class="op" id="8323825">,</span>&nbsp;<span class="num" id="8323827">1</span><span class="op" id="8323828">)</span><span class="op" id="8323829">.</span><span class="op" id="8323830">(</span><span class="ident" id="8323831"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8323836">.</span><span class="ident" id="8323837"><a href="/gostd/image/color/color.go.html#5186574">NRGBA64</a></span><span class="op" id="8323844">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323849">if</span>&nbsp;<span class="ident" id="8323852"><a href="/gostd/image/png/reader_test.go.html#8323812">c</a></span><span class="op" id="8323853">.</span><span class="ident" id="8323854"><a href="/gostd/image/color/color.go.html#5186592">R</a></span>&nbsp;<span class="op" id="8323856">!=</span>&nbsp;<span class="num" id="8323859">0x11a7</span>&nbsp;<span class="op" id="8323866">||</span>&nbsp;<span class="ident" id="8323869"><a href="/gostd/image/png/reader_test.go.html#8323812">c</a></span><span class="op" id="8323870">.</span><span class="ident" id="8323871"><a href="/gostd/image/color/color.go.html#5186595">G</a></span>&nbsp;<span class="op" id="8323873">!=</span>&nbsp;<span class="num" id="8323876">0x11a7</span>&nbsp;<span class="op" id="8323883">||</span>&nbsp;<span class="ident" id="8323886"><a href="/gostd/image/png/reader_test.go.html#8323812">c</a></span><span class="op" id="8323887">.</span><span class="ident" id="8323888"><a href="/gostd/image/color/color.go.html#5186598">B</a></span>&nbsp;<span class="op" id="8323890">!=</span>&nbsp;<span class="num" id="8323893">0x11a7</span>&nbsp;<span class="op" id="8323900">||</span>&nbsp;<span class="ident" id="8323903"><a href="/gostd/image/png/reader_test.go.html#8323812">c</a></span><span class="op" id="8323904">.</span><span class="ident" id="8323905"><a href="/gostd/image/color/color.go.html#5186601">A</a></span>&nbsp;<span class="op" id="8323907">!=</span>&nbsp;<span class="num" id="8323910">0x1085</span>&nbsp;<span class="op" id="8323917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323923"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8323924">.</span><span class="ident" id="8323925"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8323930">(</span><span class="ident" id="8323931"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8323933">,</span>&nbsp;<span class="ident" id="8323935"><a href="/gostd/image/png/reader_test.go.html#8318775">fmt</a></span><span class="op" id="8323938">.</span><span class="ident" id="8323939"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="8323945">(</span><span class="string" id="8323946">&#34;wrong&nbsp;pixel&nbsp;value&nbsp;at&nbsp;(2,&nbsp;1):&nbsp;%x&#34;</span><span class="op" id="8323979">,</span>&nbsp;<span class="ident" id="8323981"><a href="/gostd/image/png/reader_test.go.html#8323812">c</a></span><span class="op" id="8323982">)</span><span class="op" id="8323983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323993">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324004">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324009">piper</span><span class="op" id="8324014">,</span>&nbsp;<span class="ident" id="8324016">pipew</span>&nbsp;<span class="op" id="8324022">:=</span>&nbsp;<span class="ident" id="8324025"><a href="/gostd/image/png/reader_test.go.html#8318806">io</a></span><span class="op" id="8324027">.</span><span class="ident" id="8324028"><a href="/gostd/io/pipe.go.html#1440333">Pipe</a></span><span class="op" id="8324032">(</span><span class="op" id="8324033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324037">pb</span>&nbsp;<span class="op" id="8324040">:=</span>&nbsp;<span class="ident" id="8324043"><a href="/gostd/image/png/reader_test.go.html#8318766">bufio</a></span><span class="op" id="8324048">.</span><span class="ident" id="8324049"><a href="/gostd/bufio/scan.go.html#1374479">NewScanner</a></span><span class="op" id="8324059">(</span><span class="ident" id="8324060"><a href="/gostd/image/png/reader_test.go.html#8324009">piper</a></span><span class="op" id="8324065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324069">go</span>&nbsp;<span class="ident" id="8324072"><a href="/gostd/image/png/reader_test.go.html#8319558">sng</a></span><span class="op" id="8324075">(</span><span class="ident" id="8324076"><a href="/gostd/image/png/reader_test.go.html#8324016">pipew</a></span><span class="op" id="8324081">,</span>&nbsp;<span class="ident" id="8324083"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324085">,</span>&nbsp;<span class="ident" id="8324087"><a href="/gostd/image/png/reader_test.go.html#8323551">img</a></span><span class="op" id="8324090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324094">defer</span>&nbsp;<span class="ident" id="8324100"><a href="/gostd/image/png/reader_test.go.html#8324009">piper</a></span><span class="op" id="8324105">.</span><span class="ident" id="8324106"><a href="/gostd/io/pipe.go.html#1438720">Close</a></span><span class="op" id="8324111">(</span><span class="op" id="8324112">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8324117">//&nbsp;Read&nbsp;the&nbsp;.sng&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324142">sf</span><span class="op" id="8324144">,</span>&nbsp;<span class="ident" id="8324146"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span>&nbsp;<span class="op" id="8324150">:=</span>&nbsp;<span class="ident" id="8324153"><a href="/gostd/image/png/reader_test.go.html#8318825">os</a></span><span class="op" id="8324155">.</span><span class="ident" id="8324156"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="8324160">(</span><span class="string" id="8324161">&#34;testdata/pngsuite/&#34;</span>&nbsp;<span class="op" id="8324182">+</span>&nbsp;<span class="ident" id="8324184"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span>&nbsp;<span class="op" id="8324187">+</span>&nbsp;<span class="string" id="8324189">&#34;.sng&#34;</span><span class="op" id="8324195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324199">if</span>&nbsp;<span class="ident" id="8324202"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span>&nbsp;<span class="op" id="8324206">!=</span>&nbsp;<span class="builtintype" id="8324209">nil</span>&nbsp;<span class="op" id="8324213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324218"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324219">.</span><span class="ident" id="8324220"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8324225">(</span><span class="ident" id="8324226"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324228">,</span>&nbsp;<span class="ident" id="8324230"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span><span class="op" id="8324233">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324238">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324253">defer</span>&nbsp;<span class="ident" id="8324259"><a href="/gostd/image/png/reader_test.go.html#8324142">sf</a></span><span class="op" id="8324261">.</span><span class="ident" id="8324262"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="8324267">(</span><span class="op" id="8324268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324272">sb</span>&nbsp;<span class="op" id="8324275">:=</span>&nbsp;<span class="ident" id="8324278"><a href="/gostd/image/png/reader_test.go.html#8318766">bufio</a></span><span class="op" id="8324283">.</span><span class="ident" id="8324284"><a href="/gostd/bufio/scan.go.html#1374479">NewScanner</a></span><span class="op" id="8324294">(</span><span class="ident" id="8324295"><a href="/gostd/image/png/reader_test.go.html#8324142">sf</a></span><span class="op" id="8324297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324301">if</span>&nbsp;<span class="ident" id="8324304"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span>&nbsp;<span class="op" id="8324308">!=</span>&nbsp;<span class="builtintype" id="8324311">nil</span>&nbsp;<span class="op" id="8324315">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324320"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324321">.</span><span class="ident" id="8324322"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8324327">(</span><span class="ident" id="8324328"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324330">,</span>&nbsp;<span class="ident" id="8324332"><a href="/gostd/image/png/reader_test.go.html#8323556">err</a></span><span class="op" id="8324335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324340">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8324356">//&nbsp;Compare&nbsp;the&nbsp;two,&nbsp;in&nbsp;SNG&nbsp;format,&nbsp;line&nbsp;by&nbsp;line.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324407">for</span>&nbsp;<span class="op" id="8324411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324416">pdone</span>&nbsp;<span class="op" id="8324422">:=</span>&nbsp;<span class="op" id="8324425">!</span><span class="ident" id="8324426"><a href="/gostd/image/png/reader_test.go.html#8324037">pb</a></span><span class="op" id="8324428">.</span><span class="ident" id="8324429"><a href="/gostd/bufio/scan.go.html#1375802">Scan</a></span><span class="op" id="8324433">(</span><span class="op" id="8324434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324439">sdone</span>&nbsp;<span class="op" id="8324445">:=</span>&nbsp;<span class="op" id="8324448">!</span><span class="ident" id="8324449"><a href="/gostd/image/png/reader_test.go.html#8324272">sb</a></span><span class="op" id="8324451">.</span><span class="ident" id="8324452"><a href="/gostd/bufio/scan.go.html#1375802">Scan</a></span><span class="op" id="8324456">(</span><span class="op" id="8324457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324462">if</span>&nbsp;<span class="ident" id="8324465"><a href="/gostd/image/png/reader_test.go.html#8324416">pdone</a></span>&nbsp;<span class="op" id="8324471">&amp;&amp;</span>&nbsp;<span class="ident" id="8324474"><a href="/gostd/image/png/reader_test.go.html#8324439">sdone</a></span>&nbsp;<span class="op" id="8324480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324486">break</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324500">if</span>&nbsp;<span class="ident" id="8324503"><a href="/gostd/image/png/reader_test.go.html#8324416">pdone</a></span>&nbsp;<span class="op" id="8324509">||</span>&nbsp;<span class="ident" id="8324512"><a href="/gostd/image/png/reader_test.go.html#8324439">sdone</a></span>&nbsp;<span class="op" id="8324518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324524"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324525">.</span><span class="ident" id="8324526"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8324532">(</span><span class="string" id="8324533">&#34;%s:&nbsp;Different&nbsp;sizes&#34;</span><span class="op" id="8324554">,</span>&nbsp;<span class="ident" id="8324556"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324564">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324573">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324578">ps</span>&nbsp;<span class="op" id="8324581">:=</span>&nbsp;<span class="ident" id="8324584"><a href="/gostd/image/png/reader_test.go.html#8324037">pb</a></span><span class="op" id="8324586">.</span><span class="ident" id="8324587"><a href="/gostd/bufio/scan.go.html#1375242">Text</a></span><span class="op" id="8324591">(</span><span class="op" id="8324592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324597">ss</span>&nbsp;<span class="op" id="8324600">:=</span>&nbsp;<span class="ident" id="8324603"><a href="/gostd/image/png/reader_test.go.html#8324272">sb</a></span><span class="op" id="8324605">.</span><span class="ident" id="8324606"><a href="/gostd/bufio/scan.go.html#1375242">Text</a></span><span class="op" id="8324610">(</span><span class="op" id="8324611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324616">if</span>&nbsp;<span class="ident" id="8324619"><a href="/gostd/image/png/reader_test.go.html#8324578">ps</a></span>&nbsp;<span class="op" id="8324622">!=</span>&nbsp;<span class="ident" id="8324625"><a href="/gostd/image/png/reader_test.go.html#8324597">ss</a></span>&nbsp;<span class="op" id="8324628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324634"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324635">.</span><span class="ident" id="8324636"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8324642">(</span><span class="string" id="8324643">&#34;%s:&nbsp;Mismatch\n%sversus\n%s\n&#34;</span><span class="op" id="8324673">,</span>&nbsp;<span class="ident" id="8324675"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324677">,</span>&nbsp;<span class="ident" id="8324679"><a href="/gostd/image/png/reader_test.go.html#8324578">ps</a></span><span class="op" id="8324681">,</span>&nbsp;<span class="ident" id="8324683"><a href="/gostd/image/png/reader_test.go.html#8324597">ss</a></span><span class="op" id="8324685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324691">break</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324708">if</span>&nbsp;<span class="ident" id="8324711"><a href="/gostd/image/png/reader_test.go.html#8324037">pb</a></span><span class="op" id="8324713">.</span><span class="ident" id="8324714"><a href="/gostd/bufio/scan.go.html#1374794">Err</a></span><span class="op" id="8324717">(</span><span class="op" id="8324718">)</span>&nbsp;<span class="op" id="8324720">!=</span>&nbsp;<span class="builtintype" id="8324723">nil</span>&nbsp;<span class="op" id="8324727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324732"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324733">.</span><span class="ident" id="8324734"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8324739">(</span><span class="ident" id="8324740"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324742">,</span>&nbsp;<span class="ident" id="8324744"><a href="/gostd/image/png/reader_test.go.html#8324037">pb</a></span><span class="op" id="8324746">.</span><span class="ident" id="8324747"><a href="/gostd/bufio/scan.go.html#1374794">Err</a></span><span class="op" id="8324750">(</span><span class="op" id="8324751">)</span><span class="op" id="8324752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324756">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324760">if</span>&nbsp;<span class="ident" id="8324763"><a href="/gostd/image/png/reader_test.go.html#8324272">sb</a></span><span class="op" id="8324765">.</span><span class="ident" id="8324766"><a href="/gostd/bufio/scan.go.html#1374794">Err</a></span><span class="op" id="8324769">(</span><span class="op" id="8324770">)</span>&nbsp;<span class="op" id="8324772">!=</span>&nbsp;<span class="builtintype" id="8324775">nil</span>&nbsp;<span class="op" id="8324779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324784"><a href="/gostd/image/png/reader_test.go.html#8323410">t</a></span><span class="op" id="8324785">.</span><span class="ident" id="8324786"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="8324791">(</span><span class="ident" id="8324792"><a href="/gostd/image/png/reader_test.go.html#8323504">fn</a></span><span class="op" id="8324794">,</span>&nbsp;<span class="ident" id="8324796"><a href="/gostd/image/png/reader_test.go.html#8324272">sb</a></span><span class="op" id="8324798">.</span><span class="ident" id="8324799"><a href="/gostd/bufio/scan.go.html#1374794">Err</a></span><span class="op" id="8324802">(</span><span class="op" id="8324803">)</span><span class="op" id="8324804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324811">}</span><br>
<span class="lineno"></span><span class="op" id="8324813">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="keyword" id="8324816">var</span>&nbsp;<span class="ident" id="8324820">readerErrors</span>&nbsp;<span class="op" id="8324833">=</span>&nbsp;<span class="op" id="8324835">[</span><span class="op" id="8324836">]</span><span class="keyword" id="8324837">struct</span>&nbsp;<span class="op" id="8324844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324847">file</span>&nbsp;<span class="builtintype" id="8324852">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324860">err</span>&nbsp;&nbsp;<span class="builtintype" id="8324865">string</span><br>
<span class="lineno"></span><span class="op" id="8324872">}</span><span class="op" id="8324873">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324876">{</span><span class="string" id="8324877">&#34;invalid-zlib.png&#34;</span><span class="op" id="8324895">,</span>&nbsp;<span class="string" id="8324897">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="8324921">}</span><span class="op" id="8324922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324925">{</span><span class="string" id="8324926">&#34;invalid-crc32.png&#34;</span><span class="op" id="8324945">,</span>&nbsp;<span class="string" id="8324947">&#34;invalid&nbsp;checksum&#34;</span><span class="op" id="8324965">}</span><span class="op" id="8324966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324969">{</span><span class="string" id="8324970">&#34;invalid-noend.png&#34;</span><span class="op" id="8324989">,</span>&nbsp;<span class="string" id="8324991">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="8325007">}</span><span class="op" id="8325008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325011">{</span><span class="string" id="8325012">&#34;invalid-trunc.png&#34;</span><span class="op" id="8325031">,</span>&nbsp;<span class="string" id="8325033">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="8325049">}</span><span class="op" id="8325050">,</span><br>
<span class="lineno"></span><span class="op" id="8325052">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="8325055">func</span>&nbsp;<span class="ident" id="8325060">TestReaderError</span><span class="op" id="8325075">(</span><span class="ident" id="8325076">t</span>&nbsp;<span class="op" id="8325078">*</span><span class="ident" id="8325079"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8325086">.</span><span class="ident" id="8325087"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8325088">)</span>&nbsp;<span class="op" id="8325090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325093">for</span>&nbsp;<span class="ident" id="8325097">_</span><span class="op" id="8325098">,</span>&nbsp;<span class="ident" id="8325100">tt</span>&nbsp;<span class="op" id="8325103">:=</span>&nbsp;<span class="keyword" id="8325106">range</span>&nbsp;<span class="ident" id="8325112"><a href="/gostd/image/png/reader_test.go.html#8324820">readerErrors</a></span>&nbsp;<span class="op" id="8325125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325129">img</span><span class="op" id="8325132">,</span>&nbsp;<span class="ident" id="8325134">err</span>&nbsp;<span class="op" id="8325138">:=</span>&nbsp;<span class="ident" id="8325141"><a href="/gostd/image/png/reader_test.go.html#8319350">readPNG</a></span><span class="op" id="8325148">(</span><span class="string" id="8325149">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="8325161">+</span>&nbsp;<span class="ident" id="8325163"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325165">.</span><span class="ident" id="8325166"><a href="/gostd/image/png/reader_test.go.html#8324847">file</a></span><span class="op" id="8325170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325174">if</span>&nbsp;<span class="ident" id="8325177"><a href="/gostd/image/png/reader_test.go.html#8325134">err</a></span>&nbsp;<span class="op" id="8325181">==</span>&nbsp;<span class="builtintype" id="8325184">nil</span>&nbsp;<span class="op" id="8325188">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325193"><a href="/gostd/image/png/reader_test.go.html#8325076">t</a></span><span class="op" id="8325194">.</span><span class="ident" id="8325195"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325201">(</span><span class="string" id="8325202">&#34;decoding&nbsp;%s:&nbsp;missing&nbsp;error&#34;</span><span class="op" id="8325230">,</span>&nbsp;<span class="ident" id="8325232"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325234">.</span><span class="ident" id="8325235"><a href="/gostd/image/png/reader_test.go.html#8324847">file</a></span><span class="op" id="8325239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325244">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325259">if</span>&nbsp;<span class="op" id="8325262">!</span><span class="ident" id="8325263"><a href="/gostd/image/png/reader_test.go.html#8318831">strings</a></span><span class="op" id="8325270">.</span><span class="ident" id="8325271"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="8325279">(</span><span class="ident" id="8325280"><a href="/gostd/image/png/reader_test.go.html#8325134">err</a></span><span class="op" id="8325283">.</span><span class="ident" id="8325284">Error</span><span class="op" id="8325289">(</span><span class="op" id="8325290">)</span><span class="op" id="8325291">,</span>&nbsp;<span class="ident" id="8325293"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325295">.</span><span class="ident" id="8325296"><a href="/gostd/image/png/reader_test.go.html#8324860">err</a></span><span class="op" id="8325299">)</span>&nbsp;<span class="op" id="8325301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325306"><a href="/gostd/image/png/reader_test.go.html#8325076">t</a></span><span class="op" id="8325307">.</span><span class="ident" id="8325308"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325314">(</span><span class="string" id="8325315">&#34;decoding&nbsp;%s:&nbsp;%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8325341">,</span>&nbsp;<span class="ident" id="8325343"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325345">.</span><span class="ident" id="8325346"><a href="/gostd/image/png/reader_test.go.html#8324847">file</a></span><span class="op" id="8325350">,</span>&nbsp;<span class="ident" id="8325352"><a href="/gostd/image/png/reader_test.go.html#8325134">err</a></span><span class="op" id="8325355">,</span>&nbsp;<span class="ident" id="8325357"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325359">.</span><span class="ident" id="8325360"><a href="/gostd/image/png/reader_test.go.html#8324860">err</a></span><span class="op" id="8325363">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325371">if</span>&nbsp;<span class="ident" id="8325374"><a href="/gostd/image/png/reader_test.go.html#8325129">img</a></span>&nbsp;<span class="op" id="8325378">!=</span>&nbsp;<span class="builtintype" id="8325381">nil</span>&nbsp;<span class="op" id="8325385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325390"><a href="/gostd/image/png/reader_test.go.html#8325076">t</a></span><span class="op" id="8325391">.</span><span class="ident" id="8325392"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325398">(</span><span class="string" id="8325399">&#34;decoding&nbsp;%s:&nbsp;have&nbsp;image&nbsp;+&nbsp;error&#34;</span><span class="op" id="8325432">,</span>&nbsp;<span class="ident" id="8325434"><a href="/gostd/image/png/reader_test.go.html#8325100">tt</a></span><span class="op" id="8325436">.</span><span class="ident" id="8325437"><a href="/gostd/image/png/reader_test.go.html#8324847">file</a></span><span class="op" id="8325441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325448">}</span><br>
<span class="lineno">295</span><span class="op" id="8325450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8325453">func</span>&nbsp;<span class="ident" id="8325458">TestPalettedDecodeConfig</span><span class="op" id="8325482">(</span><span class="ident" id="8325483">t</span>&nbsp;<span class="op" id="8325485">*</span><span class="ident" id="8325486"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8325493">.</span><span class="ident" id="8325494"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="8325495">)</span>&nbsp;<span class="op" id="8325497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325500">for</span>&nbsp;<span class="ident" id="8325504">_</span><span class="op" id="8325505">,</span>&nbsp;<span class="ident" id="8325507">fn</span>&nbsp;<span class="op" id="8325510">:=</span>&nbsp;<span class="keyword" id="8325513">range</span>&nbsp;<span class="ident" id="8325519"><a href="/gostd/image/png/reader_test.go.html#8319166">filenamesPaletted</a></span>&nbsp;<span class="op" id="8325537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325541">f</span><span class="op" id="8325542">,</span>&nbsp;<span class="ident" id="8325544">err</span>&nbsp;<span class="op" id="8325548">:=</span>&nbsp;<span class="ident" id="8325551"><a href="/gostd/image/png/reader_test.go.html#8318825">os</a></span><span class="op" id="8325553">.</span><span class="ident" id="8325554"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="8325558">(</span><span class="string" id="8325559">&#34;testdata/pngsuite/&#34;</span>&nbsp;<span class="op" id="8325580">+</span>&nbsp;<span class="ident" id="8325582"><a href="/gostd/image/png/reader_test.go.html#8325507">fn</a></span>&nbsp;<span class="op" id="8325585">+</span>&nbsp;<span class="string" id="8325587">&#34;.png&#34;</span><span class="op" id="8325593">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325597">if</span>&nbsp;<span class="ident" id="8325600"><a href="/gostd/image/png/reader_test.go.html#8325544">err</a></span>&nbsp;<span class="op" id="8325604">!=</span>&nbsp;<span class="builtintype" id="8325607">nil</span>&nbsp;<span class="op" id="8325611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325616"><a href="/gostd/image/png/reader_test.go.html#8325483">t</a></span><span class="op" id="8325617">.</span><span class="ident" id="8325618"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325624">(</span><span class="string" id="8325625">&#34;%s:&nbsp;open&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8325646">,</span>&nbsp;<span class="ident" id="8325648"><a href="/gostd/image/png/reader_test.go.html#8325507">fn</a></span><span class="op" id="8325650">,</span>&nbsp;<span class="ident" id="8325652"><a href="/gostd/image/png/reader_test.go.html#8325544">err</a></span><span class="op" id="8325655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325660">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325675">defer</span>&nbsp;<span class="ident" id="8325681"><a href="/gostd/image/png/reader_test.go.html#8325541">f</a></span><span class="op" id="8325682">.</span><span class="ident" id="8325683"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="8325688">(</span><span class="op" id="8325689">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325693">cfg</span><span class="op" id="8325696">,</span>&nbsp;<span class="ident" id="8325698"><a href="/gostd/image/png/reader_test.go.html#8325544">err</a></span>&nbsp;<span class="op" id="8325702">:=</span>&nbsp;<span class="ident" id="8325705"><a href="/gostd/image/png/reader.go.html#6167792">DecodeConfig</a></span><span class="op" id="8325717">(</span><span class="ident" id="8325718"><a href="/gostd/image/png/reader_test.go.html#8325541">f</a></span><span class="op" id="8325719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325723">if</span>&nbsp;<span class="ident" id="8325726"><a href="/gostd/image/png/reader_test.go.html#8325544">err</a></span>&nbsp;<span class="op" id="8325730">!=</span>&nbsp;<span class="builtintype" id="8325733">nil</span>&nbsp;<span class="op" id="8325737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325742"><a href="/gostd/image/png/reader_test.go.html#8325483">t</a></span><span class="op" id="8325743">.</span><span class="ident" id="8325744"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325750">(</span><span class="string" id="8325751">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="8325759">,</span>&nbsp;<span class="ident" id="8325761"><a href="/gostd/image/png/reader_test.go.html#8325507">fn</a></span><span class="op" id="8325763">,</span>&nbsp;<span class="ident" id="8325765"><a href="/gostd/image/png/reader_test.go.html#8325544">err</a></span><span class="op" id="8325768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325773">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325784">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325788">pal</span><span class="op" id="8325791">,</span>&nbsp;<span class="ident" id="8325793">ok</span>&nbsp;<span class="op" id="8325796">:=</span>&nbsp;<span class="ident" id="8325799"><a href="/gostd/image/png/reader_test.go.html#8325693">cfg</a></span><span class="op" id="8325802">.</span><span class="ident" id="8325803"><a href="/gostd/image/image.go.html#5154765">ColorModel</a></span><span class="op" id="8325813">.</span><span class="op" id="8325814">(</span><span class="ident" id="8325815"><a href="/gostd/image/png/reader_test.go.html#8318791">color</a></span><span class="op" id="8325820">.</span><span class="ident" id="8325821"><a href="/gostd/image/color/color.go.html#5190467">Palette</a></span><span class="op" id="8325828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325832">if</span>&nbsp;<span class="op" id="8325835">!</span><span class="ident" id="8325836"><a href="/gostd/image/png/reader_test.go.html#8325793">ok</a></span>&nbsp;<span class="op" id="8325839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325844"><a href="/gostd/image/png/reader_test.go.html#8325483">t</a></span><span class="op" id="8325845">.</span><span class="ident" id="8325846"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325852">(</span><span class="string" id="8325853">&#34;%s:&nbsp;expected&nbsp;paletted&nbsp;color&nbsp;model&#34;</span><span class="op" id="8325888">,</span>&nbsp;<span class="ident" id="8325890"><a href="/gostd/image/png/reader_test.go.html#8325507">fn</a></span><span class="op" id="8325892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325897">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325908">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325912">if</span>&nbsp;<span class="ident" id="8325915"><a href="/gostd/image/png/reader_test.go.html#8325788">pal</a></span>&nbsp;<span class="op" id="8325919">==</span>&nbsp;<span class="builtintype" id="8325922">nil</span>&nbsp;<span class="op" id="8325926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325931"><a href="/gostd/image/png/reader_test.go.html#8325483">t</a></span><span class="op" id="8325932">.</span><span class="ident" id="8325933"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="8325939">(</span><span class="string" id="8325940">&#34;%s:&nbsp;palette&nbsp;not&nbsp;initialized&#34;</span><span class="op" id="8325969">,</span>&nbsp;<span class="ident" id="8325971"><a href="/gostd/image/png/reader_test.go.html#8325507">fn</a></span><span class="op" id="8325973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325978">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325992">}</span><br>
<span class="lineno">320</span><span class="op" id="8325994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8325997">func</span>&nbsp;<span class="ident" id="8326002">benchmarkDecode</span><span class="op" id="8326017">(</span><span class="ident" id="8326018">b</span>&nbsp;<span class="op" id="8326020">*</span><span class="ident" id="8326021"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326028">.</span><span class="ident" id="8326029"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326030">,</span>&nbsp;<span class="ident" id="8326032">filename</span>&nbsp;<span class="builtintype" id="8326041">string</span><span class="op" id="8326047">,</span>&nbsp;<span class="ident" id="8326049">bytesPerPixel</span>&nbsp;<span class="builtintype" id="8326063">int</span><span class="op" id="8326066">)</span>&nbsp;<span class="op" id="8326068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326071"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326072">.</span><span class="ident" id="8326073"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="8326082">(</span><span class="op" id="8326083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326086">data</span><span class="op" id="8326090">,</span>&nbsp;<span class="ident" id="8326092">err</span>&nbsp;<span class="op" id="8326096">:=</span>&nbsp;<span class="ident" id="8326099"><a href="/gostd/image/png/reader_test.go.html#8318812">ioutil</a></span><span class="op" id="8326105">.</span><span class="ident" id="8326106"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="8326114">(</span><span class="ident" id="8326115"><a href="/gostd/image/png/reader_test.go.html#8326032">filename</a></span><span class="op" id="8326123">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326126">if</span>&nbsp;<span class="ident" id="8326129"><a href="/gostd/image/png/reader_test.go.html#8326092">err</a></span>&nbsp;<span class="op" id="8326133">!=</span>&nbsp;<span class="builtintype" id="8326136">nil</span>&nbsp;<span class="op" id="8326140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326144"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326145">.</span><span class="ident" id="8326146"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8326151">(</span><span class="ident" id="8326152"><a href="/gostd/image/png/reader_test.go.html#8326092">err</a></span><span class="op" id="8326155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326161">s</span>&nbsp;<span class="op" id="8326163">:=</span>&nbsp;<span class="builtintype" id="8326166">string</span><span class="op" id="8326172">(</span><span class="ident" id="8326173"><a href="/gostd/image/png/reader_test.go.html#8326086">data</a></span><span class="op" id="8326177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326180">cfg</span><span class="op" id="8326183">,</span>&nbsp;<span class="ident" id="8326185"><a href="/gostd/image/png/reader_test.go.html#8326092">err</a></span>&nbsp;<span class="op" id="8326189">:=</span>&nbsp;<span class="ident" id="8326192"><a href="/gostd/image/png/reader.go.html#6167792">DecodeConfig</a></span><span class="op" id="8326204">(</span><span class="ident" id="8326205"><a href="/gostd/image/png/reader_test.go.html#8318831">strings</a></span><span class="op" id="8326212">.</span><span class="ident" id="8326213"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="8326222">(</span><span class="ident" id="8326223"><a href="/gostd/image/png/reader_test.go.html#8326161">s</a></span><span class="op" id="8326224">)</span><span class="op" id="8326225">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326228">if</span>&nbsp;<span class="ident" id="8326231"><a href="/gostd/image/png/reader_test.go.html#8326092">err</a></span>&nbsp;<span class="op" id="8326235">!=</span>&nbsp;<span class="builtintype" id="8326238">nil</span>&nbsp;<span class="op" id="8326242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326246"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326247">.</span><span class="ident" id="8326248"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="8326253">(</span><span class="ident" id="8326254"><a href="/gostd/image/png/reader_test.go.html#8326092">err</a></span><span class="op" id="8326257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326263"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326264">.</span><span class="ident" id="8326265"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="8326273">(</span><span class="builtintype" id="8326274">int64</span><span class="op" id="8326279">(</span><span class="ident" id="8326280"><a href="/gostd/image/png/reader_test.go.html#8326180">cfg</a></span><span class="op" id="8326283">.</span><span class="ident" id="8326284"><a href="/gostd/image/image.go.html#5154792">Width</a></span>&nbsp;<span class="op" id="8326290">*</span>&nbsp;<span class="ident" id="8326292"><a href="/gostd/image/png/reader_test.go.html#8326180">cfg</a></span><span class="op" id="8326295">.</span><span class="ident" id="8326296"><a href="/gostd/image/image.go.html#5154799">Height</a></span>&nbsp;<span class="op" id="8326303">*</span>&nbsp;<span class="ident" id="8326305"><a href="/gostd/image/png/reader_test.go.html#8326049">bytesPerPixel</a></span><span class="op" id="8326318">)</span><span class="op" id="8326319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326322"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326323">.</span><span class="ident" id="8326324"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="8326334">(</span><span class="op" id="8326335">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326338">for</span>&nbsp;<span class="ident" id="8326342">i</span>&nbsp;<span class="op" id="8326344">:=</span>&nbsp;<span class="num" id="8326347">0</span><span class="op" id="8326348">;</span>&nbsp;<span class="ident" id="8326350"><a href="/gostd/image/png/reader_test.go.html#8326342">i</a></span>&nbsp;<span class="op" id="8326352">&lt;</span>&nbsp;<span class="ident" id="8326354"><a href="/gostd/image/png/reader_test.go.html#8326018">b</a></span><span class="op" id="8326355">.</span><span class="ident" id="8326356"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="8326357">;</span>&nbsp;<span class="ident" id="8326359"><a href="/gostd/image/png/reader_test.go.html#8326342">i</a></span><span class="op" id="8326360">++</span>&nbsp;<span class="op" id="8326363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326367"><a href="/gostd/image/png/reader.go.html#6167292">Decode</a></span><span class="op" id="8326373">(</span><span class="ident" id="8326374"><a href="/gostd/image/png/reader_test.go.html#8318831">strings</a></span><span class="op" id="8326381">.</span><span class="ident" id="8326382"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="8326391">(</span><span class="ident" id="8326392"><a href="/gostd/image/png/reader_test.go.html#8326161">s</a></span><span class="op" id="8326393">)</span><span class="op" id="8326394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326397">}</span><br>
<span class="lineno"></span><span class="op" id="8326399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="keyword" id="8326402">func</span>&nbsp;<span class="ident" id="8326407">BenchmarkDecodeGray</span><span class="op" id="8326426">(</span><span class="ident" id="8326427">b</span>&nbsp;<span class="op" id="8326429">*</span><span class="ident" id="8326430"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326437">.</span><span class="ident" id="8326438"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326439">)</span>&nbsp;<span class="op" id="8326441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326444"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326459">(</span><span class="ident" id="8326460"><a href="/gostd/image/png/reader_test.go.html#8326427">b</a></span><span class="op" id="8326461">,</span>&nbsp;<span class="string" id="8326463">&#34;testdata/benchGray.png&#34;</span><span class="op" id="8326487">,</span>&nbsp;<span class="num" id="8326489">1</span><span class="op" id="8326490">)</span><br>
<span class="lineno"></span><span class="op" id="8326492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8326495">func</span>&nbsp;<span class="ident" id="8326500">BenchmarkDecodeNRGBAGradient</span><span class="op" id="8326528">(</span><span class="ident" id="8326529">b</span>&nbsp;<span class="op" id="8326531">*</span><span class="ident" id="8326532"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326539">.</span><span class="ident" id="8326540"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326541">)</span>&nbsp;<span class="op" id="8326543">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326546"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326561">(</span><span class="ident" id="8326562"><a href="/gostd/image/png/reader_test.go.html#8326529">b</a></span><span class="op" id="8326563">,</span>&nbsp;<span class="string" id="8326565">&#34;testdata/benchNRGBA-gradient.png&#34;</span><span class="op" id="8326599">,</span>&nbsp;<span class="num" id="8326601">4</span><span class="op" id="8326602">)</span><br>
<span class="lineno"></span><span class="op" id="8326604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8326607">func</span>&nbsp;<span class="ident" id="8326612">BenchmarkDecodeNRGBAOpaque</span><span class="op" id="8326638">(</span><span class="ident" id="8326639">b</span>&nbsp;<span class="op" id="8326641">*</span><span class="ident" id="8326642"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326649">.</span><span class="ident" id="8326650"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326651">)</span>&nbsp;<span class="op" id="8326653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326656"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326671">(</span><span class="ident" id="8326672"><a href="/gostd/image/png/reader_test.go.html#8326639">b</a></span><span class="op" id="8326673">,</span>&nbsp;<span class="string" id="8326675">&#34;testdata/benchNRGBA-opaque.png&#34;</span><span class="op" id="8326707">,</span>&nbsp;<span class="num" id="8326709">4</span><span class="op" id="8326710">)</span><br>
<span class="lineno">350</span><span class="op" id="8326712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8326715">func</span>&nbsp;<span class="ident" id="8326720">BenchmarkDecodePaletted</span><span class="op" id="8326743">(</span><span class="ident" id="8326744">b</span>&nbsp;<span class="op" id="8326746">*</span><span class="ident" id="8326747"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326754">.</span><span class="ident" id="8326755"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326756">)</span>&nbsp;<span class="op" id="8326758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326761"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326776">(</span><span class="ident" id="8326777"><a href="/gostd/image/png/reader_test.go.html#8326744">b</a></span><span class="op" id="8326778">,</span>&nbsp;<span class="string" id="8326780">&#34;testdata/benchPaletted.png&#34;</span><span class="op" id="8326808">,</span>&nbsp;<span class="num" id="8326810">1</span><span class="op" id="8326811">)</span><br>
<span class="lineno"></span><span class="op" id="8326813">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="keyword" id="8326816">func</span>&nbsp;<span class="ident" id="8326821">BenchmarkDecodeRGB</span><span class="op" id="8326839">(</span><span class="ident" id="8326840">b</span>&nbsp;<span class="op" id="8326842">*</span><span class="ident" id="8326843"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326850">.</span><span class="ident" id="8326851"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326852">)</span>&nbsp;<span class="op" id="8326854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326857"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326872">(</span><span class="ident" id="8326873"><a href="/gostd/image/png/reader_test.go.html#8326840">b</a></span><span class="op" id="8326874">,</span>&nbsp;<span class="string" id="8326876">&#34;testdata/benchRGB.png&#34;</span><span class="op" id="8326899">,</span>&nbsp;<span class="num" id="8326901">4</span><span class="op" id="8326902">)</span><br>
<span class="lineno"></span><span class="op" id="8326904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="8326907">func</span>&nbsp;<span class="ident" id="8326912">BenchmarkDecodeInterlacing</span><span class="op" id="8326938">(</span><span class="ident" id="8326939">b</span>&nbsp;<span class="op" id="8326941">*</span><span class="ident" id="8326942"><a href="/gostd/image/png/reader_test.go.html#8318842">testing</a></span><span class="op" id="8326949">.</span><span class="ident" id="8326950"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="8326951">)</span>&nbsp;<span class="op" id="8326953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326956"><a href="/gostd/image/png/reader_test.go.html#8326002">benchmarkDecode</a></span><span class="op" id="8326971">(</span><span class="ident" id="8326972"><a href="/gostd/image/png/reader_test.go.html#8326939">b</a></span><span class="op" id="8326973">,</span>&nbsp;<span class="string" id="8326975">&#34;testdata/benchRGB-interlace.png&#34;</span><span class="op" id="8327008">,</span>&nbsp;<span class="num" id="8327010">4</span><span class="op" id="8327011">)</span><br>
<span class="lineno"></span><span class="op" id="8327013">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
