<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html" class="current">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8176678">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8176733">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8176787">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8176838">package</span>&nbsp;<span class="ident" id="8176846">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8176854">import</span>&nbsp;<span class="op" id="8176861">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176864">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176873">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176886">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176898">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176911">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8176922">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8176932">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8176935">const</span>&nbsp;<span class="ident" id="8176941">testfile</span>&nbsp;<span class="op" id="8176950">=</span>&nbsp;<span class="string" id="8176952">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8176970">func</span>&nbsp;<span class="ident" id="8176975">diff</span><span class="op" id="8176979">(</span><span class="ident" id="8176980">t</span>&nbsp;<span class="op" id="8176982">*</span><span class="ident" id="8176983">testing</span><span class="op" id="8176990">.</span><span class="ident" id="8176991">T</span><span class="op" id="8176992">,</span>&nbsp;<span class="ident" id="8176994">dst</span><span class="op" id="8176997">,</span>&nbsp;<span class="ident" id="8176999">src</span>&nbsp;<span class="op" id="8177003">[</span><span class="op" id="8177004">]</span><span class="builtintype" id="8177005">byte</span><span class="op" id="8177009">)</span>&nbsp;<span class="op" id="8177011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177014">line</span>&nbsp;<span class="op" id="8177019">:=</span>&nbsp;<span class="num" id="8177022">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177025">offs</span>&nbsp;<span class="op" id="8177030">:=</span>&nbsp;<span class="num" id="8177033">0</span>&nbsp;<span class="comment" id="8177035">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177051">for</span>&nbsp;<span class="ident" id="8177055">i</span>&nbsp;<span class="op" id="8177057">:=</span>&nbsp;<span class="num" id="8177060">0</span><span class="op" id="8177061">;</span>&nbsp;<span class="ident" id="8177063">i</span>&nbsp;<span class="op" id="8177065">&lt;</span>&nbsp;<span class="builtinfunc" id="8177067">len</span><span class="op" id="8177070">(</span><span class="ident" id="8177071">dst</span><span class="op" id="8177074">)</span>&nbsp;<span class="op" id="8177076">&amp;&amp;</span>&nbsp;<span class="ident" id="8177079">i</span>&nbsp;<span class="op" id="8177081">&lt;</span>&nbsp;<span class="builtinfunc" id="8177083">len</span><span class="op" id="8177086">(</span><span class="ident" id="8177087">src</span><span class="op" id="8177090">)</span><span class="op" id="8177091">;</span>&nbsp;<span class="ident" id="8177093">i</span><span class="op" id="8177094">++</span>&nbsp;<span class="op" id="8177097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177101">d</span>&nbsp;<span class="op" id="8177103">:=</span>&nbsp;<span class="ident" id="8177106">dst</span><span class="op" id="8177109">[</span><span class="ident" id="8177110">i</span><span class="op" id="8177111">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177115">s</span>&nbsp;<span class="op" id="8177117">:=</span>&nbsp;<span class="ident" id="8177120">src</span><span class="op" id="8177123">[</span><span class="ident" id="8177124">i</span><span class="op" id="8177125">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177129">if</span>&nbsp;<span class="ident" id="8177132">d</span>&nbsp;<span class="op" id="8177134">!=</span>&nbsp;<span class="ident" id="8177137">s</span>&nbsp;<span class="op" id="8177139">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177144">t</span><span class="op" id="8177145">.</span><span class="ident" id="8177146">Errorf</span><span class="op" id="8177152">(</span><span class="string" id="8177153">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8177167">,</span>&nbsp;<span class="ident" id="8177169">line</span><span class="op" id="8177173">,</span>&nbsp;<span class="ident" id="8177175">dst</span><span class="op" id="8177178">[</span><span class="ident" id="8177179">offs</span><span class="op" id="8177183">:</span><span class="ident" id="8177184">i</span><span class="op" id="8177185">+</span><span class="num" id="8177186">1</span><span class="op" id="8177187">]</span><span class="op" id="8177188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177193">t</span><span class="op" id="8177194">.</span><span class="ident" id="8177195">Errorf</span><span class="op" id="8177201">(</span><span class="string" id="8177202">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8177216">,</span>&nbsp;<span class="ident" id="8177218">line</span><span class="op" id="8177222">,</span>&nbsp;<span class="ident" id="8177224">src</span><span class="op" id="8177227">[</span><span class="ident" id="8177228">offs</span><span class="op" id="8177232">:</span><span class="ident" id="8177233">i</span><span class="op" id="8177234">+</span><span class="num" id="8177235">1</span><span class="op" id="8177236">]</span><span class="op" id="8177237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177242">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177255">if</span>&nbsp;<span class="ident" id="8177258">s</span>&nbsp;<span class="op" id="8177260">==</span>&nbsp;<span class="string" id="8177263">&#39;\n&#39;</span>&nbsp;<span class="op" id="8177268">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177273">line</span><span class="op" id="8177277">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177283">offs</span>&nbsp;<span class="op" id="8177288">=</span>&nbsp;<span class="ident" id="8177290">i</span>&nbsp;<span class="op" id="8177292">+</span>&nbsp;<span class="num" id="8177294">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177304">if</span>&nbsp;<span class="builtinfunc" id="8177307">len</span><span class="op" id="8177310">(</span><span class="ident" id="8177311">dst</span><span class="op" id="8177314">)</span>&nbsp;<span class="op" id="8177316">!=</span>&nbsp;<span class="builtinfunc" id="8177319">len</span><span class="op" id="8177322">(</span><span class="ident" id="8177323">src</span><span class="op" id="8177326">)</span>&nbsp;<span class="op" id="8177328">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177332">t</span><span class="op" id="8177333">.</span><span class="ident" id="8177334">Errorf</span><span class="op" id="8177340">(</span><span class="string" id="8177341">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8177381">,</span>&nbsp;<span class="builtinfunc" id="8177383">len</span><span class="op" id="8177386">(</span><span class="ident" id="8177387">dst</span><span class="op" id="8177390">)</span><span class="op" id="8177391">,</span>&nbsp;<span class="builtinfunc" id="8177393">len</span><span class="op" id="8177396">(</span><span class="ident" id="8177397">src</span><span class="op" id="8177400">)</span><span class="op" id="8177401">,</span>&nbsp;<span class="ident" id="8177403">src</span><span class="op" id="8177406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177409">}</span><br>
<span class="lineno"></span><span class="op" id="8177411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8177414">func</span>&nbsp;<span class="ident" id="8177419">TestNode</span><span class="op" id="8177427">(</span><span class="ident" id="8177428">t</span>&nbsp;<span class="op" id="8177430">*</span><span class="ident" id="8177431">testing</span><span class="op" id="8177438">.</span><span class="ident" id="8177439">T</span><span class="op" id="8177440">)</span>&nbsp;<span class="op" id="8177442">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177445">src</span><span class="op" id="8177448">,</span>&nbsp;<span class="ident" id="8177450">err</span>&nbsp;<span class="op" id="8177454">:=</span>&nbsp;<span class="ident" id="8177457">ioutil</span><span class="op" id="8177463">.</span><span class="ident" id="8177464">ReadFile</span><span class="op" id="8177472">(</span><span class="ident" id="8177473">testfile</span><span class="op" id="8177481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177484">if</span>&nbsp;<span class="ident" id="8177487">err</span>&nbsp;<span class="op" id="8177491">!=</span>&nbsp;<span class="ident" id="8177494">nil</span>&nbsp;<span class="op" id="8177498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177502">t</span><span class="op" id="8177503">.</span><span class="ident" id="8177504">Fatal</span><span class="op" id="8177509">(</span><span class="ident" id="8177510">err</span><span class="op" id="8177513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177520">fset</span>&nbsp;<span class="op" id="8177525">:=</span>&nbsp;<span class="ident" id="8177528">token</span><span class="op" id="8177533">.</span><span class="ident" id="8177534">NewFileSet</span><span class="op" id="8177544">(</span><span class="op" id="8177545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177548">file</span><span class="op" id="8177552">,</span>&nbsp;<span class="ident" id="8177554">err</span>&nbsp;<span class="op" id="8177558">:=</span>&nbsp;<span class="ident" id="8177561">parser</span><span class="op" id="8177567">.</span><span class="ident" id="8177568">ParseFile</span><span class="op" id="8177577">(</span><span class="ident" id="8177578">fset</span><span class="op" id="8177582">,</span>&nbsp;<span class="ident" id="8177584">testfile</span><span class="op" id="8177592">,</span>&nbsp;<span class="ident" id="8177594">src</span><span class="op" id="8177597">,</span>&nbsp;<span class="ident" id="8177599">parser</span><span class="op" id="8177605">.</span><span class="ident" id="8177606">ParseComments</span><span class="op" id="8177619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177622">if</span>&nbsp;<span class="ident" id="8177625">err</span>&nbsp;<span class="op" id="8177629">!=</span>&nbsp;<span class="ident" id="8177632">nil</span>&nbsp;<span class="op" id="8177636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177640">t</span><span class="op" id="8177641">.</span><span class="ident" id="8177642">Fatal</span><span class="op" id="8177647">(</span><span class="ident" id="8177648">err</span><span class="op" id="8177651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177654">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177658">var</span>&nbsp;<span class="ident" id="8177662">buf</span>&nbsp;<span class="ident" id="8177666">bytes</span><span class="op" id="8177671">.</span><span class="ident" id="8177672">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177681">if</span>&nbsp;<span class="ident" id="8177684">err</span>&nbsp;<span class="op" id="8177688">=</span>&nbsp;<span class="ident" id="8177690">Node</span><span class="op" id="8177694">(</span><span class="op" id="8177695">&amp;</span><span class="ident" id="8177696">buf</span><span class="op" id="8177699">,</span>&nbsp;<span class="ident" id="8177701">fset</span><span class="op" id="8177705">,</span>&nbsp;<span class="ident" id="8177707">file</span><span class="op" id="8177711">)</span><span class="op" id="8177712">;</span>&nbsp;<span class="ident" id="8177714">err</span>&nbsp;<span class="op" id="8177718">!=</span>&nbsp;<span class="ident" id="8177721">nil</span>&nbsp;<span class="op" id="8177725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177729">t</span><span class="op" id="8177730">.</span><span class="ident" id="8177731">Fatal</span><span class="op" id="8177736">(</span><span class="string" id="8177737">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8177751">,</span>&nbsp;<span class="ident" id="8177753">err</span><span class="op" id="8177756">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177763">diff</span><span class="op" id="8177767">(</span><span class="ident" id="8177768">t</span><span class="op" id="8177769">,</span>&nbsp;<span class="ident" id="8177771">buf</span><span class="op" id="8177774">.</span><span class="ident" id="8177775">Bytes</span><span class="op" id="8177780">(</span><span class="op" id="8177781">)</span><span class="op" id="8177782">,</span>&nbsp;<span class="ident" id="8177784">src</span><span class="op" id="8177787">)</span><br>
<span class="lineno"></span><span class="op" id="8177789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8177792">func</span>&nbsp;<span class="ident" id="8177797">TestSource</span><span class="op" id="8177807">(</span><span class="ident" id="8177808">t</span>&nbsp;<span class="op" id="8177810">*</span><span class="ident" id="8177811">testing</span><span class="op" id="8177818">.</span><span class="ident" id="8177819">T</span><span class="op" id="8177820">)</span>&nbsp;<span class="op" id="8177822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177825">src</span><span class="op" id="8177828">,</span>&nbsp;<span class="ident" id="8177830">err</span>&nbsp;<span class="op" id="8177834">:=</span>&nbsp;<span class="ident" id="8177837">ioutil</span><span class="op" id="8177843">.</span><span class="ident" id="8177844">ReadFile</span><span class="op" id="8177852">(</span><span class="ident" id="8177853">testfile</span><span class="op" id="8177861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177864">if</span>&nbsp;<span class="ident" id="8177867">err</span>&nbsp;<span class="op" id="8177871">!=</span>&nbsp;<span class="ident" id="8177874">nil</span>&nbsp;<span class="op" id="8177878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177882">t</span><span class="op" id="8177883">.</span><span class="ident" id="8177884">Fatal</span><span class="op" id="8177889">(</span><span class="ident" id="8177890">err</span><span class="op" id="8177893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177896">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177900">res</span><span class="op" id="8177903">,</span>&nbsp;<span class="ident" id="8177905">err</span>&nbsp;<span class="op" id="8177909">:=</span>&nbsp;<span class="ident" id="8177912">Source</span><span class="op" id="8177918">(</span><span class="ident" id="8177919">src</span><span class="op" id="8177922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8177925">if</span>&nbsp;<span class="ident" id="8177928">err</span>&nbsp;<span class="op" id="8177932">!=</span>&nbsp;<span class="ident" id="8177935">nil</span>&nbsp;<span class="op" id="8177939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177943">t</span><span class="op" id="8177944">.</span><span class="ident" id="8177945">Fatal</span><span class="op" id="8177950">(</span><span class="string" id="8177951">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8177967">,</span>&nbsp;<span class="ident" id="8177969">err</span><span class="op" id="8177972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8177975">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8177979">diff</span><span class="op" id="8177983">(</span><span class="ident" id="8177984">t</span><span class="op" id="8177985">,</span>&nbsp;<span class="ident" id="8177987">res</span><span class="op" id="8177990">,</span>&nbsp;<span class="ident" id="8177992">src</span><span class="op" id="8177995">)</span><br>
<span class="lineno"></span><span class="op" id="8177997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8178000">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8178074">var</span>&nbsp;<span class="ident" id="8178078">tests</span>&nbsp;<span class="op" id="8178084">=</span>&nbsp;<span class="op" id="8178086">[</span><span class="op" id="8178087">]</span><span class="builtintype" id="8178088">string</span><span class="op" id="8178094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178097">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178119">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8178139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178142">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8178153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178156">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8178186">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178190">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178210">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8178218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178221">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8178257">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178261">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178305">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8178325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178328">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8178354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178357">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8178393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178396">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8178440">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178443">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8178500">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8178506">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178550">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8178611">,</span>&nbsp;<span class="comment" id="8178613">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178660">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178673">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8178695">,</span>&nbsp;<span class="comment" id="8178697">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8178714">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178737">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8178751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8178754">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8178768">,</span><br>
<span class="lineno"></span><span class="op" id="8178770">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8178773">func</span>&nbsp;<span class="ident" id="8178778">String</span><span class="op" id="8178784">(</span><span class="ident" id="8178785">s</span>&nbsp;<span class="builtintype" id="8178787">string</span><span class="op" id="8178793">)</span>&nbsp;<span class="op" id="8178795">(</span><span class="builtintype" id="8178796">string</span><span class="op" id="8178802">,</span>&nbsp;<span class="builtintype" id="8178804">error</span><span class="op" id="8178809">)</span>&nbsp;<span class="op" id="8178811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8178814">res</span><span class="op" id="8178817">,</span>&nbsp;<span class="ident" id="8178819">err</span>&nbsp;<span class="op" id="8178823">:=</span>&nbsp;<span class="ident" id="8178826">Source</span><span class="op" id="8178832">(</span><span class="op" id="8178833">[</span><span class="op" id="8178834">]</span><span class="builtintype" id="8178835">byte</span><span class="op" id="8178839">(</span><span class="ident" id="8178840">s</span><span class="op" id="8178841">)</span><span class="op" id="8178842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8178845">if</span>&nbsp;<span class="ident" id="8178848">err</span>&nbsp;<span class="op" id="8178852">!=</span>&nbsp;<span class="ident" id="8178855">nil</span>&nbsp;<span class="op" id="8178859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8178863">return</span>&nbsp;<span class="string" id="8178870">&#34;&#34;</span><span class="op" id="8178872">,</span>&nbsp;<span class="ident" id="8178874">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8178879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8178882">return</span>&nbsp;<span class="builtintype" id="8178889">string</span><span class="op" id="8178895">(</span><span class="ident" id="8178896">res</span><span class="op" id="8178899">)</span><span class="op" id="8178900">,</span>&nbsp;<span class="ident" id="8178902">nil</span><br>
<span class="lineno"></span><span class="op" id="8178906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8178909">func</span>&nbsp;<span class="ident" id="8178914">TestPartial</span><span class="op" id="8178925">(</span><span class="ident" id="8178926">t</span>&nbsp;<span class="op" id="8178928">*</span><span class="ident" id="8178929">testing</span><span class="op" id="8178936">.</span><span class="ident" id="8178937">T</span><span class="op" id="8178938">)</span>&nbsp;<span class="op" id="8178940">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8178943">for</span>&nbsp;<span class="ident" id="8178947">_</span><span class="op" id="8178948">,</span>&nbsp;<span class="ident" id="8178950">src</span>&nbsp;<span class="op" id="8178954">:=</span>&nbsp;<span class="keyword" id="8178957">range</span>&nbsp;<span class="ident" id="8178963">tests</span>&nbsp;<span class="op" id="8178969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8178973">if</span>&nbsp;<span class="ident" id="8178976">strings</span><span class="op" id="8178983">.</span><span class="ident" id="8178984">HasPrefix</span><span class="op" id="8178993">(</span><span class="ident" id="8178994">src</span><span class="op" id="8178997">,</span>&nbsp;<span class="string" id="8178999">&#34;ERROR&#34;</span><span class="op" id="8179006">)</span>&nbsp;<span class="op" id="8179008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8179013">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179041">src</span>&nbsp;<span class="op" id="8179045">=</span>&nbsp;<span class="ident" id="8179047">src</span><span class="op" id="8179050">[</span><span class="num" id="8179051">5</span><span class="op" id="8179052">:</span><span class="op" id="8179053">]</span>&nbsp;<span class="comment" id="8179055">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179081">res</span><span class="op" id="8179084">,</span>&nbsp;<span class="ident" id="8179086">err</span>&nbsp;<span class="op" id="8179090">:=</span>&nbsp;<span class="ident" id="8179093">String</span><span class="op" id="8179099">(</span><span class="ident" id="8179100">src</span><span class="op" id="8179103">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179108">if</span>&nbsp;<span class="ident" id="8179111">err</span>&nbsp;<span class="op" id="8179115">==</span>&nbsp;<span class="ident" id="8179118">nil</span>&nbsp;<span class="op" id="8179122">&amp;&amp;</span>&nbsp;<span class="ident" id="8179125">res</span>&nbsp;<span class="op" id="8179129">==</span>&nbsp;<span class="ident" id="8179132">src</span>&nbsp;<span class="op" id="8179136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179142">t</span><span class="op" id="8179143">.</span><span class="ident" id="8179144">Errorf</span><span class="op" id="8179150">(</span><span class="string" id="8179151">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8179203">,</span>&nbsp;<span class="ident" id="8179205">src</span><span class="op" id="8179208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179217">}</span>&nbsp;<span class="keyword" id="8179219">else</span>&nbsp;<span class="op" id="8179224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8179229">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179260">res</span><span class="op" id="8179263">,</span>&nbsp;<span class="ident" id="8179265">err</span>&nbsp;<span class="op" id="8179269">:=</span>&nbsp;<span class="ident" id="8179272">String</span><span class="op" id="8179278">(</span><span class="ident" id="8179279">src</span><span class="op" id="8179282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8179287">if</span>&nbsp;<span class="ident" id="8179290">err</span>&nbsp;<span class="op" id="8179294">!=</span>&nbsp;<span class="ident" id="8179297">nil</span>&nbsp;<span class="op" id="8179301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179307">t</span><span class="op" id="8179308">.</span><span class="ident" id="8179309">Errorf</span><span class="op" id="8179315">(</span><span class="string" id="8179316">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8179345">,</span>&nbsp;<span class="ident" id="8179347">err</span><span class="op" id="8179350">,</span>&nbsp;<span class="ident" id="8179352">src</span><span class="op" id="8179355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179360">}</span>&nbsp;<span class="keyword" id="8179362">else</span>&nbsp;<span class="keyword" id="8179367">if</span>&nbsp;<span class="ident" id="8179370">res</span>&nbsp;<span class="op" id="8179374">!=</span>&nbsp;<span class="ident" id="8179377">src</span>&nbsp;<span class="op" id="8179381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8179387">t</span><span class="op" id="8179388">.</span><span class="ident" id="8179389">Errorf</span><span class="op" id="8179395">(</span><span class="string" id="8179396">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8179443">,</span>&nbsp;<span class="ident" id="8179445">src</span><span class="op" id="8179448">,</span>&nbsp;<span class="ident" id="8179450">res</span><span class="op" id="8179453">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8179465">}</span><br>
<span class="lineno"></span><span class="op" id="8179467">}</span>
</div>
</body>
</html>
