<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6061669">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6061725">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6061779">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6061830">package</span>&nbsp;<span class="ident" id="6061838">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6061843">import</span>&nbsp;<span class="op" id="6061850">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061853">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061862">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061874">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061884">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061891">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061902">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6061913">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6061923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6061926">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6062010">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6062074">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6062143">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6062163">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6062226">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6062250">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6062316">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6062381">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6062447">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6062461">//</span><br>
<span class="lineno"></span><span class="comment" id="6062464">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6062530">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6062599">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6062665">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6062681">//</span><br>
<span class="lineno"></span><span class="comment" id="6062684">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6062756">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6062832">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6062896">//</span><br>
<span class="lineno"></span><span class="comment" id="6062899">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6062966">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6063039">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6063106">//</span><br>
<span class="lineno"></span><span class="comment" id="6063109">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6063174">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6063232">//</span><br>
<span class="lineno">45</span><span class="comment" id="6063235">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6063297">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6063363">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6063434">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6063460">//</span><br>
<span class="lineno">50</span><span class="comment" id="6063463">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6063527">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6063598">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6063671">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6063732">//</span><br>
<span class="lineno">55</span><span class="comment" id="6063735">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6063799">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6063871">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6063928">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6063996">//</span><br>
<span class="lineno">60</span><span class="comment" id="6063999">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6064068">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6064136">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6064203">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6064246">//</span><br>
<span class="lineno">65</span><span class="comment" id="6064249">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6064317">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6064384">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6064458">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6064530">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6064599">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6064644">//</span><br>
<span class="lineno"></span><span class="comment" id="6064647">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6064715">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6064780">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6064847">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6064893">//</span><br>
<span class="lineno"></span><span class="comment" id="6064896">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6064966">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6065042">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6065093">//</span><br>
<span class="lineno"></span><span class="comment" id="6065096">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6065169">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6065240">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6065301">//</span><br>
<span class="lineno">85</span><span class="comment" id="6065304">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6065372">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6065417">//</span><br>
<span class="lineno"></span><span class="comment" id="6065420">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6065483">//</span><br>
<span class="lineno">90</span><span class="comment" id="6065486">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6065555">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6065622">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6065664">//</span><br>
<span class="lineno"></span><span class="comment" id="6065667">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6065736">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6065773">//</span><br>
<span class="lineno"></span><span class="comment" id="6065776">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6065847">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6065912">//</span><br>
<span class="lineno">100</span><span class="comment" id="6065915">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6065980">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6066042">//</span><br>
<span class="lineno"></span><span class="comment" id="6066045">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6066114">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6066176">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6066244">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6066257">//</span><br>
<span class="lineno"></span><span class="comment" id="6066260">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6066325">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6066342">//</span><br>
<span class="lineno"></span><span class="comment" id="6066345">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6066414">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6066490">//</span><br>
<span class="lineno"></span><span class="keyword" id="6066493">func</span>&nbsp;<span class="ident" id="6066498">Unmarshal</span><span class="op" id="6066507">(</span><span class="ident" id="6066508">data</span>&nbsp;<span class="op" id="6066513">[</span><span class="op" id="6066514">]</span><span class="builtintype" id="6066515">byte</span><span class="op" id="6066519">,</span>&nbsp;<span class="ident" id="6066521">v</span>&nbsp;<span class="keyword" id="6066523">interface</span><span class="op" id="6066532">{</span><span class="op" id="6066533">}</span><span class="op" id="6066534">)</span>&nbsp;<span class="builtintype" id="6066536">error</span>&nbsp;<span class="op" id="6066542">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066545">return</span>&nbsp;<span class="ident" id="6066552">NewDecoder</span><span class="op" id="6066562">(</span><span class="ident" id="6066563">bytes</span><span class="op" id="6066568">.</span><span class="ident" id="6066569">NewReader</span><span class="op" id="6066578">(</span><span class="ident" id="6066579">data</span><span class="op" id="6066583">)</span><span class="op" id="6066584">)</span><span class="op" id="6066585">.</span><span class="ident" id="6066586">Decode</span><span class="op" id="6066592">(</span><span class="ident" id="6066593">v</span><span class="op" id="6066594">)</span><br>
<span class="lineno"></span><span class="op" id="6066596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066599">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6066663">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6066700">func</span>&nbsp;<span class="op" id="6066705">(</span><span class="ident" id="6066706">d</span>&nbsp;<span class="op" id="6066708">*</span><span class="ident" id="6066709">Decoder</span><span class="op" id="6066716">)</span>&nbsp;<span class="ident" id="6066718">Decode</span><span class="op" id="6066724">(</span><span class="ident" id="6066725">v</span>&nbsp;<span class="keyword" id="6066727">interface</span><span class="op" id="6066736">{</span><span class="op" id="6066737">}</span><span class="op" id="6066738">)</span>&nbsp;<span class="builtintype" id="6066740">error</span>&nbsp;<span class="op" id="6066746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066749">return</span>&nbsp;<span class="ident" id="6066756">d</span><span class="op" id="6066757">.</span><span class="ident" id="6066758">DecodeElement</span><span class="op" id="6066771">(</span><span class="ident" id="6066772">v</span><span class="op" id="6066773">,</span>&nbsp;<span class="ident" id="6066775">nil</span><span class="op" id="6066778">)</span><br>
<span class="lineno"></span><span class="op" id="6066780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066783">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6066846">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6066902">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6066965">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6067024">func</span>&nbsp;<span class="op" id="6067029">(</span><span class="ident" id="6067030">d</span>&nbsp;<span class="op" id="6067032">*</span><span class="ident" id="6067033">Decoder</span><span class="op" id="6067040">)</span>&nbsp;<span class="ident" id="6067042">DecodeElement</span><span class="op" id="6067055">(</span><span class="ident" id="6067056">v</span>&nbsp;<span class="keyword" id="6067058">interface</span><span class="op" id="6067067">{</span><span class="op" id="6067068">}</span><span class="op" id="6067069">,</span>&nbsp;<span class="ident" id="6067071">start</span>&nbsp;<span class="op" id="6067077">*</span><span class="ident" id="6067078">StartElement</span><span class="op" id="6067090">)</span>&nbsp;<span class="builtintype" id="6067092">error</span>&nbsp;<span class="op" id="6067098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067101">val</span>&nbsp;<span class="op" id="6067105">:=</span>&nbsp;<span class="ident" id="6067108">reflect</span><span class="op" id="6067115">.</span><span class="ident" id="6067116">ValueOf</span><span class="op" id="6067123">(</span><span class="ident" id="6067124">v</span><span class="op" id="6067125">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067128">if</span>&nbsp;<span class="ident" id="6067131">val</span><span class="op" id="6067134">.</span><span class="ident" id="6067135">Kind</span><span class="op" id="6067139">(</span><span class="op" id="6067140">)</span>&nbsp;<span class="op" id="6067142">!=</span>&nbsp;<span class="ident" id="6067145">reflect</span><span class="op" id="6067152">.</span><span class="ident" id="6067153">Ptr</span>&nbsp;<span class="op" id="6067157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067161">return</span>&nbsp;<span class="ident" id="6067168">errors</span><span class="op" id="6067174">.</span><span class="ident" id="6067175">New</span><span class="op" id="6067178">(</span><span class="string" id="6067179">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6067212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067218">return</span>&nbsp;<span class="ident" id="6067225">d</span><span class="op" id="6067226">.</span><span class="ident" id="6067227">unmarshal</span><span class="op" id="6067236">(</span><span class="ident" id="6067237">val</span><span class="op" id="6067240">.</span><span class="ident" id="6067241">Elem</span><span class="op" id="6067245">(</span><span class="op" id="6067246">)</span><span class="op" id="6067247">,</span>&nbsp;<span class="ident" id="6067249">start</span><span class="op" id="6067254">)</span><br>
<span class="lineno"></span><span class="op" id="6067256">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6067259">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6067330">type</span>&nbsp;<span class="ident" id="6067335">UnmarshalError</span>&nbsp;<span class="builtintype" id="6067350">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067358">func</span>&nbsp;<span class="op" id="6067363">(</span><span class="ident" id="6067364">e</span>&nbsp;<span class="ident" id="6067366">UnmarshalError</span><span class="op" id="6067380">)</span>&nbsp;<span class="ident" id="6067382">Error</span><span class="op" id="6067387">(</span><span class="op" id="6067388">)</span>&nbsp;<span class="builtintype" id="6067390">string</span>&nbsp;<span class="op" id="6067397">{</span>&nbsp;<span class="keyword" id="6067399">return</span>&nbsp;<span class="builtintype" id="6067406">string</span><span class="op" id="6067412">(</span><span class="ident" id="6067413">e</span><span class="op" id="6067414">)</span>&nbsp;<span class="op" id="6067416">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6067419">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6067493">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6067538">//</span><br>
<span class="lineno"></span><span class="comment" id="6067541">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6067586">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6067629">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6067694">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6067717">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6067771">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6067830">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6067890">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6067948">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6067981">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6068041">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6068076">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6068116">type</span>&nbsp;<span class="ident" id="6068121">Unmarshaler</span>&nbsp;<span class="keyword" id="6068133">interface</span>&nbsp;<span class="op" id="6068143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068146">UnmarshalXML</span><span class="op" id="6068158">(</span><span class="ident" id="6068159">d</span>&nbsp;<span class="op" id="6068161">*</span><span class="ident" id="6068162">Decoder</span><span class="op" id="6068169">,</span>&nbsp;<span class="ident" id="6068171">start</span>&nbsp;<span class="ident" id="6068177">StartElement</span><span class="op" id="6068189">)</span>&nbsp;<span class="builtintype" id="6068191">error</span><br>
<span class="lineno"></span><span class="op" id="6068197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6068200">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6068278">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6068325">//</span><br>
<span class="lineno"></span><span class="comment" id="6068328">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6068380">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6068445">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6068468">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6068528">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6068563">type</span>&nbsp;<span class="ident" id="6068568">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6068584">interface</span>&nbsp;<span class="op" id="6068594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068597">UnmarshalXMLAttr</span><span class="op" id="6068613">(</span><span class="ident" id="6068614">attr</span>&nbsp;<span class="ident" id="6068619">Attr</span><span class="op" id="6068623">)</span>&nbsp;<span class="builtintype" id="6068625">error</span><br>
<span class="lineno">170</span><span class="op" id="6068631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6068634">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6068722">func</span>&nbsp;<span class="ident" id="6068727">receiverType</span><span class="op" id="6068739">(</span><span class="ident" id="6068740">val</span>&nbsp;<span class="keyword" id="6068744">interface</span><span class="op" id="6068753">{</span><span class="op" id="6068754">}</span><span class="op" id="6068755">)</span>&nbsp;<span class="builtintype" id="6068757">string</span>&nbsp;<span class="op" id="6068764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068767">t</span>&nbsp;<span class="op" id="6068769">:=</span>&nbsp;<span class="ident" id="6068772">reflect</span><span class="op" id="6068779">.</span><span class="ident" id="6068780">TypeOf</span><span class="op" id="6068786">(</span><span class="ident" id="6068787">val</span><span class="op" id="6068790">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068793">if</span>&nbsp;<span class="ident" id="6068796">t</span><span class="op" id="6068797">.</span><span class="ident" id="6068798">Name</span><span class="op" id="6068802">(</span><span class="op" id="6068803">)</span>&nbsp;<span class="op" id="6068805">!=</span>&nbsp;<span class="string" id="6068808">&#34;&#34;</span>&nbsp;<span class="op" id="6068811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068815">return</span>&nbsp;<span class="ident" id="6068822">t</span><span class="op" id="6068823">.</span><span class="ident" id="6068824">String</span><span class="op" id="6068830">(</span><span class="op" id="6068831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068837">return</span>&nbsp;<span class="string" id="6068844">&#34;(&#34;</span>&nbsp;<span class="op" id="6068848">+</span>&nbsp;<span class="ident" id="6068850">t</span><span class="op" id="6068851">.</span><span class="ident" id="6068852">String</span><span class="op" id="6068858">(</span><span class="op" id="6068859">)</span>&nbsp;<span class="op" id="6068861">+</span>&nbsp;<span class="string" id="6068863">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6068867">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6068870">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6068934">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6068978">func</span>&nbsp;<span class="op" id="6068983">(</span><span class="ident" id="6068984">p</span>&nbsp;<span class="op" id="6068986">*</span><span class="ident" id="6068987">Decoder</span><span class="op" id="6068994">)</span>&nbsp;<span class="ident" id="6068996">unmarshalInterface</span><span class="op" id="6069014">(</span><span class="ident" id="6069015">val</span>&nbsp;<span class="ident" id="6069019">Unmarshaler</span><span class="op" id="6069030">,</span>&nbsp;<span class="ident" id="6069032">start</span>&nbsp;<span class="op" id="6069038">*</span><span class="ident" id="6069039">StartElement</span><span class="op" id="6069051">)</span>&nbsp;<span class="builtintype" id="6069053">error</span>&nbsp;<span class="op" id="6069059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6069062">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069131">p</span><span class="op" id="6069132">.</span><span class="ident" id="6069133">pushEOF</span><span class="op" id="6069140">(</span><span class="op" id="6069141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069145">p</span><span class="op" id="6069146">.</span><span class="ident" id="6069147">unmarshalDepth</span><span class="op" id="6069161">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069165">err</span>&nbsp;<span class="op" id="6069169">:=</span>&nbsp;<span class="ident" id="6069172">val</span><span class="op" id="6069175">.</span><span class="ident" id="6069176">UnmarshalXML</span><span class="op" id="6069188">(</span><span class="ident" id="6069189">p</span><span class="op" id="6069190">,</span>&nbsp;<span class="op" id="6069192">*</span><span class="ident" id="6069193">start</span><span class="op" id="6069198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069201">p</span><span class="op" id="6069202">.</span><span class="ident" id="6069203">unmarshalDepth</span><span class="op" id="6069217">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069221">if</span>&nbsp;<span class="ident" id="6069224">err</span>&nbsp;<span class="op" id="6069228">!=</span>&nbsp;<span class="ident" id="6069231">nil</span>&nbsp;<span class="op" id="6069235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069239">p</span><span class="op" id="6069240">.</span><span class="ident" id="6069241">popEOF</span><span class="op" id="6069247">(</span><span class="op" id="6069248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069252">return</span>&nbsp;<span class="ident" id="6069259">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069268">if</span>&nbsp;<span class="op" id="6069271">!</span><span class="ident" id="6069272">p</span><span class="op" id="6069273">.</span><span class="ident" id="6069274">popEOF</span><span class="op" id="6069280">(</span><span class="op" id="6069281">)</span>&nbsp;<span class="op" id="6069283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069287">return</span>&nbsp;<span class="ident" id="6069294">fmt</span><span class="op" id="6069297">.</span><span class="ident" id="6069298">Errorf</span><span class="op" id="6069304">(</span><span class="string" id="6069305">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6069363">,</span>&nbsp;<span class="ident" id="6069365">receiverType</span><span class="op" id="6069377">(</span><span class="ident" id="6069378">val</span><span class="op" id="6069381">)</span><span class="op" id="6069382">,</span>&nbsp;<span class="ident" id="6069384">start</span><span class="op" id="6069389">.</span><span class="ident" id="6069390">Name</span><span class="op" id="6069394">.</span><span class="ident" id="6069395">Local</span><span class="op" id="6069400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069407">return</span>&nbsp;<span class="ident" id="6069414">nil</span><br>
<span class="lineno">200</span><span class="op" id="6069418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069421">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6069489">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6069553">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6069591">func</span>&nbsp;<span class="op" id="6069596">(</span><span class="ident" id="6069597">p</span>&nbsp;<span class="op" id="6069599">*</span><span class="ident" id="6069600">Decoder</span><span class="op" id="6069607">)</span>&nbsp;<span class="ident" id="6069609">unmarshalTextInterface</span><span class="op" id="6069631">(</span><span class="ident" id="6069632">val</span>&nbsp;<span class="ident" id="6069636">encoding</span><span class="op" id="6069644">.</span><span class="ident" id="6069645">TextUnmarshaler</span><span class="op" id="6069660">,</span>&nbsp;<span class="ident" id="6069662">start</span>&nbsp;<span class="op" id="6069668">*</span><span class="ident" id="6069669">StartElement</span><span class="op" id="6069681">)</span>&nbsp;<span class="builtintype" id="6069683">error</span>&nbsp;<span class="op" id="6069689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069692">var</span>&nbsp;<span class="ident" id="6069696">buf</span>&nbsp;<span class="op" id="6069700">[</span><span class="op" id="6069701">]</span><span class="builtintype" id="6069702">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069708">depth</span>&nbsp;<span class="op" id="6069714">:=</span>&nbsp;<span class="num" id="6069717">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069720">for</span>&nbsp;<span class="ident" id="6069724">depth</span>&nbsp;<span class="op" id="6069730">&gt;</span>&nbsp;<span class="num" id="6069732">0</span>&nbsp;<span class="op" id="6069734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069738">t</span><span class="op" id="6069739">,</span>&nbsp;<span class="ident" id="6069741">err</span>&nbsp;<span class="op" id="6069745">:=</span>&nbsp;<span class="ident" id="6069748">p</span><span class="op" id="6069749">.</span><span class="ident" id="6069750">Token</span><span class="op" id="6069755">(</span><span class="op" id="6069756">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069760">if</span>&nbsp;<span class="ident" id="6069763">err</span>&nbsp;<span class="op" id="6069767">!=</span>&nbsp;<span class="ident" id="6069770">nil</span>&nbsp;<span class="op" id="6069774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069779">return</span>&nbsp;<span class="ident" id="6069786">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069796">switch</span>&nbsp;<span class="ident" id="6069803">t</span>&nbsp;<span class="op" id="6069805">:=</span>&nbsp;<span class="ident" id="6069808">t</span><span class="op" id="6069809">.</span><span class="op" id="6069810">(</span><span class="keyword" id="6069811">type</span><span class="op" id="6069815">)</span>&nbsp;<span class="op" id="6069817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069821">case</span>&nbsp;<span class="ident" id="6069826">CharData</span><span class="op" id="6069834">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069839">if</span>&nbsp;<span class="ident" id="6069842">depth</span>&nbsp;<span class="op" id="6069848">==</span>&nbsp;<span class="num" id="6069851">1</span>&nbsp;<span class="op" id="6069853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069859">buf</span>&nbsp;<span class="op" id="6069863">=</span>&nbsp;<span class="builtinfunc" id="6069865">append</span><span class="op" id="6069871">(</span><span class="ident" id="6069872">buf</span><span class="op" id="6069875">,</span>&nbsp;<span class="ident" id="6069877">t</span><span class="op" id="6069878">...</span><span class="op" id="6069881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069890">case</span>&nbsp;<span class="ident" id="6069895">StartElement</span><span class="op" id="6069907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069912">depth</span><span class="op" id="6069917">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069922">case</span>&nbsp;<span class="ident" id="6069927">EndElement</span><span class="op" id="6069937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069942">depth</span><span class="op" id="6069947">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069958">return</span>&nbsp;<span class="ident" id="6069965">val</span><span class="op" id="6069968">.</span><span class="ident" id="6069969">UnmarshalText</span><span class="op" id="6069982">(</span><span class="ident" id="6069983">buf</span><span class="op" id="6069986">)</span><br>
<span class="lineno">225</span><span class="op" id="6069988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069991">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6070052">func</span>&nbsp;<span class="op" id="6070057">(</span><span class="ident" id="6070058">p</span>&nbsp;<span class="op" id="6070060">*</span><span class="ident" id="6070061">Decoder</span><span class="op" id="6070068">)</span>&nbsp;<span class="ident" id="6070070">unmarshalAttr</span><span class="op" id="6070083">(</span><span class="ident" id="6070084">val</span>&nbsp;<span class="ident" id="6070088">reflect</span><span class="op" id="6070095">.</span><span class="ident" id="6070096">Value</span><span class="op" id="6070101">,</span>&nbsp;<span class="ident" id="6070103">attr</span>&nbsp;<span class="ident" id="6070108">Attr</span><span class="op" id="6070112">)</span>&nbsp;<span class="builtintype" id="6070114">error</span>&nbsp;<span class="op" id="6070120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070123">if</span>&nbsp;<span class="ident" id="6070126">val</span><span class="op" id="6070129">.</span><span class="ident" id="6070130">Kind</span><span class="op" id="6070134">(</span><span class="op" id="6070135">)</span>&nbsp;<span class="op" id="6070137">==</span>&nbsp;<span class="ident" id="6070140">reflect</span><span class="op" id="6070147">.</span><span class="ident" id="6070148">Ptr</span>&nbsp;<span class="op" id="6070152">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070156">if</span>&nbsp;<span class="ident" id="6070159">val</span><span class="op" id="6070162">.</span><span class="ident" id="6070163">IsNil</span><span class="op" id="6070168">(</span><span class="op" id="6070169">)</span>&nbsp;<span class="op" id="6070171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6070176">val</span><span class="op" id="6070179">.</span><span class="ident" id="6070180">Set</span><span class="op" id="6070183">(</span><span class="ident" id="6070184">reflect</span><span class="op" id="6070191">.</span><span class="ident" id="6070192">New</span><span class="op" id="6070195">(</span><span class="ident" id="6070196">val</span><span class="op" id="6070199">.</span><span class="ident" id="6070200">Type</span><span class="op" id="6070204">(</span><span class="op" id="6070205">)</span><span class="op" id="6070206">.</span><span class="ident" id="6070207">Elem</span><span class="op" id="6070211">(</span><span class="op" id="6070212">)</span><span class="op" id="6070213">)</span><span class="op" id="6070214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6070222">val</span>&nbsp;<span class="op" id="6070226">=</span>&nbsp;<span class="ident" id="6070228">val</span><span class="op" id="6070231">.</span><span class="ident" id="6070232">Elem</span><span class="op" id="6070236">(</span><span class="op" id="6070237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070240">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070244">if</span>&nbsp;<span class="ident" id="6070247">val</span><span class="op" id="6070250">.</span><span class="ident" id="6070251">CanInterface</span><span class="op" id="6070263">(</span><span class="op" id="6070264">)</span>&nbsp;<span class="op" id="6070266">&amp;&amp;</span>&nbsp;<span class="ident" id="6070269">val</span><span class="op" id="6070272">.</span><span class="ident" id="6070273">Type</span><span class="op" id="6070277">(</span><span class="op" id="6070278">)</span><span class="op" id="6070279">.</span><span class="ident" id="6070280">Implements</span><span class="op" id="6070290">(</span><span class="ident" id="6070291">unmarshalerAttrType</span><span class="op" id="6070310">)</span>&nbsp;<span class="op" id="6070312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070316">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070373">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070437">return</span>&nbsp;<span class="ident" id="6070444">val</span><span class="op" id="6070447">.</span><span class="ident" id="6070448">Interface</span><span class="op" id="6070457">(</span><span class="op" id="6070458">)</span><span class="op" id="6070459">.</span><span class="op" id="6070460">(</span><span class="ident" id="6070461">UnmarshalerAttr</span><span class="op" id="6070476">)</span><span class="op" id="6070477">.</span><span class="ident" id="6070478">UnmarshalXMLAttr</span><span class="op" id="6070494">(</span><span class="ident" id="6070495">attr</span><span class="op" id="6070499">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070505">if</span>&nbsp;<span class="ident" id="6070508">val</span><span class="op" id="6070511">.</span><span class="ident" id="6070512">CanAddr</span><span class="op" id="6070519">(</span><span class="op" id="6070520">)</span>&nbsp;<span class="op" id="6070522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6070526">pv</span>&nbsp;<span class="op" id="6070529">:=</span>&nbsp;<span class="ident" id="6070532">val</span><span class="op" id="6070535">.</span><span class="ident" id="6070536">Addr</span><span class="op" id="6070540">(</span><span class="op" id="6070541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070545">if</span>&nbsp;<span class="ident" id="6070548">pv</span><span class="op" id="6070550">.</span><span class="ident" id="6070551">CanInterface</span><span class="op" id="6070563">(</span><span class="op" id="6070564">)</span>&nbsp;<span class="op" id="6070566">&amp;&amp;</span>&nbsp;<span class="ident" id="6070569">pv</span><span class="op" id="6070571">.</span><span class="ident" id="6070572">Type</span><span class="op" id="6070576">(</span><span class="op" id="6070577">)</span><span class="op" id="6070578">.</span><span class="ident" id="6070579">Implements</span><span class="op" id="6070589">(</span><span class="ident" id="6070590">unmarshalerAttrType</span><span class="op" id="6070609">)</span>&nbsp;<span class="op" id="6070611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070616">return</span>&nbsp;<span class="ident" id="6070623">pv</span><span class="op" id="6070625">.</span><span class="ident" id="6070626">Interface</span><span class="op" id="6070635">(</span><span class="op" id="6070636">)</span><span class="op" id="6070637">.</span><span class="op" id="6070638">(</span><span class="ident" id="6070639">UnmarshalerAttr</span><span class="op" id="6070654">)</span><span class="op" id="6070655">.</span><span class="ident" id="6070656">UnmarshalXMLAttr</span><span class="op" id="6070672">(</span><span class="ident" id="6070673">attr</span><span class="op" id="6070677">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070688">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070746">if</span>&nbsp;<span class="ident" id="6070749">val</span><span class="op" id="6070752">.</span><span class="ident" id="6070753">CanInterface</span><span class="op" id="6070765">(</span><span class="op" id="6070766">)</span>&nbsp;<span class="op" id="6070768">&amp;&amp;</span>&nbsp;<span class="ident" id="6070771">val</span><span class="op" id="6070774">.</span><span class="ident" id="6070775">Type</span><span class="op" id="6070779">(</span><span class="op" id="6070780">)</span><span class="op" id="6070781">.</span><span class="ident" id="6070782">Implements</span><span class="op" id="6070792">(</span><span class="ident" id="6070793">textUnmarshalerType</span><span class="op" id="6070812">)</span>&nbsp;<span class="op" id="6070814">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070818">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070875">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070939">return</span>&nbsp;<span class="ident" id="6070946">val</span><span class="op" id="6070949">.</span><span class="ident" id="6070950">Interface</span><span class="op" id="6070959">(</span><span class="op" id="6070960">)</span><span class="op" id="6070961">.</span><span class="op" id="6070962">(</span><span class="ident" id="6070963">encoding</span><span class="op" id="6070971">.</span><span class="ident" id="6070972">TextUnmarshaler</span><span class="op" id="6070987">)</span><span class="op" id="6070988">.</span><span class="ident" id="6070989">UnmarshalText</span><span class="op" id="6071002">(</span><span class="op" id="6071003">[</span><span class="op" id="6071004">]</span><span class="builtintype" id="6071005">byte</span><span class="op" id="6071009">(</span><span class="ident" id="6071010">attr</span><span class="op" id="6071014">.</span><span class="ident" id="6071015">Value</span><span class="op" id="6071020">)</span><span class="op" id="6071021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071027">if</span>&nbsp;<span class="ident" id="6071030">val</span><span class="op" id="6071033">.</span><span class="ident" id="6071034">CanAddr</span><span class="op" id="6071041">(</span><span class="op" id="6071042">)</span>&nbsp;<span class="op" id="6071044">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071048">pv</span>&nbsp;<span class="op" id="6071051">:=</span>&nbsp;<span class="ident" id="6071054">val</span><span class="op" id="6071057">.</span><span class="ident" id="6071058">Addr</span><span class="op" id="6071062">(</span><span class="op" id="6071063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071067">if</span>&nbsp;<span class="ident" id="6071070">pv</span><span class="op" id="6071072">.</span><span class="ident" id="6071073">CanInterface</span><span class="op" id="6071085">(</span><span class="op" id="6071086">)</span>&nbsp;<span class="op" id="6071088">&amp;&amp;</span>&nbsp;<span class="ident" id="6071091">pv</span><span class="op" id="6071093">.</span><span class="ident" id="6071094">Type</span><span class="op" id="6071098">(</span><span class="op" id="6071099">)</span><span class="op" id="6071100">.</span><span class="ident" id="6071101">Implements</span><span class="op" id="6071111">(</span><span class="ident" id="6071112">textUnmarshalerType</span><span class="op" id="6071131">)</span>&nbsp;<span class="op" id="6071133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071138">return</span>&nbsp;<span class="ident" id="6071145">pv</span><span class="op" id="6071147">.</span><span class="ident" id="6071148">Interface</span><span class="op" id="6071157">(</span><span class="op" id="6071158">)</span><span class="op" id="6071159">.</span><span class="op" id="6071160">(</span><span class="ident" id="6071161">encoding</span><span class="op" id="6071169">.</span><span class="ident" id="6071170">TextUnmarshaler</span><span class="op" id="6071185">)</span><span class="op" id="6071186">.</span><span class="ident" id="6071187">UnmarshalText</span><span class="op" id="6071200">(</span><span class="op" id="6071201">[</span><span class="op" id="6071202">]</span><span class="builtintype" id="6071203">byte</span><span class="op" id="6071207">(</span><span class="ident" id="6071208">attr</span><span class="op" id="6071212">.</span><span class="ident" id="6071213">Value</span><span class="op" id="6071218">)</span><span class="op" id="6071219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071226">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071230">copyValue</span><span class="op" id="6071239">(</span><span class="ident" id="6071240">val</span><span class="op" id="6071243">,</span>&nbsp;<span class="op" id="6071245">[</span><span class="op" id="6071246">]</span><span class="builtintype" id="6071247">byte</span><span class="op" id="6071251">(</span><span class="ident" id="6071252">attr</span><span class="op" id="6071256">.</span><span class="ident" id="6071257">Value</span><span class="op" id="6071262">)</span><span class="op" id="6071263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071266">return</span>&nbsp;<span class="ident" id="6071273">nil</span><br>
<span class="lineno"></span><span class="op" id="6071277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6071280">var</span>&nbsp;<span class="op" id="6071284">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071287">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6071307">=</span>&nbsp;<span class="ident" id="6071309">reflect</span><span class="op" id="6071316">.</span><span class="ident" id="6071317">TypeOf</span><span class="op" id="6071323">(</span><span class="op" id="6071324">(</span><span class="op" id="6071325">*</span><span class="ident" id="6071326">Unmarshaler</span><span class="op" id="6071337">)</span><span class="op" id="6071338">(</span><span class="ident" id="6071339">nil</span><span class="op" id="6071342">)</span><span class="op" id="6071343">)</span><span class="op" id="6071344">.</span><span class="ident" id="6071345">Elem</span><span class="op" id="6071349">(</span><span class="op" id="6071350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071353">unmarshalerAttrType</span>&nbsp;<span class="op" id="6071373">=</span>&nbsp;<span class="ident" id="6071375">reflect</span><span class="op" id="6071382">.</span><span class="ident" id="6071383">TypeOf</span><span class="op" id="6071389">(</span><span class="op" id="6071390">(</span><span class="op" id="6071391">*</span><span class="ident" id="6071392">UnmarshalerAttr</span><span class="op" id="6071407">)</span><span class="op" id="6071408">(</span><span class="ident" id="6071409">nil</span><span class="op" id="6071412">)</span><span class="op" id="6071413">)</span><span class="op" id="6071414">.</span><span class="ident" id="6071415">Elem</span><span class="op" id="6071419">(</span><span class="op" id="6071420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071423">textUnmarshalerType</span>&nbsp;<span class="op" id="6071443">=</span>&nbsp;<span class="ident" id="6071445">reflect</span><span class="op" id="6071452">.</span><span class="ident" id="6071453">TypeOf</span><span class="op" id="6071459">(</span><span class="op" id="6071460">(</span><span class="op" id="6071461">*</span><span class="ident" id="6071462">encoding</span><span class="op" id="6071470">.</span><span class="ident" id="6071471">TextUnmarshaler</span><span class="op" id="6071486">)</span><span class="op" id="6071487">(</span><span class="ident" id="6071488">nil</span><span class="op" id="6071491">)</span><span class="op" id="6071492">)</span><span class="op" id="6071493">.</span><span class="ident" id="6071494">Elem</span><span class="op" id="6071498">(</span><span class="op" id="6071499">)</span><br>
<span class="lineno"></span><span class="op" id="6071501">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6071504">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6071548">func</span>&nbsp;<span class="op" id="6071553">(</span><span class="ident" id="6071554">p</span>&nbsp;<span class="op" id="6071556">*</span><span class="ident" id="6071557">Decoder</span><span class="op" id="6071564">)</span>&nbsp;<span class="ident" id="6071566">unmarshal</span><span class="op" id="6071575">(</span><span class="ident" id="6071576">val</span>&nbsp;<span class="ident" id="6071580">reflect</span><span class="op" id="6071587">.</span><span class="ident" id="6071588">Value</span><span class="op" id="6071593">,</span>&nbsp;<span class="ident" id="6071595">start</span>&nbsp;<span class="op" id="6071601">*</span><span class="ident" id="6071602">StartElement</span><span class="op" id="6071614">)</span>&nbsp;<span class="builtintype" id="6071616">error</span>&nbsp;<span class="op" id="6071622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071625">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071663">if</span>&nbsp;<span class="ident" id="6071666">start</span>&nbsp;<span class="op" id="6071672">==</span>&nbsp;<span class="ident" id="6071675">nil</span>&nbsp;<span class="op" id="6071679">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071683">for</span>&nbsp;<span class="op" id="6071687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071692">tok</span><span class="op" id="6071695">,</span>&nbsp;<span class="ident" id="6071697">err</span>&nbsp;<span class="op" id="6071701">:=</span>&nbsp;<span class="ident" id="6071704">p</span><span class="op" id="6071705">.</span><span class="ident" id="6071706">Token</span><span class="op" id="6071711">(</span><span class="op" id="6071712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071717">if</span>&nbsp;<span class="ident" id="6071720">err</span>&nbsp;<span class="op" id="6071724">!=</span>&nbsp;<span class="ident" id="6071727">nil</span>&nbsp;<span class="op" id="6071731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071737">return</span>&nbsp;<span class="ident" id="6071744">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071751">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071756">if</span>&nbsp;<span class="ident" id="6071759">t</span><span class="op" id="6071760">,</span>&nbsp;<span class="ident" id="6071762">ok</span>&nbsp;<span class="op" id="6071765">:=</span>&nbsp;<span class="ident" id="6071768">tok</span><span class="op" id="6071771">.</span><span class="op" id="6071772">(</span><span class="ident" id="6071773">StartElement</span><span class="op" id="6071785">)</span><span class="op" id="6071786">;</span>&nbsp;<span class="ident" id="6071788">ok</span>&nbsp;<span class="op" id="6071791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071797">start</span>&nbsp;<span class="op" id="6071803">=</span>&nbsp;<span class="op" id="6071805">&amp;</span><span class="ident" id="6071806">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071812">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071825">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071832">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071894">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071920">if</span>&nbsp;<span class="ident" id="6071923">val</span><span class="op" id="6071926">.</span><span class="ident" id="6071927">Kind</span><span class="op" id="6071931">(</span><span class="op" id="6071932">)</span>&nbsp;<span class="op" id="6071934">==</span>&nbsp;<span class="ident" id="6071937">reflect</span><span class="op" id="6071944">.</span><span class="ident" id="6071945">Interface</span>&nbsp;<span class="op" id="6071955">&amp;&amp;</span>&nbsp;<span class="op" id="6071958">!</span><span class="ident" id="6071959">val</span><span class="op" id="6071962">.</span><span class="ident" id="6071963">IsNil</span><span class="op" id="6071968">(</span><span class="op" id="6071969">)</span>&nbsp;<span class="op" id="6071971">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071975">e</span>&nbsp;<span class="op" id="6071977">:=</span>&nbsp;<span class="ident" id="6071980">val</span><span class="op" id="6071983">.</span><span class="ident" id="6071984">Elem</span><span class="op" id="6071988">(</span><span class="op" id="6071989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071993">if</span>&nbsp;<span class="ident" id="6071996">e</span><span class="op" id="6071997">.</span><span class="ident" id="6071998">Kind</span><span class="op" id="6072002">(</span><span class="op" id="6072003">)</span>&nbsp;<span class="op" id="6072005">==</span>&nbsp;<span class="ident" id="6072008">reflect</span><span class="op" id="6072015">.</span><span class="ident" id="6072016">Ptr</span>&nbsp;<span class="op" id="6072020">&amp;&amp;</span>&nbsp;<span class="op" id="6072023">!</span><span class="ident" id="6072024">e</span><span class="op" id="6072025">.</span><span class="ident" id="6072026">IsNil</span><span class="op" id="6072031">(</span><span class="op" id="6072032">)</span>&nbsp;<span class="op" id="6072034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072039">val</span>&nbsp;<span class="op" id="6072043">=</span>&nbsp;<span class="ident" id="6072045">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072052">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072056">if</span>&nbsp;<span class="ident" id="6072059">val</span><span class="op" id="6072062">.</span><span class="ident" id="6072063">Kind</span><span class="op" id="6072067">(</span><span class="op" id="6072068">)</span>&nbsp;<span class="op" id="6072070">==</span>&nbsp;<span class="ident" id="6072073">reflect</span><span class="op" id="6072080">.</span><span class="ident" id="6072081">Ptr</span>&nbsp;<span class="op" id="6072085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072089">if</span>&nbsp;<span class="ident" id="6072092">val</span><span class="op" id="6072095">.</span><span class="ident" id="6072096">IsNil</span><span class="op" id="6072101">(</span><span class="op" id="6072102">)</span>&nbsp;<span class="op" id="6072104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072109">val</span><span class="op" id="6072112">.</span><span class="ident" id="6072113">Set</span><span class="op" id="6072116">(</span><span class="ident" id="6072117">reflect</span><span class="op" id="6072124">.</span><span class="ident" id="6072125">New</span><span class="op" id="6072128">(</span><span class="ident" id="6072129">val</span><span class="op" id="6072132">.</span><span class="ident" id="6072133">Type</span><span class="op" id="6072137">(</span><span class="op" id="6072138">)</span><span class="op" id="6072139">.</span><span class="ident" id="6072140">Elem</span><span class="op" id="6072144">(</span><span class="op" id="6072145">)</span><span class="op" id="6072146">)</span><span class="op" id="6072147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072151">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072155">val</span>&nbsp;<span class="op" id="6072159">=</span>&nbsp;<span class="ident" id="6072161">val</span><span class="op" id="6072164">.</span><span class="ident" id="6072165">Elem</span><span class="op" id="6072169">(</span><span class="op" id="6072170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072177">if</span>&nbsp;<span class="ident" id="6072180">val</span><span class="op" id="6072183">.</span><span class="ident" id="6072184">CanInterface</span><span class="op" id="6072196">(</span><span class="op" id="6072197">)</span>&nbsp;<span class="op" id="6072199">&amp;&amp;</span>&nbsp;<span class="ident" id="6072202">val</span><span class="op" id="6072205">.</span><span class="ident" id="6072206">Type</span><span class="op" id="6072210">(</span><span class="op" id="6072211">)</span><span class="op" id="6072212">.</span><span class="ident" id="6072213">Implements</span><span class="op" id="6072223">(</span><span class="ident" id="6072224">unmarshalerType</span><span class="op" id="6072239">)</span>&nbsp;<span class="op" id="6072241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072245">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072302">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072366">return</span>&nbsp;<span class="ident" id="6072373">p</span><span class="op" id="6072374">.</span><span class="ident" id="6072375">unmarshalInterface</span><span class="op" id="6072393">(</span><span class="ident" id="6072394">val</span><span class="op" id="6072397">.</span><span class="ident" id="6072398">Interface</span><span class="op" id="6072407">(</span><span class="op" id="6072408">)</span><span class="op" id="6072409">.</span><span class="op" id="6072410">(</span><span class="ident" id="6072411">Unmarshaler</span><span class="op" id="6072422">)</span><span class="op" id="6072423">,</span>&nbsp;<span class="ident" id="6072425">start</span><span class="op" id="6072430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072437">if</span>&nbsp;<span class="ident" id="6072440">val</span><span class="op" id="6072443">.</span><span class="ident" id="6072444">CanAddr</span><span class="op" id="6072451">(</span><span class="op" id="6072452">)</span>&nbsp;<span class="op" id="6072454">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072458">pv</span>&nbsp;<span class="op" id="6072461">:=</span>&nbsp;<span class="ident" id="6072464">val</span><span class="op" id="6072467">.</span><span class="ident" id="6072468">Addr</span><span class="op" id="6072472">(</span><span class="op" id="6072473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072477">if</span>&nbsp;<span class="ident" id="6072480">pv</span><span class="op" id="6072482">.</span><span class="ident" id="6072483">CanInterface</span><span class="op" id="6072495">(</span><span class="op" id="6072496">)</span>&nbsp;<span class="op" id="6072498">&amp;&amp;</span>&nbsp;<span class="ident" id="6072501">pv</span><span class="op" id="6072503">.</span><span class="ident" id="6072504">Type</span><span class="op" id="6072508">(</span><span class="op" id="6072509">)</span><span class="op" id="6072510">.</span><span class="ident" id="6072511">Implements</span><span class="op" id="6072521">(</span><span class="ident" id="6072522">unmarshalerType</span><span class="op" id="6072537">)</span>&nbsp;<span class="op" id="6072539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072544">return</span>&nbsp;<span class="ident" id="6072551">p</span><span class="op" id="6072552">.</span><span class="ident" id="6072553">unmarshalInterface</span><span class="op" id="6072571">(</span><span class="ident" id="6072572">pv</span><span class="op" id="6072574">.</span><span class="ident" id="6072575">Interface</span><span class="op" id="6072584">(</span><span class="op" id="6072585">)</span><span class="op" id="6072586">.</span><span class="op" id="6072587">(</span><span class="ident" id="6072588">Unmarshaler</span><span class="op" id="6072599">)</span><span class="op" id="6072600">,</span>&nbsp;<span class="ident" id="6072602">start</span><span class="op" id="6072607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072614">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072618">if</span>&nbsp;<span class="ident" id="6072621">val</span><span class="op" id="6072624">.</span><span class="ident" id="6072625">CanInterface</span><span class="op" id="6072637">(</span><span class="op" id="6072638">)</span>&nbsp;<span class="op" id="6072640">&amp;&amp;</span>&nbsp;<span class="ident" id="6072643">val</span><span class="op" id="6072646">.</span><span class="ident" id="6072647">Type</span><span class="op" id="6072651">(</span><span class="op" id="6072652">)</span><span class="op" id="6072653">.</span><span class="ident" id="6072654">Implements</span><span class="op" id="6072664">(</span><span class="ident" id="6072665">textUnmarshalerType</span><span class="op" id="6072684">)</span>&nbsp;<span class="op" id="6072686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072690">return</span>&nbsp;<span class="ident" id="6072697">p</span><span class="op" id="6072698">.</span><span class="ident" id="6072699">unmarshalTextInterface</span><span class="op" id="6072721">(</span><span class="ident" id="6072722">val</span><span class="op" id="6072725">.</span><span class="ident" id="6072726">Interface</span><span class="op" id="6072735">(</span><span class="op" id="6072736">)</span><span class="op" id="6072737">.</span><span class="op" id="6072738">(</span><span class="ident" id="6072739">encoding</span><span class="op" id="6072747">.</span><span class="ident" id="6072748">TextUnmarshaler</span><span class="op" id="6072763">)</span><span class="op" id="6072764">,</span>&nbsp;<span class="ident" id="6072766">start</span><span class="op" id="6072771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072778">if</span>&nbsp;<span class="ident" id="6072781">val</span><span class="op" id="6072784">.</span><span class="ident" id="6072785">CanAddr</span><span class="op" id="6072792">(</span><span class="op" id="6072793">)</span>&nbsp;<span class="op" id="6072795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072799">pv</span>&nbsp;<span class="op" id="6072802">:=</span>&nbsp;<span class="ident" id="6072805">val</span><span class="op" id="6072808">.</span><span class="ident" id="6072809">Addr</span><span class="op" id="6072813">(</span><span class="op" id="6072814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072818">if</span>&nbsp;<span class="ident" id="6072821">pv</span><span class="op" id="6072823">.</span><span class="ident" id="6072824">CanInterface</span><span class="op" id="6072836">(</span><span class="op" id="6072837">)</span>&nbsp;<span class="op" id="6072839">&amp;&amp;</span>&nbsp;<span class="ident" id="6072842">pv</span><span class="op" id="6072844">.</span><span class="ident" id="6072845">Type</span><span class="op" id="6072849">(</span><span class="op" id="6072850">)</span><span class="op" id="6072851">.</span><span class="ident" id="6072852">Implements</span><span class="op" id="6072862">(</span><span class="ident" id="6072863">textUnmarshalerType</span><span class="op" id="6072882">)</span>&nbsp;<span class="op" id="6072884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072889">return</span>&nbsp;<span class="ident" id="6072896">p</span><span class="op" id="6072897">.</span><span class="ident" id="6072898">unmarshalTextInterface</span><span class="op" id="6072920">(</span><span class="ident" id="6072921">pv</span><span class="op" id="6072923">.</span><span class="ident" id="6072924">Interface</span><span class="op" id="6072933">(</span><span class="op" id="6072934">)</span><span class="op" id="6072935">.</span><span class="op" id="6072936">(</span><span class="ident" id="6072937">encoding</span><span class="op" id="6072945">.</span><span class="ident" id="6072946">TextUnmarshaler</span><span class="op" id="6072961">)</span><span class="op" id="6072962">,</span>&nbsp;<span class="ident" id="6072964">start</span><span class="op" id="6072969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072973">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072980">var</span>&nbsp;<span class="op" id="6072984">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072988">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6073001">[</span><span class="op" id="6073002">]</span><span class="builtintype" id="6073003">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073010">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6073023">reflect</span><span class="op" id="6073030">.</span><span class="ident" id="6073031">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073039">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6073052">[</span><span class="op" id="6073053">]</span><span class="builtintype" id="6073054">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073061">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6073074">reflect</span><span class="op" id="6073081">.</span><span class="ident" id="6073082">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073090">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6073103">reflect</span><span class="op" id="6073110">.</span><span class="ident" id="6073111">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073119">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6073132">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073138">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6073151">[</span><span class="op" id="6073152">]</span><span class="builtintype" id="6073153">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073160">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6073173">reflect</span><span class="op" id="6073180">.</span><span class="ident" id="6073181">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073189">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6073202">reflect</span><span class="op" id="6073209">.</span><span class="ident" id="6073210">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073218">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6073231">*</span><span class="ident" id="6073232">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073243">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6073256">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073263">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073267">switch</span>&nbsp;<span class="ident" id="6073274">v</span>&nbsp;<span class="op" id="6073276">:=</span>&nbsp;<span class="ident" id="6073279">val</span><span class="op" id="6073282">;</span>&nbsp;<span class="ident" id="6073284">v</span><span class="op" id="6073285">.</span><span class="ident" id="6073286">Kind</span><span class="op" id="6073290">(</span><span class="op" id="6073291">)</span>&nbsp;<span class="op" id="6073293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073296">default</span><span class="op" id="6073303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073307">return</span>&nbsp;<span class="ident" id="6073314">errors</span><span class="op" id="6073320">.</span><span class="ident" id="6073321">New</span><span class="op" id="6073324">(</span><span class="string" id="6073325">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6073341">+</span>&nbsp;<span class="ident" id="6073343">v</span><span class="op" id="6073344">.</span><span class="ident" id="6073345">Type</span><span class="op" id="6073349">(</span><span class="op" id="6073350">)</span><span class="op" id="6073351">.</span><span class="ident" id="6073352">String</span><span class="op" id="6073358">(</span><span class="op" id="6073359">)</span><span class="op" id="6073360">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073364">case</span>&nbsp;<span class="ident" id="6073369">reflect</span><span class="op" id="6073376">.</span><span class="ident" id="6073377">Interface</span><span class="op" id="6073386">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073390">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073447">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073502">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073540">return</span>&nbsp;<span class="ident" id="6073547">p</span><span class="op" id="6073548">.</span><span class="ident" id="6073549">Skip</span><span class="op" id="6073553">(</span><span class="op" id="6073554">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073558">case</span>&nbsp;<span class="ident" id="6073563">reflect</span><span class="op" id="6073570">.</span><span class="ident" id="6073571">Slice</span><span class="op" id="6073576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073580">typ</span>&nbsp;<span class="op" id="6073584">:=</span>&nbsp;<span class="ident" id="6073587">v</span><span class="op" id="6073588">.</span><span class="ident" id="6073589">Type</span><span class="op" id="6073593">(</span><span class="op" id="6073594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073598">if</span>&nbsp;<span class="ident" id="6073601">typ</span><span class="op" id="6073604">.</span><span class="ident" id="6073605">Elem</span><span class="op" id="6073609">(</span><span class="op" id="6073610">)</span><span class="op" id="6073611">.</span><span class="ident" id="6073612">Kind</span><span class="op" id="6073616">(</span><span class="op" id="6073617">)</span>&nbsp;<span class="op" id="6073619">==</span>&nbsp;<span class="ident" id="6073622">reflect</span><span class="op" id="6073629">.</span><span class="ident" id="6073630">Uint8</span>&nbsp;<span class="op" id="6073636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073641">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073654">saveData</span>&nbsp;<span class="op" id="6073663">=</span>&nbsp;<span class="ident" id="6073665">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073670">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073683">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073713">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073730">n</span>&nbsp;<span class="op" id="6073732">:=</span>&nbsp;<span class="ident" id="6073735">v</span><span class="op" id="6073736">.</span><span class="ident" id="6073737">Len</span><span class="op" id="6073740">(</span><span class="op" id="6073741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073745">if</span>&nbsp;<span class="ident" id="6073748">n</span>&nbsp;<span class="op" id="6073750">&gt;=</span>&nbsp;<span class="ident" id="6073753">v</span><span class="op" id="6073754">.</span><span class="ident" id="6073755">Cap</span><span class="op" id="6073758">(</span><span class="op" id="6073759">)</span>&nbsp;<span class="op" id="6073761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073766">ncap</span>&nbsp;<span class="op" id="6073771">:=</span>&nbsp;<span class="num" id="6073774">2</span>&nbsp;<span class="op" id="6073776">*</span>&nbsp;<span class="ident" id="6073778">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073783">if</span>&nbsp;<span class="ident" id="6073786">ncap</span>&nbsp;<span class="op" id="6073791">&lt;</span>&nbsp;<span class="num" id="6073793">4</span>&nbsp;<span class="op" id="6073795">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073801">ncap</span>&nbsp;<span class="op" id="6073806">=</span>&nbsp;<span class="num" id="6073808">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6073818">new</span>&nbsp;<span class="op" id="6073822">:=</span>&nbsp;<span class="ident" id="6073825">reflect</span><span class="op" id="6073832">.</span><span class="ident" id="6073833">MakeSlice</span><span class="op" id="6073842">(</span><span class="ident" id="6073843">typ</span><span class="op" id="6073846">,</span>&nbsp;<span class="ident" id="6073848">n</span><span class="op" id="6073849">,</span>&nbsp;<span class="ident" id="6073851">ncap</span><span class="op" id="6073855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073860">reflect</span><span class="op" id="6073867">.</span><span class="ident" id="6073868">Copy</span><span class="op" id="6073872">(</span><span class="builtinfunc" id="6073873">new</span><span class="op" id="6073876">,</span>&nbsp;<span class="ident" id="6073878">v</span><span class="op" id="6073879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073884">v</span><span class="op" id="6073885">.</span><span class="ident" id="6073886">Set</span><span class="op" id="6073889">(</span><span class="builtinfunc" id="6073890">new</span><span class="op" id="6073893">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073901">v</span><span class="op" id="6073902">.</span><span class="ident" id="6073903">SetLen</span><span class="op" id="6073909">(</span><span class="ident" id="6073910">n</span>&nbsp;<span class="op" id="6073912">+</span>&nbsp;<span class="num" id="6073914">1</span><span class="op" id="6073915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073920">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073959">if</span>&nbsp;<span class="ident" id="6073962">err</span>&nbsp;<span class="op" id="6073966">:=</span>&nbsp;<span class="ident" id="6073969">p</span><span class="op" id="6073970">.</span><span class="ident" id="6073971">unmarshal</span><span class="op" id="6073980">(</span><span class="ident" id="6073981">v</span><span class="op" id="6073982">.</span><span class="ident" id="6073983">Index</span><span class="op" id="6073988">(</span><span class="ident" id="6073989">n</span><span class="op" id="6073990">)</span><span class="op" id="6073991">,</span>&nbsp;<span class="ident" id="6073993">start</span><span class="op" id="6073998">)</span><span class="op" id="6073999">;</span>&nbsp;<span class="ident" id="6074001">err</span>&nbsp;<span class="op" id="6074005">!=</span>&nbsp;<span class="ident" id="6074008">nil</span>&nbsp;<span class="op" id="6074012">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074017">v</span><span class="op" id="6074018">.</span><span class="ident" id="6074019">SetLen</span><span class="op" id="6074025">(</span><span class="ident" id="6074026">n</span><span class="op" id="6074027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074032">return</span>&nbsp;<span class="ident" id="6074039">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074049">return</span>&nbsp;<span class="ident" id="6074056">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074062">case</span>&nbsp;<span class="ident" id="6074067">reflect</span><span class="op" id="6074074">.</span><span class="ident" id="6074075">Bool</span><span class="op" id="6074079">,</span>&nbsp;<span class="ident" id="6074081">reflect</span><span class="op" id="6074088">.</span><span class="ident" id="6074089">Float32</span><span class="op" id="6074096">,</span>&nbsp;<span class="ident" id="6074098">reflect</span><span class="op" id="6074105">.</span><span class="ident" id="6074106">Float64</span><span class="op" id="6074113">,</span>&nbsp;<span class="ident" id="6074115">reflect</span><span class="op" id="6074122">.</span><span class="ident" id="6074123">Int</span><span class="op" id="6074126">,</span>&nbsp;<span class="ident" id="6074128">reflect</span><span class="op" id="6074135">.</span><span class="ident" id="6074136">Int8</span><span class="op" id="6074140">,</span>&nbsp;<span class="ident" id="6074142">reflect</span><span class="op" id="6074149">.</span><span class="ident" id="6074150">Int16</span><span class="op" id="6074155">,</span>&nbsp;<span class="ident" id="6074157">reflect</span><span class="op" id="6074164">.</span><span class="ident" id="6074165">Int32</span><span class="op" id="6074170">,</span>&nbsp;<span class="ident" id="6074172">reflect</span><span class="op" id="6074179">.</span><span class="ident" id="6074180">Int64</span><span class="op" id="6074185">,</span>&nbsp;<span class="ident" id="6074187">reflect</span><span class="op" id="6074194">.</span><span class="ident" id="6074195">Uint</span><span class="op" id="6074199">,</span>&nbsp;<span class="ident" id="6074201">reflect</span><span class="op" id="6074208">.</span><span class="ident" id="6074209">Uint8</span><span class="op" id="6074214">,</span>&nbsp;<span class="ident" id="6074216">reflect</span><span class="op" id="6074223">.</span><span class="ident" id="6074224">Uint16</span><span class="op" id="6074230">,</span>&nbsp;<span class="ident" id="6074232">reflect</span><span class="op" id="6074239">.</span><span class="ident" id="6074240">Uint32</span><span class="op" id="6074246">,</span>&nbsp;<span class="ident" id="6074248">reflect</span><span class="op" id="6074255">.</span><span class="ident" id="6074256">Uint64</span><span class="op" id="6074262">,</span>&nbsp;<span class="ident" id="6074264">reflect</span><span class="op" id="6074271">.</span><span class="ident" id="6074272">Uintptr</span><span class="op" id="6074279">,</span>&nbsp;<span class="ident" id="6074281">reflect</span><span class="op" id="6074288">.</span><span class="ident" id="6074289">String</span><span class="op" id="6074295">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074299">saveData</span>&nbsp;<span class="op" id="6074308">=</span>&nbsp;<span class="ident" id="6074310">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074314">case</span>&nbsp;<span class="ident" id="6074319">reflect</span><span class="op" id="6074326">.</span><span class="ident" id="6074327">Struct</span><span class="op" id="6074333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074337">typ</span>&nbsp;<span class="op" id="6074341">:=</span>&nbsp;<span class="ident" id="6074344">v</span><span class="op" id="6074345">.</span><span class="ident" id="6074346">Type</span><span class="op" id="6074350">(</span><span class="op" id="6074351">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074355">if</span>&nbsp;<span class="ident" id="6074358">typ</span>&nbsp;<span class="op" id="6074362">==</span>&nbsp;<span class="ident" id="6074365">nameType</span>&nbsp;<span class="op" id="6074374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074379">v</span><span class="op" id="6074380">.</span><span class="ident" id="6074381">Set</span><span class="op" id="6074384">(</span><span class="ident" id="6074385">reflect</span><span class="op" id="6074392">.</span><span class="ident" id="6074393">ValueOf</span><span class="op" id="6074400">(</span><span class="ident" id="6074401">start</span><span class="op" id="6074406">.</span><span class="ident" id="6074407">Name</span><span class="op" id="6074411">)</span><span class="op" id="6074412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074417">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074430">sv</span>&nbsp;<span class="op" id="6074433">=</span>&nbsp;<span class="ident" id="6074435">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074439">tinfo</span><span class="op" id="6074444">,</span>&nbsp;<span class="ident" id="6074446">err</span>&nbsp;<span class="op" id="6074450">=</span>&nbsp;<span class="ident" id="6074452">getTypeInfo</span><span class="op" id="6074463">(</span><span class="ident" id="6074464">typ</span><span class="op" id="6074467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074471">if</span>&nbsp;<span class="ident" id="6074474">err</span>&nbsp;<span class="op" id="6074478">!=</span>&nbsp;<span class="ident" id="6074481">nil</span>&nbsp;<span class="op" id="6074485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074490">return</span>&nbsp;<span class="ident" id="6074497">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074503">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6074508">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074547">if</span>&nbsp;<span class="ident" id="6074550">tinfo</span><span class="op" id="6074555">.</span><span class="ident" id="6074556">xmlname</span>&nbsp;<span class="op" id="6074564">!=</span>&nbsp;<span class="ident" id="6074567">nil</span>&nbsp;<span class="op" id="6074571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074576">finfo</span>&nbsp;<span class="op" id="6074582">:=</span>&nbsp;<span class="ident" id="6074585">tinfo</span><span class="op" id="6074590">.</span><span class="ident" id="6074591">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074602">if</span>&nbsp;<span class="ident" id="6074605">finfo</span><span class="op" id="6074610">.</span><span class="ident" id="6074611">name</span>&nbsp;<span class="op" id="6074616">!=</span>&nbsp;<span class="string" id="6074619">&#34;&#34;</span>&nbsp;<span class="op" id="6074622">&amp;&amp;</span>&nbsp;<span class="ident" id="6074625">finfo</span><span class="op" id="6074630">.</span><span class="ident" id="6074631">name</span>&nbsp;<span class="op" id="6074636">!=</span>&nbsp;<span class="ident" id="6074639">start</span><span class="op" id="6074644">.</span><span class="ident" id="6074645">Name</span><span class="op" id="6074649">.</span><span class="ident" id="6074650">Local</span>&nbsp;<span class="op" id="6074656">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074662">return</span>&nbsp;<span class="ident" id="6074669">UnmarshalError</span><span class="op" id="6074683">(</span><span class="string" id="6074684">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6074710">+</span>&nbsp;<span class="ident" id="6074712">finfo</span><span class="op" id="6074717">.</span><span class="ident" id="6074718">name</span>&nbsp;<span class="op" id="6074723">+</span>&nbsp;<span class="string" id="6074725">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6074740">+</span>&nbsp;<span class="ident" id="6074742">start</span><span class="op" id="6074747">.</span><span class="ident" id="6074748">Name</span><span class="op" id="6074752">.</span><span class="ident" id="6074753">Local</span>&nbsp;<span class="op" id="6074759">+</span>&nbsp;<span class="string" id="6074761">&#34;&gt;&#34;</span><span class="op" id="6074764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074774">if</span>&nbsp;<span class="ident" id="6074777">finfo</span><span class="op" id="6074782">.</span><span class="ident" id="6074783">xmlns</span>&nbsp;<span class="op" id="6074789">!=</span>&nbsp;<span class="string" id="6074792">&#34;&#34;</span>&nbsp;<span class="op" id="6074795">&amp;&amp;</span>&nbsp;<span class="ident" id="6074798">finfo</span><span class="op" id="6074803">.</span><span class="ident" id="6074804">xmlns</span>&nbsp;<span class="op" id="6074810">!=</span>&nbsp;<span class="ident" id="6074813">start</span><span class="op" id="6074818">.</span><span class="ident" id="6074819">Name</span><span class="op" id="6074823">.</span><span class="ident" id="6074824">Space</span>&nbsp;<span class="op" id="6074830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074836">e</span>&nbsp;<span class="op" id="6074838">:=</span>&nbsp;<span class="string" id="6074841">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6074862">+</span>&nbsp;<span class="ident" id="6074864">finfo</span><span class="op" id="6074869">.</span><span class="ident" id="6074870">name</span>&nbsp;<span class="op" id="6074875">+</span>&nbsp;<span class="string" id="6074877">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6074896">+</span>&nbsp;<span class="ident" id="6074898">finfo</span><span class="op" id="6074903">.</span><span class="ident" id="6074904">xmlns</span>&nbsp;<span class="op" id="6074910">+</span>&nbsp;<span class="string" id="6074912">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074929">if</span>&nbsp;<span class="ident" id="6074932">start</span><span class="op" id="6074937">.</span><span class="ident" id="6074938">Name</span><span class="op" id="6074942">.</span><span class="ident" id="6074943">Space</span>&nbsp;<span class="op" id="6074949">==</span>&nbsp;<span class="string" id="6074952">&#34;&#34;</span>&nbsp;<span class="op" id="6074955">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074962">e</span>&nbsp;<span class="op" id="6074964">+=</span>&nbsp;<span class="string" id="6074967">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074987">}</span>&nbsp;<span class="keyword" id="6074989">else</span>&nbsp;<span class="op" id="6074994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075001">e</span>&nbsp;<span class="op" id="6075003">+=</span>&nbsp;<span class="ident" id="6075006">start</span><span class="op" id="6075011">.</span><span class="ident" id="6075012">Name</span><span class="op" id="6075016">.</span><span class="ident" id="6075017">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075033">return</span>&nbsp;<span class="ident" id="6075040">UnmarshalError</span><span class="op" id="6075054">(</span><span class="ident" id="6075055">e</span><span class="op" id="6075056">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075066">fv</span>&nbsp;<span class="op" id="6075069">:=</span>&nbsp;<span class="ident" id="6075072">finfo</span><span class="op" id="6075077">.</span><span class="ident" id="6075078">value</span><span class="op" id="6075083">(</span><span class="ident" id="6075084">sv</span><span class="op" id="6075086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075091">if</span>&nbsp;<span class="ident" id="6075094">_</span><span class="op" id="6075095">,</span>&nbsp;<span class="ident" id="6075097">ok</span>&nbsp;<span class="op" id="6075100">:=</span>&nbsp;<span class="ident" id="6075103">fv</span><span class="op" id="6075105">.</span><span class="ident" id="6075106">Interface</span><span class="op" id="6075115">(</span><span class="op" id="6075116">)</span><span class="op" id="6075117">.</span><span class="op" id="6075118">(</span><span class="ident" id="6075119">Name</span><span class="op" id="6075123">)</span><span class="op" id="6075124">;</span>&nbsp;<span class="ident" id="6075126">ok</span>&nbsp;<span class="op" id="6075129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075135">fv</span><span class="op" id="6075137">.</span><span class="ident" id="6075138">Set</span><span class="op" id="6075141">(</span><span class="ident" id="6075142">reflect</span><span class="op" id="6075149">.</span><span class="ident" id="6075150">ValueOf</span><span class="op" id="6075157">(</span><span class="ident" id="6075158">start</span><span class="op" id="6075163">.</span><span class="ident" id="6075164">Name</span><span class="op" id="6075168">)</span><span class="op" id="6075169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075174">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6075183">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6075207">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075280">for</span>&nbsp;<span class="ident" id="6075284">i</span>&nbsp;<span class="op" id="6075286">:=</span>&nbsp;<span class="keyword" id="6075289">range</span>&nbsp;<span class="ident" id="6075295">tinfo</span><span class="op" id="6075300">.</span><span class="ident" id="6075301">fields</span>&nbsp;<span class="op" id="6075308">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075313">finfo</span>&nbsp;<span class="op" id="6075319">:=</span>&nbsp;<span class="op" id="6075322">&amp;</span><span class="ident" id="6075323">tinfo</span><span class="op" id="6075328">.</span><span class="ident" id="6075329">fields</span><span class="op" id="6075335">[</span><span class="ident" id="6075336">i</span><span class="op" id="6075337">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075342">switch</span>&nbsp;<span class="ident" id="6075349">finfo</span><span class="op" id="6075354">.</span><span class="ident" id="6075355">flags</span>&nbsp;<span class="op" id="6075361">&amp;</span>&nbsp;<span class="ident" id="6075363">fMode</span>&nbsp;<span class="op" id="6075369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075374">case</span>&nbsp;<span class="ident" id="6075379">fAttr</span><span class="op" id="6075384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075390">strv</span>&nbsp;<span class="op" id="6075395">:=</span>&nbsp;<span class="ident" id="6075398">finfo</span><span class="op" id="6075403">.</span><span class="ident" id="6075404">value</span><span class="op" id="6075409">(</span><span class="ident" id="6075410">sv</span><span class="op" id="6075412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6075418">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075445">for</span>&nbsp;<span class="ident" id="6075449">_</span><span class="op" id="6075450">,</span>&nbsp;<span class="ident" id="6075452">a</span>&nbsp;<span class="op" id="6075454">:=</span>&nbsp;<span class="keyword" id="6075457">range</span>&nbsp;<span class="ident" id="6075463">start</span><span class="op" id="6075468">.</span><span class="ident" id="6075469">Attr</span>&nbsp;<span class="op" id="6075474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075481">if</span>&nbsp;<span class="ident" id="6075484">a</span><span class="op" id="6075485">.</span><span class="ident" id="6075486">Name</span><span class="op" id="6075490">.</span><span class="ident" id="6075491">Local</span>&nbsp;<span class="op" id="6075497">==</span>&nbsp;<span class="ident" id="6075500">finfo</span><span class="op" id="6075505">.</span><span class="ident" id="6075506">name</span>&nbsp;<span class="op" id="6075511">&amp;&amp;</span>&nbsp;<span class="op" id="6075514">(</span><span class="ident" id="6075515">finfo</span><span class="op" id="6075520">.</span><span class="ident" id="6075521">xmlns</span>&nbsp;<span class="op" id="6075527">==</span>&nbsp;<span class="string" id="6075530">&#34;&#34;</span>&nbsp;<span class="op" id="6075533">||</span>&nbsp;<span class="ident" id="6075536">finfo</span><span class="op" id="6075541">.</span><span class="ident" id="6075542">xmlns</span>&nbsp;<span class="op" id="6075548">==</span>&nbsp;<span class="ident" id="6075551">a</span><span class="op" id="6075552">.</span><span class="ident" id="6075553">Name</span><span class="op" id="6075557">.</span><span class="ident" id="6075558">Space</span><span class="op" id="6075563">)</span>&nbsp;<span class="op" id="6075565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075573">if</span>&nbsp;<span class="ident" id="6075576">err</span>&nbsp;<span class="op" id="6075580">:=</span>&nbsp;<span class="ident" id="6075583">p</span><span class="op" id="6075584">.</span><span class="ident" id="6075585">unmarshalAttr</span><span class="op" id="6075598">(</span><span class="ident" id="6075599">strv</span><span class="op" id="6075603">,</span>&nbsp;<span class="ident" id="6075605">a</span><span class="op" id="6075606">)</span><span class="op" id="6075607">;</span>&nbsp;<span class="ident" id="6075609">err</span>&nbsp;<span class="op" id="6075613">!=</span>&nbsp;<span class="ident" id="6075616">nil</span>&nbsp;<span class="op" id="6075620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075629">return</span>&nbsp;<span class="ident" id="6075636">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075646">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075654">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075677">case</span>&nbsp;<span class="ident" id="6075682">fCharData</span><span class="op" id="6075691">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075697">if</span>&nbsp;<span class="op" id="6075700">!</span><span class="ident" id="6075701">saveData</span><span class="op" id="6075709">.</span><span class="ident" id="6075710">IsValid</span><span class="op" id="6075717">(</span><span class="op" id="6075718">)</span>&nbsp;<span class="op" id="6075720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075727">saveData</span>&nbsp;<span class="op" id="6075736">=</span>&nbsp;<span class="ident" id="6075738">finfo</span><span class="op" id="6075743">.</span><span class="ident" id="6075744">value</span><span class="op" id="6075749">(</span><span class="ident" id="6075750">sv</span><span class="op" id="6075752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075764">case</span>&nbsp;<span class="ident" id="6075769">fComment</span><span class="op" id="6075777">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075783">if</span>&nbsp;<span class="op" id="6075786">!</span><span class="ident" id="6075787">saveComment</span><span class="op" id="6075798">.</span><span class="ident" id="6075799">IsValid</span><span class="op" id="6075806">(</span><span class="op" id="6075807">)</span>&nbsp;<span class="op" id="6075809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075816">saveComment</span>&nbsp;<span class="op" id="6075828">=</span>&nbsp;<span class="ident" id="6075830">finfo</span><span class="op" id="6075835">.</span><span class="ident" id="6075836">value</span><span class="op" id="6075841">(</span><span class="ident" id="6075842">sv</span><span class="op" id="6075844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075856">case</span>&nbsp;<span class="ident" id="6075861">fAny</span><span class="op" id="6075865">,</span>&nbsp;<span class="ident" id="6075867">fAny</span>&nbsp;<span class="op" id="6075872">|</span>&nbsp;<span class="ident" id="6075874">fElement</span><span class="op" id="6075882">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075888">if</span>&nbsp;<span class="op" id="6075891">!</span><span class="ident" id="6075892">saveAny</span><span class="op" id="6075899">.</span><span class="ident" id="6075900">IsValid</span><span class="op" id="6075907">(</span><span class="op" id="6075908">)</span>&nbsp;<span class="op" id="6075910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075917">saveAny</span>&nbsp;<span class="op" id="6075925">=</span>&nbsp;<span class="ident" id="6075927">finfo</span><span class="op" id="6075932">.</span><span class="ident" id="6075933">value</span><span class="op" id="6075938">(</span><span class="ident" id="6075939">sv</span><span class="op" id="6075941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075953">case</span>&nbsp;<span class="ident" id="6075958">fInnerXml</span><span class="op" id="6075967">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075973">if</span>&nbsp;<span class="op" id="6075976">!</span><span class="ident" id="6075977">saveXML</span><span class="op" id="6075984">.</span><span class="ident" id="6075985">IsValid</span><span class="op" id="6075992">(</span><span class="op" id="6075993">)</span>&nbsp;<span class="op" id="6075995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076002">saveXML</span>&nbsp;<span class="op" id="6076010">=</span>&nbsp;<span class="ident" id="6076012">finfo</span><span class="op" id="6076017">.</span><span class="ident" id="6076018">value</span><span class="op" id="6076023">(</span><span class="ident" id="6076024">sv</span><span class="op" id="6076026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076033">if</span>&nbsp;<span class="ident" id="6076036">p</span><span class="op" id="6076037">.</span><span class="ident" id="6076038">saved</span>&nbsp;<span class="op" id="6076044">==</span>&nbsp;<span class="ident" id="6076047">nil</span>&nbsp;<span class="op" id="6076051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076059">saveXMLIndex</span>&nbsp;<span class="op" id="6076072">=</span>&nbsp;<span class="num" id="6076074">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076082">p</span><span class="op" id="6076083">.</span><span class="ident" id="6076084">saved</span>&nbsp;<span class="op" id="6076090">=</span>&nbsp;<span class="builtinfunc" id="6076092">new</span><span class="op" id="6076095">(</span><span class="ident" id="6076096">bytes</span><span class="op" id="6076101">.</span><span class="ident" id="6076102">Buffer</span><span class="op" id="6076108">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076115">}</span>&nbsp;<span class="keyword" id="6076117">else</span>&nbsp;<span class="op" id="6076122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076130">saveXMLIndex</span>&nbsp;<span class="op" id="6076143">=</span>&nbsp;<span class="ident" id="6076145">p</span><span class="op" id="6076146">.</span><span class="ident" id="6076147">savedOffset</span><span class="op" id="6076158">(</span><span class="op" id="6076159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076177">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076188">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076210">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6076249">Loop</span><span class="op" id="6076253">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076256">for</span>&nbsp;<span class="op" id="6076260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076264">var</span>&nbsp;<span class="ident" id="6076268">savedOffset</span>&nbsp;<span class="builtintype" id="6076280">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076286">if</span>&nbsp;<span class="ident" id="6076289">saveXML</span><span class="op" id="6076296">.</span><span class="ident" id="6076297">IsValid</span><span class="op" id="6076304">(</span><span class="op" id="6076305">)</span>&nbsp;<span class="op" id="6076307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076312">savedOffset</span>&nbsp;<span class="op" id="6076324">=</span>&nbsp;<span class="ident" id="6076326">p</span><span class="op" id="6076327">.</span><span class="ident" id="6076328">savedOffset</span><span class="op" id="6076339">(</span><span class="op" id="6076340">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076348">tok</span><span class="op" id="6076351">,</span>&nbsp;<span class="ident" id="6076353">err</span>&nbsp;<span class="op" id="6076357">:=</span>&nbsp;<span class="ident" id="6076360">p</span><span class="op" id="6076361">.</span><span class="ident" id="6076362">Token</span><span class="op" id="6076367">(</span><span class="op" id="6076368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076372">if</span>&nbsp;<span class="ident" id="6076375">err</span>&nbsp;<span class="op" id="6076379">!=</span>&nbsp;<span class="ident" id="6076382">nil</span>&nbsp;<span class="op" id="6076386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076391">return</span>&nbsp;<span class="ident" id="6076398">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076404">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076408">switch</span>&nbsp;<span class="ident" id="6076415">t</span>&nbsp;<span class="op" id="6076417">:=</span>&nbsp;<span class="ident" id="6076420">tok</span><span class="op" id="6076423">.</span><span class="op" id="6076424">(</span><span class="keyword" id="6076425">type</span><span class="op" id="6076429">)</span>&nbsp;<span class="op" id="6076431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076435">case</span>&nbsp;<span class="ident" id="6076440">StartElement</span><span class="op" id="6076452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076457">consumed</span>&nbsp;<span class="op" id="6076466">:=</span>&nbsp;<span class="builtintype" id="6076469">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076478">if</span>&nbsp;<span class="ident" id="6076481">sv</span><span class="op" id="6076483">.</span><span class="ident" id="6076484">IsValid</span><span class="op" id="6076491">(</span><span class="op" id="6076492">)</span>&nbsp;<span class="op" id="6076494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076500">consumed</span><span class="op" id="6076508">,</span>&nbsp;<span class="ident" id="6076510">err</span>&nbsp;<span class="op" id="6076514">=</span>&nbsp;<span class="ident" id="6076516">p</span><span class="op" id="6076517">.</span><span class="ident" id="6076518">unmarshalPath</span><span class="op" id="6076531">(</span><span class="ident" id="6076532">tinfo</span><span class="op" id="6076537">,</span>&nbsp;<span class="ident" id="6076539">sv</span><span class="op" id="6076541">,</span>&nbsp;<span class="ident" id="6076543">nil</span><span class="op" id="6076546">,</span>&nbsp;<span class="op" id="6076548">&amp;</span><span class="ident" id="6076549">t</span><span class="op" id="6076550">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076556">if</span>&nbsp;<span class="ident" id="6076559">err</span>&nbsp;<span class="op" id="6076563">!=</span>&nbsp;<span class="ident" id="6076566">nil</span>&nbsp;<span class="op" id="6076570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076577">return</span>&nbsp;<span class="ident" id="6076584">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076598">if</span>&nbsp;<span class="op" id="6076601">!</span><span class="ident" id="6076602">consumed</span>&nbsp;<span class="op" id="6076611">&amp;&amp;</span>&nbsp;<span class="ident" id="6076614">saveAny</span><span class="op" id="6076621">.</span><span class="ident" id="6076622">IsValid</span><span class="op" id="6076629">(</span><span class="op" id="6076630">)</span>&nbsp;<span class="op" id="6076632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076639">consumed</span>&nbsp;<span class="op" id="6076648">=</span>&nbsp;<span class="builtintype" id="6076650">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076660">if</span>&nbsp;<span class="ident" id="6076663">err</span>&nbsp;<span class="op" id="6076667">:=</span>&nbsp;<span class="ident" id="6076670">p</span><span class="op" id="6076671">.</span><span class="ident" id="6076672">unmarshal</span><span class="op" id="6076681">(</span><span class="ident" id="6076682">saveAny</span><span class="op" id="6076689">,</span>&nbsp;<span class="op" id="6076691">&amp;</span><span class="ident" id="6076692">t</span><span class="op" id="6076693">)</span><span class="op" id="6076694">;</span>&nbsp;<span class="ident" id="6076696">err</span>&nbsp;<span class="op" id="6076700">!=</span>&nbsp;<span class="ident" id="6076703">nil</span>&nbsp;<span class="op" id="6076707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076715">return</span>&nbsp;<span class="ident" id="6076722">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076742">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076747">if</span>&nbsp;<span class="op" id="6076750">!</span><span class="ident" id="6076751">consumed</span>&nbsp;<span class="op" id="6076760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076766">if</span>&nbsp;<span class="ident" id="6076769">err</span>&nbsp;<span class="op" id="6076773">:=</span>&nbsp;<span class="ident" id="6076776">p</span><span class="op" id="6076777">.</span><span class="ident" id="6076778">Skip</span><span class="op" id="6076782">(</span><span class="op" id="6076783">)</span><span class="op" id="6076784">;</span>&nbsp;<span class="ident" id="6076786">err</span>&nbsp;<span class="op" id="6076790">!=</span>&nbsp;<span class="ident" id="6076793">nil</span>&nbsp;<span class="op" id="6076797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076804">return</span>&nbsp;<span class="ident" id="6076811">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076824">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076829">case</span>&nbsp;<span class="ident" id="6076834">EndElement</span><span class="op" id="6076844">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076849">if</span>&nbsp;<span class="ident" id="6076852">saveXML</span><span class="op" id="6076859">.</span><span class="ident" id="6076860">IsValid</span><span class="op" id="6076867">(</span><span class="op" id="6076868">)</span>&nbsp;<span class="op" id="6076870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076876">saveXMLData</span>&nbsp;<span class="op" id="6076888">=</span>&nbsp;<span class="ident" id="6076890">p</span><span class="op" id="6076891">.</span><span class="ident" id="6076892">saved</span><span class="op" id="6076897">.</span><span class="ident" id="6076898">Bytes</span><span class="op" id="6076903">(</span><span class="op" id="6076904">)</span><span class="op" id="6076905">[</span><span class="ident" id="6076906">saveXMLIndex</span><span class="op" id="6076918">:</span><span class="ident" id="6076919">savedOffset</span><span class="op" id="6076930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076936">if</span>&nbsp;<span class="ident" id="6076939">saveXMLIndex</span>&nbsp;<span class="op" id="6076952">==</span>&nbsp;<span class="num" id="6076955">0</span>&nbsp;<span class="op" id="6076957">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076964">p</span><span class="op" id="6076965">.</span><span class="ident" id="6076966">saved</span>&nbsp;<span class="op" id="6076972">=</span>&nbsp;<span class="ident" id="6076974">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076992">break</span>&nbsp;<span class="ident" id="6076998">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077006">case</span>&nbsp;<span class="ident" id="6077011">CharData</span><span class="op" id="6077019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077024">if</span>&nbsp;<span class="ident" id="6077027">saveData</span><span class="op" id="6077035">.</span><span class="ident" id="6077036">IsValid</span><span class="op" id="6077043">(</span><span class="op" id="6077044">)</span>&nbsp;<span class="op" id="6077046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077052">data</span>&nbsp;<span class="op" id="6077057">=</span>&nbsp;<span class="builtinfunc" id="6077059">append</span><span class="op" id="6077065">(</span><span class="ident" id="6077066">data</span><span class="op" id="6077070">,</span>&nbsp;<span class="ident" id="6077072">t</span><span class="op" id="6077073">...</span><span class="op" id="6077076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077086">case</span>&nbsp;<span class="ident" id="6077091">Comment</span><span class="op" id="6077098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077103">if</span>&nbsp;<span class="ident" id="6077106">saveComment</span><span class="op" id="6077117">.</span><span class="ident" id="6077118">IsValid</span><span class="op" id="6077125">(</span><span class="op" id="6077126">)</span>&nbsp;<span class="op" id="6077128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077134">comment</span>&nbsp;<span class="op" id="6077142">=</span>&nbsp;<span class="builtinfunc" id="6077144">append</span><span class="op" id="6077150">(</span><span class="ident" id="6077151">comment</span><span class="op" id="6077158">,</span>&nbsp;<span class="ident" id="6077160">t</span><span class="op" id="6077161">...</span><span class="op" id="6077164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077173">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077180">if</span>&nbsp;<span class="ident" id="6077183">saveData</span><span class="op" id="6077191">.</span><span class="ident" id="6077192">IsValid</span><span class="op" id="6077199">(</span><span class="op" id="6077200">)</span>&nbsp;<span class="op" id="6077202">&amp;&amp;</span>&nbsp;<span class="ident" id="6077205">saveData</span><span class="op" id="6077213">.</span><span class="ident" id="6077214">CanInterface</span><span class="op" id="6077226">(</span><span class="op" id="6077227">)</span>&nbsp;<span class="op" id="6077229">&amp;&amp;</span>&nbsp;<span class="ident" id="6077232">saveData</span><span class="op" id="6077240">.</span><span class="ident" id="6077241">Type</span><span class="op" id="6077245">(</span><span class="op" id="6077246">)</span><span class="op" id="6077247">.</span><span class="ident" id="6077248">Implements</span><span class="op" id="6077258">(</span><span class="ident" id="6077259">textUnmarshalerType</span><span class="op" id="6077278">)</span>&nbsp;<span class="op" id="6077280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077284">if</span>&nbsp;<span class="ident" id="6077287">err</span>&nbsp;<span class="op" id="6077291">:=</span>&nbsp;<span class="ident" id="6077294">saveData</span><span class="op" id="6077302">.</span><span class="ident" id="6077303">Interface</span><span class="op" id="6077312">(</span><span class="op" id="6077313">)</span><span class="op" id="6077314">.</span><span class="op" id="6077315">(</span><span class="ident" id="6077316">encoding</span><span class="op" id="6077324">.</span><span class="ident" id="6077325">TextUnmarshaler</span><span class="op" id="6077340">)</span><span class="op" id="6077341">.</span><span class="ident" id="6077342">UnmarshalText</span><span class="op" id="6077355">(</span><span class="ident" id="6077356">data</span><span class="op" id="6077360">)</span><span class="op" id="6077361">;</span>&nbsp;<span class="ident" id="6077363">err</span>&nbsp;<span class="op" id="6077367">!=</span>&nbsp;<span class="ident" id="6077370">nil</span>&nbsp;<span class="op" id="6077374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077379">return</span>&nbsp;<span class="ident" id="6077386">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077396">saveData</span>&nbsp;<span class="op" id="6077405">=</span>&nbsp;<span class="ident" id="6077407">reflect</span><span class="op" id="6077414">.</span><span class="ident" id="6077415">Value</span><span class="op" id="6077420">{</span><span class="op" id="6077421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077428">if</span>&nbsp;<span class="ident" id="6077431">saveData</span><span class="op" id="6077439">.</span><span class="ident" id="6077440">IsValid</span><span class="op" id="6077447">(</span><span class="op" id="6077448">)</span>&nbsp;<span class="op" id="6077450">&amp;&amp;</span>&nbsp;<span class="ident" id="6077453">saveData</span><span class="op" id="6077461">.</span><span class="ident" id="6077462">CanAddr</span><span class="op" id="6077469">(</span><span class="op" id="6077470">)</span>&nbsp;<span class="op" id="6077472">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077476">pv</span>&nbsp;<span class="op" id="6077479">:=</span>&nbsp;<span class="ident" id="6077482">saveData</span><span class="op" id="6077490">.</span><span class="ident" id="6077491">Addr</span><span class="op" id="6077495">(</span><span class="op" id="6077496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077500">if</span>&nbsp;<span class="ident" id="6077503">pv</span><span class="op" id="6077505">.</span><span class="ident" id="6077506">CanInterface</span><span class="op" id="6077518">(</span><span class="op" id="6077519">)</span>&nbsp;<span class="op" id="6077521">&amp;&amp;</span>&nbsp;<span class="ident" id="6077524">pv</span><span class="op" id="6077526">.</span><span class="ident" id="6077527">Type</span><span class="op" id="6077531">(</span><span class="op" id="6077532">)</span><span class="op" id="6077533">.</span><span class="ident" id="6077534">Implements</span><span class="op" id="6077544">(</span><span class="ident" id="6077545">textUnmarshalerType</span><span class="op" id="6077564">)</span>&nbsp;<span class="op" id="6077566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077571">if</span>&nbsp;<span class="ident" id="6077574">err</span>&nbsp;<span class="op" id="6077578">:=</span>&nbsp;<span class="ident" id="6077581">pv</span><span class="op" id="6077583">.</span><span class="ident" id="6077584">Interface</span><span class="op" id="6077593">(</span><span class="op" id="6077594">)</span><span class="op" id="6077595">.</span><span class="op" id="6077596">(</span><span class="ident" id="6077597">encoding</span><span class="op" id="6077605">.</span><span class="ident" id="6077606">TextUnmarshaler</span><span class="op" id="6077621">)</span><span class="op" id="6077622">.</span><span class="ident" id="6077623">UnmarshalText</span><span class="op" id="6077636">(</span><span class="ident" id="6077637">data</span><span class="op" id="6077641">)</span><span class="op" id="6077642">;</span>&nbsp;<span class="ident" id="6077644">err</span>&nbsp;<span class="op" id="6077648">!=</span>&nbsp;<span class="ident" id="6077651">nil</span>&nbsp;<span class="op" id="6077655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077661">return</span>&nbsp;<span class="ident" id="6077668">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077675">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077680">saveData</span>&nbsp;<span class="op" id="6077689">=</span>&nbsp;<span class="ident" id="6077691">reflect</span><span class="op" id="6077698">.</span><span class="ident" id="6077699">Value</span><span class="op" id="6077704">{</span><span class="op" id="6077705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077716">if</span>&nbsp;<span class="ident" id="6077719">err</span>&nbsp;<span class="op" id="6077723">:=</span>&nbsp;<span class="ident" id="6077726">copyValue</span><span class="op" id="6077735">(</span><span class="ident" id="6077736">saveData</span><span class="op" id="6077744">,</span>&nbsp;<span class="ident" id="6077746">data</span><span class="op" id="6077750">)</span><span class="op" id="6077751">;</span>&nbsp;<span class="ident" id="6077753">err</span>&nbsp;<span class="op" id="6077757">!=</span>&nbsp;<span class="ident" id="6077760">nil</span>&nbsp;<span class="op" id="6077764">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077768">return</span>&nbsp;<span class="ident" id="6077775">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077784">switch</span>&nbsp;<span class="ident" id="6077791">t</span>&nbsp;<span class="op" id="6077793">:=</span>&nbsp;<span class="ident" id="6077796">saveComment</span><span class="op" id="6077807">;</span>&nbsp;<span class="ident" id="6077809">t</span><span class="op" id="6077810">.</span><span class="ident" id="6077811">Kind</span><span class="op" id="6077815">(</span><span class="op" id="6077816">)</span>&nbsp;<span class="op" id="6077818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077821">case</span>&nbsp;<span class="ident" id="6077826">reflect</span><span class="op" id="6077833">.</span><span class="ident" id="6077834">String</span><span class="op" id="6077840">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077844">t</span><span class="op" id="6077845">.</span><span class="ident" id="6077846">SetString</span><span class="op" id="6077855">(</span><span class="builtintype" id="6077856">string</span><span class="op" id="6077862">(</span><span class="ident" id="6077863">comment</span><span class="op" id="6077870">)</span><span class="op" id="6077871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077874">case</span>&nbsp;<span class="ident" id="6077879">reflect</span><span class="op" id="6077886">.</span><span class="ident" id="6077887">Slice</span><span class="op" id="6077892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077896">t</span><span class="op" id="6077897">.</span><span class="ident" id="6077898">Set</span><span class="op" id="6077901">(</span><span class="ident" id="6077902">reflect</span><span class="op" id="6077909">.</span><span class="ident" id="6077910">ValueOf</span><span class="op" id="6077917">(</span><span class="ident" id="6077918">comment</span><span class="op" id="6077925">)</span><span class="op" id="6077926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077933">switch</span>&nbsp;<span class="ident" id="6077940">t</span>&nbsp;<span class="op" id="6077942">:=</span>&nbsp;<span class="ident" id="6077945">saveXML</span><span class="op" id="6077952">;</span>&nbsp;<span class="ident" id="6077954">t</span><span class="op" id="6077955">.</span><span class="ident" id="6077956">Kind</span><span class="op" id="6077960">(</span><span class="op" id="6077961">)</span>&nbsp;<span class="op" id="6077963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077966">case</span>&nbsp;<span class="ident" id="6077971">reflect</span><span class="op" id="6077978">.</span><span class="ident" id="6077979">String</span><span class="op" id="6077985">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077989">t</span><span class="op" id="6077990">.</span><span class="ident" id="6077991">SetString</span><span class="op" id="6078000">(</span><span class="builtintype" id="6078001">string</span><span class="op" id="6078007">(</span><span class="ident" id="6078008">saveXMLData</span><span class="op" id="6078019">)</span><span class="op" id="6078020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078023">case</span>&nbsp;<span class="ident" id="6078028">reflect</span><span class="op" id="6078035">.</span><span class="ident" id="6078036">Slice</span><span class="op" id="6078041">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078045">t</span><span class="op" id="6078046">.</span><span class="ident" id="6078047">Set</span><span class="op" id="6078050">(</span><span class="ident" id="6078051">reflect</span><span class="op" id="6078058">.</span><span class="ident" id="6078059">ValueOf</span><span class="op" id="6078066">(</span><span class="ident" id="6078067">saveXMLData</span><span class="op" id="6078078">)</span><span class="op" id="6078079">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078086">return</span>&nbsp;<span class="ident" id="6078093">nil</span><br>
<span class="lineno"></span><span class="op" id="6078097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6078100">func</span>&nbsp;<span class="ident" id="6078105">copyValue</span><span class="op" id="6078114">(</span><span class="ident" id="6078115">dst</span>&nbsp;<span class="ident" id="6078119">reflect</span><span class="op" id="6078126">.</span><span class="ident" id="6078127">Value</span><span class="op" id="6078132">,</span>&nbsp;<span class="ident" id="6078134">src</span>&nbsp;<span class="op" id="6078138">[</span><span class="op" id="6078139">]</span><span class="builtintype" id="6078140">byte</span><span class="op" id="6078144">)</span>&nbsp;<span class="op" id="6078146">(</span><span class="ident" id="6078147">err</span>&nbsp;<span class="builtintype" id="6078151">error</span><span class="op" id="6078156">)</span>&nbsp;<span class="op" id="6078158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078161">dst0</span>&nbsp;<span class="op" id="6078166">:=</span>&nbsp;<span class="ident" id="6078169">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078175">if</span>&nbsp;<span class="ident" id="6078178">dst</span><span class="op" id="6078181">.</span><span class="ident" id="6078182">Kind</span><span class="op" id="6078186">(</span><span class="op" id="6078187">)</span>&nbsp;<span class="op" id="6078189">==</span>&nbsp;<span class="ident" id="6078192">reflect</span><span class="op" id="6078199">.</span><span class="ident" id="6078200">Ptr</span>&nbsp;<span class="op" id="6078204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078208">if</span>&nbsp;<span class="ident" id="6078211">dst</span><span class="op" id="6078214">.</span><span class="ident" id="6078215">IsNil</span><span class="op" id="6078220">(</span><span class="op" id="6078221">)</span>&nbsp;<span class="op" id="6078223">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078228">dst</span><span class="op" id="6078231">.</span><span class="ident" id="6078232">Set</span><span class="op" id="6078235">(</span><span class="ident" id="6078236">reflect</span><span class="op" id="6078243">.</span><span class="ident" id="6078244">New</span><span class="op" id="6078247">(</span><span class="ident" id="6078248">dst</span><span class="op" id="6078251">.</span><span class="ident" id="6078252">Type</span><span class="op" id="6078256">(</span><span class="op" id="6078257">)</span><span class="op" id="6078258">.</span><span class="ident" id="6078259">Elem</span><span class="op" id="6078263">(</span><span class="op" id="6078264">)</span><span class="op" id="6078265">)</span><span class="op" id="6078266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078274">dst</span>&nbsp;<span class="op" id="6078278">=</span>&nbsp;<span class="ident" id="6078280">dst</span><span class="op" id="6078283">.</span><span class="ident" id="6078284">Elem</span><span class="op" id="6078288">(</span><span class="op" id="6078289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6078296">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078323">switch</span>&nbsp;<span class="ident" id="6078330">dst</span><span class="op" id="6078333">.</span><span class="ident" id="6078334">Kind</span><span class="op" id="6078338">(</span><span class="op" id="6078339">)</span>&nbsp;<span class="op" id="6078341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078344">case</span>&nbsp;<span class="ident" id="6078349">reflect</span><span class="op" id="6078356">.</span><span class="ident" id="6078357">Invalid</span><span class="op" id="6078364">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6078368">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078392">default</span><span class="op" id="6078399">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078403">return</span>&nbsp;<span class="ident" id="6078410">errors</span><span class="op" id="6078416">.</span><span class="ident" id="6078417">New</span><span class="op" id="6078420">(</span><span class="string" id="6078421">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6078446">+</span>&nbsp;<span class="ident" id="6078448">dst0</span><span class="op" id="6078452">.</span><span class="ident" id="6078453">Type</span><span class="op" id="6078457">(</span><span class="op" id="6078458">)</span><span class="op" id="6078459">.</span><span class="ident" id="6078460">String</span><span class="op" id="6078466">(</span><span class="op" id="6078467">)</span><span class="op" id="6078468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078471">case</span>&nbsp;<span class="ident" id="6078476">reflect</span><span class="op" id="6078483">.</span><span class="ident" id="6078484">Int</span><span class="op" id="6078487">,</span>&nbsp;<span class="ident" id="6078489">reflect</span><span class="op" id="6078496">.</span><span class="ident" id="6078497">Int8</span><span class="op" id="6078501">,</span>&nbsp;<span class="ident" id="6078503">reflect</span><span class="op" id="6078510">.</span><span class="ident" id="6078511">Int16</span><span class="op" id="6078516">,</span>&nbsp;<span class="ident" id="6078518">reflect</span><span class="op" id="6078525">.</span><span class="ident" id="6078526">Int32</span><span class="op" id="6078531">,</span>&nbsp;<span class="ident" id="6078533">reflect</span><span class="op" id="6078540">.</span><span class="ident" id="6078541">Int64</span><span class="op" id="6078546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078550">itmp</span><span class="op" id="6078554">,</span>&nbsp;<span class="ident" id="6078556">err</span>&nbsp;<span class="op" id="6078560">:=</span>&nbsp;<span class="ident" id="6078563">strconv</span><span class="op" id="6078570">.</span><span class="ident" id="6078571">ParseInt</span><span class="op" id="6078579">(</span><span class="builtintype" id="6078580">string</span><span class="op" id="6078586">(</span><span class="ident" id="6078587">src</span><span class="op" id="6078590">)</span><span class="op" id="6078591">,</span>&nbsp;<span class="num" id="6078593">10</span><span class="op" id="6078595">,</span>&nbsp;<span class="ident" id="6078597">dst</span><span class="op" id="6078600">.</span><span class="ident" id="6078601">Type</span><span class="op" id="6078605">(</span><span class="op" id="6078606">)</span><span class="op" id="6078607">.</span><span class="ident" id="6078608">Bits</span><span class="op" id="6078612">(</span><span class="op" id="6078613">)</span><span class="op" id="6078614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078618">if</span>&nbsp;<span class="ident" id="6078621">err</span>&nbsp;<span class="op" id="6078625">!=</span>&nbsp;<span class="ident" id="6078628">nil</span>&nbsp;<span class="op" id="6078632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078637">return</span>&nbsp;<span class="ident" id="6078644">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078654">dst</span><span class="op" id="6078657">.</span><span class="ident" id="6078658">SetInt</span><span class="op" id="6078664">(</span><span class="ident" id="6078665">itmp</span><span class="op" id="6078669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078672">case</span>&nbsp;<span class="ident" id="6078677">reflect</span><span class="op" id="6078684">.</span><span class="ident" id="6078685">Uint</span><span class="op" id="6078689">,</span>&nbsp;<span class="ident" id="6078691">reflect</span><span class="op" id="6078698">.</span><span class="ident" id="6078699">Uint8</span><span class="op" id="6078704">,</span>&nbsp;<span class="ident" id="6078706">reflect</span><span class="op" id="6078713">.</span><span class="ident" id="6078714">Uint16</span><span class="op" id="6078720">,</span>&nbsp;<span class="ident" id="6078722">reflect</span><span class="op" id="6078729">.</span><span class="ident" id="6078730">Uint32</span><span class="op" id="6078736">,</span>&nbsp;<span class="ident" id="6078738">reflect</span><span class="op" id="6078745">.</span><span class="ident" id="6078746">Uint64</span><span class="op" id="6078752">,</span>&nbsp;<span class="ident" id="6078754">reflect</span><span class="op" id="6078761">.</span><span class="ident" id="6078762">Uintptr</span><span class="op" id="6078769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078773">utmp</span><span class="op" id="6078777">,</span>&nbsp;<span class="ident" id="6078779">err</span>&nbsp;<span class="op" id="6078783">:=</span>&nbsp;<span class="ident" id="6078786">strconv</span><span class="op" id="6078793">.</span><span class="ident" id="6078794">ParseUint</span><span class="op" id="6078803">(</span><span class="builtintype" id="6078804">string</span><span class="op" id="6078810">(</span><span class="ident" id="6078811">src</span><span class="op" id="6078814">)</span><span class="op" id="6078815">,</span>&nbsp;<span class="num" id="6078817">10</span><span class="op" id="6078819">,</span>&nbsp;<span class="ident" id="6078821">dst</span><span class="op" id="6078824">.</span><span class="ident" id="6078825">Type</span><span class="op" id="6078829">(</span><span class="op" id="6078830">)</span><span class="op" id="6078831">.</span><span class="ident" id="6078832">Bits</span><span class="op" id="6078836">(</span><span class="op" id="6078837">)</span><span class="op" id="6078838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078842">if</span>&nbsp;<span class="ident" id="6078845">err</span>&nbsp;<span class="op" id="6078849">!=</span>&nbsp;<span class="ident" id="6078852">nil</span>&nbsp;<span class="op" id="6078856">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078861">return</span>&nbsp;<span class="ident" id="6078868">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078878">dst</span><span class="op" id="6078881">.</span><span class="ident" id="6078882">SetUint</span><span class="op" id="6078889">(</span><span class="ident" id="6078890">utmp</span><span class="op" id="6078894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078897">case</span>&nbsp;<span class="ident" id="6078902">reflect</span><span class="op" id="6078909">.</span><span class="ident" id="6078910">Float32</span><span class="op" id="6078917">,</span>&nbsp;<span class="ident" id="6078919">reflect</span><span class="op" id="6078926">.</span><span class="ident" id="6078927">Float64</span><span class="op" id="6078934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078938">ftmp</span><span class="op" id="6078942">,</span>&nbsp;<span class="ident" id="6078944">err</span>&nbsp;<span class="op" id="6078948">:=</span>&nbsp;<span class="ident" id="6078951">strconv</span><span class="op" id="6078958">.</span><span class="ident" id="6078959">ParseFloat</span><span class="op" id="6078969">(</span><span class="builtintype" id="6078970">string</span><span class="op" id="6078976">(</span><span class="ident" id="6078977">src</span><span class="op" id="6078980">)</span><span class="op" id="6078981">,</span>&nbsp;<span class="ident" id="6078983">dst</span><span class="op" id="6078986">.</span><span class="ident" id="6078987">Type</span><span class="op" id="6078991">(</span><span class="op" id="6078992">)</span><span class="op" id="6078993">.</span><span class="ident" id="6078994">Bits</span><span class="op" id="6078998">(</span><span class="op" id="6078999">)</span><span class="op" id="6079000">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079004">if</span>&nbsp;<span class="ident" id="6079007">err</span>&nbsp;<span class="op" id="6079011">!=</span>&nbsp;<span class="ident" id="6079014">nil</span>&nbsp;<span class="op" id="6079018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079023">return</span>&nbsp;<span class="ident" id="6079030">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6079036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079040">dst</span><span class="op" id="6079043">.</span><span class="ident" id="6079044">SetFloat</span><span class="op" id="6079052">(</span><span class="ident" id="6079053">ftmp</span><span class="op" id="6079057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079060">case</span>&nbsp;<span class="ident" id="6079065">reflect</span><span class="op" id="6079072">.</span><span class="ident" id="6079073">Bool</span><span class="op" id="6079077">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079081">value</span><span class="op" id="6079086">,</span>&nbsp;<span class="ident" id="6079088">err</span>&nbsp;<span class="op" id="6079092">:=</span>&nbsp;<span class="ident" id="6079095">strconv</span><span class="op" id="6079102">.</span><span class="ident" id="6079103">ParseBool</span><span class="op" id="6079112">(</span><span class="ident" id="6079113">strings</span><span class="op" id="6079120">.</span><span class="ident" id="6079121">TrimSpace</span><span class="op" id="6079130">(</span><span class="builtintype" id="6079131">string</span><span class="op" id="6079137">(</span><span class="ident" id="6079138">src</span><span class="op" id="6079141">)</span><span class="op" id="6079142">)</span><span class="op" id="6079143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079147">if</span>&nbsp;<span class="ident" id="6079150">err</span>&nbsp;<span class="op" id="6079154">!=</span>&nbsp;<span class="ident" id="6079157">nil</span>&nbsp;<span class="op" id="6079161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079166">return</span>&nbsp;<span class="ident" id="6079173">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6079179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079183">dst</span><span class="op" id="6079186">.</span><span class="ident" id="6079187">SetBool</span><span class="op" id="6079194">(</span><span class="ident" id="6079195">value</span><span class="op" id="6079200">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079203">case</span>&nbsp;<span class="ident" id="6079208">reflect</span><span class="op" id="6079215">.</span><span class="ident" id="6079216">String</span><span class="op" id="6079222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079226">dst</span><span class="op" id="6079229">.</span><span class="ident" id="6079230">SetString</span><span class="op" id="6079239">(</span><span class="builtintype" id="6079240">string</span><span class="op" id="6079246">(</span><span class="ident" id="6079247">src</span><span class="op" id="6079250">)</span><span class="op" id="6079251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079254">case</span>&nbsp;<span class="ident" id="6079259">reflect</span><span class="op" id="6079266">.</span><span class="ident" id="6079267">Slice</span><span class="op" id="6079272">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079276">if</span>&nbsp;<span class="builtinfunc" id="6079279">len</span><span class="op" id="6079282">(</span><span class="ident" id="6079283">src</span><span class="op" id="6079286">)</span>&nbsp;<span class="op" id="6079288">==</span>&nbsp;<span class="num" id="6079291">0</span>&nbsp;<span class="op" id="6079293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6079298">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079329">src</span>&nbsp;<span class="op" id="6079333">=</span>&nbsp;<span class="op" id="6079335">[</span><span class="op" id="6079336">]</span><span class="builtintype" id="6079337">byte</span><span class="op" id="6079341">{</span><span class="op" id="6079342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6079346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079350">dst</span><span class="op" id="6079353">.</span><span class="ident" id="6079354">SetBytes</span><span class="op" id="6079362">(</span><span class="ident" id="6079363">src</span><span class="op" id="6079366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6079369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079372">return</span>&nbsp;<span class="ident" id="6079379">nil</span><br>
<span class="lineno">605</span><span class="op" id="6079383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6079386">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6079450">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6079489">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6079558">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6079625">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6079692">func</span>&nbsp;<span class="op" id="6079697">(</span><span class="ident" id="6079698">p</span>&nbsp;<span class="op" id="6079700">*</span><span class="ident" id="6079701">Decoder</span><span class="op" id="6079708">)</span>&nbsp;<span class="ident" id="6079710">unmarshalPath</span><span class="op" id="6079723">(</span><span class="ident" id="6079724">tinfo</span>&nbsp;<span class="op" id="6079730">*</span><span class="ident" id="6079731">typeInfo</span><span class="op" id="6079739">,</span>&nbsp;<span class="ident" id="6079741">sv</span>&nbsp;<span class="ident" id="6079744">reflect</span><span class="op" id="6079751">.</span><span class="ident" id="6079752">Value</span><span class="op" id="6079757">,</span>&nbsp;<span class="ident" id="6079759">parents</span>&nbsp;<span class="op" id="6079767">[</span><span class="op" id="6079768">]</span><span class="builtintype" id="6079769">string</span><span class="op" id="6079775">,</span>&nbsp;<span class="ident" id="6079777">start</span>&nbsp;<span class="op" id="6079783">*</span><span class="ident" id="6079784">StartElement</span><span class="op" id="6079796">)</span>&nbsp;<span class="op" id="6079798">(</span><span class="ident" id="6079799">consumed</span>&nbsp;<span class="builtintype" id="6079808">bool</span><span class="op" id="6079812">,</span>&nbsp;<span class="ident" id="6079814">err</span>&nbsp;<span class="builtintype" id="6079818">error</span><span class="op" id="6079823">)</span>&nbsp;<span class="op" id="6079825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079828">recurse</span>&nbsp;<span class="op" id="6079836">:=</span>&nbsp;<span class="builtintype" id="6079839">false</span><br>
<span class="lineno"></span><span class="ident" id="6079845">Loop</span><span class="op" id="6079849">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079852">for</span>&nbsp;<span class="ident" id="6079856">i</span>&nbsp;<span class="op" id="6079858">:=</span>&nbsp;<span class="keyword" id="6079861">range</span>&nbsp;<span class="ident" id="6079867">tinfo</span><span class="op" id="6079872">.</span><span class="ident" id="6079873">fields</span>&nbsp;<span class="op" id="6079880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079884">finfo</span>&nbsp;<span class="op" id="6079890">:=</span>&nbsp;<span class="op" id="6079893">&amp;</span><span class="ident" id="6079894">tinfo</span><span class="op" id="6079899">.</span><span class="ident" id="6079900">fields</span><span class="op" id="6079906">[</span><span class="ident" id="6079907">i</span><span class="op" id="6079908">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079912">if</span>&nbsp;<span class="ident" id="6079915">finfo</span><span class="op" id="6079920">.</span><span class="ident" id="6079921">flags</span><span class="op" id="6079926">&amp;</span><span class="ident" id="6079927">fElement</span>&nbsp;<span class="op" id="6079936">==</span>&nbsp;<span class="num" id="6079939">0</span>&nbsp;<span class="op" id="6079941">||</span>&nbsp;<span class="builtinfunc" id="6079944">len</span><span class="op" id="6079947">(</span><span class="ident" id="6079948">finfo</span><span class="op" id="6079953">.</span><span class="ident" id="6079954">parents</span><span class="op" id="6079961">)</span>&nbsp;<span class="op" id="6079963">&lt;</span>&nbsp;<span class="builtinfunc" id="6079965">len</span><span class="op" id="6079968">(</span><span class="ident" id="6079969">parents</span><span class="op" id="6079976">)</span>&nbsp;<span class="op" id="6079978">||</span>&nbsp;<span class="ident" id="6079981">finfo</span><span class="op" id="6079986">.</span><span class="ident" id="6079987">xmlns</span>&nbsp;<span class="op" id="6079993">!=</span>&nbsp;<span class="string" id="6079996">&#34;&#34;</span>&nbsp;<span class="op" id="6079999">&amp;&amp;</span>&nbsp;<span class="ident" id="6080002">finfo</span><span class="op" id="6080007">.</span><span class="ident" id="6080008">xmlns</span>&nbsp;<span class="op" id="6080014">!=</span>&nbsp;<span class="ident" id="6080017">start</span><span class="op" id="6080022">.</span><span class="ident" id="6080023">Name</span><span class="op" id="6080027">.</span><span class="ident" id="6080028">Space</span>&nbsp;<span class="op" id="6080034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080039">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080050">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080054">for</span>&nbsp;<span class="ident" id="6080058">j</span>&nbsp;<span class="op" id="6080060">:=</span>&nbsp;<span class="keyword" id="6080063">range</span>&nbsp;<span class="ident" id="6080069">parents</span>&nbsp;<span class="op" id="6080077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080082">if</span>&nbsp;<span class="ident" id="6080085">parents</span><span class="op" id="6080092">[</span><span class="ident" id="6080093">j</span><span class="op" id="6080094">]</span>&nbsp;<span class="op" id="6080096">!=</span>&nbsp;<span class="ident" id="6080099">finfo</span><span class="op" id="6080104">.</span><span class="ident" id="6080105">parents</span><span class="op" id="6080112">[</span><span class="ident" id="6080113">j</span><span class="op" id="6080114">]</span>&nbsp;<span class="op" id="6080116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080122">continue</span>&nbsp;<span class="ident" id="6080131">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080143">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080147">if</span>&nbsp;<span class="builtinfunc" id="6080150">len</span><span class="op" id="6080153">(</span><span class="ident" id="6080154">finfo</span><span class="op" id="6080159">.</span><span class="ident" id="6080160">parents</span><span class="op" id="6080167">)</span>&nbsp;<span class="op" id="6080169">==</span>&nbsp;<span class="builtinfunc" id="6080172">len</span><span class="op" id="6080175">(</span><span class="ident" id="6080176">parents</span><span class="op" id="6080183">)</span>&nbsp;<span class="op" id="6080185">&amp;&amp;</span>&nbsp;<span class="ident" id="6080188">finfo</span><span class="op" id="6080193">.</span><span class="ident" id="6080194">name</span>&nbsp;<span class="op" id="6080199">==</span>&nbsp;<span class="ident" id="6080202">start</span><span class="op" id="6080207">.</span><span class="ident" id="6080208">Name</span><span class="op" id="6080212">.</span><span class="ident" id="6080213">Local</span>&nbsp;<span class="op" id="6080219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080224">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080273">return</span>&nbsp;<span class="builtintype" id="6080280">true</span><span class="op" id="6080284">,</span>&nbsp;<span class="ident" id="6080286">p</span><span class="op" id="6080287">.</span><span class="ident" id="6080288">unmarshal</span><span class="op" id="6080297">(</span><span class="ident" id="6080298">finfo</span><span class="op" id="6080303">.</span><span class="ident" id="6080304">value</span><span class="op" id="6080309">(</span><span class="ident" id="6080310">sv</span><span class="op" id="6080312">)</span><span class="op" id="6080313">,</span>&nbsp;<span class="ident" id="6080315">start</span><span class="op" id="6080320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080328">if</span>&nbsp;<span class="builtinfunc" id="6080331">len</span><span class="op" id="6080334">(</span><span class="ident" id="6080335">finfo</span><span class="op" id="6080340">.</span><span class="ident" id="6080341">parents</span><span class="op" id="6080348">)</span>&nbsp;<span class="op" id="6080350">&gt;</span>&nbsp;<span class="builtinfunc" id="6080352">len</span><span class="op" id="6080355">(</span><span class="ident" id="6080356">parents</span><span class="op" id="6080363">)</span>&nbsp;<span class="op" id="6080365">&amp;&amp;</span>&nbsp;<span class="ident" id="6080368">finfo</span><span class="op" id="6080373">.</span><span class="ident" id="6080374">parents</span><span class="op" id="6080381">[</span><span class="builtinfunc" id="6080382">len</span><span class="op" id="6080385">(</span><span class="ident" id="6080386">parents</span><span class="op" id="6080393">)</span><span class="op" id="6080394">]</span>&nbsp;<span class="op" id="6080396">==</span>&nbsp;<span class="ident" id="6080399">start</span><span class="op" id="6080404">.</span><span class="ident" id="6080405">Name</span><span class="op" id="6080409">.</span><span class="ident" id="6080410">Local</span>&nbsp;<span class="op" id="6080416">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080421">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080474">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080530">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080571">recurse</span>&nbsp;<span class="op" id="6080579">=</span>&nbsp;<span class="builtintype" id="6080581">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080590">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080638">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080671">parents</span>&nbsp;<span class="op" id="6080679">=</span>&nbsp;<span class="ident" id="6080681">finfo</span><span class="op" id="6080686">.</span><span class="ident" id="6080687">parents</span><span class="op" id="6080694">[</span><span class="op" id="6080695">:</span><span class="builtinfunc" id="6080696">len</span><span class="op" id="6080699">(</span><span class="ident" id="6080700">parents</span><span class="op" id="6080707">)</span><span class="op" id="6080708">+</span><span class="num" id="6080709">1</span><span class="op" id="6080710">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080715">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080723">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080729">if</span>&nbsp;<span class="op" id="6080732">!</span><span class="ident" id="6080733">recurse</span>&nbsp;<span class="op" id="6080741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080745">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080789">return</span>&nbsp;<span class="builtintype" id="6080796">false</span><span class="op" id="6080801">,</span>&nbsp;<span class="ident" id="6080803">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080808">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080811">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080873">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080934">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080982">for</span>&nbsp;<span class="op" id="6080986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080990">var</span>&nbsp;<span class="ident" id="6080994">tok</span>&nbsp;<span class="ident" id="6080998">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081006">tok</span><span class="op" id="6081009">,</span>&nbsp;<span class="ident" id="6081011">err</span>&nbsp;<span class="op" id="6081015">=</span>&nbsp;<span class="ident" id="6081017">p</span><span class="op" id="6081018">.</span><span class="ident" id="6081019">Token</span><span class="op" id="6081024">(</span><span class="op" id="6081025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081029">if</span>&nbsp;<span class="ident" id="6081032">err</span>&nbsp;<span class="op" id="6081036">!=</span>&nbsp;<span class="ident" id="6081039">nil</span>&nbsp;<span class="op" id="6081043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081048">return</span>&nbsp;<span class="builtintype" id="6081055">true</span><span class="op" id="6081059">,</span>&nbsp;<span class="ident" id="6081061">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081071">switch</span>&nbsp;<span class="ident" id="6081078">t</span>&nbsp;<span class="op" id="6081080">:=</span>&nbsp;<span class="ident" id="6081083">tok</span><span class="op" id="6081086">.</span><span class="op" id="6081087">(</span><span class="keyword" id="6081088">type</span><span class="op" id="6081092">)</span>&nbsp;<span class="op" id="6081094">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081098">case</span>&nbsp;<span class="ident" id="6081103">StartElement</span><span class="op" id="6081115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081120">consumed2</span><span class="op" id="6081129">,</span>&nbsp;<span class="ident" id="6081131">err</span>&nbsp;<span class="op" id="6081135">:=</span>&nbsp;<span class="ident" id="6081138">p</span><span class="op" id="6081139">.</span><span class="ident" id="6081140">unmarshalPath</span><span class="op" id="6081153">(</span><span class="ident" id="6081154">tinfo</span><span class="op" id="6081159">,</span>&nbsp;<span class="ident" id="6081161">sv</span><span class="op" id="6081163">,</span>&nbsp;<span class="ident" id="6081165">parents</span><span class="op" id="6081172">,</span>&nbsp;<span class="op" id="6081174">&amp;</span><span class="ident" id="6081175">t</span><span class="op" id="6081176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081181">if</span>&nbsp;<span class="ident" id="6081184">err</span>&nbsp;<span class="op" id="6081188">!=</span>&nbsp;<span class="ident" id="6081191">nil</span>&nbsp;<span class="op" id="6081195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081201">return</span>&nbsp;<span class="builtintype" id="6081208">true</span><span class="op" id="6081212">,</span>&nbsp;<span class="ident" id="6081214">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081221">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081226">if</span>&nbsp;<span class="op" id="6081229">!</span><span class="ident" id="6081230">consumed2</span>&nbsp;<span class="op" id="6081240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081246">if</span>&nbsp;<span class="ident" id="6081249">err</span>&nbsp;<span class="op" id="6081253">:=</span>&nbsp;<span class="ident" id="6081256">p</span><span class="op" id="6081257">.</span><span class="ident" id="6081258">Skip</span><span class="op" id="6081262">(</span><span class="op" id="6081263">)</span><span class="op" id="6081264">;</span>&nbsp;<span class="ident" id="6081266">err</span>&nbsp;<span class="op" id="6081270">!=</span>&nbsp;<span class="ident" id="6081273">nil</span>&nbsp;<span class="op" id="6081277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081284">return</span>&nbsp;<span class="builtintype" id="6081291">true</span><span class="op" id="6081295">,</span>&nbsp;<span class="ident" id="6081297">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081310">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081314">case</span>&nbsp;<span class="ident" id="6081319">EndElement</span><span class="op" id="6081329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081334">return</span>&nbsp;<span class="builtintype" id="6081341">true</span><span class="op" id="6081345">,</span>&nbsp;<span class="ident" id="6081347">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081356">}</span><br>
<span class="lineno"></span><span class="op" id="6081358">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6081361">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6081420">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6081480">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6081548">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6081575">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6081639">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6081705">func</span>&nbsp;<span class="op" id="6081710">(</span><span class="ident" id="6081711">d</span>&nbsp;<span class="op" id="6081713">*</span><span class="ident" id="6081714">Decoder</span><span class="op" id="6081721">)</span>&nbsp;<span class="ident" id="6081723">Skip</span><span class="op" id="6081727">(</span><span class="op" id="6081728">)</span>&nbsp;<span class="builtintype" id="6081730">error</span>&nbsp;<span class="op" id="6081736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081739">for</span>&nbsp;<span class="op" id="6081743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081747">tok</span><span class="op" id="6081750">,</span>&nbsp;<span class="ident" id="6081752">err</span>&nbsp;<span class="op" id="6081756">:=</span>&nbsp;<span class="ident" id="6081759">d</span><span class="op" id="6081760">.</span><span class="ident" id="6081761">Token</span><span class="op" id="6081766">(</span><span class="op" id="6081767">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081771">if</span>&nbsp;<span class="ident" id="6081774">err</span>&nbsp;<span class="op" id="6081778">!=</span>&nbsp;<span class="ident" id="6081781">nil</span>&nbsp;<span class="op" id="6081785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081790">return</span>&nbsp;<span class="ident" id="6081797">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081807">switch</span>&nbsp;<span class="ident" id="6081814">tok</span><span class="op" id="6081817">.</span><span class="op" id="6081818">(</span><span class="keyword" id="6081819">type</span><span class="op" id="6081823">)</span>&nbsp;<span class="op" id="6081825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081829">case</span>&nbsp;<span class="ident" id="6081834">StartElement</span><span class="op" id="6081846">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081851">if</span>&nbsp;<span class="ident" id="6081854">err</span>&nbsp;<span class="op" id="6081858">:=</span>&nbsp;<span class="ident" id="6081861">d</span><span class="op" id="6081862">.</span><span class="ident" id="6081863">Skip</span><span class="op" id="6081867">(</span><span class="op" id="6081868">)</span><span class="op" id="6081869">;</span>&nbsp;<span class="ident" id="6081871">err</span>&nbsp;<span class="op" id="6081875">!=</span>&nbsp;<span class="ident" id="6081878">nil</span>&nbsp;<span class="op" id="6081882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081888">return</span>&nbsp;<span class="ident" id="6081895">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081906">case</span>&nbsp;<span class="ident" id="6081911">EndElement</span><span class="op" id="6081921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081926">return</span>&nbsp;<span class="ident" id="6081933">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081942">}</span><br>
<span class="lineno"></span><span class="op" id="6081944">}</span>
</div>
</body>
</html>
