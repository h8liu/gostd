<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3631857">package</span>&nbsp;<span class="ident" id="3631865">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3631871">import</span>&nbsp;<span class="op" id="3631878">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3631881">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3631904">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3631907">func</span>&nbsp;<span class="ident" id="3631912">varSize</span><span class="op" id="3631919">(</span><span class="ident" id="3631920">v</span>&nbsp;<span class="op" id="3631922">*</span><span class="ident" id="3631923">varDecl</span><span class="op" id="3631930">)</span>&nbsp;<span class="builtintype" id="3631932">int</span>&nbsp;<span class="op" id="3631936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3631939">ret</span>&nbsp;<span class="op" id="3631943">:=</span>&nbsp;<span class="num" id="3631946">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3631949">for</span>&nbsp;<span class="ident" id="3631953">_</span><span class="op" id="3631954">,</span>&nbsp;<span class="ident" id="3631956">stmt</span>&nbsp;<span class="op" id="3631961">:=</span>&nbsp;<span class="keyword" id="3631964">range</span>&nbsp;<span class="ident" id="3631970">v</span><span class="op" id="3631971">.</span><span class="ident" id="3631972">stmts</span>&nbsp;<span class="op" id="3631978">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3631982">ret</span>&nbsp;<span class="op" id="3631986">+=</span>&nbsp;<span class="builtinfunc" id="3631989">len</span><span class="op" id="3631992">(</span><span class="ident" id="3631993">stmt</span><span class="op" id="3631997">.</span><span class="ident" id="3631998">data</span><span class="op" id="3632002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632009">return</span>&nbsp;<span class="ident" id="3632016">ret</span><br>
<span class="lineno"></span><span class="op" id="3632020">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3632023">func</span>&nbsp;<span class="ident" id="3632028">varAlign</span><span class="op" id="3632036">(</span><span class="ident" id="3632037">v</span>&nbsp;<span class="op" id="3632039">*</span><span class="ident" id="3632040">varDecl</span><span class="op" id="3632047">)</span>&nbsp;<span class="builtintype" id="3632049">uint32</span>&nbsp;<span class="op" id="3632056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632059">for</span>&nbsp;<span class="ident" id="3632063">_</span><span class="op" id="3632064">,</span>&nbsp;<span class="ident" id="3632066">stmt</span>&nbsp;<span class="op" id="3632071">:=</span>&nbsp;<span class="keyword" id="3632074">range</span>&nbsp;<span class="ident" id="3632080">v</span><span class="op" id="3632081">.</span><span class="ident" id="3632082">stmts</span>&nbsp;<span class="op" id="3632088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632092">if</span>&nbsp;<span class="ident" id="3632095">stmt</span><span class="op" id="3632099">.</span><span class="ident" id="3632100">align</span>&nbsp;<span class="op" id="3632106">==</span>&nbsp;<span class="num" id="3632109">4</span>&nbsp;<span class="op" id="3632111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632116">return</span>&nbsp;<span class="num" id="3632123">4</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632133">return</span>&nbsp;<span class="num" id="3632140">1</span><br>
<span class="lineno"></span><span class="op" id="3632142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="3632145">func</span>&nbsp;<span class="ident" id="3632150">buildVar</span><span class="op" id="3632158">(</span><span class="ident" id="3632159">b</span>&nbsp;<span class="op" id="3632161">*</span><span class="ident" id="3632162">builder</span><span class="op" id="3632169">,</span>&nbsp;<span class="ident" id="3632171">v</span>&nbsp;<span class="op" id="3632173">*</span><span class="ident" id="3632174">varDecl</span><span class="op" id="3632181">)</span>&nbsp;<span class="op" id="3632183">*</span><span class="ident" id="3632184">link8</span><span class="op" id="3632189">.</span><span class="ident" id="3632190">Var</span>&nbsp;<span class="op" id="3632194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632197">if</span>&nbsp;<span class="ident" id="3632200">varSize</span><span class="op" id="3632207">(</span><span class="ident" id="3632208">v</span><span class="op" id="3632209">)</span>&nbsp;<span class="op" id="3632211">==</span>&nbsp;<span class="num" id="3632214">0</span>&nbsp;<span class="op" id="3632216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632220">b</span><span class="op" id="3632221">.</span><span class="ident" id="3632222">err</span><span class="op" id="3632225">(</span><span class="ident" id="3632226">v</span><span class="op" id="3632227">.</span><span class="ident" id="3632228">name</span><span class="op" id="3632232">.</span><span class="ident" id="3632233">Pos</span><span class="op" id="3632236">,</span>&nbsp;<span class="string" id="3632238">&#34;var&nbsp;%q&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="3632258">,</span>&nbsp;<span class="ident" id="3632260">v</span><span class="op" id="3632261">.</span><span class="ident" id="3632262">name</span><span class="op" id="3632266">.</span><span class="ident" id="3632267">Lit</span><span class="op" id="3632270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632274">return</span>&nbsp;<span class="ident" id="3632281">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632286">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632290">ret</span>&nbsp;<span class="op" id="3632294">:=</span>&nbsp;<span class="ident" id="3632297">link8</span><span class="op" id="3632302">.</span><span class="ident" id="3632303">NewVar</span><span class="op" id="3632309">(</span><span class="ident" id="3632310">varAlign</span><span class="op" id="3632318">(</span><span class="ident" id="3632319">v</span><span class="op" id="3632320">)</span><span class="op" id="3632321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632324">for</span>&nbsp;<span class="ident" id="3632328">_</span><span class="op" id="3632329">,</span>&nbsp;<span class="ident" id="3632331">stmt</span>&nbsp;<span class="op" id="3632336">:=</span>&nbsp;<span class="keyword" id="3632339">range</span>&nbsp;<span class="ident" id="3632345">v</span><span class="op" id="3632346">.</span><span class="ident" id="3632347">stmts</span>&nbsp;<span class="op" id="3632353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632357">n</span>&nbsp;<span class="op" id="3632359">:=</span>&nbsp;<span class="ident" id="3632362">ret</span><span class="op" id="3632365">.</span><span class="ident" id="3632366">Size</span><span class="op" id="3632370">(</span><span class="op" id="3632371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632375">if</span>&nbsp;<span class="ident" id="3632378">stmt</span><span class="op" id="3632382">.</span><span class="ident" id="3632383">align</span>&nbsp;<span class="op" id="3632389">==</span>&nbsp;<span class="num" id="3632392">4</span>&nbsp;<span class="op" id="3632394">&amp;&amp;</span>&nbsp;<span class="ident" id="3632397">n</span><span class="op" id="3632398">%</span><span class="num" id="3632399">4</span>&nbsp;<span class="op" id="3632401">!=</span>&nbsp;<span class="num" id="3632404">0</span>&nbsp;<span class="op" id="3632406">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632411">ret</span><span class="op" id="3632414">.</span><span class="ident" id="3632415">Pad</span><span class="op" id="3632418">(</span><span class="num" id="3632419">4</span>&nbsp;<span class="op" id="3632421">-</span>&nbsp;<span class="ident" id="3632423">n</span><span class="op" id="3632424">%</span><span class="num" id="3632425">4</span><span class="op" id="3632426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632435">ret</span><span class="op" id="3632438">.</span><span class="ident" id="3632439">Write</span><span class="op" id="3632444">(</span><span class="ident" id="3632445">stmt</span><span class="op" id="3632449">.</span><span class="ident" id="3632450">data</span><span class="op" id="3632454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632457">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632461">if</span>&nbsp;<span class="ident" id="3632464">ret</span><span class="op" id="3632467">.</span><span class="ident" id="3632468">TooLarge</span><span class="op" id="3632476">(</span><span class="op" id="3632477">)</span>&nbsp;<span class="op" id="3632479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3632483">b</span><span class="op" id="3632484">.</span><span class="ident" id="3632485">err</span><span class="op" id="3632488">(</span><span class="ident" id="3632489">v</span><span class="op" id="3632490">.</span><span class="ident" id="3632491">name</span><span class="op" id="3632495">.</span><span class="ident" id="3632496">Pos</span><span class="op" id="3632499">,</span>&nbsp;<span class="string" id="3632501">&#34;var&nbsp;%q&nbsp;too&nbsp;large&#34;</span><span class="op" id="3632519">,</span>&nbsp;<span class="ident" id="3632521">v</span><span class="op" id="3632522">.</span><span class="ident" id="3632523">name</span><span class="op" id="3632527">.</span><span class="ident" id="3632528">Lit</span><span class="op" id="3632531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632535">return</span>&nbsp;<span class="ident" id="3632542">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3632547">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3632551">return</span>&nbsp;<span class="ident" id="3632558">ret</span><br>
<span class="lineno"></span><span class="op" id="3632562">}</span>
</div>
</body>
</html>
