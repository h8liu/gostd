<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html" class="current">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7609518">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7609573">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7609627">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7609678">package</span>&nbsp;<span class="ident" id="7609686">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609691">import</span>&nbsp;<span class="op" id="7609698">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609701">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609709">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609715">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609721">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609732">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609743">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7609750">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7609753">func</span>&nbsp;<span class="ident" id="7609758">skipServerTest</span><span class="op" id="7609772">(</span><span class="ident" id="7609773">net</span><span class="op" id="7609776">,</span>&nbsp;<span class="ident" id="7609778">unixsotype</span><span class="op" id="7609788">,</span>&nbsp;<span class="ident" id="7609790">addr</span>&nbsp;<span class="builtintype" id="7609795">string</span><span class="op" id="7609801">,</span>&nbsp;<span class="ident" id="7609803">ipv6</span><span class="op" id="7609807">,</span>&nbsp;<span class="ident" id="7609809">ipv4map</span><span class="op" id="7609816">,</span>&nbsp;<span class="ident" id="7609818">linuxOnly</span>&nbsp;<span class="builtintype" id="7609828">bool</span><span class="op" id="7609832">)</span>&nbsp;<span class="builtintype" id="7609834">bool</span>&nbsp;<span class="op" id="7609839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609842">switch</span>&nbsp;<span class="ident" id="7609849">runtime</span><span class="op" id="7609856">.</span><span class="ident" id="7609857">GOOS</span>&nbsp;<span class="op" id="7609862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609865">case</span>&nbsp;<span class="string" id="7609870">&#34;linux&#34;</span><span class="op" id="7609877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609880">case</span>&nbsp;<span class="string" id="7609885">&#34;nacl&#34;</span><span class="op" id="7609891">,</span>&nbsp;<span class="string" id="7609893">&#34;plan9&#34;</span><span class="op" id="7609900">,</span>&nbsp;<span class="string" id="7609902">&#34;windows&#34;</span><span class="op" id="7609911">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7609915">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609976">if</span>&nbsp;<span class="ident" id="7609979">net</span>&nbsp;<span class="op" id="7609983">==</span>&nbsp;<span class="ident" id="7609986">unixsotype</span>&nbsp;<span class="op" id="7609997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610002">return</span>&nbsp;<span class="builtintype" id="7610009">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610019">default</span><span class="op" id="7610026">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610030">if</span>&nbsp;<span class="ident" id="7610033">net</span>&nbsp;<span class="op" id="7610037">==</span>&nbsp;<span class="ident" id="7610040">unixsotype</span>&nbsp;<span class="op" id="7610051">&amp;&amp;</span>&nbsp;<span class="ident" id="7610054">linuxOnly</span>&nbsp;<span class="op" id="7610064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610069">return</span>&nbsp;<span class="builtintype" id="7610076">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610089">switch</span>&nbsp;<span class="ident" id="7610096">addr</span>&nbsp;<span class="op" id="7610101">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610104">case</span>&nbsp;<span class="string" id="7610109">&#34;&#34;</span><span class="op" id="7610111">,</span>&nbsp;<span class="string" id="7610113">&#34;0.0.0.0&#34;</span><span class="op" id="7610122">,</span>&nbsp;<span class="string" id="7610124">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7610142">,</span>&nbsp;<span class="string" id="7610144">&#34;[::]&#34;</span><span class="op" id="7610150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610154">if</span>&nbsp;<span class="ident" id="7610157">testing</span><span class="op" id="7610164">.</span><span class="ident" id="7610165">Short</span><span class="op" id="7610170">(</span><span class="op" id="7610171">)</span>&nbsp;<span class="op" id="7610173">||</span>&nbsp;<span class="op" id="7610176">!</span><span class="op" id="7610177">*</span><span class="ident" id="7610178">testExternal</span>&nbsp;<span class="op" id="7610191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610196">return</span>&nbsp;<span class="builtintype" id="7610203">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610213">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610216">if</span>&nbsp;<span class="ident" id="7610219">ipv6</span>&nbsp;<span class="op" id="7610224">&amp;&amp;</span>&nbsp;<span class="op" id="7610227">!</span><span class="ident" id="7610228">supportsIPv6</span>&nbsp;<span class="op" id="7610241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610245">return</span>&nbsp;<span class="builtintype" id="7610252">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610261">if</span>&nbsp;<span class="ident" id="7610264">ipv4map</span>&nbsp;<span class="op" id="7610272">&amp;&amp;</span>&nbsp;<span class="op" id="7610275">!</span><span class="ident" id="7610276">supportsIPv4map</span>&nbsp;<span class="op" id="7610292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610296">return</span>&nbsp;<span class="builtintype" id="7610303">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610312">return</span>&nbsp;<span class="builtintype" id="7610319">false</span><br>
<span class="lineno"></span><span class="op" id="7610325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610328">var</span>&nbsp;<span class="ident" id="7610332">streamConnServerTests</span>&nbsp;<span class="op" id="7610354">=</span>&nbsp;<span class="op" id="7610356">[</span><span class="op" id="7610357">]</span><span class="keyword" id="7610358">struct</span>&nbsp;<span class="op" id="7610365">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610368">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610378">string</span>&nbsp;<span class="comment" id="7610385">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610401">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610411">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610419">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610429">string</span>&nbsp;<span class="comment" id="7610436">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610452">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610462">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610470">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610480">bool</span>&nbsp;<span class="comment" id="7610485">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610526">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610536">bool</span>&nbsp;<span class="comment" id="7610541">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610587">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7610597">bool</span>&nbsp;<span class="comment" id="7610602">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610627">linuxOnly</span>&nbsp;<span class="builtintype" id="7610637">bool</span>&nbsp;<span class="comment" id="7610642">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7610696">}</span><span class="op" id="7610697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610700">{</span><span class="ident" id="7610701">snet</span><span class="op" id="7610705">:</span>&nbsp;<span class="string" id="7610707">&#34;tcp&#34;</span><span class="op" id="7610712">,</span>&nbsp;<span class="ident" id="7610714">saddr</span><span class="op" id="7610719">:</span>&nbsp;<span class="string" id="7610721">&#34;&#34;</span><span class="op" id="7610723">,</span>&nbsp;<span class="ident" id="7610725">cnet</span><span class="op" id="7610729">:</span>&nbsp;<span class="string" id="7610731">&#34;tcp&#34;</span><span class="op" id="7610736">,</span>&nbsp;<span class="ident" id="7610738">caddr</span><span class="op" id="7610743">:</span>&nbsp;<span class="string" id="7610745">&#34;127.0.0.1&#34;</span><span class="op" id="7610756">}</span><span class="op" id="7610757">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610760">{</span><span class="ident" id="7610761">snet</span><span class="op" id="7610765">:</span>&nbsp;<span class="string" id="7610767">&#34;tcp&#34;</span><span class="op" id="7610772">,</span>&nbsp;<span class="ident" id="7610774">saddr</span><span class="op" id="7610779">:</span>&nbsp;<span class="string" id="7610781">&#34;0.0.0.0&#34;</span><span class="op" id="7610790">,</span>&nbsp;<span class="ident" id="7610792">cnet</span><span class="op" id="7610796">:</span>&nbsp;<span class="string" id="7610798">&#34;tcp&#34;</span><span class="op" id="7610803">,</span>&nbsp;<span class="ident" id="7610805">caddr</span><span class="op" id="7610810">:</span>&nbsp;<span class="string" id="7610812">&#34;127.0.0.1&#34;</span><span class="op" id="7610823">}</span><span class="op" id="7610824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610827">{</span><span class="ident" id="7610828">snet</span><span class="op" id="7610832">:</span>&nbsp;<span class="string" id="7610834">&#34;tcp&#34;</span><span class="op" id="7610839">,</span>&nbsp;<span class="ident" id="7610841">saddr</span><span class="op" id="7610846">:</span>&nbsp;<span class="string" id="7610848">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7610866">,</span>&nbsp;<span class="ident" id="7610868">cnet</span><span class="op" id="7610872">:</span>&nbsp;<span class="string" id="7610874">&#34;tcp&#34;</span><span class="op" id="7610879">,</span>&nbsp;<span class="ident" id="7610881">caddr</span><span class="op" id="7610886">:</span>&nbsp;<span class="string" id="7610888">&#34;127.0.0.1&#34;</span><span class="op" id="7610899">}</span><span class="op" id="7610900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610903">{</span><span class="ident" id="7610904">snet</span><span class="op" id="7610908">:</span>&nbsp;<span class="string" id="7610910">&#34;tcp&#34;</span><span class="op" id="7610915">,</span>&nbsp;<span class="ident" id="7610917">saddr</span><span class="op" id="7610922">:</span>&nbsp;<span class="string" id="7610924">&#34;[::]&#34;</span><span class="op" id="7610930">,</span>&nbsp;<span class="ident" id="7610932">cnet</span><span class="op" id="7610936">:</span>&nbsp;<span class="string" id="7610938">&#34;tcp&#34;</span><span class="op" id="7610943">,</span>&nbsp;<span class="ident" id="7610945">caddr</span><span class="op" id="7610950">:</span>&nbsp;<span class="string" id="7610952">&#34;[::1]&#34;</span><span class="op" id="7610959">,</span>&nbsp;<span class="ident" id="7610961">ipv6</span><span class="op" id="7610965">:</span>&nbsp;<span class="builtintype" id="7610967">true</span><span class="op" id="7610971">}</span><span class="op" id="7610972">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610976">{</span><span class="ident" id="7610977">snet</span><span class="op" id="7610981">:</span>&nbsp;<span class="string" id="7610983">&#34;tcp&#34;</span><span class="op" id="7610988">,</span>&nbsp;<span class="ident" id="7610990">saddr</span><span class="op" id="7610995">:</span>&nbsp;<span class="string" id="7610997">&#34;&#34;</span><span class="op" id="7610999">,</span>&nbsp;<span class="ident" id="7611001">cnet</span><span class="op" id="7611005">:</span>&nbsp;<span class="string" id="7611007">&#34;tcp&#34;</span><span class="op" id="7611012">,</span>&nbsp;<span class="ident" id="7611014">caddr</span><span class="op" id="7611019">:</span>&nbsp;<span class="string" id="7611021">&#34;[::1]&#34;</span><span class="op" id="7611028">,</span>&nbsp;<span class="ident" id="7611030">ipv4map</span><span class="op" id="7611037">:</span>&nbsp;<span class="builtintype" id="7611039">true</span><span class="op" id="7611043">}</span><span class="op" id="7611044">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611047">{</span><span class="ident" id="7611048">snet</span><span class="op" id="7611052">:</span>&nbsp;<span class="string" id="7611054">&#34;tcp&#34;</span><span class="op" id="7611059">,</span>&nbsp;<span class="ident" id="7611061">saddr</span><span class="op" id="7611066">:</span>&nbsp;<span class="string" id="7611068">&#34;0.0.0.0&#34;</span><span class="op" id="7611077">,</span>&nbsp;<span class="ident" id="7611079">cnet</span><span class="op" id="7611083">:</span>&nbsp;<span class="string" id="7611085">&#34;tcp&#34;</span><span class="op" id="7611090">,</span>&nbsp;<span class="ident" id="7611092">caddr</span><span class="op" id="7611097">:</span>&nbsp;<span class="string" id="7611099">&#34;[::1]&#34;</span><span class="op" id="7611106">,</span>&nbsp;<span class="ident" id="7611108">ipv4map</span><span class="op" id="7611115">:</span>&nbsp;<span class="builtintype" id="7611117">true</span><span class="op" id="7611121">}</span><span class="op" id="7611122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611125">{</span><span class="ident" id="7611126">snet</span><span class="op" id="7611130">:</span>&nbsp;<span class="string" id="7611132">&#34;tcp&#34;</span><span class="op" id="7611137">,</span>&nbsp;<span class="ident" id="7611139">saddr</span><span class="op" id="7611144">:</span>&nbsp;<span class="string" id="7611146">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7611164">,</span>&nbsp;<span class="ident" id="7611166">cnet</span><span class="op" id="7611170">:</span>&nbsp;<span class="string" id="7611172">&#34;tcp&#34;</span><span class="op" id="7611177">,</span>&nbsp;<span class="ident" id="7611179">caddr</span><span class="op" id="7611184">:</span>&nbsp;<span class="string" id="7611186">&#34;[::1]&#34;</span><span class="op" id="7611193">,</span>&nbsp;<span class="ident" id="7611195">ipv4map</span><span class="op" id="7611202">:</span>&nbsp;<span class="builtintype" id="7611204">true</span><span class="op" id="7611208">}</span><span class="op" id="7611209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611212">{</span><span class="ident" id="7611213">snet</span><span class="op" id="7611217">:</span>&nbsp;<span class="string" id="7611219">&#34;tcp&#34;</span><span class="op" id="7611224">,</span>&nbsp;<span class="ident" id="7611226">saddr</span><span class="op" id="7611231">:</span>&nbsp;<span class="string" id="7611233">&#34;[::]&#34;</span><span class="op" id="7611239">,</span>&nbsp;<span class="ident" id="7611241">cnet</span><span class="op" id="7611245">:</span>&nbsp;<span class="string" id="7611247">&#34;tcp&#34;</span><span class="op" id="7611252">,</span>&nbsp;<span class="ident" id="7611254">caddr</span><span class="op" id="7611259">:</span>&nbsp;<span class="string" id="7611261">&#34;127.0.0.1&#34;</span><span class="op" id="7611272">,</span>&nbsp;<span class="ident" id="7611274">ipv4map</span><span class="op" id="7611281">:</span>&nbsp;<span class="builtintype" id="7611283">true</span><span class="op" id="7611287">}</span><span class="op" id="7611288">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611292">{</span><span class="ident" id="7611293">snet</span><span class="op" id="7611297">:</span>&nbsp;<span class="string" id="7611299">&#34;tcp&#34;</span><span class="op" id="7611304">,</span>&nbsp;<span class="ident" id="7611306">saddr</span><span class="op" id="7611311">:</span>&nbsp;<span class="string" id="7611313">&#34;&#34;</span><span class="op" id="7611315">,</span>&nbsp;<span class="ident" id="7611317">cnet</span><span class="op" id="7611321">:</span>&nbsp;<span class="string" id="7611323">&#34;tcp4&#34;</span><span class="op" id="7611329">,</span>&nbsp;<span class="ident" id="7611331">caddr</span><span class="op" id="7611336">:</span>&nbsp;<span class="string" id="7611338">&#34;127.0.0.1&#34;</span><span class="op" id="7611349">}</span><span class="op" id="7611350">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611353">{</span><span class="ident" id="7611354">snet</span><span class="op" id="7611358">:</span>&nbsp;<span class="string" id="7611360">&#34;tcp&#34;</span><span class="op" id="7611365">,</span>&nbsp;<span class="ident" id="7611367">saddr</span><span class="op" id="7611372">:</span>&nbsp;<span class="string" id="7611374">&#34;0.0.0.0&#34;</span><span class="op" id="7611383">,</span>&nbsp;<span class="ident" id="7611385">cnet</span><span class="op" id="7611389">:</span>&nbsp;<span class="string" id="7611391">&#34;tcp4&#34;</span><span class="op" id="7611397">,</span>&nbsp;<span class="ident" id="7611399">caddr</span><span class="op" id="7611404">:</span>&nbsp;<span class="string" id="7611406">&#34;127.0.0.1&#34;</span><span class="op" id="7611417">}</span><span class="op" id="7611418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611421">{</span><span class="ident" id="7611422">snet</span><span class="op" id="7611426">:</span>&nbsp;<span class="string" id="7611428">&#34;tcp&#34;</span><span class="op" id="7611433">,</span>&nbsp;<span class="ident" id="7611435">saddr</span><span class="op" id="7611440">:</span>&nbsp;<span class="string" id="7611442">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7611460">,</span>&nbsp;<span class="ident" id="7611462">cnet</span><span class="op" id="7611466">:</span>&nbsp;<span class="string" id="7611468">&#34;tcp4&#34;</span><span class="op" id="7611474">,</span>&nbsp;<span class="ident" id="7611476">caddr</span><span class="op" id="7611481">:</span>&nbsp;<span class="string" id="7611483">&#34;127.0.0.1&#34;</span><span class="op" id="7611494">}</span><span class="op" id="7611495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611498">{</span><span class="ident" id="7611499">snet</span><span class="op" id="7611503">:</span>&nbsp;<span class="string" id="7611505">&#34;tcp&#34;</span><span class="op" id="7611510">,</span>&nbsp;<span class="ident" id="7611512">saddr</span><span class="op" id="7611517">:</span>&nbsp;<span class="string" id="7611519">&#34;[::]&#34;</span><span class="op" id="7611525">,</span>&nbsp;<span class="ident" id="7611527">cnet</span><span class="op" id="7611531">:</span>&nbsp;<span class="string" id="7611533">&#34;tcp6&#34;</span><span class="op" id="7611539">,</span>&nbsp;<span class="ident" id="7611541">caddr</span><span class="op" id="7611546">:</span>&nbsp;<span class="string" id="7611548">&#34;[::1]&#34;</span><span class="op" id="7611555">,</span>&nbsp;<span class="ident" id="7611557">ipv6</span><span class="op" id="7611561">:</span>&nbsp;<span class="builtintype" id="7611563">true</span><span class="op" id="7611567">}</span><span class="op" id="7611568">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611572">{</span><span class="ident" id="7611573">snet</span><span class="op" id="7611577">:</span>&nbsp;<span class="string" id="7611579">&#34;tcp&#34;</span><span class="op" id="7611584">,</span>&nbsp;<span class="ident" id="7611586">saddr</span><span class="op" id="7611591">:</span>&nbsp;<span class="string" id="7611593">&#34;&#34;</span><span class="op" id="7611595">,</span>&nbsp;<span class="ident" id="7611597">cnet</span><span class="op" id="7611601">:</span>&nbsp;<span class="string" id="7611603">&#34;tcp6&#34;</span><span class="op" id="7611609">,</span>&nbsp;<span class="ident" id="7611611">caddr</span><span class="op" id="7611616">:</span>&nbsp;<span class="string" id="7611618">&#34;[::1]&#34;</span><span class="op" id="7611625">,</span>&nbsp;<span class="ident" id="7611627">ipv4map</span><span class="op" id="7611634">:</span>&nbsp;<span class="builtintype" id="7611636">true</span><span class="op" id="7611640">}</span><span class="op" id="7611641">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611644">{</span><span class="ident" id="7611645">snet</span><span class="op" id="7611649">:</span>&nbsp;<span class="string" id="7611651">&#34;tcp&#34;</span><span class="op" id="7611656">,</span>&nbsp;<span class="ident" id="7611658">saddr</span><span class="op" id="7611663">:</span>&nbsp;<span class="string" id="7611665">&#34;0.0.0.0&#34;</span><span class="op" id="7611674">,</span>&nbsp;<span class="ident" id="7611676">cnet</span><span class="op" id="7611680">:</span>&nbsp;<span class="string" id="7611682">&#34;tcp6&#34;</span><span class="op" id="7611688">,</span>&nbsp;<span class="ident" id="7611690">caddr</span><span class="op" id="7611695">:</span>&nbsp;<span class="string" id="7611697">&#34;[::1]&#34;</span><span class="op" id="7611704">,</span>&nbsp;<span class="ident" id="7611706">ipv4map</span><span class="op" id="7611713">:</span>&nbsp;<span class="builtintype" id="7611715">true</span><span class="op" id="7611719">}</span><span class="op" id="7611720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611723">{</span><span class="ident" id="7611724">snet</span><span class="op" id="7611728">:</span>&nbsp;<span class="string" id="7611730">&#34;tcp&#34;</span><span class="op" id="7611735">,</span>&nbsp;<span class="ident" id="7611737">saddr</span><span class="op" id="7611742">:</span>&nbsp;<span class="string" id="7611744">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7611762">,</span>&nbsp;<span class="ident" id="7611764">cnet</span><span class="op" id="7611768">:</span>&nbsp;<span class="string" id="7611770">&#34;tcp6&#34;</span><span class="op" id="7611776">,</span>&nbsp;<span class="ident" id="7611778">caddr</span><span class="op" id="7611783">:</span>&nbsp;<span class="string" id="7611785">&#34;[::1]&#34;</span><span class="op" id="7611792">,</span>&nbsp;<span class="ident" id="7611794">ipv4map</span><span class="op" id="7611801">:</span>&nbsp;<span class="builtintype" id="7611803">true</span><span class="op" id="7611807">}</span><span class="op" id="7611808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611811">{</span><span class="ident" id="7611812">snet</span><span class="op" id="7611816">:</span>&nbsp;<span class="string" id="7611818">&#34;tcp&#34;</span><span class="op" id="7611823">,</span>&nbsp;<span class="ident" id="7611825">saddr</span><span class="op" id="7611830">:</span>&nbsp;<span class="string" id="7611832">&#34;[::]&#34;</span><span class="op" id="7611838">,</span>&nbsp;<span class="ident" id="7611840">cnet</span><span class="op" id="7611844">:</span>&nbsp;<span class="string" id="7611846">&#34;tcp4&#34;</span><span class="op" id="7611852">,</span>&nbsp;<span class="ident" id="7611854">caddr</span><span class="op" id="7611859">:</span>&nbsp;<span class="string" id="7611861">&#34;127.0.0.1&#34;</span><span class="op" id="7611872">,</span>&nbsp;<span class="ident" id="7611874">ipv4map</span><span class="op" id="7611881">:</span>&nbsp;<span class="builtintype" id="7611883">true</span><span class="op" id="7611887">}</span><span class="op" id="7611888">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611892">{</span><span class="ident" id="7611893">snet</span><span class="op" id="7611897">:</span>&nbsp;<span class="string" id="7611899">&#34;tcp&#34;</span><span class="op" id="7611904">,</span>&nbsp;<span class="ident" id="7611906">saddr</span><span class="op" id="7611911">:</span>&nbsp;<span class="string" id="7611913">&#34;127.0.0.1&#34;</span><span class="op" id="7611924">,</span>&nbsp;<span class="ident" id="7611926">cnet</span><span class="op" id="7611930">:</span>&nbsp;<span class="string" id="7611932">&#34;tcp&#34;</span><span class="op" id="7611937">,</span>&nbsp;<span class="ident" id="7611939">caddr</span><span class="op" id="7611944">:</span>&nbsp;<span class="string" id="7611946">&#34;127.0.0.1&#34;</span><span class="op" id="7611957">}</span><span class="op" id="7611958">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611961">{</span><span class="ident" id="7611962">snet</span><span class="op" id="7611966">:</span>&nbsp;<span class="string" id="7611968">&#34;tcp&#34;</span><span class="op" id="7611973">,</span>&nbsp;<span class="ident" id="7611975">saddr</span><span class="op" id="7611980">:</span>&nbsp;<span class="string" id="7611982">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7612002">,</span>&nbsp;<span class="ident" id="7612004">cnet</span><span class="op" id="7612008">:</span>&nbsp;<span class="string" id="7612010">&#34;tcp&#34;</span><span class="op" id="7612015">,</span>&nbsp;<span class="ident" id="7612017">caddr</span><span class="op" id="7612022">:</span>&nbsp;<span class="string" id="7612024">&#34;127.0.0.1&#34;</span><span class="op" id="7612035">}</span><span class="op" id="7612036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612039">{</span><span class="ident" id="7612040">snet</span><span class="op" id="7612044">:</span>&nbsp;<span class="string" id="7612046">&#34;tcp&#34;</span><span class="op" id="7612051">,</span>&nbsp;<span class="ident" id="7612053">saddr</span><span class="op" id="7612058">:</span>&nbsp;<span class="string" id="7612060">&#34;[::1]&#34;</span><span class="op" id="7612067">,</span>&nbsp;<span class="ident" id="7612069">cnet</span><span class="op" id="7612073">:</span>&nbsp;<span class="string" id="7612075">&#34;tcp&#34;</span><span class="op" id="7612080">,</span>&nbsp;<span class="ident" id="7612082">caddr</span><span class="op" id="7612087">:</span>&nbsp;<span class="string" id="7612089">&#34;[::1]&#34;</span><span class="op" id="7612096">,</span>&nbsp;<span class="ident" id="7612098">ipv6</span><span class="op" id="7612102">:</span>&nbsp;<span class="builtintype" id="7612104">true</span><span class="op" id="7612108">}</span><span class="op" id="7612109">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612113">{</span><span class="ident" id="7612114">snet</span><span class="op" id="7612118">:</span>&nbsp;<span class="string" id="7612120">&#34;tcp4&#34;</span><span class="op" id="7612126">,</span>&nbsp;<span class="ident" id="7612128">saddr</span><span class="op" id="7612133">:</span>&nbsp;<span class="string" id="7612135">&#34;&#34;</span><span class="op" id="7612137">,</span>&nbsp;<span class="ident" id="7612139">cnet</span><span class="op" id="7612143">:</span>&nbsp;<span class="string" id="7612145">&#34;tcp4&#34;</span><span class="op" id="7612151">,</span>&nbsp;<span class="ident" id="7612153">caddr</span><span class="op" id="7612158">:</span>&nbsp;<span class="string" id="7612160">&#34;127.0.0.1&#34;</span><span class="op" id="7612171">}</span><span class="op" id="7612172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612175">{</span><span class="ident" id="7612176">snet</span><span class="op" id="7612180">:</span>&nbsp;<span class="string" id="7612182">&#34;tcp4&#34;</span><span class="op" id="7612188">,</span>&nbsp;<span class="ident" id="7612190">saddr</span><span class="op" id="7612195">:</span>&nbsp;<span class="string" id="7612197">&#34;0.0.0.0&#34;</span><span class="op" id="7612206">,</span>&nbsp;<span class="ident" id="7612208">cnet</span><span class="op" id="7612212">:</span>&nbsp;<span class="string" id="7612214">&#34;tcp4&#34;</span><span class="op" id="7612220">,</span>&nbsp;<span class="ident" id="7612222">caddr</span><span class="op" id="7612227">:</span>&nbsp;<span class="string" id="7612229">&#34;127.0.0.1&#34;</span><span class="op" id="7612240">}</span><span class="op" id="7612241">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612244">{</span><span class="ident" id="7612245">snet</span><span class="op" id="7612249">:</span>&nbsp;<span class="string" id="7612251">&#34;tcp4&#34;</span><span class="op" id="7612257">,</span>&nbsp;<span class="ident" id="7612259">saddr</span><span class="op" id="7612264">:</span>&nbsp;<span class="string" id="7612266">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7612284">,</span>&nbsp;<span class="ident" id="7612286">cnet</span><span class="op" id="7612290">:</span>&nbsp;<span class="string" id="7612292">&#34;tcp4&#34;</span><span class="op" id="7612298">,</span>&nbsp;<span class="ident" id="7612300">caddr</span><span class="op" id="7612305">:</span>&nbsp;<span class="string" id="7612307">&#34;127.0.0.1&#34;</span><span class="op" id="7612318">}</span><span class="op" id="7612319">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612323">{</span><span class="ident" id="7612324">snet</span><span class="op" id="7612328">:</span>&nbsp;<span class="string" id="7612330">&#34;tcp4&#34;</span><span class="op" id="7612336">,</span>&nbsp;<span class="ident" id="7612338">saddr</span><span class="op" id="7612343">:</span>&nbsp;<span class="string" id="7612345">&#34;127.0.0.1&#34;</span><span class="op" id="7612356">,</span>&nbsp;<span class="ident" id="7612358">cnet</span><span class="op" id="7612362">:</span>&nbsp;<span class="string" id="7612364">&#34;tcp4&#34;</span><span class="op" id="7612370">,</span>&nbsp;<span class="ident" id="7612372">caddr</span><span class="op" id="7612377">:</span>&nbsp;<span class="string" id="7612379">&#34;127.0.0.1&#34;</span><span class="op" id="7612390">}</span><span class="op" id="7612391">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612395">{</span><span class="ident" id="7612396">snet</span><span class="op" id="7612400">:</span>&nbsp;<span class="string" id="7612402">&#34;tcp6&#34;</span><span class="op" id="7612408">,</span>&nbsp;<span class="ident" id="7612410">saddr</span><span class="op" id="7612415">:</span>&nbsp;<span class="string" id="7612417">&#34;&#34;</span><span class="op" id="7612419">,</span>&nbsp;<span class="ident" id="7612421">cnet</span><span class="op" id="7612425">:</span>&nbsp;<span class="string" id="7612427">&#34;tcp6&#34;</span><span class="op" id="7612433">,</span>&nbsp;<span class="ident" id="7612435">caddr</span><span class="op" id="7612440">:</span>&nbsp;<span class="string" id="7612442">&#34;[::1]&#34;</span><span class="op" id="7612449">,</span>&nbsp;<span class="ident" id="7612451">ipv6</span><span class="op" id="7612455">:</span>&nbsp;<span class="builtintype" id="7612457">true</span><span class="op" id="7612461">}</span><span class="op" id="7612462">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612465">{</span><span class="ident" id="7612466">snet</span><span class="op" id="7612470">:</span>&nbsp;<span class="string" id="7612472">&#34;tcp6&#34;</span><span class="op" id="7612478">,</span>&nbsp;<span class="ident" id="7612480">saddr</span><span class="op" id="7612485">:</span>&nbsp;<span class="string" id="7612487">&#34;[::]&#34;</span><span class="op" id="7612493">,</span>&nbsp;<span class="ident" id="7612495">cnet</span><span class="op" id="7612499">:</span>&nbsp;<span class="string" id="7612501">&#34;tcp6&#34;</span><span class="op" id="7612507">,</span>&nbsp;<span class="ident" id="7612509">caddr</span><span class="op" id="7612514">:</span>&nbsp;<span class="string" id="7612516">&#34;[::1]&#34;</span><span class="op" id="7612523">,</span>&nbsp;<span class="ident" id="7612525">ipv6</span><span class="op" id="7612529">:</span>&nbsp;<span class="builtintype" id="7612531">true</span><span class="op" id="7612535">}</span><span class="op" id="7612536">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612540">{</span><span class="ident" id="7612541">snet</span><span class="op" id="7612545">:</span>&nbsp;<span class="string" id="7612547">&#34;tcp6&#34;</span><span class="op" id="7612553">,</span>&nbsp;<span class="ident" id="7612555">saddr</span><span class="op" id="7612560">:</span>&nbsp;<span class="string" id="7612562">&#34;[::1]&#34;</span><span class="op" id="7612569">,</span>&nbsp;<span class="ident" id="7612571">cnet</span><span class="op" id="7612575">:</span>&nbsp;<span class="string" id="7612577">&#34;tcp6&#34;</span><span class="op" id="7612583">,</span>&nbsp;<span class="ident" id="7612585">caddr</span><span class="op" id="7612590">:</span>&nbsp;<span class="string" id="7612592">&#34;[::1]&#34;</span><span class="op" id="7612599">,</span>&nbsp;<span class="ident" id="7612601">ipv6</span><span class="op" id="7612605">:</span>&nbsp;<span class="builtintype" id="7612607">true</span><span class="op" id="7612611">}</span><span class="op" id="7612612">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612616">{</span><span class="ident" id="7612617">snet</span><span class="op" id="7612621">:</span>&nbsp;<span class="string" id="7612623">&#34;unix&#34;</span><span class="op" id="7612629">,</span>&nbsp;<span class="ident" id="7612631">saddr</span><span class="op" id="7612636">:</span>&nbsp;<span class="ident" id="7612638">testUnixAddr</span><span class="op" id="7612650">(</span><span class="op" id="7612651">)</span><span class="op" id="7612652">,</span>&nbsp;<span class="ident" id="7612654">cnet</span><span class="op" id="7612658">:</span>&nbsp;<span class="string" id="7612660">&#34;unix&#34;</span><span class="op" id="7612666">,</span>&nbsp;<span class="ident" id="7612668">caddr</span><span class="op" id="7612673">:</span>&nbsp;<span class="ident" id="7612675">testUnixAddr</span><span class="op" id="7612687">(</span><span class="op" id="7612688">)</span><span class="op" id="7612689">}</span><span class="op" id="7612690">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612693">{</span><span class="ident" id="7612694">snet</span><span class="op" id="7612698">:</span>&nbsp;<span class="string" id="7612700">&#34;unix&#34;</span><span class="op" id="7612706">,</span>&nbsp;<span class="ident" id="7612708">saddr</span><span class="op" id="7612713">:</span>&nbsp;<span class="string" id="7612715">&#34;@gotest2/net&#34;</span><span class="op" id="7612729">,</span>&nbsp;<span class="ident" id="7612731">cnet</span><span class="op" id="7612735">:</span>&nbsp;<span class="string" id="7612737">&#34;unix&#34;</span><span class="op" id="7612743">,</span>&nbsp;<span class="ident" id="7612745">caddr</span><span class="op" id="7612750">:</span>&nbsp;<span class="string" id="7612752">&#34;@gotest2/net.local&#34;</span><span class="op" id="7612772">,</span>&nbsp;<span class="ident" id="7612774">linuxOnly</span><span class="op" id="7612783">:</span>&nbsp;<span class="builtintype" id="7612785">true</span><span class="op" id="7612789">}</span><span class="op" id="7612790">,</span><br>
<span class="lineno"></span><span class="op" id="7612792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7612795">func</span>&nbsp;<span class="ident" id="7612800">TestStreamConnServer</span><span class="op" id="7612820">(</span><span class="ident" id="7612821">t</span>&nbsp;<span class="op" id="7612823">*</span><span class="ident" id="7612824">testing</span><span class="op" id="7612831">.</span><span class="ident" id="7612832">T</span><span class="op" id="7612833">)</span>&nbsp;<span class="op" id="7612835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612838">for</span>&nbsp;<span class="ident" id="7612842">_</span><span class="op" id="7612843">,</span>&nbsp;<span class="ident" id="7612845">tt</span>&nbsp;<span class="op" id="7612848">:=</span>&nbsp;<span class="keyword" id="7612851">range</span>&nbsp;<span class="ident" id="7612857">streamConnServerTests</span>&nbsp;<span class="op" id="7612879">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612883">if</span>&nbsp;<span class="ident" id="7612886">skipServerTest</span><span class="op" id="7612900">(</span><span class="ident" id="7612901">tt</span><span class="op" id="7612903">.</span><span class="ident" id="7612904">snet</span><span class="op" id="7612908">,</span>&nbsp;<span class="string" id="7612910">&#34;unix&#34;</span><span class="op" id="7612916">,</span>&nbsp;<span class="ident" id="7612918">tt</span><span class="op" id="7612920">.</span><span class="ident" id="7612921">saddr</span><span class="op" id="7612926">,</span>&nbsp;<span class="ident" id="7612928">tt</span><span class="op" id="7612930">.</span><span class="ident" id="7612931">ipv6</span><span class="op" id="7612935">,</span>&nbsp;<span class="ident" id="7612937">tt</span><span class="op" id="7612939">.</span><span class="ident" id="7612940">ipv4map</span><span class="op" id="7612947">,</span>&nbsp;<span class="ident" id="7612949">tt</span><span class="op" id="7612951">.</span><span class="ident" id="7612952">linuxOnly</span><span class="op" id="7612961">)</span>&nbsp;<span class="op" id="7612963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612968">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612984">listening</span>&nbsp;<span class="op" id="7612994">:=</span>&nbsp;<span class="builtinfunc" id="7612997">make</span><span class="op" id="7613001">(</span><span class="keyword" id="7613002">chan</span>&nbsp;<span class="builtintype" id="7613007">string</span><span class="op" id="7613013">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613017">done</span>&nbsp;<span class="op" id="7613022">:=</span>&nbsp;<span class="builtinfunc" id="7613025">make</span><span class="op" id="7613029">(</span><span class="keyword" id="7613030">chan</span>&nbsp;<span class="builtintype" id="7613035">int</span><span class="op" id="7613038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613042">switch</span>&nbsp;<span class="ident" id="7613049">tt</span><span class="op" id="7613051">.</span><span class="ident" id="7613052">snet</span>&nbsp;<span class="op" id="7613057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613061">case</span>&nbsp;<span class="string" id="7613066">&#34;tcp&#34;</span><span class="op" id="7613071">,</span>&nbsp;<span class="string" id="7613073">&#34;tcp4&#34;</span><span class="op" id="7613079">,</span>&nbsp;<span class="string" id="7613081">&#34;tcp6&#34;</span><span class="op" id="7613087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613092">tt</span><span class="op" id="7613094">.</span><span class="ident" id="7613095">saddr</span>&nbsp;<span class="op" id="7613101">+=</span>&nbsp;<span class="string" id="7613104">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613111">case</span>&nbsp;<span class="string" id="7613116">&#34;unix&#34;</span><span class="op" id="7613122">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613127">os</span><span class="op" id="7613129">.</span><span class="ident" id="7613130">Remove</span><span class="op" id="7613136">(</span><span class="ident" id="7613137">tt</span><span class="op" id="7613139">.</span><span class="ident" id="7613140">saddr</span><span class="op" id="7613145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613150">os</span><span class="op" id="7613152">.</span><span class="ident" id="7613153">Remove</span><span class="op" id="7613159">(</span><span class="ident" id="7613160">tt</span><span class="op" id="7613162">.</span><span class="ident" id="7613163">caddr</span><span class="op" id="7613168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613177">go</span>&nbsp;<span class="ident" id="7613180">runStreamConnServer</span><span class="op" id="7613199">(</span><span class="ident" id="7613200">t</span><span class="op" id="7613201">,</span>&nbsp;<span class="ident" id="7613203">tt</span><span class="op" id="7613205">.</span><span class="ident" id="7613206">snet</span><span class="op" id="7613210">,</span>&nbsp;<span class="ident" id="7613212">tt</span><span class="op" id="7613214">.</span><span class="ident" id="7613215">saddr</span><span class="op" id="7613220">,</span>&nbsp;<span class="ident" id="7613222">listening</span><span class="op" id="7613231">,</span>&nbsp;<span class="ident" id="7613233">done</span><span class="op" id="7613237">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613241">taddr</span>&nbsp;<span class="op" id="7613247">:=</span>&nbsp;<span class="op" id="7613250">&lt;-</span><span class="ident" id="7613252">listening</span>&nbsp;<span class="comment" id="7613262">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613293">switch</span>&nbsp;<span class="ident" id="7613300">tt</span><span class="op" id="7613302">.</span><span class="ident" id="7613303">cnet</span>&nbsp;<span class="op" id="7613308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613312">case</span>&nbsp;<span class="string" id="7613317">&#34;tcp&#34;</span><span class="op" id="7613322">,</span>&nbsp;<span class="string" id="7613324">&#34;tcp4&#34;</span><span class="op" id="7613330">,</span>&nbsp;<span class="string" id="7613332">&#34;tcp6&#34;</span><span class="op" id="7613338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613343">_</span><span class="op" id="7613344">,</span>&nbsp;<span class="ident" id="7613346">port</span><span class="op" id="7613350">,</span>&nbsp;<span class="ident" id="7613352">err</span>&nbsp;<span class="op" id="7613356">:=</span>&nbsp;<span class="ident" id="7613359">SplitHostPort</span><span class="op" id="7613372">(</span><span class="ident" id="7613373">taddr</span><span class="op" id="7613378">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613383">if</span>&nbsp;<span class="ident" id="7613386">err</span>&nbsp;<span class="op" id="7613390">!=</span>&nbsp;<span class="ident" id="7613393">nil</span>&nbsp;<span class="op" id="7613397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613403">t</span><span class="op" id="7613404">.</span><span class="ident" id="7613405">Fatalf</span><span class="op" id="7613411">(</span><span class="string" id="7613412">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7613442">,</span>&nbsp;<span class="ident" id="7613444">taddr</span><span class="op" id="7613449">,</span>&nbsp;<span class="ident" id="7613451">err</span><span class="op" id="7613454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613464">taddr</span>&nbsp;<span class="op" id="7613470">=</span>&nbsp;<span class="ident" id="7613472">tt</span><span class="op" id="7613474">.</span><span class="ident" id="7613475">caddr</span>&nbsp;<span class="op" id="7613481">+</span>&nbsp;<span class="string" id="7613483">&#34;:&#34;</span>&nbsp;<span class="op" id="7613487">+</span>&nbsp;<span class="ident" id="7613489">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613496">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613501">runStreamConnClient</span><span class="op" id="7613520">(</span><span class="ident" id="7613521">t</span><span class="op" id="7613522">,</span>&nbsp;<span class="ident" id="7613524">tt</span><span class="op" id="7613526">.</span><span class="ident" id="7613527">cnet</span><span class="op" id="7613531">,</span>&nbsp;<span class="ident" id="7613533">taddr</span><span class="op" id="7613538">,</span>&nbsp;<span class="ident" id="7613540">tt</span><span class="op" id="7613542">.</span><span class="ident" id="7613543">empty</span><span class="op" id="7613548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613552">&lt;-</span><span class="ident" id="7613554">done</span>&nbsp;<span class="comment" id="7613559">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613590">switch</span>&nbsp;<span class="ident" id="7613597">tt</span><span class="op" id="7613599">.</span><span class="ident" id="7613600">snet</span>&nbsp;<span class="op" id="7613605">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613609">case</span>&nbsp;<span class="string" id="7613614">&#34;unix&#34;</span><span class="op" id="7613620">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613625">os</span><span class="op" id="7613627">.</span><span class="ident" id="7613628">Remove</span><span class="op" id="7613634">(</span><span class="ident" id="7613635">tt</span><span class="op" id="7613637">.</span><span class="ident" id="7613638">saddr</span><span class="op" id="7613643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613648">os</span><span class="op" id="7613650">.</span><span class="ident" id="7613651">Remove</span><span class="op" id="7613657">(</span><span class="ident" id="7613658">tt</span><span class="op" id="7613660">.</span><span class="ident" id="7613661">caddr</span><span class="op" id="7613666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613673">}</span><br>
<span class="lineno">130</span><span class="op" id="7613675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7613678">var</span>&nbsp;<span class="ident" id="7613682">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7613707">=</span>&nbsp;<span class="op" id="7613709">[</span><span class="op" id="7613710">]</span><span class="keyword" id="7613711">struct</span>&nbsp;<span class="op" id="7613718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613721">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7613731">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613739">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7613749">string</span>&nbsp;<span class="comment" id="7613756">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613775">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7613785">string</span>&nbsp;<span class="comment" id="7613792">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613811">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7613821">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7613828">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613853">linuxOnly</span>&nbsp;<span class="builtintype" id="7613863">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7613870">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7613924">}</span><span class="op" id="7613925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613928">{</span><span class="ident" id="7613929">net</span><span class="op" id="7613932">:</span>&nbsp;<span class="string" id="7613934">&#34;unixpacket&#34;</span><span class="op" id="7613946">,</span>&nbsp;<span class="ident" id="7613948">saddr</span><span class="op" id="7613953">:</span>&nbsp;<span class="ident" id="7613955">testUnixAddr</span><span class="op" id="7613967">(</span><span class="op" id="7613968">)</span><span class="op" id="7613969">,</span>&nbsp;<span class="ident" id="7613971">caddr</span><span class="op" id="7613976">:</span>&nbsp;<span class="ident" id="7613978">testUnixAddr</span><span class="op" id="7613990">(</span><span class="op" id="7613991">)</span><span class="op" id="7613992">}</span><span class="op" id="7613993">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613996">{</span><span class="ident" id="7613997">net</span><span class="op" id="7614000">:</span>&nbsp;<span class="string" id="7614002">&#34;unixpacket&#34;</span><span class="op" id="7614014">,</span>&nbsp;<span class="ident" id="7614016">saddr</span><span class="op" id="7614021">:</span>&nbsp;<span class="string" id="7614023">&#34;@gotest4/net&#34;</span><span class="op" id="7614037">,</span>&nbsp;<span class="ident" id="7614039">caddr</span><span class="op" id="7614044">:</span>&nbsp;<span class="string" id="7614046">&#34;@gotest4/net.local&#34;</span><span class="op" id="7614066">,</span>&nbsp;<span class="ident" id="7614068">linuxOnly</span><span class="op" id="7614077">:</span>&nbsp;<span class="builtintype" id="7614079">true</span><span class="op" id="7614083">}</span><span class="op" id="7614084">,</span><br>
<span class="lineno"></span><span class="op" id="7614086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7614089">func</span>&nbsp;<span class="ident" id="7614094">TestSeqpacketConnServer</span><span class="op" id="7614117">(</span><span class="ident" id="7614118">t</span>&nbsp;<span class="op" id="7614120">*</span><span class="ident" id="7614121">testing</span><span class="op" id="7614128">.</span><span class="ident" id="7614129">T</span><span class="op" id="7614130">)</span>&nbsp;<span class="op" id="7614132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614135">switch</span>&nbsp;<span class="ident" id="7614142">runtime</span><span class="op" id="7614149">.</span><span class="ident" id="7614150">GOOS</span>&nbsp;<span class="op" id="7614155">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614158">case</span>&nbsp;<span class="string" id="7614163">&#34;darwin&#34;</span><span class="op" id="7614171">,</span>&nbsp;<span class="string" id="7614173">&#34;nacl&#34;</span><span class="op" id="7614179">,</span>&nbsp;<span class="string" id="7614181">&#34;openbsd&#34;</span><span class="op" id="7614190">,</span>&nbsp;<span class="string" id="7614192">&#34;plan9&#34;</span><span class="op" id="7614199">,</span>&nbsp;<span class="string" id="7614201">&#34;windows&#34;</span><span class="op" id="7614210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614214">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614227">case</span>&nbsp;<span class="string" id="7614232">&#34;freebsd&#34;</span><span class="op" id="7614241">:</span>&nbsp;<span class="comment" id="7614243">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614285">t</span><span class="op" id="7614286">.</span><span class="ident" id="7614287">Skipf</span><span class="op" id="7614292">(</span><span class="string" id="7614293">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7614314">,</span>&nbsp;<span class="ident" id="7614316">runtime</span><span class="op" id="7614323">.</span><span class="ident" id="7614324">GOOS</span><span class="op" id="7614328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614331">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614335">for</span>&nbsp;<span class="ident" id="7614339">_</span><span class="op" id="7614340">,</span>&nbsp;<span class="ident" id="7614342">tt</span>&nbsp;<span class="op" id="7614345">:=</span>&nbsp;<span class="keyword" id="7614348">range</span>&nbsp;<span class="ident" id="7614354">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7614379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614383">if</span>&nbsp;<span class="ident" id="7614386">runtime</span><span class="op" id="7614393">.</span><span class="ident" id="7614394">GOOS</span>&nbsp;<span class="op" id="7614399">!=</span>&nbsp;<span class="string" id="7614402">&#34;linux&#34;</span>&nbsp;<span class="op" id="7614410">&amp;&amp;</span>&nbsp;<span class="ident" id="7614413">tt</span><span class="op" id="7614415">.</span><span class="ident" id="7614416">linuxOnly</span>&nbsp;<span class="op" id="7614426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614431">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614442">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614446">listening</span>&nbsp;<span class="op" id="7614456">:=</span>&nbsp;<span class="builtinfunc" id="7614459">make</span><span class="op" id="7614463">(</span><span class="keyword" id="7614464">chan</span>&nbsp;<span class="builtintype" id="7614469">string</span><span class="op" id="7614475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614479">done</span>&nbsp;<span class="op" id="7614484">:=</span>&nbsp;<span class="builtinfunc" id="7614487">make</span><span class="op" id="7614491">(</span><span class="keyword" id="7614492">chan</span>&nbsp;<span class="builtintype" id="7614497">int</span><span class="op" id="7614500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614504">switch</span>&nbsp;<span class="ident" id="7614511">tt</span><span class="op" id="7614513">.</span><span class="ident" id="7614514">net</span>&nbsp;<span class="op" id="7614518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614522">case</span>&nbsp;<span class="string" id="7614527">&#34;unixpacket&#34;</span><span class="op" id="7614539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614544">os</span><span class="op" id="7614546">.</span><span class="ident" id="7614547">Remove</span><span class="op" id="7614553">(</span><span class="ident" id="7614554">tt</span><span class="op" id="7614556">.</span><span class="ident" id="7614557">saddr</span><span class="op" id="7614562">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614567">os</span><span class="op" id="7614569">.</span><span class="ident" id="7614570">Remove</span><span class="op" id="7614576">(</span><span class="ident" id="7614577">tt</span><span class="op" id="7614579">.</span><span class="ident" id="7614580">caddr</span><span class="op" id="7614585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614594">go</span>&nbsp;<span class="ident" id="7614597">runStreamConnServer</span><span class="op" id="7614616">(</span><span class="ident" id="7614617">t</span><span class="op" id="7614618">,</span>&nbsp;<span class="ident" id="7614620">tt</span><span class="op" id="7614622">.</span><span class="ident" id="7614623">net</span><span class="op" id="7614626">,</span>&nbsp;<span class="ident" id="7614628">tt</span><span class="op" id="7614630">.</span><span class="ident" id="7614631">saddr</span><span class="op" id="7614636">,</span>&nbsp;<span class="ident" id="7614638">listening</span><span class="op" id="7614647">,</span>&nbsp;<span class="ident" id="7614649">done</span><span class="op" id="7614653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614657">taddr</span>&nbsp;<span class="op" id="7614663">:=</span>&nbsp;<span class="op" id="7614666">&lt;-</span><span class="ident" id="7614668">listening</span>&nbsp;<span class="comment" id="7614678">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614709">runStreamConnClient</span><span class="op" id="7614728">(</span><span class="ident" id="7614729">t</span><span class="op" id="7614730">,</span>&nbsp;<span class="ident" id="7614732">tt</span><span class="op" id="7614734">.</span><span class="ident" id="7614735">net</span><span class="op" id="7614738">,</span>&nbsp;<span class="ident" id="7614740">taddr</span><span class="op" id="7614745">,</span>&nbsp;<span class="ident" id="7614747">tt</span><span class="op" id="7614749">.</span><span class="ident" id="7614750">empty</span><span class="op" id="7614755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614759">&lt;-</span><span class="ident" id="7614761">done</span>&nbsp;<span class="comment" id="7614766">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614797">switch</span>&nbsp;<span class="ident" id="7614804">tt</span><span class="op" id="7614806">.</span><span class="ident" id="7614807">net</span>&nbsp;<span class="op" id="7614811">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614815">case</span>&nbsp;<span class="string" id="7614820">&#34;unixpacket&#34;</span><span class="op" id="7614832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614837">os</span><span class="op" id="7614839">.</span><span class="ident" id="7614840">Remove</span><span class="op" id="7614846">(</span><span class="ident" id="7614847">tt</span><span class="op" id="7614849">.</span><span class="ident" id="7614850">saddr</span><span class="op" id="7614855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614860">os</span><span class="op" id="7614862">.</span><span class="ident" id="7614863">Remove</span><span class="op" id="7614869">(</span><span class="ident" id="7614870">tt</span><span class="op" id="7614872">.</span><span class="ident" id="7614873">caddr</span><span class="op" id="7614878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614885">}</span><br>
<span class="lineno">175</span><span class="op" id="7614887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7614890">func</span>&nbsp;<span class="ident" id="7614895">runStreamConnServer</span><span class="op" id="7614914">(</span><span class="ident" id="7614915">t</span>&nbsp;<span class="op" id="7614917">*</span><span class="ident" id="7614918">testing</span><span class="op" id="7614925">.</span><span class="ident" id="7614926">T</span><span class="op" id="7614927">,</span>&nbsp;<span class="ident" id="7614929">net</span><span class="op" id="7614932">,</span>&nbsp;<span class="ident" id="7614934">laddr</span>&nbsp;<span class="builtintype" id="7614940">string</span><span class="op" id="7614946">,</span>&nbsp;<span class="ident" id="7614948">listening</span>&nbsp;<span class="keyword" id="7614958">chan</span><span class="op" id="7614962">&lt;-</span>&nbsp;<span class="builtintype" id="7614965">string</span><span class="op" id="7614971">,</span>&nbsp;<span class="ident" id="7614973">done</span>&nbsp;<span class="keyword" id="7614978">chan</span><span class="op" id="7614982">&lt;-</span>&nbsp;<span class="builtintype" id="7614985">int</span><span class="op" id="7614988">)</span>&nbsp;<span class="op" id="7614990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614993">defer</span>&nbsp;<span class="builtinfunc" id="7614999">close</span><span class="op" id="7615004">(</span><span class="ident" id="7615005">done</span><span class="op" id="7615009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615012">l</span><span class="op" id="7615013">,</span>&nbsp;<span class="ident" id="7615015">err</span>&nbsp;<span class="op" id="7615019">:=</span>&nbsp;<span class="ident" id="7615022">Listen</span><span class="op" id="7615028">(</span><span class="ident" id="7615029">net</span><span class="op" id="7615032">,</span>&nbsp;<span class="ident" id="7615034">laddr</span><span class="op" id="7615039">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615042">if</span>&nbsp;<span class="ident" id="7615045">err</span>&nbsp;<span class="op" id="7615049">!=</span>&nbsp;<span class="ident" id="7615052">nil</span>&nbsp;<span class="op" id="7615056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615060">t</span><span class="op" id="7615061">.</span><span class="ident" id="7615062">Errorf</span><span class="op" id="7615068">(</span><span class="string" id="7615069">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7615096">,</span>&nbsp;<span class="ident" id="7615098">net</span><span class="op" id="7615101">,</span>&nbsp;<span class="ident" id="7615103">laddr</span><span class="op" id="7615108">,</span>&nbsp;<span class="ident" id="7615110">err</span><span class="op" id="7615113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615117">listening</span>&nbsp;<span class="op" id="7615127">&lt;-</span>&nbsp;<span class="string" id="7615130">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615140">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615148">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615151">defer</span>&nbsp;<span class="ident" id="7615157">l</span><span class="op" id="7615158">.</span><span class="ident" id="7615159">Close</span><span class="op" id="7615164">(</span><span class="op" id="7615165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615168">listening</span>&nbsp;<span class="op" id="7615178">&lt;-</span>&nbsp;<span class="ident" id="7615181">l</span><span class="op" id="7615182">.</span><span class="ident" id="7615183">Addr</span><span class="op" id="7615187">(</span><span class="op" id="7615188">)</span><span class="op" id="7615189">.</span><span class="ident" id="7615190">String</span><span class="op" id="7615196">(</span><span class="op" id="7615197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615201">echo</span>&nbsp;<span class="op" id="7615206">:=</span>&nbsp;<span class="keyword" id="7615209">func</span><span class="op" id="7615213">(</span><span class="ident" id="7615214">rw</span>&nbsp;<span class="ident" id="7615217">io</span><span class="op" id="7615219">.</span><span class="ident" id="7615220">ReadWriter</span><span class="op" id="7615230">,</span>&nbsp;<span class="ident" id="7615232">done</span>&nbsp;<span class="keyword" id="7615237">chan</span><span class="op" id="7615241">&lt;-</span>&nbsp;<span class="builtintype" id="7615244">int</span><span class="op" id="7615247">)</span>&nbsp;<span class="op" id="7615249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615253">buf</span>&nbsp;<span class="op" id="7615257">:=</span>&nbsp;<span class="builtinfunc" id="7615260">make</span><span class="op" id="7615264">(</span><span class="op" id="7615265">[</span><span class="op" id="7615266">]</span><span class="builtintype" id="7615267">byte</span><span class="op" id="7615271">,</span>&nbsp;<span class="num" id="7615273">1024</span><span class="op" id="7615277">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615281">for</span>&nbsp;<span class="op" id="7615285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615290">n</span><span class="op" id="7615291">,</span>&nbsp;<span class="ident" id="7615293">err</span>&nbsp;<span class="op" id="7615297">:=</span>&nbsp;<span class="ident" id="7615300">rw</span><span class="op" id="7615302">.</span><span class="ident" id="7615303">Read</span><span class="op" id="7615307">(</span><span class="ident" id="7615308">buf</span><span class="op" id="7615311">[</span><span class="num" id="7615312">0</span><span class="op" id="7615313">:</span><span class="op" id="7615314">]</span><span class="op" id="7615315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615320">if</span>&nbsp;<span class="ident" id="7615323">err</span>&nbsp;<span class="op" id="7615327">!=</span>&nbsp;<span class="ident" id="7615330">nil</span>&nbsp;<span class="op" id="7615334">||</span>&nbsp;<span class="ident" id="7615337">n</span>&nbsp;<span class="op" id="7615339">==</span>&nbsp;<span class="num" id="7615342">0</span>&nbsp;<span class="op" id="7615344">||</span>&nbsp;<span class="builtintype" id="7615347">string</span><span class="op" id="7615353">(</span><span class="ident" id="7615354">buf</span><span class="op" id="7615357">[</span><span class="op" id="7615358">:</span><span class="ident" id="7615359">n</span><span class="op" id="7615360">]</span><span class="op" id="7615361">)</span>&nbsp;<span class="op" id="7615363">==</span>&nbsp;<span class="string" id="7615366">&#34;END&#34;</span>&nbsp;<span class="op" id="7615372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615378">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615387">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615392">rw</span><span class="op" id="7615394">.</span><span class="ident" id="7615395">Write</span><span class="op" id="7615400">(</span><span class="ident" id="7615401">buf</span><span class="op" id="7615404">[</span><span class="num" id="7615405">0</span><span class="op" id="7615406">:</span><span class="ident" id="7615407">n</span><span class="op" id="7615408">]</span><span class="op" id="7615409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7615417">close</span><span class="op" id="7615422">(</span><span class="ident" id="7615423">done</span><span class="op" id="7615427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="7615433">run</span><span class="op" id="7615436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615439">for</span>&nbsp;<span class="op" id="7615443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615447">c</span><span class="op" id="7615448">,</span>&nbsp;<span class="ident" id="7615450">err</span>&nbsp;<span class="op" id="7615454">:=</span>&nbsp;<span class="ident" id="7615457">l</span><span class="op" id="7615458">.</span><span class="ident" id="7615459">Accept</span><span class="op" id="7615465">(</span><span class="op" id="7615466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615470">if</span>&nbsp;<span class="ident" id="7615473">err</span>&nbsp;<span class="op" id="7615477">!=</span>&nbsp;<span class="ident" id="7615480">nil</span>&nbsp;<span class="op" id="7615484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615489">t</span><span class="op" id="7615490">.</span><span class="ident" id="7615491">Logf</span><span class="op" id="7615495">(</span><span class="string" id="7615496">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7615515">,</span>&nbsp;<span class="ident" id="7615517">err</span><span class="op" id="7615520">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615525">continue</span>&nbsp;<span class="ident" id="7615534">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615544">echodone</span>&nbsp;<span class="op" id="7615553">:=</span>&nbsp;<span class="builtinfunc" id="7615556">make</span><span class="op" id="7615560">(</span><span class="keyword" id="7615561">chan</span>&nbsp;<span class="builtintype" id="7615566">int</span><span class="op" id="7615569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615573">go</span>&nbsp;<span class="ident" id="7615576">echo</span><span class="op" id="7615580">(</span><span class="ident" id="7615581">c</span><span class="op" id="7615582">,</span>&nbsp;<span class="ident" id="7615584">echodone</span><span class="op" id="7615592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615596">&lt;-</span><span class="ident" id="7615598">echodone</span>&nbsp;<span class="comment" id="7615607">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615635">c</span><span class="op" id="7615636">.</span><span class="ident" id="7615637">Close</span><span class="op" id="7615642">(</span><span class="op" id="7615643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615647">break</span>&nbsp;<span class="ident" id="7615653">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615658">}</span><br>
<span class="lineno"></span><span class="op" id="7615660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7615663">func</span>&nbsp;<span class="ident" id="7615668">runStreamConnClient</span><span class="op" id="7615687">(</span><span class="ident" id="7615688">t</span>&nbsp;<span class="op" id="7615690">*</span><span class="ident" id="7615691">testing</span><span class="op" id="7615698">.</span><span class="ident" id="7615699">T</span><span class="op" id="7615700">,</span>&nbsp;<span class="ident" id="7615702">net</span><span class="op" id="7615705">,</span>&nbsp;<span class="ident" id="7615707">taddr</span>&nbsp;<span class="builtintype" id="7615713">string</span><span class="op" id="7615719">,</span>&nbsp;<span class="ident" id="7615721">isEmpty</span>&nbsp;<span class="builtintype" id="7615729">bool</span><span class="op" id="7615733">)</span>&nbsp;<span class="op" id="7615735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615738">c</span><span class="op" id="7615739">,</span>&nbsp;<span class="ident" id="7615741">err</span>&nbsp;<span class="op" id="7615745">:=</span>&nbsp;<span class="ident" id="7615748">Dial</span><span class="op" id="7615752">(</span><span class="ident" id="7615753">net</span><span class="op" id="7615756">,</span>&nbsp;<span class="ident" id="7615758">taddr</span><span class="op" id="7615763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615766">if</span>&nbsp;<span class="ident" id="7615769">err</span>&nbsp;<span class="op" id="7615773">!=</span>&nbsp;<span class="ident" id="7615776">nil</span>&nbsp;<span class="op" id="7615780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615784">t</span><span class="op" id="7615785">.</span><span class="ident" id="7615786">Fatalf</span><span class="op" id="7615792">(</span><span class="string" id="7615793">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7615818">,</span>&nbsp;<span class="ident" id="7615820">net</span><span class="op" id="7615823">,</span>&nbsp;<span class="ident" id="7615825">taddr</span><span class="op" id="7615830">,</span>&nbsp;<span class="ident" id="7615832">err</span><span class="op" id="7615835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615838">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615841">defer</span>&nbsp;<span class="ident" id="7615847">c</span><span class="op" id="7615848">.</span><span class="ident" id="7615849">Close</span><span class="op" id="7615854">(</span><span class="op" id="7615855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615858">c</span><span class="op" id="7615859">.</span><span class="ident" id="7615860">SetReadDeadline</span><span class="op" id="7615875">(</span><span class="ident" id="7615876">time</span><span class="op" id="7615880">.</span><span class="ident" id="7615881">Now</span><span class="op" id="7615884">(</span><span class="op" id="7615885">)</span><span class="op" id="7615886">.</span><span class="ident" id="7615887">Add</span><span class="op" id="7615890">(</span><span class="num" id="7615891">1</span>&nbsp;<span class="op" id="7615893">*</span>&nbsp;<span class="ident" id="7615895">time</span><span class="op" id="7615899">.</span><span class="ident" id="7615900">Second</span><span class="op" id="7615906">)</span><span class="op" id="7615907">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615911">var</span>&nbsp;<span class="ident" id="7615915">wb</span>&nbsp;<span class="op" id="7615918">[</span><span class="op" id="7615919">]</span><span class="builtintype" id="7615920">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615926">if</span>&nbsp;<span class="op" id="7615929">!</span><span class="ident" id="7615930">isEmpty</span>&nbsp;<span class="op" id="7615938">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615942">wb</span>&nbsp;<span class="op" id="7615945">=</span>&nbsp;<span class="op" id="7615947">[</span><span class="op" id="7615948">]</span><span class="builtintype" id="7615949">byte</span><span class="op" id="7615953">(</span><span class="string" id="7615954">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7615982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615988">if</span>&nbsp;<span class="ident" id="7615991">n</span><span class="op" id="7615992">,</span>&nbsp;<span class="ident" id="7615994">err</span>&nbsp;<span class="op" id="7615998">:=</span>&nbsp;<span class="ident" id="7616001">c</span><span class="op" id="7616002">.</span><span class="ident" id="7616003">Write</span><span class="op" id="7616008">(</span><span class="ident" id="7616009">wb</span><span class="op" id="7616011">)</span><span class="op" id="7616012">;</span>&nbsp;<span class="ident" id="7616014">err</span>&nbsp;<span class="op" id="7616018">!=</span>&nbsp;<span class="ident" id="7616021">nil</span>&nbsp;<span class="op" id="7616025">||</span>&nbsp;<span class="ident" id="7616028">n</span>&nbsp;<span class="op" id="7616030">!=</span>&nbsp;<span class="builtinfunc" id="7616033">len</span><span class="op" id="7616036">(</span><span class="ident" id="7616037">wb</span><span class="op" id="7616039">)</span>&nbsp;<span class="op" id="7616041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616045">t</span><span class="op" id="7616046">.</span><span class="ident" id="7616047">Fatalf</span><span class="op" id="7616053">(</span><span class="string" id="7616054">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7616092">,</span>&nbsp;<span class="ident" id="7616094">n</span><span class="op" id="7616095">,</span>&nbsp;<span class="ident" id="7616097">err</span><span class="op" id="7616100">,</span>&nbsp;<span class="builtinfunc" id="7616102">len</span><span class="op" id="7616105">(</span><span class="ident" id="7616106">wb</span><span class="op" id="7616108">)</span><span class="op" id="7616109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7616112">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616116">rb</span>&nbsp;<span class="op" id="7616119">:=</span>&nbsp;<span class="builtinfunc" id="7616122">make</span><span class="op" id="7616126">(</span><span class="op" id="7616127">[</span><span class="op" id="7616128">]</span><span class="builtintype" id="7616129">byte</span><span class="op" id="7616133">,</span>&nbsp;<span class="num" id="7616135">1024</span><span class="op" id="7616139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616142">if</span>&nbsp;<span class="ident" id="7616145">n</span><span class="op" id="7616146">,</span>&nbsp;<span class="ident" id="7616148">err</span>&nbsp;<span class="op" id="7616152">:=</span>&nbsp;<span class="ident" id="7616155">c</span><span class="op" id="7616156">.</span><span class="ident" id="7616157">Read</span><span class="op" id="7616161">(</span><span class="ident" id="7616162">rb</span><span class="op" id="7616164">[</span><span class="num" id="7616165">0</span><span class="op" id="7616166">:</span><span class="op" id="7616167">]</span><span class="op" id="7616168">)</span><span class="op" id="7616169">;</span>&nbsp;<span class="ident" id="7616171">err</span>&nbsp;<span class="op" id="7616175">!=</span>&nbsp;<span class="ident" id="7616178">nil</span>&nbsp;<span class="op" id="7616182">||</span>&nbsp;<span class="ident" id="7616185">n</span>&nbsp;<span class="op" id="7616187">!=</span>&nbsp;<span class="builtinfunc" id="7616190">len</span><span class="op" id="7616193">(</span><span class="ident" id="7616194">wb</span><span class="op" id="7616196">)</span>&nbsp;<span class="op" id="7616198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616202">t</span><span class="op" id="7616203">.</span><span class="ident" id="7616204">Fatalf</span><span class="op" id="7616210">(</span><span class="string" id="7616211">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7616248">,</span>&nbsp;<span class="ident" id="7616250">n</span><span class="op" id="7616251">,</span>&nbsp;<span class="ident" id="7616253">err</span><span class="op" id="7616256">,</span>&nbsp;<span class="builtinfunc" id="7616258">len</span><span class="op" id="7616261">(</span><span class="ident" id="7616262">wb</span><span class="op" id="7616264">)</span><span class="op" id="7616265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7616268">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7616272">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7616313">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616365">switch</span>&nbsp;<span class="ident" id="7616372">net</span>&nbsp;<span class="op" id="7616376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616379">case</span>&nbsp;<span class="string" id="7616384">&#34;unixpacket&#34;</span><span class="op" id="7616396">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616400">c</span><span class="op" id="7616401">.</span><span class="ident" id="7616402">Write</span><span class="op" id="7616407">(</span><span class="op" id="7616408">[</span><span class="op" id="7616409">]</span><span class="builtintype" id="7616410">byte</span><span class="op" id="7616414">(</span><span class="string" id="7616415">&#34;END&#34;</span><span class="op" id="7616420">)</span><span class="op" id="7616421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7616424">}</span><br>
<span class="lineno"></span><span class="op" id="7616426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7616429">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="7616472">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="7616523">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="7616575">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="7616605">var</span>&nbsp;<span class="ident" id="7616609">testDatagram</span>&nbsp;<span class="op" id="7616622">=</span>&nbsp;<span class="ident" id="7616624">flag</span><span class="op" id="7616628">.</span><span class="ident" id="7616629">Bool</span><span class="op" id="7616633">(</span><span class="string" id="7616634">&#34;datagram&#34;</span><span class="op" id="7616644">,</span>&nbsp;<span class="builtintype" id="7616646">false</span><span class="op" id="7616651">,</span>&nbsp;<span class="string" id="7616653">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="7616687">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7616690">var</span>&nbsp;<span class="ident" id="7616694">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7616724">=</span>&nbsp;<span class="op" id="7616726">[</span><span class="op" id="7616727">]</span><span class="keyword" id="7616728">struct</span>&nbsp;<span class="op" id="7616735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616738">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616748">string</span>&nbsp;<span class="comment" id="7616755">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616771">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616781">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616789">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616799">string</span>&nbsp;<span class="comment" id="7616806">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616822">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616832">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616840">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616850">bool</span>&nbsp;<span class="comment" id="7616855">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616896">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616906">bool</span>&nbsp;<span class="comment" id="7616911">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616957">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7616967">bool</span>&nbsp;<span class="comment" id="7616972">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617003">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7617013">bool</span>&nbsp;<span class="comment" id="7617018">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617043">linuxOnly</span>&nbsp;<span class="builtintype" id="7617053">bool</span>&nbsp;<span class="comment" id="7617058">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="7617112">}</span><span class="op" id="7617113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617116">{</span><span class="ident" id="7617117">snet</span><span class="op" id="7617121">:</span>&nbsp;<span class="string" id="7617123">&#34;udp&#34;</span><span class="op" id="7617128">,</span>&nbsp;<span class="ident" id="7617130">saddr</span><span class="op" id="7617135">:</span>&nbsp;<span class="string" id="7617137">&#34;&#34;</span><span class="op" id="7617139">,</span>&nbsp;<span class="ident" id="7617141">cnet</span><span class="op" id="7617145">:</span>&nbsp;<span class="string" id="7617147">&#34;udp&#34;</span><span class="op" id="7617152">,</span>&nbsp;<span class="ident" id="7617154">caddr</span><span class="op" id="7617159">:</span>&nbsp;<span class="string" id="7617161">&#34;127.0.0.1&#34;</span><span class="op" id="7617172">}</span><span class="op" id="7617173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617176">{</span><span class="ident" id="7617177">snet</span><span class="op" id="7617181">:</span>&nbsp;<span class="string" id="7617183">&#34;udp&#34;</span><span class="op" id="7617188">,</span>&nbsp;<span class="ident" id="7617190">saddr</span><span class="op" id="7617195">:</span>&nbsp;<span class="string" id="7617197">&#34;0.0.0.0&#34;</span><span class="op" id="7617206">,</span>&nbsp;<span class="ident" id="7617208">cnet</span><span class="op" id="7617212">:</span>&nbsp;<span class="string" id="7617214">&#34;udp&#34;</span><span class="op" id="7617219">,</span>&nbsp;<span class="ident" id="7617221">caddr</span><span class="op" id="7617226">:</span>&nbsp;<span class="string" id="7617228">&#34;127.0.0.1&#34;</span><span class="op" id="7617239">}</span><span class="op" id="7617240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617243">{</span><span class="ident" id="7617244">snet</span><span class="op" id="7617248">:</span>&nbsp;<span class="string" id="7617250">&#34;udp&#34;</span><span class="op" id="7617255">,</span>&nbsp;<span class="ident" id="7617257">saddr</span><span class="op" id="7617262">:</span>&nbsp;<span class="string" id="7617264">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7617282">,</span>&nbsp;<span class="ident" id="7617284">cnet</span><span class="op" id="7617288">:</span>&nbsp;<span class="string" id="7617290">&#34;udp&#34;</span><span class="op" id="7617295">,</span>&nbsp;<span class="ident" id="7617297">caddr</span><span class="op" id="7617302">:</span>&nbsp;<span class="string" id="7617304">&#34;127.0.0.1&#34;</span><span class="op" id="7617315">}</span><span class="op" id="7617316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617319">{</span><span class="ident" id="7617320">snet</span><span class="op" id="7617324">:</span>&nbsp;<span class="string" id="7617326">&#34;udp&#34;</span><span class="op" id="7617331">,</span>&nbsp;<span class="ident" id="7617333">saddr</span><span class="op" id="7617338">:</span>&nbsp;<span class="string" id="7617340">&#34;[::]&#34;</span><span class="op" id="7617346">,</span>&nbsp;<span class="ident" id="7617348">cnet</span><span class="op" id="7617352">:</span>&nbsp;<span class="string" id="7617354">&#34;udp&#34;</span><span class="op" id="7617359">,</span>&nbsp;<span class="ident" id="7617361">caddr</span><span class="op" id="7617366">:</span>&nbsp;<span class="string" id="7617368">&#34;[::1]&#34;</span><span class="op" id="7617375">,</span>&nbsp;<span class="ident" id="7617377">ipv6</span><span class="op" id="7617381">:</span>&nbsp;<span class="builtintype" id="7617383">true</span><span class="op" id="7617387">}</span><span class="op" id="7617388">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617392">{</span><span class="ident" id="7617393">snet</span><span class="op" id="7617397">:</span>&nbsp;<span class="string" id="7617399">&#34;udp&#34;</span><span class="op" id="7617404">,</span>&nbsp;<span class="ident" id="7617406">saddr</span><span class="op" id="7617411">:</span>&nbsp;<span class="string" id="7617413">&#34;&#34;</span><span class="op" id="7617415">,</span>&nbsp;<span class="ident" id="7617417">cnet</span><span class="op" id="7617421">:</span>&nbsp;<span class="string" id="7617423">&#34;udp&#34;</span><span class="op" id="7617428">,</span>&nbsp;<span class="ident" id="7617430">caddr</span><span class="op" id="7617435">:</span>&nbsp;<span class="string" id="7617437">&#34;[::1]&#34;</span><span class="op" id="7617444">,</span>&nbsp;<span class="ident" id="7617446">ipv4map</span><span class="op" id="7617453">:</span>&nbsp;<span class="builtintype" id="7617455">true</span><span class="op" id="7617459">}</span><span class="op" id="7617460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617463">{</span><span class="ident" id="7617464">snet</span><span class="op" id="7617468">:</span>&nbsp;<span class="string" id="7617470">&#34;udp&#34;</span><span class="op" id="7617475">,</span>&nbsp;<span class="ident" id="7617477">saddr</span><span class="op" id="7617482">:</span>&nbsp;<span class="string" id="7617484">&#34;0.0.0.0&#34;</span><span class="op" id="7617493">,</span>&nbsp;<span class="ident" id="7617495">cnet</span><span class="op" id="7617499">:</span>&nbsp;<span class="string" id="7617501">&#34;udp&#34;</span><span class="op" id="7617506">,</span>&nbsp;<span class="ident" id="7617508">caddr</span><span class="op" id="7617513">:</span>&nbsp;<span class="string" id="7617515">&#34;[::1]&#34;</span><span class="op" id="7617522">,</span>&nbsp;<span class="ident" id="7617524">ipv4map</span><span class="op" id="7617531">:</span>&nbsp;<span class="builtintype" id="7617533">true</span><span class="op" id="7617537">}</span><span class="op" id="7617538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617541">{</span><span class="ident" id="7617542">snet</span><span class="op" id="7617546">:</span>&nbsp;<span class="string" id="7617548">&#34;udp&#34;</span><span class="op" id="7617553">,</span>&nbsp;<span class="ident" id="7617555">saddr</span><span class="op" id="7617560">:</span>&nbsp;<span class="string" id="7617562">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7617580">,</span>&nbsp;<span class="ident" id="7617582">cnet</span><span class="op" id="7617586">:</span>&nbsp;<span class="string" id="7617588">&#34;udp&#34;</span><span class="op" id="7617593">,</span>&nbsp;<span class="ident" id="7617595">caddr</span><span class="op" id="7617600">:</span>&nbsp;<span class="string" id="7617602">&#34;[::1]&#34;</span><span class="op" id="7617609">,</span>&nbsp;<span class="ident" id="7617611">ipv4map</span><span class="op" id="7617618">:</span>&nbsp;<span class="builtintype" id="7617620">true</span><span class="op" id="7617624">}</span><span class="op" id="7617625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617628">{</span><span class="ident" id="7617629">snet</span><span class="op" id="7617633">:</span>&nbsp;<span class="string" id="7617635">&#34;udp&#34;</span><span class="op" id="7617640">,</span>&nbsp;<span class="ident" id="7617642">saddr</span><span class="op" id="7617647">:</span>&nbsp;<span class="string" id="7617649">&#34;[::]&#34;</span><span class="op" id="7617655">,</span>&nbsp;<span class="ident" id="7617657">cnet</span><span class="op" id="7617661">:</span>&nbsp;<span class="string" id="7617663">&#34;udp&#34;</span><span class="op" id="7617668">,</span>&nbsp;<span class="ident" id="7617670">caddr</span><span class="op" id="7617675">:</span>&nbsp;<span class="string" id="7617677">&#34;127.0.0.1&#34;</span><span class="op" id="7617688">,</span>&nbsp;<span class="ident" id="7617690">ipv4map</span><span class="op" id="7617697">:</span>&nbsp;<span class="builtintype" id="7617699">true</span><span class="op" id="7617703">}</span><span class="op" id="7617704">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617708">{</span><span class="ident" id="7617709">snet</span><span class="op" id="7617713">:</span>&nbsp;<span class="string" id="7617715">&#34;udp&#34;</span><span class="op" id="7617720">,</span>&nbsp;<span class="ident" id="7617722">saddr</span><span class="op" id="7617727">:</span>&nbsp;<span class="string" id="7617729">&#34;&#34;</span><span class="op" id="7617731">,</span>&nbsp;<span class="ident" id="7617733">cnet</span><span class="op" id="7617737">:</span>&nbsp;<span class="string" id="7617739">&#34;udp4&#34;</span><span class="op" id="7617745">,</span>&nbsp;<span class="ident" id="7617747">caddr</span><span class="op" id="7617752">:</span>&nbsp;<span class="string" id="7617754">&#34;127.0.0.1&#34;</span><span class="op" id="7617765">}</span><span class="op" id="7617766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617769">{</span><span class="ident" id="7617770">snet</span><span class="op" id="7617774">:</span>&nbsp;<span class="string" id="7617776">&#34;udp&#34;</span><span class="op" id="7617781">,</span>&nbsp;<span class="ident" id="7617783">saddr</span><span class="op" id="7617788">:</span>&nbsp;<span class="string" id="7617790">&#34;0.0.0.0&#34;</span><span class="op" id="7617799">,</span>&nbsp;<span class="ident" id="7617801">cnet</span><span class="op" id="7617805">:</span>&nbsp;<span class="string" id="7617807">&#34;udp4&#34;</span><span class="op" id="7617813">,</span>&nbsp;<span class="ident" id="7617815">caddr</span><span class="op" id="7617820">:</span>&nbsp;<span class="string" id="7617822">&#34;127.0.0.1&#34;</span><span class="op" id="7617833">}</span><span class="op" id="7617834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617837">{</span><span class="ident" id="7617838">snet</span><span class="op" id="7617842">:</span>&nbsp;<span class="string" id="7617844">&#34;udp&#34;</span><span class="op" id="7617849">,</span>&nbsp;<span class="ident" id="7617851">saddr</span><span class="op" id="7617856">:</span>&nbsp;<span class="string" id="7617858">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7617876">,</span>&nbsp;<span class="ident" id="7617878">cnet</span><span class="op" id="7617882">:</span>&nbsp;<span class="string" id="7617884">&#34;udp4&#34;</span><span class="op" id="7617890">,</span>&nbsp;<span class="ident" id="7617892">caddr</span><span class="op" id="7617897">:</span>&nbsp;<span class="string" id="7617899">&#34;127.0.0.1&#34;</span><span class="op" id="7617910">}</span><span class="op" id="7617911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617914">{</span><span class="ident" id="7617915">snet</span><span class="op" id="7617919">:</span>&nbsp;<span class="string" id="7617921">&#34;udp&#34;</span><span class="op" id="7617926">,</span>&nbsp;<span class="ident" id="7617928">saddr</span><span class="op" id="7617933">:</span>&nbsp;<span class="string" id="7617935">&#34;[::]&#34;</span><span class="op" id="7617941">,</span>&nbsp;<span class="ident" id="7617943">cnet</span><span class="op" id="7617947">:</span>&nbsp;<span class="string" id="7617949">&#34;udp6&#34;</span><span class="op" id="7617955">,</span>&nbsp;<span class="ident" id="7617957">caddr</span><span class="op" id="7617962">:</span>&nbsp;<span class="string" id="7617964">&#34;[::1]&#34;</span><span class="op" id="7617971">,</span>&nbsp;<span class="ident" id="7617973">ipv6</span><span class="op" id="7617977">:</span>&nbsp;<span class="builtintype" id="7617979">true</span><span class="op" id="7617983">}</span><span class="op" id="7617984">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617988">{</span><span class="ident" id="7617989">snet</span><span class="op" id="7617993">:</span>&nbsp;<span class="string" id="7617995">&#34;udp&#34;</span><span class="op" id="7618000">,</span>&nbsp;<span class="ident" id="7618002">saddr</span><span class="op" id="7618007">:</span>&nbsp;<span class="string" id="7618009">&#34;&#34;</span><span class="op" id="7618011">,</span>&nbsp;<span class="ident" id="7618013">cnet</span><span class="op" id="7618017">:</span>&nbsp;<span class="string" id="7618019">&#34;udp6&#34;</span><span class="op" id="7618025">,</span>&nbsp;<span class="ident" id="7618027">caddr</span><span class="op" id="7618032">:</span>&nbsp;<span class="string" id="7618034">&#34;[::1]&#34;</span><span class="op" id="7618041">,</span>&nbsp;<span class="ident" id="7618043">ipv4map</span><span class="op" id="7618050">:</span>&nbsp;<span class="builtintype" id="7618052">true</span><span class="op" id="7618056">}</span><span class="op" id="7618057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618060">{</span><span class="ident" id="7618061">snet</span><span class="op" id="7618065">:</span>&nbsp;<span class="string" id="7618067">&#34;udp&#34;</span><span class="op" id="7618072">,</span>&nbsp;<span class="ident" id="7618074">saddr</span><span class="op" id="7618079">:</span>&nbsp;<span class="string" id="7618081">&#34;0.0.0.0&#34;</span><span class="op" id="7618090">,</span>&nbsp;<span class="ident" id="7618092">cnet</span><span class="op" id="7618096">:</span>&nbsp;<span class="string" id="7618098">&#34;udp6&#34;</span><span class="op" id="7618104">,</span>&nbsp;<span class="ident" id="7618106">caddr</span><span class="op" id="7618111">:</span>&nbsp;<span class="string" id="7618113">&#34;[::1]&#34;</span><span class="op" id="7618120">,</span>&nbsp;<span class="ident" id="7618122">ipv4map</span><span class="op" id="7618129">:</span>&nbsp;<span class="builtintype" id="7618131">true</span><span class="op" id="7618135">}</span><span class="op" id="7618136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618139">{</span><span class="ident" id="7618140">snet</span><span class="op" id="7618144">:</span>&nbsp;<span class="string" id="7618146">&#34;udp&#34;</span><span class="op" id="7618151">,</span>&nbsp;<span class="ident" id="7618153">saddr</span><span class="op" id="7618158">:</span>&nbsp;<span class="string" id="7618160">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7618178">,</span>&nbsp;<span class="ident" id="7618180">cnet</span><span class="op" id="7618184">:</span>&nbsp;<span class="string" id="7618186">&#34;udp6&#34;</span><span class="op" id="7618192">,</span>&nbsp;<span class="ident" id="7618194">caddr</span><span class="op" id="7618199">:</span>&nbsp;<span class="string" id="7618201">&#34;[::1]&#34;</span><span class="op" id="7618208">,</span>&nbsp;<span class="ident" id="7618210">ipv4map</span><span class="op" id="7618217">:</span>&nbsp;<span class="builtintype" id="7618219">true</span><span class="op" id="7618223">}</span><span class="op" id="7618224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618227">{</span><span class="ident" id="7618228">snet</span><span class="op" id="7618232">:</span>&nbsp;<span class="string" id="7618234">&#34;udp&#34;</span><span class="op" id="7618239">,</span>&nbsp;<span class="ident" id="7618241">saddr</span><span class="op" id="7618246">:</span>&nbsp;<span class="string" id="7618248">&#34;[::]&#34;</span><span class="op" id="7618254">,</span>&nbsp;<span class="ident" id="7618256">cnet</span><span class="op" id="7618260">:</span>&nbsp;<span class="string" id="7618262">&#34;udp4&#34;</span><span class="op" id="7618268">,</span>&nbsp;<span class="ident" id="7618270">caddr</span><span class="op" id="7618275">:</span>&nbsp;<span class="string" id="7618277">&#34;127.0.0.1&#34;</span><span class="op" id="7618288">,</span>&nbsp;<span class="ident" id="7618290">ipv4map</span><span class="op" id="7618297">:</span>&nbsp;<span class="builtintype" id="7618299">true</span><span class="op" id="7618303">}</span><span class="op" id="7618304">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618308">{</span><span class="ident" id="7618309">snet</span><span class="op" id="7618313">:</span>&nbsp;<span class="string" id="7618315">&#34;udp&#34;</span><span class="op" id="7618320">,</span>&nbsp;<span class="ident" id="7618322">saddr</span><span class="op" id="7618327">:</span>&nbsp;<span class="string" id="7618329">&#34;127.0.0.1&#34;</span><span class="op" id="7618340">,</span>&nbsp;<span class="ident" id="7618342">cnet</span><span class="op" id="7618346">:</span>&nbsp;<span class="string" id="7618348">&#34;udp&#34;</span><span class="op" id="7618353">,</span>&nbsp;<span class="ident" id="7618355">caddr</span><span class="op" id="7618360">:</span>&nbsp;<span class="string" id="7618362">&#34;127.0.0.1&#34;</span><span class="op" id="7618373">}</span><span class="op" id="7618374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618377">{</span><span class="ident" id="7618378">snet</span><span class="op" id="7618382">:</span>&nbsp;<span class="string" id="7618384">&#34;udp&#34;</span><span class="op" id="7618389">,</span>&nbsp;<span class="ident" id="7618391">saddr</span><span class="op" id="7618396">:</span>&nbsp;<span class="string" id="7618398">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7618418">,</span>&nbsp;<span class="ident" id="7618420">cnet</span><span class="op" id="7618424">:</span>&nbsp;<span class="string" id="7618426">&#34;udp&#34;</span><span class="op" id="7618431">,</span>&nbsp;<span class="ident" id="7618433">caddr</span><span class="op" id="7618438">:</span>&nbsp;<span class="string" id="7618440">&#34;127.0.0.1&#34;</span><span class="op" id="7618451">}</span><span class="op" id="7618452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618455">{</span><span class="ident" id="7618456">snet</span><span class="op" id="7618460">:</span>&nbsp;<span class="string" id="7618462">&#34;udp&#34;</span><span class="op" id="7618467">,</span>&nbsp;<span class="ident" id="7618469">saddr</span><span class="op" id="7618474">:</span>&nbsp;<span class="string" id="7618476">&#34;[::1]&#34;</span><span class="op" id="7618483">,</span>&nbsp;<span class="ident" id="7618485">cnet</span><span class="op" id="7618489">:</span>&nbsp;<span class="string" id="7618491">&#34;udp&#34;</span><span class="op" id="7618496">,</span>&nbsp;<span class="ident" id="7618498">caddr</span><span class="op" id="7618503">:</span>&nbsp;<span class="string" id="7618505">&#34;[::1]&#34;</span><span class="op" id="7618512">,</span>&nbsp;<span class="ident" id="7618514">ipv6</span><span class="op" id="7618518">:</span>&nbsp;<span class="builtintype" id="7618520">true</span><span class="op" id="7618524">}</span><span class="op" id="7618525">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618529">{</span><span class="ident" id="7618530">snet</span><span class="op" id="7618534">:</span>&nbsp;<span class="string" id="7618536">&#34;udp4&#34;</span><span class="op" id="7618542">,</span>&nbsp;<span class="ident" id="7618544">saddr</span><span class="op" id="7618549">:</span>&nbsp;<span class="string" id="7618551">&#34;&#34;</span><span class="op" id="7618553">,</span>&nbsp;<span class="ident" id="7618555">cnet</span><span class="op" id="7618559">:</span>&nbsp;<span class="string" id="7618561">&#34;udp4&#34;</span><span class="op" id="7618567">,</span>&nbsp;<span class="ident" id="7618569">caddr</span><span class="op" id="7618574">:</span>&nbsp;<span class="string" id="7618576">&#34;127.0.0.1&#34;</span><span class="op" id="7618587">}</span><span class="op" id="7618588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618591">{</span><span class="ident" id="7618592">snet</span><span class="op" id="7618596">:</span>&nbsp;<span class="string" id="7618598">&#34;udp4&#34;</span><span class="op" id="7618604">,</span>&nbsp;<span class="ident" id="7618606">saddr</span><span class="op" id="7618611">:</span>&nbsp;<span class="string" id="7618613">&#34;0.0.0.0&#34;</span><span class="op" id="7618622">,</span>&nbsp;<span class="ident" id="7618624">cnet</span><span class="op" id="7618628">:</span>&nbsp;<span class="string" id="7618630">&#34;udp4&#34;</span><span class="op" id="7618636">,</span>&nbsp;<span class="ident" id="7618638">caddr</span><span class="op" id="7618643">:</span>&nbsp;<span class="string" id="7618645">&#34;127.0.0.1&#34;</span><span class="op" id="7618656">}</span><span class="op" id="7618657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618660">{</span><span class="ident" id="7618661">snet</span><span class="op" id="7618665">:</span>&nbsp;<span class="string" id="7618667">&#34;udp4&#34;</span><span class="op" id="7618673">,</span>&nbsp;<span class="ident" id="7618675">saddr</span><span class="op" id="7618680">:</span>&nbsp;<span class="string" id="7618682">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7618700">,</span>&nbsp;<span class="ident" id="7618702">cnet</span><span class="op" id="7618706">:</span>&nbsp;<span class="string" id="7618708">&#34;udp4&#34;</span><span class="op" id="7618714">,</span>&nbsp;<span class="ident" id="7618716">caddr</span><span class="op" id="7618721">:</span>&nbsp;<span class="string" id="7618723">&#34;127.0.0.1&#34;</span><span class="op" id="7618734">}</span><span class="op" id="7618735">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618739">{</span><span class="ident" id="7618740">snet</span><span class="op" id="7618744">:</span>&nbsp;<span class="string" id="7618746">&#34;udp4&#34;</span><span class="op" id="7618752">,</span>&nbsp;<span class="ident" id="7618754">saddr</span><span class="op" id="7618759">:</span>&nbsp;<span class="string" id="7618761">&#34;127.0.0.1&#34;</span><span class="op" id="7618772">,</span>&nbsp;<span class="ident" id="7618774">cnet</span><span class="op" id="7618778">:</span>&nbsp;<span class="string" id="7618780">&#34;udp4&#34;</span><span class="op" id="7618786">,</span>&nbsp;<span class="ident" id="7618788">caddr</span><span class="op" id="7618793">:</span>&nbsp;<span class="string" id="7618795">&#34;127.0.0.1&#34;</span><span class="op" id="7618806">}</span><span class="op" id="7618807">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618811">{</span><span class="ident" id="7618812">snet</span><span class="op" id="7618816">:</span>&nbsp;<span class="string" id="7618818">&#34;udp6&#34;</span><span class="op" id="7618824">,</span>&nbsp;<span class="ident" id="7618826">saddr</span><span class="op" id="7618831">:</span>&nbsp;<span class="string" id="7618833">&#34;&#34;</span><span class="op" id="7618835">,</span>&nbsp;<span class="ident" id="7618837">cnet</span><span class="op" id="7618841">:</span>&nbsp;<span class="string" id="7618843">&#34;udp6&#34;</span><span class="op" id="7618849">,</span>&nbsp;<span class="ident" id="7618851">caddr</span><span class="op" id="7618856">:</span>&nbsp;<span class="string" id="7618858">&#34;[::1]&#34;</span><span class="op" id="7618865">,</span>&nbsp;<span class="ident" id="7618867">ipv6</span><span class="op" id="7618871">:</span>&nbsp;<span class="builtintype" id="7618873">true</span><span class="op" id="7618877">}</span><span class="op" id="7618878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618881">{</span><span class="ident" id="7618882">snet</span><span class="op" id="7618886">:</span>&nbsp;<span class="string" id="7618888">&#34;udp6&#34;</span><span class="op" id="7618894">,</span>&nbsp;<span class="ident" id="7618896">saddr</span><span class="op" id="7618901">:</span>&nbsp;<span class="string" id="7618903">&#34;[::]&#34;</span><span class="op" id="7618909">,</span>&nbsp;<span class="ident" id="7618911">cnet</span><span class="op" id="7618915">:</span>&nbsp;<span class="string" id="7618917">&#34;udp6&#34;</span><span class="op" id="7618923">,</span>&nbsp;<span class="ident" id="7618925">caddr</span><span class="op" id="7618930">:</span>&nbsp;<span class="string" id="7618932">&#34;[::1]&#34;</span><span class="op" id="7618939">,</span>&nbsp;<span class="ident" id="7618941">ipv6</span><span class="op" id="7618945">:</span>&nbsp;<span class="builtintype" id="7618947">true</span><span class="op" id="7618951">}</span><span class="op" id="7618952">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618956">{</span><span class="ident" id="7618957">snet</span><span class="op" id="7618961">:</span>&nbsp;<span class="string" id="7618963">&#34;udp6&#34;</span><span class="op" id="7618969">,</span>&nbsp;<span class="ident" id="7618971">saddr</span><span class="op" id="7618976">:</span>&nbsp;<span class="string" id="7618978">&#34;[::1]&#34;</span><span class="op" id="7618985">,</span>&nbsp;<span class="ident" id="7618987">cnet</span><span class="op" id="7618991">:</span>&nbsp;<span class="string" id="7618993">&#34;udp6&#34;</span><span class="op" id="7618999">,</span>&nbsp;<span class="ident" id="7619001">caddr</span><span class="op" id="7619006">:</span>&nbsp;<span class="string" id="7619008">&#34;[::1]&#34;</span><span class="op" id="7619015">,</span>&nbsp;<span class="ident" id="7619017">ipv6</span><span class="op" id="7619021">:</span>&nbsp;<span class="builtintype" id="7619023">true</span><span class="op" id="7619027">}</span><span class="op" id="7619028">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619032">{</span><span class="ident" id="7619033">snet</span><span class="op" id="7619037">:</span>&nbsp;<span class="string" id="7619039">&#34;udp&#34;</span><span class="op" id="7619044">,</span>&nbsp;<span class="ident" id="7619046">saddr</span><span class="op" id="7619051">:</span>&nbsp;<span class="string" id="7619053">&#34;127.0.0.1&#34;</span><span class="op" id="7619064">,</span>&nbsp;<span class="ident" id="7619066">cnet</span><span class="op" id="7619070">:</span>&nbsp;<span class="string" id="7619072">&#34;udp&#34;</span><span class="op" id="7619077">,</span>&nbsp;<span class="ident" id="7619079">caddr</span><span class="op" id="7619084">:</span>&nbsp;<span class="string" id="7619086">&#34;127.0.0.1&#34;</span><span class="op" id="7619097">,</span>&nbsp;<span class="ident" id="7619099">dial</span><span class="op" id="7619103">:</span>&nbsp;<span class="builtintype" id="7619105">true</span><span class="op" id="7619109">}</span><span class="op" id="7619110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619113">{</span><span class="ident" id="7619114">snet</span><span class="op" id="7619118">:</span>&nbsp;<span class="string" id="7619120">&#34;udp&#34;</span><span class="op" id="7619125">,</span>&nbsp;<span class="ident" id="7619127">saddr</span><span class="op" id="7619132">:</span>&nbsp;<span class="string" id="7619134">&#34;127.0.0.1&#34;</span><span class="op" id="7619145">,</span>&nbsp;<span class="ident" id="7619147">cnet</span><span class="op" id="7619151">:</span>&nbsp;<span class="string" id="7619153">&#34;udp&#34;</span><span class="op" id="7619158">,</span>&nbsp;<span class="ident" id="7619160">caddr</span><span class="op" id="7619165">:</span>&nbsp;<span class="string" id="7619167">&#34;127.0.0.1&#34;</span><span class="op" id="7619178">,</span>&nbsp;<span class="ident" id="7619180">empty</span><span class="op" id="7619185">:</span>&nbsp;<span class="builtintype" id="7619187">true</span><span class="op" id="7619191">}</span><span class="op" id="7619192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619195">{</span><span class="ident" id="7619196">snet</span><span class="op" id="7619200">:</span>&nbsp;<span class="string" id="7619202">&#34;udp&#34;</span><span class="op" id="7619207">,</span>&nbsp;<span class="ident" id="7619209">saddr</span><span class="op" id="7619214">:</span>&nbsp;<span class="string" id="7619216">&#34;127.0.0.1&#34;</span><span class="op" id="7619227">,</span>&nbsp;<span class="ident" id="7619229">cnet</span><span class="op" id="7619233">:</span>&nbsp;<span class="string" id="7619235">&#34;udp&#34;</span><span class="op" id="7619240">,</span>&nbsp;<span class="ident" id="7619242">caddr</span><span class="op" id="7619247">:</span>&nbsp;<span class="string" id="7619249">&#34;127.0.0.1&#34;</span><span class="op" id="7619260">,</span>&nbsp;<span class="ident" id="7619262">dial</span><span class="op" id="7619266">:</span>&nbsp;<span class="builtintype" id="7619268">true</span><span class="op" id="7619272">,</span>&nbsp;<span class="ident" id="7619274">empty</span><span class="op" id="7619279">:</span>&nbsp;<span class="builtintype" id="7619281">true</span><span class="op" id="7619285">}</span><span class="op" id="7619286">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619290">{</span><span class="ident" id="7619291">snet</span><span class="op" id="7619295">:</span>&nbsp;<span class="string" id="7619297">&#34;udp&#34;</span><span class="op" id="7619302">,</span>&nbsp;<span class="ident" id="7619304">saddr</span><span class="op" id="7619309">:</span>&nbsp;<span class="string" id="7619311">&#34;[::1]&#34;</span><span class="op" id="7619318">,</span>&nbsp;<span class="ident" id="7619320">cnet</span><span class="op" id="7619324">:</span>&nbsp;<span class="string" id="7619326">&#34;udp&#34;</span><span class="op" id="7619331">,</span>&nbsp;<span class="ident" id="7619333">caddr</span><span class="op" id="7619338">:</span>&nbsp;<span class="string" id="7619340">&#34;[::1]&#34;</span><span class="op" id="7619347">,</span>&nbsp;<span class="ident" id="7619349">ipv6</span><span class="op" id="7619353">:</span>&nbsp;<span class="builtintype" id="7619355">true</span><span class="op" id="7619359">,</span>&nbsp;<span class="ident" id="7619361">dial</span><span class="op" id="7619365">:</span>&nbsp;<span class="builtintype" id="7619367">true</span><span class="op" id="7619371">}</span><span class="op" id="7619372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619375">{</span><span class="ident" id="7619376">snet</span><span class="op" id="7619380">:</span>&nbsp;<span class="string" id="7619382">&#34;udp&#34;</span><span class="op" id="7619387">,</span>&nbsp;<span class="ident" id="7619389">saddr</span><span class="op" id="7619394">:</span>&nbsp;<span class="string" id="7619396">&#34;[::1]&#34;</span><span class="op" id="7619403">,</span>&nbsp;<span class="ident" id="7619405">cnet</span><span class="op" id="7619409">:</span>&nbsp;<span class="string" id="7619411">&#34;udp&#34;</span><span class="op" id="7619416">,</span>&nbsp;<span class="ident" id="7619418">caddr</span><span class="op" id="7619423">:</span>&nbsp;<span class="string" id="7619425">&#34;[::1]&#34;</span><span class="op" id="7619432">,</span>&nbsp;<span class="ident" id="7619434">ipv6</span><span class="op" id="7619438">:</span>&nbsp;<span class="builtintype" id="7619440">true</span><span class="op" id="7619444">,</span>&nbsp;<span class="ident" id="7619446">empty</span><span class="op" id="7619451">:</span>&nbsp;<span class="builtintype" id="7619453">true</span><span class="op" id="7619457">}</span><span class="op" id="7619458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619461">{</span><span class="ident" id="7619462">snet</span><span class="op" id="7619466">:</span>&nbsp;<span class="string" id="7619468">&#34;udp&#34;</span><span class="op" id="7619473">,</span>&nbsp;<span class="ident" id="7619475">saddr</span><span class="op" id="7619480">:</span>&nbsp;<span class="string" id="7619482">&#34;[::1]&#34;</span><span class="op" id="7619489">,</span>&nbsp;<span class="ident" id="7619491">cnet</span><span class="op" id="7619495">:</span>&nbsp;<span class="string" id="7619497">&#34;udp&#34;</span><span class="op" id="7619502">,</span>&nbsp;<span class="ident" id="7619504">caddr</span><span class="op" id="7619509">:</span>&nbsp;<span class="string" id="7619511">&#34;[::1]&#34;</span><span class="op" id="7619518">,</span>&nbsp;<span class="ident" id="7619520">ipv6</span><span class="op" id="7619524">:</span>&nbsp;<span class="builtintype" id="7619526">true</span><span class="op" id="7619530">,</span>&nbsp;<span class="ident" id="7619532">dial</span><span class="op" id="7619536">:</span>&nbsp;<span class="builtintype" id="7619538">true</span><span class="op" id="7619542">,</span>&nbsp;<span class="ident" id="7619544">empty</span><span class="op" id="7619549">:</span>&nbsp;<span class="builtintype" id="7619551">true</span><span class="op" id="7619555">}</span><span class="op" id="7619556">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619560">{</span><span class="ident" id="7619561">snet</span><span class="op" id="7619565">:</span>&nbsp;<span class="string" id="7619567">&#34;unixgram&#34;</span><span class="op" id="7619577">,</span>&nbsp;<span class="ident" id="7619579">saddr</span><span class="op" id="7619584">:</span>&nbsp;<span class="ident" id="7619586">testUnixAddr</span><span class="op" id="7619598">(</span><span class="op" id="7619599">)</span><span class="op" id="7619600">,</span>&nbsp;<span class="ident" id="7619602">cnet</span><span class="op" id="7619606">:</span>&nbsp;<span class="string" id="7619608">&#34;unixgram&#34;</span><span class="op" id="7619618">,</span>&nbsp;<span class="ident" id="7619620">caddr</span><span class="op" id="7619625">:</span>&nbsp;<span class="ident" id="7619627">testUnixAddr</span><span class="op" id="7619639">(</span><span class="op" id="7619640">)</span><span class="op" id="7619641">}</span><span class="op" id="7619642">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619645">{</span><span class="ident" id="7619646">snet</span><span class="op" id="7619650">:</span>&nbsp;<span class="string" id="7619652">&#34;unixgram&#34;</span><span class="op" id="7619662">,</span>&nbsp;<span class="ident" id="7619664">saddr</span><span class="op" id="7619669">:</span>&nbsp;<span class="ident" id="7619671">testUnixAddr</span><span class="op" id="7619683">(</span><span class="op" id="7619684">)</span><span class="op" id="7619685">,</span>&nbsp;<span class="ident" id="7619687">cnet</span><span class="op" id="7619691">:</span>&nbsp;<span class="string" id="7619693">&#34;unixgram&#34;</span><span class="op" id="7619703">,</span>&nbsp;<span class="ident" id="7619705">caddr</span><span class="op" id="7619710">:</span>&nbsp;<span class="ident" id="7619712">testUnixAddr</span><span class="op" id="7619724">(</span><span class="op" id="7619725">)</span><span class="op" id="7619726">,</span>&nbsp;<span class="ident" id="7619728">dial</span><span class="op" id="7619732">:</span>&nbsp;<span class="builtintype" id="7619734">true</span><span class="op" id="7619738">}</span><span class="op" id="7619739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619742">{</span><span class="ident" id="7619743">snet</span><span class="op" id="7619747">:</span>&nbsp;<span class="string" id="7619749">&#34;unixgram&#34;</span><span class="op" id="7619759">,</span>&nbsp;<span class="ident" id="7619761">saddr</span><span class="op" id="7619766">:</span>&nbsp;<span class="ident" id="7619768">testUnixAddr</span><span class="op" id="7619780">(</span><span class="op" id="7619781">)</span><span class="op" id="7619782">,</span>&nbsp;<span class="ident" id="7619784">cnet</span><span class="op" id="7619788">:</span>&nbsp;<span class="string" id="7619790">&#34;unixgram&#34;</span><span class="op" id="7619800">,</span>&nbsp;<span class="ident" id="7619802">caddr</span><span class="op" id="7619807">:</span>&nbsp;<span class="ident" id="7619809">testUnixAddr</span><span class="op" id="7619821">(</span><span class="op" id="7619822">)</span><span class="op" id="7619823">,</span>&nbsp;<span class="ident" id="7619825">empty</span><span class="op" id="7619830">:</span>&nbsp;<span class="builtintype" id="7619832">true</span><span class="op" id="7619836">}</span><span class="op" id="7619837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619840">{</span><span class="ident" id="7619841">snet</span><span class="op" id="7619845">:</span>&nbsp;<span class="string" id="7619847">&#34;unixgram&#34;</span><span class="op" id="7619857">,</span>&nbsp;<span class="ident" id="7619859">saddr</span><span class="op" id="7619864">:</span>&nbsp;<span class="ident" id="7619866">testUnixAddr</span><span class="op" id="7619878">(</span><span class="op" id="7619879">)</span><span class="op" id="7619880">,</span>&nbsp;<span class="ident" id="7619882">cnet</span><span class="op" id="7619886">:</span>&nbsp;<span class="string" id="7619888">&#34;unixgram&#34;</span><span class="op" id="7619898">,</span>&nbsp;<span class="ident" id="7619900">caddr</span><span class="op" id="7619905">:</span>&nbsp;<span class="ident" id="7619907">testUnixAddr</span><span class="op" id="7619919">(</span><span class="op" id="7619920">)</span><span class="op" id="7619921">,</span>&nbsp;<span class="ident" id="7619923">dial</span><span class="op" id="7619927">:</span>&nbsp;<span class="builtintype" id="7619929">true</span><span class="op" id="7619933">,</span>&nbsp;<span class="ident" id="7619935">empty</span><span class="op" id="7619940">:</span>&nbsp;<span class="builtintype" id="7619942">true</span><span class="op" id="7619946">}</span><span class="op" id="7619947">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619951">{</span><span class="ident" id="7619952">snet</span><span class="op" id="7619956">:</span>&nbsp;<span class="string" id="7619958">&#34;unixgram&#34;</span><span class="op" id="7619968">,</span>&nbsp;<span class="ident" id="7619970">saddr</span><span class="op" id="7619975">:</span>&nbsp;<span class="string" id="7619977">&#34;@gotest6/net&#34;</span><span class="op" id="7619991">,</span>&nbsp;<span class="ident" id="7619993">cnet</span><span class="op" id="7619997">:</span>&nbsp;<span class="string" id="7619999">&#34;unixgram&#34;</span><span class="op" id="7620009">,</span>&nbsp;<span class="ident" id="7620011">caddr</span><span class="op" id="7620016">:</span>&nbsp;<span class="string" id="7620018">&#34;@gotest6/net.local&#34;</span><span class="op" id="7620038">,</span>&nbsp;<span class="ident" id="7620040">linuxOnly</span><span class="op" id="7620049">:</span>&nbsp;<span class="builtintype" id="7620051">true</span><span class="op" id="7620055">}</span><span class="op" id="7620056">,</span><br>
<span class="lineno">310</span><span class="op" id="7620058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7620061">func</span>&nbsp;<span class="ident" id="7620066">TestDatagramPacketConnServer</span><span class="op" id="7620094">(</span><span class="ident" id="7620095">t</span>&nbsp;<span class="op" id="7620097">*</span><span class="ident" id="7620098">testing</span><span class="op" id="7620105">.</span><span class="ident" id="7620106">T</span><span class="op" id="7620107">)</span>&nbsp;<span class="op" id="7620109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620112">if</span>&nbsp;<span class="op" id="7620115">!</span><span class="op" id="7620116">*</span><span class="ident" id="7620117">testDatagram</span>&nbsp;<span class="op" id="7620130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620134">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620146">for</span>&nbsp;<span class="ident" id="7620150">_</span><span class="op" id="7620151">,</span>&nbsp;<span class="ident" id="7620153">tt</span>&nbsp;<span class="op" id="7620156">:=</span>&nbsp;<span class="keyword" id="7620159">range</span>&nbsp;<span class="ident" id="7620165">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7620195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620199">if</span>&nbsp;<span class="ident" id="7620202">skipServerTest</span><span class="op" id="7620216">(</span><span class="ident" id="7620217">tt</span><span class="op" id="7620219">.</span><span class="ident" id="7620220">snet</span><span class="op" id="7620224">,</span>&nbsp;<span class="string" id="7620226">&#34;unixgram&#34;</span><span class="op" id="7620236">,</span>&nbsp;<span class="ident" id="7620238">tt</span><span class="op" id="7620240">.</span><span class="ident" id="7620241">saddr</span><span class="op" id="7620246">,</span>&nbsp;<span class="ident" id="7620248">tt</span><span class="op" id="7620250">.</span><span class="ident" id="7620251">ipv6</span><span class="op" id="7620255">,</span>&nbsp;<span class="ident" id="7620257">tt</span><span class="op" id="7620259">.</span><span class="ident" id="7620260">ipv4map</span><span class="op" id="7620267">,</span>&nbsp;<span class="ident" id="7620269">tt</span><span class="op" id="7620271">.</span><span class="ident" id="7620272">linuxOnly</span><span class="op" id="7620281">)</span>&nbsp;<span class="op" id="7620283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620288">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620304">listening</span>&nbsp;<span class="op" id="7620314">:=</span>&nbsp;<span class="builtinfunc" id="7620317">make</span><span class="op" id="7620321">(</span><span class="keyword" id="7620322">chan</span>&nbsp;<span class="builtintype" id="7620327">string</span><span class="op" id="7620333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620337">done</span>&nbsp;<span class="op" id="7620342">:=</span>&nbsp;<span class="builtinfunc" id="7620345">make</span><span class="op" id="7620349">(</span><span class="keyword" id="7620350">chan</span>&nbsp;<span class="builtintype" id="7620355">int</span><span class="op" id="7620358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620362">switch</span>&nbsp;<span class="ident" id="7620369">tt</span><span class="op" id="7620371">.</span><span class="ident" id="7620372">snet</span>&nbsp;<span class="op" id="7620377">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620381">case</span>&nbsp;<span class="string" id="7620386">&#34;udp&#34;</span><span class="op" id="7620391">,</span>&nbsp;<span class="string" id="7620393">&#34;udp4&#34;</span><span class="op" id="7620399">,</span>&nbsp;<span class="string" id="7620401">&#34;udp6&#34;</span><span class="op" id="7620407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620412">tt</span><span class="op" id="7620414">.</span><span class="ident" id="7620415">saddr</span>&nbsp;<span class="op" id="7620421">+=</span>&nbsp;<span class="string" id="7620424">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620431">case</span>&nbsp;<span class="string" id="7620436">&#34;unixgram&#34;</span><span class="op" id="7620446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620451">os</span><span class="op" id="7620453">.</span><span class="ident" id="7620454">Remove</span><span class="op" id="7620460">(</span><span class="ident" id="7620461">tt</span><span class="op" id="7620463">.</span><span class="ident" id="7620464">saddr</span><span class="op" id="7620469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620474">os</span><span class="op" id="7620476">.</span><span class="ident" id="7620477">Remove</span><span class="op" id="7620483">(</span><span class="ident" id="7620484">tt</span><span class="op" id="7620486">.</span><span class="ident" id="7620487">caddr</span><span class="op" id="7620492">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620501">go</span>&nbsp;<span class="ident" id="7620504">runDatagramPacketConnServer</span><span class="op" id="7620531">(</span><span class="ident" id="7620532">t</span><span class="op" id="7620533">,</span>&nbsp;<span class="ident" id="7620535">tt</span><span class="op" id="7620537">.</span><span class="ident" id="7620538">snet</span><span class="op" id="7620542">,</span>&nbsp;<span class="ident" id="7620544">tt</span><span class="op" id="7620546">.</span><span class="ident" id="7620547">saddr</span><span class="op" id="7620552">,</span>&nbsp;<span class="ident" id="7620554">listening</span><span class="op" id="7620563">,</span>&nbsp;<span class="ident" id="7620565">done</span><span class="op" id="7620569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620573">taddr</span>&nbsp;<span class="op" id="7620579">:=</span>&nbsp;<span class="op" id="7620582">&lt;-</span><span class="ident" id="7620584">listening</span>&nbsp;<span class="comment" id="7620594">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620625">switch</span>&nbsp;<span class="ident" id="7620632">tt</span><span class="op" id="7620634">.</span><span class="ident" id="7620635">cnet</span>&nbsp;<span class="op" id="7620640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620644">case</span>&nbsp;<span class="string" id="7620649">&#34;udp&#34;</span><span class="op" id="7620654">,</span>&nbsp;<span class="string" id="7620656">&#34;udp4&#34;</span><span class="op" id="7620662">,</span>&nbsp;<span class="string" id="7620664">&#34;udp6&#34;</span><span class="op" id="7620670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620675">_</span><span class="op" id="7620676">,</span>&nbsp;<span class="ident" id="7620678">port</span><span class="op" id="7620682">,</span>&nbsp;<span class="ident" id="7620684">err</span>&nbsp;<span class="op" id="7620688">:=</span>&nbsp;<span class="ident" id="7620691">SplitHostPort</span><span class="op" id="7620704">(</span><span class="ident" id="7620705">taddr</span><span class="op" id="7620710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620715">if</span>&nbsp;<span class="ident" id="7620718">err</span>&nbsp;<span class="op" id="7620722">!=</span>&nbsp;<span class="ident" id="7620725">nil</span>&nbsp;<span class="op" id="7620729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620735">t</span><span class="op" id="7620736">.</span><span class="ident" id="7620737">Fatalf</span><span class="op" id="7620743">(</span><span class="string" id="7620744">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7620774">,</span>&nbsp;<span class="ident" id="7620776">taddr</span><span class="op" id="7620781">,</span>&nbsp;<span class="ident" id="7620783">err</span><span class="op" id="7620786">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620796">taddr</span>&nbsp;<span class="op" id="7620802">=</span>&nbsp;<span class="ident" id="7620804">tt</span><span class="op" id="7620806">.</span><span class="ident" id="7620807">caddr</span>&nbsp;<span class="op" id="7620813">+</span>&nbsp;<span class="string" id="7620815">&#34;:&#34;</span>&nbsp;<span class="op" id="7620819">+</span>&nbsp;<span class="ident" id="7620821">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620829">tt</span><span class="op" id="7620831">.</span><span class="ident" id="7620832">caddr</span>&nbsp;<span class="op" id="7620838">+=</span>&nbsp;<span class="string" id="7620841">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620852">if</span>&nbsp;<span class="ident" id="7620855">tt</span><span class="op" id="7620857">.</span><span class="ident" id="7620858">dial</span>&nbsp;<span class="op" id="7620863">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620868">runDatagramConnClient</span><span class="op" id="7620889">(</span><span class="ident" id="7620890">t</span><span class="op" id="7620891">,</span>&nbsp;<span class="ident" id="7620893">tt</span><span class="op" id="7620895">.</span><span class="ident" id="7620896">cnet</span><span class="op" id="7620900">,</span>&nbsp;<span class="ident" id="7620902">tt</span><span class="op" id="7620904">.</span><span class="ident" id="7620905">caddr</span><span class="op" id="7620910">,</span>&nbsp;<span class="ident" id="7620912">taddr</span><span class="op" id="7620917">,</span>&nbsp;<span class="ident" id="7620919">tt</span><span class="op" id="7620921">.</span><span class="ident" id="7620922">empty</span><span class="op" id="7620927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620931">}</span>&nbsp;<span class="keyword" id="7620933">else</span>&nbsp;<span class="op" id="7620938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620943">runDatagramPacketConnClient</span><span class="op" id="7620970">(</span><span class="ident" id="7620971">t</span><span class="op" id="7620972">,</span>&nbsp;<span class="ident" id="7620974">tt</span><span class="op" id="7620976">.</span><span class="ident" id="7620977">cnet</span><span class="op" id="7620981">,</span>&nbsp;<span class="ident" id="7620983">tt</span><span class="op" id="7620985">.</span><span class="ident" id="7620986">caddr</span><span class="op" id="7620991">,</span>&nbsp;<span class="ident" id="7620993">taddr</span><span class="op" id="7620998">,</span>&nbsp;<span class="ident" id="7621000">tt</span><span class="op" id="7621002">.</span><span class="ident" id="7621003">empty</span><span class="op" id="7621008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621016">&lt;-</span><span class="ident" id="7621018">done</span>&nbsp;<span class="comment" id="7621023">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621048">&lt;-</span><span class="ident" id="7621050">done</span>&nbsp;<span class="comment" id="7621055">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621086">switch</span>&nbsp;<span class="ident" id="7621093">tt</span><span class="op" id="7621095">.</span><span class="ident" id="7621096">snet</span>&nbsp;<span class="op" id="7621101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621105">case</span>&nbsp;<span class="string" id="7621110">&#34;unixgram&#34;</span><span class="op" id="7621120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621125">os</span><span class="op" id="7621127">.</span><span class="ident" id="7621128">Remove</span><span class="op" id="7621134">(</span><span class="ident" id="7621135">tt</span><span class="op" id="7621137">.</span><span class="ident" id="7621138">saddr</span><span class="op" id="7621143">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621148">os</span><span class="op" id="7621150">.</span><span class="ident" id="7621151">Remove</span><span class="op" id="7621157">(</span><span class="ident" id="7621158">tt</span><span class="op" id="7621160">.</span><span class="ident" id="7621161">caddr</span><span class="op" id="7621166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621173">}</span><br>
<span class="lineno"></span><span class="op" id="7621175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="7621178">func</span>&nbsp;<span class="ident" id="7621183">runDatagramPacketConnServer</span><span class="op" id="7621210">(</span><span class="ident" id="7621211">t</span>&nbsp;<span class="op" id="7621213">*</span><span class="ident" id="7621214">testing</span><span class="op" id="7621221">.</span><span class="ident" id="7621222">T</span><span class="op" id="7621223">,</span>&nbsp;<span class="ident" id="7621225">net</span><span class="op" id="7621228">,</span>&nbsp;<span class="ident" id="7621230">laddr</span>&nbsp;<span class="builtintype" id="7621236">string</span><span class="op" id="7621242">,</span>&nbsp;<span class="ident" id="7621244">listening</span>&nbsp;<span class="keyword" id="7621254">chan</span><span class="op" id="7621258">&lt;-</span>&nbsp;<span class="builtintype" id="7621261">string</span><span class="op" id="7621267">,</span>&nbsp;<span class="ident" id="7621269">done</span>&nbsp;<span class="keyword" id="7621274">chan</span><span class="op" id="7621278">&lt;-</span>&nbsp;<span class="builtintype" id="7621281">int</span><span class="op" id="7621284">)</span>&nbsp;<span class="op" id="7621286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621289">c</span><span class="op" id="7621290">,</span>&nbsp;<span class="ident" id="7621292">err</span>&nbsp;<span class="op" id="7621296">:=</span>&nbsp;<span class="ident" id="7621299">ListenPacket</span><span class="op" id="7621311">(</span><span class="ident" id="7621312">net</span><span class="op" id="7621315">,</span>&nbsp;<span class="ident" id="7621317">laddr</span><span class="op" id="7621322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621325">if</span>&nbsp;<span class="ident" id="7621328">err</span>&nbsp;<span class="op" id="7621332">!=</span>&nbsp;<span class="ident" id="7621335">nil</span>&nbsp;<span class="op" id="7621339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621343">t</span><span class="op" id="7621344">.</span><span class="ident" id="7621345">Errorf</span><span class="op" id="7621351">(</span><span class="string" id="7621352">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7621385">,</span>&nbsp;<span class="ident" id="7621387">net</span><span class="op" id="7621390">,</span>&nbsp;<span class="ident" id="7621392">laddr</span><span class="op" id="7621397">,</span>&nbsp;<span class="ident" id="7621399">err</span><span class="op" id="7621402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621406">listening</span>&nbsp;<span class="op" id="7621416">&lt;-</span>&nbsp;<span class="string" id="7621419">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621429">done</span>&nbsp;<span class="op" id="7621434">&lt;-</span>&nbsp;<span class="num" id="7621437">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621441">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621452">defer</span>&nbsp;<span class="ident" id="7621458">c</span><span class="op" id="7621459">.</span><span class="ident" id="7621460">Close</span><span class="op" id="7621465">(</span><span class="op" id="7621466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621469">listening</span>&nbsp;<span class="op" id="7621479">&lt;-</span>&nbsp;<span class="ident" id="7621482">c</span><span class="op" id="7621483">.</span><span class="ident" id="7621484">LocalAddr</span><span class="op" id="7621493">(</span><span class="op" id="7621494">)</span><span class="op" id="7621495">.</span><span class="ident" id="7621496">String</span><span class="op" id="7621502">(</span><span class="op" id="7621503">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621507">buf</span>&nbsp;<span class="op" id="7621511">:=</span>&nbsp;<span class="builtinfunc" id="7621514">make</span><span class="op" id="7621518">(</span><span class="op" id="7621519">[</span><span class="op" id="7621520">]</span><span class="builtintype" id="7621521">byte</span><span class="op" id="7621525">,</span>&nbsp;<span class="num" id="7621527">1024</span><span class="op" id="7621531">)</span><br>
<span class="lineno"></span><span class="ident" id="7621533">run</span><span class="op" id="7621536">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621539">for</span>&nbsp;<span class="op" id="7621543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621547">c</span><span class="op" id="7621548">.</span><span class="ident" id="7621549">SetReadDeadline</span><span class="op" id="7621564">(</span><span class="ident" id="7621565">time</span><span class="op" id="7621569">.</span><span class="ident" id="7621570">Now</span><span class="op" id="7621573">(</span><span class="op" id="7621574">)</span><span class="op" id="7621575">.</span><span class="ident" id="7621576">Add</span><span class="op" id="7621579">(</span><span class="num" id="7621580">10</span>&nbsp;<span class="op" id="7621583">*</span>&nbsp;<span class="ident" id="7621585">time</span><span class="op" id="7621589">.</span><span class="ident" id="7621590">Millisecond</span><span class="op" id="7621601">)</span><span class="op" id="7621602">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621606">n</span><span class="op" id="7621607">,</span>&nbsp;<span class="ident" id="7621609">ra</span><span class="op" id="7621611">,</span>&nbsp;<span class="ident" id="7621613">err</span>&nbsp;<span class="op" id="7621617">:=</span>&nbsp;<span class="ident" id="7621620">c</span><span class="op" id="7621621">.</span><span class="ident" id="7621622">ReadFrom</span><span class="op" id="7621630">(</span><span class="ident" id="7621631">buf</span><span class="op" id="7621634">[</span><span class="num" id="7621635">0</span><span class="op" id="7621636">:</span><span class="op" id="7621637">]</span><span class="op" id="7621638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621642">if</span>&nbsp;<span class="ident" id="7621645">nerr</span><span class="op" id="7621649">,</span>&nbsp;<span class="ident" id="7621651">ok</span>&nbsp;<span class="op" id="7621654">:=</span>&nbsp;<span class="ident" id="7621657">err</span><span class="op" id="7621660">.</span><span class="op" id="7621661">(</span><span class="ident" id="7621662">Error</span><span class="op" id="7621667">)</span><span class="op" id="7621668">;</span>&nbsp;<span class="ident" id="7621670">ok</span>&nbsp;<span class="op" id="7621673">&amp;&amp;</span>&nbsp;<span class="ident" id="7621676">nerr</span><span class="op" id="7621680">.</span><span class="ident" id="7621681">Timeout</span><span class="op" id="7621688">(</span><span class="op" id="7621689">)</span>&nbsp;<span class="op" id="7621691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621696">select</span>&nbsp;<span class="op" id="7621703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621708">case</span>&nbsp;<span class="ident" id="7621713">done</span>&nbsp;<span class="op" id="7621718">&lt;-</span>&nbsp;<span class="num" id="7621721">1</span><span class="op" id="7621722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621728">break</span>&nbsp;<span class="ident" id="7621734">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621741">default</span><span class="op" id="7621748">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621754">continue</span>&nbsp;<span class="ident" id="7621763">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621778">if</span>&nbsp;<span class="ident" id="7621781">err</span>&nbsp;<span class="op" id="7621785">!=</span>&nbsp;<span class="ident" id="7621788">nil</span>&nbsp;<span class="op" id="7621792">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621797">break</span>&nbsp;<span class="ident" id="7621803">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621813">if</span>&nbsp;<span class="ident" id="7621816">_</span><span class="op" id="7621817">,</span>&nbsp;<span class="ident" id="7621819">err</span>&nbsp;<span class="op" id="7621823">=</span>&nbsp;<span class="ident" id="7621825">c</span><span class="op" id="7621826">.</span><span class="ident" id="7621827">WriteTo</span><span class="op" id="7621834">(</span><span class="ident" id="7621835">buf</span><span class="op" id="7621838">[</span><span class="num" id="7621839">0</span><span class="op" id="7621840">:</span><span class="ident" id="7621841">n</span><span class="op" id="7621842">]</span><span class="op" id="7621843">,</span>&nbsp;<span class="ident" id="7621845">ra</span><span class="op" id="7621847">)</span><span class="op" id="7621848">;</span>&nbsp;<span class="ident" id="7621850">err</span>&nbsp;<span class="op" id="7621854">!=</span>&nbsp;<span class="ident" id="7621857">nil</span>&nbsp;<span class="op" id="7621861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621866">t</span><span class="op" id="7621867">.</span><span class="ident" id="7621868">Errorf</span><span class="op" id="7621874">(</span><span class="string" id="7621875">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7621899">,</span>&nbsp;<span class="ident" id="7621901">ra</span><span class="op" id="7621903">,</span>&nbsp;<span class="ident" id="7621905">err</span><span class="op" id="7621908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621913">break</span>&nbsp;<span class="ident" id="7621919">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621931">done</span>&nbsp;<span class="op" id="7621936">&lt;-</span>&nbsp;<span class="num" id="7621939">1</span><br>
<span class="lineno"></span><span class="op" id="7621941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="7621944">func</span>&nbsp;<span class="ident" id="7621949">runDatagramConnClient</span><span class="op" id="7621970">(</span><span class="ident" id="7621971">t</span>&nbsp;<span class="op" id="7621973">*</span><span class="ident" id="7621974">testing</span><span class="op" id="7621981">.</span><span class="ident" id="7621982">T</span><span class="op" id="7621983">,</span>&nbsp;<span class="ident" id="7621985">net</span><span class="op" id="7621988">,</span>&nbsp;<span class="ident" id="7621990">laddr</span><span class="op" id="7621995">,</span>&nbsp;<span class="ident" id="7621997">taddr</span>&nbsp;<span class="builtintype" id="7622003">string</span><span class="op" id="7622009">,</span>&nbsp;<span class="ident" id="7622011">isEmpty</span>&nbsp;<span class="builtintype" id="7622019">bool</span><span class="op" id="7622023">)</span>&nbsp;<span class="op" id="7622025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622028">var</span>&nbsp;<span class="ident" id="7622032">c</span>&nbsp;<span class="ident" id="7622034">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622040">var</span>&nbsp;<span class="ident" id="7622044">err</span>&nbsp;<span class="builtintype" id="7622048">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622055">switch</span>&nbsp;<span class="ident" id="7622062">net</span>&nbsp;<span class="op" id="7622066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622069">case</span>&nbsp;<span class="string" id="7622074">&#34;udp&#34;</span><span class="op" id="7622079">,</span>&nbsp;<span class="string" id="7622081">&#34;udp4&#34;</span><span class="op" id="7622087">,</span>&nbsp;<span class="string" id="7622089">&#34;udp6&#34;</span><span class="op" id="7622095">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622099">c</span><span class="op" id="7622100">,</span>&nbsp;<span class="ident" id="7622102">err</span>&nbsp;<span class="op" id="7622106">=</span>&nbsp;<span class="ident" id="7622108">Dial</span><span class="op" id="7622112">(</span><span class="ident" id="7622113">net</span><span class="op" id="7622116">,</span>&nbsp;<span class="ident" id="7622118">taddr</span><span class="op" id="7622123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622127">if</span>&nbsp;<span class="ident" id="7622130">err</span>&nbsp;<span class="op" id="7622134">!=</span>&nbsp;<span class="ident" id="7622137">nil</span>&nbsp;<span class="op" id="7622141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622146">t</span><span class="op" id="7622147">.</span><span class="ident" id="7622148">Fatalf</span><span class="op" id="7622154">(</span><span class="string" id="7622155">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7622180">,</span>&nbsp;<span class="ident" id="7622182">net</span><span class="op" id="7622185">,</span>&nbsp;<span class="ident" id="7622187">taddr</span><span class="op" id="7622192">,</span>&nbsp;<span class="ident" id="7622194">err</span><span class="op" id="7622197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622204">case</span>&nbsp;<span class="string" id="7622209">&#34;unixgram&#34;</span><span class="op" id="7622219">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622223">c</span><span class="op" id="7622224">,</span>&nbsp;<span class="ident" id="7622226">err</span>&nbsp;<span class="op" id="7622230">=</span>&nbsp;<span class="ident" id="7622232">DialUnix</span><span class="op" id="7622240">(</span><span class="ident" id="7622241">net</span><span class="op" id="7622244">,</span>&nbsp;<span class="op" id="7622246">&amp;</span><span class="ident" id="7622247">UnixAddr</span><span class="op" id="7622255">{</span><span class="ident" id="7622256">Name</span><span class="op" id="7622260">:</span>&nbsp;<span class="ident" id="7622262">laddr</span><span class="op" id="7622267">,</span>&nbsp;<span class="ident" id="7622269">Net</span><span class="op" id="7622272">:</span>&nbsp;<span class="ident" id="7622274">net</span><span class="op" id="7622277">}</span><span class="op" id="7622278">,</span>&nbsp;<span class="op" id="7622280">&amp;</span><span class="ident" id="7622281">UnixAddr</span><span class="op" id="7622289">{</span><span class="ident" id="7622290">Name</span><span class="op" id="7622294">:</span>&nbsp;<span class="ident" id="7622296">taddr</span><span class="op" id="7622301">,</span>&nbsp;<span class="ident" id="7622303">Net</span><span class="op" id="7622306">:</span>&nbsp;<span class="ident" id="7622308">net</span><span class="op" id="7622311">}</span><span class="op" id="7622312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622316">if</span>&nbsp;<span class="ident" id="7622319">err</span>&nbsp;<span class="op" id="7622323">!=</span>&nbsp;<span class="ident" id="7622326">nil</span>&nbsp;<span class="op" id="7622330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622335">t</span><span class="op" id="7622336">.</span><span class="ident" id="7622337">Fatalf</span><span class="op" id="7622343">(</span><span class="string" id="7622344">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7622379">,</span>&nbsp;<span class="ident" id="7622381">net</span><span class="op" id="7622384">,</span>&nbsp;<span class="ident" id="7622386">laddr</span><span class="op" id="7622391">,</span>&nbsp;<span class="ident" id="7622393">taddr</span><span class="op" id="7622398">,</span>&nbsp;<span class="ident" id="7622400">err</span><span class="op" id="7622403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622410">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622413">defer</span>&nbsp;<span class="ident" id="7622419">c</span><span class="op" id="7622420">.</span><span class="ident" id="7622421">Close</span><span class="op" id="7622426">(</span><span class="op" id="7622427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622430">c</span><span class="op" id="7622431">.</span><span class="ident" id="7622432">SetReadDeadline</span><span class="op" id="7622447">(</span><span class="ident" id="7622448">time</span><span class="op" id="7622452">.</span><span class="ident" id="7622453">Now</span><span class="op" id="7622456">(</span><span class="op" id="7622457">)</span><span class="op" id="7622458">.</span><span class="ident" id="7622459">Add</span><span class="op" id="7622462">(</span><span class="num" id="7622463">1</span>&nbsp;<span class="op" id="7622465">*</span>&nbsp;<span class="ident" id="7622467">time</span><span class="op" id="7622471">.</span><span class="ident" id="7622472">Second</span><span class="op" id="7622478">)</span><span class="op" id="7622479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622483">var</span>&nbsp;<span class="ident" id="7622487">wb</span>&nbsp;<span class="op" id="7622490">[</span><span class="op" id="7622491">]</span><span class="builtintype" id="7622492">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622498">if</span>&nbsp;<span class="op" id="7622501">!</span><span class="ident" id="7622502">isEmpty</span>&nbsp;<span class="op" id="7622510">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622514">wb</span>&nbsp;<span class="op" id="7622517">=</span>&nbsp;<span class="op" id="7622519">[</span><span class="op" id="7622520">]</span><span class="builtintype" id="7622521">byte</span><span class="op" id="7622525">(</span><span class="string" id="7622526">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7622556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622562">if</span>&nbsp;<span class="ident" id="7622565">n</span><span class="op" id="7622566">,</span>&nbsp;<span class="ident" id="7622568">err</span>&nbsp;<span class="op" id="7622572">:=</span>&nbsp;<span class="ident" id="7622575">c</span><span class="op" id="7622576">.</span><span class="ident" id="7622577">Write</span><span class="op" id="7622582">(</span><span class="ident" id="7622583">wb</span><span class="op" id="7622585">[</span><span class="num" id="7622586">0</span><span class="op" id="7622587">:</span><span class="op" id="7622588">]</span><span class="op" id="7622589">)</span><span class="op" id="7622590">;</span>&nbsp;<span class="ident" id="7622592">err</span>&nbsp;<span class="op" id="7622596">!=</span>&nbsp;<span class="ident" id="7622599">nil</span>&nbsp;<span class="op" id="7622603">||</span>&nbsp;<span class="ident" id="7622606">n</span>&nbsp;<span class="op" id="7622608">!=</span>&nbsp;<span class="builtinfunc" id="7622611">len</span><span class="op" id="7622614">(</span><span class="ident" id="7622615">wb</span><span class="op" id="7622617">)</span>&nbsp;<span class="op" id="7622619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622623">t</span><span class="op" id="7622624">.</span><span class="ident" id="7622625">Fatalf</span><span class="op" id="7622631">(</span><span class="string" id="7622632">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7622670">,</span>&nbsp;<span class="ident" id="7622672">n</span><span class="op" id="7622673">,</span>&nbsp;<span class="ident" id="7622675">err</span><span class="op" id="7622678">,</span>&nbsp;<span class="builtinfunc" id="7622680">len</span><span class="op" id="7622683">(</span><span class="ident" id="7622684">wb</span><span class="op" id="7622686">)</span><span class="op" id="7622687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622690">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622694">rb</span>&nbsp;<span class="op" id="7622697">:=</span>&nbsp;<span class="builtinfunc" id="7622700">make</span><span class="op" id="7622704">(</span><span class="op" id="7622705">[</span><span class="op" id="7622706">]</span><span class="builtintype" id="7622707">byte</span><span class="op" id="7622711">,</span>&nbsp;<span class="num" id="7622713">1024</span><span class="op" id="7622717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622720">if</span>&nbsp;<span class="ident" id="7622723">n</span><span class="op" id="7622724">,</span>&nbsp;<span class="ident" id="7622726">err</span>&nbsp;<span class="op" id="7622730">:=</span>&nbsp;<span class="ident" id="7622733">c</span><span class="op" id="7622734">.</span><span class="ident" id="7622735">Read</span><span class="op" id="7622739">(</span><span class="ident" id="7622740">rb</span><span class="op" id="7622742">[</span><span class="num" id="7622743">0</span><span class="op" id="7622744">:</span><span class="op" id="7622745">]</span><span class="op" id="7622746">)</span><span class="op" id="7622747">;</span>&nbsp;<span class="ident" id="7622749">err</span>&nbsp;<span class="op" id="7622753">!=</span>&nbsp;<span class="ident" id="7622756">nil</span>&nbsp;<span class="op" id="7622760">||</span>&nbsp;<span class="ident" id="7622763">n</span>&nbsp;<span class="op" id="7622765">!=</span>&nbsp;<span class="builtinfunc" id="7622768">len</span><span class="op" id="7622771">(</span><span class="ident" id="7622772">wb</span><span class="op" id="7622774">)</span>&nbsp;<span class="op" id="7622776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622780">t</span><span class="op" id="7622781">.</span><span class="ident" id="7622782">Fatalf</span><span class="op" id="7622788">(</span><span class="string" id="7622789">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7622826">,</span>&nbsp;<span class="ident" id="7622828">n</span><span class="op" id="7622829">,</span>&nbsp;<span class="ident" id="7622831">err</span><span class="op" id="7622834">,</span>&nbsp;<span class="builtinfunc" id="7622836">len</span><span class="op" id="7622839">(</span><span class="ident" id="7622840">wb</span><span class="op" id="7622842">)</span><span class="op" id="7622843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622846">}</span><br>
<span class="lineno">425</span><span class="op" id="7622848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7622851">func</span>&nbsp;<span class="ident" id="7622856">runDatagramPacketConnClient</span><span class="op" id="7622883">(</span><span class="ident" id="7622884">t</span>&nbsp;<span class="op" id="7622886">*</span><span class="ident" id="7622887">testing</span><span class="op" id="7622894">.</span><span class="ident" id="7622895">T</span><span class="op" id="7622896">,</span>&nbsp;<span class="ident" id="7622898">net</span><span class="op" id="7622901">,</span>&nbsp;<span class="ident" id="7622903">laddr</span><span class="op" id="7622908">,</span>&nbsp;<span class="ident" id="7622910">taddr</span>&nbsp;<span class="builtintype" id="7622916">string</span><span class="op" id="7622922">,</span>&nbsp;<span class="ident" id="7622924">isEmpty</span>&nbsp;<span class="builtintype" id="7622932">bool</span><span class="op" id="7622936">)</span>&nbsp;<span class="op" id="7622938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622941">var</span>&nbsp;<span class="ident" id="7622945">ra</span>&nbsp;<span class="ident" id="7622948">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622954">var</span>&nbsp;<span class="ident" id="7622958">err</span>&nbsp;<span class="builtintype" id="7622962">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622969">switch</span>&nbsp;<span class="ident" id="7622976">net</span>&nbsp;<span class="op" id="7622980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622983">case</span>&nbsp;<span class="string" id="7622988">&#34;udp&#34;</span><span class="op" id="7622993">,</span>&nbsp;<span class="string" id="7622995">&#34;udp4&#34;</span><span class="op" id="7623001">,</span>&nbsp;<span class="string" id="7623003">&#34;udp6&#34;</span><span class="op" id="7623009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623013">ra</span><span class="op" id="7623015">,</span>&nbsp;<span class="ident" id="7623017">err</span>&nbsp;<span class="op" id="7623021">=</span>&nbsp;<span class="ident" id="7623023">ResolveUDPAddr</span><span class="op" id="7623037">(</span><span class="ident" id="7623038">net</span><span class="op" id="7623041">,</span>&nbsp;<span class="ident" id="7623043">taddr</span><span class="op" id="7623048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623052">if</span>&nbsp;<span class="ident" id="7623055">err</span>&nbsp;<span class="op" id="7623059">!=</span>&nbsp;<span class="ident" id="7623062">nil</span>&nbsp;<span class="op" id="7623066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623071">t</span><span class="op" id="7623072">.</span><span class="ident" id="7623073">Fatalf</span><span class="op" id="7623079">(</span><span class="string" id="7623080">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7623115">,</span>&nbsp;<span class="ident" id="7623117">net</span><span class="op" id="7623120">,</span>&nbsp;<span class="ident" id="7623122">taddr</span><span class="op" id="7623127">,</span>&nbsp;<span class="ident" id="7623129">err</span><span class="op" id="7623132">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623139">case</span>&nbsp;<span class="string" id="7623144">&#34;unixgram&#34;</span><span class="op" id="7623154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623158">ra</span><span class="op" id="7623160">,</span>&nbsp;<span class="ident" id="7623162">err</span>&nbsp;<span class="op" id="7623166">=</span>&nbsp;<span class="ident" id="7623168">ResolveUnixAddr</span><span class="op" id="7623183">(</span><span class="ident" id="7623184">net</span><span class="op" id="7623187">,</span>&nbsp;<span class="ident" id="7623189">taddr</span><span class="op" id="7623194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623198">if</span>&nbsp;<span class="ident" id="7623201">err</span>&nbsp;<span class="op" id="7623205">!=</span>&nbsp;<span class="ident" id="7623208">nil</span>&nbsp;<span class="op" id="7623212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623217">t</span><span class="op" id="7623218">.</span><span class="ident" id="7623219">Fatalf</span><span class="op" id="7623225">(</span><span class="string" id="7623226">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7623262">,</span>&nbsp;<span class="ident" id="7623264">net</span><span class="op" id="7623267">,</span>&nbsp;<span class="ident" id="7623269">taddr</span><span class="op" id="7623274">,</span>&nbsp;<span class="ident" id="7623276">err</span><span class="op" id="7623279">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623289">c</span><span class="op" id="7623290">,</span>&nbsp;<span class="ident" id="7623292">err</span>&nbsp;<span class="op" id="7623296">:=</span>&nbsp;<span class="ident" id="7623299">ListenPacket</span><span class="op" id="7623311">(</span><span class="ident" id="7623312">net</span><span class="op" id="7623315">,</span>&nbsp;<span class="ident" id="7623317">laddr</span><span class="op" id="7623322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623325">if</span>&nbsp;<span class="ident" id="7623328">err</span>&nbsp;<span class="op" id="7623332">!=</span>&nbsp;<span class="ident" id="7623335">nil</span>&nbsp;<span class="op" id="7623339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623343">t</span><span class="op" id="7623344">.</span><span class="ident" id="7623345">Fatalf</span><span class="op" id="7623351">(</span><span class="string" id="7623352">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="7623384">,</span>&nbsp;<span class="ident" id="7623386">net</span><span class="op" id="7623389">,</span>&nbsp;<span class="ident" id="7623391">laddr</span><span class="op" id="7623396">,</span>&nbsp;<span class="ident" id="7623398">err</span><span class="op" id="7623401">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623407">defer</span>&nbsp;<span class="ident" id="7623413">c</span><span class="op" id="7623414">.</span><span class="ident" id="7623415">Close</span><span class="op" id="7623420">(</span><span class="op" id="7623421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623424">c</span><span class="op" id="7623425">.</span><span class="ident" id="7623426">SetReadDeadline</span><span class="op" id="7623441">(</span><span class="ident" id="7623442">time</span><span class="op" id="7623446">.</span><span class="ident" id="7623447">Now</span><span class="op" id="7623450">(</span><span class="op" id="7623451">)</span><span class="op" id="7623452">.</span><span class="ident" id="7623453">Add</span><span class="op" id="7623456">(</span><span class="num" id="7623457">1</span>&nbsp;<span class="op" id="7623459">*</span>&nbsp;<span class="ident" id="7623461">time</span><span class="op" id="7623465">.</span><span class="ident" id="7623466">Second</span><span class="op" id="7623472">)</span><span class="op" id="7623473">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623477">var</span>&nbsp;<span class="ident" id="7623481">wb</span>&nbsp;<span class="op" id="7623484">[</span><span class="op" id="7623485">]</span><span class="builtintype" id="7623486">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623492">if</span>&nbsp;<span class="op" id="7623495">!</span><span class="ident" id="7623496">isEmpty</span>&nbsp;<span class="op" id="7623504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623508">wb</span>&nbsp;<span class="op" id="7623511">=</span>&nbsp;<span class="op" id="7623513">[</span><span class="op" id="7623514">]</span><span class="builtintype" id="7623515">byte</span><span class="op" id="7623519">(</span><span class="string" id="7623520">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="7623564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623570">if</span>&nbsp;<span class="ident" id="7623573">n</span><span class="op" id="7623574">,</span>&nbsp;<span class="ident" id="7623576">err</span>&nbsp;<span class="op" id="7623580">:=</span>&nbsp;<span class="ident" id="7623583">c</span><span class="op" id="7623584">.</span><span class="ident" id="7623585">WriteTo</span><span class="op" id="7623592">(</span><span class="ident" id="7623593">wb</span><span class="op" id="7623595">[</span><span class="num" id="7623596">0</span><span class="op" id="7623597">:</span><span class="op" id="7623598">]</span><span class="op" id="7623599">,</span>&nbsp;<span class="ident" id="7623601">ra</span><span class="op" id="7623603">)</span><span class="op" id="7623604">;</span>&nbsp;<span class="ident" id="7623606">err</span>&nbsp;<span class="op" id="7623610">!=</span>&nbsp;<span class="ident" id="7623613">nil</span>&nbsp;<span class="op" id="7623617">||</span>&nbsp;<span class="ident" id="7623620">n</span>&nbsp;<span class="op" id="7623622">!=</span>&nbsp;<span class="builtinfunc" id="7623625">len</span><span class="op" id="7623628">(</span><span class="ident" id="7623629">wb</span><span class="op" id="7623631">)</span>&nbsp;<span class="op" id="7623633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623637">t</span><span class="op" id="7623638">.</span><span class="ident" id="7623639">Fatalf</span><span class="op" id="7623645">(</span><span class="string" id="7623646">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7623690">,</span>&nbsp;<span class="ident" id="7623692">ra</span><span class="op" id="7623694">,</span>&nbsp;<span class="ident" id="7623696">n</span><span class="op" id="7623697">,</span>&nbsp;<span class="ident" id="7623699">err</span><span class="op" id="7623702">,</span>&nbsp;<span class="builtinfunc" id="7623704">len</span><span class="op" id="7623707">(</span><span class="ident" id="7623708">wb</span><span class="op" id="7623710">)</span><span class="op" id="7623711">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623718">rb</span>&nbsp;<span class="op" id="7623721">:=</span>&nbsp;<span class="builtinfunc" id="7623724">make</span><span class="op" id="7623728">(</span><span class="op" id="7623729">[</span><span class="op" id="7623730">]</span><span class="builtintype" id="7623731">byte</span><span class="op" id="7623735">,</span>&nbsp;<span class="num" id="7623737">1024</span><span class="op" id="7623741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623744">if</span>&nbsp;<span class="ident" id="7623747">n</span><span class="op" id="7623748">,</span>&nbsp;<span class="ident" id="7623750">_</span><span class="op" id="7623751">,</span>&nbsp;<span class="ident" id="7623753">err</span>&nbsp;<span class="op" id="7623757">:=</span>&nbsp;<span class="ident" id="7623760">c</span><span class="op" id="7623761">.</span><span class="ident" id="7623762">ReadFrom</span><span class="op" id="7623770">(</span><span class="ident" id="7623771">rb</span><span class="op" id="7623773">[</span><span class="num" id="7623774">0</span><span class="op" id="7623775">:</span><span class="op" id="7623776">]</span><span class="op" id="7623777">)</span><span class="op" id="7623778">;</span>&nbsp;<span class="ident" id="7623780">err</span>&nbsp;<span class="op" id="7623784">!=</span>&nbsp;<span class="ident" id="7623787">nil</span>&nbsp;<span class="op" id="7623791">||</span>&nbsp;<span class="ident" id="7623794">n</span>&nbsp;<span class="op" id="7623796">!=</span>&nbsp;<span class="builtinfunc" id="7623799">len</span><span class="op" id="7623802">(</span><span class="ident" id="7623803">wb</span><span class="op" id="7623805">)</span>&nbsp;<span class="op" id="7623807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623811">t</span><span class="op" id="7623812">.</span><span class="ident" id="7623813">Fatalf</span><span class="op" id="7623819">(</span><span class="string" id="7623820">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7623861">,</span>&nbsp;<span class="ident" id="7623863">n</span><span class="op" id="7623864">,</span>&nbsp;<span class="ident" id="7623866">err</span><span class="op" id="7623869">,</span>&nbsp;<span class="builtinfunc" id="7623871">len</span><span class="op" id="7623874">(</span><span class="ident" id="7623875">wb</span><span class="op" id="7623877">)</span><span class="op" id="7623878">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623881">}</span><br>
<span class="lineno"></span><span class="op" id="7623883">}</span>
</div>
</body>
</html>
