<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2319157">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2319212">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2319266">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2319317">package</span>&nbsp;<span class="ident" id="2319325">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2319330">import</span>&nbsp;<span class="op" id="2319337">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2319340">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2319352">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2319360">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="2319370">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319373">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="2319450">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="2319535">func</span>&nbsp;<span class="ident" id="2319540">SortImports</span><span class="op" id="2319551">(</span><span class="ident" id="2319552">fset</span>&nbsp;<span class="op" id="2319557">*</span><span class="ident" id="2319558">token</span><span class="op" id="2319563">.</span><span class="ident" id="2319564">FileSet</span><span class="op" id="2319571">,</span>&nbsp;<span class="ident" id="2319573">f</span>&nbsp;<span class="op" id="2319575">*</span><span class="ident" id="2319576">File</span><span class="op" id="2319580">)</span>&nbsp;<span class="op" id="2319582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319585">for</span>&nbsp;<span class="ident" id="2319589">_</span><span class="op" id="2319590">,</span>&nbsp;<span class="ident" id="2319592">d</span>&nbsp;<span class="op" id="2319594">:=</span>&nbsp;<span class="keyword" id="2319597">range</span>&nbsp;<span class="ident" id="2319603">f</span><span class="op" id="2319604">.</span><span class="ident" id="2319605">Decls</span>&nbsp;<span class="op" id="2319611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319615">d</span><span class="op" id="2319616">,</span>&nbsp;<span class="ident" id="2319618">ok</span>&nbsp;<span class="op" id="2319621">:=</span>&nbsp;<span class="ident" id="2319624">d</span><span class="op" id="2319625">.</span><span class="op" id="2319626">(</span><span class="op" id="2319627">*</span><span class="ident" id="2319628">GenDecl</span><span class="op" id="2319635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319639">if</span>&nbsp;<span class="op" id="2319642">!</span><span class="ident" id="2319643">ok</span>&nbsp;<span class="op" id="2319646">||</span>&nbsp;<span class="ident" id="2319649">d</span><span class="op" id="2319650">.</span><span class="ident" id="2319651">Tok</span>&nbsp;<span class="op" id="2319655">!=</span>&nbsp;<span class="ident" id="2319658">token</span><span class="op" id="2319663">.</span><span class="ident" id="2319664">IMPORT</span>&nbsp;<span class="op" id="2319671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319676">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319724">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319756">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319769">if</span>&nbsp;<span class="op" id="2319772">!</span><span class="ident" id="2319773">d</span><span class="op" id="2319774">.</span><span class="ident" id="2319775">Lparen</span><span class="op" id="2319781">.</span><span class="ident" id="2319782">IsValid</span><span class="op" id="2319789">(</span><span class="op" id="2319790">)</span>&nbsp;<span class="op" id="2319792">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319797">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319835">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319851">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319909">i</span>&nbsp;<span class="op" id="2319911">:=</span>&nbsp;<span class="num" id="2319914">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319918">specs</span>&nbsp;<span class="op" id="2319924">:=</span>&nbsp;<span class="ident" id="2319927">d</span><span class="op" id="2319928">.</span><span class="ident" id="2319929">Specs</span><span class="op" id="2319934">[</span><span class="op" id="2319935">:</span><span class="num" id="2319936">0</span><span class="op" id="2319937">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319941">for</span>&nbsp;<span class="ident" id="2319945">j</span><span class="op" id="2319946">,</span>&nbsp;<span class="ident" id="2319948">s</span>&nbsp;<span class="op" id="2319950">:=</span>&nbsp;<span class="keyword" id="2319953">range</span>&nbsp;<span class="ident" id="2319959">d</span><span class="op" id="2319960">.</span><span class="ident" id="2319961">Specs</span>&nbsp;<span class="op" id="2319967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319972">if</span>&nbsp;<span class="ident" id="2319975">j</span>&nbsp;<span class="op" id="2319977">&gt;</span>&nbsp;<span class="ident" id="2319979">i</span>&nbsp;<span class="op" id="2319981">&amp;&amp;</span>&nbsp;<span class="ident" id="2319984">fset</span><span class="op" id="2319988">.</span><span class="ident" id="2319989">Position</span><span class="op" id="2319997">(</span><span class="ident" id="2319998">s</span><span class="op" id="2319999">.</span><span class="ident" id="2320000">Pos</span><span class="op" id="2320003">(</span><span class="op" id="2320004">)</span><span class="op" id="2320005">)</span><span class="op" id="2320006">.</span><span class="ident" id="2320007">Line</span>&nbsp;<span class="op" id="2320012">&gt;</span>&nbsp;<span class="num" id="2320014">1</span><span class="op" id="2320015">+</span><span class="ident" id="2320016">fset</span><span class="op" id="2320020">.</span><span class="ident" id="2320021">Position</span><span class="op" id="2320029">(</span><span class="ident" id="2320030">d</span><span class="op" id="2320031">.</span><span class="ident" id="2320032">Specs</span><span class="op" id="2320037">[</span><span class="ident" id="2320038">j</span><span class="op" id="2320039">-</span><span class="num" id="2320040">1</span><span class="op" id="2320041">]</span><span class="op" id="2320042">.</span><span class="ident" id="2320043">End</span><span class="op" id="2320046">(</span><span class="op" id="2320047">)</span><span class="op" id="2320048">)</span><span class="op" id="2320049">.</span><span class="ident" id="2320050">Line</span>&nbsp;<span class="op" id="2320055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2320061">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320103">specs</span>&nbsp;<span class="op" id="2320109">=</span>&nbsp;<span class="builtinfunc" id="2320111">append</span><span class="op" id="2320117">(</span><span class="ident" id="2320118">specs</span><span class="op" id="2320123">,</span>&nbsp;<span class="ident" id="2320125">sortSpecs</span><span class="op" id="2320134">(</span><span class="ident" id="2320135">fset</span><span class="op" id="2320139">,</span>&nbsp;<span class="ident" id="2320141">f</span><span class="op" id="2320142">,</span>&nbsp;<span class="ident" id="2320144">d</span><span class="op" id="2320145">.</span><span class="ident" id="2320146">Specs</span><span class="op" id="2320151">[</span><span class="ident" id="2320152">i</span><span class="op" id="2320153">:</span><span class="ident" id="2320154">j</span><span class="op" id="2320155">]</span><span class="op" id="2320156">)</span><span class="op" id="2320157">...</span><span class="op" id="2320160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320166">i</span>&nbsp;<span class="op" id="2320168">=</span>&nbsp;<span class="ident" id="2320170">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320183">specs</span>&nbsp;<span class="op" id="2320189">=</span>&nbsp;<span class="builtinfunc" id="2320191">append</span><span class="op" id="2320197">(</span><span class="ident" id="2320198">specs</span><span class="op" id="2320203">,</span>&nbsp;<span class="ident" id="2320205">sortSpecs</span><span class="op" id="2320214">(</span><span class="ident" id="2320215">fset</span><span class="op" id="2320219">,</span>&nbsp;<span class="ident" id="2320221">f</span><span class="op" id="2320222">,</span>&nbsp;<span class="ident" id="2320224">d</span><span class="op" id="2320225">.</span><span class="ident" id="2320226">Specs</span><span class="op" id="2320231">[</span><span class="ident" id="2320232">i</span><span class="op" id="2320233">:</span><span class="op" id="2320234">]</span><span class="op" id="2320235">)</span><span class="op" id="2320236">...</span><span class="op" id="2320239">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320243">d</span><span class="op" id="2320244">.</span><span class="ident" id="2320245">Specs</span>&nbsp;<span class="op" id="2320251">=</span>&nbsp;<span class="ident" id="2320253">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2320262">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320333">if</span>&nbsp;<span class="builtinfunc" id="2320336">len</span><span class="op" id="2320339">(</span><span class="ident" id="2320340">d</span><span class="op" id="2320341">.</span><span class="ident" id="2320342">Specs</span><span class="op" id="2320347">)</span>&nbsp;<span class="op" id="2320349">&gt;</span>&nbsp;<span class="num" id="2320351">0</span>&nbsp;<span class="op" id="2320353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320358">lastSpec</span>&nbsp;<span class="op" id="2320367">:=</span>&nbsp;<span class="ident" id="2320370">d</span><span class="op" id="2320371">.</span><span class="ident" id="2320372">Specs</span><span class="op" id="2320377">[</span><span class="builtinfunc" id="2320378">len</span><span class="op" id="2320381">(</span><span class="ident" id="2320382">d</span><span class="op" id="2320383">.</span><span class="ident" id="2320384">Specs</span><span class="op" id="2320389">)</span><span class="op" id="2320390">-</span><span class="num" id="2320391">1</span><span class="op" id="2320392">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320397">lastLine</span>&nbsp;<span class="op" id="2320406">:=</span>&nbsp;<span class="ident" id="2320409">fset</span><span class="op" id="2320413">.</span><span class="ident" id="2320414">Position</span><span class="op" id="2320422">(</span><span class="ident" id="2320423">lastSpec</span><span class="op" id="2320431">.</span><span class="ident" id="2320432">Pos</span><span class="op" id="2320435">(</span><span class="op" id="2320436">)</span><span class="op" id="2320437">)</span><span class="op" id="2320438">.</span><span class="ident" id="2320439">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320447">if</span>&nbsp;<span class="ident" id="2320450">rParenLine</span>&nbsp;<span class="op" id="2320461">:=</span>&nbsp;<span class="ident" id="2320464">fset</span><span class="op" id="2320468">.</span><span class="ident" id="2320469">Position</span><span class="op" id="2320477">(</span><span class="ident" id="2320478">d</span><span class="op" id="2320479">.</span><span class="ident" id="2320480">Rparen</span><span class="op" id="2320486">)</span><span class="op" id="2320487">.</span><span class="ident" id="2320488">Line</span><span class="op" id="2320492">;</span>&nbsp;<span class="ident" id="2320494">rParenLine</span>&nbsp;<span class="op" id="2320505">&gt;</span>&nbsp;<span class="ident" id="2320507">lastLine</span><span class="op" id="2320515">+</span><span class="num" id="2320516">1</span>&nbsp;<span class="op" id="2320518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320524">fset</span><span class="op" id="2320528">.</span><span class="ident" id="2320529">File</span><span class="op" id="2320533">(</span><span class="ident" id="2320534">d</span><span class="op" id="2320535">.</span><span class="ident" id="2320536">Rparen</span><span class="op" id="2320542">)</span><span class="op" id="2320543">.</span><span class="ident" id="2320544">MergeLine</span><span class="op" id="2320553">(</span><span class="ident" id="2320554">rParenLine</span>&nbsp;<span class="op" id="2320565">-</span>&nbsp;<span class="num" id="2320567">1</span><span class="op" id="2320568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320577">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320580">}</span><br>
<span class="lineno"></span><span class="op" id="2320582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2320585">func</span>&nbsp;<span class="ident" id="2320590">importPath</span><span class="op" id="2320600">(</span><span class="ident" id="2320601">s</span>&nbsp;<span class="ident" id="2320603">Spec</span><span class="op" id="2320607">)</span>&nbsp;<span class="builtintype" id="2320609">string</span>&nbsp;<span class="op" id="2320616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320619">t</span><span class="op" id="2320620">,</span>&nbsp;<span class="ident" id="2320622">err</span>&nbsp;<span class="op" id="2320626">:=</span>&nbsp;<span class="ident" id="2320629">strconv</span><span class="op" id="2320636">.</span><span class="ident" id="2320637">Unquote</span><span class="op" id="2320644">(</span><span class="ident" id="2320645">s</span><span class="op" id="2320646">.</span><span class="op" id="2320647">(</span><span class="op" id="2320648">*</span><span class="ident" id="2320649">ImportSpec</span><span class="op" id="2320659">)</span><span class="op" id="2320660">.</span><span class="ident" id="2320661">Path</span><span class="op" id="2320665">.</span><span class="ident" id="2320666">Value</span><span class="op" id="2320671">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320674">if</span>&nbsp;<span class="ident" id="2320677">err</span>&nbsp;<span class="op" id="2320681">==</span>&nbsp;<span class="ident" id="2320684">nil</span>&nbsp;<span class="op" id="2320688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320692">return</span>&nbsp;<span class="ident" id="2320699">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320705">return</span>&nbsp;<span class="string" id="2320712">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2320715">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2320718">func</span>&nbsp;<span class="ident" id="2320723">importName</span><span class="op" id="2320733">(</span><span class="ident" id="2320734">s</span>&nbsp;<span class="ident" id="2320736">Spec</span><span class="op" id="2320740">)</span>&nbsp;<span class="builtintype" id="2320742">string</span>&nbsp;<span class="op" id="2320749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320752">n</span>&nbsp;<span class="op" id="2320754">:=</span>&nbsp;<span class="ident" id="2320757">s</span><span class="op" id="2320758">.</span><span class="op" id="2320759">(</span><span class="op" id="2320760">*</span><span class="ident" id="2320761">ImportSpec</span><span class="op" id="2320771">)</span><span class="op" id="2320772">.</span><span class="ident" id="2320773">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320779">if</span>&nbsp;<span class="ident" id="2320782">n</span>&nbsp;<span class="op" id="2320784">==</span>&nbsp;<span class="ident" id="2320787">nil</span>&nbsp;<span class="op" id="2320791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320795">return</span>&nbsp;<span class="string" id="2320802">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320809">return</span>&nbsp;<span class="ident" id="2320816">n</span><span class="op" id="2320817">.</span><span class="ident" id="2320818">Name</span><br>
<span class="lineno"></span><span class="op" id="2320823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2320826">func</span>&nbsp;<span class="ident" id="2320831">importComment</span><span class="op" id="2320844">(</span><span class="ident" id="2320845">s</span>&nbsp;<span class="ident" id="2320847">Spec</span><span class="op" id="2320851">)</span>&nbsp;<span class="builtintype" id="2320853">string</span>&nbsp;<span class="op" id="2320860">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320863">c</span>&nbsp;<span class="op" id="2320865">:=</span>&nbsp;<span class="ident" id="2320868">s</span><span class="op" id="2320869">.</span><span class="op" id="2320870">(</span><span class="op" id="2320871">*</span><span class="ident" id="2320872">ImportSpec</span><span class="op" id="2320882">)</span><span class="op" id="2320883">.</span><span class="ident" id="2320884">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320893">if</span>&nbsp;<span class="ident" id="2320896">c</span>&nbsp;<span class="op" id="2320898">==</span>&nbsp;<span class="ident" id="2320901">nil</span>&nbsp;<span class="op" id="2320905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320909">return</span>&nbsp;<span class="string" id="2320916">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320923">return</span>&nbsp;<span class="ident" id="2320930">c</span><span class="op" id="2320931">.</span><span class="ident" id="2320932">Text</span><span class="op" id="2320936">(</span><span class="op" id="2320937">)</span><br>
<span class="lineno">75</span><span class="op" id="2320939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2320942">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="2321012">func</span>&nbsp;<span class="ident" id="2321017">collapse</span><span class="op" id="2321025">(</span><span class="ident" id="2321026">prev</span><span class="op" id="2321030">,</span>&nbsp;<span class="ident" id="2321032">next</span>&nbsp;<span class="ident" id="2321037">Spec</span><span class="op" id="2321041">)</span>&nbsp;<span class="builtintype" id="2321043">bool</span>&nbsp;<span class="op" id="2321048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321051">if</span>&nbsp;<span class="ident" id="2321054">importPath</span><span class="op" id="2321064">(</span><span class="ident" id="2321065">next</span><span class="op" id="2321069">)</span>&nbsp;<span class="op" id="2321071">!=</span>&nbsp;<span class="ident" id="2321074">importPath</span><span class="op" id="2321084">(</span><span class="ident" id="2321085">prev</span><span class="op" id="2321089">)</span>&nbsp;<span class="op" id="2321091">||</span>&nbsp;<span class="ident" id="2321094">importName</span><span class="op" id="2321104">(</span><span class="ident" id="2321105">next</span><span class="op" id="2321109">)</span>&nbsp;<span class="op" id="2321111">!=</span>&nbsp;<span class="ident" id="2321114">importName</span><span class="op" id="2321124">(</span><span class="ident" id="2321125">prev</span><span class="op" id="2321129">)</span>&nbsp;<span class="op" id="2321131">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321135">return</span>&nbsp;<span class="builtintype" id="2321142">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321152">return</span>&nbsp;<span class="ident" id="2321159">prev</span><span class="op" id="2321163">.</span><span class="op" id="2321164">(</span><span class="op" id="2321165">*</span><span class="ident" id="2321166">ImportSpec</span><span class="op" id="2321176">)</span><span class="op" id="2321177">.</span><span class="ident" id="2321178">Comment</span>&nbsp;<span class="op" id="2321186">==</span>&nbsp;<span class="ident" id="2321189">nil</span><br>
<span class="lineno"></span><span class="op" id="2321193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="2321196">type</span>&nbsp;<span class="ident" id="2321201">posSpan</span>&nbsp;<span class="keyword" id="2321209">struct</span>&nbsp;<span class="op" id="2321216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321219">Start</span>&nbsp;<span class="ident" id="2321225">token</span><span class="op" id="2321230">.</span><span class="ident" id="2321231">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321236">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2321242">token</span><span class="op" id="2321247">.</span><span class="ident" id="2321248">Pos</span><br>
<span class="lineno"></span><span class="op" id="2321252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="2321255">func</span>&nbsp;<span class="ident" id="2321260">sortSpecs</span><span class="op" id="2321269">(</span><span class="ident" id="2321270">fset</span>&nbsp;<span class="op" id="2321275">*</span><span class="ident" id="2321276">token</span><span class="op" id="2321281">.</span><span class="ident" id="2321282">FileSet</span><span class="op" id="2321289">,</span>&nbsp;<span class="ident" id="2321291">f</span>&nbsp;<span class="op" id="2321293">*</span><span class="ident" id="2321294">File</span><span class="op" id="2321298">,</span>&nbsp;<span class="ident" id="2321300">specs</span>&nbsp;<span class="op" id="2321306">[</span><span class="op" id="2321307">]</span><span class="ident" id="2321308">Spec</span><span class="op" id="2321312">)</span>&nbsp;<span class="op" id="2321314">[</span><span class="op" id="2321315">]</span><span class="ident" id="2321316">Spec</span>&nbsp;<span class="op" id="2321321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321324">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321387">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321432">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321483">if</span>&nbsp;<span class="builtinfunc" id="2321486">len</span><span class="op" id="2321489">(</span><span class="ident" id="2321490">specs</span><span class="op" id="2321495">)</span>&nbsp;<span class="op" id="2321497">&lt;=</span>&nbsp;<span class="num" id="2321500">1</span>&nbsp;<span class="op" id="2321502">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321506">return</span>&nbsp;<span class="ident" id="2321513">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321524">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321556">pos</span>&nbsp;<span class="op" id="2321560">:=</span>&nbsp;<span class="builtinfunc" id="2321563">make</span><span class="op" id="2321567">(</span><span class="op" id="2321568">[</span><span class="op" id="2321569">]</span><span class="ident" id="2321570">posSpan</span><span class="op" id="2321577">,</span>&nbsp;<span class="builtinfunc" id="2321579">len</span><span class="op" id="2321582">(</span><span class="ident" id="2321583">specs</span><span class="op" id="2321588">)</span><span class="op" id="2321589">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321592">for</span>&nbsp;<span class="ident" id="2321596">i</span><span class="op" id="2321597">,</span>&nbsp;<span class="ident" id="2321599">s</span>&nbsp;<span class="op" id="2321601">:=</span>&nbsp;<span class="keyword" id="2321604">range</span>&nbsp;<span class="ident" id="2321610">specs</span>&nbsp;<span class="op" id="2321616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321620">pos</span><span class="op" id="2321623">[</span><span class="ident" id="2321624">i</span><span class="op" id="2321625">]</span>&nbsp;<span class="op" id="2321627">=</span>&nbsp;<span class="ident" id="2321629">posSpan</span><span class="op" id="2321636">{</span><span class="ident" id="2321637">s</span><span class="op" id="2321638">.</span><span class="ident" id="2321639">Pos</span><span class="op" id="2321642">(</span><span class="op" id="2321643">)</span><span class="op" id="2321644">,</span>&nbsp;<span class="ident" id="2321646">s</span><span class="op" id="2321647">.</span><span class="ident" id="2321648">End</span><span class="op" id="2321651">(</span><span class="op" id="2321652">)</span><span class="op" id="2321653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321660">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2321697">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321757">lastLine</span>&nbsp;<span class="op" id="2321766">:=</span>&nbsp;<span class="ident" id="2321769">fset</span><span class="op" id="2321773">.</span><span class="ident" id="2321774">Position</span><span class="op" id="2321782">(</span><span class="ident" id="2321783">pos</span><span class="op" id="2321786">[</span><span class="builtinfunc" id="2321787">len</span><span class="op" id="2321790">(</span><span class="ident" id="2321791">pos</span><span class="op" id="2321794">)</span><span class="op" id="2321795">-</span><span class="num" id="2321796">1</span><span class="op" id="2321797">]</span><span class="op" id="2321798">.</span><span class="ident" id="2321799">End</span><span class="op" id="2321802">)</span><span class="op" id="2321803">.</span><span class="ident" id="2321804">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321810">cstart</span>&nbsp;<span class="op" id="2321817">:=</span>&nbsp;<span class="builtinfunc" id="2321820">len</span><span class="op" id="2321823">(</span><span class="ident" id="2321824">f</span><span class="op" id="2321825">.</span><span class="ident" id="2321826">Comments</span><span class="op" id="2321834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321837">cend</span>&nbsp;<span class="op" id="2321842">:=</span>&nbsp;<span class="builtinfunc" id="2321845">len</span><span class="op" id="2321848">(</span><span class="ident" id="2321849">f</span><span class="op" id="2321850">.</span><span class="ident" id="2321851">Comments</span><span class="op" id="2321859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321862">for</span>&nbsp;<span class="ident" id="2321866">i</span><span class="op" id="2321867">,</span>&nbsp;<span class="ident" id="2321869">g</span>&nbsp;<span class="op" id="2321871">:=</span>&nbsp;<span class="keyword" id="2321874">range</span>&nbsp;<span class="ident" id="2321880">f</span><span class="op" id="2321881">.</span><span class="ident" id="2321882">Comments</span>&nbsp;<span class="op" id="2321891">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321895">if</span>&nbsp;<span class="ident" id="2321898">g</span><span class="op" id="2321899">.</span><span class="ident" id="2321900">Pos</span><span class="op" id="2321903">(</span><span class="op" id="2321904">)</span>&nbsp;<span class="op" id="2321906">&lt;</span>&nbsp;<span class="ident" id="2321908">pos</span><span class="op" id="2321911">[</span><span class="num" id="2321912">0</span><span class="op" id="2321913">]</span><span class="op" id="2321914">.</span><span class="ident" id="2321915">Start</span>&nbsp;<span class="op" id="2321921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321926">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321941">if</span>&nbsp;<span class="ident" id="2321944">i</span>&nbsp;<span class="op" id="2321946">&lt;</span>&nbsp;<span class="ident" id="2321948">cstart</span>&nbsp;<span class="op" id="2321955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321960">cstart</span>&nbsp;<span class="op" id="2321967">=</span>&nbsp;<span class="ident" id="2321969">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321977">if</span>&nbsp;<span class="ident" id="2321980">fset</span><span class="op" id="2321984">.</span><span class="ident" id="2321985">Position</span><span class="op" id="2321993">(</span><span class="ident" id="2321994">g</span><span class="op" id="2321995">.</span><span class="ident" id="2321996">End</span><span class="op" id="2321999">(</span><span class="op" id="2322000">)</span><span class="op" id="2322001">)</span><span class="op" id="2322002">.</span><span class="ident" id="2322003">Line</span>&nbsp;<span class="op" id="2322008">&gt;</span>&nbsp;<span class="ident" id="2322010">lastLine</span>&nbsp;<span class="op" id="2322019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322024">cend</span>&nbsp;<span class="op" id="2322029">=</span>&nbsp;<span class="ident" id="2322031">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2322036">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2322044">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2322047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322050">comments</span>&nbsp;<span class="op" id="2322059">:=</span>&nbsp;<span class="ident" id="2322062">f</span><span class="op" id="2322063">.</span><span class="ident" id="2322064">Comments</span><span class="op" id="2322072">[</span><span class="ident" id="2322073">cstart</span><span class="op" id="2322079">:</span><span class="ident" id="2322080">cend</span><span class="op" id="2322084">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322088">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322145">importComment</span>&nbsp;<span class="op" id="2322159">:=</span>&nbsp;<span class="keyword" id="2322162">map</span><span class="op" id="2322165">[</span><span class="op" id="2322166">*</span><span class="ident" id="2322167">ImportSpec</span><span class="op" id="2322177">]</span><span class="op" id="2322178">[</span><span class="op" id="2322179">]</span><span class="op" id="2322180">*</span><span class="ident" id="2322181">CommentGroup</span><span class="op" id="2322193">{</span><span class="op" id="2322194">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322197">specIndex</span>&nbsp;<span class="op" id="2322207">:=</span>&nbsp;<span class="num" id="2322210">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2322213">for</span>&nbsp;<span class="ident" id="2322217">_</span><span class="op" id="2322218">,</span>&nbsp;<span class="ident" id="2322220">g</span>&nbsp;<span class="op" id="2322222">:=</span>&nbsp;<span class="keyword" id="2322225">range</span>&nbsp;<span class="ident" id="2322231">comments</span>&nbsp;<span class="op" id="2322240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2322244">for</span>&nbsp;<span class="ident" id="2322248">specIndex</span><span class="op" id="2322257">+</span><span class="num" id="2322258">1</span>&nbsp;<span class="op" id="2322260">&lt;</span>&nbsp;<span class="builtinfunc" id="2322262">len</span><span class="op" id="2322265">(</span><span class="ident" id="2322266">specs</span><span class="op" id="2322271">)</span>&nbsp;<span class="op" id="2322273">&amp;&amp;</span>&nbsp;<span class="ident" id="2322276">pos</span><span class="op" id="2322279">[</span><span class="ident" id="2322280">specIndex</span><span class="op" id="2322289">+</span><span class="num" id="2322290">1</span><span class="op" id="2322291">]</span><span class="op" id="2322292">.</span><span class="ident" id="2322293">Start</span>&nbsp;<span class="op" id="2322299">&lt;=</span>&nbsp;<span class="ident" id="2322302">g</span><span class="op" id="2322303">.</span><span class="ident" id="2322304">Pos</span><span class="op" id="2322307">(</span><span class="op" id="2322308">)</span>&nbsp;<span class="op" id="2322310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322315">specIndex</span><span class="op" id="2322324">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2322329">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322333">s</span>&nbsp;<span class="op" id="2322335">:=</span>&nbsp;<span class="ident" id="2322338">specs</span><span class="op" id="2322343">[</span><span class="ident" id="2322344">specIndex</span><span class="op" id="2322353">]</span><span class="op" id="2322354">.</span><span class="op" id="2322355">(</span><span class="op" id="2322356">*</span><span class="ident" id="2322357">ImportSpec</span><span class="op" id="2322367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322371">importComment</span><span class="op" id="2322384">[</span><span class="ident" id="2322385">s</span><span class="op" id="2322386">]</span>&nbsp;<span class="op" id="2322388">=</span>&nbsp;<span class="builtinfunc" id="2322390">append</span><span class="op" id="2322396">(</span><span class="ident" id="2322397">importComment</span><span class="op" id="2322410">[</span><span class="ident" id="2322411">s</span><span class="op" id="2322412">]</span><span class="op" id="2322413">,</span>&nbsp;<span class="ident" id="2322415">g</span><span class="op" id="2322416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2322419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322423">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322465">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322521">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322587">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322642">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322681">sort</span><span class="op" id="2322685">.</span><span class="ident" id="2322686">Sort</span><span class="op" id="2322690">(</span><span class="ident" id="2322691">byImportSpec</span><span class="op" id="2322703">(</span><span class="ident" id="2322704">specs</span><span class="op" id="2322709">)</span><span class="op" id="2322710">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322714">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2322769">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322800">deduped</span>&nbsp;<span class="op" id="2322808">:=</span>&nbsp;<span class="ident" id="2322811">specs</span><span class="op" id="2322816">[</span><span class="op" id="2322817">:</span><span class="num" id="2322818">0</span><span class="op" id="2322819">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2322822">for</span>&nbsp;<span class="ident" id="2322826">i</span><span class="op" id="2322827">,</span>&nbsp;<span class="ident" id="2322829">s</span>&nbsp;<span class="op" id="2322831">:=</span>&nbsp;<span class="keyword" id="2322834">range</span>&nbsp;<span class="ident" id="2322840">specs</span>&nbsp;<span class="op" id="2322846">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2322850">if</span>&nbsp;<span class="ident" id="2322853">i</span>&nbsp;<span class="op" id="2322855">==</span>&nbsp;<span class="builtinfunc" id="2322858">len</span><span class="op" id="2322861">(</span><span class="ident" id="2322862">specs</span><span class="op" id="2322867">)</span><span class="op" id="2322868">-</span><span class="num" id="2322869">1</span>&nbsp;<span class="op" id="2322871">||</span>&nbsp;<span class="op" id="2322874">!</span><span class="ident" id="2322875">collapse</span><span class="op" id="2322883">(</span><span class="ident" id="2322884">s</span><span class="op" id="2322885">,</span>&nbsp;<span class="ident" id="2322887">specs</span><span class="op" id="2322892">[</span><span class="ident" id="2322893">i</span><span class="op" id="2322894">+</span><span class="num" id="2322895">1</span><span class="op" id="2322896">]</span><span class="op" id="2322897">)</span>&nbsp;<span class="op" id="2322899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322904">deduped</span>&nbsp;<span class="op" id="2322912">=</span>&nbsp;<span class="builtinfunc" id="2322914">append</span><span class="op" id="2322920">(</span><span class="ident" id="2322921">deduped</span><span class="op" id="2322928">,</span>&nbsp;<span class="ident" id="2322930">s</span><span class="op" id="2322931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2322935">}</span>&nbsp;<span class="keyword" id="2322937">else</span>&nbsp;<span class="op" id="2322942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322947">p</span>&nbsp;<span class="op" id="2322949">:=</span>&nbsp;<span class="ident" id="2322952">s</span><span class="op" id="2322953">.</span><span class="ident" id="2322954">Pos</span><span class="op" id="2322957">(</span><span class="op" id="2322958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2322963">fset</span><span class="op" id="2322967">.</span><span class="ident" id="2322968">File</span><span class="op" id="2322972">(</span><span class="ident" id="2322973">p</span><span class="op" id="2322974">)</span><span class="op" id="2322975">.</span><span class="ident" id="2322976">MergeLine</span><span class="op" id="2322985">(</span><span class="ident" id="2322986">fset</span><span class="op" id="2322990">.</span><span class="ident" id="2322991">Position</span><span class="op" id="2322999">(</span><span class="ident" id="2323000">p</span><span class="op" id="2323001">)</span><span class="op" id="2323002">.</span><span class="ident" id="2323003">Line</span><span class="op" id="2323007">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323017">specs</span>&nbsp;<span class="op" id="2323023">=</span>&nbsp;<span class="ident" id="2323025">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2323035">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323064">for</span>&nbsp;<span class="ident" id="2323068">i</span><span class="op" id="2323069">,</span>&nbsp;<span class="ident" id="2323071">s</span>&nbsp;<span class="op" id="2323073">:=</span>&nbsp;<span class="keyword" id="2323076">range</span>&nbsp;<span class="ident" id="2323082">specs</span>&nbsp;<span class="op" id="2323088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323092">s</span>&nbsp;<span class="op" id="2323094">:=</span>&nbsp;<span class="ident" id="2323097">s</span><span class="op" id="2323098">.</span><span class="op" id="2323099">(</span><span class="op" id="2323100">*</span><span class="ident" id="2323101">ImportSpec</span><span class="op" id="2323111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323115">if</span>&nbsp;<span class="ident" id="2323118">s</span><span class="op" id="2323119">.</span><span class="ident" id="2323120">Name</span>&nbsp;<span class="op" id="2323125">!=</span>&nbsp;<span class="ident" id="2323128">nil</span>&nbsp;<span class="op" id="2323132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323137">s</span><span class="op" id="2323138">.</span><span class="ident" id="2323139">Name</span><span class="op" id="2323143">.</span><span class="ident" id="2323144">NamePos</span>&nbsp;<span class="op" id="2323152">=</span>&nbsp;<span class="ident" id="2323154">pos</span><span class="op" id="2323157">[</span><span class="ident" id="2323158">i</span><span class="op" id="2323159">]</span><span class="op" id="2323160">.</span><span class="ident" id="2323161">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323169">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323173">s</span><span class="op" id="2323174">.</span><span class="ident" id="2323175">Path</span><span class="op" id="2323179">.</span><span class="ident" id="2323180">ValuePos</span>&nbsp;<span class="op" id="2323189">=</span>&nbsp;<span class="ident" id="2323191">pos</span><span class="op" id="2323194">[</span><span class="ident" id="2323195">i</span><span class="op" id="2323196">]</span><span class="op" id="2323197">.</span><span class="ident" id="2323198">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323206">s</span><span class="op" id="2323207">.</span><span class="ident" id="2323208">EndPos</span>&nbsp;<span class="op" id="2323215">=</span>&nbsp;<span class="ident" id="2323217">pos</span><span class="op" id="2323220">[</span><span class="ident" id="2323221">i</span><span class="op" id="2323222">]</span><span class="op" id="2323223">.</span><span class="ident" id="2323224">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323230">for</span>&nbsp;<span class="ident" id="2323234">_</span><span class="op" id="2323235">,</span>&nbsp;<span class="ident" id="2323237">g</span>&nbsp;<span class="op" id="2323239">:=</span>&nbsp;<span class="keyword" id="2323242">range</span>&nbsp;<span class="ident" id="2323248">importComment</span><span class="op" id="2323261">[</span><span class="ident" id="2323262">s</span><span class="op" id="2323263">]</span>&nbsp;<span class="op" id="2323265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323270">for</span>&nbsp;<span class="ident" id="2323274">_</span><span class="op" id="2323275">,</span>&nbsp;<span class="ident" id="2323277">c</span>&nbsp;<span class="op" id="2323279">:=</span>&nbsp;<span class="keyword" id="2323282">range</span>&nbsp;<span class="ident" id="2323288">g</span><span class="op" id="2323289">.</span><span class="ident" id="2323290">List</span>&nbsp;<span class="op" id="2323295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323301">c</span><span class="op" id="2323302">.</span><span class="ident" id="2323303">Slash</span>&nbsp;<span class="op" id="2323309">=</span>&nbsp;<span class="ident" id="2323311">pos</span><span class="op" id="2323314">[</span><span class="ident" id="2323315">i</span><span class="op" id="2323316">]</span><span class="op" id="2323317">.</span><span class="ident" id="2323318">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323336">sort</span><span class="op" id="2323340">.</span><span class="ident" id="2323341">Sort</span><span class="op" id="2323345">(</span><span class="ident" id="2323346">byCommentPos</span><span class="op" id="2323358">(</span><span class="ident" id="2323359">comments</span><span class="op" id="2323367">)</span><span class="op" id="2323368">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323372">return</span>&nbsp;<span class="ident" id="2323379">specs</span><br>
<span class="lineno"></span><span class="op" id="2323385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2323388">type</span>&nbsp;<span class="ident" id="2323393">byImportSpec</span>&nbsp;<span class="op" id="2323406">[</span><span class="op" id="2323407">]</span><span class="ident" id="2323408">Spec</span>&nbsp;<span class="comment" id="2323413">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="2323438">func</span>&nbsp;<span class="op" id="2323443">(</span><span class="ident" id="2323444">x</span>&nbsp;<span class="ident" id="2323446">byImportSpec</span><span class="op" id="2323458">)</span>&nbsp;<span class="ident" id="2323460">Len</span><span class="op" id="2323463">(</span><span class="op" id="2323464">)</span>&nbsp;<span class="builtintype" id="2323466">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323475">{</span>&nbsp;<span class="keyword" id="2323477">return</span>&nbsp;<span class="builtinfunc" id="2323484">len</span><span class="op" id="2323487">(</span><span class="ident" id="2323488">x</span><span class="op" id="2323489">)</span>&nbsp;<span class="op" id="2323491">}</span><br>
<span class="lineno"></span><span class="keyword" id="2323493">func</span>&nbsp;<span class="op" id="2323498">(</span><span class="ident" id="2323499">x</span>&nbsp;<span class="ident" id="2323501">byImportSpec</span><span class="op" id="2323513">)</span>&nbsp;<span class="ident" id="2323515">Swap</span><span class="op" id="2323519">(</span><span class="ident" id="2323520">i</span><span class="op" id="2323521">,</span>&nbsp;<span class="ident" id="2323523">j</span>&nbsp;<span class="builtintype" id="2323525">int</span><span class="op" id="2323528">)</span>&nbsp;<span class="op" id="2323530">{</span>&nbsp;<span class="ident" id="2323532">x</span><span class="op" id="2323533">[</span><span class="ident" id="2323534">i</span><span class="op" id="2323535">]</span><span class="op" id="2323536">,</span>&nbsp;<span class="ident" id="2323538">x</span><span class="op" id="2323539">[</span><span class="ident" id="2323540">j</span><span class="op" id="2323541">]</span>&nbsp;<span class="op" id="2323543">=</span>&nbsp;<span class="ident" id="2323545">x</span><span class="op" id="2323546">[</span><span class="ident" id="2323547">j</span><span class="op" id="2323548">]</span><span class="op" id="2323549">,</span>&nbsp;<span class="ident" id="2323551">x</span><span class="op" id="2323552">[</span><span class="ident" id="2323553">i</span><span class="op" id="2323554">]</span>&nbsp;<span class="op" id="2323556">}</span><br>
<span class="lineno"></span><span class="keyword" id="2323558">func</span>&nbsp;<span class="op" id="2323563">(</span><span class="ident" id="2323564">x</span>&nbsp;<span class="ident" id="2323566">byImportSpec</span><span class="op" id="2323578">)</span>&nbsp;<span class="ident" id="2323580">Less</span><span class="op" id="2323584">(</span><span class="ident" id="2323585">i</span><span class="op" id="2323586">,</span>&nbsp;<span class="ident" id="2323588">j</span>&nbsp;<span class="builtintype" id="2323590">int</span><span class="op" id="2323593">)</span>&nbsp;<span class="builtintype" id="2323595">bool</span>&nbsp;<span class="op" id="2323600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323603">ipath</span>&nbsp;<span class="op" id="2323609">:=</span>&nbsp;<span class="ident" id="2323612">importPath</span><span class="op" id="2323622">(</span><span class="ident" id="2323623">x</span><span class="op" id="2323624">[</span><span class="ident" id="2323625">i</span><span class="op" id="2323626">]</span><span class="op" id="2323627">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323630">jpath</span>&nbsp;<span class="op" id="2323636">:=</span>&nbsp;<span class="ident" id="2323639">importPath</span><span class="op" id="2323649">(</span><span class="ident" id="2323650">x</span><span class="op" id="2323651">[</span><span class="ident" id="2323652">j</span><span class="op" id="2323653">]</span><span class="op" id="2323654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323657">if</span>&nbsp;<span class="ident" id="2323660">ipath</span>&nbsp;<span class="op" id="2323666">!=</span>&nbsp;<span class="ident" id="2323669">jpath</span>&nbsp;<span class="op" id="2323675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323679">return</span>&nbsp;<span class="ident" id="2323686">ipath</span>&nbsp;<span class="op" id="2323692">&lt;</span>&nbsp;<span class="ident" id="2323694">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323704">iname</span>&nbsp;<span class="op" id="2323710">:=</span>&nbsp;<span class="ident" id="2323713">importName</span><span class="op" id="2323723">(</span><span class="ident" id="2323724">x</span><span class="op" id="2323725">[</span><span class="ident" id="2323726">i</span><span class="op" id="2323727">]</span><span class="op" id="2323728">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2323731">jname</span>&nbsp;<span class="op" id="2323737">:=</span>&nbsp;<span class="ident" id="2323740">importName</span><span class="op" id="2323750">(</span><span class="ident" id="2323751">x</span><span class="op" id="2323752">[</span><span class="ident" id="2323753">j</span><span class="op" id="2323754">]</span><span class="op" id="2323755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323758">if</span>&nbsp;<span class="ident" id="2323761">iname</span>&nbsp;<span class="op" id="2323767">!=</span>&nbsp;<span class="ident" id="2323770">jname</span>&nbsp;<span class="op" id="2323776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323780">return</span>&nbsp;<span class="ident" id="2323787">iname</span>&nbsp;<span class="op" id="2323793">&lt;</span>&nbsp;<span class="ident" id="2323795">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2323802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2323805">return</span>&nbsp;<span class="ident" id="2323812">importComment</span><span class="op" id="2323825">(</span><span class="ident" id="2323826">x</span><span class="op" id="2323827">[</span><span class="ident" id="2323828">i</span><span class="op" id="2323829">]</span><span class="op" id="2323830">)</span>&nbsp;<span class="op" id="2323832">&lt;</span>&nbsp;<span class="ident" id="2323834">importComment</span><span class="op" id="2323847">(</span><span class="ident" id="2323848">x</span><span class="op" id="2323849">[</span><span class="ident" id="2323850">j</span><span class="op" id="2323851">]</span><span class="op" id="2323852">)</span><br>
<span class="lineno">190</span><span class="op" id="2323854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2323857">type</span>&nbsp;<span class="ident" id="2323862">byCommentPos</span>&nbsp;<span class="op" id="2323875">[</span><span class="op" id="2323876">]</span><span class="op" id="2323877">*</span><span class="ident" id="2323878">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2323892">func</span>&nbsp;<span class="op" id="2323897">(</span><span class="ident" id="2323898">x</span>&nbsp;<span class="ident" id="2323900">byCommentPos</span><span class="op" id="2323912">)</span>&nbsp;<span class="ident" id="2323914">Len</span><span class="op" id="2323917">(</span><span class="op" id="2323918">)</span>&nbsp;<span class="builtintype" id="2323920">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323934">{</span>&nbsp;<span class="keyword" id="2323936">return</span>&nbsp;<span class="builtinfunc" id="2323943">len</span><span class="op" id="2323946">(</span><span class="ident" id="2323947">x</span><span class="op" id="2323948">)</span>&nbsp;<span class="op" id="2323950">}</span><br>
<span class="lineno">195</span><span class="keyword" id="2323952">func</span>&nbsp;<span class="op" id="2323957">(</span><span class="ident" id="2323958">x</span>&nbsp;<span class="ident" id="2323960">byCommentPos</span><span class="op" id="2323972">)</span>&nbsp;<span class="ident" id="2323974">Swap</span><span class="op" id="2323978">(</span><span class="ident" id="2323979">i</span><span class="op" id="2323980">,</span>&nbsp;<span class="ident" id="2323982">j</span>&nbsp;<span class="builtintype" id="2323984">int</span><span class="op" id="2323987">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2323994">{</span>&nbsp;<span class="ident" id="2323996">x</span><span class="op" id="2323997">[</span><span class="ident" id="2323998">i</span><span class="op" id="2323999">]</span><span class="op" id="2324000">,</span>&nbsp;<span class="ident" id="2324002">x</span><span class="op" id="2324003">[</span><span class="ident" id="2324004">j</span><span class="op" id="2324005">]</span>&nbsp;<span class="op" id="2324007">=</span>&nbsp;<span class="ident" id="2324009">x</span><span class="op" id="2324010">[</span><span class="ident" id="2324011">j</span><span class="op" id="2324012">]</span><span class="op" id="2324013">,</span>&nbsp;<span class="ident" id="2324015">x</span><span class="op" id="2324016">[</span><span class="ident" id="2324017">i</span><span class="op" id="2324018">]</span>&nbsp;<span class="op" id="2324020">}</span><br>
<span class="lineno"></span><span class="keyword" id="2324022">func</span>&nbsp;<span class="op" id="2324027">(</span><span class="ident" id="2324028">x</span>&nbsp;<span class="ident" id="2324030">byCommentPos</span><span class="op" id="2324042">)</span>&nbsp;<span class="ident" id="2324044">Less</span><span class="op" id="2324048">(</span><span class="ident" id="2324049">i</span><span class="op" id="2324050">,</span>&nbsp;<span class="ident" id="2324052">j</span>&nbsp;<span class="builtintype" id="2324054">int</span><span class="op" id="2324057">)</span>&nbsp;<span class="builtintype" id="2324059">bool</span>&nbsp;<span class="op" id="2324064">{</span>&nbsp;<span class="keyword" id="2324066">return</span>&nbsp;<span class="ident" id="2324073">x</span><span class="op" id="2324074">[</span><span class="ident" id="2324075">i</span><span class="op" id="2324076">]</span><span class="op" id="2324077">.</span><span class="ident" id="2324078">Pos</span><span class="op" id="2324081">(</span><span class="op" id="2324082">)</span>&nbsp;<span class="op" id="2324084">&lt;</span>&nbsp;<span class="ident" id="2324086">x</span><span class="op" id="2324087">[</span><span class="ident" id="2324088">j</span><span class="op" id="2324089">]</span><span class="op" id="2324090">.</span><span class="ident" id="2324091">Pos</span><span class="op" id="2324094">(</span><span class="op" id="2324095">)</span>&nbsp;<span class="op" id="2324097">}</span>
</div>
</body>
</html>
