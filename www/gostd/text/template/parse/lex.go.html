<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template/parse</h2>
<ul>
<li><a href="/gostd/text/template/parse/lex.go.html">lex.go</a></li>
<li><a href="/gostd/text/template/parse/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/text/template/parse/node.go.html">node.go</a></li>
<li><a href="/gostd/text/template/parse/parse.go.html">parse.go</a></li>
<li><a href="/gostd/text/template/parse/parse_test.go.html">parse_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3459188">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3459243">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3459297">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3459348">package</span>&nbsp;<span class="ident" id="3459356">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3459363">import</span>&nbsp;<span class="op" id="3459370">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459373">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459380">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459391">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3459402">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3459417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3459420">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="3459489">type</span>&nbsp;<span class="ident" id="3459494">item</span>&nbsp;<span class="keyword" id="3459499">struct</span>&nbsp;<span class="op" id="3459506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459509">typ</span>&nbsp;<span class="ident" id="3459513">itemType</span>&nbsp;<span class="comment" id="3459522">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459549">pos</span>&nbsp;<span class="ident" id="3459553">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3459562">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3459633">val</span>&nbsp;<span class="builtintype" id="3459637">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3459646">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="3459673">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3459676">func</span>&nbsp;<span class="op" id="3459681">(</span><span class="ident" id="3459682">i</span>&nbsp;<span class="ident" id="3459684">item</span><span class="op" id="3459688">)</span>&nbsp;<span class="ident" id="3459690">String</span><span class="op" id="3459696">(</span><span class="op" id="3459697">)</span>&nbsp;<span class="builtintype" id="3459699">string</span>&nbsp;<span class="op" id="3459706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459709">switch</span>&nbsp;<span class="op" id="3459716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459719">case</span>&nbsp;<span class="ident" id="3459724">i</span><span class="op" id="3459725">.</span><span class="ident" id="3459726">typ</span>&nbsp;<span class="op" id="3459730">==</span>&nbsp;<span class="ident" id="3459733">itemEOF</span><span class="op" id="3459740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459744">return</span>&nbsp;<span class="string" id="3459751">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459758">case</span>&nbsp;<span class="ident" id="3459763">i</span><span class="op" id="3459764">.</span><span class="ident" id="3459765">typ</span>&nbsp;<span class="op" id="3459769">==</span>&nbsp;<span class="ident" id="3459772">itemError</span><span class="op" id="3459781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459785">return</span>&nbsp;<span class="ident" id="3459792">i</span><span class="op" id="3459793">.</span><span class="ident" id="3459794">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459799">case</span>&nbsp;<span class="ident" id="3459804">i</span><span class="op" id="3459805">.</span><span class="ident" id="3459806">typ</span>&nbsp;<span class="op" id="3459810">&gt;</span>&nbsp;<span class="ident" id="3459812">itemKeyword</span><span class="op" id="3459823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459827">return</span>&nbsp;<span class="ident" id="3459834">fmt</span><span class="op" id="3459837">.</span><span class="ident" id="3459838">Sprintf</span><span class="op" id="3459845">(</span><span class="string" id="3459846">&#34;&lt;%s&gt;&#34;</span><span class="op" id="3459852">,</span>&nbsp;<span class="ident" id="3459854">i</span><span class="op" id="3459855">.</span><span class="ident" id="3459856">val</span><span class="op" id="3459859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459862">case</span>&nbsp;<span class="builtinfunc" id="3459867">len</span><span class="op" id="3459870">(</span><span class="ident" id="3459871">i</span><span class="op" id="3459872">.</span><span class="ident" id="3459873">val</span><span class="op" id="3459876">)</span>&nbsp;<span class="op" id="3459878">&gt;</span>&nbsp;<span class="num" id="3459880">10</span><span class="op" id="3459882">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459886">return</span>&nbsp;<span class="ident" id="3459893">fmt</span><span class="op" id="3459896">.</span><span class="ident" id="3459897">Sprintf</span><span class="op" id="3459904">(</span><span class="string" id="3459905">&#34;%.10q...&#34;</span><span class="op" id="3459915">,</span>&nbsp;<span class="ident" id="3459917">i</span><span class="op" id="3459918">.</span><span class="ident" id="3459919">val</span><span class="op" id="3459922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3459925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3459928">return</span>&nbsp;<span class="ident" id="3459935">fmt</span><span class="op" id="3459938">.</span><span class="ident" id="3459939">Sprintf</span><span class="op" id="3459946">(</span><span class="string" id="3459947">&#34;%q&#34;</span><span class="op" id="3459951">,</span>&nbsp;<span class="ident" id="3459953">i</span><span class="op" id="3459954">.</span><span class="ident" id="3459955">val</span><span class="op" id="3459958">)</span><br>
<span class="lineno"></span><span class="op" id="3459960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3459963">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="3460009">type</span>&nbsp;<span class="ident" id="3460014">itemType</span>&nbsp;<span class="builtintype" id="3460023">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3460028">const</span>&nbsp;<span class="op" id="3460034">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460037">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3460054">itemType</span>&nbsp;<span class="op" id="3460063">=</span>&nbsp;<span class="ident" id="3460065">iota</span>&nbsp;<span class="comment" id="3460070">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460113">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460146">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460167">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460200">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460255">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460288">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460311">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460344">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460400">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460433">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460483">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460492">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460507">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460553">itemIdentifier</span>&nbsp;<span class="comment" id="3460568">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460618">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="3460633">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460659">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="3460674">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460696">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460711">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460750">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460765">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460781">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="3460796">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460836">itemRightDelim</span>&nbsp;<span class="comment" id="3460851">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460878">itemRightParen</span>&nbsp;<span class="comment" id="3460893">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460915">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460930">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3460969">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3460984">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461020">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461035">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461050">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3461065">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3461130">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461170">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="3461183">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461221">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461234">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461262">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3461275">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461294">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461307">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461324">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461337">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461353">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461366">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461381">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461394">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461454">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461467">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461485">itemTemplate</span>&nbsp;<span class="comment" id="3461498">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461519">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3461532">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="3461548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3461551">var</span>&nbsp;<span class="ident" id="3461555">key</span>&nbsp;<span class="op" id="3461559">=</span>&nbsp;<span class="keyword" id="3461561">map</span><span class="op" id="3461564">[</span><span class="builtintype" id="3461565">string</span><span class="op" id="3461571">]</span><span class="ident" id="3461572">itemType</span><span class="op" id="3461580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461583">&#34;.&#34;</span><span class="op" id="3461586">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461595">itemDot</span><span class="op" id="3461602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461605">&#34;define&#34;</span><span class="op" id="3461613">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3461617">itemDefine</span><span class="op" id="3461627">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461630">&#34;else&#34;</span><span class="op" id="3461636">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461642">itemElse</span><span class="op" id="3461650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461653">&#34;end&#34;</span><span class="op" id="3461658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461665">itemEnd</span><span class="op" id="3461672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461675">&#34;if&#34;</span><span class="op" id="3461679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461687">itemIf</span><span class="op" id="3461693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461696">&#34;range&#34;</span><span class="op" id="3461703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461708">itemRange</span><span class="op" id="3461717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461720">&#34;nil&#34;</span><span class="op" id="3461725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461732">itemNil</span><span class="op" id="3461739">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461742">&#34;template&#34;</span><span class="op" id="3461752">:</span>&nbsp;<span class="ident" id="3461754">itemTemplate</span><span class="op" id="3461766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3461769">&#34;with&#34;</span><span class="op" id="3461775">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3461781">itemWith</span><span class="op" id="3461789">,</span><br>
<span class="lineno"></span><span class="op" id="3461791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3461794">const</span>&nbsp;<span class="ident" id="3461800">eof</span>&nbsp;<span class="op" id="3461804">=</span>&nbsp;<span class="op" id="3461806">-</span><span class="num" id="3461807">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="3461810">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="3461900">type</span>&nbsp;<span class="ident" id="3461905">stateFn</span>&nbsp;<span class="keyword" id="3461913">func</span><span class="op" id="3461917">(</span><span class="op" id="3461918">*</span><span class="ident" id="3461919">lexer</span><span class="op" id="3461924">)</span>&nbsp;<span class="ident" id="3461926">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3461935">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="3461976">type</span>&nbsp;<span class="ident" id="3461981">lexer</span>&nbsp;<span class="keyword" id="3461987">struct</span>&nbsp;<span class="op" id="3461994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461997">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3462008">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462018">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462073">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3462084">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462094">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462123">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="3462134">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462144">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462164">rightDelim</span>&nbsp;<span class="builtintype" id="3462175">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462185">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462203">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3462214">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3462224">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462262">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3462273">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462283">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462317">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3462328">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462338">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462370">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3462381">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462391">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462430">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3462441">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462451">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462505">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3462516">chan</span>&nbsp;<span class="ident" id="3462521">item</span>&nbsp;<span class="comment" id="3462526">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462555">parenDepth</span>&nbsp;<span class="builtintype" id="3462566">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3462576">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="3462606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3462609">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="3462653">func</span>&nbsp;<span class="op" id="3462658">(</span><span class="ident" id="3462659">l</span>&nbsp;<span class="op" id="3462661">*</span><span class="ident" id="3462662">lexer</span><span class="op" id="3462667">)</span>&nbsp;<span class="ident" id="3462669">next</span><span class="op" id="3462673">(</span><span class="op" id="3462674">)</span>&nbsp;<span class="builtintype" id="3462676">rune</span>&nbsp;<span class="op" id="3462681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462684">if</span>&nbsp;<span class="builtintype" id="3462687">int</span><span class="op" id="3462690">(</span><span class="ident" id="3462691">l</span><span class="op" id="3462692">.</span><span class="ident" id="3462693">pos</span><span class="op" id="3462696">)</span>&nbsp;<span class="op" id="3462698">&gt;=</span>&nbsp;<span class="builtinfunc" id="3462701">len</span><span class="op" id="3462704">(</span><span class="ident" id="3462705">l</span><span class="op" id="3462706">.</span><span class="ident" id="3462707">input</span><span class="op" id="3462712">)</span>&nbsp;<span class="op" id="3462714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462718">l</span><span class="op" id="3462719">.</span><span class="ident" id="3462720">width</span>&nbsp;<span class="op" id="3462726">=</span>&nbsp;<span class="num" id="3462728">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462732">return</span>&nbsp;<span class="ident" id="3462739">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462744">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462747">r</span><span class="op" id="3462748">,</span>&nbsp;<span class="ident" id="3462750">w</span>&nbsp;<span class="op" id="3462752">:=</span>&nbsp;<span class="ident" id="3462755">utf8</span><span class="op" id="3462759">.</span><span class="ident" id="3462760">DecodeRuneInString</span><span class="op" id="3462778">(</span><span class="ident" id="3462779">l</span><span class="op" id="3462780">.</span><span class="ident" id="3462781">input</span><span class="op" id="3462786">[</span><span class="ident" id="3462787">l</span><span class="op" id="3462788">.</span><span class="ident" id="3462789">pos</span><span class="op" id="3462792">:</span><span class="op" id="3462793">]</span><span class="op" id="3462794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462797">l</span><span class="op" id="3462798">.</span><span class="ident" id="3462799">width</span>&nbsp;<span class="op" id="3462805">=</span>&nbsp;<span class="ident" id="3462807">Pos</span><span class="op" id="3462810">(</span><span class="ident" id="3462811">w</span><span class="op" id="3462812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462815">l</span><span class="op" id="3462816">.</span><span class="ident" id="3462817">pos</span>&nbsp;<span class="op" id="3462821">+=</span>&nbsp;<span class="ident" id="3462824">l</span><span class="op" id="3462825">.</span><span class="ident" id="3462826">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462833">return</span>&nbsp;<span class="ident" id="3462840">r</span><br>
<span class="lineno"></span><span class="op" id="3462842">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3462845">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="3462910">func</span>&nbsp;<span class="op" id="3462915">(</span><span class="ident" id="3462916">l</span>&nbsp;<span class="op" id="3462918">*</span><span class="ident" id="3462919">lexer</span><span class="op" id="3462924">)</span>&nbsp;<span class="ident" id="3462926">peek</span><span class="op" id="3462930">(</span><span class="op" id="3462931">)</span>&nbsp;<span class="builtintype" id="3462933">rune</span>&nbsp;<span class="op" id="3462938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462941">r</span>&nbsp;<span class="op" id="3462943">:=</span>&nbsp;<span class="ident" id="3462946">l</span><span class="op" id="3462947">.</span><span class="ident" id="3462948">next</span><span class="op" id="3462952">(</span><span class="op" id="3462953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462956">l</span><span class="op" id="3462957">.</span><span class="ident" id="3462958">backup</span><span class="op" id="3462964">(</span><span class="op" id="3462965">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462968">return</span>&nbsp;<span class="ident" id="3462975">r</span><br>
<span class="lineno"></span><span class="op" id="3462977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3462980">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3463053">func</span>&nbsp;<span class="op" id="3463058">(</span><span class="ident" id="3463059">l</span>&nbsp;<span class="op" id="3463061">*</span><span class="ident" id="3463062">lexer</span><span class="op" id="3463067">)</span>&nbsp;<span class="ident" id="3463069">backup</span><span class="op" id="3463075">(</span><span class="op" id="3463076">)</span>&nbsp;<span class="op" id="3463078">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463081">l</span><span class="op" id="3463082">.</span><span class="ident" id="3463083">pos</span>&nbsp;<span class="op" id="3463087">-=</span>&nbsp;<span class="ident" id="3463090">l</span><span class="op" id="3463091">.</span><span class="ident" id="3463092">width</span><br>
<span class="lineno"></span><span class="op" id="3463098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3463101">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="3463144">func</span>&nbsp;<span class="op" id="3463149">(</span><span class="ident" id="3463150">l</span>&nbsp;<span class="op" id="3463152">*</span><span class="ident" id="3463153">lexer</span><span class="op" id="3463158">)</span>&nbsp;<span class="ident" id="3463160">emit</span><span class="op" id="3463164">(</span><span class="ident" id="3463165">t</span>&nbsp;<span class="ident" id="3463167">itemType</span><span class="op" id="3463175">)</span>&nbsp;<span class="op" id="3463177">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463180">l</span><span class="op" id="3463181">.</span><span class="ident" id="3463182">items</span>&nbsp;<span class="op" id="3463188">&lt;-</span>&nbsp;<span class="ident" id="3463191">item</span><span class="op" id="3463195">{</span><span class="ident" id="3463196">t</span><span class="op" id="3463197">,</span>&nbsp;<span class="ident" id="3463199">l</span><span class="op" id="3463200">.</span><span class="ident" id="3463201">start</span><span class="op" id="3463206">,</span>&nbsp;<span class="ident" id="3463208">l</span><span class="op" id="3463209">.</span><span class="ident" id="3463210">input</span><span class="op" id="3463215">[</span><span class="ident" id="3463216">l</span><span class="op" id="3463217">.</span><span class="ident" id="3463218">start</span><span class="op" id="3463223">:</span><span class="ident" id="3463224">l</span><span class="op" id="3463225">.</span><span class="ident" id="3463226">pos</span><span class="op" id="3463229">]</span><span class="op" id="3463230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463233">l</span><span class="op" id="3463234">.</span><span class="ident" id="3463235">start</span>&nbsp;<span class="op" id="3463241">=</span>&nbsp;<span class="ident" id="3463243">l</span><span class="op" id="3463244">.</span><span class="ident" id="3463245">pos</span><br>
<span class="lineno"></span><span class="op" id="3463249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3463252">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="3463310">func</span>&nbsp;<span class="op" id="3463315">(</span><span class="ident" id="3463316">l</span>&nbsp;<span class="op" id="3463318">*</span><span class="ident" id="3463319">lexer</span><span class="op" id="3463324">)</span>&nbsp;<span class="ident" id="3463326">ignore</span><span class="op" id="3463332">(</span><span class="op" id="3463333">)</span>&nbsp;<span class="op" id="3463335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463338">l</span><span class="op" id="3463339">.</span><span class="ident" id="3463340">start</span>&nbsp;<span class="op" id="3463346">=</span>&nbsp;<span class="ident" id="3463348">l</span><span class="op" id="3463349">.</span><span class="ident" id="3463350">pos</span><br>
<span class="lineno"></span><span class="op" id="3463354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3463357">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="3463418">func</span>&nbsp;<span class="op" id="3463423">(</span><span class="ident" id="3463424">l</span>&nbsp;<span class="op" id="3463426">*</span><span class="ident" id="3463427">lexer</span><span class="op" id="3463432">)</span>&nbsp;<span class="ident" id="3463434">accept</span><span class="op" id="3463440">(</span><span class="ident" id="3463441">valid</span>&nbsp;<span class="builtintype" id="3463447">string</span><span class="op" id="3463453">)</span>&nbsp;<span class="builtintype" id="3463455">bool</span>&nbsp;<span class="op" id="3463460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3463463">if</span>&nbsp;<span class="ident" id="3463466">strings</span><span class="op" id="3463473">.</span><span class="ident" id="3463474">IndexRune</span><span class="op" id="3463483">(</span><span class="ident" id="3463484">valid</span><span class="op" id="3463489">,</span>&nbsp;<span class="ident" id="3463491">l</span><span class="op" id="3463492">.</span><span class="ident" id="3463493">next</span><span class="op" id="3463497">(</span><span class="op" id="3463498">)</span><span class="op" id="3463499">)</span>&nbsp;<span class="op" id="3463501">&gt;=</span>&nbsp;<span class="num" id="3463504">0</span>&nbsp;<span class="op" id="3463506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3463510">return</span>&nbsp;<span class="builtintype" id="3463517">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3463523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463526">l</span><span class="op" id="3463527">.</span><span class="ident" id="3463528">backup</span><span class="op" id="3463534">(</span><span class="op" id="3463535">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3463538">return</span>&nbsp;<span class="builtintype" id="3463545">false</span><br>
<span class="lineno"></span><span class="op" id="3463551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3463554">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3463611">func</span>&nbsp;<span class="op" id="3463616">(</span><span class="ident" id="3463617">l</span>&nbsp;<span class="op" id="3463619">*</span><span class="ident" id="3463620">lexer</span><span class="op" id="3463625">)</span>&nbsp;<span class="ident" id="3463627">acceptRun</span><span class="op" id="3463636">(</span><span class="ident" id="3463637">valid</span>&nbsp;<span class="builtintype" id="3463643">string</span><span class="op" id="3463649">)</span>&nbsp;<span class="op" id="3463651">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3463654">for</span>&nbsp;<span class="ident" id="3463658">strings</span><span class="op" id="3463665">.</span><span class="ident" id="3463666">IndexRune</span><span class="op" id="3463675">(</span><span class="ident" id="3463676">valid</span><span class="op" id="3463681">,</span>&nbsp;<span class="ident" id="3463683">l</span><span class="op" id="3463684">.</span><span class="ident" id="3463685">next</span><span class="op" id="3463689">(</span><span class="op" id="3463690">)</span><span class="op" id="3463691">)</span>&nbsp;<span class="op" id="3463693">&gt;=</span>&nbsp;<span class="num" id="3463696">0</span>&nbsp;<span class="op" id="3463698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3463701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3463704">l</span><span class="op" id="3463705">.</span><span class="ident" id="3463706">backup</span><span class="op" id="3463712">(</span><span class="op" id="3463713">)</span><br>
<span class="lineno"></span><span class="op" id="3463715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3463718">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3463786">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="3463847">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="3463907">func</span>&nbsp;<span class="op" id="3463912">(</span><span class="ident" id="3463913">l</span>&nbsp;<span class="op" id="3463915">*</span><span class="ident" id="3463916">lexer</span><span class="op" id="3463921">)</span>&nbsp;<span class="ident" id="3463923">lineNumber</span><span class="op" id="3463933">(</span><span class="op" id="3463934">)</span>&nbsp;<span class="builtintype" id="3463936">int</span>&nbsp;<span class="op" id="3463940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3463943">return</span>&nbsp;<span class="num" id="3463950">1</span>&nbsp;<span class="op" id="3463952">+</span>&nbsp;<span class="ident" id="3463954">strings</span><span class="op" id="3463961">.</span><span class="ident" id="3463962">Count</span><span class="op" id="3463967">(</span><span class="ident" id="3463968">l</span><span class="op" id="3463969">.</span><span class="ident" id="3463970">input</span><span class="op" id="3463975">[</span><span class="op" id="3463976">:</span><span class="ident" id="3463977">l</span><span class="op" id="3463978">.</span><span class="ident" id="3463979">lastPos</span><span class="op" id="3463986">]</span><span class="op" id="3463987">,</span>&nbsp;<span class="string" id="3463989">&#34;\n&#34;</span><span class="op" id="3463993">)</span><br>
<span class="lineno">160</span><span class="op" id="3463995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3463998">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="3464066">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="3464141">func</span>&nbsp;<span class="op" id="3464146">(</span><span class="ident" id="3464147">l</span>&nbsp;<span class="op" id="3464149">*</span><span class="ident" id="3464150">lexer</span><span class="op" id="3464155">)</span>&nbsp;<span class="ident" id="3464157">errorf</span><span class="op" id="3464163">(</span><span class="ident" id="3464164">format</span>&nbsp;<span class="builtintype" id="3464171">string</span><span class="op" id="3464177">,</span>&nbsp;<span class="ident" id="3464179">args</span>&nbsp;<span class="op" id="3464184">...</span><span class="keyword" id="3464187">interface</span><span class="op" id="3464196">{</span><span class="op" id="3464197">}</span><span class="op" id="3464198">)</span>&nbsp;<span class="ident" id="3464200">stateFn</span>&nbsp;<span class="op" id="3464208">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464211">l</span><span class="op" id="3464212">.</span><span class="ident" id="3464213">items</span>&nbsp;<span class="op" id="3464219">&lt;-</span>&nbsp;<span class="ident" id="3464222">item</span><span class="op" id="3464226">{</span><span class="ident" id="3464227">itemError</span><span class="op" id="3464236">,</span>&nbsp;<span class="ident" id="3464238">l</span><span class="op" id="3464239">.</span><span class="ident" id="3464240">start</span><span class="op" id="3464245">,</span>&nbsp;<span class="ident" id="3464247">fmt</span><span class="op" id="3464250">.</span><span class="ident" id="3464251">Sprintf</span><span class="op" id="3464258">(</span><span class="ident" id="3464259">format</span><span class="op" id="3464265">,</span>&nbsp;<span class="ident" id="3464267">args</span><span class="op" id="3464271">...</span><span class="op" id="3464274">)</span><span class="op" id="3464275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464278">return</span>&nbsp;<span class="ident" id="3464285">nil</span><br>
<span class="lineno"></span><span class="op" id="3464289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3464292">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="3464342">func</span>&nbsp;<span class="op" id="3464347">(</span><span class="ident" id="3464348">l</span>&nbsp;<span class="op" id="3464350">*</span><span class="ident" id="3464351">lexer</span><span class="op" id="3464356">)</span>&nbsp;<span class="ident" id="3464358">nextItem</span><span class="op" id="3464366">(</span><span class="op" id="3464367">)</span>&nbsp;<span class="ident" id="3464369">item</span>&nbsp;<span class="op" id="3464374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464377">item</span>&nbsp;<span class="op" id="3464382">:=</span>&nbsp;<span class="op" id="3464385">&lt;-</span><span class="ident" id="3464387">l</span><span class="op" id="3464388">.</span><span class="ident" id="3464389">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464396">l</span><span class="op" id="3464397">.</span><span class="ident" id="3464398">lastPos</span>&nbsp;<span class="op" id="3464406">=</span>&nbsp;<span class="ident" id="3464408">item</span><span class="op" id="3464412">.</span><span class="ident" id="3464413">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464418">return</span>&nbsp;<span class="ident" id="3464425">item</span><br>
<span class="lineno"></span><span class="op" id="3464430">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="3464433">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3464484">func</span>&nbsp;<span class="ident" id="3464489">lex</span><span class="op" id="3464492">(</span><span class="ident" id="3464493">name</span><span class="op" id="3464497">,</span>&nbsp;<span class="ident" id="3464499">input</span><span class="op" id="3464504">,</span>&nbsp;<span class="ident" id="3464506">left</span><span class="op" id="3464510">,</span>&nbsp;<span class="ident" id="3464512">right</span>&nbsp;<span class="builtintype" id="3464518">string</span><span class="op" id="3464524">)</span>&nbsp;<span class="op" id="3464526">*</span><span class="ident" id="3464527">lexer</span>&nbsp;<span class="op" id="3464533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464536">if</span>&nbsp;<span class="ident" id="3464539">left</span>&nbsp;<span class="op" id="3464544">==</span>&nbsp;<span class="string" id="3464547">&#34;&#34;</span>&nbsp;<span class="op" id="3464550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464554">left</span>&nbsp;<span class="op" id="3464559">=</span>&nbsp;<span class="ident" id="3464561">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3464572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464575">if</span>&nbsp;<span class="ident" id="3464578">right</span>&nbsp;<span class="op" id="3464584">==</span>&nbsp;<span class="string" id="3464587">&#34;&#34;</span>&nbsp;<span class="op" id="3464590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464594">right</span>&nbsp;<span class="op" id="3464600">=</span>&nbsp;<span class="ident" id="3464602">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3464614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464617">l</span>&nbsp;<span class="op" id="3464619">:=</span>&nbsp;<span class="op" id="3464622">&amp;</span><span class="ident" id="3464623">lexer</span><span class="op" id="3464628">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464632">name</span><span class="op" id="3464636">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3464644">name</span><span class="op" id="3464648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464652">input</span><span class="op" id="3464657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3464664">input</span><span class="op" id="3464669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464673">leftDelim</span><span class="op" id="3464682">:</span>&nbsp;&nbsp;<span class="ident" id="3464685">left</span><span class="op" id="3464689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464693">rightDelim</span><span class="op" id="3464703">:</span>&nbsp;<span class="ident" id="3464705">right</span><span class="op" id="3464710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464714">items</span><span class="op" id="3464719">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3464726">make</span><span class="op" id="3464730">(</span><span class="keyword" id="3464731">chan</span>&nbsp;<span class="ident" id="3464736">item</span><span class="op" id="3464740">)</span><span class="op" id="3464741">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3464744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464747">go</span>&nbsp;<span class="ident" id="3464750">l</span><span class="op" id="3464751">.</span><span class="ident" id="3464752">run</span><span class="op" id="3464755">(</span><span class="op" id="3464756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464759">return</span>&nbsp;<span class="ident" id="3464766">l</span><br>
<span class="lineno"></span><span class="op" id="3464768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3464771">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="3464816">func</span>&nbsp;<span class="op" id="3464821">(</span><span class="ident" id="3464822">l</span>&nbsp;<span class="op" id="3464824">*</span><span class="ident" id="3464825">lexer</span><span class="op" id="3464830">)</span>&nbsp;<span class="ident" id="3464832">run</span><span class="op" id="3464835">(</span><span class="op" id="3464836">)</span>&nbsp;<span class="op" id="3464838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3464841">for</span>&nbsp;<span class="ident" id="3464845">l</span><span class="op" id="3464846">.</span><span class="ident" id="3464847">state</span>&nbsp;<span class="op" id="3464853">=</span>&nbsp;<span class="ident" id="3464855">lexText</span><span class="op" id="3464862">;</span>&nbsp;<span class="ident" id="3464864">l</span><span class="op" id="3464865">.</span><span class="ident" id="3464866">state</span>&nbsp;<span class="op" id="3464872">!=</span>&nbsp;<span class="ident" id="3464875">nil</span><span class="op" id="3464878">;</span>&nbsp;<span class="op" id="3464880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464884">l</span><span class="op" id="3464885">.</span><span class="ident" id="3464886">state</span>&nbsp;<span class="op" id="3464892">=</span>&nbsp;<span class="ident" id="3464894">l</span><span class="op" id="3464895">.</span><span class="ident" id="3464896">state</span><span class="op" id="3464901">(</span><span class="ident" id="3464902">l</span><span class="op" id="3464903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3464906">}</span><br>
<span class="lineno">200</span><span class="op" id="3464908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3464911">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3464931">const</span>&nbsp;<span class="op" id="3464937">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464940">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3464953">=</span>&nbsp;<span class="string" id="3464955">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464961">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3464974">=</span>&nbsp;<span class="string" id="3464976">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3464982">leftComment</span>&nbsp;&nbsp;<span class="op" id="3464995">=</span>&nbsp;<span class="string" id="3464997">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465003">rightComment</span>&nbsp;<span class="op" id="3465016">=</span>&nbsp;<span class="string" id="3465018">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="3465023">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="3465026">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3465084">func</span>&nbsp;<span class="ident" id="3465089">lexText</span><span class="op" id="3465096">(</span><span class="ident" id="3465097">l</span>&nbsp;<span class="op" id="3465099">*</span><span class="ident" id="3465100">lexer</span><span class="op" id="3465105">)</span>&nbsp;<span class="ident" id="3465107">stateFn</span>&nbsp;<span class="op" id="3465115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465118">for</span>&nbsp;<span class="op" id="3465122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465126">if</span>&nbsp;<span class="ident" id="3465129">strings</span><span class="op" id="3465136">.</span><span class="ident" id="3465137">HasPrefix</span><span class="op" id="3465146">(</span><span class="ident" id="3465147">l</span><span class="op" id="3465148">.</span><span class="ident" id="3465149">input</span><span class="op" id="3465154">[</span><span class="ident" id="3465155">l</span><span class="op" id="3465156">.</span><span class="ident" id="3465157">pos</span><span class="op" id="3465160">:</span><span class="op" id="3465161">]</span><span class="op" id="3465162">,</span>&nbsp;<span class="ident" id="3465164">l</span><span class="op" id="3465165">.</span><span class="ident" id="3465166">leftDelim</span><span class="op" id="3465175">)</span>&nbsp;<span class="op" id="3465177">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465182">if</span>&nbsp;<span class="ident" id="3465185">l</span><span class="op" id="3465186">.</span><span class="ident" id="3465187">pos</span>&nbsp;<span class="op" id="3465191">&gt;</span>&nbsp;<span class="ident" id="3465193">l</span><span class="op" id="3465194">.</span><span class="ident" id="3465195">start</span>&nbsp;<span class="op" id="3465201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465207">l</span><span class="op" id="3465208">.</span><span class="ident" id="3465209">emit</span><span class="op" id="3465213">(</span><span class="ident" id="3465214">itemText</span><span class="op" id="3465222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465232">return</span>&nbsp;<span class="ident" id="3465239">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465254">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465258">if</span>&nbsp;<span class="ident" id="3465261">l</span><span class="op" id="3465262">.</span><span class="ident" id="3465263">next</span><span class="op" id="3465267">(</span><span class="op" id="3465268">)</span>&nbsp;<span class="op" id="3465270">==</span>&nbsp;<span class="ident" id="3465273">eof</span>&nbsp;<span class="op" id="3465277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465282">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3465296">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465323">if</span>&nbsp;<span class="ident" id="3465326">l</span><span class="op" id="3465327">.</span><span class="ident" id="3465328">pos</span>&nbsp;<span class="op" id="3465332">&gt;</span>&nbsp;<span class="ident" id="3465334">l</span><span class="op" id="3465335">.</span><span class="ident" id="3465336">start</span>&nbsp;<span class="op" id="3465342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465346">l</span><span class="op" id="3465347">.</span><span class="ident" id="3465348">emit</span><span class="op" id="3465352">(</span><span class="ident" id="3465353">itemText</span><span class="op" id="3465361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465367">l</span><span class="op" id="3465368">.</span><span class="ident" id="3465369">emit</span><span class="op" id="3465373">(</span><span class="ident" id="3465374">itemEOF</span><span class="op" id="3465381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465384">return</span>&nbsp;<span class="ident" id="3465391">nil</span><br>
<span class="lineno">230</span><span class="op" id="3465395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3465398">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3465470">func</span>&nbsp;<span class="ident" id="3465475">lexLeftDelim</span><span class="op" id="3465487">(</span><span class="ident" id="3465488">l</span>&nbsp;<span class="op" id="3465490">*</span><span class="ident" id="3465491">lexer</span><span class="op" id="3465496">)</span>&nbsp;<span class="ident" id="3465498">stateFn</span>&nbsp;<span class="op" id="3465506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465509">l</span><span class="op" id="3465510">.</span><span class="ident" id="3465511">pos</span>&nbsp;<span class="op" id="3465515">+=</span>&nbsp;<span class="ident" id="3465518">Pos</span><span class="op" id="3465521">(</span><span class="builtinfunc" id="3465522">len</span><span class="op" id="3465525">(</span><span class="ident" id="3465526">l</span><span class="op" id="3465527">.</span><span class="ident" id="3465528">leftDelim</span><span class="op" id="3465537">)</span><span class="op" id="3465538">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465541">if</span>&nbsp;<span class="ident" id="3465544">strings</span><span class="op" id="3465551">.</span><span class="ident" id="3465552">HasPrefix</span><span class="op" id="3465561">(</span><span class="ident" id="3465562">l</span><span class="op" id="3465563">.</span><span class="ident" id="3465564">input</span><span class="op" id="3465569">[</span><span class="ident" id="3465570">l</span><span class="op" id="3465571">.</span><span class="ident" id="3465572">pos</span><span class="op" id="3465575">:</span><span class="op" id="3465576">]</span><span class="op" id="3465577">,</span>&nbsp;<span class="ident" id="3465579">leftComment</span><span class="op" id="3465590">)</span>&nbsp;<span class="op" id="3465592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465596">return</span>&nbsp;<span class="ident" id="3465603">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465618">l</span><span class="op" id="3465619">.</span><span class="ident" id="3465620">emit</span><span class="op" id="3465624">(</span><span class="ident" id="3465625">itemLeftDelim</span><span class="op" id="3465638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465641">l</span><span class="op" id="3465642">.</span><span class="ident" id="3465643">parenDepth</span>&nbsp;<span class="op" id="3465654">=</span>&nbsp;<span class="num" id="3465656">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465659">return</span>&nbsp;<span class="ident" id="3465666">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3465682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3465685">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3465764">func</span>&nbsp;<span class="ident" id="3465769">lexComment</span><span class="op" id="3465779">(</span><span class="ident" id="3465780">l</span>&nbsp;<span class="op" id="3465782">*</span><span class="ident" id="3465783">lexer</span><span class="op" id="3465788">)</span>&nbsp;<span class="ident" id="3465790">stateFn</span>&nbsp;<span class="op" id="3465798">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465801">l</span><span class="op" id="3465802">.</span><span class="ident" id="3465803">pos</span>&nbsp;<span class="op" id="3465807">+=</span>&nbsp;<span class="ident" id="3465810">Pos</span><span class="op" id="3465813">(</span><span class="builtinfunc" id="3465814">len</span><span class="op" id="3465817">(</span><span class="ident" id="3465818">leftComment</span><span class="op" id="3465829">)</span><span class="op" id="3465830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465833">i</span>&nbsp;<span class="op" id="3465835">:=</span>&nbsp;<span class="ident" id="3465838">strings</span><span class="op" id="3465845">.</span><span class="ident" id="3465846">Index</span><span class="op" id="3465851">(</span><span class="ident" id="3465852">l</span><span class="op" id="3465853">.</span><span class="ident" id="3465854">input</span><span class="op" id="3465859">[</span><span class="ident" id="3465860">l</span><span class="op" id="3465861">.</span><span class="ident" id="3465862">pos</span><span class="op" id="3465865">:</span><span class="op" id="3465866">]</span><span class="op" id="3465867">,</span>&nbsp;<span class="ident" id="3465869">rightComment</span><span class="op" id="3465881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465884">if</span>&nbsp;<span class="ident" id="3465887">i</span>&nbsp;<span class="op" id="3465889">&lt;</span>&nbsp;<span class="num" id="3465891">0</span>&nbsp;<span class="op" id="3465893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465897">return</span>&nbsp;<span class="ident" id="3465904">l</span><span class="op" id="3465905">.</span><span class="ident" id="3465906">errorf</span><span class="op" id="3465912">(</span><span class="string" id="3465913">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="3465931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3465934">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3465937">l</span><span class="op" id="3465938">.</span><span class="ident" id="3465939">pos</span>&nbsp;<span class="op" id="3465943">+=</span>&nbsp;<span class="ident" id="3465946">Pos</span><span class="op" id="3465949">(</span><span class="ident" id="3465950">i</span>&nbsp;<span class="op" id="3465952">+</span>&nbsp;<span class="builtinfunc" id="3465954">len</span><span class="op" id="3465957">(</span><span class="ident" id="3465958">rightComment</span><span class="op" id="3465970">)</span><span class="op" id="3465971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3465974">if</span>&nbsp;<span class="op" id="3465977">!</span><span class="ident" id="3465978">strings</span><span class="op" id="3465985">.</span><span class="ident" id="3465986">HasPrefix</span><span class="op" id="3465995">(</span><span class="ident" id="3465996">l</span><span class="op" id="3465997">.</span><span class="ident" id="3465998">input</span><span class="op" id="3466003">[</span><span class="ident" id="3466004">l</span><span class="op" id="3466005">.</span><span class="ident" id="3466006">pos</span><span class="op" id="3466009">:</span><span class="op" id="3466010">]</span><span class="op" id="3466011">,</span>&nbsp;<span class="ident" id="3466013">l</span><span class="op" id="3466014">.</span><span class="ident" id="3466015">rightDelim</span><span class="op" id="3466025">)</span>&nbsp;<span class="op" id="3466027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466031">return</span>&nbsp;<span class="ident" id="3466038">l</span><span class="op" id="3466039">.</span><span class="ident" id="3466040">errorf</span><span class="op" id="3466046">(</span><span class="string" id="3466047">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="3466086">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3466090">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3466093">l</span><span class="op" id="3466094">.</span><span class="ident" id="3466095">pos</span>&nbsp;<span class="op" id="3466099">+=</span>&nbsp;<span class="ident" id="3466102">Pos</span><span class="op" id="3466105">(</span><span class="builtinfunc" id="3466106">len</span><span class="op" id="3466109">(</span><span class="ident" id="3466110">l</span><span class="op" id="3466111">.</span><span class="ident" id="3466112">rightDelim</span><span class="op" id="3466122">)</span><span class="op" id="3466123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3466126">l</span><span class="op" id="3466127">.</span><span class="ident" id="3466128">ignore</span><span class="op" id="3466134">(</span><span class="op" id="3466135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466138">return</span>&nbsp;<span class="ident" id="3466145">lexText</span><br>
<span class="lineno"></span><span class="op" id="3466153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3466156">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="3466230">func</span>&nbsp;<span class="ident" id="3466235">lexRightDelim</span><span class="op" id="3466248">(</span><span class="ident" id="3466249">l</span>&nbsp;<span class="op" id="3466251">*</span><span class="ident" id="3466252">lexer</span><span class="op" id="3466257">)</span>&nbsp;<span class="ident" id="3466259">stateFn</span>&nbsp;<span class="op" id="3466267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3466270">l</span><span class="op" id="3466271">.</span><span class="ident" id="3466272">pos</span>&nbsp;<span class="op" id="3466276">+=</span>&nbsp;<span class="ident" id="3466279">Pos</span><span class="op" id="3466282">(</span><span class="builtinfunc" id="3466283">len</span><span class="op" id="3466286">(</span><span class="ident" id="3466287">l</span><span class="op" id="3466288">.</span><span class="ident" id="3466289">rightDelim</span><span class="op" id="3466299">)</span><span class="op" id="3466300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3466303">l</span><span class="op" id="3466304">.</span><span class="ident" id="3466305">emit</span><span class="op" id="3466309">(</span><span class="ident" id="3466310">itemRightDelim</span><span class="op" id="3466324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466327">return</span>&nbsp;<span class="ident" id="3466334">lexText</span><br>
<span class="lineno">265</span><span class="op" id="3466342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3466345">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="3466409">func</span>&nbsp;<span class="ident" id="3466414">lexInsideAction</span><span class="op" id="3466429">(</span><span class="ident" id="3466430">l</span>&nbsp;<span class="op" id="3466432">*</span><span class="ident" id="3466433">lexer</span><span class="op" id="3466438">)</span>&nbsp;<span class="ident" id="3466440">stateFn</span>&nbsp;<span class="op" id="3466448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3466451">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3466500">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3466567">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466610">if</span>&nbsp;<span class="ident" id="3466613">strings</span><span class="op" id="3466620">.</span><span class="ident" id="3466621">HasPrefix</span><span class="op" id="3466630">(</span><span class="ident" id="3466631">l</span><span class="op" id="3466632">.</span><span class="ident" id="3466633">input</span><span class="op" id="3466638">[</span><span class="ident" id="3466639">l</span><span class="op" id="3466640">.</span><span class="ident" id="3466641">pos</span><span class="op" id="3466644">:</span><span class="op" id="3466645">]</span><span class="op" id="3466646">,</span>&nbsp;<span class="ident" id="3466648">l</span><span class="op" id="3466649">.</span><span class="ident" id="3466650">rightDelim</span><span class="op" id="3466660">)</span>&nbsp;<span class="op" id="3466662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466666">if</span>&nbsp;<span class="ident" id="3466669">l</span><span class="op" id="3466670">.</span><span class="ident" id="3466671">parenDepth</span>&nbsp;<span class="op" id="3466682">==</span>&nbsp;<span class="num" id="3466685">0</span>&nbsp;<span class="op" id="3466687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466692">return</span>&nbsp;<span class="ident" id="3466699">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3466715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466719">return</span>&nbsp;<span class="ident" id="3466726">l</span><span class="op" id="3466727">.</span><span class="ident" id="3466728">errorf</span><span class="op" id="3466734">(</span><span class="string" id="3466735">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="3466756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3466759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466762">switch</span>&nbsp;<span class="ident" id="3466769">r</span>&nbsp;<span class="op" id="3466771">:=</span>&nbsp;<span class="ident" id="3466774">l</span><span class="op" id="3466775">.</span><span class="ident" id="3466776">next</span><span class="op" id="3466780">(</span><span class="op" id="3466781">)</span><span class="op" id="3466782">;</span>&nbsp;<span class="op" id="3466784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466787">case</span>&nbsp;<span class="ident" id="3466792">r</span>&nbsp;<span class="op" id="3466794">==</span>&nbsp;<span class="ident" id="3466797">eof</span>&nbsp;<span class="op" id="3466801">||</span>&nbsp;<span class="ident" id="3466804">isEndOfLine</span><span class="op" id="3466815">(</span><span class="ident" id="3466816">r</span><span class="op" id="3466817">)</span><span class="op" id="3466818">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466822">return</span>&nbsp;<span class="ident" id="3466829">l</span><span class="op" id="3466830">.</span><span class="ident" id="3466831">errorf</span><span class="op" id="3466837">(</span><span class="string" id="3466838">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="3466855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466858">case</span>&nbsp;<span class="ident" id="3466863">isSpace</span><span class="op" id="3466870">(</span><span class="ident" id="3466871">r</span><span class="op" id="3466872">)</span><span class="op" id="3466873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466877">return</span>&nbsp;<span class="ident" id="3466884">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466894">case</span>&nbsp;<span class="ident" id="3466899">r</span>&nbsp;<span class="op" id="3466901">==</span>&nbsp;<span class="string" id="3466904">&#39;:&#39;</span><span class="op" id="3466907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466911">if</span>&nbsp;<span class="ident" id="3466914">l</span><span class="op" id="3466915">.</span><span class="ident" id="3466916">next</span><span class="op" id="3466920">(</span><span class="op" id="3466921">)</span>&nbsp;<span class="op" id="3466923">!=</span>&nbsp;<span class="string" id="3466926">&#39;=&#39;</span>&nbsp;<span class="op" id="3466930">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466935">return</span>&nbsp;<span class="ident" id="3466942">l</span><span class="op" id="3466943">.</span><span class="ident" id="3466944">errorf</span><span class="op" id="3466950">(</span><span class="string" id="3466951">&#34;expected&nbsp;:=&#34;</span><span class="op" id="3466964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3466968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3466972">l</span><span class="op" id="3466973">.</span><span class="ident" id="3466974">emit</span><span class="op" id="3466978">(</span><span class="ident" id="3466979">itemColonEquals</span><span class="op" id="3466994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3466997">case</span>&nbsp;<span class="ident" id="3467002">r</span>&nbsp;<span class="op" id="3467004">==</span>&nbsp;<span class="string" id="3467007">&#39;|&#39;</span><span class="op" id="3467010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467014">l</span><span class="op" id="3467015">.</span><span class="ident" id="3467016">emit</span><span class="op" id="3467020">(</span><span class="ident" id="3467021">itemPipe</span><span class="op" id="3467029">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467032">case</span>&nbsp;<span class="ident" id="3467037">r</span>&nbsp;<span class="op" id="3467039">==</span>&nbsp;<span class="string" id="3467042">&#39;&#34;&#39;</span><span class="op" id="3467045">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467049">return</span>&nbsp;<span class="ident" id="3467056">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467066">case</span>&nbsp;<span class="ident" id="3467071">r</span>&nbsp;<span class="op" id="3467073">==</span>&nbsp;<span class="string" id="3467076">&#39;`&#39;</span><span class="op" id="3467079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467083">return</span>&nbsp;<span class="ident" id="3467090">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467103">case</span>&nbsp;<span class="ident" id="3467108">r</span>&nbsp;<span class="op" id="3467110">==</span>&nbsp;<span class="string" id="3467113">&#39;$&#39;</span><span class="op" id="3467116">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467120">return</span>&nbsp;<span class="ident" id="3467127">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467140">case</span>&nbsp;<span class="ident" id="3467145">r</span>&nbsp;<span class="op" id="3467147">==</span>&nbsp;<span class="string" id="3467150">&#39;\&#39;&#39;</span><span class="op" id="3467154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467158">return</span>&nbsp;<span class="ident" id="3467165">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467174">case</span>&nbsp;<span class="ident" id="3467179">r</span>&nbsp;<span class="op" id="3467181">==</span>&nbsp;<span class="string" id="3467184">&#39;.&#39;</span><span class="op" id="3467187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3467191">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467258">if</span>&nbsp;<span class="ident" id="3467261">l</span><span class="op" id="3467262">.</span><span class="ident" id="3467263">pos</span>&nbsp;<span class="op" id="3467267">&lt;</span>&nbsp;<span class="ident" id="3467269">Pos</span><span class="op" id="3467272">(</span><span class="builtinfunc" id="3467273">len</span><span class="op" id="3467276">(</span><span class="ident" id="3467277">l</span><span class="op" id="3467278">.</span><span class="ident" id="3467279">input</span><span class="op" id="3467284">)</span><span class="op" id="3467285">)</span>&nbsp;<span class="op" id="3467287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467292">r</span>&nbsp;<span class="op" id="3467294">:=</span>&nbsp;<span class="ident" id="3467297">l</span><span class="op" id="3467298">.</span><span class="ident" id="3467299">input</span><span class="op" id="3467304">[</span><span class="ident" id="3467305">l</span><span class="op" id="3467306">.</span><span class="ident" id="3467307">pos</span><span class="op" id="3467310">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467315">if</span>&nbsp;<span class="ident" id="3467318">r</span>&nbsp;<span class="op" id="3467320">&lt;</span>&nbsp;<span class="string" id="3467322">&#39;0&#39;</span>&nbsp;<span class="op" id="3467326">||</span>&nbsp;<span class="string" id="3467329">&#39;9&#39;</span>&nbsp;<span class="op" id="3467333">&lt;</span>&nbsp;<span class="ident" id="3467335">r</span>&nbsp;<span class="op" id="3467337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467343">return</span>&nbsp;<span class="ident" id="3467350">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3467362">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3467366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467370">fallthrough</span>&nbsp;<span class="comment" id="3467382">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467410">case</span>&nbsp;<span class="ident" id="3467415">r</span>&nbsp;<span class="op" id="3467417">==</span>&nbsp;<span class="string" id="3467420">&#39;+&#39;</span>&nbsp;<span class="op" id="3467424">||</span>&nbsp;<span class="ident" id="3467427">r</span>&nbsp;<span class="op" id="3467429">==</span>&nbsp;<span class="string" id="3467432">&#39;-&#39;</span>&nbsp;<span class="op" id="3467436">||</span>&nbsp;<span class="op" id="3467439">(</span><span class="string" id="3467440">&#39;0&#39;</span>&nbsp;<span class="op" id="3467444">&lt;=</span>&nbsp;<span class="ident" id="3467447">r</span>&nbsp;<span class="op" id="3467449">&amp;&amp;</span>&nbsp;<span class="ident" id="3467452">r</span>&nbsp;<span class="op" id="3467454">&lt;=</span>&nbsp;<span class="string" id="3467457">&#39;9&#39;</span><span class="op" id="3467460">)</span><span class="op" id="3467461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467465">l</span><span class="op" id="3467466">.</span><span class="ident" id="3467467">backup</span><span class="op" id="3467473">(</span><span class="op" id="3467474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467478">return</span>&nbsp;<span class="ident" id="3467485">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467496">case</span>&nbsp;<span class="ident" id="3467501">isAlphaNumeric</span><span class="op" id="3467515">(</span><span class="ident" id="3467516">r</span><span class="op" id="3467517">)</span><span class="op" id="3467518">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467522">l</span><span class="op" id="3467523">.</span><span class="ident" id="3467524">backup</span><span class="op" id="3467530">(</span><span class="op" id="3467531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467535">return</span>&nbsp;<span class="ident" id="3467542">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467557">case</span>&nbsp;<span class="ident" id="3467562">r</span>&nbsp;<span class="op" id="3467564">==</span>&nbsp;<span class="string" id="3467567">&#39;(&#39;</span><span class="op" id="3467570">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467574">l</span><span class="op" id="3467575">.</span><span class="ident" id="3467576">emit</span><span class="op" id="3467580">(</span><span class="ident" id="3467581">itemLeftParen</span><span class="op" id="3467594">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467598">l</span><span class="op" id="3467599">.</span><span class="ident" id="3467600">parenDepth</span><span class="op" id="3467610">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467615">return</span>&nbsp;<span class="ident" id="3467622">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467639">case</span>&nbsp;<span class="ident" id="3467644">r</span>&nbsp;<span class="op" id="3467646">==</span>&nbsp;<span class="string" id="3467649">&#39;)&#39;</span><span class="op" id="3467652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467656">l</span><span class="op" id="3467657">.</span><span class="ident" id="3467658">emit</span><span class="op" id="3467662">(</span><span class="ident" id="3467663">itemRightParen</span><span class="op" id="3467677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467681">l</span><span class="op" id="3467682">.</span><span class="ident" id="3467683">parenDepth</span><span class="op" id="3467693">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467698">if</span>&nbsp;<span class="ident" id="3467701">l</span><span class="op" id="3467702">.</span><span class="ident" id="3467703">parenDepth</span>&nbsp;<span class="op" id="3467714">&lt;</span>&nbsp;<span class="num" id="3467716">0</span>&nbsp;<span class="op" id="3467718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467723">return</span>&nbsp;<span class="ident" id="3467730">l</span><span class="op" id="3467731">.</span><span class="ident" id="3467732">errorf</span><span class="op" id="3467738">(</span><span class="string" id="3467739">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="3467767">,</span>&nbsp;<span class="ident" id="3467769">r</span><span class="op" id="3467770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3467774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467778">return</span>&nbsp;<span class="ident" id="3467785">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467802">case</span>&nbsp;<span class="ident" id="3467807">r</span>&nbsp;<span class="op" id="3467809">&lt;=</span>&nbsp;<span class="ident" id="3467812">unicode</span><span class="op" id="3467819">.</span><span class="ident" id="3467820">MaxASCII</span>&nbsp;<span class="op" id="3467829">&amp;&amp;</span>&nbsp;<span class="ident" id="3467832">unicode</span><span class="op" id="3467839">.</span><span class="ident" id="3467840">IsPrint</span><span class="op" id="3467847">(</span><span class="ident" id="3467848">r</span><span class="op" id="3467849">)</span><span class="op" id="3467850">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3467854">l</span><span class="op" id="3467855">.</span><span class="ident" id="3467856">emit</span><span class="op" id="3467860">(</span><span class="ident" id="3467861">itemChar</span><span class="op" id="3467869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467873">return</span>&nbsp;<span class="ident" id="3467880">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467897">default</span><span class="op" id="3467904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467908">return</span>&nbsp;<span class="ident" id="3467915">l</span><span class="op" id="3467916">.</span><span class="ident" id="3467917">errorf</span><span class="op" id="3467923">(</span><span class="string" id="3467924">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="3467963">,</span>&nbsp;<span class="ident" id="3467965">r</span><span class="op" id="3467966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3467969">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3467972">return</span>&nbsp;<span class="ident" id="3467979">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3467995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3467998">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="3468043">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="3468079">func</span>&nbsp;<span class="ident" id="3468084">lexSpace</span><span class="op" id="3468092">(</span><span class="ident" id="3468093">l</span>&nbsp;<span class="op" id="3468095">*</span><span class="ident" id="3468096">lexer</span><span class="op" id="3468101">)</span>&nbsp;<span class="ident" id="3468103">stateFn</span>&nbsp;<span class="op" id="3468111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468114">for</span>&nbsp;<span class="ident" id="3468118">isSpace</span><span class="op" id="3468125">(</span><span class="ident" id="3468126">l</span><span class="op" id="3468127">.</span><span class="ident" id="3468128">peek</span><span class="op" id="3468132">(</span><span class="op" id="3468133">)</span><span class="op" id="3468134">)</span>&nbsp;<span class="op" id="3468136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468140">l</span><span class="op" id="3468141">.</span><span class="ident" id="3468142">next</span><span class="op" id="3468146">(</span><span class="op" id="3468147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3468150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468153">l</span><span class="op" id="3468154">.</span><span class="ident" id="3468155">emit</span><span class="op" id="3468159">(</span><span class="ident" id="3468160">itemSpace</span><span class="op" id="3468169">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468172">return</span>&nbsp;<span class="ident" id="3468179">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3468195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3468198">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="3468238">func</span>&nbsp;<span class="ident" id="3468243">lexIdentifier</span><span class="op" id="3468256">(</span><span class="ident" id="3468257">l</span>&nbsp;<span class="op" id="3468259">*</span><span class="ident" id="3468260">lexer</span><span class="op" id="3468265">)</span>&nbsp;<span class="ident" id="3468267">stateFn</span>&nbsp;<span class="op" id="3468275">{</span><br>
<span class="lineno">345</span><span class="ident" id="3468277">Loop</span><span class="op" id="3468281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468284">for</span>&nbsp;<span class="op" id="3468288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468292">switch</span>&nbsp;<span class="ident" id="3468299">r</span>&nbsp;<span class="op" id="3468301">:=</span>&nbsp;<span class="ident" id="3468304">l</span><span class="op" id="3468305">.</span><span class="ident" id="3468306">next</span><span class="op" id="3468310">(</span><span class="op" id="3468311">)</span><span class="op" id="3468312">;</span>&nbsp;<span class="op" id="3468314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468318">case</span>&nbsp;<span class="ident" id="3468323">isAlphaNumeric</span><span class="op" id="3468337">(</span><span class="ident" id="3468338">r</span><span class="op" id="3468339">)</span><span class="op" id="3468340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3468345">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468358">default</span><span class="op" id="3468365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468370">l</span><span class="op" id="3468371">.</span><span class="ident" id="3468372">backup</span><span class="op" id="3468378">(</span><span class="op" id="3468379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468384">word</span>&nbsp;<span class="op" id="3468389">:=</span>&nbsp;<span class="ident" id="3468392">l</span><span class="op" id="3468393">.</span><span class="ident" id="3468394">input</span><span class="op" id="3468399">[</span><span class="ident" id="3468400">l</span><span class="op" id="3468401">.</span><span class="ident" id="3468402">start</span><span class="op" id="3468407">:</span><span class="ident" id="3468408">l</span><span class="op" id="3468409">.</span><span class="ident" id="3468410">pos</span><span class="op" id="3468413">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468418">if</span>&nbsp;<span class="op" id="3468421">!</span><span class="ident" id="3468422">l</span><span class="op" id="3468423">.</span><span class="ident" id="3468424">atTerminator</span><span class="op" id="3468436">(</span><span class="op" id="3468437">)</span>&nbsp;<span class="op" id="3468439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468445">return</span>&nbsp;<span class="ident" id="3468452">l</span><span class="op" id="3468453">.</span><span class="ident" id="3468454">errorf</span><span class="op" id="3468460">(</span><span class="string" id="3468461">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3468480">,</span>&nbsp;<span class="ident" id="3468482">r</span><span class="op" id="3468483">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3468488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468493">switch</span>&nbsp;<span class="op" id="3468500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468505">case</span>&nbsp;<span class="ident" id="3468510">key</span><span class="op" id="3468513">[</span><span class="ident" id="3468514">word</span><span class="op" id="3468518">]</span>&nbsp;<span class="op" id="3468520">&gt;</span>&nbsp;<span class="ident" id="3468522">itemKeyword</span><span class="op" id="3468533">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468539">l</span><span class="op" id="3468540">.</span><span class="ident" id="3468541">emit</span><span class="op" id="3468545">(</span><span class="ident" id="3468546">key</span><span class="op" id="3468549">[</span><span class="ident" id="3468550">word</span><span class="op" id="3468554">]</span><span class="op" id="3468555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468560">case</span>&nbsp;<span class="ident" id="3468565">word</span><span class="op" id="3468569">[</span><span class="num" id="3468570">0</span><span class="op" id="3468571">]</span>&nbsp;<span class="op" id="3468573">==</span>&nbsp;<span class="string" id="3468576">&#39;.&#39;</span><span class="op" id="3468579">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468585">l</span><span class="op" id="3468586">.</span><span class="ident" id="3468587">emit</span><span class="op" id="3468591">(</span><span class="ident" id="3468592">itemField</span><span class="op" id="3468601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468606">case</span>&nbsp;<span class="ident" id="3468611">word</span>&nbsp;<span class="op" id="3468616">==</span>&nbsp;<span class="string" id="3468619">&#34;true&#34;</span><span class="op" id="3468625">,</span>&nbsp;<span class="ident" id="3468627">word</span>&nbsp;<span class="op" id="3468632">==</span>&nbsp;<span class="string" id="3468635">&#34;false&#34;</span><span class="op" id="3468642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468648">l</span><span class="op" id="3468649">.</span><span class="ident" id="3468650">emit</span><span class="op" id="3468654">(</span><span class="ident" id="3468655">itemBool</span><span class="op" id="3468663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468668">default</span><span class="op" id="3468675">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3468681">l</span><span class="op" id="3468682">.</span><span class="ident" id="3468683">emit</span><span class="op" id="3468687">(</span><span class="ident" id="3468688">itemIdentifier</span><span class="op" id="3468702">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3468707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468712">break</span>&nbsp;<span class="ident" id="3468718">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3468725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3468728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468731">return</span>&nbsp;<span class="ident" id="3468738">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="3468754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3468757">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3468799">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="3468826">func</span>&nbsp;<span class="ident" id="3468831">lexField</span><span class="op" id="3468839">(</span><span class="ident" id="3468840">l</span>&nbsp;<span class="op" id="3468842">*</span><span class="ident" id="3468843">lexer</span><span class="op" id="3468848">)</span>&nbsp;<span class="ident" id="3468850">stateFn</span>&nbsp;<span class="op" id="3468858">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3468861">return</span>&nbsp;<span class="ident" id="3468868">lexFieldOrVariable</span><span class="op" id="3468886">(</span><span class="ident" id="3468887">l</span><span class="op" id="3468888">,</span>&nbsp;<span class="ident" id="3468890">itemField</span><span class="op" id="3468899">)</span><br>
<span class="lineno"></span><span class="op" id="3468901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3468904">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3468952">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="3468979">func</span>&nbsp;<span class="ident" id="3468984">lexVariable</span><span class="op" id="3468995">(</span><span class="ident" id="3468996">l</span>&nbsp;<span class="op" id="3468998">*</span><span class="ident" id="3468999">lexer</span><span class="op" id="3469004">)</span>&nbsp;<span class="ident" id="3469006">stateFn</span>&nbsp;<span class="op" id="3469014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469017">if</span>&nbsp;<span class="ident" id="3469020">l</span><span class="op" id="3469021">.</span><span class="ident" id="3469022">atTerminator</span><span class="op" id="3469034">(</span><span class="op" id="3469035">)</span>&nbsp;<span class="op" id="3469037">{</span>&nbsp;<span class="comment" id="3469039">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469080">l</span><span class="op" id="3469081">.</span><span class="ident" id="3469082">emit</span><span class="op" id="3469086">(</span><span class="ident" id="3469087">itemVariable</span><span class="op" id="3469099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469103">return</span>&nbsp;<span class="ident" id="3469110">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469127">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469130">return</span>&nbsp;<span class="ident" id="3469137">lexFieldOrVariable</span><span class="op" id="3469155">(</span><span class="ident" id="3469156">l</span><span class="op" id="3469157">,</span>&nbsp;<span class="ident" id="3469159">itemVariable</span><span class="op" id="3469171">)</span><br>
<span class="lineno"></span><span class="op" id="3469173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3469176">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="3469236">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="3469268">func</span>&nbsp;<span class="ident" id="3469273">lexFieldOrVariable</span><span class="op" id="3469291">(</span><span class="ident" id="3469292">l</span>&nbsp;<span class="op" id="3469294">*</span><span class="ident" id="3469295">lexer</span><span class="op" id="3469300">,</span>&nbsp;<span class="ident" id="3469302">typ</span>&nbsp;<span class="ident" id="3469306">itemType</span><span class="op" id="3469314">)</span>&nbsp;<span class="ident" id="3469316">stateFn</span>&nbsp;<span class="op" id="3469324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469327">if</span>&nbsp;<span class="ident" id="3469330">l</span><span class="op" id="3469331">.</span><span class="ident" id="3469332">atTerminator</span><span class="op" id="3469344">(</span><span class="op" id="3469345">)</span>&nbsp;<span class="op" id="3469347">{</span>&nbsp;<span class="comment" id="3469349">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469397">if</span>&nbsp;<span class="ident" id="3469400">typ</span>&nbsp;<span class="op" id="3469404">==</span>&nbsp;<span class="ident" id="3469407">itemVariable</span>&nbsp;<span class="op" id="3469420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469425">l</span><span class="op" id="3469426">.</span><span class="ident" id="3469427">emit</span><span class="op" id="3469431">(</span><span class="ident" id="3469432">itemVariable</span><span class="op" id="3469444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469448">}</span>&nbsp;<span class="keyword" id="3469450">else</span>&nbsp;<span class="op" id="3469455">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469460">l</span><span class="op" id="3469461">.</span><span class="ident" id="3469462">emit</span><span class="op" id="3469466">(</span><span class="ident" id="3469467">itemDot</span><span class="op" id="3469474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469482">return</span>&nbsp;<span class="ident" id="3469489">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469509">var</span>&nbsp;<span class="ident" id="3469513">r</span>&nbsp;<span class="builtintype" id="3469515">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469521">for</span>&nbsp;<span class="op" id="3469525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469529">r</span>&nbsp;<span class="op" id="3469531">=</span>&nbsp;<span class="ident" id="3469533">l</span><span class="op" id="3469534">.</span><span class="ident" id="3469535">next</span><span class="op" id="3469539">(</span><span class="op" id="3469540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469544">if</span>&nbsp;<span class="op" id="3469547">!</span><span class="ident" id="3469548">isAlphaNumeric</span><span class="op" id="3469562">(</span><span class="ident" id="3469563">r</span><span class="op" id="3469564">)</span>&nbsp;<span class="op" id="3469566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469571">l</span><span class="op" id="3469572">.</span><span class="ident" id="3469573">backup</span><span class="op" id="3469579">(</span><span class="op" id="3469580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469585">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469599">if</span>&nbsp;<span class="op" id="3469602">!</span><span class="ident" id="3469603">l</span><span class="op" id="3469604">.</span><span class="ident" id="3469605">atTerminator</span><span class="op" id="3469617">(</span><span class="op" id="3469618">)</span>&nbsp;<span class="op" id="3469620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469624">return</span>&nbsp;<span class="ident" id="3469631">l</span><span class="op" id="3469632">.</span><span class="ident" id="3469633">errorf</span><span class="op" id="3469639">(</span><span class="string" id="3469640">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3469659">,</span>&nbsp;<span class="ident" id="3469661">r</span><span class="op" id="3469662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3469665">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3469668">l</span><span class="op" id="3469669">.</span><span class="ident" id="3469670">emit</span><span class="op" id="3469674">(</span><span class="ident" id="3469675">typ</span><span class="op" id="3469678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3469681">return</span>&nbsp;<span class="ident" id="3469688">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3469704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3469707">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="3469786">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="3469865">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3469940">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="3469972">func</span>&nbsp;<span class="op" id="3469977">(</span><span class="ident" id="3469978">l</span>&nbsp;<span class="op" id="3469980">*</span><span class="ident" id="3469981">lexer</span><span class="op" id="3469986">)</span>&nbsp;<span class="ident" id="3469988">atTerminator</span><span class="op" id="3470000">(</span><span class="op" id="3470001">)</span>&nbsp;<span class="builtintype" id="3470003">bool</span>&nbsp;<span class="op" id="3470008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3470011">r</span>&nbsp;<span class="op" id="3470013">:=</span>&nbsp;<span class="ident" id="3470016">l</span><span class="op" id="3470017">.</span><span class="ident" id="3470018">peek</span><span class="op" id="3470022">(</span><span class="op" id="3470023">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470026">if</span>&nbsp;<span class="ident" id="3470029">isSpace</span><span class="op" id="3470036">(</span><span class="ident" id="3470037">r</span><span class="op" id="3470038">)</span>&nbsp;<span class="op" id="3470040">||</span>&nbsp;<span class="ident" id="3470043">isEndOfLine</span><span class="op" id="3470054">(</span><span class="ident" id="3470055">r</span><span class="op" id="3470056">)</span>&nbsp;<span class="op" id="3470058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470062">return</span>&nbsp;<span class="builtintype" id="3470069">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470078">switch</span>&nbsp;<span class="ident" id="3470085">r</span>&nbsp;<span class="op" id="3470087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470090">case</span>&nbsp;<span class="ident" id="3470095">eof</span><span class="op" id="3470098">,</span>&nbsp;<span class="string" id="3470100">&#39;.&#39;</span><span class="op" id="3470103">,</span>&nbsp;<span class="string" id="3470105">&#39;,&#39;</span><span class="op" id="3470108">,</span>&nbsp;<span class="string" id="3470110">&#39;|&#39;</span><span class="op" id="3470113">,</span>&nbsp;<span class="string" id="3470115">&#39;:&#39;</span><span class="op" id="3470118">,</span>&nbsp;<span class="string" id="3470120">&#39;)&#39;</span><span class="op" id="3470123">,</span>&nbsp;<span class="string" id="3470125">&#39;(&#39;</span><span class="op" id="3470128">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470132">return</span>&nbsp;<span class="builtintype" id="3470139">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3470148">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3470231">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3470313">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470342">if</span>&nbsp;<span class="ident" id="3470345">rd</span><span class="op" id="3470347">,</span>&nbsp;<span class="ident" id="3470349">_</span>&nbsp;<span class="op" id="3470351">:=</span>&nbsp;<span class="ident" id="3470354">utf8</span><span class="op" id="3470358">.</span><span class="ident" id="3470359">DecodeRuneInString</span><span class="op" id="3470377">(</span><span class="ident" id="3470378">l</span><span class="op" id="3470379">.</span><span class="ident" id="3470380">rightDelim</span><span class="op" id="3470390">)</span><span class="op" id="3470391">;</span>&nbsp;<span class="ident" id="3470393">rd</span>&nbsp;<span class="op" id="3470396">==</span>&nbsp;<span class="ident" id="3470399">r</span>&nbsp;<span class="op" id="3470401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470405">return</span>&nbsp;<span class="builtintype" id="3470412">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470421">return</span>&nbsp;<span class="builtintype" id="3470428">false</span><br>
<span class="lineno"></span><span class="op" id="3470434">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="3470437">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="3470505">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="3470556">func</span>&nbsp;<span class="ident" id="3470561">lexChar</span><span class="op" id="3470568">(</span><span class="ident" id="3470569">l</span>&nbsp;<span class="op" id="3470571">*</span><span class="ident" id="3470572">lexer</span><span class="op" id="3470577">)</span>&nbsp;<span class="ident" id="3470579">stateFn</span>&nbsp;<span class="op" id="3470587">{</span><br>
<span class="lineno"></span><span class="ident" id="3470589">Loop</span><span class="op" id="3470593">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470596">for</span>&nbsp;<span class="op" id="3470600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470604">switch</span>&nbsp;<span class="ident" id="3470611">l</span><span class="op" id="3470612">.</span><span class="ident" id="3470613">next</span><span class="op" id="3470617">(</span><span class="op" id="3470618">)</span>&nbsp;<span class="op" id="3470620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470624">case</span>&nbsp;<span class="string" id="3470629">&#39;\\&#39;</span><span class="op" id="3470633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470638">if</span>&nbsp;<span class="ident" id="3470641">r</span>&nbsp;<span class="op" id="3470643">:=</span>&nbsp;<span class="ident" id="3470646">l</span><span class="op" id="3470647">.</span><span class="ident" id="3470648">next</span><span class="op" id="3470652">(</span><span class="op" id="3470653">)</span><span class="op" id="3470654">;</span>&nbsp;<span class="ident" id="3470656">r</span>&nbsp;<span class="op" id="3470658">!=</span>&nbsp;<span class="ident" id="3470661">eof</span>&nbsp;<span class="op" id="3470665">&amp;&amp;</span>&nbsp;<span class="ident" id="3470668">r</span>&nbsp;<span class="op" id="3470670">!=</span>&nbsp;<span class="string" id="3470673">&#39;\n&#39;</span>&nbsp;<span class="op" id="3470678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470684">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470698">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470712">case</span>&nbsp;<span class="ident" id="3470717">eof</span><span class="op" id="3470720">,</span>&nbsp;<span class="string" id="3470722">&#39;\n&#39;</span><span class="op" id="3470726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470731">return</span>&nbsp;<span class="ident" id="3470738">l</span><span class="op" id="3470739">.</span><span class="ident" id="3470740">errorf</span><span class="op" id="3470746">(</span><span class="string" id="3470747">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="3470780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470784">case</span>&nbsp;<span class="string" id="3470789">&#39;\&#39;&#39;</span><span class="op" id="3470793">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470798">break</span>&nbsp;<span class="ident" id="3470804">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3470814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3470817">l</span><span class="op" id="3470818">.</span><span class="ident" id="3470819">emit</span><span class="op" id="3470823">(</span><span class="ident" id="3470824">itemCharConstant</span><span class="op" id="3470840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3470843">return</span>&nbsp;<span class="ident" id="3470850">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="3470866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3470869">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="3470945">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3471021">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="3471097">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="3471122">func</span>&nbsp;<span class="ident" id="3471127">lexNumber</span><span class="op" id="3471136">(</span><span class="ident" id="3471137">l</span>&nbsp;<span class="op" id="3471139">*</span><span class="ident" id="3471140">lexer</span><span class="op" id="3471145">)</span>&nbsp;<span class="ident" id="3471147">stateFn</span>&nbsp;<span class="op" id="3471155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471158">if</span>&nbsp;<span class="op" id="3471161">!</span><span class="ident" id="3471162">l</span><span class="op" id="3471163">.</span><span class="ident" id="3471164">scanNumber</span><span class="op" id="3471174">(</span><span class="op" id="3471175">)</span>&nbsp;<span class="op" id="3471177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471181">return</span>&nbsp;<span class="ident" id="3471188">l</span><span class="op" id="3471189">.</span><span class="ident" id="3471190">errorf</span><span class="op" id="3471196">(</span><span class="string" id="3471197">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="3471220">,</span>&nbsp;<span class="ident" id="3471222">l</span><span class="op" id="3471223">.</span><span class="ident" id="3471224">input</span><span class="op" id="3471229">[</span><span class="ident" id="3471230">l</span><span class="op" id="3471231">.</span><span class="ident" id="3471232">start</span><span class="op" id="3471237">:</span><span class="ident" id="3471238">l</span><span class="op" id="3471239">.</span><span class="ident" id="3471240">pos</span><span class="op" id="3471243">]</span><span class="op" id="3471244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471247">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471250">if</span>&nbsp;<span class="ident" id="3471253">sign</span>&nbsp;<span class="op" id="3471258">:=</span>&nbsp;<span class="ident" id="3471261">l</span><span class="op" id="3471262">.</span><span class="ident" id="3471263">peek</span><span class="op" id="3471267">(</span><span class="op" id="3471268">)</span><span class="op" id="3471269">;</span>&nbsp;<span class="ident" id="3471271">sign</span>&nbsp;<span class="op" id="3471276">==</span>&nbsp;<span class="string" id="3471279">&#39;+&#39;</span>&nbsp;<span class="op" id="3471283">||</span>&nbsp;<span class="ident" id="3471286">sign</span>&nbsp;<span class="op" id="3471291">==</span>&nbsp;<span class="string" id="3471294">&#39;-&#39;</span>&nbsp;<span class="op" id="3471298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3471302">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471350">if</span>&nbsp;<span class="op" id="3471353">!</span><span class="ident" id="3471354">l</span><span class="op" id="3471355">.</span><span class="ident" id="3471356">scanNumber</span><span class="op" id="3471366">(</span><span class="op" id="3471367">)</span>&nbsp;<span class="op" id="3471369">||</span>&nbsp;<span class="ident" id="3471372">l</span><span class="op" id="3471373">.</span><span class="ident" id="3471374">input</span><span class="op" id="3471379">[</span><span class="ident" id="3471380">l</span><span class="op" id="3471381">.</span><span class="ident" id="3471382">pos</span><span class="op" id="3471385">-</span><span class="num" id="3471386">1</span><span class="op" id="3471387">]</span>&nbsp;<span class="op" id="3471389">!=</span>&nbsp;<span class="string" id="3471392">&#39;i&#39;</span>&nbsp;<span class="op" id="3471396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471401">return</span>&nbsp;<span class="ident" id="3471408">l</span><span class="op" id="3471409">.</span><span class="ident" id="3471410">errorf</span><span class="op" id="3471416">(</span><span class="string" id="3471417">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="3471440">,</span>&nbsp;<span class="ident" id="3471442">l</span><span class="op" id="3471443">.</span><span class="ident" id="3471444">input</span><span class="op" id="3471449">[</span><span class="ident" id="3471450">l</span><span class="op" id="3471451">.</span><span class="ident" id="3471452">start</span><span class="op" id="3471457">:</span><span class="ident" id="3471458">l</span><span class="op" id="3471459">.</span><span class="ident" id="3471460">pos</span><span class="op" id="3471463">]</span><span class="op" id="3471464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471468">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471472">l</span><span class="op" id="3471473">.</span><span class="ident" id="3471474">emit</span><span class="op" id="3471478">(</span><span class="ident" id="3471479">itemComplex</span><span class="op" id="3471490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471493">}</span>&nbsp;<span class="keyword" id="3471495">else</span>&nbsp;<span class="op" id="3471500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471504">l</span><span class="op" id="3471505">.</span><span class="ident" id="3471506">emit</span><span class="op" id="3471510">(</span><span class="ident" id="3471511">itemNumber</span><span class="op" id="3471521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471527">return</span>&nbsp;<span class="ident" id="3471534">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="3471550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3471553">func</span>&nbsp;<span class="op" id="3471558">(</span><span class="ident" id="3471559">l</span>&nbsp;<span class="op" id="3471561">*</span><span class="ident" id="3471562">lexer</span><span class="op" id="3471567">)</span>&nbsp;<span class="ident" id="3471569">scanNumber</span><span class="op" id="3471579">(</span><span class="op" id="3471580">)</span>&nbsp;<span class="builtintype" id="3471582">bool</span>&nbsp;<span class="op" id="3471587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3471590">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471617">l</span><span class="op" id="3471618">.</span><span class="ident" id="3471619">accept</span><span class="op" id="3471625">(</span><span class="string" id="3471626">&#34;+-&#34;</span><span class="op" id="3471630">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3471633">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471648">digits</span>&nbsp;<span class="op" id="3471655">:=</span>&nbsp;<span class="string" id="3471658">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471672">if</span>&nbsp;<span class="ident" id="3471675">l</span><span class="op" id="3471676">.</span><span class="ident" id="3471677">accept</span><span class="op" id="3471683">(</span><span class="string" id="3471684">&#34;0&#34;</span><span class="op" id="3471687">)</span>&nbsp;<span class="op" id="3471689">&amp;&amp;</span>&nbsp;<span class="ident" id="3471692">l</span><span class="op" id="3471693">.</span><span class="ident" id="3471694">accept</span><span class="op" id="3471700">(</span><span class="string" id="3471701">&#34;xX&#34;</span><span class="op" id="3471705">)</span>&nbsp;<span class="op" id="3471707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471711">digits</span>&nbsp;<span class="op" id="3471718">=</span>&nbsp;<span class="string" id="3471720">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471746">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471749">l</span><span class="op" id="3471750">.</span><span class="ident" id="3471751">acceptRun</span><span class="op" id="3471760">(</span><span class="ident" id="3471761">digits</span><span class="op" id="3471767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471770">if</span>&nbsp;<span class="ident" id="3471773">l</span><span class="op" id="3471774">.</span><span class="ident" id="3471775">accept</span><span class="op" id="3471781">(</span><span class="string" id="3471782">&#34;.&#34;</span><span class="op" id="3471785">)</span>&nbsp;<span class="op" id="3471787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471791">l</span><span class="op" id="3471792">.</span><span class="ident" id="3471793">acceptRun</span><span class="op" id="3471802">(</span><span class="ident" id="3471803">digits</span><span class="op" id="3471809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471815">if</span>&nbsp;<span class="ident" id="3471818">l</span><span class="op" id="3471819">.</span><span class="ident" id="3471820">accept</span><span class="op" id="3471826">(</span><span class="string" id="3471827">&#34;eE&#34;</span><span class="op" id="3471831">)</span>&nbsp;<span class="op" id="3471833">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471837">l</span><span class="op" id="3471838">.</span><span class="ident" id="3471839">accept</span><span class="op" id="3471845">(</span><span class="string" id="3471846">&#34;+-&#34;</span><span class="op" id="3471850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471854">l</span><span class="op" id="3471855">.</span><span class="ident" id="3471856">acceptRun</span><span class="op" id="3471865">(</span><span class="string" id="3471866">&#34;0123456789&#34;</span><span class="op" id="3471878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3471881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3471884">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471905">l</span><span class="op" id="3471906">.</span><span class="ident" id="3471907">accept</span><span class="op" id="3471913">(</span><span class="string" id="3471914">&#34;i&#34;</span><span class="op" id="3471917">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3471920">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3471960">if</span>&nbsp;<span class="ident" id="3471963">isAlphaNumeric</span><span class="op" id="3471977">(</span><span class="ident" id="3471978">l</span><span class="op" id="3471979">.</span><span class="ident" id="3471980">peek</span><span class="op" id="3471984">(</span><span class="op" id="3471985">)</span><span class="op" id="3471986">)</span>&nbsp;<span class="op" id="3471988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3471992">l</span><span class="op" id="3471993">.</span><span class="ident" id="3471994">next</span><span class="op" id="3471998">(</span><span class="op" id="3471999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472003">return</span>&nbsp;<span class="builtintype" id="3472010">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472017">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472020">return</span>&nbsp;<span class="builtintype" id="3472027">true</span><br>
<span class="lineno"></span><span class="op" id="3472032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3472035">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3472070">func</span>&nbsp;<span class="ident" id="3472075">lexQuote</span><span class="op" id="3472083">(</span><span class="ident" id="3472084">l</span>&nbsp;<span class="op" id="3472086">*</span><span class="ident" id="3472087">lexer</span><span class="op" id="3472092">)</span>&nbsp;<span class="ident" id="3472094">stateFn</span>&nbsp;<span class="op" id="3472102">{</span><br>
<span class="lineno">505</span><span class="ident" id="3472104">Loop</span><span class="op" id="3472108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472111">for</span>&nbsp;<span class="op" id="3472115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472119">switch</span>&nbsp;<span class="ident" id="3472126">l</span><span class="op" id="3472127">.</span><span class="ident" id="3472128">next</span><span class="op" id="3472132">(</span><span class="op" id="3472133">)</span>&nbsp;<span class="op" id="3472135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472139">case</span>&nbsp;<span class="string" id="3472144">&#39;\\&#39;</span><span class="op" id="3472148">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472153">if</span>&nbsp;<span class="ident" id="3472156">r</span>&nbsp;<span class="op" id="3472158">:=</span>&nbsp;<span class="ident" id="3472161">l</span><span class="op" id="3472162">.</span><span class="ident" id="3472163">next</span><span class="op" id="3472167">(</span><span class="op" id="3472168">)</span><span class="op" id="3472169">;</span>&nbsp;<span class="ident" id="3472171">r</span>&nbsp;<span class="op" id="3472173">!=</span>&nbsp;<span class="ident" id="3472176">eof</span>&nbsp;<span class="op" id="3472180">&amp;&amp;</span>&nbsp;<span class="ident" id="3472183">r</span>&nbsp;<span class="op" id="3472185">!=</span>&nbsp;<span class="string" id="3472188">&#39;\n&#39;</span>&nbsp;<span class="op" id="3472193">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472199">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472213">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472227">case</span>&nbsp;<span class="ident" id="3472232">eof</span><span class="op" id="3472235">,</span>&nbsp;<span class="string" id="3472237">&#39;\n&#39;</span><span class="op" id="3472241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472246">return</span>&nbsp;<span class="ident" id="3472253">l</span><span class="op" id="3472254">.</span><span class="ident" id="3472255">errorf</span><span class="op" id="3472261">(</span><span class="string" id="3472262">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="3472290">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472294">case</span>&nbsp;<span class="string" id="3472299">&#39;&#34;&#39;</span><span class="op" id="3472302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472307">break</span>&nbsp;<span class="ident" id="3472313">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3472326">l</span><span class="op" id="3472327">.</span><span class="ident" id="3472328">emit</span><span class="op" id="3472332">(</span><span class="ident" id="3472333">itemString</span><span class="op" id="3472343">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472346">return</span>&nbsp;<span class="ident" id="3472353">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3472369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3472372">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3472414">func</span>&nbsp;<span class="ident" id="3472419">lexRawQuote</span><span class="op" id="3472430">(</span><span class="ident" id="3472431">l</span>&nbsp;<span class="op" id="3472433">*</span><span class="ident" id="3472434">lexer</span><span class="op" id="3472439">)</span>&nbsp;<span class="ident" id="3472441">stateFn</span>&nbsp;<span class="op" id="3472449">{</span><br>
<span class="lineno">525</span><span class="ident" id="3472451">Loop</span><span class="op" id="3472455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472458">for</span>&nbsp;<span class="op" id="3472462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472466">switch</span>&nbsp;<span class="ident" id="3472473">l</span><span class="op" id="3472474">.</span><span class="ident" id="3472475">next</span><span class="op" id="3472479">(</span><span class="op" id="3472480">)</span>&nbsp;<span class="op" id="3472482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472486">case</span>&nbsp;<span class="ident" id="3472491">eof</span><span class="op" id="3472494">,</span>&nbsp;<span class="string" id="3472496">&#39;\n&#39;</span><span class="op" id="3472500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472505">return</span>&nbsp;<span class="ident" id="3472512">l</span><span class="op" id="3472513">.</span><span class="ident" id="3472514">errorf</span><span class="op" id="3472520">(</span><span class="string" id="3472521">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="3472553">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472557">case</span>&nbsp;<span class="string" id="3472562">&#39;`&#39;</span><span class="op" id="3472565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472570">break</span>&nbsp;<span class="ident" id="3472576">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3472586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3472589">l</span><span class="op" id="3472590">.</span><span class="ident" id="3472591">emit</span><span class="op" id="3472595">(</span><span class="ident" id="3472596">itemRawString</span><span class="op" id="3472609">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472612">return</span>&nbsp;<span class="ident" id="3472619">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="3472635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3472638">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="3472689">func</span>&nbsp;<span class="ident" id="3472694">isSpace</span><span class="op" id="3472701">(</span><span class="ident" id="3472702">r</span>&nbsp;<span class="builtintype" id="3472704">rune</span><span class="op" id="3472708">)</span>&nbsp;<span class="builtintype" id="3472710">bool</span>&nbsp;<span class="op" id="3472715">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472718">return</span>&nbsp;<span class="ident" id="3472725">r</span>&nbsp;<span class="op" id="3472727">==</span>&nbsp;<span class="string" id="3472730">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3472734">||</span>&nbsp;<span class="ident" id="3472737">r</span>&nbsp;<span class="op" id="3472739">==</span>&nbsp;<span class="string" id="3472742">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="3472747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3472750">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="3472812">func</span>&nbsp;<span class="ident" id="3472817">isEndOfLine</span><span class="op" id="3472828">(</span><span class="ident" id="3472829">r</span>&nbsp;<span class="builtintype" id="3472831">rune</span><span class="op" id="3472835">)</span>&nbsp;<span class="builtintype" id="3472837">bool</span>&nbsp;<span class="op" id="3472842">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472845">return</span>&nbsp;<span class="ident" id="3472852">r</span>&nbsp;<span class="op" id="3472854">==</span>&nbsp;<span class="string" id="3472857">&#39;\r&#39;</span>&nbsp;<span class="op" id="3472862">||</span>&nbsp;<span class="ident" id="3472865">r</span>&nbsp;<span class="op" id="3472867">==</span>&nbsp;<span class="string" id="3472870">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="3472875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3472878">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="3472954">func</span>&nbsp;<span class="ident" id="3472959">isAlphaNumeric</span><span class="op" id="3472973">(</span><span class="ident" id="3472974">r</span>&nbsp;<span class="builtintype" id="3472976">rune</span><span class="op" id="3472980">)</span>&nbsp;<span class="builtintype" id="3472982">bool</span>&nbsp;<span class="op" id="3472987">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3472990">return</span>&nbsp;<span class="ident" id="3472997">r</span>&nbsp;<span class="op" id="3472999">==</span>&nbsp;<span class="string" id="3473002">&#39;_&#39;</span>&nbsp;<span class="op" id="3473006">||</span>&nbsp;<span class="ident" id="3473009">unicode</span><span class="op" id="3473016">.</span><span class="ident" id="3473017">IsLetter</span><span class="op" id="3473025">(</span><span class="ident" id="3473026">r</span><span class="op" id="3473027">)</span>&nbsp;<span class="op" id="3473029">||</span>&nbsp;<span class="ident" id="3473032">unicode</span><span class="op" id="3473039">.</span><span class="ident" id="3473040">IsDigit</span><span class="op" id="3473047">(</span><span class="ident" id="3473048">r</span><span class="op" id="3473049">)</span><br>
<span class="lineno"></span><span class="op" id="3473051">}</span>
</div>
</body>
</html>
