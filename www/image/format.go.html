<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3180504">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3180559">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3180613">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3180664">package</span>&nbsp;<span class="ident" id="3180672">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3180679">import</span>&nbsp;<span class="op" id="3180686">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3180689">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3180698">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3180708">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="3180713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3180716">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="3180784">var</span>&nbsp;<span class="ident" id="3180788">ErrFormat</span>&nbsp;<span class="op" id="3180798">=</span>&nbsp;<span class="ident" id="3180800"><a href="/image/format.go.html#3180698">errors</a></span><span class="op" id="3180806">.</span><span class="ident" id="3180807">New</span><span class="op" id="3180810">(</span><span class="string" id="3180811">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="3180834">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3180837">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3180914">type</span>&nbsp;<span class="ident" id="3180919">format</span>&nbsp;<span class="keyword" id="3180926">struct</span>&nbsp;<span class="op" id="3180933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180936">name</span><span class="op" id="3180940">,</span>&nbsp;<span class="ident" id="3180942">magic</span>&nbsp;&nbsp;<span class="builtintype" id="3180949">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3180957">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3180970">func</span><span class="op" id="3180974">(</span><span class="ident" id="3180975"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3180977">.</span><span class="ident" id="3180978">Reader</span><span class="op" id="3180984">)</span>&nbsp;<span class="op" id="3180986">(</span><span class="ident" id="3180987"><a href="/image/image.go.html#3190140">Image</a></span><span class="op" id="3180992">,</span>&nbsp;<span class="builtintype" id="3180994">error</span><span class="op" id="3180999">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181002">decodeConfig</span>&nbsp;<span class="keyword" id="3181015">func</span><span class="op" id="3181019">(</span><span class="ident" id="3181020"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3181022">.</span><span class="ident" id="3181023">Reader</span><span class="op" id="3181029">)</span>&nbsp;<span class="op" id="3181031">(</span><span class="ident" id="3181032"><a href="/image/image.go.html#3189981">Config</a></span><span class="op" id="3181038">,</span>&nbsp;<span class="builtintype" id="3181040">error</span><span class="op" id="3181045">)</span><br>
<span class="lineno"></span><span class="op" id="3181047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3181050">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="3181096">var</span>&nbsp;<span class="ident" id="3181100">formats</span>&nbsp;<span class="op" id="3181108">[</span><span class="op" id="3181109">]</span><span class="ident" id="3181110"><a href="/image/format.go.html#3180919">format</a></span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="3181118">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="3181181">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3181238">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="3181316">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="3181382">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="3181440">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="3181509">func</span>&nbsp;<span class="ident" id="3181514">RegisterFormat</span><span class="op" id="3181528">(</span><span class="ident" id="3181529">name</span><span class="op" id="3181533">,</span>&nbsp;<span class="ident" id="3181535">magic</span>&nbsp;<span class="builtintype" id="3181541">string</span><span class="op" id="3181547">,</span>&nbsp;<span class="ident" id="3181549">decode</span>&nbsp;<span class="keyword" id="3181556">func</span><span class="op" id="3181560">(</span><span class="ident" id="3181561"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3181563">.</span><span class="ident" id="3181564">Reader</span><span class="op" id="3181570">)</span>&nbsp;<span class="op" id="3181572">(</span><span class="ident" id="3181573"><a href="/image/image.go.html#3190140">Image</a></span><span class="op" id="3181578">,</span>&nbsp;<span class="builtintype" id="3181580">error</span><span class="op" id="3181585">)</span><span class="op" id="3181586">,</span>&nbsp;<span class="ident" id="3181588">decodeConfig</span>&nbsp;<span class="keyword" id="3181601">func</span><span class="op" id="3181605">(</span><span class="ident" id="3181606"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3181608">.</span><span class="ident" id="3181609">Reader</span><span class="op" id="3181615">)</span>&nbsp;<span class="op" id="3181617">(</span><span class="ident" id="3181618"><a href="/image/image.go.html#3189981">Config</a></span><span class="op" id="3181624">,</span>&nbsp;<span class="builtintype" id="3181626">error</span><span class="op" id="3181631">)</span><span class="op" id="3181632">)</span>&nbsp;<span class="op" id="3181634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181637"><a href="/image/format.go.html#3181100">formats</a></span>&nbsp;<span class="op" id="3181645">=</span>&nbsp;<span class="builtinfunc" id="3181647">append</span><span class="op" id="3181653">(</span><span class="ident" id="3181654"><a href="/image/format.go.html#3181100">formats</a></span><span class="op" id="3181661">,</span>&nbsp;<span class="ident" id="3181663"><a href="/image/format.go.html#3180919">format</a></span><span class="op" id="3181669">{</span><span class="ident" id="3181670"><a href="/image/format.go.html#3181529">name</a></span><span class="op" id="3181674">,</span>&nbsp;<span class="ident" id="3181676"><a href="/image/format.go.html#3181535">magic</a></span><span class="op" id="3181681">,</span>&nbsp;<span class="ident" id="3181683"><a href="/image/format.go.html#3181549">decode</a></span><span class="op" id="3181689">,</span>&nbsp;<span class="ident" id="3181691"><a href="/image/format.go.html#3181588">decodeConfig</a></span><span class="op" id="3181703">}</span><span class="op" id="3181704">)</span><br>
<span class="lineno"></span><span class="op" id="3181706">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3181709">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="3181763">type</span>&nbsp;<span class="ident" id="3181768">reader</span>&nbsp;<span class="keyword" id="3181775">interface</span>&nbsp;<span class="op" id="3181785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181788"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3181790">.</span><span class="ident" id="3181791">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3181799">Peek</span><span class="op" id="3181803">(</span><span class="builtintype" id="3181804">int</span><span class="op" id="3181807">)</span>&nbsp;<span class="op" id="3181809">(</span><span class="op" id="3181810">[</span><span class="op" id="3181811">]</span><span class="builtintype" id="3181812">byte</span><span class="op" id="3181816">,</span>&nbsp;<span class="builtintype" id="3181818">error</span><span class="op" id="3181823">)</span><br>
<span class="lineno">40</span><span class="op" id="3181825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3181828">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="3181875">func</span>&nbsp;<span class="ident" id="3181880">asReader</span><span class="op" id="3181888">(</span><span class="ident" id="3181889">r</span>&nbsp;<span class="ident" id="3181891"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3181893">.</span><span class="ident" id="3181894">Reader</span><span class="op" id="3181900">)</span>&nbsp;<span class="ident" id="3181902"><a href="/image/format.go.html#3181768">reader</a></span>&nbsp;<span class="op" id="3181909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181912">if</span>&nbsp;<span class="ident" id="3181915">rr</span><span class="op" id="3181917">,</span>&nbsp;<span class="ident" id="3181919">ok</span>&nbsp;<span class="op" id="3181922">:=</span>&nbsp;<span class="ident" id="3181925"><a href="/image/format.go.html#3181889">r</a></span><span class="op" id="3181926">.</span><span class="op" id="3181927">(</span><span class="ident" id="3181928"><a href="/image/format.go.html#3181768">reader</a></span><span class="op" id="3181934">)</span><span class="op" id="3181935">;</span>&nbsp;<span class="ident" id="3181937"><a href="/image/format.go.html#3181919">ok</a></span>&nbsp;<span class="op" id="3181940">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181944">return</span>&nbsp;<span class="ident" id="3181951"><a href="/image/format.go.html#3181915">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3181955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3181958">return</span>&nbsp;<span class="ident" id="3181965"><a href="/image/format.go.html#3180689">bufio</a></span><span class="op" id="3181970">.</span><span class="ident" id="3181971">NewReader</span><span class="op" id="3181980">(</span><span class="ident" id="3181981"><a href="/image/format.go.html#3181889">r</a></span><span class="op" id="3181982">)</span><br>
<span class="lineno"></span><span class="op" id="3181984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3181987">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="3182062">func</span>&nbsp;<span class="ident" id="3182067">match</span><span class="op" id="3182072">(</span><span class="ident" id="3182073">magic</span>&nbsp;<span class="builtintype" id="3182079">string</span><span class="op" id="3182085">,</span>&nbsp;<span class="ident" id="3182087">b</span>&nbsp;<span class="op" id="3182089">[</span><span class="op" id="3182090">]</span><span class="builtintype" id="3182091">byte</span><span class="op" id="3182095">)</span>&nbsp;<span class="builtintype" id="3182097">bool</span>&nbsp;<span class="op" id="3182102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182105">if</span>&nbsp;<span class="builtinfunc" id="3182108">len</span><span class="op" id="3182111">(</span><span class="ident" id="3182112"><a href="/image/format.go.html#3182073">magic</a></span><span class="op" id="3182117">)</span>&nbsp;<span class="op" id="3182119">!=</span>&nbsp;<span class="builtinfunc" id="3182122">len</span><span class="op" id="3182125">(</span><span class="ident" id="3182126"><a href="/image/format.go.html#3182087">b</a></span><span class="op" id="3182127">)</span>&nbsp;<span class="op" id="3182129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182133">return</span>&nbsp;<span class="builtintype" id="3182140">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182147">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182150">for</span>&nbsp;<span class="ident" id="3182154">i</span><span class="op" id="3182155">,</span>&nbsp;<span class="ident" id="3182157">c</span>&nbsp;<span class="op" id="3182159">:=</span>&nbsp;<span class="keyword" id="3182162">range</span>&nbsp;<span class="ident" id="3182168"><a href="/image/format.go.html#3182087">b</a></span>&nbsp;<span class="op" id="3182170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182174">if</span>&nbsp;<span class="ident" id="3182177"><a href="/image/format.go.html#3182073">magic</a></span><span class="op" id="3182182">[</span><span class="ident" id="3182183"><a href="/image/format.go.html#3182154">i</a></span><span class="op" id="3182184">]</span>&nbsp;<span class="op" id="3182186">!=</span>&nbsp;<span class="ident" id="3182189"><a href="/image/format.go.html#3182157">c</a></span>&nbsp;<span class="op" id="3182191">&amp;&amp;</span>&nbsp;<span class="ident" id="3182194"><a href="/image/format.go.html#3182073">magic</a></span><span class="op" id="3182199">[</span><span class="ident" id="3182200"><a href="/image/format.go.html#3182154">i</a></span><span class="op" id="3182201">]</span>&nbsp;<span class="op" id="3182203">!=</span>&nbsp;<span class="string" id="3182206">&#39;?&#39;</span>&nbsp;<span class="op" id="3182210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182215">return</span>&nbsp;<span class="builtintype" id="3182222">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182233">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182236">return</span>&nbsp;<span class="builtintype" id="3182243">true</span><br>
<span class="lineno"></span><span class="op" id="3182248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182251">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3182295">func</span>&nbsp;<span class="ident" id="3182300">sniff</span><span class="op" id="3182305">(</span><span class="ident" id="3182306">r</span>&nbsp;<span class="ident" id="3182308"><a href="/image/format.go.html#3181768">reader</a></span><span class="op" id="3182314">)</span>&nbsp;<span class="ident" id="3182316"><a href="/image/format.go.html#3180919">format</a></span>&nbsp;<span class="op" id="3182323">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182326">for</span>&nbsp;<span class="ident" id="3182330">_</span><span class="op" id="3182331">,</span>&nbsp;<span class="ident" id="3182333">f</span>&nbsp;<span class="op" id="3182335">:=</span>&nbsp;<span class="keyword" id="3182338">range</span>&nbsp;<span class="ident" id="3182344"><a href="/image/format.go.html#3181100">formats</a></span>&nbsp;<span class="op" id="3182352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182356">b</span><span class="op" id="3182357">,</span>&nbsp;<span class="ident" id="3182359">err</span>&nbsp;<span class="op" id="3182363">:=</span>&nbsp;<span class="ident" id="3182366"><a href="/image/format.go.html#3182306">r</a></span><span class="op" id="3182367">.</span><span class="ident" id="3182368">Peek</span><span class="op" id="3182372">(</span><span class="builtinfunc" id="3182373">len</span><span class="op" id="3182376">(</span><span class="ident" id="3182377"><a href="/image/format.go.html#3182333">f</a></span><span class="op" id="3182378">.</span><span class="ident" id="3182379">magic</span><span class="op" id="3182384">)</span><span class="op" id="3182385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182389">if</span>&nbsp;<span class="ident" id="3182392"><a href="/image/format.go.html#3182359">err</a></span>&nbsp;<span class="op" id="3182396">==</span>&nbsp;<span class="ident" id="3182399">nil</span>&nbsp;<span class="op" id="3182403">&amp;&amp;</span>&nbsp;<span class="ident" id="3182406"><a href="/image/format.go.html#3182067">match</a></span><span class="op" id="3182411">(</span><span class="ident" id="3182412"><a href="/image/format.go.html#3182333">f</a></span><span class="op" id="3182413">.</span><span class="ident" id="3182414">magic</span><span class="op" id="3182419">,</span>&nbsp;<span class="ident" id="3182421"><a href="/image/format.go.html#3182356">b</a></span><span class="op" id="3182422">)</span>&nbsp;<span class="op" id="3182424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182429">return</span>&nbsp;<span class="ident" id="3182436"><a href="/image/format.go.html#3182333">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182440">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182446">return</span>&nbsp;<span class="ident" id="3182453"><a href="/image/format.go.html#3180919">format</a></span><span class="op" id="3182459">{</span><span class="op" id="3182460">}</span><br>
<span class="lineno"></span><span class="op" id="3182462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182465">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="3182538">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="3182613">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="3182688">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="3182709">func</span>&nbsp;<span class="ident" id="3182714">Decode</span><span class="op" id="3182720">(</span><span class="ident" id="3182721">r</span>&nbsp;<span class="ident" id="3182723"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3182725">.</span><span class="ident" id="3182726">Reader</span><span class="op" id="3182732">)</span>&nbsp;<span class="op" id="3182734">(</span><span class="ident" id="3182735"><a href="/image/image.go.html#3190140">Image</a></span><span class="op" id="3182740">,</span>&nbsp;<span class="builtintype" id="3182742">string</span><span class="op" id="3182748">,</span>&nbsp;<span class="builtintype" id="3182750">error</span><span class="op" id="3182755">)</span>&nbsp;<span class="op" id="3182757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182760">rr</span>&nbsp;<span class="op" id="3182763">:=</span>&nbsp;<span class="ident" id="3182766"><a href="/image/format.go.html#3181880">asReader</a></span><span class="op" id="3182774">(</span><span class="ident" id="3182775"><a href="/image/format.go.html#3182721">r</a></span><span class="op" id="3182776">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182779">f</span>&nbsp;<span class="op" id="3182781">:=</span>&nbsp;<span class="ident" id="3182784"><a href="/image/format.go.html#3182300">sniff</a></span><span class="op" id="3182789">(</span><span class="ident" id="3182790"><a href="/image/format.go.html#3182760">rr</a></span><span class="op" id="3182792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182795">if</span>&nbsp;<span class="ident" id="3182798"><a href="/image/format.go.html#3182779">f</a></span><span class="op" id="3182799">.</span><span class="ident" id="3182800">decode</span>&nbsp;<span class="op" id="3182807">==</span>&nbsp;<span class="ident" id="3182810">nil</span>&nbsp;<span class="op" id="3182814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182818">return</span>&nbsp;<span class="ident" id="3182825">nil</span><span class="op" id="3182828">,</span>&nbsp;<span class="string" id="3182830">&#34;&#34;</span><span class="op" id="3182832">,</span>&nbsp;<span class="ident" id="3182834"><a href="/image/format.go.html#3180788">ErrFormat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182848">m</span><span class="op" id="3182849">,</span>&nbsp;<span class="ident" id="3182851">err</span>&nbsp;<span class="op" id="3182855">:=</span>&nbsp;<span class="ident" id="3182858"><a href="/image/format.go.html#3182779">f</a></span><span class="op" id="3182859">.</span><span class="ident" id="3182860">decode</span><span class="op" id="3182866">(</span><span class="ident" id="3182867"><a href="/image/format.go.html#3182760">rr</a></span><span class="op" id="3182869">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182872">return</span>&nbsp;<span class="ident" id="3182879"><a href="/image/format.go.html#3182848">m</a></span><span class="op" id="3182880">,</span>&nbsp;<span class="ident" id="3182882"><a href="/image/format.go.html#3182779">f</a></span><span class="op" id="3182883">.</span><span class="ident" id="3182884">name</span><span class="op" id="3182888">,</span>&nbsp;<span class="ident" id="3182890"><a href="/image/format.go.html#3182851">err</a></span><br>
<span class="lineno"></span><span class="op" id="3182894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182897">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="3182973">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="3183052">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3183129">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="3183180">func</span>&nbsp;<span class="ident" id="3183185">DecodeConfig</span><span class="op" id="3183197">(</span><span class="ident" id="3183198">r</span>&nbsp;<span class="ident" id="3183200"><a href="/image/format.go.html#3180708">io</a></span><span class="op" id="3183202">.</span><span class="ident" id="3183203">Reader</span><span class="op" id="3183209">)</span>&nbsp;<span class="op" id="3183211">(</span><span class="ident" id="3183212"><a href="/image/image.go.html#3189981">Config</a></span><span class="op" id="3183218">,</span>&nbsp;<span class="builtintype" id="3183220">string</span><span class="op" id="3183226">,</span>&nbsp;<span class="builtintype" id="3183228">error</span><span class="op" id="3183233">)</span>&nbsp;<span class="op" id="3183235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183238">rr</span>&nbsp;<span class="op" id="3183241">:=</span>&nbsp;<span class="ident" id="3183244"><a href="/image/format.go.html#3181880">asReader</a></span><span class="op" id="3183252">(</span><span class="ident" id="3183253"><a href="/image/format.go.html#3183198">r</a></span><span class="op" id="3183254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183257">f</span>&nbsp;<span class="op" id="3183259">:=</span>&nbsp;<span class="ident" id="3183262"><a href="/image/format.go.html#3182300">sniff</a></span><span class="op" id="3183267">(</span><span class="ident" id="3183268"><a href="/image/format.go.html#3183238">rr</a></span><span class="op" id="3183270">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183273">if</span>&nbsp;<span class="ident" id="3183276"><a href="/image/format.go.html#3183257">f</a></span><span class="op" id="3183277">.</span><span class="ident" id="3183278">decodeConfig</span>&nbsp;<span class="op" id="3183291">==</span>&nbsp;<span class="ident" id="3183294">nil</span>&nbsp;<span class="op" id="3183298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183302">return</span>&nbsp;<span class="ident" id="3183309"><a href="/image/image.go.html#3189981">Config</a></span><span class="op" id="3183315">{</span><span class="op" id="3183316">}</span><span class="op" id="3183317">,</span>&nbsp;<span class="string" id="3183319">&#34;&#34;</span><span class="op" id="3183321">,</span>&nbsp;<span class="ident" id="3183323"><a href="/image/format.go.html#3180788">ErrFormat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183337">c</span><span class="op" id="3183338">,</span>&nbsp;<span class="ident" id="3183340">err</span>&nbsp;<span class="op" id="3183344">:=</span>&nbsp;<span class="ident" id="3183347"><a href="/image/format.go.html#3183257">f</a></span><span class="op" id="3183348">.</span><span class="ident" id="3183349">decodeConfig</span><span class="op" id="3183361">(</span><span class="ident" id="3183362"><a href="/image/format.go.html#3183238">rr</a></span><span class="op" id="3183364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183367">return</span>&nbsp;<span class="ident" id="3183374"><a href="/image/format.go.html#3183337">c</a></span><span class="op" id="3183375">,</span>&nbsp;<span class="ident" id="3183377"><a href="/image/format.go.html#3183257">f</a></span><span class="op" id="3183378">.</span><span class="ident" id="3183379">name</span><span class="op" id="3183383">,</span>&nbsp;<span class="ident" id="3183385"><a href="/image/format.go.html#3183340">err</a></span><br>
<span class="lineno">100</span><span class="op" id="3183389">}</span>
</div>
</body>
</html>
