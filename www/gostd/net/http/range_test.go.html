<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8506879">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8506934">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8506988">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8507039">package</span>&nbsp;<span class="ident" id="8507047">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8507053">import</span>&nbsp;<span class="op" id="8507060">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8507063">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8507073">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8507076">var</span>&nbsp;<span class="ident" id="8507080">ParseRangeTests</span>&nbsp;<span class="op" id="8507096">=</span>&nbsp;<span class="op" id="8507098">[</span><span class="op" id="8507099">]</span><span class="keyword" id="8507100">struct</span>&nbsp;<span class="op" id="8507107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507110">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8507117">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507125">length</span>&nbsp;<span class="ident" id="8507132">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507139">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8507146">[</span><span class="op" id="8507147">]</span><span class="ident" id="8507148">httpRange</span><br>
<span class="lineno">15</span><span class="op" id="8507158">}</span><span class="op" id="8507159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507162">{</span><span class="string" id="8507163">&#34;&#34;</span><span class="op" id="8507165">,</span>&nbsp;<span class="num" id="8507167">0</span><span class="op" id="8507168">,</span>&nbsp;<span class="ident" id="8507170">nil</span><span class="op" id="8507173">}</span><span class="op" id="8507174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507177">{</span><span class="string" id="8507178">&#34;&#34;</span><span class="op" id="8507180">,</span>&nbsp;<span class="num" id="8507182">1000</span><span class="op" id="8507186">,</span>&nbsp;<span class="ident" id="8507188">nil</span><span class="op" id="8507191">}</span><span class="op" id="8507192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507195">{</span><span class="string" id="8507196">&#34;foo&#34;</span><span class="op" id="8507201">,</span>&nbsp;<span class="num" id="8507203">0</span><span class="op" id="8507204">,</span>&nbsp;<span class="ident" id="8507206">nil</span><span class="op" id="8507209">}</span><span class="op" id="8507210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507213">{</span><span class="string" id="8507214">&#34;bytes=&#34;</span><span class="op" id="8507222">,</span>&nbsp;<span class="num" id="8507224">0</span><span class="op" id="8507225">,</span>&nbsp;<span class="ident" id="8507227">nil</span><span class="op" id="8507230">}</span><span class="op" id="8507231">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507234">{</span><span class="string" id="8507235">&#34;bytes=7&#34;</span><span class="op" id="8507244">,</span>&nbsp;<span class="num" id="8507246">10</span><span class="op" id="8507248">,</span>&nbsp;<span class="ident" id="8507250">nil</span><span class="op" id="8507253">}</span><span class="op" id="8507254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507257">{</span><span class="string" id="8507258">&#34;bytes=&nbsp;7&nbsp;&#34;</span><span class="op" id="8507269">,</span>&nbsp;<span class="num" id="8507271">10</span><span class="op" id="8507273">,</span>&nbsp;<span class="ident" id="8507275">nil</span><span class="op" id="8507278">}</span><span class="op" id="8507279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507282">{</span><span class="string" id="8507283">&#34;bytes=1-&#34;</span><span class="op" id="8507293">,</span>&nbsp;<span class="num" id="8507295">0</span><span class="op" id="8507296">,</span>&nbsp;<span class="ident" id="8507298">nil</span><span class="op" id="8507301">}</span><span class="op" id="8507302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507305">{</span><span class="string" id="8507306">&#34;bytes=5-4&#34;</span><span class="op" id="8507317">,</span>&nbsp;<span class="num" id="8507319">10</span><span class="op" id="8507321">,</span>&nbsp;<span class="ident" id="8507323">nil</span><span class="op" id="8507326">}</span><span class="op" id="8507327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507330">{</span><span class="string" id="8507331">&#34;bytes=0-2,5-4&#34;</span><span class="op" id="8507346">,</span>&nbsp;<span class="num" id="8507348">10</span><span class="op" id="8507350">,</span>&nbsp;<span class="ident" id="8507352">nil</span><span class="op" id="8507355">}</span><span class="op" id="8507356">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507359">{</span><span class="string" id="8507360">&#34;bytes=2-5,4-3&#34;</span><span class="op" id="8507375">,</span>&nbsp;<span class="num" id="8507377">10</span><span class="op" id="8507379">,</span>&nbsp;<span class="ident" id="8507381">nil</span><span class="op" id="8507384">}</span><span class="op" id="8507385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507388">{</span><span class="string" id="8507389">&#34;bytes=--5,4--3&#34;</span><span class="op" id="8507405">,</span>&nbsp;<span class="num" id="8507407">10</span><span class="op" id="8507409">,</span>&nbsp;<span class="ident" id="8507411">nil</span><span class="op" id="8507414">}</span><span class="op" id="8507415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507418">{</span><span class="string" id="8507419">&#34;bytes=A-&#34;</span><span class="op" id="8507429">,</span>&nbsp;<span class="num" id="8507431">10</span><span class="op" id="8507433">,</span>&nbsp;<span class="ident" id="8507435">nil</span><span class="op" id="8507438">}</span><span class="op" id="8507439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507442">{</span><span class="string" id="8507443">&#34;bytes=A-&nbsp;&#34;</span><span class="op" id="8507454">,</span>&nbsp;<span class="num" id="8507456">10</span><span class="op" id="8507458">,</span>&nbsp;<span class="ident" id="8507460">nil</span><span class="op" id="8507463">}</span><span class="op" id="8507464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507467">{</span><span class="string" id="8507468">&#34;bytes=A-Z&#34;</span><span class="op" id="8507479">,</span>&nbsp;<span class="num" id="8507481">10</span><span class="op" id="8507483">,</span>&nbsp;<span class="ident" id="8507485">nil</span><span class="op" id="8507488">}</span><span class="op" id="8507489">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507492">{</span><span class="string" id="8507493">&#34;bytes=&nbsp;-Z&#34;</span><span class="op" id="8507504">,</span>&nbsp;<span class="num" id="8507506">10</span><span class="op" id="8507508">,</span>&nbsp;<span class="ident" id="8507510">nil</span><span class="op" id="8507513">}</span><span class="op" id="8507514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507517">{</span><span class="string" id="8507518">&#34;bytes=5-Z&#34;</span><span class="op" id="8507529">,</span>&nbsp;<span class="num" id="8507531">10</span><span class="op" id="8507533">,</span>&nbsp;<span class="ident" id="8507535">nil</span><span class="op" id="8507538">}</span><span class="op" id="8507539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507542">{</span><span class="string" id="8507543">&#34;bytes=Ran-dom,&nbsp;garbage&#34;</span><span class="op" id="8507567">,</span>&nbsp;<span class="num" id="8507569">10</span><span class="op" id="8507571">,</span>&nbsp;<span class="ident" id="8507573">nil</span><span class="op" id="8507576">}</span><span class="op" id="8507577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507580">{</span><span class="string" id="8507581">&#34;bytes=0x01-0x02&#34;</span><span class="op" id="8507598">,</span>&nbsp;<span class="num" id="8507600">10</span><span class="op" id="8507602">,</span>&nbsp;<span class="ident" id="8507604">nil</span><span class="op" id="8507607">}</span><span class="op" id="8507608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507611">{</span><span class="string" id="8507612">&#34;bytes=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8507629">,</span>&nbsp;<span class="num" id="8507631">10</span><span class="op" id="8507633">,</span>&nbsp;<span class="ident" id="8507635">nil</span><span class="op" id="8507638">}</span><span class="op" id="8507639">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507642">{</span><span class="string" id="8507643">&#34;bytes=&nbsp;,&nbsp;,&nbsp;,&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8507660">,</span>&nbsp;<span class="num" id="8507662">10</span><span class="op" id="8507664">,</span>&nbsp;<span class="ident" id="8507666">nil</span><span class="op" id="8507669">}</span><span class="op" id="8507670">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507674">{</span><span class="string" id="8507675">&#34;bytes=0-9&#34;</span><span class="op" id="8507686">,</span>&nbsp;<span class="num" id="8507688">10</span><span class="op" id="8507690">,</span>&nbsp;<span class="op" id="8507692">[</span><span class="op" id="8507693">]</span><span class="ident" id="8507694">httpRange</span><span class="op" id="8507703">{</span><span class="op" id="8507704">{</span><span class="num" id="8507705">0</span><span class="op" id="8507706">,</span>&nbsp;<span class="num" id="8507708">10</span><span class="op" id="8507710">}</span><span class="op" id="8507711">}</span><span class="op" id="8507712">}</span><span class="op" id="8507713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507716">{</span><span class="string" id="8507717">&#34;bytes=0-&#34;</span><span class="op" id="8507727">,</span>&nbsp;<span class="num" id="8507729">10</span><span class="op" id="8507731">,</span>&nbsp;<span class="op" id="8507733">[</span><span class="op" id="8507734">]</span><span class="ident" id="8507735">httpRange</span><span class="op" id="8507744">{</span><span class="op" id="8507745">{</span><span class="num" id="8507746">0</span><span class="op" id="8507747">,</span>&nbsp;<span class="num" id="8507749">10</span><span class="op" id="8507751">}</span><span class="op" id="8507752">}</span><span class="op" id="8507753">}</span><span class="op" id="8507754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507757">{</span><span class="string" id="8507758">&#34;bytes=5-&#34;</span><span class="op" id="8507768">,</span>&nbsp;<span class="num" id="8507770">10</span><span class="op" id="8507772">,</span>&nbsp;<span class="op" id="8507774">[</span><span class="op" id="8507775">]</span><span class="ident" id="8507776">httpRange</span><span class="op" id="8507785">{</span><span class="op" id="8507786">{</span><span class="num" id="8507787">5</span><span class="op" id="8507788">,</span>&nbsp;<span class="num" id="8507790">5</span><span class="op" id="8507791">}</span><span class="op" id="8507792">}</span><span class="op" id="8507793">}</span><span class="op" id="8507794">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507797">{</span><span class="string" id="8507798">&#34;bytes=0-20&#34;</span><span class="op" id="8507810">,</span>&nbsp;<span class="num" id="8507812">10</span><span class="op" id="8507814">,</span>&nbsp;<span class="op" id="8507816">[</span><span class="op" id="8507817">]</span><span class="ident" id="8507818">httpRange</span><span class="op" id="8507827">{</span><span class="op" id="8507828">{</span><span class="num" id="8507829">0</span><span class="op" id="8507830">,</span>&nbsp;<span class="num" id="8507832">10</span><span class="op" id="8507834">}</span><span class="op" id="8507835">}</span><span class="op" id="8507836">}</span><span class="op" id="8507837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507840">{</span><span class="string" id="8507841">&#34;bytes=15-,0-5&#34;</span><span class="op" id="8507856">,</span>&nbsp;<span class="num" id="8507858">10</span><span class="op" id="8507860">,</span>&nbsp;<span class="ident" id="8507862">nil</span><span class="op" id="8507865">}</span><span class="op" id="8507866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507869">{</span><span class="string" id="8507870">&#34;bytes=1-2,5-&#34;</span><span class="op" id="8507884">,</span>&nbsp;<span class="num" id="8507886">10</span><span class="op" id="8507888">,</span>&nbsp;<span class="op" id="8507890">[</span><span class="op" id="8507891">]</span><span class="ident" id="8507892">httpRange</span><span class="op" id="8507901">{</span><span class="op" id="8507902">{</span><span class="num" id="8507903">1</span><span class="op" id="8507904">,</span>&nbsp;<span class="num" id="8507906">2</span><span class="op" id="8507907">}</span><span class="op" id="8507908">,</span>&nbsp;<span class="op" id="8507910">{</span><span class="num" id="8507911">5</span><span class="op" id="8507912">,</span>&nbsp;<span class="num" id="8507914">5</span><span class="op" id="8507915">}</span><span class="op" id="8507916">}</span><span class="op" id="8507917">}</span><span class="op" id="8507918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507921">{</span><span class="string" id="8507922">&#34;bytes=-2&nbsp;,&nbsp;7-&#34;</span><span class="op" id="8507937">,</span>&nbsp;<span class="num" id="8507939">11</span><span class="op" id="8507941">,</span>&nbsp;<span class="op" id="8507943">[</span><span class="op" id="8507944">]</span><span class="ident" id="8507945">httpRange</span><span class="op" id="8507954">{</span><span class="op" id="8507955">{</span><span class="num" id="8507956">9</span><span class="op" id="8507957">,</span>&nbsp;<span class="num" id="8507959">2</span><span class="op" id="8507960">}</span><span class="op" id="8507961">,</span>&nbsp;<span class="op" id="8507963">{</span><span class="num" id="8507964">7</span><span class="op" id="8507965">,</span>&nbsp;<span class="num" id="8507967">4</span><span class="op" id="8507968">}</span><span class="op" id="8507969">}</span><span class="op" id="8507970">}</span><span class="op" id="8507971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507974">{</span><span class="string" id="8507975">&#34;bytes=0-0&nbsp;,2-2,&nbsp;7-&#34;</span><span class="op" id="8507995">,</span>&nbsp;<span class="num" id="8507997">11</span><span class="op" id="8507999">,</span>&nbsp;<span class="op" id="8508001">[</span><span class="op" id="8508002">]</span><span class="ident" id="8508003">httpRange</span><span class="op" id="8508012">{</span><span class="op" id="8508013">{</span><span class="num" id="8508014">0</span><span class="op" id="8508015">,</span>&nbsp;<span class="num" id="8508017">1</span><span class="op" id="8508018">}</span><span class="op" id="8508019">,</span>&nbsp;<span class="op" id="8508021">{</span><span class="num" id="8508022">2</span><span class="op" id="8508023">,</span>&nbsp;<span class="num" id="8508025">1</span><span class="op" id="8508026">}</span><span class="op" id="8508027">,</span>&nbsp;<span class="op" id="8508029">{</span><span class="num" id="8508030">7</span><span class="op" id="8508031">,</span>&nbsp;<span class="num" id="8508033">4</span><span class="op" id="8508034">}</span><span class="op" id="8508035">}</span><span class="op" id="8508036">}</span><span class="op" id="8508037">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508040">{</span><span class="string" id="8508041">&#34;bytes=-5&#34;</span><span class="op" id="8508051">,</span>&nbsp;<span class="num" id="8508053">10</span><span class="op" id="8508055">,</span>&nbsp;<span class="op" id="8508057">[</span><span class="op" id="8508058">]</span><span class="ident" id="8508059">httpRange</span><span class="op" id="8508068">{</span><span class="op" id="8508069">{</span><span class="num" id="8508070">5</span><span class="op" id="8508071">,</span>&nbsp;<span class="num" id="8508073">5</span><span class="op" id="8508074">}</span><span class="op" id="8508075">}</span><span class="op" id="8508076">}</span><span class="op" id="8508077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508080">{</span><span class="string" id="8508081">&#34;bytes=-15&#34;</span><span class="op" id="8508092">,</span>&nbsp;<span class="num" id="8508094">10</span><span class="op" id="8508096">,</span>&nbsp;<span class="op" id="8508098">[</span><span class="op" id="8508099">]</span><span class="ident" id="8508100">httpRange</span><span class="op" id="8508109">{</span><span class="op" id="8508110">{</span><span class="num" id="8508111">0</span><span class="op" id="8508112">,</span>&nbsp;<span class="num" id="8508114">10</span><span class="op" id="8508116">}</span><span class="op" id="8508117">}</span><span class="op" id="8508118">}</span><span class="op" id="8508119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508122">{</span><span class="string" id="8508123">&#34;bytes=0-499&#34;</span><span class="op" id="8508136">,</span>&nbsp;<span class="num" id="8508138">10000</span><span class="op" id="8508143">,</span>&nbsp;<span class="op" id="8508145">[</span><span class="op" id="8508146">]</span><span class="ident" id="8508147">httpRange</span><span class="op" id="8508156">{</span><span class="op" id="8508157">{</span><span class="num" id="8508158">0</span><span class="op" id="8508159">,</span>&nbsp;<span class="num" id="8508161">500</span><span class="op" id="8508164">}</span><span class="op" id="8508165">}</span><span class="op" id="8508166">}</span><span class="op" id="8508167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508170">{</span><span class="string" id="8508171">&#34;bytes=500-999&#34;</span><span class="op" id="8508186">,</span>&nbsp;<span class="num" id="8508188">10000</span><span class="op" id="8508193">,</span>&nbsp;<span class="op" id="8508195">[</span><span class="op" id="8508196">]</span><span class="ident" id="8508197">httpRange</span><span class="op" id="8508206">{</span><span class="op" id="8508207">{</span><span class="num" id="8508208">500</span><span class="op" id="8508211">,</span>&nbsp;<span class="num" id="8508213">500</span><span class="op" id="8508216">}</span><span class="op" id="8508217">}</span><span class="op" id="8508218">}</span><span class="op" id="8508219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508222">{</span><span class="string" id="8508223">&#34;bytes=-500&#34;</span><span class="op" id="8508235">,</span>&nbsp;<span class="num" id="8508237">10000</span><span class="op" id="8508242">,</span>&nbsp;<span class="op" id="8508244">[</span><span class="op" id="8508245">]</span><span class="ident" id="8508246">httpRange</span><span class="op" id="8508255">{</span><span class="op" id="8508256">{</span><span class="num" id="8508257">9500</span><span class="op" id="8508261">,</span>&nbsp;<span class="num" id="8508263">500</span><span class="op" id="8508266">}</span><span class="op" id="8508267">}</span><span class="op" id="8508268">}</span><span class="op" id="8508269">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508272">{</span><span class="string" id="8508273">&#34;bytes=9500-&#34;</span><span class="op" id="8508286">,</span>&nbsp;<span class="num" id="8508288">10000</span><span class="op" id="8508293">,</span>&nbsp;<span class="op" id="8508295">[</span><span class="op" id="8508296">]</span><span class="ident" id="8508297">httpRange</span><span class="op" id="8508306">{</span><span class="op" id="8508307">{</span><span class="num" id="8508308">9500</span><span class="op" id="8508312">,</span>&nbsp;<span class="num" id="8508314">500</span><span class="op" id="8508317">}</span><span class="op" id="8508318">}</span><span class="op" id="8508319">}</span><span class="op" id="8508320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508323">{</span><span class="string" id="8508324">&#34;bytes=0-0,-1&#34;</span><span class="op" id="8508338">,</span>&nbsp;<span class="num" id="8508340">10000</span><span class="op" id="8508345">,</span>&nbsp;<span class="op" id="8508347">[</span><span class="op" id="8508348">]</span><span class="ident" id="8508349">httpRange</span><span class="op" id="8508358">{</span><span class="op" id="8508359">{</span><span class="num" id="8508360">0</span><span class="op" id="8508361">,</span>&nbsp;<span class="num" id="8508363">1</span><span class="op" id="8508364">}</span><span class="op" id="8508365">,</span>&nbsp;<span class="op" id="8508367">{</span><span class="num" id="8508368">9999</span><span class="op" id="8508372">,</span>&nbsp;<span class="num" id="8508374">1</span><span class="op" id="8508375">}</span><span class="op" id="8508376">}</span><span class="op" id="8508377">}</span><span class="op" id="8508378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508381">{</span><span class="string" id="8508382">&#34;bytes=500-600,601-999&#34;</span><span class="op" id="8508405">,</span>&nbsp;<span class="num" id="8508407">10000</span><span class="op" id="8508412">,</span>&nbsp;<span class="op" id="8508414">[</span><span class="op" id="8508415">]</span><span class="ident" id="8508416">httpRange</span><span class="op" id="8508425">{</span><span class="op" id="8508426">{</span><span class="num" id="8508427">500</span><span class="op" id="8508430">,</span>&nbsp;<span class="num" id="8508432">101</span><span class="op" id="8508435">}</span><span class="op" id="8508436">,</span>&nbsp;<span class="op" id="8508438">{</span><span class="num" id="8508439">601</span><span class="op" id="8508442">,</span>&nbsp;<span class="num" id="8508444">399</span><span class="op" id="8508447">}</span><span class="op" id="8508448">}</span><span class="op" id="8508449">}</span><span class="op" id="8508450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508453">{</span><span class="string" id="8508454">&#34;bytes=500-700,601-999&#34;</span><span class="op" id="8508477">,</span>&nbsp;<span class="num" id="8508479">10000</span><span class="op" id="8508484">,</span>&nbsp;<span class="op" id="8508486">[</span><span class="op" id="8508487">]</span><span class="ident" id="8508488">httpRange</span><span class="op" id="8508497">{</span><span class="op" id="8508498">{</span><span class="num" id="8508499">500</span><span class="op" id="8508502">,</span>&nbsp;<span class="num" id="8508504">201</span><span class="op" id="8508507">}</span><span class="op" id="8508508">,</span>&nbsp;<span class="op" id="8508510">{</span><span class="num" id="8508511">601</span><span class="op" id="8508514">,</span>&nbsp;<span class="num" id="8508516">399</span><span class="op" id="8508519">}</span><span class="op" id="8508520">}</span><span class="op" id="8508521">}</span><span class="op" id="8508522">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8508526">//&nbsp;Match&nbsp;Apache&nbsp;laxity:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508551">{</span><span class="string" id="8508552">&#34;bytes=&nbsp;&nbsp;&nbsp;1&nbsp;-2&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;4-&nbsp;5,&nbsp;7&nbsp;-&nbsp;8&nbsp;,&nbsp;,,&#34;</span><span class="op" id="8508589">,</span>&nbsp;<span class="num" id="8508591">11</span><span class="op" id="8508593">,</span>&nbsp;<span class="op" id="8508595">[</span><span class="op" id="8508596">]</span><span class="ident" id="8508597">httpRange</span><span class="op" id="8508606">{</span><span class="op" id="8508607">{</span><span class="num" id="8508608">1</span><span class="op" id="8508609">,</span>&nbsp;<span class="num" id="8508611">2</span><span class="op" id="8508612">}</span><span class="op" id="8508613">,</span>&nbsp;<span class="op" id="8508615">{</span><span class="num" id="8508616">4</span><span class="op" id="8508617">,</span>&nbsp;<span class="num" id="8508619">2</span><span class="op" id="8508620">}</span><span class="op" id="8508621">,</span>&nbsp;<span class="op" id="8508623">{</span><span class="num" id="8508624">7</span><span class="op" id="8508625">,</span>&nbsp;<span class="num" id="8508627">2</span><span class="op" id="8508628">}</span><span class="op" id="8508629">}</span><span class="op" id="8508630">}</span><span class="op" id="8508631">,</span><br>
<span class="lineno"></span><span class="op" id="8508633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8508636">func</span>&nbsp;<span class="ident" id="8508641">TestParseRange</span><span class="op" id="8508655">(</span><span class="ident" id="8508656">t</span>&nbsp;<span class="op" id="8508658">*</span><span class="ident" id="8508659">testing</span><span class="op" id="8508666">.</span><span class="ident" id="8508667">T</span><span class="op" id="8508668">)</span>&nbsp;<span class="op" id="8508670">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508673">for</span>&nbsp;<span class="ident" id="8508677">_</span><span class="op" id="8508678">,</span>&nbsp;<span class="ident" id="8508680">test</span>&nbsp;<span class="op" id="8508685">:=</span>&nbsp;<span class="keyword" id="8508688">range</span>&nbsp;<span class="ident" id="8508694">ParseRangeTests</span>&nbsp;<span class="op" id="8508710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508714">r</span>&nbsp;<span class="op" id="8508716">:=</span>&nbsp;<span class="ident" id="8508719">test</span><span class="op" id="8508723">.</span><span class="ident" id="8508724">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508728">ranges</span><span class="op" id="8508734">,</span>&nbsp;<span class="ident" id="8508736">err</span>&nbsp;<span class="op" id="8508740">:=</span>&nbsp;<span class="ident" id="8508743">parseRange</span><span class="op" id="8508753">(</span><span class="ident" id="8508754">test</span><span class="op" id="8508758">.</span><span class="ident" id="8508759">s</span><span class="op" id="8508760">,</span>&nbsp;<span class="ident" id="8508762">test</span><span class="op" id="8508766">.</span><span class="ident" id="8508767">length</span><span class="op" id="8508773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508777">if</span>&nbsp;<span class="ident" id="8508780">err</span>&nbsp;<span class="op" id="8508784">!=</span>&nbsp;<span class="ident" id="8508787">nil</span>&nbsp;<span class="op" id="8508791">&amp;&amp;</span>&nbsp;<span class="ident" id="8508794">r</span>&nbsp;<span class="op" id="8508796">!=</span>&nbsp;<span class="ident" id="8508799">nil</span>&nbsp;<span class="op" id="8508803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508808">t</span><span class="op" id="8508809">.</span><span class="ident" id="8508810">Errorf</span><span class="op" id="8508816">(</span><span class="string" id="8508817">&#34;parseRange(%q)&nbsp;returned&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8508851">,</span>&nbsp;<span class="ident" id="8508853">test</span><span class="op" id="8508857">.</span><span class="ident" id="8508858">s</span><span class="op" id="8508859">,</span>&nbsp;<span class="ident" id="8508861">err</span><span class="op" id="8508864">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508872">if</span>&nbsp;<span class="builtinfunc" id="8508875">len</span><span class="op" id="8508878">(</span><span class="ident" id="8508879">ranges</span><span class="op" id="8508885">)</span>&nbsp;<span class="op" id="8508887">!=</span>&nbsp;<span class="builtinfunc" id="8508890">len</span><span class="op" id="8508893">(</span><span class="ident" id="8508894">r</span><span class="op" id="8508895">)</span>&nbsp;<span class="op" id="8508897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508902">t</span><span class="op" id="8508903">.</span><span class="ident" id="8508904">Errorf</span><span class="op" id="8508910">(</span><span class="string" id="8508911">&#34;len(parseRange(%q))&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8508946">,</span>&nbsp;<span class="ident" id="8508948">test</span><span class="op" id="8508952">.</span><span class="ident" id="8508953">s</span><span class="op" id="8508954">,</span>&nbsp;<span class="builtinfunc" id="8508956">len</span><span class="op" id="8508959">(</span><span class="ident" id="8508960">ranges</span><span class="op" id="8508966">)</span><span class="op" id="8508967">,</span>&nbsp;<span class="builtinfunc" id="8508969">len</span><span class="op" id="8508972">(</span><span class="ident" id="8508973">r</span><span class="op" id="8508974">)</span><span class="op" id="8508975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508980">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508991">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508995">for</span>&nbsp;<span class="ident" id="8508999">i</span>&nbsp;<span class="op" id="8509001">:=</span>&nbsp;<span class="keyword" id="8509004">range</span>&nbsp;<span class="ident" id="8509010">r</span>&nbsp;<span class="op" id="8509012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509017">if</span>&nbsp;<span class="ident" id="8509020">ranges</span><span class="op" id="8509026">[</span><span class="ident" id="8509027">i</span><span class="op" id="8509028">]</span><span class="op" id="8509029">.</span><span class="ident" id="8509030">start</span>&nbsp;<span class="op" id="8509036">!=</span>&nbsp;<span class="ident" id="8509039">r</span><span class="op" id="8509040">[</span><span class="ident" id="8509041">i</span><span class="op" id="8509042">]</span><span class="op" id="8509043">.</span><span class="ident" id="8509044">start</span>&nbsp;<span class="op" id="8509050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509056">t</span><span class="op" id="8509057">.</span><span class="ident" id="8509058">Errorf</span><span class="op" id="8509064">(</span><span class="string" id="8509065">&#34;parseRange(%q)[%d].start&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8509105">,</span>&nbsp;<span class="ident" id="8509107">test</span><span class="op" id="8509111">.</span><span class="ident" id="8509112">s</span><span class="op" id="8509113">,</span>&nbsp;<span class="ident" id="8509115">i</span><span class="op" id="8509116">,</span>&nbsp;<span class="ident" id="8509118">ranges</span><span class="op" id="8509124">[</span><span class="ident" id="8509125">i</span><span class="op" id="8509126">]</span><span class="op" id="8509127">.</span><span class="ident" id="8509128">start</span><span class="op" id="8509133">,</span>&nbsp;<span class="ident" id="8509135">r</span><span class="op" id="8509136">[</span><span class="ident" id="8509137">i</span><span class="op" id="8509138">]</span><span class="op" id="8509139">.</span><span class="ident" id="8509140">start</span><span class="op" id="8509145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509155">if</span>&nbsp;<span class="ident" id="8509158">ranges</span><span class="op" id="8509164">[</span><span class="ident" id="8509165">i</span><span class="op" id="8509166">]</span><span class="op" id="8509167">.</span><span class="ident" id="8509168">length</span>&nbsp;<span class="op" id="8509175">!=</span>&nbsp;<span class="ident" id="8509178">r</span><span class="op" id="8509179">[</span><span class="ident" id="8509180">i</span><span class="op" id="8509181">]</span><span class="op" id="8509182">.</span><span class="ident" id="8509183">length</span>&nbsp;<span class="op" id="8509190">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509196">t</span><span class="op" id="8509197">.</span><span class="ident" id="8509198">Errorf</span><span class="op" id="8509204">(</span><span class="string" id="8509205">&#34;parseRange(%q)[%d].length&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8509246">,</span>&nbsp;<span class="ident" id="8509248">test</span><span class="op" id="8509252">.</span><span class="ident" id="8509253">s</span><span class="op" id="8509254">,</span>&nbsp;<span class="ident" id="8509256">i</span><span class="op" id="8509257">,</span>&nbsp;<span class="ident" id="8509259">ranges</span><span class="op" id="8509265">[</span><span class="ident" id="8509266">i</span><span class="op" id="8509267">]</span><span class="op" id="8509268">.</span><span class="ident" id="8509269">length</span><span class="op" id="8509275">,</span>&nbsp;<span class="ident" id="8509277">r</span><span class="op" id="8509278">[</span><span class="ident" id="8509279">i</span><span class="op" id="8509280">]</span><span class="op" id="8509281">.</span><span class="ident" id="8509282">length</span><span class="op" id="8509288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509300">}</span><br>
<span class="lineno"></span><span class="op" id="8509302">}</span>
</div>
</body>
</html>
