<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3827469">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3827524">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3827578">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3827629">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3827694">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3827743">package</span>&nbsp;<span class="ident" id="3827751">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3827756">import</span>&nbsp;<span class="string" id="3827763">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3827771">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3827841">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3827914">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3827941">var</span>&nbsp;<span class="ident" id="3827945">services</span>&nbsp;<span class="op" id="3827954">=</span>&nbsp;<span class="keyword" id="3827956">map</span><span class="op" id="3827959">[</span><span class="builtintype" id="3827960">string</span><span class="op" id="3827966">]</span><span class="keyword" id="3827967">map</span><span class="op" id="3827970">[</span><span class="builtintype" id="3827971">string</span><span class="op" id="3827977">]</span><span class="builtintype" id="3827978">int</span><span class="op" id="3827981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3827984">&#34;tcp&#34;</span><span class="op" id="3827989">:</span>&nbsp;<span class="op" id="3827991">{</span><span class="string" id="3827992">&#34;http&#34;</span><span class="op" id="3827998">:</span>&nbsp;<span class="num" id="3828000">80</span><span class="op" id="3828002">}</span><span class="op" id="3828003">,</span><br>
<span class="lineno"></span><span class="op" id="3828005">}</span><br>
<span class="lineno"></span><span class="keyword" id="3828007">var</span>&nbsp;<span class="ident" id="3828011">servicesError</span>&nbsp;<span class="builtintype" id="3828025">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3828031">var</span>&nbsp;<span class="ident" id="3828035">onceReadServices</span>&nbsp;<span class="ident" id="3828052">sync</span><span class="op" id="3828056">.</span><span class="ident" id="3828057">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3828063">func</span>&nbsp;<span class="ident" id="3828068">readServices</span><span class="op" id="3828080">(</span><span class="op" id="3828081">)</span>&nbsp;<span class="op" id="3828083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828086">var</span>&nbsp;<span class="ident" id="3828090">file</span>&nbsp;<span class="op" id="3828095">*</span><span class="ident" id="3828096">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828102">if</span>&nbsp;<span class="ident" id="3828105">file</span><span class="op" id="3828109">,</span>&nbsp;<span class="ident" id="3828111">servicesError</span>&nbsp;<span class="op" id="3828125">=</span>&nbsp;<span class="ident" id="3828127">open</span><span class="op" id="3828131">(</span><span class="string" id="3828132">&#34;/etc/services&#34;</span><span class="op" id="3828147">)</span><span class="op" id="3828148">;</span>&nbsp;<span class="ident" id="3828150">servicesError</span>&nbsp;<span class="op" id="3828164">!=</span>&nbsp;<span class="builtintype" id="3828167">nil</span>&nbsp;<span class="op" id="3828171">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828175">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828186">for</span>&nbsp;<span class="ident" id="3828190">line</span><span class="op" id="3828194">,</span>&nbsp;<span class="ident" id="3828196">ok</span>&nbsp;<span class="op" id="3828199">:=</span>&nbsp;<span class="ident" id="3828202">file</span><span class="op" id="3828206">.</span><span class="ident" id="3828207">readLine</span><span class="op" id="3828215">(</span><span class="op" id="3828216">)</span><span class="op" id="3828217">;</span>&nbsp;<span class="ident" id="3828219">ok</span><span class="op" id="3828221">;</span>&nbsp;<span class="ident" id="3828223">line</span><span class="op" id="3828227">,</span>&nbsp;<span class="ident" id="3828229">ok</span>&nbsp;<span class="op" id="3828232">=</span>&nbsp;<span class="ident" id="3828234">file</span><span class="op" id="3828238">.</span><span class="ident" id="3828239">readLine</span><span class="op" id="3828247">(</span><span class="op" id="3828248">)</span>&nbsp;<span class="op" id="3828250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3828254">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828308">if</span>&nbsp;<span class="ident" id="3828311">i</span>&nbsp;<span class="op" id="3828313">:=</span>&nbsp;<span class="ident" id="3828316">byteIndex</span><span class="op" id="3828325">(</span><span class="ident" id="3828326">line</span><span class="op" id="3828330">,</span>&nbsp;<span class="string" id="3828332">&#39;#&#39;</span><span class="op" id="3828335">)</span><span class="op" id="3828336">;</span>&nbsp;<span class="ident" id="3828338">i</span>&nbsp;<span class="op" id="3828340">&gt;=</span>&nbsp;<span class="num" id="3828343">0</span>&nbsp;<span class="op" id="3828345">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828350">line</span>&nbsp;<span class="op" id="3828355">=</span>&nbsp;<span class="ident" id="3828357">line</span><span class="op" id="3828361">[</span><span class="num" id="3828362">0</span><span class="op" id="3828363">:</span><span class="ident" id="3828364">i</span><span class="op" id="3828365">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828373">f</span>&nbsp;<span class="op" id="3828375">:=</span>&nbsp;<span class="ident" id="3828378">getFields</span><span class="op" id="3828387">(</span><span class="ident" id="3828388">line</span><span class="op" id="3828392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828396">if</span>&nbsp;<span class="builtinfunc" id="3828399">len</span><span class="op" id="3828402">(</span><span class="ident" id="3828403">f</span><span class="op" id="3828404">)</span>&nbsp;<span class="op" id="3828406">&lt;</span>&nbsp;<span class="num" id="3828408">2</span>&nbsp;<span class="op" id="3828410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828415">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828430">portnet</span>&nbsp;<span class="op" id="3828438">:=</span>&nbsp;<span class="ident" id="3828441">f</span><span class="op" id="3828442">[</span><span class="num" id="3828443">1</span><span class="op" id="3828444">]</span>&nbsp;<span class="comment" id="3828446">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828460">port</span><span class="op" id="3828464">,</span>&nbsp;<span class="ident" id="3828466">j</span><span class="op" id="3828467">,</span>&nbsp;<span class="ident" id="3828469">ok</span>&nbsp;<span class="op" id="3828472">:=</span>&nbsp;<span class="ident" id="3828475">dtoi</span><span class="op" id="3828479">(</span><span class="ident" id="3828480">portnet</span><span class="op" id="3828487">,</span>&nbsp;<span class="num" id="3828489">0</span><span class="op" id="3828490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828494">if</span>&nbsp;<span class="op" id="3828497">!</span><span class="ident" id="3828498">ok</span>&nbsp;<span class="op" id="3828501">||</span>&nbsp;<span class="ident" id="3828504">port</span>&nbsp;<span class="op" id="3828509">&lt;=</span>&nbsp;<span class="num" id="3828512">0</span>&nbsp;<span class="op" id="3828514">||</span>&nbsp;<span class="ident" id="3828517">j</span>&nbsp;<span class="op" id="3828519">&gt;=</span>&nbsp;<span class="builtinfunc" id="3828522">len</span><span class="op" id="3828525">(</span><span class="ident" id="3828526">portnet</span><span class="op" id="3828533">)</span>&nbsp;<span class="op" id="3828535">||</span>&nbsp;<span class="ident" id="3828538">portnet</span><span class="op" id="3828545">[</span><span class="ident" id="3828546">j</span><span class="op" id="3828547">]</span>&nbsp;<span class="op" id="3828549">!=</span>&nbsp;<span class="string" id="3828552">&#39;/&#39;</span>&nbsp;<span class="op" id="3828556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828561">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828576">netw</span>&nbsp;<span class="op" id="3828581">:=</span>&nbsp;<span class="ident" id="3828584">portnet</span><span class="op" id="3828591">[</span><span class="ident" id="3828592">j</span><span class="op" id="3828593">+</span><span class="num" id="3828594">1</span><span class="op" id="3828595">:</span><span class="op" id="3828596">]</span>&nbsp;<span class="comment" id="3828598">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828609">m</span><span class="op" id="3828610">,</span>&nbsp;<span class="ident" id="3828612">ok1</span>&nbsp;<span class="op" id="3828616">:=</span>&nbsp;<span class="ident" id="3828619">services</span><span class="op" id="3828627">[</span><span class="ident" id="3828628">netw</span><span class="op" id="3828632">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828636">if</span>&nbsp;<span class="op" id="3828639">!</span><span class="ident" id="3828640">ok1</span>&nbsp;<span class="op" id="3828644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828649">m</span>&nbsp;<span class="op" id="3828651">=</span>&nbsp;<span class="builtinfunc" id="3828653">make</span><span class="op" id="3828657">(</span><span class="keyword" id="3828658">map</span><span class="op" id="3828661">[</span><span class="builtintype" id="3828662">string</span><span class="op" id="3828668">]</span><span class="builtintype" id="3828669">int</span><span class="op" id="3828672">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828677">services</span><span class="op" id="3828685">[</span><span class="ident" id="3828686">netw</span><span class="op" id="3828690">]</span>&nbsp;<span class="op" id="3828692">=</span>&nbsp;<span class="ident" id="3828694">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828702">for</span>&nbsp;<span class="ident" id="3828706">i</span>&nbsp;<span class="op" id="3828708">:=</span>&nbsp;<span class="num" id="3828711">0</span><span class="op" id="3828712">;</span>&nbsp;<span class="ident" id="3828714">i</span>&nbsp;<span class="op" id="3828716">&lt;</span>&nbsp;<span class="builtinfunc" id="3828718">len</span><span class="op" id="3828721">(</span><span class="ident" id="3828722">f</span><span class="op" id="3828723">)</span><span class="op" id="3828724">;</span>&nbsp;<span class="ident" id="3828726">i</span><span class="op" id="3828727">++</span>&nbsp;<span class="op" id="3828730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828735">if</span>&nbsp;<span class="ident" id="3828738">i</span>&nbsp;<span class="op" id="3828740">!=</span>&nbsp;<span class="num" id="3828743">1</span>&nbsp;<span class="op" id="3828745">{</span>&nbsp;<span class="comment" id="3828747">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828772">m</span><span class="op" id="3828773">[</span><span class="ident" id="3828774">f</span><span class="op" id="3828775">[</span><span class="ident" id="3828776">i</span><span class="op" id="3828777">]</span><span class="op" id="3828778">]</span>&nbsp;<span class="op" id="3828780">=</span>&nbsp;<span class="ident" id="3828782">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3828797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828800">file</span><span class="op" id="3828804">.</span><span class="builtinfunc" id="3828805">close</span><span class="op" id="3828810">(</span><span class="op" id="3828811">)</span><br>
<span class="lineno"></span><span class="op" id="3828813">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3828816">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3828879">func</span>&nbsp;<span class="ident" id="3828884">goLookupPort</span><span class="op" id="3828896">(</span><span class="ident" id="3828897">network</span><span class="op" id="3828904">,</span>&nbsp;<span class="ident" id="3828906">service</span>&nbsp;<span class="builtintype" id="3828914">string</span><span class="op" id="3828920">)</span>&nbsp;<span class="op" id="3828922">(</span><span class="ident" id="3828923">port</span>&nbsp;<span class="builtintype" id="3828928">int</span><span class="op" id="3828931">,</span>&nbsp;<span class="ident" id="3828933">err</span>&nbsp;<span class="builtintype" id="3828937">error</span><span class="op" id="3828942">)</span>&nbsp;<span class="op" id="3828944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3828947">onceReadServices</span><span class="op" id="3828963">.</span><span class="ident" id="3828964">Do</span><span class="op" id="3828966">(</span><span class="ident" id="3828967">readServices</span><span class="op" id="3828979">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3828983">switch</span>&nbsp;<span class="ident" id="3828990">network</span>&nbsp;<span class="op" id="3828998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829001">case</span>&nbsp;<span class="string" id="3829006">&#34;tcp4&#34;</span><span class="op" id="3829012">,</span>&nbsp;<span class="string" id="3829014">&#34;tcp6&#34;</span><span class="op" id="3829020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3829024">network</span>&nbsp;<span class="op" id="3829032">=</span>&nbsp;<span class="string" id="3829034">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829041">case</span>&nbsp;<span class="string" id="3829046">&#34;udp4&#34;</span><span class="op" id="3829052">,</span>&nbsp;<span class="string" id="3829054">&#34;udp6&#34;</span><span class="op" id="3829060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3829064">network</span>&nbsp;<span class="op" id="3829072">=</span>&nbsp;<span class="string" id="3829074">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3829081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829085">if</span>&nbsp;<span class="ident" id="3829088">m</span><span class="op" id="3829089">,</span>&nbsp;<span class="ident" id="3829091">ok</span>&nbsp;<span class="op" id="3829094">:=</span>&nbsp;<span class="ident" id="3829097">services</span><span class="op" id="3829105">[</span><span class="ident" id="3829106">network</span><span class="op" id="3829113">]</span><span class="op" id="3829114">;</span>&nbsp;<span class="ident" id="3829116">ok</span>&nbsp;<span class="op" id="3829119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829123">if</span>&nbsp;<span class="ident" id="3829126">port</span><span class="op" id="3829130">,</span>&nbsp;<span class="ident" id="3829132">ok</span>&nbsp;<span class="op" id="3829135">=</span>&nbsp;<span class="ident" id="3829137">m</span><span class="op" id="3829138">[</span><span class="ident" id="3829139">service</span><span class="op" id="3829146">]</span><span class="op" id="3829147">;</span>&nbsp;<span class="ident" id="3829149">ok</span>&nbsp;<span class="op" id="3829152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829157">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3829166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3829169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3829172">return</span>&nbsp;<span class="num" id="3829179">0</span><span class="op" id="3829180">,</span>&nbsp;<span class="op" id="3829182">&amp;</span><span class="ident" id="3829183">AddrError</span><span class="op" id="3829192">{</span><span class="string" id="3829193">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3829207">,</span>&nbsp;<span class="ident" id="3829209">network</span>&nbsp;<span class="op" id="3829217">+</span>&nbsp;<span class="string" id="3829219">&#34;/&#34;</span>&nbsp;<span class="op" id="3829223">+</span>&nbsp;<span class="ident" id="3829225">service</span><span class="op" id="3829232">}</span><br>
<span class="lineno"></span><span class="op" id="3829234">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
