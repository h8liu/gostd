<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html" class="current">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6536306">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6536362">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6536416">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6536467">package</span>&nbsp;<span class="ident" id="6536475">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536481">import</span>&nbsp;<span class="op" id="6536488">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6536491">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6536500">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6536508">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6536521">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6536532">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6536542">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6536545">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536575">type</span>&nbsp;<span class="ident" id="6536580">example</span>&nbsp;<span class="keyword" id="6536588">struct</span>&nbsp;<span class="op" id="6536595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6536598">compact</span>&nbsp;<span class="builtintype" id="6536606">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6536614">indent</span>&nbsp;&nbsp;<span class="builtintype" id="6536622">string</span><br>
<span class="lineno">20</span><span class="op" id="6536629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536632">var</span>&nbsp;<span class="ident" id="6536636">examples</span>&nbsp;<span class="op" id="6536645">=</span>&nbsp;<span class="op" id="6536647">[</span><span class="op" id="6536648">]</span><span class="ident" id="6536649">example</span><span class="op" id="6536656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536659">{</span><span class="string" id="6536660">`1`</span><span class="op" id="6536663">,</span>&nbsp;<span class="string" id="6536665">`1`</span><span class="op" id="6536668">}</span><span class="op" id="6536669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536672">{</span><span class="string" id="6536673">`{}`</span><span class="op" id="6536677">,</span>&nbsp;<span class="string" id="6536679">`{}`</span><span class="op" id="6536683">}</span><span class="op" id="6536684">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536687">{</span><span class="string" id="6536688">`[]`</span><span class="op" id="6536692">,</span>&nbsp;<span class="string" id="6536694">`[]`</span><span class="op" id="6536698">}</span><span class="op" id="6536699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536702">{</span><span class="string" id="6536703">`{&#34;&#34;:2}`</span><span class="op" id="6536711">,</span>&nbsp;<span class="string" id="6536713">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="6536730">}</span><span class="op" id="6536731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536734">{</span><span class="string" id="6536735">`[3]`</span><span class="op" id="6536740">,</span>&nbsp;<span class="string" id="6536742">&#34;[\n\t3\n]&#34;</span><span class="op" id="6536753">}</span><span class="op" id="6536754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536757">{</span><span class="string" id="6536758">`[1,2,3]`</span><span class="op" id="6536767">,</span>&nbsp;<span class="string" id="6536769">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="6536792">}</span><span class="op" id="6536793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536796">{</span><span class="string" id="6536797">`{&#34;x&#34;:1}`</span><span class="op" id="6536806">,</span>&nbsp;<span class="string" id="6536808">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="6536826">}</span><span class="op" id="6536827">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6536830">{</span><span class="ident" id="6536831">ex1</span><span class="op" id="6536834">,</span>&nbsp;<span class="ident" id="6536836">ex1i</span><span class="op" id="6536840">}</span><span class="op" id="6536841">,</span><br>
<span class="lineno"></span><span class="op" id="6536843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6536846">var</span>&nbsp;<span class="ident" id="6536850">ex1</span>&nbsp;<span class="op" id="6536854">=</span>&nbsp;<span class="string" id="6536856">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6536895">var</span>&nbsp;<span class="ident" id="6536899">ex1i</span>&nbsp;<span class="op" id="6536904">=</span>&nbsp;<span class="string" id="6536906">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6536962">func</span>&nbsp;<span class="ident" id="6536967">TestCompact</span><span class="op" id="6536978">(</span><span class="ident" id="6536979">t</span>&nbsp;<span class="op" id="6536981">*</span><span class="ident" id="6536982">testing</span><span class="op" id="6536989">.</span><span class="ident" id="6536990">T</span><span class="op" id="6536991">)</span>&nbsp;<span class="op" id="6536993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6536996">var</span>&nbsp;<span class="ident" id="6537000">buf</span>&nbsp;<span class="ident" id="6537004">bytes</span><span class="op" id="6537009">.</span><span class="ident" id="6537010">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537018">for</span>&nbsp;<span class="ident" id="6537022">_</span><span class="op" id="6537023">,</span>&nbsp;<span class="ident" id="6537025">tt</span>&nbsp;<span class="op" id="6537028">:=</span>&nbsp;<span class="keyword" id="6537031">range</span>&nbsp;<span class="ident" id="6537037">examples</span>&nbsp;<span class="op" id="6537046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537050">buf</span><span class="op" id="6537053">.</span><span class="ident" id="6537054">Reset</span><span class="op" id="6537059">(</span><span class="op" id="6537060">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537064">if</span>&nbsp;<span class="ident" id="6537067">err</span>&nbsp;<span class="op" id="6537071">:=</span>&nbsp;<span class="ident" id="6537074">Compact</span><span class="op" id="6537081">(</span><span class="op" id="6537082">&amp;</span><span class="ident" id="6537083">buf</span><span class="op" id="6537086">,</span>&nbsp;<span class="op" id="6537088">[</span><span class="op" id="6537089">]</span><span class="builtintype" id="6537090">byte</span><span class="op" id="6537094">(</span><span class="ident" id="6537095">tt</span><span class="op" id="6537097">.</span><span class="ident" id="6537098">compact</span><span class="op" id="6537105">)</span><span class="op" id="6537106">)</span><span class="op" id="6537107">;</span>&nbsp;<span class="ident" id="6537109">err</span>&nbsp;<span class="op" id="6537113">!=</span>&nbsp;<span class="ident" id="6537116">nil</span>&nbsp;<span class="op" id="6537120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537125">t</span><span class="op" id="6537126">.</span><span class="ident" id="6537127">Errorf</span><span class="op" id="6537133">(</span><span class="string" id="6537134">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6537152">,</span>&nbsp;<span class="ident" id="6537154">tt</span><span class="op" id="6537156">.</span><span class="ident" id="6537157">compact</span><span class="op" id="6537164">,</span>&nbsp;<span class="ident" id="6537166">err</span><span class="op" id="6537169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537173">}</span>&nbsp;<span class="keyword" id="6537175">else</span>&nbsp;<span class="keyword" id="6537180">if</span>&nbsp;<span class="ident" id="6537183">s</span>&nbsp;<span class="op" id="6537185">:=</span>&nbsp;<span class="ident" id="6537188">buf</span><span class="op" id="6537191">.</span><span class="ident" id="6537192">String</span><span class="op" id="6537198">(</span><span class="op" id="6537199">)</span><span class="op" id="6537200">;</span>&nbsp;<span class="ident" id="6537202">s</span>&nbsp;<span class="op" id="6537204">!=</span>&nbsp;<span class="ident" id="6537207">tt</span><span class="op" id="6537209">.</span><span class="ident" id="6537210">compact</span>&nbsp;<span class="op" id="6537218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537223">t</span><span class="op" id="6537224">.</span><span class="ident" id="6537225">Errorf</span><span class="op" id="6537231">(</span><span class="string" id="6537232">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6537267">,</span>&nbsp;<span class="ident" id="6537269">tt</span><span class="op" id="6537271">.</span><span class="ident" id="6537272">compact</span><span class="op" id="6537279">,</span>&nbsp;<span class="ident" id="6537281">s</span><span class="op" id="6537282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537286">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537291">buf</span><span class="op" id="6537294">.</span><span class="ident" id="6537295">Reset</span><span class="op" id="6537300">(</span><span class="op" id="6537301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537305">if</span>&nbsp;<span class="ident" id="6537308">err</span>&nbsp;<span class="op" id="6537312">:=</span>&nbsp;<span class="ident" id="6537315">Compact</span><span class="op" id="6537322">(</span><span class="op" id="6537323">&amp;</span><span class="ident" id="6537324">buf</span><span class="op" id="6537327">,</span>&nbsp;<span class="op" id="6537329">[</span><span class="op" id="6537330">]</span><span class="builtintype" id="6537331">byte</span><span class="op" id="6537335">(</span><span class="ident" id="6537336">tt</span><span class="op" id="6537338">.</span><span class="ident" id="6537339">indent</span><span class="op" id="6537345">)</span><span class="op" id="6537346">)</span><span class="op" id="6537347">;</span>&nbsp;<span class="ident" id="6537349">err</span>&nbsp;<span class="op" id="6537353">!=</span>&nbsp;<span class="ident" id="6537356">nil</span>&nbsp;<span class="op" id="6537360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537365">t</span><span class="op" id="6537366">.</span><span class="ident" id="6537367">Errorf</span><span class="op" id="6537373">(</span><span class="string" id="6537374">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6537392">,</span>&nbsp;<span class="ident" id="6537394">tt</span><span class="op" id="6537396">.</span><span class="ident" id="6537397">indent</span><span class="op" id="6537403">,</span>&nbsp;<span class="ident" id="6537405">err</span><span class="op" id="6537408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537413">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537424">}</span>&nbsp;<span class="keyword" id="6537426">else</span>&nbsp;<span class="keyword" id="6537431">if</span>&nbsp;<span class="ident" id="6537434">s</span>&nbsp;<span class="op" id="6537436">:=</span>&nbsp;<span class="ident" id="6537439">buf</span><span class="op" id="6537442">.</span><span class="ident" id="6537443">String</span><span class="op" id="6537449">(</span><span class="op" id="6537450">)</span><span class="op" id="6537451">;</span>&nbsp;<span class="ident" id="6537453">s</span>&nbsp;<span class="op" id="6537455">!=</span>&nbsp;<span class="ident" id="6537458">tt</span><span class="op" id="6537460">.</span><span class="ident" id="6537461">compact</span>&nbsp;<span class="op" id="6537469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537474">t</span><span class="op" id="6537475">.</span><span class="ident" id="6537476">Errorf</span><span class="op" id="6537482">(</span><span class="string" id="6537483">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6537513">,</span>&nbsp;<span class="ident" id="6537515">tt</span><span class="op" id="6537517">.</span><span class="ident" id="6537518">indent</span><span class="op" id="6537524">,</span>&nbsp;<span class="ident" id="6537526">s</span><span class="op" id="6537527">,</span>&nbsp;<span class="ident" id="6537529">tt</span><span class="op" id="6537531">.</span><span class="ident" id="6537532">compact</span><span class="op" id="6537539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537546">}</span><br>
<span class="lineno"></span><span class="op" id="6537548">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6537551">func</span>&nbsp;<span class="ident" id="6537556">TestCompactSeparators</span><span class="op" id="6537577">(</span><span class="ident" id="6537578">t</span>&nbsp;<span class="op" id="6537580">*</span><span class="ident" id="6537581">testing</span><span class="op" id="6537588">.</span><span class="ident" id="6537589">T</span><span class="op" id="6537590">)</span>&nbsp;<span class="op" id="6537592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6537595">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6537651">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537695">tests</span>&nbsp;<span class="op" id="6537701">:=</span>&nbsp;<span class="op" id="6537704">[</span><span class="op" id="6537705">]</span><span class="keyword" id="6537706">struct</span>&nbsp;<span class="op" id="6537713">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537717">in</span><span class="op" id="6537719">,</span>&nbsp;<span class="ident" id="6537721">compact</span>&nbsp;<span class="builtintype" id="6537729">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537737">}</span><span class="op" id="6537738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537742">{</span><span class="string" id="6537743">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="6537760">,</span>&nbsp;<span class="string" id="6537762">`{&#34;\u2028&#34;:1}`</span><span class="op" id="6537776">}</span><span class="op" id="6537777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537781">{</span><span class="string" id="6537782">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="6537799">,</span>&nbsp;<span class="string" id="6537801">`{&#34;\u2029&#34;:2}`</span><span class="op" id="6537815">}</span><span class="op" id="6537816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537819">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537822">for</span>&nbsp;<span class="ident" id="6537826">_</span><span class="op" id="6537827">,</span>&nbsp;<span class="ident" id="6537829">tt</span>&nbsp;<span class="op" id="6537832">:=</span>&nbsp;<span class="keyword" id="6537835">range</span>&nbsp;<span class="ident" id="6537841">tests</span>&nbsp;<span class="op" id="6537847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537851">var</span>&nbsp;<span class="ident" id="6537855">buf</span>&nbsp;<span class="ident" id="6537859">bytes</span><span class="op" id="6537864">.</span><span class="ident" id="6537865">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6537874">if</span>&nbsp;<span class="ident" id="6537877">err</span>&nbsp;<span class="op" id="6537881">:=</span>&nbsp;<span class="ident" id="6537884">Compact</span><span class="op" id="6537891">(</span><span class="op" id="6537892">&amp;</span><span class="ident" id="6537893">buf</span><span class="op" id="6537896">,</span>&nbsp;<span class="op" id="6537898">[</span><span class="op" id="6537899">]</span><span class="builtintype" id="6537900">byte</span><span class="op" id="6537904">(</span><span class="ident" id="6537905">tt</span><span class="op" id="6537907">.</span><span class="ident" id="6537908">in</span><span class="op" id="6537910">)</span><span class="op" id="6537911">)</span><span class="op" id="6537912">;</span>&nbsp;<span class="ident" id="6537914">err</span>&nbsp;<span class="op" id="6537918">!=</span>&nbsp;<span class="ident" id="6537921">nil</span>&nbsp;<span class="op" id="6537925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6537930">t</span><span class="op" id="6537931">.</span><span class="ident" id="6537932">Errorf</span><span class="op" id="6537938">(</span><span class="string" id="6537939">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="6537956">,</span>&nbsp;<span class="ident" id="6537958">tt</span><span class="op" id="6537960">.</span><span class="ident" id="6537961">in</span><span class="op" id="6537963">,</span>&nbsp;<span class="ident" id="6537965">err</span><span class="op" id="6537968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6537972">}</span>&nbsp;<span class="keyword" id="6537974">else</span>&nbsp;<span class="keyword" id="6537979">if</span>&nbsp;<span class="ident" id="6537982">s</span>&nbsp;<span class="op" id="6537984">:=</span>&nbsp;<span class="ident" id="6537987">buf</span><span class="op" id="6537990">.</span><span class="ident" id="6537991">String</span><span class="op" id="6537997">(</span><span class="op" id="6537998">)</span><span class="op" id="6537999">;</span>&nbsp;<span class="ident" id="6538001">s</span>&nbsp;<span class="op" id="6538003">!=</span>&nbsp;<span class="ident" id="6538006">tt</span><span class="op" id="6538008">.</span><span class="ident" id="6538009">compact</span>&nbsp;<span class="op" id="6538017">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538022">t</span><span class="op" id="6538023">.</span><span class="ident" id="6538024">Errorf</span><span class="op" id="6538030">(</span><span class="string" id="6538031">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6538058">,</span>&nbsp;<span class="ident" id="6538060">tt</span><span class="op" id="6538062">.</span><span class="ident" id="6538063">in</span><span class="op" id="6538065">,</span>&nbsp;<span class="ident" id="6538067">s</span><span class="op" id="6538068">,</span>&nbsp;<span class="ident" id="6538070">tt</span><span class="op" id="6538072">.</span><span class="ident" id="6538073">compact</span><span class="op" id="6538080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538087">}</span><br>
<span class="lineno"></span><span class="op" id="6538089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6538092">func</span>&nbsp;<span class="ident" id="6538097">TestIndent</span><span class="op" id="6538107">(</span><span class="ident" id="6538108">t</span>&nbsp;<span class="op" id="6538110">*</span><span class="ident" id="6538111">testing</span><span class="op" id="6538118">.</span><span class="ident" id="6538119">T</span><span class="op" id="6538120">)</span>&nbsp;<span class="op" id="6538122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538125">var</span>&nbsp;<span class="ident" id="6538129">buf</span>&nbsp;<span class="ident" id="6538133">bytes</span><span class="op" id="6538138">.</span><span class="ident" id="6538139">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538147">for</span>&nbsp;<span class="ident" id="6538151">_</span><span class="op" id="6538152">,</span>&nbsp;<span class="ident" id="6538154">tt</span>&nbsp;<span class="op" id="6538157">:=</span>&nbsp;<span class="keyword" id="6538160">range</span>&nbsp;<span class="ident" id="6538166">examples</span>&nbsp;<span class="op" id="6538175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538179">buf</span><span class="op" id="6538182">.</span><span class="ident" id="6538183">Reset</span><span class="op" id="6538188">(</span><span class="op" id="6538189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538193">if</span>&nbsp;<span class="ident" id="6538196">err</span>&nbsp;<span class="op" id="6538200">:=</span>&nbsp;<span class="ident" id="6538203">Indent</span><span class="op" id="6538209">(</span><span class="op" id="6538210">&amp;</span><span class="ident" id="6538211">buf</span><span class="op" id="6538214">,</span>&nbsp;<span class="op" id="6538216">[</span><span class="op" id="6538217">]</span><span class="builtintype" id="6538218">byte</span><span class="op" id="6538222">(</span><span class="ident" id="6538223">tt</span><span class="op" id="6538225">.</span><span class="ident" id="6538226">indent</span><span class="op" id="6538232">)</span><span class="op" id="6538233">,</span>&nbsp;<span class="string" id="6538235">&#34;&#34;</span><span class="op" id="6538237">,</span>&nbsp;<span class="string" id="6538239">&#34;\t&#34;</span><span class="op" id="6538243">)</span><span class="op" id="6538244">;</span>&nbsp;<span class="ident" id="6538246">err</span>&nbsp;<span class="op" id="6538250">!=</span>&nbsp;<span class="ident" id="6538253">nil</span>&nbsp;<span class="op" id="6538257">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538262">t</span><span class="op" id="6538263">.</span><span class="ident" id="6538264">Errorf</span><span class="op" id="6538270">(</span><span class="string" id="6538271">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6538288">,</span>&nbsp;<span class="ident" id="6538290">tt</span><span class="op" id="6538292">.</span><span class="ident" id="6538293">indent</span><span class="op" id="6538299">,</span>&nbsp;<span class="ident" id="6538301">err</span><span class="op" id="6538304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538308">}</span>&nbsp;<span class="keyword" id="6538310">else</span>&nbsp;<span class="keyword" id="6538315">if</span>&nbsp;<span class="ident" id="6538318">s</span>&nbsp;<span class="op" id="6538320">:=</span>&nbsp;<span class="ident" id="6538323">buf</span><span class="op" id="6538326">.</span><span class="ident" id="6538327">String</span><span class="op" id="6538333">(</span><span class="op" id="6538334">)</span><span class="op" id="6538335">;</span>&nbsp;<span class="ident" id="6538337">s</span>&nbsp;<span class="op" id="6538339">!=</span>&nbsp;<span class="ident" id="6538342">tt</span><span class="op" id="6538344">.</span><span class="ident" id="6538345">indent</span>&nbsp;<span class="op" id="6538352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538357">t</span><span class="op" id="6538358">.</span><span class="ident" id="6538359">Errorf</span><span class="op" id="6538365">(</span><span class="string" id="6538366">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6538400">,</span>&nbsp;<span class="ident" id="6538402">tt</span><span class="op" id="6538404">.</span><span class="ident" id="6538405">indent</span><span class="op" id="6538411">,</span>&nbsp;<span class="ident" id="6538413">s</span><span class="op" id="6538414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538423">buf</span><span class="op" id="6538426">.</span><span class="ident" id="6538427">Reset</span><span class="op" id="6538432">(</span><span class="op" id="6538433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538437">if</span>&nbsp;<span class="ident" id="6538440">err</span>&nbsp;<span class="op" id="6538444">:=</span>&nbsp;<span class="ident" id="6538447">Indent</span><span class="op" id="6538453">(</span><span class="op" id="6538454">&amp;</span><span class="ident" id="6538455">buf</span><span class="op" id="6538458">,</span>&nbsp;<span class="op" id="6538460">[</span><span class="op" id="6538461">]</span><span class="builtintype" id="6538462">byte</span><span class="op" id="6538466">(</span><span class="ident" id="6538467">tt</span><span class="op" id="6538469">.</span><span class="ident" id="6538470">compact</span><span class="op" id="6538477">)</span><span class="op" id="6538478">,</span>&nbsp;<span class="string" id="6538480">&#34;&#34;</span><span class="op" id="6538482">,</span>&nbsp;<span class="string" id="6538484">&#34;\t&#34;</span><span class="op" id="6538488">)</span><span class="op" id="6538489">;</span>&nbsp;<span class="ident" id="6538491">err</span>&nbsp;<span class="op" id="6538495">!=</span>&nbsp;<span class="ident" id="6538498">nil</span>&nbsp;<span class="op" id="6538502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538507">t</span><span class="op" id="6538508">.</span><span class="ident" id="6538509">Errorf</span><span class="op" id="6538515">(</span><span class="string" id="6538516">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6538533">,</span>&nbsp;<span class="ident" id="6538535">tt</span><span class="op" id="6538537">.</span><span class="ident" id="6538538">compact</span><span class="op" id="6538545">,</span>&nbsp;<span class="ident" id="6538547">err</span><span class="op" id="6538550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538555">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538566">}</span>&nbsp;<span class="keyword" id="6538568">else</span>&nbsp;<span class="keyword" id="6538573">if</span>&nbsp;<span class="ident" id="6538576">s</span>&nbsp;<span class="op" id="6538578">:=</span>&nbsp;<span class="ident" id="6538581">buf</span><span class="op" id="6538584">.</span><span class="ident" id="6538585">String</span><span class="op" id="6538591">(</span><span class="op" id="6538592">)</span><span class="op" id="6538593">;</span>&nbsp;<span class="ident" id="6538595">s</span>&nbsp;<span class="op" id="6538597">!=</span>&nbsp;<span class="ident" id="6538600">tt</span><span class="op" id="6538602">.</span><span class="ident" id="6538603">indent</span>&nbsp;<span class="op" id="6538610">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538615">t</span><span class="op" id="6538616">.</span><span class="ident" id="6538617">Errorf</span><span class="op" id="6538623">(</span><span class="string" id="6538624">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6538653">,</span>&nbsp;<span class="ident" id="6538655">tt</span><span class="op" id="6538657">.</span><span class="ident" id="6538658">compact</span><span class="op" id="6538665">,</span>&nbsp;<span class="ident" id="6538667">s</span><span class="op" id="6538668">,</span>&nbsp;<span class="ident" id="6538670">tt</span><span class="op" id="6538672">.</span><span class="ident" id="6538673">indent</span><span class="op" id="6538679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538686">}</span><br>
<span class="lineno"></span><span class="op" id="6538688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6538691">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6538730">func</span>&nbsp;<span class="ident" id="6538735">TestCompactBig</span><span class="op" id="6538749">(</span><span class="ident" id="6538750">t</span>&nbsp;<span class="op" id="6538752">*</span><span class="ident" id="6538753">testing</span><span class="op" id="6538760">.</span><span class="ident" id="6538761">T</span><span class="op" id="6538762">)</span>&nbsp;<span class="op" id="6538764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538767">initBig</span><span class="op" id="6538774">(</span><span class="op" id="6538775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538778">var</span>&nbsp;<span class="ident" id="6538782">buf</span>&nbsp;<span class="ident" id="6538786">bytes</span><span class="op" id="6538791">.</span><span class="ident" id="6538792">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538800">if</span>&nbsp;<span class="ident" id="6538803">err</span>&nbsp;<span class="op" id="6538807">:=</span>&nbsp;<span class="ident" id="6538810">Compact</span><span class="op" id="6538817">(</span><span class="op" id="6538818">&amp;</span><span class="ident" id="6538819">buf</span><span class="op" id="6538822">,</span>&nbsp;<span class="ident" id="6538824">jsonBig</span><span class="op" id="6538831">)</span><span class="op" id="6538832">;</span>&nbsp;<span class="ident" id="6538834">err</span>&nbsp;<span class="op" id="6538838">!=</span>&nbsp;<span class="ident" id="6538841">nil</span>&nbsp;<span class="op" id="6538845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538849">t</span><span class="op" id="6538850">.</span><span class="ident" id="6538851">Fatalf</span><span class="op" id="6538857">(</span><span class="string" id="6538858">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6538871">,</span>&nbsp;<span class="ident" id="6538873">err</span><span class="op" id="6538876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6538879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538882">b</span>&nbsp;<span class="op" id="6538884">:=</span>&nbsp;<span class="ident" id="6538887">buf</span><span class="op" id="6538890">.</span><span class="ident" id="6538891">Bytes</span><span class="op" id="6538896">(</span><span class="op" id="6538897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538900">if</span>&nbsp;<span class="op" id="6538903">!</span><span class="ident" id="6538904">bytes</span><span class="op" id="6538909">.</span><span class="ident" id="6538910">Equal</span><span class="op" id="6538915">(</span><span class="ident" id="6538916">b</span><span class="op" id="6538917">,</span>&nbsp;<span class="ident" id="6538919">jsonBig</span><span class="op" id="6538926">)</span>&nbsp;<span class="op" id="6538928">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538932">t</span><span class="op" id="6538933">.</span><span class="ident" id="6538934">Error</span><span class="op" id="6538939">(</span><span class="string" id="6538940">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6538969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6538973">diff</span><span class="op" id="6538977">(</span><span class="ident" id="6538978">t</span><span class="op" id="6538979">,</span>&nbsp;<span class="ident" id="6538981">b</span><span class="op" id="6538982">,</span>&nbsp;<span class="ident" id="6538984">jsonBig</span><span class="op" id="6538991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6538995">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539003">}</span><br>
<span class="lineno"></span><span class="op" id="6539005">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="6539008">func</span>&nbsp;<span class="ident" id="6539013">TestIndentBig</span><span class="op" id="6539026">(</span><span class="ident" id="6539027">t</span>&nbsp;<span class="op" id="6539029">*</span><span class="ident" id="6539030">testing</span><span class="op" id="6539037">.</span><span class="ident" id="6539038">T</span><span class="op" id="6539039">)</span>&nbsp;<span class="op" id="6539041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539044">initBig</span><span class="op" id="6539051">(</span><span class="op" id="6539052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539055">var</span>&nbsp;<span class="ident" id="6539059">buf</span>&nbsp;<span class="ident" id="6539063">bytes</span><span class="op" id="6539068">.</span><span class="ident" id="6539069">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539077">if</span>&nbsp;<span class="ident" id="6539080">err</span>&nbsp;<span class="op" id="6539084">:=</span>&nbsp;<span class="ident" id="6539087">Indent</span><span class="op" id="6539093">(</span><span class="op" id="6539094">&amp;</span><span class="ident" id="6539095">buf</span><span class="op" id="6539098">,</span>&nbsp;<span class="ident" id="6539100">jsonBig</span><span class="op" id="6539107">,</span>&nbsp;<span class="string" id="6539109">&#34;&#34;</span><span class="op" id="6539111">,</span>&nbsp;<span class="string" id="6539113">&#34;\t&#34;</span><span class="op" id="6539117">)</span><span class="op" id="6539118">;</span>&nbsp;<span class="ident" id="6539120">err</span>&nbsp;<span class="op" id="6539124">!=</span>&nbsp;<span class="ident" id="6539127">nil</span>&nbsp;<span class="op" id="6539131">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539135">t</span><span class="op" id="6539136">.</span><span class="ident" id="6539137">Fatalf</span><span class="op" id="6539143">(</span><span class="string" id="6539144">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="6539157">,</span>&nbsp;<span class="ident" id="6539159">err</span><span class="op" id="6539162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539168">b</span>&nbsp;<span class="op" id="6539170">:=</span>&nbsp;<span class="ident" id="6539173">buf</span><span class="op" id="6539176">.</span><span class="ident" id="6539177">Bytes</span><span class="op" id="6539182">(</span><span class="op" id="6539183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539186">if</span>&nbsp;<span class="builtinfunc" id="6539189">len</span><span class="op" id="6539192">(</span><span class="ident" id="6539193">b</span><span class="op" id="6539194">)</span>&nbsp;<span class="op" id="6539196">==</span>&nbsp;<span class="builtinfunc" id="6539199">len</span><span class="op" id="6539202">(</span><span class="ident" id="6539203">jsonBig</span><span class="op" id="6539210">)</span>&nbsp;<span class="op" id="6539212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6539216">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6539265">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539302">t</span><span class="op" id="6539303">.</span><span class="ident" id="6539304">Fatalf</span><span class="op" id="6539310">(</span><span class="string" id="6539311">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="6539347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6539354">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539379">var</span>&nbsp;<span class="ident" id="6539383">buf1</span>&nbsp;<span class="ident" id="6539388">bytes</span><span class="op" id="6539393">.</span><span class="ident" id="6539394">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539402">if</span>&nbsp;<span class="ident" id="6539405">err</span>&nbsp;<span class="op" id="6539409">:=</span>&nbsp;<span class="ident" id="6539412">Indent</span><span class="op" id="6539418">(</span><span class="op" id="6539419">&amp;</span><span class="ident" id="6539420">buf1</span><span class="op" id="6539424">,</span>&nbsp;<span class="ident" id="6539426">b</span><span class="op" id="6539427">,</span>&nbsp;<span class="string" id="6539429">&#34;&#34;</span><span class="op" id="6539431">,</span>&nbsp;<span class="string" id="6539433">&#34;\t&#34;</span><span class="op" id="6539437">)</span><span class="op" id="6539438">;</span>&nbsp;<span class="ident" id="6539440">err</span>&nbsp;<span class="op" id="6539444">!=</span>&nbsp;<span class="ident" id="6539447">nil</span>&nbsp;<span class="op" id="6539451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539455">t</span><span class="op" id="6539456">.</span><span class="ident" id="6539457">Fatalf</span><span class="op" id="6539463">(</span><span class="string" id="6539464">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="6539477">,</span>&nbsp;<span class="ident" id="6539479">err</span><span class="op" id="6539482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539488">b1</span>&nbsp;<span class="op" id="6539491">:=</span>&nbsp;<span class="ident" id="6539494">buf1</span><span class="op" id="6539498">.</span><span class="ident" id="6539499">Bytes</span><span class="op" id="6539504">(</span><span class="op" id="6539505">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539508">if</span>&nbsp;<span class="op" id="6539511">!</span><span class="ident" id="6539512">bytes</span><span class="op" id="6539517">.</span><span class="ident" id="6539518">Equal</span><span class="op" id="6539523">(</span><span class="ident" id="6539524">b1</span><span class="op" id="6539526">,</span>&nbsp;<span class="ident" id="6539528">b</span><span class="op" id="6539529">)</span>&nbsp;<span class="op" id="6539531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539535">t</span><span class="op" id="6539536">.</span><span class="ident" id="6539537">Error</span><span class="op" id="6539542">(</span><span class="string" id="6539543">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="6539587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539591">diff</span><span class="op" id="6539595">(</span><span class="ident" id="6539596">t</span><span class="op" id="6539597">,</span>&nbsp;<span class="ident" id="6539599">b1</span><span class="op" id="6539601">,</span>&nbsp;<span class="ident" id="6539603">b</span><span class="op" id="6539604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539608">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539616">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6539620">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539652">buf1</span><span class="op" id="6539656">.</span><span class="ident" id="6539657">Reset</span><span class="op" id="6539662">(</span><span class="op" id="6539663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539666">if</span>&nbsp;<span class="ident" id="6539669">err</span>&nbsp;<span class="op" id="6539673">:=</span>&nbsp;<span class="ident" id="6539676">Compact</span><span class="op" id="6539683">(</span><span class="op" id="6539684">&amp;</span><span class="ident" id="6539685">buf1</span><span class="op" id="6539689">,</span>&nbsp;<span class="ident" id="6539691">b</span><span class="op" id="6539692">)</span><span class="op" id="6539693">;</span>&nbsp;<span class="ident" id="6539695">err</span>&nbsp;<span class="op" id="6539699">!=</span>&nbsp;<span class="ident" id="6539702">nil</span>&nbsp;<span class="op" id="6539706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539710">t</span><span class="op" id="6539711">.</span><span class="ident" id="6539712">Fatalf</span><span class="op" id="6539718">(</span><span class="string" id="6539719">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6539732">,</span>&nbsp;<span class="ident" id="6539734">err</span><span class="op" id="6539737">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539743">b1</span>&nbsp;<span class="op" id="6539746">=</span>&nbsp;<span class="ident" id="6539748">buf1</span><span class="op" id="6539752">.</span><span class="ident" id="6539753">Bytes</span><span class="op" id="6539758">(</span><span class="op" id="6539759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539762">if</span>&nbsp;<span class="op" id="6539765">!</span><span class="ident" id="6539766">bytes</span><span class="op" id="6539771">.</span><span class="ident" id="6539772">Equal</span><span class="op" id="6539777">(</span><span class="ident" id="6539778">b1</span><span class="op" id="6539780">,</span>&nbsp;<span class="ident" id="6539782">jsonBig</span><span class="op" id="6539789">)</span>&nbsp;<span class="op" id="6539791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539795">t</span><span class="op" id="6539796">.</span><span class="ident" id="6539797">Error</span><span class="op" id="6539802">(</span><span class="string" id="6539803">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6539840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539844">diff</span><span class="op" id="6539848">(</span><span class="ident" id="6539849">t</span><span class="op" id="6539850">,</span>&nbsp;<span class="ident" id="6539852">b1</span><span class="op" id="6539854">,</span>&nbsp;<span class="ident" id="6539856">jsonBig</span><span class="op" id="6539863">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6539867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539875">}</span><br>
<span class="lineno"></span><span class="op" id="6539877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539880">type</span>&nbsp;<span class="ident" id="6539885">indentErrorTest</span>&nbsp;<span class="keyword" id="6539901">struct</span>&nbsp;<span class="op" id="6539908">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539911">in</span>&nbsp;&nbsp;<span class="builtintype" id="6539915">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6539923">err</span>&nbsp;<span class="builtintype" id="6539927">error</span><br>
<span class="lineno"></span><span class="op" id="6539933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539936">var</span>&nbsp;<span class="ident" id="6539940">indentErrorTests</span>&nbsp;<span class="op" id="6539957">=</span>&nbsp;<span class="op" id="6539959">[</span><span class="op" id="6539960">]</span><span class="ident" id="6539961">indentErrorTest</span><span class="op" id="6539976">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6539979">{</span><span class="string" id="6539980">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="6539999">,</span>&nbsp;<span class="op" id="6540001">&amp;</span><span class="ident" id="6540002">SyntaxError</span><span class="op" id="6540013">{</span><span class="string" id="6540014">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="6540054">,</span>&nbsp;<span class="num" id="6540056">17</span><span class="op" id="6540058">}</span><span class="op" id="6540059">}</span><span class="op" id="6540060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540063">{</span><span class="string" id="6540064">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="6540089">,</span>&nbsp;<span class="op" id="6540091">&amp;</span><span class="ident" id="6540092">SyntaxError</span><span class="op" id="6540103">{</span><span class="string" id="6540104">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="6540156">,</span>&nbsp;<span class="num" id="6540158">13</span><span class="op" id="6540160">}</span><span class="op" id="6540161">}</span><span class="op" id="6540162">,</span><br>
<span class="lineno"></span><span class="op" id="6540164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540167">func</span>&nbsp;<span class="ident" id="6540172">TestIndentErrors</span><span class="op" id="6540188">(</span><span class="ident" id="6540189">t</span>&nbsp;<span class="op" id="6540191">*</span><span class="ident" id="6540192">testing</span><span class="op" id="6540199">.</span><span class="ident" id="6540200">T</span><span class="op" id="6540201">)</span>&nbsp;<span class="op" id="6540203">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540206">for</span>&nbsp;<span class="ident" id="6540210">i</span><span class="op" id="6540211">,</span>&nbsp;<span class="ident" id="6540213">tt</span>&nbsp;<span class="op" id="6540216">:=</span>&nbsp;<span class="keyword" id="6540219">range</span>&nbsp;<span class="ident" id="6540225">indentErrorTests</span>&nbsp;<span class="op" id="6540242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540246">slice</span>&nbsp;<span class="op" id="6540252">:=</span>&nbsp;<span class="builtinfunc" id="6540255">make</span><span class="op" id="6540259">(</span><span class="op" id="6540260">[</span><span class="op" id="6540261">]</span><span class="builtintype" id="6540262">uint8</span><span class="op" id="6540267">,</span>&nbsp;<span class="num" id="6540269">0</span><span class="op" id="6540270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540274">buf</span>&nbsp;<span class="op" id="6540278">:=</span>&nbsp;<span class="ident" id="6540281">bytes</span><span class="op" id="6540286">.</span><span class="ident" id="6540287">NewBuffer</span><span class="op" id="6540296">(</span><span class="ident" id="6540297">slice</span><span class="op" id="6540302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540306">if</span>&nbsp;<span class="ident" id="6540309">err</span>&nbsp;<span class="op" id="6540313">:=</span>&nbsp;<span class="ident" id="6540316">Indent</span><span class="op" id="6540322">(</span><span class="ident" id="6540323">buf</span><span class="op" id="6540326">,</span>&nbsp;<span class="op" id="6540328">[</span><span class="op" id="6540329">]</span><span class="builtintype" id="6540330">uint8</span><span class="op" id="6540335">(</span><span class="ident" id="6540336">tt</span><span class="op" id="6540338">.</span><span class="ident" id="6540339">in</span><span class="op" id="6540341">)</span><span class="op" id="6540342">,</span>&nbsp;<span class="string" id="6540344">&#34;&#34;</span><span class="op" id="6540346">,</span>&nbsp;<span class="string" id="6540348">&#34;&#34;</span><span class="op" id="6540350">)</span><span class="op" id="6540351">;</span>&nbsp;<span class="ident" id="6540353">err</span>&nbsp;<span class="op" id="6540357">!=</span>&nbsp;<span class="ident" id="6540360">nil</span>&nbsp;<span class="op" id="6540364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540369">if</span>&nbsp;<span class="op" id="6540372">!</span><span class="ident" id="6540373">reflect</span><span class="op" id="6540380">.</span><span class="ident" id="6540381">DeepEqual</span><span class="op" id="6540390">(</span><span class="ident" id="6540391">err</span><span class="op" id="6540394">,</span>&nbsp;<span class="ident" id="6540396">tt</span><span class="op" id="6540398">.</span><span class="ident" id="6540399">err</span><span class="op" id="6540402">)</span>&nbsp;<span class="op" id="6540404">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540410">t</span><span class="op" id="6540411">.</span><span class="ident" id="6540412">Errorf</span><span class="op" id="6540418">(</span><span class="string" id="6540419">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="6540437">,</span>&nbsp;<span class="ident" id="6540439">i</span><span class="op" id="6540440">,</span>&nbsp;<span class="ident" id="6540442">err</span><span class="op" id="6540445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540451">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540470">}</span><br>
<span class="lineno">180</span><span class="op" id="6540472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540475">func</span>&nbsp;<span class="ident" id="6540480">TestNextValueBig</span><span class="op" id="6540496">(</span><span class="ident" id="6540497">t</span>&nbsp;<span class="op" id="6540499">*</span><span class="ident" id="6540500">testing</span><span class="op" id="6540507">.</span><span class="ident" id="6540508">T</span><span class="op" id="6540509">)</span>&nbsp;<span class="op" id="6540511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540514">initBig</span><span class="op" id="6540521">(</span><span class="op" id="6540522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540525">var</span>&nbsp;<span class="ident" id="6540529">scan</span>&nbsp;<span class="ident" id="6540534">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540543">item</span><span class="op" id="6540547">,</span>&nbsp;<span class="ident" id="6540549">rest</span><span class="op" id="6540553">,</span>&nbsp;<span class="ident" id="6540555">err</span>&nbsp;<span class="op" id="6540559">:=</span>&nbsp;<span class="ident" id="6540562">nextValue</span><span class="op" id="6540571">(</span><span class="ident" id="6540572">jsonBig</span><span class="op" id="6540579">,</span>&nbsp;<span class="op" id="6540581">&amp;</span><span class="ident" id="6540582">scan</span><span class="op" id="6540586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540589">if</span>&nbsp;<span class="ident" id="6540592">err</span>&nbsp;<span class="op" id="6540596">!=</span>&nbsp;<span class="ident" id="6540599">nil</span>&nbsp;<span class="op" id="6540603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540607">t</span><span class="op" id="6540608">.</span><span class="ident" id="6540609">Fatalf</span><span class="op" id="6540615">(</span><span class="string" id="6540616">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="6540631">,</span>&nbsp;<span class="ident" id="6540633">err</span><span class="op" id="6540636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540642">if</span>&nbsp;<span class="builtinfunc" id="6540645">len</span><span class="op" id="6540648">(</span><span class="ident" id="6540649">item</span><span class="op" id="6540653">)</span>&nbsp;<span class="op" id="6540655">!=</span>&nbsp;<span class="builtinfunc" id="6540658">len</span><span class="op" id="6540661">(</span><span class="ident" id="6540662">jsonBig</span><span class="op" id="6540669">)</span>&nbsp;<span class="op" id="6540671">||</span>&nbsp;<span class="op" id="6540674">&amp;</span><span class="ident" id="6540675">item</span><span class="op" id="6540679">[</span><span class="num" id="6540680">0</span><span class="op" id="6540681">]</span>&nbsp;<span class="op" id="6540683">!=</span>&nbsp;<span class="op" id="6540686">&amp;</span><span class="ident" id="6540687">jsonBig</span><span class="op" id="6540694">[</span><span class="num" id="6540695">0</span><span class="op" id="6540696">]</span>&nbsp;<span class="op" id="6540698">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540702">t</span><span class="op" id="6540703">.</span><span class="ident" id="6540704">Errorf</span><span class="op" id="6540710">(</span><span class="string" id="6540711">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6540732">,</span>&nbsp;<span class="builtinfunc" id="6540734">len</span><span class="op" id="6540737">(</span><span class="ident" id="6540738">item</span><span class="op" id="6540742">)</span><span class="op" id="6540743">,</span>&nbsp;<span class="builtinfunc" id="6540745">len</span><span class="op" id="6540748">(</span><span class="ident" id="6540749">jsonBig</span><span class="op" id="6540756">)</span><span class="op" id="6540757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540763">if</span>&nbsp;<span class="builtinfunc" id="6540766">len</span><span class="op" id="6540769">(</span><span class="ident" id="6540770">rest</span><span class="op" id="6540774">)</span>&nbsp;<span class="op" id="6540776">!=</span>&nbsp;<span class="num" id="6540779">0</span>&nbsp;<span class="op" id="6540781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540785">t</span><span class="op" id="6540786">.</span><span class="ident" id="6540787">Errorf</span><span class="op" id="6540793">(</span><span class="string" id="6540794">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6540812">,</span>&nbsp;<span class="builtinfunc" id="6540814">len</span><span class="op" id="6540817">(</span><span class="ident" id="6540818">rest</span><span class="op" id="6540822">)</span><span class="op" id="6540823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540826">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540830">item</span><span class="op" id="6540834">,</span>&nbsp;<span class="ident" id="6540836">rest</span><span class="op" id="6540840">,</span>&nbsp;<span class="ident" id="6540842">err</span>&nbsp;<span class="op" id="6540846">=</span>&nbsp;<span class="ident" id="6540848">nextValue</span><span class="op" id="6540857">(</span><span class="builtinfunc" id="6540858">append</span><span class="op" id="6540864">(</span><span class="ident" id="6540865">jsonBig</span><span class="op" id="6540872">,</span>&nbsp;<span class="string" id="6540874">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="6540887">...</span><span class="op" id="6540890">)</span><span class="op" id="6540891">,</span>&nbsp;<span class="op" id="6540893">&amp;</span><span class="ident" id="6540894">scan</span><span class="op" id="6540898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540901">if</span>&nbsp;<span class="ident" id="6540904">err</span>&nbsp;<span class="op" id="6540908">!=</span>&nbsp;<span class="ident" id="6540911">nil</span>&nbsp;<span class="op" id="6540915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540919">t</span><span class="op" id="6540920">.</span><span class="ident" id="6540921">Fatalf</span><span class="op" id="6540927">(</span><span class="string" id="6540928">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="6540949">,</span>&nbsp;<span class="ident" id="6540951">err</span><span class="op" id="6540954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540957">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540960">if</span>&nbsp;<span class="builtinfunc" id="6540963">len</span><span class="op" id="6540966">(</span><span class="ident" id="6540967">item</span><span class="op" id="6540971">)</span>&nbsp;<span class="op" id="6540973">!=</span>&nbsp;<span class="builtinfunc" id="6540976">len</span><span class="op" id="6540979">(</span><span class="ident" id="6540980">jsonBig</span><span class="op" id="6540987">)</span>&nbsp;<span class="op" id="6540989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540993">t</span><span class="op" id="6540994">.</span><span class="ident" id="6540995">Errorf</span><span class="op" id="6541001">(</span><span class="string" id="6541002">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6541023">,</span>&nbsp;<span class="builtinfunc" id="6541025">len</span><span class="op" id="6541028">(</span><span class="ident" id="6541029">item</span><span class="op" id="6541033">)</span><span class="op" id="6541034">,</span>&nbsp;<span class="builtinfunc" id="6541036">len</span><span class="op" id="6541039">(</span><span class="ident" id="6541040">jsonBig</span><span class="op" id="6541047">)</span><span class="op" id="6541048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541054">if</span>&nbsp;<span class="builtintype" id="6541057">string</span><span class="op" id="6541063">(</span><span class="ident" id="6541064">rest</span><span class="op" id="6541068">)</span>&nbsp;<span class="op" id="6541070">!=</span>&nbsp;<span class="string" id="6541073">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="6541087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541091">t</span><span class="op" id="6541092">.</span><span class="ident" id="6541093">Errorf</span><span class="op" id="6541099">(</span><span class="string" id="6541100">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6541118">,</span>&nbsp;<span class="builtinfunc" id="6541120">len</span><span class="op" id="6541123">(</span><span class="ident" id="6541124">rest</span><span class="op" id="6541128">)</span><span class="op" id="6541129">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541132">}</span><br>
<span class="lineno"></span><span class="op" id="6541134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541137">var</span>&nbsp;<span class="ident" id="6541141">benchScan</span>&nbsp;<span class="ident" id="6541151">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="6541160">func</span>&nbsp;<span class="ident" id="6541165">BenchmarkSkipValue</span><span class="op" id="6541183">(</span><span class="ident" id="6541184">b</span>&nbsp;<span class="op" id="6541186">*</span><span class="ident" id="6541187">testing</span><span class="op" id="6541194">.</span><span class="ident" id="6541195">B</span><span class="op" id="6541196">)</span>&nbsp;<span class="op" id="6541198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541201">initBig</span><span class="op" id="6541208">(</span><span class="op" id="6541209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541212">for</span>&nbsp;<span class="ident" id="6541216">i</span>&nbsp;<span class="op" id="6541218">:=</span>&nbsp;<span class="num" id="6541221">0</span><span class="op" id="6541222">;</span>&nbsp;<span class="ident" id="6541224">i</span>&nbsp;<span class="op" id="6541226">&lt;</span>&nbsp;<span class="ident" id="6541228">b</span><span class="op" id="6541229">.</span><span class="ident" id="6541230">N</span><span class="op" id="6541231">;</span>&nbsp;<span class="ident" id="6541233">i</span><span class="op" id="6541234">++</span>&nbsp;<span class="op" id="6541237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541241">nextValue</span><span class="op" id="6541250">(</span><span class="ident" id="6541251">jsonBig</span><span class="op" id="6541258">,</span>&nbsp;<span class="op" id="6541260">&amp;</span><span class="ident" id="6541261">benchScan</span><span class="op" id="6541270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541273">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541276">b</span><span class="op" id="6541277">.</span><span class="ident" id="6541278">SetBytes</span><span class="op" id="6541286">(</span><span class="ident" id="6541287">int64</span><span class="op" id="6541292">(</span><span class="builtinfunc" id="6541293">len</span><span class="op" id="6541296">(</span><span class="ident" id="6541297">jsonBig</span><span class="op" id="6541304">)</span><span class="op" id="6541305">)</span><span class="op" id="6541306">)</span><br>
<span class="lineno"></span><span class="op" id="6541308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541311">func</span>&nbsp;<span class="ident" id="6541316">diff</span><span class="op" id="6541320">(</span><span class="ident" id="6541321">t</span>&nbsp;<span class="op" id="6541323">*</span><span class="ident" id="6541324">testing</span><span class="op" id="6541331">.</span><span class="ident" id="6541332">T</span><span class="op" id="6541333">,</span>&nbsp;<span class="ident" id="6541335">a</span><span class="op" id="6541336">,</span>&nbsp;<span class="ident" id="6541338">b</span>&nbsp;<span class="op" id="6541340">[</span><span class="op" id="6541341">]</span><span class="builtintype" id="6541342">byte</span><span class="op" id="6541346">)</span>&nbsp;<span class="op" id="6541348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541351">for</span>&nbsp;<span class="ident" id="6541355">i</span>&nbsp;<span class="op" id="6541357">:=</span>&nbsp;<span class="num" id="6541360">0</span><span class="op" id="6541361">;</span>&nbsp;<span class="op" id="6541363">;</span>&nbsp;<span class="ident" id="6541365">i</span><span class="op" id="6541366">++</span>&nbsp;<span class="op" id="6541369">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541373">if</span>&nbsp;<span class="ident" id="6541376">i</span>&nbsp;<span class="op" id="6541378">&gt;=</span>&nbsp;<span class="builtinfunc" id="6541381">len</span><span class="op" id="6541384">(</span><span class="ident" id="6541385">a</span><span class="op" id="6541386">)</span>&nbsp;<span class="op" id="6541388">||</span>&nbsp;<span class="ident" id="6541391">i</span>&nbsp;<span class="op" id="6541393">&gt;=</span>&nbsp;<span class="builtinfunc" id="6541396">len</span><span class="op" id="6541399">(</span><span class="ident" id="6541400">b</span><span class="op" id="6541401">)</span>&nbsp;<span class="op" id="6541403">||</span>&nbsp;<span class="ident" id="6541406">a</span><span class="op" id="6541407">[</span><span class="ident" id="6541408">i</span><span class="op" id="6541409">]</span>&nbsp;<span class="op" id="6541411">!=</span>&nbsp;<span class="ident" id="6541414">b</span><span class="op" id="6541415">[</span><span class="ident" id="6541416">i</span><span class="op" id="6541417">]</span>&nbsp;<span class="op" id="6541419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541424">j</span>&nbsp;<span class="op" id="6541426">:=</span>&nbsp;<span class="ident" id="6541429">i</span>&nbsp;<span class="op" id="6541431">-</span>&nbsp;<span class="num" id="6541433">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541439">if</span>&nbsp;<span class="ident" id="6541442">j</span>&nbsp;<span class="op" id="6541444">&lt;</span>&nbsp;<span class="num" id="6541446">0</span>&nbsp;<span class="op" id="6541448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541454">j</span>&nbsp;<span class="op" id="6541456">=</span>&nbsp;<span class="num" id="6541458">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541463">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541468">t</span><span class="op" id="6541469">.</span><span class="ident" id="6541470">Errorf</span><span class="op" id="6541476">(</span><span class="string" id="6541477">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="6541510">,</span>&nbsp;<span class="ident" id="6541512">i</span><span class="op" id="6541513">,</span>&nbsp;<span class="ident" id="6541515">trim</span><span class="op" id="6541519">(</span><span class="ident" id="6541520">a</span><span class="op" id="6541521">[</span><span class="ident" id="6541522">j</span><span class="op" id="6541523">:</span><span class="op" id="6541524">]</span><span class="op" id="6541525">)</span><span class="op" id="6541526">,</span>&nbsp;<span class="ident" id="6541528">trim</span><span class="op" id="6541532">(</span><span class="ident" id="6541533">b</span><span class="op" id="6541534">[</span><span class="ident" id="6541535">j</span><span class="op" id="6541536">:</span><span class="op" id="6541537">]</span><span class="op" id="6541538">)</span><span class="op" id="6541539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541556">}</span><br>
<span class="lineno"></span><span class="op" id="6541558">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6541561">func</span>&nbsp;<span class="ident" id="6541566">trim</span><span class="op" id="6541570">(</span><span class="ident" id="6541571">b</span>&nbsp;<span class="op" id="6541573">[</span><span class="op" id="6541574">]</span><span class="builtintype" id="6541575">byte</span><span class="op" id="6541579">)</span>&nbsp;<span class="op" id="6541581">[</span><span class="op" id="6541582">]</span><span class="builtintype" id="6541583">byte</span>&nbsp;<span class="op" id="6541588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541591">if</span>&nbsp;<span class="builtinfunc" id="6541594">len</span><span class="op" id="6541597">(</span><span class="ident" id="6541598">b</span><span class="op" id="6541599">)</span>&nbsp;<span class="op" id="6541601">&gt;</span>&nbsp;<span class="num" id="6541603">20</span>&nbsp;<span class="op" id="6541606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541610">return</span>&nbsp;<span class="ident" id="6541617">b</span><span class="op" id="6541618">[</span><span class="num" id="6541619">0</span><span class="op" id="6541620">:</span><span class="num" id="6541621">20</span><span class="op" id="6541623">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541626">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541629">return</span>&nbsp;<span class="ident" id="6541636">b</span><br>
<span class="lineno"></span><span class="op" id="6541638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6541641">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6541676">var</span>&nbsp;<span class="ident" id="6541680">jsonBig</span>&nbsp;<span class="op" id="6541688">[</span><span class="op" id="6541689">]</span><span class="builtintype" id="6541690">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541696">func</span>&nbsp;<span class="ident" id="6541701">initBig</span><span class="op" id="6541708">(</span><span class="op" id="6541709">)</span>&nbsp;<span class="op" id="6541711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541714">n</span>&nbsp;<span class="op" id="6541716">:=</span>&nbsp;<span class="num" id="6541719">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541726">if</span>&nbsp;<span class="ident" id="6541729">testing</span><span class="op" id="6541736">.</span><span class="ident" id="6541737">Short</span><span class="op" id="6541742">(</span><span class="op" id="6541743">)</span>&nbsp;<span class="op" id="6541745">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541749">n</span>&nbsp;<span class="op" id="6541751">=</span>&nbsp;<span class="num" id="6541753">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541761">b</span><span class="op" id="6541762">,</span>&nbsp;<span class="ident" id="6541764">err</span>&nbsp;<span class="op" id="6541768">:=</span>&nbsp;<span class="ident" id="6541771">Marshal</span><span class="op" id="6541778">(</span><span class="ident" id="6541779">genValue</span><span class="op" id="6541787">(</span><span class="ident" id="6541788">n</span><span class="op" id="6541789">)</span><span class="op" id="6541790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541793">if</span>&nbsp;<span class="ident" id="6541796">err</span>&nbsp;<span class="op" id="6541800">!=</span>&nbsp;<span class="ident" id="6541803">nil</span>&nbsp;<span class="op" id="6541807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6541811">panic</span><span class="op" id="6541816">(</span><span class="ident" id="6541817">err</span><span class="op" id="6541820">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541826">jsonBig</span>&nbsp;<span class="op" id="6541834">=</span>&nbsp;<span class="ident" id="6541836">b</span><br>
<span class="lineno"></span><span class="op" id="6541838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541841">func</span>&nbsp;<span class="ident" id="6541846">genValue</span><span class="op" id="6541854">(</span><span class="ident" id="6541855">n</span>&nbsp;<span class="builtintype" id="6541857">int</span><span class="op" id="6541860">)</span>&nbsp;<span class="keyword" id="6541862">interface</span><span class="op" id="6541871">{</span><span class="op" id="6541872">}</span>&nbsp;<span class="op" id="6541874">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541877">if</span>&nbsp;<span class="ident" id="6541880">n</span>&nbsp;<span class="op" id="6541882">&gt;</span>&nbsp;<span class="num" id="6541884">1</span>&nbsp;<span class="op" id="6541886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541890">switch</span>&nbsp;<span class="ident" id="6541897">rand</span><span class="op" id="6541901">.</span><span class="ident" id="6541902">Intn</span><span class="op" id="6541906">(</span><span class="num" id="6541907">2</span><span class="op" id="6541908">)</span>&nbsp;<span class="op" id="6541910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541914">case</span>&nbsp;<span class="num" id="6541919">0</span><span class="op" id="6541920">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541925">return</span>&nbsp;<span class="ident" id="6541932">genArray</span><span class="op" id="6541940">(</span><span class="ident" id="6541941">n</span><span class="op" id="6541942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541946">case</span>&nbsp;<span class="num" id="6541951">1</span><span class="op" id="6541952">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541957">return</span>&nbsp;<span class="ident" id="6541964">genMap</span><span class="op" id="6541970">(</span><span class="ident" id="6541971">n</span><span class="op" id="6541972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541982">switch</span>&nbsp;<span class="ident" id="6541989">rand</span><span class="op" id="6541993">.</span><span class="ident" id="6541994">Intn</span><span class="op" id="6541998">(</span><span class="num" id="6541999">3</span><span class="op" id="6542000">)</span>&nbsp;<span class="op" id="6542002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542005">case</span>&nbsp;<span class="num" id="6542010">0</span><span class="op" id="6542011">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542015">return</span>&nbsp;<span class="ident" id="6542022">rand</span><span class="op" id="6542026">.</span><span class="ident" id="6542027">Intn</span><span class="op" id="6542031">(</span><span class="num" id="6542032">2</span><span class="op" id="6542033">)</span>&nbsp;<span class="op" id="6542035">==</span>&nbsp;<span class="num" id="6542038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542041">case</span>&nbsp;<span class="num" id="6542046">1</span><span class="op" id="6542047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542051">return</span>&nbsp;<span class="ident" id="6542058">rand</span><span class="op" id="6542062">.</span><span class="ident" id="6542063">NormFloat64</span><span class="op" id="6542074">(</span><span class="op" id="6542075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542078">case</span>&nbsp;<span class="num" id="6542083">2</span><span class="op" id="6542084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542088">return</span>&nbsp;<span class="ident" id="6542095">genString</span><span class="op" id="6542104">(</span><span class="num" id="6542105">30</span><span class="op" id="6542107">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6542113">panic</span><span class="op" id="6542118">(</span><span class="string" id="6542119">&#34;unreachable&#34;</span><span class="op" id="6542132">)</span><br>
<span class="lineno"></span><span class="op" id="6542134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542137">func</span>&nbsp;<span class="ident" id="6542142">genString</span><span class="op" id="6542151">(</span><span class="ident" id="6542152">stddev</span>&nbsp;<span class="builtintype" id="6542159">float64</span><span class="op" id="6542166">)</span>&nbsp;<span class="builtintype" id="6542168">string</span>&nbsp;<span class="op" id="6542175">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542178">n</span>&nbsp;<span class="op" id="6542180">:=</span>&nbsp;<span class="builtintype" id="6542183">int</span><span class="op" id="6542186">(</span><span class="ident" id="6542187">math</span><span class="op" id="6542191">.</span><span class="ident" id="6542192">Abs</span><span class="op" id="6542195">(</span><span class="ident" id="6542196">rand</span><span class="op" id="6542200">.</span><span class="ident" id="6542201">NormFloat64</span><span class="op" id="6542212">(</span><span class="op" id="6542213">)</span><span class="op" id="6542214">*</span><span class="ident" id="6542215">stddev</span>&nbsp;<span class="op" id="6542222">+</span>&nbsp;<span class="ident" id="6542224">stddev</span><span class="op" id="6542230">/</span><span class="num" id="6542231">2</span><span class="op" id="6542232">)</span><span class="op" id="6542233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542236">c</span>&nbsp;<span class="op" id="6542238">:=</span>&nbsp;<span class="builtinfunc" id="6542241">make</span><span class="op" id="6542245">(</span><span class="op" id="6542246">[</span><span class="op" id="6542247">]</span><span class="builtintype" id="6542248">rune</span><span class="op" id="6542252">,</span>&nbsp;<span class="ident" id="6542254">n</span><span class="op" id="6542255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542258">for</span>&nbsp;<span class="ident" id="6542262">i</span>&nbsp;<span class="op" id="6542264">:=</span>&nbsp;<span class="keyword" id="6542267">range</span>&nbsp;<span class="ident" id="6542273">c</span>&nbsp;<span class="op" id="6542275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542279">f</span>&nbsp;<span class="op" id="6542281">:=</span>&nbsp;<span class="ident" id="6542284">math</span><span class="op" id="6542288">.</span><span class="ident" id="6542289">Abs</span><span class="op" id="6542292">(</span><span class="ident" id="6542293">rand</span><span class="op" id="6542297">.</span><span class="ident" id="6542298">NormFloat64</span><span class="op" id="6542309">(</span><span class="op" id="6542310">)</span><span class="op" id="6542311">*</span><span class="num" id="6542312">64</span>&nbsp;<span class="op" id="6542315">+</span>&nbsp;<span class="num" id="6542317">32</span><span class="op" id="6542319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542323">if</span>&nbsp;<span class="ident" id="6542326">f</span>&nbsp;<span class="op" id="6542328">&gt;</span>&nbsp;<span class="num" id="6542330">0x10ffff</span>&nbsp;<span class="op" id="6542339">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542344">f</span>&nbsp;<span class="op" id="6542346">=</span>&nbsp;<span class="num" id="6542348">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542363">c</span><span class="op" id="6542364">[</span><span class="ident" id="6542365">i</span><span class="op" id="6542366">]</span>&nbsp;<span class="op" id="6542368">=</span>&nbsp;<span class="builtintype" id="6542370">rune</span><span class="op" id="6542374">(</span><span class="ident" id="6542375">f</span><span class="op" id="6542376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542382">return</span>&nbsp;<span class="builtintype" id="6542389">string</span><span class="op" id="6542395">(</span><span class="ident" id="6542396">c</span><span class="op" id="6542397">)</span><br>
<span class="lineno">285</span><span class="op" id="6542399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542402">func</span>&nbsp;<span class="ident" id="6542407">genArray</span><span class="op" id="6542415">(</span><span class="ident" id="6542416">n</span>&nbsp;<span class="builtintype" id="6542418">int</span><span class="op" id="6542421">)</span>&nbsp;<span class="op" id="6542423">[</span><span class="op" id="6542424">]</span><span class="keyword" id="6542425">interface</span><span class="op" id="6542434">{</span><span class="op" id="6542435">}</span>&nbsp;<span class="op" id="6542437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542440">f</span>&nbsp;<span class="op" id="6542442">:=</span>&nbsp;<span class="builtintype" id="6542445">int</span><span class="op" id="6542448">(</span><span class="ident" id="6542449">math</span><span class="op" id="6542453">.</span><span class="ident" id="6542454">Abs</span><span class="op" id="6542457">(</span><span class="ident" id="6542458">rand</span><span class="op" id="6542462">.</span><span class="ident" id="6542463">NormFloat64</span><span class="op" id="6542474">(</span><span class="op" id="6542475">)</span><span class="op" id="6542476">)</span>&nbsp;<span class="op" id="6542478">*</span>&nbsp;<span class="ident" id="6542480">math</span><span class="op" id="6542484">.</span><span class="ident" id="6542485">Min</span><span class="op" id="6542488">(</span><span class="num" id="6542489">10</span><span class="op" id="6542491">,</span>&nbsp;<span class="builtintype" id="6542493">float64</span><span class="op" id="6542500">(</span><span class="ident" id="6542501">n</span><span class="op" id="6542502">/</span><span class="num" id="6542503">2</span><span class="op" id="6542504">)</span><span class="op" id="6542505">)</span><span class="op" id="6542506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542509">if</span>&nbsp;<span class="ident" id="6542512">f</span>&nbsp;<span class="op" id="6542514">&gt;</span>&nbsp;<span class="ident" id="6542516">n</span>&nbsp;<span class="op" id="6542518">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542522">f</span>&nbsp;<span class="op" id="6542524">=</span>&nbsp;<span class="ident" id="6542526">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542532">if</span>&nbsp;<span class="ident" id="6542535">f</span>&nbsp;<span class="op" id="6542537">&lt;</span>&nbsp;<span class="num" id="6542539">1</span>&nbsp;<span class="op" id="6542541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542545">f</span>&nbsp;<span class="op" id="6542547">=</span>&nbsp;<span class="num" id="6542549">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542552">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542555">x</span>&nbsp;<span class="op" id="6542557">:=</span>&nbsp;<span class="builtinfunc" id="6542560">make</span><span class="op" id="6542564">(</span><span class="op" id="6542565">[</span><span class="op" id="6542566">]</span><span class="keyword" id="6542567">interface</span><span class="op" id="6542576">{</span><span class="op" id="6542577">}</span><span class="op" id="6542578">,</span>&nbsp;<span class="ident" id="6542580">f</span><span class="op" id="6542581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542584">for</span>&nbsp;<span class="ident" id="6542588">i</span>&nbsp;<span class="op" id="6542590">:=</span>&nbsp;<span class="keyword" id="6542593">range</span>&nbsp;<span class="ident" id="6542599">x</span>&nbsp;<span class="op" id="6542601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542605">x</span><span class="op" id="6542606">[</span><span class="ident" id="6542607">i</span><span class="op" id="6542608">]</span>&nbsp;<span class="op" id="6542610">=</span>&nbsp;<span class="ident" id="6542612">genValue</span><span class="op" id="6542620">(</span><span class="op" id="6542621">(</span><span class="op" id="6542622">(</span><span class="ident" id="6542623">i</span><span class="op" id="6542624">+</span><span class="num" id="6542625">1</span><span class="op" id="6542626">)</span><span class="op" id="6542627">*</span><span class="ident" id="6542628">n</span><span class="op" id="6542629">)</span><span class="op" id="6542630">/</span><span class="ident" id="6542631">f</span>&nbsp;<span class="op" id="6542633">-</span>&nbsp;<span class="op" id="6542635">(</span><span class="ident" id="6542636">i</span><span class="op" id="6542637">*</span><span class="ident" id="6542638">n</span><span class="op" id="6542639">)</span><span class="op" id="6542640">/</span><span class="ident" id="6542641">f</span><span class="op" id="6542642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542648">return</span>&nbsp;<span class="ident" id="6542655">x</span><br>
<span class="lineno">300</span><span class="op" id="6542657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542660">func</span>&nbsp;<span class="ident" id="6542665">genMap</span><span class="op" id="6542671">(</span><span class="ident" id="6542672">n</span>&nbsp;<span class="builtintype" id="6542674">int</span><span class="op" id="6542677">)</span>&nbsp;<span class="keyword" id="6542679">map</span><span class="op" id="6542682">[</span><span class="builtintype" id="6542683">string</span><span class="op" id="6542689">]</span><span class="keyword" id="6542690">interface</span><span class="op" id="6542699">{</span><span class="op" id="6542700">}</span>&nbsp;<span class="op" id="6542702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542705">f</span>&nbsp;<span class="op" id="6542707">:=</span>&nbsp;<span class="builtintype" id="6542710">int</span><span class="op" id="6542713">(</span><span class="ident" id="6542714">math</span><span class="op" id="6542718">.</span><span class="ident" id="6542719">Abs</span><span class="op" id="6542722">(</span><span class="ident" id="6542723">rand</span><span class="op" id="6542727">.</span><span class="ident" id="6542728">NormFloat64</span><span class="op" id="6542739">(</span><span class="op" id="6542740">)</span><span class="op" id="6542741">)</span>&nbsp;<span class="op" id="6542743">*</span>&nbsp;<span class="ident" id="6542745">math</span><span class="op" id="6542749">.</span><span class="ident" id="6542750">Min</span><span class="op" id="6542753">(</span><span class="num" id="6542754">10</span><span class="op" id="6542756">,</span>&nbsp;<span class="builtintype" id="6542758">float64</span><span class="op" id="6542765">(</span><span class="ident" id="6542766">n</span><span class="op" id="6542767">/</span><span class="num" id="6542768">2</span><span class="op" id="6542769">)</span><span class="op" id="6542770">)</span><span class="op" id="6542771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542774">if</span>&nbsp;<span class="ident" id="6542777">f</span>&nbsp;<span class="op" id="6542779">&gt;</span>&nbsp;<span class="ident" id="6542781">n</span>&nbsp;<span class="op" id="6542783">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542787">f</span>&nbsp;<span class="op" id="6542789">=</span>&nbsp;<span class="ident" id="6542791">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542797">if</span>&nbsp;<span class="ident" id="6542800">n</span>&nbsp;<span class="op" id="6542802">&gt;</span>&nbsp;<span class="num" id="6542804">0</span>&nbsp;<span class="op" id="6542806">&amp;&amp;</span>&nbsp;<span class="ident" id="6542809">f</span>&nbsp;<span class="op" id="6542811">==</span>&nbsp;<span class="num" id="6542814">0</span>&nbsp;<span class="op" id="6542816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542820">f</span>&nbsp;<span class="op" id="6542822">=</span>&nbsp;<span class="num" id="6542824">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542827">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542830">x</span>&nbsp;<span class="op" id="6542832">:=</span>&nbsp;<span class="builtinfunc" id="6542835">make</span><span class="op" id="6542839">(</span><span class="keyword" id="6542840">map</span><span class="op" id="6542843">[</span><span class="builtintype" id="6542844">string</span><span class="op" id="6542850">]</span><span class="keyword" id="6542851">interface</span><span class="op" id="6542860">{</span><span class="op" id="6542861">}</span><span class="op" id="6542862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542865">for</span>&nbsp;<span class="ident" id="6542869">i</span>&nbsp;<span class="op" id="6542871">:=</span>&nbsp;<span class="num" id="6542874">0</span><span class="op" id="6542875">;</span>&nbsp;<span class="ident" id="6542877">i</span>&nbsp;<span class="op" id="6542879">&lt;</span>&nbsp;<span class="ident" id="6542881">f</span><span class="op" id="6542882">;</span>&nbsp;<span class="ident" id="6542884">i</span><span class="op" id="6542885">++</span>&nbsp;<span class="op" id="6542888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542892">x</span><span class="op" id="6542893">[</span><span class="ident" id="6542894">genString</span><span class="op" id="6542903">(</span><span class="num" id="6542904">10</span><span class="op" id="6542906">)</span><span class="op" id="6542907">]</span>&nbsp;<span class="op" id="6542909">=</span>&nbsp;<span class="ident" id="6542911">genValue</span><span class="op" id="6542919">(</span><span class="op" id="6542920">(</span><span class="op" id="6542921">(</span><span class="ident" id="6542922">i</span><span class="op" id="6542923">+</span><span class="num" id="6542924">1</span><span class="op" id="6542925">)</span><span class="op" id="6542926">*</span><span class="ident" id="6542927">n</span><span class="op" id="6542928">)</span><span class="op" id="6542929">/</span><span class="ident" id="6542930">f</span>&nbsp;<span class="op" id="6542932">-</span>&nbsp;<span class="op" id="6542934">(</span><span class="ident" id="6542935">i</span><span class="op" id="6542936">*</span><span class="ident" id="6542937">n</span><span class="op" id="6542938">)</span><span class="op" id="6542939">/</span><span class="ident" id="6542940">f</span><span class="op" id="6542941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542947">return</span>&nbsp;<span class="ident" id="6542954">x</span><br>
<span class="lineno">315</span><span class="op" id="6542956">}</span>
</div>
</body>
</html>
