<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc64</h2>
<ul>
<li><a href="/gostd/hash/crc64/crc64.go.html" class="current">crc64.go</a></li>
<li><a href="/gostd/hash/crc64/crc64_test.go.html">crc64_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5861545">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5861600">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5861654">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5861705">//&nbsp;Package&nbsp;crc64&nbsp;implements&nbsp;the&nbsp;64-bit&nbsp;cyclic&nbsp;redundancy&nbsp;check,&nbsp;or&nbsp;CRC-64,</span><br>
<span class="lineno"></span><span class="comment" id="5861780">//&nbsp;checksum.&nbsp;See&nbsp;http://en.wikipedia.org/wiki/Cyclic_redundancy_check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5861854">//&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="5861870">package</span>&nbsp;<span class="ident" id="5861878">crc64</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5861885">import</span>&nbsp;<span class="string" id="5861892">&#34;hash&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5861900">//&nbsp;The&nbsp;size&nbsp;of&nbsp;a&nbsp;CRC-64&nbsp;checksum&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5861943">const</span>&nbsp;<span class="ident" id="5861949">Size</span>&nbsp;<span class="op" id="5861954">=</span>&nbsp;<span class="num" id="5861956">8</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5861959">//&nbsp;Predefined&nbsp;polynomials.</span><br>
<span class="lineno"></span><span class="keyword" id="5861986">const</span>&nbsp;<span class="op" id="5861992">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861995">//&nbsp;The&nbsp;ISO&nbsp;polynomial,&nbsp;defined&nbsp;in&nbsp;ISO&nbsp;3309&nbsp;and&nbsp;used&nbsp;in&nbsp;HDLC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862057">ISO</span>&nbsp;<span class="op" id="5862061">=</span>&nbsp;<span class="num" id="5862063">0xD800000000000000</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862084">//&nbsp;The&nbsp;ECMA&nbsp;polynomial,&nbsp;defined&nbsp;in&nbsp;ECMA&nbsp;182.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862130">ECMA</span>&nbsp;<span class="op" id="5862135">=</span>&nbsp;<span class="num" id="5862137">0xC96C5795D7870F42</span><br>
<span class="lineno"></span><span class="op" id="5862156">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5862159">//&nbsp;Table&nbsp;is&nbsp;a&nbsp;256-word&nbsp;table&nbsp;representing&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;efficient&nbsp;processing.</span><br>
<span class="lineno">25</span><span class="keyword" id="5862242">type</span>&nbsp;<span class="ident" id="5862247">Table</span>&nbsp;<span class="op" id="5862253">[</span><span class="num" id="5862254">256</span><span class="op" id="5862257">]</span><span class="ident" id="5862258">uint64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5862266">//&nbsp;MakeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="5862340">func</span>&nbsp;<span class="ident" id="5862345">MakeTable</span><span class="op" id="5862354">(</span><span class="ident" id="5862355">poly</span>&nbsp;<span class="ident" id="5862360">uint64</span><span class="op" id="5862366">)</span>&nbsp;<span class="op" id="5862368">*</span><span class="ident" id="5862369">Table</span>&nbsp;<span class="op" id="5862375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862378">t</span>&nbsp;<span class="op" id="5862380">:=</span>&nbsp;<span class="builtinfunc" id="5862383">new</span><span class="op" id="5862386">(</span><span class="ident" id="5862387">Table</span><span class="op" id="5862392">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862395">for</span>&nbsp;<span class="ident" id="5862399">i</span>&nbsp;<span class="op" id="5862401">:=</span>&nbsp;<span class="num" id="5862404">0</span><span class="op" id="5862405">;</span>&nbsp;<span class="ident" id="5862407">i</span>&nbsp;<span class="op" id="5862409">&lt;</span>&nbsp;<span class="num" id="5862411">256</span><span class="op" id="5862414">;</span>&nbsp;<span class="ident" id="5862416">i</span><span class="op" id="5862417">++</span>&nbsp;<span class="op" id="5862420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862424">crc</span>&nbsp;<span class="op" id="5862428">:=</span>&nbsp;<span class="ident" id="5862431">uint64</span><span class="op" id="5862437">(</span><span class="ident" id="5862438">i</span><span class="op" id="5862439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862443">for</span>&nbsp;<span class="ident" id="5862447">j</span>&nbsp;<span class="op" id="5862449">:=</span>&nbsp;<span class="num" id="5862452">0</span><span class="op" id="5862453">;</span>&nbsp;<span class="ident" id="5862455">j</span>&nbsp;<span class="op" id="5862457">&lt;</span>&nbsp;<span class="num" id="5862459">8</span><span class="op" id="5862460">;</span>&nbsp;<span class="ident" id="5862462">j</span><span class="op" id="5862463">++</span>&nbsp;<span class="op" id="5862466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862471">if</span>&nbsp;<span class="ident" id="5862474">crc</span><span class="op" id="5862477">&amp;</span><span class="num" id="5862478">1</span>&nbsp;<span class="op" id="5862480">==</span>&nbsp;<span class="num" id="5862483">1</span>&nbsp;<span class="op" id="5862485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862491">crc</span>&nbsp;<span class="op" id="5862495">=</span>&nbsp;<span class="op" id="5862497">(</span><span class="ident" id="5862498">crc</span>&nbsp;<span class="op" id="5862502">&gt;&gt;</span>&nbsp;<span class="num" id="5862505">1</span><span class="op" id="5862506">)</span>&nbsp;<span class="op" id="5862508">^</span>&nbsp;<span class="ident" id="5862510">poly</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862518">}</span>&nbsp;<span class="keyword" id="5862520">else</span>&nbsp;<span class="op" id="5862525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862531">crc</span>&nbsp;<span class="op" id="5862535">&gt;&gt;=</span>&nbsp;<span class="num" id="5862539">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862552">t</span><span class="op" id="5862553">[</span><span class="ident" id="5862554">i</span><span class="op" id="5862555">]</span>&nbsp;<span class="op" id="5862557">=</span>&nbsp;<span class="ident" id="5862559">crc</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862567">return</span>&nbsp;<span class="ident" id="5862574">t</span><br>
<span class="lineno"></span><span class="op" id="5862576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5862579">//&nbsp;digest&nbsp;represents&nbsp;the&nbsp;partial&nbsp;evaluation&nbsp;of&nbsp;a&nbsp;checksum.</span><br>
<span class="lineno">45</span><span class="keyword" id="5862638">type</span>&nbsp;<span class="ident" id="5862643">digest</span>&nbsp;<span class="keyword" id="5862650">struct</span>&nbsp;<span class="op" id="5862657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862660">crc</span>&nbsp;<span class="ident" id="5862664">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862672">tab</span>&nbsp;<span class="op" id="5862676">*</span><span class="ident" id="5862677">Table</span><br>
<span class="lineno"></span><span class="op" id="5862683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5862686">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash64&nbsp;computing&nbsp;the&nbsp;CRC-64&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="5862749">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="5862799">func</span>&nbsp;<span class="ident" id="5862804">New</span><span class="op" id="5862807">(</span><span class="ident" id="5862808">tab</span>&nbsp;<span class="op" id="5862812">*</span><span class="ident" id="5862813">Table</span><span class="op" id="5862818">)</span>&nbsp;<span class="ident" id="5862820">hash</span><span class="op" id="5862824">.</span><span class="ident" id="5862825">Hash64</span>&nbsp;<span class="op" id="5862832">{</span>&nbsp;<span class="keyword" id="5862834">return</span>&nbsp;<span class="op" id="5862841">&amp;</span><span class="ident" id="5862842">digest</span><span class="op" id="5862848">{</span><span class="num" id="5862849">0</span><span class="op" id="5862850">,</span>&nbsp;<span class="ident" id="5862852">tab</span><span class="op" id="5862855">}</span>&nbsp;<span class="op" id="5862857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5862860">func</span>&nbsp;<span class="op" id="5862865">(</span><span class="ident" id="5862866">d</span>&nbsp;<span class="op" id="5862868">*</span><span class="ident" id="5862869">digest</span><span class="op" id="5862875">)</span>&nbsp;<span class="ident" id="5862877">Size</span><span class="op" id="5862881">(</span><span class="op" id="5862882">)</span>&nbsp;<span class="builtintype" id="5862884">int</span>&nbsp;<span class="op" id="5862888">{</span>&nbsp;<span class="keyword" id="5862890">return</span>&nbsp;<span class="ident" id="5862897">Size</span>&nbsp;<span class="op" id="5862902">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5862905">func</span>&nbsp;<span class="op" id="5862910">(</span><span class="ident" id="5862911">d</span>&nbsp;<span class="op" id="5862913">*</span><span class="ident" id="5862914">digest</span><span class="op" id="5862920">)</span>&nbsp;<span class="ident" id="5862922">BlockSize</span><span class="op" id="5862931">(</span><span class="op" id="5862932">)</span>&nbsp;<span class="builtintype" id="5862934">int</span>&nbsp;<span class="op" id="5862938">{</span>&nbsp;<span class="keyword" id="5862940">return</span>&nbsp;<span class="num" id="5862947">1</span>&nbsp;<span class="op" id="5862949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5862952">func</span>&nbsp;<span class="op" id="5862957">(</span><span class="ident" id="5862958">d</span>&nbsp;<span class="op" id="5862960">*</span><span class="ident" id="5862961">digest</span><span class="op" id="5862967">)</span>&nbsp;<span class="ident" id="5862969">Reset</span><span class="op" id="5862974">(</span><span class="op" id="5862975">)</span>&nbsp;<span class="op" id="5862977">{</span>&nbsp;<span class="ident" id="5862979">d</span><span class="op" id="5862980">.</span><span class="ident" id="5862981">crc</span>&nbsp;<span class="op" id="5862985">=</span>&nbsp;<span class="num" id="5862987">0</span>&nbsp;<span class="op" id="5862989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5862992">func</span>&nbsp;<span class="ident" id="5862997">update</span><span class="op" id="5863003">(</span><span class="ident" id="5863004">crc</span>&nbsp;<span class="ident" id="5863008">uint64</span><span class="op" id="5863014">,</span>&nbsp;<span class="ident" id="5863016">tab</span>&nbsp;<span class="op" id="5863020">*</span><span class="ident" id="5863021">Table</span><span class="op" id="5863026">,</span>&nbsp;<span class="ident" id="5863028">p</span>&nbsp;<span class="op" id="5863030">[</span><span class="op" id="5863031">]</span><span class="builtintype" id="5863032">byte</span><span class="op" id="5863036">)</span>&nbsp;<span class="ident" id="5863038">uint64</span>&nbsp;<span class="op" id="5863045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863048">crc</span>&nbsp;<span class="op" id="5863052">=</span>&nbsp;<span class="op" id="5863054">^</span><span class="ident" id="5863055">crc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863060">for</span>&nbsp;<span class="ident" id="5863064">_</span><span class="op" id="5863065">,</span>&nbsp;<span class="ident" id="5863067">v</span>&nbsp;<span class="op" id="5863069">:=</span>&nbsp;<span class="keyword" id="5863072">range</span>&nbsp;<span class="ident" id="5863078">p</span>&nbsp;<span class="op" id="5863080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863084">crc</span>&nbsp;<span class="op" id="5863088">=</span>&nbsp;<span class="ident" id="5863090">tab</span><span class="op" id="5863093">[</span><span class="builtintype" id="5863094">byte</span><span class="op" id="5863098">(</span><span class="ident" id="5863099">crc</span><span class="op" id="5863102">)</span><span class="op" id="5863103">^</span><span class="ident" id="5863104">v</span><span class="op" id="5863105">]</span>&nbsp;<span class="op" id="5863107">^</span>&nbsp;<span class="op" id="5863109">(</span><span class="ident" id="5863110">crc</span>&nbsp;<span class="op" id="5863114">&gt;&gt;</span>&nbsp;<span class="num" id="5863117">8</span><span class="op" id="5863118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863121">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863124">return</span>&nbsp;<span class="op" id="5863131">^</span><span class="ident" id="5863132">crc</span><br>
<span class="lineno"></span><span class="op" id="5863136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5863139">//&nbsp;Update&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;adding&nbsp;the&nbsp;bytes&nbsp;in&nbsp;p&nbsp;to&nbsp;the&nbsp;crc.</span><br>
<span class="lineno"></span><span class="keyword" id="5863205">func</span>&nbsp;<span class="ident" id="5863210">Update</span><span class="op" id="5863216">(</span><span class="ident" id="5863217">crc</span>&nbsp;<span class="ident" id="5863221">uint64</span><span class="op" id="5863227">,</span>&nbsp;<span class="ident" id="5863229">tab</span>&nbsp;<span class="op" id="5863233">*</span><span class="ident" id="5863234">Table</span><span class="op" id="5863239">,</span>&nbsp;<span class="ident" id="5863241">p</span>&nbsp;<span class="op" id="5863243">[</span><span class="op" id="5863244">]</span><span class="builtintype" id="5863245">byte</span><span class="op" id="5863249">)</span>&nbsp;<span class="ident" id="5863251">uint64</span>&nbsp;<span class="op" id="5863258">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863261">return</span>&nbsp;<span class="ident" id="5863268">update</span><span class="op" id="5863274">(</span><span class="ident" id="5863275">crc</span><span class="op" id="5863278">,</span>&nbsp;<span class="ident" id="5863280">tab</span><span class="op" id="5863283">,</span>&nbsp;<span class="ident" id="5863285">p</span><span class="op" id="5863286">)</span><br>
<span class="lineno"></span><span class="op" id="5863288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5863291">func</span>&nbsp;<span class="op" id="5863296">(</span><span class="ident" id="5863297">d</span>&nbsp;<span class="op" id="5863299">*</span><span class="ident" id="5863300">digest</span><span class="op" id="5863306">)</span>&nbsp;<span class="ident" id="5863308">Write</span><span class="op" id="5863313">(</span><span class="ident" id="5863314">p</span>&nbsp;<span class="op" id="5863316">[</span><span class="op" id="5863317">]</span><span class="builtintype" id="5863318">byte</span><span class="op" id="5863322">)</span>&nbsp;<span class="op" id="5863324">(</span><span class="ident" id="5863325">n</span>&nbsp;<span class="builtintype" id="5863327">int</span><span class="op" id="5863330">,</span>&nbsp;<span class="ident" id="5863332">err</span>&nbsp;<span class="builtintype" id="5863336">error</span><span class="op" id="5863341">)</span>&nbsp;<span class="op" id="5863343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863346">d</span><span class="op" id="5863347">.</span><span class="ident" id="5863348">crc</span>&nbsp;<span class="op" id="5863352">=</span>&nbsp;<span class="ident" id="5863354">update</span><span class="op" id="5863360">(</span><span class="ident" id="5863361">d</span><span class="op" id="5863362">.</span><span class="ident" id="5863363">crc</span><span class="op" id="5863366">,</span>&nbsp;<span class="ident" id="5863368">d</span><span class="op" id="5863369">.</span><span class="ident" id="5863370">tab</span><span class="op" id="5863373">,</span>&nbsp;<span class="ident" id="5863375">p</span><span class="op" id="5863376">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863379">return</span>&nbsp;<span class="builtinfunc" id="5863386">len</span><span class="op" id="5863389">(</span><span class="ident" id="5863390">p</span><span class="op" id="5863391">)</span><span class="op" id="5863392">,</span>&nbsp;<span class="builtintype" id="5863394">nil</span><br>
<span class="lineno"></span><span class="op" id="5863398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5863401">func</span>&nbsp;<span class="op" id="5863406">(</span><span class="ident" id="5863407">d</span>&nbsp;<span class="op" id="5863409">*</span><span class="ident" id="5863410">digest</span><span class="op" id="5863416">)</span>&nbsp;<span class="ident" id="5863418">Sum64</span><span class="op" id="5863423">(</span><span class="op" id="5863424">)</span>&nbsp;<span class="ident" id="5863426">uint64</span>&nbsp;<span class="op" id="5863433">{</span>&nbsp;<span class="keyword" id="5863435">return</span>&nbsp;<span class="ident" id="5863442">d</span><span class="op" id="5863443">.</span><span class="ident" id="5863444">crc</span>&nbsp;<span class="op" id="5863448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="5863451">func</span>&nbsp;<span class="op" id="5863456">(</span><span class="ident" id="5863457">d</span>&nbsp;<span class="op" id="5863459">*</span><span class="ident" id="5863460">digest</span><span class="op" id="5863466">)</span>&nbsp;<span class="ident" id="5863468">Sum</span><span class="op" id="5863471">(</span><span class="ident" id="5863472">in</span>&nbsp;<span class="op" id="5863475">[</span><span class="op" id="5863476">]</span><span class="builtintype" id="5863477">byte</span><span class="op" id="5863481">)</span>&nbsp;<span class="op" id="5863483">[</span><span class="op" id="5863484">]</span><span class="builtintype" id="5863485">byte</span>&nbsp;<span class="op" id="5863490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863493">s</span>&nbsp;<span class="op" id="5863495">:=</span>&nbsp;<span class="ident" id="5863498">d</span><span class="op" id="5863499">.</span><span class="ident" id="5863500">Sum64</span><span class="op" id="5863505">(</span><span class="op" id="5863506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863509">return</span>&nbsp;<span class="builtinfunc" id="5863516">append</span><span class="op" id="5863522">(</span><span class="ident" id="5863523">in</span><span class="op" id="5863525">,</span>&nbsp;<span class="builtintype" id="5863527">byte</span><span class="op" id="5863531">(</span><span class="ident" id="5863532">s</span><span class="op" id="5863533">&gt;&gt;</span><span class="num" id="5863535">56</span><span class="op" id="5863537">)</span><span class="op" id="5863538">,</span>&nbsp;<span class="builtintype" id="5863540">byte</span><span class="op" id="5863544">(</span><span class="ident" id="5863545">s</span><span class="op" id="5863546">&gt;&gt;</span><span class="num" id="5863548">48</span><span class="op" id="5863550">)</span><span class="op" id="5863551">,</span>&nbsp;<span class="builtintype" id="5863553">byte</span><span class="op" id="5863557">(</span><span class="ident" id="5863558">s</span><span class="op" id="5863559">&gt;&gt;</span><span class="num" id="5863561">40</span><span class="op" id="5863563">)</span><span class="op" id="5863564">,</span>&nbsp;<span class="builtintype" id="5863566">byte</span><span class="op" id="5863570">(</span><span class="ident" id="5863571">s</span><span class="op" id="5863572">&gt;&gt;</span><span class="num" id="5863574">32</span><span class="op" id="5863576">)</span><span class="op" id="5863577">,</span>&nbsp;<span class="builtintype" id="5863579">byte</span><span class="op" id="5863583">(</span><span class="ident" id="5863584">s</span><span class="op" id="5863585">&gt;&gt;</span><span class="num" id="5863587">24</span><span class="op" id="5863589">)</span><span class="op" id="5863590">,</span>&nbsp;<span class="builtintype" id="5863592">byte</span><span class="op" id="5863596">(</span><span class="ident" id="5863597">s</span><span class="op" id="5863598">&gt;&gt;</span><span class="num" id="5863600">16</span><span class="op" id="5863602">)</span><span class="op" id="5863603">,</span>&nbsp;<span class="builtintype" id="5863605">byte</span><span class="op" id="5863609">(</span><span class="ident" id="5863610">s</span><span class="op" id="5863611">&gt;&gt;</span><span class="num" id="5863613">8</span><span class="op" id="5863614">)</span><span class="op" id="5863615">,</span>&nbsp;<span class="builtintype" id="5863617">byte</span><span class="op" id="5863621">(</span><span class="ident" id="5863622">s</span><span class="op" id="5863623">)</span><span class="op" id="5863624">)</span><br>
<span class="lineno"></span><span class="op" id="5863626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="5863629">//&nbsp;Checksum&nbsp;returns&nbsp;the&nbsp;CRC-64&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="5863677">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="5863727">func</span>&nbsp;<span class="ident" id="5863732">Checksum</span><span class="op" id="5863740">(</span><span class="ident" id="5863741">data</span>&nbsp;<span class="op" id="5863746">[</span><span class="op" id="5863747">]</span><span class="builtintype" id="5863748">byte</span><span class="op" id="5863752">,</span>&nbsp;<span class="ident" id="5863754">tab</span>&nbsp;<span class="op" id="5863758">*</span><span class="ident" id="5863759">Table</span><span class="op" id="5863764">)</span>&nbsp;<span class="ident" id="5863766">uint64</span>&nbsp;<span class="op" id="5863773">{</span>&nbsp;<span class="keyword" id="5863775">return</span>&nbsp;<span class="ident" id="5863782">update</span><span class="op" id="5863788">(</span><span class="num" id="5863789">0</span><span class="op" id="5863790">,</span>&nbsp;<span class="ident" id="5863792">tab</span><span class="op" id="5863795">,</span>&nbsp;<span class="ident" id="5863797">data</span><span class="op" id="5863801">)</span>&nbsp;<span class="op" id="5863803">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
