<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html" class="current">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8327986">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8328041">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8328095">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8328146">package</span>&nbsp;<span class="ident" id="8328154">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328162">import</span>&nbsp;<span class="op" id="8328169">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8328172">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8328181">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8328187">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8328197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328200">func</span>&nbsp;<span class="ident" id="8328205">testConstant</span><span class="op" id="8328217">(</span><span class="ident" id="8328218">t</span>&nbsp;<span class="op" id="8328220">*</span><span class="ident" id="8328221">testing</span><span class="op" id="8328228">.</span><span class="ident" id="8328229">T</span><span class="op" id="8328230">,</span>&nbsp;<span class="ident" id="8328232">w</span>&nbsp;<span class="builtintype" id="8328234">uint</span><span class="op" id="8328238">,</span>&nbsp;<span class="ident" id="8328240">max</span>&nbsp;<span class="builtintype" id="8328244">int</span><span class="op" id="8328247">)</span>&nbsp;<span class="op" id="8328249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328252">buf</span>&nbsp;<span class="op" id="8328256">:=</span>&nbsp;<span class="builtinfunc" id="8328259">make</span><span class="op" id="8328263">(</span><span class="op" id="8328264">[</span><span class="op" id="8328265">]</span><span class="builtintype" id="8328266">byte</span><span class="op" id="8328270">,</span>&nbsp;<span class="ident" id="8328272">MaxVarintLen64</span><span class="op" id="8328286">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328289">n</span>&nbsp;<span class="op" id="8328291">:=</span>&nbsp;<span class="ident" id="8328294">PutUvarint</span><span class="op" id="8328304">(</span><span class="ident" id="8328305">buf</span><span class="op" id="8328308">,</span>&nbsp;<span class="num" id="8328310">1</span><span class="op" id="8328311">&lt;&lt;</span><span class="ident" id="8328313">w</span><span class="op" id="8328314">-</span><span class="num" id="8328315">1</span><span class="op" id="8328316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328319">if</span>&nbsp;<span class="ident" id="8328322">n</span>&nbsp;<span class="op" id="8328324">!=</span>&nbsp;<span class="ident" id="8328327">max</span>&nbsp;<span class="op" id="8328331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328335">t</span><span class="op" id="8328336">.</span><span class="ident" id="8328337">Errorf</span><span class="op" id="8328343">(</span><span class="string" id="8328344">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8328374">,</span>&nbsp;<span class="ident" id="8328376">w</span><span class="op" id="8328377">,</span>&nbsp;<span class="ident" id="8328379">max</span><span class="op" id="8328382">,</span>&nbsp;<span class="ident" id="8328384">n</span><span class="op" id="8328385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328388">}</span><br>
<span class="lineno"></span><span class="op" id="8328390">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8328393">func</span>&nbsp;<span class="ident" id="8328398">TestConstants</span><span class="op" id="8328411">(</span><span class="ident" id="8328412">t</span>&nbsp;<span class="op" id="8328414">*</span><span class="ident" id="8328415">testing</span><span class="op" id="8328422">.</span><span class="ident" id="8328423">T</span><span class="op" id="8328424">)</span>&nbsp;<span class="op" id="8328426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328429">testConstant</span><span class="op" id="8328441">(</span><span class="ident" id="8328442">t</span><span class="op" id="8328443">,</span>&nbsp;<span class="num" id="8328445">16</span><span class="op" id="8328447">,</span>&nbsp;<span class="ident" id="8328449">MaxVarintLen16</span><span class="op" id="8328463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328466">testConstant</span><span class="op" id="8328478">(</span><span class="ident" id="8328479">t</span><span class="op" id="8328480">,</span>&nbsp;<span class="num" id="8328482">32</span><span class="op" id="8328484">,</span>&nbsp;<span class="ident" id="8328486">MaxVarintLen32</span><span class="op" id="8328500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328503">testConstant</span><span class="op" id="8328515">(</span><span class="ident" id="8328516">t</span><span class="op" id="8328517">,</span>&nbsp;<span class="num" id="8328519">64</span><span class="op" id="8328521">,</span>&nbsp;<span class="ident" id="8328523">MaxVarintLen64</span><span class="op" id="8328537">)</span><br>
<span class="lineno">25</span><span class="op" id="8328539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328542">func</span>&nbsp;<span class="ident" id="8328547">testVarint</span><span class="op" id="8328557">(</span><span class="ident" id="8328558">t</span>&nbsp;<span class="op" id="8328560">*</span><span class="ident" id="8328561">testing</span><span class="op" id="8328568">.</span><span class="ident" id="8328569">T</span><span class="op" id="8328570">,</span>&nbsp;<span class="ident" id="8328572">x</span>&nbsp;<span class="ident" id="8328574">int64</span><span class="op" id="8328579">)</span>&nbsp;<span class="op" id="8328581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328584">buf</span>&nbsp;<span class="op" id="8328588">:=</span>&nbsp;<span class="builtinfunc" id="8328591">make</span><span class="op" id="8328595">(</span><span class="op" id="8328596">[</span><span class="op" id="8328597">]</span><span class="builtintype" id="8328598">byte</span><span class="op" id="8328602">,</span>&nbsp;<span class="ident" id="8328604">MaxVarintLen64</span><span class="op" id="8328618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328621">n</span>&nbsp;<span class="op" id="8328623">:=</span>&nbsp;<span class="ident" id="8328626">PutVarint</span><span class="op" id="8328635">(</span><span class="ident" id="8328636">buf</span><span class="op" id="8328639">,</span>&nbsp;<span class="ident" id="8328641">x</span><span class="op" id="8328642">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328645">y</span><span class="op" id="8328646">,</span>&nbsp;<span class="ident" id="8328648">m</span>&nbsp;<span class="op" id="8328650">:=</span>&nbsp;<span class="ident" id="8328653">Varint</span><span class="op" id="8328659">(</span><span class="ident" id="8328660">buf</span><span class="op" id="8328663">[</span><span class="num" id="8328664">0</span><span class="op" id="8328665">:</span><span class="ident" id="8328666">n</span><span class="op" id="8328667">]</span><span class="op" id="8328668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328671">if</span>&nbsp;<span class="ident" id="8328674">x</span>&nbsp;<span class="op" id="8328676">!=</span>&nbsp;<span class="ident" id="8328679">y</span>&nbsp;<span class="op" id="8328681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328685">t</span><span class="op" id="8328686">.</span><span class="ident" id="8328687">Errorf</span><span class="op" id="8328693">(</span><span class="string" id="8328694">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8328714">,</span>&nbsp;<span class="ident" id="8328716">x</span><span class="op" id="8328717">,</span>&nbsp;<span class="ident" id="8328719">y</span><span class="op" id="8328720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328726">if</span>&nbsp;<span class="ident" id="8328729">n</span>&nbsp;<span class="op" id="8328731">!=</span>&nbsp;<span class="ident" id="8328734">m</span>&nbsp;<span class="op" id="8328736">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328740">t</span><span class="op" id="8328741">.</span><span class="ident" id="8328742">Errorf</span><span class="op" id="8328748">(</span><span class="string" id="8328749">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8328782">,</span>&nbsp;<span class="ident" id="8328784">x</span><span class="op" id="8328785">,</span>&nbsp;<span class="ident" id="8328787">m</span><span class="op" id="8328788">,</span>&nbsp;<span class="ident" id="8328790">n</span><span class="op" id="8328791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328798">y</span><span class="op" id="8328799">,</span>&nbsp;<span class="ident" id="8328801">err</span>&nbsp;<span class="op" id="8328805">:=</span>&nbsp;<span class="ident" id="8328808">ReadVarint</span><span class="op" id="8328818">(</span><span class="ident" id="8328819">bytes</span><span class="op" id="8328824">.</span><span class="ident" id="8328825">NewReader</span><span class="op" id="8328834">(</span><span class="ident" id="8328835">buf</span><span class="op" id="8328838">)</span><span class="op" id="8328839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328842">if</span>&nbsp;<span class="ident" id="8328845">err</span>&nbsp;<span class="op" id="8328849">!=</span>&nbsp;<span class="ident" id="8328852">nil</span>&nbsp;<span class="op" id="8328856">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328860">t</span><span class="op" id="8328861">.</span><span class="ident" id="8328862">Errorf</span><span class="op" id="8328868">(</span><span class="string" id="8328869">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="8328889">,</span>&nbsp;<span class="ident" id="8328891">x</span><span class="op" id="8328892">,</span>&nbsp;<span class="ident" id="8328894">err</span><span class="op" id="8328897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8328903">if</span>&nbsp;<span class="ident" id="8328906">x</span>&nbsp;<span class="op" id="8328908">!=</span>&nbsp;<span class="ident" id="8328911">y</span>&nbsp;<span class="op" id="8328913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8328917">t</span><span class="op" id="8328918">.</span><span class="ident" id="8328919">Errorf</span><span class="op" id="8328925">(</span><span class="string" id="8328926">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8328950">,</span>&nbsp;<span class="ident" id="8328952">x</span><span class="op" id="8328953">,</span>&nbsp;<span class="ident" id="8328955">y</span><span class="op" id="8328956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8328959">}</span><br>
<span class="lineno">45</span><span class="op" id="8328961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328964">func</span>&nbsp;<span class="ident" id="8328969">testUvarint</span><span class="op" id="8328980">(</span><span class="ident" id="8328981">t</span>&nbsp;<span class="op" id="8328983">*</span><span class="ident" id="8328984">testing</span><span class="op" id="8328991">.</span><span class="ident" id="8328992">T</span><span class="op" id="8328993">,</span>&nbsp;<span class="ident" id="8328995">x</span>&nbsp;<span class="ident" id="8328997">uint64</span><span class="op" id="8329003">)</span>&nbsp;<span class="op" id="8329005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329008">buf</span>&nbsp;<span class="op" id="8329012">:=</span>&nbsp;<span class="builtinfunc" id="8329015">make</span><span class="op" id="8329019">(</span><span class="op" id="8329020">[</span><span class="op" id="8329021">]</span><span class="builtintype" id="8329022">byte</span><span class="op" id="8329026">,</span>&nbsp;<span class="ident" id="8329028">MaxVarintLen64</span><span class="op" id="8329042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329045">n</span>&nbsp;<span class="op" id="8329047">:=</span>&nbsp;<span class="ident" id="8329050">PutUvarint</span><span class="op" id="8329060">(</span><span class="ident" id="8329061">buf</span><span class="op" id="8329064">,</span>&nbsp;<span class="ident" id="8329066">x</span><span class="op" id="8329067">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329070">y</span><span class="op" id="8329071">,</span>&nbsp;<span class="ident" id="8329073">m</span>&nbsp;<span class="op" id="8329075">:=</span>&nbsp;<span class="ident" id="8329078">Uvarint</span><span class="op" id="8329085">(</span><span class="ident" id="8329086">buf</span><span class="op" id="8329089">[</span><span class="num" id="8329090">0</span><span class="op" id="8329091">:</span><span class="ident" id="8329092">n</span><span class="op" id="8329093">]</span><span class="op" id="8329094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329097">if</span>&nbsp;<span class="ident" id="8329100">x</span>&nbsp;<span class="op" id="8329102">!=</span>&nbsp;<span class="ident" id="8329105">y</span>&nbsp;<span class="op" id="8329107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329111">t</span><span class="op" id="8329112">.</span><span class="ident" id="8329113">Errorf</span><span class="op" id="8329119">(</span><span class="string" id="8329120">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8329141">,</span>&nbsp;<span class="ident" id="8329143">x</span><span class="op" id="8329144">,</span>&nbsp;<span class="ident" id="8329146">y</span><span class="op" id="8329147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329153">if</span>&nbsp;<span class="ident" id="8329156">n</span>&nbsp;<span class="op" id="8329158">!=</span>&nbsp;<span class="ident" id="8329161">m</span>&nbsp;<span class="op" id="8329163">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329167">t</span><span class="op" id="8329168">.</span><span class="ident" id="8329169">Errorf</span><span class="op" id="8329175">(</span><span class="string" id="8329176">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8329210">,</span>&nbsp;<span class="ident" id="8329212">x</span><span class="op" id="8329213">,</span>&nbsp;<span class="ident" id="8329215">m</span><span class="op" id="8329216">,</span>&nbsp;<span class="ident" id="8329218">n</span><span class="op" id="8329219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329226">y</span><span class="op" id="8329227">,</span>&nbsp;<span class="ident" id="8329229">err</span>&nbsp;<span class="op" id="8329233">:=</span>&nbsp;<span class="ident" id="8329236">ReadUvarint</span><span class="op" id="8329247">(</span><span class="ident" id="8329248">bytes</span><span class="op" id="8329253">.</span><span class="ident" id="8329254">NewReader</span><span class="op" id="8329263">(</span><span class="ident" id="8329264">buf</span><span class="op" id="8329267">)</span><span class="op" id="8329268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329271">if</span>&nbsp;<span class="ident" id="8329274">err</span>&nbsp;<span class="op" id="8329278">!=</span>&nbsp;<span class="ident" id="8329281">nil</span>&nbsp;<span class="op" id="8329285">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329289">t</span><span class="op" id="8329290">.</span><span class="ident" id="8329291">Errorf</span><span class="op" id="8329297">(</span><span class="string" id="8329298">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="8329319">,</span>&nbsp;<span class="ident" id="8329321">x</span><span class="op" id="8329322">,</span>&nbsp;<span class="ident" id="8329324">err</span><span class="op" id="8329327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329333">if</span>&nbsp;<span class="ident" id="8329336">x</span>&nbsp;<span class="op" id="8329338">!=</span>&nbsp;<span class="ident" id="8329341">y</span>&nbsp;<span class="op" id="8329343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329347">t</span><span class="op" id="8329348">.</span><span class="ident" id="8329349">Errorf</span><span class="op" id="8329355">(</span><span class="string" id="8329356">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8329381">,</span>&nbsp;<span class="ident" id="8329383">x</span><span class="op" id="8329384">,</span>&nbsp;<span class="ident" id="8329386">y</span><span class="op" id="8329387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329390">}</span><br>
<span class="lineno">65</span><span class="op" id="8329392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329395">var</span>&nbsp;<span class="ident" id="8329399">tests</span>&nbsp;<span class="op" id="8329405">=</span>&nbsp;<span class="op" id="8329407">[</span><span class="op" id="8329408">]</span><span class="ident" id="8329409">int64</span><span class="op" id="8329414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329417">-</span><span class="num" id="8329418">1</span>&nbsp;<span class="op" id="8329420">&lt;&lt;</span>&nbsp;<span class="num" id="8329423">63</span><span class="op" id="8329425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329428">-</span><span class="num" id="8329429">1</span><span class="op" id="8329430">&lt;&lt;</span><span class="num" id="8329432">63</span>&nbsp;<span class="op" id="8329435">+</span>&nbsp;<span class="num" id="8329437">1</span><span class="op" id="8329438">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329441">-</span><span class="num" id="8329442">1</span><span class="op" id="8329443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329446">0</span><span class="op" id="8329447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329450">1</span><span class="op" id="8329451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329454">2</span><span class="op" id="8329455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329458">10</span><span class="op" id="8329460">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329463">20</span><span class="op" id="8329465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329468">63</span><span class="op" id="8329470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329473">64</span><span class="op" id="8329475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329478">65</span><span class="op" id="8329480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329483">127</span><span class="op" id="8329486">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329489">128</span><span class="op" id="8329492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329495">129</span><span class="op" id="8329498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329501">255</span><span class="op" id="8329504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329507">256</span><span class="op" id="8329510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329513">257</span><span class="op" id="8329516">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8329519">1</span><span class="op" id="8329520">&lt;&lt;</span><span class="num" id="8329522">63</span>&nbsp;<span class="op" id="8329525">-</span>&nbsp;<span class="num" id="8329527">1</span><span class="op" id="8329528">,</span><br>
<span class="lineno"></span><span class="op" id="8329530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329533">func</span>&nbsp;<span class="ident" id="8329538">TestVarint</span><span class="op" id="8329548">(</span><span class="ident" id="8329549">t</span>&nbsp;<span class="op" id="8329551">*</span><span class="ident" id="8329552">testing</span><span class="op" id="8329559">.</span><span class="ident" id="8329560">T</span><span class="op" id="8329561">)</span>&nbsp;<span class="op" id="8329563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329566">for</span>&nbsp;<span class="ident" id="8329570">_</span><span class="op" id="8329571">,</span>&nbsp;<span class="ident" id="8329573">x</span>&nbsp;<span class="op" id="8329575">:=</span>&nbsp;<span class="keyword" id="8329578">range</span>&nbsp;<span class="ident" id="8329584">tests</span>&nbsp;<span class="op" id="8329590">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329594">testVarint</span><span class="op" id="8329604">(</span><span class="ident" id="8329605">t</span><span class="op" id="8329606">,</span>&nbsp;<span class="ident" id="8329608">x</span><span class="op" id="8329609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329613">testVarint</span><span class="op" id="8329623">(</span><span class="ident" id="8329624">t</span><span class="op" id="8329625">,</span>&nbsp;<span class="op" id="8329627">-</span><span class="ident" id="8329628">x</span><span class="op" id="8329629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329635">for</span>&nbsp;<span class="ident" id="8329639">x</span>&nbsp;<span class="op" id="8329641">:=</span>&nbsp;<span class="ident" id="8329644">int64</span><span class="op" id="8329649">(</span><span class="num" id="8329650">0x7</span><span class="op" id="8329653">)</span><span class="op" id="8329654">;</span>&nbsp;<span class="ident" id="8329656">x</span>&nbsp;<span class="op" id="8329658">!=</span>&nbsp;<span class="num" id="8329661">0</span><span class="op" id="8329662">;</span>&nbsp;<span class="ident" id="8329664">x</span>&nbsp;<span class="op" id="8329666">&lt;&lt;=</span>&nbsp;<span class="num" id="8329670">1</span>&nbsp;<span class="op" id="8329672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329676">testVarint</span><span class="op" id="8329686">(</span><span class="ident" id="8329687">t</span><span class="op" id="8329688">,</span>&nbsp;<span class="ident" id="8329690">x</span><span class="op" id="8329691">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329695">testVarint</span><span class="op" id="8329705">(</span><span class="ident" id="8329706">t</span><span class="op" id="8329707">,</span>&nbsp;<span class="op" id="8329709">-</span><span class="ident" id="8329710">x</span><span class="op" id="8329711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329714">}</span><br>
<span class="lineno"></span><span class="op" id="8329716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329719">func</span>&nbsp;<span class="ident" id="8329724">TestUvarint</span><span class="op" id="8329735">(</span><span class="ident" id="8329736">t</span>&nbsp;<span class="op" id="8329738">*</span><span class="ident" id="8329739">testing</span><span class="op" id="8329746">.</span><span class="ident" id="8329747">T</span><span class="op" id="8329748">)</span>&nbsp;<span class="op" id="8329750">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329753">for</span>&nbsp;<span class="ident" id="8329757">_</span><span class="op" id="8329758">,</span>&nbsp;<span class="ident" id="8329760">x</span>&nbsp;<span class="op" id="8329762">:=</span>&nbsp;<span class="keyword" id="8329765">range</span>&nbsp;<span class="ident" id="8329771">tests</span>&nbsp;<span class="op" id="8329777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329781">testUvarint</span><span class="op" id="8329792">(</span><span class="ident" id="8329793">t</span><span class="op" id="8329794">,</span>&nbsp;<span class="ident" id="8329796">uint64</span><span class="op" id="8329802">(</span><span class="ident" id="8329803">x</span><span class="op" id="8329804">)</span><span class="op" id="8329805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329811">for</span>&nbsp;<span class="ident" id="8329815">x</span>&nbsp;<span class="op" id="8329817">:=</span>&nbsp;<span class="ident" id="8329820">uint64</span><span class="op" id="8329826">(</span><span class="num" id="8329827">0x7</span><span class="op" id="8329830">)</span><span class="op" id="8329831">;</span>&nbsp;<span class="ident" id="8329833">x</span>&nbsp;<span class="op" id="8329835">!=</span>&nbsp;<span class="num" id="8329838">0</span><span class="op" id="8329839">;</span>&nbsp;<span class="ident" id="8329841">x</span>&nbsp;<span class="op" id="8329843">&lt;&lt;=</span>&nbsp;<span class="num" id="8329847">1</span>&nbsp;<span class="op" id="8329849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329853">testUvarint</span><span class="op" id="8329864">(</span><span class="ident" id="8329865">t</span><span class="op" id="8329866">,</span>&nbsp;<span class="ident" id="8329868">x</span><span class="op" id="8329869">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8329872">}</span><br>
<span class="lineno"></span><span class="op" id="8329874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329877">func</span>&nbsp;<span class="ident" id="8329882">TestBufferTooSmall</span><span class="op" id="8329900">(</span><span class="ident" id="8329901">t</span>&nbsp;<span class="op" id="8329903">*</span><span class="ident" id="8329904">testing</span><span class="op" id="8329911">.</span><span class="ident" id="8329912">T</span><span class="op" id="8329913">)</span>&nbsp;<span class="op" id="8329915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329918">buf</span>&nbsp;<span class="op" id="8329922">:=</span>&nbsp;<span class="op" id="8329925">[</span><span class="op" id="8329926">]</span><span class="builtintype" id="8329927">byte</span><span class="op" id="8329931">{</span><span class="num" id="8329932">0x80</span><span class="op" id="8329936">,</span>&nbsp;<span class="num" id="8329938">0x80</span><span class="op" id="8329942">,</span>&nbsp;<span class="num" id="8329944">0x80</span><span class="op" id="8329948">,</span>&nbsp;<span class="num" id="8329950">0x80</span><span class="op" id="8329954">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8329957">for</span>&nbsp;<span class="ident" id="8329961">i</span>&nbsp;<span class="op" id="8329963">:=</span>&nbsp;<span class="num" id="8329966">0</span><span class="op" id="8329967">;</span>&nbsp;<span class="ident" id="8329969">i</span>&nbsp;<span class="op" id="8329971">&lt;=</span>&nbsp;<span class="builtinfunc" id="8329974">len</span><span class="op" id="8329977">(</span><span class="ident" id="8329978">buf</span><span class="op" id="8329981">)</span><span class="op" id="8329982">;</span>&nbsp;<span class="ident" id="8329984">i</span><span class="op" id="8329985">++</span>&nbsp;<span class="op" id="8329988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8329992">buf</span>&nbsp;<span class="op" id="8329996">:=</span>&nbsp;<span class="ident" id="8329999">buf</span><span class="op" id="8330002">[</span><span class="num" id="8330003">0</span><span class="op" id="8330004">:</span><span class="ident" id="8330005">i</span><span class="op" id="8330006">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330010">x</span><span class="op" id="8330011">,</span>&nbsp;<span class="ident" id="8330013">n</span>&nbsp;<span class="op" id="8330015">:=</span>&nbsp;<span class="ident" id="8330018">Uvarint</span><span class="op" id="8330025">(</span><span class="ident" id="8330026">buf</span><span class="op" id="8330029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8330033">if</span>&nbsp;<span class="ident" id="8330036">x</span>&nbsp;<span class="op" id="8330038">!=</span>&nbsp;<span class="num" id="8330041">0</span>&nbsp;<span class="op" id="8330043">||</span>&nbsp;<span class="ident" id="8330046">n</span>&nbsp;<span class="op" id="8330048">!=</span>&nbsp;<span class="num" id="8330051">0</span>&nbsp;<span class="op" id="8330053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330058">t</span><span class="op" id="8330059">.</span><span class="ident" id="8330060">Errorf</span><span class="op" id="8330066">(</span><span class="string" id="8330067">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="8330100">,</span>&nbsp;<span class="ident" id="8330102">buf</span><span class="op" id="8330105">,</span>&nbsp;<span class="ident" id="8330107">x</span><span class="op" id="8330108">,</span>&nbsp;<span class="ident" id="8330110">n</span><span class="op" id="8330111">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8330115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330120">x</span><span class="op" id="8330121">,</span>&nbsp;<span class="ident" id="8330123">err</span>&nbsp;<span class="op" id="8330127">:=</span>&nbsp;<span class="ident" id="8330130">ReadUvarint</span><span class="op" id="8330141">(</span><span class="ident" id="8330142">bytes</span><span class="op" id="8330147">.</span><span class="ident" id="8330148">NewReader</span><span class="op" id="8330157">(</span><span class="ident" id="8330158">buf</span><span class="op" id="8330161">)</span><span class="op" id="8330162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8330166">if</span>&nbsp;<span class="ident" id="8330169">x</span>&nbsp;<span class="op" id="8330171">!=</span>&nbsp;<span class="num" id="8330174">0</span>&nbsp;<span class="op" id="8330176">||</span>&nbsp;<span class="ident" id="8330179">err</span>&nbsp;<span class="op" id="8330183">!=</span>&nbsp;<span class="ident" id="8330186">io</span><span class="op" id="8330188">.</span><span class="ident" id="8330189">EOF</span>&nbsp;<span class="op" id="8330193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330198">t</span><span class="op" id="8330199">.</span><span class="ident" id="8330200">Errorf</span><span class="op" id="8330206">(</span><span class="string" id="8330207">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8330246">,</span>&nbsp;<span class="ident" id="8330248">buf</span><span class="op" id="8330251">,</span>&nbsp;<span class="ident" id="8330253">x</span><span class="op" id="8330254">,</span>&nbsp;<span class="ident" id="8330256">err</span><span class="op" id="8330259">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8330263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8330266">}</span><br>
<span class="lineno"></span><span class="op" id="8330268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8330271">func</span>&nbsp;<span class="ident" id="8330276">testOverflow</span><span class="op" id="8330288">(</span><span class="ident" id="8330289">t</span>&nbsp;<span class="op" id="8330291">*</span><span class="ident" id="8330292">testing</span><span class="op" id="8330299">.</span><span class="ident" id="8330300">T</span><span class="op" id="8330301">,</span>&nbsp;<span class="ident" id="8330303">buf</span>&nbsp;<span class="op" id="8330307">[</span><span class="op" id="8330308">]</span><span class="builtintype" id="8330309">byte</span><span class="op" id="8330313">,</span>&nbsp;<span class="ident" id="8330315">n0</span>&nbsp;<span class="builtintype" id="8330318">int</span><span class="op" id="8330321">,</span>&nbsp;<span class="ident" id="8330323">err0</span>&nbsp;<span class="builtintype" id="8330328">error</span><span class="op" id="8330333">)</span>&nbsp;<span class="op" id="8330335">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330338">x</span><span class="op" id="8330339">,</span>&nbsp;<span class="ident" id="8330341">n</span>&nbsp;<span class="op" id="8330343">:=</span>&nbsp;<span class="ident" id="8330346">Uvarint</span><span class="op" id="8330353">(</span><span class="ident" id="8330354">buf</span><span class="op" id="8330357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8330360">if</span>&nbsp;<span class="ident" id="8330363">x</span>&nbsp;<span class="op" id="8330365">!=</span>&nbsp;<span class="num" id="8330368">0</span>&nbsp;<span class="op" id="8330370">||</span>&nbsp;<span class="ident" id="8330373">n</span>&nbsp;<span class="op" id="8330375">!=</span>&nbsp;<span class="ident" id="8330378">n0</span>&nbsp;<span class="op" id="8330381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330385">t</span><span class="op" id="8330386">.</span><span class="ident" id="8330387">Errorf</span><span class="op" id="8330393">(</span><span class="string" id="8330394">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="8330439">,</span>&nbsp;<span class="ident" id="8330441">buf</span><span class="op" id="8330444">,</span>&nbsp;<span class="ident" id="8330446">x</span><span class="op" id="8330447">,</span>&nbsp;<span class="ident" id="8330449">n</span><span class="op" id="8330450">,</span>&nbsp;<span class="ident" id="8330452">n0</span><span class="op" id="8330454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8330457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330461">x</span><span class="op" id="8330462">,</span>&nbsp;<span class="ident" id="8330464">err</span>&nbsp;<span class="op" id="8330468">:=</span>&nbsp;<span class="ident" id="8330471">ReadUvarint</span><span class="op" id="8330482">(</span><span class="ident" id="8330483">bytes</span><span class="op" id="8330488">.</span><span class="ident" id="8330489">NewReader</span><span class="op" id="8330498">(</span><span class="ident" id="8330499">buf</span><span class="op" id="8330502">)</span><span class="op" id="8330503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8330506">if</span>&nbsp;<span class="ident" id="8330509">x</span>&nbsp;<span class="op" id="8330511">!=</span>&nbsp;<span class="num" id="8330514">0</span>&nbsp;<span class="op" id="8330516">||</span>&nbsp;<span class="ident" id="8330519">err</span>&nbsp;<span class="op" id="8330523">!=</span>&nbsp;<span class="ident" id="8330526">err0</span>&nbsp;<span class="op" id="8330531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330535">t</span><span class="op" id="8330536">.</span><span class="ident" id="8330537">Errorf</span><span class="op" id="8330543">(</span><span class="string" id="8330544">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="8330595">,</span>&nbsp;<span class="ident" id="8330597">buf</span><span class="op" id="8330600">,</span>&nbsp;<span class="ident" id="8330602">x</span><span class="op" id="8330603">,</span>&nbsp;<span class="ident" id="8330605">err</span><span class="op" id="8330608">,</span>&nbsp;<span class="ident" id="8330610">err0</span><span class="op" id="8330614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8330617">}</span><br>
<span class="lineno"></span><span class="op" id="8330619">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="8330622">func</span>&nbsp;<span class="ident" id="8330627">TestOverflow</span><span class="op" id="8330639">(</span><span class="ident" id="8330640">t</span>&nbsp;<span class="op" id="8330642">*</span><span class="ident" id="8330643">testing</span><span class="op" id="8330650">.</span><span class="ident" id="8330651">T</span><span class="op" id="8330652">)</span>&nbsp;<span class="op" id="8330654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330657">testOverflow</span><span class="op" id="8330669">(</span><span class="ident" id="8330670">t</span><span class="op" id="8330671">,</span>&nbsp;<span class="op" id="8330673">[</span><span class="op" id="8330674">]</span><span class="builtintype" id="8330675">byte</span><span class="op" id="8330679">{</span><span class="num" id="8330680">0x80</span><span class="op" id="8330684">,</span>&nbsp;<span class="num" id="8330686">0x80</span><span class="op" id="8330690">,</span>&nbsp;<span class="num" id="8330692">0x80</span><span class="op" id="8330696">,</span>&nbsp;<span class="num" id="8330698">0x80</span><span class="op" id="8330702">,</span>&nbsp;<span class="num" id="8330704">0x80</span><span class="op" id="8330708">,</span>&nbsp;<span class="num" id="8330710">0x80</span><span class="op" id="8330714">,</span>&nbsp;<span class="num" id="8330716">0x80</span><span class="op" id="8330720">,</span>&nbsp;<span class="num" id="8330722">0x80</span><span class="op" id="8330726">,</span>&nbsp;<span class="num" id="8330728">0x80</span><span class="op" id="8330732">,</span>&nbsp;<span class="num" id="8330734">0x2</span><span class="op" id="8330737">}</span><span class="op" id="8330738">,</span>&nbsp;<span class="op" id="8330740">-</span><span class="num" id="8330741">10</span><span class="op" id="8330743">,</span>&nbsp;<span class="ident" id="8330745">overflow</span><span class="op" id="8330753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330756">testOverflow</span><span class="op" id="8330768">(</span><span class="ident" id="8330769">t</span><span class="op" id="8330770">,</span>&nbsp;<span class="op" id="8330772">[</span><span class="op" id="8330773">]</span><span class="builtintype" id="8330774">byte</span><span class="op" id="8330778">{</span><span class="num" id="8330779">0x80</span><span class="op" id="8330783">,</span>&nbsp;<span class="num" id="8330785">0x80</span><span class="op" id="8330789">,</span>&nbsp;<span class="num" id="8330791">0x80</span><span class="op" id="8330795">,</span>&nbsp;<span class="num" id="8330797">0x80</span><span class="op" id="8330801">,</span>&nbsp;<span class="num" id="8330803">0x80</span><span class="op" id="8330807">,</span>&nbsp;<span class="num" id="8330809">0x80</span><span class="op" id="8330813">,</span>&nbsp;<span class="num" id="8330815">0x80</span><span class="op" id="8330819">,</span>&nbsp;<span class="num" id="8330821">0x80</span><span class="op" id="8330825">,</span>&nbsp;<span class="num" id="8330827">0x80</span><span class="op" id="8330831">,</span>&nbsp;<span class="num" id="8330833">0x80</span><span class="op" id="8330837">,</span>&nbsp;<span class="num" id="8330839">0x80</span><span class="op" id="8330843">,</span>&nbsp;<span class="num" id="8330845">0x80</span><span class="op" id="8330849">,</span>&nbsp;<span class="num" id="8330851">0x1</span><span class="op" id="8330854">,</span>&nbsp;<span class="num" id="8330856">0</span><span class="op" id="8330857">,</span>&nbsp;<span class="num" id="8330859">0</span><span class="op" id="8330860">}</span><span class="op" id="8330861">,</span>&nbsp;<span class="op" id="8330863">-</span><span class="num" id="8330864">13</span><span class="op" id="8330866">,</span>&nbsp;<span class="ident" id="8330868">overflow</span><span class="op" id="8330876">)</span><br>
<span class="lineno"></span><span class="op" id="8330878">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8330881">func</span>&nbsp;<span class="ident" id="8330886">TestNonCanonicalZero</span><span class="op" id="8330906">(</span><span class="ident" id="8330907">t</span>&nbsp;<span class="op" id="8330909">*</span><span class="ident" id="8330910">testing</span><span class="op" id="8330917">.</span><span class="ident" id="8330918">T</span><span class="op" id="8330919">)</span>&nbsp;<span class="op" id="8330921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330924">buf</span>&nbsp;<span class="op" id="8330928">:=</span>&nbsp;<span class="op" id="8330931">[</span><span class="op" id="8330932">]</span><span class="builtintype" id="8330933">byte</span><span class="op" id="8330937">{</span><span class="num" id="8330938">0x80</span><span class="op" id="8330942">,</span>&nbsp;<span class="num" id="8330944">0x80</span><span class="op" id="8330948">,</span>&nbsp;<span class="num" id="8330950">0x80</span><span class="op" id="8330954">,</span>&nbsp;<span class="num" id="8330956">0</span><span class="op" id="8330957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8330960">x</span><span class="op" id="8330961">,</span>&nbsp;<span class="ident" id="8330963">n</span>&nbsp;<span class="op" id="8330965">:=</span>&nbsp;<span class="ident" id="8330968">Uvarint</span><span class="op" id="8330975">(</span><span class="ident" id="8330976">buf</span><span class="op" id="8330979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8330982">if</span>&nbsp;<span class="ident" id="8330985">x</span>&nbsp;<span class="op" id="8330987">!=</span>&nbsp;<span class="num" id="8330990">0</span>&nbsp;<span class="op" id="8330992">||</span>&nbsp;<span class="ident" id="8330995">n</span>&nbsp;<span class="op" id="8330997">!=</span>&nbsp;<span class="num" id="8331000">4</span>&nbsp;<span class="op" id="8331002">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331006">t</span><span class="op" id="8331007">.</span><span class="ident" id="8331008">Errorf</span><span class="op" id="8331014">(</span><span class="string" id="8331015">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="8331059">,</span>&nbsp;<span class="ident" id="8331061">buf</span><span class="op" id="8331064">,</span>&nbsp;<span class="ident" id="8331066">x</span><span class="op" id="8331067">,</span>&nbsp;<span class="ident" id="8331069">n</span><span class="op" id="8331070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8331074">}</span><br>
<span class="lineno"></span><span class="op" id="8331076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8331079">func</span>&nbsp;<span class="ident" id="8331084">BenchmarkPutUvarint32</span><span class="op" id="8331105">(</span><span class="ident" id="8331106">b</span>&nbsp;<span class="op" id="8331108">*</span><span class="ident" id="8331109">testing</span><span class="op" id="8331116">.</span><span class="ident" id="8331117">B</span><span class="op" id="8331118">)</span>&nbsp;<span class="op" id="8331120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331123">buf</span>&nbsp;<span class="op" id="8331127">:=</span>&nbsp;<span class="builtinfunc" id="8331130">make</span><span class="op" id="8331134">(</span><span class="op" id="8331135">[</span><span class="op" id="8331136">]</span><span class="builtintype" id="8331137">byte</span><span class="op" id="8331141">,</span>&nbsp;<span class="ident" id="8331143">MaxVarintLen32</span><span class="op" id="8331157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331160">b</span><span class="op" id="8331161">.</span><span class="ident" id="8331162">SetBytes</span><span class="op" id="8331170">(</span><span class="num" id="8331171">4</span><span class="op" id="8331172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8331175">for</span>&nbsp;<span class="ident" id="8331179">i</span>&nbsp;<span class="op" id="8331181">:=</span>&nbsp;<span class="num" id="8331184">0</span><span class="op" id="8331185">;</span>&nbsp;<span class="ident" id="8331187">i</span>&nbsp;<span class="op" id="8331189">&lt;</span>&nbsp;<span class="ident" id="8331191">b</span><span class="op" id="8331192">.</span><span class="ident" id="8331193">N</span><span class="op" id="8331194">;</span>&nbsp;<span class="ident" id="8331196">i</span><span class="op" id="8331197">++</span>&nbsp;<span class="op" id="8331200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8331204">for</span>&nbsp;<span class="ident" id="8331208">j</span>&nbsp;<span class="op" id="8331210">:=</span>&nbsp;<span class="builtintype" id="8331213">uint</span><span class="op" id="8331217">(</span><span class="num" id="8331218">0</span><span class="op" id="8331219">)</span><span class="op" id="8331220">;</span>&nbsp;<span class="ident" id="8331222">j</span>&nbsp;<span class="op" id="8331224">&lt;</span>&nbsp;<span class="ident" id="8331226">MaxVarintLen32</span><span class="op" id="8331240">;</span>&nbsp;<span class="ident" id="8331242">j</span><span class="op" id="8331243">++</span>&nbsp;<span class="op" id="8331246">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331251">PutUvarint</span><span class="op" id="8331261">(</span><span class="ident" id="8331262">buf</span><span class="op" id="8331265">,</span>&nbsp;<span class="num" id="8331267">1</span><span class="op" id="8331268">&lt;&lt;</span><span class="op" id="8331270">(</span><span class="ident" id="8331271">j</span><span class="op" id="8331272">*</span><span class="num" id="8331273">7</span><span class="op" id="8331274">)</span><span class="op" id="8331275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8331279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8331282">}</span><br>
<span class="lineno"></span><span class="op" id="8331284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8331287">func</span>&nbsp;<span class="ident" id="8331292">BenchmarkPutUvarint64</span><span class="op" id="8331313">(</span><span class="ident" id="8331314">b</span>&nbsp;<span class="op" id="8331316">*</span><span class="ident" id="8331317">testing</span><span class="op" id="8331324">.</span><span class="ident" id="8331325">B</span><span class="op" id="8331326">)</span>&nbsp;<span class="op" id="8331328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331331">buf</span>&nbsp;<span class="op" id="8331335">:=</span>&nbsp;<span class="builtinfunc" id="8331338">make</span><span class="op" id="8331342">(</span><span class="op" id="8331343">[</span><span class="op" id="8331344">]</span><span class="builtintype" id="8331345">byte</span><span class="op" id="8331349">,</span>&nbsp;<span class="ident" id="8331351">MaxVarintLen64</span><span class="op" id="8331365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331368">b</span><span class="op" id="8331369">.</span><span class="ident" id="8331370">SetBytes</span><span class="op" id="8331378">(</span><span class="num" id="8331379">8</span><span class="op" id="8331380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8331383">for</span>&nbsp;<span class="ident" id="8331387">i</span>&nbsp;<span class="op" id="8331389">:=</span>&nbsp;<span class="num" id="8331392">0</span><span class="op" id="8331393">;</span>&nbsp;<span class="ident" id="8331395">i</span>&nbsp;<span class="op" id="8331397">&lt;</span>&nbsp;<span class="ident" id="8331399">b</span><span class="op" id="8331400">.</span><span class="ident" id="8331401">N</span><span class="op" id="8331402">;</span>&nbsp;<span class="ident" id="8331404">i</span><span class="op" id="8331405">++</span>&nbsp;<span class="op" id="8331408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8331412">for</span>&nbsp;<span class="ident" id="8331416">j</span>&nbsp;<span class="op" id="8331418">:=</span>&nbsp;<span class="builtintype" id="8331421">uint</span><span class="op" id="8331425">(</span><span class="num" id="8331426">0</span><span class="op" id="8331427">)</span><span class="op" id="8331428">;</span>&nbsp;<span class="ident" id="8331430">j</span>&nbsp;<span class="op" id="8331432">&lt;</span>&nbsp;<span class="ident" id="8331434">MaxVarintLen64</span><span class="op" id="8331448">;</span>&nbsp;<span class="ident" id="8331450">j</span><span class="op" id="8331451">++</span>&nbsp;<span class="op" id="8331454">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8331459">PutUvarint</span><span class="op" id="8331469">(</span><span class="ident" id="8331470">buf</span><span class="op" id="8331473">,</span>&nbsp;<span class="num" id="8331475">1</span><span class="op" id="8331476">&lt;&lt;</span><span class="op" id="8331478">(</span><span class="ident" id="8331479">j</span><span class="op" id="8331480">*</span><span class="num" id="8331481">7</span><span class="op" id="8331482">)</span><span class="op" id="8331483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8331487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8331490">}</span><br>
<span class="lineno"></span><span class="op" id="8331492">}</span>
</div>
</body>
</html>
