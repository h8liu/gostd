<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="962036">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="962092">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="962146">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="962197">package</span>&nbsp;<span class="ident" id="962205">runtime_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="962219">import</span>&nbsp;<span class="op" id="962226">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="962229">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="962237">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="962250">.</span>&nbsp;<span class="string" id="962252">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="962263">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="962273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="962276">//&nbsp;turn&nbsp;uint64&nbsp;op&nbsp;into&nbsp;float64&nbsp;op</span><br>
<span class="lineno">15</span><span class="keyword" id="962310">func</span>&nbsp;<span class="ident" id="962315">fop</span><span class="op" id="962318">(</span><span class="ident" id="962319">f</span>&nbsp;<span class="keyword" id="962321">func</span><span class="op" id="962325">(</span><span class="ident" id="962326">x</span><span class="op" id="962327">,</span>&nbsp;<span class="ident" id="962329">y</span>&nbsp;<span class="ident" id="962331">uint64</span><span class="op" id="962337">)</span>&nbsp;<span class="ident" id="962339">uint64</span><span class="op" id="962345">)</span>&nbsp;<span class="keyword" id="962347">func</span><span class="op" id="962351">(</span><span class="ident" id="962352">x</span><span class="op" id="962353">,</span>&nbsp;<span class="ident" id="962355">y</span>&nbsp;<span class="builtintype" id="962357">float64</span><span class="op" id="962364">)</span>&nbsp;<span class="builtintype" id="962366">float64</span>&nbsp;<span class="op" id="962374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="962377">return</span>&nbsp;<span class="keyword" id="962384">func</span><span class="op" id="962388">(</span><span class="ident" id="962389">x</span><span class="op" id="962390">,</span>&nbsp;<span class="ident" id="962392">y</span>&nbsp;<span class="builtintype" id="962394">float64</span><span class="op" id="962401">)</span>&nbsp;<span class="builtintype" id="962403">float64</span>&nbsp;<span class="op" id="962411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962415">bx</span>&nbsp;<span class="op" id="962418">:=</span>&nbsp;<span class="ident" id="962421">math</span><span class="op" id="962425">.</span><span class="ident" id="962426">Float64bits</span><span class="op" id="962437">(</span><span class="ident" id="962438">x</span><span class="op" id="962439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962443">by</span>&nbsp;<span class="op" id="962446">:=</span>&nbsp;<span class="ident" id="962449">math</span><span class="op" id="962453">.</span><span class="ident" id="962454">Float64bits</span><span class="op" id="962465">(</span><span class="ident" id="962466">y</span><span class="op" id="962467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="962471">return</span>&nbsp;<span class="ident" id="962478">math</span><span class="op" id="962482">.</span><span class="ident" id="962483">Float64frombits</span><span class="op" id="962498">(</span><span class="ident" id="962499">f</span><span class="op" id="962500">(</span><span class="ident" id="962501">bx</span><span class="op" id="962503">,</span>&nbsp;<span class="ident" id="962505">by</span><span class="op" id="962507">)</span><span class="op" id="962508">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="962511">}</span><br>
<span class="lineno"></span><span class="op" id="962513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="962516">func</span>&nbsp;<span class="ident" id="962521">add</span><span class="op" id="962524">(</span><span class="ident" id="962525">x</span><span class="op" id="962526">,</span>&nbsp;<span class="ident" id="962528">y</span>&nbsp;<span class="builtintype" id="962530">float64</span><span class="op" id="962537">)</span>&nbsp;<span class="builtintype" id="962539">float64</span>&nbsp;<span class="op" id="962547">{</span>&nbsp;<span class="keyword" id="962549">return</span>&nbsp;<span class="ident" id="962556">x</span>&nbsp;<span class="op" id="962558">+</span>&nbsp;<span class="ident" id="962560">y</span>&nbsp;<span class="op" id="962562">}</span><br>
<span class="lineno"></span><span class="keyword" id="962564">func</span>&nbsp;<span class="ident" id="962569">sub</span><span class="op" id="962572">(</span><span class="ident" id="962573">x</span><span class="op" id="962574">,</span>&nbsp;<span class="ident" id="962576">y</span>&nbsp;<span class="builtintype" id="962578">float64</span><span class="op" id="962585">)</span>&nbsp;<span class="builtintype" id="962587">float64</span>&nbsp;<span class="op" id="962595">{</span>&nbsp;<span class="keyword" id="962597">return</span>&nbsp;<span class="ident" id="962604">x</span>&nbsp;<span class="op" id="962606">-</span>&nbsp;<span class="ident" id="962608">y</span>&nbsp;<span class="op" id="962610">}</span><br>
<span class="lineno">25</span><span class="keyword" id="962612">func</span>&nbsp;<span class="ident" id="962617">mul</span><span class="op" id="962620">(</span><span class="ident" id="962621">x</span><span class="op" id="962622">,</span>&nbsp;<span class="ident" id="962624">y</span>&nbsp;<span class="builtintype" id="962626">float64</span><span class="op" id="962633">)</span>&nbsp;<span class="builtintype" id="962635">float64</span>&nbsp;<span class="op" id="962643">{</span>&nbsp;<span class="keyword" id="962645">return</span>&nbsp;<span class="ident" id="962652">x</span>&nbsp;<span class="op" id="962654">*</span>&nbsp;<span class="ident" id="962656">y</span>&nbsp;<span class="op" id="962658">}</span><br>
<span class="lineno"></span><span class="keyword" id="962660">func</span>&nbsp;<span class="ident" id="962665">div</span><span class="op" id="962668">(</span><span class="ident" id="962669">x</span><span class="op" id="962670">,</span>&nbsp;<span class="ident" id="962672">y</span>&nbsp;<span class="builtintype" id="962674">float64</span><span class="op" id="962681">)</span>&nbsp;<span class="builtintype" id="962683">float64</span>&nbsp;<span class="op" id="962691">{</span>&nbsp;<span class="keyword" id="962693">return</span>&nbsp;<span class="ident" id="962700">x</span>&nbsp;<span class="op" id="962702">/</span>&nbsp;<span class="ident" id="962704">y</span>&nbsp;<span class="op" id="962706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="962709">func</span>&nbsp;<span class="ident" id="962714">TestFloat64</span><span class="op" id="962725">(</span><span class="ident" id="962726">t</span>&nbsp;<span class="op" id="962728">*</span><span class="ident" id="962729">testing</span><span class="op" id="962736">.</span><span class="ident" id="962737">T</span><span class="op" id="962738">)</span>&nbsp;<span class="op" id="962740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962743">base</span>&nbsp;<span class="op" id="962748">:=</span>&nbsp;<span class="op" id="962751">[</span><span class="op" id="962752">]</span><span class="builtintype" id="962753">float64</span><span class="op" id="962760">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962764">0</span><span class="op" id="962765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962769">math</span><span class="op" id="962773">.</span><span class="ident" id="962774">Copysign</span><span class="op" id="962782">(</span><span class="num" id="962783">0</span><span class="op" id="962784">,</span>&nbsp;<span class="op" id="962786">-</span><span class="num" id="962787">1</span><span class="op" id="962788">)</span><span class="op" id="962789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="962793">-</span><span class="num" id="962794">1</span><span class="op" id="962795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962799">1</span><span class="op" id="962800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962804">math</span><span class="op" id="962808">.</span><span class="ident" id="962809">NaN</span><span class="op" id="962812">(</span><span class="op" id="962813">)</span><span class="op" id="962814">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962818">math</span><span class="op" id="962822">.</span><span class="ident" id="962823">Inf</span><span class="op" id="962826">(</span><span class="op" id="962827">+</span><span class="num" id="962828">1</span><span class="op" id="962829">)</span><span class="op" id="962830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="962834">math</span><span class="op" id="962838">.</span><span class="ident" id="962839">Inf</span><span class="op" id="962842">(</span><span class="op" id="962843">-</span><span class="num" id="962844">1</span><span class="op" id="962845">)</span><span class="op" id="962846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962850">0.1</span><span class="op" id="962853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962857">1.5</span><span class="op" id="962860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962864">1.9999999999999998</span><span class="op" id="962882">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="962888">//&nbsp;all&nbsp;1s&nbsp;mantissa</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962909">1.3333333333333333</span><span class="op" id="962927">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="962933">//&nbsp;1.010101010101...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="962956">1.1428571428571428</span><span class="op" id="962974">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="962980">//&nbsp;1.001001001001...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963003">1.112536929253601e-308</span><span class="op" id="963025">,</span>&nbsp;<span class="comment" id="963027">//&nbsp;first&nbsp;normal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963045">2</span><span class="op" id="963046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963050">4</span><span class="op" id="963051">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963055">8</span><span class="op" id="963056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963060">16</span><span class="op" id="963062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963066">32</span><span class="op" id="963068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963072">64</span><span class="op" id="963074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963078">128</span><span class="op" id="963081">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963085">256</span><span class="op" id="963088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963092">3</span><span class="op" id="963093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963097">12</span><span class="op" id="963099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963103">1234</span><span class="op" id="963107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963111">123456</span><span class="op" id="963117">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963121">-</span><span class="num" id="963122">0.1</span><span class="op" id="963125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963129">-</span><span class="num" id="963130">1.5</span><span class="op" id="963133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963137">-</span><span class="num" id="963138">1.9999999999999998</span><span class="op" id="963156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963160">-</span><span class="num" id="963161">1.3333333333333333</span><span class="op" id="963179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963183">-</span><span class="num" id="963184">1.1428571428571428</span><span class="op" id="963202">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963206">-</span><span class="num" id="963207">2</span><span class="op" id="963208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963212">-</span><span class="num" id="963213">3</span><span class="op" id="963214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963218">1e-200</span><span class="op" id="963224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963228">1e-300</span><span class="op" id="963234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963238">1e-310</span><span class="op" id="963244">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963248">5e-324</span><span class="op" id="963254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963258">1e-105</span><span class="op" id="963264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963268">1e-305</span><span class="op" id="963274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963278">1e+200</span><span class="op" id="963284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963288">1e+306</span><span class="op" id="963294">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963298">1e+307</span><span class="op" id="963304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="963308">1e+308</span><span class="op" id="963314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963320">all</span>&nbsp;<span class="op" id="963324">:=</span>&nbsp;<span class="builtinfunc" id="963327">make</span><span class="op" id="963331">(</span><span class="op" id="963332">[</span><span class="op" id="963333">]</span><span class="builtintype" id="963334">float64</span><span class="op" id="963341">,</span>&nbsp;<span class="num" id="963343">200</span><span class="op" id="963346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="963349">copy</span><span class="op" id="963353">(</span><span class="ident" id="963354">all</span><span class="op" id="963357">,</span>&nbsp;<span class="ident" id="963359">base</span><span class="op" id="963363">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="963366">for</span>&nbsp;<span class="ident" id="963370">i</span>&nbsp;<span class="op" id="963372">:=</span>&nbsp;<span class="builtinfunc" id="963375">len</span><span class="op" id="963378">(</span><span class="ident" id="963379">base</span><span class="op" id="963383">)</span><span class="op" id="963384">;</span>&nbsp;<span class="ident" id="963386">i</span>&nbsp;<span class="op" id="963388">&lt;</span>&nbsp;<span class="builtinfunc" id="963390">len</span><span class="op" id="963393">(</span><span class="ident" id="963394">all</span><span class="op" id="963397">)</span><span class="op" id="963398">;</span>&nbsp;<span class="ident" id="963400">i</span><span class="op" id="963401">++</span>&nbsp;<span class="op" id="963404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963408">all</span><span class="op" id="963411">[</span><span class="ident" id="963412">i</span><span class="op" id="963413">]</span>&nbsp;<span class="op" id="963415">=</span>&nbsp;<span class="ident" id="963417">rand</span><span class="op" id="963421">.</span><span class="ident" id="963422">NormFloat64</span><span class="op" id="963433">(</span><span class="op" id="963434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963441">test</span><span class="op" id="963445">(</span><span class="ident" id="963446">t</span><span class="op" id="963447">,</span>&nbsp;<span class="string" id="963449">&#34;+&#34;</span><span class="op" id="963452">,</span>&nbsp;<span class="ident" id="963454">add</span><span class="op" id="963457">,</span>&nbsp;<span class="ident" id="963459">fop</span><span class="op" id="963462">(</span><span class="ident" id="963463">Fadd64</span><span class="op" id="963469">)</span><span class="op" id="963470">,</span>&nbsp;<span class="ident" id="963472">all</span><span class="op" id="963475">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963478">test</span><span class="op" id="963482">(</span><span class="ident" id="963483">t</span><span class="op" id="963484">,</span>&nbsp;<span class="string" id="963486">&#34;-&#34;</span><span class="op" id="963489">,</span>&nbsp;<span class="ident" id="963491">sub</span><span class="op" id="963494">,</span>&nbsp;<span class="ident" id="963496">fop</span><span class="op" id="963499">(</span><span class="ident" id="963500">Fsub64</span><span class="op" id="963506">)</span><span class="op" id="963507">,</span>&nbsp;<span class="ident" id="963509">all</span><span class="op" id="963512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="963515">if</span>&nbsp;<span class="ident" id="963518">GOARCH</span>&nbsp;<span class="op" id="963525">!=</span>&nbsp;<span class="string" id="963528">&#34;386&#34;</span>&nbsp;<span class="op" id="963534">{</span>&nbsp;<span class="comment" id="963536">//&nbsp;386&nbsp;is&nbsp;not&nbsp;precise!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963561">test</span><span class="op" id="963565">(</span><span class="ident" id="963566">t</span><span class="op" id="963567">,</span>&nbsp;<span class="string" id="963569">&#34;*&#34;</span><span class="op" id="963572">,</span>&nbsp;<span class="ident" id="963574">mul</span><span class="op" id="963577">,</span>&nbsp;<span class="ident" id="963579">fop</span><span class="op" id="963582">(</span><span class="ident" id="963583">Fmul64</span><span class="op" id="963589">)</span><span class="op" id="963590">,</span>&nbsp;<span class="ident" id="963592">all</span><span class="op" id="963595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="963599">test</span><span class="op" id="963603">(</span><span class="ident" id="963604">t</span><span class="op" id="963605">,</span>&nbsp;<span class="string" id="963607">&#34;/&#34;</span><span class="op" id="963610">,</span>&nbsp;<span class="ident" id="963612">div</span><span class="op" id="963615">,</span>&nbsp;<span class="ident" id="963617">fop</span><span class="op" id="963620">(</span><span class="ident" id="963621">Fdiv64</span><span class="op" id="963627">)</span><span class="op" id="963628">,</span>&nbsp;<span class="ident" id="963630">all</span><span class="op" id="963633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="963636">}</span><br>
<span class="lineno">85</span><span class="op" id="963638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="963641">//&nbsp;64&nbsp;-hw-&gt;&nbsp;32&nbsp;-hw-&gt;&nbsp;64</span><br>
<span class="lineno"></span><span class="keyword" id="963665">func</span>&nbsp;<span class="ident" id="963670">trunc32</span><span class="op" id="963677">(</span><span class="ident" id="963678">f</span>&nbsp;<span class="builtintype" id="963680">float64</span><span class="op" id="963687">)</span>&nbsp;<span class="builtintype" id="963689">float64</span>&nbsp;<span class="op" id="963697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="963700">return</span>&nbsp;<span class="builtintype" id="963707">float64</span><span class="op" id="963714">(</span><span class="builtintype" id="963715">float32</span><span class="op" id="963722">(</span><span class="ident" id="963723">f</span><span class="op" id="963724">)</span><span class="op" id="963725">)</span><br>
<span class="lineno">90</span><span class="op" id="963727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="963730">//&nbsp;64&nbsp;-sw-&gt;32&nbsp;-hw-&gt;&nbsp;64</span><br>
<span class="lineno"></span><span class="keyword" id="963753">func</span>&nbsp;<span class="ident" id="963758">to32sw</span><span class="op" id="963764">(</span><span class="ident" id="963765">f</span>&nbsp;<span class="builtintype" id="963767">float64</span><span class="op" id="963774">)</span>&nbsp;<span class="builtintype" id="963776">float64</span>&nbsp;<span class="op" id="963784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="963787">return</span>&nbsp;<span class="builtintype" id="963794">float64</span><span class="op" id="963801">(</span><span class="ident" id="963802">math</span><span class="op" id="963806">.</span><span class="ident" id="963807">Float32frombits</span><span class="op" id="963822">(</span><span class="ident" id="963823">F64to32</span><span class="op" id="963830">(</span><span class="ident" id="963831">math</span><span class="op" id="963835">.</span><span class="ident" id="963836">Float64bits</span><span class="op" id="963847">(</span><span class="ident" id="963848">f</span><span class="op" id="963849">)</span><span class="op" id="963850">)</span><span class="op" id="963851">)</span><span class="op" id="963852">)</span><br>
<span class="lineno">95</span><span class="op" id="963854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="963857">//&nbsp;64&nbsp;-hw-&gt;32&nbsp;-sw-&gt;&nbsp;64</span><br>
<span class="lineno"></span><span class="keyword" id="963880">func</span>&nbsp;<span class="ident" id="963885">to64sw</span><span class="op" id="963891">(</span><span class="ident" id="963892">f</span>&nbsp;<span class="builtintype" id="963894">float64</span><span class="op" id="963901">)</span>&nbsp;<span class="builtintype" id="963903">float64</span>&nbsp;<span class="op" id="963911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="963914">return</span>&nbsp;<span class="ident" id="963921">math</span><span class="op" id="963925">.</span><span class="ident" id="963926">Float64frombits</span><span class="op" id="963941">(</span><span class="ident" id="963942">F32to64</span><span class="op" id="963949">(</span><span class="ident" id="963950">math</span><span class="op" id="963954">.</span><span class="ident" id="963955">Float32bits</span><span class="op" id="963966">(</span><span class="builtintype" id="963967">float32</span><span class="op" id="963974">(</span><span class="ident" id="963975">f</span><span class="op" id="963976">)</span><span class="op" id="963977">)</span><span class="op" id="963978">)</span><span class="op" id="963979">)</span><br>
<span class="lineno">100</span><span class="op" id="963981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="963984">//&nbsp;float64&nbsp;-hw-&gt;&nbsp;int64&nbsp;-hw-&gt;&nbsp;float64</span><br>
<span class="lineno"></span><span class="keyword" id="964021">func</span>&nbsp;<span class="ident" id="964026">hwint64</span><span class="op" id="964033">(</span><span class="ident" id="964034">f</span>&nbsp;<span class="builtintype" id="964036">float64</span><span class="op" id="964043">)</span>&nbsp;<span class="builtintype" id="964045">float64</span>&nbsp;<span class="op" id="964053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964056">return</span>&nbsp;<span class="builtintype" id="964063">float64</span><span class="op" id="964070">(</span><span class="ident" id="964071">int64</span><span class="op" id="964076">(</span><span class="ident" id="964077">f</span><span class="op" id="964078">)</span><span class="op" id="964079">)</span><br>
<span class="lineno">105</span><span class="op" id="964081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="964084">//&nbsp;float64&nbsp;-hw-&gt;&nbsp;int32&nbsp;-hw-&gt;&nbsp;float64</span><br>
<span class="lineno"></span><span class="keyword" id="964121">func</span>&nbsp;<span class="ident" id="964126">hwint32</span><span class="op" id="964133">(</span><span class="ident" id="964134">f</span>&nbsp;<span class="builtintype" id="964136">float64</span><span class="op" id="964143">)</span>&nbsp;<span class="builtintype" id="964145">float64</span>&nbsp;<span class="op" id="964153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964156">return</span>&nbsp;<span class="builtintype" id="964163">float64</span><span class="op" id="964170">(</span><span class="builtintype" id="964171">int32</span><span class="op" id="964176">(</span><span class="ident" id="964177">f</span><span class="op" id="964178">)</span><span class="op" id="964179">)</span><br>
<span class="lineno">110</span><span class="op" id="964181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="964184">//&nbsp;float64&nbsp;-sw-&gt;&nbsp;int64&nbsp;-hw-&gt;&nbsp;float64</span><br>
<span class="lineno"></span><span class="keyword" id="964221">func</span>&nbsp;<span class="ident" id="964226">toint64sw</span><span class="op" id="964235">(</span><span class="ident" id="964236">f</span>&nbsp;<span class="builtintype" id="964238">float64</span><span class="op" id="964245">)</span>&nbsp;<span class="builtintype" id="964247">float64</span>&nbsp;<span class="op" id="964255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="964258">i</span><span class="op" id="964259">,</span>&nbsp;<span class="ident" id="964261">ok</span>&nbsp;<span class="op" id="964264">:=</span>&nbsp;<span class="ident" id="964267">F64toint</span><span class="op" id="964275">(</span><span class="ident" id="964276">math</span><span class="op" id="964280">.</span><span class="ident" id="964281">Float64bits</span><span class="op" id="964292">(</span><span class="ident" id="964293">f</span><span class="op" id="964294">)</span><span class="op" id="964295">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964298">if</span>&nbsp;<span class="op" id="964301">!</span><span class="ident" id="964302">ok</span>&nbsp;<span class="op" id="964305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964309">//&nbsp;There&#39;s&nbsp;no&nbsp;right&nbsp;answer&nbsp;for&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964356">//&nbsp;Match&nbsp;the&nbsp;hardware&nbsp;to&nbsp;pass&nbsp;the&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="964398">i</span>&nbsp;<span class="op" id="964400">=</span>&nbsp;<span class="ident" id="964402">int64</span><span class="op" id="964407">(</span><span class="ident" id="964408">f</span><span class="op" id="964409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="964412">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964415">return</span>&nbsp;<span class="builtintype" id="964422">float64</span><span class="op" id="964429">(</span><span class="ident" id="964430">i</span><span class="op" id="964431">)</span><br>
<span class="lineno"></span><span class="op" id="964433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="964436">//&nbsp;float64&nbsp;-hw-&gt;&nbsp;int64&nbsp;-sw-&gt;&nbsp;float64</span><br>
<span class="lineno"></span><span class="keyword" id="964473">func</span>&nbsp;<span class="ident" id="964478">fromint64sw</span><span class="op" id="964489">(</span><span class="ident" id="964490">f</span>&nbsp;<span class="builtintype" id="964492">float64</span><span class="op" id="964499">)</span>&nbsp;<span class="builtintype" id="964501">float64</span>&nbsp;<span class="op" id="964509">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964512">return</span>&nbsp;<span class="ident" id="964519">math</span><span class="op" id="964523">.</span><span class="ident" id="964524">Float64frombits</span><span class="op" id="964539">(</span><span class="ident" id="964540">Fintto64</span><span class="op" id="964548">(</span><span class="ident" id="964549">int64</span><span class="op" id="964554">(</span><span class="ident" id="964555">f</span><span class="op" id="964556">)</span><span class="op" id="964557">)</span><span class="op" id="964558">)</span><br>
<span class="lineno"></span><span class="op" id="964560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="964563">var</span>&nbsp;<span class="ident" id="964567">nerr</span>&nbsp;<span class="builtintype" id="964572">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="964577">func</span>&nbsp;<span class="ident" id="964582">err</span><span class="op" id="964585">(</span><span class="ident" id="964586">t</span>&nbsp;<span class="op" id="964588">*</span><span class="ident" id="964589">testing</span><span class="op" id="964596">.</span><span class="ident" id="964597">T</span><span class="op" id="964598">,</span>&nbsp;<span class="ident" id="964600">format</span>&nbsp;<span class="builtintype" id="964607">string</span><span class="op" id="964613">,</span>&nbsp;<span class="ident" id="964615">args</span>&nbsp;<span class="op" id="964620">...</span><span class="keyword" id="964623">interface</span><span class="op" id="964632">{</span><span class="op" id="964633">}</span><span class="op" id="964634">)</span>&nbsp;<span class="op" id="964636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="964639">t</span><span class="op" id="964640">.</span><span class="ident" id="964641">Errorf</span><span class="op" id="964647">(</span><span class="ident" id="964648">format</span><span class="op" id="964654">,</span>&nbsp;<span class="ident" id="964656">args</span><span class="op" id="964660">...</span><span class="op" id="964663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964667">//&nbsp;cut&nbsp;errors&nbsp;off&nbsp;after&nbsp;a&nbsp;while.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964701">//&nbsp;otherwise&nbsp;we&nbsp;spend&nbsp;all&nbsp;our&nbsp;time</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964737">//&nbsp;allocating&nbsp;memory&nbsp;to&nbsp;hold&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="964771">//&nbsp;formatted&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964793">if</span>&nbsp;<span class="ident" id="964796">nerr</span><span class="op" id="964800">++</span><span class="op" id="964802">;</span>&nbsp;<span class="ident" id="964804">nerr</span>&nbsp;<span class="op" id="964809">&gt;=</span>&nbsp;<span class="num" id="964812">10</span>&nbsp;<span class="op" id="964815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="964819">t</span><span class="op" id="964820">.</span><span class="ident" id="964821">Fatal</span><span class="op" id="964826">(</span><span class="string" id="964827">&#34;too&nbsp;many&nbsp;errors&#34;</span><span class="op" id="964844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="964847">}</span><br>
<span class="lineno">140</span><span class="op" id="964849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="964852">func</span>&nbsp;<span class="ident" id="964857">test</span><span class="op" id="964861">(</span><span class="ident" id="964862">t</span>&nbsp;<span class="op" id="964864">*</span><span class="ident" id="964865">testing</span><span class="op" id="964872">.</span><span class="ident" id="964873">T</span><span class="op" id="964874">,</span>&nbsp;<span class="ident" id="964876">op</span>&nbsp;<span class="builtintype" id="964879">string</span><span class="op" id="964885">,</span>&nbsp;<span class="ident" id="964887">hw</span><span class="op" id="964889">,</span>&nbsp;<span class="ident" id="964891">sw</span>&nbsp;<span class="keyword" id="964894">func</span><span class="op" id="964898">(</span><span class="builtintype" id="964899">float64</span><span class="op" id="964906">,</span>&nbsp;<span class="builtintype" id="964908">float64</span><span class="op" id="964915">)</span>&nbsp;<span class="builtintype" id="964917">float64</span><span class="op" id="964924">,</span>&nbsp;<span class="ident" id="964926">all</span>&nbsp;<span class="op" id="964930">[</span><span class="op" id="964931">]</span><span class="builtintype" id="964932">float64</span><span class="op" id="964939">)</span>&nbsp;<span class="op" id="964941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964944">for</span>&nbsp;<span class="ident" id="964948">_</span><span class="op" id="964949">,</span>&nbsp;<span class="ident" id="964951">f</span>&nbsp;<span class="op" id="964953">:=</span>&nbsp;<span class="keyword" id="964956">range</span>&nbsp;<span class="ident" id="964962">all</span>&nbsp;<span class="op" id="964966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="964970">for</span>&nbsp;<span class="ident" id="964974">_</span><span class="op" id="964975">,</span>&nbsp;<span class="ident" id="964977">g</span>&nbsp;<span class="op" id="964979">:=</span>&nbsp;<span class="keyword" id="964982">range</span>&nbsp;<span class="ident" id="964988">all</span>&nbsp;<span class="op" id="964992">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="964997">h</span>&nbsp;<span class="op" id="964999">:=</span>&nbsp;<span class="ident" id="965002">hw</span><span class="op" id="965004">(</span><span class="ident" id="965005">f</span><span class="op" id="965006">,</span>&nbsp;<span class="ident" id="965008">g</span><span class="op" id="965009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965014">s</span>&nbsp;<span class="op" id="965016">:=</span>&nbsp;<span class="ident" id="965019">sw</span><span class="op" id="965021">(</span><span class="ident" id="965022">f</span><span class="op" id="965023">,</span>&nbsp;<span class="ident" id="965025">g</span><span class="op" id="965026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965031">if</span>&nbsp;<span class="op" id="965034">!</span><span class="ident" id="965035">same</span><span class="op" id="965039">(</span><span class="ident" id="965040">h</span><span class="op" id="965041">,</span>&nbsp;<span class="ident" id="965043">s</span><span class="op" id="965044">)</span>&nbsp;<span class="op" id="965046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965052">err</span><span class="op" id="965055">(</span><span class="ident" id="965056">t</span><span class="op" id="965057">,</span>&nbsp;<span class="string" id="965059">&#34;%g&nbsp;%s&nbsp;%g&nbsp;=&nbsp;sw&nbsp;%g,&nbsp;hw&nbsp;%g\n&#34;</span><span class="op" id="965086">,</span>&nbsp;<span class="ident" id="965088">f</span><span class="op" id="965089">,</span>&nbsp;<span class="ident" id="965091">op</span><span class="op" id="965093">,</span>&nbsp;<span class="ident" id="965095">g</span><span class="op" id="965096">,</span>&nbsp;<span class="ident" id="965098">s</span><span class="op" id="965099">,</span>&nbsp;<span class="ident" id="965101">h</span><span class="op" id="965102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="965107">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965112">testu</span><span class="op" id="965117">(</span><span class="ident" id="965118">t</span><span class="op" id="965119">,</span>&nbsp;<span class="string" id="965121">&#34;to32&#34;</span><span class="op" id="965127">,</span>&nbsp;<span class="ident" id="965129">trunc32</span><span class="op" id="965136">,</span>&nbsp;<span class="ident" id="965138">to32sw</span><span class="op" id="965144">,</span>&nbsp;<span class="ident" id="965146">h</span><span class="op" id="965147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965152">testu</span><span class="op" id="965157">(</span><span class="ident" id="965158">t</span><span class="op" id="965159">,</span>&nbsp;<span class="string" id="965161">&#34;to64&#34;</span><span class="op" id="965167">,</span>&nbsp;<span class="ident" id="965169">trunc32</span><span class="op" id="965176">,</span>&nbsp;<span class="ident" id="965178">to64sw</span><span class="op" id="965184">,</span>&nbsp;<span class="ident" id="965186">h</span><span class="op" id="965187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965192">testu</span><span class="op" id="965197">(</span><span class="ident" id="965198">t</span><span class="op" id="965199">,</span>&nbsp;<span class="string" id="965201">&#34;toint64&#34;</span><span class="op" id="965210">,</span>&nbsp;<span class="ident" id="965212">hwint64</span><span class="op" id="965219">,</span>&nbsp;<span class="ident" id="965221">toint64sw</span><span class="op" id="965230">,</span>&nbsp;<span class="ident" id="965232">h</span><span class="op" id="965233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965238">testu</span><span class="op" id="965243">(</span><span class="ident" id="965244">t</span><span class="op" id="965245">,</span>&nbsp;<span class="string" id="965247">&#34;fromint64&#34;</span><span class="op" id="965258">,</span>&nbsp;<span class="ident" id="965260">hwint64</span><span class="op" id="965267">,</span>&nbsp;<span class="ident" id="965269">fromint64sw</span><span class="op" id="965280">,</span>&nbsp;<span class="ident" id="965282">h</span><span class="op" id="965283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965288">testcmp</span><span class="op" id="965295">(</span><span class="ident" id="965296">t</span><span class="op" id="965297">,</span>&nbsp;<span class="ident" id="965299">f</span><span class="op" id="965300">,</span>&nbsp;<span class="ident" id="965302">h</span><span class="op" id="965303">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965308">testcmp</span><span class="op" id="965315">(</span><span class="ident" id="965316">t</span><span class="op" id="965317">,</span>&nbsp;<span class="ident" id="965319">h</span><span class="op" id="965320">,</span>&nbsp;<span class="ident" id="965322">f</span><span class="op" id="965323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965328">testcmp</span><span class="op" id="965335">(</span><span class="ident" id="965336">t</span><span class="op" id="965337">,</span>&nbsp;<span class="ident" id="965339">g</span><span class="op" id="965340">,</span>&nbsp;<span class="ident" id="965342">h</span><span class="op" id="965343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965348">testcmp</span><span class="op" id="965355">(</span><span class="ident" id="965356">t</span><span class="op" id="965357">,</span>&nbsp;<span class="ident" id="965359">h</span><span class="op" id="965360">,</span>&nbsp;<span class="ident" id="965362">g</span><span class="op" id="965363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="965367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="965370">}</span><br>
<span class="lineno">160</span><span class="op" id="965372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="965375">func</span>&nbsp;<span class="ident" id="965380">testu</span><span class="op" id="965385">(</span><span class="ident" id="965386">t</span>&nbsp;<span class="op" id="965388">*</span><span class="ident" id="965389">testing</span><span class="op" id="965396">.</span><span class="ident" id="965397">T</span><span class="op" id="965398">,</span>&nbsp;<span class="ident" id="965400">op</span>&nbsp;<span class="builtintype" id="965403">string</span><span class="op" id="965409">,</span>&nbsp;<span class="ident" id="965411">hw</span><span class="op" id="965413">,</span>&nbsp;<span class="ident" id="965415">sw</span>&nbsp;<span class="keyword" id="965418">func</span><span class="op" id="965422">(</span><span class="builtintype" id="965423">float64</span><span class="op" id="965430">)</span>&nbsp;<span class="builtintype" id="965432">float64</span><span class="op" id="965439">,</span>&nbsp;<span class="ident" id="965441">v</span>&nbsp;<span class="builtintype" id="965443">float64</span><span class="op" id="965450">)</span>&nbsp;<span class="op" id="965452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965455">h</span>&nbsp;<span class="op" id="965457">:=</span>&nbsp;<span class="ident" id="965460">hw</span><span class="op" id="965462">(</span><span class="ident" id="965463">v</span><span class="op" id="965464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965467">s</span>&nbsp;<span class="op" id="965469">:=</span>&nbsp;<span class="ident" id="965472">sw</span><span class="op" id="965474">(</span><span class="ident" id="965475">v</span><span class="op" id="965476">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965479">if</span>&nbsp;<span class="op" id="965482">!</span><span class="ident" id="965483">same</span><span class="op" id="965487">(</span><span class="ident" id="965488">h</span><span class="op" id="965489">,</span>&nbsp;<span class="ident" id="965491">s</span><span class="op" id="965492">)</span>&nbsp;<span class="op" id="965494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965498">err</span><span class="op" id="965501">(</span><span class="ident" id="965502">t</span><span class="op" id="965503">,</span>&nbsp;<span class="string" id="965505">&#34;%s&nbsp;%g&nbsp;=&nbsp;sw&nbsp;%g,&nbsp;hw&nbsp;%g\n&#34;</span><span class="op" id="965529">,</span>&nbsp;<span class="ident" id="965531">op</span><span class="op" id="965533">,</span>&nbsp;<span class="ident" id="965535">v</span><span class="op" id="965536">,</span>&nbsp;<span class="ident" id="965538">s</span><span class="op" id="965539">,</span>&nbsp;<span class="ident" id="965541">h</span><span class="op" id="965542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="965545">}</span><br>
<span class="lineno"></span><span class="op" id="965547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="965550">func</span>&nbsp;<span class="ident" id="965555">hwcmp</span><span class="op" id="965560">(</span><span class="ident" id="965561">f</span><span class="op" id="965562">,</span>&nbsp;<span class="ident" id="965564">g</span>&nbsp;<span class="builtintype" id="965566">float64</span><span class="op" id="965573">)</span>&nbsp;<span class="op" id="965575">(</span><span class="ident" id="965576">cmp</span>&nbsp;<span class="builtintype" id="965580">int</span><span class="op" id="965583">,</span>&nbsp;<span class="ident" id="965585">isnan</span>&nbsp;<span class="builtintype" id="965591">bool</span><span class="op" id="965595">)</span>&nbsp;<span class="op" id="965597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965600">switch</span>&nbsp;<span class="op" id="965607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965610">case</span>&nbsp;<span class="ident" id="965615">f</span>&nbsp;<span class="op" id="965617">&lt;</span>&nbsp;<span class="ident" id="965619">g</span><span class="op" id="965620">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965624">return</span>&nbsp;<span class="op" id="965631">-</span><span class="num" id="965632">1</span><span class="op" id="965633">,</span>&nbsp;<span class="builtintype" id="965635">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965642">case</span>&nbsp;<span class="ident" id="965647">f</span>&nbsp;<span class="op" id="965649">&gt;</span>&nbsp;<span class="ident" id="965651">g</span><span class="op" id="965652">:</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965656">return</span>&nbsp;<span class="op" id="965663">+</span><span class="num" id="965664">1</span><span class="op" id="965665">,</span>&nbsp;<span class="builtintype" id="965667">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965674">case</span>&nbsp;<span class="ident" id="965679">f</span>&nbsp;<span class="op" id="965681">==</span>&nbsp;<span class="ident" id="965684">g</span><span class="op" id="965685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965689">return</span>&nbsp;<span class="num" id="965696">0</span><span class="op" id="965697">,</span>&nbsp;<span class="builtintype" id="965699">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="965706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965709">return</span>&nbsp;<span class="num" id="965716">0</span><span class="op" id="965717">,</span>&nbsp;<span class="builtintype" id="965719">true</span>&nbsp;<span class="comment" id="965724">//&nbsp;must&nbsp;be&nbsp;NaN</span><br>
<span class="lineno">180</span><span class="op" id="965739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="965742">func</span>&nbsp;<span class="ident" id="965747">testcmp</span><span class="op" id="965754">(</span><span class="ident" id="965755">t</span>&nbsp;<span class="op" id="965757">*</span><span class="ident" id="965758">testing</span><span class="op" id="965765">.</span><span class="ident" id="965766">T</span><span class="op" id="965767">,</span>&nbsp;<span class="ident" id="965769">f</span><span class="op" id="965770">,</span>&nbsp;<span class="ident" id="965772">g</span>&nbsp;<span class="builtintype" id="965774">float64</span><span class="op" id="965781">)</span>&nbsp;<span class="op" id="965783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965786">hcmp</span><span class="op" id="965790">,</span>&nbsp;<span class="ident" id="965792">hisnan</span>&nbsp;<span class="op" id="965799">:=</span>&nbsp;<span class="ident" id="965802">hwcmp</span><span class="op" id="965807">(</span><span class="ident" id="965808">f</span><span class="op" id="965809">,</span>&nbsp;<span class="ident" id="965811">g</span><span class="op" id="965812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965815">scmp</span><span class="op" id="965819">,</span>&nbsp;<span class="ident" id="965821">sisnan</span>&nbsp;<span class="op" id="965828">:=</span>&nbsp;<span class="ident" id="965831">Fcmp64</span><span class="op" id="965837">(</span><span class="ident" id="965838">math</span><span class="op" id="965842">.</span><span class="ident" id="965843">Float64bits</span><span class="op" id="965854">(</span><span class="ident" id="965855">f</span><span class="op" id="965856">)</span><span class="op" id="965857">,</span>&nbsp;<span class="ident" id="965859">math</span><span class="op" id="965863">.</span><span class="ident" id="965864">Float64bits</span><span class="op" id="965875">(</span><span class="ident" id="965876">g</span><span class="op" id="965877">)</span><span class="op" id="965878">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="965881">if</span>&nbsp;<span class="ident" id="965884">hcmp</span>&nbsp;<span class="op" id="965889">!=</span>&nbsp;<span class="ident" id="965892">scmp</span>&nbsp;<span class="op" id="965897">||</span>&nbsp;<span class="ident" id="965900">hisnan</span>&nbsp;<span class="op" id="965907">!=</span>&nbsp;<span class="ident" id="965910">sisnan</span>&nbsp;<span class="op" id="965917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="965921">err</span><span class="op" id="965924">(</span><span class="ident" id="965925">t</span><span class="op" id="965926">,</span>&nbsp;<span class="string" id="965928">&#34;cmp(%g,&nbsp;%g)&nbsp;=&nbsp;sw&nbsp;%v,&nbsp;%v,&nbsp;hw&nbsp;%v,&nbsp;%v\n&#34;</span><span class="op" id="965966">,</span>&nbsp;<span class="ident" id="965968">f</span><span class="op" id="965969">,</span>&nbsp;<span class="ident" id="965971">g</span><span class="op" id="965972">,</span>&nbsp;<span class="ident" id="965974">scmp</span><span class="op" id="965978">,</span>&nbsp;<span class="ident" id="965980">sisnan</span><span class="op" id="965986">,</span>&nbsp;<span class="ident" id="965988">hcmp</span><span class="op" id="965992">,</span>&nbsp;<span class="ident" id="965994">hisnan</span><span class="op" id="966000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="966003">}</span><br>
<span class="lineno"></span><span class="op" id="966005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="966008">func</span>&nbsp;<span class="ident" id="966013">same</span><span class="op" id="966017">(</span><span class="ident" id="966018">f</span><span class="op" id="966019">,</span>&nbsp;<span class="ident" id="966021">g</span>&nbsp;<span class="builtintype" id="966023">float64</span><span class="op" id="966030">)</span>&nbsp;<span class="builtintype" id="966032">bool</span>&nbsp;<span class="op" id="966037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="966040">if</span>&nbsp;<span class="ident" id="966043">math</span><span class="op" id="966047">.</span><span class="ident" id="966048">IsNaN</span><span class="op" id="966053">(</span><span class="ident" id="966054">f</span><span class="op" id="966055">)</span>&nbsp;<span class="op" id="966057">&amp;&amp;</span>&nbsp;<span class="ident" id="966060">math</span><span class="op" id="966064">.</span><span class="ident" id="966065">IsNaN</span><span class="op" id="966070">(</span><span class="ident" id="966071">g</span><span class="op" id="966072">)</span>&nbsp;<span class="op" id="966074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="966078">return</span>&nbsp;<span class="builtintype" id="966085">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="966091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="966094">if</span>&nbsp;<span class="ident" id="966097">math</span><span class="op" id="966101">.</span><span class="ident" id="966102">Copysign</span><span class="op" id="966110">(</span><span class="num" id="966111">1</span><span class="op" id="966112">,</span>&nbsp;<span class="ident" id="966114">f</span><span class="op" id="966115">)</span>&nbsp;<span class="op" id="966117">!=</span>&nbsp;<span class="ident" id="966120">math</span><span class="op" id="966124">.</span><span class="ident" id="966125">Copysign</span><span class="op" id="966133">(</span><span class="num" id="966134">1</span><span class="op" id="966135">,</span>&nbsp;<span class="ident" id="966137">g</span><span class="op" id="966138">)</span>&nbsp;<span class="op" id="966140">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="966144">return</span>&nbsp;<span class="builtintype" id="966151">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="966158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="966161">return</span>&nbsp;<span class="ident" id="966168">f</span>&nbsp;<span class="op" id="966170">==</span>&nbsp;<span class="ident" id="966173">g</span><br>
<span class="lineno"></span><span class="op" id="966175">}</span>
</div>
</body>
</html>
