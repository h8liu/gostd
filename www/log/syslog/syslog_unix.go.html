<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5282290">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5282345">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5282399">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5282450">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5282483">package</span>&nbsp;<span class="ident" id="5282491">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5282499">import</span>&nbsp;<span class="op" id="5282506">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5282509">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5282519">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="5282525">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5282528">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="5282597">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5282643">func</span>&nbsp;<span class="ident" id="5282648">unixSyslog</span><span class="op" id="5282658">(</span><span class="op" id="5282659">)</span>&nbsp;<span class="op" id="5282661">(</span><span class="ident" id="5282662">conn</span>&nbsp;<span class="ident" id="5282667"><a href="/log/syslog/syslog.go.html#5276773">serverConn</a></span><span class="op" id="5282677">,</span>&nbsp;<span class="ident" id="5282679">err</span>&nbsp;<span class="builtintype" id="5282683">error</span><span class="op" id="5282688">)</span>&nbsp;<span class="op" id="5282690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282693">logTypes</span>&nbsp;<span class="op" id="5282702">:=</span>&nbsp;<span class="op" id="5282705">[</span><span class="op" id="5282706">]</span><span class="builtintype" id="5282707">string</span><span class="op" id="5282713">{</span><span class="string" id="5282714">&#34;unixgram&#34;</span><span class="op" id="5282724">,</span>&nbsp;<span class="string" id="5282726">&#34;unix&#34;</span><span class="op" id="5282732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282735">logPaths</span>&nbsp;<span class="op" id="5282744">:=</span>&nbsp;<span class="op" id="5282747">[</span><span class="op" id="5282748">]</span><span class="builtintype" id="5282749">string</span><span class="op" id="5282755">{</span><span class="string" id="5282756">&#34;/dev/log&#34;</span><span class="op" id="5282766">,</span>&nbsp;<span class="string" id="5282768">&#34;/var/run/syslog&#34;</span><span class="op" id="5282785">,</span>&nbsp;<span class="string" id="5282787">&#34;/var/run/log&#34;</span><span class="op" id="5282801">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282804">for</span>&nbsp;<span class="ident" id="5282808">_</span><span class="op" id="5282809">,</span>&nbsp;<span class="ident" id="5282811">network</span>&nbsp;<span class="op" id="5282819">:=</span>&nbsp;<span class="keyword" id="5282822">range</span>&nbsp;<span class="ident" id="5282828"><a href="/log/syslog/syslog_unix.go.html#5282693">logTypes</a></span>&nbsp;<span class="op" id="5282837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282841">for</span>&nbsp;<span class="ident" id="5282845">_</span><span class="op" id="5282846">,</span>&nbsp;<span class="ident" id="5282848">path</span>&nbsp;<span class="op" id="5282853">:=</span>&nbsp;<span class="keyword" id="5282856">range</span>&nbsp;<span class="ident" id="5282862"><a href="/log/syslog/syslog_unix.go.html#5282735">logPaths</a></span>&nbsp;<span class="op" id="5282871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282876">conn</span><span class="op" id="5282880">,</span>&nbsp;<span class="ident" id="5282882">err</span>&nbsp;<span class="op" id="5282886">:=</span>&nbsp;<span class="ident" id="5282889"><a href="/log/syslog/syslog_unix.go.html#5282519">net</a></span><span class="op" id="5282892">.</span><span class="ident" id="5282893">Dial</span><span class="op" id="5282897">(</span><span class="ident" id="5282898"><a href="/log/syslog/syslog_unix.go.html#5282811">network</a></span><span class="op" id="5282905">,</span>&nbsp;<span class="ident" id="5282907"><a href="/log/syslog/syslog_unix.go.html#5282848">path</a></span><span class="op" id="5282911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282916">if</span>&nbsp;<span class="ident" id="5282919"><a href="/log/syslog/syslog_unix.go.html#5282882">err</a></span>&nbsp;<span class="op" id="5282923">!=</span>&nbsp;<span class="ident" id="5282926">nil</span>&nbsp;<span class="op" id="5282930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282936">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5282948">}</span>&nbsp;<span class="keyword" id="5282950">else</span>&nbsp;<span class="op" id="5282955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282961">return</span>&nbsp;<span class="op" id="5282968">&amp;</span><span class="ident" id="5282969"><a href="/log/syslog/syslog.go.html#5276879">netConn</a></span><span class="op" id="5282976">{</span><span class="ident" id="5282977">conn</span><span class="op" id="5282981">:</span>&nbsp;<span class="ident" id="5282983"><a href="/log/syslog/syslog_unix.go.html#5282876">conn</a></span><span class="op" id="5282987">,</span>&nbsp;<span class="ident" id="5282989">local</span><span class="op" id="5282994">:</span>&nbsp;<span class="ident" id="5282996">true</span><span class="op" id="5283000">}</span><span class="op" id="5283001">,</span>&nbsp;<span class="ident" id="5283003">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283017">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283020">return</span>&nbsp;<span class="ident" id="5283027">nil</span><span class="op" id="5283030">,</span>&nbsp;<span class="ident" id="5283032"><a href="/log/syslog/syslog_unix.go.html#5282509">errors</a></span><span class="op" id="5283038">.</span><span class="ident" id="5283039">New</span><span class="op" id="5283042">(</span><span class="string" id="5283043">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="5283071">)</span><br>
<span class="lineno"></span><span class="op" id="5283073">}</span>
</div>
</body>
</html>
