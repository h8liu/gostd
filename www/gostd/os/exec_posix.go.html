<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html" class="current">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2325314">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2325369">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2325423">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2325474">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2325552">package</span>&nbsp;<span class="ident" id="2325560">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2325564">import</span>&nbsp;<span class="op" id="2325571">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2325574">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2325584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2325587">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2325653">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2325718">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2325743">var</span>&nbsp;<span class="op" id="2325747">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325750">Interrupt</span>&nbsp;<span class="ident" id="2325760">Signal</span>&nbsp;<span class="op" id="2325767">=</span>&nbsp;<span class="ident" id="2325769">syscall</span><span class="op" id="2325776">.</span><span class="ident" id="2325777">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2325785">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2325795">Signal</span>&nbsp;<span class="op" id="2325802">=</span>&nbsp;<span class="ident" id="2325804">syscall</span><span class="op" id="2325811">.</span><span class="ident" id="2325812">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2325820">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2325823">func</span>&nbsp;<span class="ident" id="2325828">startProcess</span><span class="op" id="2325840">(</span><span class="ident" id="2325841">name</span>&nbsp;<span class="builtintype" id="2325846">string</span><span class="op" id="2325852">,</span>&nbsp;<span class="ident" id="2325854">argv</span>&nbsp;<span class="op" id="2325859">[</span><span class="op" id="2325860">]</span><span class="builtintype" id="2325861">string</span><span class="op" id="2325867">,</span>&nbsp;<span class="ident" id="2325869">attr</span>&nbsp;<span class="op" id="2325874">*</span><span class="ident" id="2325875">ProcAttr</span><span class="op" id="2325883">)</span>&nbsp;<span class="op" id="2325885">(</span><span class="ident" id="2325886">p</span>&nbsp;<span class="op" id="2325888">*</span><span class="ident" id="2325889">Process</span><span class="op" id="2325896">,</span>&nbsp;<span class="ident" id="2325898">err</span>&nbsp;<span class="builtintype" id="2325902">error</span><span class="op" id="2325907">)</span>&nbsp;<span class="op" id="2325909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2325912">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2325969">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2326031">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326091">if</span>&nbsp;<span class="ident" id="2326094">attr</span>&nbsp;<span class="op" id="2326099">!=</span>&nbsp;<span class="ident" id="2326102">nil</span>&nbsp;<span class="op" id="2326106">&amp;&amp;</span>&nbsp;<span class="ident" id="2326109">attr</span><span class="op" id="2326113">.</span><span class="ident" id="2326114">Sys</span>&nbsp;<span class="op" id="2326118">==</span>&nbsp;<span class="ident" id="2326121">nil</span>&nbsp;<span class="op" id="2326125">&amp;&amp;</span>&nbsp;<span class="ident" id="2326128">attr</span><span class="op" id="2326132">.</span><span class="ident" id="2326133">Dir</span>&nbsp;<span class="op" id="2326137">!=</span>&nbsp;<span class="string" id="2326140">&#34;&#34;</span>&nbsp;<span class="op" id="2326143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326147">if</span>&nbsp;<span class="ident" id="2326150">_</span><span class="op" id="2326151">,</span>&nbsp;<span class="ident" id="2326153">err</span>&nbsp;<span class="op" id="2326157">:=</span>&nbsp;<span class="ident" id="2326160">Stat</span><span class="op" id="2326164">(</span><span class="ident" id="2326165">attr</span><span class="op" id="2326169">.</span><span class="ident" id="2326170">Dir</span><span class="op" id="2326173">)</span><span class="op" id="2326174">;</span>&nbsp;<span class="ident" id="2326176">err</span>&nbsp;<span class="op" id="2326180">!=</span>&nbsp;<span class="ident" id="2326183">nil</span>&nbsp;<span class="op" id="2326187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326192">pe</span>&nbsp;<span class="op" id="2326195">:=</span>&nbsp;<span class="ident" id="2326198">err</span><span class="op" id="2326201">.</span><span class="op" id="2326202">(</span><span class="op" id="2326203">*</span><span class="ident" id="2326204">PathError</span><span class="op" id="2326213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326218">pe</span><span class="op" id="2326220">.</span><span class="ident" id="2326221">Op</span>&nbsp;<span class="op" id="2326224">=</span>&nbsp;<span class="string" id="2326226">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326237">return</span>&nbsp;<span class="ident" id="2326244">nil</span><span class="op" id="2326247">,</span>&nbsp;<span class="ident" id="2326249">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326261">sysattr</span>&nbsp;<span class="op" id="2326269">:=</span>&nbsp;<span class="op" id="2326272">&amp;</span><span class="ident" id="2326273">syscall</span><span class="op" id="2326280">.</span><span class="ident" id="2326281">ProcAttr</span><span class="op" id="2326289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326293">Dir</span><span class="op" id="2326296">:</span>&nbsp;<span class="ident" id="2326298">attr</span><span class="op" id="2326302">.</span><span class="ident" id="2326303">Dir</span><span class="op" id="2326306">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326310">Env</span><span class="op" id="2326313">:</span>&nbsp;<span class="ident" id="2326315">attr</span><span class="op" id="2326319">.</span><span class="ident" id="2326320">Env</span><span class="op" id="2326323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326327">Sys</span><span class="op" id="2326330">:</span>&nbsp;<span class="ident" id="2326332">attr</span><span class="op" id="2326336">.</span><span class="ident" id="2326337">Sys</span><span class="op" id="2326340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326346">if</span>&nbsp;<span class="ident" id="2326349">sysattr</span><span class="op" id="2326356">.</span><span class="ident" id="2326357">Env</span>&nbsp;<span class="op" id="2326361">==</span>&nbsp;<span class="ident" id="2326364">nil</span>&nbsp;<span class="op" id="2326368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326372">sysattr</span><span class="op" id="2326379">.</span><span class="ident" id="2326380">Env</span>&nbsp;<span class="op" id="2326384">=</span>&nbsp;<span class="ident" id="2326386">Environ</span><span class="op" id="2326393">(</span><span class="op" id="2326394">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326400">for</span>&nbsp;<span class="ident" id="2326404">_</span><span class="op" id="2326405">,</span>&nbsp;<span class="ident" id="2326407">f</span>&nbsp;<span class="op" id="2326409">:=</span>&nbsp;<span class="keyword" id="2326412">range</span>&nbsp;<span class="ident" id="2326418">attr</span><span class="op" id="2326422">.</span><span class="ident" id="2326423">Files</span>&nbsp;<span class="op" id="2326429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326433">sysattr</span><span class="op" id="2326440">.</span><span class="ident" id="2326441">Files</span>&nbsp;<span class="op" id="2326447">=</span>&nbsp;<span class="builtinfunc" id="2326449">append</span><span class="op" id="2326455">(</span><span class="ident" id="2326456">sysattr</span><span class="op" id="2326463">.</span><span class="ident" id="2326464">Files</span><span class="op" id="2326469">,</span>&nbsp;<span class="ident" id="2326471">f</span><span class="op" id="2326472">.</span><span class="ident" id="2326473">Fd</span><span class="op" id="2326475">(</span><span class="op" id="2326476">)</span><span class="op" id="2326477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326484">pid</span><span class="op" id="2326487">,</span>&nbsp;<span class="ident" id="2326489">h</span><span class="op" id="2326490">,</span>&nbsp;<span class="ident" id="2326492">e</span>&nbsp;<span class="op" id="2326494">:=</span>&nbsp;<span class="ident" id="2326497">syscall</span><span class="op" id="2326504">.</span><span class="ident" id="2326505">StartProcess</span><span class="op" id="2326517">(</span><span class="ident" id="2326518">name</span><span class="op" id="2326522">,</span>&nbsp;<span class="ident" id="2326524">argv</span><span class="op" id="2326528">,</span>&nbsp;<span class="ident" id="2326530">sysattr</span><span class="op" id="2326537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326540">if</span>&nbsp;<span class="ident" id="2326543">e</span>&nbsp;<span class="op" id="2326545">!=</span>&nbsp;<span class="ident" id="2326548">nil</span>&nbsp;<span class="op" id="2326552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326556">return</span>&nbsp;<span class="ident" id="2326563">nil</span><span class="op" id="2326566">,</span>&nbsp;<span class="op" id="2326568">&amp;</span><span class="ident" id="2326569">PathError</span><span class="op" id="2326578">{</span><span class="string" id="2326579">&#34;fork/exec&#34;</span><span class="op" id="2326590">,</span>&nbsp;<span class="ident" id="2326592">name</span><span class="op" id="2326596">,</span>&nbsp;<span class="ident" id="2326598">e</span><span class="op" id="2326599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2326602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326605">return</span>&nbsp;<span class="ident" id="2326612">newProcess</span><span class="op" id="2326622">(</span><span class="ident" id="2326623">pid</span><span class="op" id="2326626">,</span>&nbsp;<span class="ident" id="2326628">h</span><span class="op" id="2326629">)</span><span class="op" id="2326630">,</span>&nbsp;<span class="ident" id="2326632">nil</span><br>
<span class="lineno">50</span><span class="op" id="2326636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2326639">func</span>&nbsp;<span class="op" id="2326644">(</span><span class="ident" id="2326645">p</span>&nbsp;<span class="op" id="2326647">*</span><span class="ident" id="2326648">Process</span><span class="op" id="2326655">)</span>&nbsp;<span class="ident" id="2326657">kill</span><span class="op" id="2326661">(</span><span class="op" id="2326662">)</span>&nbsp;<span class="builtintype" id="2326664">error</span>&nbsp;<span class="op" id="2326670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2326673">return</span>&nbsp;<span class="ident" id="2326680">p</span><span class="op" id="2326681">.</span><span class="ident" id="2326682">Signal</span><span class="op" id="2326688">(</span><span class="ident" id="2326689">Kill</span><span class="op" id="2326693">)</span><br>
<span class="lineno"></span><span class="op" id="2326695">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2326698">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2326771">type</span>&nbsp;<span class="ident" id="2326776">ProcessState</span>&nbsp;<span class="keyword" id="2326789">struct</span>&nbsp;<span class="op" id="2326796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326799">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2326806">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2326825">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326847">status</span>&nbsp;<span class="ident" id="2326854">syscall</span><span class="op" id="2326861">.</span><span class="ident" id="2326862">WaitStatus</span>&nbsp;<span class="comment" id="2326873">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326907">rusage</span>&nbsp;<span class="op" id="2326914">*</span><span class="ident" id="2326915">syscall</span><span class="op" id="2326922">.</span><span class="ident" id="2326923">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2326930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326933">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2326986">func</span>&nbsp;<span class="op" id="2326991">(</span><span class="ident" id="2326992">p</span>&nbsp;<span class="op" id="2326994">*</span><span class="ident" id="2326995">ProcessState</span><span class="op" id="2327007">)</span>&nbsp;<span class="ident" id="2327009">Pid</span><span class="op" id="2327012">(</span><span class="op" id="2327013">)</span>&nbsp;<span class="builtintype" id="2327015">int</span>&nbsp;<span class="op" id="2327019">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327022">return</span>&nbsp;<span class="ident" id="2327029">p</span><span class="op" id="2327030">.</span><span class="ident" id="2327031">pid</span><br>
<span class="lineno"></span><span class="op" id="2327035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2327038">func</span>&nbsp;<span class="op" id="2327043">(</span><span class="ident" id="2327044">p</span>&nbsp;<span class="op" id="2327046">*</span><span class="ident" id="2327047">ProcessState</span><span class="op" id="2327059">)</span>&nbsp;<span class="ident" id="2327061">exited</span><span class="op" id="2327067">(</span><span class="op" id="2327068">)</span>&nbsp;<span class="builtintype" id="2327070">bool</span>&nbsp;<span class="op" id="2327075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327078">return</span>&nbsp;<span class="ident" id="2327085">p</span><span class="op" id="2327086">.</span><span class="ident" id="2327087">status</span><span class="op" id="2327093">.</span><span class="ident" id="2327094">Exited</span><span class="op" id="2327100">(</span><span class="op" id="2327101">)</span><br>
<span class="lineno">70</span><span class="op" id="2327103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2327106">func</span>&nbsp;<span class="op" id="2327111">(</span><span class="ident" id="2327112">p</span>&nbsp;<span class="op" id="2327114">*</span><span class="ident" id="2327115">ProcessState</span><span class="op" id="2327127">)</span>&nbsp;<span class="ident" id="2327129">success</span><span class="op" id="2327136">(</span><span class="op" id="2327137">)</span>&nbsp;<span class="builtintype" id="2327139">bool</span>&nbsp;<span class="op" id="2327144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327147">return</span>&nbsp;<span class="ident" id="2327154">p</span><span class="op" id="2327155">.</span><span class="ident" id="2327156">status</span><span class="op" id="2327162">.</span><span class="ident" id="2327163">ExitStatus</span><span class="op" id="2327173">(</span><span class="op" id="2327174">)</span>&nbsp;<span class="op" id="2327176">==</span>&nbsp;<span class="num" id="2327179">0</span><br>
<span class="lineno"></span><span class="op" id="2327181">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2327184">func</span>&nbsp;<span class="op" id="2327189">(</span><span class="ident" id="2327190">p</span>&nbsp;<span class="op" id="2327192">*</span><span class="ident" id="2327193">ProcessState</span><span class="op" id="2327205">)</span>&nbsp;<span class="ident" id="2327207">sys</span><span class="op" id="2327210">(</span><span class="op" id="2327211">)</span>&nbsp;<span class="keyword" id="2327213">interface</span><span class="op" id="2327222">{</span><span class="op" id="2327223">}</span>&nbsp;<span class="op" id="2327225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327228">return</span>&nbsp;<span class="ident" id="2327235">p</span><span class="op" id="2327236">.</span><span class="ident" id="2327237">status</span><br>
<span class="lineno"></span><span class="op" id="2327244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2327247">func</span>&nbsp;<span class="op" id="2327252">(</span><span class="ident" id="2327253">p</span>&nbsp;<span class="op" id="2327255">*</span><span class="ident" id="2327256">ProcessState</span><span class="op" id="2327268">)</span>&nbsp;<span class="ident" id="2327270">sysUsage</span><span class="op" id="2327278">(</span><span class="op" id="2327279">)</span>&nbsp;<span class="keyword" id="2327281">interface</span><span class="op" id="2327290">{</span><span class="op" id="2327291">}</span>&nbsp;<span class="op" id="2327293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327296">return</span>&nbsp;<span class="ident" id="2327303">p</span><span class="op" id="2327304">.</span><span class="ident" id="2327305">rusage</span><br>
<span class="lineno"></span><span class="op" id="2327312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2327315">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2327347">func</span>&nbsp;<span class="ident" id="2327352">itod</span><span class="op" id="2327356">(</span><span class="ident" id="2327357">i</span>&nbsp;<span class="builtintype" id="2327359">int</span><span class="op" id="2327362">)</span>&nbsp;<span class="builtintype" id="2327364">string</span>&nbsp;<span class="op" id="2327371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327374">if</span>&nbsp;<span class="ident" id="2327377">i</span>&nbsp;<span class="op" id="2327379">==</span>&nbsp;<span class="num" id="2327382">0</span>&nbsp;<span class="op" id="2327384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327388">return</span>&nbsp;<span class="string" id="2327395">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327404">u</span>&nbsp;<span class="op" id="2327406">:=</span>&nbsp;<span class="ident" id="2327409">uint64</span><span class="op" id="2327415">(</span><span class="ident" id="2327416">i</span><span class="op" id="2327417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327420">if</span>&nbsp;<span class="ident" id="2327423">i</span>&nbsp;<span class="op" id="2327425">&lt;</span>&nbsp;<span class="num" id="2327427">0</span>&nbsp;<span class="op" id="2327429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327433">u</span>&nbsp;<span class="op" id="2327435">=</span>&nbsp;<span class="op" id="2327437">-</span><span class="ident" id="2327438">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2327445">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327484">var</span>&nbsp;<span class="ident" id="2327488">b</span>&nbsp;<span class="op" id="2327490">[</span><span class="num" id="2327491">32</span><span class="op" id="2327493">]</span><span class="builtintype" id="2327494">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327500">bp</span>&nbsp;<span class="op" id="2327503">:=</span>&nbsp;<span class="builtinfunc" id="2327506">len</span><span class="op" id="2327509">(</span><span class="ident" id="2327510">b</span><span class="op" id="2327511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327514">for</span>&nbsp;<span class="op" id="2327518">;</span>&nbsp;<span class="ident" id="2327520">u</span>&nbsp;<span class="op" id="2327522">&gt;</span>&nbsp;<span class="num" id="2327524">0</span><span class="op" id="2327525">;</span>&nbsp;<span class="ident" id="2327527">u</span>&nbsp;<span class="op" id="2327529">/=</span>&nbsp;<span class="num" id="2327532">10</span>&nbsp;<span class="op" id="2327535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327539">bp</span><span class="op" id="2327541">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327546">b</span><span class="op" id="2327547">[</span><span class="ident" id="2327548">bp</span><span class="op" id="2327550">]</span>&nbsp;<span class="op" id="2327552">=</span>&nbsp;<span class="builtintype" id="2327554">byte</span><span class="op" id="2327558">(</span><span class="ident" id="2327559">u</span><span class="op" id="2327560">%</span><span class="num" id="2327561">10</span><span class="op" id="2327563">)</span>&nbsp;<span class="op" id="2327565">+</span>&nbsp;<span class="string" id="2327567">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327576">if</span>&nbsp;<span class="ident" id="2327579">i</span>&nbsp;<span class="op" id="2327581">&lt;</span>&nbsp;<span class="num" id="2327583">0</span>&nbsp;<span class="op" id="2327585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327589">bp</span><span class="op" id="2327591">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327596">b</span><span class="op" id="2327597">[</span><span class="ident" id="2327598">bp</span><span class="op" id="2327600">]</span>&nbsp;<span class="op" id="2327602">=</span>&nbsp;<span class="string" id="2327604">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327613">return</span>&nbsp;<span class="builtintype" id="2327620">string</span><span class="op" id="2327626">(</span><span class="ident" id="2327627">b</span><span class="op" id="2327628">[</span><span class="ident" id="2327629">bp</span><span class="op" id="2327631">:</span><span class="op" id="2327632">]</span><span class="op" id="2327633">)</span><br>
<span class="lineno"></span><span class="op" id="2327635">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2327638">func</span>&nbsp;<span class="op" id="2327643">(</span><span class="ident" id="2327644">p</span>&nbsp;<span class="op" id="2327646">*</span><span class="ident" id="2327647">ProcessState</span><span class="op" id="2327659">)</span>&nbsp;<span class="ident" id="2327661">String</span><span class="op" id="2327667">(</span><span class="op" id="2327668">)</span>&nbsp;<span class="builtintype" id="2327670">string</span>&nbsp;<span class="op" id="2327677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327680">if</span>&nbsp;<span class="ident" id="2327683">p</span>&nbsp;<span class="op" id="2327685">==</span>&nbsp;<span class="ident" id="2327688">nil</span>&nbsp;<span class="op" id="2327692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327696">return</span>&nbsp;<span class="string" id="2327703">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2327712">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327715">status</span>&nbsp;<span class="op" id="2327722">:=</span>&nbsp;<span class="ident" id="2327725">p</span><span class="op" id="2327726">.</span><span class="ident" id="2327727">Sys</span><span class="op" id="2327730">(</span><span class="op" id="2327731">)</span><span class="op" id="2327732">.</span><span class="op" id="2327733">(</span><span class="ident" id="2327734">syscall</span><span class="op" id="2327741">.</span><span class="ident" id="2327742">WaitStatus</span><span class="op" id="2327752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327755">res</span>&nbsp;<span class="op" id="2327759">:=</span>&nbsp;<span class="string" id="2327762">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327766">switch</span>&nbsp;<span class="op" id="2327773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327776">case</span>&nbsp;<span class="ident" id="2327781">status</span><span class="op" id="2327787">.</span><span class="ident" id="2327788">Exited</span><span class="op" id="2327794">(</span><span class="op" id="2327795">)</span><span class="op" id="2327796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327800">res</span>&nbsp;<span class="op" id="2327804">=</span>&nbsp;<span class="string" id="2327806">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2327821">+</span>&nbsp;<span class="ident" id="2327823">itod</span><span class="op" id="2327827">(</span><span class="ident" id="2327828">status</span><span class="op" id="2327834">.</span><span class="ident" id="2327835">ExitStatus</span><span class="op" id="2327845">(</span><span class="op" id="2327846">)</span><span class="op" id="2327847">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327850">case</span>&nbsp;<span class="ident" id="2327855">status</span><span class="op" id="2327861">.</span><span class="ident" id="2327862">Signaled</span><span class="op" id="2327870">(</span><span class="op" id="2327871">)</span><span class="op" id="2327872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327876">res</span>&nbsp;<span class="op" id="2327880">=</span>&nbsp;<span class="string" id="2327882">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2327893">+</span>&nbsp;<span class="ident" id="2327895">status</span><span class="op" id="2327901">.</span><span class="ident" id="2327902">Signal</span><span class="op" id="2327908">(</span><span class="op" id="2327909">)</span><span class="op" id="2327910">.</span><span class="ident" id="2327911">String</span><span class="op" id="2327917">(</span><span class="op" id="2327918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327921">case</span>&nbsp;<span class="ident" id="2327926">status</span><span class="op" id="2327932">.</span><span class="ident" id="2327933">Stopped</span><span class="op" id="2327940">(</span><span class="op" id="2327941">)</span><span class="op" id="2327942">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327946">res</span>&nbsp;<span class="op" id="2327950">=</span>&nbsp;<span class="string" id="2327952">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2327968">+</span>&nbsp;<span class="ident" id="2327970">status</span><span class="op" id="2327976">.</span><span class="ident" id="2327977">StopSignal</span><span class="op" id="2327987">(</span><span class="op" id="2327988">)</span><span class="op" id="2327989">.</span><span class="ident" id="2327990">String</span><span class="op" id="2327996">(</span><span class="op" id="2327997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328001">if</span>&nbsp;<span class="ident" id="2328004">status</span><span class="op" id="2328010">.</span><span class="ident" id="2328011">StopSignal</span><span class="op" id="2328021">(</span><span class="op" id="2328022">)</span>&nbsp;<span class="op" id="2328024">==</span>&nbsp;<span class="ident" id="2328027">syscall</span><span class="op" id="2328034">.</span><span class="ident" id="2328035">SIGTRAP</span>&nbsp;<span class="op" id="2328043">&amp;&amp;</span>&nbsp;<span class="ident" id="2328046">status</span><span class="op" id="2328052">.</span><span class="ident" id="2328053">TrapCause</span><span class="op" id="2328062">(</span><span class="op" id="2328063">)</span>&nbsp;<span class="op" id="2328065">!=</span>&nbsp;<span class="num" id="2328068">0</span>&nbsp;<span class="op" id="2328070">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328075">res</span>&nbsp;<span class="op" id="2328079">+=</span>&nbsp;<span class="string" id="2328082">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2328092">+</span>&nbsp;<span class="ident" id="2328094">itod</span><span class="op" id="2328098">(</span><span class="ident" id="2328099">status</span><span class="op" id="2328105">.</span><span class="ident" id="2328106">TrapCause</span><span class="op" id="2328115">(</span><span class="op" id="2328116">)</span><span class="op" id="2328117">)</span>&nbsp;<span class="op" id="2328119">+</span>&nbsp;<span class="string" id="2328121">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328130">case</span>&nbsp;<span class="ident" id="2328135">status</span><span class="op" id="2328141">.</span><span class="ident" id="2328142">Continued</span><span class="op" id="2328151">(</span><span class="op" id="2328152">)</span><span class="op" id="2328153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328157">res</span>&nbsp;<span class="op" id="2328161">=</span>&nbsp;<span class="string" id="2328163">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328176">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328179">if</span>&nbsp;<span class="ident" id="2328182">status</span><span class="op" id="2328188">.</span><span class="ident" id="2328189">CoreDump</span><span class="op" id="2328197">(</span><span class="op" id="2328198">)</span>&nbsp;<span class="op" id="2328200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328204">res</span>&nbsp;<span class="op" id="2328208">+=</span>&nbsp;<span class="string" id="2328211">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328232">return</span>&nbsp;<span class="ident" id="2328239">res</span><br>
<span class="lineno"></span><span class="op" id="2328243">}</span>
</div>
</body>
</html>
