<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5576588">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5576643">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5576697">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5576748">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5576781">package</span>&nbsp;<span class="ident" id="5576789">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5576797">import</span>&nbsp;<span class="op" id="5576804">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5576807">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5576817">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="5576823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5576826">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="5576895">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5576941">func</span>&nbsp;<span class="ident" id="5576946">unixSyslog</span><span class="op" id="5576956">(</span><span class="op" id="5576957">)</span>&nbsp;<span class="op" id="5576959">(</span><span class="ident" id="5576960">conn</span>&nbsp;<span class="ident" id="5576965">serverConn</span><span class="op" id="5576975">,</span>&nbsp;<span class="ident" id="5576977">err</span>&nbsp;<span class="builtintype" id="5576981">error</span><span class="op" id="5576986">)</span>&nbsp;<span class="op" id="5576988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5576991">logTypes</span>&nbsp;<span class="op" id="5577000">:=</span>&nbsp;<span class="op" id="5577003">[</span><span class="op" id="5577004">]</span><span class="builtintype" id="5577005">string</span><span class="op" id="5577011">{</span><span class="string" id="5577012">&#34;unixgram&#34;</span><span class="op" id="5577022">,</span>&nbsp;<span class="string" id="5577024">&#34;unix&#34;</span><span class="op" id="5577030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5577033">logPaths</span>&nbsp;<span class="op" id="5577042">:=</span>&nbsp;<span class="op" id="5577045">[</span><span class="op" id="5577046">]</span><span class="builtintype" id="5577047">string</span><span class="op" id="5577053">{</span><span class="string" id="5577054">&#34;/dev/log&#34;</span><span class="op" id="5577064">,</span>&nbsp;<span class="string" id="5577066">&#34;/var/run/syslog&#34;</span><span class="op" id="5577083">,</span>&nbsp;<span class="string" id="5577085">&#34;/var/run/log&#34;</span><span class="op" id="5577099">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577102">for</span>&nbsp;<span class="ident" id="5577106">_</span><span class="op" id="5577107">,</span>&nbsp;<span class="ident" id="5577109">network</span>&nbsp;<span class="op" id="5577117">:=</span>&nbsp;<span class="keyword" id="5577120">range</span>&nbsp;<span class="ident" id="5577126">logTypes</span>&nbsp;<span class="op" id="5577135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577139">for</span>&nbsp;<span class="ident" id="5577143">_</span><span class="op" id="5577144">,</span>&nbsp;<span class="ident" id="5577146">path</span>&nbsp;<span class="op" id="5577151">:=</span>&nbsp;<span class="keyword" id="5577154">range</span>&nbsp;<span class="ident" id="5577160">logPaths</span>&nbsp;<span class="op" id="5577169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5577174">conn</span><span class="op" id="5577178">,</span>&nbsp;<span class="ident" id="5577180">err</span>&nbsp;<span class="op" id="5577184">:=</span>&nbsp;<span class="ident" id="5577187">net</span><span class="op" id="5577190">.</span><span class="ident" id="5577191">Dial</span><span class="op" id="5577195">(</span><span class="ident" id="5577196">network</span><span class="op" id="5577203">,</span>&nbsp;<span class="ident" id="5577205">path</span><span class="op" id="5577209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577214">if</span>&nbsp;<span class="ident" id="5577217">err</span>&nbsp;<span class="op" id="5577221">!=</span>&nbsp;<span class="ident" id="5577224">nil</span>&nbsp;<span class="op" id="5577228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577234">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5577246">}</span>&nbsp;<span class="keyword" id="5577248">else</span>&nbsp;<span class="op" id="5577253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577259">return</span>&nbsp;<span class="op" id="5577266">&amp;</span><span class="ident" id="5577267">netConn</span><span class="op" id="5577274">{</span><span class="ident" id="5577275">conn</span><span class="op" id="5577279">:</span>&nbsp;<span class="ident" id="5577281">conn</span><span class="op" id="5577285">,</span>&nbsp;<span class="ident" id="5577287">local</span><span class="op" id="5577292">:</span>&nbsp;<span class="builtintype" id="5577294">true</span><span class="op" id="5577298">}</span><span class="op" id="5577299">,</span>&nbsp;<span class="ident" id="5577301">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5577308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5577312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5577315">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5577318">return</span>&nbsp;<span class="ident" id="5577325">nil</span><span class="op" id="5577328">,</span>&nbsp;<span class="ident" id="5577330">errors</span><span class="op" id="5577336">.</span><span class="ident" id="5577337">New</span><span class="op" id="5577340">(</span><span class="string" id="5577341">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="5577369">)</span><br>
<span class="lineno"></span><span class="op" id="5577371">}</span>
</div>
</body>
</html>
