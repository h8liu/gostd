<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6061096">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6061151">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6061205">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6061256">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6061324">//</span><br>
<span class="lineno"></span><span class="comment" id="6061327">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6061405">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6061480">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6061530">//</span><br>
<span class="lineno"></span><span class="comment" id="6061533">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6061557">//</span><br>
<span class="lineno"></span><span class="comment" id="6061560">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6061606">//</span><br>
<span class="lineno">15</span><span class="comment" id="6061609">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6061677">//</span><br>
<span class="lineno"></span><span class="comment" id="6061680">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6061759">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6061824">//</span><br>
<span class="lineno">20</span><span class="comment" id="6061827">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6061896">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6061966">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6061976">//</span><br>
<span class="lineno"></span><span class="comment" id="6061979">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6061994">//</span><br>
<span class="lineno"></span><span class="comment" id="6061997">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6062029">//</span><br>
<span class="lineno"></span><span class="comment" id="6062032">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6062057">//</span><br>
<span class="lineno">30</span><span class="comment" id="6062060">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6062097">//</span><br>
<span class="lineno"></span><span class="comment" id="6062100">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6062170">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6062213">//</span><br>
<span class="lineno">35</span><span class="comment" id="6062216">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6062263">//</span><br>
<span class="lineno"></span><span class="comment" id="6062266">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6062280">//</span><br>
<span class="lineno"></span><span class="comment" id="6062283">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6062329">//</span><br>
<span class="lineno"></span><span class="comment" id="6062332">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6062389">//</span><br>
<span class="lineno"></span><span class="comment" id="6062392">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6062407">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6062430">//</span><br>
<span class="lineno"></span><span class="comment" id="6062433">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6062447">//</span><br>
<span class="lineno"></span><span class="comment" id="6062450">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6062466">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6062491">package</span>&nbsp;<span class="ident" id="6062499">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6062504">import</span>&nbsp;<span class="op" id="6062511">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062514">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062523">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062532">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062542">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062549">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6062555">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6062565">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6062568">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6062616">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6062664">type</span>&nbsp;<span class="ident" id="6062669">ParseError</span>&nbsp;<span class="keyword" id="6062680">struct</span>&nbsp;<span class="op" id="6062687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062690">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6062697">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6062703">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062737">Column</span>&nbsp;<span class="builtintype" id="6062744">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6062750">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062799">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6062806">error</span>&nbsp;<span class="comment" id="6062812">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6062832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6062835">func</span>&nbsp;<span class="op" id="6062840">(</span><span class="ident" id="6062841">e</span>&nbsp;<span class="op" id="6062843">*</span><span class="ident" id="6062844">ParseError</span><span class="op" id="6062854">)</span>&nbsp;<span class="ident" id="6062856">Error</span><span class="op" id="6062861">(</span><span class="op" id="6062862">)</span>&nbsp;<span class="builtintype" id="6062864">string</span>&nbsp;<span class="op" id="6062871">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062874">return</span>&nbsp;<span class="ident" id="6062881">fmt</span><span class="op" id="6062884">.</span><span class="ident" id="6062885">Sprintf</span><span class="op" id="6062892">(</span><span class="string" id="6062893">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6062917">,</span>&nbsp;<span class="ident" id="6062919">e</span><span class="op" id="6062920">.</span><span class="ident" id="6062921">Line</span><span class="op" id="6062925">,</span>&nbsp;<span class="ident" id="6062927">e</span><span class="op" id="6062928">.</span><span class="ident" id="6062929">Column</span><span class="op" id="6062935">,</span>&nbsp;<span class="ident" id="6062937">e</span><span class="op" id="6062938">.</span><span class="ident" id="6062939">Err</span><span class="op" id="6062942">)</span><br>
<span class="lineno"></span><span class="op" id="6062944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6062947">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6063012">var</span>&nbsp;<span class="op" id="6063016">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063019">ErrTrailingComma</span>&nbsp;<span class="op" id="6063036">=</span>&nbsp;<span class="ident" id="6063038">errors</span><span class="op" id="6063044">.</span><span class="ident" id="6063045">New</span><span class="op" id="6063048">(</span><span class="string" id="6063049">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6063081">)</span>&nbsp;<span class="comment" id="6063083">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063102">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063119">=</span>&nbsp;<span class="ident" id="6063121">errors</span><span class="op" id="6063127">.</span><span class="ident" id="6063128">New</span><span class="op" id="6063131">(</span><span class="string" id="6063132">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6063161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063164">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063181">=</span>&nbsp;<span class="ident" id="6063183">errors</span><span class="op" id="6063189">.</span><span class="ident" id="6063190">New</span><span class="op" id="6063193">(</span><span class="string" id="6063194">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6063218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063221">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063238">=</span>&nbsp;<span class="ident" id="6063240">errors</span><span class="op" id="6063246">.</span><span class="ident" id="6063247">New</span><span class="op" id="6063250">(</span><span class="string" id="6063251">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6063283">)</span><br>
<span class="lineno"></span><span class="op" id="6063285">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6063288">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6063339">//</span><br>
<span class="lineno"></span><span class="comment" id="6063342">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6063418">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6063492">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6063526">//</span><br>
<span class="lineno"></span><span class="comment" id="6063529">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6063583">//</span><br>
<span class="lineno"></span><span class="comment" id="6063586">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6063659">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6063693">//</span><br>
<span class="lineno"></span><span class="comment" id="6063696">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6063760">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6063838">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6063911">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6063986">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6064044">//</span><br>
<span class="lineno"></span><span class="comment" id="6064047">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6064119">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6064170">//</span><br>
<span class="lineno"></span><span class="comment" id="6064173">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6064248">type</span>&nbsp;<span class="ident" id="6064253">Reader</span>&nbsp;<span class="keyword" id="6064260">struct</span>&nbsp;<span class="op" id="6064267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064270">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064287">rune</span>&nbsp;<span class="comment" id="6064292">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064338">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064355">rune</span>&nbsp;<span class="comment" id="6064360">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064400">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6064417">int</span>&nbsp;&nbsp;<span class="comment" id="6064422">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064463">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064480">bool</span>&nbsp;<span class="comment" id="6064485">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064507">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064524">bool</span>&nbsp;<span class="comment" id="6064529">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064575">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6064592">bool</span>&nbsp;<span class="comment" id="6064597">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064620">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064637">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064642">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6064659">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064664">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6064681">*</span><span class="ident" id="6064682">bufio</span><span class="op" id="6064687">.</span><span class="ident" id="6064688">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064696">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6064713">bytes</span><span class="op" id="6064718">.</span><span class="ident" id="6064719">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6064726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6064729">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6064782">func</span>&nbsp;<span class="ident" id="6064787">NewReader</span><span class="op" id="6064796">(</span><span class="ident" id="6064797">r</span>&nbsp;<span class="ident" id="6064799">io</span><span class="op" id="6064801">.</span><span class="ident" id="6064802">Reader</span><span class="op" id="6064808">)</span>&nbsp;<span class="op" id="6064810">*</span><span class="ident" id="6064811">Reader</span>&nbsp;<span class="op" id="6064818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064821">return</span>&nbsp;<span class="op" id="6064828">&amp;</span><span class="ident" id="6064829">Reader</span><span class="op" id="6064835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064839">Comma</span><span class="op" id="6064844">:</span>&nbsp;<span class="string" id="6064846">&#39;,&#39;</span><span class="op" id="6064849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064853">r</span><span class="op" id="6064854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6064860">bufio</span><span class="op" id="6064865">.</span><span class="ident" id="6064866">NewReader</span><span class="op" id="6064875">(</span><span class="ident" id="6064876">r</span><span class="op" id="6064877">)</span><span class="op" id="6064878">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064881">}</span><br>
<span class="lineno"></span><span class="op" id="6064883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6064886">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6064934">func</span>&nbsp;<span class="op" id="6064939">(</span><span class="ident" id="6064940">r</span>&nbsp;<span class="op" id="6064942">*</span><span class="ident" id="6064943">Reader</span><span class="op" id="6064949">)</span>&nbsp;<span class="builtintype" id="6064951">error</span><span class="op" id="6064956">(</span><span class="ident" id="6064957">err</span>&nbsp;<span class="builtintype" id="6064961">error</span><span class="op" id="6064966">)</span>&nbsp;<span class="builtintype" id="6064968">error</span>&nbsp;<span class="op" id="6064974">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064977">return</span>&nbsp;<span class="op" id="6064984">&amp;</span><span class="ident" id="6064985">ParseError</span><span class="op" id="6064995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064999">Line</span><span class="op" id="6065003">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6065007">r</span><span class="op" id="6065008">.</span><span class="ident" id="6065009">line</span><span class="op" id="6065013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065017">Column</span><span class="op" id="6065023">:</span>&nbsp;<span class="ident" id="6065025">r</span><span class="op" id="6065026">.</span><span class="ident" id="6065027">column</span><span class="op" id="6065033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065037">Err</span><span class="op" id="6065040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6065045">err</span><span class="op" id="6065048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065051">}</span><br>
<span class="lineno">130</span><span class="op" id="6065053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6065056">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6065133">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6065167">func</span>&nbsp;<span class="op" id="6065172">(</span><span class="ident" id="6065173">r</span>&nbsp;<span class="op" id="6065175">*</span><span class="ident" id="6065176">Reader</span><span class="op" id="6065182">)</span>&nbsp;<span class="ident" id="6065184">Read</span><span class="op" id="6065188">(</span><span class="op" id="6065189">)</span>&nbsp;<span class="op" id="6065191">(</span><span class="ident" id="6065192">record</span>&nbsp;<span class="op" id="6065199">[</span><span class="op" id="6065200">]</span><span class="builtintype" id="6065201">string</span><span class="op" id="6065207">,</span>&nbsp;<span class="ident" id="6065209">err</span>&nbsp;<span class="builtintype" id="6065213">error</span><span class="op" id="6065218">)</span>&nbsp;<span class="op" id="6065220">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065223">for</span>&nbsp;<span class="op" id="6065227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065231">record</span><span class="op" id="6065237">,</span>&nbsp;<span class="ident" id="6065239">err</span>&nbsp;<span class="op" id="6065243">=</span>&nbsp;<span class="ident" id="6065245">r</span><span class="op" id="6065246">.</span><span class="ident" id="6065247">parseRecord</span><span class="op" id="6065258">(</span><span class="op" id="6065259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065263">if</span>&nbsp;<span class="ident" id="6065266">record</span>&nbsp;<span class="op" id="6065273">!=</span>&nbsp;<span class="ident" id="6065276">nil</span>&nbsp;<span class="op" id="6065280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065285">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065293">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065297">if</span>&nbsp;<span class="ident" id="6065300">err</span>&nbsp;<span class="op" id="6065304">!=</span>&nbsp;<span class="ident" id="6065307">nil</span>&nbsp;<span class="op" id="6065311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065316">return</span>&nbsp;<span class="ident" id="6065323">nil</span><span class="op" id="6065326">,</span>&nbsp;<span class="ident" id="6065328">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065341">if</span>&nbsp;<span class="ident" id="6065344">r</span><span class="op" id="6065345">.</span><span class="ident" id="6065346">FieldsPerRecord</span>&nbsp;<span class="op" id="6065362">&gt;</span>&nbsp;<span class="num" id="6065364">0</span>&nbsp;<span class="op" id="6065366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065370">if</span>&nbsp;<span class="builtinfunc" id="6065373">len</span><span class="op" id="6065376">(</span><span class="ident" id="6065377">record</span><span class="op" id="6065383">)</span>&nbsp;<span class="op" id="6065385">!=</span>&nbsp;<span class="ident" id="6065388">r</span><span class="op" id="6065389">.</span><span class="ident" id="6065390">FieldsPerRecord</span>&nbsp;<span class="op" id="6065406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065411">r</span><span class="op" id="6065412">.</span><span class="ident" id="6065413">column</span>&nbsp;<span class="op" id="6065420">=</span>&nbsp;<span class="num" id="6065422">0</span>&nbsp;<span class="comment" id="6065424">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065456">return</span>&nbsp;<span class="ident" id="6065463">record</span><span class="op" id="6065469">,</span>&nbsp;<span class="ident" id="6065471">r</span><span class="op" id="6065472">.</span><span class="builtintype" id="6065473">error</span><span class="op" id="6065478">(</span><span class="ident" id="6065479">ErrFieldCount</span><span class="op" id="6065492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065496">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065499">}</span>&nbsp;<span class="keyword" id="6065501">else</span>&nbsp;<span class="keyword" id="6065506">if</span>&nbsp;<span class="ident" id="6065509">r</span><span class="op" id="6065510">.</span><span class="ident" id="6065511">FieldsPerRecord</span>&nbsp;<span class="op" id="6065527">==</span>&nbsp;<span class="num" id="6065530">0</span>&nbsp;<span class="op" id="6065532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065536">r</span><span class="op" id="6065537">.</span><span class="ident" id="6065538">FieldsPerRecord</span>&nbsp;<span class="op" id="6065554">=</span>&nbsp;<span class="builtinfunc" id="6065556">len</span><span class="op" id="6065559">(</span><span class="ident" id="6065560">record</span><span class="op" id="6065566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065572">return</span>&nbsp;<span class="ident" id="6065579">record</span><span class="op" id="6065585">,</span>&nbsp;<span class="ident" id="6065587">nil</span><br>
<span class="lineno"></span><span class="op" id="6065591">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6065594">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6065645">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6065682">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6065758">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6065836">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6065849">func</span>&nbsp;<span class="op" id="6065854">(</span><span class="ident" id="6065855">r</span>&nbsp;<span class="op" id="6065857">*</span><span class="ident" id="6065858">Reader</span><span class="op" id="6065864">)</span>&nbsp;<span class="ident" id="6065866">ReadAll</span><span class="op" id="6065873">(</span><span class="op" id="6065874">)</span>&nbsp;<span class="op" id="6065876">(</span><span class="ident" id="6065877">records</span>&nbsp;<span class="op" id="6065885">[</span><span class="op" id="6065886">]</span><span class="op" id="6065887">[</span><span class="op" id="6065888">]</span><span class="builtintype" id="6065889">string</span><span class="op" id="6065895">,</span>&nbsp;<span class="ident" id="6065897">err</span>&nbsp;<span class="builtintype" id="6065901">error</span><span class="op" id="6065906">)</span>&nbsp;<span class="op" id="6065908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065911">for</span>&nbsp;<span class="op" id="6065915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065919">record</span><span class="op" id="6065925">,</span>&nbsp;<span class="ident" id="6065927">err</span>&nbsp;<span class="op" id="6065931">:=</span>&nbsp;<span class="ident" id="6065934">r</span><span class="op" id="6065935">.</span><span class="ident" id="6065936">Read</span><span class="op" id="6065940">(</span><span class="op" id="6065941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065945">if</span>&nbsp;<span class="ident" id="6065948">err</span>&nbsp;<span class="op" id="6065952">==</span>&nbsp;<span class="ident" id="6065955">io</span><span class="op" id="6065957">.</span><span class="ident" id="6065958">EOF</span>&nbsp;<span class="op" id="6065962">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065967">return</span>&nbsp;<span class="ident" id="6065974">records</span><span class="op" id="6065981">,</span>&nbsp;<span class="ident" id="6065983">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065993">if</span>&nbsp;<span class="ident" id="6065996">err</span>&nbsp;<span class="op" id="6066000">!=</span>&nbsp;<span class="ident" id="6066003">nil</span>&nbsp;<span class="op" id="6066007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066012">return</span>&nbsp;<span class="ident" id="6066019">nil</span><span class="op" id="6066022">,</span>&nbsp;<span class="ident" id="6066024">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066030">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066034">records</span>&nbsp;<span class="op" id="6066042">=</span>&nbsp;<span class="builtinfunc" id="6066044">append</span><span class="op" id="6066050">(</span><span class="ident" id="6066051">records</span><span class="op" id="6066058">,</span>&nbsp;<span class="ident" id="6066060">record</span><span class="op" id="6066066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066069">}</span><br>
<span class="lineno"></span><span class="op" id="6066071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066074">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6066146">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6066222">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6066265">func</span>&nbsp;<span class="op" id="6066270">(</span><span class="ident" id="6066271">r</span>&nbsp;<span class="op" id="6066273">*</span><span class="ident" id="6066274">Reader</span><span class="op" id="6066280">)</span>&nbsp;<span class="ident" id="6066282">readRune</span><span class="op" id="6066290">(</span><span class="op" id="6066291">)</span>&nbsp;<span class="op" id="6066293">(</span><span class="builtintype" id="6066294">rune</span><span class="op" id="6066298">,</span>&nbsp;<span class="builtintype" id="6066300">error</span><span class="op" id="6066305">)</span>&nbsp;<span class="op" id="6066307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066310">r1</span><span class="op" id="6066312">,</span>&nbsp;<span class="ident" id="6066314">_</span><span class="op" id="6066315">,</span>&nbsp;<span class="ident" id="6066317">err</span>&nbsp;<span class="op" id="6066321">:=</span>&nbsp;<span class="ident" id="6066324">r</span><span class="op" id="6066325">.</span><span class="ident" id="6066326">r</span><span class="op" id="6066327">.</span><span class="ident" id="6066328">ReadRune</span><span class="op" id="6066336">(</span><span class="op" id="6066337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6066341">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6066404">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6066466">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066532">if</span>&nbsp;<span class="ident" id="6066535">r1</span>&nbsp;<span class="op" id="6066538">==</span>&nbsp;<span class="string" id="6066541">&#39;\r&#39;</span>&nbsp;<span class="op" id="6066546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066550">r1</span><span class="op" id="6066552">,</span>&nbsp;<span class="ident" id="6066554">_</span><span class="op" id="6066555">,</span>&nbsp;<span class="ident" id="6066557">err</span>&nbsp;<span class="op" id="6066561">=</span>&nbsp;<span class="ident" id="6066563">r</span><span class="op" id="6066564">.</span><span class="ident" id="6066565">r</span><span class="op" id="6066566">.</span><span class="ident" id="6066567">ReadRune</span><span class="op" id="6066575">(</span><span class="op" id="6066576">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066580">if</span>&nbsp;<span class="ident" id="6066583">err</span>&nbsp;<span class="op" id="6066587">==</span>&nbsp;<span class="ident" id="6066590">nil</span>&nbsp;<span class="op" id="6066594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066599">if</span>&nbsp;<span class="ident" id="6066602">r1</span>&nbsp;<span class="op" id="6066605">!=</span>&nbsp;<span class="string" id="6066608">&#39;\n&#39;</span>&nbsp;<span class="op" id="6066613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066619">r</span><span class="op" id="6066620">.</span><span class="ident" id="6066621">r</span><span class="op" id="6066622">.</span><span class="ident" id="6066623">UnreadRune</span><span class="op" id="6066633">(</span><span class="op" id="6066634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066640">r1</span>&nbsp;<span class="op" id="6066643">=</span>&nbsp;<span class="string" id="6066645">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066653">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066663">r</span><span class="op" id="6066664">.</span><span class="ident" id="6066665">column</span><span class="op" id="6066671">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066675">return</span>&nbsp;<span class="ident" id="6066682">r1</span><span class="op" id="6066684">,</span>&nbsp;<span class="ident" id="6066686">err</span><br>
<span class="lineno"></span><span class="op" id="6066690">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6066693">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6066764">func</span>&nbsp;<span class="op" id="6066769">(</span><span class="ident" id="6066770">r</span>&nbsp;<span class="op" id="6066772">*</span><span class="ident" id="6066773">Reader</span><span class="op" id="6066779">)</span>&nbsp;<span class="ident" id="6066781">skip</span><span class="op" id="6066785">(</span><span class="ident" id="6066786">delim</span>&nbsp;<span class="builtintype" id="6066792">rune</span><span class="op" id="6066796">)</span>&nbsp;<span class="builtintype" id="6066798">error</span>&nbsp;<span class="op" id="6066804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066807">for</span>&nbsp;<span class="op" id="6066811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066815">r1</span><span class="op" id="6066817">,</span>&nbsp;<span class="ident" id="6066819">err</span>&nbsp;<span class="op" id="6066823">:=</span>&nbsp;<span class="ident" id="6066826">r</span><span class="op" id="6066827">.</span><span class="ident" id="6066828">readRune</span><span class="op" id="6066836">(</span><span class="op" id="6066837">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066841">if</span>&nbsp;<span class="ident" id="6066844">err</span>&nbsp;<span class="op" id="6066848">!=</span>&nbsp;<span class="ident" id="6066851">nil</span>&nbsp;<span class="op" id="6066855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066860">return</span>&nbsp;<span class="ident" id="6066867">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066877">if</span>&nbsp;<span class="ident" id="6066880">r1</span>&nbsp;<span class="op" id="6066883">==</span>&nbsp;<span class="ident" id="6066886">delim</span>&nbsp;<span class="op" id="6066892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066897">return</span>&nbsp;<span class="ident" id="6066904">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066913">}</span><br>
<span class="lineno"></span><span class="op" id="6066915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066918">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6066978">func</span>&nbsp;<span class="op" id="6066983">(</span><span class="ident" id="6066984">r</span>&nbsp;<span class="op" id="6066986">*</span><span class="ident" id="6066987">Reader</span><span class="op" id="6066993">)</span>&nbsp;<span class="ident" id="6066995">parseRecord</span><span class="op" id="6067006">(</span><span class="op" id="6067007">)</span>&nbsp;<span class="op" id="6067009">(</span><span class="ident" id="6067010">fields</span>&nbsp;<span class="op" id="6067017">[</span><span class="op" id="6067018">]</span><span class="builtintype" id="6067019">string</span><span class="op" id="6067025">,</span>&nbsp;<span class="ident" id="6067027">err</span>&nbsp;<span class="builtintype" id="6067031">error</span><span class="op" id="6067036">)</span>&nbsp;<span class="op" id="6067038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067041">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067102">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067160">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067231">r</span><span class="op" id="6067232">.</span><span class="ident" id="6067233">line</span><span class="op" id="6067237">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067241">r</span><span class="op" id="6067242">.</span><span class="ident" id="6067243">column</span>&nbsp;<span class="op" id="6067250">=</span>&nbsp;<span class="op" id="6067252">-</span><span class="num" id="6067253">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067257">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067317">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067380">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067415">r1</span><span class="op" id="6067417">,</span>&nbsp;<span class="ident" id="6067419">_</span><span class="op" id="6067420">,</span>&nbsp;<span class="ident" id="6067422">err</span>&nbsp;<span class="op" id="6067426">:=</span>&nbsp;<span class="ident" id="6067429">r</span><span class="op" id="6067430">.</span><span class="ident" id="6067431">r</span><span class="op" id="6067432">.</span><span class="ident" id="6067433">ReadRune</span><span class="op" id="6067441">(</span><span class="op" id="6067442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067445">if</span>&nbsp;<span class="ident" id="6067448">err</span>&nbsp;<span class="op" id="6067452">!=</span>&nbsp;<span class="ident" id="6067455">nil</span>&nbsp;<span class="op" id="6067459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067463">return</span>&nbsp;<span class="ident" id="6067470">nil</span><span class="op" id="6067473">,</span>&nbsp;<span class="ident" id="6067475">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067480">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067484">if</span>&nbsp;<span class="ident" id="6067487">r</span><span class="op" id="6067488">.</span><span class="ident" id="6067489">Comment</span>&nbsp;<span class="op" id="6067497">!=</span>&nbsp;<span class="num" id="6067500">0</span>&nbsp;<span class="op" id="6067502">&amp;&amp;</span>&nbsp;<span class="ident" id="6067505">r1</span>&nbsp;<span class="op" id="6067508">==</span>&nbsp;<span class="ident" id="6067511">r</span><span class="op" id="6067512">.</span><span class="ident" id="6067513">Comment</span>&nbsp;<span class="op" id="6067521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067525">return</span>&nbsp;<span class="ident" id="6067532">nil</span><span class="op" id="6067535">,</span>&nbsp;<span class="ident" id="6067537">r</span><span class="op" id="6067538">.</span><span class="ident" id="6067539">skip</span><span class="op" id="6067543">(</span><span class="string" id="6067544">&#39;\n&#39;</span><span class="op" id="6067548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067554">r</span><span class="op" id="6067555">.</span><span class="ident" id="6067556">r</span><span class="op" id="6067557">.</span><span class="ident" id="6067558">UnreadRune</span><span class="op" id="6067568">(</span><span class="op" id="6067569">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067573">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067619">for</span>&nbsp;<span class="op" id="6067623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067627">haveField</span><span class="op" id="6067636">,</span>&nbsp;<span class="ident" id="6067638">delim</span><span class="op" id="6067643">,</span>&nbsp;<span class="ident" id="6067645">err</span>&nbsp;<span class="op" id="6067649">:=</span>&nbsp;<span class="ident" id="6067652">r</span><span class="op" id="6067653">.</span><span class="ident" id="6067654">parseField</span><span class="op" id="6067664">(</span><span class="op" id="6067665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067669">if</span>&nbsp;<span class="ident" id="6067672">haveField</span>&nbsp;<span class="op" id="6067682">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067687">fields</span>&nbsp;<span class="op" id="6067694">=</span>&nbsp;<span class="builtinfunc" id="6067696">append</span><span class="op" id="6067702">(</span><span class="ident" id="6067703">fields</span><span class="op" id="6067709">,</span>&nbsp;<span class="ident" id="6067711">r</span><span class="op" id="6067712">.</span><span class="ident" id="6067713">field</span><span class="op" id="6067718">.</span><span class="ident" id="6067719">String</span><span class="op" id="6067725">(</span><span class="op" id="6067726">)</span><span class="op" id="6067727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067735">if</span>&nbsp;<span class="ident" id="6067738">delim</span>&nbsp;<span class="op" id="6067744">==</span>&nbsp;<span class="string" id="6067747">&#39;\n&#39;</span>&nbsp;<span class="op" id="6067752">||</span>&nbsp;<span class="ident" id="6067755">err</span>&nbsp;<span class="op" id="6067759">==</span>&nbsp;<span class="ident" id="6067762">io</span><span class="op" id="6067764">.</span><span class="ident" id="6067765">EOF</span>&nbsp;<span class="op" id="6067769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067774">return</span>&nbsp;<span class="ident" id="6067781">fields</span><span class="op" id="6067787">,</span>&nbsp;<span class="ident" id="6067789">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067795">}</span>&nbsp;<span class="keyword" id="6067797">else</span>&nbsp;<span class="keyword" id="6067802">if</span>&nbsp;<span class="ident" id="6067805">err</span>&nbsp;<span class="op" id="6067809">!=</span>&nbsp;<span class="ident" id="6067812">nil</span>&nbsp;<span class="op" id="6067816">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067821">return</span>&nbsp;<span class="ident" id="6067828">nil</span><span class="op" id="6067831">,</span>&nbsp;<span class="ident" id="6067833">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067842">}</span><br>
<span class="lineno"></span><span class="op" id="6067844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6067847">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6067917">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6067992">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6068014">func</span>&nbsp;<span class="op" id="6068019">(</span><span class="ident" id="6068020">r</span>&nbsp;<span class="op" id="6068022">*</span><span class="ident" id="6068023">Reader</span><span class="op" id="6068029">)</span>&nbsp;<span class="ident" id="6068031">parseField</span><span class="op" id="6068041">(</span><span class="op" id="6068042">)</span>&nbsp;<span class="op" id="6068044">(</span><span class="ident" id="6068045">haveField</span>&nbsp;<span class="builtintype" id="6068055">bool</span><span class="op" id="6068059">,</span>&nbsp;<span class="ident" id="6068061">delim</span>&nbsp;<span class="builtintype" id="6068067">rune</span><span class="op" id="6068071">,</span>&nbsp;<span class="ident" id="6068073">err</span>&nbsp;<span class="builtintype" id="6068077">error</span><span class="op" id="6068082">)</span>&nbsp;<span class="op" id="6068084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068087">r</span><span class="op" id="6068088">.</span><span class="ident" id="6068089">field</span><span class="op" id="6068094">.</span><span class="ident" id="6068095">Reset</span><span class="op" id="6068100">(</span><span class="op" id="6068101">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068105">r1</span><span class="op" id="6068107">,</span>&nbsp;<span class="ident" id="6068109">err</span>&nbsp;<span class="op" id="6068113">:=</span>&nbsp;<span class="ident" id="6068116">r</span><span class="op" id="6068117">.</span><span class="ident" id="6068118">readRune</span><span class="op" id="6068126">(</span><span class="op" id="6068127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068130">for</span>&nbsp;<span class="ident" id="6068134">err</span>&nbsp;<span class="op" id="6068138">==</span>&nbsp;<span class="ident" id="6068141">nil</span>&nbsp;<span class="op" id="6068145">&amp;&amp;</span>&nbsp;<span class="ident" id="6068148">r</span><span class="op" id="6068149">.</span><span class="ident" id="6068150">TrimLeadingSpace</span>&nbsp;<span class="op" id="6068167">&amp;&amp;</span>&nbsp;<span class="ident" id="6068170">r1</span>&nbsp;<span class="op" id="6068173">!=</span>&nbsp;<span class="string" id="6068176">&#39;\n&#39;</span>&nbsp;<span class="op" id="6068181">&amp;&amp;</span>&nbsp;<span class="ident" id="6068184">unicode</span><span class="op" id="6068191">.</span><span class="ident" id="6068192">IsSpace</span><span class="op" id="6068199">(</span><span class="ident" id="6068200">r1</span><span class="op" id="6068202">)</span>&nbsp;<span class="op" id="6068204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068208">r1</span><span class="op" id="6068210">,</span>&nbsp;<span class="ident" id="6068212">err</span>&nbsp;<span class="op" id="6068216">=</span>&nbsp;<span class="ident" id="6068218">r</span><span class="op" id="6068219">.</span><span class="ident" id="6068220">readRune</span><span class="op" id="6068228">(</span><span class="op" id="6068229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068232">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068236">if</span>&nbsp;<span class="ident" id="6068239">err</span>&nbsp;<span class="op" id="6068243">==</span>&nbsp;<span class="ident" id="6068246">io</span><span class="op" id="6068248">.</span><span class="ident" id="6068249">EOF</span>&nbsp;<span class="op" id="6068253">&amp;&amp;</span>&nbsp;<span class="ident" id="6068256">r</span><span class="op" id="6068257">.</span><span class="ident" id="6068258">column</span>&nbsp;<span class="op" id="6068265">!=</span>&nbsp;<span class="num" id="6068268">0</span>&nbsp;<span class="op" id="6068270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068274">return</span>&nbsp;<span class="builtintype" id="6068281">true</span><span class="op" id="6068285">,</span>&nbsp;<span class="num" id="6068287">0</span><span class="op" id="6068288">,</span>&nbsp;<span class="ident" id="6068290">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068298">if</span>&nbsp;<span class="ident" id="6068301">err</span>&nbsp;<span class="op" id="6068305">!=</span>&nbsp;<span class="ident" id="6068308">nil</span>&nbsp;<span class="op" id="6068312">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068316">return</span>&nbsp;<span class="builtintype" id="6068323">false</span><span class="op" id="6068328">,</span>&nbsp;<span class="num" id="6068330">0</span><span class="op" id="6068331">,</span>&nbsp;<span class="ident" id="6068333">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068342">switch</span>&nbsp;<span class="ident" id="6068349">r1</span>&nbsp;<span class="op" id="6068352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068355">case</span>&nbsp;<span class="ident" id="6068360">r</span><span class="op" id="6068361">.</span><span class="ident" id="6068362">Comma</span><span class="op" id="6068367">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068371">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068393">case</span>&nbsp;<span class="string" id="6068398">&#39;\n&#39;</span><span class="op" id="6068402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068406">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068457">if</span>&nbsp;<span class="ident" id="6068460">r</span><span class="op" id="6068461">.</span><span class="ident" id="6068462">column</span>&nbsp;<span class="op" id="6068469">==</span>&nbsp;<span class="num" id="6068472">0</span>&nbsp;<span class="op" id="6068474">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068479">return</span>&nbsp;<span class="builtintype" id="6068486">false</span><span class="op" id="6068491">,</span>&nbsp;<span class="ident" id="6068493">r1</span><span class="op" id="6068495">,</span>&nbsp;<span class="ident" id="6068497">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068507">return</span>&nbsp;<span class="builtintype" id="6068514">true</span><span class="op" id="6068518">,</span>&nbsp;<span class="ident" id="6068520">r1</span><span class="op" id="6068522">,</span>&nbsp;<span class="ident" id="6068524">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068530">case</span>&nbsp;<span class="string" id="6068535">&#39;&#34;&#39;</span><span class="op" id="6068538">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068542">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068559">Quoted</span><span class="op" id="6068565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068569">for</span>&nbsp;<span class="op" id="6068573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068578">r1</span><span class="op" id="6068580">,</span>&nbsp;<span class="ident" id="6068582">err</span>&nbsp;<span class="op" id="6068586">=</span>&nbsp;<span class="ident" id="6068588">r</span><span class="op" id="6068589">.</span><span class="ident" id="6068590">readRune</span><span class="op" id="6068598">(</span><span class="op" id="6068599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068604">if</span>&nbsp;<span class="ident" id="6068607">err</span>&nbsp;<span class="op" id="6068611">!=</span>&nbsp;<span class="ident" id="6068614">nil</span>&nbsp;<span class="op" id="6068618">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068624">if</span>&nbsp;<span class="ident" id="6068627">err</span>&nbsp;<span class="op" id="6068631">==</span>&nbsp;<span class="ident" id="6068634">io</span><span class="op" id="6068636">.</span><span class="ident" id="6068637">EOF</span>&nbsp;<span class="op" id="6068641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068648">if</span>&nbsp;<span class="ident" id="6068651">r</span><span class="op" id="6068652">.</span><span class="ident" id="6068653">LazyQuotes</span>&nbsp;<span class="op" id="6068664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068672">return</span>&nbsp;<span class="builtintype" id="6068679">true</span><span class="op" id="6068683">,</span>&nbsp;<span class="num" id="6068685">0</span><span class="op" id="6068686">,</span>&nbsp;<span class="ident" id="6068688">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068704">return</span>&nbsp;<span class="builtintype" id="6068711">false</span><span class="op" id="6068716">,</span>&nbsp;<span class="num" id="6068718">0</span><span class="op" id="6068719">,</span>&nbsp;<span class="ident" id="6068721">r</span><span class="op" id="6068722">.</span><span class="builtintype" id="6068723">error</span><span class="op" id="6068728">(</span><span class="ident" id="6068729">ErrQuote</span><span class="op" id="6068737">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068749">return</span>&nbsp;<span class="builtintype" id="6068756">false</span><span class="op" id="6068761">,</span>&nbsp;<span class="num" id="6068763">0</span><span class="op" id="6068764">,</span>&nbsp;<span class="ident" id="6068766">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068778">switch</span>&nbsp;<span class="ident" id="6068785">r1</span>&nbsp;<span class="op" id="6068788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068793">case</span>&nbsp;<span class="string" id="6068798">&#39;&#34;&#39;</span><span class="op" id="6068801">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068807">r1</span><span class="op" id="6068809">,</span>&nbsp;<span class="ident" id="6068811">err</span>&nbsp;<span class="op" id="6068815">=</span>&nbsp;<span class="ident" id="6068817">r</span><span class="op" id="6068818">.</span><span class="ident" id="6068819">readRune</span><span class="op" id="6068827">(</span><span class="op" id="6068828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068834">if</span>&nbsp;<span class="ident" id="6068837">err</span>&nbsp;<span class="op" id="6068841">!=</span>&nbsp;<span class="ident" id="6068844">nil</span>&nbsp;<span class="op" id="6068848">||</span>&nbsp;<span class="ident" id="6068851">r1</span>&nbsp;<span class="op" id="6068854">==</span>&nbsp;<span class="ident" id="6068857">r</span><span class="op" id="6068858">.</span><span class="ident" id="6068859">Comma</span>&nbsp;<span class="op" id="6068865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068872">break</span>&nbsp;<span class="ident" id="6068878">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068895">if</span>&nbsp;<span class="ident" id="6068898">r1</span>&nbsp;<span class="op" id="6068901">==</span>&nbsp;<span class="string" id="6068904">&#39;\n&#39;</span>&nbsp;<span class="op" id="6068909">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068916">return</span>&nbsp;<span class="builtintype" id="6068923">true</span><span class="op" id="6068927">,</span>&nbsp;<span class="ident" id="6068929">r1</span><span class="op" id="6068931">,</span>&nbsp;<span class="ident" id="6068933">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068947">if</span>&nbsp;<span class="ident" id="6068950">r1</span>&nbsp;<span class="op" id="6068953">!=</span>&nbsp;<span class="string" id="6068956">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6068960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068967">if</span>&nbsp;<span class="op" id="6068970">!</span><span class="ident" id="6068971">r</span><span class="op" id="6068972">.</span><span class="ident" id="6068973">LazyQuotes</span>&nbsp;<span class="op" id="6068984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068992">r</span><span class="op" id="6068993">.</span><span class="ident" id="6068994">column</span><span class="op" id="6069000">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069009">return</span>&nbsp;<span class="builtintype" id="6069016">false</span><span class="op" id="6069021">,</span>&nbsp;<span class="num" id="6069023">0</span><span class="op" id="6069024">,</span>&nbsp;<span class="ident" id="6069026">r</span><span class="op" id="6069027">.</span><span class="builtintype" id="6069028">error</span><span class="op" id="6069033">(</span><span class="ident" id="6069034">ErrQuote</span><span class="op" id="6069042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6069056">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069086">r</span><span class="op" id="6069087">.</span><span class="ident" id="6069088">field</span><span class="op" id="6069093">.</span><span class="ident" id="6069094">WriteRune</span><span class="op" id="6069103">(</span><span class="string" id="6069104">&#39;&#34;&#39;</span><span class="op" id="6069107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069113">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069118">case</span>&nbsp;<span class="string" id="6069123">&#39;\n&#39;</span><span class="op" id="6069127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069133">r</span><span class="op" id="6069134">.</span><span class="ident" id="6069135">line</span><span class="op" id="6069139">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069146">r</span><span class="op" id="6069147">.</span><span class="ident" id="6069148">column</span>&nbsp;<span class="op" id="6069155">=</span>&nbsp;<span class="op" id="6069157">-</span><span class="num" id="6069158">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069168">r</span><span class="op" id="6069169">.</span><span class="ident" id="6069170">field</span><span class="op" id="6069175">.</span><span class="ident" id="6069176">WriteRune</span><span class="op" id="6069185">(</span><span class="ident" id="6069186">r1</span><span class="op" id="6069188">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069196">default</span><span class="op" id="6069203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6069207">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069227">for</span>&nbsp;<span class="op" id="6069231">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069236">r</span><span class="op" id="6069237">.</span><span class="ident" id="6069238">field</span><span class="op" id="6069243">.</span><span class="ident" id="6069244">WriteRune</span><span class="op" id="6069253">(</span><span class="ident" id="6069254">r1</span><span class="op" id="6069256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069261">r1</span><span class="op" id="6069263">,</span>&nbsp;<span class="ident" id="6069265">err</span>&nbsp;<span class="op" id="6069269">=</span>&nbsp;<span class="ident" id="6069271">r</span><span class="op" id="6069272">.</span><span class="ident" id="6069273">readRune</span><span class="op" id="6069281">(</span><span class="op" id="6069282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069287">if</span>&nbsp;<span class="ident" id="6069290">err</span>&nbsp;<span class="op" id="6069294">!=</span>&nbsp;<span class="ident" id="6069297">nil</span>&nbsp;<span class="op" id="6069301">||</span>&nbsp;<span class="ident" id="6069304">r1</span>&nbsp;<span class="op" id="6069307">==</span>&nbsp;<span class="ident" id="6069310">r</span><span class="op" id="6069311">.</span><span class="ident" id="6069312">Comma</span>&nbsp;<span class="op" id="6069318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069324">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069333">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069338">if</span>&nbsp;<span class="ident" id="6069341">r1</span>&nbsp;<span class="op" id="6069344">==</span>&nbsp;<span class="string" id="6069347">&#39;\n&#39;</span>&nbsp;<span class="op" id="6069352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069358">return</span>&nbsp;<span class="builtintype" id="6069365">true</span><span class="op" id="6069369">,</span>&nbsp;<span class="ident" id="6069371">r1</span><span class="op" id="6069373">,</span>&nbsp;<span class="ident" id="6069375">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069387">if</span>&nbsp;<span class="op" id="6069390">!</span><span class="ident" id="6069391">r</span><span class="op" id="6069392">.</span><span class="ident" id="6069393">LazyQuotes</span>&nbsp;<span class="op" id="6069404">&amp;&amp;</span>&nbsp;<span class="ident" id="6069407">r1</span>&nbsp;<span class="op" id="6069410">==</span>&nbsp;<span class="string" id="6069413">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6069417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069423">return</span>&nbsp;<span class="builtintype" id="6069430">false</span><span class="op" id="6069435">,</span>&nbsp;<span class="num" id="6069437">0</span><span class="op" id="6069438">,</span>&nbsp;<span class="ident" id="6069440">r</span><span class="op" id="6069441">.</span><span class="builtintype" id="6069442">error</span><span class="op" id="6069447">(</span><span class="ident" id="6069448">ErrBareQuote</span><span class="op" id="6069460">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069476">if</span>&nbsp;<span class="ident" id="6069479">err</span>&nbsp;<span class="op" id="6069483">!=</span>&nbsp;<span class="ident" id="6069486">nil</span>&nbsp;<span class="op" id="6069490">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069494">if</span>&nbsp;<span class="ident" id="6069497">err</span>&nbsp;<span class="op" id="6069501">==</span>&nbsp;<span class="ident" id="6069504">io</span><span class="op" id="6069506">.</span><span class="ident" id="6069507">EOF</span>&nbsp;<span class="op" id="6069511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069516">return</span>&nbsp;<span class="builtintype" id="6069523">true</span><span class="op" id="6069527">,</span>&nbsp;<span class="num" id="6069529">0</span><span class="op" id="6069530">,</span>&nbsp;<span class="ident" id="6069532">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069542">return</span>&nbsp;<span class="builtintype" id="6069549">false</span><span class="op" id="6069554">,</span>&nbsp;<span class="num" id="6069556">0</span><span class="op" id="6069557">,</span>&nbsp;<span class="ident" id="6069559">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069564">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069568">return</span>&nbsp;<span class="builtintype" id="6069575">true</span><span class="op" id="6069579">,</span>&nbsp;<span class="ident" id="6069581">r1</span><span class="op" id="6069583">,</span>&nbsp;<span class="ident" id="6069585">nil</span><br>
<span class="lineno"></span><span class="op" id="6069589">}</span>
</div>
</body>
</html>
