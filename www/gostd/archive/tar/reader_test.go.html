<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7695110">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7695165">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7695219">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7695270">package</span>&nbsp;<span class="ident" id="7695278">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7695283">import</span>&nbsp;<span class="op" id="7695290">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695293">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695302">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695316">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695323">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695329">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695342">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695348">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695359">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695370">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695381">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7695388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7695391">type</span>&nbsp;<span class="ident" id="7695396">untarTest</span>&nbsp;<span class="keyword" id="7695406">struct</span>&nbsp;<span class="op" id="7695413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695416">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7695424">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695432">headers</span>&nbsp;<span class="op" id="7695440">[</span><span class="op" id="7695441">]</span><span class="op" id="7695442">*</span><span class="ident" id="7695443">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695451">cksums</span>&nbsp;&nbsp;<span class="op" id="7695459">[</span><span class="op" id="7695460">]</span><span class="builtintype" id="7695461">string</span><br>
<span class="lineno"></span><span class="op" id="7695468">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7695471">var</span>&nbsp;<span class="ident" id="7695475">gnuTarTest</span>&nbsp;<span class="op" id="7695486">=</span>&nbsp;<span class="op" id="7695488">&amp;</span><span class="ident" id="7695489">untarTest</span><span class="op" id="7695498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695501">file</span><span class="op" id="7695505">:</span>&nbsp;<span class="string" id="7695507">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7695525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695528">headers</span><span class="op" id="7695535">:</span>&nbsp;<span class="op" id="7695537">[</span><span class="op" id="7695538">]</span><span class="op" id="7695539">*</span><span class="ident" id="7695540">Header</span><span class="op" id="7695546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695550">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695555">Name</span><span class="op" id="7695559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695565">&#34;small.txt&#34;</span><span class="op" id="7695576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695581">Mode</span><span class="op" id="7695585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695591">0640</span><span class="op" id="7695595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695600">Uid</span><span class="op" id="7695603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695610">73025</span><span class="op" id="7695615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695620">Gid</span><span class="op" id="7695623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695630">5000</span><span class="op" id="7695634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695639">Size</span><span class="op" id="7695643">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695649">5</span><span class="op" id="7695650">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695655">ModTime</span><span class="op" id="7695662">:</span>&nbsp;&nbsp;<span class="ident" id="7695665">time</span><span class="op" id="7695669">.</span><span class="ident" id="7695670">Unix</span><span class="op" id="7695674">(</span><span class="num" id="7695675">1244428340</span><span class="op" id="7695685">,</span>&nbsp;<span class="num" id="7695687">0</span><span class="op" id="7695688">)</span><span class="op" id="7695689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695694">Typeflag</span><span class="op" id="7695702">:</span>&nbsp;<span class="string" id="7695704">&#39;0&#39;</span><span class="op" id="7695707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695712">Uname</span><span class="op" id="7695717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695722">&#34;dsymonds&#34;</span><span class="op" id="7695732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695737">Gname</span><span class="op" id="7695742">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695747">&#34;eng&#34;</span><span class="op" id="7695752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695756">}</span><span class="op" id="7695757">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695766">Name</span><span class="op" id="7695770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695776">&#34;small2.txt&#34;</span><span class="op" id="7695788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695793">Mode</span><span class="op" id="7695797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695803">0640</span><span class="op" id="7695807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695812">Uid</span><span class="op" id="7695815">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695822">73025</span><span class="op" id="7695827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695832">Gid</span><span class="op" id="7695835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695842">5000</span><span class="op" id="7695846">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695851">Size</span><span class="op" id="7695855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7695861">11</span><span class="op" id="7695863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695868">ModTime</span><span class="op" id="7695875">:</span>&nbsp;&nbsp;<span class="ident" id="7695878">time</span><span class="op" id="7695882">.</span><span class="ident" id="7695883">Unix</span><span class="op" id="7695887">(</span><span class="num" id="7695888">1244436044</span><span class="op" id="7695898">,</span>&nbsp;<span class="num" id="7695900">0</span><span class="op" id="7695901">)</span><span class="op" id="7695902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695907">Typeflag</span><span class="op" id="7695915">:</span>&nbsp;<span class="string" id="7695917">&#39;0&#39;</span><span class="op" id="7695920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695925">Uname</span><span class="op" id="7695930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695935">&#34;dsymonds&#34;</span><span class="op" id="7695945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695950">Gname</span><span class="op" id="7695955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695960">&#34;eng&#34;</span><span class="op" id="7695965">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695969">}</span><span class="op" id="7695970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695973">}</span><span class="op" id="7695974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695977">cksums</span><span class="op" id="7695983">:</span>&nbsp;<span class="op" id="7695985">[</span><span class="op" id="7695986">]</span><span class="builtintype" id="7695987">string</span><span class="op" id="7695993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7695997">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7696031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696035">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7696069">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696072">}</span><span class="op" id="7696073">,</span><br>
<span class="lineno"></span><span class="op" id="7696075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696078">var</span>&nbsp;<span class="ident" id="7696082">sparseTarTest</span>&nbsp;<span class="op" id="7696096">=</span>&nbsp;<span class="op" id="7696098">&amp;</span><span class="ident" id="7696099">untarTest</span><span class="op" id="7696108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696111">file</span><span class="op" id="7696115">:</span>&nbsp;<span class="string" id="7696117">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7696146">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696149">headers</span><span class="op" id="7696156">:</span>&nbsp;<span class="op" id="7696158">[</span><span class="op" id="7696159">]</span><span class="op" id="7696160">*</span><span class="ident" id="7696161">Header</span><span class="op" id="7696167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696176">Name</span><span class="op" id="7696180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696186">&#34;sparse-gnu&#34;</span><span class="op" id="7696198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696203">Mode</span><span class="op" id="7696207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696213">420</span><span class="op" id="7696216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696221">Uid</span><span class="op" id="7696224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696231">1000</span><span class="op" id="7696235">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696240">Gid</span><span class="op" id="7696243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696250">1000</span><span class="op" id="7696254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696259">Size</span><span class="op" id="7696263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696269">200</span><span class="op" id="7696272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696277">ModTime</span><span class="op" id="7696284">:</span>&nbsp;&nbsp;<span class="ident" id="7696287">time</span><span class="op" id="7696291">.</span><span class="ident" id="7696292">Unix</span><span class="op" id="7696296">(</span><span class="num" id="7696297">1392395740</span><span class="op" id="7696307">,</span>&nbsp;<span class="num" id="7696309">0</span><span class="op" id="7696310">)</span><span class="op" id="7696311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696316">Typeflag</span><span class="op" id="7696324">:</span>&nbsp;<span class="num" id="7696326">0x53</span><span class="op" id="7696330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696335">Linkname</span><span class="op" id="7696343">:</span>&nbsp;<span class="string" id="7696345">&#34;&#34;</span><span class="op" id="7696347">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696352">Uname</span><span class="op" id="7696357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696362">&#34;david&#34;</span><span class="op" id="7696369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696374">Gname</span><span class="op" id="7696379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696384">&#34;david&#34;</span><span class="op" id="7696391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696396">Devmajor</span><span class="op" id="7696404">:</span>&nbsp;<span class="num" id="7696406">0</span><span class="op" id="7696407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696412">Devminor</span><span class="op" id="7696420">:</span>&nbsp;<span class="num" id="7696422">0</span><span class="op" id="7696423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696427">}</span><span class="op" id="7696428">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696437">Name</span><span class="op" id="7696441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696447">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7696465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696470">Mode</span><span class="op" id="7696474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696480">420</span><span class="op" id="7696483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696488">Uid</span><span class="op" id="7696491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696498">1000</span><span class="op" id="7696502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696507">Gid</span><span class="op" id="7696510">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696517">1000</span><span class="op" id="7696521">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696526">Size</span><span class="op" id="7696530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696536">200</span><span class="op" id="7696539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696544">ModTime</span><span class="op" id="7696551">:</span>&nbsp;&nbsp;<span class="ident" id="7696554">time</span><span class="op" id="7696558">.</span><span class="ident" id="7696559">Unix</span><span class="op" id="7696563">(</span><span class="num" id="7696564">1392342187</span><span class="op" id="7696574">,</span>&nbsp;<span class="num" id="7696576">0</span><span class="op" id="7696577">)</span><span class="op" id="7696578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696583">Typeflag</span><span class="op" id="7696591">:</span>&nbsp;<span class="num" id="7696593">0x30</span><span class="op" id="7696597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696602">Linkname</span><span class="op" id="7696610">:</span>&nbsp;<span class="string" id="7696612">&#34;&#34;</span><span class="op" id="7696614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696619">Uname</span><span class="op" id="7696624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696629">&#34;david&#34;</span><span class="op" id="7696636">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696641">Gname</span><span class="op" id="7696646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696651">&#34;david&#34;</span><span class="op" id="7696658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696663">Devmajor</span><span class="op" id="7696671">:</span>&nbsp;<span class="num" id="7696673">0</span><span class="op" id="7696674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696679">Devminor</span><span class="op" id="7696687">:</span>&nbsp;<span class="num" id="7696689">0</span><span class="op" id="7696690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696694">}</span><span class="op" id="7696695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696699">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696704">Name</span><span class="op" id="7696708">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696714">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7696732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696737">Mode</span><span class="op" id="7696741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696747">420</span><span class="op" id="7696750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696755">Uid</span><span class="op" id="7696758">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696765">1000</span><span class="op" id="7696769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696774">Gid</span><span class="op" id="7696777">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696784">1000</span><span class="op" id="7696788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696793">Size</span><span class="op" id="7696797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7696803">200</span><span class="op" id="7696806">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696811">ModTime</span><span class="op" id="7696818">:</span>&nbsp;&nbsp;<span class="ident" id="7696821">time</span><span class="op" id="7696825">.</span><span class="ident" id="7696826">Unix</span><span class="op" id="7696830">(</span><span class="num" id="7696831">1392340456</span><span class="op" id="7696841">,</span>&nbsp;<span class="num" id="7696843">0</span><span class="op" id="7696844">)</span><span class="op" id="7696845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696850">Typeflag</span><span class="op" id="7696858">:</span>&nbsp;<span class="num" id="7696860">0x30</span><span class="op" id="7696864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696869">Linkname</span><span class="op" id="7696877">:</span>&nbsp;<span class="string" id="7696879">&#34;&#34;</span><span class="op" id="7696881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696886">Uname</span><span class="op" id="7696891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696896">&#34;david&#34;</span><span class="op" id="7696903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696908">Gname</span><span class="op" id="7696913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696918">&#34;david&#34;</span><span class="op" id="7696925">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696930">Devmajor</span><span class="op" id="7696938">:</span>&nbsp;<span class="num" id="7696940">0</span><span class="op" id="7696941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696946">Devminor</span><span class="op" id="7696954">:</span>&nbsp;<span class="num" id="7696956">0</span><span class="op" id="7696957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696961">}</span><span class="op" id="7696962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696971">Name</span><span class="op" id="7696975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7696981">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7696999">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697004">Mode</span><span class="op" id="7697008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697014">420</span><span class="op" id="7697017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697022">Uid</span><span class="op" id="7697025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697032">1000</span><span class="op" id="7697036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697041">Gid</span><span class="op" id="7697044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697051">1000</span><span class="op" id="7697055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697060">Size</span><span class="op" id="7697064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697070">200</span><span class="op" id="7697073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697078">ModTime</span><span class="op" id="7697085">:</span>&nbsp;&nbsp;<span class="ident" id="7697088">time</span><span class="op" id="7697092">.</span><span class="ident" id="7697093">Unix</span><span class="op" id="7697097">(</span><span class="num" id="7697098">1392337404</span><span class="op" id="7697108">,</span>&nbsp;<span class="num" id="7697110">0</span><span class="op" id="7697111">)</span><span class="op" id="7697112">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697117">Typeflag</span><span class="op" id="7697125">:</span>&nbsp;<span class="num" id="7697127">0x30</span><span class="op" id="7697131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697136">Linkname</span><span class="op" id="7697144">:</span>&nbsp;<span class="string" id="7697146">&#34;&#34;</span><span class="op" id="7697148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697153">Uname</span><span class="op" id="7697158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697163">&#34;david&#34;</span><span class="op" id="7697170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697175">Gname</span><span class="op" id="7697180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697185">&#34;david&#34;</span><span class="op" id="7697192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697197">Devmajor</span><span class="op" id="7697205">:</span>&nbsp;<span class="num" id="7697207">0</span><span class="op" id="7697208">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697213">Devminor</span><span class="op" id="7697221">:</span>&nbsp;<span class="num" id="7697223">0</span><span class="op" id="7697224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697228">}</span><span class="op" id="7697229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697238">Name</span><span class="op" id="7697242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697248">&#34;end&#34;</span><span class="op" id="7697253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697258">Mode</span><span class="op" id="7697262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697268">420</span><span class="op" id="7697271">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697276">Uid</span><span class="op" id="7697279">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697286">1000</span><span class="op" id="7697290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697295">Gid</span><span class="op" id="7697298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697305">1000</span><span class="op" id="7697309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697314">Size</span><span class="op" id="7697318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697324">4</span><span class="op" id="7697325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697330">ModTime</span><span class="op" id="7697337">:</span>&nbsp;&nbsp;<span class="ident" id="7697340">time</span><span class="op" id="7697344">.</span><span class="ident" id="7697345">Unix</span><span class="op" id="7697349">(</span><span class="num" id="7697350">1392398319</span><span class="op" id="7697360">,</span>&nbsp;<span class="num" id="7697362">0</span><span class="op" id="7697363">)</span><span class="op" id="7697364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697369">Typeflag</span><span class="op" id="7697377">:</span>&nbsp;<span class="num" id="7697379">0x30</span><span class="op" id="7697383">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697388">Linkname</span><span class="op" id="7697396">:</span>&nbsp;<span class="string" id="7697398">&#34;&#34;</span><span class="op" id="7697400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697405">Uname</span><span class="op" id="7697410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697415">&#34;david&#34;</span><span class="op" id="7697422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697427">Gname</span><span class="op" id="7697432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697437">&#34;david&#34;</span><span class="op" id="7697444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697449">Devmajor</span><span class="op" id="7697457">:</span>&nbsp;<span class="num" id="7697459">0</span><span class="op" id="7697460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697465">Devminor</span><span class="op" id="7697473">:</span>&nbsp;<span class="num" id="7697475">0</span><span class="op" id="7697476">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697480">}</span><span class="op" id="7697481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697484">}</span><span class="op" id="7697485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697488">cksums</span><span class="op" id="7697494">:</span>&nbsp;<span class="op" id="7697496">[</span><span class="op" id="7697497">]</span><span class="builtintype" id="7697498">string</span><span class="op" id="7697504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697508">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7697542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697546">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7697580">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697584">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7697618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697622">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7697656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697660">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7697694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697697">}</span><span class="op" id="7697698">,</span><br>
<span class="lineno"></span><span class="op" id="7697700">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7697703">var</span>&nbsp;<span class="ident" id="7697707">untarTests</span>&nbsp;<span class="op" id="7697718">=</span>&nbsp;<span class="op" id="7697720">[</span><span class="op" id="7697721">]</span><span class="op" id="7697722">*</span><span class="ident" id="7697723">untarTest</span><span class="op" id="7697732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697735">gnuTarTest</span><span class="op" id="7697745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697748">sparseTarTest</span><span class="op" id="7697761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697764">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697768">file</span><span class="op" id="7697772">:</span>&nbsp;<span class="string" id="7697774">&#34;testdata/star.tar&#34;</span><span class="op" id="7697793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697797">headers</span><span class="op" id="7697804">:</span>&nbsp;<span class="op" id="7697806">[</span><span class="op" id="7697807">]</span><span class="op" id="7697808">*</span><span class="ident" id="7697809">Header</span><span class="op" id="7697815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697826">Name</span><span class="op" id="7697830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7697838">&#34;small.txt&#34;</span><span class="op" id="7697849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697855">Mode</span><span class="op" id="7697859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697867">0640</span><span class="op" id="7697871">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697877">Uid</span><span class="op" id="7697880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697889">73025</span><span class="op" id="7697894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697900">Gid</span><span class="op" id="7697903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697912">5000</span><span class="op" id="7697916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697922">Size</span><span class="op" id="7697926">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7697934">5</span><span class="op" id="7697935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697941">ModTime</span><span class="op" id="7697948">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697953">time</span><span class="op" id="7697957">.</span><span class="ident" id="7697958">Unix</span><span class="op" id="7697962">(</span><span class="num" id="7697963">1244592783</span><span class="op" id="7697973">,</span>&nbsp;<span class="num" id="7697975">0</span><span class="op" id="7697976">)</span><span class="op" id="7697977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697983">Typeflag</span><span class="op" id="7697991">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7697995">&#39;0&#39;</span><span class="op" id="7697998">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698004">Uname</span><span class="op" id="7698009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698016">&#34;dsymonds&#34;</span><span class="op" id="7698026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698032">Gname</span><span class="op" id="7698037">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698044">&#34;eng&#34;</span><span class="op" id="7698049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698055">AccessTime</span><span class="op" id="7698065">:</span>&nbsp;<span class="ident" id="7698067">time</span><span class="op" id="7698071">.</span><span class="ident" id="7698072">Unix</span><span class="op" id="7698076">(</span><span class="num" id="7698077">1244592783</span><span class="op" id="7698087">,</span>&nbsp;<span class="num" id="7698089">0</span><span class="op" id="7698090">)</span><span class="op" id="7698091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698097">ChangeTime</span><span class="op" id="7698107">:</span>&nbsp;<span class="ident" id="7698109">time</span><span class="op" id="7698113">.</span><span class="ident" id="7698114">Unix</span><span class="op" id="7698118">(</span><span class="num" id="7698119">1244592783</span><span class="op" id="7698129">,</span>&nbsp;<span class="num" id="7698131">0</span><span class="op" id="7698132">)</span><span class="op" id="7698133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698138">}</span><span class="op" id="7698139">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698150">Name</span><span class="op" id="7698154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698162">&#34;small2.txt&#34;</span><span class="op" id="7698174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698180">Mode</span><span class="op" id="7698184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698192">0640</span><span class="op" id="7698196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698202">Uid</span><span class="op" id="7698205">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698214">73025</span><span class="op" id="7698219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698225">Gid</span><span class="op" id="7698228">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698237">5000</span><span class="op" id="7698241">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698247">Size</span><span class="op" id="7698251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698259">11</span><span class="op" id="7698261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698267">ModTime</span><span class="op" id="7698274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698279">time</span><span class="op" id="7698283">.</span><span class="ident" id="7698284">Unix</span><span class="op" id="7698288">(</span><span class="num" id="7698289">1244592783</span><span class="op" id="7698299">,</span>&nbsp;<span class="num" id="7698301">0</span><span class="op" id="7698302">)</span><span class="op" id="7698303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698309">Typeflag</span><span class="op" id="7698317">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7698321">&#39;0&#39;</span><span class="op" id="7698324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698330">Uname</span><span class="op" id="7698335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698342">&#34;dsymonds&#34;</span><span class="op" id="7698352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698358">Gname</span><span class="op" id="7698363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698370">&#34;eng&#34;</span><span class="op" id="7698375">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698381">AccessTime</span><span class="op" id="7698391">:</span>&nbsp;<span class="ident" id="7698393">time</span><span class="op" id="7698397">.</span><span class="ident" id="7698398">Unix</span><span class="op" id="7698402">(</span><span class="num" id="7698403">1244592783</span><span class="op" id="7698413">,</span>&nbsp;<span class="num" id="7698415">0</span><span class="op" id="7698416">)</span><span class="op" id="7698417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698423">ChangeTime</span><span class="op" id="7698433">:</span>&nbsp;<span class="ident" id="7698435">time</span><span class="op" id="7698439">.</span><span class="ident" id="7698440">Unix</span><span class="op" id="7698444">(</span><span class="num" id="7698445">1244592783</span><span class="op" id="7698455">,</span>&nbsp;<span class="num" id="7698457">0</span><span class="op" id="7698458">)</span><span class="op" id="7698459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698464">}</span><span class="op" id="7698465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698469">}</span><span class="op" id="7698470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698473">}</span><span class="op" id="7698474">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698481">file</span><span class="op" id="7698485">:</span>&nbsp;<span class="string" id="7698487">&#34;testdata/v7.tar&#34;</span><span class="op" id="7698504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698508">headers</span><span class="op" id="7698515">:</span>&nbsp;<span class="op" id="7698517">[</span><span class="op" id="7698518">]</span><span class="op" id="7698519">*</span><span class="ident" id="7698520">Header</span><span class="op" id="7698526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698537">Name</span><span class="op" id="7698541">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698547">&#34;small.txt&#34;</span><span class="op" id="7698558">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698564">Mode</span><span class="op" id="7698568">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698574">0444</span><span class="op" id="7698578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698584">Uid</span><span class="op" id="7698587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698594">73025</span><span class="op" id="7698599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698605">Gid</span><span class="op" id="7698608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698615">5000</span><span class="op" id="7698619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698625">Size</span><span class="op" id="7698629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698635">5</span><span class="op" id="7698636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698642">ModTime</span><span class="op" id="7698649">:</span>&nbsp;&nbsp;<span class="ident" id="7698652">time</span><span class="op" id="7698656">.</span><span class="ident" id="7698657">Unix</span><span class="op" id="7698661">(</span><span class="num" id="7698662">1244593104</span><span class="op" id="7698672">,</span>&nbsp;<span class="num" id="7698674">0</span><span class="op" id="7698675">)</span><span class="op" id="7698676">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698682">Typeflag</span><span class="op" id="7698690">:</span>&nbsp;<span class="string" id="7698692">&#39;\x00&#39;</span><span class="op" id="7698698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698703">}</span><span class="op" id="7698704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698715">Name</span><span class="op" id="7698719">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698725">&#34;small2.txt&#34;</span><span class="op" id="7698737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698743">Mode</span><span class="op" id="7698747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698753">0444</span><span class="op" id="7698757">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698763">Uid</span><span class="op" id="7698766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698773">73025</span><span class="op" id="7698778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698784">Gid</span><span class="op" id="7698787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698794">5000</span><span class="op" id="7698798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698804">Size</span><span class="op" id="7698808">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7698814">11</span><span class="op" id="7698816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698822">ModTime</span><span class="op" id="7698829">:</span>&nbsp;&nbsp;<span class="ident" id="7698832">time</span><span class="op" id="7698836">.</span><span class="ident" id="7698837">Unix</span><span class="op" id="7698841">(</span><span class="num" id="7698842">1244593104</span><span class="op" id="7698852">,</span>&nbsp;<span class="num" id="7698854">0</span><span class="op" id="7698855">)</span><span class="op" id="7698856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698862">Typeflag</span><span class="op" id="7698870">:</span>&nbsp;<span class="string" id="7698872">&#39;\x00&#39;</span><span class="op" id="7698878">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698883">}</span><span class="op" id="7698884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698888">}</span><span class="op" id="7698889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698892">}</span><span class="op" id="7698893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698900">file</span><span class="op" id="7698904">:</span>&nbsp;<span class="string" id="7698906">&#34;testdata/pax.tar&#34;</span><span class="op" id="7698924">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698928">headers</span><span class="op" id="7698935">:</span>&nbsp;<span class="op" id="7698937">[</span><span class="op" id="7698938">]</span><span class="op" id="7698939">*</span><span class="ident" id="7698940">Header</span><span class="op" id="7698946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7698957">Name</span><span class="op" id="7698961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7698969">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7699165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699171">Mode</span><span class="op" id="7699175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699183">0664</span><span class="op" id="7699187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699193">Uid</span><span class="op" id="7699196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699205">1000</span><span class="op" id="7699209">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699215">Gid</span><span class="op" id="7699218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699227">1000</span><span class="op" id="7699231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699237">Uname</span><span class="op" id="7699242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7699249">&#34;shane&#34;</span><span class="op" id="7699256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699262">Gname</span><span class="op" id="7699267">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7699274">&#34;shane&#34;</span><span class="op" id="7699281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699287">Size</span><span class="op" id="7699291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699299">7</span><span class="op" id="7699300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699306">ModTime</span><span class="op" id="7699313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699318">time</span><span class="op" id="7699322">.</span><span class="ident" id="7699323">Unix</span><span class="op" id="7699327">(</span><span class="num" id="7699328">1350244992</span><span class="op" id="7699338">,</span>&nbsp;<span class="num" id="7699340">23960108</span><span class="op" id="7699348">)</span><span class="op" id="7699349">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699355">ChangeTime</span><span class="op" id="7699365">:</span>&nbsp;<span class="ident" id="7699367">time</span><span class="op" id="7699371">.</span><span class="ident" id="7699372">Unix</span><span class="op" id="7699376">(</span><span class="num" id="7699377">1350244992</span><span class="op" id="7699387">,</span>&nbsp;<span class="num" id="7699389">23960108</span><span class="op" id="7699397">)</span><span class="op" id="7699398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699404">AccessTime</span><span class="op" id="7699414">:</span>&nbsp;<span class="ident" id="7699416">time</span><span class="op" id="7699420">.</span><span class="ident" id="7699421">Unix</span><span class="op" id="7699425">(</span><span class="num" id="7699426">1350244992</span><span class="op" id="7699436">,</span>&nbsp;<span class="num" id="7699438">23960108</span><span class="op" id="7699446">)</span><span class="op" id="7699447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699453">Typeflag</span><span class="op" id="7699461">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7699465">TypeReg</span><span class="op" id="7699472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7699477">}</span><span class="op" id="7699478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7699483">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699489">Name</span><span class="op" id="7699493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7699501">&#34;a/b&#34;</span><span class="op" id="7699506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699512">Mode</span><span class="op" id="7699516">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699524">0777</span><span class="op" id="7699528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699534">Uid</span><span class="op" id="7699537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699546">1000</span><span class="op" id="7699550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699556">Gid</span><span class="op" id="7699559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699568">1000</span><span class="op" id="7699572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699578">Uname</span><span class="op" id="7699583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7699590">&#34;shane&#34;</span><span class="op" id="7699597">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699603">Gname</span><span class="op" id="7699608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7699615">&#34;shane&#34;</span><span class="op" id="7699622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699628">Size</span><span class="op" id="7699632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7699640">0</span><span class="op" id="7699641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699647">ModTime</span><span class="op" id="7699654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699659">time</span><span class="op" id="7699663">.</span><span class="ident" id="7699664">Unix</span><span class="op" id="7699668">(</span><span class="num" id="7699669">1350266320</span><span class="op" id="7699679">,</span>&nbsp;<span class="num" id="7699681">910238425</span><span class="op" id="7699690">)</span><span class="op" id="7699691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699697">ChangeTime</span><span class="op" id="7699707">:</span>&nbsp;<span class="ident" id="7699709">time</span><span class="op" id="7699713">.</span><span class="ident" id="7699714">Unix</span><span class="op" id="7699718">(</span><span class="num" id="7699719">1350266320</span><span class="op" id="7699729">,</span>&nbsp;<span class="num" id="7699731">910238425</span><span class="op" id="7699740">)</span><span class="op" id="7699741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699747">AccessTime</span><span class="op" id="7699757">:</span>&nbsp;<span class="ident" id="7699759">time</span><span class="op" id="7699763">.</span><span class="ident" id="7699764">Unix</span><span class="op" id="7699768">(</span><span class="num" id="7699769">1350266320</span><span class="op" id="7699779">,</span>&nbsp;<span class="num" id="7699781">910238425</span><span class="op" id="7699790">)</span><span class="op" id="7699791">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699797">Typeflag</span><span class="op" id="7699805">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7699809">TypeSymlink</span><span class="op" id="7699820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699826">Linkname</span><span class="op" id="7699834">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7699838">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7700032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700037">}</span><span class="op" id="7700038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700042">}</span><span class="op" id="7700043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700046">}</span><span class="op" id="7700047">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700054">file</span><span class="op" id="7700058">:</span>&nbsp;<span class="string" id="7700060">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7700082">,</span>&nbsp;<span class="comment" id="7700084">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700111">headers</span><span class="op" id="7700118">:</span>&nbsp;<span class="op" id="7700120">[</span><span class="op" id="7700121">]</span><span class="op" id="7700122">*</span><span class="ident" id="7700123">Header</span><span class="op" id="7700129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700140">Name</span><span class="op" id="7700144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700150">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7700168">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700174">Mode</span><span class="op" id="7700178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700184">0664</span><span class="op" id="7700188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700194">Uid</span><span class="op" id="7700197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700204">0</span><span class="op" id="7700205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700211">Gid</span><span class="op" id="7700214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700221">0</span><span class="op" id="7700222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700228">Size</span><span class="op" id="7700232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700238">14</span><span class="op" id="7700240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700246">ModTime</span><span class="op" id="7700253">:</span>&nbsp;&nbsp;<span class="ident" id="7700256">time</span><span class="op" id="7700260">.</span><span class="ident" id="7700261">Unix</span><span class="op" id="7700265">(</span><span class="num" id="7700266">1365454838</span><span class="op" id="7700276">,</span>&nbsp;<span class="num" id="7700278">0</span><span class="op" id="7700279">)</span><span class="op" id="7700280">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700286">Typeflag</span><span class="op" id="7700294">:</span>&nbsp;<span class="ident" id="7700296">TypeReg</span><span class="op" id="7700303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700309">Linkname</span><span class="op" id="7700317">:</span>&nbsp;<span class="string" id="7700319">&#34;&#34;</span><span class="op" id="7700321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700327">Uname</span><span class="op" id="7700332">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700337">&#34;eyefi&#34;</span><span class="op" id="7700344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700350">Gname</span><span class="op" id="7700355">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700360">&#34;eyefi&#34;</span><span class="op" id="7700367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700373">Devmajor</span><span class="op" id="7700381">:</span>&nbsp;<span class="num" id="7700383">0</span><span class="op" id="7700384">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700390">Devminor</span><span class="op" id="7700398">:</span>&nbsp;<span class="num" id="7700400">0</span><span class="op" id="7700401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700406">}</span><span class="op" id="7700407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700411">}</span><span class="op" id="7700412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700415">}</span><span class="op" id="7700416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700419">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700423">file</span><span class="op" id="7700427">:</span>&nbsp;<span class="string" id="7700429">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7700450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700454">headers</span><span class="op" id="7700461">:</span>&nbsp;<span class="op" id="7700463">[</span><span class="op" id="7700464">]</span><span class="op" id="7700465">*</span><span class="ident" id="7700466">Header</span><span class="op" id="7700472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700483">Name</span><span class="op" id="7700487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700495">&#34;small.txt&#34;</span><span class="op" id="7700506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700512">Mode</span><span class="op" id="7700516">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700524">0644</span><span class="op" id="7700528">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700534">Uid</span><span class="op" id="7700537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700546">1000</span><span class="op" id="7700550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700556">Gid</span><span class="op" id="7700559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700568">10</span><span class="op" id="7700570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700576">Size</span><span class="op" id="7700580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7700588">5</span><span class="op" id="7700589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700595">ModTime</span><span class="op" id="7700602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700607">time</span><span class="op" id="7700611">.</span><span class="ident" id="7700612">Unix</span><span class="op" id="7700616">(</span><span class="num" id="7700617">1386065770</span><span class="op" id="7700627">,</span>&nbsp;<span class="num" id="7700629">448252320</span><span class="op" id="7700638">)</span><span class="op" id="7700639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700645">Typeflag</span><span class="op" id="7700653">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7700657">&#39;0&#39;</span><span class="op" id="7700660">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700666">Uname</span><span class="op" id="7700671">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700678">&#34;alex&#34;</span><span class="op" id="7700684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700690">Gname</span><span class="op" id="7700695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700702">&#34;wheel&#34;</span><span class="op" id="7700709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700715">AccessTime</span><span class="op" id="7700725">:</span>&nbsp;<span class="ident" id="7700727">time</span><span class="op" id="7700731">.</span><span class="ident" id="7700732">Unix</span><span class="op" id="7700736">(</span><span class="num" id="7700737">1389782991</span><span class="op" id="7700747">,</span>&nbsp;<span class="num" id="7700749">419875220</span><span class="op" id="7700758">)</span><span class="op" id="7700759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700765">ChangeTime</span><span class="op" id="7700775">:</span>&nbsp;<span class="ident" id="7700777">time</span><span class="op" id="7700781">.</span><span class="ident" id="7700782">Unix</span><span class="op" id="7700786">(</span><span class="num" id="7700787">1389782956</span><span class="op" id="7700797">,</span>&nbsp;<span class="num" id="7700799">794414986</span><span class="op" id="7700808">)</span><span class="op" id="7700809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700815">Xattrs</span><span class="op" id="7700821">:</span>&nbsp;<span class="keyword" id="7700823">map</span><span class="op" id="7700826">[</span><span class="builtintype" id="7700827">string</span><span class="op" id="7700833">]</span><span class="builtintype" id="7700834">string</span><span class="op" id="7700840">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700847">&#34;user.key&#34;</span><span class="op" id="7700857">:</span>&nbsp;&nbsp;<span class="string" id="7700860">&#34;value&#34;</span><span class="op" id="7700867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700874">&#34;user.key2&#34;</span><span class="op" id="7700885">:</span>&nbsp;<span class="string" id="7700887">&#34;value2&#34;</span><span class="op" id="7700895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7700902">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7700979">&#34;security.selinux&#34;</span><span class="op" id="7700997">:</span>&nbsp;<span class="string" id="7700999">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7701039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701045">}</span><span class="op" id="7701046">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701051">}</span><span class="op" id="7701052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701063">Name</span><span class="op" id="7701067">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701075">&#34;small2.txt&#34;</span><span class="op" id="7701087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701093">Mode</span><span class="op" id="7701097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701105">0644</span><span class="op" id="7701109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701115">Uid</span><span class="op" id="7701118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701127">1000</span><span class="op" id="7701131">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701137">Gid</span><span class="op" id="7701140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701149">10</span><span class="op" id="7701151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701157">Size</span><span class="op" id="7701161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7701169">11</span><span class="op" id="7701171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701177">ModTime</span><span class="op" id="7701184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701189">time</span><span class="op" id="7701193">.</span><span class="ident" id="7701194">Unix</span><span class="op" id="7701198">(</span><span class="num" id="7701199">1386065770</span><span class="op" id="7701209">,</span>&nbsp;<span class="num" id="7701211">449252304</span><span class="op" id="7701220">)</span><span class="op" id="7701221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701227">Typeflag</span><span class="op" id="7701235">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7701239">&#39;0&#39;</span><span class="op" id="7701242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701248">Uname</span><span class="op" id="7701253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701260">&#34;alex&#34;</span><span class="op" id="7701266">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701272">Gname</span><span class="op" id="7701277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701284">&#34;wheel&#34;</span><span class="op" id="7701291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701297">AccessTime</span><span class="op" id="7701307">:</span>&nbsp;<span class="ident" id="7701309">time</span><span class="op" id="7701313">.</span><span class="ident" id="7701314">Unix</span><span class="op" id="7701318">(</span><span class="num" id="7701319">1389782991</span><span class="op" id="7701329">,</span>&nbsp;<span class="num" id="7701331">419875220</span><span class="op" id="7701340">)</span><span class="op" id="7701341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701347">ChangeTime</span><span class="op" id="7701357">:</span>&nbsp;<span class="ident" id="7701359">time</span><span class="op" id="7701363">.</span><span class="ident" id="7701364">Unix</span><span class="op" id="7701368">(</span><span class="num" id="7701369">1386065770</span><span class="op" id="7701379">,</span>&nbsp;<span class="num" id="7701381">449252304</span><span class="op" id="7701390">)</span><span class="op" id="7701391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701397">Xattrs</span><span class="op" id="7701403">:</span>&nbsp;<span class="keyword" id="7701405">map</span><span class="op" id="7701408">[</span><span class="builtintype" id="7701409">string</span><span class="op" id="7701415">]</span><span class="builtintype" id="7701416">string</span><span class="op" id="7701422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7701429">&#34;security.selinux&#34;</span><span class="op" id="7701447">:</span>&nbsp;<span class="string" id="7701449">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7701489">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701495">}</span><span class="op" id="7701496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701501">}</span><span class="op" id="7701502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701506">}</span><span class="op" id="7701507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701510">}</span><span class="op" id="7701511">,</span><br>
<span class="lineno"></span><span class="op" id="7701513">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7701516">func</span>&nbsp;<span class="ident" id="7701521">TestReader</span><span class="op" id="7701531">(</span><span class="ident" id="7701532">t</span>&nbsp;<span class="op" id="7701534">*</span><span class="ident" id="7701535">testing</span><span class="op" id="7701542">.</span><span class="ident" id="7701543">T</span><span class="op" id="7701544">)</span>&nbsp;<span class="op" id="7701546">{</span><br>
<span class="lineno"></span><span class="ident" id="7701548">testLoop</span><span class="op" id="7701556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701559">for</span>&nbsp;<span class="ident" id="7701563">i</span><span class="op" id="7701564">,</span>&nbsp;<span class="ident" id="7701566">test</span>&nbsp;<span class="op" id="7701571">:=</span>&nbsp;<span class="keyword" id="7701574">range</span>&nbsp;<span class="ident" id="7701580">untarTests</span>&nbsp;<span class="op" id="7701591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701595">f</span><span class="op" id="7701596">,</span>&nbsp;<span class="ident" id="7701598">err</span>&nbsp;<span class="op" id="7701602">:=</span>&nbsp;<span class="ident" id="7701605">os</span><span class="op" id="7701607">.</span><span class="ident" id="7701608">Open</span><span class="op" id="7701612">(</span><span class="ident" id="7701613">test</span><span class="op" id="7701617">.</span><span class="ident" id="7701618">file</span><span class="op" id="7701622">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701626">if</span>&nbsp;<span class="ident" id="7701629">err</span>&nbsp;<span class="op" id="7701633">!=</span>&nbsp;<span class="builtintype" id="7701636">nil</span>&nbsp;<span class="op" id="7701640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701645">t</span><span class="op" id="7701646">.</span><span class="ident" id="7701647">Errorf</span><span class="op" id="7701653">(</span><span class="string" id="7701654">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7701685">,</span>&nbsp;<span class="ident" id="7701687">i</span><span class="op" id="7701688">,</span>&nbsp;<span class="ident" id="7701690">err</span><span class="op" id="7701693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701698">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701713">defer</span>&nbsp;<span class="ident" id="7701719">f</span><span class="op" id="7701720">.</span><span class="ident" id="7701721">Close</span><span class="op" id="7701726">(</span><span class="op" id="7701727">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701731">tr</span>&nbsp;<span class="op" id="7701734">:=</span>&nbsp;<span class="ident" id="7701737">NewReader</span><span class="op" id="7701746">(</span><span class="ident" id="7701747">f</span><span class="op" id="7701748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701752">for</span>&nbsp;<span class="ident" id="7701756">j</span><span class="op" id="7701757">,</span>&nbsp;<span class="ident" id="7701759">header</span>&nbsp;<span class="op" id="7701766">:=</span>&nbsp;<span class="keyword" id="7701769">range</span>&nbsp;<span class="ident" id="7701775">test</span><span class="op" id="7701779">.</span><span class="ident" id="7701780">headers</span>&nbsp;<span class="op" id="7701788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701793">hdr</span><span class="op" id="7701796">,</span>&nbsp;<span class="ident" id="7701798">err</span>&nbsp;<span class="op" id="7701802">:=</span>&nbsp;<span class="ident" id="7701805">tr</span><span class="op" id="7701807">.</span><span class="ident" id="7701808">Next</span><span class="op" id="7701812">(</span><span class="op" id="7701813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701818">if</span>&nbsp;<span class="ident" id="7701821">err</span>&nbsp;<span class="op" id="7701825">!=</span>&nbsp;<span class="builtintype" id="7701828">nil</span>&nbsp;<span class="op" id="7701832">||</span>&nbsp;<span class="ident" id="7701835">hdr</span>&nbsp;<span class="op" id="7701839">==</span>&nbsp;<span class="builtintype" id="7701842">nil</span>&nbsp;<span class="op" id="7701846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701852">t</span><span class="op" id="7701853">.</span><span class="ident" id="7701854">Errorf</span><span class="op" id="7701860">(</span><span class="string" id="7701861">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7701902">,</span>&nbsp;<span class="ident" id="7701904">i</span><span class="op" id="7701905">,</span>&nbsp;<span class="ident" id="7701907">j</span><span class="op" id="7701908">,</span>&nbsp;<span class="ident" id="7701910">err</span><span class="op" id="7701913">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701919">f</span><span class="op" id="7701920">.</span><span class="ident" id="7701921">Close</span><span class="op" id="7701926">(</span><span class="op" id="7701927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701933">continue</span>&nbsp;<span class="ident" id="7701942">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701959">if</span>&nbsp;<span class="op" id="7701962">!</span><span class="ident" id="7701963">reflect</span><span class="op" id="7701970">.</span><span class="ident" id="7701971">DeepEqual</span><span class="op" id="7701980">(</span><span class="op" id="7701981">*</span><span class="ident" id="7701982">hdr</span><span class="op" id="7701985">,</span>&nbsp;<span class="op" id="7701987">*</span><span class="ident" id="7701988">header</span><span class="op" id="7701994">)</span>&nbsp;<span class="op" id="7701996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702002">t</span><span class="op" id="7702003">.</span><span class="ident" id="7702004">Errorf</span><span class="op" id="7702010">(</span><span class="string" id="7702011">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7702069">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702076">i</span><span class="op" id="7702077">,</span>&nbsp;<span class="ident" id="7702079">j</span><span class="op" id="7702080">,</span>&nbsp;<span class="op" id="7702082">*</span><span class="ident" id="7702083">hdr</span><span class="op" id="7702086">,</span>&nbsp;<span class="op" id="7702088">*</span><span class="ident" id="7702089">header</span><span class="op" id="7702095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702108">hdr</span><span class="op" id="7702111">,</span>&nbsp;<span class="ident" id="7702113">err</span>&nbsp;<span class="op" id="7702117">:=</span>&nbsp;<span class="ident" id="7702120">tr</span><span class="op" id="7702122">.</span><span class="ident" id="7702123">Next</span><span class="op" id="7702127">(</span><span class="op" id="7702128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702132">if</span>&nbsp;<span class="ident" id="7702135">err</span>&nbsp;<span class="op" id="7702139">==</span>&nbsp;<span class="ident" id="7702142">io</span><span class="op" id="7702144">.</span><span class="ident" id="7702145">EOF</span>&nbsp;<span class="op" id="7702149">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702154">continue</span>&nbsp;<span class="ident" id="7702163">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702178">if</span>&nbsp;<span class="ident" id="7702181">hdr</span>&nbsp;<span class="op" id="7702185">!=</span>&nbsp;<span class="builtintype" id="7702188">nil</span>&nbsp;<span class="op" id="7702192">||</span>&nbsp;<span class="ident" id="7702195">err</span>&nbsp;<span class="op" id="7702199">!=</span>&nbsp;<span class="builtintype" id="7702202">nil</span>&nbsp;<span class="op" id="7702206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702211">t</span><span class="op" id="7702212">.</span><span class="ident" id="7702213">Errorf</span><span class="op" id="7702219">(</span><span class="string" id="7702220">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7702271">,</span>&nbsp;<span class="ident" id="7702273">i</span><span class="op" id="7702274">,</span>&nbsp;<span class="ident" id="7702276">hdr</span><span class="op" id="7702279">,</span>&nbsp;<span class="ident" id="7702281">err</span><span class="op" id="7702284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702288">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702291">}</span><br>
<span class="lineno"></span><span class="op" id="7702293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702296">func</span>&nbsp;<span class="ident" id="7702301">TestPartialRead</span><span class="op" id="7702316">(</span><span class="ident" id="7702317">t</span>&nbsp;<span class="op" id="7702319">*</span><span class="ident" id="7702320">testing</span><span class="op" id="7702327">.</span><span class="ident" id="7702328">T</span><span class="op" id="7702329">)</span>&nbsp;<span class="op" id="7702331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702334">f</span><span class="op" id="7702335">,</span>&nbsp;<span class="ident" id="7702337">err</span>&nbsp;<span class="op" id="7702341">:=</span>&nbsp;<span class="ident" id="7702344">os</span><span class="op" id="7702346">.</span><span class="ident" id="7702347">Open</span><span class="op" id="7702351">(</span><span class="string" id="7702352">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7702370">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702373">if</span>&nbsp;<span class="ident" id="7702376">err</span>&nbsp;<span class="op" id="7702380">!=</span>&nbsp;<span class="builtintype" id="7702383">nil</span>&nbsp;<span class="op" id="7702387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702391">t</span><span class="op" id="7702392">.</span><span class="ident" id="7702393">Fatalf</span><span class="op" id="7702399">(</span><span class="string" id="7702400">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7702422">,</span>&nbsp;<span class="ident" id="7702424">err</span><span class="op" id="7702427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702433">defer</span>&nbsp;<span class="ident" id="7702439">f</span><span class="op" id="7702440">.</span><span class="ident" id="7702441">Close</span><span class="op" id="7702446">(</span><span class="op" id="7702447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702451">tr</span>&nbsp;<span class="op" id="7702454">:=</span>&nbsp;<span class="ident" id="7702457">NewReader</span><span class="op" id="7702466">(</span><span class="ident" id="7702467">f</span><span class="op" id="7702468">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7702472">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702537">hdr</span><span class="op" id="7702540">,</span>&nbsp;<span class="ident" id="7702542">err</span>&nbsp;<span class="op" id="7702546">:=</span>&nbsp;<span class="ident" id="7702549">tr</span><span class="op" id="7702551">.</span><span class="ident" id="7702552">Next</span><span class="op" id="7702556">(</span><span class="op" id="7702557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702560">if</span>&nbsp;<span class="ident" id="7702563">err</span>&nbsp;<span class="op" id="7702567">!=</span>&nbsp;<span class="builtintype" id="7702570">nil</span>&nbsp;<span class="op" id="7702574">||</span>&nbsp;<span class="ident" id="7702577">hdr</span>&nbsp;<span class="op" id="7702581">==</span>&nbsp;<span class="builtintype" id="7702584">nil</span>&nbsp;<span class="op" id="7702588">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702592">t</span><span class="op" id="7702593">.</span><span class="ident" id="7702594">Fatalf</span><span class="op" id="7702600">(</span><span class="string" id="7702601">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7702628">,</span>&nbsp;<span class="ident" id="7702630">err</span><span class="op" id="7702633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702639">buf</span>&nbsp;<span class="op" id="7702643">:=</span>&nbsp;<span class="builtinfunc" id="7702646">make</span><span class="op" id="7702650">(</span><span class="op" id="7702651">[</span><span class="op" id="7702652">]</span><span class="builtintype" id="7702653">byte</span><span class="op" id="7702657">,</span>&nbsp;<span class="num" id="7702659">4</span><span class="op" id="7702660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702663">if</span>&nbsp;<span class="ident" id="7702666">_</span><span class="op" id="7702667">,</span>&nbsp;<span class="ident" id="7702669">err</span>&nbsp;<span class="op" id="7702673">:=</span>&nbsp;<span class="ident" id="7702676">io</span><span class="op" id="7702678">.</span><span class="ident" id="7702679">ReadFull</span><span class="op" id="7702687">(</span><span class="ident" id="7702688">tr</span><span class="op" id="7702690">,</span>&nbsp;<span class="ident" id="7702692">buf</span><span class="op" id="7702695">)</span><span class="op" id="7702696">;</span>&nbsp;<span class="ident" id="7702698">err</span>&nbsp;<span class="op" id="7702702">!=</span>&nbsp;<span class="builtintype" id="7702705">nil</span>&nbsp;<span class="op" id="7702709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702713">t</span><span class="op" id="7702714">.</span><span class="ident" id="7702715">Fatalf</span><span class="op" id="7702721">(</span><span class="string" id="7702722">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7702744">,</span>&nbsp;<span class="ident" id="7702746">err</span><span class="op" id="7702749">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702755">if</span>&nbsp;<span class="ident" id="7702758">expected</span>&nbsp;<span class="op" id="7702767">:=</span>&nbsp;<span class="op" id="7702770">[</span><span class="op" id="7702771">]</span><span class="builtintype" id="7702772">byte</span><span class="op" id="7702776">(</span><span class="string" id="7702777">&#34;Kilt&#34;</span><span class="op" id="7702783">)</span><span class="op" id="7702784">;</span>&nbsp;<span class="op" id="7702786">!</span><span class="ident" id="7702787">bytes</span><span class="op" id="7702792">.</span><span class="ident" id="7702793">Equal</span><span class="op" id="7702798">(</span><span class="ident" id="7702799">buf</span><span class="op" id="7702802">,</span>&nbsp;<span class="ident" id="7702804">expected</span><span class="op" id="7702812">)</span>&nbsp;<span class="op" id="7702814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702818">t</span><span class="op" id="7702819">.</span><span class="ident" id="7702820">Errorf</span><span class="op" id="7702826">(</span><span class="string" id="7702827">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7702851">,</span>&nbsp;<span class="ident" id="7702853">buf</span><span class="op" id="7702856">,</span>&nbsp;<span class="ident" id="7702858">expected</span><span class="op" id="7702866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7702873">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702889">hdr</span><span class="op" id="7702892">,</span>&nbsp;<span class="ident" id="7702894">err</span>&nbsp;<span class="op" id="7702898">=</span>&nbsp;<span class="ident" id="7702900">tr</span><span class="op" id="7702902">.</span><span class="ident" id="7702903">Next</span><span class="op" id="7702907">(</span><span class="op" id="7702908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702911">if</span>&nbsp;<span class="ident" id="7702914">err</span>&nbsp;<span class="op" id="7702918">!=</span>&nbsp;<span class="builtintype" id="7702921">nil</span>&nbsp;<span class="op" id="7702925">||</span>&nbsp;<span class="ident" id="7702928">hdr</span>&nbsp;<span class="op" id="7702932">==</span>&nbsp;<span class="builtintype" id="7702935">nil</span>&nbsp;<span class="op" id="7702939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702943">t</span><span class="op" id="7702944">.</span><span class="ident" id="7702945">Fatalf</span><span class="op" id="7702951">(</span><span class="string" id="7702952">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7702980">,</span>&nbsp;<span class="ident" id="7702982">err</span><span class="op" id="7702985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702988">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702991">buf</span>&nbsp;<span class="op" id="7702995">=</span>&nbsp;<span class="builtinfunc" id="7702997">make</span><span class="op" id="7703001">(</span><span class="op" id="7703002">[</span><span class="op" id="7703003">]</span><span class="builtintype" id="7703004">byte</span><span class="op" id="7703008">,</span>&nbsp;<span class="num" id="7703010">6</span><span class="op" id="7703011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703014">if</span>&nbsp;<span class="ident" id="7703017">_</span><span class="op" id="7703018">,</span>&nbsp;<span class="ident" id="7703020">err</span>&nbsp;<span class="op" id="7703024">:=</span>&nbsp;<span class="ident" id="7703027">io</span><span class="op" id="7703029">.</span><span class="ident" id="7703030">ReadFull</span><span class="op" id="7703038">(</span><span class="ident" id="7703039">tr</span><span class="op" id="7703041">,</span>&nbsp;<span class="ident" id="7703043">buf</span><span class="op" id="7703046">)</span><span class="op" id="7703047">;</span>&nbsp;<span class="ident" id="7703049">err</span>&nbsp;<span class="op" id="7703053">!=</span>&nbsp;<span class="builtintype" id="7703056">nil</span>&nbsp;<span class="op" id="7703060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703064">t</span><span class="op" id="7703065">.</span><span class="ident" id="7703066">Fatalf</span><span class="op" id="7703072">(</span><span class="string" id="7703073">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7703095">,</span>&nbsp;<span class="ident" id="7703097">err</span><span class="op" id="7703100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703106">if</span>&nbsp;<span class="ident" id="7703109">expected</span>&nbsp;<span class="op" id="7703118">:=</span>&nbsp;<span class="op" id="7703121">[</span><span class="op" id="7703122">]</span><span class="builtintype" id="7703123">byte</span><span class="op" id="7703127">(</span><span class="string" id="7703128">&#34;Google&#34;</span><span class="op" id="7703136">)</span><span class="op" id="7703137">;</span>&nbsp;<span class="op" id="7703139">!</span><span class="ident" id="7703140">bytes</span><span class="op" id="7703145">.</span><span class="ident" id="7703146">Equal</span><span class="op" id="7703151">(</span><span class="ident" id="7703152">buf</span><span class="op" id="7703155">,</span>&nbsp;<span class="ident" id="7703157">expected</span><span class="op" id="7703165">)</span>&nbsp;<span class="op" id="7703167">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703171">t</span><span class="op" id="7703172">.</span><span class="ident" id="7703173">Errorf</span><span class="op" id="7703179">(</span><span class="string" id="7703180">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7703204">,</span>&nbsp;<span class="ident" id="7703206">buf</span><span class="op" id="7703209">,</span>&nbsp;<span class="ident" id="7703211">expected</span><span class="op" id="7703219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703222">}</span><br>
<span class="lineno"></span><span class="op" id="7703224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7703227">func</span>&nbsp;<span class="ident" id="7703232">TestIncrementalRead</span><span class="op" id="7703251">(</span><span class="ident" id="7703252">t</span>&nbsp;<span class="op" id="7703254">*</span><span class="ident" id="7703255">testing</span><span class="op" id="7703262">.</span><span class="ident" id="7703263">T</span><span class="op" id="7703264">)</span>&nbsp;<span class="op" id="7703266">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703269">test</span>&nbsp;<span class="op" id="7703274">:=</span>&nbsp;<span class="ident" id="7703277">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703289">f</span><span class="op" id="7703290">,</span>&nbsp;<span class="ident" id="7703292">err</span>&nbsp;<span class="op" id="7703296">:=</span>&nbsp;<span class="ident" id="7703299">os</span><span class="op" id="7703301">.</span><span class="ident" id="7703302">Open</span><span class="op" id="7703306">(</span><span class="ident" id="7703307">test</span><span class="op" id="7703311">.</span><span class="ident" id="7703312">file</span><span class="op" id="7703316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703319">if</span>&nbsp;<span class="ident" id="7703322">err</span>&nbsp;<span class="op" id="7703326">!=</span>&nbsp;<span class="builtintype" id="7703329">nil</span>&nbsp;<span class="op" id="7703333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703337">t</span><span class="op" id="7703338">.</span><span class="ident" id="7703339">Fatalf</span><span class="op" id="7703345">(</span><span class="string" id="7703346">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7703368">,</span>&nbsp;<span class="ident" id="7703370">err</span><span class="op" id="7703373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703376">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703379">defer</span>&nbsp;<span class="ident" id="7703385">f</span><span class="op" id="7703386">.</span><span class="ident" id="7703387">Close</span><span class="op" id="7703392">(</span><span class="op" id="7703393">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703397">tr</span>&nbsp;<span class="op" id="7703400">:=</span>&nbsp;<span class="ident" id="7703403">NewReader</span><span class="op" id="7703412">(</span><span class="ident" id="7703413">f</span><span class="op" id="7703414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703418">headers</span>&nbsp;<span class="op" id="7703426">:=</span>&nbsp;<span class="ident" id="7703429">test</span><span class="op" id="7703433">.</span><span class="ident" id="7703434">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703443">cksums</span>&nbsp;<span class="op" id="7703450">:=</span>&nbsp;<span class="ident" id="7703453">test</span><span class="op" id="7703457">.</span><span class="ident" id="7703458">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703466">nread</span>&nbsp;<span class="op" id="7703472">:=</span>&nbsp;<span class="num" id="7703475">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7703479">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703503">for</span>&nbsp;<span class="op" id="7703507">;</span>&nbsp;<span class="op" id="7703509">;</span>&nbsp;<span class="ident" id="7703511">nread</span><span class="op" id="7703516">++</span>&nbsp;<span class="op" id="7703519">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703523">hdr</span><span class="op" id="7703526">,</span>&nbsp;<span class="ident" id="7703528">err</span>&nbsp;<span class="op" id="7703532">:=</span>&nbsp;<span class="ident" id="7703535">tr</span><span class="op" id="7703537">.</span><span class="ident" id="7703538">Next</span><span class="op" id="7703542">(</span><span class="op" id="7703543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703547">if</span>&nbsp;<span class="ident" id="7703550">hdr</span>&nbsp;<span class="op" id="7703554">==</span>&nbsp;<span class="builtintype" id="7703557">nil</span>&nbsp;<span class="op" id="7703561">||</span>&nbsp;<span class="ident" id="7703564">err</span>&nbsp;<span class="op" id="7703568">==</span>&nbsp;<span class="ident" id="7703571">io</span><span class="op" id="7703573">.</span><span class="ident" id="7703574">EOF</span>&nbsp;<span class="op" id="7703578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703583">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7703596">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703618">if</span>&nbsp;<span class="op" id="7703621">!</span><span class="ident" id="7703622">reflect</span><span class="op" id="7703629">.</span><span class="ident" id="7703630">DeepEqual</span><span class="op" id="7703639">(</span><span class="op" id="7703640">*</span><span class="ident" id="7703641">hdr</span><span class="op" id="7703644">,</span>&nbsp;<span class="op" id="7703646">*</span><span class="ident" id="7703647">headers</span><span class="op" id="7703654">[</span><span class="ident" id="7703655">nread</span><span class="op" id="7703660">]</span><span class="op" id="7703661">)</span>&nbsp;<span class="op" id="7703663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703668">t</span><span class="op" id="7703669">.</span><span class="ident" id="7703670">Errorf</span><span class="op" id="7703676">(</span><span class="string" id="7703677">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7703716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703722">*</span><span class="ident" id="7703723">hdr</span><span class="op" id="7703726">,</span>&nbsp;<span class="ident" id="7703728">headers</span><span class="op" id="7703735">[</span><span class="ident" id="7703736">nread</span><span class="op" id="7703741">]</span><span class="op" id="7703742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703746">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7703751">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7703797">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703827">h</span>&nbsp;<span class="op" id="7703829">:=</span>&nbsp;<span class="ident" id="7703832">md5</span><span class="op" id="7703835">.</span><span class="ident" id="7703836">New</span><span class="op" id="7703839">(</span><span class="op" id="7703840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703844">rdbuf</span>&nbsp;<span class="op" id="7703850">:=</span>&nbsp;<span class="builtinfunc" id="7703853">make</span><span class="op" id="7703857">(</span><span class="op" id="7703858">[</span><span class="op" id="7703859">]</span><span class="builtintype" id="7703860">uint8</span><span class="op" id="7703865">,</span>&nbsp;<span class="num" id="7703867">8</span><span class="op" id="7703868">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703872">for</span>&nbsp;<span class="op" id="7703876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703881">nr</span><span class="op" id="7703883">,</span>&nbsp;<span class="ident" id="7703885">err</span>&nbsp;<span class="op" id="7703889">:=</span>&nbsp;<span class="ident" id="7703892">tr</span><span class="op" id="7703894">.</span><span class="ident" id="7703895">Read</span><span class="op" id="7703899">(</span><span class="ident" id="7703900">rdbuf</span><span class="op" id="7703905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703910">if</span>&nbsp;<span class="ident" id="7703913">err</span>&nbsp;<span class="op" id="7703917">==</span>&nbsp;<span class="ident" id="7703920">io</span><span class="op" id="7703922">.</span><span class="ident" id="7703923">EOF</span>&nbsp;<span class="op" id="7703927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703933">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703942">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703947">if</span>&nbsp;<span class="ident" id="7703950">err</span>&nbsp;<span class="op" id="7703954">!=</span>&nbsp;<span class="builtintype" id="7703957">nil</span>&nbsp;<span class="op" id="7703961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703967">t</span><span class="op" id="7703968">.</span><span class="ident" id="7703969">Errorf</span><span class="op" id="7703975">(</span><span class="string" id="7703976">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7704005">,</span>&nbsp;<span class="ident" id="7704007">err</span><span class="op" id="7704010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704016">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704030">h</span><span class="op" id="7704031">.</span><span class="ident" id="7704032">Write</span><span class="op" id="7704037">(</span><span class="ident" id="7704038">rdbuf</span><span class="op" id="7704043">[</span><span class="num" id="7704044">0</span><span class="op" id="7704045">:</span><span class="ident" id="7704046">nr</span><span class="op" id="7704048">]</span><span class="op" id="7704049">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704057">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704078">have</span>&nbsp;<span class="op" id="7704083">:=</span>&nbsp;<span class="ident" id="7704086">fmt</span><span class="op" id="7704089">.</span><span class="ident" id="7704090">Sprintf</span><span class="op" id="7704097">(</span><span class="string" id="7704098">&#34;%x&#34;</span><span class="op" id="7704102">,</span>&nbsp;<span class="ident" id="7704104">h</span><span class="op" id="7704105">.</span><span class="ident" id="7704106">Sum</span><span class="op" id="7704109">(</span><span class="builtintype" id="7704110">nil</span><span class="op" id="7704113">)</span><span class="op" id="7704114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704118">want</span>&nbsp;<span class="op" id="7704123">:=</span>&nbsp;<span class="ident" id="7704126">cksums</span><span class="op" id="7704132">[</span><span class="ident" id="7704133">nread</span><span class="op" id="7704138">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704142">if</span>&nbsp;<span class="ident" id="7704145">want</span>&nbsp;<span class="op" id="7704150">!=</span>&nbsp;<span class="ident" id="7704153">have</span>&nbsp;<span class="op" id="7704158">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704163">t</span><span class="op" id="7704164">.</span><span class="ident" id="7704165">Errorf</span><span class="op" id="7704171">(</span><span class="string" id="7704172">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7704218">,</span>&nbsp;<span class="ident" id="7704220">hdr</span><span class="op" id="7704223">.</span><span class="ident" id="7704224">Name</span><span class="op" id="7704228">,</span>&nbsp;<span class="ident" id="7704230">have</span><span class="op" id="7704234">,</span>&nbsp;<span class="ident" id="7704236">want</span><span class="op" id="7704240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704250">if</span>&nbsp;<span class="ident" id="7704253">nread</span>&nbsp;<span class="op" id="7704259">!=</span>&nbsp;<span class="builtinfunc" id="7704262">len</span><span class="op" id="7704265">(</span><span class="ident" id="7704266">headers</span><span class="op" id="7704273">)</span>&nbsp;<span class="op" id="7704275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704279">t</span><span class="op" id="7704280">.</span><span class="ident" id="7704281">Errorf</span><span class="op" id="7704287">(</span><span class="string" id="7704288">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7704344">,</span>&nbsp;<span class="builtinfunc" id="7704346">len</span><span class="op" id="7704349">(</span><span class="ident" id="7704350">headers</span><span class="op" id="7704357">)</span><span class="op" id="7704358">,</span>&nbsp;<span class="ident" id="7704360">nread</span><span class="op" id="7704365">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704368">}</span><br>
<span class="lineno"></span><span class="op" id="7704370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704373">func</span>&nbsp;<span class="ident" id="7704378">TestNonSeekable</span><span class="op" id="7704393">(</span><span class="ident" id="7704394">t</span>&nbsp;<span class="op" id="7704396">*</span><span class="ident" id="7704397">testing</span><span class="op" id="7704404">.</span><span class="ident" id="7704405">T</span><span class="op" id="7704406">)</span>&nbsp;<span class="op" id="7704408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704411">test</span>&nbsp;<span class="op" id="7704416">:=</span>&nbsp;<span class="ident" id="7704419">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704431">f</span><span class="op" id="7704432">,</span>&nbsp;<span class="ident" id="7704434">err</span>&nbsp;<span class="op" id="7704438">:=</span>&nbsp;<span class="ident" id="7704441">os</span><span class="op" id="7704443">.</span><span class="ident" id="7704444">Open</span><span class="op" id="7704448">(</span><span class="ident" id="7704449">test</span><span class="op" id="7704453">.</span><span class="ident" id="7704454">file</span><span class="op" id="7704458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704461">if</span>&nbsp;<span class="ident" id="7704464">err</span>&nbsp;<span class="op" id="7704468">!=</span>&nbsp;<span class="builtintype" id="7704471">nil</span>&nbsp;<span class="op" id="7704475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704479">t</span><span class="op" id="7704480">.</span><span class="ident" id="7704481">Fatalf</span><span class="op" id="7704487">(</span><span class="string" id="7704488">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7704510">,</span>&nbsp;<span class="ident" id="7704512">err</span><span class="op" id="7704515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704521">defer</span>&nbsp;<span class="ident" id="7704527">f</span><span class="op" id="7704528">.</span><span class="ident" id="7704529">Close</span><span class="op" id="7704534">(</span><span class="op" id="7704535">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704539">type</span>&nbsp;<span class="ident" id="7704544">readerOnly</span>&nbsp;<span class="keyword" id="7704555">struct</span>&nbsp;<span class="op" id="7704562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704566">io</span><span class="op" id="7704568">.</span><span class="ident" id="7704569">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704580">tr</span>&nbsp;<span class="op" id="7704583">:=</span>&nbsp;<span class="ident" id="7704586">NewReader</span><span class="op" id="7704595">(</span><span class="ident" id="7704596">readerOnly</span><span class="op" id="7704606">{</span><span class="ident" id="7704607">f</span><span class="op" id="7704608">}</span><span class="op" id="7704609">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704612">nread</span>&nbsp;<span class="op" id="7704618">:=</span>&nbsp;<span class="num" id="7704621">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704625">for</span>&nbsp;<span class="op" id="7704629">;</span>&nbsp;<span class="op" id="7704631">;</span>&nbsp;<span class="ident" id="7704633">nread</span><span class="op" id="7704638">++</span>&nbsp;<span class="op" id="7704641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704645">_</span><span class="op" id="7704646">,</span>&nbsp;<span class="ident" id="7704648">err</span>&nbsp;<span class="op" id="7704652">:=</span>&nbsp;<span class="ident" id="7704655">tr</span><span class="op" id="7704657">.</span><span class="ident" id="7704658">Next</span><span class="op" id="7704662">(</span><span class="op" id="7704663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704667">if</span>&nbsp;<span class="ident" id="7704670">err</span>&nbsp;<span class="op" id="7704674">==</span>&nbsp;<span class="ident" id="7704677">io</span><span class="op" id="7704679">.</span><span class="ident" id="7704680">EOF</span>&nbsp;<span class="op" id="7704684">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704689">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704701">if</span>&nbsp;<span class="ident" id="7704704">err</span>&nbsp;<span class="op" id="7704708">!=</span>&nbsp;<span class="builtintype" id="7704711">nil</span>&nbsp;<span class="op" id="7704715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704720">t</span><span class="op" id="7704721">.</span><span class="ident" id="7704722">Fatalf</span><span class="op" id="7704728">(</span><span class="string" id="7704729">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7704751">,</span>&nbsp;<span class="ident" id="7704753">err</span><span class="op" id="7704756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704760">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704767">if</span>&nbsp;<span class="ident" id="7704770">nread</span>&nbsp;<span class="op" id="7704776">!=</span>&nbsp;<span class="builtinfunc" id="7704779">len</span><span class="op" id="7704782">(</span><span class="ident" id="7704783">test</span><span class="op" id="7704787">.</span><span class="ident" id="7704788">headers</span><span class="op" id="7704795">)</span>&nbsp;<span class="op" id="7704797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704801">t</span><span class="op" id="7704802">.</span><span class="ident" id="7704803">Errorf</span><span class="op" id="7704809">(</span><span class="string" id="7704810">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7704866">,</span>&nbsp;<span class="builtinfunc" id="7704868">len</span><span class="op" id="7704871">(</span><span class="ident" id="7704872">test</span><span class="op" id="7704876">.</span><span class="ident" id="7704877">headers</span><span class="op" id="7704884">)</span><span class="op" id="7704885">,</span>&nbsp;<span class="ident" id="7704887">nread</span><span class="op" id="7704892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704895">}</span><br>
<span class="lineno">440</span><span class="op" id="7704897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704900">func</span>&nbsp;<span class="ident" id="7704905">TestParsePAXHeader</span><span class="op" id="7704923">(</span><span class="ident" id="7704924">t</span>&nbsp;<span class="op" id="7704926">*</span><span class="ident" id="7704927">testing</span><span class="op" id="7704934">.</span><span class="ident" id="7704935">T</span><span class="op" id="7704936">)</span>&nbsp;<span class="op" id="7704938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704941">paxTests</span>&nbsp;<span class="op" id="7704950">:=</span>&nbsp;<span class="op" id="7704953">[</span><span class="op" id="7704954">]</span><span class="op" id="7704955">[</span><span class="num" id="7704956">3</span><span class="op" id="7704957">]</span><span class="builtintype" id="7704958">string</span><span class="op" id="7704964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704968">{</span><span class="string" id="7704969">&#34;a&#34;</span><span class="op" id="7704972">,</span>&nbsp;<span class="string" id="7704974">&#34;a=name&#34;</span><span class="op" id="7704982">,</span>&nbsp;<span class="string" id="7704984">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7704997">}</span><span class="op" id="7704998">,</span>&nbsp;<span class="comment" id="7705000">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705053">{</span><span class="string" id="7705054">&#34;a&#34;</span><span class="op" id="7705057">,</span>&nbsp;<span class="string" id="7705059">&#34;a=name&#34;</span><span class="op" id="7705067">,</span>&nbsp;<span class="string" id="7705069">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7705081">}</span><span class="op" id="7705082">,</span>&nbsp;&nbsp;<span class="comment" id="7705085">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705137">{</span><span class="string" id="7705138">&#34;mtime&#34;</span><span class="op" id="7705145">,</span>&nbsp;<span class="string" id="7705147">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7705175">,</span>&nbsp;<span class="string" id="7705177">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7705210">}</span><span class="op" id="7705211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705214">for</span>&nbsp;<span class="ident" id="7705218">_</span><span class="op" id="7705219">,</span>&nbsp;<span class="ident" id="7705221">test</span>&nbsp;<span class="op" id="7705226">:=</span>&nbsp;<span class="keyword" id="7705229">range</span>&nbsp;<span class="ident" id="7705235">paxTests</span>&nbsp;<span class="op" id="7705244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705248">key</span><span class="op" id="7705251">,</span>&nbsp;<span class="ident" id="7705253">expected</span><span class="op" id="7705261">,</span>&nbsp;<span class="ident" id="7705263">raw</span>&nbsp;<span class="op" id="7705267">:=</span>&nbsp;<span class="ident" id="7705270">test</span><span class="op" id="7705274">[</span><span class="num" id="7705275">0</span><span class="op" id="7705276">]</span><span class="op" id="7705277">,</span>&nbsp;<span class="ident" id="7705279">test</span><span class="op" id="7705283">[</span><span class="num" id="7705284">1</span><span class="op" id="7705285">]</span><span class="op" id="7705286">,</span>&nbsp;<span class="ident" id="7705288">test</span><span class="op" id="7705292">[</span><span class="num" id="7705293">2</span><span class="op" id="7705294">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705298">reader</span>&nbsp;<span class="op" id="7705305">:=</span>&nbsp;<span class="ident" id="7705308">bytes</span><span class="op" id="7705313">.</span><span class="ident" id="7705314">NewReader</span><span class="op" id="7705323">(</span><span class="op" id="7705324">[</span><span class="op" id="7705325">]</span><span class="builtintype" id="7705326">byte</span><span class="op" id="7705330">(</span><span class="ident" id="7705331">raw</span><span class="op" id="7705334">)</span><span class="op" id="7705335">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705339">headers</span><span class="op" id="7705346">,</span>&nbsp;<span class="ident" id="7705348">err</span>&nbsp;<span class="op" id="7705352">:=</span>&nbsp;<span class="ident" id="7705355">parsePAX</span><span class="op" id="7705363">(</span><span class="ident" id="7705364">reader</span><span class="op" id="7705370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705374">if</span>&nbsp;<span class="ident" id="7705377">err</span>&nbsp;<span class="op" id="7705381">!=</span>&nbsp;<span class="builtintype" id="7705384">nil</span>&nbsp;<span class="op" id="7705388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705393">t</span><span class="op" id="7705394">.</span><span class="ident" id="7705395">Errorf</span><span class="op" id="7705401">(</span><span class="string" id="7705402">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7705450">,</span>&nbsp;<span class="ident" id="7705452">err</span><span class="op" id="7705455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705460">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705471">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705475">if</span>&nbsp;<span class="ident" id="7705478">strings</span><span class="op" id="7705485">.</span><span class="ident" id="7705486">EqualFold</span><span class="op" id="7705495">(</span><span class="ident" id="7705496">headers</span><span class="op" id="7705503">[</span><span class="ident" id="7705504">key</span><span class="op" id="7705507">]</span><span class="op" id="7705508">,</span>&nbsp;<span class="ident" id="7705510">expected</span><span class="op" id="7705518">)</span>&nbsp;<span class="op" id="7705520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705525">t</span><span class="op" id="7705526">.</span><span class="ident" id="7705527">Errorf</span><span class="op" id="7705533">(</span><span class="string" id="7705534">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7705586">,</span>&nbsp;<span class="ident" id="7705588">headers</span><span class="op" id="7705595">[</span><span class="ident" id="7705596">key</span><span class="op" id="7705599">]</span><span class="op" id="7705600">,</span>&nbsp;<span class="ident" id="7705602">expected</span><span class="op" id="7705610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705615">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705630">trailer</span>&nbsp;<span class="op" id="7705638">:=</span>&nbsp;<span class="builtinfunc" id="7705641">make</span><span class="op" id="7705645">(</span><span class="op" id="7705646">[</span><span class="op" id="7705647">]</span><span class="builtintype" id="7705648">byte</span><span class="op" id="7705652">,</span>&nbsp;<span class="num" id="7705654">100</span><span class="op" id="7705657">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705661">n</span><span class="op" id="7705662">,</span>&nbsp;<span class="ident" id="7705664">err</span>&nbsp;<span class="op" id="7705668">:=</span>&nbsp;<span class="ident" id="7705671">reader</span><span class="op" id="7705677">.</span><span class="ident" id="7705678">Read</span><span class="op" id="7705682">(</span><span class="ident" id="7705683">trailer</span><span class="op" id="7705690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705694">if</span>&nbsp;<span class="ident" id="7705697">err</span>&nbsp;<span class="op" id="7705701">!=</span>&nbsp;<span class="ident" id="7705704">io</span><span class="op" id="7705706">.</span><span class="ident" id="7705707">EOF</span>&nbsp;<span class="op" id="7705711">||</span>&nbsp;<span class="ident" id="7705714">n</span>&nbsp;<span class="op" id="7705716">!=</span>&nbsp;<span class="num" id="7705719">0</span>&nbsp;<span class="op" id="7705721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705726">t</span><span class="op" id="7705727">.</span><span class="ident" id="7705728">Error</span><span class="op" id="7705733">(</span><span class="string" id="7705734">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7705758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705765">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705768">badHeader</span>&nbsp;<span class="op" id="7705778">:=</span>&nbsp;<span class="ident" id="7705781">bytes</span><span class="op" id="7705786">.</span><span class="ident" id="7705787">NewReader</span><span class="op" id="7705796">(</span><span class="op" id="7705797">[</span><span class="op" id="7705798">]</span><span class="builtintype" id="7705799">byte</span><span class="op" id="7705803">(</span><span class="string" id="7705804">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7705820">)</span><span class="op" id="7705821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705824">if</span>&nbsp;<span class="ident" id="7705827">_</span><span class="op" id="7705828">,</span>&nbsp;<span class="ident" id="7705830">err</span>&nbsp;<span class="op" id="7705834">:=</span>&nbsp;<span class="ident" id="7705837">parsePAX</span><span class="op" id="7705845">(</span><span class="ident" id="7705846">badHeader</span><span class="op" id="7705855">)</span><span class="op" id="7705856">;</span>&nbsp;<span class="ident" id="7705858">err</span>&nbsp;<span class="op" id="7705862">!=</span>&nbsp;<span class="ident" id="7705865">ErrHeader</span>&nbsp;<span class="op" id="7705875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705879">t</span><span class="op" id="7705880">.</span><span class="ident" id="7705881">Fatal</span><span class="op" id="7705886">(</span><span class="string" id="7705887">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7705931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705934">}</span><br>
<span class="lineno"></span><span class="op" id="7705936">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7705939">func</span>&nbsp;<span class="ident" id="7705944">TestParsePAXTime</span><span class="op" id="7705960">(</span><span class="ident" id="7705961">t</span>&nbsp;<span class="op" id="7705963">*</span><span class="ident" id="7705964">testing</span><span class="op" id="7705971">.</span><span class="ident" id="7705972">T</span><span class="op" id="7705973">)</span>&nbsp;<span class="op" id="7705975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705978">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706009">timestamps</span>&nbsp;<span class="op" id="7706020">:=</span>&nbsp;<span class="keyword" id="7706023">map</span><span class="op" id="7706026">[</span><span class="builtintype" id="7706027">string</span><span class="op" id="7706033">]</span><span class="ident" id="7706034">time</span><span class="op" id="7706038">.</span><span class="ident" id="7706039">Time</span><span class="op" id="7706043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706047">&#34;1350244992.023960108&#34;</span><span class="op" id="7706069">:</span>&nbsp;&nbsp;<span class="ident" id="7706072">time</span><span class="op" id="7706076">.</span><span class="ident" id="7706077">Unix</span><span class="op" id="7706081">(</span><span class="num" id="7706082">1350244992</span><span class="op" id="7706092">,</span>&nbsp;<span class="num" id="7706094">23960108</span><span class="op" id="7706102">)</span><span class="op" id="7706103">,</span>&nbsp;<span class="comment" id="7706105">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706126">&#34;1350244992.02396010&#34;</span><span class="op" id="7706147">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7706151">time</span><span class="op" id="7706155">.</span><span class="ident" id="7706156">Unix</span><span class="op" id="7706160">(</span><span class="num" id="7706161">1350244992</span><span class="op" id="7706171">,</span>&nbsp;<span class="num" id="7706173">23960100</span><span class="op" id="7706181">)</span><span class="op" id="7706182">,</span>&nbsp;<span class="comment" id="7706184">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706211">&#34;1350244992.0239601089&#34;</span><span class="op" id="7706234">:</span>&nbsp;<span class="ident" id="7706236">time</span><span class="op" id="7706240">.</span><span class="ident" id="7706241">Unix</span><span class="op" id="7706245">(</span><span class="num" id="7706246">1350244992</span><span class="op" id="7706256">,</span>&nbsp;<span class="num" id="7706258">23960108</span><span class="op" id="7706266">)</span><span class="op" id="7706267">,</span>&nbsp;<span class="comment" id="7706269">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706297">&#34;1350244992&#34;</span><span class="op" id="7706309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706322">time</span><span class="op" id="7706326">.</span><span class="ident" id="7706327">Unix</span><span class="op" id="7706331">(</span><span class="num" id="7706332">1350244992</span><span class="op" id="7706342">,</span>&nbsp;<span class="num" id="7706344">0</span><span class="op" id="7706345">)</span><span class="op" id="7706346">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7706355">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7706382">for</span>&nbsp;<span class="ident" id="7706386">input</span><span class="op" id="7706391">,</span>&nbsp;<span class="ident" id="7706393">expected</span>&nbsp;<span class="op" id="7706402">:=</span>&nbsp;<span class="keyword" id="7706405">range</span>&nbsp;<span class="ident" id="7706411">timestamps</span>&nbsp;<span class="op" id="7706422">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706426">ts</span><span class="op" id="7706428">,</span>&nbsp;<span class="ident" id="7706430">err</span>&nbsp;<span class="op" id="7706434">:=</span>&nbsp;<span class="ident" id="7706437">parsePAXTime</span><span class="op" id="7706449">(</span><span class="ident" id="7706450">input</span><span class="op" id="7706455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7706459">if</span>&nbsp;<span class="ident" id="7706462">err</span>&nbsp;<span class="op" id="7706466">!=</span>&nbsp;<span class="builtintype" id="7706469">nil</span>&nbsp;<span class="op" id="7706473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706478">t</span><span class="op" id="7706479">.</span><span class="ident" id="7706480">Fatal</span><span class="op" id="7706485">(</span><span class="ident" id="7706486">err</span><span class="op" id="7706489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7706497">if</span>&nbsp;<span class="op" id="7706500">!</span><span class="ident" id="7706501">ts</span><span class="op" id="7706503">.</span><span class="ident" id="7706504">Equal</span><span class="op" id="7706509">(</span><span class="ident" id="7706510">expected</span><span class="op" id="7706518">)</span>&nbsp;<span class="op" id="7706520">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706525">t</span><span class="op" id="7706526">.</span><span class="ident" id="7706527">Fatalf</span><span class="op" id="7706533">(</span><span class="string" id="7706534">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7706562">,</span>&nbsp;<span class="ident" id="7706564">ts</span><span class="op" id="7706566">,</span>&nbsp;<span class="ident" id="7706568">expected</span><span class="op" id="7706576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706583">}</span><br>
<span class="lineno"></span><span class="op" id="7706585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7706588">func</span>&nbsp;<span class="ident" id="7706593">TestMergePAX</span><span class="op" id="7706605">(</span><span class="ident" id="7706606">t</span>&nbsp;<span class="op" id="7706608">*</span><span class="ident" id="7706609">testing</span><span class="op" id="7706616">.</span><span class="ident" id="7706617">T</span><span class="op" id="7706618">)</span>&nbsp;<span class="op" id="7706620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706623">hdr</span>&nbsp;<span class="op" id="7706627">:=</span>&nbsp;<span class="builtinfunc" id="7706630">new</span><span class="op" id="7706633">(</span><span class="ident" id="7706634">Header</span><span class="op" id="7706640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7706643">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706693">headers</span>&nbsp;<span class="op" id="7706701">:=</span>&nbsp;<span class="keyword" id="7706704">map</span><span class="op" id="7706707">[</span><span class="builtintype" id="7706708">string</span><span class="op" id="7706714">]</span><span class="builtintype" id="7706715">string</span><span class="op" id="7706721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706725">&#34;path&#34;</span><span class="op" id="7706731">:</span>&nbsp;&nbsp;<span class="string" id="7706734">&#34;a/b/c&#34;</span><span class="op" id="7706741">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706745">&#34;uid&#34;</span><span class="op" id="7706750">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7706754">&#34;1000&#34;</span><span class="op" id="7706760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706764">&#34;mtime&#34;</span><span class="op" id="7706771">:</span>&nbsp;<span class="string" id="7706773">&#34;1350244992.023960108&#34;</span><span class="op" id="7706795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706801">err</span>&nbsp;<span class="op" id="7706805">:=</span>&nbsp;<span class="ident" id="7706808">mergePAX</span><span class="op" id="7706816">(</span><span class="ident" id="7706817">hdr</span><span class="op" id="7706820">,</span>&nbsp;<span class="ident" id="7706822">headers</span><span class="op" id="7706829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7706832">if</span>&nbsp;<span class="ident" id="7706835">err</span>&nbsp;<span class="op" id="7706839">!=</span>&nbsp;<span class="builtintype" id="7706842">nil</span>&nbsp;<span class="op" id="7706846">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706850">t</span><span class="op" id="7706851">.</span><span class="ident" id="7706852">Fatal</span><span class="op" id="7706857">(</span><span class="ident" id="7706858">err</span><span class="op" id="7706861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706867">want</span>&nbsp;<span class="op" id="7706872">:=</span>&nbsp;<span class="op" id="7706875">&amp;</span><span class="ident" id="7706876">Header</span><span class="op" id="7706882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706886">Name</span><span class="op" id="7706890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706895">&#34;a/b/c&#34;</span><span class="op" id="7706902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706906">Uid</span><span class="op" id="7706909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7706915">1000</span><span class="op" id="7706919">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7706923">ModTime</span><span class="op" id="7706930">:</span>&nbsp;<span class="ident" id="7706932">time</span><span class="op" id="7706936">.</span><span class="ident" id="7706937">Unix</span><span class="op" id="7706941">(</span><span class="num" id="7706942">1350244992</span><span class="op" id="7706952">,</span>&nbsp;<span class="num" id="7706954">23960108</span><span class="op" id="7706962">)</span><span class="op" id="7706963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7706969">if</span>&nbsp;<span class="op" id="7706972">!</span><span class="ident" id="7706973">reflect</span><span class="op" id="7706980">.</span><span class="ident" id="7706981">DeepEqual</span><span class="op" id="7706990">(</span><span class="ident" id="7706991">hdr</span><span class="op" id="7706994">,</span>&nbsp;<span class="ident" id="7706996">want</span><span class="op" id="7707000">)</span>&nbsp;<span class="op" id="7707002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707006">t</span><span class="op" id="7707007">.</span><span class="ident" id="7707008">Errorf</span><span class="op" id="7707014">(</span><span class="string" id="7707015">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7707051">,</span>&nbsp;<span class="ident" id="7707053">hdr</span><span class="op" id="7707056">,</span>&nbsp;<span class="ident" id="7707058">want</span><span class="op" id="7707062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707065">}</span><br>
<span class="lineno">510</span><span class="op" id="7707067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707070">func</span>&nbsp;<span class="ident" id="7707075">TestSparseEndToEnd</span><span class="op" id="7707093">(</span><span class="ident" id="7707094">t</span>&nbsp;<span class="op" id="7707096">*</span><span class="ident" id="7707097">testing</span><span class="op" id="7707104">.</span><span class="ident" id="7707105">T</span><span class="op" id="7707106">)</span>&nbsp;<span class="op" id="7707108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707111">test</span>&nbsp;<span class="op" id="7707116">:=</span>&nbsp;<span class="ident" id="7707119">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707134">f</span><span class="op" id="7707135">,</span>&nbsp;<span class="ident" id="7707137">err</span>&nbsp;<span class="op" id="7707141">:=</span>&nbsp;<span class="ident" id="7707144">os</span><span class="op" id="7707146">.</span><span class="ident" id="7707147">Open</span><span class="op" id="7707151">(</span><span class="ident" id="7707152">test</span><span class="op" id="7707156">.</span><span class="ident" id="7707157">file</span><span class="op" id="7707161">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707164">if</span>&nbsp;<span class="ident" id="7707167">err</span>&nbsp;<span class="op" id="7707171">!=</span>&nbsp;<span class="builtintype" id="7707174">nil</span>&nbsp;<span class="op" id="7707178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707182">t</span><span class="op" id="7707183">.</span><span class="ident" id="7707184">Fatalf</span><span class="op" id="7707190">(</span><span class="string" id="7707191">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7707213">,</span>&nbsp;<span class="ident" id="7707215">err</span><span class="op" id="7707218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707224">defer</span>&nbsp;<span class="ident" id="7707230">f</span><span class="op" id="7707231">.</span><span class="ident" id="7707232">Close</span><span class="op" id="7707237">(</span><span class="op" id="7707238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707242">tr</span>&nbsp;<span class="op" id="7707245">:=</span>&nbsp;<span class="ident" id="7707248">NewReader</span><span class="op" id="7707257">(</span><span class="ident" id="7707258">f</span><span class="op" id="7707259">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707263">headers</span>&nbsp;<span class="op" id="7707271">:=</span>&nbsp;<span class="ident" id="7707274">test</span><span class="op" id="7707278">.</span><span class="ident" id="7707279">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707288">cksums</span>&nbsp;<span class="op" id="7707295">:=</span>&nbsp;<span class="ident" id="7707298">test</span><span class="op" id="7707302">.</span><span class="ident" id="7707303">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707311">nread</span>&nbsp;<span class="op" id="7707317">:=</span>&nbsp;<span class="num" id="7707320">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707324">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707348">for</span>&nbsp;<span class="op" id="7707352">;</span>&nbsp;<span class="op" id="7707354">;</span>&nbsp;<span class="ident" id="7707356">nread</span><span class="op" id="7707361">++</span>&nbsp;<span class="op" id="7707364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707368">hdr</span><span class="op" id="7707371">,</span>&nbsp;<span class="ident" id="7707373">err</span>&nbsp;<span class="op" id="7707377">:=</span>&nbsp;<span class="ident" id="7707380">tr</span><span class="op" id="7707382">.</span><span class="ident" id="7707383">Next</span><span class="op" id="7707387">(</span><span class="op" id="7707388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707392">if</span>&nbsp;<span class="ident" id="7707395">hdr</span>&nbsp;<span class="op" id="7707399">==</span>&nbsp;<span class="builtintype" id="7707402">nil</span>&nbsp;<span class="op" id="7707406">||</span>&nbsp;<span class="ident" id="7707409">err</span>&nbsp;<span class="op" id="7707413">==</span>&nbsp;<span class="ident" id="7707416">io</span><span class="op" id="7707418">.</span><span class="ident" id="7707419">EOF</span>&nbsp;<span class="op" id="7707423">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707428">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707441">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707463">if</span>&nbsp;<span class="op" id="7707466">!</span><span class="ident" id="7707467">reflect</span><span class="op" id="7707474">.</span><span class="ident" id="7707475">DeepEqual</span><span class="op" id="7707484">(</span><span class="op" id="7707485">*</span><span class="ident" id="7707486">hdr</span><span class="op" id="7707489">,</span>&nbsp;<span class="op" id="7707491">*</span><span class="ident" id="7707492">headers</span><span class="op" id="7707499">[</span><span class="ident" id="7707500">nread</span><span class="op" id="7707505">]</span><span class="op" id="7707506">)</span>&nbsp;<span class="op" id="7707508">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707513">t</span><span class="op" id="7707514">.</span><span class="ident" id="7707515">Errorf</span><span class="op" id="7707521">(</span><span class="string" id="7707522">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7707561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707567">*</span><span class="ident" id="7707568">hdr</span><span class="op" id="7707571">,</span>&nbsp;<span class="ident" id="7707573">headers</span><span class="op" id="7707580">[</span><span class="ident" id="7707581">nread</span><span class="op" id="7707586">]</span><span class="op" id="7707587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707596">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707633">h</span>&nbsp;<span class="op" id="7707635">:=</span>&nbsp;<span class="ident" id="7707638">md5</span><span class="op" id="7707641">.</span><span class="ident" id="7707642">New</span><span class="op" id="7707645">(</span><span class="op" id="7707646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707650">_</span><span class="op" id="7707651">,</span>&nbsp;<span class="ident" id="7707653">err</span>&nbsp;<span class="op" id="7707657">=</span>&nbsp;<span class="ident" id="7707659">io</span><span class="op" id="7707661">.</span><span class="ident" id="7707662">Copy</span><span class="op" id="7707666">(</span><span class="ident" id="7707667">h</span><span class="op" id="7707668">,</span>&nbsp;<span class="ident" id="7707670">tr</span><span class="op" id="7707672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707676">if</span>&nbsp;<span class="ident" id="7707679">err</span>&nbsp;<span class="op" id="7707683">!=</span>&nbsp;<span class="builtintype" id="7707686">nil</span>&nbsp;<span class="op" id="7707690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707695">t</span><span class="op" id="7707696">.</span><span class="ident" id="7707697">Fatalf</span><span class="op" id="7707703">(</span><span class="string" id="7707704">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7707726">,</span>&nbsp;<span class="ident" id="7707728">err</span><span class="op" id="7707731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707735">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707740">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707761">have</span>&nbsp;<span class="op" id="7707766">:=</span>&nbsp;<span class="ident" id="7707769">fmt</span><span class="op" id="7707772">.</span><span class="ident" id="7707773">Sprintf</span><span class="op" id="7707780">(</span><span class="string" id="7707781">&#34;%x&#34;</span><span class="op" id="7707785">,</span>&nbsp;<span class="ident" id="7707787">h</span><span class="op" id="7707788">.</span><span class="ident" id="7707789">Sum</span><span class="op" id="7707792">(</span><span class="builtintype" id="7707793">nil</span><span class="op" id="7707796">)</span><span class="op" id="7707797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707801">want</span>&nbsp;<span class="op" id="7707806">:=</span>&nbsp;<span class="ident" id="7707809">cksums</span><span class="op" id="7707815">[</span><span class="ident" id="7707816">nread</span><span class="op" id="7707821">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707825">if</span>&nbsp;<span class="ident" id="7707828">want</span>&nbsp;<span class="op" id="7707833">!=</span>&nbsp;<span class="ident" id="7707836">have</span>&nbsp;<span class="op" id="7707841">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707846">t</span><span class="op" id="7707847">.</span><span class="ident" id="7707848">Errorf</span><span class="op" id="7707854">(</span><span class="string" id="7707855">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7707901">,</span>&nbsp;<span class="ident" id="7707903">hdr</span><span class="op" id="7707906">.</span><span class="ident" id="7707907">Name</span><span class="op" id="7707911">,</span>&nbsp;<span class="ident" id="7707913">have</span><span class="op" id="7707917">,</span>&nbsp;<span class="ident" id="7707919">want</span><span class="op" id="7707923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7707930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7707933">if</span>&nbsp;<span class="ident" id="7707936">nread</span>&nbsp;<span class="op" id="7707942">!=</span>&nbsp;<span class="builtinfunc" id="7707945">len</span><span class="op" id="7707948">(</span><span class="ident" id="7707949">headers</span><span class="op" id="7707956">)</span>&nbsp;<span class="op" id="7707958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7707962">t</span><span class="op" id="7707963">.</span><span class="ident" id="7707964">Errorf</span><span class="op" id="7707970">(</span><span class="string" id="7707971">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7708027">,</span>&nbsp;<span class="builtinfunc" id="7708029">len</span><span class="op" id="7708032">(</span><span class="ident" id="7708033">headers</span><span class="op" id="7708040">)</span><span class="op" id="7708041">,</span>&nbsp;<span class="ident" id="7708043">nread</span><span class="op" id="7708048">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708051">}</span><br>
<span class="lineno"></span><span class="op" id="7708053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708056">type</span>&nbsp;<span class="ident" id="7708061">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7708080">struct</span>&nbsp;<span class="op" id="7708087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708090">sparseData</span>&nbsp;<span class="op" id="7708101">[</span><span class="op" id="7708102">]</span><span class="builtintype" id="7708103">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708109">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7708120">[</span><span class="op" id="7708121">]</span><span class="ident" id="7708122">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708135">realSize</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7708146">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708153">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7708164">[</span><span class="op" id="7708165">]</span><span class="builtintype" id="7708166">byte</span><br>
<span class="lineno"></span><span class="op" id="7708171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7708174">var</span>&nbsp;<span class="ident" id="7708178">sparseFileReadTests</span>&nbsp;<span class="op" id="7708198">=</span>&nbsp;<span class="op" id="7708200">[</span><span class="op" id="7708201">]</span><span class="ident" id="7708202">sparseFileReadTest</span><span class="op" id="7708220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708227">sparseData</span><span class="op" id="7708237">:</span>&nbsp;<span class="op" id="7708239">[</span><span class="op" id="7708240">]</span><span class="builtintype" id="7708241">byte</span><span class="op" id="7708245">(</span><span class="string" id="7708246">&#34;abcde&#34;</span><span class="op" id="7708253">)</span><span class="op" id="7708254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708258">sparseMap</span><span class="op" id="7708267">:</span>&nbsp;<span class="op" id="7708269">[</span><span class="op" id="7708270">]</span><span class="ident" id="7708271">sparseEntry</span><span class="op" id="7708282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708287">{</span><span class="ident" id="7708288">offset</span><span class="op" id="7708294">:</span>&nbsp;<span class="num" id="7708296">0</span><span class="op" id="7708297">,</span>&nbsp;<span class="ident" id="7708299">numBytes</span><span class="op" id="7708307">:</span>&nbsp;<span class="num" id="7708309">2</span><span class="op" id="7708310">}</span><span class="op" id="7708311">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708316">{</span><span class="ident" id="7708317">offset</span><span class="op" id="7708323">:</span>&nbsp;<span class="num" id="7708325">5</span><span class="op" id="7708326">,</span>&nbsp;<span class="ident" id="7708328">numBytes</span><span class="op" id="7708336">:</span>&nbsp;<span class="num" id="7708338">3</span><span class="op" id="7708339">}</span><span class="op" id="7708340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708344">}</span><span class="op" id="7708345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708349">realSize</span><span class="op" id="7708357">:</span>&nbsp;<span class="num" id="7708359">8</span><span class="op" id="7708360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708364">expected</span><span class="op" id="7708372">:</span>&nbsp;<span class="op" id="7708374">[</span><span class="op" id="7708375">]</span><span class="builtintype" id="7708376">byte</span><span class="op" id="7708380">(</span><span class="string" id="7708381">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7708400">)</span><span class="op" id="7708401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708404">}</span><span class="op" id="7708405">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708412">sparseData</span><span class="op" id="7708422">:</span>&nbsp;<span class="op" id="7708424">[</span><span class="op" id="7708425">]</span><span class="builtintype" id="7708426">byte</span><span class="op" id="7708430">(</span><span class="string" id="7708431">&#34;abcde&#34;</span><span class="op" id="7708438">)</span><span class="op" id="7708439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708443">sparseMap</span><span class="op" id="7708452">:</span>&nbsp;<span class="op" id="7708454">[</span><span class="op" id="7708455">]</span><span class="ident" id="7708456">sparseEntry</span><span class="op" id="7708467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708472">{</span><span class="ident" id="7708473">offset</span><span class="op" id="7708479">:</span>&nbsp;<span class="num" id="7708481">0</span><span class="op" id="7708482">,</span>&nbsp;<span class="ident" id="7708484">numBytes</span><span class="op" id="7708492">:</span>&nbsp;<span class="num" id="7708494">2</span><span class="op" id="7708495">}</span><span class="op" id="7708496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708501">{</span><span class="ident" id="7708502">offset</span><span class="op" id="7708508">:</span>&nbsp;<span class="num" id="7708510">5</span><span class="op" id="7708511">,</span>&nbsp;<span class="ident" id="7708513">numBytes</span><span class="op" id="7708521">:</span>&nbsp;<span class="num" id="7708523">3</span><span class="op" id="7708524">}</span><span class="op" id="7708525">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708529">}</span><span class="op" id="7708530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708534">realSize</span><span class="op" id="7708542">:</span>&nbsp;<span class="num" id="7708544">10</span><span class="op" id="7708546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708550">expected</span><span class="op" id="7708558">:</span>&nbsp;<span class="op" id="7708560">[</span><span class="op" id="7708561">]</span><span class="builtintype" id="7708562">byte</span><span class="op" id="7708566">(</span><span class="string" id="7708567">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7708594">)</span><span class="op" id="7708595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708598">}</span><span class="op" id="7708599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708602">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708606">sparseData</span><span class="op" id="7708616">:</span>&nbsp;<span class="op" id="7708618">[</span><span class="op" id="7708619">]</span><span class="builtintype" id="7708620">byte</span><span class="op" id="7708624">(</span><span class="string" id="7708625">&#34;abcde&#34;</span><span class="op" id="7708632">)</span><span class="op" id="7708633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708637">sparseMap</span><span class="op" id="7708646">:</span>&nbsp;<span class="op" id="7708648">[</span><span class="op" id="7708649">]</span><span class="ident" id="7708650">sparseEntry</span><span class="op" id="7708661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708666">{</span><span class="ident" id="7708667">offset</span><span class="op" id="7708673">:</span>&nbsp;<span class="num" id="7708675">1</span><span class="op" id="7708676">,</span>&nbsp;<span class="ident" id="7708678">numBytes</span><span class="op" id="7708686">:</span>&nbsp;<span class="num" id="7708688">3</span><span class="op" id="7708689">}</span><span class="op" id="7708690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708695">{</span><span class="ident" id="7708696">offset</span><span class="op" id="7708702">:</span>&nbsp;<span class="num" id="7708704">6</span><span class="op" id="7708705">,</span>&nbsp;<span class="ident" id="7708707">numBytes</span><span class="op" id="7708715">:</span>&nbsp;<span class="num" id="7708717">2</span><span class="op" id="7708718">}</span><span class="op" id="7708719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708723">}</span><span class="op" id="7708724">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708728">realSize</span><span class="op" id="7708736">:</span>&nbsp;<span class="num" id="7708738">8</span><span class="op" id="7708739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708743">expected</span><span class="op" id="7708751">:</span>&nbsp;<span class="op" id="7708753">[</span><span class="op" id="7708754">]</span><span class="builtintype" id="7708755">byte</span><span class="op" id="7708759">(</span><span class="string" id="7708760">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7708779">)</span><span class="op" id="7708780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708783">}</span><span class="op" id="7708784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708791">sparseData</span><span class="op" id="7708801">:</span>&nbsp;<span class="op" id="7708803">[</span><span class="op" id="7708804">]</span><span class="builtintype" id="7708805">byte</span><span class="op" id="7708809">(</span><span class="string" id="7708810">&#34;abcde&#34;</span><span class="op" id="7708817">)</span><span class="op" id="7708818">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708822">sparseMap</span><span class="op" id="7708831">:</span>&nbsp;<span class="op" id="7708833">[</span><span class="op" id="7708834">]</span><span class="ident" id="7708835">sparseEntry</span><span class="op" id="7708846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708851">{</span><span class="ident" id="7708852">offset</span><span class="op" id="7708858">:</span>&nbsp;<span class="num" id="7708860">1</span><span class="op" id="7708861">,</span>&nbsp;<span class="ident" id="7708863">numBytes</span><span class="op" id="7708871">:</span>&nbsp;<span class="num" id="7708873">3</span><span class="op" id="7708874">}</span><span class="op" id="7708875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708880">{</span><span class="ident" id="7708881">offset</span><span class="op" id="7708887">:</span>&nbsp;<span class="num" id="7708889">6</span><span class="op" id="7708890">,</span>&nbsp;<span class="ident" id="7708892">numBytes</span><span class="op" id="7708900">:</span>&nbsp;<span class="num" id="7708902">2</span><span class="op" id="7708903">}</span><span class="op" id="7708904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708908">}</span><span class="op" id="7708909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708913">realSize</span><span class="op" id="7708921">:</span>&nbsp;<span class="num" id="7708923">10</span><span class="op" id="7708925">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708929">expected</span><span class="op" id="7708937">:</span>&nbsp;<span class="op" id="7708939">[</span><span class="op" id="7708940">]</span><span class="builtintype" id="7708941">byte</span><span class="op" id="7708945">(</span><span class="string" id="7708946">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7708973">)</span><span class="op" id="7708974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708977">}</span><span class="op" id="7708978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7708981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7708985">sparseData</span><span class="op" id="7708995">:</span>&nbsp;<span class="op" id="7708997">[</span><span class="op" id="7708998">]</span><span class="builtintype" id="7708999">byte</span><span class="op" id="7709003">(</span><span class="string" id="7709004">&#34;&#34;</span><span class="op" id="7709006">)</span><span class="op" id="7709007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709011">sparseMap</span><span class="op" id="7709020">:</span>&nbsp;&nbsp;<span class="builtintype" id="7709023">nil</span><span class="op" id="7709026">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709030">realSize</span><span class="op" id="7709038">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7709042">2</span><span class="op" id="7709043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709047">expected</span><span class="op" id="7709055">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7709059">[</span><span class="op" id="7709060">]</span><span class="builtintype" id="7709061">byte</span><span class="op" id="7709065">(</span><span class="string" id="7709066">&#34;\x00\x00&#34;</span><span class="op" id="7709076">)</span><span class="op" id="7709077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709080">}</span><span class="op" id="7709081">,</span><br>
<span class="lineno"></span><span class="op" id="7709083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7709086">func</span>&nbsp;<span class="ident" id="7709091">TestSparseFileReader</span><span class="op" id="7709111">(</span><span class="ident" id="7709112">t</span>&nbsp;<span class="op" id="7709114">*</span><span class="ident" id="7709115">testing</span><span class="op" id="7709122">.</span><span class="ident" id="7709123">T</span><span class="op" id="7709124">)</span>&nbsp;<span class="op" id="7709126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7709129">for</span>&nbsp;<span class="ident" id="7709133">i</span><span class="op" id="7709134">,</span>&nbsp;<span class="ident" id="7709136">test</span>&nbsp;<span class="op" id="7709141">:=</span>&nbsp;<span class="keyword" id="7709144">range</span>&nbsp;<span class="ident" id="7709150">sparseFileReadTests</span>&nbsp;<span class="op" id="7709170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709174">r</span>&nbsp;<span class="op" id="7709176">:=</span>&nbsp;<span class="ident" id="7709179">bytes</span><span class="op" id="7709184">.</span><span class="ident" id="7709185">NewReader</span><span class="op" id="7709194">(</span><span class="ident" id="7709195">test</span><span class="op" id="7709199">.</span><span class="ident" id="7709200">sparseData</span><span class="op" id="7709210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709214">nb</span>&nbsp;<span class="op" id="7709217">:=</span>&nbsp;<span class="builtintype" id="7709220">int64</span><span class="op" id="7709225">(</span><span class="ident" id="7709226">r</span><span class="op" id="7709227">.</span><span class="ident" id="7709228">Len</span><span class="op" id="7709231">(</span><span class="op" id="7709232">)</span><span class="op" id="7709233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709237">sfr</span>&nbsp;<span class="op" id="7709241">:=</span>&nbsp;<span class="op" id="7709244">&amp;</span><span class="ident" id="7709245">sparseFileReader</span><span class="op" id="7709261">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709266">rfr</span><span class="op" id="7709269">:</span>&nbsp;<span class="op" id="7709271">&amp;</span><span class="ident" id="7709272">regFileReader</span><span class="op" id="7709285">{</span><span class="ident" id="7709286">r</span><span class="op" id="7709287">:</span>&nbsp;<span class="ident" id="7709289">r</span><span class="op" id="7709290">,</span>&nbsp;<span class="ident" id="7709292">nb</span><span class="op" id="7709294">:</span>&nbsp;<span class="ident" id="7709296">nb</span><span class="op" id="7709298">}</span><span class="op" id="7709299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709304">sp</span><span class="op" id="7709306">:</span>&nbsp;&nbsp;<span class="ident" id="7709309">test</span><span class="op" id="7709313">.</span><span class="ident" id="7709314">sparseMap</span><span class="op" id="7709323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709328">pos</span><span class="op" id="7709331">:</span>&nbsp;<span class="num" id="7709333">0</span><span class="op" id="7709334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709339">tot</span><span class="op" id="7709342">:</span>&nbsp;<span class="ident" id="7709344">test</span><span class="op" id="7709348">.</span><span class="ident" id="7709349">realSize</span><span class="op" id="7709357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709361">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7709365">if</span>&nbsp;<span class="ident" id="7709368">sfr</span><span class="op" id="7709371">.</span><span class="ident" id="7709372">numBytes</span><span class="op" id="7709380">(</span><span class="op" id="7709381">)</span>&nbsp;<span class="op" id="7709383">!=</span>&nbsp;<span class="ident" id="7709386">nb</span>&nbsp;<span class="op" id="7709389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709394">t</span><span class="op" id="7709395">.</span><span class="ident" id="7709396">Errorf</span><span class="op" id="7709402">(</span><span class="string" id="7709403">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7709458">,</span>&nbsp;<span class="ident" id="7709460">i</span><span class="op" id="7709461">,</span>&nbsp;<span class="ident" id="7709463">sfr</span><span class="op" id="7709466">.</span><span class="ident" id="7709467">numBytes</span><span class="op" id="7709475">(</span><span class="op" id="7709476">)</span><span class="op" id="7709477">,</span>&nbsp;<span class="ident" id="7709479">nb</span><span class="op" id="7709481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709489">buf</span><span class="op" id="7709492">,</span>&nbsp;<span class="ident" id="7709494">err</span>&nbsp;<span class="op" id="7709498">:=</span>&nbsp;<span class="ident" id="7709501">ioutil</span><span class="op" id="7709507">.</span><span class="ident" id="7709508">ReadAll</span><span class="op" id="7709515">(</span><span class="ident" id="7709516">sfr</span><span class="op" id="7709519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7709523">if</span>&nbsp;<span class="ident" id="7709526">err</span>&nbsp;<span class="op" id="7709530">!=</span>&nbsp;<span class="builtintype" id="7709533">nil</span>&nbsp;<span class="op" id="7709537">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709542">t</span><span class="op" id="7709543">.</span><span class="ident" id="7709544">Errorf</span><span class="op" id="7709550">(</span><span class="string" id="7709551">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7709582">,</span>&nbsp;<span class="ident" id="7709584">i</span><span class="op" id="7709585">,</span>&nbsp;<span class="ident" id="7709587">err</span><span class="op" id="7709590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7709598">if</span>&nbsp;<span class="ident" id="7709601">e</span>&nbsp;<span class="op" id="7709603">:=</span>&nbsp;<span class="ident" id="7709606">test</span><span class="op" id="7709610">.</span><span class="ident" id="7709611">expected</span><span class="op" id="7709619">;</span>&nbsp;<span class="op" id="7709621">!</span><span class="ident" id="7709622">bytes</span><span class="op" id="7709627">.</span><span class="ident" id="7709628">Equal</span><span class="op" id="7709633">(</span><span class="ident" id="7709634">buf</span><span class="op" id="7709637">,</span>&nbsp;<span class="ident" id="7709639">e</span><span class="op" id="7709640">)</span>&nbsp;<span class="op" id="7709642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709647">t</span><span class="op" id="7709648">.</span><span class="ident" id="7709649">Errorf</span><span class="op" id="7709655">(</span><span class="string" id="7709656">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7709689">,</span>&nbsp;<span class="ident" id="7709691">i</span><span class="op" id="7709692">,</span>&nbsp;<span class="ident" id="7709694">buf</span><span class="op" id="7709697">,</span>&nbsp;<span class="ident" id="7709699">e</span><span class="op" id="7709700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709704">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7709708">if</span>&nbsp;<span class="ident" id="7709711">sfr</span><span class="op" id="7709714">.</span><span class="ident" id="7709715">numBytes</span><span class="op" id="7709723">(</span><span class="op" id="7709724">)</span>&nbsp;<span class="op" id="7709726">!=</span>&nbsp;<span class="num" id="7709729">0</span>&nbsp;<span class="op" id="7709731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709736">t</span><span class="op" id="7709737">.</span><span class="ident" id="7709738">Errorf</span><span class="op" id="7709744">(</span><span class="string" id="7709745">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7709805">,</span>&nbsp;<span class="ident" id="7709807">i</span><span class="op" id="7709808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7709815">}</span><br>
<span class="lineno"></span><span class="op" id="7709817">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7709820">func</span>&nbsp;<span class="ident" id="7709825">TestSparseIncrementalRead</span><span class="op" id="7709850">(</span><span class="ident" id="7709851">t</span>&nbsp;<span class="op" id="7709853">*</span><span class="ident" id="7709854">testing</span><span class="op" id="7709861">.</span><span class="ident" id="7709862">T</span><span class="op" id="7709863">)</span>&nbsp;<span class="op" id="7709865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709868">sparseMap</span>&nbsp;<span class="op" id="7709878">:=</span>&nbsp;<span class="op" id="7709881">[</span><span class="op" id="7709882">]</span><span class="ident" id="7709883">sparseEntry</span><span class="op" id="7709894">{</span><span class="op" id="7709895">{</span><span class="num" id="7709896">10</span><span class="op" id="7709898">,</span>&nbsp;<span class="num" id="7709900">2</span><span class="op" id="7709901">}</span><span class="op" id="7709902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709905">sparseData</span>&nbsp;<span class="op" id="7709916">:=</span>&nbsp;<span class="op" id="7709919">[</span><span class="op" id="7709920">]</span><span class="builtintype" id="7709921">byte</span><span class="op" id="7709925">(</span><span class="string" id="7709926">&#34;Go&#34;</span><span class="op" id="7709930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7709933">expected</span>&nbsp;<span class="op" id="7709942">:=</span>&nbsp;<span class="string" id="7709945">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710024">r</span>&nbsp;<span class="op" id="7710026">:=</span>&nbsp;<span class="ident" id="7710029">bytes</span><span class="op" id="7710034">.</span><span class="ident" id="7710035">NewReader</span><span class="op" id="7710044">(</span><span class="ident" id="7710045">sparseData</span><span class="op" id="7710055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710058">nb</span>&nbsp;<span class="op" id="7710061">:=</span>&nbsp;<span class="builtintype" id="7710064">int64</span><span class="op" id="7710069">(</span><span class="ident" id="7710070">r</span><span class="op" id="7710071">.</span><span class="ident" id="7710072">Len</span><span class="op" id="7710075">(</span><span class="op" id="7710076">)</span><span class="op" id="7710077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710080">sfr</span>&nbsp;<span class="op" id="7710084">:=</span>&nbsp;<span class="op" id="7710087">&amp;</span><span class="ident" id="7710088">sparseFileReader</span><span class="op" id="7710104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710108">rfr</span><span class="op" id="7710111">:</span>&nbsp;<span class="op" id="7710113">&amp;</span><span class="ident" id="7710114">regFileReader</span><span class="op" id="7710127">{</span><span class="ident" id="7710128">r</span><span class="op" id="7710129">:</span>&nbsp;<span class="ident" id="7710131">r</span><span class="op" id="7710132">,</span>&nbsp;<span class="ident" id="7710134">nb</span><span class="op" id="7710136">:</span>&nbsp;<span class="ident" id="7710138">nb</span><span class="op" id="7710140">}</span><span class="op" id="7710141">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710145">sp</span><span class="op" id="7710147">:</span>&nbsp;&nbsp;<span class="ident" id="7710150">sparseMap</span><span class="op" id="7710159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710163">pos</span><span class="op" id="7710166">:</span>&nbsp;<span class="num" id="7710168">0</span><span class="op" id="7710169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710173">tot</span><span class="op" id="7710176">:</span>&nbsp;<span class="builtintype" id="7710178">int64</span><span class="op" id="7710183">(</span><span class="builtinfunc" id="7710184">len</span><span class="op" id="7710187">(</span><span class="ident" id="7710188">expected</span><span class="op" id="7710196">)</span><span class="op" id="7710197">)</span><span class="op" id="7710198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710205">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710274">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710322">var</span>&nbsp;<span class="ident" id="7710326">outputBuf</span>&nbsp;<span class="ident" id="7710336">bytes</span><span class="op" id="7710341">.</span><span class="ident" id="7710342">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710350">buf</span>&nbsp;<span class="op" id="7710354">:=</span>&nbsp;<span class="builtinfunc" id="7710357">make</span><span class="op" id="7710361">(</span><span class="op" id="7710362">[</span><span class="op" id="7710363">]</span><span class="builtintype" id="7710364">byte</span><span class="op" id="7710368">,</span>&nbsp;<span class="num" id="7710370">6</span><span class="op" id="7710371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710374">for</span>&nbsp;<span class="op" id="7710378">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710382">n</span><span class="op" id="7710383">,</span>&nbsp;<span class="ident" id="7710385">err</span>&nbsp;<span class="op" id="7710389">:=</span>&nbsp;<span class="ident" id="7710392">sfr</span><span class="op" id="7710395">.</span><span class="ident" id="7710396">Read</span><span class="op" id="7710400">(</span><span class="ident" id="7710401">buf</span><span class="op" id="7710404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710408">if</span>&nbsp;<span class="ident" id="7710411">err</span>&nbsp;<span class="op" id="7710415">==</span>&nbsp;<span class="ident" id="7710418">io</span><span class="op" id="7710420">.</span><span class="ident" id="7710421">EOF</span>&nbsp;<span class="op" id="7710425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710430">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710442">if</span>&nbsp;<span class="ident" id="7710445">err</span>&nbsp;<span class="op" id="7710449">!=</span>&nbsp;<span class="builtintype" id="7710452">nil</span>&nbsp;<span class="op" id="7710456">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710461">t</span><span class="op" id="7710462">.</span><span class="ident" id="7710463">Errorf</span><span class="op" id="7710469">(</span><span class="string" id="7710470">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7710499">,</span>&nbsp;<span class="ident" id="7710501">err</span><span class="op" id="7710504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710512">if</span>&nbsp;<span class="ident" id="7710515">n</span>&nbsp;<span class="op" id="7710517">&gt;</span>&nbsp;<span class="num" id="7710519">0</span>&nbsp;<span class="op" id="7710521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710526">_</span><span class="op" id="7710527">,</span>&nbsp;<span class="ident" id="7710529">err</span>&nbsp;<span class="op" id="7710533">:=</span>&nbsp;<span class="ident" id="7710536">outputBuf</span><span class="op" id="7710545">.</span><span class="ident" id="7710546">Write</span><span class="op" id="7710551">(</span><span class="ident" id="7710552">buf</span><span class="op" id="7710555">[</span><span class="op" id="7710556">:</span><span class="ident" id="7710557">n</span><span class="op" id="7710558">]</span><span class="op" id="7710559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710564">if</span>&nbsp;<span class="ident" id="7710567">err</span>&nbsp;<span class="op" id="7710571">!=</span>&nbsp;<span class="builtintype" id="7710574">nil</span>&nbsp;<span class="op" id="7710578">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710584">t</span><span class="op" id="7710585">.</span><span class="ident" id="7710586">Errorf</span><span class="op" id="7710592">(</span><span class="string" id="7710593">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7710623">,</span>&nbsp;<span class="ident" id="7710625">err</span><span class="op" id="7710628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710643">got</span>&nbsp;<span class="op" id="7710647">:=</span>&nbsp;<span class="ident" id="7710650">outputBuf</span><span class="op" id="7710659">.</span><span class="ident" id="7710660">String</span><span class="op" id="7710666">(</span><span class="op" id="7710667">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710670">if</span>&nbsp;<span class="ident" id="7710673">got</span>&nbsp;<span class="op" id="7710677">!=</span>&nbsp;<span class="ident" id="7710680">expected</span>&nbsp;<span class="op" id="7710689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710693">t</span><span class="op" id="7710694">.</span><span class="ident" id="7710695">Errorf</span><span class="op" id="7710701">(</span><span class="string" id="7710702">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7710726">,</span>&nbsp;<span class="ident" id="7710728">got</span><span class="op" id="7710731">,</span>&nbsp;<span class="ident" id="7710733">expected</span><span class="op" id="7710741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710744">}</span><br>
<span class="lineno"></span><span class="op" id="7710746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7710749">func</span>&nbsp;<span class="ident" id="7710754">TestReadGNUSparseMap0x1</span><span class="op" id="7710777">(</span><span class="ident" id="7710778">t</span>&nbsp;<span class="op" id="7710780">*</span><span class="ident" id="7710781">testing</span><span class="op" id="7710788">.</span><span class="ident" id="7710789">T</span><span class="op" id="7710790">)</span>&nbsp;<span class="op" id="7710792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710795">headers</span>&nbsp;<span class="op" id="7710803">:=</span>&nbsp;<span class="keyword" id="7710806">map</span><span class="op" id="7710809">[</span><span class="builtintype" id="7710810">string</span><span class="op" id="7710816">]</span><span class="builtintype" id="7710817">string</span><span class="op" id="7710823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710827">paxGNUSparseNumBlocks</span><span class="op" id="7710848">:</span>&nbsp;<span class="string" id="7710850">&#34;4&#34;</span><span class="op" id="7710853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710857">paxGNUSparseMap</span><span class="op" id="7710872">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710880">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7710900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710903">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7710906">expected</span>&nbsp;<span class="op" id="7710915">:=</span>&nbsp;<span class="op" id="7710918">[</span><span class="op" id="7710919">]</span><span class="ident" id="7710920">sparseEntry</span><span class="op" id="7710931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710935">{</span><span class="ident" id="7710936">offset</span><span class="op" id="7710942">:</span>&nbsp;<span class="num" id="7710944">0</span><span class="op" id="7710945">,</span>&nbsp;<span class="ident" id="7710947">numBytes</span><span class="op" id="7710955">:</span>&nbsp;<span class="num" id="7710957">5</span><span class="op" id="7710958">}</span><span class="op" id="7710959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710963">{</span><span class="ident" id="7710964">offset</span><span class="op" id="7710970">:</span>&nbsp;<span class="num" id="7710972">10</span><span class="op" id="7710974">,</span>&nbsp;<span class="ident" id="7710976">numBytes</span><span class="op" id="7710984">:</span>&nbsp;<span class="num" id="7710986">5</span><span class="op" id="7710987">}</span><span class="op" id="7710988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7710992">{</span><span class="ident" id="7710993">offset</span><span class="op" id="7710999">:</span>&nbsp;<span class="num" id="7711001">20</span><span class="op" id="7711003">,</span>&nbsp;<span class="ident" id="7711005">numBytes</span><span class="op" id="7711013">:</span>&nbsp;<span class="num" id="7711015">5</span><span class="op" id="7711016">}</span><span class="op" id="7711017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711021">{</span><span class="ident" id="7711022">offset</span><span class="op" id="7711028">:</span>&nbsp;<span class="num" id="7711030">30</span><span class="op" id="7711032">,</span>&nbsp;<span class="ident" id="7711034">numBytes</span><span class="op" id="7711042">:</span>&nbsp;<span class="num" id="7711044">5</span><span class="op" id="7711045">}</span><span class="op" id="7711046">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711053">sp</span><span class="op" id="7711055">,</span>&nbsp;<span class="ident" id="7711057">err</span>&nbsp;<span class="op" id="7711061">:=</span>&nbsp;<span class="ident" id="7711064">readGNUSparseMap0x1</span><span class="op" id="7711083">(</span><span class="ident" id="7711084">headers</span><span class="op" id="7711091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711094">if</span>&nbsp;<span class="ident" id="7711097">err</span>&nbsp;<span class="op" id="7711101">!=</span>&nbsp;<span class="builtintype" id="7711104">nil</span>&nbsp;<span class="op" id="7711108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711112">t</span><span class="op" id="7711113">.</span><span class="ident" id="7711114">Errorf</span><span class="op" id="7711120">(</span><span class="string" id="7711121">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7711143">,</span>&nbsp;<span class="ident" id="7711145">err</span><span class="op" id="7711148">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711154">if</span>&nbsp;<span class="op" id="7711157">!</span><span class="ident" id="7711158">reflect</span><span class="op" id="7711165">.</span><span class="ident" id="7711166">DeepEqual</span><span class="op" id="7711175">(</span><span class="ident" id="7711176">sp</span><span class="op" id="7711178">,</span>&nbsp;<span class="ident" id="7711180">expected</span><span class="op" id="7711188">)</span>&nbsp;<span class="op" id="7711190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711194">t</span><span class="op" id="7711195">.</span><span class="ident" id="7711196">Errorf</span><span class="op" id="7711202">(</span><span class="string" id="7711203">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7711244">,</span>&nbsp;<span class="ident" id="7711246">sp</span><span class="op" id="7711248">,</span>&nbsp;<span class="ident" id="7711250">expected</span><span class="op" id="7711258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711261">}</span><br>
<span class="lineno"></span><span class="op" id="7711263">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7711266">func</span>&nbsp;<span class="ident" id="7711271">TestReadGNUSparseMap1x0</span><span class="op" id="7711294">(</span><span class="ident" id="7711295">t</span>&nbsp;<span class="op" id="7711297">*</span><span class="ident" id="7711298">testing</span><span class="op" id="7711305">.</span><span class="ident" id="7711306">T</span><span class="op" id="7711307">)</span>&nbsp;<span class="op" id="7711309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711312">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711396">numEntries</span>&nbsp;<span class="op" id="7711407">:=</span>&nbsp;<span class="num" id="7711410">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711415">expected</span>&nbsp;<span class="op" id="7711424">:=</span>&nbsp;<span class="builtinfunc" id="7711427">make</span><span class="op" id="7711431">(</span><span class="op" id="7711432">[</span><span class="op" id="7711433">]</span><span class="ident" id="7711434">sparseEntry</span><span class="op" id="7711445">,</span>&nbsp;<span class="num" id="7711447">0</span><span class="op" id="7711448">,</span>&nbsp;<span class="ident" id="7711450">numEntries</span><span class="op" id="7711460">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711463">sparseMap</span>&nbsp;<span class="op" id="7711473">:=</span>&nbsp;<span class="builtinfunc" id="7711476">new</span><span class="op" id="7711479">(</span><span class="ident" id="7711480">bytes</span><span class="op" id="7711485">.</span><span class="ident" id="7711486">Buffer</span><span class="op" id="7711492">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711496">fmt</span><span class="op" id="7711499">.</span><span class="ident" id="7711500">Fprintf</span><span class="op" id="7711507">(</span><span class="ident" id="7711508">sparseMap</span><span class="op" id="7711517">,</span>&nbsp;<span class="string" id="7711519">&#34;%d\n&#34;</span><span class="op" id="7711525">,</span>&nbsp;<span class="ident" id="7711527">numEntries</span><span class="op" id="7711537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711540">for</span>&nbsp;<span class="ident" id="7711544">i</span>&nbsp;<span class="op" id="7711546">:=</span>&nbsp;<span class="num" id="7711549">0</span><span class="op" id="7711550">;</span>&nbsp;<span class="ident" id="7711552">i</span>&nbsp;<span class="op" id="7711554">&lt;</span>&nbsp;<span class="ident" id="7711556">numEntries</span><span class="op" id="7711566">;</span>&nbsp;<span class="ident" id="7711568">i</span><span class="op" id="7711569">++</span>&nbsp;<span class="op" id="7711572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711576">offset</span>&nbsp;<span class="op" id="7711583">:=</span>&nbsp;<span class="builtintype" id="7711586">int64</span><span class="op" id="7711591">(</span><span class="num" id="7711592">2048</span>&nbsp;<span class="op" id="7711597">*</span>&nbsp;<span class="ident" id="7711599">i</span><span class="op" id="7711600">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711604">numBytes</span>&nbsp;<span class="op" id="7711613">:=</span>&nbsp;<span class="builtintype" id="7711616">int64</span><span class="op" id="7711621">(</span><span class="num" id="7711622">1024</span><span class="op" id="7711626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711630">expected</span>&nbsp;<span class="op" id="7711639">=</span>&nbsp;<span class="builtinfunc" id="7711641">append</span><span class="op" id="7711647">(</span><span class="ident" id="7711648">expected</span><span class="op" id="7711656">,</span>&nbsp;<span class="ident" id="7711658">sparseEntry</span><span class="op" id="7711669">{</span><span class="ident" id="7711670">offset</span><span class="op" id="7711676">:</span>&nbsp;<span class="ident" id="7711678">offset</span><span class="op" id="7711684">,</span>&nbsp;<span class="ident" id="7711686">numBytes</span><span class="op" id="7711694">:</span>&nbsp;<span class="ident" id="7711696">numBytes</span><span class="op" id="7711704">}</span><span class="op" id="7711705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711709">fmt</span><span class="op" id="7711712">.</span><span class="ident" id="7711713">Fprintf</span><span class="op" id="7711720">(</span><span class="ident" id="7711721">sparseMap</span><span class="op" id="7711730">,</span>&nbsp;<span class="string" id="7711732">&#34;%d\n%d\n&#34;</span><span class="op" id="7711742">,</span>&nbsp;<span class="ident" id="7711744">offset</span><span class="op" id="7711750">,</span>&nbsp;<span class="ident" id="7711752">numBytes</span><span class="op" id="7711760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711767">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711846">headerBlocks</span>&nbsp;<span class="op" id="7711859">:=</span>&nbsp;<span class="op" id="7711862">(</span><span class="ident" id="7711863">sparseMap</span><span class="op" id="7711872">.</span><span class="ident" id="7711873">Len</span><span class="op" id="7711876">(</span><span class="op" id="7711877">)</span>&nbsp;<span class="op" id="7711879">+</span>&nbsp;<span class="ident" id="7711881">blockSize</span>&nbsp;<span class="op" id="7711891">-</span>&nbsp;<span class="num" id="7711893">1</span><span class="op" id="7711894">)</span>&nbsp;<span class="op" id="7711896">/</span>&nbsp;<span class="ident" id="7711898">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711909">bufLen</span>&nbsp;<span class="op" id="7711916">:=</span>&nbsp;<span class="ident" id="7711919">blockSize</span>&nbsp;<span class="op" id="7711929">*</span>&nbsp;<span class="ident" id="7711931">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711945">buf</span>&nbsp;<span class="op" id="7711949">:=</span>&nbsp;<span class="builtinfunc" id="7711952">make</span><span class="op" id="7711956">(</span><span class="op" id="7711957">[</span><span class="op" id="7711958">]</span><span class="builtintype" id="7711959">byte</span><span class="op" id="7711963">,</span>&nbsp;<span class="ident" id="7711965">bufLen</span><span class="op" id="7711971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7711974">copy</span><span class="op" id="7711978">(</span><span class="ident" id="7711979">buf</span><span class="op" id="7711982">,</span>&nbsp;<span class="ident" id="7711984">sparseMap</span><span class="op" id="7711993">.</span><span class="ident" id="7711994">Bytes</span><span class="op" id="7711999">(</span><span class="op" id="7712000">)</span><span class="op" id="7712001">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712005">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712046">r</span>&nbsp;<span class="op" id="7712048">:=</span>&nbsp;<span class="ident" id="7712051">bytes</span><span class="op" id="7712056">.</span><span class="ident" id="7712057">NewReader</span><span class="op" id="7712066">(</span><span class="ident" id="7712067">buf</span><span class="op" id="7712070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712074">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712098">sp</span><span class="op" id="7712100">,</span>&nbsp;<span class="ident" id="7712102">err</span>&nbsp;<span class="op" id="7712106">:=</span>&nbsp;<span class="ident" id="7712109">readGNUSparseMap1x0</span><span class="op" id="7712128">(</span><span class="ident" id="7712129">r</span><span class="op" id="7712130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712133">if</span>&nbsp;<span class="ident" id="7712136">err</span>&nbsp;<span class="op" id="7712140">!=</span>&nbsp;<span class="builtintype" id="7712143">nil</span>&nbsp;<span class="op" id="7712147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712151">t</span><span class="op" id="7712152">.</span><span class="ident" id="7712153">Errorf</span><span class="op" id="7712159">(</span><span class="string" id="7712160">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7712182">,</span>&nbsp;<span class="ident" id="7712184">err</span><span class="op" id="7712187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712193">if</span>&nbsp;<span class="op" id="7712196">!</span><span class="ident" id="7712197">reflect</span><span class="op" id="7712204">.</span><span class="ident" id="7712205">DeepEqual</span><span class="op" id="7712214">(</span><span class="ident" id="7712215">sp</span><span class="op" id="7712217">,</span>&nbsp;<span class="ident" id="7712219">expected</span><span class="op" id="7712227">)</span>&nbsp;<span class="op" id="7712229">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712233">t</span><span class="op" id="7712234">.</span><span class="ident" id="7712235">Errorf</span><span class="op" id="7712241">(</span><span class="string" id="7712242">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7712283">,</span>&nbsp;<span class="ident" id="7712285">sp</span><span class="op" id="7712287">,</span>&nbsp;<span class="ident" id="7712289">expected</span><span class="op" id="7712297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712300">}</span><br>
<span class="lineno"></span><span class="op" id="7712302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7712305">func</span>&nbsp;<span class="ident" id="7712310">TestUninitializedRead</span><span class="op" id="7712331">(</span><span class="ident" id="7712332">t</span>&nbsp;<span class="op" id="7712334">*</span><span class="ident" id="7712335">testing</span><span class="op" id="7712342">.</span><span class="ident" id="7712343">T</span><span class="op" id="7712344">)</span>&nbsp;<span class="op" id="7712346">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712349">test</span>&nbsp;<span class="op" id="7712354">:=</span>&nbsp;<span class="ident" id="7712357">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712369">f</span><span class="op" id="7712370">,</span>&nbsp;<span class="ident" id="7712372">err</span>&nbsp;<span class="op" id="7712376">:=</span>&nbsp;<span class="ident" id="7712379">os</span><span class="op" id="7712381">.</span><span class="ident" id="7712382">Open</span><span class="op" id="7712386">(</span><span class="ident" id="7712387">test</span><span class="op" id="7712391">.</span><span class="ident" id="7712392">file</span><span class="op" id="7712396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712399">if</span>&nbsp;<span class="ident" id="7712402">err</span>&nbsp;<span class="op" id="7712406">!=</span>&nbsp;<span class="builtintype" id="7712409">nil</span>&nbsp;<span class="op" id="7712413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712417">t</span><span class="op" id="7712418">.</span><span class="ident" id="7712419">Fatalf</span><span class="op" id="7712425">(</span><span class="string" id="7712426">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7712448">,</span>&nbsp;<span class="ident" id="7712450">err</span><span class="op" id="7712453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712456">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712459">defer</span>&nbsp;<span class="ident" id="7712465">f</span><span class="op" id="7712466">.</span><span class="ident" id="7712467">Close</span><span class="op" id="7712472">(</span><span class="op" id="7712473">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712477">tr</span>&nbsp;<span class="op" id="7712480">:=</span>&nbsp;<span class="ident" id="7712483">NewReader</span><span class="op" id="7712492">(</span><span class="ident" id="7712493">f</span><span class="op" id="7712494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712497">_</span><span class="op" id="7712498">,</span>&nbsp;<span class="ident" id="7712500">err</span>&nbsp;<span class="op" id="7712504">=</span>&nbsp;<span class="ident" id="7712506">tr</span><span class="op" id="7712508">.</span><span class="ident" id="7712509">Read</span><span class="op" id="7712513">(</span><span class="op" id="7712514">[</span><span class="op" id="7712515">]</span><span class="builtintype" id="7712516">byte</span><span class="op" id="7712520">{</span><span class="op" id="7712521">}</span><span class="op" id="7712522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712525">if</span>&nbsp;<span class="ident" id="7712528">err</span>&nbsp;<span class="op" id="7712532">==</span>&nbsp;<span class="builtintype" id="7712535">nil</span>&nbsp;<span class="op" id="7712539">||</span>&nbsp;<span class="ident" id="7712542">err</span>&nbsp;<span class="op" id="7712546">!=</span>&nbsp;<span class="ident" id="7712549">io</span><span class="op" id="7712551">.</span><span class="ident" id="7712552">EOF</span>&nbsp;<span class="op" id="7712556">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712560">t</span><span class="op" id="7712561">.</span><span class="ident" id="7712562">Errorf</span><span class="op" id="7712568">(</span><span class="string" id="7712569">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7712602">,</span>&nbsp;<span class="ident" id="7712604">err</span><span class="op" id="7712607">,</span>&nbsp;<span class="ident" id="7712609">io</span><span class="op" id="7712611">.</span><span class="ident" id="7712612">EOF</span><span class="op" id="7712615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7712621">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
