<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2854166">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2854221">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2854275">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2854326">package</span>&nbsp;<span class="ident" id="2854334">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2854343">import</span>&nbsp;<span class="op" id="2854350">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2854353">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2854361">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2854372">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2854381">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2854384">const</span>&nbsp;<span class="ident" id="2854390">ptrSize</span>&nbsp;<span class="op" id="2854398">=</span>&nbsp;<span class="ident" id="2854400">unsafe</span><span class="op" id="2854406">.</span><span class="ident" id="2854407">Sizeof</span><span class="op" id="2854413">(</span><span class="op" id="2854414">(</span><span class="op" id="2854415">*</span><span class="builtintype" id="2854416">byte</span><span class="op" id="2854420">)</span><span class="op" id="2854421">(</span><span class="ident" id="2854422">nil</span><span class="op" id="2854425">)</span><span class="op" id="2854426">)</span><br>
<span class="lineno"></span><span class="keyword" id="2854428">const</span>&nbsp;<span class="ident" id="2854434">cannotSet</span>&nbsp;<span class="op" id="2854444">=</span>&nbsp;<span class="string" id="2854446">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2854504">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2854556">//</span><br>
<span class="lineno"></span><span class="comment" id="2854559">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2854623">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2854682">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2854742">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2854794">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2854856">//</span><br>
<span class="lineno"></span><span class="comment" id="2854859">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2854898">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2854968">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2855045">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2855106">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2855174">//</span><br>
<span class="lineno">30</span><span class="comment" id="2855177">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2855250">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2855321">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2855343">type</span>&nbsp;<span class="ident" id="2855348">Value</span>&nbsp;<span class="keyword" id="2855354">struct</span>&nbsp;<span class="op" id="2855361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855364">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855424">typ</span>&nbsp;<span class="op" id="2855428">*</span><span class="ident" id="2855429">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855437">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855503">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2855569">ptr</span>&nbsp;<span class="ident" id="2855573">unsafe</span><span class="op" id="2855579">.</span><span class="ident" id="2855580">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855590">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855631">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855666">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855724">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855773">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855827">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855866">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855917">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2855971">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856038">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856108">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856171">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856178">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856236">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856305">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856372">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2856440">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2856471">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2856474">type</span>&nbsp;<span class="ident" id="2856479">flag</span>&nbsp;<span class="builtintype" id="2856484">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2856493">const</span>&nbsp;<span class="op" id="2856499">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856502">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856523">=</span>&nbsp;<span class="num" id="2856525">5</span>&nbsp;<span class="comment" id="2856527">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856550">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856566">flag</span>&nbsp;<span class="op" id="2856571">=</span>&nbsp;<span class="num" id="2856573">1</span><span class="op" id="2856574">&lt;&lt;</span><span class="ident" id="2856576">flagKindWidth</span>&nbsp;<span class="op" id="2856590">-</span>&nbsp;<span class="num" id="2856592">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856595">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856611">flag</span>&nbsp;<span class="op" id="2856616">=</span>&nbsp;<span class="num" id="2856618">1</span>&nbsp;<span class="op" id="2856620">&lt;&lt;</span>&nbsp;<span class="num" id="2856623">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856626">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856642">flag</span>&nbsp;<span class="op" id="2856647">=</span>&nbsp;<span class="num" id="2856649">1</span>&nbsp;<span class="op" id="2856651">&lt;&lt;</span>&nbsp;<span class="num" id="2856654">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856657">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856673">flag</span>&nbsp;<span class="op" id="2856678">=</span>&nbsp;<span class="num" id="2856680">1</span>&nbsp;<span class="op" id="2856682">&lt;&lt;</span>&nbsp;<span class="num" id="2856685">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856688">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856704">flag</span>&nbsp;<span class="op" id="2856709">=</span>&nbsp;<span class="num" id="2856711">1</span>&nbsp;<span class="op" id="2856713">&lt;&lt;</span>&nbsp;<span class="num" id="2856716">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2856719">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856740">=</span>&nbsp;<span class="num" id="2856742">9</span><br>
<span class="lineno"></span><span class="op" id="2856744">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2856747">func</span>&nbsp;<span class="op" id="2856752">(</span><span class="ident" id="2856753">f</span>&nbsp;<span class="ident" id="2856755">flag</span><span class="op" id="2856759">)</span>&nbsp;<span class="ident" id="2856761">kind</span><span class="op" id="2856765">(</span><span class="op" id="2856766">)</span>&nbsp;<span class="ident" id="2856768">Kind</span>&nbsp;<span class="op" id="2856773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856776">return</span>&nbsp;<span class="ident" id="2856783">Kind</span><span class="op" id="2856787">(</span><span class="ident" id="2856788">f</span>&nbsp;<span class="op" id="2856790">&amp;</span>&nbsp;<span class="ident" id="2856792">flagKindMask</span><span class="op" id="2856804">)</span><br>
<span class="lineno">75</span><span class="op" id="2856806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2856809">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2856869">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2856928">func</span>&nbsp;<span class="op" id="2856933">(</span><span class="ident" id="2856934">v</span>&nbsp;<span class="ident" id="2856936">Value</span><span class="op" id="2856941">)</span>&nbsp;<span class="ident" id="2856943">pointer</span><span class="op" id="2856950">(</span><span class="op" id="2856951">)</span>&nbsp;<span class="ident" id="2856953">unsafe</span><span class="op" id="2856959">.</span><span class="ident" id="2856960">Pointer</span>&nbsp;<span class="op" id="2856968">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2856971">if</span>&nbsp;<span class="ident" id="2856974">v</span><span class="op" id="2856975">.</span><span class="ident" id="2856976">typ</span><span class="op" id="2856979">.</span><span class="ident" id="2856980">size</span>&nbsp;<span class="op" id="2856985">!=</span>&nbsp;<span class="ident" id="2856988">ptrSize</span>&nbsp;<span class="op" id="2856996">||</span>&nbsp;<span class="op" id="2856999">!</span><span class="ident" id="2857000">v</span><span class="op" id="2857001">.</span><span class="ident" id="2857002">typ</span><span class="op" id="2857005">.</span><span class="ident" id="2857006">pointers</span><span class="op" id="2857014">(</span><span class="op" id="2857015">)</span>&nbsp;<span class="op" id="2857017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2857021">panic</span><span class="op" id="2857026">(</span><span class="string" id="2857027">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2857070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857076">if</span>&nbsp;<span class="ident" id="2857079">v</span><span class="op" id="2857080">.</span><span class="ident" id="2857081">flag</span><span class="op" id="2857085">&amp;</span><span class="ident" id="2857086">flagIndir</span>&nbsp;<span class="op" id="2857096">!=</span>&nbsp;<span class="num" id="2857099">0</span>&nbsp;<span class="op" id="2857101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857105">return</span>&nbsp;<span class="op" id="2857112">*</span><span class="op" id="2857113">(</span><span class="op" id="2857114">*</span><span class="ident" id="2857115">unsafe</span><span class="op" id="2857121">.</span><span class="ident" id="2857122">Pointer</span><span class="op" id="2857129">)</span><span class="op" id="2857130">(</span><span class="ident" id="2857131">v</span><span class="op" id="2857132">.</span><span class="ident" id="2857133">ptr</span><span class="op" id="2857136">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857142">return</span>&nbsp;<span class="ident" id="2857149">v</span><span class="op" id="2857150">.</span><span class="ident" id="2857151">ptr</span><br>
<span class="lineno"></span><span class="op" id="2857155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2857158">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2857206">func</span>&nbsp;<span class="ident" id="2857211">packEface</span><span class="op" id="2857220">(</span><span class="ident" id="2857221">v</span>&nbsp;<span class="ident" id="2857223">Value</span><span class="op" id="2857228">)</span>&nbsp;<span class="keyword" id="2857230">interface</span><span class="op" id="2857239">{</span><span class="op" id="2857240">}</span>&nbsp;<span class="op" id="2857242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857245">t</span>&nbsp;<span class="op" id="2857247">:=</span>&nbsp;<span class="ident" id="2857250">v</span><span class="op" id="2857251">.</span><span class="ident" id="2857252">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857257">var</span>&nbsp;<span class="ident" id="2857261">i</span>&nbsp;<span class="keyword" id="2857263">interface</span><span class="op" id="2857272">{</span><span class="op" id="2857273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857276">e</span>&nbsp;<span class="op" id="2857278">:=</span>&nbsp;<span class="op" id="2857281">(</span><span class="op" id="2857282">*</span><span class="ident" id="2857283">emptyInterface</span><span class="op" id="2857297">)</span><span class="op" id="2857298">(</span><span class="ident" id="2857299">unsafe</span><span class="op" id="2857305">.</span><span class="ident" id="2857306">Pointer</span><span class="op" id="2857313">(</span><span class="op" id="2857314">&amp;</span><span class="ident" id="2857315">i</span><span class="op" id="2857316">)</span><span class="op" id="2857317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857320">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857374">switch</span>&nbsp;<span class="op" id="2857381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857384">case</span>&nbsp;<span class="ident" id="2857389">ifaceIndir</span><span class="op" id="2857399">(</span><span class="ident" id="2857400">t</span><span class="op" id="2857401">)</span><span class="op" id="2857402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857406">if</span>&nbsp;<span class="ident" id="2857409">v</span><span class="op" id="2857410">.</span><span class="ident" id="2857411">flag</span><span class="op" id="2857415">&amp;</span><span class="ident" id="2857416">flagIndir</span>&nbsp;<span class="op" id="2857426">==</span>&nbsp;<span class="num" id="2857429">0</span>&nbsp;<span class="op" id="2857431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2857436">panic</span><span class="op" id="2857441">(</span><span class="string" id="2857442">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2857453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857457">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857461">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857523">ptr</span>&nbsp;<span class="op" id="2857527">:=</span>&nbsp;<span class="ident" id="2857530">v</span><span class="op" id="2857531">.</span><span class="ident" id="2857532">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857538">if</span>&nbsp;<span class="ident" id="2857541">v</span><span class="op" id="2857542">.</span><span class="ident" id="2857543">flag</span><span class="op" id="2857547">&amp;</span><span class="ident" id="2857548">flagAddr</span>&nbsp;<span class="op" id="2857557">!=</span>&nbsp;<span class="num" id="2857560">0</span>&nbsp;<span class="op" id="2857562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857567">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857620">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857663">c</span>&nbsp;<span class="op" id="2857665">:=</span>&nbsp;<span class="ident" id="2857668">unsafe_New</span><span class="op" id="2857678">(</span><span class="ident" id="2857679">t</span><span class="op" id="2857680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857685">memmove</span><span class="op" id="2857692">(</span><span class="ident" id="2857693">c</span><span class="op" id="2857694">,</span>&nbsp;<span class="ident" id="2857696">ptr</span><span class="op" id="2857699">,</span>&nbsp;<span class="ident" id="2857701">t</span><span class="op" id="2857702">.</span><span class="ident" id="2857703">size</span><span class="op" id="2857707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857712">ptr</span>&nbsp;<span class="op" id="2857716">=</span>&nbsp;<span class="ident" id="2857718">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857726">e</span><span class="op" id="2857727">.</span><span class="ident" id="2857728">word</span>&nbsp;<span class="op" id="2857733">=</span>&nbsp;<span class="ident" id="2857735">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857740">case</span>&nbsp;<span class="ident" id="2857745">v</span><span class="op" id="2857746">.</span><span class="ident" id="2857747">flag</span><span class="op" id="2857751">&amp;</span><span class="ident" id="2857752">flagIndir</span>&nbsp;<span class="op" id="2857762">!=</span>&nbsp;<span class="num" id="2857765">0</span><span class="op" id="2857766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857770">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857828">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857889">e</span><span class="op" id="2857890">.</span><span class="ident" id="2857891">word</span>&nbsp;<span class="op" id="2857896">=</span>&nbsp;<span class="op" id="2857898">*</span><span class="op" id="2857899">(</span><span class="op" id="2857900">*</span><span class="ident" id="2857901">unsafe</span><span class="op" id="2857907">.</span><span class="ident" id="2857908">Pointer</span><span class="op" id="2857915">)</span><span class="op" id="2857916">(</span><span class="ident" id="2857917">v</span><span class="op" id="2857918">.</span><span class="ident" id="2857919">ptr</span><span class="op" id="2857922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857925">default</span><span class="op" id="2857932">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2857936">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857983">e</span><span class="op" id="2857984">.</span><span class="ident" id="2857985">word</span>&nbsp;<span class="op" id="2857990">=</span>&nbsp;<span class="ident" id="2857992">v</span><span class="op" id="2857993">.</span><span class="ident" id="2857994">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2858002">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2858066">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2858133">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2858202">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858223">e</span><span class="op" id="2858224">.</span><span class="ident" id="2858225">typ</span>&nbsp;<span class="op" id="2858229">=</span>&nbsp;<span class="ident" id="2858231">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858234">return</span>&nbsp;<span class="ident" id="2858241">i</span><br>
<span class="lineno"></span><span class="op" id="2858243">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2858246">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2858304">func</span>&nbsp;<span class="ident" id="2858309">unpackEface</span><span class="op" id="2858320">(</span><span class="ident" id="2858321">i</span>&nbsp;<span class="keyword" id="2858323">interface</span><span class="op" id="2858332">{</span><span class="op" id="2858333">}</span><span class="op" id="2858334">)</span>&nbsp;<span class="ident" id="2858336">Value</span>&nbsp;<span class="op" id="2858342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858345">e</span>&nbsp;<span class="op" id="2858347">:=</span>&nbsp;<span class="op" id="2858350">(</span><span class="op" id="2858351">*</span><span class="ident" id="2858352">emptyInterface</span><span class="op" id="2858366">)</span><span class="op" id="2858367">(</span><span class="ident" id="2858368">unsafe</span><span class="op" id="2858374">.</span><span class="ident" id="2858375">Pointer</span><span class="op" id="2858382">(</span><span class="op" id="2858383">&amp;</span><span class="ident" id="2858384">i</span><span class="op" id="2858385">)</span><span class="op" id="2858386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2858389">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858470">t</span>&nbsp;<span class="op" id="2858472">:=</span>&nbsp;<span class="ident" id="2858475">e</span><span class="op" id="2858476">.</span><span class="ident" id="2858477">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858482">if</span>&nbsp;<span class="ident" id="2858485">t</span>&nbsp;<span class="op" id="2858487">==</span>&nbsp;<span class="ident" id="2858490">nil</span>&nbsp;<span class="op" id="2858494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858498">return</span>&nbsp;<span class="ident" id="2858505">Value</span><span class="op" id="2858510">{</span><span class="op" id="2858511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858517">f</span>&nbsp;<span class="op" id="2858519">:=</span>&nbsp;<span class="ident" id="2858522">flag</span><span class="op" id="2858526">(</span><span class="ident" id="2858527">t</span><span class="op" id="2858528">.</span><span class="ident" id="2858529">Kind</span><span class="op" id="2858533">(</span><span class="op" id="2858534">)</span><span class="op" id="2858535">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858538">if</span>&nbsp;<span class="ident" id="2858541">ifaceIndir</span><span class="op" id="2858551">(</span><span class="ident" id="2858552">t</span><span class="op" id="2858553">)</span>&nbsp;<span class="op" id="2858555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858559">f</span>&nbsp;<span class="op" id="2858561">|=</span>&nbsp;<span class="ident" id="2858564">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858578">return</span>&nbsp;<span class="ident" id="2858585">Value</span><span class="op" id="2858590">{</span><span class="ident" id="2858591">t</span><span class="op" id="2858592">,</span>&nbsp;<span class="ident" id="2858594">unsafe</span><span class="op" id="2858600">.</span><span class="ident" id="2858601">Pointer</span><span class="op" id="2858608">(</span><span class="ident" id="2858609">e</span><span class="op" id="2858610">.</span><span class="ident" id="2858611">word</span><span class="op" id="2858615">)</span><span class="op" id="2858616">,</span>&nbsp;<span class="ident" id="2858618">f</span><span class="op" id="2858619">}</span><br>
<span class="lineno"></span><span class="op" id="2858621">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2858624">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2858681">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2858745">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2858783">type</span>&nbsp;<span class="ident" id="2858788">ValueError</span>&nbsp;<span class="keyword" id="2858799">struct</span>&nbsp;<span class="op" id="2858806">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858809">Method</span>&nbsp;<span class="builtintype" id="2858816">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858824">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2858831">Kind</span><br>
<span class="lineno"></span><span class="op" id="2858836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2858839">func</span>&nbsp;<span class="op" id="2858844">(</span><span class="ident" id="2858845">e</span>&nbsp;<span class="op" id="2858847">*</span><span class="ident" id="2858848">ValueError</span><span class="op" id="2858858">)</span>&nbsp;<span class="ident" id="2858860">Error</span><span class="op" id="2858865">(</span><span class="op" id="2858866">)</span>&nbsp;<span class="builtintype" id="2858868">string</span>&nbsp;<span class="op" id="2858875">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858878">if</span>&nbsp;<span class="ident" id="2858881">e</span><span class="op" id="2858882">.</span><span class="ident" id="2858883">Kind</span>&nbsp;<span class="op" id="2858888">==</span>&nbsp;<span class="num" id="2858891">0</span>&nbsp;<span class="op" id="2858893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858897">return</span>&nbsp;<span class="string" id="2858904">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2858924">+</span>&nbsp;<span class="ident" id="2858926">e</span><span class="op" id="2858927">.</span><span class="ident" id="2858928">Method</span>&nbsp;<span class="op" id="2858935">+</span>&nbsp;<span class="string" id="2858937">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858958">return</span>&nbsp;<span class="string" id="2858965">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2858985">+</span>&nbsp;<span class="ident" id="2858987">e</span><span class="op" id="2858988">.</span><span class="ident" id="2858989">Method</span>&nbsp;<span class="op" id="2858996">+</span>&nbsp;<span class="string" id="2858998">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2859005">+</span>&nbsp;<span class="ident" id="2859007">e</span><span class="op" id="2859008">.</span><span class="ident" id="2859009">Kind</span><span class="op" id="2859013">.</span><span class="ident" id="2859014">String</span><span class="op" id="2859020">(</span><span class="op" id="2859021">)</span>&nbsp;<span class="op" id="2859023">+</span>&nbsp;<span class="string" id="2859025">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2859034">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2859037">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2859091">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2859132">func</span>&nbsp;<span class="ident" id="2859137">methodName</span><span class="op" id="2859147">(</span><span class="op" id="2859148">)</span>&nbsp;<span class="builtintype" id="2859150">string</span>&nbsp;<span class="op" id="2859157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859160">pc</span><span class="op" id="2859162">,</span>&nbsp;<span class="ident" id="2859164">_</span><span class="op" id="2859165">,</span>&nbsp;<span class="ident" id="2859167">_</span><span class="op" id="2859168">,</span>&nbsp;<span class="ident" id="2859170">_</span>&nbsp;<span class="op" id="2859172">:=</span>&nbsp;<span class="ident" id="2859175">runtime</span><span class="op" id="2859182">.</span><span class="ident" id="2859183">Caller</span><span class="op" id="2859189">(</span><span class="num" id="2859190">2</span><span class="op" id="2859191">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859194">f</span>&nbsp;<span class="op" id="2859196">:=</span>&nbsp;<span class="ident" id="2859199">runtime</span><span class="op" id="2859206">.</span><span class="ident" id="2859207">FuncForPC</span><span class="op" id="2859216">(</span><span class="ident" id="2859217">pc</span><span class="op" id="2859219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859222">if</span>&nbsp;<span class="ident" id="2859225">f</span>&nbsp;<span class="op" id="2859227">==</span>&nbsp;<span class="ident" id="2859230">nil</span>&nbsp;<span class="op" id="2859234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859238">return</span>&nbsp;<span class="string" id="2859245">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859266">return</span>&nbsp;<span class="ident" id="2859273">f</span><span class="op" id="2859274">.</span><span class="ident" id="2859275">Name</span><span class="op" id="2859279">(</span><span class="op" id="2859280">)</span><br>
<span class="lineno">165</span><span class="op" id="2859282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2859285">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2859343">type</span>&nbsp;<span class="ident" id="2859348">emptyInterface</span>&nbsp;<span class="keyword" id="2859363">struct</span>&nbsp;<span class="op" id="2859370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859373">typ</span>&nbsp;&nbsp;<span class="op" id="2859378">*</span><span class="ident" id="2859379">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859386">word</span>&nbsp;<span class="ident" id="2859391">unsafe</span><span class="op" id="2859397">.</span><span class="ident" id="2859398">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2859406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2859409">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2859480">type</span>&nbsp;<span class="ident" id="2859485">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2859503">struct</span>&nbsp;<span class="op" id="2859510">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2859513">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859546">itab</span>&nbsp;<span class="op" id="2859551">*</span><span class="keyword" id="2859552">struct</span>&nbsp;<span class="op" id="2859559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859563">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2859570">*</span><span class="ident" id="2859571">rtype</span>&nbsp;<span class="comment" id="2859577">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859604">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2859611">*</span><span class="ident" id="2859612">rtype</span>&nbsp;<span class="comment" id="2859618">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859645">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2859652">unsafe</span><span class="op" id="2859658">.</span><span class="ident" id="2859659">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859669">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2859676">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859684">unused</span>&nbsp;<span class="builtintype" id="2859691">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859699">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2859706">[</span><span class="num" id="2859707">100000</span><span class="op" id="2859713">]</span><span class="ident" id="2859714">unsafe</span><span class="op" id="2859720">.</span><span class="ident" id="2859721">Pointer</span>&nbsp;<span class="comment" id="2859729">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859749">word</span>&nbsp;<span class="ident" id="2859754">unsafe</span><span class="op" id="2859760">.</span><span class="ident" id="2859761">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2859769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2859772">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2859818">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2859870">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2859927">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2859985">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2860044">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2860087">func</span>&nbsp;<span class="op" id="2860092">(</span><span class="ident" id="2860093">f</span>&nbsp;<span class="ident" id="2860095">flag</span><span class="op" id="2860099">)</span>&nbsp;<span class="ident" id="2860101">mustBe</span><span class="op" id="2860107">(</span><span class="ident" id="2860108">expected</span>&nbsp;<span class="ident" id="2860117">Kind</span><span class="op" id="2860121">)</span>&nbsp;<span class="op" id="2860123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860126">if</span>&nbsp;<span class="ident" id="2860129">f</span><span class="op" id="2860130">.</span><span class="ident" id="2860131">kind</span><span class="op" id="2860135">(</span><span class="op" id="2860136">)</span>&nbsp;<span class="op" id="2860138">!=</span>&nbsp;<span class="ident" id="2860141">expected</span>&nbsp;<span class="op" id="2860150">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860154">panic</span><span class="op" id="2860159">(</span><span class="op" id="2860160">&amp;</span><span class="ident" id="2860161">ValueError</span><span class="op" id="2860171">{</span><span class="ident" id="2860172">methodName</span><span class="op" id="2860182">(</span><span class="op" id="2860183">)</span><span class="op" id="2860184">,</span>&nbsp;<span class="ident" id="2860186">f</span><span class="op" id="2860187">.</span><span class="ident" id="2860188">kind</span><span class="op" id="2860192">(</span><span class="op" id="2860193">)</span><span class="op" id="2860194">}</span><span class="op" id="2860195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2860198">}</span><br>
<span class="lineno"></span><span class="op" id="2860200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2860203">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2860275">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2860299">func</span>&nbsp;<span class="op" id="2860304">(</span><span class="ident" id="2860305">f</span>&nbsp;<span class="ident" id="2860307">flag</span><span class="op" id="2860311">)</span>&nbsp;<span class="ident" id="2860313">mustBeExported</span><span class="op" id="2860327">(</span><span class="op" id="2860328">)</span>&nbsp;<span class="op" id="2860330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860333">if</span>&nbsp;<span class="ident" id="2860336">f</span>&nbsp;<span class="op" id="2860338">==</span>&nbsp;<span class="num" id="2860341">0</span>&nbsp;<span class="op" id="2860343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860347">panic</span><span class="op" id="2860352">(</span><span class="op" id="2860353">&amp;</span><span class="ident" id="2860354">ValueError</span><span class="op" id="2860364">{</span><span class="ident" id="2860365">methodName</span><span class="op" id="2860375">(</span><span class="op" id="2860376">)</span><span class="op" id="2860377">,</span>&nbsp;<span class="num" id="2860379">0</span><span class="op" id="2860380">}</span><span class="op" id="2860381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2860384">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860387">if</span>&nbsp;<span class="ident" id="2860390">f</span><span class="op" id="2860391">&amp;</span><span class="ident" id="2860392">flagRO</span>&nbsp;<span class="op" id="2860399">!=</span>&nbsp;<span class="num" id="2860402">0</span>&nbsp;<span class="op" id="2860404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860408">panic</span><span class="op" id="2860413">(</span><span class="string" id="2860414">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2860426">+</span>&nbsp;<span class="ident" id="2860428">methodName</span><span class="op" id="2860438">(</span><span class="op" id="2860439">)</span>&nbsp;<span class="op" id="2860441">+</span>&nbsp;<span class="string" id="2860443">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2860489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2860492">}</span><br>
<span class="lineno"></span><span class="op" id="2860494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2860497">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2860571">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2860644">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2860673">func</span>&nbsp;<span class="op" id="2860678">(</span><span class="ident" id="2860679">f</span>&nbsp;<span class="ident" id="2860681">flag</span><span class="op" id="2860685">)</span>&nbsp;<span class="ident" id="2860687">mustBeAssignable</span><span class="op" id="2860703">(</span><span class="op" id="2860704">)</span>&nbsp;<span class="op" id="2860706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860709">if</span>&nbsp;<span class="ident" id="2860712">f</span>&nbsp;<span class="op" id="2860714">==</span>&nbsp;<span class="num" id="2860717">0</span>&nbsp;<span class="op" id="2860719">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860723">panic</span><span class="op" id="2860728">(</span><span class="op" id="2860729">&amp;</span><span class="ident" id="2860730">ValueError</span><span class="op" id="2860740">{</span><span class="ident" id="2860741">methodName</span><span class="op" id="2860751">(</span><span class="op" id="2860752">)</span><span class="op" id="2860753">,</span>&nbsp;<span class="ident" id="2860755">Invalid</span><span class="op" id="2860762">}</span><span class="op" id="2860763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2860766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2860769">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860818">if</span>&nbsp;<span class="ident" id="2860821">f</span><span class="op" id="2860822">&amp;</span><span class="ident" id="2860823">flagRO</span>&nbsp;<span class="op" id="2860830">!=</span>&nbsp;<span class="num" id="2860833">0</span>&nbsp;<span class="op" id="2860835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860839">panic</span><span class="op" id="2860844">(</span><span class="string" id="2860845">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2860857">+</span>&nbsp;<span class="ident" id="2860859">methodName</span><span class="op" id="2860869">(</span><span class="op" id="2860870">)</span>&nbsp;<span class="op" id="2860872">+</span>&nbsp;<span class="string" id="2860874">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2860920">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2860923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2860926">if</span>&nbsp;<span class="ident" id="2860929">f</span><span class="op" id="2860930">&amp;</span><span class="ident" id="2860931">flagAddr</span>&nbsp;<span class="op" id="2860940">==</span>&nbsp;<span class="num" id="2860943">0</span>&nbsp;<span class="op" id="2860945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2860949">panic</span><span class="op" id="2860954">(</span><span class="string" id="2860955">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2860967">+</span>&nbsp;<span class="ident" id="2860969">methodName</span><span class="op" id="2860979">(</span><span class="op" id="2860980">)</span>&nbsp;<span class="op" id="2860982">+</span>&nbsp;<span class="string" id="2860984">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2861012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2861015">}</span><br>
<span class="lineno"></span><span class="op" id="2861017">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2861020">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2861083">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2861124">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2861188">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2861250">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2861271">func</span>&nbsp;<span class="op" id="2861276">(</span><span class="ident" id="2861277">v</span>&nbsp;<span class="ident" id="2861279">Value</span><span class="op" id="2861284">)</span>&nbsp;<span class="ident" id="2861286">Addr</span><span class="op" id="2861290">(</span><span class="op" id="2861291">)</span>&nbsp;<span class="ident" id="2861293">Value</span>&nbsp;<span class="op" id="2861299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2861302">if</span>&nbsp;<span class="ident" id="2861305">v</span><span class="op" id="2861306">.</span><span class="ident" id="2861307">flag</span><span class="op" id="2861311">&amp;</span><span class="ident" id="2861312">flagAddr</span>&nbsp;<span class="op" id="2861321">==</span>&nbsp;<span class="num" id="2861324">0</span>&nbsp;<span class="op" id="2861326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2861330">panic</span><span class="op" id="2861335">(</span><span class="string" id="2861336">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2861379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2861382">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2861385">return</span>&nbsp;<span class="ident" id="2861392">Value</span><span class="op" id="2861397">{</span><span class="ident" id="2861398">v</span><span class="op" id="2861399">.</span><span class="ident" id="2861400">typ</span><span class="op" id="2861403">.</span><span class="ident" id="2861404">ptrTo</span><span class="op" id="2861409">(</span><span class="op" id="2861410">)</span><span class="op" id="2861411">,</span>&nbsp;<span class="ident" id="2861413">v</span><span class="op" id="2861414">.</span><span class="ident" id="2861415">ptr</span><span class="op" id="2861418">,</span>&nbsp;<span class="op" id="2861420">(</span><span class="ident" id="2861421">v</span><span class="op" id="2861422">.</span><span class="ident" id="2861423">flag</span>&nbsp;<span class="op" id="2861428">&amp;</span>&nbsp;<span class="ident" id="2861430">flagRO</span><span class="op" id="2861436">)</span>&nbsp;<span class="op" id="2861438">|</span>&nbsp;<span class="ident" id="2861440">flag</span><span class="op" id="2861444">(</span><span class="ident" id="2861445">Ptr</span><span class="op" id="2861448">)</span><span class="op" id="2861449">}</span><br>
<span class="lineno"></span><span class="op" id="2861451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2861454">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2861492">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2861530">func</span>&nbsp;<span class="op" id="2861535">(</span><span class="ident" id="2861536">v</span>&nbsp;<span class="ident" id="2861538">Value</span><span class="op" id="2861543">)</span>&nbsp;<span class="ident" id="2861545">Bool</span><span class="op" id="2861549">(</span><span class="op" id="2861550">)</span>&nbsp;<span class="builtintype" id="2861552">bool</span>&nbsp;<span class="op" id="2861557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2861560">v</span><span class="op" id="2861561">.</span><span class="ident" id="2861562">mustBe</span><span class="op" id="2861568">(</span><span class="ident" id="2861569">Bool</span><span class="op" id="2861573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2861576">return</span>&nbsp;<span class="op" id="2861583">*</span><span class="op" id="2861584">(</span><span class="op" id="2861585">*</span><span class="builtintype" id="2861586">bool</span><span class="op" id="2861590">)</span><span class="op" id="2861591">(</span><span class="ident" id="2861592">v</span><span class="op" id="2861593">.</span><span class="ident" id="2861594">ptr</span><span class="op" id="2861597">)</span><br>
<span class="lineno"></span><span class="op" id="2861599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2861602">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2861641">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2861703">func</span>&nbsp;<span class="op" id="2861708">(</span><span class="ident" id="2861709">v</span>&nbsp;<span class="ident" id="2861711">Value</span><span class="op" id="2861716">)</span>&nbsp;<span class="ident" id="2861718">Bytes</span><span class="op" id="2861723">(</span><span class="op" id="2861724">)</span>&nbsp;<span class="op" id="2861726">[</span><span class="op" id="2861727">]</span><span class="builtintype" id="2861728">byte</span>&nbsp;<span class="op" id="2861733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2861736">v</span><span class="op" id="2861737">.</span><span class="ident" id="2861738">mustBe</span><span class="op" id="2861744">(</span><span class="ident" id="2861745">Slice</span><span class="op" id="2861750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2861753">if</span>&nbsp;<span class="ident" id="2861756">v</span><span class="op" id="2861757">.</span><span class="ident" id="2861758">typ</span><span class="op" id="2861761">.</span><span class="ident" id="2861762">Elem</span><span class="op" id="2861766">(</span><span class="op" id="2861767">)</span><span class="op" id="2861768">.</span><span class="ident" id="2861769">Kind</span><span class="op" id="2861773">(</span><span class="op" id="2861774">)</span>&nbsp;<span class="op" id="2861776">!=</span>&nbsp;<span class="ident" id="2861779">Uint8</span>&nbsp;<span class="op" id="2861785">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2861789">panic</span><span class="op" id="2861794">(</span><span class="string" id="2861795">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2861834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2861837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2861840">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2861898">return</span>&nbsp;<span class="op" id="2861905">*</span><span class="op" id="2861906">(</span><span class="op" id="2861907">*</span><span class="op" id="2861908">[</span><span class="op" id="2861909">]</span><span class="builtintype" id="2861910">byte</span><span class="op" id="2861914">)</span><span class="op" id="2861915">(</span><span class="ident" id="2861916">v</span><span class="op" id="2861917">.</span><span class="ident" id="2861918">ptr</span><span class="op" id="2861921">)</span><br>
<span class="lineno"></span><span class="op" id="2861923">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2861926">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2861965">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2862036">func</span>&nbsp;<span class="op" id="2862041">(</span><span class="ident" id="2862042">v</span>&nbsp;<span class="ident" id="2862044">Value</span><span class="op" id="2862049">)</span>&nbsp;<span class="ident" id="2862051">runes</span><span class="op" id="2862056">(</span><span class="op" id="2862057">)</span>&nbsp;<span class="op" id="2862059">[</span><span class="op" id="2862060">]</span><span class="builtintype" id="2862061">rune</span>&nbsp;<span class="op" id="2862066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2862069">v</span><span class="op" id="2862070">.</span><span class="ident" id="2862071">mustBe</span><span class="op" id="2862077">(</span><span class="ident" id="2862078">Slice</span><span class="op" id="2862083">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862086">if</span>&nbsp;<span class="ident" id="2862089">v</span><span class="op" id="2862090">.</span><span class="ident" id="2862091">typ</span><span class="op" id="2862094">.</span><span class="ident" id="2862095">Elem</span><span class="op" id="2862099">(</span><span class="op" id="2862100">)</span><span class="op" id="2862101">.</span><span class="ident" id="2862102">Kind</span><span class="op" id="2862106">(</span><span class="op" id="2862107">)</span>&nbsp;<span class="op" id="2862109">!=</span>&nbsp;<span class="ident" id="2862112">Int32</span>&nbsp;<span class="op" id="2862118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2862122">panic</span><span class="op" id="2862127">(</span><span class="string" id="2862128">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2862167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2862170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2862173">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862231">return</span>&nbsp;<span class="op" id="2862238">*</span><span class="op" id="2862239">(</span><span class="op" id="2862240">*</span><span class="op" id="2862241">[</span><span class="op" id="2862242">]</span><span class="builtintype" id="2862243">rune</span><span class="op" id="2862247">)</span><span class="op" id="2862248">(</span><span class="ident" id="2862249">v</span><span class="op" id="2862250">.</span><span class="ident" id="2862251">ptr</span><span class="op" id="2862254">)</span><br>
<span class="lineno">265</span><span class="op" id="2862256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2862259">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2862333">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2862405">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2862467">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2862546">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2862600">func</span>&nbsp;<span class="op" id="2862605">(</span><span class="ident" id="2862606">v</span>&nbsp;<span class="ident" id="2862608">Value</span><span class="op" id="2862613">)</span>&nbsp;<span class="ident" id="2862615">CanAddr</span><span class="op" id="2862622">(</span><span class="op" id="2862623">)</span>&nbsp;<span class="builtintype" id="2862625">bool</span>&nbsp;<span class="op" id="2862630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862633">return</span>&nbsp;<span class="ident" id="2862640">v</span><span class="op" id="2862641">.</span><span class="ident" id="2862642">flag</span><span class="op" id="2862646">&amp;</span><span class="ident" id="2862647">flagAddr</span>&nbsp;<span class="op" id="2862656">!=</span>&nbsp;<span class="num" id="2862659">0</span><br>
<span class="lineno"></span><span class="op" id="2862661">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2862664">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2862721">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2862785">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2862837">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2862898">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2862946">func</span>&nbsp;<span class="op" id="2862951">(</span><span class="ident" id="2862952">v</span>&nbsp;<span class="ident" id="2862954">Value</span><span class="op" id="2862959">)</span>&nbsp;<span class="ident" id="2862961">CanSet</span><span class="op" id="2862967">(</span><span class="op" id="2862968">)</span>&nbsp;<span class="builtintype" id="2862970">bool</span>&nbsp;<span class="op" id="2862975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2862978">return</span>&nbsp;<span class="ident" id="2862985">v</span><span class="op" id="2862986">.</span><span class="ident" id="2862987">flag</span><span class="op" id="2862991">&amp;</span><span class="op" id="2862992">(</span><span class="ident" id="2862993">flagAddr</span><span class="op" id="2863001">|</span><span class="ident" id="2863002">flagRO</span><span class="op" id="2863008">)</span>&nbsp;<span class="op" id="2863010">==</span>&nbsp;<span class="ident" id="2863013">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2863022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2863025">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2863083">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2863174">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2863214">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2863258">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2863317">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2863374">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2863448">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2863496">func</span>&nbsp;<span class="op" id="2863501">(</span><span class="ident" id="2863502">v</span>&nbsp;<span class="ident" id="2863504">Value</span><span class="op" id="2863509">)</span>&nbsp;<span class="ident" id="2863511">Call</span><span class="op" id="2863515">(</span><span class="ident" id="2863516">in</span>&nbsp;<span class="op" id="2863519">[</span><span class="op" id="2863520">]</span><span class="ident" id="2863521">Value</span><span class="op" id="2863526">)</span>&nbsp;<span class="op" id="2863528">[</span><span class="op" id="2863529">]</span><span class="ident" id="2863530">Value</span>&nbsp;<span class="op" id="2863536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863539">v</span><span class="op" id="2863540">.</span><span class="ident" id="2863541">mustBe</span><span class="op" id="2863547">(</span><span class="ident" id="2863548">Func</span><span class="op" id="2863552">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2863555">v</span><span class="op" id="2863556">.</span><span class="ident" id="2863557">mustBeExported</span><span class="op" id="2863571">(</span><span class="op" id="2863572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2863575">return</span>&nbsp;<span class="ident" id="2863582">v</span><span class="op" id="2863583">.</span><span class="ident" id="2863584">call</span><span class="op" id="2863588">(</span><span class="string" id="2863589">&#34;Call&#34;</span><span class="op" id="2863595">,</span>&nbsp;<span class="ident" id="2863597">in</span><span class="op" id="2863599">)</span><br>
<span class="lineno"></span><span class="op" id="2863601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2863604">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2863676">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2863745">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2863839">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2863903">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2863947">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2864006">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2864063">func</span>&nbsp;<span class="op" id="2864068">(</span><span class="ident" id="2864069">v</span>&nbsp;<span class="ident" id="2864071">Value</span><span class="op" id="2864076">)</span>&nbsp;<span class="ident" id="2864078">CallSlice</span><span class="op" id="2864087">(</span><span class="ident" id="2864088">in</span>&nbsp;<span class="op" id="2864091">[</span><span class="op" id="2864092">]</span><span class="ident" id="2864093">Value</span><span class="op" id="2864098">)</span>&nbsp;<span class="op" id="2864100">[</span><span class="op" id="2864101">]</span><span class="ident" id="2864102">Value</span>&nbsp;<span class="op" id="2864108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864111">v</span><span class="op" id="2864112">.</span><span class="ident" id="2864113">mustBe</span><span class="op" id="2864119">(</span><span class="ident" id="2864120">Func</span><span class="op" id="2864124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864127">v</span><span class="op" id="2864128">.</span><span class="ident" id="2864129">mustBeExported</span><span class="op" id="2864143">(</span><span class="op" id="2864144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864147">return</span>&nbsp;<span class="ident" id="2864154">v</span><span class="op" id="2864155">.</span><span class="ident" id="2864156">call</span><span class="op" id="2864160">(</span><span class="string" id="2864161">&#34;CallSlice&#34;</span><span class="op" id="2864172">,</span>&nbsp;<span class="ident" id="2864174">in</span><span class="op" id="2864176">)</span><br>
<span class="lineno">310</span><span class="op" id="2864178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2864181">var</span>&nbsp;<span class="ident" id="2864185">callGC</span>&nbsp;<span class="builtintype" id="2864192">bool</span>&nbsp;<span class="comment" id="2864197">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2864237">func</span>&nbsp;<span class="op" id="2864242">(</span><span class="ident" id="2864243">v</span>&nbsp;<span class="ident" id="2864245">Value</span><span class="op" id="2864250">)</span>&nbsp;<span class="ident" id="2864252">call</span><span class="op" id="2864256">(</span><span class="ident" id="2864257">op</span>&nbsp;<span class="builtintype" id="2864260">string</span><span class="op" id="2864266">,</span>&nbsp;<span class="ident" id="2864268">in</span>&nbsp;<span class="op" id="2864271">[</span><span class="op" id="2864272">]</span><span class="ident" id="2864273">Value</span><span class="op" id="2864278">)</span>&nbsp;<span class="op" id="2864280">[</span><span class="op" id="2864281">]</span><span class="ident" id="2864282">Value</span>&nbsp;<span class="op" id="2864288">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2864291">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864323">t</span>&nbsp;<span class="op" id="2864325">:=</span>&nbsp;<span class="ident" id="2864328">v</span><span class="op" id="2864329">.</span><span class="ident" id="2864330">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864335">var</span>&nbsp;<span class="op" id="2864339">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864343">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864352">unsafe</span><span class="op" id="2864358">.</span><span class="ident" id="2864359">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864369">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864378">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864386">rcvrtype</span>&nbsp;<span class="op" id="2864395">*</span><span class="ident" id="2864396">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864406">if</span>&nbsp;<span class="ident" id="2864409">v</span><span class="op" id="2864410">.</span><span class="ident" id="2864411">flag</span><span class="op" id="2864415">&amp;</span><span class="ident" id="2864416">flagMethod</span>&nbsp;<span class="op" id="2864427">!=</span>&nbsp;<span class="num" id="2864430">0</span>&nbsp;<span class="op" id="2864432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864436">rcvr</span>&nbsp;<span class="op" id="2864441">=</span>&nbsp;<span class="ident" id="2864443">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864447">rcvrtype</span><span class="op" id="2864455">,</span>&nbsp;<span class="ident" id="2864457">t</span><span class="op" id="2864458">,</span>&nbsp;<span class="ident" id="2864460">fn</span>&nbsp;<span class="op" id="2864463">=</span>&nbsp;<span class="ident" id="2864465">methodReceiver</span><span class="op" id="2864479">(</span><span class="ident" id="2864480">op</span><span class="op" id="2864482">,</span>&nbsp;<span class="ident" id="2864484">v</span><span class="op" id="2864485">,</span>&nbsp;<span class="builtintype" id="2864487">int</span><span class="op" id="2864490">(</span><span class="ident" id="2864491">v</span><span class="op" id="2864492">.</span><span class="ident" id="2864493">flag</span><span class="op" id="2864497">)</span><span class="op" id="2864498">&gt;&gt;</span><span class="ident" id="2864500">flagMethodShift</span><span class="op" id="2864515">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864518">}</span>&nbsp;<span class="keyword" id="2864520">else</span>&nbsp;<span class="keyword" id="2864525">if</span>&nbsp;<span class="ident" id="2864528">v</span><span class="op" id="2864529">.</span><span class="ident" id="2864530">flag</span><span class="op" id="2864534">&amp;</span><span class="ident" id="2864535">flagIndir</span>&nbsp;<span class="op" id="2864545">!=</span>&nbsp;<span class="num" id="2864548">0</span>&nbsp;<span class="op" id="2864550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864554">fn</span>&nbsp;<span class="op" id="2864557">=</span>&nbsp;<span class="op" id="2864559">*</span><span class="op" id="2864560">(</span><span class="op" id="2864561">*</span><span class="ident" id="2864562">unsafe</span><span class="op" id="2864568">.</span><span class="ident" id="2864569">Pointer</span><span class="op" id="2864576">)</span><span class="op" id="2864577">(</span><span class="ident" id="2864578">v</span><span class="op" id="2864579">.</span><span class="ident" id="2864580">ptr</span><span class="op" id="2864583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864586">}</span>&nbsp;<span class="keyword" id="2864588">else</span>&nbsp;<span class="op" id="2864593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864597">fn</span>&nbsp;<span class="op" id="2864600">=</span>&nbsp;<span class="ident" id="2864602">v</span><span class="op" id="2864603">.</span><span class="ident" id="2864604">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864609">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864613">if</span>&nbsp;<span class="ident" id="2864616">fn</span>&nbsp;<span class="op" id="2864619">==</span>&nbsp;<span class="ident" id="2864622">nil</span>&nbsp;<span class="op" id="2864626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2864630">panic</span><span class="op" id="2864635">(</span><span class="string" id="2864636">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2864678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864685">isSlice</span>&nbsp;<span class="op" id="2864693">:=</span>&nbsp;<span class="ident" id="2864696">op</span>&nbsp;<span class="op" id="2864699">==</span>&nbsp;<span class="string" id="2864702">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2864715">n</span>&nbsp;<span class="op" id="2864717">:=</span>&nbsp;<span class="ident" id="2864720">t</span><span class="op" id="2864721">.</span><span class="ident" id="2864722">NumIn</span><span class="op" id="2864727">(</span><span class="op" id="2864728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864731">if</span>&nbsp;<span class="ident" id="2864734">isSlice</span>&nbsp;<span class="op" id="2864742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864746">if</span>&nbsp;<span class="op" id="2864749">!</span><span class="ident" id="2864750">t</span><span class="op" id="2864751">.</span><span class="ident" id="2864752">IsVariadic</span><span class="op" id="2864762">(</span><span class="op" id="2864763">)</span>&nbsp;<span class="op" id="2864765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2864770">panic</span><span class="op" id="2864775">(</span><span class="string" id="2864776">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2864821">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864829">if</span>&nbsp;<span class="builtinfunc" id="2864832">len</span><span class="op" id="2864835">(</span><span class="ident" id="2864836">in</span><span class="op" id="2864838">)</span>&nbsp;<span class="op" id="2864840">&lt;</span>&nbsp;<span class="ident" id="2864842">n</span>&nbsp;<span class="op" id="2864844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2864849">panic</span><span class="op" id="2864854">(</span><span class="string" id="2864855">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2864904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2864912">if</span>&nbsp;<span class="builtinfunc" id="2864915">len</span><span class="op" id="2864918">(</span><span class="ident" id="2864919">in</span><span class="op" id="2864921">)</span>&nbsp;<span class="op" id="2864923">&gt;</span>&nbsp;<span class="ident" id="2864925">n</span>&nbsp;<span class="op" id="2864927">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2864932">panic</span><span class="op" id="2864937">(</span><span class="string" id="2864938">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2864988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2864995">}</span>&nbsp;<span class="keyword" id="2864997">else</span>&nbsp;<span class="op" id="2865002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865006">if</span>&nbsp;<span class="ident" id="2865009">t</span><span class="op" id="2865010">.</span><span class="ident" id="2865011">IsVariadic</span><span class="op" id="2865021">(</span><span class="op" id="2865022">)</span>&nbsp;<span class="op" id="2865024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865029">n</span><span class="op" id="2865030">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865039">if</span>&nbsp;<span class="builtinfunc" id="2865042">len</span><span class="op" id="2865045">(</span><span class="ident" id="2865046">in</span><span class="op" id="2865048">)</span>&nbsp;<span class="op" id="2865050">&lt;</span>&nbsp;<span class="ident" id="2865052">n</span>&nbsp;<span class="op" id="2865054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865059">panic</span><span class="op" id="2865064">(</span><span class="string" id="2865065">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2865109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865117">if</span>&nbsp;<span class="op" id="2865120">!</span><span class="ident" id="2865121">t</span><span class="op" id="2865122">.</span><span class="ident" id="2865123">IsVariadic</span><span class="op" id="2865133">(</span><span class="op" id="2865134">)</span>&nbsp;<span class="op" id="2865136">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2865139">len</span><span class="op" id="2865142">(</span><span class="ident" id="2865143">in</span><span class="op" id="2865145">)</span>&nbsp;<span class="op" id="2865147">&gt;</span>&nbsp;<span class="ident" id="2865149">n</span>&nbsp;<span class="op" id="2865151">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865156">panic</span><span class="op" id="2865161">(</span><span class="string" id="2865162">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2865207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865217">for</span>&nbsp;<span class="ident" id="2865221">_</span><span class="op" id="2865222">,</span>&nbsp;<span class="ident" id="2865224">x</span>&nbsp;<span class="op" id="2865226">:=</span>&nbsp;<span class="keyword" id="2865229">range</span>&nbsp;<span class="ident" id="2865235">in</span>&nbsp;<span class="op" id="2865238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865242">if</span>&nbsp;<span class="ident" id="2865245">x</span><span class="op" id="2865246">.</span><span class="ident" id="2865247">Kind</span><span class="op" id="2865251">(</span><span class="op" id="2865252">)</span>&nbsp;<span class="op" id="2865254">==</span>&nbsp;<span class="ident" id="2865257">Invalid</span>&nbsp;<span class="op" id="2865265">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865270">panic</span><span class="op" id="2865275">(</span><span class="string" id="2865276">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2865288">+</span>&nbsp;<span class="ident" id="2865290">op</span>&nbsp;<span class="op" id="2865293">+</span>&nbsp;<span class="string" id="2865295">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2865323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865333">for</span>&nbsp;<span class="ident" id="2865337">i</span>&nbsp;<span class="op" id="2865339">:=</span>&nbsp;<span class="num" id="2865342">0</span><span class="op" id="2865343">;</span>&nbsp;<span class="ident" id="2865345">i</span>&nbsp;<span class="op" id="2865347">&lt;</span>&nbsp;<span class="ident" id="2865349">n</span><span class="op" id="2865350">;</span>&nbsp;<span class="ident" id="2865352">i</span><span class="op" id="2865353">++</span>&nbsp;<span class="op" id="2865356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865360">if</span>&nbsp;<span class="ident" id="2865363">xt</span><span class="op" id="2865365">,</span>&nbsp;<span class="ident" id="2865367">targ</span>&nbsp;<span class="op" id="2865372">:=</span>&nbsp;<span class="ident" id="2865375">in</span><span class="op" id="2865377">[</span><span class="ident" id="2865378">i</span><span class="op" id="2865379">]</span><span class="op" id="2865380">.</span><span class="ident" id="2865381">Type</span><span class="op" id="2865385">(</span><span class="op" id="2865386">)</span><span class="op" id="2865387">,</span>&nbsp;<span class="ident" id="2865389">t</span><span class="op" id="2865390">.</span><span class="ident" id="2865391">In</span><span class="op" id="2865393">(</span><span class="ident" id="2865394">i</span><span class="op" id="2865395">)</span><span class="op" id="2865396">;</span>&nbsp;<span class="op" id="2865398">!</span><span class="ident" id="2865399">xt</span><span class="op" id="2865401">.</span><span class="ident" id="2865402">AssignableTo</span><span class="op" id="2865414">(</span><span class="ident" id="2865415">targ</span><span class="op" id="2865419">)</span>&nbsp;<span class="op" id="2865421">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865426">panic</span><span class="op" id="2865431">(</span><span class="string" id="2865432">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2865444">+</span>&nbsp;<span class="ident" id="2865446">op</span>&nbsp;<span class="op" id="2865449">+</span>&nbsp;<span class="string" id="2865451">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2865461">+</span>&nbsp;<span class="ident" id="2865463">xt</span><span class="op" id="2865465">.</span><span class="ident" id="2865466">String</span><span class="op" id="2865472">(</span><span class="op" id="2865473">)</span>&nbsp;<span class="op" id="2865475">+</span>&nbsp;<span class="string" id="2865477">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2865489">+</span>&nbsp;<span class="ident" id="2865491">targ</span><span class="op" id="2865495">.</span><span class="ident" id="2865496">String</span><span class="op" id="2865502">(</span><span class="op" id="2865503">)</span><span class="op" id="2865504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865514">if</span>&nbsp;<span class="op" id="2865517">!</span><span class="ident" id="2865518">isSlice</span>&nbsp;<span class="op" id="2865526">&amp;&amp;</span>&nbsp;<span class="ident" id="2865529">t</span><span class="op" id="2865530">.</span><span class="ident" id="2865531">IsVariadic</span><span class="op" id="2865541">(</span><span class="op" id="2865542">)</span>&nbsp;<span class="op" id="2865544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2865548">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865588">m</span>&nbsp;<span class="op" id="2865590">:=</span>&nbsp;<span class="builtinfunc" id="2865593">len</span><span class="op" id="2865596">(</span><span class="ident" id="2865597">in</span><span class="op" id="2865599">)</span>&nbsp;<span class="op" id="2865601">-</span>&nbsp;<span class="ident" id="2865603">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865607">slice</span>&nbsp;<span class="op" id="2865613">:=</span>&nbsp;<span class="ident" id="2865616">MakeSlice</span><span class="op" id="2865625">(</span><span class="ident" id="2865626">t</span><span class="op" id="2865627">.</span><span class="ident" id="2865628">In</span><span class="op" id="2865630">(</span><span class="ident" id="2865631">n</span><span class="op" id="2865632">)</span><span class="op" id="2865633">,</span>&nbsp;<span class="ident" id="2865635">m</span><span class="op" id="2865636">,</span>&nbsp;<span class="ident" id="2865638">m</span><span class="op" id="2865639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865643">elem</span>&nbsp;<span class="op" id="2865648">:=</span>&nbsp;<span class="ident" id="2865651">t</span><span class="op" id="2865652">.</span><span class="ident" id="2865653">In</span><span class="op" id="2865655">(</span><span class="ident" id="2865656">n</span><span class="op" id="2865657">)</span><span class="op" id="2865658">.</span><span class="ident" id="2865659">Elem</span><span class="op" id="2865663">(</span><span class="op" id="2865664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865668">for</span>&nbsp;<span class="ident" id="2865672">i</span>&nbsp;<span class="op" id="2865674">:=</span>&nbsp;<span class="num" id="2865677">0</span><span class="op" id="2865678">;</span>&nbsp;<span class="ident" id="2865680">i</span>&nbsp;<span class="op" id="2865682">&lt;</span>&nbsp;<span class="ident" id="2865684">m</span><span class="op" id="2865685">;</span>&nbsp;<span class="ident" id="2865687">i</span><span class="op" id="2865688">++</span>&nbsp;<span class="op" id="2865691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865696">x</span>&nbsp;<span class="op" id="2865698">:=</span>&nbsp;<span class="ident" id="2865701">in</span><span class="op" id="2865703">[</span><span class="ident" id="2865704">n</span><span class="op" id="2865705">+</span><span class="ident" id="2865706">i</span><span class="op" id="2865707">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865712">if</span>&nbsp;<span class="ident" id="2865715">xt</span>&nbsp;<span class="op" id="2865718">:=</span>&nbsp;<span class="ident" id="2865721">x</span><span class="op" id="2865722">.</span><span class="ident" id="2865723">Type</span><span class="op" id="2865727">(</span><span class="op" id="2865728">)</span><span class="op" id="2865729">;</span>&nbsp;<span class="op" id="2865731">!</span><span class="ident" id="2865732">xt</span><span class="op" id="2865734">.</span><span class="ident" id="2865735">AssignableTo</span><span class="op" id="2865747">(</span><span class="ident" id="2865748">elem</span><span class="op" id="2865752">)</span>&nbsp;<span class="op" id="2865754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865760">panic</span><span class="op" id="2865765">(</span><span class="string" id="2865766">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2865789">+</span>&nbsp;<span class="ident" id="2865791">xt</span><span class="op" id="2865793">.</span><span class="ident" id="2865794">String</span><span class="op" id="2865800">(</span><span class="op" id="2865801">)</span>&nbsp;<span class="op" id="2865803">+</span>&nbsp;<span class="string" id="2865805">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2865817">+</span>&nbsp;<span class="ident" id="2865819">elem</span><span class="op" id="2865823">.</span><span class="ident" id="2865824">String</span><span class="op" id="2865830">(</span><span class="op" id="2865831">)</span>&nbsp;<span class="op" id="2865833">+</span>&nbsp;<span class="string" id="2865835">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2865842">+</span>&nbsp;<span class="ident" id="2865844">op</span><span class="op" id="2865846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865856">slice</span><span class="op" id="2865861">.</span><span class="ident" id="2865862">Index</span><span class="op" id="2865867">(</span><span class="ident" id="2865868">i</span><span class="op" id="2865869">)</span><span class="op" id="2865870">.</span><span class="ident" id="2865871">Set</span><span class="op" id="2865874">(</span><span class="ident" id="2865875">x</span><span class="op" id="2865876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865880">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865884">origIn</span>&nbsp;<span class="op" id="2865891">:=</span>&nbsp;<span class="ident" id="2865894">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865899">in</span>&nbsp;<span class="op" id="2865902">=</span>&nbsp;<span class="builtinfunc" id="2865904">make</span><span class="op" id="2865908">(</span><span class="op" id="2865909">[</span><span class="op" id="2865910">]</span><span class="ident" id="2865911">Value</span><span class="op" id="2865916">,</span>&nbsp;<span class="ident" id="2865918">n</span><span class="op" id="2865919">+</span><span class="num" id="2865920">1</span><span class="op" id="2865921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2865925">copy</span><span class="op" id="2865929">(</span><span class="ident" id="2865930">in</span><span class="op" id="2865932">[</span><span class="op" id="2865933">:</span><span class="ident" id="2865934">n</span><span class="op" id="2865935">]</span><span class="op" id="2865936">,</span>&nbsp;<span class="ident" id="2865938">origIn</span><span class="op" id="2865944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865948">in</span><span class="op" id="2865950">[</span><span class="ident" id="2865951">n</span><span class="op" id="2865952">]</span>&nbsp;<span class="op" id="2865954">=</span>&nbsp;<span class="ident" id="2865956">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2865963">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2865967">nin</span>&nbsp;<span class="op" id="2865971">:=</span>&nbsp;<span class="builtinfunc" id="2865974">len</span><span class="op" id="2865977">(</span><span class="ident" id="2865978">in</span><span class="op" id="2865980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2865983">if</span>&nbsp;<span class="ident" id="2865986">nin</span>&nbsp;<span class="op" id="2865990">!=</span>&nbsp;<span class="ident" id="2865993">t</span><span class="op" id="2865994">.</span><span class="ident" id="2865995">NumIn</span><span class="op" id="2866000">(</span><span class="op" id="2866001">)</span>&nbsp;<span class="op" id="2866003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2866007">panic</span><span class="op" id="2866012">(</span><span class="string" id="2866013">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2866055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866058">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866061">nout</span>&nbsp;<span class="op" id="2866066">:=</span>&nbsp;<span class="ident" id="2866069">t</span><span class="op" id="2866070">.</span><span class="ident" id="2866071">NumOut</span><span class="op" id="2866077">(</span><span class="op" id="2866078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866082">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866143">frametype</span><span class="op" id="2866152">,</span>&nbsp;<span class="ident" id="2866154">_</span><span class="op" id="2866155">,</span>&nbsp;<span class="ident" id="2866157">retOffset</span><span class="op" id="2866166">,</span>&nbsp;<span class="ident" id="2866168">_</span>&nbsp;<span class="op" id="2866170">:=</span>&nbsp;<span class="ident" id="2866173">funcLayout</span><span class="op" id="2866183">(</span><span class="ident" id="2866184">t</span><span class="op" id="2866185">,</span>&nbsp;<span class="ident" id="2866187">rcvrtype</span><span class="op" id="2866195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866198">args</span>&nbsp;<span class="op" id="2866203">:=</span>&nbsp;<span class="ident" id="2866206">unsafe_New</span><span class="op" id="2866216">(</span><span class="ident" id="2866217">frametype</span><span class="op" id="2866226">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866229">off</span>&nbsp;<span class="op" id="2866233">:=</span>&nbsp;<span class="builtintype" id="2866236">uintptr</span><span class="op" id="2866243">(</span><span class="num" id="2866244">0</span><span class="op" id="2866245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866249">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866276">if</span>&nbsp;<span class="ident" id="2866279">rcvrtype</span>&nbsp;<span class="op" id="2866288">!=</span>&nbsp;<span class="ident" id="2866291">nil</span>&nbsp;<span class="op" id="2866295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866299">storeRcvr</span><span class="op" id="2866308">(</span><span class="ident" id="2866309">rcvr</span><span class="op" id="2866313">,</span>&nbsp;<span class="ident" id="2866315">args</span><span class="op" id="2866319">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866323">off</span>&nbsp;<span class="op" id="2866327">=</span>&nbsp;<span class="ident" id="2866329">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866341">for</span>&nbsp;<span class="ident" id="2866345">i</span><span class="op" id="2866346">,</span>&nbsp;<span class="ident" id="2866348">v</span>&nbsp;<span class="op" id="2866350">:=</span>&nbsp;<span class="keyword" id="2866353">range</span>&nbsp;<span class="ident" id="2866359">in</span>&nbsp;<span class="op" id="2866362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866366">v</span><span class="op" id="2866367">.</span><span class="ident" id="2866368">mustBeExported</span><span class="op" id="2866382">(</span><span class="op" id="2866383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866387">targ</span>&nbsp;<span class="op" id="2866392">:=</span>&nbsp;<span class="ident" id="2866395">t</span><span class="op" id="2866396">.</span><span class="ident" id="2866397">In</span><span class="op" id="2866399">(</span><span class="ident" id="2866400">i</span><span class="op" id="2866401">)</span><span class="op" id="2866402">.</span><span class="op" id="2866403">(</span><span class="op" id="2866404">*</span><span class="ident" id="2866405">rtype</span><span class="op" id="2866410">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866414">a</span>&nbsp;<span class="op" id="2866416">:=</span>&nbsp;<span class="builtintype" id="2866419">uintptr</span><span class="op" id="2866426">(</span><span class="ident" id="2866427">targ</span><span class="op" id="2866431">.</span><span class="ident" id="2866432">align</span><span class="op" id="2866437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866441">off</span>&nbsp;<span class="op" id="2866445">=</span>&nbsp;<span class="op" id="2866447">(</span><span class="ident" id="2866448">off</span>&nbsp;<span class="op" id="2866452">+</span>&nbsp;<span class="ident" id="2866454">a</span>&nbsp;<span class="op" id="2866456">-</span>&nbsp;<span class="num" id="2866458">1</span><span class="op" id="2866459">)</span>&nbsp;<span class="op" id="2866461">&amp;^</span>&nbsp;<span class="op" id="2866464">(</span><span class="ident" id="2866465">a</span>&nbsp;<span class="op" id="2866467">-</span>&nbsp;<span class="num" id="2866469">1</span><span class="op" id="2866470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866474">n</span>&nbsp;<span class="op" id="2866476">:=</span>&nbsp;<span class="ident" id="2866479">targ</span><span class="op" id="2866483">.</span><span class="ident" id="2866484">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866491">addr</span>&nbsp;<span class="op" id="2866496">:=</span>&nbsp;<span class="ident" id="2866499">unsafe</span><span class="op" id="2866505">.</span><span class="ident" id="2866506">Pointer</span><span class="op" id="2866513">(</span><span class="builtintype" id="2866514">uintptr</span><span class="op" id="2866521">(</span><span class="ident" id="2866522">args</span><span class="op" id="2866526">)</span>&nbsp;<span class="op" id="2866528">+</span>&nbsp;<span class="ident" id="2866530">off</span><span class="op" id="2866533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866537">v</span>&nbsp;<span class="op" id="2866539">=</span>&nbsp;<span class="ident" id="2866541">v</span><span class="op" id="2866542">.</span><span class="ident" id="2866543">assignTo</span><span class="op" id="2866551">(</span><span class="string" id="2866552">&#34;reflect.Value.Call&#34;</span><span class="op" id="2866572">,</span>&nbsp;<span class="ident" id="2866574">targ</span><span class="op" id="2866578">,</span>&nbsp;<span class="ident" id="2866580">addr</span><span class="op" id="2866584">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866588">if</span>&nbsp;<span class="ident" id="2866591">v</span><span class="op" id="2866592">.</span><span class="ident" id="2866593">flag</span><span class="op" id="2866597">&amp;</span><span class="ident" id="2866598">flagIndir</span>&nbsp;<span class="op" id="2866608">!=</span>&nbsp;<span class="num" id="2866611">0</span>&nbsp;<span class="op" id="2866613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866618">memmove</span><span class="op" id="2866625">(</span><span class="ident" id="2866626">addr</span><span class="op" id="2866630">,</span>&nbsp;<span class="ident" id="2866632">v</span><span class="op" id="2866633">.</span><span class="ident" id="2866634">ptr</span><span class="op" id="2866637">,</span>&nbsp;<span class="ident" id="2866639">n</span><span class="op" id="2866640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866644">}</span>&nbsp;<span class="keyword" id="2866646">else</span>&nbsp;<span class="op" id="2866651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866656">*</span><span class="op" id="2866657">(</span><span class="op" id="2866658">*</span><span class="ident" id="2866659">unsafe</span><span class="op" id="2866665">.</span><span class="ident" id="2866666">Pointer</span><span class="op" id="2866673">)</span><span class="op" id="2866674">(</span><span class="ident" id="2866675">addr</span><span class="op" id="2866679">)</span>&nbsp;<span class="op" id="2866681">=</span>&nbsp;<span class="ident" id="2866683">v</span><span class="op" id="2866684">.</span><span class="ident" id="2866685">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866691">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866695">off</span>&nbsp;<span class="op" id="2866699">+=</span>&nbsp;<span class="ident" id="2866702">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866709">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866719">call</span><span class="op" id="2866723">(</span><span class="ident" id="2866724">fn</span><span class="op" id="2866726">,</span>&nbsp;<span class="ident" id="2866728">args</span><span class="op" id="2866732">,</span>&nbsp;<span class="builtintype" id="2866734">uint32</span><span class="op" id="2866740">(</span><span class="ident" id="2866741">frametype</span><span class="op" id="2866750">.</span><span class="ident" id="2866751">size</span><span class="op" id="2866755">)</span><span class="op" id="2866756">,</span>&nbsp;<span class="builtintype" id="2866758">uint32</span><span class="op" id="2866764">(</span><span class="ident" id="2866765">retOffset</span><span class="op" id="2866774">)</span><span class="op" id="2866775">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866779">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866820">if</span>&nbsp;<span class="ident" id="2866823">callGC</span>&nbsp;<span class="op" id="2866830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866834">runtime</span><span class="op" id="2866841">.</span><span class="ident" id="2866842">GC</span><span class="op" id="2866844">(</span><span class="op" id="2866845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2866848">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2866852">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866888">ret</span>&nbsp;<span class="op" id="2866892">:=</span>&nbsp;<span class="builtinfunc" id="2866895">make</span><span class="op" id="2866899">(</span><span class="op" id="2866900">[</span><span class="op" id="2866901">]</span><span class="ident" id="2866902">Value</span><span class="op" id="2866907">,</span>&nbsp;<span class="ident" id="2866909">nout</span><span class="op" id="2866913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866916">off</span>&nbsp;<span class="op" id="2866920">=</span>&nbsp;<span class="ident" id="2866922">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2866933">for</span>&nbsp;<span class="ident" id="2866937">i</span>&nbsp;<span class="op" id="2866939">:=</span>&nbsp;<span class="num" id="2866942">0</span><span class="op" id="2866943">;</span>&nbsp;<span class="ident" id="2866945">i</span>&nbsp;<span class="op" id="2866947">&lt;</span>&nbsp;<span class="ident" id="2866949">nout</span><span class="op" id="2866953">;</span>&nbsp;<span class="ident" id="2866955">i</span><span class="op" id="2866956">++</span>&nbsp;<span class="op" id="2866959">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866963">tv</span>&nbsp;<span class="op" id="2866966">:=</span>&nbsp;<span class="ident" id="2866969">t</span><span class="op" id="2866970">.</span><span class="ident" id="2866971">Out</span><span class="op" id="2866974">(</span><span class="ident" id="2866975">i</span><span class="op" id="2866976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2866980">a</span>&nbsp;<span class="op" id="2866982">:=</span>&nbsp;<span class="builtintype" id="2866985">uintptr</span><span class="op" id="2866992">(</span><span class="ident" id="2866993">tv</span><span class="op" id="2866995">.</span><span class="ident" id="2866996">Align</span><span class="op" id="2867001">(</span><span class="op" id="2867002">)</span><span class="op" id="2867003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867007">off</span>&nbsp;<span class="op" id="2867011">=</span>&nbsp;<span class="op" id="2867013">(</span><span class="ident" id="2867014">off</span>&nbsp;<span class="op" id="2867018">+</span>&nbsp;<span class="ident" id="2867020">a</span>&nbsp;<span class="op" id="2867022">-</span>&nbsp;<span class="num" id="2867024">1</span><span class="op" id="2867025">)</span>&nbsp;<span class="op" id="2867027">&amp;^</span>&nbsp;<span class="op" id="2867030">(</span><span class="ident" id="2867031">a</span>&nbsp;<span class="op" id="2867033">-</span>&nbsp;<span class="num" id="2867035">1</span><span class="op" id="2867036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867040">fl</span>&nbsp;<span class="op" id="2867043">:=</span>&nbsp;<span class="ident" id="2867046">flagIndir</span>&nbsp;<span class="op" id="2867056">|</span>&nbsp;<span class="ident" id="2867058">flag</span><span class="op" id="2867062">(</span><span class="ident" id="2867063">tv</span><span class="op" id="2867065">.</span><span class="ident" id="2867066">Kind</span><span class="op" id="2867070">(</span><span class="op" id="2867071">)</span><span class="op" id="2867072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867076">ret</span><span class="op" id="2867079">[</span><span class="ident" id="2867080">i</span><span class="op" id="2867081">]</span>&nbsp;<span class="op" id="2867083">=</span>&nbsp;<span class="ident" id="2867085">Value</span><span class="op" id="2867090">{</span><span class="ident" id="2867091">tv</span><span class="op" id="2867093">.</span><span class="ident" id="2867094">common</span><span class="op" id="2867100">(</span><span class="op" id="2867101">)</span><span class="op" id="2867102">,</span>&nbsp;<span class="ident" id="2867104">unsafe</span><span class="op" id="2867110">.</span><span class="ident" id="2867111">Pointer</span><span class="op" id="2867118">(</span><span class="builtintype" id="2867119">uintptr</span><span class="op" id="2867126">(</span><span class="ident" id="2867127">args</span><span class="op" id="2867131">)</span>&nbsp;<span class="op" id="2867133">+</span>&nbsp;<span class="ident" id="2867135">off</span><span class="op" id="2867138">)</span><span class="op" id="2867139">,</span>&nbsp;<span class="ident" id="2867141">fl</span><span class="op" id="2867143">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867147">off</span>&nbsp;<span class="op" id="2867151">+=</span>&nbsp;<span class="ident" id="2867154">tv</span><span class="op" id="2867156">.</span><span class="ident" id="2867157">Size</span><span class="op" id="2867161">(</span><span class="op" id="2867162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2867165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2867169">return</span>&nbsp;<span class="ident" id="2867176">ret</span><br>
<span class="lineno"></span><span class="op" id="2867180">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2867183">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2867244">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2867308">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2867382">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2867449">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2867519">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2867554">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2867625">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2867692">//</span><br>
<span class="lineno">450</span><span class="comment" id="2867695">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2867771">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2867843">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2867915">func</span>&nbsp;<span class="ident" id="2867920">callReflect</span><span class="op" id="2867931">(</span><span class="ident" id="2867932">ctxt</span>&nbsp;<span class="op" id="2867937">*</span><span class="ident" id="2867938">makeFuncImpl</span><span class="op" id="2867950">,</span>&nbsp;<span class="ident" id="2867952">frame</span>&nbsp;<span class="ident" id="2867958">unsafe</span><span class="op" id="2867964">.</span><span class="ident" id="2867965">Pointer</span><span class="op" id="2867972">)</span>&nbsp;<span class="op" id="2867974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867977">ftyp</span>&nbsp;<span class="op" id="2867982">:=</span>&nbsp;<span class="ident" id="2867985">ctxt</span><span class="op" id="2867989">.</span><span class="ident" id="2867990">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2867995">f</span>&nbsp;<span class="op" id="2867997">:=</span>&nbsp;<span class="ident" id="2868000">ctxt</span><span class="op" id="2868004">.</span><span class="ident" id="2868005">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868010">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868047">ptr</span>&nbsp;<span class="op" id="2868051">:=</span>&nbsp;<span class="ident" id="2868054">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868061">off</span>&nbsp;<span class="op" id="2868065">:=</span>&nbsp;<span class="builtintype" id="2868068">uintptr</span><span class="op" id="2868075">(</span><span class="num" id="2868076">0</span><span class="op" id="2868077">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868080">in</span>&nbsp;<span class="op" id="2868083">:=</span>&nbsp;<span class="builtinfunc" id="2868086">make</span><span class="op" id="2868090">(</span><span class="op" id="2868091">[</span><span class="op" id="2868092">]</span><span class="ident" id="2868093">Value</span><span class="op" id="2868098">,</span>&nbsp;<span class="num" id="2868100">0</span><span class="op" id="2868101">,</span>&nbsp;<span class="builtinfunc" id="2868103">len</span><span class="op" id="2868106">(</span><span class="ident" id="2868107">ftyp</span><span class="op" id="2868111">.</span><span class="ident" id="2868112">in</span><span class="op" id="2868114">)</span><span class="op" id="2868115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868118">for</span>&nbsp;<span class="ident" id="2868122">_</span><span class="op" id="2868123">,</span>&nbsp;<span class="ident" id="2868125">arg</span>&nbsp;<span class="op" id="2868129">:=</span>&nbsp;<span class="keyword" id="2868132">range</span>&nbsp;<span class="ident" id="2868138">ftyp</span><span class="op" id="2868142">.</span><span class="ident" id="2868143">in</span>&nbsp;<span class="op" id="2868146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868150">typ</span>&nbsp;<span class="op" id="2868154">:=</span>&nbsp;<span class="ident" id="2868157">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868163">off</span>&nbsp;<span class="op" id="2868167">+=</span>&nbsp;<span class="op" id="2868170">-</span><span class="ident" id="2868171">off</span>&nbsp;<span class="op" id="2868175">&amp;</span>&nbsp;<span class="builtintype" id="2868177">uintptr</span><span class="op" id="2868184">(</span><span class="ident" id="2868185">typ</span><span class="op" id="2868188">.</span><span class="ident" id="2868189">align</span><span class="op" id="2868194">-</span><span class="num" id="2868195">1</span><span class="op" id="2868196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868200">addr</span>&nbsp;<span class="op" id="2868205">:=</span>&nbsp;<span class="ident" id="2868208">unsafe</span><span class="op" id="2868214">.</span><span class="ident" id="2868215">Pointer</span><span class="op" id="2868222">(</span><span class="builtintype" id="2868223">uintptr</span><span class="op" id="2868230">(</span><span class="ident" id="2868231">ptr</span><span class="op" id="2868234">)</span>&nbsp;<span class="op" id="2868236">+</span>&nbsp;<span class="ident" id="2868238">off</span><span class="op" id="2868241">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868245">v</span>&nbsp;<span class="op" id="2868247">:=</span>&nbsp;<span class="ident" id="2868250">Value</span><span class="op" id="2868255">{</span><span class="ident" id="2868256">typ</span><span class="op" id="2868259">,</span>&nbsp;<span class="ident" id="2868261">nil</span><span class="op" id="2868264">,</span>&nbsp;<span class="ident" id="2868266">flag</span><span class="op" id="2868270">(</span><span class="ident" id="2868271">typ</span><span class="op" id="2868274">.</span><span class="ident" id="2868275">Kind</span><span class="op" id="2868279">(</span><span class="op" id="2868280">)</span><span class="op" id="2868281">)</span><span class="op" id="2868282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868286">if</span>&nbsp;<span class="ident" id="2868289">ifaceIndir</span><span class="op" id="2868299">(</span><span class="ident" id="2868300">typ</span><span class="op" id="2868303">)</span>&nbsp;<span class="op" id="2868305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868310">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868359">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868423">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868485">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868552">v</span><span class="op" id="2868553">.</span><span class="ident" id="2868554">ptr</span>&nbsp;<span class="op" id="2868558">=</span>&nbsp;<span class="ident" id="2868560">unsafe_New</span><span class="op" id="2868570">(</span><span class="ident" id="2868571">typ</span><span class="op" id="2868574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868579">memmove</span><span class="op" id="2868586">(</span><span class="ident" id="2868587">v</span><span class="op" id="2868588">.</span><span class="ident" id="2868589">ptr</span><span class="op" id="2868592">,</span>&nbsp;<span class="ident" id="2868594">addr</span><span class="op" id="2868598">,</span>&nbsp;<span class="ident" id="2868600">typ</span><span class="op" id="2868603">.</span><span class="ident" id="2868604">size</span><span class="op" id="2868608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868613">v</span><span class="op" id="2868614">.</span><span class="ident" id="2868615">flag</span>&nbsp;<span class="op" id="2868620">|=</span>&nbsp;<span class="ident" id="2868623">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868635">}</span>&nbsp;<span class="keyword" id="2868637">else</span>&nbsp;<span class="op" id="2868642">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868647">v</span><span class="op" id="2868648">.</span><span class="ident" id="2868649">ptr</span>&nbsp;<span class="op" id="2868653">=</span>&nbsp;<span class="op" id="2868655">*</span><span class="op" id="2868656">(</span><span class="op" id="2868657">*</span><span class="ident" id="2868658">unsafe</span><span class="op" id="2868664">.</span><span class="ident" id="2868665">Pointer</span><span class="op" id="2868672">)</span><span class="op" id="2868673">(</span><span class="ident" id="2868674">addr</span><span class="op" id="2868678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868686">in</span>&nbsp;<span class="op" id="2868689">=</span>&nbsp;<span class="builtinfunc" id="2868691">append</span><span class="op" id="2868697">(</span><span class="ident" id="2868698">in</span><span class="op" id="2868700">,</span>&nbsp;<span class="ident" id="2868702">v</span><span class="op" id="2868703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868707">off</span>&nbsp;<span class="op" id="2868711">+=</span>&nbsp;<span class="ident" id="2868714">typ</span><span class="op" id="2868717">.</span><span class="ident" id="2868718">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868724">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868728">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868758">out</span>&nbsp;<span class="op" id="2868762">:=</span>&nbsp;<span class="ident" id="2868765">f</span><span class="op" id="2868766">(</span><span class="ident" id="2868767">in</span><span class="op" id="2868769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868772">if</span>&nbsp;<span class="builtinfunc" id="2868775">len</span><span class="op" id="2868778">(</span><span class="ident" id="2868779">out</span><span class="op" id="2868782">)</span>&nbsp;<span class="op" id="2868784">!=</span>&nbsp;<span class="builtinfunc" id="2868787">len</span><span class="op" id="2868790">(</span><span class="ident" id="2868791">ftyp</span><span class="op" id="2868795">.</span><span class="ident" id="2868796">out</span><span class="op" id="2868799">)</span>&nbsp;<span class="op" id="2868801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2868805">panic</span><span class="op" id="2868810">(</span><span class="string" id="2868811">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2868874">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2868877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2868881">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868924">if</span>&nbsp;<span class="builtinfunc" id="2868927">len</span><span class="op" id="2868930">(</span><span class="ident" id="2868931">ftyp</span><span class="op" id="2868935">.</span><span class="ident" id="2868936">out</span><span class="op" id="2868939">)</span>&nbsp;<span class="op" id="2868941">&gt;</span>&nbsp;<span class="num" id="2868943">0</span>&nbsp;<span class="op" id="2868945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2868949">off</span>&nbsp;<span class="op" id="2868953">+=</span>&nbsp;<span class="op" id="2868956">-</span><span class="ident" id="2868957">off</span>&nbsp;<span class="op" id="2868961">&amp;</span>&nbsp;<span class="op" id="2868963">(</span><span class="ident" id="2868964">ptrSize</span>&nbsp;<span class="op" id="2868972">-</span>&nbsp;<span class="num" id="2868974">1</span><span class="op" id="2868975">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2868979">if</span>&nbsp;<span class="ident" id="2868982">runtime</span><span class="op" id="2868989">.</span><span class="ident" id="2868990">GOARCH</span>&nbsp;<span class="op" id="2868997">==</span>&nbsp;<span class="string" id="2869000">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2869011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869016">off</span>&nbsp;<span class="op" id="2869020">=</span>&nbsp;<span class="ident" id="2869022">align</span><span class="op" id="2869027">(</span><span class="ident" id="2869028">off</span><span class="op" id="2869031">,</span>&nbsp;<span class="num" id="2869033">8</span><span class="op" id="2869034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869042">for</span>&nbsp;<span class="ident" id="2869046">i</span><span class="op" id="2869047">,</span>&nbsp;<span class="ident" id="2869049">arg</span>&nbsp;<span class="op" id="2869053">:=</span>&nbsp;<span class="keyword" id="2869056">range</span>&nbsp;<span class="ident" id="2869062">ftyp</span><span class="op" id="2869066">.</span><span class="ident" id="2869067">out</span>&nbsp;<span class="op" id="2869071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869076">typ</span>&nbsp;<span class="op" id="2869080">:=</span>&nbsp;<span class="ident" id="2869083">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869090">v</span>&nbsp;<span class="op" id="2869092">:=</span>&nbsp;<span class="ident" id="2869095">out</span><span class="op" id="2869098">[</span><span class="ident" id="2869099">i</span><span class="op" id="2869100">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869105">if</span>&nbsp;<span class="ident" id="2869108">v</span><span class="op" id="2869109">.</span><span class="ident" id="2869110">typ</span>&nbsp;<span class="op" id="2869114">!=</span>&nbsp;<span class="ident" id="2869117">typ</span>&nbsp;<span class="op" id="2869121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2869127">panic</span><span class="op" id="2869132">(</span><span class="string" id="2869133">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2869180">+</span>&nbsp;<span class="ident" id="2869182">funcName</span><span class="op" id="2869190">(</span><span class="ident" id="2869191">f</span><span class="op" id="2869192">)</span>&nbsp;<span class="op" id="2869194">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2869201">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2869231">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869238">out</span><span class="op" id="2869241">[</span><span class="ident" id="2869242">i</span><span class="op" id="2869243">]</span><span class="op" id="2869244">.</span><span class="ident" id="2869245">typ</span><span class="op" id="2869248">.</span><span class="ident" id="2869249">String</span><span class="op" id="2869255">(</span><span class="op" id="2869256">)</span>&nbsp;<span class="op" id="2869258">+</span>&nbsp;<span class="string" id="2869260">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2869268">+</span>&nbsp;<span class="ident" id="2869270">typ</span><span class="op" id="2869273">.</span><span class="ident" id="2869274">String</span><span class="op" id="2869280">(</span><span class="op" id="2869281">)</span><span class="op" id="2869282">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869292">if</span>&nbsp;<span class="ident" id="2869295">v</span><span class="op" id="2869296">.</span><span class="ident" id="2869297">flag</span><span class="op" id="2869301">&amp;</span><span class="ident" id="2869302">flagRO</span>&nbsp;<span class="op" id="2869309">!=</span>&nbsp;<span class="num" id="2869312">0</span>&nbsp;<span class="op" id="2869314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2869320">panic</span><span class="op" id="2869325">(</span><span class="string" id="2869326">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2869373">+</span>&nbsp;<span class="ident" id="2869375">funcName</span><span class="op" id="2869383">(</span><span class="ident" id="2869384">f</span><span class="op" id="2869385">)</span>&nbsp;<span class="op" id="2869387">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2869394">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2869442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869447">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869452">off</span>&nbsp;<span class="op" id="2869456">+=</span>&nbsp;<span class="op" id="2869459">-</span><span class="ident" id="2869460">off</span>&nbsp;<span class="op" id="2869464">&amp;</span>&nbsp;<span class="builtintype" id="2869466">uintptr</span><span class="op" id="2869473">(</span><span class="ident" id="2869474">typ</span><span class="op" id="2869477">.</span><span class="ident" id="2869478">align</span><span class="op" id="2869483">-</span><span class="num" id="2869484">1</span><span class="op" id="2869485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869490">addr</span>&nbsp;<span class="op" id="2869495">:=</span>&nbsp;<span class="ident" id="2869498">unsafe</span><span class="op" id="2869504">.</span><span class="ident" id="2869505">Pointer</span><span class="op" id="2869512">(</span><span class="builtintype" id="2869513">uintptr</span><span class="op" id="2869520">(</span><span class="ident" id="2869521">ptr</span><span class="op" id="2869524">)</span>&nbsp;<span class="op" id="2869526">+</span>&nbsp;<span class="ident" id="2869528">off</span><span class="op" id="2869531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2869536">if</span>&nbsp;<span class="ident" id="2869539">v</span><span class="op" id="2869540">.</span><span class="ident" id="2869541">flag</span><span class="op" id="2869545">&amp;</span><span class="ident" id="2869546">flagIndir</span>&nbsp;<span class="op" id="2869556">!=</span>&nbsp;<span class="num" id="2869559">0</span>&nbsp;<span class="op" id="2869561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869567">memmove</span><span class="op" id="2869574">(</span><span class="ident" id="2869575">addr</span><span class="op" id="2869579">,</span>&nbsp;<span class="ident" id="2869581">v</span><span class="op" id="2869582">.</span><span class="ident" id="2869583">ptr</span><span class="op" id="2869586">,</span>&nbsp;<span class="ident" id="2869588">typ</span><span class="op" id="2869591">.</span><span class="ident" id="2869592">size</span><span class="op" id="2869596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869601">}</span>&nbsp;<span class="keyword" id="2869603">else</span>&nbsp;<span class="op" id="2869608">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869614">*</span><span class="op" id="2869615">(</span><span class="op" id="2869616">*</span><span class="ident" id="2869617">unsafe</span><span class="op" id="2869623">.</span><span class="ident" id="2869624">Pointer</span><span class="op" id="2869631">)</span><span class="op" id="2869632">(</span><span class="ident" id="2869633">addr</span><span class="op" id="2869637">)</span>&nbsp;<span class="op" id="2869639">=</span>&nbsp;<span class="ident" id="2869641">v</span><span class="op" id="2869642">.</span><span class="ident" id="2869643">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2869655">off</span>&nbsp;<span class="op" id="2869659">+=</span>&nbsp;<span class="ident" id="2869662">typ</span><span class="op" id="2869665">.</span><span class="ident" id="2869666">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2869676">}</span><br>
<span class="lineno">515</span><span class="op" id="2869678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2869681">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2869738">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2869793">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2869852">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2869868">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2869938">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2870016">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2870072">func</span>&nbsp;<span class="ident" id="2870077">methodReceiver</span><span class="op" id="2870091">(</span><span class="ident" id="2870092">op</span>&nbsp;<span class="builtintype" id="2870095">string</span><span class="op" id="2870101">,</span>&nbsp;<span class="ident" id="2870103">v</span>&nbsp;<span class="ident" id="2870105">Value</span><span class="op" id="2870110">,</span>&nbsp;<span class="ident" id="2870112">methodIndex</span>&nbsp;<span class="builtintype" id="2870124">int</span><span class="op" id="2870127">)</span>&nbsp;<span class="op" id="2870129">(</span><span class="ident" id="2870130">rcvrtype</span><span class="op" id="2870138">,</span>&nbsp;<span class="ident" id="2870140">t</span>&nbsp;<span class="op" id="2870142">*</span><span class="ident" id="2870143">rtype</span><span class="op" id="2870148">,</span>&nbsp;<span class="ident" id="2870150">fn</span>&nbsp;<span class="ident" id="2870153">unsafe</span><span class="op" id="2870159">.</span><span class="ident" id="2870160">Pointer</span><span class="op" id="2870167">)</span>&nbsp;<span class="op" id="2870169">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870172">i</span>&nbsp;<span class="op" id="2870174">:=</span>&nbsp;<span class="ident" id="2870177">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870190">if</span>&nbsp;<span class="ident" id="2870193">v</span><span class="op" id="2870194">.</span><span class="ident" id="2870195">typ</span><span class="op" id="2870198">.</span><span class="ident" id="2870199">Kind</span><span class="op" id="2870203">(</span><span class="op" id="2870204">)</span>&nbsp;<span class="op" id="2870206">==</span>&nbsp;<span class="ident" id="2870209">Interface</span>&nbsp;<span class="op" id="2870219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870223">tt</span>&nbsp;<span class="op" id="2870226">:=</span>&nbsp;<span class="op" id="2870229">(</span><span class="op" id="2870230">*</span><span class="ident" id="2870231">interfaceType</span><span class="op" id="2870244">)</span><span class="op" id="2870245">(</span><span class="ident" id="2870246">unsafe</span><span class="op" id="2870252">.</span><span class="ident" id="2870253">Pointer</span><span class="op" id="2870260">(</span><span class="ident" id="2870261">v</span><span class="op" id="2870262">.</span><span class="ident" id="2870263">typ</span><span class="op" id="2870266">)</span><span class="op" id="2870267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870271">if</span>&nbsp;<span class="builtintype" id="2870274">uint</span><span class="op" id="2870278">(</span><span class="ident" id="2870279">i</span><span class="op" id="2870280">)</span>&nbsp;<span class="op" id="2870282">&gt;=</span>&nbsp;<span class="builtintype" id="2870285">uint</span><span class="op" id="2870289">(</span><span class="builtinfunc" id="2870290">len</span><span class="op" id="2870293">(</span><span class="ident" id="2870294">tt</span><span class="op" id="2870296">.</span><span class="ident" id="2870297">methods</span><span class="op" id="2870304">)</span><span class="op" id="2870305">)</span>&nbsp;<span class="op" id="2870307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870312">panic</span><span class="op" id="2870317">(</span><span class="string" id="2870318">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2870365">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870373">m</span>&nbsp;<span class="op" id="2870375">:=</span>&nbsp;<span class="op" id="2870378">&amp;</span><span class="ident" id="2870379">tt</span><span class="op" id="2870381">.</span><span class="ident" id="2870382">methods</span><span class="op" id="2870389">[</span><span class="ident" id="2870390">i</span><span class="op" id="2870391">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870395">if</span>&nbsp;<span class="ident" id="2870398">m</span><span class="op" id="2870399">.</span><span class="ident" id="2870400">pkgPath</span>&nbsp;<span class="op" id="2870408">!=</span>&nbsp;<span class="ident" id="2870411">nil</span>&nbsp;<span class="op" id="2870415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870420">panic</span><span class="op" id="2870425">(</span><span class="string" id="2870426">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2870438">+</span>&nbsp;<span class="ident" id="2870440">op</span>&nbsp;<span class="op" id="2870443">+</span>&nbsp;<span class="string" id="2870445">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2870468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870472">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870476">iface</span>&nbsp;<span class="op" id="2870482">:=</span>&nbsp;<span class="op" id="2870485">(</span><span class="op" id="2870486">*</span><span class="ident" id="2870487">nonEmptyInterface</span><span class="op" id="2870504">)</span><span class="op" id="2870505">(</span><span class="ident" id="2870506">v</span><span class="op" id="2870507">.</span><span class="ident" id="2870508">ptr</span><span class="op" id="2870511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870515">if</span>&nbsp;<span class="ident" id="2870518">iface</span><span class="op" id="2870523">.</span><span class="ident" id="2870524">itab</span>&nbsp;<span class="op" id="2870529">==</span>&nbsp;<span class="ident" id="2870532">nil</span>&nbsp;<span class="op" id="2870536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870541">panic</span><span class="op" id="2870546">(</span><span class="string" id="2870547">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2870559">+</span>&nbsp;<span class="ident" id="2870561">op</span>&nbsp;<span class="op" id="2870564">+</span>&nbsp;<span class="string" id="2870566">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2870601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870609">rcvrtype</span>&nbsp;<span class="op" id="2870618">=</span>&nbsp;<span class="ident" id="2870620">iface</span><span class="op" id="2870625">.</span><span class="ident" id="2870626">itab</span><span class="op" id="2870630">.</span><span class="ident" id="2870631">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870637">fn</span>&nbsp;<span class="op" id="2870640">=</span>&nbsp;<span class="ident" id="2870642">unsafe</span><span class="op" id="2870648">.</span><span class="ident" id="2870649">Pointer</span><span class="op" id="2870656">(</span><span class="op" id="2870657">&amp;</span><span class="ident" id="2870658">iface</span><span class="op" id="2870663">.</span><span class="ident" id="2870664">itab</span><span class="op" id="2870668">.</span><span class="ident" id="2870669">fun</span><span class="op" id="2870672">[</span><span class="ident" id="2870673">i</span><span class="op" id="2870674">]</span><span class="op" id="2870675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870679">t</span>&nbsp;<span class="op" id="2870681">=</span>&nbsp;<span class="ident" id="2870683">m</span><span class="op" id="2870684">.</span><span class="ident" id="2870685">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870690">}</span>&nbsp;<span class="keyword" id="2870692">else</span>&nbsp;<span class="op" id="2870697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870701">rcvrtype</span>&nbsp;<span class="op" id="2870710">=</span>&nbsp;<span class="ident" id="2870712">v</span><span class="op" id="2870713">.</span><span class="ident" id="2870714">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870720">ut</span>&nbsp;<span class="op" id="2870723">:=</span>&nbsp;<span class="ident" id="2870726">v</span><span class="op" id="2870727">.</span><span class="ident" id="2870728">typ</span><span class="op" id="2870731">.</span><span class="ident" id="2870732">uncommon</span><span class="op" id="2870740">(</span><span class="op" id="2870741">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870745">if</span>&nbsp;<span class="ident" id="2870748">ut</span>&nbsp;<span class="op" id="2870751">==</span>&nbsp;<span class="ident" id="2870754">nil</span>&nbsp;<span class="op" id="2870758">||</span>&nbsp;<span class="builtintype" id="2870761">uint</span><span class="op" id="2870765">(</span><span class="ident" id="2870766">i</span><span class="op" id="2870767">)</span>&nbsp;<span class="op" id="2870769">&gt;=</span>&nbsp;<span class="builtintype" id="2870772">uint</span><span class="op" id="2870776">(</span><span class="builtinfunc" id="2870777">len</span><span class="op" id="2870780">(</span><span class="ident" id="2870781">ut</span><span class="op" id="2870783">.</span><span class="ident" id="2870784">methods</span><span class="op" id="2870791">)</span><span class="op" id="2870792">)</span>&nbsp;<span class="op" id="2870794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870799">panic</span><span class="op" id="2870804">(</span><span class="string" id="2870805">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2870852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870860">m</span>&nbsp;<span class="op" id="2870862">:=</span>&nbsp;<span class="op" id="2870865">&amp;</span><span class="ident" id="2870866">ut</span><span class="op" id="2870868">.</span><span class="ident" id="2870869">methods</span><span class="op" id="2870876">[</span><span class="ident" id="2870877">i</span><span class="op" id="2870878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2870882">if</span>&nbsp;<span class="ident" id="2870885">m</span><span class="op" id="2870886">.</span><span class="ident" id="2870887">pkgPath</span>&nbsp;<span class="op" id="2870895">!=</span>&nbsp;<span class="ident" id="2870898">nil</span>&nbsp;<span class="op" id="2870902">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2870907">panic</span><span class="op" id="2870912">(</span><span class="string" id="2870913">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2870925">+</span>&nbsp;<span class="ident" id="2870927">op</span>&nbsp;<span class="op" id="2870930">+</span>&nbsp;<span class="string" id="2870932">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2870955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2870959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870963">fn</span>&nbsp;<span class="op" id="2870966">=</span>&nbsp;<span class="ident" id="2870968">unsafe</span><span class="op" id="2870974">.</span><span class="ident" id="2870975">Pointer</span><span class="op" id="2870982">(</span><span class="op" id="2870983">&amp;</span><span class="ident" id="2870984">m</span><span class="op" id="2870985">.</span><span class="ident" id="2870986">ifn</span><span class="op" id="2870989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2870993">t</span>&nbsp;<span class="op" id="2870995">=</span>&nbsp;<span class="ident" id="2870997">m</span><span class="op" id="2870998">.</span><span class="ident" id="2870999">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871005">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871008">return</span><br>
<span class="lineno"></span><span class="op" id="2871015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2871018">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2871083">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2871142">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2871197">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2871260">func</span>&nbsp;<span class="ident" id="2871265">storeRcvr</span><span class="op" id="2871274">(</span><span class="ident" id="2871275">v</span>&nbsp;<span class="ident" id="2871277">Value</span><span class="op" id="2871282">,</span>&nbsp;<span class="ident" id="2871284">p</span>&nbsp;<span class="ident" id="2871286">unsafe</span><span class="op" id="2871292">.</span><span class="ident" id="2871293">Pointer</span><span class="op" id="2871300">)</span>&nbsp;<span class="op" id="2871302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2871305">t</span>&nbsp;<span class="op" id="2871307">:=</span>&nbsp;<span class="ident" id="2871310">v</span><span class="op" id="2871311">.</span><span class="ident" id="2871312">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871317">if</span>&nbsp;<span class="ident" id="2871320">t</span><span class="op" id="2871321">.</span><span class="ident" id="2871322">Kind</span><span class="op" id="2871326">(</span><span class="op" id="2871327">)</span>&nbsp;<span class="op" id="2871329">==</span>&nbsp;<span class="ident" id="2871332">Interface</span>&nbsp;<span class="op" id="2871342">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2871346">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2871401">iface</span>&nbsp;<span class="op" id="2871407">:=</span>&nbsp;<span class="op" id="2871410">(</span><span class="op" id="2871411">*</span><span class="ident" id="2871412">nonEmptyInterface</span><span class="op" id="2871429">)</span><span class="op" id="2871430">(</span><span class="ident" id="2871431">v</span><span class="op" id="2871432">.</span><span class="ident" id="2871433">ptr</span><span class="op" id="2871436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871440">*</span><span class="op" id="2871441">(</span><span class="op" id="2871442">*</span><span class="ident" id="2871443">unsafe</span><span class="op" id="2871449">.</span><span class="ident" id="2871450">Pointer</span><span class="op" id="2871457">)</span><span class="op" id="2871458">(</span><span class="ident" id="2871459">p</span><span class="op" id="2871460">)</span>&nbsp;<span class="op" id="2871462">=</span>&nbsp;<span class="ident" id="2871464">unsafe</span><span class="op" id="2871470">.</span><span class="ident" id="2871471">Pointer</span><span class="op" id="2871478">(</span><span class="ident" id="2871479">iface</span><span class="op" id="2871484">.</span><span class="ident" id="2871485">word</span><span class="op" id="2871489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871492">}</span>&nbsp;<span class="keyword" id="2871494">else</span>&nbsp;<span class="keyword" id="2871499">if</span>&nbsp;<span class="ident" id="2871502">v</span><span class="op" id="2871503">.</span><span class="ident" id="2871504">flag</span><span class="op" id="2871508">&amp;</span><span class="ident" id="2871509">flagIndir</span>&nbsp;<span class="op" id="2871519">!=</span>&nbsp;<span class="num" id="2871522">0</span>&nbsp;<span class="op" id="2871524">&amp;&amp;</span>&nbsp;<span class="op" id="2871527">!</span><span class="ident" id="2871528">ifaceIndir</span><span class="op" id="2871538">(</span><span class="ident" id="2871539">t</span><span class="op" id="2871540">)</span>&nbsp;<span class="op" id="2871542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871546">*</span><span class="op" id="2871547">(</span><span class="op" id="2871548">*</span><span class="ident" id="2871549">unsafe</span><span class="op" id="2871555">.</span><span class="ident" id="2871556">Pointer</span><span class="op" id="2871563">)</span><span class="op" id="2871564">(</span><span class="ident" id="2871565">p</span><span class="op" id="2871566">)</span>&nbsp;<span class="op" id="2871568">=</span>&nbsp;<span class="op" id="2871570">*</span><span class="op" id="2871571">(</span><span class="op" id="2871572">*</span><span class="ident" id="2871573">unsafe</span><span class="op" id="2871579">.</span><span class="ident" id="2871580">Pointer</span><span class="op" id="2871587">)</span><span class="op" id="2871588">(</span><span class="ident" id="2871589">v</span><span class="op" id="2871590">.</span><span class="ident" id="2871591">ptr</span><span class="op" id="2871594">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871597">}</span>&nbsp;<span class="keyword" id="2871599">else</span>&nbsp;<span class="op" id="2871604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871608">*</span><span class="op" id="2871609">(</span><span class="op" id="2871610">*</span><span class="ident" id="2871611">unsafe</span><span class="op" id="2871617">.</span><span class="ident" id="2871618">Pointer</span><span class="op" id="2871625">)</span><span class="op" id="2871626">(</span><span class="ident" id="2871627">p</span><span class="op" id="2871628">)</span>&nbsp;<span class="op" id="2871630">=</span>&nbsp;<span class="ident" id="2871632">v</span><span class="op" id="2871633">.</span><span class="ident" id="2871634">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2871639">}</span><br>
<span class="lineno"></span><span class="op" id="2871641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2871644">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2871709">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2871738">func</span>&nbsp;<span class="ident" id="2871743">align</span><span class="op" id="2871748">(</span><span class="ident" id="2871749">x</span><span class="op" id="2871750">,</span>&nbsp;<span class="ident" id="2871752">n</span>&nbsp;<span class="builtintype" id="2871754">uintptr</span><span class="op" id="2871761">)</span>&nbsp;<span class="builtintype" id="2871763">uintptr</span>&nbsp;<span class="op" id="2871771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2871774">return</span>&nbsp;<span class="op" id="2871781">(</span><span class="ident" id="2871782">x</span>&nbsp;<span class="op" id="2871784">+</span>&nbsp;<span class="ident" id="2871786">n</span>&nbsp;<span class="op" id="2871788">-</span>&nbsp;<span class="num" id="2871790">1</span><span class="op" id="2871791">)</span>&nbsp;<span class="op" id="2871793">&amp;^</span>&nbsp;<span class="op" id="2871796">(</span><span class="ident" id="2871797">n</span>&nbsp;<span class="op" id="2871799">-</span>&nbsp;<span class="num" id="2871801">1</span><span class="op" id="2871802">)</span><br>
<span class="lineno"></span><span class="op" id="2871804">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2871807">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2871876">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2871933">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2872006">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2872070">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2872123">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2872204">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2872278">//</span><br>
<span class="lineno"></span><span class="comment" id="2872281">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2872357">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2872429">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2872500">func</span>&nbsp;<span class="ident" id="2872505">callMethod</span><span class="op" id="2872515">(</span><span class="ident" id="2872516">ctxt</span>&nbsp;<span class="op" id="2872521">*</span><span class="ident" id="2872522">methodValue</span><span class="op" id="2872533">,</span>&nbsp;<span class="ident" id="2872535">frame</span>&nbsp;<span class="ident" id="2872541">unsafe</span><span class="op" id="2872547">.</span><span class="ident" id="2872548">Pointer</span><span class="op" id="2872555">)</span>&nbsp;<span class="op" id="2872557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872560">rcvr</span>&nbsp;<span class="op" id="2872565">:=</span>&nbsp;<span class="ident" id="2872568">ctxt</span><span class="op" id="2872572">.</span><span class="ident" id="2872573">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872579">rcvrtype</span><span class="op" id="2872587">,</span>&nbsp;<span class="ident" id="2872589">t</span><span class="op" id="2872590">,</span>&nbsp;<span class="ident" id="2872592">fn</span>&nbsp;<span class="op" id="2872595">:=</span>&nbsp;<span class="ident" id="2872598">methodReceiver</span><span class="op" id="2872612">(</span><span class="string" id="2872613">&#34;call&#34;</span><span class="op" id="2872619">,</span>&nbsp;<span class="ident" id="2872621">rcvr</span><span class="op" id="2872625">,</span>&nbsp;<span class="ident" id="2872627">ctxt</span><span class="op" id="2872631">.</span><span class="ident" id="2872632">method</span><span class="op" id="2872638">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872641">frametype</span><span class="op" id="2872650">,</span>&nbsp;<span class="ident" id="2872652">argSize</span><span class="op" id="2872659">,</span>&nbsp;<span class="ident" id="2872661">retOffset</span><span class="op" id="2872670">,</span>&nbsp;<span class="ident" id="2872672">_</span>&nbsp;<span class="op" id="2872674">:=</span>&nbsp;<span class="ident" id="2872677">funcLayout</span><span class="op" id="2872687">(</span><span class="ident" id="2872688">t</span><span class="op" id="2872689">,</span>&nbsp;<span class="ident" id="2872691">rcvrtype</span><span class="op" id="2872699">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2872703">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872778">args</span>&nbsp;<span class="op" id="2872783">:=</span>&nbsp;<span class="ident" id="2872786">unsafe_New</span><span class="op" id="2872796">(</span><span class="ident" id="2872797">frametype</span><span class="op" id="2872806">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2872810">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872849">storeRcvr</span><span class="op" id="2872858">(</span><span class="ident" id="2872859">rcvr</span><span class="op" id="2872863">,</span>&nbsp;<span class="ident" id="2872865">args</span><span class="op" id="2872869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872872">memmove</span><span class="op" id="2872879">(</span><span class="ident" id="2872880">unsafe</span><span class="op" id="2872886">.</span><span class="ident" id="2872887">Pointer</span><span class="op" id="2872894">(</span><span class="builtintype" id="2872895">uintptr</span><span class="op" id="2872902">(</span><span class="ident" id="2872903">args</span><span class="op" id="2872907">)</span><span class="op" id="2872908">+</span><span class="ident" id="2872909">ptrSize</span><span class="op" id="2872916">)</span><span class="op" id="2872917">,</span>&nbsp;<span class="ident" id="2872919">frame</span><span class="op" id="2872924">,</span>&nbsp;<span class="ident" id="2872926">argSize</span><span class="op" id="2872933">-</span><span class="ident" id="2872934">ptrSize</span><span class="op" id="2872941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2872945">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2872955">call</span><span class="op" id="2872959">(</span><span class="ident" id="2872960">fn</span><span class="op" id="2872962">,</span>&nbsp;<span class="ident" id="2872964">args</span><span class="op" id="2872968">,</span>&nbsp;<span class="builtintype" id="2872970">uint32</span><span class="op" id="2872976">(</span><span class="ident" id="2872977">frametype</span><span class="op" id="2872986">.</span><span class="ident" id="2872987">size</span><span class="op" id="2872991">)</span><span class="op" id="2872992">,</span>&nbsp;<span class="builtintype" id="2872994">uint32</span><span class="op" id="2873000">(</span><span class="ident" id="2873001">retOffset</span><span class="op" id="2873010">)</span><span class="op" id="2873011">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873015">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873083">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873155">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873226">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2873242">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873302">callerRetOffset</span>&nbsp;<span class="op" id="2873318">:=</span>&nbsp;<span class="ident" id="2873321">retOffset</span>&nbsp;<span class="op" id="2873331">-</span>&nbsp;<span class="ident" id="2873333">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873342">if</span>&nbsp;<span class="ident" id="2873345">runtime</span><span class="op" id="2873352">.</span><span class="ident" id="2873353">GOARCH</span>&nbsp;<span class="op" id="2873360">==</span>&nbsp;<span class="string" id="2873363">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2873374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873378">callerRetOffset</span>&nbsp;<span class="op" id="2873394">=</span>&nbsp;<span class="ident" id="2873396">align</span><span class="op" id="2873401">(</span><span class="ident" id="2873402">argSize</span><span class="op" id="2873409">-</span><span class="ident" id="2873410">ptrSize</span><span class="op" id="2873417">,</span>&nbsp;<span class="num" id="2873419">8</span><span class="op" id="2873420">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2873423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873426">memmove</span><span class="op" id="2873433">(</span><span class="ident" id="2873434">unsafe</span><span class="op" id="2873440">.</span><span class="ident" id="2873441">Pointer</span><span class="op" id="2873448">(</span><span class="builtintype" id="2873449">uintptr</span><span class="op" id="2873456">(</span><span class="ident" id="2873457">frame</span><span class="op" id="2873462">)</span><span class="op" id="2873463">+</span><span class="ident" id="2873464">callerRetOffset</span><span class="op" id="2873479">)</span><span class="op" id="2873480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873484">unsafe</span><span class="op" id="2873490">.</span><span class="ident" id="2873491">Pointer</span><span class="op" id="2873498">(</span><span class="builtintype" id="2873499">uintptr</span><span class="op" id="2873506">(</span><span class="ident" id="2873507">args</span><span class="op" id="2873511">)</span><span class="op" id="2873512">+</span><span class="ident" id="2873513">retOffset</span><span class="op" id="2873522">)</span><span class="op" id="2873523">,</span>&nbsp;<span class="ident" id="2873525">frametype</span><span class="op" id="2873534">.</span><span class="ident" id="2873535">size</span><span class="op" id="2873539">-</span><span class="ident" id="2873540">retOffset</span><span class="op" id="2873549">)</span><br>
<span class="lineno"></span><span class="op" id="2873551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2873554">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2873616">func</span>&nbsp;<span class="ident" id="2873621">funcName</span><span class="op" id="2873629">(</span><span class="ident" id="2873630">f</span>&nbsp;<span class="keyword" id="2873632">func</span><span class="op" id="2873636">(</span><span class="op" id="2873637">[</span><span class="op" id="2873638">]</span><span class="ident" id="2873639">Value</span><span class="op" id="2873644">)</span>&nbsp;<span class="op" id="2873646">[</span><span class="op" id="2873647">]</span><span class="ident" id="2873648">Value</span><span class="op" id="2873653">)</span>&nbsp;<span class="builtintype" id="2873655">string</span>&nbsp;<span class="op" id="2873662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873665">pc</span>&nbsp;<span class="op" id="2873668">:=</span>&nbsp;<span class="op" id="2873671">*</span><span class="op" id="2873672">(</span><span class="op" id="2873673">*</span><span class="builtintype" id="2873674">uintptr</span><span class="op" id="2873681">)</span><span class="op" id="2873682">(</span><span class="ident" id="2873683">unsafe</span><span class="op" id="2873689">.</span><span class="ident" id="2873690">Pointer</span><span class="op" id="2873697">(</span><span class="op" id="2873698">&amp;</span><span class="ident" id="2873699">f</span><span class="op" id="2873700">)</span><span class="op" id="2873701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873704">rf</span>&nbsp;<span class="op" id="2873707">:=</span>&nbsp;<span class="ident" id="2873710">runtime</span><span class="op" id="2873717">.</span><span class="ident" id="2873718">FuncForPC</span><span class="op" id="2873727">(</span><span class="ident" id="2873728">pc</span><span class="op" id="2873730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873733">if</span>&nbsp;<span class="ident" id="2873736">rf</span>&nbsp;<span class="op" id="2873739">!=</span>&nbsp;<span class="ident" id="2873742">nil</span>&nbsp;<span class="op" id="2873746">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873750">return</span>&nbsp;<span class="ident" id="2873757">rf</span><span class="op" id="2873759">.</span><span class="ident" id="2873760">Name</span><span class="op" id="2873764">(</span><span class="op" id="2873765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2873768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873771">return</span>&nbsp;<span class="string" id="2873778">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2873788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2873791">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2873820">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2873875">func</span>&nbsp;<span class="op" id="2873880">(</span><span class="ident" id="2873881">v</span>&nbsp;<span class="ident" id="2873883">Value</span><span class="op" id="2873888">)</span>&nbsp;<span class="ident" id="2873890">Cap</span><span class="op" id="2873893">(</span><span class="op" id="2873894">)</span>&nbsp;<span class="builtintype" id="2873896">int</span>&nbsp;<span class="op" id="2873900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2873903">k</span>&nbsp;<span class="op" id="2873905">:=</span>&nbsp;<span class="ident" id="2873908">v</span><span class="op" id="2873909">.</span><span class="ident" id="2873910">kind</span><span class="op" id="2873914">(</span><span class="op" id="2873915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873918">switch</span>&nbsp;<span class="ident" id="2873925">k</span>&nbsp;<span class="op" id="2873927">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873930">case</span>&nbsp;<span class="ident" id="2873935">Array</span><span class="op" id="2873940">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873944">return</span>&nbsp;<span class="ident" id="2873951">v</span><span class="op" id="2873952">.</span><span class="ident" id="2873953">typ</span><span class="op" id="2873956">.</span><span class="ident" id="2873957">Len</span><span class="op" id="2873960">(</span><span class="op" id="2873961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873964">case</span>&nbsp;<span class="ident" id="2873969">Chan</span><span class="op" id="2873973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2873977">return</span>&nbsp;<span class="builtintype" id="2873984">int</span><span class="op" id="2873987">(</span><span class="ident" id="2873988">chancap</span><span class="op" id="2873995">(</span><span class="ident" id="2873996">v</span><span class="op" id="2873997">.</span><span class="ident" id="2873998">pointer</span><span class="op" id="2874005">(</span><span class="op" id="2874006">)</span><span class="op" id="2874007">)</span><span class="op" id="2874008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874011">case</span>&nbsp;<span class="ident" id="2874016">Slice</span><span class="op" id="2874021">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2874025">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874084">return</span>&nbsp;<span class="op" id="2874091">(</span><span class="op" id="2874092">*</span><span class="ident" id="2874093">sliceHeader</span><span class="op" id="2874104">)</span><span class="op" id="2874105">(</span><span class="ident" id="2874106">v</span><span class="op" id="2874107">.</span><span class="ident" id="2874108">ptr</span><span class="op" id="2874111">)</span><span class="op" id="2874112">.</span><span class="ident" id="2874113">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874121">panic</span><span class="op" id="2874126">(</span><span class="op" id="2874127">&amp;</span><span class="ident" id="2874128">ValueError</span><span class="op" id="2874138">{</span><span class="string" id="2874139">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2874158">,</span>&nbsp;<span class="ident" id="2874160">v</span><span class="op" id="2874161">.</span><span class="ident" id="2874162">kind</span><span class="op" id="2874166">(</span><span class="op" id="2874167">)</span><span class="op" id="2874168">}</span><span class="op" id="2874169">)</span><br>
<span class="lineno"></span><span class="op" id="2874171">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2874174">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2874205">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2874243">func</span>&nbsp;<span class="op" id="2874248">(</span><span class="ident" id="2874249">v</span>&nbsp;<span class="ident" id="2874251">Value</span><span class="op" id="2874256">)</span>&nbsp;<span class="ident" id="2874258">Close</span><span class="op" id="2874263">(</span><span class="op" id="2874264">)</span>&nbsp;<span class="op" id="2874266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874269">v</span><span class="op" id="2874270">.</span><span class="ident" id="2874271">mustBe</span><span class="op" id="2874277">(</span><span class="ident" id="2874278">Chan</span><span class="op" id="2874282">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874285">v</span><span class="op" id="2874286">.</span><span class="ident" id="2874287">mustBeExported</span><span class="op" id="2874301">(</span><span class="op" id="2874302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874305">chanclose</span><span class="op" id="2874314">(</span><span class="ident" id="2874315">v</span><span class="op" id="2874316">.</span><span class="ident" id="2874317">pointer</span><span class="op" id="2874324">(</span><span class="op" id="2874325">)</span><span class="op" id="2874326">)</span><br>
<span class="lineno"></span><span class="op" id="2874328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2874331">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2874389">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2874445">func</span>&nbsp;<span class="op" id="2874450">(</span><span class="ident" id="2874451">v</span>&nbsp;<span class="ident" id="2874453">Value</span><span class="op" id="2874458">)</span>&nbsp;<span class="ident" id="2874460">Complex</span><span class="op" id="2874467">(</span><span class="op" id="2874468">)</span>&nbsp;<span class="builtintype" id="2874470">complex128</span>&nbsp;<span class="op" id="2874481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874484">k</span>&nbsp;<span class="op" id="2874486">:=</span>&nbsp;<span class="ident" id="2874489">v</span><span class="op" id="2874490">.</span><span class="ident" id="2874491">kind</span><span class="op" id="2874495">(</span><span class="op" id="2874496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874499">switch</span>&nbsp;<span class="ident" id="2874506">k</span>&nbsp;<span class="op" id="2874508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874511">case</span>&nbsp;<span class="ident" id="2874516">Complex64</span><span class="op" id="2874525">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874529">return</span>&nbsp;<span class="builtintype" id="2874536">complex128</span><span class="op" id="2874546">(</span><span class="op" id="2874547">*</span><span class="op" id="2874548">(</span><span class="op" id="2874549">*</span><span class="builtintype" id="2874550">complex64</span><span class="op" id="2874559">)</span><span class="op" id="2874560">(</span><span class="ident" id="2874561">v</span><span class="op" id="2874562">.</span><span class="ident" id="2874563">ptr</span><span class="op" id="2874566">)</span><span class="op" id="2874567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874570">case</span>&nbsp;<span class="ident" id="2874575">Complex128</span><span class="op" id="2874585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874589">return</span>&nbsp;<span class="op" id="2874596">*</span><span class="op" id="2874597">(</span><span class="op" id="2874598">*</span><span class="builtintype" id="2874599">complex128</span><span class="op" id="2874609">)</span><span class="op" id="2874610">(</span><span class="ident" id="2874611">v</span><span class="op" id="2874612">.</span><span class="ident" id="2874613">ptr</span><span class="op" id="2874616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2874619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2874622">panic</span><span class="op" id="2874627">(</span><span class="op" id="2874628">&amp;</span><span class="ident" id="2874629">ValueError</span><span class="op" id="2874639">{</span><span class="string" id="2874640">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2874663">,</span>&nbsp;<span class="ident" id="2874665">v</span><span class="op" id="2874666">.</span><span class="ident" id="2874667">kind</span><span class="op" id="2874671">(</span><span class="op" id="2874672">)</span><span class="op" id="2874673">}</span><span class="op" id="2874674">)</span><br>
<span class="lineno">665</span><span class="op" id="2874676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2874679">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2874735">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2874771">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2874821">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2874863">func</span>&nbsp;<span class="op" id="2874868">(</span><span class="ident" id="2874869">v</span>&nbsp;<span class="ident" id="2874871">Value</span><span class="op" id="2874876">)</span>&nbsp;<span class="ident" id="2874878">Elem</span><span class="op" id="2874882">(</span><span class="op" id="2874883">)</span>&nbsp;<span class="ident" id="2874885">Value</span>&nbsp;<span class="op" id="2874891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874894">k</span>&nbsp;<span class="op" id="2874896">:=</span>&nbsp;<span class="ident" id="2874899">v</span><span class="op" id="2874900">.</span><span class="ident" id="2874901">kind</span><span class="op" id="2874905">(</span><span class="op" id="2874906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874909">switch</span>&nbsp;<span class="ident" id="2874916">k</span>&nbsp;<span class="op" id="2874918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874921">case</span>&nbsp;<span class="ident" id="2874926">Interface</span><span class="op" id="2874935">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874939">var</span>&nbsp;<span class="ident" id="2874943">eface</span>&nbsp;<span class="keyword" id="2874949">interface</span><span class="op" id="2874958">{</span><span class="op" id="2874959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2874963">if</span>&nbsp;<span class="ident" id="2874966">v</span><span class="op" id="2874967">.</span><span class="ident" id="2874968">typ</span><span class="op" id="2874971">.</span><span class="ident" id="2874972">NumMethod</span><span class="op" id="2874981">(</span><span class="op" id="2874982">)</span>&nbsp;<span class="op" id="2874984">==</span>&nbsp;<span class="num" id="2874987">0</span>&nbsp;<span class="op" id="2874989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2874994">eface</span>&nbsp;<span class="op" id="2875000">=</span>&nbsp;<span class="op" id="2875002">*</span><span class="op" id="2875003">(</span><span class="op" id="2875004">*</span><span class="keyword" id="2875005">interface</span><span class="op" id="2875014">{</span><span class="op" id="2875015">}</span><span class="op" id="2875016">)</span><span class="op" id="2875017">(</span><span class="ident" id="2875018">v</span><span class="op" id="2875019">.</span><span class="ident" id="2875020">ptr</span><span class="op" id="2875023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875027">}</span>&nbsp;<span class="keyword" id="2875029">else</span>&nbsp;<span class="op" id="2875034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875039">eface</span>&nbsp;<span class="op" id="2875045">=</span>&nbsp;<span class="op" id="2875047">(</span><span class="keyword" id="2875048">interface</span><span class="op" id="2875057">{</span><span class="op" id="2875058">}</span><span class="op" id="2875059">)</span><span class="op" id="2875060">(</span><span class="op" id="2875061">*</span><span class="op" id="2875062">(</span><span class="op" id="2875063">*</span><span class="keyword" id="2875064">interface</span>&nbsp;<span class="op" id="2875074">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875080">M</span><span class="op" id="2875081">(</span><span class="op" id="2875082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875087">}</span><span class="op" id="2875088">)</span><span class="op" id="2875089">(</span><span class="ident" id="2875090">v</span><span class="op" id="2875091">.</span><span class="ident" id="2875092">ptr</span><span class="op" id="2875095">)</span><span class="op" id="2875096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875104">x</span>&nbsp;<span class="op" id="2875106">:=</span>&nbsp;<span class="ident" id="2875109">unpackEface</span><span class="op" id="2875120">(</span><span class="ident" id="2875121">eface</span><span class="op" id="2875126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875130">if</span>&nbsp;<span class="ident" id="2875133">x</span><span class="op" id="2875134">.</span><span class="ident" id="2875135">flag</span>&nbsp;<span class="op" id="2875140">!=</span>&nbsp;<span class="num" id="2875143">0</span>&nbsp;<span class="op" id="2875145">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875150">x</span><span class="op" id="2875151">.</span><span class="ident" id="2875152">flag</span>&nbsp;<span class="op" id="2875157">|=</span>&nbsp;<span class="ident" id="2875160">v</span><span class="op" id="2875161">.</span><span class="ident" id="2875162">flag</span>&nbsp;<span class="op" id="2875167">&amp;</span>&nbsp;<span class="ident" id="2875169">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875182">return</span>&nbsp;<span class="ident" id="2875189">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875192">case</span>&nbsp;<span class="ident" id="2875197">Ptr</span><span class="op" id="2875200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875204">ptr</span>&nbsp;<span class="op" id="2875208">:=</span>&nbsp;<span class="ident" id="2875211">v</span><span class="op" id="2875212">.</span><span class="ident" id="2875213">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875219">if</span>&nbsp;<span class="ident" id="2875222">v</span><span class="op" id="2875223">.</span><span class="ident" id="2875224">flag</span><span class="op" id="2875228">&amp;</span><span class="ident" id="2875229">flagIndir</span>&nbsp;<span class="op" id="2875239">!=</span>&nbsp;<span class="num" id="2875242">0</span>&nbsp;<span class="op" id="2875244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875249">ptr</span>&nbsp;<span class="op" id="2875253">=</span>&nbsp;<span class="op" id="2875255">*</span><span class="op" id="2875256">(</span><span class="op" id="2875257">*</span><span class="ident" id="2875258">unsafe</span><span class="op" id="2875264">.</span><span class="ident" id="2875265">Pointer</span><span class="op" id="2875272">)</span><span class="op" id="2875273">(</span><span class="ident" id="2875274">ptr</span><span class="op" id="2875277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2875285">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875333">if</span>&nbsp;<span class="ident" id="2875336">ptr</span>&nbsp;<span class="op" id="2875340">==</span>&nbsp;<span class="ident" id="2875343">nil</span>&nbsp;<span class="op" id="2875347">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875352">return</span>&nbsp;<span class="ident" id="2875359">Value</span><span class="op" id="2875364">{</span><span class="op" id="2875365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875373">tt</span>&nbsp;<span class="op" id="2875376">:=</span>&nbsp;<span class="op" id="2875379">(</span><span class="op" id="2875380">*</span><span class="ident" id="2875381">ptrType</span><span class="op" id="2875388">)</span><span class="op" id="2875389">(</span><span class="ident" id="2875390">unsafe</span><span class="op" id="2875396">.</span><span class="ident" id="2875397">Pointer</span><span class="op" id="2875404">(</span><span class="ident" id="2875405">v</span><span class="op" id="2875406">.</span><span class="ident" id="2875407">typ</span><span class="op" id="2875410">)</span><span class="op" id="2875411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875415">typ</span>&nbsp;<span class="op" id="2875419">:=</span>&nbsp;<span class="ident" id="2875422">tt</span><span class="op" id="2875424">.</span><span class="ident" id="2875425">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875432">fl</span>&nbsp;<span class="op" id="2875435">:=</span>&nbsp;<span class="ident" id="2875438">v</span><span class="op" id="2875439">.</span><span class="ident" id="2875440">flag</span><span class="op" id="2875444">&amp;</span><span class="ident" id="2875445">flagRO</span>&nbsp;<span class="op" id="2875452">|</span>&nbsp;<span class="ident" id="2875454">flagIndir</span>&nbsp;<span class="op" id="2875464">|</span>&nbsp;<span class="ident" id="2875466">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875477">fl</span>&nbsp;<span class="op" id="2875480">|=</span>&nbsp;<span class="ident" id="2875483">flag</span><span class="op" id="2875487">(</span><span class="ident" id="2875488">typ</span><span class="op" id="2875491">.</span><span class="ident" id="2875492">Kind</span><span class="op" id="2875496">(</span><span class="op" id="2875497">)</span><span class="op" id="2875498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875502">return</span>&nbsp;<span class="ident" id="2875509">Value</span><span class="op" id="2875514">{</span><span class="ident" id="2875515">typ</span><span class="op" id="2875518">,</span>&nbsp;<span class="ident" id="2875520">ptr</span><span class="op" id="2875523">,</span>&nbsp;<span class="ident" id="2875525">fl</span><span class="op" id="2875527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875533">panic</span><span class="op" id="2875538">(</span><span class="op" id="2875539">&amp;</span><span class="ident" id="2875540">ValueError</span><span class="op" id="2875550">{</span><span class="string" id="2875551">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2875571">,</span>&nbsp;<span class="ident" id="2875573">v</span><span class="op" id="2875574">.</span><span class="ident" id="2875575">kind</span><span class="op" id="2875579">(</span><span class="op" id="2875580">)</span><span class="op" id="2875581">}</span><span class="op" id="2875582">)</span><br>
<span class="lineno"></span><span class="op" id="2875584">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2875587">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2875636">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2875697">func</span>&nbsp;<span class="op" id="2875702">(</span><span class="ident" id="2875703">v</span>&nbsp;<span class="ident" id="2875705">Value</span><span class="op" id="2875710">)</span>&nbsp;<span class="ident" id="2875712">Field</span><span class="op" id="2875717">(</span><span class="ident" id="2875718">i</span>&nbsp;<span class="builtintype" id="2875720">int</span><span class="op" id="2875723">)</span>&nbsp;<span class="ident" id="2875725">Value</span>&nbsp;<span class="op" id="2875731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875734">if</span>&nbsp;<span class="ident" id="2875737">v</span><span class="op" id="2875738">.</span><span class="ident" id="2875739">kind</span><span class="op" id="2875743">(</span><span class="op" id="2875744">)</span>&nbsp;<span class="op" id="2875746">!=</span>&nbsp;<span class="ident" id="2875749">Struct</span>&nbsp;<span class="op" id="2875756">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875760">panic</span><span class="op" id="2875765">(</span><span class="op" id="2875766">&amp;</span><span class="ident" id="2875767">ValueError</span><span class="op" id="2875777">{</span><span class="string" id="2875778">&#34;reflect.Value.Field&#34;</span><span class="op" id="2875799">,</span>&nbsp;<span class="ident" id="2875801">v</span><span class="op" id="2875802">.</span><span class="ident" id="2875803">kind</span><span class="op" id="2875807">(</span><span class="op" id="2875808">)</span><span class="op" id="2875809">}</span><span class="op" id="2875810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875816">tt</span>&nbsp;<span class="op" id="2875819">:=</span>&nbsp;<span class="op" id="2875822">(</span><span class="op" id="2875823">*</span><span class="ident" id="2875824">structType</span><span class="op" id="2875834">)</span><span class="op" id="2875835">(</span><span class="ident" id="2875836">unsafe</span><span class="op" id="2875842">.</span><span class="ident" id="2875843">Pointer</span><span class="op" id="2875850">(</span><span class="ident" id="2875851">v</span><span class="op" id="2875852">.</span><span class="ident" id="2875853">typ</span><span class="op" id="2875856">)</span><span class="op" id="2875857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2875860">if</span>&nbsp;<span class="builtintype" id="2875863">uint</span><span class="op" id="2875867">(</span><span class="ident" id="2875868">i</span><span class="op" id="2875869">)</span>&nbsp;<span class="op" id="2875871">&gt;=</span>&nbsp;<span class="builtintype" id="2875874">uint</span><span class="op" id="2875878">(</span><span class="builtinfunc" id="2875879">len</span><span class="op" id="2875882">(</span><span class="ident" id="2875883">tt</span><span class="op" id="2875885">.</span><span class="ident" id="2875886">fields</span><span class="op" id="2875892">)</span><span class="op" id="2875893">)</span>&nbsp;<span class="op" id="2875895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2875899">panic</span><span class="op" id="2875904">(</span><span class="string" id="2875905">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2875940">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2875943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875946">field</span>&nbsp;<span class="op" id="2875952">:=</span>&nbsp;<span class="op" id="2875955">&amp;</span><span class="ident" id="2875956">tt</span><span class="op" id="2875958">.</span><span class="ident" id="2875959">fields</span><span class="op" id="2875965">[</span><span class="ident" id="2875966">i</span><span class="op" id="2875967">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2875970">typ</span>&nbsp;<span class="op" id="2875974">:=</span>&nbsp;<span class="ident" id="2875977">field</span><span class="op" id="2875982">.</span><span class="ident" id="2875983">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2875989">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876025">fl</span>&nbsp;<span class="op" id="2876028">:=</span>&nbsp;<span class="ident" id="2876031">v</span><span class="op" id="2876032">.</span><span class="ident" id="2876033">flag</span><span class="op" id="2876037">&amp;</span><span class="op" id="2876038">(</span><span class="ident" id="2876039">flagRO</span><span class="op" id="2876045">|</span><span class="ident" id="2876046">flagIndir</span><span class="op" id="2876055">|</span><span class="ident" id="2876056">flagAddr</span><span class="op" id="2876064">)</span>&nbsp;<span class="op" id="2876066">|</span>&nbsp;<span class="ident" id="2876068">flag</span><span class="op" id="2876072">(</span><span class="ident" id="2876073">typ</span><span class="op" id="2876076">.</span><span class="ident" id="2876077">Kind</span><span class="op" id="2876081">(</span><span class="op" id="2876082">)</span><span class="op" id="2876083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876086">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876131">if</span>&nbsp;<span class="ident" id="2876134">field</span><span class="op" id="2876139">.</span><span class="ident" id="2876140">pkgPath</span>&nbsp;<span class="op" id="2876148">!=</span>&nbsp;<span class="ident" id="2876151">nil</span>&nbsp;<span class="op" id="2876155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876159">fl</span>&nbsp;<span class="op" id="2876162">|=</span>&nbsp;<span class="ident" id="2876165">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876173">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876176">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876232">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876297">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876345">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2876403">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876446">ptr</span>&nbsp;<span class="op" id="2876450">:=</span>&nbsp;<span class="ident" id="2876453">unsafe</span><span class="op" id="2876459">.</span><span class="ident" id="2876460">Pointer</span><span class="op" id="2876467">(</span><span class="builtintype" id="2876468">uintptr</span><span class="op" id="2876475">(</span><span class="ident" id="2876476">v</span><span class="op" id="2876477">.</span><span class="ident" id="2876478">ptr</span><span class="op" id="2876481">)</span>&nbsp;<span class="op" id="2876483">+</span>&nbsp;<span class="ident" id="2876485">field</span><span class="op" id="2876490">.</span><span class="ident" id="2876491">offset</span><span class="op" id="2876497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876500">return</span>&nbsp;<span class="ident" id="2876507">Value</span><span class="op" id="2876512">{</span><span class="ident" id="2876513">typ</span><span class="op" id="2876516">,</span>&nbsp;<span class="ident" id="2876518">ptr</span><span class="op" id="2876521">,</span>&nbsp;<span class="ident" id="2876523">fl</span><span class="op" id="2876525">}</span><br>
<span class="lineno"></span><span class="op" id="2876527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2876530">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2876595">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2876635">func</span>&nbsp;<span class="op" id="2876640">(</span><span class="ident" id="2876641">v</span>&nbsp;<span class="ident" id="2876643">Value</span><span class="op" id="2876648">)</span>&nbsp;<span class="ident" id="2876650">FieldByIndex</span><span class="op" id="2876662">(</span><span class="ident" id="2876663">index</span>&nbsp;<span class="op" id="2876669">[</span><span class="op" id="2876670">]</span><span class="builtintype" id="2876671">int</span><span class="op" id="2876674">)</span>&nbsp;<span class="ident" id="2876676">Value</span>&nbsp;<span class="op" id="2876682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876685">if</span>&nbsp;<span class="builtinfunc" id="2876688">len</span><span class="op" id="2876691">(</span><span class="ident" id="2876692">index</span><span class="op" id="2876697">)</span>&nbsp;<span class="op" id="2876699">==</span>&nbsp;<span class="num" id="2876702">1</span>&nbsp;<span class="op" id="2876704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876708">return</span>&nbsp;<span class="ident" id="2876715">v</span><span class="op" id="2876716">.</span><span class="ident" id="2876717">Field</span><span class="op" id="2876722">(</span><span class="ident" id="2876723">index</span><span class="op" id="2876728">[</span><span class="num" id="2876729">0</span><span class="op" id="2876730">]</span><span class="op" id="2876731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876734">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876737">v</span><span class="op" id="2876738">.</span><span class="ident" id="2876739">mustBe</span><span class="op" id="2876745">(</span><span class="ident" id="2876746">Struct</span><span class="op" id="2876752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876755">for</span>&nbsp;<span class="ident" id="2876759">i</span><span class="op" id="2876760">,</span>&nbsp;<span class="ident" id="2876762">x</span>&nbsp;<span class="op" id="2876764">:=</span>&nbsp;<span class="keyword" id="2876767">range</span>&nbsp;<span class="ident" id="2876773">index</span>&nbsp;<span class="op" id="2876779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876783">if</span>&nbsp;<span class="ident" id="2876786">i</span>&nbsp;<span class="op" id="2876788">&gt;</span>&nbsp;<span class="num" id="2876790">0</span>&nbsp;<span class="op" id="2876792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876797">if</span>&nbsp;<span class="ident" id="2876800">v</span><span class="op" id="2876801">.</span><span class="ident" id="2876802">Kind</span><span class="op" id="2876806">(</span><span class="op" id="2876807">)</span>&nbsp;<span class="op" id="2876809">==</span>&nbsp;<span class="ident" id="2876812">Ptr</span>&nbsp;<span class="op" id="2876816">&amp;&amp;</span>&nbsp;<span class="ident" id="2876819">v</span><span class="op" id="2876820">.</span><span class="ident" id="2876821">typ</span><span class="op" id="2876824">.</span><span class="ident" id="2876825">Elem</span><span class="op" id="2876829">(</span><span class="op" id="2876830">)</span><span class="op" id="2876831">.</span><span class="ident" id="2876832">Kind</span><span class="op" id="2876836">(</span><span class="op" id="2876837">)</span>&nbsp;<span class="op" id="2876839">==</span>&nbsp;<span class="ident" id="2876842">Struct</span>&nbsp;<span class="op" id="2876849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876855">if</span>&nbsp;<span class="ident" id="2876858">v</span><span class="op" id="2876859">.</span><span class="ident" id="2876860">IsNil</span><span class="op" id="2876865">(</span><span class="op" id="2876866">)</span>&nbsp;<span class="op" id="2876868">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2876875">panic</span><span class="op" id="2876880">(</span><span class="string" id="2876881">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2876942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876954">v</span>&nbsp;<span class="op" id="2876956">=</span>&nbsp;<span class="ident" id="2876958">v</span><span class="op" id="2876959">.</span><span class="ident" id="2876960">Elem</span><span class="op" id="2876964">(</span><span class="op" id="2876965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876974">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2876978">v</span>&nbsp;<span class="op" id="2876980">=</span>&nbsp;<span class="ident" id="2876982">v</span><span class="op" id="2876983">.</span><span class="ident" id="2876984">Field</span><span class="op" id="2876989">(</span><span class="ident" id="2876990">x</span><span class="op" id="2876991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2876994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2876997">return</span>&nbsp;<span class="ident" id="2877004">v</span><br>
<span class="lineno"></span><span class="op" id="2877006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2877009">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2877070">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2877122">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2877162">func</span>&nbsp;<span class="op" id="2877167">(</span><span class="ident" id="2877168">v</span>&nbsp;<span class="ident" id="2877170">Value</span><span class="op" id="2877175">)</span>&nbsp;<span class="ident" id="2877177">FieldByName</span><span class="op" id="2877188">(</span><span class="ident" id="2877189">name</span>&nbsp;<span class="builtintype" id="2877194">string</span><span class="op" id="2877200">)</span>&nbsp;<span class="ident" id="2877202">Value</span>&nbsp;<span class="op" id="2877208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877211">v</span><span class="op" id="2877212">.</span><span class="ident" id="2877213">mustBe</span><span class="op" id="2877219">(</span><span class="ident" id="2877220">Struct</span><span class="op" id="2877226">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877229">if</span>&nbsp;<span class="ident" id="2877232">f</span><span class="op" id="2877233">,</span>&nbsp;<span class="ident" id="2877235">ok</span>&nbsp;<span class="op" id="2877238">:=</span>&nbsp;<span class="ident" id="2877241">v</span><span class="op" id="2877242">.</span><span class="ident" id="2877243">typ</span><span class="op" id="2877246">.</span><span class="ident" id="2877247">FieldByName</span><span class="op" id="2877258">(</span><span class="ident" id="2877259">name</span><span class="op" id="2877263">)</span><span class="op" id="2877264">;</span>&nbsp;<span class="ident" id="2877266">ok</span>&nbsp;<span class="op" id="2877269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877273">return</span>&nbsp;<span class="ident" id="2877280">v</span><span class="op" id="2877281">.</span><span class="ident" id="2877282">FieldByIndex</span><span class="op" id="2877294">(</span><span class="ident" id="2877295">f</span><span class="op" id="2877296">.</span><span class="ident" id="2877297">Index</span><span class="op" id="2877302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877308">return</span>&nbsp;<span class="ident" id="2877315">Value</span><span class="op" id="2877320">{</span><span class="op" id="2877321">}</span><br>
<span class="lineno"></span><span class="op" id="2877323">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2877326">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2877382">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2877420">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2877460">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2877512">func</span>&nbsp;<span class="op" id="2877517">(</span><span class="ident" id="2877518">v</span>&nbsp;<span class="ident" id="2877520">Value</span><span class="op" id="2877525">)</span>&nbsp;<span class="ident" id="2877527">FieldByNameFunc</span><span class="op" id="2877542">(</span><span class="ident" id="2877543">match</span>&nbsp;<span class="keyword" id="2877549">func</span><span class="op" id="2877553">(</span><span class="builtintype" id="2877554">string</span><span class="op" id="2877560">)</span>&nbsp;<span class="builtintype" id="2877562">bool</span><span class="op" id="2877566">)</span>&nbsp;<span class="ident" id="2877568">Value</span>&nbsp;<span class="op" id="2877574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877577">if</span>&nbsp;<span class="ident" id="2877580">f</span><span class="op" id="2877581">,</span>&nbsp;<span class="ident" id="2877583">ok</span>&nbsp;<span class="op" id="2877586">:=</span>&nbsp;<span class="ident" id="2877589">v</span><span class="op" id="2877590">.</span><span class="ident" id="2877591">typ</span><span class="op" id="2877594">.</span><span class="ident" id="2877595">FieldByNameFunc</span><span class="op" id="2877610">(</span><span class="ident" id="2877611">match</span><span class="op" id="2877616">)</span><span class="op" id="2877617">;</span>&nbsp;<span class="ident" id="2877619">ok</span>&nbsp;<span class="op" id="2877622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877626">return</span>&nbsp;<span class="ident" id="2877633">v</span><span class="op" id="2877634">.</span><span class="ident" id="2877635">FieldByIndex</span><span class="op" id="2877647">(</span><span class="ident" id="2877648">f</span><span class="op" id="2877649">.</span><span class="ident" id="2877650">Index</span><span class="op" id="2877655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877661">return</span>&nbsp;<span class="ident" id="2877668">Value</span><span class="op" id="2877673">{</span><span class="op" id="2877674">}</span><br>
<span class="lineno">775</span><span class="op" id="2877676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2877679">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2877732">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2877783">func</span>&nbsp;<span class="op" id="2877788">(</span><span class="ident" id="2877789">v</span>&nbsp;<span class="ident" id="2877791">Value</span><span class="op" id="2877796">)</span>&nbsp;<span class="ident" id="2877798">Float</span><span class="op" id="2877803">(</span><span class="op" id="2877804">)</span>&nbsp;<span class="builtintype" id="2877806">float64</span>&nbsp;<span class="op" id="2877814">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2877817">k</span>&nbsp;<span class="op" id="2877819">:=</span>&nbsp;<span class="ident" id="2877822">v</span><span class="op" id="2877823">.</span><span class="ident" id="2877824">kind</span><span class="op" id="2877828">(</span><span class="op" id="2877829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877832">switch</span>&nbsp;<span class="ident" id="2877839">k</span>&nbsp;<span class="op" id="2877841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877844">case</span>&nbsp;<span class="ident" id="2877849">Float32</span><span class="op" id="2877856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877860">return</span>&nbsp;<span class="builtintype" id="2877867">float64</span><span class="op" id="2877874">(</span><span class="op" id="2877875">*</span><span class="op" id="2877876">(</span><span class="op" id="2877877">*</span><span class="builtintype" id="2877878">float32</span><span class="op" id="2877885">)</span><span class="op" id="2877886">(</span><span class="ident" id="2877887">v</span><span class="op" id="2877888">.</span><span class="ident" id="2877889">ptr</span><span class="op" id="2877892">)</span><span class="op" id="2877893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877896">case</span>&nbsp;<span class="ident" id="2877901">Float64</span><span class="op" id="2877908">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2877912">return</span>&nbsp;<span class="op" id="2877919">*</span><span class="op" id="2877920">(</span><span class="op" id="2877921">*</span><span class="builtintype" id="2877922">float64</span><span class="op" id="2877929">)</span><span class="op" id="2877930">(</span><span class="ident" id="2877931">v</span><span class="op" id="2877932">.</span><span class="ident" id="2877933">ptr</span><span class="op" id="2877936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2877939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2877942">panic</span><span class="op" id="2877947">(</span><span class="op" id="2877948">&amp;</span><span class="ident" id="2877949">ValueError</span><span class="op" id="2877959">{</span><span class="string" id="2877960">&#34;reflect.Value.Float&#34;</span><span class="op" id="2877981">,</span>&nbsp;<span class="ident" id="2877983">v</span><span class="op" id="2877984">.</span><span class="ident" id="2877985">kind</span><span class="op" id="2877989">(</span><span class="op" id="2877990">)</span><span class="op" id="2877991">}</span><span class="op" id="2877992">)</span><br>
<span class="lineno"></span><span class="op" id="2877994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2877997">var</span>&nbsp;<span class="ident" id="2878001">uint8Type</span>&nbsp;<span class="op" id="2878011">=</span>&nbsp;<span class="ident" id="2878013">TypeOf</span><span class="op" id="2878019">(</span><span class="builtintype" id="2878020">uint8</span><span class="op" id="2878025">(</span><span class="num" id="2878026">0</span><span class="op" id="2878027">)</span><span class="op" id="2878028">)</span><span class="op" id="2878029">.</span><span class="op" id="2878030">(</span><span class="op" id="2878031">*</span><span class="ident" id="2878032">rtype</span><span class="op" id="2878037">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2878040">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2878075">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2878153">func</span>&nbsp;<span class="op" id="2878158">(</span><span class="ident" id="2878159">v</span>&nbsp;<span class="ident" id="2878161">Value</span><span class="op" id="2878166">)</span>&nbsp;<span class="ident" id="2878168">Index</span><span class="op" id="2878173">(</span><span class="ident" id="2878174">i</span>&nbsp;<span class="builtintype" id="2878176">int</span><span class="op" id="2878179">)</span>&nbsp;<span class="ident" id="2878181">Value</span>&nbsp;<span class="op" id="2878187">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878190">switch</span>&nbsp;<span class="ident" id="2878197">v</span><span class="op" id="2878198">.</span><span class="ident" id="2878199">kind</span><span class="op" id="2878203">(</span><span class="op" id="2878204">)</span>&nbsp;<span class="op" id="2878206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878209">case</span>&nbsp;<span class="ident" id="2878214">Array</span><span class="op" id="2878219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878223">tt</span>&nbsp;<span class="op" id="2878226">:=</span>&nbsp;<span class="op" id="2878229">(</span><span class="op" id="2878230">*</span><span class="ident" id="2878231">arrayType</span><span class="op" id="2878240">)</span><span class="op" id="2878241">(</span><span class="ident" id="2878242">unsafe</span><span class="op" id="2878248">.</span><span class="ident" id="2878249">Pointer</span><span class="op" id="2878256">(</span><span class="ident" id="2878257">v</span><span class="op" id="2878258">.</span><span class="ident" id="2878259">typ</span><span class="op" id="2878262">)</span><span class="op" id="2878263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878267">if</span>&nbsp;<span class="builtintype" id="2878270">uint</span><span class="op" id="2878274">(</span><span class="ident" id="2878275">i</span><span class="op" id="2878276">)</span>&nbsp;<span class="op" id="2878278">&gt;=</span>&nbsp;<span class="builtintype" id="2878281">uint</span><span class="op" id="2878285">(</span><span class="ident" id="2878286">tt</span><span class="op" id="2878288">.</span><span class="builtinfunc" id="2878289">len</span><span class="op" id="2878292">)</span>&nbsp;<span class="op" id="2878294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2878299">panic</span><span class="op" id="2878304">(</span><span class="string" id="2878305">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2878340">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2878344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878348">typ</span>&nbsp;<span class="op" id="2878352">:=</span>&nbsp;<span class="ident" id="2878355">tt</span><span class="op" id="2878357">.</span><span class="ident" id="2878358">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878365">offset</span>&nbsp;<span class="op" id="2878372">:=</span>&nbsp;<span class="builtintype" id="2878375">uintptr</span><span class="op" id="2878382">(</span><span class="ident" id="2878383">i</span><span class="op" id="2878384">)</span>&nbsp;<span class="op" id="2878386">*</span>&nbsp;<span class="ident" id="2878388">typ</span><span class="op" id="2878391">.</span><span class="ident" id="2878392">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878400">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878456">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878521">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878570">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878637">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878675">val</span>&nbsp;<span class="op" id="2878679">:=</span>&nbsp;<span class="ident" id="2878682">unsafe</span><span class="op" id="2878688">.</span><span class="ident" id="2878689">Pointer</span><span class="op" id="2878696">(</span><span class="builtintype" id="2878697">uintptr</span><span class="op" id="2878704">(</span><span class="ident" id="2878705">v</span><span class="op" id="2878706">.</span><span class="ident" id="2878707">ptr</span><span class="op" id="2878710">)</span>&nbsp;<span class="op" id="2878712">+</span>&nbsp;<span class="ident" id="2878714">offset</span><span class="op" id="2878720">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878724">fl</span>&nbsp;<span class="op" id="2878727">:=</span>&nbsp;<span class="ident" id="2878730">v</span><span class="op" id="2878731">.</span><span class="ident" id="2878732">flag</span><span class="op" id="2878736">&amp;</span><span class="op" id="2878737">(</span><span class="ident" id="2878738">flagRO</span><span class="op" id="2878744">|</span><span class="ident" id="2878745">flagIndir</span><span class="op" id="2878754">|</span><span class="ident" id="2878755">flagAddr</span><span class="op" id="2878763">)</span>&nbsp;<span class="op" id="2878765">|</span>&nbsp;<span class="ident" id="2878767">flag</span><span class="op" id="2878771">(</span><span class="ident" id="2878772">typ</span><span class="op" id="2878775">.</span><span class="ident" id="2878776">Kind</span><span class="op" id="2878780">(</span><span class="op" id="2878781">)</span><span class="op" id="2878782">)</span>&nbsp;<span class="comment" id="2878784">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878816">return</span>&nbsp;<span class="ident" id="2878823">Value</span><span class="op" id="2878828">{</span><span class="ident" id="2878829">typ</span><span class="op" id="2878832">,</span>&nbsp;<span class="ident" id="2878834">val</span><span class="op" id="2878837">,</span>&nbsp;<span class="ident" id="2878839">fl</span><span class="op" id="2878841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878845">case</span>&nbsp;<span class="ident" id="2878850">Slice</span><span class="op" id="2878855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878859">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2878898">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2878946">s</span>&nbsp;<span class="op" id="2878948">:=</span>&nbsp;<span class="op" id="2878951">(</span><span class="op" id="2878952">*</span><span class="ident" id="2878953">sliceHeader</span><span class="op" id="2878964">)</span><span class="op" id="2878965">(</span><span class="ident" id="2878966">v</span><span class="op" id="2878967">.</span><span class="ident" id="2878968">ptr</span><span class="op" id="2878971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2878975">if</span>&nbsp;<span class="builtintype" id="2878978">uint</span><span class="op" id="2878982">(</span><span class="ident" id="2878983">i</span><span class="op" id="2878984">)</span>&nbsp;<span class="op" id="2878986">&gt;=</span>&nbsp;<span class="builtintype" id="2878989">uint</span><span class="op" id="2878993">(</span><span class="ident" id="2878994">s</span><span class="op" id="2878995">.</span><span class="ident" id="2878996">Len</span><span class="op" id="2878999">)</span>&nbsp;<span class="op" id="2879001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879006">panic</span><span class="op" id="2879011">(</span><span class="string" id="2879012">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2879047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879051">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879055">tt</span>&nbsp;<span class="op" id="2879058">:=</span>&nbsp;<span class="op" id="2879061">(</span><span class="op" id="2879062">*</span><span class="ident" id="2879063">sliceType</span><span class="op" id="2879072">)</span><span class="op" id="2879073">(</span><span class="ident" id="2879074">unsafe</span><span class="op" id="2879080">.</span><span class="ident" id="2879081">Pointer</span><span class="op" id="2879088">(</span><span class="ident" id="2879089">v</span><span class="op" id="2879090">.</span><span class="ident" id="2879091">typ</span><span class="op" id="2879094">)</span><span class="op" id="2879095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879099">typ</span>&nbsp;<span class="op" id="2879103">:=</span>&nbsp;<span class="ident" id="2879106">tt</span><span class="op" id="2879108">.</span><span class="ident" id="2879109">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879116">val</span>&nbsp;<span class="op" id="2879120">:=</span>&nbsp;<span class="ident" id="2879123">unsafe</span><span class="op" id="2879129">.</span><span class="ident" id="2879130">Pointer</span><span class="op" id="2879137">(</span><span class="builtintype" id="2879138">uintptr</span><span class="op" id="2879145">(</span><span class="ident" id="2879146">s</span><span class="op" id="2879147">.</span><span class="ident" id="2879148">Data</span><span class="op" id="2879152">)</span>&nbsp;<span class="op" id="2879154">+</span>&nbsp;<span class="builtintype" id="2879156">uintptr</span><span class="op" id="2879163">(</span><span class="ident" id="2879164">i</span><span class="op" id="2879165">)</span><span class="op" id="2879166">*</span><span class="ident" id="2879167">typ</span><span class="op" id="2879170">.</span><span class="ident" id="2879171">size</span><span class="op" id="2879175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879179">fl</span>&nbsp;<span class="op" id="2879182">:=</span>&nbsp;<span class="ident" id="2879185">flagAddr</span>&nbsp;<span class="op" id="2879194">|</span>&nbsp;<span class="ident" id="2879196">flagIndir</span>&nbsp;<span class="op" id="2879206">|</span>&nbsp;<span class="ident" id="2879208">v</span><span class="op" id="2879209">.</span><span class="ident" id="2879210">flag</span><span class="op" id="2879214">&amp;</span><span class="ident" id="2879215">flagRO</span>&nbsp;<span class="op" id="2879222">|</span>&nbsp;<span class="ident" id="2879224">flag</span><span class="op" id="2879228">(</span><span class="ident" id="2879229">typ</span><span class="op" id="2879232">.</span><span class="ident" id="2879233">Kind</span><span class="op" id="2879237">(</span><span class="op" id="2879238">)</span><span class="op" id="2879239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879243">return</span>&nbsp;<span class="ident" id="2879250">Value</span><span class="op" id="2879255">{</span><span class="ident" id="2879256">typ</span><span class="op" id="2879259">,</span>&nbsp;<span class="ident" id="2879261">val</span><span class="op" id="2879264">,</span>&nbsp;<span class="ident" id="2879266">fl</span><span class="op" id="2879268">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879272">case</span>&nbsp;<span class="ident" id="2879277">String</span><span class="op" id="2879283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879287">s</span>&nbsp;<span class="op" id="2879289">:=</span>&nbsp;<span class="op" id="2879292">(</span><span class="op" id="2879293">*</span><span class="ident" id="2879294">stringHeader</span><span class="op" id="2879306">)</span><span class="op" id="2879307">(</span><span class="ident" id="2879308">v</span><span class="op" id="2879309">.</span><span class="ident" id="2879310">ptr</span><span class="op" id="2879313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879317">if</span>&nbsp;<span class="builtintype" id="2879320">uint</span><span class="op" id="2879324">(</span><span class="ident" id="2879325">i</span><span class="op" id="2879326">)</span>&nbsp;<span class="op" id="2879328">&gt;=</span>&nbsp;<span class="builtintype" id="2879331">uint</span><span class="op" id="2879335">(</span><span class="ident" id="2879336">s</span><span class="op" id="2879337">.</span><span class="ident" id="2879338">Len</span><span class="op" id="2879341">)</span>&nbsp;<span class="op" id="2879343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879348">panic</span><span class="op" id="2879353">(</span><span class="string" id="2879354">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2879390">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879398">p</span>&nbsp;<span class="op" id="2879400">:=</span>&nbsp;<span class="ident" id="2879403">unsafe</span><span class="op" id="2879409">.</span><span class="ident" id="2879410">Pointer</span><span class="op" id="2879417">(</span><span class="builtintype" id="2879418">uintptr</span><span class="op" id="2879425">(</span><span class="ident" id="2879426">s</span><span class="op" id="2879427">.</span><span class="ident" id="2879428">Data</span><span class="op" id="2879432">)</span>&nbsp;<span class="op" id="2879434">+</span>&nbsp;<span class="builtintype" id="2879436">uintptr</span><span class="op" id="2879443">(</span><span class="ident" id="2879444">i</span><span class="op" id="2879445">)</span><span class="op" id="2879446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879450">fl</span>&nbsp;<span class="op" id="2879453">:=</span>&nbsp;<span class="ident" id="2879456">v</span><span class="op" id="2879457">.</span><span class="ident" id="2879458">flag</span><span class="op" id="2879462">&amp;</span><span class="ident" id="2879463">flagRO</span>&nbsp;<span class="op" id="2879470">|</span>&nbsp;<span class="ident" id="2879472">flag</span><span class="op" id="2879476">(</span><span class="ident" id="2879477">Uint8</span><span class="op" id="2879482">)</span>&nbsp;<span class="op" id="2879484">|</span>&nbsp;<span class="ident" id="2879486">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879498">return</span>&nbsp;<span class="ident" id="2879505">Value</span><span class="op" id="2879510">{</span><span class="ident" id="2879511">uint8Type</span><span class="op" id="2879520">,</span>&nbsp;<span class="ident" id="2879522">p</span><span class="op" id="2879523">,</span>&nbsp;<span class="ident" id="2879525">fl</span><span class="op" id="2879527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879530">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879533">panic</span><span class="op" id="2879538">(</span><span class="op" id="2879539">&amp;</span><span class="ident" id="2879540">ValueError</span><span class="op" id="2879550">{</span><span class="string" id="2879551">&#34;reflect.Value.Index&#34;</span><span class="op" id="2879572">,</span>&nbsp;<span class="ident" id="2879574">v</span><span class="op" id="2879575">.</span><span class="ident" id="2879576">kind</span><span class="op" id="2879580">(</span><span class="op" id="2879581">)</span><span class="op" id="2879582">}</span><span class="op" id="2879583">)</span><br>
<span class="lineno"></span><span class="op" id="2879585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2879588">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2879638">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2879705">func</span>&nbsp;<span class="op" id="2879710">(</span><span class="ident" id="2879711">v</span>&nbsp;<span class="ident" id="2879713">Value</span><span class="op" id="2879718">)</span>&nbsp;<span class="ident" id="2879720">Int</span><span class="op" id="2879723">(</span><span class="op" id="2879724">)</span>&nbsp;<span class="ident" id="2879726">int64</span>&nbsp;<span class="op" id="2879732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879735">k</span>&nbsp;<span class="op" id="2879737">:=</span>&nbsp;<span class="ident" id="2879740">v</span><span class="op" id="2879741">.</span><span class="ident" id="2879742">kind</span><span class="op" id="2879746">(</span><span class="op" id="2879747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2879750">p</span>&nbsp;<span class="op" id="2879752">:=</span>&nbsp;<span class="ident" id="2879755">v</span><span class="op" id="2879756">.</span><span class="ident" id="2879757">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879762">switch</span>&nbsp;<span class="ident" id="2879769">k</span>&nbsp;<span class="op" id="2879771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879774">case</span>&nbsp;<span class="ident" id="2879779">Int</span><span class="op" id="2879782">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879786">return</span>&nbsp;<span class="ident" id="2879793">int64</span><span class="op" id="2879798">(</span><span class="op" id="2879799">*</span><span class="op" id="2879800">(</span><span class="op" id="2879801">*</span><span class="builtintype" id="2879802">int</span><span class="op" id="2879805">)</span><span class="op" id="2879806">(</span><span class="ident" id="2879807">p</span><span class="op" id="2879808">)</span><span class="op" id="2879809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879812">case</span>&nbsp;<span class="ident" id="2879817">Int8</span><span class="op" id="2879821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879825">return</span>&nbsp;<span class="ident" id="2879832">int64</span><span class="op" id="2879837">(</span><span class="op" id="2879838">*</span><span class="op" id="2879839">(</span><span class="op" id="2879840">*</span><span class="builtintype" id="2879841">int8</span><span class="op" id="2879845">)</span><span class="op" id="2879846">(</span><span class="ident" id="2879847">p</span><span class="op" id="2879848">)</span><span class="op" id="2879849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879852">case</span>&nbsp;<span class="ident" id="2879857">Int16</span><span class="op" id="2879862">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879866">return</span>&nbsp;<span class="ident" id="2879873">int64</span><span class="op" id="2879878">(</span><span class="op" id="2879879">*</span><span class="op" id="2879880">(</span><span class="op" id="2879881">*</span><span class="builtintype" id="2879882">int16</span><span class="op" id="2879887">)</span><span class="op" id="2879888">(</span><span class="ident" id="2879889">p</span><span class="op" id="2879890">)</span><span class="op" id="2879891">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879894">case</span>&nbsp;<span class="ident" id="2879899">Int32</span><span class="op" id="2879904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879908">return</span>&nbsp;<span class="ident" id="2879915">int64</span><span class="op" id="2879920">(</span><span class="op" id="2879921">*</span><span class="op" id="2879922">(</span><span class="op" id="2879923">*</span><span class="builtintype" id="2879924">int32</span><span class="op" id="2879929">)</span><span class="op" id="2879930">(</span><span class="ident" id="2879931">p</span><span class="op" id="2879932">)</span><span class="op" id="2879933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879936">case</span>&nbsp;<span class="ident" id="2879941">Int64</span><span class="op" id="2879946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2879950">return</span>&nbsp;<span class="ident" id="2879957">int64</span><span class="op" id="2879962">(</span><span class="op" id="2879963">*</span><span class="op" id="2879964">(</span><span class="op" id="2879965">*</span><span class="ident" id="2879966">int64</span><span class="op" id="2879971">)</span><span class="op" id="2879972">(</span><span class="ident" id="2879973">p</span><span class="op" id="2879974">)</span><span class="op" id="2879975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2879978">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2879981">panic</span><span class="op" id="2879986">(</span><span class="op" id="2879987">&amp;</span><span class="ident" id="2879988">ValueError</span><span class="op" id="2879998">{</span><span class="string" id="2879999">&#34;reflect.Value.Int&#34;</span><span class="op" id="2880018">,</span>&nbsp;<span class="ident" id="2880020">v</span><span class="op" id="2880021">.</span><span class="ident" id="2880022">kind</span><span class="op" id="2880026">(</span><span class="op" id="2880027">)</span><span class="op" id="2880028">}</span><span class="op" id="2880029">)</span><br>
<span class="lineno"></span><span class="op" id="2880031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2880034">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2880107">func</span>&nbsp;<span class="op" id="2880112">(</span><span class="ident" id="2880113">v</span>&nbsp;<span class="ident" id="2880115">Value</span><span class="op" id="2880120">)</span>&nbsp;<span class="ident" id="2880122">CanInterface</span><span class="op" id="2880134">(</span><span class="op" id="2880135">)</span>&nbsp;<span class="builtintype" id="2880137">bool</span>&nbsp;<span class="op" id="2880142">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880145">if</span>&nbsp;<span class="ident" id="2880148">v</span><span class="op" id="2880149">.</span><span class="ident" id="2880150">flag</span>&nbsp;<span class="op" id="2880155">==</span>&nbsp;<span class="num" id="2880158">0</span>&nbsp;<span class="op" id="2880160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880164">panic</span><span class="op" id="2880169">(</span><span class="op" id="2880170">&amp;</span><span class="ident" id="2880171">ValueError</span><span class="op" id="2880181">{</span><span class="string" id="2880182">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2880210">,</span>&nbsp;<span class="ident" id="2880212">Invalid</span><span class="op" id="2880219">}</span><span class="op" id="2880220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880226">return</span>&nbsp;<span class="ident" id="2880233">v</span><span class="op" id="2880234">.</span><span class="ident" id="2880235">flag</span><span class="op" id="2880239">&amp;</span><span class="ident" id="2880240">flagRO</span>&nbsp;<span class="op" id="2880247">==</span>&nbsp;<span class="num" id="2880250">0</span><br>
<span class="lineno"></span><span class="op" id="2880252">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2880255">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2880313">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2880337">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2880383">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2880435">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2880464">func</span>&nbsp;<span class="op" id="2880469">(</span><span class="ident" id="2880470">v</span>&nbsp;<span class="ident" id="2880472">Value</span><span class="op" id="2880477">)</span>&nbsp;<span class="ident" id="2880479">Interface</span><span class="op" id="2880488">(</span><span class="op" id="2880489">)</span>&nbsp;<span class="op" id="2880491">(</span><span class="ident" id="2880492">i</span>&nbsp;<span class="keyword" id="2880494">interface</span><span class="op" id="2880503">{</span><span class="op" id="2880504">}</span><span class="op" id="2880505">)</span>&nbsp;<span class="op" id="2880507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880510">return</span>&nbsp;<span class="ident" id="2880517">valueInterface</span><span class="op" id="2880531">(</span><span class="ident" id="2880532">v</span><span class="op" id="2880533">,</span>&nbsp;<span class="builtintype" id="2880535">true</span><span class="op" id="2880539">)</span><br>
<span class="lineno"></span><span class="op" id="2880541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2880544">func</span>&nbsp;<span class="ident" id="2880549">valueInterface</span><span class="op" id="2880563">(</span><span class="ident" id="2880564">v</span>&nbsp;<span class="ident" id="2880566">Value</span><span class="op" id="2880571">,</span>&nbsp;<span class="ident" id="2880573">safe</span>&nbsp;<span class="builtintype" id="2880578">bool</span><span class="op" id="2880582">)</span>&nbsp;<span class="keyword" id="2880584">interface</span><span class="op" id="2880593">{</span><span class="op" id="2880594">}</span>&nbsp;<span class="op" id="2880596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880599">if</span>&nbsp;<span class="ident" id="2880602">v</span><span class="op" id="2880603">.</span><span class="ident" id="2880604">flag</span>&nbsp;<span class="op" id="2880609">==</span>&nbsp;<span class="num" id="2880612">0</span>&nbsp;<span class="op" id="2880614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880618">panic</span><span class="op" id="2880623">(</span><span class="op" id="2880624">&amp;</span><span class="ident" id="2880625">ValueError</span><span class="op" id="2880635">{</span><span class="string" id="2880636">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2880661">,</span>&nbsp;<span class="num" id="2880663">0</span><span class="op" id="2880664">}</span><span class="op" id="2880665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880671">if</span>&nbsp;<span class="ident" id="2880674">safe</span>&nbsp;<span class="op" id="2880679">&amp;&amp;</span>&nbsp;<span class="ident" id="2880682">v</span><span class="op" id="2880683">.</span><span class="ident" id="2880684">flag</span><span class="op" id="2880688">&amp;</span><span class="ident" id="2880689">flagRO</span>&nbsp;<span class="op" id="2880696">!=</span>&nbsp;<span class="num" id="2880699">0</span>&nbsp;<span class="op" id="2880701">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2880705">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2880766">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2880821">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2880887">panic</span><span class="op" id="2880892">(</span><span class="string" id="2880893">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2880980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2880983">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2880986">if</span>&nbsp;<span class="ident" id="2880989">v</span><span class="op" id="2880990">.</span><span class="ident" id="2880991">flag</span><span class="op" id="2880995">&amp;</span><span class="ident" id="2880996">flagMethod</span>&nbsp;<span class="op" id="2881007">!=</span>&nbsp;<span class="num" id="2881010">0</span>&nbsp;<span class="op" id="2881012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2881016">v</span>&nbsp;<span class="op" id="2881018">=</span>&nbsp;<span class="ident" id="2881020">makeMethodValue</span><span class="op" id="2881035">(</span><span class="string" id="2881036">&#34;Interface&#34;</span><span class="op" id="2881047">,</span>&nbsp;<span class="ident" id="2881049">v</span><span class="op" id="2881050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881057">if</span>&nbsp;<span class="ident" id="2881060">v</span><span class="op" id="2881061">.</span><span class="ident" id="2881062">kind</span><span class="op" id="2881066">(</span><span class="op" id="2881067">)</span>&nbsp;<span class="op" id="2881069">==</span>&nbsp;<span class="ident" id="2881072">Interface</span>&nbsp;<span class="op" id="2881082">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881086">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881146">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881203">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881238">if</span>&nbsp;<span class="ident" id="2881241">v</span><span class="op" id="2881242">.</span><span class="ident" id="2881243">NumMethod</span><span class="op" id="2881252">(</span><span class="op" id="2881253">)</span>&nbsp;<span class="op" id="2881255">==</span>&nbsp;<span class="num" id="2881258">0</span>&nbsp;<span class="op" id="2881260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881265">return</span>&nbsp;<span class="op" id="2881272">*</span><span class="op" id="2881273">(</span><span class="op" id="2881274">*</span><span class="keyword" id="2881275">interface</span><span class="op" id="2881284">{</span><span class="op" id="2881285">}</span><span class="op" id="2881286">)</span><span class="op" id="2881287">(</span><span class="ident" id="2881288">v</span><span class="op" id="2881289">.</span><span class="ident" id="2881290">ptr</span><span class="op" id="2881293">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881301">return</span>&nbsp;<span class="op" id="2881308">*</span><span class="op" id="2881309">(</span><span class="op" id="2881310">*</span><span class="keyword" id="2881311">interface</span>&nbsp;<span class="op" id="2881321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2881326">M</span><span class="op" id="2881327">(</span><span class="op" id="2881328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881332">}</span><span class="op" id="2881333">)</span><span class="op" id="2881334">(</span><span class="ident" id="2881335">v</span><span class="op" id="2881336">.</span><span class="ident" id="2881337">ptr</span><span class="op" id="2881340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2881343">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881347">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881420">return</span>&nbsp;<span class="ident" id="2881427">packEface</span><span class="op" id="2881436">(</span><span class="ident" id="2881437">v</span><span class="op" id="2881438">)</span><br>
<span class="lineno"></span><span class="op" id="2881440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2881443">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2881511">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2881554">func</span>&nbsp;<span class="op" id="2881559">(</span><span class="ident" id="2881560">v</span>&nbsp;<span class="ident" id="2881562">Value</span><span class="op" id="2881567">)</span>&nbsp;<span class="ident" id="2881569">InterfaceData</span><span class="op" id="2881582">(</span><span class="op" id="2881583">)</span>&nbsp;<span class="op" id="2881585">[</span><span class="num" id="2881586">2</span><span class="op" id="2881587">]</span><span class="builtintype" id="2881588">uintptr</span>&nbsp;<span class="op" id="2881596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881599">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2881624">v</span><span class="op" id="2881625">.</span><span class="ident" id="2881626">mustBe</span><span class="op" id="2881632">(</span><span class="ident" id="2881633">Interface</span><span class="op" id="2881642">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881645">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881696">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881748">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881801">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2881825">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2881893">return</span>&nbsp;<span class="op" id="2881900">*</span><span class="op" id="2881901">(</span><span class="op" id="2881902">*</span><span class="op" id="2881903">[</span><span class="num" id="2881904">2</span><span class="op" id="2881905">]</span><span class="builtintype" id="2881906">uintptr</span><span class="op" id="2881913">)</span><span class="op" id="2881914">(</span><span class="ident" id="2881915">v</span><span class="op" id="2881916">.</span><span class="ident" id="2881917">ptr</span><span class="op" id="2881920">)</span><br>
<span class="lineno"></span><span class="op" id="2881922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2881925">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2881994">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2882061">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2882129">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2882197">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2882263">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2882331">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2882341">func</span>&nbsp;<span class="op" id="2882346">(</span><span class="ident" id="2882347">v</span>&nbsp;<span class="ident" id="2882349">Value</span><span class="op" id="2882354">)</span>&nbsp;<span class="ident" id="2882356">IsNil</span><span class="op" id="2882361">(</span><span class="op" id="2882362">)</span>&nbsp;<span class="builtintype" id="2882364">bool</span>&nbsp;<span class="op" id="2882369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882372">k</span>&nbsp;<span class="op" id="2882374">:=</span>&nbsp;<span class="ident" id="2882377">v</span><span class="op" id="2882378">.</span><span class="ident" id="2882379">kind</span><span class="op" id="2882383">(</span><span class="op" id="2882384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882387">switch</span>&nbsp;<span class="ident" id="2882394">k</span>&nbsp;<span class="op" id="2882396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882399">case</span>&nbsp;<span class="ident" id="2882404">Chan</span><span class="op" id="2882408">,</span>&nbsp;<span class="ident" id="2882410">Func</span><span class="op" id="2882414">,</span>&nbsp;<span class="ident" id="2882416">Map</span><span class="op" id="2882419">,</span>&nbsp;<span class="ident" id="2882421">Ptr</span><span class="op" id="2882424">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882428">if</span>&nbsp;<span class="ident" id="2882431">v</span><span class="op" id="2882432">.</span><span class="ident" id="2882433">flag</span><span class="op" id="2882437">&amp;</span><span class="ident" id="2882438">flagMethod</span>&nbsp;<span class="op" id="2882449">!=</span>&nbsp;<span class="num" id="2882452">0</span>&nbsp;<span class="op" id="2882454">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882459">return</span>&nbsp;<span class="builtintype" id="2882466">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2882474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882478">ptr</span>&nbsp;<span class="op" id="2882482">:=</span>&nbsp;<span class="ident" id="2882485">v</span><span class="op" id="2882486">.</span><span class="ident" id="2882487">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882493">if</span>&nbsp;<span class="ident" id="2882496">v</span><span class="op" id="2882497">.</span><span class="ident" id="2882498">flag</span><span class="op" id="2882502">&amp;</span><span class="ident" id="2882503">flagIndir</span>&nbsp;<span class="op" id="2882513">!=</span>&nbsp;<span class="num" id="2882516">0</span>&nbsp;<span class="op" id="2882518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2882523">ptr</span>&nbsp;<span class="op" id="2882527">=</span>&nbsp;<span class="op" id="2882529">*</span><span class="op" id="2882530">(</span><span class="op" id="2882531">*</span><span class="ident" id="2882532">unsafe</span><span class="op" id="2882538">.</span><span class="ident" id="2882539">Pointer</span><span class="op" id="2882546">)</span><span class="op" id="2882547">(</span><span class="ident" id="2882548">ptr</span><span class="op" id="2882551">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2882555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882559">return</span>&nbsp;<span class="ident" id="2882566">ptr</span>&nbsp;<span class="op" id="2882570">==</span>&nbsp;<span class="ident" id="2882573">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882578">case</span>&nbsp;<span class="ident" id="2882583">Interface</span><span class="op" id="2882592">,</span>&nbsp;<span class="ident" id="2882594">Slice</span><span class="op" id="2882599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882603">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2882661">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2882720">return</span>&nbsp;<span class="op" id="2882727">*</span><span class="op" id="2882728">(</span><span class="op" id="2882729">*</span><span class="ident" id="2882730">unsafe</span><span class="op" id="2882736">.</span><span class="ident" id="2882737">Pointer</span><span class="op" id="2882744">)</span><span class="op" id="2882745">(</span><span class="ident" id="2882746">v</span><span class="op" id="2882747">.</span><span class="ident" id="2882748">ptr</span><span class="op" id="2882751">)</span>&nbsp;<span class="op" id="2882753">==</span>&nbsp;<span class="ident" id="2882756">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2882761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2882764">panic</span><span class="op" id="2882769">(</span><span class="op" id="2882770">&amp;</span><span class="ident" id="2882771">ValueError</span><span class="op" id="2882781">{</span><span class="string" id="2882782">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2882803">,</span>&nbsp;<span class="ident" id="2882805">v</span><span class="op" id="2882806">.</span><span class="ident" id="2882807">kind</span><span class="op" id="2882811">(</span><span class="op" id="2882812">)</span><span class="op" id="2882813">}</span><span class="op" id="2882814">)</span><br>
<span class="lineno"></span><span class="op" id="2882816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2882819">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2882868">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2882912">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2882980">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2883041">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2883109">func</span>&nbsp;<span class="op" id="2883114">(</span><span class="ident" id="2883115">v</span>&nbsp;<span class="ident" id="2883117">Value</span><span class="op" id="2883122">)</span>&nbsp;<span class="ident" id="2883124">IsValid</span><span class="op" id="2883131">(</span><span class="op" id="2883132">)</span>&nbsp;<span class="builtintype" id="2883134">bool</span>&nbsp;<span class="op" id="2883139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883142">return</span>&nbsp;<span class="ident" id="2883149">v</span><span class="op" id="2883150">.</span><span class="ident" id="2883151">flag</span>&nbsp;<span class="op" id="2883156">!=</span>&nbsp;<span class="num" id="2883159">0</span><br>
<span class="lineno"></span><span class="op" id="2883161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883164">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2883190">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2883263">func</span>&nbsp;<span class="op" id="2883268">(</span><span class="ident" id="2883269">v</span>&nbsp;<span class="ident" id="2883271">Value</span><span class="op" id="2883276">)</span>&nbsp;<span class="ident" id="2883278">Kind</span><span class="op" id="2883282">(</span><span class="op" id="2883283">)</span>&nbsp;<span class="ident" id="2883285">Kind</span>&nbsp;<span class="op" id="2883290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883293">return</span>&nbsp;<span class="ident" id="2883300">v</span><span class="op" id="2883301">.</span><span class="ident" id="2883302">kind</span><span class="op" id="2883306">(</span><span class="op" id="2883307">)</span><br>
<span class="lineno"></span><span class="op" id="2883309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2883312">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2883339">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2883407">func</span>&nbsp;<span class="op" id="2883412">(</span><span class="ident" id="2883413">v</span>&nbsp;<span class="ident" id="2883415">Value</span><span class="op" id="2883420">)</span>&nbsp;<span class="ident" id="2883422">Len</span><span class="op" id="2883425">(</span><span class="op" id="2883426">)</span>&nbsp;<span class="builtintype" id="2883428">int</span>&nbsp;<span class="op" id="2883432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883435">k</span>&nbsp;<span class="op" id="2883437">:=</span>&nbsp;<span class="ident" id="2883440">v</span><span class="op" id="2883441">.</span><span class="ident" id="2883442">kind</span><span class="op" id="2883446">(</span><span class="op" id="2883447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883450">switch</span>&nbsp;<span class="ident" id="2883457">k</span>&nbsp;<span class="op" id="2883459">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883462">case</span>&nbsp;<span class="ident" id="2883467">Array</span><span class="op" id="2883472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2883476">tt</span>&nbsp;<span class="op" id="2883479">:=</span>&nbsp;<span class="op" id="2883482">(</span><span class="op" id="2883483">*</span><span class="ident" id="2883484">arrayType</span><span class="op" id="2883493">)</span><span class="op" id="2883494">(</span><span class="ident" id="2883495">unsafe</span><span class="op" id="2883501">.</span><span class="ident" id="2883502">Pointer</span><span class="op" id="2883509">(</span><span class="ident" id="2883510">v</span><span class="op" id="2883511">.</span><span class="ident" id="2883512">typ</span><span class="op" id="2883515">)</span><span class="op" id="2883516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883520">return</span>&nbsp;<span class="builtintype" id="2883527">int</span><span class="op" id="2883530">(</span><span class="ident" id="2883531">tt</span><span class="op" id="2883533">.</span><span class="builtinfunc" id="2883534">len</span><span class="op" id="2883537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883540">case</span>&nbsp;<span class="ident" id="2883545">Chan</span><span class="op" id="2883549">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883553">return</span>&nbsp;<span class="ident" id="2883560">chanlen</span><span class="op" id="2883567">(</span><span class="ident" id="2883568">v</span><span class="op" id="2883569">.</span><span class="ident" id="2883570">pointer</span><span class="op" id="2883577">(</span><span class="op" id="2883578">)</span><span class="op" id="2883579">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883582">case</span>&nbsp;<span class="ident" id="2883587">Map</span><span class="op" id="2883590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883594">return</span>&nbsp;<span class="ident" id="2883601">maplen</span><span class="op" id="2883607">(</span><span class="ident" id="2883608">v</span><span class="op" id="2883609">.</span><span class="ident" id="2883610">pointer</span><span class="op" id="2883617">(</span><span class="op" id="2883618">)</span><span class="op" id="2883619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883622">case</span>&nbsp;<span class="ident" id="2883627">Slice</span><span class="op" id="2883632">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2883636">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883688">return</span>&nbsp;<span class="op" id="2883695">(</span><span class="op" id="2883696">*</span><span class="ident" id="2883697">sliceHeader</span><span class="op" id="2883708">)</span><span class="op" id="2883709">(</span><span class="ident" id="2883710">v</span><span class="op" id="2883711">.</span><span class="ident" id="2883712">ptr</span><span class="op" id="2883715">)</span><span class="op" id="2883716">.</span><span class="ident" id="2883717">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883722">case</span>&nbsp;<span class="ident" id="2883727">String</span><span class="op" id="2883733">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2883737">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2883790">return</span>&nbsp;<span class="op" id="2883797">(</span><span class="op" id="2883798">*</span><span class="ident" id="2883799">stringHeader</span><span class="op" id="2883811">)</span><span class="op" id="2883812">(</span><span class="ident" id="2883813">v</span><span class="op" id="2883814">.</span><span class="ident" id="2883815">ptr</span><span class="op" id="2883818">)</span><span class="op" id="2883819">.</span><span class="ident" id="2883820">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2883825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2883828">panic</span><span class="op" id="2883833">(</span><span class="op" id="2883834">&amp;</span><span class="ident" id="2883835">ValueError</span><span class="op" id="2883845">{</span><span class="string" id="2883846">&#34;reflect.Value.Len&#34;</span><span class="op" id="2883865">,</span>&nbsp;<span class="ident" id="2883867">v</span><span class="op" id="2883868">.</span><span class="ident" id="2883869">kind</span><span class="op" id="2883873">(</span><span class="op" id="2883874">)</span><span class="op" id="2883875">}</span><span class="op" id="2883876">)</span><br>
<span class="lineno">980</span><span class="op" id="2883878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883881">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2883945">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2883982">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2884072">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2884143">func</span>&nbsp;<span class="op" id="2884148">(</span><span class="ident" id="2884149">v</span>&nbsp;<span class="ident" id="2884151">Value</span><span class="op" id="2884156">)</span>&nbsp;<span class="ident" id="2884158">MapIndex</span><span class="op" id="2884166">(</span><span class="ident" id="2884167">key</span>&nbsp;<span class="ident" id="2884171">Value</span><span class="op" id="2884176">)</span>&nbsp;<span class="ident" id="2884178">Value</span>&nbsp;<span class="op" id="2884184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884187">v</span><span class="op" id="2884188">.</span><span class="ident" id="2884189">mustBe</span><span class="op" id="2884195">(</span><span class="ident" id="2884196">Map</span><span class="op" id="2884199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884202">tt</span>&nbsp;<span class="op" id="2884205">:=</span>&nbsp;<span class="op" id="2884208">(</span><span class="op" id="2884209">*</span><span class="ident" id="2884210">mapType</span><span class="op" id="2884217">)</span><span class="op" id="2884218">(</span><span class="ident" id="2884219">unsafe</span><span class="op" id="2884225">.</span><span class="ident" id="2884226">Pointer</span><span class="op" id="2884233">(</span><span class="ident" id="2884234">v</span><span class="op" id="2884235">.</span><span class="ident" id="2884236">typ</span><span class="op" id="2884239">)</span><span class="op" id="2884240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884244">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884301">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884357">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884414">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884471">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884527">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884584">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884610">key</span>&nbsp;<span class="op" id="2884614">=</span>&nbsp;<span class="ident" id="2884616">key</span><span class="op" id="2884619">.</span><span class="ident" id="2884620">assignTo</span><span class="op" id="2884628">(</span><span class="string" id="2884629">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2884653">,</span>&nbsp;<span class="ident" id="2884655">tt</span><span class="op" id="2884657">.</span><span class="ident" id="2884658">key</span><span class="op" id="2884661">,</span>&nbsp;<span class="ident" id="2884663">nil</span><span class="op" id="2884666">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884670">var</span>&nbsp;<span class="ident" id="2884674">k</span>&nbsp;<span class="ident" id="2884676">unsafe</span><span class="op" id="2884682">.</span><span class="ident" id="2884683">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884692">if</span>&nbsp;<span class="ident" id="2884695">key</span><span class="op" id="2884698">.</span><span class="ident" id="2884699">flag</span><span class="op" id="2884703">&amp;</span><span class="ident" id="2884704">flagIndir</span>&nbsp;<span class="op" id="2884714">!=</span>&nbsp;<span class="num" id="2884717">0</span>&nbsp;<span class="op" id="2884719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884723">k</span>&nbsp;<span class="op" id="2884725">=</span>&nbsp;<span class="ident" id="2884727">key</span><span class="op" id="2884730">.</span><span class="ident" id="2884731">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884736">}</span>&nbsp;<span class="keyword" id="2884738">else</span>&nbsp;<span class="op" id="2884743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884747">k</span>&nbsp;<span class="op" id="2884749">=</span>&nbsp;<span class="ident" id="2884751">unsafe</span><span class="op" id="2884757">.</span><span class="ident" id="2884758">Pointer</span><span class="op" id="2884765">(</span><span class="op" id="2884766">&amp;</span><span class="ident" id="2884767">key</span><span class="op" id="2884770">.</span><span class="ident" id="2884771">ptr</span><span class="op" id="2884774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884777">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884780">e</span>&nbsp;<span class="op" id="2884782">:=</span>&nbsp;<span class="ident" id="2884785">mapaccess</span><span class="op" id="2884794">(</span><span class="ident" id="2884795">v</span><span class="op" id="2884796">.</span><span class="ident" id="2884797">typ</span><span class="op" id="2884800">,</span>&nbsp;<span class="ident" id="2884802">v</span><span class="op" id="2884803">.</span><span class="ident" id="2884804">pointer</span><span class="op" id="2884811">(</span><span class="op" id="2884812">)</span><span class="op" id="2884813">,</span>&nbsp;<span class="ident" id="2884815">k</span><span class="op" id="2884816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884819">if</span>&nbsp;<span class="ident" id="2884822">e</span>&nbsp;<span class="op" id="2884824">==</span>&nbsp;<span class="ident" id="2884827">nil</span>&nbsp;<span class="op" id="2884831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884835">return</span>&nbsp;<span class="ident" id="2884842">Value</span><span class="op" id="2884847">{</span><span class="op" id="2884848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2884851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884854">typ</span>&nbsp;<span class="op" id="2884858">:=</span>&nbsp;<span class="ident" id="2884861">tt</span><span class="op" id="2884863">.</span><span class="ident" id="2884864">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884870">fl</span>&nbsp;<span class="op" id="2884873">:=</span>&nbsp;<span class="op" id="2884876">(</span><span class="ident" id="2884877">v</span><span class="op" id="2884878">.</span><span class="ident" id="2884879">flag</span>&nbsp;<span class="op" id="2884884">|</span>&nbsp;<span class="ident" id="2884886">key</span><span class="op" id="2884889">.</span><span class="ident" id="2884890">flag</span><span class="op" id="2884894">)</span>&nbsp;<span class="op" id="2884896">&amp;</span>&nbsp;<span class="ident" id="2884898">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2884906">fl</span>&nbsp;<span class="op" id="2884909">|=</span>&nbsp;<span class="ident" id="2884912">flag</span><span class="op" id="2884916">(</span><span class="ident" id="2884917">typ</span><span class="op" id="2884920">.</span><span class="ident" id="2884921">Kind</span><span class="op" id="2884925">(</span><span class="op" id="2884926">)</span><span class="op" id="2884927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2884930">if</span>&nbsp;<span class="ident" id="2884933">ifaceIndir</span><span class="op" id="2884943">(</span><span class="ident" id="2884944">typ</span><span class="op" id="2884947">)</span>&nbsp;<span class="op" id="2884949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884953">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2884999">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885039">c</span>&nbsp;<span class="op" id="2885041">:=</span>&nbsp;<span class="ident" id="2885044">unsafe_New</span><span class="op" id="2885054">(</span><span class="ident" id="2885055">typ</span><span class="op" id="2885058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885062">memmove</span><span class="op" id="2885069">(</span><span class="ident" id="2885070">c</span><span class="op" id="2885071">,</span>&nbsp;<span class="ident" id="2885073">e</span><span class="op" id="2885074">,</span>&nbsp;<span class="ident" id="2885076">typ</span><span class="op" id="2885079">.</span><span class="ident" id="2885080">size</span><span class="op" id="2885084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885088">return</span>&nbsp;<span class="ident" id="2885095">Value</span><span class="op" id="2885100">{</span><span class="ident" id="2885101">typ</span><span class="op" id="2885104">,</span>&nbsp;<span class="ident" id="2885106">c</span><span class="op" id="2885107">,</span>&nbsp;<span class="ident" id="2885109">fl</span>&nbsp;<span class="op" id="2885112">|</span>&nbsp;<span class="ident" id="2885114">flagIndir</span><span class="op" id="2885123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885126">}</span>&nbsp;<span class="keyword" id="2885128">else</span>&nbsp;<span class="op" id="2885133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885137">return</span>&nbsp;<span class="ident" id="2885144">Value</span><span class="op" id="2885149">{</span><span class="ident" id="2885150">typ</span><span class="op" id="2885153">,</span>&nbsp;<span class="op" id="2885155">*</span><span class="op" id="2885156">(</span><span class="op" id="2885157">*</span><span class="ident" id="2885158">unsafe</span><span class="op" id="2885164">.</span><span class="ident" id="2885165">Pointer</span><span class="op" id="2885172">)</span><span class="op" id="2885173">(</span><span class="ident" id="2885174">e</span><span class="op" id="2885175">)</span><span class="op" id="2885176">,</span>&nbsp;<span class="ident" id="2885178">fl</span><span class="op" id="2885180">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885183">}</span><br>
<span class="lineno"></span><span class="op" id="2885185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2885188">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2885259">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2885284">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2885321">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2885377">func</span>&nbsp;<span class="op" id="2885382">(</span><span class="ident" id="2885383">v</span>&nbsp;<span class="ident" id="2885385">Value</span><span class="op" id="2885390">)</span>&nbsp;<span class="ident" id="2885392">MapKeys</span><span class="op" id="2885399">(</span><span class="op" id="2885400">)</span>&nbsp;<span class="op" id="2885402">[</span><span class="op" id="2885403">]</span><span class="ident" id="2885404">Value</span>&nbsp;<span class="op" id="2885410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885413">v</span><span class="op" id="2885414">.</span><span class="ident" id="2885415">mustBe</span><span class="op" id="2885421">(</span><span class="ident" id="2885422">Map</span><span class="op" id="2885425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885428">tt</span>&nbsp;<span class="op" id="2885431">:=</span>&nbsp;<span class="op" id="2885434">(</span><span class="op" id="2885435">*</span><span class="ident" id="2885436">mapType</span><span class="op" id="2885443">)</span><span class="op" id="2885444">(</span><span class="ident" id="2885445">unsafe</span><span class="op" id="2885451">.</span><span class="ident" id="2885452">Pointer</span><span class="op" id="2885459">(</span><span class="ident" id="2885460">v</span><span class="op" id="2885461">.</span><span class="ident" id="2885462">typ</span><span class="op" id="2885465">)</span><span class="op" id="2885466">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885469">keyType</span>&nbsp;<span class="op" id="2885477">:=</span>&nbsp;<span class="ident" id="2885480">tt</span><span class="op" id="2885482">.</span><span class="ident" id="2885483">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885489">fl</span>&nbsp;<span class="op" id="2885492">:=</span>&nbsp;<span class="ident" id="2885495">v</span><span class="op" id="2885496">.</span><span class="ident" id="2885497">flag</span><span class="op" id="2885501">&amp;</span><span class="ident" id="2885502">flagRO</span>&nbsp;<span class="op" id="2885509">|</span>&nbsp;<span class="ident" id="2885511">flag</span><span class="op" id="2885515">(</span><span class="ident" id="2885516">keyType</span><span class="op" id="2885523">.</span><span class="ident" id="2885524">Kind</span><span class="op" id="2885528">(</span><span class="op" id="2885529">)</span><span class="op" id="2885530">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885534">m</span>&nbsp;<span class="op" id="2885536">:=</span>&nbsp;<span class="ident" id="2885539">v</span><span class="op" id="2885540">.</span><span class="ident" id="2885541">pointer</span><span class="op" id="2885548">(</span><span class="op" id="2885549">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885552">mlen</span>&nbsp;<span class="op" id="2885557">:=</span>&nbsp;<span class="builtintype" id="2885560">int</span><span class="op" id="2885563">(</span><span class="num" id="2885564">0</span><span class="op" id="2885565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885568">if</span>&nbsp;<span class="ident" id="2885571">m</span>&nbsp;<span class="op" id="2885573">!=</span>&nbsp;<span class="ident" id="2885576">nil</span>&nbsp;<span class="op" id="2885580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885584">mlen</span>&nbsp;<span class="op" id="2885589">=</span>&nbsp;<span class="ident" id="2885591">maplen</span><span class="op" id="2885597">(</span><span class="ident" id="2885598">m</span><span class="op" id="2885599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885605">it</span>&nbsp;<span class="op" id="2885608">:=</span>&nbsp;<span class="ident" id="2885611">mapiterinit</span><span class="op" id="2885622">(</span><span class="ident" id="2885623">v</span><span class="op" id="2885624">.</span><span class="ident" id="2885625">typ</span><span class="op" id="2885628">,</span>&nbsp;<span class="ident" id="2885630">m</span><span class="op" id="2885631">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885634">a</span>&nbsp;<span class="op" id="2885636">:=</span>&nbsp;<span class="builtinfunc" id="2885639">make</span><span class="op" id="2885643">(</span><span class="op" id="2885644">[</span><span class="op" id="2885645">]</span><span class="ident" id="2885646">Value</span><span class="op" id="2885651">,</span>&nbsp;<span class="ident" id="2885653">mlen</span><span class="op" id="2885657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885660">var</span>&nbsp;<span class="ident" id="2885664">i</span>&nbsp;<span class="builtintype" id="2885666">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885671">for</span>&nbsp;<span class="ident" id="2885675">i</span>&nbsp;<span class="op" id="2885677">=</span>&nbsp;<span class="num" id="2885679">0</span><span class="op" id="2885680">;</span>&nbsp;<span class="ident" id="2885682">i</span>&nbsp;<span class="op" id="2885684">&lt;</span>&nbsp;<span class="builtinfunc" id="2885686">len</span><span class="op" id="2885689">(</span><span class="ident" id="2885690">a</span><span class="op" id="2885691">)</span><span class="op" id="2885692">;</span>&nbsp;<span class="ident" id="2885694">i</span><span class="op" id="2885695">++</span>&nbsp;<span class="op" id="2885698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2885702">key</span>&nbsp;<span class="op" id="2885706">:=</span>&nbsp;<span class="ident" id="2885709">mapiterkey</span><span class="op" id="2885719">(</span><span class="ident" id="2885720">it</span><span class="op" id="2885722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885726">if</span>&nbsp;<span class="ident" id="2885729">key</span>&nbsp;<span class="op" id="2885733">==</span>&nbsp;<span class="ident" id="2885736">nil</span>&nbsp;<span class="op" id="2885740">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885745">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885798">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885856">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885882">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2885890">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2885894">if</span>&nbsp;<span class="ident" id="2885897">ifaceIndir</span><span class="op" id="2885907">(</span><span class="ident" id="2885908">keyType</span><span class="op" id="2885915">)</span>&nbsp;<span class="op" id="2885917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885922">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2885969">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886010">c</span>&nbsp;<span class="op" id="2886012">:=</span>&nbsp;<span class="ident" id="2886015">unsafe_New</span><span class="op" id="2886025">(</span><span class="ident" id="2886026">keyType</span><span class="op" id="2886033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886038">memmove</span><span class="op" id="2886045">(</span><span class="ident" id="2886046">c</span><span class="op" id="2886047">,</span>&nbsp;<span class="ident" id="2886049">key</span><span class="op" id="2886052">,</span>&nbsp;<span class="ident" id="2886054">keyType</span><span class="op" id="2886061">.</span><span class="ident" id="2886062">size</span><span class="op" id="2886066">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886071">a</span><span class="op" id="2886072">[</span><span class="ident" id="2886073">i</span><span class="op" id="2886074">]</span>&nbsp;<span class="op" id="2886076">=</span>&nbsp;<span class="ident" id="2886078">Value</span><span class="op" id="2886083">{</span><span class="ident" id="2886084">keyType</span><span class="op" id="2886091">,</span>&nbsp;<span class="ident" id="2886093">c</span><span class="op" id="2886094">,</span>&nbsp;<span class="ident" id="2886096">fl</span>&nbsp;<span class="op" id="2886099">|</span>&nbsp;<span class="ident" id="2886101">flagIndir</span><span class="op" id="2886110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886114">}</span>&nbsp;<span class="keyword" id="2886116">else</span>&nbsp;<span class="op" id="2886121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886126">a</span><span class="op" id="2886127">[</span><span class="ident" id="2886128">i</span><span class="op" id="2886129">]</span>&nbsp;<span class="op" id="2886131">=</span>&nbsp;<span class="ident" id="2886133">Value</span><span class="op" id="2886138">{</span><span class="ident" id="2886139">keyType</span><span class="op" id="2886146">,</span>&nbsp;<span class="op" id="2886148">*</span><span class="op" id="2886149">(</span><span class="op" id="2886150">*</span><span class="ident" id="2886151">unsafe</span><span class="op" id="2886157">.</span><span class="ident" id="2886158">Pointer</span><span class="op" id="2886165">)</span><span class="op" id="2886166">(</span><span class="ident" id="2886167">key</span><span class="op" id="2886170">)</span><span class="op" id="2886171">,</span>&nbsp;<span class="ident" id="2886173">fl</span><span class="op" id="2886175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886183">mapiternext</span><span class="op" id="2886194">(</span><span class="ident" id="2886195">it</span><span class="op" id="2886197">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886203">return</span>&nbsp;<span class="ident" id="2886210">a</span><span class="op" id="2886211">[</span><span class="op" id="2886212">:</span><span class="ident" id="2886213">i</span><span class="op" id="2886214">]</span><br>
<span class="lineno"></span><span class="op" id="2886216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2886219">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2886288">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2886359">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2886431">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2886503">func</span>&nbsp;<span class="op" id="2886508">(</span><span class="ident" id="2886509">v</span>&nbsp;<span class="ident" id="2886511">Value</span><span class="op" id="2886516">)</span>&nbsp;<span class="ident" id="2886518">Method</span><span class="op" id="2886524">(</span><span class="ident" id="2886525">i</span>&nbsp;<span class="builtintype" id="2886527">int</span><span class="op" id="2886530">)</span>&nbsp;<span class="ident" id="2886532">Value</span>&nbsp;<span class="op" id="2886538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886541">if</span>&nbsp;<span class="ident" id="2886544">v</span><span class="op" id="2886545">.</span><span class="ident" id="2886546">typ</span>&nbsp;<span class="op" id="2886550">==</span>&nbsp;<span class="ident" id="2886553">nil</span>&nbsp;<span class="op" id="2886557">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2886561">panic</span><span class="op" id="2886566">(</span><span class="op" id="2886567">&amp;</span><span class="ident" id="2886568">ValueError</span><span class="op" id="2886578">{</span><span class="string" id="2886579">&#34;reflect.Value.Method&#34;</span><span class="op" id="2886601">,</span>&nbsp;<span class="ident" id="2886603">Invalid</span><span class="op" id="2886610">}</span><span class="op" id="2886611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886617">if</span>&nbsp;<span class="ident" id="2886620">v</span><span class="op" id="2886621">.</span><span class="ident" id="2886622">flag</span><span class="op" id="2886626">&amp;</span><span class="ident" id="2886627">flagMethod</span>&nbsp;<span class="op" id="2886638">!=</span>&nbsp;<span class="num" id="2886641">0</span>&nbsp;<span class="op" id="2886643">||</span>&nbsp;<span class="builtintype" id="2886646">uint</span><span class="op" id="2886650">(</span><span class="ident" id="2886651">i</span><span class="op" id="2886652">)</span>&nbsp;<span class="op" id="2886654">&gt;=</span>&nbsp;<span class="builtintype" id="2886657">uint</span><span class="op" id="2886661">(</span><span class="ident" id="2886662">v</span><span class="op" id="2886663">.</span><span class="ident" id="2886664">typ</span><span class="op" id="2886667">.</span><span class="ident" id="2886668">NumMethod</span><span class="op" id="2886677">(</span><span class="op" id="2886678">)</span><span class="op" id="2886679">)</span>&nbsp;<span class="op" id="2886681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2886685">panic</span><span class="op" id="2886690">(</span><span class="string" id="2886691">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2886727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886730">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886733">if</span>&nbsp;<span class="ident" id="2886736">v</span><span class="op" id="2886737">.</span><span class="ident" id="2886738">typ</span><span class="op" id="2886741">.</span><span class="ident" id="2886742">Kind</span><span class="op" id="2886746">(</span><span class="op" id="2886747">)</span>&nbsp;<span class="op" id="2886749">==</span>&nbsp;<span class="ident" id="2886752">Interface</span>&nbsp;<span class="op" id="2886762">&amp;&amp;</span>&nbsp;<span class="ident" id="2886765">v</span><span class="op" id="2886766">.</span><span class="ident" id="2886767">IsNil</span><span class="op" id="2886772">(</span><span class="op" id="2886773">)</span>&nbsp;<span class="op" id="2886775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2886779">panic</span><span class="op" id="2886784">(</span><span class="string" id="2886785">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2886825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2886828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886831">fl</span>&nbsp;<span class="op" id="2886834">:=</span>&nbsp;<span class="ident" id="2886837">v</span><span class="op" id="2886838">.</span><span class="ident" id="2886839">flag</span>&nbsp;<span class="op" id="2886844">&amp;</span>&nbsp;<span class="op" id="2886846">(</span><span class="ident" id="2886847">flagRO</span>&nbsp;<span class="op" id="2886854">|</span>&nbsp;<span class="ident" id="2886856">flagIndir</span><span class="op" id="2886865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886868">fl</span>&nbsp;<span class="op" id="2886871">|=</span>&nbsp;<span class="ident" id="2886874">flag</span><span class="op" id="2886878">(</span><span class="ident" id="2886879">Func</span><span class="op" id="2886883">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2886886">fl</span>&nbsp;<span class="op" id="2886889">|=</span>&nbsp;<span class="ident" id="2886892">flag</span><span class="op" id="2886896">(</span><span class="ident" id="2886897">i</span><span class="op" id="2886898">)</span><span class="op" id="2886899">&lt;&lt;</span><span class="ident" id="2886901">flagMethodShift</span>&nbsp;<span class="op" id="2886917">|</span>&nbsp;<span class="ident" id="2886919">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2886931">return</span>&nbsp;<span class="ident" id="2886938">Value</span><span class="op" id="2886943">{</span><span class="ident" id="2886944">v</span><span class="op" id="2886945">.</span><span class="ident" id="2886946">typ</span><span class="op" id="2886949">,</span>&nbsp;<span class="ident" id="2886951">v</span><span class="op" id="2886952">.</span><span class="ident" id="2886953">ptr</span><span class="op" id="2886956">,</span>&nbsp;<span class="ident" id="2886958">fl</span><span class="op" id="2886960">}</span><br>
<span class="lineno"></span><span class="op" id="2886962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2886965">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2887035">func</span>&nbsp;<span class="op" id="2887040">(</span><span class="ident" id="2887041">v</span>&nbsp;<span class="ident" id="2887043">Value</span><span class="op" id="2887048">)</span>&nbsp;<span class="ident" id="2887050">NumMethod</span><span class="op" id="2887059">(</span><span class="op" id="2887060">)</span>&nbsp;<span class="builtintype" id="2887062">int</span>&nbsp;<span class="op" id="2887066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887069">if</span>&nbsp;<span class="ident" id="2887072">v</span><span class="op" id="2887073">.</span><span class="ident" id="2887074">typ</span>&nbsp;<span class="op" id="2887078">==</span>&nbsp;<span class="ident" id="2887081">nil</span>&nbsp;<span class="op" id="2887085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2887089">panic</span><span class="op" id="2887094">(</span><span class="op" id="2887095">&amp;</span><span class="ident" id="2887096">ValueError</span><span class="op" id="2887106">{</span><span class="string" id="2887107">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2887132">,</span>&nbsp;<span class="ident" id="2887134">Invalid</span><span class="op" id="2887141">}</span><span class="op" id="2887142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887148">if</span>&nbsp;<span class="ident" id="2887151">v</span><span class="op" id="2887152">.</span><span class="ident" id="2887153">flag</span><span class="op" id="2887157">&amp;</span><span class="ident" id="2887158">flagMethod</span>&nbsp;<span class="op" id="2887169">!=</span>&nbsp;<span class="num" id="2887172">0</span>&nbsp;<span class="op" id="2887174">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887178">return</span>&nbsp;<span class="num" id="2887185">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887191">return</span>&nbsp;<span class="ident" id="2887198">v</span><span class="op" id="2887199">.</span><span class="ident" id="2887200">typ</span><span class="op" id="2887203">.</span><span class="ident" id="2887204">NumMethod</span><span class="op" id="2887213">(</span><span class="op" id="2887214">)</span><br>
<span class="lineno"></span><span class="op" id="2887216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2887219">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2887288">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2887317">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2887388">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2887460">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2887513">func</span>&nbsp;<span class="op" id="2887518">(</span><span class="ident" id="2887519">v</span>&nbsp;<span class="ident" id="2887521">Value</span><span class="op" id="2887526">)</span>&nbsp;<span class="ident" id="2887528">MethodByName</span><span class="op" id="2887540">(</span><span class="ident" id="2887541">name</span>&nbsp;<span class="builtintype" id="2887546">string</span><span class="op" id="2887552">)</span>&nbsp;<span class="ident" id="2887554">Value</span>&nbsp;<span class="op" id="2887560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887563">if</span>&nbsp;<span class="ident" id="2887566">v</span><span class="op" id="2887567">.</span><span class="ident" id="2887568">typ</span>&nbsp;<span class="op" id="2887572">==</span>&nbsp;<span class="ident" id="2887575">nil</span>&nbsp;<span class="op" id="2887579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2887583">panic</span><span class="op" id="2887588">(</span><span class="op" id="2887589">&amp;</span><span class="ident" id="2887590">ValueError</span><span class="op" id="2887600">{</span><span class="string" id="2887601">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2887629">,</span>&nbsp;<span class="ident" id="2887631">Invalid</span><span class="op" id="2887638">}</span><span class="op" id="2887639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887645">if</span>&nbsp;<span class="ident" id="2887648">v</span><span class="op" id="2887649">.</span><span class="ident" id="2887650">flag</span><span class="op" id="2887654">&amp;</span><span class="ident" id="2887655">flagMethod</span>&nbsp;<span class="op" id="2887666">!=</span>&nbsp;<span class="num" id="2887669">0</span>&nbsp;<span class="op" id="2887671">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887675">return</span>&nbsp;<span class="ident" id="2887682">Value</span><span class="op" id="2887687">{</span><span class="op" id="2887688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887694">m</span><span class="op" id="2887695">,</span>&nbsp;<span class="ident" id="2887697">ok</span>&nbsp;<span class="op" id="2887700">:=</span>&nbsp;<span class="ident" id="2887703">v</span><span class="op" id="2887704">.</span><span class="ident" id="2887705">typ</span><span class="op" id="2887708">.</span><span class="ident" id="2887709">MethodByName</span><span class="op" id="2887721">(</span><span class="ident" id="2887722">name</span><span class="op" id="2887726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887729">if</span>&nbsp;<span class="op" id="2887732">!</span><span class="ident" id="2887733">ok</span>&nbsp;<span class="op" id="2887736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887740">return</span>&nbsp;<span class="ident" id="2887747">Value</span><span class="op" id="2887752">{</span><span class="op" id="2887753">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2887756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887759">return</span>&nbsp;<span class="ident" id="2887766">v</span><span class="op" id="2887767">.</span><span class="ident" id="2887768">Method</span><span class="op" id="2887774">(</span><span class="ident" id="2887775">m</span><span class="op" id="2887776">.</span><span class="ident" id="2887777">Index</span><span class="op" id="2887782">)</span><br>
<span class="lineno"></span><span class="op" id="2887784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2887787">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2887845">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2887885">func</span>&nbsp;<span class="op" id="2887890">(</span><span class="ident" id="2887891">v</span>&nbsp;<span class="ident" id="2887893">Value</span><span class="op" id="2887898">)</span>&nbsp;<span class="ident" id="2887900">NumField</span><span class="op" id="2887908">(</span><span class="op" id="2887909">)</span>&nbsp;<span class="builtintype" id="2887911">int</span>&nbsp;<span class="op" id="2887915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887918">v</span><span class="op" id="2887919">.</span><span class="ident" id="2887920">mustBe</span><span class="op" id="2887926">(</span><span class="ident" id="2887927">Struct</span><span class="op" id="2887933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2887936">tt</span>&nbsp;<span class="op" id="2887939">:=</span>&nbsp;<span class="op" id="2887942">(</span><span class="op" id="2887943">*</span><span class="ident" id="2887944">structType</span><span class="op" id="2887954">)</span><span class="op" id="2887955">(</span><span class="ident" id="2887956">unsafe</span><span class="op" id="2887962">.</span><span class="ident" id="2887963">Pointer</span><span class="op" id="2887970">(</span><span class="ident" id="2887971">v</span><span class="op" id="2887972">.</span><span class="ident" id="2887973">typ</span><span class="op" id="2887976">)</span><span class="op" id="2887977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2887980">return</span>&nbsp;<span class="builtinfunc" id="2887987">len</span><span class="op" id="2887990">(</span><span class="ident" id="2887991">tt</span><span class="op" id="2887993">.</span><span class="ident" id="2887994">fields</span><span class="op" id="2888000">)</span><br>
<span class="lineno">1120</span><span class="op" id="2888002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2888005">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2888092">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2888149">func</span>&nbsp;<span class="op" id="2888154">(</span><span class="ident" id="2888155">v</span>&nbsp;<span class="ident" id="2888157">Value</span><span class="op" id="2888162">)</span>&nbsp;<span class="ident" id="2888164">OverflowComplex</span><span class="op" id="2888179">(</span><span class="ident" id="2888180">x</span>&nbsp;<span class="builtintype" id="2888182">complex128</span><span class="op" id="2888192">)</span>&nbsp;<span class="builtintype" id="2888194">bool</span>&nbsp;<span class="op" id="2888199">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888202">k</span>&nbsp;<span class="op" id="2888204">:=</span>&nbsp;<span class="ident" id="2888207">v</span><span class="op" id="2888208">.</span><span class="ident" id="2888209">kind</span><span class="op" id="2888213">(</span><span class="op" id="2888214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888217">switch</span>&nbsp;<span class="ident" id="2888224">k</span>&nbsp;<span class="op" id="2888226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888229">case</span>&nbsp;<span class="ident" id="2888234">Complex64</span><span class="op" id="2888243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888247">return</span>&nbsp;<span class="ident" id="2888254">overflowFloat32</span><span class="op" id="2888269">(</span><span class="builtinfunc" id="2888270">real</span><span class="op" id="2888274">(</span><span class="ident" id="2888275">x</span><span class="op" id="2888276">)</span><span class="op" id="2888277">)</span>&nbsp;<span class="op" id="2888279">||</span>&nbsp;<span class="ident" id="2888282">overflowFloat32</span><span class="op" id="2888297">(</span><span class="builtinfunc" id="2888298">imag</span><span class="op" id="2888302">(</span><span class="ident" id="2888303">x</span><span class="op" id="2888304">)</span><span class="op" id="2888305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888308">case</span>&nbsp;<span class="ident" id="2888313">Complex128</span><span class="op" id="2888323">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888327">return</span>&nbsp;<span class="builtintype" id="2888334">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2888341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2888344">panic</span><span class="op" id="2888349">(</span><span class="op" id="2888350">&amp;</span><span class="ident" id="2888351">ValueError</span><span class="op" id="2888361">{</span><span class="string" id="2888362">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2888393">,</span>&nbsp;<span class="ident" id="2888395">v</span><span class="op" id="2888396">.</span><span class="ident" id="2888397">kind</span><span class="op" id="2888401">(</span><span class="op" id="2888402">)</span><span class="op" id="2888403">}</span><span class="op" id="2888404">)</span><br>
<span class="lineno"></span><span class="op" id="2888406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2888409">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2888491">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2888543">func</span>&nbsp;<span class="op" id="2888548">(</span><span class="ident" id="2888549">v</span>&nbsp;<span class="ident" id="2888551">Value</span><span class="op" id="2888556">)</span>&nbsp;<span class="ident" id="2888558">OverflowFloat</span><span class="op" id="2888571">(</span><span class="ident" id="2888572">x</span>&nbsp;<span class="builtintype" id="2888574">float64</span><span class="op" id="2888581">)</span>&nbsp;<span class="builtintype" id="2888583">bool</span>&nbsp;<span class="op" id="2888588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888591">k</span>&nbsp;<span class="op" id="2888593">:=</span>&nbsp;<span class="ident" id="2888596">v</span><span class="op" id="2888597">.</span><span class="ident" id="2888598">kind</span><span class="op" id="2888602">(</span><span class="op" id="2888603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888606">switch</span>&nbsp;<span class="ident" id="2888613">k</span>&nbsp;<span class="op" id="2888615">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888618">case</span>&nbsp;<span class="ident" id="2888623">Float32</span><span class="op" id="2888630">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888634">return</span>&nbsp;<span class="ident" id="2888641">overflowFloat32</span><span class="op" id="2888656">(</span><span class="ident" id="2888657">x</span><span class="op" id="2888658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888661">case</span>&nbsp;<span class="ident" id="2888666">Float64</span><span class="op" id="2888673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888677">return</span>&nbsp;<span class="builtintype" id="2888684">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2888691">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2888694">panic</span><span class="op" id="2888699">(</span><span class="op" id="2888700">&amp;</span><span class="ident" id="2888701">ValueError</span><span class="op" id="2888711">{</span><span class="string" id="2888712">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2888741">,</span>&nbsp;<span class="ident" id="2888743">v</span><span class="op" id="2888744">.</span><span class="ident" id="2888745">kind</span><span class="op" id="2888749">(</span><span class="op" id="2888750">)</span><span class="op" id="2888751">}</span><span class="op" id="2888752">)</span><br>
<span class="lineno"></span><span class="op" id="2888754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2888757">func</span>&nbsp;<span class="ident" id="2888762">overflowFloat32</span><span class="op" id="2888777">(</span><span class="ident" id="2888778">x</span>&nbsp;<span class="builtintype" id="2888780">float64</span><span class="op" id="2888787">)</span>&nbsp;<span class="builtintype" id="2888789">bool</span>&nbsp;<span class="op" id="2888794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888797">if</span>&nbsp;<span class="ident" id="2888800">x</span>&nbsp;<span class="op" id="2888802">&lt;</span>&nbsp;<span class="num" id="2888804">0</span>&nbsp;<span class="op" id="2888806">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2888810">x</span>&nbsp;<span class="op" id="2888812">=</span>&nbsp;<span class="op" id="2888814">-</span><span class="ident" id="2888815">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2888818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2888821">return</span>&nbsp;<span class="ident" id="2888828">math</span><span class="op" id="2888832">.</span><span class="ident" id="2888833">MaxFloat32</span>&nbsp;<span class="op" id="2888844">&lt;</span>&nbsp;<span class="ident" id="2888846">x</span>&nbsp;<span class="op" id="2888848">&amp;&amp;</span>&nbsp;<span class="ident" id="2888851">x</span>&nbsp;<span class="op" id="2888853">&lt;=</span>&nbsp;<span class="ident" id="2888856">math</span><span class="op" id="2888860">.</span><span class="ident" id="2888861">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2888872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2888875">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2888953">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2889020">func</span>&nbsp;<span class="op" id="2889025">(</span><span class="ident" id="2889026">v</span>&nbsp;<span class="ident" id="2889028">Value</span><span class="op" id="2889033">)</span>&nbsp;<span class="ident" id="2889035">OverflowInt</span><span class="op" id="2889046">(</span><span class="ident" id="2889047">x</span>&nbsp;<span class="ident" id="2889049">int64</span><span class="op" id="2889054">)</span>&nbsp;<span class="builtintype" id="2889056">bool</span>&nbsp;<span class="op" id="2889061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889064">k</span>&nbsp;<span class="op" id="2889066">:=</span>&nbsp;<span class="ident" id="2889069">v</span><span class="op" id="2889070">.</span><span class="ident" id="2889071">kind</span><span class="op" id="2889075">(</span><span class="op" id="2889076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889079">switch</span>&nbsp;<span class="ident" id="2889086">k</span>&nbsp;<span class="op" id="2889088">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889091">case</span>&nbsp;<span class="ident" id="2889096">Int</span><span class="op" id="2889099">,</span>&nbsp;<span class="ident" id="2889101">Int8</span><span class="op" id="2889105">,</span>&nbsp;<span class="ident" id="2889107">Int16</span><span class="op" id="2889112">,</span>&nbsp;<span class="ident" id="2889114">Int32</span><span class="op" id="2889119">,</span>&nbsp;<span class="ident" id="2889121">Int64</span><span class="op" id="2889126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889130">bitSize</span>&nbsp;<span class="op" id="2889138">:=</span>&nbsp;<span class="ident" id="2889141">v</span><span class="op" id="2889142">.</span><span class="ident" id="2889143">typ</span><span class="op" id="2889146">.</span><span class="ident" id="2889147">size</span>&nbsp;<span class="op" id="2889152">*</span>&nbsp;<span class="num" id="2889154">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889158">trunc</span>&nbsp;<span class="op" id="2889164">:=</span>&nbsp;<span class="op" id="2889167">(</span><span class="ident" id="2889168">x</span>&nbsp;<span class="op" id="2889170">&lt;&lt;</span>&nbsp;<span class="op" id="2889173">(</span><span class="num" id="2889174">64</span>&nbsp;<span class="op" id="2889177">-</span>&nbsp;<span class="ident" id="2889179">bitSize</span><span class="op" id="2889186">)</span><span class="op" id="2889187">)</span>&nbsp;<span class="op" id="2889189">&gt;&gt;</span>&nbsp;<span class="op" id="2889192">(</span><span class="num" id="2889193">64</span>&nbsp;<span class="op" id="2889196">-</span>&nbsp;<span class="ident" id="2889198">bitSize</span><span class="op" id="2889205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889209">return</span>&nbsp;<span class="ident" id="2889216">x</span>&nbsp;<span class="op" id="2889218">!=</span>&nbsp;<span class="ident" id="2889221">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2889228">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2889231">panic</span><span class="op" id="2889236">(</span><span class="op" id="2889237">&amp;</span><span class="ident" id="2889238">ValueError</span><span class="op" id="2889248">{</span><span class="string" id="2889249">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2889276">,</span>&nbsp;<span class="ident" id="2889278">v</span><span class="op" id="2889279">.</span><span class="ident" id="2889280">kind</span><span class="op" id="2889284">(</span><span class="op" id="2889285">)</span><span class="op" id="2889286">}</span><span class="op" id="2889287">)</span><br>
<span class="lineno"></span><span class="op" id="2889289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2889292">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2889372">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2889453">func</span>&nbsp;<span class="op" id="2889458">(</span><span class="ident" id="2889459">v</span>&nbsp;<span class="ident" id="2889461">Value</span><span class="op" id="2889466">)</span>&nbsp;<span class="ident" id="2889468">OverflowUint</span><span class="op" id="2889480">(</span><span class="ident" id="2889481">x</span>&nbsp;<span class="ident" id="2889483">uint64</span><span class="op" id="2889489">)</span>&nbsp;<span class="builtintype" id="2889491">bool</span>&nbsp;<span class="op" id="2889496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889499">k</span>&nbsp;<span class="op" id="2889501">:=</span>&nbsp;<span class="ident" id="2889504">v</span><span class="op" id="2889505">.</span><span class="ident" id="2889506">kind</span><span class="op" id="2889510">(</span><span class="op" id="2889511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889514">switch</span>&nbsp;<span class="ident" id="2889521">k</span>&nbsp;<span class="op" id="2889523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889526">case</span>&nbsp;<span class="ident" id="2889531">Uint</span><span class="op" id="2889535">,</span>&nbsp;<span class="ident" id="2889537">Uintptr</span><span class="op" id="2889544">,</span>&nbsp;<span class="ident" id="2889546">Uint8</span><span class="op" id="2889551">,</span>&nbsp;<span class="ident" id="2889553">Uint16</span><span class="op" id="2889559">,</span>&nbsp;<span class="ident" id="2889561">Uint32</span><span class="op" id="2889567">,</span>&nbsp;<span class="ident" id="2889569">Uint64</span><span class="op" id="2889575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889579">bitSize</span>&nbsp;<span class="op" id="2889587">:=</span>&nbsp;<span class="ident" id="2889590">v</span><span class="op" id="2889591">.</span><span class="ident" id="2889592">typ</span><span class="op" id="2889595">.</span><span class="ident" id="2889596">size</span>&nbsp;<span class="op" id="2889601">*</span>&nbsp;<span class="num" id="2889603">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2889607">trunc</span>&nbsp;<span class="op" id="2889613">:=</span>&nbsp;<span class="op" id="2889616">(</span><span class="ident" id="2889617">x</span>&nbsp;<span class="op" id="2889619">&lt;&lt;</span>&nbsp;<span class="op" id="2889622">(</span><span class="num" id="2889623">64</span>&nbsp;<span class="op" id="2889626">-</span>&nbsp;<span class="ident" id="2889628">bitSize</span><span class="op" id="2889635">)</span><span class="op" id="2889636">)</span>&nbsp;<span class="op" id="2889638">&gt;&gt;</span>&nbsp;<span class="op" id="2889641">(</span><span class="num" id="2889642">64</span>&nbsp;<span class="op" id="2889645">-</span>&nbsp;<span class="ident" id="2889647">bitSize</span><span class="op" id="2889654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2889658">return</span>&nbsp;<span class="ident" id="2889665">x</span>&nbsp;<span class="op" id="2889667">!=</span>&nbsp;<span class="ident" id="2889670">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2889677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2889680">panic</span><span class="op" id="2889685">(</span><span class="op" id="2889686">&amp;</span><span class="ident" id="2889687">ValueError</span><span class="op" id="2889697">{</span><span class="string" id="2889698">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2889726">,</span>&nbsp;<span class="ident" id="2889728">v</span><span class="op" id="2889729">.</span><span class="ident" id="2889730">kind</span><span class="op" id="2889734">(</span><span class="op" id="2889735">)</span><span class="op" id="2889736">}</span><span class="op" id="2889737">)</span><br>
<span class="lineno"></span><span class="op" id="2889739">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2889742">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2889785">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2889841">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2889893">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2889945">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2890024">//</span><br>
<span class="lineno"></span><span class="comment" id="2890027">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2890089">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2890147">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2890207">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2890263">//</span><br>
<span class="lineno"></span><span class="comment" id="2890266">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2890328">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2890393">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2890467">func</span>&nbsp;<span class="op" id="2890472">(</span><span class="ident" id="2890473">v</span>&nbsp;<span class="ident" id="2890475">Value</span><span class="op" id="2890480">)</span>&nbsp;<span class="ident" id="2890482">Pointer</span><span class="op" id="2890489">(</span><span class="op" id="2890490">)</span>&nbsp;<span class="builtintype" id="2890492">uintptr</span>&nbsp;<span class="op" id="2890500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890503">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2890523">k</span>&nbsp;<span class="op" id="2890525">:=</span>&nbsp;<span class="ident" id="2890528">v</span><span class="op" id="2890529">.</span><span class="ident" id="2890530">kind</span><span class="op" id="2890534">(</span><span class="op" id="2890535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890538">switch</span>&nbsp;<span class="ident" id="2890545">k</span>&nbsp;<span class="op" id="2890547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890550">case</span>&nbsp;<span class="ident" id="2890555">Chan</span><span class="op" id="2890559">,</span>&nbsp;<span class="ident" id="2890561">Map</span><span class="op" id="2890564">,</span>&nbsp;<span class="ident" id="2890566">Ptr</span><span class="op" id="2890569">,</span>&nbsp;<span class="ident" id="2890571">UnsafePointer</span><span class="op" id="2890584">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890588">return</span>&nbsp;<span class="builtintype" id="2890595">uintptr</span><span class="op" id="2890602">(</span><span class="ident" id="2890603">v</span><span class="op" id="2890604">.</span><span class="ident" id="2890605">pointer</span><span class="op" id="2890612">(</span><span class="op" id="2890613">)</span><span class="op" id="2890614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890617">case</span>&nbsp;<span class="ident" id="2890622">Func</span><span class="op" id="2890626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2890630">if</span>&nbsp;<span class="ident" id="2890633">v</span><span class="op" id="2890634">.</span><span class="ident" id="2890635">flag</span><span class="op" id="2890639">&amp;</span><span class="ident" id="2890640">flagMethod</span>&nbsp;<span class="op" id="2890651">!=</span>&nbsp;<span class="num" id="2890654">0</span>&nbsp;<span class="op" id="2890656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890661">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890719">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890779">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890845">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890910">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2890973">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891018">f</span>&nbsp;<span class="op" id="2891020">:=</span>&nbsp;<span class="ident" id="2891023">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891042">return</span>&nbsp;<span class="op" id="2891049">*</span><span class="op" id="2891050">*</span><span class="op" id="2891051">(</span><span class="op" id="2891052">*</span><span class="op" id="2891053">*</span><span class="builtintype" id="2891054">uintptr</span><span class="op" id="2891061">)</span><span class="op" id="2891062">(</span><span class="ident" id="2891063">unsafe</span><span class="op" id="2891069">.</span><span class="ident" id="2891070">Pointer</span><span class="op" id="2891077">(</span><span class="op" id="2891078">&amp;</span><span class="ident" id="2891079">f</span><span class="op" id="2891080">)</span><span class="op" id="2891081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2891085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891089">p</span>&nbsp;<span class="op" id="2891091">:=</span>&nbsp;<span class="ident" id="2891094">v</span><span class="op" id="2891095">.</span><span class="ident" id="2891096">pointer</span><span class="op" id="2891103">(</span><span class="op" id="2891104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891108">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2891154">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891200">if</span>&nbsp;<span class="ident" id="2891203">p</span>&nbsp;<span class="op" id="2891205">!=</span>&nbsp;<span class="ident" id="2891208">nil</span>&nbsp;<span class="op" id="2891212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891217">p</span>&nbsp;<span class="op" id="2891219">=</span>&nbsp;<span class="op" id="2891221">*</span><span class="op" id="2891222">(</span><span class="op" id="2891223">*</span><span class="ident" id="2891224">unsafe</span><span class="op" id="2891230">.</span><span class="ident" id="2891231">Pointer</span><span class="op" id="2891238">)</span><span class="op" id="2891239">(</span><span class="ident" id="2891240">p</span><span class="op" id="2891241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2891245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891249">return</span>&nbsp;<span class="builtintype" id="2891256">uintptr</span><span class="op" id="2891263">(</span><span class="ident" id="2891264">p</span><span class="op" id="2891265">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891269">case</span>&nbsp;<span class="ident" id="2891274">Slice</span><span class="op" id="2891279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891283">return</span>&nbsp;<span class="op" id="2891290">(</span><span class="op" id="2891291">*</span><span class="ident" id="2891292">SliceHeader</span><span class="op" id="2891303">)</span><span class="op" id="2891304">(</span><span class="ident" id="2891305">v</span><span class="op" id="2891306">.</span><span class="ident" id="2891307">ptr</span><span class="op" id="2891310">)</span><span class="op" id="2891311">.</span><span class="ident" id="2891312">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2891318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2891321">panic</span><span class="op" id="2891326">(</span><span class="op" id="2891327">&amp;</span><span class="ident" id="2891328">ValueError</span><span class="op" id="2891338">{</span><span class="string" id="2891339">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2891362">,</span>&nbsp;<span class="ident" id="2891364">v</span><span class="op" id="2891365">.</span><span class="ident" id="2891366">kind</span><span class="op" id="2891370">(</span><span class="op" id="2891371">)</span><span class="op" id="2891372">}</span><span class="op" id="2891373">)</span><br>
<span class="lineno"></span><span class="op" id="2891375">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2891378">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2891435">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2891473">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2891519">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2891588">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2891675">func</span>&nbsp;<span class="op" id="2891680">(</span><span class="ident" id="2891681">v</span>&nbsp;<span class="ident" id="2891683">Value</span><span class="op" id="2891688">)</span>&nbsp;<span class="ident" id="2891690">Recv</span><span class="op" id="2891694">(</span><span class="op" id="2891695">)</span>&nbsp;<span class="op" id="2891697">(</span><span class="ident" id="2891698">x</span>&nbsp;<span class="ident" id="2891700">Value</span><span class="op" id="2891705">,</span>&nbsp;<span class="ident" id="2891707">ok</span>&nbsp;<span class="builtintype" id="2891710">bool</span><span class="op" id="2891714">)</span>&nbsp;<span class="op" id="2891716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891719">v</span><span class="op" id="2891720">.</span><span class="ident" id="2891721">mustBe</span><span class="op" id="2891727">(</span><span class="ident" id="2891728">Chan</span><span class="op" id="2891732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891735">v</span><span class="op" id="2891736">.</span><span class="ident" id="2891737">mustBeExported</span><span class="op" id="2891751">(</span><span class="op" id="2891752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891755">return</span>&nbsp;<span class="ident" id="2891762">v</span><span class="op" id="2891763">.</span><span class="ident" id="2891764">recv</span><span class="op" id="2891768">(</span><span class="builtintype" id="2891769">false</span><span class="op" id="2891774">)</span><br>
<span class="lineno">1235</span><span class="op" id="2891776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891779">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2891825">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2891856">func</span>&nbsp;<span class="op" id="2891861">(</span><span class="ident" id="2891862">v</span>&nbsp;<span class="ident" id="2891864">Value</span><span class="op" id="2891869">)</span>&nbsp;<span class="ident" id="2891871">recv</span><span class="op" id="2891875">(</span><span class="ident" id="2891876">nb</span>&nbsp;<span class="builtintype" id="2891879">bool</span><span class="op" id="2891883">)</span>&nbsp;<span class="op" id="2891885">(</span><span class="ident" id="2891886">val</span>&nbsp;<span class="ident" id="2891890">Value</span><span class="op" id="2891895">,</span>&nbsp;<span class="ident" id="2891897">ok</span>&nbsp;<span class="builtintype" id="2891900">bool</span><span class="op" id="2891904">)</span>&nbsp;<span class="op" id="2891906">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2891909">tt</span>&nbsp;<span class="op" id="2891912">:=</span>&nbsp;<span class="op" id="2891915">(</span><span class="op" id="2891916">*</span><span class="ident" id="2891917">chanType</span><span class="op" id="2891925">)</span><span class="op" id="2891926">(</span><span class="ident" id="2891927">unsafe</span><span class="op" id="2891933">.</span><span class="ident" id="2891934">Pointer</span><span class="op" id="2891941">(</span><span class="ident" id="2891942">v</span><span class="op" id="2891943">.</span><span class="ident" id="2891944">typ</span><span class="op" id="2891947">)</span><span class="op" id="2891948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2891951">if</span>&nbsp;<span class="ident" id="2891954">ChanDir</span><span class="op" id="2891961">(</span><span class="ident" id="2891962">tt</span><span class="op" id="2891964">.</span><span class="ident" id="2891965">dir</span><span class="op" id="2891968">)</span><span class="op" id="2891969">&amp;</span><span class="ident" id="2891970">RecvDir</span>&nbsp;<span class="op" id="2891978">==</span>&nbsp;<span class="num" id="2891981">0</span>&nbsp;<span class="op" id="2891983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2891987">panic</span><span class="op" id="2891992">(</span><span class="string" id="2891993">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2892029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892035">t</span>&nbsp;<span class="op" id="2892037">:=</span>&nbsp;<span class="ident" id="2892040">tt</span><span class="op" id="2892042">.</span><span class="ident" id="2892043">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892049">val</span>&nbsp;<span class="op" id="2892053">=</span>&nbsp;<span class="ident" id="2892055">Value</span><span class="op" id="2892060">{</span><span class="ident" id="2892061">t</span><span class="op" id="2892062">,</span>&nbsp;<span class="ident" id="2892064">nil</span><span class="op" id="2892067">,</span>&nbsp;<span class="ident" id="2892069">flag</span><span class="op" id="2892073">(</span><span class="ident" id="2892074">t</span><span class="op" id="2892075">.</span><span class="ident" id="2892076">Kind</span><span class="op" id="2892080">(</span><span class="op" id="2892081">)</span><span class="op" id="2892082">)</span><span class="op" id="2892083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892086">var</span>&nbsp;<span class="ident" id="2892090">p</span>&nbsp;<span class="ident" id="2892092">unsafe</span><span class="op" id="2892098">.</span><span class="ident" id="2892099">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892108">if</span>&nbsp;<span class="ident" id="2892111">ifaceIndir</span><span class="op" id="2892121">(</span><span class="ident" id="2892122">t</span><span class="op" id="2892123">)</span>&nbsp;<span class="op" id="2892125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892129">p</span>&nbsp;<span class="op" id="2892131">=</span>&nbsp;<span class="ident" id="2892133">unsafe_New</span><span class="op" id="2892143">(</span><span class="ident" id="2892144">t</span><span class="op" id="2892145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892149">val</span><span class="op" id="2892152">.</span><span class="ident" id="2892153">ptr</span>&nbsp;<span class="op" id="2892157">=</span>&nbsp;<span class="ident" id="2892159">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892163">val</span><span class="op" id="2892166">.</span><span class="ident" id="2892167">flag</span>&nbsp;<span class="op" id="2892172">|=</span>&nbsp;<span class="ident" id="2892175">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892186">}</span>&nbsp;<span class="keyword" id="2892188">else</span>&nbsp;<span class="op" id="2892193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892197">p</span>&nbsp;<span class="op" id="2892199">=</span>&nbsp;<span class="ident" id="2892201">unsafe</span><span class="op" id="2892207">.</span><span class="ident" id="2892208">Pointer</span><span class="op" id="2892215">(</span><span class="op" id="2892216">&amp;</span><span class="ident" id="2892217">val</span><span class="op" id="2892220">.</span><span class="ident" id="2892221">ptr</span><span class="op" id="2892224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892230">selected</span><span class="op" id="2892238">,</span>&nbsp;<span class="ident" id="2892240">ok</span>&nbsp;<span class="op" id="2892243">:=</span>&nbsp;<span class="ident" id="2892246">chanrecv</span><span class="op" id="2892254">(</span><span class="ident" id="2892255">v</span><span class="op" id="2892256">.</span><span class="ident" id="2892257">typ</span><span class="op" id="2892260">,</span>&nbsp;<span class="ident" id="2892262">v</span><span class="op" id="2892263">.</span><span class="ident" id="2892264">pointer</span><span class="op" id="2892271">(</span><span class="op" id="2892272">)</span><span class="op" id="2892273">,</span>&nbsp;<span class="ident" id="2892275">nb</span><span class="op" id="2892277">,</span>&nbsp;<span class="ident" id="2892279">p</span><span class="op" id="2892280">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892283">if</span>&nbsp;<span class="op" id="2892286">!</span><span class="ident" id="2892287">selected</span>&nbsp;<span class="op" id="2892296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892300">val</span>&nbsp;<span class="op" id="2892304">=</span>&nbsp;<span class="ident" id="2892306">Value</span><span class="op" id="2892311">{</span><span class="op" id="2892312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892318">return</span><br>
<span class="lineno"></span><span class="op" id="2892325">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2892328">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2892362">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2892456">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2892529">func</span>&nbsp;<span class="op" id="2892534">(</span><span class="ident" id="2892535">v</span>&nbsp;<span class="ident" id="2892537">Value</span><span class="op" id="2892542">)</span>&nbsp;<span class="ident" id="2892544">Send</span><span class="op" id="2892548">(</span><span class="ident" id="2892549">x</span>&nbsp;<span class="ident" id="2892551">Value</span><span class="op" id="2892556">)</span>&nbsp;<span class="op" id="2892558">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892561">v</span><span class="op" id="2892562">.</span><span class="ident" id="2892563">mustBe</span><span class="op" id="2892569">(</span><span class="ident" id="2892570">Chan</span><span class="op" id="2892574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892577">v</span><span class="op" id="2892578">.</span><span class="ident" id="2892579">mustBeExported</span><span class="op" id="2892593">(</span><span class="op" id="2892594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892597">v</span><span class="op" id="2892598">.</span><span class="ident" id="2892599">send</span><span class="op" id="2892603">(</span><span class="ident" id="2892604">x</span><span class="op" id="2892605">,</span>&nbsp;<span class="builtintype" id="2892607">false</span><span class="op" id="2892612">)</span><br>
<span class="lineno"></span><span class="op" id="2892614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2892617">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2892658">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2892689">func</span>&nbsp;<span class="op" id="2892694">(</span><span class="ident" id="2892695">v</span>&nbsp;<span class="ident" id="2892697">Value</span><span class="op" id="2892702">)</span>&nbsp;<span class="ident" id="2892704">send</span><span class="op" id="2892708">(</span><span class="ident" id="2892709">x</span>&nbsp;<span class="ident" id="2892711">Value</span><span class="op" id="2892716">,</span>&nbsp;<span class="ident" id="2892718">nb</span>&nbsp;<span class="builtintype" id="2892721">bool</span><span class="op" id="2892725">)</span>&nbsp;<span class="op" id="2892727">(</span><span class="ident" id="2892728">selected</span>&nbsp;<span class="builtintype" id="2892737">bool</span><span class="op" id="2892741">)</span>&nbsp;<span class="op" id="2892743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892746">tt</span>&nbsp;<span class="op" id="2892749">:=</span>&nbsp;<span class="op" id="2892752">(</span><span class="op" id="2892753">*</span><span class="ident" id="2892754">chanType</span><span class="op" id="2892762">)</span><span class="op" id="2892763">(</span><span class="ident" id="2892764">unsafe</span><span class="op" id="2892770">.</span><span class="ident" id="2892771">Pointer</span><span class="op" id="2892778">(</span><span class="ident" id="2892779">v</span><span class="op" id="2892780">.</span><span class="ident" id="2892781">typ</span><span class="op" id="2892784">)</span><span class="op" id="2892785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892788">if</span>&nbsp;<span class="ident" id="2892791">ChanDir</span><span class="op" id="2892798">(</span><span class="ident" id="2892799">tt</span><span class="op" id="2892801">.</span><span class="ident" id="2892802">dir</span><span class="op" id="2892805">)</span><span class="op" id="2892806">&amp;</span><span class="ident" id="2892807">SendDir</span>&nbsp;<span class="op" id="2892815">==</span>&nbsp;<span class="num" id="2892818">0</span>&nbsp;<span class="op" id="2892820">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2892824">panic</span><span class="op" id="2892829">(</span><span class="string" id="2892830">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2892866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2892869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892872">x</span><span class="op" id="2892873">.</span><span class="ident" id="2892874">mustBeExported</span><span class="op" id="2892888">(</span><span class="op" id="2892889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892892">x</span>&nbsp;<span class="op" id="2892894">=</span>&nbsp;<span class="ident" id="2892896">x</span><span class="op" id="2892897">.</span><span class="ident" id="2892898">assignTo</span><span class="op" id="2892906">(</span><span class="string" id="2892907">&#34;reflect.Value.Send&#34;</span><span class="op" id="2892927">,</span>&nbsp;<span class="ident" id="2892929">tt</span><span class="op" id="2892931">.</span><span class="ident" id="2892932">elem</span><span class="op" id="2892936">,</span>&nbsp;<span class="ident" id="2892938">nil</span><span class="op" id="2892941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892944">var</span>&nbsp;<span class="ident" id="2892948">p</span>&nbsp;<span class="ident" id="2892950">unsafe</span><span class="op" id="2892956">.</span><span class="ident" id="2892957">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2892966">if</span>&nbsp;<span class="ident" id="2892969">x</span><span class="op" id="2892970">.</span><span class="ident" id="2892971">flag</span><span class="op" id="2892975">&amp;</span><span class="ident" id="2892976">flagIndir</span>&nbsp;<span class="op" id="2892986">!=</span>&nbsp;<span class="num" id="2892989">0</span>&nbsp;<span class="op" id="2892991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2892995">p</span>&nbsp;<span class="op" id="2892997">=</span>&nbsp;<span class="ident" id="2892999">x</span><span class="op" id="2893000">.</span><span class="ident" id="2893001">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893006">}</span>&nbsp;<span class="keyword" id="2893008">else</span>&nbsp;<span class="op" id="2893013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893017">p</span>&nbsp;<span class="op" id="2893019">=</span>&nbsp;<span class="ident" id="2893021">unsafe</span><span class="op" id="2893027">.</span><span class="ident" id="2893028">Pointer</span><span class="op" id="2893035">(</span><span class="op" id="2893036">&amp;</span><span class="ident" id="2893037">x</span><span class="op" id="2893038">.</span><span class="ident" id="2893039">ptr</span><span class="op" id="2893042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893045">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893048">return</span>&nbsp;<span class="ident" id="2893055">chansend</span><span class="op" id="2893063">(</span><span class="ident" id="2893064">v</span><span class="op" id="2893065">.</span><span class="ident" id="2893066">typ</span><span class="op" id="2893069">,</span>&nbsp;<span class="ident" id="2893071">v</span><span class="op" id="2893072">.</span><span class="ident" id="2893073">pointer</span><span class="op" id="2893080">(</span><span class="op" id="2893081">)</span><span class="op" id="2893082">,</span>&nbsp;<span class="ident" id="2893084">p</span><span class="op" id="2893085">,</span>&nbsp;<span class="ident" id="2893087">nb</span><span class="op" id="2893089">)</span><br>
<span class="lineno"></span><span class="op" id="2893091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893094">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2893127">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2893165">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2893220">func</span>&nbsp;<span class="op" id="2893225">(</span><span class="ident" id="2893226">v</span>&nbsp;<span class="ident" id="2893228">Value</span><span class="op" id="2893233">)</span>&nbsp;<span class="ident" id="2893235">Set</span><span class="op" id="2893238">(</span><span class="ident" id="2893239">x</span>&nbsp;<span class="ident" id="2893241">Value</span><span class="op" id="2893246">)</span>&nbsp;<span class="op" id="2893248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893251">v</span><span class="op" id="2893252">.</span><span class="ident" id="2893253">mustBeAssignable</span><span class="op" id="2893269">(</span><span class="op" id="2893270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893273">x</span><span class="op" id="2893274">.</span><span class="ident" id="2893275">mustBeExported</span><span class="op" id="2893289">(</span><span class="op" id="2893290">)</span>&nbsp;<span class="comment" id="2893292">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893325">var</span>&nbsp;<span class="ident" id="2893329">target</span>&nbsp;<span class="ident" id="2893336">unsafe</span><span class="op" id="2893342">.</span><span class="ident" id="2893343">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893352">if</span>&nbsp;<span class="ident" id="2893355">v</span><span class="op" id="2893356">.</span><span class="ident" id="2893357">kind</span><span class="op" id="2893361">(</span><span class="op" id="2893362">)</span>&nbsp;<span class="op" id="2893364">==</span>&nbsp;<span class="ident" id="2893367">Interface</span>&nbsp;<span class="op" id="2893377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893381">target</span>&nbsp;<span class="op" id="2893388">=</span>&nbsp;<span class="ident" id="2893390">v</span><span class="op" id="2893391">.</span><span class="ident" id="2893392">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893400">x</span>&nbsp;<span class="op" id="2893402">=</span>&nbsp;<span class="ident" id="2893404">x</span><span class="op" id="2893405">.</span><span class="ident" id="2893406">assignTo</span><span class="op" id="2893414">(</span><span class="string" id="2893415">&#34;reflect.Set&#34;</span><span class="op" id="2893428">,</span>&nbsp;<span class="ident" id="2893430">v</span><span class="op" id="2893431">.</span><span class="ident" id="2893432">typ</span><span class="op" id="2893435">,</span>&nbsp;<span class="ident" id="2893437">target</span><span class="op" id="2893443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893446">if</span>&nbsp;<span class="ident" id="2893449">x</span><span class="op" id="2893450">.</span><span class="ident" id="2893451">flag</span><span class="op" id="2893455">&amp;</span><span class="ident" id="2893456">flagIndir</span>&nbsp;<span class="op" id="2893466">!=</span>&nbsp;<span class="num" id="2893469">0</span>&nbsp;<span class="op" id="2893471">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893475">memmove</span><span class="op" id="2893482">(</span><span class="ident" id="2893483">v</span><span class="op" id="2893484">.</span><span class="ident" id="2893485">ptr</span><span class="op" id="2893488">,</span>&nbsp;<span class="ident" id="2893490">x</span><span class="op" id="2893491">.</span><span class="ident" id="2893492">ptr</span><span class="op" id="2893495">,</span>&nbsp;<span class="ident" id="2893497">v</span><span class="op" id="2893498">.</span><span class="ident" id="2893499">typ</span><span class="op" id="2893502">.</span><span class="ident" id="2893503">size</span><span class="op" id="2893507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893510">}</span>&nbsp;<span class="keyword" id="2893512">else</span>&nbsp;<span class="op" id="2893517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893521">*</span><span class="op" id="2893522">(</span><span class="op" id="2893523">*</span><span class="ident" id="2893524">unsafe</span><span class="op" id="2893530">.</span><span class="ident" id="2893531">Pointer</span><span class="op" id="2893538">)</span><span class="op" id="2893539">(</span><span class="ident" id="2893540">v</span><span class="op" id="2893541">.</span><span class="ident" id="2893542">ptr</span><span class="op" id="2893545">)</span>&nbsp;<span class="op" id="2893547">=</span>&nbsp;<span class="ident" id="2893549">x</span><span class="op" id="2893550">.</span><span class="ident" id="2893551">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893556">}</span><br>
<span class="lineno"></span><span class="op" id="2893558">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2893561">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2893599">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2893661">func</span>&nbsp;<span class="op" id="2893666">(</span><span class="ident" id="2893667">v</span>&nbsp;<span class="ident" id="2893669">Value</span><span class="op" id="2893674">)</span>&nbsp;<span class="ident" id="2893676">SetBool</span><span class="op" id="2893683">(</span><span class="ident" id="2893684">x</span>&nbsp;<span class="builtintype" id="2893686">bool</span><span class="op" id="2893690">)</span>&nbsp;<span class="op" id="2893692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893695">v</span><span class="op" id="2893696">.</span><span class="ident" id="2893697">mustBeAssignable</span><span class="op" id="2893713">(</span><span class="op" id="2893714">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893717">v</span><span class="op" id="2893718">.</span><span class="ident" id="2893719">mustBe</span><span class="op" id="2893725">(</span><span class="ident" id="2893726">Bool</span><span class="op" id="2893730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2893733">*</span><span class="op" id="2893734">(</span><span class="op" id="2893735">*</span><span class="builtintype" id="2893736">bool</span><span class="op" id="2893740">)</span><span class="op" id="2893741">(</span><span class="ident" id="2893742">v</span><span class="op" id="2893743">.</span><span class="ident" id="2893744">ptr</span><span class="op" id="2893747">)</span>&nbsp;<span class="op" id="2893749">=</span>&nbsp;<span class="ident" id="2893751">x</span><br>
<span class="lineno"></span><span class="op" id="2893753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893756">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2893795">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2893857">func</span>&nbsp;<span class="op" id="2893862">(</span><span class="ident" id="2893863">v</span>&nbsp;<span class="ident" id="2893865">Value</span><span class="op" id="2893870">)</span>&nbsp;<span class="ident" id="2893872">SetBytes</span><span class="op" id="2893880">(</span><span class="ident" id="2893881">x</span>&nbsp;<span class="op" id="2893883">[</span><span class="op" id="2893884">]</span><span class="builtintype" id="2893885">byte</span><span class="op" id="2893889">)</span>&nbsp;<span class="op" id="2893891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893894">v</span><span class="op" id="2893895">.</span><span class="ident" id="2893896">mustBeAssignable</span><span class="op" id="2893912">(</span><span class="op" id="2893913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2893916">v</span><span class="op" id="2893917">.</span><span class="ident" id="2893918">mustBe</span><span class="op" id="2893924">(</span><span class="ident" id="2893925">Slice</span><span class="op" id="2893930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2893933">if</span>&nbsp;<span class="ident" id="2893936">v</span><span class="op" id="2893937">.</span><span class="ident" id="2893938">typ</span><span class="op" id="2893941">.</span><span class="ident" id="2893942">Elem</span><span class="op" id="2893946">(</span><span class="op" id="2893947">)</span><span class="op" id="2893948">.</span><span class="ident" id="2893949">Kind</span><span class="op" id="2893953">(</span><span class="op" id="2893954">)</span>&nbsp;<span class="op" id="2893956">!=</span>&nbsp;<span class="ident" id="2893959">Uint8</span>&nbsp;<span class="op" id="2893965">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2893969">panic</span><span class="op" id="2893974">(</span><span class="string" id="2893975">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2894017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894023">*</span><span class="op" id="2894024">(</span><span class="op" id="2894025">*</span><span class="op" id="2894026">[</span><span class="op" id="2894027">]</span><span class="builtintype" id="2894028">byte</span><span class="op" id="2894032">)</span><span class="op" id="2894033">(</span><span class="ident" id="2894034">v</span><span class="op" id="2894035">.</span><span class="ident" id="2894036">ptr</span><span class="op" id="2894039">)</span>&nbsp;<span class="op" id="2894041">=</span>&nbsp;<span class="ident" id="2894043">x</span><br>
<span class="lineno"></span><span class="op" id="2894045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2894048">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2894087">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2894158">func</span>&nbsp;<span class="op" id="2894163">(</span><span class="ident" id="2894164">v</span>&nbsp;<span class="ident" id="2894166">Value</span><span class="op" id="2894171">)</span>&nbsp;<span class="ident" id="2894173">setRunes</span><span class="op" id="2894181">(</span><span class="ident" id="2894182">x</span>&nbsp;<span class="op" id="2894184">[</span><span class="op" id="2894185">]</span><span class="builtintype" id="2894186">rune</span><span class="op" id="2894190">)</span>&nbsp;<span class="op" id="2894192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894195">v</span><span class="op" id="2894196">.</span><span class="ident" id="2894197">mustBeAssignable</span><span class="op" id="2894213">(</span><span class="op" id="2894214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894217">v</span><span class="op" id="2894218">.</span><span class="ident" id="2894219">mustBe</span><span class="op" id="2894225">(</span><span class="ident" id="2894226">Slice</span><span class="op" id="2894231">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894234">if</span>&nbsp;<span class="ident" id="2894237">v</span><span class="op" id="2894238">.</span><span class="ident" id="2894239">typ</span><span class="op" id="2894242">.</span><span class="ident" id="2894243">Elem</span><span class="op" id="2894247">(</span><span class="op" id="2894248">)</span><span class="op" id="2894249">.</span><span class="ident" id="2894250">Kind</span><span class="op" id="2894254">(</span><span class="op" id="2894255">)</span>&nbsp;<span class="op" id="2894257">!=</span>&nbsp;<span class="ident" id="2894260">Int32</span>&nbsp;<span class="op" id="2894266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2894270">panic</span><span class="op" id="2894275">(</span><span class="string" id="2894276">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2894318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894324">*</span><span class="op" id="2894325">(</span><span class="op" id="2894326">*</span><span class="op" id="2894327">[</span><span class="op" id="2894328">]</span><span class="builtintype" id="2894329">rune</span><span class="op" id="2894333">)</span><span class="op" id="2894334">(</span><span class="ident" id="2894335">v</span><span class="op" id="2894336">.</span><span class="ident" id="2894337">ptr</span><span class="op" id="2894340">)</span>&nbsp;<span class="op" id="2894342">=</span>&nbsp;<span class="ident" id="2894344">x</span><br>
<span class="lineno"></span><span class="op" id="2894346">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2894349">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2894395">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2894477">func</span>&nbsp;<span class="op" id="2894482">(</span><span class="ident" id="2894483">v</span>&nbsp;<span class="ident" id="2894485">Value</span><span class="op" id="2894490">)</span>&nbsp;<span class="ident" id="2894492">SetComplex</span><span class="op" id="2894502">(</span><span class="ident" id="2894503">x</span>&nbsp;<span class="builtintype" id="2894505">complex128</span><span class="op" id="2894515">)</span>&nbsp;<span class="op" id="2894517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894520">v</span><span class="op" id="2894521">.</span><span class="ident" id="2894522">mustBeAssignable</span><span class="op" id="2894538">(</span><span class="op" id="2894539">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894542">switch</span>&nbsp;<span class="ident" id="2894549">k</span>&nbsp;<span class="op" id="2894551">:=</span>&nbsp;<span class="ident" id="2894554">v</span><span class="op" id="2894555">.</span><span class="ident" id="2894556">kind</span><span class="op" id="2894560">(</span><span class="op" id="2894561">)</span><span class="op" id="2894562">;</span>&nbsp;<span class="ident" id="2894564">k</span>&nbsp;<span class="op" id="2894566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894569">default</span><span class="op" id="2894576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2894580">panic</span><span class="op" id="2894585">(</span><span class="op" id="2894586">&amp;</span><span class="ident" id="2894587">ValueError</span><span class="op" id="2894597">{</span><span class="string" id="2894598">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2894624">,</span>&nbsp;<span class="ident" id="2894626">v</span><span class="op" id="2894627">.</span><span class="ident" id="2894628">kind</span><span class="op" id="2894632">(</span><span class="op" id="2894633">)</span><span class="op" id="2894634">}</span><span class="op" id="2894635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894638">case</span>&nbsp;<span class="ident" id="2894643">Complex64</span><span class="op" id="2894652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894656">*</span><span class="op" id="2894657">(</span><span class="op" id="2894658">*</span><span class="builtintype" id="2894659">complex64</span><span class="op" id="2894668">)</span><span class="op" id="2894669">(</span><span class="ident" id="2894670">v</span><span class="op" id="2894671">.</span><span class="ident" id="2894672">ptr</span><span class="op" id="2894675">)</span>&nbsp;<span class="op" id="2894677">=</span>&nbsp;<span class="builtintype" id="2894679">complex64</span><span class="op" id="2894688">(</span><span class="ident" id="2894689">x</span><span class="op" id="2894690">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894693">case</span>&nbsp;<span class="ident" id="2894698">Complex128</span><span class="op" id="2894708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894712">*</span><span class="op" id="2894713">(</span><span class="op" id="2894714">*</span><span class="builtintype" id="2894715">complex128</span><span class="op" id="2894725">)</span><span class="op" id="2894726">(</span><span class="ident" id="2894727">v</span><span class="op" id="2894728">.</span><span class="ident" id="2894729">ptr</span><span class="op" id="2894732">)</span>&nbsp;<span class="op" id="2894734">=</span>&nbsp;<span class="ident" id="2894736">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2894739">}</span><br>
<span class="lineno"></span><span class="op" id="2894741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2894744">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2894788">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2894865">func</span>&nbsp;<span class="op" id="2894870">(</span><span class="ident" id="2894871">v</span>&nbsp;<span class="ident" id="2894873">Value</span><span class="op" id="2894878">)</span>&nbsp;<span class="ident" id="2894880">SetFloat</span><span class="op" id="2894888">(</span><span class="ident" id="2894889">x</span>&nbsp;<span class="builtintype" id="2894891">float64</span><span class="op" id="2894898">)</span>&nbsp;<span class="op" id="2894900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2894903">v</span><span class="op" id="2894904">.</span><span class="ident" id="2894905">mustBeAssignable</span><span class="op" id="2894921">(</span><span class="op" id="2894922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894925">switch</span>&nbsp;<span class="ident" id="2894932">k</span>&nbsp;<span class="op" id="2894934">:=</span>&nbsp;<span class="ident" id="2894937">v</span><span class="op" id="2894938">.</span><span class="ident" id="2894939">kind</span><span class="op" id="2894943">(</span><span class="op" id="2894944">)</span><span class="op" id="2894945">;</span>&nbsp;<span class="ident" id="2894947">k</span>&nbsp;<span class="op" id="2894949">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2894952">default</span><span class="op" id="2894959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2894963">panic</span><span class="op" id="2894968">(</span><span class="op" id="2894969">&amp;</span><span class="ident" id="2894970">ValueError</span><span class="op" id="2894980">{</span><span class="string" id="2894981">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2895005">,</span>&nbsp;<span class="ident" id="2895007">v</span><span class="op" id="2895008">.</span><span class="ident" id="2895009">kind</span><span class="op" id="2895013">(</span><span class="op" id="2895014">)</span><span class="op" id="2895015">}</span><span class="op" id="2895016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895019">case</span>&nbsp;<span class="ident" id="2895024">Float32</span><span class="op" id="2895031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895035">*</span><span class="op" id="2895036">(</span><span class="op" id="2895037">*</span><span class="builtintype" id="2895038">float32</span><span class="op" id="2895045">)</span><span class="op" id="2895046">(</span><span class="ident" id="2895047">v</span><span class="op" id="2895048">.</span><span class="ident" id="2895049">ptr</span><span class="op" id="2895052">)</span>&nbsp;<span class="op" id="2895054">=</span>&nbsp;<span class="builtintype" id="2895056">float32</span><span class="op" id="2895063">(</span><span class="ident" id="2895064">x</span><span class="op" id="2895065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895068">case</span>&nbsp;<span class="ident" id="2895073">Float64</span><span class="op" id="2895080">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895084">*</span><span class="op" id="2895085">(</span><span class="op" id="2895086">*</span><span class="builtintype" id="2895087">float64</span><span class="op" id="2895094">)</span><span class="op" id="2895095">(</span><span class="ident" id="2895096">v</span><span class="op" id="2895097">.</span><span class="ident" id="2895098">ptr</span><span class="op" id="2895101">)</span>&nbsp;<span class="op" id="2895103">=</span>&nbsp;<span class="ident" id="2895105">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895108">}</span><br>
<span class="lineno"></span><span class="op" id="2895110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2895113">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2895155">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2895247">func</span>&nbsp;<span class="op" id="2895252">(</span><span class="ident" id="2895253">v</span>&nbsp;<span class="ident" id="2895255">Value</span><span class="op" id="2895260">)</span>&nbsp;<span class="ident" id="2895262">SetInt</span><span class="op" id="2895268">(</span><span class="ident" id="2895269">x</span>&nbsp;<span class="ident" id="2895271">int64</span><span class="op" id="2895276">)</span>&nbsp;<span class="op" id="2895278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895281">v</span><span class="op" id="2895282">.</span><span class="ident" id="2895283">mustBeAssignable</span><span class="op" id="2895299">(</span><span class="op" id="2895300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895303">switch</span>&nbsp;<span class="ident" id="2895310">k</span>&nbsp;<span class="op" id="2895312">:=</span>&nbsp;<span class="ident" id="2895315">v</span><span class="op" id="2895316">.</span><span class="ident" id="2895317">kind</span><span class="op" id="2895321">(</span><span class="op" id="2895322">)</span><span class="op" id="2895323">;</span>&nbsp;<span class="ident" id="2895325">k</span>&nbsp;<span class="op" id="2895327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895330">default</span><span class="op" id="2895337">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2895341">panic</span><span class="op" id="2895346">(</span><span class="op" id="2895347">&amp;</span><span class="ident" id="2895348">ValueError</span><span class="op" id="2895358">{</span><span class="string" id="2895359">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2895381">,</span>&nbsp;<span class="ident" id="2895383">v</span><span class="op" id="2895384">.</span><span class="ident" id="2895385">kind</span><span class="op" id="2895389">(</span><span class="op" id="2895390">)</span><span class="op" id="2895391">}</span><span class="op" id="2895392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895395">case</span>&nbsp;<span class="ident" id="2895400">Int</span><span class="op" id="2895403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895407">*</span><span class="op" id="2895408">(</span><span class="op" id="2895409">*</span><span class="builtintype" id="2895410">int</span><span class="op" id="2895413">)</span><span class="op" id="2895414">(</span><span class="ident" id="2895415">v</span><span class="op" id="2895416">.</span><span class="ident" id="2895417">ptr</span><span class="op" id="2895420">)</span>&nbsp;<span class="op" id="2895422">=</span>&nbsp;<span class="builtintype" id="2895424">int</span><span class="op" id="2895427">(</span><span class="ident" id="2895428">x</span><span class="op" id="2895429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895432">case</span>&nbsp;<span class="ident" id="2895437">Int8</span><span class="op" id="2895441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895445">*</span><span class="op" id="2895446">(</span><span class="op" id="2895447">*</span><span class="builtintype" id="2895448">int8</span><span class="op" id="2895452">)</span><span class="op" id="2895453">(</span><span class="ident" id="2895454">v</span><span class="op" id="2895455">.</span><span class="ident" id="2895456">ptr</span><span class="op" id="2895459">)</span>&nbsp;<span class="op" id="2895461">=</span>&nbsp;<span class="builtintype" id="2895463">int8</span><span class="op" id="2895467">(</span><span class="ident" id="2895468">x</span><span class="op" id="2895469">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895472">case</span>&nbsp;<span class="ident" id="2895477">Int16</span><span class="op" id="2895482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895486">*</span><span class="op" id="2895487">(</span><span class="op" id="2895488">*</span><span class="builtintype" id="2895489">int16</span><span class="op" id="2895494">)</span><span class="op" id="2895495">(</span><span class="ident" id="2895496">v</span><span class="op" id="2895497">.</span><span class="ident" id="2895498">ptr</span><span class="op" id="2895501">)</span>&nbsp;<span class="op" id="2895503">=</span>&nbsp;<span class="builtintype" id="2895505">int16</span><span class="op" id="2895510">(</span><span class="ident" id="2895511">x</span><span class="op" id="2895512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895515">case</span>&nbsp;<span class="ident" id="2895520">Int32</span><span class="op" id="2895525">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895529">*</span><span class="op" id="2895530">(</span><span class="op" id="2895531">*</span><span class="builtintype" id="2895532">int32</span><span class="op" id="2895537">)</span><span class="op" id="2895538">(</span><span class="ident" id="2895539">v</span><span class="op" id="2895540">.</span><span class="ident" id="2895541">ptr</span><span class="op" id="2895544">)</span>&nbsp;<span class="op" id="2895546">=</span>&nbsp;<span class="builtintype" id="2895548">int32</span><span class="op" id="2895553">(</span><span class="ident" id="2895554">x</span><span class="op" id="2895555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895558">case</span>&nbsp;<span class="ident" id="2895563">Int64</span><span class="op" id="2895568">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895572">*</span><span class="op" id="2895573">(</span><span class="op" id="2895574">*</span><span class="ident" id="2895575">int64</span><span class="op" id="2895580">)</span><span class="op" id="2895581">(</span><span class="ident" id="2895582">v</span><span class="op" id="2895583">.</span><span class="ident" id="2895584">ptr</span><span class="op" id="2895587">)</span>&nbsp;<span class="op" id="2895589">=</span>&nbsp;<span class="ident" id="2895591">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895594">}</span><br>
<span class="lineno"></span><span class="op" id="2895596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2895599">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2895631">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2895692">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2895735">func</span>&nbsp;<span class="op" id="2895740">(</span><span class="ident" id="2895741">v</span>&nbsp;<span class="ident" id="2895743">Value</span><span class="op" id="2895748">)</span>&nbsp;<span class="ident" id="2895750">SetLen</span><span class="op" id="2895756">(</span><span class="ident" id="2895757">n</span>&nbsp;<span class="builtintype" id="2895759">int</span><span class="op" id="2895762">)</span>&nbsp;<span class="op" id="2895764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895767">v</span><span class="op" id="2895768">.</span><span class="ident" id="2895769">mustBeAssignable</span><span class="op" id="2895785">(</span><span class="op" id="2895786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895789">v</span><span class="op" id="2895790">.</span><span class="ident" id="2895791">mustBe</span><span class="op" id="2895797">(</span><span class="ident" id="2895798">Slice</span><span class="op" id="2895803">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895806">s</span>&nbsp;<span class="op" id="2895808">:=</span>&nbsp;<span class="op" id="2895811">(</span><span class="op" id="2895812">*</span><span class="ident" id="2895813">sliceHeader</span><span class="op" id="2895824">)</span><span class="op" id="2895825">(</span><span class="ident" id="2895826">v</span><span class="op" id="2895827">.</span><span class="ident" id="2895828">ptr</span><span class="op" id="2895831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2895834">if</span>&nbsp;<span class="builtintype" id="2895837">uint</span><span class="op" id="2895841">(</span><span class="ident" id="2895842">n</span><span class="op" id="2895843">)</span>&nbsp;<span class="op" id="2895845">&gt;</span>&nbsp;<span class="builtintype" id="2895847">uint</span><span class="op" id="2895851">(</span><span class="ident" id="2895852">s</span><span class="op" id="2895853">.</span><span class="ident" id="2895854">Cap</span><span class="op" id="2895857">)</span>&nbsp;<span class="op" id="2895859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2895863">panic</span><span class="op" id="2895868">(</span><span class="string" id="2895869">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2895915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2895918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2895921">s</span><span class="op" id="2895922">.</span><span class="ident" id="2895923">Len</span>&nbsp;<span class="op" id="2895927">=</span>&nbsp;<span class="ident" id="2895929">n</span><br>
<span class="lineno">1395</span><span class="op" id="2895931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2895934">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2895968">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2896044">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2896087">func</span>&nbsp;<span class="op" id="2896092">(</span><span class="ident" id="2896093">v</span>&nbsp;<span class="ident" id="2896095">Value</span><span class="op" id="2896100">)</span>&nbsp;<span class="ident" id="2896102">SetCap</span><span class="op" id="2896108">(</span><span class="ident" id="2896109">n</span>&nbsp;<span class="builtintype" id="2896111">int</span><span class="op" id="2896114">)</span>&nbsp;<span class="op" id="2896116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896119">v</span><span class="op" id="2896120">.</span><span class="ident" id="2896121">mustBeAssignable</span><span class="op" id="2896137">(</span><span class="op" id="2896138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896141">v</span><span class="op" id="2896142">.</span><span class="ident" id="2896143">mustBe</span><span class="op" id="2896149">(</span><span class="ident" id="2896150">Slice</span><span class="op" id="2896155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896158">s</span>&nbsp;<span class="op" id="2896160">:=</span>&nbsp;<span class="op" id="2896163">(</span><span class="op" id="2896164">*</span><span class="ident" id="2896165">sliceHeader</span><span class="op" id="2896176">)</span><span class="op" id="2896177">(</span><span class="ident" id="2896178">v</span><span class="op" id="2896179">.</span><span class="ident" id="2896180">ptr</span><span class="op" id="2896183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896186">if</span>&nbsp;<span class="ident" id="2896189">n</span>&nbsp;<span class="op" id="2896191">&lt;</span>&nbsp;<span class="builtintype" id="2896193">int</span><span class="op" id="2896196">(</span><span class="ident" id="2896197">s</span><span class="op" id="2896198">.</span><span class="ident" id="2896199">Len</span><span class="op" id="2896202">)</span>&nbsp;<span class="op" id="2896204">||</span>&nbsp;<span class="ident" id="2896207">n</span>&nbsp;<span class="op" id="2896209">&gt;</span>&nbsp;<span class="builtintype" id="2896211">int</span><span class="op" id="2896214">(</span><span class="ident" id="2896215">s</span><span class="op" id="2896216">.</span><span class="ident" id="2896217">Cap</span><span class="op" id="2896220">)</span>&nbsp;<span class="op" id="2896222">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2896226">panic</span><span class="op" id="2896231">(</span><span class="string" id="2896232">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2896280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896286">s</span><span class="op" id="2896287">.</span><span class="ident" id="2896288">Cap</span>&nbsp;<span class="op" id="2896292">=</span>&nbsp;<span class="ident" id="2896294">n</span><br>
<span class="lineno"></span><span class="op" id="2896296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2896299">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2896370">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2896407">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2896478">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2896537">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2896604">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2896667">func</span>&nbsp;<span class="op" id="2896672">(</span><span class="ident" id="2896673">v</span>&nbsp;<span class="ident" id="2896675">Value</span><span class="op" id="2896680">)</span>&nbsp;<span class="ident" id="2896682">SetMapIndex</span><span class="op" id="2896693">(</span><span class="ident" id="2896694">key</span><span class="op" id="2896697">,</span>&nbsp;<span class="ident" id="2896699">val</span>&nbsp;<span class="ident" id="2896703">Value</span><span class="op" id="2896708">)</span>&nbsp;<span class="op" id="2896710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896713">v</span><span class="op" id="2896714">.</span><span class="ident" id="2896715">mustBe</span><span class="op" id="2896721">(</span><span class="ident" id="2896722">Map</span><span class="op" id="2896725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896728">v</span><span class="op" id="2896729">.</span><span class="ident" id="2896730">mustBeExported</span><span class="op" id="2896744">(</span><span class="op" id="2896745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896748">key</span><span class="op" id="2896751">.</span><span class="ident" id="2896752">mustBeExported</span><span class="op" id="2896766">(</span><span class="op" id="2896767">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896770">tt</span>&nbsp;<span class="op" id="2896773">:=</span>&nbsp;<span class="op" id="2896776">(</span><span class="op" id="2896777">*</span><span class="ident" id="2896778">mapType</span><span class="op" id="2896785">)</span><span class="op" id="2896786">(</span><span class="ident" id="2896787">unsafe</span><span class="op" id="2896793">.</span><span class="ident" id="2896794">Pointer</span><span class="op" id="2896801">(</span><span class="ident" id="2896802">v</span><span class="op" id="2896803">.</span><span class="ident" id="2896804">typ</span><span class="op" id="2896807">)</span><span class="op" id="2896808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896811">key</span>&nbsp;<span class="op" id="2896815">=</span>&nbsp;<span class="ident" id="2896817">key</span><span class="op" id="2896820">.</span><span class="ident" id="2896821">assignTo</span><span class="op" id="2896829">(</span><span class="string" id="2896830">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2896857">,</span>&nbsp;<span class="ident" id="2896859">tt</span><span class="op" id="2896861">.</span><span class="ident" id="2896862">key</span><span class="op" id="2896865">,</span>&nbsp;<span class="ident" id="2896867">nil</span><span class="op" id="2896870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896873">var</span>&nbsp;<span class="ident" id="2896877">k</span>&nbsp;<span class="ident" id="2896879">unsafe</span><span class="op" id="2896885">.</span><span class="ident" id="2896886">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896895">if</span>&nbsp;<span class="ident" id="2896898">key</span><span class="op" id="2896901">.</span><span class="ident" id="2896902">flag</span><span class="op" id="2896906">&amp;</span><span class="ident" id="2896907">flagIndir</span>&nbsp;<span class="op" id="2896917">!=</span>&nbsp;<span class="num" id="2896920">0</span>&nbsp;<span class="op" id="2896922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896926">k</span>&nbsp;<span class="op" id="2896928">=</span>&nbsp;<span class="ident" id="2896930">key</span><span class="op" id="2896933">.</span><span class="ident" id="2896934">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896939">}</span>&nbsp;<span class="keyword" id="2896941">else</span>&nbsp;<span class="op" id="2896946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2896950">k</span>&nbsp;<span class="op" id="2896952">=</span>&nbsp;<span class="ident" id="2896954">unsafe</span><span class="op" id="2896960">.</span><span class="ident" id="2896961">Pointer</span><span class="op" id="2896968">(</span><span class="op" id="2896969">&amp;</span><span class="ident" id="2896970">key</span><span class="op" id="2896973">.</span><span class="ident" id="2896974">ptr</span><span class="op" id="2896977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2896980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2896983">if</span>&nbsp;<span class="ident" id="2896986">val</span><span class="op" id="2896989">.</span><span class="ident" id="2896990">typ</span>&nbsp;<span class="op" id="2896994">==</span>&nbsp;<span class="ident" id="2896997">nil</span>&nbsp;<span class="op" id="2897001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897005">mapdelete</span><span class="op" id="2897014">(</span><span class="ident" id="2897015">v</span><span class="op" id="2897016">.</span><span class="ident" id="2897017">typ</span><span class="op" id="2897020">,</span>&nbsp;<span class="ident" id="2897022">v</span><span class="op" id="2897023">.</span><span class="ident" id="2897024">pointer</span><span class="op" id="2897031">(</span><span class="op" id="2897032">)</span><span class="op" id="2897033">,</span>&nbsp;<span class="ident" id="2897035">k</span><span class="op" id="2897036">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897040">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897051">val</span><span class="op" id="2897054">.</span><span class="ident" id="2897055">mustBeExported</span><span class="op" id="2897069">(</span><span class="op" id="2897070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897073">val</span>&nbsp;<span class="op" id="2897077">=</span>&nbsp;<span class="ident" id="2897079">val</span><span class="op" id="2897082">.</span><span class="ident" id="2897083">assignTo</span><span class="op" id="2897091">(</span><span class="string" id="2897092">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2897119">,</span>&nbsp;<span class="ident" id="2897121">tt</span><span class="op" id="2897123">.</span><span class="ident" id="2897124">elem</span><span class="op" id="2897128">,</span>&nbsp;<span class="ident" id="2897130">nil</span><span class="op" id="2897133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897136">var</span>&nbsp;<span class="ident" id="2897140">e</span>&nbsp;<span class="ident" id="2897142">unsafe</span><span class="op" id="2897148">.</span><span class="ident" id="2897149">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897158">if</span>&nbsp;<span class="ident" id="2897161">val</span><span class="op" id="2897164">.</span><span class="ident" id="2897165">flag</span><span class="op" id="2897169">&amp;</span><span class="ident" id="2897170">flagIndir</span>&nbsp;<span class="op" id="2897180">!=</span>&nbsp;<span class="num" id="2897183">0</span>&nbsp;<span class="op" id="2897185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897189">e</span>&nbsp;<span class="op" id="2897191">=</span>&nbsp;<span class="ident" id="2897193">val</span><span class="op" id="2897196">.</span><span class="ident" id="2897197">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897202">}</span>&nbsp;<span class="keyword" id="2897204">else</span>&nbsp;<span class="op" id="2897209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897213">e</span>&nbsp;<span class="op" id="2897215">=</span>&nbsp;<span class="ident" id="2897217">unsafe</span><span class="op" id="2897223">.</span><span class="ident" id="2897224">Pointer</span><span class="op" id="2897231">(</span><span class="op" id="2897232">&amp;</span><span class="ident" id="2897233">val</span><span class="op" id="2897236">.</span><span class="ident" id="2897237">ptr</span><span class="op" id="2897240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897243">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897246">mapassign</span><span class="op" id="2897255">(</span><span class="ident" id="2897256">v</span><span class="op" id="2897257">.</span><span class="ident" id="2897258">typ</span><span class="op" id="2897261">,</span>&nbsp;<span class="ident" id="2897263">v</span><span class="op" id="2897264">.</span><span class="ident" id="2897265">pointer</span><span class="op" id="2897272">(</span><span class="op" id="2897273">)</span><span class="op" id="2897274">,</span>&nbsp;<span class="ident" id="2897276">k</span><span class="op" id="2897277">,</span>&nbsp;<span class="ident" id="2897279">e</span><span class="op" id="2897280">)</span><br>
<span class="lineno"></span><span class="op" id="2897282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2897285">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2897328">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2897434">func</span>&nbsp;<span class="op" id="2897439">(</span><span class="ident" id="2897440">v</span>&nbsp;<span class="ident" id="2897442">Value</span><span class="op" id="2897447">)</span>&nbsp;<span class="ident" id="2897449">SetUint</span><span class="op" id="2897456">(</span><span class="ident" id="2897457">x</span>&nbsp;<span class="ident" id="2897459">uint64</span><span class="op" id="2897465">)</span>&nbsp;<span class="op" id="2897467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897470">v</span><span class="op" id="2897471">.</span><span class="ident" id="2897472">mustBeAssignable</span><span class="op" id="2897488">(</span><span class="op" id="2897489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897492">switch</span>&nbsp;<span class="ident" id="2897499">k</span>&nbsp;<span class="op" id="2897501">:=</span>&nbsp;<span class="ident" id="2897504">v</span><span class="op" id="2897505">.</span><span class="ident" id="2897506">kind</span><span class="op" id="2897510">(</span><span class="op" id="2897511">)</span><span class="op" id="2897512">;</span>&nbsp;<span class="ident" id="2897514">k</span>&nbsp;<span class="op" id="2897516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897519">default</span><span class="op" id="2897526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2897530">panic</span><span class="op" id="2897535">(</span><span class="op" id="2897536">&amp;</span><span class="ident" id="2897537">ValueError</span><span class="op" id="2897547">{</span><span class="string" id="2897548">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2897571">,</span>&nbsp;<span class="ident" id="2897573">v</span><span class="op" id="2897574">.</span><span class="ident" id="2897575">kind</span><span class="op" id="2897579">(</span><span class="op" id="2897580">)</span><span class="op" id="2897581">}</span><span class="op" id="2897582">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897585">case</span>&nbsp;<span class="ident" id="2897590">Uint</span><span class="op" id="2897594">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897598">*</span><span class="op" id="2897599">(</span><span class="op" id="2897600">*</span><span class="builtintype" id="2897601">uint</span><span class="op" id="2897605">)</span><span class="op" id="2897606">(</span><span class="ident" id="2897607">v</span><span class="op" id="2897608">.</span><span class="ident" id="2897609">ptr</span><span class="op" id="2897612">)</span>&nbsp;<span class="op" id="2897614">=</span>&nbsp;<span class="builtintype" id="2897616">uint</span><span class="op" id="2897620">(</span><span class="ident" id="2897621">x</span><span class="op" id="2897622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897625">case</span>&nbsp;<span class="ident" id="2897630">Uint8</span><span class="op" id="2897635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897639">*</span><span class="op" id="2897640">(</span><span class="op" id="2897641">*</span><span class="builtintype" id="2897642">uint8</span><span class="op" id="2897647">)</span><span class="op" id="2897648">(</span><span class="ident" id="2897649">v</span><span class="op" id="2897650">.</span><span class="ident" id="2897651">ptr</span><span class="op" id="2897654">)</span>&nbsp;<span class="op" id="2897656">=</span>&nbsp;<span class="builtintype" id="2897658">uint8</span><span class="op" id="2897663">(</span><span class="ident" id="2897664">x</span><span class="op" id="2897665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897668">case</span>&nbsp;<span class="ident" id="2897673">Uint16</span><span class="op" id="2897679">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897683">*</span><span class="op" id="2897684">(</span><span class="op" id="2897685">*</span><span class="builtintype" id="2897686">uint16</span><span class="op" id="2897692">)</span><span class="op" id="2897693">(</span><span class="ident" id="2897694">v</span><span class="op" id="2897695">.</span><span class="ident" id="2897696">ptr</span><span class="op" id="2897699">)</span>&nbsp;<span class="op" id="2897701">=</span>&nbsp;<span class="builtintype" id="2897703">uint16</span><span class="op" id="2897709">(</span><span class="ident" id="2897710">x</span><span class="op" id="2897711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897714">case</span>&nbsp;<span class="ident" id="2897719">Uint32</span><span class="op" id="2897725">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897729">*</span><span class="op" id="2897730">(</span><span class="op" id="2897731">*</span><span class="builtintype" id="2897732">uint32</span><span class="op" id="2897738">)</span><span class="op" id="2897739">(</span><span class="ident" id="2897740">v</span><span class="op" id="2897741">.</span><span class="ident" id="2897742">ptr</span><span class="op" id="2897745">)</span>&nbsp;<span class="op" id="2897747">=</span>&nbsp;<span class="builtintype" id="2897749">uint32</span><span class="op" id="2897755">(</span><span class="ident" id="2897756">x</span><span class="op" id="2897757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897760">case</span>&nbsp;<span class="ident" id="2897765">Uint64</span><span class="op" id="2897771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897775">*</span><span class="op" id="2897776">(</span><span class="op" id="2897777">*</span><span class="ident" id="2897778">uint64</span><span class="op" id="2897784">)</span><span class="op" id="2897785">(</span><span class="ident" id="2897786">v</span><span class="op" id="2897787">.</span><span class="ident" id="2897788">ptr</span><span class="op" id="2897791">)</span>&nbsp;<span class="op" id="2897793">=</span>&nbsp;<span class="ident" id="2897795">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2897798">case</span>&nbsp;<span class="ident" id="2897803">Uintptr</span><span class="op" id="2897810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897814">*</span><span class="op" id="2897815">(</span><span class="op" id="2897816">*</span><span class="builtintype" id="2897817">uintptr</span><span class="op" id="2897824">)</span><span class="op" id="2897825">(</span><span class="ident" id="2897826">v</span><span class="op" id="2897827">.</span><span class="ident" id="2897828">ptr</span><span class="op" id="2897831">)</span>&nbsp;<span class="op" id="2897833">=</span>&nbsp;<span class="builtintype" id="2897835">uintptr</span><span class="op" id="2897842">(</span><span class="ident" id="2897843">x</span><span class="op" id="2897844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2897847">}</span><br>
<span class="lineno"></span><span class="op" id="2897849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2897852">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2897904">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2897951">func</span>&nbsp;<span class="op" id="2897956">(</span><span class="ident" id="2897957">v</span>&nbsp;<span class="ident" id="2897959">Value</span><span class="op" id="2897964">)</span>&nbsp;<span class="ident" id="2897966">SetPointer</span><span class="op" id="2897976">(</span><span class="ident" id="2897977">x</span>&nbsp;<span class="ident" id="2897979">unsafe</span><span class="op" id="2897985">.</span><span class="ident" id="2897986">Pointer</span><span class="op" id="2897993">)</span>&nbsp;<span class="op" id="2897995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2897998">v</span><span class="op" id="2897999">.</span><span class="ident" id="2898000">mustBeAssignable</span><span class="op" id="2898016">(</span><span class="op" id="2898017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898020">v</span><span class="op" id="2898021">.</span><span class="ident" id="2898022">mustBe</span><span class="op" id="2898028">(</span><span class="ident" id="2898029">UnsafePointer</span><span class="op" id="2898042">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898045">*</span><span class="op" id="2898046">(</span><span class="op" id="2898047">*</span><span class="ident" id="2898048">unsafe</span><span class="op" id="2898054">.</span><span class="ident" id="2898055">Pointer</span><span class="op" id="2898062">)</span><span class="op" id="2898063">(</span><span class="ident" id="2898064">v</span><span class="op" id="2898065">.</span><span class="ident" id="2898066">ptr</span><span class="op" id="2898069">)</span>&nbsp;<span class="op" id="2898071">=</span>&nbsp;<span class="ident" id="2898073">x</span><br>
<span class="lineno"></span><span class="op" id="2898075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2898078">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2898123">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2898187">func</span>&nbsp;<span class="op" id="2898192">(</span><span class="ident" id="2898193">v</span>&nbsp;<span class="ident" id="2898195">Value</span><span class="op" id="2898200">)</span>&nbsp;<span class="ident" id="2898202">SetString</span><span class="op" id="2898211">(</span><span class="ident" id="2898212">x</span>&nbsp;<span class="builtintype" id="2898214">string</span><span class="op" id="2898220">)</span>&nbsp;<span class="op" id="2898222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898225">v</span><span class="op" id="2898226">.</span><span class="ident" id="2898227">mustBeAssignable</span><span class="op" id="2898243">(</span><span class="op" id="2898244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898247">v</span><span class="op" id="2898248">.</span><span class="ident" id="2898249">mustBe</span><span class="op" id="2898255">(</span><span class="ident" id="2898256">String</span><span class="op" id="2898262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898265">*</span><span class="op" id="2898266">(</span><span class="op" id="2898267">*</span><span class="builtintype" id="2898268">string</span><span class="op" id="2898274">)</span><span class="op" id="2898275">(</span><span class="ident" id="2898276">v</span><span class="op" id="2898277">.</span><span class="ident" id="2898278">ptr</span><span class="op" id="2898281">)</span>&nbsp;<span class="op" id="2898283">=</span>&nbsp;<span class="ident" id="2898285">x</span><br>
<span class="lineno"></span><span class="op" id="2898287">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2898290">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2898315">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2898406">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2898446">func</span>&nbsp;<span class="op" id="2898451">(</span><span class="ident" id="2898452">v</span>&nbsp;<span class="ident" id="2898454">Value</span><span class="op" id="2898459">)</span>&nbsp;<span class="ident" id="2898461">Slice</span><span class="op" id="2898466">(</span><span class="ident" id="2898467">i</span><span class="op" id="2898468">,</span>&nbsp;<span class="ident" id="2898470">j</span>&nbsp;<span class="builtintype" id="2898472">int</span><span class="op" id="2898475">)</span>&nbsp;<span class="ident" id="2898477">Value</span>&nbsp;<span class="op" id="2898483">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898486">var</span>&nbsp;<span class="op" id="2898490">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898494">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2898499">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898505">typ</span>&nbsp;&nbsp;<span class="op" id="2898510">*</span><span class="ident" id="2898511">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898523">base</span>&nbsp;<span class="ident" id="2898528">unsafe</span><span class="op" id="2898534">.</span><span class="ident" id="2898535">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898544">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898547">switch</span>&nbsp;<span class="ident" id="2898554">kind</span>&nbsp;<span class="op" id="2898559">:=</span>&nbsp;<span class="ident" id="2898562">v</span><span class="op" id="2898563">.</span><span class="ident" id="2898564">kind</span><span class="op" id="2898568">(</span><span class="op" id="2898569">)</span><span class="op" id="2898570">;</span>&nbsp;<span class="ident" id="2898572">kind</span>&nbsp;<span class="op" id="2898577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898580">default</span><span class="op" id="2898587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898591">panic</span><span class="op" id="2898596">(</span><span class="op" id="2898597">&amp;</span><span class="ident" id="2898598">ValueError</span><span class="op" id="2898608">{</span><span class="string" id="2898609">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2898630">,</span>&nbsp;<span class="ident" id="2898632">v</span><span class="op" id="2898633">.</span><span class="ident" id="2898634">kind</span><span class="op" id="2898638">(</span><span class="op" id="2898639">)</span><span class="op" id="2898640">}</span><span class="op" id="2898641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898645">case</span>&nbsp;<span class="ident" id="2898650">Array</span><span class="op" id="2898655">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898659">if</span>&nbsp;<span class="ident" id="2898662">v</span><span class="op" id="2898663">.</span><span class="ident" id="2898664">flag</span><span class="op" id="2898668">&amp;</span><span class="ident" id="2898669">flagAddr</span>&nbsp;<span class="op" id="2898678">==</span>&nbsp;<span class="num" id="2898681">0</span>&nbsp;<span class="op" id="2898683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898688">panic</span><span class="op" id="2898693">(</span><span class="string" id="2898694">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2898745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2898749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898753">tt</span>&nbsp;<span class="op" id="2898756">:=</span>&nbsp;<span class="op" id="2898759">(</span><span class="op" id="2898760">*</span><span class="ident" id="2898761">arrayType</span><span class="op" id="2898770">)</span><span class="op" id="2898771">(</span><span class="ident" id="2898772">unsafe</span><span class="op" id="2898778">.</span><span class="ident" id="2898779">Pointer</span><span class="op" id="2898786">(</span><span class="ident" id="2898787">v</span><span class="op" id="2898788">.</span><span class="ident" id="2898789">typ</span><span class="op" id="2898792">)</span><span class="op" id="2898793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898797">cap</span>&nbsp;<span class="op" id="2898801">=</span>&nbsp;<span class="builtintype" id="2898803">int</span><span class="op" id="2898806">(</span><span class="ident" id="2898807">tt</span><span class="op" id="2898809">.</span><span class="builtinfunc" id="2898810">len</span><span class="op" id="2898813">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898817">typ</span>&nbsp;<span class="op" id="2898821">=</span>&nbsp;<span class="op" id="2898823">(</span><span class="op" id="2898824">*</span><span class="ident" id="2898825">sliceType</span><span class="op" id="2898834">)</span><span class="op" id="2898835">(</span><span class="ident" id="2898836">unsafe</span><span class="op" id="2898842">.</span><span class="ident" id="2898843">Pointer</span><span class="op" id="2898850">(</span><span class="ident" id="2898851">tt</span><span class="op" id="2898853">.</span><span class="ident" id="2898854">slice</span><span class="op" id="2898859">)</span><span class="op" id="2898860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898864">base</span>&nbsp;<span class="op" id="2898869">=</span>&nbsp;<span class="ident" id="2898871">v</span><span class="op" id="2898872">.</span><span class="ident" id="2898873">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2898879">case</span>&nbsp;<span class="ident" id="2898884">Slice</span><span class="op" id="2898889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898893">typ</span>&nbsp;<span class="op" id="2898897">=</span>&nbsp;<span class="op" id="2898899">(</span><span class="op" id="2898900">*</span><span class="ident" id="2898901">sliceType</span><span class="op" id="2898910">)</span><span class="op" id="2898911">(</span><span class="ident" id="2898912">unsafe</span><span class="op" id="2898918">.</span><span class="ident" id="2898919">Pointer</span><span class="op" id="2898926">(</span><span class="ident" id="2898927">v</span><span class="op" id="2898928">.</span><span class="ident" id="2898929">typ</span><span class="op" id="2898932">)</span><span class="op" id="2898933">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898937">s</span>&nbsp;<span class="op" id="2898939">:=</span>&nbsp;<span class="op" id="2898942">(</span><span class="op" id="2898943">*</span><span class="ident" id="2898944">sliceHeader</span><span class="op" id="2898955">)</span><span class="op" id="2898956">(</span><span class="ident" id="2898957">v</span><span class="op" id="2898958">.</span><span class="ident" id="2898959">ptr</span><span class="op" id="2898962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898966">base</span>&nbsp;<span class="op" id="2898971">=</span>&nbsp;<span class="ident" id="2898973">unsafe</span><span class="op" id="2898979">.</span><span class="ident" id="2898980">Pointer</span><span class="op" id="2898987">(</span><span class="ident" id="2898988">s</span><span class="op" id="2898989">.</span><span class="ident" id="2898990">Data</span><span class="op" id="2898994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2898998">cap</span>&nbsp;<span class="op" id="2899002">=</span>&nbsp;<span class="ident" id="2899004">s</span><span class="op" id="2899005">.</span><span class="ident" id="2899006">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899012">case</span>&nbsp;<span class="ident" id="2899017">String</span><span class="op" id="2899023">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899027">s</span>&nbsp;<span class="op" id="2899029">:=</span>&nbsp;<span class="op" id="2899032">(</span><span class="op" id="2899033">*</span><span class="ident" id="2899034">stringHeader</span><span class="op" id="2899046">)</span><span class="op" id="2899047">(</span><span class="ident" id="2899048">v</span><span class="op" id="2899049">.</span><span class="ident" id="2899050">ptr</span><span class="op" id="2899053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899057">if</span>&nbsp;<span class="ident" id="2899060">i</span>&nbsp;<span class="op" id="2899062">&lt;</span>&nbsp;<span class="num" id="2899064">0</span>&nbsp;<span class="op" id="2899066">||</span>&nbsp;<span class="ident" id="2899069">j</span>&nbsp;<span class="op" id="2899071">&lt;</span>&nbsp;<span class="ident" id="2899073">i</span>&nbsp;<span class="op" id="2899075">||</span>&nbsp;<span class="ident" id="2899078">j</span>&nbsp;<span class="op" id="2899080">&gt;</span>&nbsp;<span class="ident" id="2899082">s</span><span class="op" id="2899083">.</span><span class="ident" id="2899084">Len</span>&nbsp;<span class="op" id="2899088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2899093">panic</span><span class="op" id="2899098">(</span><span class="string" id="2899099">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2899154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899162">t</span>&nbsp;<span class="op" id="2899164">:=</span>&nbsp;<span class="ident" id="2899167">stringHeader</span><span class="op" id="2899179">{</span><span class="ident" id="2899180">unsafe</span><span class="op" id="2899186">.</span><span class="ident" id="2899187">Pointer</span><span class="op" id="2899194">(</span><span class="builtintype" id="2899195">uintptr</span><span class="op" id="2899202">(</span><span class="ident" id="2899203">s</span><span class="op" id="2899204">.</span><span class="ident" id="2899205">Data</span><span class="op" id="2899209">)</span>&nbsp;<span class="op" id="2899211">+</span>&nbsp;<span class="builtintype" id="2899213">uintptr</span><span class="op" id="2899220">(</span><span class="ident" id="2899221">i</span><span class="op" id="2899222">)</span><span class="op" id="2899223">)</span><span class="op" id="2899224">,</span>&nbsp;<span class="ident" id="2899226">j</span>&nbsp;<span class="op" id="2899228">-</span>&nbsp;<span class="ident" id="2899230">i</span><span class="op" id="2899231">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899235">return</span>&nbsp;<span class="ident" id="2899242">Value</span><span class="op" id="2899247">{</span><span class="ident" id="2899248">v</span><span class="op" id="2899249">.</span><span class="ident" id="2899250">typ</span><span class="op" id="2899253">,</span>&nbsp;<span class="ident" id="2899255">unsafe</span><span class="op" id="2899261">.</span><span class="ident" id="2899262">Pointer</span><span class="op" id="2899269">(</span><span class="op" id="2899270">&amp;</span><span class="ident" id="2899271">t</span><span class="op" id="2899272">)</span><span class="op" id="2899273">,</span>&nbsp;<span class="ident" id="2899275">v</span><span class="op" id="2899276">.</span><span class="ident" id="2899277">flag</span><span class="op" id="2899281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899288">if</span>&nbsp;<span class="ident" id="2899291">i</span>&nbsp;<span class="op" id="2899293">&lt;</span>&nbsp;<span class="num" id="2899295">0</span>&nbsp;<span class="op" id="2899297">||</span>&nbsp;<span class="ident" id="2899300">j</span>&nbsp;<span class="op" id="2899302">&lt;</span>&nbsp;<span class="ident" id="2899304">i</span>&nbsp;<span class="op" id="2899306">||</span>&nbsp;<span class="ident" id="2899309">j</span>&nbsp;<span class="op" id="2899311">&gt;</span>&nbsp;<span class="builtinfunc" id="2899313">cap</span>&nbsp;<span class="op" id="2899317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2899321">panic</span><span class="op" id="2899326">(</span><span class="string" id="2899327">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2899375">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899382">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899443">var</span>&nbsp;<span class="ident" id="2899447">x</span>&nbsp;<span class="op" id="2899449">[</span><span class="op" id="2899450">]</span><span class="ident" id="2899451">unsafe</span><span class="op" id="2899457">.</span><span class="ident" id="2899458">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899468">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899509">s</span>&nbsp;<span class="op" id="2899511">:=</span>&nbsp;<span class="op" id="2899514">(</span><span class="op" id="2899515">*</span><span class="ident" id="2899516">sliceHeader</span><span class="op" id="2899527">)</span><span class="op" id="2899528">(</span><span class="ident" id="2899529">unsafe</span><span class="op" id="2899535">.</span><span class="ident" id="2899536">Pointer</span><span class="op" id="2899543">(</span><span class="op" id="2899544">&amp;</span><span class="ident" id="2899545">x</span><span class="op" id="2899546">)</span><span class="op" id="2899547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899550">s</span><span class="op" id="2899551">.</span><span class="ident" id="2899552">Len</span>&nbsp;<span class="op" id="2899556">=</span>&nbsp;<span class="ident" id="2899558">j</span>&nbsp;<span class="op" id="2899560">-</span>&nbsp;<span class="ident" id="2899562">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899565">s</span><span class="op" id="2899566">.</span><span class="ident" id="2899567">Cap</span>&nbsp;<span class="op" id="2899571">=</span>&nbsp;<span class="builtinfunc" id="2899573">cap</span>&nbsp;<span class="op" id="2899577">-</span>&nbsp;<span class="ident" id="2899579">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899582">if</span>&nbsp;<span class="builtinfunc" id="2899585">cap</span><span class="op" id="2899588">-</span><span class="ident" id="2899589">i</span>&nbsp;<span class="op" id="2899591">&gt;</span>&nbsp;<span class="num" id="2899593">0</span>&nbsp;<span class="op" id="2899595">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899599">s</span><span class="op" id="2899600">.</span><span class="ident" id="2899601">Data</span>&nbsp;<span class="op" id="2899606">=</span>&nbsp;<span class="ident" id="2899608">unsafe</span><span class="op" id="2899614">.</span><span class="ident" id="2899615">Pointer</span><span class="op" id="2899622">(</span><span class="builtintype" id="2899623">uintptr</span><span class="op" id="2899630">(</span><span class="ident" id="2899631">base</span><span class="op" id="2899635">)</span>&nbsp;<span class="op" id="2899637">+</span>&nbsp;<span class="builtintype" id="2899639">uintptr</span><span class="op" id="2899646">(</span><span class="ident" id="2899647">i</span><span class="op" id="2899648">)</span><span class="op" id="2899649">*</span><span class="ident" id="2899650">typ</span><span class="op" id="2899653">.</span><span class="ident" id="2899654">elem</span><span class="op" id="2899658">.</span><span class="ident" id="2899659">Size</span><span class="op" id="2899663">(</span><span class="op" id="2899664">)</span><span class="op" id="2899665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899668">}</span>&nbsp;<span class="keyword" id="2899670">else</span>&nbsp;<span class="op" id="2899675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899679">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899746">s</span><span class="op" id="2899747">.</span><span class="ident" id="2899748">Data</span>&nbsp;<span class="op" id="2899753">=</span>&nbsp;<span class="ident" id="2899755">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899761">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899765">fl</span>&nbsp;<span class="op" id="2899768">:=</span>&nbsp;<span class="ident" id="2899771">v</span><span class="op" id="2899772">.</span><span class="ident" id="2899773">flag</span><span class="op" id="2899777">&amp;</span><span class="ident" id="2899778">flagRO</span>&nbsp;<span class="op" id="2899785">|</span>&nbsp;<span class="ident" id="2899787">flagIndir</span>&nbsp;<span class="op" id="2899797">|</span>&nbsp;<span class="ident" id="2899799">flag</span><span class="op" id="2899803">(</span><span class="ident" id="2899804">Slice</span><span class="op" id="2899809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899812">return</span>&nbsp;<span class="ident" id="2899819">Value</span><span class="op" id="2899824">{</span><span class="ident" id="2899825">typ</span><span class="op" id="2899828">.</span><span class="ident" id="2899829">common</span><span class="op" id="2899835">(</span><span class="op" id="2899836">)</span><span class="op" id="2899837">,</span>&nbsp;<span class="ident" id="2899839">unsafe</span><span class="op" id="2899845">.</span><span class="ident" id="2899846">Pointer</span><span class="op" id="2899853">(</span><span class="op" id="2899854">&amp;</span><span class="ident" id="2899855">x</span><span class="op" id="2899856">)</span><span class="op" id="2899857">,</span>&nbsp;<span class="ident" id="2899859">fl</span><span class="op" id="2899861">}</span><br>
<span class="lineno"></span><span class="op" id="2899863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2899866">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2899941">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2900024">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2900064">func</span>&nbsp;<span class="op" id="2900069">(</span><span class="ident" id="2900070">v</span>&nbsp;<span class="ident" id="2900072">Value</span><span class="op" id="2900077">)</span>&nbsp;<span class="ident" id="2900079">Slice3</span><span class="op" id="2900085">(</span><span class="ident" id="2900086">i</span><span class="op" id="2900087">,</span>&nbsp;<span class="ident" id="2900089">j</span><span class="op" id="2900090">,</span>&nbsp;<span class="ident" id="2900092">k</span>&nbsp;<span class="builtintype" id="2900094">int</span><span class="op" id="2900097">)</span>&nbsp;<span class="ident" id="2900099">Value</span>&nbsp;<span class="op" id="2900105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900108">var</span>&nbsp;<span class="op" id="2900112">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900116">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2900121">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900127">typ</span>&nbsp;&nbsp;<span class="op" id="2900132">*</span><span class="ident" id="2900133">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900145">base</span>&nbsp;<span class="ident" id="2900150">unsafe</span><span class="op" id="2900156">.</span><span class="ident" id="2900157">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900169">switch</span>&nbsp;<span class="ident" id="2900176">kind</span>&nbsp;<span class="op" id="2900181">:=</span>&nbsp;<span class="ident" id="2900184">v</span><span class="op" id="2900185">.</span><span class="ident" id="2900186">kind</span><span class="op" id="2900190">(</span><span class="op" id="2900191">)</span><span class="op" id="2900192">;</span>&nbsp;<span class="ident" id="2900194">kind</span>&nbsp;<span class="op" id="2900199">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900202">default</span><span class="op" id="2900209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900213">panic</span><span class="op" id="2900218">(</span><span class="op" id="2900219">&amp;</span><span class="ident" id="2900220">ValueError</span><span class="op" id="2900230">{</span><span class="string" id="2900231">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2900253">,</span>&nbsp;<span class="ident" id="2900255">v</span><span class="op" id="2900256">.</span><span class="ident" id="2900257">kind</span><span class="op" id="2900261">(</span><span class="op" id="2900262">)</span><span class="op" id="2900263">}</span><span class="op" id="2900264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900268">case</span>&nbsp;<span class="ident" id="2900273">Array</span><span class="op" id="2900278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900282">if</span>&nbsp;<span class="ident" id="2900285">v</span><span class="op" id="2900286">.</span><span class="ident" id="2900287">flag</span><span class="op" id="2900291">&amp;</span><span class="ident" id="2900292">flagAddr</span>&nbsp;<span class="op" id="2900301">==</span>&nbsp;<span class="num" id="2900304">0</span>&nbsp;<span class="op" id="2900306">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900311">panic</span><span class="op" id="2900316">(</span><span class="string" id="2900317">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2900369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900377">tt</span>&nbsp;<span class="op" id="2900380">:=</span>&nbsp;<span class="op" id="2900383">(</span><span class="op" id="2900384">*</span><span class="ident" id="2900385">arrayType</span><span class="op" id="2900394">)</span><span class="op" id="2900395">(</span><span class="ident" id="2900396">unsafe</span><span class="op" id="2900402">.</span><span class="ident" id="2900403">Pointer</span><span class="op" id="2900410">(</span><span class="ident" id="2900411">v</span><span class="op" id="2900412">.</span><span class="ident" id="2900413">typ</span><span class="op" id="2900416">)</span><span class="op" id="2900417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900421">cap</span>&nbsp;<span class="op" id="2900425">=</span>&nbsp;<span class="builtintype" id="2900427">int</span><span class="op" id="2900430">(</span><span class="ident" id="2900431">tt</span><span class="op" id="2900433">.</span><span class="builtinfunc" id="2900434">len</span><span class="op" id="2900437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900441">typ</span>&nbsp;<span class="op" id="2900445">=</span>&nbsp;<span class="op" id="2900447">(</span><span class="op" id="2900448">*</span><span class="ident" id="2900449">sliceType</span><span class="op" id="2900458">)</span><span class="op" id="2900459">(</span><span class="ident" id="2900460">unsafe</span><span class="op" id="2900466">.</span><span class="ident" id="2900467">Pointer</span><span class="op" id="2900474">(</span><span class="ident" id="2900475">tt</span><span class="op" id="2900477">.</span><span class="ident" id="2900478">slice</span><span class="op" id="2900483">)</span><span class="op" id="2900484">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900488">base</span>&nbsp;<span class="op" id="2900493">=</span>&nbsp;<span class="ident" id="2900495">v</span><span class="op" id="2900496">.</span><span class="ident" id="2900497">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900503">case</span>&nbsp;<span class="ident" id="2900508">Slice</span><span class="op" id="2900513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900517">typ</span>&nbsp;<span class="op" id="2900521">=</span>&nbsp;<span class="op" id="2900523">(</span><span class="op" id="2900524">*</span><span class="ident" id="2900525">sliceType</span><span class="op" id="2900534">)</span><span class="op" id="2900535">(</span><span class="ident" id="2900536">unsafe</span><span class="op" id="2900542">.</span><span class="ident" id="2900543">Pointer</span><span class="op" id="2900550">(</span><span class="ident" id="2900551">v</span><span class="op" id="2900552">.</span><span class="ident" id="2900553">typ</span><span class="op" id="2900556">)</span><span class="op" id="2900557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900561">s</span>&nbsp;<span class="op" id="2900563">:=</span>&nbsp;<span class="op" id="2900566">(</span><span class="op" id="2900567">*</span><span class="ident" id="2900568">sliceHeader</span><span class="op" id="2900579">)</span><span class="op" id="2900580">(</span><span class="ident" id="2900581">v</span><span class="op" id="2900582">.</span><span class="ident" id="2900583">ptr</span><span class="op" id="2900586">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900590">base</span>&nbsp;<span class="op" id="2900595">=</span>&nbsp;<span class="ident" id="2900597">s</span><span class="op" id="2900598">.</span><span class="ident" id="2900599">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900606">cap</span>&nbsp;<span class="op" id="2900610">=</span>&nbsp;<span class="ident" id="2900612">s</span><span class="op" id="2900613">.</span><span class="ident" id="2900614">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900623">if</span>&nbsp;<span class="ident" id="2900626">i</span>&nbsp;<span class="op" id="2900628">&lt;</span>&nbsp;<span class="num" id="2900630">0</span>&nbsp;<span class="op" id="2900632">||</span>&nbsp;<span class="ident" id="2900635">j</span>&nbsp;<span class="op" id="2900637">&lt;</span>&nbsp;<span class="ident" id="2900639">i</span>&nbsp;<span class="op" id="2900641">||</span>&nbsp;<span class="ident" id="2900644">k</span>&nbsp;<span class="op" id="2900646">&lt;</span>&nbsp;<span class="ident" id="2900648">j</span>&nbsp;<span class="op" id="2900650">||</span>&nbsp;<span class="ident" id="2900653">k</span>&nbsp;<span class="op" id="2900655">&gt;</span>&nbsp;<span class="builtinfunc" id="2900657">cap</span>&nbsp;<span class="op" id="2900661">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2900665">panic</span><span class="op" id="2900670">(</span><span class="string" id="2900671">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2900720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900727">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900775">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900811">var</span>&nbsp;<span class="ident" id="2900815">x</span>&nbsp;<span class="op" id="2900817">[</span><span class="op" id="2900818">]</span><span class="ident" id="2900819">unsafe</span><span class="op" id="2900825">.</span><span class="ident" id="2900826">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900836">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900877">s</span>&nbsp;<span class="op" id="2900879">:=</span>&nbsp;<span class="op" id="2900882">(</span><span class="op" id="2900883">*</span><span class="ident" id="2900884">sliceHeader</span><span class="op" id="2900895">)</span><span class="op" id="2900896">(</span><span class="ident" id="2900897">unsafe</span><span class="op" id="2900903">.</span><span class="ident" id="2900904">Pointer</span><span class="op" id="2900911">(</span><span class="op" id="2900912">&amp;</span><span class="ident" id="2900913">x</span><span class="op" id="2900914">)</span><span class="op" id="2900915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900918">s</span><span class="op" id="2900919">.</span><span class="ident" id="2900920">Len</span>&nbsp;<span class="op" id="2900924">=</span>&nbsp;<span class="ident" id="2900926">j</span>&nbsp;<span class="op" id="2900928">-</span>&nbsp;<span class="ident" id="2900930">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900933">s</span><span class="op" id="2900934">.</span><span class="ident" id="2900935">Cap</span>&nbsp;<span class="op" id="2900939">=</span>&nbsp;<span class="ident" id="2900941">k</span>&nbsp;<span class="op" id="2900943">-</span>&nbsp;<span class="ident" id="2900945">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900948">if</span>&nbsp;<span class="ident" id="2900951">k</span><span class="op" id="2900952">-</span><span class="ident" id="2900953">i</span>&nbsp;<span class="op" id="2900955">&gt;</span>&nbsp;<span class="num" id="2900957">0</span>&nbsp;<span class="op" id="2900959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900963">s</span><span class="op" id="2900964">.</span><span class="ident" id="2900965">Data</span>&nbsp;<span class="op" id="2900970">=</span>&nbsp;<span class="ident" id="2900972">unsafe</span><span class="op" id="2900978">.</span><span class="ident" id="2900979">Pointer</span><span class="op" id="2900986">(</span><span class="builtintype" id="2900987">uintptr</span><span class="op" id="2900994">(</span><span class="ident" id="2900995">base</span><span class="op" id="2900999">)</span>&nbsp;<span class="op" id="2901001">+</span>&nbsp;<span class="builtintype" id="2901003">uintptr</span><span class="op" id="2901010">(</span><span class="ident" id="2901011">i</span><span class="op" id="2901012">)</span><span class="op" id="2901013">*</span><span class="ident" id="2901014">typ</span><span class="op" id="2901017">.</span><span class="ident" id="2901018">elem</span><span class="op" id="2901022">.</span><span class="ident" id="2901023">Size</span><span class="op" id="2901027">(</span><span class="op" id="2901028">)</span><span class="op" id="2901029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901032">}</span>&nbsp;<span class="keyword" id="2901034">else</span>&nbsp;<span class="op" id="2901039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901043">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901110">s</span><span class="op" id="2901111">.</span><span class="ident" id="2901112">Data</span>&nbsp;<span class="op" id="2901117">=</span>&nbsp;<span class="ident" id="2901119">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901129">fl</span>&nbsp;<span class="op" id="2901132">:=</span>&nbsp;<span class="ident" id="2901135">v</span><span class="op" id="2901136">.</span><span class="ident" id="2901137">flag</span><span class="op" id="2901141">&amp;</span><span class="ident" id="2901142">flagRO</span>&nbsp;<span class="op" id="2901149">|</span>&nbsp;<span class="ident" id="2901151">flagIndir</span>&nbsp;<span class="op" id="2901161">|</span>&nbsp;<span class="ident" id="2901163">flag</span><span class="op" id="2901167">(</span><span class="ident" id="2901168">Slice</span><span class="op" id="2901173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901176">return</span>&nbsp;<span class="ident" id="2901183">Value</span><span class="op" id="2901188">{</span><span class="ident" id="2901189">typ</span><span class="op" id="2901192">.</span><span class="ident" id="2901193">common</span><span class="op" id="2901199">(</span><span class="op" id="2901200">)</span><span class="op" id="2901201">,</span>&nbsp;<span class="ident" id="2901203">unsafe</span><span class="op" id="2901209">.</span><span class="ident" id="2901210">Pointer</span><span class="op" id="2901217">(</span><span class="op" id="2901218">&amp;</span><span class="ident" id="2901219">x</span><span class="op" id="2901220">)</span><span class="op" id="2901221">,</span>&nbsp;<span class="ident" id="2901223">fl</span><span class="op" id="2901225">}</span><br>
<span class="lineno">1590</span><span class="op" id="2901227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901230">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2901294">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2901364">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2901438">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2901515">func</span>&nbsp;<span class="op" id="2901520">(</span><span class="ident" id="2901521">v</span>&nbsp;<span class="ident" id="2901523">Value</span><span class="op" id="2901528">)</span>&nbsp;<span class="ident" id="2901530">String</span><span class="op" id="2901536">(</span><span class="op" id="2901537">)</span>&nbsp;<span class="builtintype" id="2901539">string</span>&nbsp;<span class="op" id="2901546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901549">switch</span>&nbsp;<span class="ident" id="2901556">k</span>&nbsp;<span class="op" id="2901558">:=</span>&nbsp;<span class="ident" id="2901561">v</span><span class="op" id="2901562">.</span><span class="ident" id="2901563">kind</span><span class="op" id="2901567">(</span><span class="op" id="2901568">)</span><span class="op" id="2901569">;</span>&nbsp;<span class="ident" id="2901571">k</span>&nbsp;<span class="op" id="2901573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901576">case</span>&nbsp;<span class="ident" id="2901581">Invalid</span><span class="op" id="2901588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901592">return</span>&nbsp;<span class="string" id="2901599">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901618">case</span>&nbsp;<span class="ident" id="2901623">String</span><span class="op" id="2901629">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901633">return</span>&nbsp;<span class="op" id="2901640">*</span><span class="op" id="2901641">(</span><span class="op" id="2901642">*</span><span class="builtintype" id="2901643">string</span><span class="op" id="2901649">)</span><span class="op" id="2901650">(</span><span class="ident" id="2901651">v</span><span class="op" id="2901652">.</span><span class="ident" id="2901653">ptr</span><span class="op" id="2901656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901662">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901734">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901790">return</span>&nbsp;<span class="string" id="2901797">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2901801">+</span>&nbsp;<span class="ident" id="2901803">v</span><span class="op" id="2901804">.</span><span class="ident" id="2901805">Type</span><span class="op" id="2901809">(</span><span class="op" id="2901810">)</span><span class="op" id="2901811">.</span><span class="ident" id="2901812">String</span><span class="op" id="2901818">(</span><span class="op" id="2901819">)</span>&nbsp;<span class="op" id="2901821">+</span>&nbsp;<span class="string" id="2901823">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2901833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901836">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2901914">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2901952">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2902031">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2902118">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2902215">func</span>&nbsp;<span class="op" id="2902220">(</span><span class="ident" id="2902221">v</span>&nbsp;<span class="ident" id="2902223">Value</span><span class="op" id="2902228">)</span>&nbsp;<span class="ident" id="2902230">TryRecv</span><span class="op" id="2902237">(</span><span class="op" id="2902238">)</span>&nbsp;<span class="op" id="2902240">(</span><span class="ident" id="2902241">x</span>&nbsp;<span class="ident" id="2902243">Value</span><span class="op" id="2902248">,</span>&nbsp;<span class="ident" id="2902250">ok</span>&nbsp;<span class="builtintype" id="2902253">bool</span><span class="op" id="2902257">)</span>&nbsp;<span class="op" id="2902259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902262">v</span><span class="op" id="2902263">.</span><span class="ident" id="2902264">mustBe</span><span class="op" id="2902270">(</span><span class="ident" id="2902271">Chan</span><span class="op" id="2902275">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902278">v</span><span class="op" id="2902279">.</span><span class="ident" id="2902280">mustBeExported</span><span class="op" id="2902294">(</span><span class="op" id="2902295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902298">return</span>&nbsp;<span class="ident" id="2902305">v</span><span class="op" id="2902306">.</span><span class="ident" id="2902307">recv</span><span class="op" id="2902311">(</span><span class="builtintype" id="2902312">true</span><span class="op" id="2902316">)</span><br>
<span class="lineno"></span><span class="op" id="2902318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902321">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2902388">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2902426">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2902485">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2902558">func</span>&nbsp;<span class="op" id="2902563">(</span><span class="ident" id="2902564">v</span>&nbsp;<span class="ident" id="2902566">Value</span><span class="op" id="2902571">)</span>&nbsp;<span class="ident" id="2902573">TrySend</span><span class="op" id="2902580">(</span><span class="ident" id="2902581">x</span>&nbsp;<span class="ident" id="2902583">Value</span><span class="op" id="2902588">)</span>&nbsp;<span class="builtintype" id="2902590">bool</span>&nbsp;<span class="op" id="2902595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902598">v</span><span class="op" id="2902599">.</span><span class="ident" id="2902600">mustBe</span><span class="op" id="2902606">(</span><span class="ident" id="2902607">Chan</span><span class="op" id="2902611">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902614">v</span><span class="op" id="2902615">.</span><span class="ident" id="2902616">mustBeExported</span><span class="op" id="2902630">(</span><span class="op" id="2902631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902634">return</span>&nbsp;<span class="ident" id="2902641">v</span><span class="op" id="2902642">.</span><span class="ident" id="2902643">send</span><span class="op" id="2902647">(</span><span class="ident" id="2902648">x</span><span class="op" id="2902649">,</span>&nbsp;<span class="builtintype" id="2902651">true</span><span class="op" id="2902655">)</span><br>
<span class="lineno"></span><span class="op" id="2902657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902660">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2902686">func</span>&nbsp;<span class="op" id="2902691">(</span><span class="ident" id="2902692">v</span>&nbsp;<span class="ident" id="2902694">Value</span><span class="op" id="2902699">)</span>&nbsp;<span class="ident" id="2902701">Type</span><span class="op" id="2902705">(</span><span class="op" id="2902706">)</span>&nbsp;<span class="ident" id="2902708">Type</span>&nbsp;<span class="op" id="2902713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902716">f</span>&nbsp;<span class="op" id="2902718">:=</span>&nbsp;<span class="ident" id="2902721">v</span><span class="op" id="2902722">.</span><span class="ident" id="2902723">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902729">if</span>&nbsp;<span class="ident" id="2902732">f</span>&nbsp;<span class="op" id="2902734">==</span>&nbsp;<span class="num" id="2902737">0</span>&nbsp;<span class="op" id="2902739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2902743">panic</span><span class="op" id="2902748">(</span><span class="op" id="2902749">&amp;</span><span class="ident" id="2902750">ValueError</span><span class="op" id="2902760">{</span><span class="string" id="2902761">&#34;reflect.Value.Type&#34;</span><span class="op" id="2902781">,</span>&nbsp;<span class="ident" id="2902783">Invalid</span><span class="op" id="2902790">}</span><span class="op" id="2902791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902794">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902797">if</span>&nbsp;<span class="ident" id="2902800">f</span><span class="op" id="2902801">&amp;</span><span class="ident" id="2902802">flagMethod</span>&nbsp;<span class="op" id="2902813">==</span>&nbsp;<span class="num" id="2902816">0</span>&nbsp;<span class="op" id="2902818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902822">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902837">return</span>&nbsp;<span class="ident" id="2902844">v</span><span class="op" id="2902845">.</span><span class="ident" id="2902846">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902855">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902873">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902928">i</span>&nbsp;<span class="op" id="2902930">:=</span>&nbsp;<span class="builtintype" id="2902933">int</span><span class="op" id="2902936">(</span><span class="ident" id="2902937">v</span><span class="op" id="2902938">.</span><span class="ident" id="2902939">flag</span><span class="op" id="2902943">)</span>&nbsp;<span class="op" id="2902945">&gt;&gt;</span>&nbsp;<span class="ident" id="2902948">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902965">if</span>&nbsp;<span class="ident" id="2902968">v</span><span class="op" id="2902969">.</span><span class="ident" id="2902970">typ</span><span class="op" id="2902973">.</span><span class="ident" id="2902974">Kind</span><span class="op" id="2902978">(</span><span class="op" id="2902979">)</span>&nbsp;<span class="op" id="2902981">==</span>&nbsp;<span class="ident" id="2902984">Interface</span>&nbsp;<span class="op" id="2902994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902998">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903024">tt</span>&nbsp;<span class="op" id="2903027">:=</span>&nbsp;<span class="op" id="2903030">(</span><span class="op" id="2903031">*</span><span class="ident" id="2903032">interfaceType</span><span class="op" id="2903045">)</span><span class="op" id="2903046">(</span><span class="ident" id="2903047">unsafe</span><span class="op" id="2903053">.</span><span class="ident" id="2903054">Pointer</span><span class="op" id="2903061">(</span><span class="ident" id="2903062">v</span><span class="op" id="2903063">.</span><span class="ident" id="2903064">typ</span><span class="op" id="2903067">)</span><span class="op" id="2903068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903072">if</span>&nbsp;<span class="builtintype" id="2903075">uint</span><span class="op" id="2903079">(</span><span class="ident" id="2903080">i</span><span class="op" id="2903081">)</span>&nbsp;<span class="op" id="2903083">&gt;=</span>&nbsp;<span class="builtintype" id="2903086">uint</span><span class="op" id="2903090">(</span><span class="builtinfunc" id="2903091">len</span><span class="op" id="2903094">(</span><span class="ident" id="2903095">tt</span><span class="op" id="2903097">.</span><span class="ident" id="2903098">methods</span><span class="op" id="2903105">)</span><span class="op" id="2903106">)</span>&nbsp;<span class="op" id="2903108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903113">panic</span><span class="op" id="2903118">(</span><span class="string" id="2903119">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2903166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903174">m</span>&nbsp;<span class="op" id="2903176">:=</span>&nbsp;<span class="op" id="2903179">&amp;</span><span class="ident" id="2903180">tt</span><span class="op" id="2903182">.</span><span class="ident" id="2903183">methods</span><span class="op" id="2903190">[</span><span class="ident" id="2903191">i</span><span class="op" id="2903192">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903196">return</span>&nbsp;<span class="ident" id="2903203">m</span><span class="op" id="2903204">.</span><span class="ident" id="2903205">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2903213">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903242">ut</span>&nbsp;<span class="op" id="2903245">:=</span>&nbsp;<span class="ident" id="2903248">v</span><span class="op" id="2903249">.</span><span class="ident" id="2903250">typ</span><span class="op" id="2903253">.</span><span class="ident" id="2903254">uncommon</span><span class="op" id="2903262">(</span><span class="op" id="2903263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903266">if</span>&nbsp;<span class="ident" id="2903269">ut</span>&nbsp;<span class="op" id="2903272">==</span>&nbsp;<span class="ident" id="2903275">nil</span>&nbsp;<span class="op" id="2903279">||</span>&nbsp;<span class="builtintype" id="2903282">uint</span><span class="op" id="2903286">(</span><span class="ident" id="2903287">i</span><span class="op" id="2903288">)</span>&nbsp;<span class="op" id="2903290">&gt;=</span>&nbsp;<span class="builtintype" id="2903293">uint</span><span class="op" id="2903297">(</span><span class="builtinfunc" id="2903298">len</span><span class="op" id="2903301">(</span><span class="ident" id="2903302">ut</span><span class="op" id="2903304">.</span><span class="ident" id="2903305">methods</span><span class="op" id="2903312">)</span><span class="op" id="2903313">)</span>&nbsp;<span class="op" id="2903315">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903319">panic</span><span class="op" id="2903324">(</span><span class="string" id="2903325">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2903372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903378">m</span>&nbsp;<span class="op" id="2903380">:=</span>&nbsp;<span class="op" id="2903383">&amp;</span><span class="ident" id="2903384">ut</span><span class="op" id="2903386">.</span><span class="ident" id="2903387">methods</span><span class="op" id="2903394">[</span><span class="ident" id="2903395">i</span><span class="op" id="2903396">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903399">return</span>&nbsp;<span class="ident" id="2903406">m</span><span class="op" id="2903407">.</span><span class="ident" id="2903408">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2903413">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2903416">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2903467">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2903548">func</span>&nbsp;<span class="op" id="2903553">(</span><span class="ident" id="2903554">v</span>&nbsp;<span class="ident" id="2903556">Value</span><span class="op" id="2903561">)</span>&nbsp;<span class="ident" id="2903563">Uint</span><span class="op" id="2903567">(</span><span class="op" id="2903568">)</span>&nbsp;<span class="ident" id="2903570">uint64</span>&nbsp;<span class="op" id="2903577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903580">k</span>&nbsp;<span class="op" id="2903582">:=</span>&nbsp;<span class="ident" id="2903585">v</span><span class="op" id="2903586">.</span><span class="ident" id="2903587">kind</span><span class="op" id="2903591">(</span><span class="op" id="2903592">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903595">p</span>&nbsp;<span class="op" id="2903597">:=</span>&nbsp;<span class="ident" id="2903600">v</span><span class="op" id="2903601">.</span><span class="ident" id="2903602">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903607">switch</span>&nbsp;<span class="ident" id="2903614">k</span>&nbsp;<span class="op" id="2903616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903619">case</span>&nbsp;<span class="ident" id="2903624">Uint</span><span class="op" id="2903628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903632">return</span>&nbsp;<span class="ident" id="2903639">uint64</span><span class="op" id="2903645">(</span><span class="op" id="2903646">*</span><span class="op" id="2903647">(</span><span class="op" id="2903648">*</span><span class="builtintype" id="2903649">uint</span><span class="op" id="2903653">)</span><span class="op" id="2903654">(</span><span class="ident" id="2903655">p</span><span class="op" id="2903656">)</span><span class="op" id="2903657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903660">case</span>&nbsp;<span class="ident" id="2903665">Uint8</span><span class="op" id="2903670">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903674">return</span>&nbsp;<span class="ident" id="2903681">uint64</span><span class="op" id="2903687">(</span><span class="op" id="2903688">*</span><span class="op" id="2903689">(</span><span class="op" id="2903690">*</span><span class="builtintype" id="2903691">uint8</span><span class="op" id="2903696">)</span><span class="op" id="2903697">(</span><span class="ident" id="2903698">p</span><span class="op" id="2903699">)</span><span class="op" id="2903700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903703">case</span>&nbsp;<span class="ident" id="2903708">Uint16</span><span class="op" id="2903714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903718">return</span>&nbsp;<span class="ident" id="2903725">uint64</span><span class="op" id="2903731">(</span><span class="op" id="2903732">*</span><span class="op" id="2903733">(</span><span class="op" id="2903734">*</span><span class="builtintype" id="2903735">uint16</span><span class="op" id="2903741">)</span><span class="op" id="2903742">(</span><span class="ident" id="2903743">p</span><span class="op" id="2903744">)</span><span class="op" id="2903745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903748">case</span>&nbsp;<span class="ident" id="2903753">Uint32</span><span class="op" id="2903759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903763">return</span>&nbsp;<span class="ident" id="2903770">uint64</span><span class="op" id="2903776">(</span><span class="op" id="2903777">*</span><span class="op" id="2903778">(</span><span class="op" id="2903779">*</span><span class="builtintype" id="2903780">uint32</span><span class="op" id="2903786">)</span><span class="op" id="2903787">(</span><span class="ident" id="2903788">p</span><span class="op" id="2903789">)</span><span class="op" id="2903790">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903793">case</span>&nbsp;<span class="ident" id="2903798">Uint64</span><span class="op" id="2903804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903808">return</span>&nbsp;<span class="ident" id="2903815">uint64</span><span class="op" id="2903821">(</span><span class="op" id="2903822">*</span><span class="op" id="2903823">(</span><span class="op" id="2903824">*</span><span class="ident" id="2903825">uint64</span><span class="op" id="2903831">)</span><span class="op" id="2903832">(</span><span class="ident" id="2903833">p</span><span class="op" id="2903834">)</span><span class="op" id="2903835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903838">case</span>&nbsp;<span class="ident" id="2903843">Uintptr</span><span class="op" id="2903850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903854">return</span>&nbsp;<span class="ident" id="2903861">uint64</span><span class="op" id="2903867">(</span><span class="op" id="2903868">*</span><span class="op" id="2903869">(</span><span class="op" id="2903870">*</span><span class="builtintype" id="2903871">uintptr</span><span class="op" id="2903878">)</span><span class="op" id="2903879">(</span><span class="ident" id="2903880">p</span><span class="op" id="2903881">)</span><span class="op" id="2903882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903885">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2903888">panic</span><span class="op" id="2903893">(</span><span class="op" id="2903894">&amp;</span><span class="ident" id="2903895">ValueError</span><span class="op" id="2903905">{</span><span class="string" id="2903906">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2903926">,</span>&nbsp;<span class="ident" id="2903928">v</span><span class="op" id="2903929">.</span><span class="ident" id="2903930">kind</span><span class="op" id="2903934">(</span><span class="op" id="2903935">)</span><span class="op" id="2903936">}</span><span class="op" id="2903937">)</span><br>
<span class="lineno"></span><span class="op" id="2903939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903942">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2903987">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2904056">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2904094">func</span>&nbsp;<span class="op" id="2904099">(</span><span class="ident" id="2904100">v</span>&nbsp;<span class="ident" id="2904102">Value</span><span class="op" id="2904107">)</span>&nbsp;<span class="ident" id="2904109">UnsafeAddr</span><span class="op" id="2904119">(</span><span class="op" id="2904120">)</span>&nbsp;<span class="builtintype" id="2904122">uintptr</span>&nbsp;<span class="op" id="2904130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2904133">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904153">if</span>&nbsp;<span class="ident" id="2904156">v</span><span class="op" id="2904157">.</span><span class="ident" id="2904158">typ</span>&nbsp;<span class="op" id="2904162">==</span>&nbsp;<span class="ident" id="2904165">nil</span>&nbsp;<span class="op" id="2904169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2904173">panic</span><span class="op" id="2904178">(</span><span class="op" id="2904179">&amp;</span><span class="ident" id="2904180">ValueError</span><span class="op" id="2904190">{</span><span class="string" id="2904191">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2904217">,</span>&nbsp;<span class="ident" id="2904219">Invalid</span><span class="op" id="2904226">}</span><span class="op" id="2904227">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904233">if</span>&nbsp;<span class="ident" id="2904236">v</span><span class="op" id="2904237">.</span><span class="ident" id="2904238">flag</span><span class="op" id="2904242">&amp;</span><span class="ident" id="2904243">flagAddr</span>&nbsp;<span class="op" id="2904252">==</span>&nbsp;<span class="num" id="2904255">0</span>&nbsp;<span class="op" id="2904257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2904261">panic</span><span class="op" id="2904266">(</span><span class="string" id="2904267">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2904316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2904319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904322">return</span>&nbsp;<span class="builtintype" id="2904329">uintptr</span><span class="op" id="2904336">(</span><span class="ident" id="2904337">v</span><span class="op" id="2904338">.</span><span class="ident" id="2904339">ptr</span><span class="op" id="2904342">)</span><br>
<span class="lineno">1695</span><span class="op" id="2904344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904347">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2904406">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2904473">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2904503">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2904571">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2904641">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2904704">type</span>&nbsp;<span class="ident" id="2904709">StringHeader</span>&nbsp;<span class="keyword" id="2904722">struct</span>&nbsp;<span class="op" id="2904729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904732">Data</span>&nbsp;<span class="builtintype" id="2904737">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904746">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2904751">int</span><br>
<span class="lineno"></span><span class="op" id="2904755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904758">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2904834">type</span>&nbsp;<span class="ident" id="2904839">stringHeader</span>&nbsp;<span class="keyword" id="2904852">struct</span>&nbsp;<span class="op" id="2904859">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904862">Data</span>&nbsp;<span class="ident" id="2904867">unsafe</span><span class="op" id="2904873">.</span><span class="ident" id="2904874">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2904883">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2904888">int</span><br>
<span class="lineno"></span><span class="op" id="2904892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904895">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2904952">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2905019">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2905049">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2905117">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2905187">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2905250">type</span>&nbsp;<span class="ident" id="2905255">SliceHeader</span>&nbsp;<span class="keyword" id="2905267">struct</span>&nbsp;<span class="op" id="2905274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905277">Data</span>&nbsp;<span class="builtintype" id="2905282">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905291">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2905296">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905301">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2905306">int</span><br>
<span class="lineno"></span><span class="op" id="2905310">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2905313">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2905387">type</span>&nbsp;<span class="ident" id="2905392">sliceHeader</span>&nbsp;<span class="keyword" id="2905404">struct</span>&nbsp;<span class="op" id="2905411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905414">Data</span>&nbsp;<span class="ident" id="2905419">unsafe</span><span class="op" id="2905425">.</span><span class="ident" id="2905426">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905435">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2905440">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905445">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2905450">int</span><br>
<span class="lineno"></span><span class="op" id="2905454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2905457">func</span>&nbsp;<span class="ident" id="2905462">typesMustMatch</span><span class="op" id="2905476">(</span><span class="ident" id="2905477">what</span>&nbsp;<span class="builtintype" id="2905482">string</span><span class="op" id="2905488">,</span>&nbsp;<span class="ident" id="2905490">t1</span><span class="op" id="2905492">,</span>&nbsp;<span class="ident" id="2905494">t2</span>&nbsp;<span class="ident" id="2905497">Type</span><span class="op" id="2905501">)</span>&nbsp;<span class="op" id="2905503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905506">if</span>&nbsp;<span class="ident" id="2905509">t1</span>&nbsp;<span class="op" id="2905512">!=</span>&nbsp;<span class="ident" id="2905515">t2</span>&nbsp;<span class="op" id="2905518">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2905522">panic</span><span class="op" id="2905527">(</span><span class="ident" id="2905528">what</span>&nbsp;<span class="op" id="2905533">+</span>&nbsp;<span class="string" id="2905535">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2905540">+</span>&nbsp;<span class="ident" id="2905542">t1</span><span class="op" id="2905544">.</span><span class="ident" id="2905545">String</span><span class="op" id="2905551">(</span><span class="op" id="2905552">)</span>&nbsp;<span class="op" id="2905554">+</span>&nbsp;<span class="string" id="2905556">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2905563">+</span>&nbsp;<span class="ident" id="2905565">t2</span><span class="op" id="2905567">.</span><span class="ident" id="2905568">String</span><span class="op" id="2905574">(</span><span class="op" id="2905575">)</span><span class="op" id="2905576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905579">}</span><br>
<span class="lineno"></span><span class="op" id="2905581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905584">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2905660">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2905735">func</span>&nbsp;<span class="ident" id="2905740">grow</span><span class="op" id="2905744">(</span><span class="ident" id="2905745">s</span>&nbsp;<span class="ident" id="2905747">Value</span><span class="op" id="2905752">,</span>&nbsp;<span class="ident" id="2905754">extra</span>&nbsp;<span class="builtintype" id="2905760">int</span><span class="op" id="2905763">)</span>&nbsp;<span class="op" id="2905765">(</span><span class="ident" id="2905766">Value</span><span class="op" id="2905771">,</span>&nbsp;<span class="builtintype" id="2905773">int</span><span class="op" id="2905776">,</span>&nbsp;<span class="builtintype" id="2905778">int</span><span class="op" id="2905781">)</span>&nbsp;<span class="op" id="2905783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905786">i0</span>&nbsp;<span class="op" id="2905789">:=</span>&nbsp;<span class="ident" id="2905792">s</span><span class="op" id="2905793">.</span><span class="ident" id="2905794">Len</span><span class="op" id="2905797">(</span><span class="op" id="2905798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905801">i1</span>&nbsp;<span class="op" id="2905804">:=</span>&nbsp;<span class="ident" id="2905807">i0</span>&nbsp;<span class="op" id="2905810">+</span>&nbsp;<span class="ident" id="2905812">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905819">if</span>&nbsp;<span class="ident" id="2905822">i1</span>&nbsp;<span class="op" id="2905825">&lt;</span>&nbsp;<span class="ident" id="2905827">i0</span>&nbsp;<span class="op" id="2905830">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2905834">panic</span><span class="op" id="2905839">(</span><span class="string" id="2905840">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2905872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905878">m</span>&nbsp;<span class="op" id="2905880">:=</span>&nbsp;<span class="ident" id="2905883">s</span><span class="op" id="2905884">.</span><span class="ident" id="2905885">Cap</span><span class="op" id="2905888">(</span><span class="op" id="2905889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905892">if</span>&nbsp;<span class="ident" id="2905895">i1</span>&nbsp;<span class="op" id="2905898">&lt;=</span>&nbsp;<span class="ident" id="2905901">m</span>&nbsp;<span class="op" id="2905903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905907">return</span>&nbsp;<span class="ident" id="2905914">s</span><span class="op" id="2905915">.</span><span class="ident" id="2905916">Slice</span><span class="op" id="2905921">(</span><span class="num" id="2905922">0</span><span class="op" id="2905923">,</span>&nbsp;<span class="ident" id="2905925">i1</span><span class="op" id="2905927">)</span><span class="op" id="2905928">,</span>&nbsp;<span class="ident" id="2905930">i0</span><span class="op" id="2905932">,</span>&nbsp;<span class="ident" id="2905934">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905941">if</span>&nbsp;<span class="ident" id="2905944">m</span>&nbsp;<span class="op" id="2905946">==</span>&nbsp;<span class="num" id="2905949">0</span>&nbsp;<span class="op" id="2905951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2905955">m</span>&nbsp;<span class="op" id="2905957">=</span>&nbsp;<span class="ident" id="2905959">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2905966">}</span>&nbsp;<span class="keyword" id="2905968">else</span>&nbsp;<span class="op" id="2905973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905977">for</span>&nbsp;<span class="ident" id="2905981">m</span>&nbsp;<span class="op" id="2905983">&lt;</span>&nbsp;<span class="ident" id="2905985">i1</span>&nbsp;<span class="op" id="2905988">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2905993">if</span>&nbsp;<span class="ident" id="2905996">i0</span>&nbsp;<span class="op" id="2905999">&lt;</span>&nbsp;<span class="num" id="2906001">1024</span>&nbsp;<span class="op" id="2906006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906012">m</span>&nbsp;<span class="op" id="2906014">+=</span>&nbsp;<span class="ident" id="2906017">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906022">}</span>&nbsp;<span class="keyword" id="2906024">else</span>&nbsp;<span class="op" id="2906029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906035">m</span>&nbsp;<span class="op" id="2906037">+=</span>&nbsp;<span class="ident" id="2906040">m</span>&nbsp;<span class="op" id="2906042">/</span>&nbsp;<span class="num" id="2906044">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906049">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906059">t</span>&nbsp;<span class="op" id="2906061">:=</span>&nbsp;<span class="ident" id="2906064">MakeSlice</span><span class="op" id="2906073">(</span><span class="ident" id="2906074">s</span><span class="op" id="2906075">.</span><span class="ident" id="2906076">Type</span><span class="op" id="2906080">(</span><span class="op" id="2906081">)</span><span class="op" id="2906082">,</span>&nbsp;<span class="ident" id="2906084">i1</span><span class="op" id="2906086">,</span>&nbsp;<span class="ident" id="2906088">m</span><span class="op" id="2906089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906092">Copy</span><span class="op" id="2906096">(</span><span class="ident" id="2906097">t</span><span class="op" id="2906098">,</span>&nbsp;<span class="ident" id="2906100">s</span><span class="op" id="2906101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906104">return</span>&nbsp;<span class="ident" id="2906111">t</span><span class="op" id="2906112">,</span>&nbsp;<span class="ident" id="2906114">i0</span><span class="op" id="2906116">,</span>&nbsp;<span class="ident" id="2906118">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2906121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906124">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2906201">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2906277">func</span>&nbsp;<span class="ident" id="2906282">Append</span><span class="op" id="2906288">(</span><span class="ident" id="2906289">s</span>&nbsp;<span class="ident" id="2906291">Value</span><span class="op" id="2906296">,</span>&nbsp;<span class="ident" id="2906298">x</span>&nbsp;<span class="op" id="2906300">...</span><span class="ident" id="2906303">Value</span><span class="op" id="2906308">)</span>&nbsp;<span class="ident" id="2906310">Value</span>&nbsp;<span class="op" id="2906316">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906319">s</span><span class="op" id="2906320">.</span><span class="ident" id="2906321">mustBe</span><span class="op" id="2906327">(</span><span class="ident" id="2906328">Slice</span><span class="op" id="2906333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906336">s</span><span class="op" id="2906337">,</span>&nbsp;<span class="ident" id="2906339">i0</span><span class="op" id="2906341">,</span>&nbsp;<span class="ident" id="2906343">i1</span>&nbsp;<span class="op" id="2906346">:=</span>&nbsp;<span class="ident" id="2906349">grow</span><span class="op" id="2906353">(</span><span class="ident" id="2906354">s</span><span class="op" id="2906355">,</span>&nbsp;<span class="builtinfunc" id="2906357">len</span><span class="op" id="2906360">(</span><span class="ident" id="2906361">x</span><span class="op" id="2906362">)</span><span class="op" id="2906363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906366">for</span>&nbsp;<span class="ident" id="2906370">i</span><span class="op" id="2906371">,</span>&nbsp;<span class="ident" id="2906373">j</span>&nbsp;<span class="op" id="2906375">:=</span>&nbsp;<span class="ident" id="2906378">i0</span><span class="op" id="2906380">,</span>&nbsp;<span class="num" id="2906382">0</span><span class="op" id="2906383">;</span>&nbsp;<span class="ident" id="2906385">i</span>&nbsp;<span class="op" id="2906387">&lt;</span>&nbsp;<span class="ident" id="2906389">i1</span><span class="op" id="2906391">;</span>&nbsp;<span class="ident" id="2906393">i</span><span class="op" id="2906394">,</span>&nbsp;<span class="ident" id="2906396">j</span>&nbsp;<span class="op" id="2906398">=</span>&nbsp;<span class="ident" id="2906400">i</span><span class="op" id="2906401">+</span><span class="num" id="2906402">1</span><span class="op" id="2906403">,</span>&nbsp;<span class="ident" id="2906405">j</span><span class="op" id="2906406">+</span><span class="num" id="2906407">1</span>&nbsp;<span class="op" id="2906409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906413">s</span><span class="op" id="2906414">.</span><span class="ident" id="2906415">Index</span><span class="op" id="2906420">(</span><span class="ident" id="2906421">i</span><span class="op" id="2906422">)</span><span class="op" id="2906423">.</span><span class="ident" id="2906424">Set</span><span class="op" id="2906427">(</span><span class="ident" id="2906428">x</span><span class="op" id="2906429">[</span><span class="ident" id="2906430">j</span><span class="op" id="2906431">]</span><span class="op" id="2906432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2906435">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906438">return</span>&nbsp;<span class="ident" id="2906445">s</span><br>
<span class="lineno"></span><span class="op" id="2906447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906450">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2906529">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2906584">func</span>&nbsp;<span class="ident" id="2906589">AppendSlice</span><span class="op" id="2906600">(</span><span class="ident" id="2906601">s</span><span class="op" id="2906602">,</span>&nbsp;<span class="ident" id="2906604">t</span>&nbsp;<span class="ident" id="2906606">Value</span><span class="op" id="2906611">)</span>&nbsp;<span class="ident" id="2906613">Value</span>&nbsp;<span class="op" id="2906619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906622">s</span><span class="op" id="2906623">.</span><span class="ident" id="2906624">mustBe</span><span class="op" id="2906630">(</span><span class="ident" id="2906631">Slice</span><span class="op" id="2906636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906639">t</span><span class="op" id="2906640">.</span><span class="ident" id="2906641">mustBe</span><span class="op" id="2906647">(</span><span class="ident" id="2906648">Slice</span><span class="op" id="2906653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906656">typesMustMatch</span><span class="op" id="2906670">(</span><span class="string" id="2906671">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2906692">,</span>&nbsp;<span class="ident" id="2906694">s</span><span class="op" id="2906695">.</span><span class="ident" id="2906696">Type</span><span class="op" id="2906700">(</span><span class="op" id="2906701">)</span><span class="op" id="2906702">.</span><span class="ident" id="2906703">Elem</span><span class="op" id="2906707">(</span><span class="op" id="2906708">)</span><span class="op" id="2906709">,</span>&nbsp;<span class="ident" id="2906711">t</span><span class="op" id="2906712">.</span><span class="ident" id="2906713">Type</span><span class="op" id="2906717">(</span><span class="op" id="2906718">)</span><span class="op" id="2906719">.</span><span class="ident" id="2906720">Elem</span><span class="op" id="2906724">(</span><span class="op" id="2906725">)</span><span class="op" id="2906726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906729">s</span><span class="op" id="2906730">,</span>&nbsp;<span class="ident" id="2906732">i0</span><span class="op" id="2906734">,</span>&nbsp;<span class="ident" id="2906736">i1</span>&nbsp;<span class="op" id="2906739">:=</span>&nbsp;<span class="ident" id="2906742">grow</span><span class="op" id="2906746">(</span><span class="ident" id="2906747">s</span><span class="op" id="2906748">,</span>&nbsp;<span class="ident" id="2906750">t</span><span class="op" id="2906751">.</span><span class="ident" id="2906752">Len</span><span class="op" id="2906755">(</span><span class="op" id="2906756">)</span><span class="op" id="2906757">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2906760">Copy</span><span class="op" id="2906764">(</span><span class="ident" id="2906765">s</span><span class="op" id="2906766">.</span><span class="ident" id="2906767">Slice</span><span class="op" id="2906772">(</span><span class="ident" id="2906773">i0</span><span class="op" id="2906775">,</span>&nbsp;<span class="ident" id="2906777">i1</span><span class="op" id="2906779">)</span><span class="op" id="2906780">,</span>&nbsp;<span class="ident" id="2906782">t</span><span class="op" id="2906783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2906786">return</span>&nbsp;<span class="ident" id="2906793">s</span><br>
<span class="lineno"></span><span class="op" id="2906795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906798">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2906855">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2906905">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2906950">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2907005">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2907053">func</span>&nbsp;<span class="ident" id="2907058">Copy</span><span class="op" id="2907062">(</span><span class="ident" id="2907063">dst</span><span class="op" id="2907066">,</span>&nbsp;<span class="ident" id="2907068">src</span>&nbsp;<span class="ident" id="2907072">Value</span><span class="op" id="2907077">)</span>&nbsp;<span class="builtintype" id="2907079">int</span>&nbsp;<span class="op" id="2907083">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907086">dk</span>&nbsp;<span class="op" id="2907089">:=</span>&nbsp;<span class="ident" id="2907092">dst</span><span class="op" id="2907095">.</span><span class="ident" id="2907096">kind</span><span class="op" id="2907100">(</span><span class="op" id="2907101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907104">if</span>&nbsp;<span class="ident" id="2907107">dk</span>&nbsp;<span class="op" id="2907110">!=</span>&nbsp;<span class="ident" id="2907113">Array</span>&nbsp;<span class="op" id="2907119">&amp;&amp;</span>&nbsp;<span class="ident" id="2907122">dk</span>&nbsp;<span class="op" id="2907125">!=</span>&nbsp;<span class="ident" id="2907128">Slice</span>&nbsp;<span class="op" id="2907134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2907138">panic</span><span class="op" id="2907143">(</span><span class="op" id="2907144">&amp;</span><span class="ident" id="2907145">ValueError</span><span class="op" id="2907155">{</span><span class="string" id="2907156">&#34;reflect.Copy&#34;</span><span class="op" id="2907170">,</span>&nbsp;<span class="ident" id="2907172">dk</span><span class="op" id="2907174">}</span><span class="op" id="2907175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907181">if</span>&nbsp;<span class="ident" id="2907184">dk</span>&nbsp;<span class="op" id="2907187">==</span>&nbsp;<span class="ident" id="2907190">Array</span>&nbsp;<span class="op" id="2907196">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907200">dst</span><span class="op" id="2907203">.</span><span class="ident" id="2907204">mustBeAssignable</span><span class="op" id="2907220">(</span><span class="op" id="2907221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907227">dst</span><span class="op" id="2907230">.</span><span class="ident" id="2907231">mustBeExported</span><span class="op" id="2907245">(</span><span class="op" id="2907246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907250">sk</span>&nbsp;<span class="op" id="2907253">:=</span>&nbsp;<span class="ident" id="2907256">src</span><span class="op" id="2907259">.</span><span class="ident" id="2907260">kind</span><span class="op" id="2907264">(</span><span class="op" id="2907265">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907268">if</span>&nbsp;<span class="ident" id="2907271">sk</span>&nbsp;<span class="op" id="2907274">!=</span>&nbsp;<span class="ident" id="2907277">Array</span>&nbsp;<span class="op" id="2907283">&amp;&amp;</span>&nbsp;<span class="ident" id="2907286">sk</span>&nbsp;<span class="op" id="2907289">!=</span>&nbsp;<span class="ident" id="2907292">Slice</span>&nbsp;<span class="op" id="2907298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2907302">panic</span><span class="op" id="2907307">(</span><span class="op" id="2907308">&amp;</span><span class="ident" id="2907309">ValueError</span><span class="op" id="2907319">{</span><span class="string" id="2907320">&#34;reflect.Copy&#34;</span><span class="op" id="2907334">,</span>&nbsp;<span class="ident" id="2907336">sk</span><span class="op" id="2907338">}</span><span class="op" id="2907339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907345">src</span><span class="op" id="2907348">.</span><span class="ident" id="2907349">mustBeExported</span><span class="op" id="2907363">(</span><span class="op" id="2907364">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907368">de</span>&nbsp;<span class="op" id="2907371">:=</span>&nbsp;<span class="ident" id="2907374">dst</span><span class="op" id="2907377">.</span><span class="ident" id="2907378">typ</span><span class="op" id="2907381">.</span><span class="ident" id="2907382">Elem</span><span class="op" id="2907386">(</span><span class="op" id="2907387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907390">se</span>&nbsp;<span class="op" id="2907393">:=</span>&nbsp;<span class="ident" id="2907396">src</span><span class="op" id="2907399">.</span><span class="ident" id="2907400">typ</span><span class="op" id="2907403">.</span><span class="ident" id="2907404">Elem</span><span class="op" id="2907408">(</span><span class="op" id="2907409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907412">typesMustMatch</span><span class="op" id="2907426">(</span><span class="string" id="2907427">&#34;reflect.Copy&#34;</span><span class="op" id="2907441">,</span>&nbsp;<span class="ident" id="2907443">de</span><span class="op" id="2907445">,</span>&nbsp;<span class="ident" id="2907447">se</span><span class="op" id="2907449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907453">n</span>&nbsp;<span class="op" id="2907455">:=</span>&nbsp;<span class="ident" id="2907458">dst</span><span class="op" id="2907461">.</span><span class="ident" id="2907462">Len</span><span class="op" id="2907465">(</span><span class="op" id="2907466">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907469">if</span>&nbsp;<span class="ident" id="2907472">sn</span>&nbsp;<span class="op" id="2907475">:=</span>&nbsp;<span class="ident" id="2907478">src</span><span class="op" id="2907481">.</span><span class="ident" id="2907482">Len</span><span class="op" id="2907485">(</span><span class="op" id="2907486">)</span><span class="op" id="2907487">;</span>&nbsp;<span class="ident" id="2907489">n</span>&nbsp;<span class="op" id="2907491">&gt;</span>&nbsp;<span class="ident" id="2907493">sn</span>&nbsp;<span class="op" id="2907496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907500">n</span>&nbsp;<span class="op" id="2907502">=</span>&nbsp;<span class="ident" id="2907504">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2907512">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907534">var</span>&nbsp;<span class="ident" id="2907538">da</span><span class="op" id="2907540">,</span>&nbsp;<span class="ident" id="2907542">sa</span>&nbsp;<span class="ident" id="2907545">unsafe</span><span class="op" id="2907551">.</span><span class="ident" id="2907552">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907561">if</span>&nbsp;<span class="ident" id="2907564">dk</span>&nbsp;<span class="op" id="2907567">==</span>&nbsp;<span class="ident" id="2907570">Array</span>&nbsp;<span class="op" id="2907576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907580">da</span>&nbsp;<span class="op" id="2907583">=</span>&nbsp;<span class="ident" id="2907585">dst</span><span class="op" id="2907588">.</span><span class="ident" id="2907589">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907594">}</span>&nbsp;<span class="keyword" id="2907596">else</span>&nbsp;<span class="op" id="2907601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907605">da</span>&nbsp;<span class="op" id="2907608">=</span>&nbsp;<span class="op" id="2907610">(</span><span class="op" id="2907611">*</span><span class="ident" id="2907612">sliceHeader</span><span class="op" id="2907623">)</span><span class="op" id="2907624">(</span><span class="ident" id="2907625">dst</span><span class="op" id="2907628">.</span><span class="ident" id="2907629">ptr</span><span class="op" id="2907632">)</span><span class="op" id="2907633">.</span><span class="ident" id="2907634">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907643">if</span>&nbsp;<span class="ident" id="2907646">src</span><span class="op" id="2907649">.</span><span class="ident" id="2907650">flag</span><span class="op" id="2907654">&amp;</span><span class="ident" id="2907655">flagIndir</span>&nbsp;<span class="op" id="2907665">==</span>&nbsp;<span class="num" id="2907668">0</span>&nbsp;<span class="op" id="2907670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907674">sa</span>&nbsp;<span class="op" id="2907677">=</span>&nbsp;<span class="ident" id="2907679">unsafe</span><span class="op" id="2907685">.</span><span class="ident" id="2907686">Pointer</span><span class="op" id="2907693">(</span><span class="op" id="2907694">&amp;</span><span class="ident" id="2907695">src</span><span class="op" id="2907698">.</span><span class="ident" id="2907699">ptr</span><span class="op" id="2907702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907705">}</span>&nbsp;<span class="keyword" id="2907707">else</span>&nbsp;<span class="keyword" id="2907712">if</span>&nbsp;<span class="ident" id="2907715">sk</span>&nbsp;<span class="op" id="2907718">==</span>&nbsp;<span class="ident" id="2907721">Array</span>&nbsp;<span class="op" id="2907727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907731">sa</span>&nbsp;<span class="op" id="2907734">=</span>&nbsp;<span class="ident" id="2907736">src</span><span class="op" id="2907739">.</span><span class="ident" id="2907740">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907745">}</span>&nbsp;<span class="keyword" id="2907747">else</span>&nbsp;<span class="op" id="2907752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907756">sa</span>&nbsp;<span class="op" id="2907759">=</span>&nbsp;<span class="op" id="2907761">(</span><span class="op" id="2907762">*</span><span class="ident" id="2907763">sliceHeader</span><span class="op" id="2907774">)</span><span class="op" id="2907775">(</span><span class="ident" id="2907776">src</span><span class="op" id="2907779">.</span><span class="ident" id="2907780">ptr</span><span class="op" id="2907783">)</span><span class="op" id="2907784">.</span><span class="ident" id="2907785">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907794">memmove</span><span class="op" id="2907801">(</span><span class="ident" id="2907802">da</span><span class="op" id="2907804">,</span>&nbsp;<span class="ident" id="2907806">sa</span><span class="op" id="2907808">,</span>&nbsp;<span class="builtintype" id="2907810">uintptr</span><span class="op" id="2907817">(</span><span class="ident" id="2907818">n</span><span class="op" id="2907819">)</span><span class="op" id="2907820">*</span><span class="ident" id="2907821">de</span><span class="op" id="2907823">.</span><span class="ident" id="2907824">Size</span><span class="op" id="2907828">(</span><span class="op" id="2907829">)</span><span class="op" id="2907830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907833">return</span>&nbsp;<span class="ident" id="2907840">n</span><br>
<span class="lineno">1835</span><span class="op" id="2907842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907845">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2907900">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2907955">type</span>&nbsp;<span class="ident" id="2907960">runtimeSelect</span>&nbsp;<span class="keyword" id="2907974">struct</span>&nbsp;<span class="op" id="2907981">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907984">dir</span>&nbsp;<span class="builtintype" id="2907988">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2908003">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908030">typ</span>&nbsp;<span class="op" id="2908034">*</span><span class="ident" id="2908035">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2908049">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908066">ch</span>&nbsp;&nbsp;<span class="ident" id="2908070">unsafe</span><span class="op" id="2908076">.</span><span class="ident" id="2908077">Pointer</span>&nbsp;<span class="comment" id="2908085">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908097">val</span>&nbsp;<span class="ident" id="2908101">unsafe</span><span class="op" id="2908107">.</span><span class="ident" id="2908108">Pointer</span>&nbsp;<span class="comment" id="2908116">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2908176">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2908179">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2908247">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2908319">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2908389">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2908409">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2908423">func</span>&nbsp;<span class="ident" id="2908428">rselect</span><span class="op" id="2908435">(</span><span class="op" id="2908436">[</span><span class="op" id="2908437">]</span><span class="ident" id="2908438">runtimeSelect</span><span class="op" id="2908451">)</span>&nbsp;<span class="op" id="2908453">(</span><span class="ident" id="2908454">chosen</span>&nbsp;<span class="builtintype" id="2908461">int</span><span class="op" id="2908464">,</span>&nbsp;<span class="ident" id="2908466">recvOK</span>&nbsp;<span class="builtintype" id="2908473">bool</span><span class="op" id="2908477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908480">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2908551">type</span>&nbsp;<span class="ident" id="2908556">SelectDir</span>&nbsp;<span class="builtintype" id="2908566">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2908571">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2908638">const</span>&nbsp;<span class="op" id="2908644">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908647">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2908661">SelectDir</span>&nbsp;<span class="op" id="2908671">=</span>&nbsp;<span class="ident" id="2908673">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908679">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2908703">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908725">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2908749">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908766">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2908790">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2908801">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2908804">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2908867">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2908932">//</span><br>
<span class="lineno"></span><span class="comment" id="2908935">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2908999">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2909037">//</span><br>
<span class="lineno"></span><span class="comment" id="2909040">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2909103">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2909194">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2909283">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2909375">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2909391">//</span><br>
<span class="lineno"></span><span class="comment" id="2909394">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2909460">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2909545">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2909636">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2909719">//</span><br>
<span class="lineno"></span><span class="keyword" id="2909722">type</span>&nbsp;<span class="ident" id="2909727">SelectCase</span>&nbsp;<span class="keyword" id="2909738">struct</span>&nbsp;<span class="op" id="2909745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909748">Dir</span>&nbsp;&nbsp;<span class="ident" id="2909753">SelectDir</span>&nbsp;<span class="comment" id="2909763">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909785">Chan</span>&nbsp;<span class="ident" id="2909790">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2909800">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909841">Send</span>&nbsp;<span class="ident" id="2909846">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2909856">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2909884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909887">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2909957">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2910032">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2910086">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2910158">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2910229">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2910306">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2910378">func</span>&nbsp;<span class="ident" id="2910383">Select</span><span class="op" id="2910389">(</span><span class="ident" id="2910390">cases</span>&nbsp;<span class="op" id="2910396">[</span><span class="op" id="2910397">]</span><span class="ident" id="2910398">SelectCase</span><span class="op" id="2910408">)</span>&nbsp;<span class="op" id="2910410">(</span><span class="ident" id="2910411">chosen</span>&nbsp;<span class="builtintype" id="2910418">int</span><span class="op" id="2910421">,</span>&nbsp;<span class="ident" id="2910423">recv</span>&nbsp;<span class="ident" id="2910428">Value</span><span class="op" id="2910433">,</span>&nbsp;<span class="ident" id="2910435">recvOK</span>&nbsp;<span class="builtintype" id="2910442">bool</span><span class="op" id="2910446">)</span>&nbsp;<span class="op" id="2910448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910451">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910525">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2910600">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910658">runcases</span>&nbsp;<span class="op" id="2910667">:=</span>&nbsp;<span class="builtinfunc" id="2910670">make</span><span class="op" id="2910674">(</span><span class="op" id="2910675">[</span><span class="op" id="2910676">]</span><span class="ident" id="2910677">runtimeSelect</span><span class="op" id="2910690">,</span>&nbsp;<span class="builtinfunc" id="2910692">len</span><span class="op" id="2910695">(</span><span class="ident" id="2910696">cases</span><span class="op" id="2910701">)</span><span class="op" id="2910702">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910705">haveDefault</span>&nbsp;<span class="op" id="2910717">:=</span>&nbsp;<span class="builtintype" id="2910720">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910727">for</span>&nbsp;<span class="ident" id="2910731">i</span><span class="op" id="2910732">,</span>&nbsp;<span class="ident" id="2910734">c</span>&nbsp;<span class="op" id="2910736">:=</span>&nbsp;<span class="keyword" id="2910739">range</span>&nbsp;<span class="ident" id="2910745">cases</span>&nbsp;<span class="op" id="2910751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910755">rc</span>&nbsp;<span class="op" id="2910758">:=</span>&nbsp;<span class="op" id="2910761">&amp;</span><span class="ident" id="2910762">runcases</span><span class="op" id="2910770">[</span><span class="ident" id="2910771">i</span><span class="op" id="2910772">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910776">rc</span><span class="op" id="2910778">.</span><span class="ident" id="2910779">dir</span>&nbsp;<span class="op" id="2910783">=</span>&nbsp;<span class="builtintype" id="2910785">uintptr</span><span class="op" id="2910792">(</span><span class="ident" id="2910793">c</span><span class="op" id="2910794">.</span><span class="ident" id="2910795">Dir</span><span class="op" id="2910798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910802">switch</span>&nbsp;<span class="ident" id="2910809">c</span><span class="op" id="2910810">.</span><span class="ident" id="2910811">Dir</span>&nbsp;<span class="op" id="2910815">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910819">default</span><span class="op" id="2910826">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2910831">panic</span><span class="op" id="2910836">(</span><span class="string" id="2910837">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2910866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910871">case</span>&nbsp;<span class="ident" id="2910876">SelectDefault</span><span class="op" id="2910889">:</span>&nbsp;<span class="comment" id="2910891">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2910905">if</span>&nbsp;<span class="ident" id="2910908">haveDefault</span>&nbsp;<span class="op" id="2910920">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2910926">panic</span><span class="op" id="2910931">(</span><span class="string" id="2910932">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2910972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2910977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2910982">haveDefault</span>&nbsp;<span class="op" id="2910994">=</span>&nbsp;<span class="builtintype" id="2910996">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911004">if</span>&nbsp;<span class="ident" id="2911007">c</span><span class="op" id="2911008">.</span><span class="ident" id="2911009">Chan</span><span class="op" id="2911013">.</span><span class="ident" id="2911014">IsValid</span><span class="op" id="2911021">(</span><span class="op" id="2911022">)</span>&nbsp;<span class="op" id="2911024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2911030">panic</span><span class="op" id="2911035">(</span><span class="string" id="2911036">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2911081">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911091">if</span>&nbsp;<span class="ident" id="2911094">c</span><span class="op" id="2911095">.</span><span class="ident" id="2911096">Send</span><span class="op" id="2911100">.</span><span class="ident" id="2911101">IsValid</span><span class="op" id="2911108">(</span><span class="op" id="2911109">)</span>&nbsp;<span class="op" id="2911111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2911117">panic</span><span class="op" id="2911122">(</span><span class="string" id="2911123">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2911168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911178">case</span>&nbsp;<span class="ident" id="2911183">SelectSend</span><span class="op" id="2911193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911198">ch</span>&nbsp;<span class="op" id="2911201">:=</span>&nbsp;<span class="ident" id="2911204">c</span><span class="op" id="2911205">.</span><span class="ident" id="2911206">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911214">if</span>&nbsp;<span class="op" id="2911217">!</span><span class="ident" id="2911218">ch</span><span class="op" id="2911220">.</span><span class="ident" id="2911221">IsValid</span><span class="op" id="2911228">(</span><span class="op" id="2911229">)</span>&nbsp;<span class="op" id="2911231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911237">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911246">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911251">ch</span><span class="op" id="2911253">.</span><span class="ident" id="2911254">mustBe</span><span class="op" id="2911260">(</span><span class="ident" id="2911261">Chan</span><span class="op" id="2911265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911270">ch</span><span class="op" id="2911272">.</span><span class="ident" id="2911273">mustBeExported</span><span class="op" id="2911287">(</span><span class="op" id="2911288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911293">tt</span>&nbsp;<span class="op" id="2911296">:=</span>&nbsp;<span class="op" id="2911299">(</span><span class="op" id="2911300">*</span><span class="ident" id="2911301">chanType</span><span class="op" id="2911309">)</span><span class="op" id="2911310">(</span><span class="ident" id="2911311">unsafe</span><span class="op" id="2911317">.</span><span class="ident" id="2911318">Pointer</span><span class="op" id="2911325">(</span><span class="ident" id="2911326">ch</span><span class="op" id="2911328">.</span><span class="ident" id="2911329">typ</span><span class="op" id="2911332">)</span><span class="op" id="2911333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911338">if</span>&nbsp;<span class="ident" id="2911341">ChanDir</span><span class="op" id="2911348">(</span><span class="ident" id="2911349">tt</span><span class="op" id="2911351">.</span><span class="ident" id="2911352">dir</span><span class="op" id="2911355">)</span><span class="op" id="2911356">&amp;</span><span class="ident" id="2911357">SendDir</span>&nbsp;<span class="op" id="2911365">==</span>&nbsp;<span class="num" id="2911368">0</span>&nbsp;<span class="op" id="2911370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2911376">panic</span><span class="op" id="2911381">(</span><span class="string" id="2911382">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2911436">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911446">rc</span><span class="op" id="2911448">.</span><span class="ident" id="2911449">ch</span>&nbsp;<span class="op" id="2911452">=</span>&nbsp;<span class="ident" id="2911454">ch</span><span class="op" id="2911456">.</span><span class="ident" id="2911457">pointer</span><span class="op" id="2911464">(</span><span class="op" id="2911465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911470">rc</span><span class="op" id="2911472">.</span><span class="ident" id="2911473">typ</span>&nbsp;<span class="op" id="2911477">=</span>&nbsp;<span class="op" id="2911479">&amp;</span><span class="ident" id="2911480">tt</span><span class="op" id="2911482">.</span><span class="ident" id="2911483">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911492">v</span>&nbsp;<span class="op" id="2911494">:=</span>&nbsp;<span class="ident" id="2911497">c</span><span class="op" id="2911498">.</span><span class="ident" id="2911499">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911507">if</span>&nbsp;<span class="op" id="2911510">!</span><span class="ident" id="2911511">v</span><span class="op" id="2911512">.</span><span class="ident" id="2911513">IsValid</span><span class="op" id="2911520">(</span><span class="op" id="2911521">)</span>&nbsp;<span class="op" id="2911523">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2911529">panic</span><span class="op" id="2911534">(</span><span class="string" id="2911535">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2911584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911594">v</span><span class="op" id="2911595">.</span><span class="ident" id="2911596">mustBeExported</span><span class="op" id="2911610">(</span><span class="op" id="2911611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911616">v</span>&nbsp;<span class="op" id="2911618">=</span>&nbsp;<span class="ident" id="2911620">v</span><span class="op" id="2911621">.</span><span class="ident" id="2911622">assignTo</span><span class="op" id="2911630">(</span><span class="string" id="2911631">&#34;reflect.Select&#34;</span><span class="op" id="2911647">,</span>&nbsp;<span class="ident" id="2911649">tt</span><span class="op" id="2911651">.</span><span class="ident" id="2911652">elem</span><span class="op" id="2911656">,</span>&nbsp;<span class="ident" id="2911658">nil</span><span class="op" id="2911661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911666">if</span>&nbsp;<span class="ident" id="2911669">v</span><span class="op" id="2911670">.</span><span class="ident" id="2911671">flag</span><span class="op" id="2911675">&amp;</span><span class="ident" id="2911676">flagIndir</span>&nbsp;<span class="op" id="2911686">!=</span>&nbsp;<span class="num" id="2911689">0</span>&nbsp;<span class="op" id="2911691">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911697">rc</span><span class="op" id="2911699">.</span><span class="ident" id="2911700">val</span>&nbsp;<span class="op" id="2911704">=</span>&nbsp;<span class="ident" id="2911706">v</span><span class="op" id="2911707">.</span><span class="ident" id="2911708">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911715">}</span>&nbsp;<span class="keyword" id="2911717">else</span>&nbsp;<span class="op" id="2911722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911728">rc</span><span class="op" id="2911730">.</span><span class="ident" id="2911731">val</span>&nbsp;<span class="op" id="2911735">=</span>&nbsp;<span class="ident" id="2911737">unsafe</span><span class="op" id="2911743">.</span><span class="ident" id="2911744">Pointer</span><span class="op" id="2911751">(</span><span class="op" id="2911752">&amp;</span><span class="ident" id="2911753">v</span><span class="op" id="2911754">.</span><span class="ident" id="2911755">ptr</span><span class="op" id="2911758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911768">case</span>&nbsp;<span class="ident" id="2911773">SelectRecv</span><span class="op" id="2911783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911788">if</span>&nbsp;<span class="ident" id="2911791">c</span><span class="op" id="2911792">.</span><span class="ident" id="2911793">Send</span><span class="op" id="2911797">.</span><span class="ident" id="2911798">IsValid</span><span class="op" id="2911805">(</span><span class="op" id="2911806">)</span>&nbsp;<span class="op" id="2911808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2911814">panic</span><span class="op" id="2911819">(</span><span class="string" id="2911820">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2911865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911875">ch</span>&nbsp;<span class="op" id="2911878">:=</span>&nbsp;<span class="ident" id="2911881">c</span><span class="op" id="2911882">.</span><span class="ident" id="2911883">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911891">if</span>&nbsp;<span class="op" id="2911894">!</span><span class="ident" id="2911895">ch</span><span class="op" id="2911897">.</span><span class="ident" id="2911898">IsValid</span><span class="op" id="2911905">(</span><span class="op" id="2911906">)</span>&nbsp;<span class="op" id="2911908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2911914">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2911923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911928">ch</span><span class="op" id="2911930">.</span><span class="ident" id="2911931">mustBe</span><span class="op" id="2911937">(</span><span class="ident" id="2911938">Chan</span><span class="op" id="2911942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911947">ch</span><span class="op" id="2911949">.</span><span class="ident" id="2911950">mustBeExported</span><span class="op" id="2911964">(</span><span class="op" id="2911965">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2911970">tt</span>&nbsp;<span class="op" id="2911973">:=</span>&nbsp;<span class="op" id="2911976">(</span><span class="op" id="2911977">*</span><span class="ident" id="2911978">chanType</span><span class="op" id="2911986">)</span><span class="op" id="2911987">(</span><span class="ident" id="2911988">unsafe</span><span class="op" id="2911994">.</span><span class="ident" id="2911995">Pointer</span><span class="op" id="2912002">(</span><span class="ident" id="2912003">ch</span><span class="op" id="2912005">.</span><span class="ident" id="2912006">typ</span><span class="op" id="2912009">)</span><span class="op" id="2912010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912015">if</span>&nbsp;<span class="ident" id="2912018">ChanDir</span><span class="op" id="2912025">(</span><span class="ident" id="2912026">tt</span><span class="op" id="2912028">.</span><span class="ident" id="2912029">dir</span><span class="op" id="2912032">)</span><span class="op" id="2912033">&amp;</span><span class="ident" id="2912034">RecvDir</span>&nbsp;<span class="op" id="2912042">==</span>&nbsp;<span class="num" id="2912045">0</span>&nbsp;<span class="op" id="2912047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912053">panic</span><span class="op" id="2912058">(</span><span class="string" id="2912059">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2912113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912123">rc</span><span class="op" id="2912125">.</span><span class="ident" id="2912126">ch</span>&nbsp;<span class="op" id="2912129">=</span>&nbsp;<span class="ident" id="2912131">ch</span><span class="op" id="2912133">.</span><span class="ident" id="2912134">pointer</span><span class="op" id="2912141">(</span><span class="op" id="2912142">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912147">rc</span><span class="op" id="2912149">.</span><span class="ident" id="2912150">typ</span>&nbsp;<span class="op" id="2912154">=</span>&nbsp;<span class="op" id="2912156">&amp;</span><span class="ident" id="2912157">tt</span><span class="op" id="2912159">.</span><span class="ident" id="2912160">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912169">rc</span><span class="op" id="2912171">.</span><span class="ident" id="2912172">val</span>&nbsp;<span class="op" id="2912176">=</span>&nbsp;<span class="ident" id="2912178">unsafe_New</span><span class="op" id="2912188">(</span><span class="ident" id="2912189">tt</span><span class="op" id="2912191">.</span><span class="ident" id="2912192">elem</span><span class="op" id="2912196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912207">chosen</span><span class="op" id="2912213">,</span>&nbsp;<span class="ident" id="2912215">recvOK</span>&nbsp;<span class="op" id="2912222">=</span>&nbsp;<span class="ident" id="2912224">rselect</span><span class="op" id="2912231">(</span><span class="ident" id="2912232">runcases</span><span class="op" id="2912240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912243">if</span>&nbsp;<span class="ident" id="2912246">runcases</span><span class="op" id="2912254">[</span><span class="ident" id="2912255">chosen</span><span class="op" id="2912261">]</span><span class="op" id="2912262">.</span><span class="ident" id="2912263">dir</span>&nbsp;<span class="op" id="2912267">==</span>&nbsp;<span class="builtintype" id="2912270">uintptr</span><span class="op" id="2912277">(</span><span class="ident" id="2912278">SelectRecv</span><span class="op" id="2912288">)</span>&nbsp;<span class="op" id="2912290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912294">tt</span>&nbsp;<span class="op" id="2912297">:=</span>&nbsp;<span class="op" id="2912300">(</span><span class="op" id="2912301">*</span><span class="ident" id="2912302">chanType</span><span class="op" id="2912310">)</span><span class="op" id="2912311">(</span><span class="ident" id="2912312">unsafe</span><span class="op" id="2912318">.</span><span class="ident" id="2912319">Pointer</span><span class="op" id="2912326">(</span><span class="ident" id="2912327">runcases</span><span class="op" id="2912335">[</span><span class="ident" id="2912336">chosen</span><span class="op" id="2912342">]</span><span class="op" id="2912343">.</span><span class="ident" id="2912344">typ</span><span class="op" id="2912347">)</span><span class="op" id="2912348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912352">t</span>&nbsp;<span class="op" id="2912354">:=</span>&nbsp;<span class="ident" id="2912357">tt</span><span class="op" id="2912359">.</span><span class="ident" id="2912360">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912367">p</span>&nbsp;<span class="op" id="2912369">:=</span>&nbsp;<span class="ident" id="2912372">runcases</span><span class="op" id="2912380">[</span><span class="ident" id="2912381">chosen</span><span class="op" id="2912387">]</span><span class="op" id="2912388">.</span><span class="ident" id="2912389">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912395">fl</span>&nbsp;<span class="op" id="2912398">:=</span>&nbsp;<span class="ident" id="2912401">flag</span><span class="op" id="2912405">(</span><span class="ident" id="2912406">t</span><span class="op" id="2912407">.</span><span class="ident" id="2912408">Kind</span><span class="op" id="2912412">(</span><span class="op" id="2912413">)</span><span class="op" id="2912414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912418">if</span>&nbsp;<span class="ident" id="2912421">ifaceIndir</span><span class="op" id="2912431">(</span><span class="ident" id="2912432">t</span><span class="op" id="2912433">)</span>&nbsp;<span class="op" id="2912435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912440">recv</span>&nbsp;<span class="op" id="2912445">=</span>&nbsp;<span class="ident" id="2912447">Value</span><span class="op" id="2912452">{</span><span class="ident" id="2912453">t</span><span class="op" id="2912454">,</span>&nbsp;<span class="ident" id="2912456">p</span><span class="op" id="2912457">,</span>&nbsp;<span class="ident" id="2912459">fl</span>&nbsp;<span class="op" id="2912462">|</span>&nbsp;<span class="ident" id="2912464">flagIndir</span><span class="op" id="2912473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912477">}</span>&nbsp;<span class="keyword" id="2912479">else</span>&nbsp;<span class="op" id="2912484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2912489">recv</span>&nbsp;<span class="op" id="2912494">=</span>&nbsp;<span class="ident" id="2912496">Value</span><span class="op" id="2912501">{</span><span class="ident" id="2912502">t</span><span class="op" id="2912503">,</span>&nbsp;<span class="op" id="2912505">*</span><span class="op" id="2912506">(</span><span class="op" id="2912507">*</span><span class="ident" id="2912508">unsafe</span><span class="op" id="2912514">.</span><span class="ident" id="2912515">Pointer</span><span class="op" id="2912522">)</span><span class="op" id="2912523">(</span><span class="ident" id="2912524">p</span><span class="op" id="2912525">)</span><span class="op" id="2912526">,</span>&nbsp;<span class="ident" id="2912528">fl</span><span class="op" id="2912530">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912540">return</span>&nbsp;<span class="ident" id="2912547">chosen</span><span class="op" id="2912553">,</span>&nbsp;<span class="ident" id="2912555">recv</span><span class="op" id="2912559">,</span>&nbsp;<span class="ident" id="2912561">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2912568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2912571">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912595">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2912629">func</span>&nbsp;<span class="ident" id="2912634">unsafe_New</span><span class="op" id="2912644">(</span><span class="op" id="2912645">*</span><span class="ident" id="2912646">rtype</span><span class="op" id="2912651">)</span>&nbsp;<span class="ident" id="2912653">unsafe</span><span class="op" id="2912659">.</span><span class="ident" id="2912660">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2912668">func</span>&nbsp;<span class="ident" id="2912673">unsafe_NewArray</span><span class="op" id="2912688">(</span><span class="op" id="2912689">*</span><span class="ident" id="2912690">rtype</span><span class="op" id="2912695">,</span>&nbsp;<span class="builtintype" id="2912697">int</span><span class="op" id="2912700">)</span>&nbsp;<span class="ident" id="2912702">unsafe</span><span class="op" id="2912708">.</span><span class="ident" id="2912709">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912718">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2912774">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2912829">func</span>&nbsp;<span class="ident" id="2912834">MakeSlice</span><span class="op" id="2912843">(</span><span class="ident" id="2912844">typ</span>&nbsp;<span class="ident" id="2912848">Type</span><span class="op" id="2912852">,</span>&nbsp;<span class="builtinfunc" id="2912854">len</span><span class="op" id="2912857">,</span>&nbsp;<span class="builtinfunc" id="2912859">cap</span>&nbsp;<span class="builtintype" id="2912863">int</span><span class="op" id="2912866">)</span>&nbsp;<span class="ident" id="2912868">Value</span>&nbsp;<span class="op" id="2912874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912877">if</span>&nbsp;<span class="ident" id="2912880">typ</span><span class="op" id="2912883">.</span><span class="ident" id="2912884">Kind</span><span class="op" id="2912888">(</span><span class="op" id="2912889">)</span>&nbsp;<span class="op" id="2912891">!=</span>&nbsp;<span class="ident" id="2912894">Slice</span>&nbsp;<span class="op" id="2912900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912904">panic</span><span class="op" id="2912909">(</span><span class="string" id="2912910">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2912947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2912950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2912953">if</span>&nbsp;<span class="builtinfunc" id="2912956">len</span>&nbsp;<span class="op" id="2912960">&lt;</span>&nbsp;<span class="num" id="2912962">0</span>&nbsp;<span class="op" id="2912964">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2912968">panic</span><span class="op" id="2912973">(</span><span class="string" id="2912974">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2913007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913013">if</span>&nbsp;<span class="builtinfunc" id="2913016">cap</span>&nbsp;<span class="op" id="2913020">&lt;</span>&nbsp;<span class="num" id="2913022">0</span>&nbsp;<span class="op" id="2913024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913028">panic</span><span class="op" id="2913033">(</span><span class="string" id="2913034">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2913067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913070">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913073">if</span>&nbsp;<span class="builtinfunc" id="2913076">len</span>&nbsp;<span class="op" id="2913080">&gt;</span>&nbsp;<span class="builtinfunc" id="2913082">cap</span>&nbsp;<span class="op" id="2913086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913090">panic</span><span class="op" id="2913095">(</span><span class="string" id="2913096">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2913126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913133">s</span>&nbsp;<span class="op" id="2913135">:=</span>&nbsp;<span class="ident" id="2913138">sliceHeader</span><span class="op" id="2913149">{</span><span class="ident" id="2913150">unsafe_NewArray</span><span class="op" id="2913165">(</span><span class="ident" id="2913166">typ</span><span class="op" id="2913169">.</span><span class="ident" id="2913170">Elem</span><span class="op" id="2913174">(</span><span class="op" id="2913175">)</span><span class="op" id="2913176">.</span><span class="op" id="2913177">(</span><span class="op" id="2913178">*</span><span class="ident" id="2913179">rtype</span><span class="op" id="2913184">)</span><span class="op" id="2913185">,</span>&nbsp;<span class="builtinfunc" id="2913187">cap</span><span class="op" id="2913190">)</span><span class="op" id="2913191">,</span>&nbsp;<span class="builtinfunc" id="2913193">len</span><span class="op" id="2913196">,</span>&nbsp;<span class="builtinfunc" id="2913198">cap</span><span class="op" id="2913201">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913204">return</span>&nbsp;<span class="ident" id="2913211">Value</span><span class="op" id="2913216">{</span><span class="ident" id="2913217">typ</span><span class="op" id="2913220">.</span><span class="ident" id="2913221">common</span><span class="op" id="2913227">(</span><span class="op" id="2913228">)</span><span class="op" id="2913229">,</span>&nbsp;<span class="ident" id="2913231">unsafe</span><span class="op" id="2913237">.</span><span class="ident" id="2913238">Pointer</span><span class="op" id="2913245">(</span><span class="op" id="2913246">&amp;</span><span class="ident" id="2913247">s</span><span class="op" id="2913248">)</span><span class="op" id="2913249">,</span>&nbsp;<span class="ident" id="2913251">flagIndir</span>&nbsp;<span class="op" id="2913261">|</span>&nbsp;<span class="ident" id="2913263">flag</span><span class="op" id="2913267">(</span><span class="ident" id="2913268">Slice</span><span class="op" id="2913273">)</span><span class="op" id="2913274">}</span><br>
<span class="lineno"></span><span class="op" id="2913276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913279">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2913354">func</span>&nbsp;<span class="ident" id="2913359">MakeChan</span><span class="op" id="2913367">(</span><span class="ident" id="2913368">typ</span>&nbsp;<span class="ident" id="2913372">Type</span><span class="op" id="2913376">,</span>&nbsp;<span class="ident" id="2913378">buffer</span>&nbsp;<span class="builtintype" id="2913385">int</span><span class="op" id="2913388">)</span>&nbsp;<span class="ident" id="2913390">Value</span>&nbsp;<span class="op" id="2913396">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913399">if</span>&nbsp;<span class="ident" id="2913402">typ</span><span class="op" id="2913405">.</span><span class="ident" id="2913406">Kind</span><span class="op" id="2913410">(</span><span class="op" id="2913411">)</span>&nbsp;<span class="op" id="2913413">!=</span>&nbsp;<span class="ident" id="2913416">Chan</span>&nbsp;<span class="op" id="2913421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913425">panic</span><span class="op" id="2913430">(</span><span class="string" id="2913431">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2913466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913472">if</span>&nbsp;<span class="ident" id="2913475">buffer</span>&nbsp;<span class="op" id="2913482">&lt;</span>&nbsp;<span class="num" id="2913484">0</span>&nbsp;<span class="op" id="2913486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913490">panic</span><span class="op" id="2913495">(</span><span class="string" id="2913496">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2913536">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913542">if</span>&nbsp;<span class="ident" id="2913545">typ</span><span class="op" id="2913548">.</span><span class="ident" id="2913549">ChanDir</span><span class="op" id="2913556">(</span><span class="op" id="2913557">)</span>&nbsp;<span class="op" id="2913559">!=</span>&nbsp;<span class="ident" id="2913562">BothDir</span>&nbsp;<span class="op" id="2913570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913574">panic</span><span class="op" id="2913579">(</span><span class="string" id="2913580">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2913627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913633">ch</span>&nbsp;<span class="op" id="2913636">:=</span>&nbsp;<span class="ident" id="2913639">makechan</span><span class="op" id="2913647">(</span><span class="ident" id="2913648">typ</span><span class="op" id="2913651">.</span><span class="op" id="2913652">(</span><span class="op" id="2913653">*</span><span class="ident" id="2913654">rtype</span><span class="op" id="2913659">)</span><span class="op" id="2913660">,</span>&nbsp;<span class="ident" id="2913662">uint64</span><span class="op" id="2913668">(</span><span class="ident" id="2913669">buffer</span><span class="op" id="2913675">)</span><span class="op" id="2913676">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913679">return</span>&nbsp;<span class="ident" id="2913686">Value</span><span class="op" id="2913691">{</span><span class="ident" id="2913692">typ</span><span class="op" id="2913695">.</span><span class="ident" id="2913696">common</span><span class="op" id="2913702">(</span><span class="op" id="2913703">)</span><span class="op" id="2913704">,</span>&nbsp;<span class="ident" id="2913706">ch</span><span class="op" id="2913708">,</span>&nbsp;<span class="ident" id="2913710">flag</span><span class="op" id="2913714">(</span><span class="ident" id="2913715">Chan</span><span class="op" id="2913719">)</span><span class="op" id="2913720">}</span><br>
<span class="lineno"></span><span class="op" id="2913722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913725">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2913777">func</span>&nbsp;<span class="ident" id="2913782">MakeMap</span><span class="op" id="2913789">(</span><span class="ident" id="2913790">typ</span>&nbsp;<span class="ident" id="2913794">Type</span><span class="op" id="2913798">)</span>&nbsp;<span class="ident" id="2913800">Value</span>&nbsp;<span class="op" id="2913806">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913809">if</span>&nbsp;<span class="ident" id="2913812">typ</span><span class="op" id="2913815">.</span><span class="ident" id="2913816">Kind</span><span class="op" id="2913820">(</span><span class="op" id="2913821">)</span>&nbsp;<span class="op" id="2913823">!=</span>&nbsp;<span class="ident" id="2913826">Map</span>&nbsp;<span class="op" id="2913830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2913834">panic</span><span class="op" id="2913839">(</span><span class="string" id="2913840">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2913873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2913876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2913879">m</span>&nbsp;<span class="op" id="2913881">:=</span>&nbsp;<span class="ident" id="2913884">makemap</span><span class="op" id="2913891">(</span><span class="ident" id="2913892">typ</span><span class="op" id="2913895">.</span><span class="op" id="2913896">(</span><span class="op" id="2913897">*</span><span class="ident" id="2913898">rtype</span><span class="op" id="2913903">)</span><span class="op" id="2913904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2913907">return</span>&nbsp;<span class="ident" id="2913914">Value</span><span class="op" id="2913919">{</span><span class="ident" id="2913920">typ</span><span class="op" id="2913923">.</span><span class="ident" id="2913924">common</span><span class="op" id="2913930">(</span><span class="op" id="2913931">)</span><span class="op" id="2913932">,</span>&nbsp;<span class="ident" id="2913934">m</span><span class="op" id="2913935">,</span>&nbsp;<span class="ident" id="2913937">flag</span><span class="op" id="2913941">(</span><span class="ident" id="2913942">Map</span><span class="op" id="2913945">)</span><span class="op" id="2913946">}</span><br>
<span class="lineno">2030</span><span class="op" id="2913948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2913951">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2913999">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2914056">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2914102">func</span>&nbsp;<span class="ident" id="2914107">Indirect</span><span class="op" id="2914115">(</span><span class="ident" id="2914116">v</span>&nbsp;<span class="ident" id="2914118">Value</span><span class="op" id="2914123">)</span>&nbsp;<span class="ident" id="2914125">Value</span>&nbsp;<span class="op" id="2914131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914134">if</span>&nbsp;<span class="ident" id="2914137">v</span><span class="op" id="2914138">.</span><span class="ident" id="2914139">Kind</span><span class="op" id="2914143">(</span><span class="op" id="2914144">)</span>&nbsp;<span class="op" id="2914146">!=</span>&nbsp;<span class="ident" id="2914149">Ptr</span>&nbsp;<span class="op" id="2914153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914157">return</span>&nbsp;<span class="ident" id="2914164">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914170">return</span>&nbsp;<span class="ident" id="2914177">v</span><span class="op" id="2914178">.</span><span class="ident" id="2914179">Elem</span><span class="op" id="2914183">(</span><span class="op" id="2914184">)</span><br>
<span class="lineno">2040</span><span class="op" id="2914186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914189">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2914254">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2914322">func</span>&nbsp;<span class="ident" id="2914327">ValueOf</span><span class="op" id="2914334">(</span><span class="ident" id="2914335">i</span>&nbsp;<span class="keyword" id="2914337">interface</span><span class="op" id="2914346">{</span><span class="op" id="2914347">}</span><span class="op" id="2914348">)</span>&nbsp;<span class="ident" id="2914350">Value</span>&nbsp;<span class="op" id="2914356">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914359">if</span>&nbsp;<span class="ident" id="2914362">i</span>&nbsp;<span class="op" id="2914364">==</span>&nbsp;<span class="ident" id="2914367">nil</span>&nbsp;<span class="op" id="2914371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914375">return</span>&nbsp;<span class="ident" id="2914382">Value</span><span class="op" id="2914387">{</span><span class="op" id="2914388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2914391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914395">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914440">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914494">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914542">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2914585">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2914627">escapes</span><span class="op" id="2914634">(</span><span class="ident" id="2914635">i</span><span class="op" id="2914636">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2914640">return</span>&nbsp;<span class="ident" id="2914647">unpackEface</span><span class="op" id="2914658">(</span><span class="ident" id="2914659">i</span><span class="op" id="2914660">)</span><br>
<span class="lineno"></span><span class="op" id="2914662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914665">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2914741">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2914809">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2914846">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2914922">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2914981">func</span>&nbsp;<span class="ident" id="2914986">Zero</span><span class="op" id="2914990">(</span><span class="ident" id="2914991">typ</span>&nbsp;<span class="ident" id="2914995">Type</span><span class="op" id="2914999">)</span>&nbsp;<span class="ident" id="2915001">Value</span>&nbsp;<span class="op" id="2915007">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915010">if</span>&nbsp;<span class="ident" id="2915013">typ</span>&nbsp;<span class="op" id="2915017">==</span>&nbsp;<span class="ident" id="2915020">nil</span>&nbsp;<span class="op" id="2915024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915028">panic</span><span class="op" id="2915033">(</span><span class="string" id="2915034">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2915054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915060">t</span>&nbsp;<span class="op" id="2915062">:=</span>&nbsp;<span class="ident" id="2915065">typ</span><span class="op" id="2915068">.</span><span class="ident" id="2915069">common</span><span class="op" id="2915075">(</span><span class="op" id="2915076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915079">fl</span>&nbsp;<span class="op" id="2915082">:=</span>&nbsp;<span class="ident" id="2915085">flag</span><span class="op" id="2915089">(</span><span class="ident" id="2915090">t</span><span class="op" id="2915091">.</span><span class="ident" id="2915092">Kind</span><span class="op" id="2915096">(</span><span class="op" id="2915097">)</span><span class="op" id="2915098">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915101">if</span>&nbsp;<span class="ident" id="2915104">ifaceIndir</span><span class="op" id="2915114">(</span><span class="ident" id="2915115">t</span><span class="op" id="2915116">)</span>&nbsp;<span class="op" id="2915118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915122">return</span>&nbsp;<span class="ident" id="2915129">Value</span><span class="op" id="2915134">{</span><span class="ident" id="2915135">t</span><span class="op" id="2915136">,</span>&nbsp;<span class="ident" id="2915138">unsafe_New</span><span class="op" id="2915148">(</span><span class="ident" id="2915149">typ</span><span class="op" id="2915152">.</span><span class="op" id="2915153">(</span><span class="op" id="2915154">*</span><span class="ident" id="2915155">rtype</span><span class="op" id="2915160">)</span><span class="op" id="2915161">)</span><span class="op" id="2915162">,</span>&nbsp;<span class="ident" id="2915164">fl</span>&nbsp;<span class="op" id="2915167">|</span>&nbsp;<span class="ident" id="2915169">flagIndir</span><span class="op" id="2915178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915184">return</span>&nbsp;<span class="ident" id="2915191">Value</span><span class="op" id="2915196">{</span><span class="ident" id="2915197">t</span><span class="op" id="2915198">,</span>&nbsp;<span class="ident" id="2915200">nil</span><span class="op" id="2915203">,</span>&nbsp;<span class="ident" id="2915205">fl</span><span class="op" id="2915207">}</span><br>
<span class="lineno"></span><span class="op" id="2915209">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2915212">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2915278">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2915356">func</span>&nbsp;<span class="ident" id="2915361">New</span><span class="op" id="2915364">(</span><span class="ident" id="2915365">typ</span>&nbsp;<span class="ident" id="2915369">Type</span><span class="op" id="2915373">)</span>&nbsp;<span class="ident" id="2915375">Value</span>&nbsp;<span class="op" id="2915381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915384">if</span>&nbsp;<span class="ident" id="2915387">typ</span>&nbsp;<span class="op" id="2915391">==</span>&nbsp;<span class="ident" id="2915394">nil</span>&nbsp;<span class="op" id="2915398">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2915402">panic</span><span class="op" id="2915407">(</span><span class="string" id="2915408">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2915427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2915430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915433">ptr</span>&nbsp;<span class="op" id="2915437">:=</span>&nbsp;<span class="ident" id="2915440">unsafe_New</span><span class="op" id="2915450">(</span><span class="ident" id="2915451">typ</span><span class="op" id="2915454">.</span><span class="op" id="2915455">(</span><span class="op" id="2915456">*</span><span class="ident" id="2915457">rtype</span><span class="op" id="2915462">)</span><span class="op" id="2915463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915466">fl</span>&nbsp;<span class="op" id="2915469">:=</span>&nbsp;<span class="ident" id="2915472">flag</span><span class="op" id="2915476">(</span><span class="ident" id="2915477">Ptr</span><span class="op" id="2915480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915483">return</span>&nbsp;<span class="ident" id="2915490">Value</span><span class="op" id="2915495">{</span><span class="ident" id="2915496">typ</span><span class="op" id="2915499">.</span><span class="ident" id="2915500">common</span><span class="op" id="2915506">(</span><span class="op" id="2915507">)</span><span class="op" id="2915508">.</span><span class="ident" id="2915509">ptrTo</span><span class="op" id="2915514">(</span><span class="op" id="2915515">)</span><span class="op" id="2915516">,</span>&nbsp;<span class="ident" id="2915518">ptr</span><span class="op" id="2915521">,</span>&nbsp;<span class="ident" id="2915523">fl</span><span class="op" id="2915525">}</span><br>
<span class="lineno">2085</span><span class="op" id="2915527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915530">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2915596">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2915640">func</span>&nbsp;<span class="ident" id="2915645">NewAt</span><span class="op" id="2915650">(</span><span class="ident" id="2915651">typ</span>&nbsp;<span class="ident" id="2915655">Type</span><span class="op" id="2915659">,</span>&nbsp;<span class="ident" id="2915661">p</span>&nbsp;<span class="ident" id="2915663">unsafe</span><span class="op" id="2915669">.</span><span class="ident" id="2915670">Pointer</span><span class="op" id="2915677">)</span>&nbsp;<span class="ident" id="2915679">Value</span>&nbsp;<span class="op" id="2915685">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2915688">fl</span>&nbsp;<span class="op" id="2915691">:=</span>&nbsp;<span class="ident" id="2915694">flag</span><span class="op" id="2915698">(</span><span class="ident" id="2915699">Ptr</span><span class="op" id="2915702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2915705">return</span>&nbsp;<span class="ident" id="2915712">Value</span><span class="op" id="2915717">{</span><span class="ident" id="2915718">typ</span><span class="op" id="2915721">.</span><span class="ident" id="2915722">common</span><span class="op" id="2915728">(</span><span class="op" id="2915729">)</span><span class="op" id="2915730">.</span><span class="ident" id="2915731">ptrTo</span><span class="op" id="2915736">(</span><span class="op" id="2915737">)</span><span class="op" id="2915738">,</span>&nbsp;<span class="ident" id="2915740">p</span><span class="op" id="2915741">,</span>&nbsp;<span class="ident" id="2915743">fl</span><span class="op" id="2915745">}</span><br>
<span class="lineno"></span><span class="op" id="2915747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915750">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2915818">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2915862">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2915948">func</span>&nbsp;<span class="op" id="2915953">(</span><span class="ident" id="2915954">v</span>&nbsp;<span class="ident" id="2915956">Value</span><span class="op" id="2915961">)</span>&nbsp;<span class="ident" id="2915963">assignTo</span><span class="op" id="2915971">(</span><span class="ident" id="2915972">context</span>&nbsp;<span class="builtintype" id="2915980">string</span><span class="op" id="2915986">,</span>&nbsp;<span class="ident" id="2915988">dst</span>&nbsp;<span class="op" id="2915992">*</span><span class="ident" id="2915993">rtype</span><span class="op" id="2915998">,</span>&nbsp;<span class="ident" id="2916000">target</span>&nbsp;<span class="ident" id="2916007">unsafe</span><span class="op" id="2916013">.</span><span class="ident" id="2916014">Pointer</span><span class="op" id="2916021">)</span>&nbsp;<span class="ident" id="2916023">Value</span>&nbsp;<span class="op" id="2916029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916032">if</span>&nbsp;<span class="ident" id="2916035">v</span><span class="op" id="2916036">.</span><span class="ident" id="2916037">flag</span><span class="op" id="2916041">&amp;</span><span class="ident" id="2916042">flagMethod</span>&nbsp;<span class="op" id="2916053">!=</span>&nbsp;<span class="num" id="2916056">0</span>&nbsp;<span class="op" id="2916058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916062">v</span>&nbsp;<span class="op" id="2916064">=</span>&nbsp;<span class="ident" id="2916066">makeMethodValue</span><span class="op" id="2916081">(</span><span class="ident" id="2916082">context</span><span class="op" id="2916089">,</span>&nbsp;<span class="ident" id="2916091">v</span><span class="op" id="2916092">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916099">switch</span>&nbsp;<span class="op" id="2916106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916109">case</span>&nbsp;<span class="ident" id="2916114">directlyAssignable</span><span class="op" id="2916132">(</span><span class="ident" id="2916133">dst</span><span class="op" id="2916136">,</span>&nbsp;<span class="ident" id="2916138">v</span><span class="op" id="2916139">.</span><span class="ident" id="2916140">typ</span><span class="op" id="2916143">)</span><span class="op" id="2916144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2916148">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2916188">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916230">v</span><span class="op" id="2916231">.</span><span class="ident" id="2916232">typ</span>&nbsp;<span class="op" id="2916236">=</span>&nbsp;<span class="ident" id="2916238">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916244">fl</span>&nbsp;<span class="op" id="2916247">:=</span>&nbsp;<span class="ident" id="2916250">v</span><span class="op" id="2916251">.</span><span class="ident" id="2916252">flag</span>&nbsp;<span class="op" id="2916257">&amp;</span>&nbsp;<span class="op" id="2916259">(</span><span class="ident" id="2916260">flagRO</span>&nbsp;<span class="op" id="2916267">|</span>&nbsp;<span class="ident" id="2916269">flagAddr</span>&nbsp;<span class="op" id="2916278">|</span>&nbsp;<span class="ident" id="2916280">flagIndir</span><span class="op" id="2916289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916293">fl</span>&nbsp;<span class="op" id="2916296">|=</span>&nbsp;<span class="ident" id="2916299">flag</span><span class="op" id="2916303">(</span><span class="ident" id="2916304">dst</span><span class="op" id="2916307">.</span><span class="ident" id="2916308">Kind</span><span class="op" id="2916312">(</span><span class="op" id="2916313">)</span><span class="op" id="2916314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916318">return</span>&nbsp;<span class="ident" id="2916325">Value</span><span class="op" id="2916330">{</span><span class="ident" id="2916331">dst</span><span class="op" id="2916334">,</span>&nbsp;<span class="ident" id="2916336">v</span><span class="op" id="2916337">.</span><span class="ident" id="2916338">ptr</span><span class="op" id="2916341">,</span>&nbsp;<span class="ident" id="2916343">fl</span><span class="op" id="2916345">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916349">case</span>&nbsp;<span class="ident" id="2916354">implements</span><span class="op" id="2916364">(</span><span class="ident" id="2916365">dst</span><span class="op" id="2916368">,</span>&nbsp;<span class="ident" id="2916370">v</span><span class="op" id="2916371">.</span><span class="ident" id="2916372">typ</span><span class="op" id="2916375">)</span><span class="op" id="2916376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916380">if</span>&nbsp;<span class="ident" id="2916383">target</span>&nbsp;<span class="op" id="2916390">==</span>&nbsp;<span class="ident" id="2916393">nil</span>&nbsp;<span class="op" id="2916397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916402">target</span>&nbsp;<span class="op" id="2916409">=</span>&nbsp;<span class="ident" id="2916411">unsafe_New</span><span class="op" id="2916421">(</span><span class="ident" id="2916422">dst</span><span class="op" id="2916425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916429">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916433">x</span>&nbsp;<span class="op" id="2916435">:=</span>&nbsp;<span class="ident" id="2916438">valueInterface</span><span class="op" id="2916452">(</span><span class="ident" id="2916453">v</span><span class="op" id="2916454">,</span>&nbsp;<span class="builtintype" id="2916456">false</span><span class="op" id="2916461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916465">if</span>&nbsp;<span class="ident" id="2916468">dst</span><span class="op" id="2916471">.</span><span class="ident" id="2916472">NumMethod</span><span class="op" id="2916481">(</span><span class="op" id="2916482">)</span>&nbsp;<span class="op" id="2916484">==</span>&nbsp;<span class="num" id="2916487">0</span>&nbsp;<span class="op" id="2916489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916494">*</span><span class="op" id="2916495">(</span><span class="op" id="2916496">*</span><span class="keyword" id="2916497">interface</span><span class="op" id="2916506">{</span><span class="op" id="2916507">}</span><span class="op" id="2916508">)</span><span class="op" id="2916509">(</span><span class="ident" id="2916510">target</span><span class="op" id="2916516">)</span>&nbsp;<span class="op" id="2916518">=</span>&nbsp;<span class="ident" id="2916520">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916524">}</span>&nbsp;<span class="keyword" id="2916526">else</span>&nbsp;<span class="op" id="2916531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916536">ifaceE2I</span><span class="op" id="2916544">(</span><span class="ident" id="2916545">dst</span><span class="op" id="2916548">,</span>&nbsp;<span class="ident" id="2916550">x</span><span class="op" id="2916551">,</span>&nbsp;<span class="ident" id="2916553">target</span><span class="op" id="2916559">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916567">return</span>&nbsp;<span class="ident" id="2916574">Value</span><span class="op" id="2916579">{</span><span class="ident" id="2916580">dst</span><span class="op" id="2916583">,</span>&nbsp;<span class="ident" id="2916585">target</span><span class="op" id="2916591">,</span>&nbsp;<span class="ident" id="2916593">flagIndir</span>&nbsp;<span class="op" id="2916603">|</span>&nbsp;<span class="ident" id="2916605">flag</span><span class="op" id="2916609">(</span><span class="ident" id="2916610">Interface</span><span class="op" id="2916619">)</span><span class="op" id="2916620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2916623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2916627">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2916639">panic</span><span class="op" id="2916644">(</span><span class="ident" id="2916645">context</span>&nbsp;<span class="op" id="2916653">+</span>&nbsp;<span class="string" id="2916655">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2916674">+</span>&nbsp;<span class="ident" id="2916676">v</span><span class="op" id="2916677">.</span><span class="ident" id="2916678">typ</span><span class="op" id="2916681">.</span><span class="ident" id="2916682">String</span><span class="op" id="2916688">(</span><span class="op" id="2916689">)</span>&nbsp;<span class="op" id="2916691">+</span>&nbsp;<span class="string" id="2916693">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2916723">+</span>&nbsp;<span class="ident" id="2916725">dst</span><span class="op" id="2916728">.</span><span class="ident" id="2916729">String</span><span class="op" id="2916735">(</span><span class="op" id="2916736">)</span><span class="op" id="2916737">)</span><br>
<span class="lineno"></span><span class="op" id="2916739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916742">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2916794">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2916854">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2916899">func</span>&nbsp;<span class="op" id="2916904">(</span><span class="ident" id="2916905">v</span>&nbsp;<span class="ident" id="2916907">Value</span><span class="op" id="2916912">)</span>&nbsp;<span class="ident" id="2916914">Convert</span><span class="op" id="2916921">(</span><span class="ident" id="2916922">t</span>&nbsp;<span class="ident" id="2916924">Type</span><span class="op" id="2916928">)</span>&nbsp;<span class="ident" id="2916930">Value</span>&nbsp;<span class="op" id="2916936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2916939">if</span>&nbsp;<span class="ident" id="2916942">v</span><span class="op" id="2916943">.</span><span class="ident" id="2916944">flag</span><span class="op" id="2916948">&amp;</span><span class="ident" id="2916949">flagMethod</span>&nbsp;<span class="op" id="2916960">!=</span>&nbsp;<span class="num" id="2916963">0</span>&nbsp;<span class="op" id="2916965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2916969">v</span>&nbsp;<span class="op" id="2916971">=</span>&nbsp;<span class="ident" id="2916973">makeMethodValue</span><span class="op" id="2916988">(</span><span class="string" id="2916989">&#34;Convert&#34;</span><span class="op" id="2916998">,</span>&nbsp;<span class="ident" id="2917000">v</span><span class="op" id="2917001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917004">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2917007">op</span>&nbsp;<span class="op" id="2917010">:=</span>&nbsp;<span class="ident" id="2917013">convertOp</span><span class="op" id="2917022">(</span><span class="ident" id="2917023">t</span><span class="op" id="2917024">.</span><span class="ident" id="2917025">common</span><span class="op" id="2917031">(</span><span class="op" id="2917032">)</span><span class="op" id="2917033">,</span>&nbsp;<span class="ident" id="2917035">v</span><span class="op" id="2917036">.</span><span class="ident" id="2917037">typ</span><span class="op" id="2917040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917043">if</span>&nbsp;<span class="ident" id="2917046">op</span>&nbsp;<span class="op" id="2917049">==</span>&nbsp;<span class="ident" id="2917052">nil</span>&nbsp;<span class="op" id="2917056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2917060">panic</span><span class="op" id="2917065">(</span><span class="string" id="2917066">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2917106">+</span>&nbsp;<span class="ident" id="2917108">v</span><span class="op" id="2917109">.</span><span class="ident" id="2917110">typ</span><span class="op" id="2917113">.</span><span class="ident" id="2917114">String</span><span class="op" id="2917120">(</span><span class="op" id="2917121">)</span>&nbsp;<span class="op" id="2917123">+</span>&nbsp;<span class="string" id="2917125">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2917157">+</span>&nbsp;<span class="ident" id="2917159">t</span><span class="op" id="2917160">.</span><span class="ident" id="2917161">String</span><span class="op" id="2917167">(</span><span class="op" id="2917168">)</span><span class="op" id="2917169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917175">return</span>&nbsp;<span class="ident" id="2917182">op</span><span class="op" id="2917184">(</span><span class="ident" id="2917185">v</span><span class="op" id="2917186">,</span>&nbsp;<span class="ident" id="2917188">t</span><span class="op" id="2917189">)</span><br>
<span class="lineno">2140</span><span class="op" id="2917191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917194">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2917259">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2917339">func</span>&nbsp;<span class="ident" id="2917344">convertOp</span><span class="op" id="2917353">(</span><span class="ident" id="2917354">dst</span><span class="op" id="2917357">,</span>&nbsp;<span class="ident" id="2917359">src</span>&nbsp;<span class="op" id="2917363">*</span><span class="ident" id="2917364">rtype</span><span class="op" id="2917369">)</span>&nbsp;<span class="keyword" id="2917371">func</span><span class="op" id="2917375">(</span><span class="ident" id="2917376">Value</span><span class="op" id="2917381">,</span>&nbsp;<span class="ident" id="2917383">Type</span><span class="op" id="2917387">)</span>&nbsp;<span class="ident" id="2917389">Value</span>&nbsp;<span class="op" id="2917395">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917398">switch</span>&nbsp;<span class="ident" id="2917405">src</span><span class="op" id="2917408">.</span><span class="ident" id="2917409">Kind</span><span class="op" id="2917413">(</span><span class="op" id="2917414">)</span>&nbsp;<span class="op" id="2917416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917419">case</span>&nbsp;<span class="ident" id="2917424">Int</span><span class="op" id="2917427">,</span>&nbsp;<span class="ident" id="2917429">Int8</span><span class="op" id="2917433">,</span>&nbsp;<span class="ident" id="2917435">Int16</span><span class="op" id="2917440">,</span>&nbsp;<span class="ident" id="2917442">Int32</span><span class="op" id="2917447">,</span>&nbsp;<span class="ident" id="2917449">Int64</span><span class="op" id="2917454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917458">switch</span>&nbsp;<span class="ident" id="2917465">dst</span><span class="op" id="2917468">.</span><span class="ident" id="2917469">Kind</span><span class="op" id="2917473">(</span><span class="op" id="2917474">)</span>&nbsp;<span class="op" id="2917476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917480">case</span>&nbsp;<span class="ident" id="2917485">Int</span><span class="op" id="2917488">,</span>&nbsp;<span class="ident" id="2917490">Int8</span><span class="op" id="2917494">,</span>&nbsp;<span class="ident" id="2917496">Int16</span><span class="op" id="2917501">,</span>&nbsp;<span class="ident" id="2917503">Int32</span><span class="op" id="2917508">,</span>&nbsp;<span class="ident" id="2917510">Int64</span><span class="op" id="2917515">,</span>&nbsp;<span class="ident" id="2917517">Uint</span><span class="op" id="2917521">,</span>&nbsp;<span class="ident" id="2917523">Uint8</span><span class="op" id="2917528">,</span>&nbsp;<span class="ident" id="2917530">Uint16</span><span class="op" id="2917536">,</span>&nbsp;<span class="ident" id="2917538">Uint32</span><span class="op" id="2917544">,</span>&nbsp;<span class="ident" id="2917546">Uint64</span><span class="op" id="2917552">,</span>&nbsp;<span class="ident" id="2917554">Uintptr</span><span class="op" id="2917561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917566">return</span>&nbsp;<span class="ident" id="2917573">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917582">case</span>&nbsp;<span class="ident" id="2917587">Float32</span><span class="op" id="2917594">,</span>&nbsp;<span class="ident" id="2917596">Float64</span><span class="op" id="2917603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917608">return</span>&nbsp;<span class="ident" id="2917615">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917629">case</span>&nbsp;<span class="ident" id="2917634">String</span><span class="op" id="2917640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917645">return</span>&nbsp;<span class="ident" id="2917652">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917667">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917671">case</span>&nbsp;<span class="ident" id="2917676">Uint</span><span class="op" id="2917680">,</span>&nbsp;<span class="ident" id="2917682">Uint8</span><span class="op" id="2917687">,</span>&nbsp;<span class="ident" id="2917689">Uint16</span><span class="op" id="2917695">,</span>&nbsp;<span class="ident" id="2917697">Uint32</span><span class="op" id="2917703">,</span>&nbsp;<span class="ident" id="2917705">Uint64</span><span class="op" id="2917711">,</span>&nbsp;<span class="ident" id="2917713">Uintptr</span><span class="op" id="2917720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917724">switch</span>&nbsp;<span class="ident" id="2917731">dst</span><span class="op" id="2917734">.</span><span class="ident" id="2917735">Kind</span><span class="op" id="2917739">(</span><span class="op" id="2917740">)</span>&nbsp;<span class="op" id="2917742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917746">case</span>&nbsp;<span class="ident" id="2917751">Int</span><span class="op" id="2917754">,</span>&nbsp;<span class="ident" id="2917756">Int8</span><span class="op" id="2917760">,</span>&nbsp;<span class="ident" id="2917762">Int16</span><span class="op" id="2917767">,</span>&nbsp;<span class="ident" id="2917769">Int32</span><span class="op" id="2917774">,</span>&nbsp;<span class="ident" id="2917776">Int64</span><span class="op" id="2917781">,</span>&nbsp;<span class="ident" id="2917783">Uint</span><span class="op" id="2917787">,</span>&nbsp;<span class="ident" id="2917789">Uint8</span><span class="op" id="2917794">,</span>&nbsp;<span class="ident" id="2917796">Uint16</span><span class="op" id="2917802">,</span>&nbsp;<span class="ident" id="2917804">Uint32</span><span class="op" id="2917810">,</span>&nbsp;<span class="ident" id="2917812">Uint64</span><span class="op" id="2917818">,</span>&nbsp;<span class="ident" id="2917820">Uintptr</span><span class="op" id="2917827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917832">return</span>&nbsp;<span class="ident" id="2917839">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917849">case</span>&nbsp;<span class="ident" id="2917854">Float32</span><span class="op" id="2917861">,</span>&nbsp;<span class="ident" id="2917863">Float64</span><span class="op" id="2917870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917875">return</span>&nbsp;<span class="ident" id="2917882">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917897">case</span>&nbsp;<span class="ident" id="2917902">String</span><span class="op" id="2917908">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917913">return</span>&nbsp;<span class="ident" id="2917920">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2917936">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917940">case</span>&nbsp;<span class="ident" id="2917945">Float32</span><span class="op" id="2917952">,</span>&nbsp;<span class="ident" id="2917954">Float64</span><span class="op" id="2917961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917965">switch</span>&nbsp;<span class="ident" id="2917972">dst</span><span class="op" id="2917975">.</span><span class="ident" id="2917976">Kind</span><span class="op" id="2917980">(</span><span class="op" id="2917981">)</span>&nbsp;<span class="op" id="2917983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2917987">case</span>&nbsp;<span class="ident" id="2917992">Int</span><span class="op" id="2917995">,</span>&nbsp;<span class="ident" id="2917997">Int8</span><span class="op" id="2918001">,</span>&nbsp;<span class="ident" id="2918003">Int16</span><span class="op" id="2918008">,</span>&nbsp;<span class="ident" id="2918010">Int32</span><span class="op" id="2918015">,</span>&nbsp;<span class="ident" id="2918017">Int64</span><span class="op" id="2918022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918027">return</span>&nbsp;<span class="ident" id="2918034">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918048">case</span>&nbsp;<span class="ident" id="2918053">Uint</span><span class="op" id="2918057">,</span>&nbsp;<span class="ident" id="2918059">Uint8</span><span class="op" id="2918064">,</span>&nbsp;<span class="ident" id="2918066">Uint16</span><span class="op" id="2918072">,</span>&nbsp;<span class="ident" id="2918074">Uint32</span><span class="op" id="2918080">,</span>&nbsp;<span class="ident" id="2918082">Uint64</span><span class="op" id="2918088">,</span>&nbsp;<span class="ident" id="2918090">Uintptr</span><span class="op" id="2918097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918102">return</span>&nbsp;<span class="ident" id="2918109">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918124">case</span>&nbsp;<span class="ident" id="2918129">Float32</span><span class="op" id="2918136">,</span>&nbsp;<span class="ident" id="2918138">Float64</span><span class="op" id="2918145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918150">return</span>&nbsp;<span class="ident" id="2918157">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918168">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918172">case</span>&nbsp;<span class="ident" id="2918177">Complex64</span><span class="op" id="2918186">,</span>&nbsp;<span class="ident" id="2918188">Complex128</span><span class="op" id="2918198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918202">switch</span>&nbsp;<span class="ident" id="2918209">dst</span><span class="op" id="2918212">.</span><span class="ident" id="2918213">Kind</span><span class="op" id="2918217">(</span><span class="op" id="2918218">)</span>&nbsp;<span class="op" id="2918220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918224">case</span>&nbsp;<span class="ident" id="2918229">Complex64</span><span class="op" id="2918238">,</span>&nbsp;<span class="ident" id="2918240">Complex128</span><span class="op" id="2918250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918255">return</span>&nbsp;<span class="ident" id="2918262">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918279">case</span>&nbsp;<span class="ident" id="2918284">String</span><span class="op" id="2918290">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918294">if</span>&nbsp;<span class="ident" id="2918297">dst</span><span class="op" id="2918300">.</span><span class="ident" id="2918301">Kind</span><span class="op" id="2918305">(</span><span class="op" id="2918306">)</span>&nbsp;<span class="op" id="2918308">==</span>&nbsp;<span class="ident" id="2918311">Slice</span>&nbsp;<span class="op" id="2918317">&amp;&amp;</span>&nbsp;<span class="ident" id="2918320">dst</span><span class="op" id="2918323">.</span><span class="ident" id="2918324">Elem</span><span class="op" id="2918328">(</span><span class="op" id="2918329">)</span><span class="op" id="2918330">.</span><span class="ident" id="2918331">PkgPath</span><span class="op" id="2918338">(</span><span class="op" id="2918339">)</span>&nbsp;<span class="op" id="2918341">==</span>&nbsp;<span class="string" id="2918344">&#34;&#34;</span>&nbsp;<span class="op" id="2918347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918352">switch</span>&nbsp;<span class="ident" id="2918359">dst</span><span class="op" id="2918362">.</span><span class="ident" id="2918363">Elem</span><span class="op" id="2918367">(</span><span class="op" id="2918368">)</span><span class="op" id="2918369">.</span><span class="ident" id="2918370">Kind</span><span class="op" id="2918374">(</span><span class="op" id="2918375">)</span>&nbsp;<span class="op" id="2918377">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918382">case</span>&nbsp;<span class="ident" id="2918387">Uint8</span><span class="op" id="2918392">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918398">return</span>&nbsp;<span class="ident" id="2918405">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918423">case</span>&nbsp;<span class="ident" id="2918428">Int32</span><span class="op" id="2918433">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918439">return</span>&nbsp;<span class="ident" id="2918446">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918464">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918472">case</span>&nbsp;<span class="ident" id="2918477">Slice</span><span class="op" id="2918482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918486">if</span>&nbsp;<span class="ident" id="2918489">dst</span><span class="op" id="2918492">.</span><span class="ident" id="2918493">Kind</span><span class="op" id="2918497">(</span><span class="op" id="2918498">)</span>&nbsp;<span class="op" id="2918500">==</span>&nbsp;<span class="ident" id="2918503">String</span>&nbsp;<span class="op" id="2918510">&amp;&amp;</span>&nbsp;<span class="ident" id="2918513">src</span><span class="op" id="2918516">.</span><span class="ident" id="2918517">Elem</span><span class="op" id="2918521">(</span><span class="op" id="2918522">)</span><span class="op" id="2918523">.</span><span class="ident" id="2918524">PkgPath</span><span class="op" id="2918531">(</span><span class="op" id="2918532">)</span>&nbsp;<span class="op" id="2918534">==</span>&nbsp;<span class="string" id="2918537">&#34;&#34;</span>&nbsp;<span class="op" id="2918540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918545">switch</span>&nbsp;<span class="ident" id="2918552">src</span><span class="op" id="2918555">.</span><span class="ident" id="2918556">Elem</span><span class="op" id="2918560">(</span><span class="op" id="2918561">)</span><span class="op" id="2918562">.</span><span class="ident" id="2918563">Kind</span><span class="op" id="2918567">(</span><span class="op" id="2918568">)</span>&nbsp;<span class="op" id="2918570">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918575">case</span>&nbsp;<span class="ident" id="2918580">Uint8</span><span class="op" id="2918585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918591">return</span>&nbsp;<span class="ident" id="2918598">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918616">case</span>&nbsp;<span class="ident" id="2918621">Int32</span><span class="op" id="2918626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918632">return</span>&nbsp;<span class="ident" id="2918639">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918657">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918668">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918711">if</span>&nbsp;<span class="ident" id="2918714">haveIdenticalUnderlyingType</span><span class="op" id="2918741">(</span><span class="ident" id="2918742">dst</span><span class="op" id="2918745">,</span>&nbsp;<span class="ident" id="2918747">src</span><span class="op" id="2918750">)</span>&nbsp;<span class="op" id="2918752">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918756">return</span>&nbsp;<span class="ident" id="2918763">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2918774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2918778">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2918852">if</span>&nbsp;<span class="ident" id="2918855">dst</span><span class="op" id="2918858">.</span><span class="ident" id="2918859">Kind</span><span class="op" id="2918863">(</span><span class="op" id="2918864">)</span>&nbsp;<span class="op" id="2918866">==</span>&nbsp;<span class="ident" id="2918869">Ptr</span>&nbsp;<span class="op" id="2918873">&amp;&amp;</span>&nbsp;<span class="ident" id="2918876">dst</span><span class="op" id="2918879">.</span><span class="ident" id="2918880">Name</span><span class="op" id="2918884">(</span><span class="op" id="2918885">)</span>&nbsp;<span class="op" id="2918887">==</span>&nbsp;<span class="string" id="2918890">&#34;&#34;</span>&nbsp;<span class="op" id="2918893">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918898">src</span><span class="op" id="2918901">.</span><span class="ident" id="2918902">Kind</span><span class="op" id="2918906">(</span><span class="op" id="2918907">)</span>&nbsp;<span class="op" id="2918909">==</span>&nbsp;<span class="ident" id="2918912">Ptr</span>&nbsp;<span class="op" id="2918916">&amp;&amp;</span>&nbsp;<span class="ident" id="2918919">src</span><span class="op" id="2918922">.</span><span class="ident" id="2918923">Name</span><span class="op" id="2918927">(</span><span class="op" id="2918928">)</span>&nbsp;<span class="op" id="2918930">==</span>&nbsp;<span class="string" id="2918933">&#34;&#34;</span>&nbsp;<span class="op" id="2918936">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2918941">haveIdenticalUnderlyingType</span><span class="op" id="2918968">(</span><span class="ident" id="2918969">dst</span><span class="op" id="2918972">.</span><span class="ident" id="2918973">Elem</span><span class="op" id="2918977">(</span><span class="op" id="2918978">)</span><span class="op" id="2918979">.</span><span class="ident" id="2918980">common</span><span class="op" id="2918986">(</span><span class="op" id="2918987">)</span><span class="op" id="2918988">,</span>&nbsp;<span class="ident" id="2918990">src</span><span class="op" id="2918993">.</span><span class="ident" id="2918994">Elem</span><span class="op" id="2918998">(</span><span class="op" id="2918999">)</span><span class="op" id="2919000">.</span><span class="ident" id="2919001">common</span><span class="op" id="2919007">(</span><span class="op" id="2919008">)</span><span class="op" id="2919009">)</span>&nbsp;<span class="op" id="2919011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919015">return</span>&nbsp;<span class="ident" id="2919022">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919037">if</span>&nbsp;<span class="ident" id="2919040">implements</span><span class="op" id="2919050">(</span><span class="ident" id="2919051">dst</span><span class="op" id="2919054">,</span>&nbsp;<span class="ident" id="2919056">src</span><span class="op" id="2919059">)</span>&nbsp;<span class="op" id="2919061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919065">if</span>&nbsp;<span class="ident" id="2919068">src</span><span class="op" id="2919071">.</span><span class="ident" id="2919072">Kind</span><span class="op" id="2919076">(</span><span class="op" id="2919077">)</span>&nbsp;<span class="op" id="2919079">==</span>&nbsp;<span class="ident" id="2919082">Interface</span>&nbsp;<span class="op" id="2919092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919097">return</span>&nbsp;<span class="ident" id="2919104">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919117">return</span>&nbsp;<span class="ident" id="2919124">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919136">return</span>&nbsp;<span class="ident" id="2919143">nil</span><br>
<span class="lineno"></span><span class="op" id="2919147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2919150">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2919223">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2919268">func</span>&nbsp;<span class="ident" id="2919273">makeInt</span><span class="op" id="2919280">(</span><span class="ident" id="2919281">f</span>&nbsp;<span class="ident" id="2919283">flag</span><span class="op" id="2919287">,</span>&nbsp;<span class="ident" id="2919289">bits</span>&nbsp;<span class="ident" id="2919294">uint64</span><span class="op" id="2919300">,</span>&nbsp;<span class="ident" id="2919302">t</span>&nbsp;<span class="ident" id="2919304">Type</span><span class="op" id="2919308">)</span>&nbsp;<span class="ident" id="2919310">Value</span>&nbsp;<span class="op" id="2919316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919319">typ</span>&nbsp;<span class="op" id="2919323">:=</span>&nbsp;<span class="ident" id="2919326">t</span><span class="op" id="2919327">.</span><span class="ident" id="2919328">common</span><span class="op" id="2919334">(</span><span class="op" id="2919335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919338">ptr</span>&nbsp;<span class="op" id="2919342">:=</span>&nbsp;<span class="ident" id="2919345">unsafe_New</span><span class="op" id="2919355">(</span><span class="ident" id="2919356">typ</span><span class="op" id="2919359">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919362">switch</span>&nbsp;<span class="ident" id="2919369">typ</span><span class="op" id="2919372">.</span><span class="ident" id="2919373">size</span>&nbsp;<span class="op" id="2919378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919381">case</span>&nbsp;<span class="num" id="2919386">1</span><span class="op" id="2919387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919391">*</span><span class="op" id="2919392">(</span><span class="op" id="2919393">*</span><span class="builtintype" id="2919394">uint8</span><span class="op" id="2919399">)</span><span class="op" id="2919400">(</span><span class="ident" id="2919401">unsafe</span><span class="op" id="2919407">.</span><span class="ident" id="2919408">Pointer</span><span class="op" id="2919415">(</span><span class="ident" id="2919416">ptr</span><span class="op" id="2919419">)</span><span class="op" id="2919420">)</span>&nbsp;<span class="op" id="2919422">=</span>&nbsp;<span class="builtintype" id="2919424">uint8</span><span class="op" id="2919429">(</span><span class="ident" id="2919430">bits</span><span class="op" id="2919434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919437">case</span>&nbsp;<span class="num" id="2919442">2</span><span class="op" id="2919443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919447">*</span><span class="op" id="2919448">(</span><span class="op" id="2919449">*</span><span class="builtintype" id="2919450">uint16</span><span class="op" id="2919456">)</span><span class="op" id="2919457">(</span><span class="ident" id="2919458">unsafe</span><span class="op" id="2919464">.</span><span class="ident" id="2919465">Pointer</span><span class="op" id="2919472">(</span><span class="ident" id="2919473">ptr</span><span class="op" id="2919476">)</span><span class="op" id="2919477">)</span>&nbsp;<span class="op" id="2919479">=</span>&nbsp;<span class="builtintype" id="2919481">uint16</span><span class="op" id="2919487">(</span><span class="ident" id="2919488">bits</span><span class="op" id="2919492">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919495">case</span>&nbsp;<span class="num" id="2919500">4</span><span class="op" id="2919501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919505">*</span><span class="op" id="2919506">(</span><span class="op" id="2919507">*</span><span class="builtintype" id="2919508">uint32</span><span class="op" id="2919514">)</span><span class="op" id="2919515">(</span><span class="ident" id="2919516">unsafe</span><span class="op" id="2919522">.</span><span class="ident" id="2919523">Pointer</span><span class="op" id="2919530">(</span><span class="ident" id="2919531">ptr</span><span class="op" id="2919534">)</span><span class="op" id="2919535">)</span>&nbsp;<span class="op" id="2919537">=</span>&nbsp;<span class="builtintype" id="2919539">uint32</span><span class="op" id="2919545">(</span><span class="ident" id="2919546">bits</span><span class="op" id="2919550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919553">case</span>&nbsp;<span class="num" id="2919558">8</span><span class="op" id="2919559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919563">*</span><span class="op" id="2919564">(</span><span class="op" id="2919565">*</span><span class="ident" id="2919566">uint64</span><span class="op" id="2919572">)</span><span class="op" id="2919573">(</span><span class="ident" id="2919574">unsafe</span><span class="op" id="2919580">.</span><span class="ident" id="2919581">Pointer</span><span class="op" id="2919588">(</span><span class="ident" id="2919589">ptr</span><span class="op" id="2919592">)</span><span class="op" id="2919593">)</span>&nbsp;<span class="op" id="2919595">=</span>&nbsp;<span class="ident" id="2919597">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919603">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919606">return</span>&nbsp;<span class="ident" id="2919613">Value</span><span class="op" id="2919618">{</span><span class="ident" id="2919619">typ</span><span class="op" id="2919622">,</span>&nbsp;<span class="ident" id="2919624">ptr</span><span class="op" id="2919627">,</span>&nbsp;<span class="ident" id="2919629">f</span>&nbsp;<span class="op" id="2919631">|</span>&nbsp;<span class="ident" id="2919633">flagIndir</span>&nbsp;<span class="op" id="2919643">|</span>&nbsp;<span class="ident" id="2919645">flag</span><span class="op" id="2919649">(</span><span class="ident" id="2919650">typ</span><span class="op" id="2919653">.</span><span class="ident" id="2919654">Kind</span><span class="op" id="2919658">(</span><span class="op" id="2919659">)</span><span class="op" id="2919660">)</span><span class="op" id="2919661">}</span><br>
<span class="lineno"></span><span class="op" id="2919663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919666">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2919749">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2919790">func</span>&nbsp;<span class="ident" id="2919795">makeFloat</span><span class="op" id="2919804">(</span><span class="ident" id="2919805">f</span>&nbsp;<span class="ident" id="2919807">flag</span><span class="op" id="2919811">,</span>&nbsp;<span class="ident" id="2919813">v</span>&nbsp;<span class="builtintype" id="2919815">float64</span><span class="op" id="2919822">,</span>&nbsp;<span class="ident" id="2919824">t</span>&nbsp;<span class="ident" id="2919826">Type</span><span class="op" id="2919830">)</span>&nbsp;<span class="ident" id="2919832">Value</span>&nbsp;<span class="op" id="2919838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919841">typ</span>&nbsp;<span class="op" id="2919845">:=</span>&nbsp;<span class="ident" id="2919848">t</span><span class="op" id="2919849">.</span><span class="ident" id="2919850">common</span><span class="op" id="2919856">(</span><span class="op" id="2919857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2919860">ptr</span>&nbsp;<span class="op" id="2919864">:=</span>&nbsp;<span class="ident" id="2919867">unsafe_New</span><span class="op" id="2919877">(</span><span class="ident" id="2919878">typ</span><span class="op" id="2919881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919884">switch</span>&nbsp;<span class="ident" id="2919891">typ</span><span class="op" id="2919894">.</span><span class="ident" id="2919895">size</span>&nbsp;<span class="op" id="2919900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919903">case</span>&nbsp;<span class="num" id="2919908">4</span><span class="op" id="2919909">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919913">*</span><span class="op" id="2919914">(</span><span class="op" id="2919915">*</span><span class="builtintype" id="2919916">float32</span><span class="op" id="2919923">)</span><span class="op" id="2919924">(</span><span class="ident" id="2919925">unsafe</span><span class="op" id="2919931">.</span><span class="ident" id="2919932">Pointer</span><span class="op" id="2919939">(</span><span class="ident" id="2919940">ptr</span><span class="op" id="2919943">)</span><span class="op" id="2919944">)</span>&nbsp;<span class="op" id="2919946">=</span>&nbsp;<span class="builtintype" id="2919948">float32</span><span class="op" id="2919955">(</span><span class="ident" id="2919956">v</span><span class="op" id="2919957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2919960">case</span>&nbsp;<span class="num" id="2919965">8</span><span class="op" id="2919966">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2919970">*</span><span class="op" id="2919971">(</span><span class="op" id="2919972">*</span><span class="builtintype" id="2919973">float64</span><span class="op" id="2919980">)</span><span class="op" id="2919981">(</span><span class="ident" id="2919982">unsafe</span><span class="op" id="2919988">.</span><span class="ident" id="2919989">Pointer</span><span class="op" id="2919996">(</span><span class="ident" id="2919997">ptr</span><span class="op" id="2920000">)</span><span class="op" id="2920001">)</span>&nbsp;<span class="op" id="2920003">=</span>&nbsp;<span class="ident" id="2920005">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920011">return</span>&nbsp;<span class="ident" id="2920018">Value</span><span class="op" id="2920023">{</span><span class="ident" id="2920024">typ</span><span class="op" id="2920027">,</span>&nbsp;<span class="ident" id="2920029">ptr</span><span class="op" id="2920032">,</span>&nbsp;<span class="ident" id="2920034">f</span>&nbsp;<span class="op" id="2920036">|</span>&nbsp;<span class="ident" id="2920038">flagIndir</span>&nbsp;<span class="op" id="2920048">|</span>&nbsp;<span class="ident" id="2920050">flag</span><span class="op" id="2920054">(</span><span class="ident" id="2920055">typ</span><span class="op" id="2920058">.</span><span class="ident" id="2920059">Kind</span><span class="op" id="2920063">(</span><span class="op" id="2920064">)</span><span class="op" id="2920065">)</span><span class="op" id="2920066">}</span><br>
<span class="lineno">2255</span><span class="op" id="2920068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2920071">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2920158">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2920204">func</span>&nbsp;<span class="ident" id="2920209">makeComplex</span><span class="op" id="2920220">(</span><span class="ident" id="2920221">f</span>&nbsp;<span class="ident" id="2920223">flag</span><span class="op" id="2920227">,</span>&nbsp;<span class="ident" id="2920229">v</span>&nbsp;<span class="builtintype" id="2920231">complex128</span><span class="op" id="2920241">,</span>&nbsp;<span class="ident" id="2920243">t</span>&nbsp;<span class="ident" id="2920245">Type</span><span class="op" id="2920249">)</span>&nbsp;<span class="ident" id="2920251">Value</span>&nbsp;<span class="op" id="2920257">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920260">typ</span>&nbsp;<span class="op" id="2920264">:=</span>&nbsp;<span class="ident" id="2920267">t</span><span class="op" id="2920268">.</span><span class="ident" id="2920269">common</span><span class="op" id="2920275">(</span><span class="op" id="2920276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920279">ptr</span>&nbsp;<span class="op" id="2920283">:=</span>&nbsp;<span class="ident" id="2920286">unsafe_New</span><span class="op" id="2920296">(</span><span class="ident" id="2920297">typ</span><span class="op" id="2920300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920303">switch</span>&nbsp;<span class="ident" id="2920310">typ</span><span class="op" id="2920313">.</span><span class="ident" id="2920314">size</span>&nbsp;<span class="op" id="2920319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920322">case</span>&nbsp;<span class="num" id="2920327">8</span><span class="op" id="2920328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920332">*</span><span class="op" id="2920333">(</span><span class="op" id="2920334">*</span><span class="builtintype" id="2920335">complex64</span><span class="op" id="2920344">)</span><span class="op" id="2920345">(</span><span class="ident" id="2920346">unsafe</span><span class="op" id="2920352">.</span><span class="ident" id="2920353">Pointer</span><span class="op" id="2920360">(</span><span class="ident" id="2920361">ptr</span><span class="op" id="2920364">)</span><span class="op" id="2920365">)</span>&nbsp;<span class="op" id="2920367">=</span>&nbsp;<span class="builtintype" id="2920369">complex64</span><span class="op" id="2920378">(</span><span class="ident" id="2920379">v</span><span class="op" id="2920380">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920383">case</span>&nbsp;<span class="num" id="2920388">16</span><span class="op" id="2920390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920394">*</span><span class="op" id="2920395">(</span><span class="op" id="2920396">*</span><span class="builtintype" id="2920397">complex128</span><span class="op" id="2920407">)</span><span class="op" id="2920408">(</span><span class="ident" id="2920409">unsafe</span><span class="op" id="2920415">.</span><span class="ident" id="2920416">Pointer</span><span class="op" id="2920423">(</span><span class="ident" id="2920424">ptr</span><span class="op" id="2920427">)</span><span class="op" id="2920428">)</span>&nbsp;<span class="op" id="2920430">=</span>&nbsp;<span class="ident" id="2920432">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2920435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920438">return</span>&nbsp;<span class="ident" id="2920445">Value</span><span class="op" id="2920450">{</span><span class="ident" id="2920451">typ</span><span class="op" id="2920454">,</span>&nbsp;<span class="ident" id="2920456">ptr</span><span class="op" id="2920459">,</span>&nbsp;<span class="ident" id="2920461">f</span>&nbsp;<span class="op" id="2920463">|</span>&nbsp;<span class="ident" id="2920465">flagIndir</span>&nbsp;<span class="op" id="2920475">|</span>&nbsp;<span class="ident" id="2920477">flag</span><span class="op" id="2920481">(</span><span class="ident" id="2920482">typ</span><span class="op" id="2920485">.</span><span class="ident" id="2920486">Kind</span><span class="op" id="2920490">(</span><span class="op" id="2920491">)</span><span class="op" id="2920492">)</span><span class="op" id="2920493">}</span><br>
<span class="lineno"></span><span class="op" id="2920495">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2920498">func</span>&nbsp;<span class="ident" id="2920503">makeString</span><span class="op" id="2920513">(</span><span class="ident" id="2920514">f</span>&nbsp;<span class="ident" id="2920516">flag</span><span class="op" id="2920520">,</span>&nbsp;<span class="ident" id="2920522">v</span>&nbsp;<span class="builtintype" id="2920524">string</span><span class="op" id="2920530">,</span>&nbsp;<span class="ident" id="2920532">t</span>&nbsp;<span class="ident" id="2920534">Type</span><span class="op" id="2920538">)</span>&nbsp;<span class="ident" id="2920540">Value</span>&nbsp;<span class="op" id="2920546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920549">ret</span>&nbsp;<span class="op" id="2920553">:=</span>&nbsp;<span class="ident" id="2920556">New</span><span class="op" id="2920559">(</span><span class="ident" id="2920560">t</span><span class="op" id="2920561">)</span><span class="op" id="2920562">.</span><span class="ident" id="2920563">Elem</span><span class="op" id="2920567">(</span><span class="op" id="2920568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920571">ret</span><span class="op" id="2920574">.</span><span class="ident" id="2920575">SetString</span><span class="op" id="2920584">(</span><span class="ident" id="2920585">v</span><span class="op" id="2920586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920589">ret</span><span class="op" id="2920592">.</span><span class="ident" id="2920593">flag</span>&nbsp;<span class="op" id="2920598">=</span>&nbsp;<span class="ident" id="2920600">ret</span><span class="op" id="2920603">.</span><span class="ident" id="2920604">flag</span><span class="op" id="2920608">&amp;^</span><span class="ident" id="2920610">flagAddr</span>&nbsp;<span class="op" id="2920619">|</span>&nbsp;<span class="ident" id="2920621">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920624">return</span>&nbsp;<span class="ident" id="2920631">ret</span><br>
<span class="lineno"></span><span class="op" id="2920635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2920638">func</span>&nbsp;<span class="ident" id="2920643">makeBytes</span><span class="op" id="2920652">(</span><span class="ident" id="2920653">f</span>&nbsp;<span class="ident" id="2920655">flag</span><span class="op" id="2920659">,</span>&nbsp;<span class="ident" id="2920661">v</span>&nbsp;<span class="op" id="2920663">[</span><span class="op" id="2920664">]</span><span class="builtintype" id="2920665">byte</span><span class="op" id="2920669">,</span>&nbsp;<span class="ident" id="2920671">t</span>&nbsp;<span class="ident" id="2920673">Type</span><span class="op" id="2920677">)</span>&nbsp;<span class="ident" id="2920679">Value</span>&nbsp;<span class="op" id="2920685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920688">ret</span>&nbsp;<span class="op" id="2920692">:=</span>&nbsp;<span class="ident" id="2920695">New</span><span class="op" id="2920698">(</span><span class="ident" id="2920699">t</span><span class="op" id="2920700">)</span><span class="op" id="2920701">.</span><span class="ident" id="2920702">Elem</span><span class="op" id="2920706">(</span><span class="op" id="2920707">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920710">ret</span><span class="op" id="2920713">.</span><span class="ident" id="2920714">SetBytes</span><span class="op" id="2920722">(</span><span class="ident" id="2920723">v</span><span class="op" id="2920724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920727">ret</span><span class="op" id="2920730">.</span><span class="ident" id="2920731">flag</span>&nbsp;<span class="op" id="2920736">=</span>&nbsp;<span class="ident" id="2920738">ret</span><span class="op" id="2920741">.</span><span class="ident" id="2920742">flag</span><span class="op" id="2920746">&amp;^</span><span class="ident" id="2920748">flagAddr</span>&nbsp;<span class="op" id="2920757">|</span>&nbsp;<span class="ident" id="2920759">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920762">return</span>&nbsp;<span class="ident" id="2920769">ret</span><br>
<span class="lineno"></span><span class="op" id="2920773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2920776">func</span>&nbsp;<span class="ident" id="2920781">makeRunes</span><span class="op" id="2920790">(</span><span class="ident" id="2920791">f</span>&nbsp;<span class="ident" id="2920793">flag</span><span class="op" id="2920797">,</span>&nbsp;<span class="ident" id="2920799">v</span>&nbsp;<span class="op" id="2920801">[</span><span class="op" id="2920802">]</span><span class="builtintype" id="2920803">rune</span><span class="op" id="2920807">,</span>&nbsp;<span class="ident" id="2920809">t</span>&nbsp;<span class="ident" id="2920811">Type</span><span class="op" id="2920815">)</span>&nbsp;<span class="ident" id="2920817">Value</span>&nbsp;<span class="op" id="2920823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920826">ret</span>&nbsp;<span class="op" id="2920830">:=</span>&nbsp;<span class="ident" id="2920833">New</span><span class="op" id="2920836">(</span><span class="ident" id="2920837">t</span><span class="op" id="2920838">)</span><span class="op" id="2920839">.</span><span class="ident" id="2920840">Elem</span><span class="op" id="2920844">(</span><span class="op" id="2920845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920848">ret</span><span class="op" id="2920851">.</span><span class="ident" id="2920852">setRunes</span><span class="op" id="2920860">(</span><span class="ident" id="2920861">v</span><span class="op" id="2920862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2920865">ret</span><span class="op" id="2920868">.</span><span class="ident" id="2920869">flag</span>&nbsp;<span class="op" id="2920874">=</span>&nbsp;<span class="ident" id="2920876">ret</span><span class="op" id="2920879">.</span><span class="ident" id="2920880">flag</span><span class="op" id="2920884">&amp;^</span><span class="ident" id="2920886">flagAddr</span>&nbsp;<span class="op" id="2920895">|</span>&nbsp;<span class="ident" id="2920897">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2920900">return</span>&nbsp;<span class="ident" id="2920907">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2920911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2920914">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2920970">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2921042">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2921114">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921173">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921205">func</span>&nbsp;<span class="ident" id="2921210">cvtInt</span><span class="op" id="2921216">(</span><span class="ident" id="2921217">v</span>&nbsp;<span class="ident" id="2921219">Value</span><span class="op" id="2921224">,</span>&nbsp;<span class="ident" id="2921226">t</span>&nbsp;<span class="ident" id="2921228">Type</span><span class="op" id="2921232">)</span>&nbsp;<span class="ident" id="2921234">Value</span>&nbsp;<span class="op" id="2921240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921243">return</span>&nbsp;<span class="ident" id="2921250">makeInt</span><span class="op" id="2921257">(</span><span class="ident" id="2921258">v</span><span class="op" id="2921259">.</span><span class="ident" id="2921260">flag</span><span class="op" id="2921264">&amp;</span><span class="ident" id="2921265">flagRO</span><span class="op" id="2921271">,</span>&nbsp;<span class="ident" id="2921273">uint64</span><span class="op" id="2921279">(</span><span class="ident" id="2921280">v</span><span class="op" id="2921281">.</span><span class="ident" id="2921282">Int</span><span class="op" id="2921285">(</span><span class="op" id="2921286">)</span><span class="op" id="2921287">)</span><span class="op" id="2921288">,</span>&nbsp;<span class="ident" id="2921290">t</span><span class="op" id="2921291">)</span><br>
<span class="lineno">2300</span><span class="op" id="2921293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921296">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921329">func</span>&nbsp;<span class="ident" id="2921334">cvtUint</span><span class="op" id="2921341">(</span><span class="ident" id="2921342">v</span>&nbsp;<span class="ident" id="2921344">Value</span><span class="op" id="2921349">,</span>&nbsp;<span class="ident" id="2921351">t</span>&nbsp;<span class="ident" id="2921353">Type</span><span class="op" id="2921357">)</span>&nbsp;<span class="ident" id="2921359">Value</span>&nbsp;<span class="op" id="2921365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921368">return</span>&nbsp;<span class="ident" id="2921375">makeInt</span><span class="op" id="2921382">(</span><span class="ident" id="2921383">v</span><span class="op" id="2921384">.</span><span class="ident" id="2921385">flag</span><span class="op" id="2921389">&amp;</span><span class="ident" id="2921390">flagRO</span><span class="op" id="2921396">,</span>&nbsp;<span class="ident" id="2921398">v</span><span class="op" id="2921399">.</span><span class="ident" id="2921400">Uint</span><span class="op" id="2921404">(</span><span class="op" id="2921405">)</span><span class="op" id="2921406">,</span>&nbsp;<span class="ident" id="2921408">t</span><span class="op" id="2921409">)</span><br>
<span class="lineno">2305</span><span class="op" id="2921411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921414">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921445">func</span>&nbsp;<span class="ident" id="2921450">cvtFloatInt</span><span class="op" id="2921461">(</span><span class="ident" id="2921462">v</span>&nbsp;<span class="ident" id="2921464">Value</span><span class="op" id="2921469">,</span>&nbsp;<span class="ident" id="2921471">t</span>&nbsp;<span class="ident" id="2921473">Type</span><span class="op" id="2921477">)</span>&nbsp;<span class="ident" id="2921479">Value</span>&nbsp;<span class="op" id="2921485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921488">return</span>&nbsp;<span class="ident" id="2921495">makeInt</span><span class="op" id="2921502">(</span><span class="ident" id="2921503">v</span><span class="op" id="2921504">.</span><span class="ident" id="2921505">flag</span><span class="op" id="2921509">&amp;</span><span class="ident" id="2921510">flagRO</span><span class="op" id="2921516">,</span>&nbsp;<span class="ident" id="2921518">uint64</span><span class="op" id="2921524">(</span><span class="ident" id="2921525">int64</span><span class="op" id="2921530">(</span><span class="ident" id="2921531">v</span><span class="op" id="2921532">.</span><span class="ident" id="2921533">Float</span><span class="op" id="2921538">(</span><span class="op" id="2921539">)</span><span class="op" id="2921540">)</span><span class="op" id="2921541">)</span><span class="op" id="2921542">,</span>&nbsp;<span class="ident" id="2921544">t</span><span class="op" id="2921545">)</span><br>
<span class="lineno">2310</span><span class="op" id="2921547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921550">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921582">func</span>&nbsp;<span class="ident" id="2921587">cvtFloatUint</span><span class="op" id="2921599">(</span><span class="ident" id="2921600">v</span>&nbsp;<span class="ident" id="2921602">Value</span><span class="op" id="2921607">,</span>&nbsp;<span class="ident" id="2921609">t</span>&nbsp;<span class="ident" id="2921611">Type</span><span class="op" id="2921615">)</span>&nbsp;<span class="ident" id="2921617">Value</span>&nbsp;<span class="op" id="2921623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921626">return</span>&nbsp;<span class="ident" id="2921633">makeInt</span><span class="op" id="2921640">(</span><span class="ident" id="2921641">v</span><span class="op" id="2921642">.</span><span class="ident" id="2921643">flag</span><span class="op" id="2921647">&amp;</span><span class="ident" id="2921648">flagRO</span><span class="op" id="2921654">,</span>&nbsp;<span class="ident" id="2921656">uint64</span><span class="op" id="2921662">(</span><span class="ident" id="2921663">v</span><span class="op" id="2921664">.</span><span class="ident" id="2921665">Float</span><span class="op" id="2921670">(</span><span class="op" id="2921671">)</span><span class="op" id="2921672">)</span><span class="op" id="2921673">,</span>&nbsp;<span class="ident" id="2921675">t</span><span class="op" id="2921676">)</span><br>
<span class="lineno">2315</span><span class="op" id="2921678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921681">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921712">func</span>&nbsp;<span class="ident" id="2921717">cvtIntFloat</span><span class="op" id="2921728">(</span><span class="ident" id="2921729">v</span>&nbsp;<span class="ident" id="2921731">Value</span><span class="op" id="2921736">,</span>&nbsp;<span class="ident" id="2921738">t</span>&nbsp;<span class="ident" id="2921740">Type</span><span class="op" id="2921744">)</span>&nbsp;<span class="ident" id="2921746">Value</span>&nbsp;<span class="op" id="2921752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921755">return</span>&nbsp;<span class="ident" id="2921762">makeFloat</span><span class="op" id="2921771">(</span><span class="ident" id="2921772">v</span><span class="op" id="2921773">.</span><span class="ident" id="2921774">flag</span><span class="op" id="2921778">&amp;</span><span class="ident" id="2921779">flagRO</span><span class="op" id="2921785">,</span>&nbsp;<span class="builtintype" id="2921787">float64</span><span class="op" id="2921794">(</span><span class="ident" id="2921795">v</span><span class="op" id="2921796">.</span><span class="ident" id="2921797">Int</span><span class="op" id="2921800">(</span><span class="op" id="2921801">)</span><span class="op" id="2921802">)</span><span class="op" id="2921803">,</span>&nbsp;<span class="ident" id="2921805">t</span><span class="op" id="2921806">)</span><br>
<span class="lineno">2320</span><span class="op" id="2921808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921811">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921843">func</span>&nbsp;<span class="ident" id="2921848">cvtUintFloat</span><span class="op" id="2921860">(</span><span class="ident" id="2921861">v</span>&nbsp;<span class="ident" id="2921863">Value</span><span class="op" id="2921868">,</span>&nbsp;<span class="ident" id="2921870">t</span>&nbsp;<span class="ident" id="2921872">Type</span><span class="op" id="2921876">)</span>&nbsp;<span class="ident" id="2921878">Value</span>&nbsp;<span class="op" id="2921884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2921887">return</span>&nbsp;<span class="ident" id="2921894">makeFloat</span><span class="op" id="2921903">(</span><span class="ident" id="2921904">v</span><span class="op" id="2921905">.</span><span class="ident" id="2921906">flag</span><span class="op" id="2921910">&amp;</span><span class="ident" id="2921911">flagRO</span><span class="op" id="2921917">,</span>&nbsp;<span class="builtintype" id="2921919">float64</span><span class="op" id="2921926">(</span><span class="ident" id="2921927">v</span><span class="op" id="2921928">.</span><span class="ident" id="2921929">Uint</span><span class="op" id="2921933">(</span><span class="op" id="2921934">)</span><span class="op" id="2921935">)</span><span class="op" id="2921936">,</span>&nbsp;<span class="ident" id="2921938">t</span><span class="op" id="2921939">)</span><br>
<span class="lineno">2325</span><span class="op" id="2921941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921944">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2921977">func</span>&nbsp;<span class="ident" id="2921982">cvtFloat</span><span class="op" id="2921990">(</span><span class="ident" id="2921991">v</span>&nbsp;<span class="ident" id="2921993">Value</span><span class="op" id="2921998">,</span>&nbsp;<span class="ident" id="2922000">t</span>&nbsp;<span class="ident" id="2922002">Type</span><span class="op" id="2922006">)</span>&nbsp;<span class="ident" id="2922008">Value</span>&nbsp;<span class="op" id="2922014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922017">return</span>&nbsp;<span class="ident" id="2922024">makeFloat</span><span class="op" id="2922033">(</span><span class="ident" id="2922034">v</span><span class="op" id="2922035">.</span><span class="ident" id="2922036">flag</span><span class="op" id="2922040">&amp;</span><span class="ident" id="2922041">flagRO</span><span class="op" id="2922047">,</span>&nbsp;<span class="ident" id="2922049">v</span><span class="op" id="2922050">.</span><span class="ident" id="2922051">Float</span><span class="op" id="2922056">(</span><span class="op" id="2922057">)</span><span class="op" id="2922058">,</span>&nbsp;<span class="ident" id="2922060">t</span><span class="op" id="2922061">)</span><br>
<span class="lineno">2330</span><span class="op" id="2922063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922066">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2922103">func</span>&nbsp;<span class="ident" id="2922108">cvtComplex</span><span class="op" id="2922118">(</span><span class="ident" id="2922119">v</span>&nbsp;<span class="ident" id="2922121">Value</span><span class="op" id="2922126">,</span>&nbsp;<span class="ident" id="2922128">t</span>&nbsp;<span class="ident" id="2922130">Type</span><span class="op" id="2922134">)</span>&nbsp;<span class="ident" id="2922136">Value</span>&nbsp;<span class="op" id="2922142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922145">return</span>&nbsp;<span class="ident" id="2922152">makeComplex</span><span class="op" id="2922163">(</span><span class="ident" id="2922164">v</span><span class="op" id="2922165">.</span><span class="ident" id="2922166">flag</span><span class="op" id="2922170">&amp;</span><span class="ident" id="2922171">flagRO</span><span class="op" id="2922177">,</span>&nbsp;<span class="ident" id="2922179">v</span><span class="op" id="2922180">.</span><span class="ident" id="2922181">Complex</span><span class="op" id="2922188">(</span><span class="op" id="2922189">)</span><span class="op" id="2922190">,</span>&nbsp;<span class="ident" id="2922192">t</span><span class="op" id="2922193">)</span><br>
<span class="lineno">2335</span><span class="op" id="2922195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922198">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2922228">func</span>&nbsp;<span class="ident" id="2922233">cvtIntString</span><span class="op" id="2922245">(</span><span class="ident" id="2922246">v</span>&nbsp;<span class="ident" id="2922248">Value</span><span class="op" id="2922253">,</span>&nbsp;<span class="ident" id="2922255">t</span>&nbsp;<span class="ident" id="2922257">Type</span><span class="op" id="2922261">)</span>&nbsp;<span class="ident" id="2922263">Value</span>&nbsp;<span class="op" id="2922269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922272">return</span>&nbsp;<span class="ident" id="2922279">makeString</span><span class="op" id="2922289">(</span><span class="ident" id="2922290">v</span><span class="op" id="2922291">.</span><span class="ident" id="2922292">flag</span><span class="op" id="2922296">&amp;</span><span class="ident" id="2922297">flagRO</span><span class="op" id="2922303">,</span>&nbsp;<span class="builtintype" id="2922305">string</span><span class="op" id="2922311">(</span><span class="ident" id="2922312">v</span><span class="op" id="2922313">.</span><span class="ident" id="2922314">Int</span><span class="op" id="2922317">(</span><span class="op" id="2922318">)</span><span class="op" id="2922319">)</span><span class="op" id="2922320">,</span>&nbsp;<span class="ident" id="2922322">t</span><span class="op" id="2922323">)</span><br>
<span class="lineno">2340</span><span class="op" id="2922325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922328">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2922359">func</span>&nbsp;<span class="ident" id="2922364">cvtUintString</span><span class="op" id="2922377">(</span><span class="ident" id="2922378">v</span>&nbsp;<span class="ident" id="2922380">Value</span><span class="op" id="2922385">,</span>&nbsp;<span class="ident" id="2922387">t</span>&nbsp;<span class="ident" id="2922389">Type</span><span class="op" id="2922393">)</span>&nbsp;<span class="ident" id="2922395">Value</span>&nbsp;<span class="op" id="2922401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922404">return</span>&nbsp;<span class="ident" id="2922411">makeString</span><span class="op" id="2922421">(</span><span class="ident" id="2922422">v</span><span class="op" id="2922423">.</span><span class="ident" id="2922424">flag</span><span class="op" id="2922428">&amp;</span><span class="ident" id="2922429">flagRO</span><span class="op" id="2922435">,</span>&nbsp;<span class="builtintype" id="2922437">string</span><span class="op" id="2922443">(</span><span class="ident" id="2922444">v</span><span class="op" id="2922445">.</span><span class="ident" id="2922446">Uint</span><span class="op" id="2922450">(</span><span class="op" id="2922451">)</span><span class="op" id="2922452">)</span><span class="op" id="2922453">,</span>&nbsp;<span class="ident" id="2922455">t</span><span class="op" id="2922456">)</span><br>
<span class="lineno">2345</span><span class="op" id="2922458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922461">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2922492">func</span>&nbsp;<span class="ident" id="2922497">cvtBytesString</span><span class="op" id="2922511">(</span><span class="ident" id="2922512">v</span>&nbsp;<span class="ident" id="2922514">Value</span><span class="op" id="2922519">,</span>&nbsp;<span class="ident" id="2922521">t</span>&nbsp;<span class="ident" id="2922523">Type</span><span class="op" id="2922527">)</span>&nbsp;<span class="ident" id="2922529">Value</span>&nbsp;<span class="op" id="2922535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922538">return</span>&nbsp;<span class="ident" id="2922545">makeString</span><span class="op" id="2922555">(</span><span class="ident" id="2922556">v</span><span class="op" id="2922557">.</span><span class="ident" id="2922558">flag</span><span class="op" id="2922562">&amp;</span><span class="ident" id="2922563">flagRO</span><span class="op" id="2922569">,</span>&nbsp;<span class="builtintype" id="2922571">string</span><span class="op" id="2922577">(</span><span class="ident" id="2922578">v</span><span class="op" id="2922579">.</span><span class="ident" id="2922580">Bytes</span><span class="op" id="2922585">(</span><span class="op" id="2922586">)</span><span class="op" id="2922587">)</span><span class="op" id="2922588">,</span>&nbsp;<span class="ident" id="2922590">t</span><span class="op" id="2922591">)</span><br>
<span class="lineno">2350</span><span class="op" id="2922593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922596">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2922627">func</span>&nbsp;<span class="ident" id="2922632">cvtStringBytes</span><span class="op" id="2922646">(</span><span class="ident" id="2922647">v</span>&nbsp;<span class="ident" id="2922649">Value</span><span class="op" id="2922654">,</span>&nbsp;<span class="ident" id="2922656">t</span>&nbsp;<span class="ident" id="2922658">Type</span><span class="op" id="2922662">)</span>&nbsp;<span class="ident" id="2922664">Value</span>&nbsp;<span class="op" id="2922670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922673">return</span>&nbsp;<span class="ident" id="2922680">makeBytes</span><span class="op" id="2922689">(</span><span class="ident" id="2922690">v</span><span class="op" id="2922691">.</span><span class="ident" id="2922692">flag</span><span class="op" id="2922696">&amp;</span><span class="ident" id="2922697">flagRO</span><span class="op" id="2922703">,</span>&nbsp;<span class="op" id="2922705">[</span><span class="op" id="2922706">]</span><span class="builtintype" id="2922707">byte</span><span class="op" id="2922711">(</span><span class="ident" id="2922712">v</span><span class="op" id="2922713">.</span><span class="ident" id="2922714">String</span><span class="op" id="2922720">(</span><span class="op" id="2922721">)</span><span class="op" id="2922722">)</span><span class="op" id="2922723">,</span>&nbsp;<span class="ident" id="2922725">t</span><span class="op" id="2922726">)</span><br>
<span class="lineno">2355</span><span class="op" id="2922728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922731">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2922762">func</span>&nbsp;<span class="ident" id="2922767">cvtRunesString</span><span class="op" id="2922781">(</span><span class="ident" id="2922782">v</span>&nbsp;<span class="ident" id="2922784">Value</span><span class="op" id="2922789">,</span>&nbsp;<span class="ident" id="2922791">t</span>&nbsp;<span class="ident" id="2922793">Type</span><span class="op" id="2922797">)</span>&nbsp;<span class="ident" id="2922799">Value</span>&nbsp;<span class="op" id="2922805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922808">return</span>&nbsp;<span class="ident" id="2922815">makeString</span><span class="op" id="2922825">(</span><span class="ident" id="2922826">v</span><span class="op" id="2922827">.</span><span class="ident" id="2922828">flag</span><span class="op" id="2922832">&amp;</span><span class="ident" id="2922833">flagRO</span><span class="op" id="2922839">,</span>&nbsp;<span class="builtintype" id="2922841">string</span><span class="op" id="2922847">(</span><span class="ident" id="2922848">v</span><span class="op" id="2922849">.</span><span class="ident" id="2922850">runes</span><span class="op" id="2922855">(</span><span class="op" id="2922856">)</span><span class="op" id="2922857">)</span><span class="op" id="2922858">,</span>&nbsp;<span class="ident" id="2922860">t</span><span class="op" id="2922861">)</span><br>
<span class="lineno">2360</span><span class="op" id="2922863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922866">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2922897">func</span>&nbsp;<span class="ident" id="2922902">cvtStringRunes</span><span class="op" id="2922916">(</span><span class="ident" id="2922917">v</span>&nbsp;<span class="ident" id="2922919">Value</span><span class="op" id="2922924">,</span>&nbsp;<span class="ident" id="2922926">t</span>&nbsp;<span class="ident" id="2922928">Type</span><span class="op" id="2922932">)</span>&nbsp;<span class="ident" id="2922934">Value</span>&nbsp;<span class="op" id="2922940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2922943">return</span>&nbsp;<span class="ident" id="2922950">makeRunes</span><span class="op" id="2922959">(</span><span class="ident" id="2922960">v</span><span class="op" id="2922961">.</span><span class="ident" id="2922962">flag</span><span class="op" id="2922966">&amp;</span><span class="ident" id="2922967">flagRO</span><span class="op" id="2922973">,</span>&nbsp;<span class="op" id="2922975">[</span><span class="op" id="2922976">]</span><span class="builtintype" id="2922977">rune</span><span class="op" id="2922981">(</span><span class="ident" id="2922982">v</span><span class="op" id="2922983">.</span><span class="ident" id="2922984">String</span><span class="op" id="2922990">(</span><span class="op" id="2922991">)</span><span class="op" id="2922992">)</span><span class="op" id="2922993">,</span>&nbsp;<span class="ident" id="2922995">t</span><span class="op" id="2922996">)</span><br>
<span class="lineno">2365</span><span class="op" id="2922998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923001">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2923027">func</span>&nbsp;<span class="ident" id="2923032">cvtDirect</span><span class="op" id="2923041">(</span><span class="ident" id="2923042">v</span>&nbsp;<span class="ident" id="2923044">Value</span><span class="op" id="2923049">,</span>&nbsp;<span class="ident" id="2923051">typ</span>&nbsp;<span class="ident" id="2923055">Type</span><span class="op" id="2923059">)</span>&nbsp;<span class="ident" id="2923061">Value</span>&nbsp;<span class="op" id="2923067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923070">f</span>&nbsp;<span class="op" id="2923072">:=</span>&nbsp;<span class="ident" id="2923075">v</span><span class="op" id="2923076">.</span><span class="ident" id="2923077">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923083">t</span>&nbsp;<span class="op" id="2923085">:=</span>&nbsp;<span class="ident" id="2923088">typ</span><span class="op" id="2923091">.</span><span class="ident" id="2923092">common</span><span class="op" id="2923098">(</span><span class="op" id="2923099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923102">ptr</span>&nbsp;<span class="op" id="2923106">:=</span>&nbsp;<span class="ident" id="2923109">v</span><span class="op" id="2923110">.</span><span class="ident" id="2923111">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923116">if</span>&nbsp;<span class="ident" id="2923119">f</span><span class="op" id="2923120">&amp;</span><span class="ident" id="2923121">flagAddr</span>&nbsp;<span class="op" id="2923130">!=</span>&nbsp;<span class="num" id="2923133">0</span>&nbsp;<span class="op" id="2923135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2923139">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923181">c</span>&nbsp;<span class="op" id="2923183">:=</span>&nbsp;<span class="ident" id="2923186">unsafe_New</span><span class="op" id="2923196">(</span><span class="ident" id="2923197">t</span><span class="op" id="2923198">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923202">memmove</span><span class="op" id="2923209">(</span><span class="ident" id="2923210">c</span><span class="op" id="2923211">,</span>&nbsp;<span class="ident" id="2923213">ptr</span><span class="op" id="2923216">,</span>&nbsp;<span class="ident" id="2923218">t</span><span class="op" id="2923219">.</span><span class="ident" id="2923220">size</span><span class="op" id="2923224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923228">ptr</span>&nbsp;<span class="op" id="2923232">=</span>&nbsp;<span class="ident" id="2923234">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923238">f</span>&nbsp;<span class="op" id="2923240">&amp;^=</span>&nbsp;<span class="ident" id="2923244">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923257">return</span>&nbsp;<span class="ident" id="2923264">Value</span><span class="op" id="2923269">{</span><span class="ident" id="2923270">t</span><span class="op" id="2923271">,</span>&nbsp;<span class="ident" id="2923273">ptr</span><span class="op" id="2923276">,</span>&nbsp;<span class="ident" id="2923278">v</span><span class="op" id="2923279">.</span><span class="ident" id="2923280">flag</span><span class="op" id="2923284">&amp;</span><span class="ident" id="2923285">flagRO</span>&nbsp;<span class="op" id="2923292">|</span>&nbsp;<span class="ident" id="2923294">f</span><span class="op" id="2923295">}</span>&nbsp;<span class="comment" id="2923297">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2923322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923325">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2923361">func</span>&nbsp;<span class="ident" id="2923366">cvtT2I</span><span class="op" id="2923372">(</span><span class="ident" id="2923373">v</span>&nbsp;<span class="ident" id="2923375">Value</span><span class="op" id="2923380">,</span>&nbsp;<span class="ident" id="2923382">typ</span>&nbsp;<span class="ident" id="2923386">Type</span><span class="op" id="2923390">)</span>&nbsp;<span class="ident" id="2923392">Value</span>&nbsp;<span class="op" id="2923398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923401">target</span>&nbsp;<span class="op" id="2923408">:=</span>&nbsp;<span class="ident" id="2923411">unsafe_New</span><span class="op" id="2923421">(</span><span class="ident" id="2923422">typ</span><span class="op" id="2923425">.</span><span class="ident" id="2923426">common</span><span class="op" id="2923432">(</span><span class="op" id="2923433">)</span><span class="op" id="2923434">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923437">x</span>&nbsp;<span class="op" id="2923439">:=</span>&nbsp;<span class="ident" id="2923442">valueInterface</span><span class="op" id="2923456">(</span><span class="ident" id="2923457">v</span><span class="op" id="2923458">,</span>&nbsp;<span class="builtintype" id="2923460">false</span><span class="op" id="2923465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923468">if</span>&nbsp;<span class="ident" id="2923471">typ</span><span class="op" id="2923474">.</span><span class="ident" id="2923475">NumMethod</span><span class="op" id="2923484">(</span><span class="op" id="2923485">)</span>&nbsp;<span class="op" id="2923487">==</span>&nbsp;<span class="num" id="2923490">0</span>&nbsp;<span class="op" id="2923492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923496">*</span><span class="op" id="2923497">(</span><span class="op" id="2923498">*</span><span class="keyword" id="2923499">interface</span><span class="op" id="2923508">{</span><span class="op" id="2923509">}</span><span class="op" id="2923510">)</span><span class="op" id="2923511">(</span><span class="ident" id="2923512">target</span><span class="op" id="2923518">)</span>&nbsp;<span class="op" id="2923520">=</span>&nbsp;<span class="ident" id="2923522">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923525">}</span>&nbsp;<span class="keyword" id="2923527">else</span>&nbsp;<span class="op" id="2923532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923536">ifaceE2I</span><span class="op" id="2923544">(</span><span class="ident" id="2923545">typ</span><span class="op" id="2923548">.</span><span class="op" id="2923549">(</span><span class="op" id="2923550">*</span><span class="ident" id="2923551">rtype</span><span class="op" id="2923556">)</span><span class="op" id="2923557">,</span>&nbsp;<span class="ident" id="2923559">x</span><span class="op" id="2923560">,</span>&nbsp;<span class="ident" id="2923562">target</span><span class="op" id="2923568">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923574">return</span>&nbsp;<span class="ident" id="2923581">Value</span><span class="op" id="2923586">{</span><span class="ident" id="2923587">typ</span><span class="op" id="2923590">.</span><span class="ident" id="2923591">common</span><span class="op" id="2923597">(</span><span class="op" id="2923598">)</span><span class="op" id="2923599">,</span>&nbsp;<span class="ident" id="2923601">target</span><span class="op" id="2923607">,</span>&nbsp;<span class="ident" id="2923609">v</span><span class="op" id="2923610">.</span><span class="ident" id="2923611">flag</span><span class="op" id="2923615">&amp;</span><span class="ident" id="2923616">flagRO</span>&nbsp;<span class="op" id="2923623">|</span>&nbsp;<span class="ident" id="2923625">flagIndir</span>&nbsp;<span class="op" id="2923635">|</span>&nbsp;<span class="ident" id="2923637">flag</span><span class="op" id="2923641">(</span><span class="ident" id="2923642">Interface</span><span class="op" id="2923651">)</span><span class="op" id="2923652">}</span><br>
<span class="lineno"></span><span class="op" id="2923654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923657">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2923694">func</span>&nbsp;<span class="ident" id="2923699">cvtI2I</span><span class="op" id="2923705">(</span><span class="ident" id="2923706">v</span>&nbsp;<span class="ident" id="2923708">Value</span><span class="op" id="2923713">,</span>&nbsp;<span class="ident" id="2923715">typ</span>&nbsp;<span class="ident" id="2923719">Type</span><span class="op" id="2923723">)</span>&nbsp;<span class="ident" id="2923725">Value</span>&nbsp;<span class="op" id="2923731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923734">if</span>&nbsp;<span class="ident" id="2923737">v</span><span class="op" id="2923738">.</span><span class="ident" id="2923739">IsNil</span><span class="op" id="2923744">(</span><span class="op" id="2923745">)</span>&nbsp;<span class="op" id="2923747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923751">ret</span>&nbsp;<span class="op" id="2923755">:=</span>&nbsp;<span class="ident" id="2923758">Zero</span><span class="op" id="2923762">(</span><span class="ident" id="2923763">typ</span><span class="op" id="2923766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2923770">ret</span><span class="op" id="2923773">.</span><span class="ident" id="2923774">flag</span>&nbsp;<span class="op" id="2923779">|=</span>&nbsp;<span class="ident" id="2923782">v</span><span class="op" id="2923783">.</span><span class="ident" id="2923784">flag</span>&nbsp;<span class="op" id="2923789">&amp;</span>&nbsp;<span class="ident" id="2923791">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923800">return</span>&nbsp;<span class="ident" id="2923807">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2923812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2923815">return</span>&nbsp;<span class="ident" id="2923822">cvtT2I</span><span class="op" id="2923828">(</span><span class="ident" id="2923829">v</span><span class="op" id="2923830">.</span><span class="ident" id="2923831">Elem</span><span class="op" id="2923835">(</span><span class="op" id="2923836">)</span><span class="op" id="2923837">,</span>&nbsp;<span class="ident" id="2923839">typ</span><span class="op" id="2923842">)</span><br>
<span class="lineno"></span><span class="op" id="2923844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923847">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2923876">func</span>&nbsp;<span class="ident" id="2923881">chancap</span><span class="op" id="2923888">(</span><span class="ident" id="2923889">ch</span>&nbsp;<span class="ident" id="2923892">unsafe</span><span class="op" id="2923898">.</span><span class="ident" id="2923899">Pointer</span><span class="op" id="2923906">)</span>&nbsp;<span class="builtintype" id="2923908">int</span><br>
<span class="lineno"></span><span class="keyword" id="2923912">func</span>&nbsp;<span class="ident" id="2923917">chanclose</span><span class="op" id="2923926">(</span><span class="ident" id="2923927">ch</span>&nbsp;<span class="ident" id="2923930">unsafe</span><span class="op" id="2923936">.</span><span class="ident" id="2923937">Pointer</span><span class="op" id="2923944">)</span><br>
<span class="lineno"></span><span class="keyword" id="2923946">func</span>&nbsp;<span class="ident" id="2923951">chanlen</span><span class="op" id="2923958">(</span><span class="ident" id="2923959">ch</span>&nbsp;<span class="ident" id="2923962">unsafe</span><span class="op" id="2923968">.</span><span class="ident" id="2923969">Pointer</span><span class="op" id="2923976">)</span>&nbsp;<span class="builtintype" id="2923978">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923983">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2923997">func</span>&nbsp;<span class="ident" id="2924002">chanrecv</span><span class="op" id="2924010">(</span><span class="ident" id="2924011">t</span>&nbsp;<span class="op" id="2924013">*</span><span class="ident" id="2924014">rtype</span><span class="op" id="2924019">,</span>&nbsp;<span class="ident" id="2924021">ch</span>&nbsp;<span class="ident" id="2924024">unsafe</span><span class="op" id="2924030">.</span><span class="ident" id="2924031">Pointer</span><span class="op" id="2924038">,</span>&nbsp;<span class="ident" id="2924040">nb</span>&nbsp;<span class="builtintype" id="2924043">bool</span><span class="op" id="2924047">,</span>&nbsp;<span class="ident" id="2924049">val</span>&nbsp;<span class="ident" id="2924053">unsafe</span><span class="op" id="2924059">.</span><span class="ident" id="2924060">Pointer</span><span class="op" id="2924067">)</span>&nbsp;<span class="op" id="2924069">(</span><span class="ident" id="2924070">selected</span><span class="op" id="2924078">,</span>&nbsp;<span class="ident" id="2924080">received</span>&nbsp;<span class="builtintype" id="2924089">bool</span><span class="op" id="2924093">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2924096">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2924110">func</span>&nbsp;<span class="ident" id="2924115">chansend</span><span class="op" id="2924123">(</span><span class="ident" id="2924124">t</span>&nbsp;<span class="op" id="2924126">*</span><span class="ident" id="2924127">rtype</span><span class="op" id="2924132">,</span>&nbsp;<span class="ident" id="2924134">ch</span>&nbsp;<span class="ident" id="2924137">unsafe</span><span class="op" id="2924143">.</span><span class="ident" id="2924144">Pointer</span><span class="op" id="2924151">,</span>&nbsp;<span class="ident" id="2924153">val</span>&nbsp;<span class="ident" id="2924157">unsafe</span><span class="op" id="2924163">.</span><span class="ident" id="2924164">Pointer</span><span class="op" id="2924171">,</span>&nbsp;<span class="ident" id="2924173">nb</span>&nbsp;<span class="builtintype" id="2924176">bool</span><span class="op" id="2924180">)</span>&nbsp;<span class="builtintype" id="2924182">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2924188">func</span>&nbsp;<span class="ident" id="2924193">makechan</span><span class="op" id="2924201">(</span><span class="ident" id="2924202">typ</span>&nbsp;<span class="op" id="2924206">*</span><span class="ident" id="2924207">rtype</span><span class="op" id="2924212">,</span>&nbsp;<span class="ident" id="2924214">size</span>&nbsp;<span class="ident" id="2924219">uint64</span><span class="op" id="2924225">)</span>&nbsp;<span class="op" id="2924227">(</span><span class="ident" id="2924228">ch</span>&nbsp;<span class="ident" id="2924231">unsafe</span><span class="op" id="2924237">.</span><span class="ident" id="2924238">Pointer</span><span class="op" id="2924245">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924247">func</span>&nbsp;<span class="ident" id="2924252">makemap</span><span class="op" id="2924259">(</span><span class="ident" id="2924260">t</span>&nbsp;<span class="op" id="2924262">*</span><span class="ident" id="2924263">rtype</span><span class="op" id="2924268">)</span>&nbsp;<span class="op" id="2924270">(</span><span class="ident" id="2924271">m</span>&nbsp;<span class="ident" id="2924273">unsafe</span><span class="op" id="2924279">.</span><span class="ident" id="2924280">Pointer</span><span class="op" id="2924287">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924289">func</span>&nbsp;<span class="ident" id="2924294">mapaccess</span><span class="op" id="2924303">(</span><span class="ident" id="2924304">t</span>&nbsp;<span class="op" id="2924306">*</span><span class="ident" id="2924307">rtype</span><span class="op" id="2924312">,</span>&nbsp;<span class="ident" id="2924314">m</span>&nbsp;<span class="ident" id="2924316">unsafe</span><span class="op" id="2924322">.</span><span class="ident" id="2924323">Pointer</span><span class="op" id="2924330">,</span>&nbsp;<span class="ident" id="2924332">key</span>&nbsp;<span class="ident" id="2924336">unsafe</span><span class="op" id="2924342">.</span><span class="ident" id="2924343">Pointer</span><span class="op" id="2924350">)</span>&nbsp;<span class="op" id="2924352">(</span><span class="ident" id="2924353">val</span>&nbsp;<span class="ident" id="2924357">unsafe</span><span class="op" id="2924363">.</span><span class="ident" id="2924364">Pointer</span><span class="op" id="2924371">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924373">func</span>&nbsp;<span class="ident" id="2924378">mapassign</span><span class="op" id="2924387">(</span><span class="ident" id="2924388">t</span>&nbsp;<span class="op" id="2924390">*</span><span class="ident" id="2924391">rtype</span><span class="op" id="2924396">,</span>&nbsp;<span class="ident" id="2924398">m</span>&nbsp;<span class="ident" id="2924400">unsafe</span><span class="op" id="2924406">.</span><span class="ident" id="2924407">Pointer</span><span class="op" id="2924414">,</span>&nbsp;<span class="ident" id="2924416">key</span><span class="op" id="2924419">,</span>&nbsp;<span class="ident" id="2924421">val</span>&nbsp;<span class="ident" id="2924425">unsafe</span><span class="op" id="2924431">.</span><span class="ident" id="2924432">Pointer</span><span class="op" id="2924439">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924441">func</span>&nbsp;<span class="ident" id="2924446">mapdelete</span><span class="op" id="2924455">(</span><span class="ident" id="2924456">t</span>&nbsp;<span class="op" id="2924458">*</span><span class="ident" id="2924459">rtype</span><span class="op" id="2924464">,</span>&nbsp;<span class="ident" id="2924466">m</span>&nbsp;<span class="ident" id="2924468">unsafe</span><span class="op" id="2924474">.</span><span class="ident" id="2924475">Pointer</span><span class="op" id="2924482">,</span>&nbsp;<span class="ident" id="2924484">key</span>&nbsp;<span class="ident" id="2924488">unsafe</span><span class="op" id="2924494">.</span><span class="ident" id="2924495">Pointer</span><span class="op" id="2924502">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2924504">func</span>&nbsp;<span class="ident" id="2924509">mapiterinit</span><span class="op" id="2924520">(</span><span class="ident" id="2924521">t</span>&nbsp;<span class="op" id="2924523">*</span><span class="ident" id="2924524">rtype</span><span class="op" id="2924529">,</span>&nbsp;<span class="ident" id="2924531">m</span>&nbsp;<span class="ident" id="2924533">unsafe</span><span class="op" id="2924539">.</span><span class="ident" id="2924540">Pointer</span><span class="op" id="2924547">)</span>&nbsp;<span class="ident" id="2924549">unsafe</span><span class="op" id="2924555">.</span><span class="ident" id="2924556">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2924564">func</span>&nbsp;<span class="ident" id="2924569">mapiterkey</span><span class="op" id="2924579">(</span><span class="ident" id="2924580">it</span>&nbsp;<span class="ident" id="2924583">unsafe</span><span class="op" id="2924589">.</span><span class="ident" id="2924590">Pointer</span><span class="op" id="2924597">)</span>&nbsp;<span class="op" id="2924599">(</span><span class="ident" id="2924600">key</span>&nbsp;<span class="ident" id="2924604">unsafe</span><span class="op" id="2924610">.</span><span class="ident" id="2924611">Pointer</span><span class="op" id="2924618">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924620">func</span>&nbsp;<span class="ident" id="2924625">mapiternext</span><span class="op" id="2924636">(</span><span class="ident" id="2924637">it</span>&nbsp;<span class="ident" id="2924640">unsafe</span><span class="op" id="2924646">.</span><span class="ident" id="2924647">Pointer</span><span class="op" id="2924654">)</span><br>
<span class="lineno"></span><span class="keyword" id="2924656">func</span>&nbsp;<span class="ident" id="2924661">maplen</span><span class="op" id="2924667">(</span><span class="ident" id="2924668">m</span>&nbsp;<span class="ident" id="2924670">unsafe</span><span class="op" id="2924676">.</span><span class="ident" id="2924677">Pointer</span><span class="op" id="2924684">)</span>&nbsp;<span class="builtintype" id="2924686">int</span><br>
<span class="lineno"></span><span class="keyword" id="2924690">func</span>&nbsp;<span class="ident" id="2924695">call</span><span class="op" id="2924699">(</span><span class="ident" id="2924700">fn</span><span class="op" id="2924702">,</span>&nbsp;<span class="ident" id="2924704">arg</span>&nbsp;<span class="ident" id="2924708">unsafe</span><span class="op" id="2924714">.</span><span class="ident" id="2924715">Pointer</span><span class="op" id="2924722">,</span>&nbsp;<span class="ident" id="2924724">n</span>&nbsp;<span class="builtintype" id="2924726">uint32</span><span class="op" id="2924732">,</span>&nbsp;<span class="ident" id="2924734">retoffset</span>&nbsp;<span class="builtintype" id="2924744">uint32</span><span class="op" id="2924750">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2924753">func</span>&nbsp;<span class="ident" id="2924758">ifaceE2I</span><span class="op" id="2924766">(</span><span class="ident" id="2924767">t</span>&nbsp;<span class="op" id="2924769">*</span><span class="ident" id="2924770">rtype</span><span class="op" id="2924775">,</span>&nbsp;<span class="ident" id="2924777">src</span>&nbsp;<span class="keyword" id="2924781">interface</span><span class="op" id="2924790">{</span><span class="op" id="2924791">}</span><span class="op" id="2924792">,</span>&nbsp;<span class="ident" id="2924794">dst</span>&nbsp;<span class="ident" id="2924798">unsafe</span><span class="op" id="2924804">.</span><span class="ident" id="2924805">Pointer</span><span class="op" id="2924812">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2924815">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2924829">func</span>&nbsp;<span class="ident" id="2924834">memmove</span><span class="op" id="2924841">(</span><span class="ident" id="2924842">adst</span><span class="op" id="2924846">,</span>&nbsp;<span class="ident" id="2924848">asrc</span>&nbsp;<span class="ident" id="2924853">unsafe</span><span class="op" id="2924859">.</span><span class="ident" id="2924860">Pointer</span><span class="op" id="2924867">,</span>&nbsp;<span class="ident" id="2924869">n</span>&nbsp;<span class="builtintype" id="2924871">uintptr</span><span class="op" id="2924878">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2924881">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2924935">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2924996">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2925027">func</span>&nbsp;<span class="ident" id="2925032">escapes</span><span class="op" id="2925039">(</span><span class="ident" id="2925040">x</span>&nbsp;<span class="keyword" id="2925042">interface</span><span class="op" id="2925051">{</span><span class="op" id="2925052">}</span><span class="op" id="2925053">)</span>&nbsp;<span class="op" id="2925055">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2925058">if</span>&nbsp;<span class="ident" id="2925061">dummy</span><span class="op" id="2925066">.</span><span class="ident" id="2925067">b</span>&nbsp;<span class="op" id="2925069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925073">dummy</span><span class="op" id="2925078">.</span><span class="ident" id="2925079">x</span>&nbsp;<span class="op" id="2925081">=</span>&nbsp;<span class="ident" id="2925083">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2925086">}</span><br>
<span class="lineno"></span><span class="op" id="2925088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2925091">var</span>&nbsp;<span class="ident" id="2925095">dummy</span>&nbsp;<span class="keyword" id="2925101">struct</span>&nbsp;<span class="op" id="2925108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925111">b</span>&nbsp;<span class="builtintype" id="2925113">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2925119">x</span>&nbsp;<span class="keyword" id="2925121">interface</span><span class="op" id="2925130">{</span><span class="op" id="2925131">}</span><br>
<span class="lineno"></span><span class="op" id="2925133">}</span>
</div>
</body>
</html>
