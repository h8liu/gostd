<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6219011">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6219067">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6219121">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6219172">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6219231">package</span>&nbsp;<span class="ident" id="6219239">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6219246">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6219298">import</span>&nbsp;<span class="op" id="6219305">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219308">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219317">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219332">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219351">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219358">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6219364">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6219369">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6219372">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6219414">type</span>&nbsp;<span class="ident" id="6219419">File</span>&nbsp;<span class="keyword" id="6219424">struct</span>&nbsp;<span class="op" id="6219431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219434">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219446">ByteOrder</span>&nbsp;<span class="ident" id="6219456">binary</span><span class="op" id="6219462">.</span><span class="ident" id="6219463">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219474">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219484">[</span><span class="op" id="6219485">]</span><span class="ident" id="6219486">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219492">Sections</span>&nbsp;&nbsp;<span class="op" id="6219502">[</span><span class="op" id="6219503">]</span><span class="op" id="6219504">*</span><span class="ident" id="6219505">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219515">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6219524">*</span><span class="ident" id="6219525">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219533">Dysymtab</span>&nbsp;<span class="op" id="6219542">*</span><span class="ident" id="6219543">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219554">closer</span>&nbsp;<span class="ident" id="6219561">io</span><span class="op" id="6219563">.</span><span class="ident" id="6219564">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6219571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6219574">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6219620">type</span>&nbsp;<span class="ident" id="6219625">Load</span>&nbsp;<span class="keyword" id="6219630">interface</span>&nbsp;<span class="op" id="6219640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219643">Raw</span><span class="op" id="6219646">(</span><span class="op" id="6219647">)</span>&nbsp;<span class="op" id="6219649">[</span><span class="op" id="6219650">]</span><span class="builtintype" id="6219651">byte</span><br>
<span class="lineno">35</span><span class="op" id="6219656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6219659">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6219727">type</span>&nbsp;<span class="ident" id="6219732">LoadBytes</span>&nbsp;<span class="op" id="6219742">[</span><span class="op" id="6219743">]</span><span class="builtintype" id="6219744">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6219750">func</span>&nbsp;<span class="op" id="6219755">(</span><span class="ident" id="6219756">b</span>&nbsp;<span class="ident" id="6219758">LoadBytes</span><span class="op" id="6219767">)</span>&nbsp;<span class="ident" id="6219769">Raw</span><span class="op" id="6219772">(</span><span class="op" id="6219773">)</span>&nbsp;<span class="op" id="6219775">[</span><span class="op" id="6219776">]</span><span class="builtintype" id="6219777">byte</span>&nbsp;<span class="op" id="6219782">{</span>&nbsp;<span class="keyword" id="6219784">return</span>&nbsp;<span class="ident" id="6219791">b</span>&nbsp;<span class="op" id="6219793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6219796">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6219881">type</span>&nbsp;<span class="ident" id="6219886">SegmentHeader</span>&nbsp;<span class="keyword" id="6219900">struct</span>&nbsp;<span class="op" id="6219907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219910">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219918">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219927">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6219935">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219943">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6219951">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219959">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219967">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219975">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6219983">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6219991">Offset</span>&nbsp;&nbsp;<span class="ident" id="6219999">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220007">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6220015">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220023">Maxprot</span>&nbsp;<span class="builtintype" id="6220031">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220039">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6220047">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220055">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6220063">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220071">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6220079">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6220086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6220089">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6220161">type</span>&nbsp;<span class="ident" id="6220166">Segment</span>&nbsp;<span class="keyword" id="6220174">struct</span>&nbsp;<span class="op" id="6220181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220184">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220195">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220211">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220249">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220289">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220324">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220372">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6220422">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220446">io</span><span class="op" id="6220448">.</span><span class="ident" id="6220449">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220459">sr</span>&nbsp;<span class="op" id="6220462">*</span><span class="ident" id="6220463">io</span><span class="op" id="6220465">.</span><span class="ident" id="6220466">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6220480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6220483">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6220538">func</span>&nbsp;<span class="op" id="6220543">(</span><span class="ident" id="6220544">s</span>&nbsp;<span class="op" id="6220546">*</span><span class="ident" id="6220547">Segment</span><span class="op" id="6220554">)</span>&nbsp;<span class="ident" id="6220556">Data</span><span class="op" id="6220560">(</span><span class="op" id="6220561">)</span>&nbsp;<span class="op" id="6220563">(</span><span class="op" id="6220564">[</span><span class="op" id="6220565">]</span><span class="builtintype" id="6220566">byte</span><span class="op" id="6220570">,</span>&nbsp;<span class="builtintype" id="6220572">error</span><span class="op" id="6220577">)</span>&nbsp;<span class="op" id="6220579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220582">dat</span>&nbsp;<span class="op" id="6220586">:=</span>&nbsp;<span class="builtinfunc" id="6220589">make</span><span class="op" id="6220593">(</span><span class="op" id="6220594">[</span><span class="op" id="6220595">]</span><span class="builtintype" id="6220596">byte</span><span class="op" id="6220600">,</span>&nbsp;<span class="ident" id="6220602">s</span><span class="op" id="6220603">.</span><span class="ident" id="6220604">sr</span><span class="op" id="6220606">.</span><span class="ident" id="6220607">Size</span><span class="op" id="6220611">(</span><span class="op" id="6220612">)</span><span class="op" id="6220613">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220616">n</span><span class="op" id="6220617">,</span>&nbsp;<span class="ident" id="6220619">err</span>&nbsp;<span class="op" id="6220623">:=</span>&nbsp;<span class="ident" id="6220626">s</span><span class="op" id="6220627">.</span><span class="ident" id="6220628">sr</span><span class="op" id="6220630">.</span><span class="ident" id="6220631">ReadAt</span><span class="op" id="6220637">(</span><span class="ident" id="6220638">dat</span><span class="op" id="6220641">,</span>&nbsp;<span class="num" id="6220643">0</span><span class="op" id="6220644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6220647">if</span>&nbsp;<span class="ident" id="6220650">n</span>&nbsp;<span class="op" id="6220652">==</span>&nbsp;<span class="builtinfunc" id="6220655">len</span><span class="op" id="6220658">(</span><span class="ident" id="6220659">dat</span><span class="op" id="6220662">)</span>&nbsp;<span class="op" id="6220664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220668">err</span>&nbsp;<span class="op" id="6220672">=</span>&nbsp;<span class="ident" id="6220674">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6220679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6220682">return</span>&nbsp;<span class="ident" id="6220689">dat</span><span class="op" id="6220692">[</span><span class="num" id="6220693">0</span><span class="op" id="6220694">:</span><span class="ident" id="6220695">n</span><span class="op" id="6220696">]</span><span class="op" id="6220697">,</span>&nbsp;<span class="ident" id="6220699">err</span><br>
<span class="lineno">80</span><span class="op" id="6220703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6220706">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6220760">func</span>&nbsp;<span class="op" id="6220765">(</span><span class="ident" id="6220766">s</span>&nbsp;<span class="op" id="6220768">*</span><span class="ident" id="6220769">Segment</span><span class="op" id="6220776">)</span>&nbsp;<span class="ident" id="6220778">Open</span><span class="op" id="6220782">(</span><span class="op" id="6220783">)</span>&nbsp;<span class="ident" id="6220785">io</span><span class="op" id="6220787">.</span><span class="ident" id="6220788">ReadSeeker</span>&nbsp;<span class="op" id="6220799">{</span>&nbsp;<span class="keyword" id="6220801">return</span>&nbsp;<span class="ident" id="6220808">io</span><span class="op" id="6220810">.</span><span class="ident" id="6220811">NewSectionReader</span><span class="op" id="6220827">(</span><span class="ident" id="6220828">s</span><span class="op" id="6220829">.</span><span class="ident" id="6220830">sr</span><span class="op" id="6220832">,</span>&nbsp;<span class="num" id="6220834">0</span><span class="op" id="6220835">,</span>&nbsp;<span class="num" id="6220837">1</span><span class="op" id="6220838">&lt;&lt;</span><span class="num" id="6220840">63</span><span class="op" id="6220842">-</span><span class="num" id="6220843">1</span><span class="op" id="6220844">)</span>&nbsp;<span class="op" id="6220846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6220849">type</span>&nbsp;<span class="ident" id="6220854">SectionHeader</span>&nbsp;<span class="keyword" id="6220868">struct</span>&nbsp;<span class="op" id="6220875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220878">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6220885">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220893">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6220900">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220908">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6220915">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220923">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6220930">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220938">Offset</span>&nbsp;<span class="builtintype" id="6220945">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220953">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6220960">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220968">Reloff</span>&nbsp;<span class="builtintype" id="6220975">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220983">Nreloc</span>&nbsp;<span class="builtintype" id="6220990">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6220998">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6221005">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6221012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6221015">type</span>&nbsp;<span class="ident" id="6221020">Section</span>&nbsp;<span class="keyword" id="6221028">struct</span>&nbsp;<span class="op" id="6221035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221038">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221054">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221092">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221132">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221167">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221215">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6221265">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221289">io</span><span class="op" id="6221291">.</span><span class="ident" id="6221292">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221302">sr</span>&nbsp;<span class="op" id="6221305">*</span><span class="ident" id="6221306">io</span><span class="op" id="6221308">.</span><span class="ident" id="6221309">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6221323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6221326">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6221388">func</span>&nbsp;<span class="op" id="6221393">(</span><span class="ident" id="6221394">s</span>&nbsp;<span class="op" id="6221396">*</span><span class="ident" id="6221397">Section</span><span class="op" id="6221404">)</span>&nbsp;<span class="ident" id="6221406">Data</span><span class="op" id="6221410">(</span><span class="op" id="6221411">)</span>&nbsp;<span class="op" id="6221413">(</span><span class="op" id="6221414">[</span><span class="op" id="6221415">]</span><span class="builtintype" id="6221416">byte</span><span class="op" id="6221420">,</span>&nbsp;<span class="builtintype" id="6221422">error</span><span class="op" id="6221427">)</span>&nbsp;<span class="op" id="6221429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221432">dat</span>&nbsp;<span class="op" id="6221436">:=</span>&nbsp;<span class="builtinfunc" id="6221439">make</span><span class="op" id="6221443">(</span><span class="op" id="6221444">[</span><span class="op" id="6221445">]</span><span class="builtintype" id="6221446">byte</span><span class="op" id="6221450">,</span>&nbsp;<span class="ident" id="6221452">s</span><span class="op" id="6221453">.</span><span class="ident" id="6221454">sr</span><span class="op" id="6221456">.</span><span class="ident" id="6221457">Size</span><span class="op" id="6221461">(</span><span class="op" id="6221462">)</span><span class="op" id="6221463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221466">n</span><span class="op" id="6221467">,</span>&nbsp;<span class="ident" id="6221469">err</span>&nbsp;<span class="op" id="6221473">:=</span>&nbsp;<span class="ident" id="6221476">s</span><span class="op" id="6221477">.</span><span class="ident" id="6221478">sr</span><span class="op" id="6221480">.</span><span class="ident" id="6221481">ReadAt</span><span class="op" id="6221487">(</span><span class="ident" id="6221488">dat</span><span class="op" id="6221491">,</span>&nbsp;<span class="num" id="6221493">0</span><span class="op" id="6221494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6221497">if</span>&nbsp;<span class="ident" id="6221500">n</span>&nbsp;<span class="op" id="6221502">==</span>&nbsp;<span class="builtinfunc" id="6221505">len</span><span class="op" id="6221508">(</span><span class="ident" id="6221509">dat</span><span class="op" id="6221512">)</span>&nbsp;<span class="op" id="6221514">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221518">err</span>&nbsp;<span class="op" id="6221522">=</span>&nbsp;<span class="ident" id="6221524">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6221529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6221532">return</span>&nbsp;<span class="ident" id="6221539">dat</span><span class="op" id="6221542">[</span><span class="num" id="6221543">0</span><span class="op" id="6221544">:</span><span class="ident" id="6221545">n</span><span class="op" id="6221546">]</span><span class="op" id="6221547">,</span>&nbsp;<span class="ident" id="6221549">err</span><br>
<span class="lineno"></span><span class="op" id="6221553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6221556">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6221617">func</span>&nbsp;<span class="op" id="6221622">(</span><span class="ident" id="6221623">s</span>&nbsp;<span class="op" id="6221625">*</span><span class="ident" id="6221626">Section</span><span class="op" id="6221633">)</span>&nbsp;<span class="ident" id="6221635">Open</span><span class="op" id="6221639">(</span><span class="op" id="6221640">)</span>&nbsp;<span class="ident" id="6221642">io</span><span class="op" id="6221644">.</span><span class="ident" id="6221645">ReadSeeker</span>&nbsp;<span class="op" id="6221656">{</span>&nbsp;<span class="keyword" id="6221658">return</span>&nbsp;<span class="ident" id="6221665">io</span><span class="op" id="6221667">.</span><span class="ident" id="6221668">NewSectionReader</span><span class="op" id="6221684">(</span><span class="ident" id="6221685">s</span><span class="op" id="6221686">.</span><span class="ident" id="6221687">sr</span><span class="op" id="6221689">,</span>&nbsp;<span class="num" id="6221691">0</span><span class="op" id="6221692">,</span>&nbsp;<span class="num" id="6221694">1</span><span class="op" id="6221695">&lt;&lt;</span><span class="num" id="6221697">63</span><span class="op" id="6221699">-</span><span class="num" id="6221700">1</span><span class="op" id="6221701">)</span>&nbsp;<span class="op" id="6221703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6221706">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6221767">type</span>&nbsp;<span class="ident" id="6221772">Dylib</span>&nbsp;<span class="keyword" id="6221778">struct</span>&nbsp;<span class="op" id="6221785">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221788">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221799">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6221814">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221822">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6221837">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221845">CurrentVersion</span>&nbsp;<span class="builtintype" id="6221860">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221868">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6221883">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6221890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6221893">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6221947">type</span>&nbsp;<span class="ident" id="6221952">Symtab</span>&nbsp;<span class="keyword" id="6221959">struct</span>&nbsp;<span class="op" id="6221966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221969">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221980">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6221991">Syms</span>&nbsp;<span class="op" id="6221996">[</span><span class="op" id="6221997">]</span><span class="ident" id="6221998">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6222005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6222008">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6222072">type</span>&nbsp;<span class="ident" id="6222077">Dysymtab</span>&nbsp;<span class="keyword" id="6222086">struct</span>&nbsp;<span class="op" id="6222093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222096">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222107">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222120">IndirectSyms</span>&nbsp;<span class="op" id="6222133">[</span><span class="op" id="6222134">]</span><span class="builtintype" id="6222135">uint32</span>&nbsp;<span class="comment" id="6222142">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6222170">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6222173">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6222198">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6222261">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6222312">type</span>&nbsp;<span class="ident" id="6222317">FormatError</span>&nbsp;<span class="keyword" id="6222329">struct</span>&nbsp;<span class="op" id="6222336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222339">off</span>&nbsp;<span class="ident" id="6222343">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222350">msg</span>&nbsp;<span class="builtintype" id="6222354">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222362">val</span>&nbsp;<span class="keyword" id="6222366">interface</span><span class="op" id="6222375">{</span><span class="op" id="6222376">}</span><br>
<span class="lineno"></span><span class="op" id="6222378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6222381">func</span>&nbsp;<span class="op" id="6222386">(</span><span class="ident" id="6222387">e</span>&nbsp;<span class="op" id="6222389">*</span><span class="ident" id="6222390">FormatError</span><span class="op" id="6222401">)</span>&nbsp;<span class="ident" id="6222403">Error</span><span class="op" id="6222408">(</span><span class="op" id="6222409">)</span>&nbsp;<span class="builtintype" id="6222411">string</span>&nbsp;<span class="op" id="6222418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222421">msg</span>&nbsp;<span class="op" id="6222425">:=</span>&nbsp;<span class="ident" id="6222428">e</span><span class="op" id="6222429">.</span><span class="ident" id="6222430">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222435">if</span>&nbsp;<span class="ident" id="6222438">e</span><span class="op" id="6222439">.</span><span class="ident" id="6222440">val</span>&nbsp;<span class="op" id="6222444">!=</span>&nbsp;<span class="ident" id="6222447">nil</span>&nbsp;<span class="op" id="6222451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222455">msg</span>&nbsp;<span class="op" id="6222459">+=</span>&nbsp;<span class="ident" id="6222462">fmt</span><span class="op" id="6222465">.</span><span class="ident" id="6222466">Sprintf</span><span class="op" id="6222473">(</span><span class="string" id="6222474">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6222481">,</span>&nbsp;<span class="ident" id="6222483">e</span><span class="op" id="6222484">.</span><span class="ident" id="6222485">val</span><span class="op" id="6222488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6222491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222494">msg</span>&nbsp;<span class="op" id="6222498">+=</span>&nbsp;<span class="ident" id="6222501">fmt</span><span class="op" id="6222504">.</span><span class="ident" id="6222505">Sprintf</span><span class="op" id="6222512">(</span><span class="string" id="6222513">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6222537">,</span>&nbsp;<span class="ident" id="6222539">e</span><span class="op" id="6222540">.</span><span class="ident" id="6222541">off</span><span class="op" id="6222544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222547">return</span>&nbsp;<span class="ident" id="6222554">msg</span><br>
<span class="lineno">165</span><span class="op" id="6222558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6222561">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6222648">func</span>&nbsp;<span class="ident" id="6222653">Open</span><span class="op" id="6222657">(</span><span class="ident" id="6222658">name</span>&nbsp;<span class="builtintype" id="6222663">string</span><span class="op" id="6222669">)</span>&nbsp;<span class="op" id="6222671">(</span><span class="op" id="6222672">*</span><span class="ident" id="6222673">File</span><span class="op" id="6222677">,</span>&nbsp;<span class="builtintype" id="6222679">error</span><span class="op" id="6222684">)</span>&nbsp;<span class="op" id="6222686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222689">f</span><span class="op" id="6222690">,</span>&nbsp;<span class="ident" id="6222692">err</span>&nbsp;<span class="op" id="6222696">:=</span>&nbsp;<span class="ident" id="6222699">os</span><span class="op" id="6222701">.</span><span class="ident" id="6222702">Open</span><span class="op" id="6222706">(</span><span class="ident" id="6222707">name</span><span class="op" id="6222711">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222714">if</span>&nbsp;<span class="ident" id="6222717">err</span>&nbsp;<span class="op" id="6222721">!=</span>&nbsp;<span class="ident" id="6222724">nil</span>&nbsp;<span class="op" id="6222728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222732">return</span>&nbsp;<span class="ident" id="6222739">nil</span><span class="op" id="6222742">,</span>&nbsp;<span class="ident" id="6222744">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6222749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222752">ff</span><span class="op" id="6222754">,</span>&nbsp;<span class="ident" id="6222756">err</span>&nbsp;<span class="op" id="6222760">:=</span>&nbsp;<span class="ident" id="6222763">NewFile</span><span class="op" id="6222770">(</span><span class="ident" id="6222771">f</span><span class="op" id="6222772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222775">if</span>&nbsp;<span class="ident" id="6222778">err</span>&nbsp;<span class="op" id="6222782">!=</span>&nbsp;<span class="ident" id="6222785">nil</span>&nbsp;<span class="op" id="6222789">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222793">f</span><span class="op" id="6222794">.</span><span class="ident" id="6222795">Close</span><span class="op" id="6222800">(</span><span class="op" id="6222801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222805">return</span>&nbsp;<span class="ident" id="6222812">nil</span><span class="op" id="6222815">,</span>&nbsp;<span class="ident" id="6222817">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6222822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6222825">ff</span><span class="op" id="6222827">.</span><span class="ident" id="6222828">closer</span>&nbsp;<span class="op" id="6222835">=</span>&nbsp;<span class="ident" id="6222837">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6222840">return</span>&nbsp;<span class="ident" id="6222847">ff</span><span class="op" id="6222849">,</span>&nbsp;<span class="ident" id="6222851">nil</span><br>
<span class="lineno">180</span><span class="op" id="6222855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6222858">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6222884">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6222951">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6222975">func</span>&nbsp;<span class="op" id="6222980">(</span><span class="ident" id="6222981">f</span>&nbsp;<span class="op" id="6222983">*</span><span class="ident" id="6222984">File</span><span class="op" id="6222988">)</span>&nbsp;<span class="ident" id="6222990">Close</span><span class="op" id="6222995">(</span><span class="op" id="6222996">)</span>&nbsp;<span class="builtintype" id="6222998">error</span>&nbsp;<span class="op" id="6223004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223007">var</span>&nbsp;<span class="ident" id="6223011">err</span>&nbsp;<span class="builtintype" id="6223015">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223022">if</span>&nbsp;<span class="ident" id="6223025">f</span><span class="op" id="6223026">.</span><span class="ident" id="6223027">closer</span>&nbsp;<span class="op" id="6223034">!=</span>&nbsp;<span class="ident" id="6223037">nil</span>&nbsp;<span class="op" id="6223041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223045">err</span>&nbsp;<span class="op" id="6223049">=</span>&nbsp;<span class="ident" id="6223051">f</span><span class="op" id="6223052">.</span><span class="ident" id="6223053">closer</span><span class="op" id="6223059">.</span><span class="ident" id="6223060">Close</span><span class="op" id="6223065">(</span><span class="op" id="6223066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223070">f</span><span class="op" id="6223071">.</span><span class="ident" id="6223072">closer</span>&nbsp;<span class="op" id="6223079">=</span>&nbsp;<span class="ident" id="6223081">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223089">return</span>&nbsp;<span class="ident" id="6223096">err</span><br>
<span class="lineno"></span><span class="op" id="6223100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6223103">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6223188">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6223261">func</span>&nbsp;<span class="ident" id="6223266">NewFile</span><span class="op" id="6223273">(</span><span class="ident" id="6223274">r</span>&nbsp;<span class="ident" id="6223276">io</span><span class="op" id="6223278">.</span><span class="ident" id="6223279">ReaderAt</span><span class="op" id="6223287">)</span>&nbsp;<span class="op" id="6223289">(</span><span class="op" id="6223290">*</span><span class="ident" id="6223291">File</span><span class="op" id="6223295">,</span>&nbsp;<span class="builtintype" id="6223297">error</span><span class="op" id="6223302">)</span>&nbsp;<span class="op" id="6223304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223307">f</span>&nbsp;<span class="op" id="6223309">:=</span>&nbsp;<span class="builtinfunc" id="6223312">new</span><span class="op" id="6223315">(</span><span class="ident" id="6223316">File</span><span class="op" id="6223320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223323">sr</span>&nbsp;<span class="op" id="6223326">:=</span>&nbsp;<span class="ident" id="6223329">io</span><span class="op" id="6223331">.</span><span class="ident" id="6223332">NewSectionReader</span><span class="op" id="6223348">(</span><span class="ident" id="6223349">r</span><span class="op" id="6223350">,</span>&nbsp;<span class="num" id="6223352">0</span><span class="op" id="6223353">,</span>&nbsp;<span class="num" id="6223355">1</span><span class="op" id="6223356">&lt;&lt;</span><span class="num" id="6223358">63</span><span class="op" id="6223360">-</span><span class="num" id="6223361">1</span><span class="op" id="6223362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6223366">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6223428">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223483">var</span>&nbsp;<span class="ident" id="6223487">ident</span>&nbsp;<span class="op" id="6223493">[</span><span class="num" id="6223494">4</span><span class="op" id="6223495">]</span><span class="builtintype" id="6223496">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223502">if</span>&nbsp;<span class="ident" id="6223505">_</span><span class="op" id="6223506">,</span>&nbsp;<span class="ident" id="6223508">err</span>&nbsp;<span class="op" id="6223512">:=</span>&nbsp;<span class="ident" id="6223515">r</span><span class="op" id="6223516">.</span><span class="ident" id="6223517">ReadAt</span><span class="op" id="6223523">(</span><span class="ident" id="6223524">ident</span><span class="op" id="6223529">[</span><span class="num" id="6223530">0</span><span class="op" id="6223531">:</span><span class="op" id="6223532">]</span><span class="op" id="6223533">,</span>&nbsp;<span class="num" id="6223535">0</span><span class="op" id="6223536">)</span><span class="op" id="6223537">;</span>&nbsp;<span class="ident" id="6223539">err</span>&nbsp;<span class="op" id="6223543">!=</span>&nbsp;<span class="ident" id="6223546">nil</span>&nbsp;<span class="op" id="6223550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223554">return</span>&nbsp;<span class="ident" id="6223561">nil</span><span class="op" id="6223564">,</span>&nbsp;<span class="ident" id="6223566">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223574">be</span>&nbsp;<span class="op" id="6223577">:=</span>&nbsp;<span class="ident" id="6223580">binary</span><span class="op" id="6223586">.</span><span class="ident" id="6223587">BigEndian</span><span class="op" id="6223596">.</span><span class="ident" id="6223597">Uint32</span><span class="op" id="6223603">(</span><span class="ident" id="6223604">ident</span><span class="op" id="6223609">[</span><span class="num" id="6223610">0</span><span class="op" id="6223611">:</span><span class="op" id="6223612">]</span><span class="op" id="6223613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223616">le</span>&nbsp;<span class="op" id="6223619">:=</span>&nbsp;<span class="ident" id="6223622">binary</span><span class="op" id="6223628">.</span><span class="ident" id="6223629">LittleEndian</span><span class="op" id="6223641">.</span><span class="ident" id="6223642">Uint32</span><span class="op" id="6223648">(</span><span class="ident" id="6223649">ident</span><span class="op" id="6223654">[</span><span class="num" id="6223655">0</span><span class="op" id="6223656">:</span><span class="op" id="6223657">]</span><span class="op" id="6223658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223661">switch</span>&nbsp;<span class="ident" id="6223668">Magic32</span>&nbsp;<span class="op" id="6223676">&amp;^</span>&nbsp;<span class="num" id="6223679">1</span>&nbsp;<span class="op" id="6223681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223684">case</span>&nbsp;<span class="ident" id="6223689">be</span>&nbsp;<span class="op" id="6223692">&amp;^</span>&nbsp;<span class="num" id="6223695">1</span><span class="op" id="6223696">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223700">f</span><span class="op" id="6223701">.</span><span class="ident" id="6223702">ByteOrder</span>&nbsp;<span class="op" id="6223712">=</span>&nbsp;<span class="ident" id="6223714">binary</span><span class="op" id="6223720">.</span><span class="ident" id="6223721">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223733">f</span><span class="op" id="6223734">.</span><span class="ident" id="6223735">Magic</span>&nbsp;<span class="op" id="6223741">=</span>&nbsp;<span class="ident" id="6223743">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223747">case</span>&nbsp;<span class="ident" id="6223752">le</span>&nbsp;<span class="op" id="6223755">&amp;^</span>&nbsp;<span class="num" id="6223758">1</span><span class="op" id="6223759">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223763">f</span><span class="op" id="6223764">.</span><span class="ident" id="6223765">ByteOrder</span>&nbsp;<span class="op" id="6223775">=</span>&nbsp;<span class="ident" id="6223777">binary</span><span class="op" id="6223783">.</span><span class="ident" id="6223784">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6223799">f</span><span class="op" id="6223800">.</span><span class="ident" id="6223801">Magic</span>&nbsp;<span class="op" id="6223807">=</span>&nbsp;<span class="ident" id="6223809">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223813">default</span><span class="op" id="6223820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223824">return</span>&nbsp;<span class="ident" id="6223831">nil</span><span class="op" id="6223834">,</span>&nbsp;<span class="op" id="6223836">&amp;</span><span class="ident" id="6223837">FormatError</span><span class="op" id="6223848">{</span><span class="num" id="6223849">0</span><span class="op" id="6223850">,</span>&nbsp;<span class="string" id="6223852">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6223874">,</span>&nbsp;<span class="ident" id="6223876">nil</span><span class="op" id="6223879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6223882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6223886">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223915">if</span>&nbsp;<span class="ident" id="6223918">err</span>&nbsp;<span class="op" id="6223922">:=</span>&nbsp;<span class="ident" id="6223925">binary</span><span class="op" id="6223931">.</span><span class="ident" id="6223932">Read</span><span class="op" id="6223936">(</span><span class="ident" id="6223937">sr</span><span class="op" id="6223939">,</span>&nbsp;<span class="ident" id="6223941">f</span><span class="op" id="6223942">.</span><span class="ident" id="6223943">ByteOrder</span><span class="op" id="6223952">,</span>&nbsp;<span class="op" id="6223954">&amp;</span><span class="ident" id="6223955">f</span><span class="op" id="6223956">.</span><span class="ident" id="6223957">FileHeader</span><span class="op" id="6223967">)</span><span class="op" id="6223968">;</span>&nbsp;<span class="ident" id="6223970">err</span>&nbsp;<span class="op" id="6223974">!=</span>&nbsp;<span class="ident" id="6223977">nil</span>&nbsp;<span class="op" id="6223981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6223985">return</span>&nbsp;<span class="ident" id="6223992">nil</span><span class="op" id="6223995">,</span>&nbsp;<span class="ident" id="6223997">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6224006">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224030">offset</span>&nbsp;<span class="op" id="6224037">:=</span>&nbsp;<span class="ident" id="6224040">int64</span><span class="op" id="6224045">(</span><span class="ident" id="6224046">fileHeaderSize32</span><span class="op" id="6224062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224065">if</span>&nbsp;<span class="ident" id="6224068">f</span><span class="op" id="6224069">.</span><span class="ident" id="6224070">Magic</span>&nbsp;<span class="op" id="6224076">==</span>&nbsp;<span class="ident" id="6224079">Magic64</span>&nbsp;<span class="op" id="6224087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224091">offset</span>&nbsp;<span class="op" id="6224098">=</span>&nbsp;<span class="ident" id="6224100">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224121">dat</span>&nbsp;<span class="op" id="6224125">:=</span>&nbsp;<span class="builtinfunc" id="6224128">make</span><span class="op" id="6224132">(</span><span class="op" id="6224133">[</span><span class="op" id="6224134">]</span><span class="builtintype" id="6224135">byte</span><span class="op" id="6224139">,</span>&nbsp;<span class="ident" id="6224141">f</span><span class="op" id="6224142">.</span><span class="ident" id="6224143">Cmdsz</span><span class="op" id="6224148">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224151">if</span>&nbsp;<span class="ident" id="6224154">_</span><span class="op" id="6224155">,</span>&nbsp;<span class="ident" id="6224157">err</span>&nbsp;<span class="op" id="6224161">:=</span>&nbsp;<span class="ident" id="6224164">r</span><span class="op" id="6224165">.</span><span class="ident" id="6224166">ReadAt</span><span class="op" id="6224172">(</span><span class="ident" id="6224173">dat</span><span class="op" id="6224176">,</span>&nbsp;<span class="ident" id="6224178">offset</span><span class="op" id="6224184">)</span><span class="op" id="6224185">;</span>&nbsp;<span class="ident" id="6224187">err</span>&nbsp;<span class="op" id="6224191">!=</span>&nbsp;<span class="ident" id="6224194">nil</span>&nbsp;<span class="op" id="6224198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224202">return</span>&nbsp;<span class="ident" id="6224209">nil</span><span class="op" id="6224212">,</span>&nbsp;<span class="ident" id="6224214">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224222">f</span><span class="op" id="6224223">.</span><span class="ident" id="6224224">Loads</span>&nbsp;<span class="op" id="6224230">=</span>&nbsp;<span class="builtinfunc" id="6224232">make</span><span class="op" id="6224236">(</span><span class="op" id="6224237">[</span><span class="op" id="6224238">]</span><span class="ident" id="6224239">Load</span><span class="op" id="6224243">,</span>&nbsp;<span class="ident" id="6224245">f</span><span class="op" id="6224246">.</span><span class="ident" id="6224247">Ncmd</span><span class="op" id="6224251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224254">bo</span>&nbsp;<span class="op" id="6224257">:=</span>&nbsp;<span class="ident" id="6224260">f</span><span class="op" id="6224261">.</span><span class="ident" id="6224262">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224273">for</span>&nbsp;<span class="ident" id="6224277">i</span>&nbsp;<span class="op" id="6224279">:=</span>&nbsp;<span class="keyword" id="6224282">range</span>&nbsp;<span class="ident" id="6224288">f</span><span class="op" id="6224289">.</span><span class="ident" id="6224290">Loads</span>&nbsp;<span class="op" id="6224296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6224300">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224362">if</span>&nbsp;<span class="builtinfunc" id="6224365">len</span><span class="op" id="6224368">(</span><span class="ident" id="6224369">dat</span><span class="op" id="6224372">)</span>&nbsp;<span class="op" id="6224374">&lt;</span>&nbsp;<span class="num" id="6224376">8</span>&nbsp;<span class="op" id="6224378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224383">return</span>&nbsp;<span class="ident" id="6224390">nil</span><span class="op" id="6224393">,</span>&nbsp;<span class="op" id="6224395">&amp;</span><span class="ident" id="6224396">FormatError</span><span class="op" id="6224407">{</span><span class="ident" id="6224408">offset</span><span class="op" id="6224414">,</span>&nbsp;<span class="string" id="6224416">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6224441">,</span>&nbsp;<span class="ident" id="6224443">nil</span><span class="op" id="6224446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224450">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224454">cmd</span><span class="op" id="6224457">,</span>&nbsp;<span class="ident" id="6224459">siz</span>&nbsp;<span class="op" id="6224463">:=</span>&nbsp;<span class="ident" id="6224466">LoadCmd</span><span class="op" id="6224473">(</span><span class="ident" id="6224474">bo</span><span class="op" id="6224476">.</span><span class="ident" id="6224477">Uint32</span><span class="op" id="6224483">(</span><span class="ident" id="6224484">dat</span><span class="op" id="6224487">[</span><span class="num" id="6224488">0</span><span class="op" id="6224489">:</span><span class="num" id="6224490">4</span><span class="op" id="6224491">]</span><span class="op" id="6224492">)</span><span class="op" id="6224493">)</span><span class="op" id="6224494">,</span>&nbsp;<span class="ident" id="6224496">bo</span><span class="op" id="6224498">.</span><span class="ident" id="6224499">Uint32</span><span class="op" id="6224505">(</span><span class="ident" id="6224506">dat</span><span class="op" id="6224509">[</span><span class="num" id="6224510">4</span><span class="op" id="6224511">:</span><span class="num" id="6224512">8</span><span class="op" id="6224513">]</span><span class="op" id="6224514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224518">if</span>&nbsp;<span class="ident" id="6224521">siz</span>&nbsp;<span class="op" id="6224525">&lt;</span>&nbsp;<span class="num" id="6224527">8</span>&nbsp;<span class="op" id="6224529">||</span>&nbsp;<span class="ident" id="6224532">siz</span>&nbsp;<span class="op" id="6224536">&gt;</span>&nbsp;<span class="builtintype" id="6224538">uint32</span><span class="op" id="6224544">(</span><span class="builtinfunc" id="6224545">len</span><span class="op" id="6224548">(</span><span class="ident" id="6224549">dat</span><span class="op" id="6224552">)</span><span class="op" id="6224553">)</span>&nbsp;<span class="op" id="6224555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224560">return</span>&nbsp;<span class="ident" id="6224567">nil</span><span class="op" id="6224570">,</span>&nbsp;<span class="op" id="6224572">&amp;</span><span class="ident" id="6224573">FormatError</span><span class="op" id="6224584">{</span><span class="ident" id="6224585">offset</span><span class="op" id="6224591">,</span>&nbsp;<span class="string" id="6224593">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6224621">,</span>&nbsp;<span class="ident" id="6224623">nil</span><span class="op" id="6224626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224634">var</span>&nbsp;<span class="ident" id="6224638">cmddat</span>&nbsp;<span class="op" id="6224645">[</span><span class="op" id="6224646">]</span><span class="builtintype" id="6224647">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224654">cmddat</span><span class="op" id="6224660">,</span>&nbsp;<span class="ident" id="6224662">dat</span>&nbsp;<span class="op" id="6224666">=</span>&nbsp;<span class="ident" id="6224668">dat</span><span class="op" id="6224671">[</span><span class="num" id="6224672">0</span><span class="op" id="6224673">:</span><span class="ident" id="6224674">siz</span><span class="op" id="6224677">]</span><span class="op" id="6224678">,</span>&nbsp;<span class="ident" id="6224680">dat</span><span class="op" id="6224683">[</span><span class="ident" id="6224684">siz</span><span class="op" id="6224687">:</span><span class="op" id="6224688">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224692">offset</span>&nbsp;<span class="op" id="6224699">+=</span>&nbsp;<span class="ident" id="6224702">int64</span><span class="op" id="6224707">(</span><span class="ident" id="6224708">siz</span><span class="op" id="6224711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224715">var</span>&nbsp;<span class="ident" id="6224719">s</span>&nbsp;<span class="op" id="6224721">*</span><span class="ident" id="6224722">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224732">switch</span>&nbsp;<span class="ident" id="6224739">cmd</span>&nbsp;<span class="op" id="6224743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224747">default</span><span class="op" id="6224754">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224759">f</span><span class="op" id="6224760">.</span><span class="ident" id="6224761">Loads</span><span class="op" id="6224766">[</span><span class="ident" id="6224767">i</span><span class="op" id="6224768">]</span>&nbsp;<span class="op" id="6224770">=</span>&nbsp;<span class="ident" id="6224772">LoadBytes</span><span class="op" id="6224781">(</span><span class="ident" id="6224782">cmddat</span><span class="op" id="6224788">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224793">case</span>&nbsp;<span class="ident" id="6224798">LoadCmdDylib</span><span class="op" id="6224810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224815">var</span>&nbsp;<span class="ident" id="6224819">hdr</span>&nbsp;<span class="ident" id="6224823">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224835">b</span>&nbsp;<span class="op" id="6224837">:=</span>&nbsp;<span class="ident" id="6224840">bytes</span><span class="op" id="6224845">.</span><span class="ident" id="6224846">NewReader</span><span class="op" id="6224855">(</span><span class="ident" id="6224856">cmddat</span><span class="op" id="6224862">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224867">if</span>&nbsp;<span class="ident" id="6224870">err</span>&nbsp;<span class="op" id="6224874">:=</span>&nbsp;<span class="ident" id="6224877">binary</span><span class="op" id="6224883">.</span><span class="ident" id="6224884">Read</span><span class="op" id="6224888">(</span><span class="ident" id="6224889">b</span><span class="op" id="6224890">,</span>&nbsp;<span class="ident" id="6224892">bo</span><span class="op" id="6224894">,</span>&nbsp;<span class="op" id="6224896">&amp;</span><span class="ident" id="6224897">hdr</span><span class="op" id="6224900">)</span><span class="op" id="6224901">;</span>&nbsp;<span class="ident" id="6224903">err</span>&nbsp;<span class="op" id="6224907">!=</span>&nbsp;<span class="ident" id="6224910">nil</span>&nbsp;<span class="op" id="6224914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224920">return</span>&nbsp;<span class="ident" id="6224927">nil</span><span class="op" id="6224930">,</span>&nbsp;<span class="ident" id="6224932">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6224939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6224944">l</span>&nbsp;<span class="op" id="6224946">:=</span>&nbsp;<span class="builtinfunc" id="6224949">new</span><span class="op" id="6224952">(</span><span class="ident" id="6224953">Dylib</span><span class="op" id="6224958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6224963">if</span>&nbsp;<span class="ident" id="6224966">hdr</span><span class="op" id="6224969">.</span><span class="ident" id="6224970">Name</span>&nbsp;<span class="op" id="6224975">&gt;=</span>&nbsp;<span class="builtintype" id="6224978">uint32</span><span class="op" id="6224984">(</span><span class="builtinfunc" id="6224985">len</span><span class="op" id="6224988">(</span><span class="ident" id="6224989">cmddat</span><span class="op" id="6224995">)</span><span class="op" id="6224996">)</span>&nbsp;<span class="op" id="6224998">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225004">return</span>&nbsp;<span class="ident" id="6225011">nil</span><span class="op" id="6225014">,</span>&nbsp;<span class="op" id="6225016">&amp;</span><span class="ident" id="6225017">FormatError</span><span class="op" id="6225028">{</span><span class="ident" id="6225029">offset</span><span class="op" id="6225035">,</span>&nbsp;<span class="string" id="6225037">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6225078">,</span>&nbsp;<span class="ident" id="6225080">hdr</span><span class="op" id="6225083">.</span><span class="ident" id="6225084">Name</span><span class="op" id="6225088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225098">l</span><span class="op" id="6225099">.</span><span class="ident" id="6225100">Name</span>&nbsp;<span class="op" id="6225105">=</span>&nbsp;<span class="ident" id="6225107">cstring</span><span class="op" id="6225114">(</span><span class="ident" id="6225115">cmddat</span><span class="op" id="6225121">[</span><span class="ident" id="6225122">hdr</span><span class="op" id="6225125">.</span><span class="ident" id="6225126">Name</span><span class="op" id="6225130">:</span><span class="op" id="6225131">]</span><span class="op" id="6225132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225137">l</span><span class="op" id="6225138">.</span><span class="ident" id="6225139">Time</span>&nbsp;<span class="op" id="6225144">=</span>&nbsp;<span class="ident" id="6225146">hdr</span><span class="op" id="6225149">.</span><span class="ident" id="6225150">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225158">l</span><span class="op" id="6225159">.</span><span class="ident" id="6225160">CurrentVersion</span>&nbsp;<span class="op" id="6225175">=</span>&nbsp;<span class="ident" id="6225177">hdr</span><span class="op" id="6225180">.</span><span class="ident" id="6225181">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225199">l</span><span class="op" id="6225200">.</span><span class="ident" id="6225201">CompatVersion</span>&nbsp;<span class="op" id="6225215">=</span>&nbsp;<span class="ident" id="6225217">hdr</span><span class="op" id="6225220">.</span><span class="ident" id="6225221">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225238">l</span><span class="op" id="6225239">.</span><span class="ident" id="6225240">LoadBytes</span>&nbsp;<span class="op" id="6225250">=</span>&nbsp;<span class="ident" id="6225252">LoadBytes</span><span class="op" id="6225261">(</span><span class="ident" id="6225262">cmddat</span><span class="op" id="6225268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225273">f</span><span class="op" id="6225274">.</span><span class="ident" id="6225275">Loads</span><span class="op" id="6225280">[</span><span class="ident" id="6225281">i</span><span class="op" id="6225282">]</span>&nbsp;<span class="op" id="6225284">=</span>&nbsp;<span class="ident" id="6225286">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225291">case</span>&nbsp;<span class="ident" id="6225296">LoadCmdSymtab</span><span class="op" id="6225309">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225314">var</span>&nbsp;<span class="ident" id="6225318">hdr</span>&nbsp;<span class="ident" id="6225322">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225335">b</span>&nbsp;<span class="op" id="6225337">:=</span>&nbsp;<span class="ident" id="6225340">bytes</span><span class="op" id="6225345">.</span><span class="ident" id="6225346">NewReader</span><span class="op" id="6225355">(</span><span class="ident" id="6225356">cmddat</span><span class="op" id="6225362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225367">if</span>&nbsp;<span class="ident" id="6225370">err</span>&nbsp;<span class="op" id="6225374">:=</span>&nbsp;<span class="ident" id="6225377">binary</span><span class="op" id="6225383">.</span><span class="ident" id="6225384">Read</span><span class="op" id="6225388">(</span><span class="ident" id="6225389">b</span><span class="op" id="6225390">,</span>&nbsp;<span class="ident" id="6225392">bo</span><span class="op" id="6225394">,</span>&nbsp;<span class="op" id="6225396">&amp;</span><span class="ident" id="6225397">hdr</span><span class="op" id="6225400">)</span><span class="op" id="6225401">;</span>&nbsp;<span class="ident" id="6225403">err</span>&nbsp;<span class="op" id="6225407">!=</span>&nbsp;<span class="ident" id="6225410">nil</span>&nbsp;<span class="op" id="6225414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225420">return</span>&nbsp;<span class="ident" id="6225427">nil</span><span class="op" id="6225430">,</span>&nbsp;<span class="ident" id="6225432">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225439">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225444">strtab</span>&nbsp;<span class="op" id="6225451">:=</span>&nbsp;<span class="builtinfunc" id="6225454">make</span><span class="op" id="6225458">(</span><span class="op" id="6225459">[</span><span class="op" id="6225460">]</span><span class="builtintype" id="6225461">byte</span><span class="op" id="6225465">,</span>&nbsp;<span class="ident" id="6225467">hdr</span><span class="op" id="6225470">.</span><span class="ident" id="6225471">Strsize</span><span class="op" id="6225478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225483">if</span>&nbsp;<span class="ident" id="6225486">_</span><span class="op" id="6225487">,</span>&nbsp;<span class="ident" id="6225489">err</span>&nbsp;<span class="op" id="6225493">:=</span>&nbsp;<span class="ident" id="6225496">r</span><span class="op" id="6225497">.</span><span class="ident" id="6225498">ReadAt</span><span class="op" id="6225504">(</span><span class="ident" id="6225505">strtab</span><span class="op" id="6225511">,</span>&nbsp;<span class="ident" id="6225513">int64</span><span class="op" id="6225518">(</span><span class="ident" id="6225519">hdr</span><span class="op" id="6225522">.</span><span class="ident" id="6225523">Stroff</span><span class="op" id="6225529">)</span><span class="op" id="6225530">)</span><span class="op" id="6225531">;</span>&nbsp;<span class="ident" id="6225533">err</span>&nbsp;<span class="op" id="6225537">!=</span>&nbsp;<span class="ident" id="6225540">nil</span>&nbsp;<span class="op" id="6225544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225550">return</span>&nbsp;<span class="ident" id="6225557">nil</span><span class="op" id="6225560">,</span>&nbsp;<span class="ident" id="6225562">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225574">var</span>&nbsp;<span class="ident" id="6225578">symsz</span>&nbsp;<span class="builtintype" id="6225584">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225591">if</span>&nbsp;<span class="ident" id="6225594">f</span><span class="op" id="6225595">.</span><span class="ident" id="6225596">Magic</span>&nbsp;<span class="op" id="6225602">==</span>&nbsp;<span class="ident" id="6225605">Magic64</span>&nbsp;<span class="op" id="6225613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225619">symsz</span>&nbsp;<span class="op" id="6225625">=</span>&nbsp;<span class="num" id="6225627">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225633">}</span>&nbsp;<span class="keyword" id="6225635">else</span>&nbsp;<span class="op" id="6225640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225646">symsz</span>&nbsp;<span class="op" id="6225652">=</span>&nbsp;<span class="num" id="6225654">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225660">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225665">symdat</span>&nbsp;<span class="op" id="6225672">:=</span>&nbsp;<span class="builtinfunc" id="6225675">make</span><span class="op" id="6225679">(</span><span class="op" id="6225680">[</span><span class="op" id="6225681">]</span><span class="builtintype" id="6225682">byte</span><span class="op" id="6225686">,</span>&nbsp;<span class="builtintype" id="6225688">int</span><span class="op" id="6225691">(</span><span class="ident" id="6225692">hdr</span><span class="op" id="6225695">.</span><span class="ident" id="6225696">Nsyms</span><span class="op" id="6225701">)</span><span class="op" id="6225702">*</span><span class="ident" id="6225703">symsz</span><span class="op" id="6225708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225713">if</span>&nbsp;<span class="ident" id="6225716">_</span><span class="op" id="6225717">,</span>&nbsp;<span class="ident" id="6225719">err</span>&nbsp;<span class="op" id="6225723">:=</span>&nbsp;<span class="ident" id="6225726">r</span><span class="op" id="6225727">.</span><span class="ident" id="6225728">ReadAt</span><span class="op" id="6225734">(</span><span class="ident" id="6225735">symdat</span><span class="op" id="6225741">,</span>&nbsp;<span class="ident" id="6225743">int64</span><span class="op" id="6225748">(</span><span class="ident" id="6225749">hdr</span><span class="op" id="6225752">.</span><span class="ident" id="6225753">Symoff</span><span class="op" id="6225759">)</span><span class="op" id="6225760">)</span><span class="op" id="6225761">;</span>&nbsp;<span class="ident" id="6225763">err</span>&nbsp;<span class="op" id="6225767">!=</span>&nbsp;<span class="ident" id="6225770">nil</span>&nbsp;<span class="op" id="6225774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225780">return</span>&nbsp;<span class="ident" id="6225787">nil</span><span class="op" id="6225790">,</span>&nbsp;<span class="ident" id="6225792">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225804">st</span><span class="op" id="6225806">,</span>&nbsp;<span class="ident" id="6225808">err</span>&nbsp;<span class="op" id="6225812">:=</span>&nbsp;<span class="ident" id="6225815">f</span><span class="op" id="6225816">.</span><span class="ident" id="6225817">parseSymtab</span><span class="op" id="6225828">(</span><span class="ident" id="6225829">symdat</span><span class="op" id="6225835">,</span>&nbsp;<span class="ident" id="6225837">strtab</span><span class="op" id="6225843">,</span>&nbsp;<span class="ident" id="6225845">cmddat</span><span class="op" id="6225851">,</span>&nbsp;<span class="op" id="6225853">&amp;</span><span class="ident" id="6225854">hdr</span><span class="op" id="6225857">,</span>&nbsp;<span class="ident" id="6225859">offset</span><span class="op" id="6225865">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225870">if</span>&nbsp;<span class="ident" id="6225873">err</span>&nbsp;<span class="op" id="6225877">!=</span>&nbsp;<span class="ident" id="6225880">nil</span>&nbsp;<span class="op" id="6225884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225890">return</span>&nbsp;<span class="ident" id="6225897">nil</span><span class="op" id="6225900">,</span>&nbsp;<span class="ident" id="6225902">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6225909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225914">f</span><span class="op" id="6225915">.</span><span class="ident" id="6225916">Loads</span><span class="op" id="6225921">[</span><span class="ident" id="6225922">i</span><span class="op" id="6225923">]</span>&nbsp;<span class="op" id="6225925">=</span>&nbsp;<span class="ident" id="6225927">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225933">f</span><span class="op" id="6225934">.</span><span class="ident" id="6225935">Symtab</span>&nbsp;<span class="op" id="6225942">=</span>&nbsp;<span class="ident" id="6225944">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225950">case</span>&nbsp;<span class="ident" id="6225955">LoadCmdDysymtab</span><span class="op" id="6225970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6225975">var</span>&nbsp;<span class="ident" id="6225979">hdr</span>&nbsp;<span class="ident" id="6225983">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6225998">b</span>&nbsp;<span class="op" id="6226000">:=</span>&nbsp;<span class="ident" id="6226003">bytes</span><span class="op" id="6226008">.</span><span class="ident" id="6226009">NewReader</span><span class="op" id="6226018">(</span><span class="ident" id="6226019">cmddat</span><span class="op" id="6226025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226030">if</span>&nbsp;<span class="ident" id="6226033">err</span>&nbsp;<span class="op" id="6226037">:=</span>&nbsp;<span class="ident" id="6226040">binary</span><span class="op" id="6226046">.</span><span class="ident" id="6226047">Read</span><span class="op" id="6226051">(</span><span class="ident" id="6226052">b</span><span class="op" id="6226053">,</span>&nbsp;<span class="ident" id="6226055">bo</span><span class="op" id="6226057">,</span>&nbsp;<span class="op" id="6226059">&amp;</span><span class="ident" id="6226060">hdr</span><span class="op" id="6226063">)</span><span class="op" id="6226064">;</span>&nbsp;<span class="ident" id="6226066">err</span>&nbsp;<span class="op" id="6226070">!=</span>&nbsp;<span class="ident" id="6226073">nil</span>&nbsp;<span class="op" id="6226077">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226083">return</span>&nbsp;<span class="ident" id="6226090">nil</span><span class="op" id="6226093">,</span>&nbsp;<span class="ident" id="6226095">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226107">dat</span>&nbsp;<span class="op" id="6226111">:=</span>&nbsp;<span class="builtinfunc" id="6226114">make</span><span class="op" id="6226118">(</span><span class="op" id="6226119">[</span><span class="op" id="6226120">]</span><span class="builtintype" id="6226121">byte</span><span class="op" id="6226125">,</span>&nbsp;<span class="ident" id="6226127">hdr</span><span class="op" id="6226130">.</span><span class="ident" id="6226131">Nindirectsyms</span><span class="op" id="6226144">*</span><span class="num" id="6226145">4</span><span class="op" id="6226146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226151">if</span>&nbsp;<span class="ident" id="6226154">_</span><span class="op" id="6226155">,</span>&nbsp;<span class="ident" id="6226157">err</span>&nbsp;<span class="op" id="6226161">:=</span>&nbsp;<span class="ident" id="6226164">r</span><span class="op" id="6226165">.</span><span class="ident" id="6226166">ReadAt</span><span class="op" id="6226172">(</span><span class="ident" id="6226173">dat</span><span class="op" id="6226176">,</span>&nbsp;<span class="ident" id="6226178">int64</span><span class="op" id="6226183">(</span><span class="ident" id="6226184">hdr</span><span class="op" id="6226187">.</span><span class="ident" id="6226188">Indirectsymoff</span><span class="op" id="6226202">)</span><span class="op" id="6226203">)</span><span class="op" id="6226204">;</span>&nbsp;<span class="ident" id="6226206">err</span>&nbsp;<span class="op" id="6226210">!=</span>&nbsp;<span class="ident" id="6226213">nil</span>&nbsp;<span class="op" id="6226217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226223">return</span>&nbsp;<span class="ident" id="6226230">nil</span><span class="op" id="6226233">,</span>&nbsp;<span class="ident" id="6226235">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226247">x</span>&nbsp;<span class="op" id="6226249">:=</span>&nbsp;<span class="builtinfunc" id="6226252">make</span><span class="op" id="6226256">(</span><span class="op" id="6226257">[</span><span class="op" id="6226258">]</span><span class="builtintype" id="6226259">uint32</span><span class="op" id="6226265">,</span>&nbsp;<span class="ident" id="6226267">hdr</span><span class="op" id="6226270">.</span><span class="ident" id="6226271">Nindirectsyms</span><span class="op" id="6226284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226289">if</span>&nbsp;<span class="ident" id="6226292">err</span>&nbsp;<span class="op" id="6226296">:=</span>&nbsp;<span class="ident" id="6226299">binary</span><span class="op" id="6226305">.</span><span class="ident" id="6226306">Read</span><span class="op" id="6226310">(</span><span class="ident" id="6226311">bytes</span><span class="op" id="6226316">.</span><span class="ident" id="6226317">NewReader</span><span class="op" id="6226326">(</span><span class="ident" id="6226327">dat</span><span class="op" id="6226330">)</span><span class="op" id="6226331">,</span>&nbsp;<span class="ident" id="6226333">bo</span><span class="op" id="6226335">,</span>&nbsp;<span class="ident" id="6226337">x</span><span class="op" id="6226338">)</span><span class="op" id="6226339">;</span>&nbsp;<span class="ident" id="6226341">err</span>&nbsp;<span class="op" id="6226345">!=</span>&nbsp;<span class="ident" id="6226348">nil</span>&nbsp;<span class="op" id="6226352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226358">return</span>&nbsp;<span class="ident" id="6226365">nil</span><span class="op" id="6226368">,</span>&nbsp;<span class="ident" id="6226370">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226377">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226382">st</span>&nbsp;<span class="op" id="6226385">:=</span>&nbsp;<span class="builtinfunc" id="6226388">new</span><span class="op" id="6226391">(</span><span class="ident" id="6226392">Dysymtab</span><span class="op" id="6226400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226405">st</span><span class="op" id="6226407">.</span><span class="ident" id="6226408">LoadBytes</span>&nbsp;<span class="op" id="6226418">=</span>&nbsp;<span class="ident" id="6226420">LoadBytes</span><span class="op" id="6226429">(</span><span class="ident" id="6226430">cmddat</span><span class="op" id="6226436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226441">st</span><span class="op" id="6226443">.</span><span class="ident" id="6226444">DysymtabCmd</span>&nbsp;<span class="op" id="6226456">=</span>&nbsp;<span class="ident" id="6226458">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226465">st</span><span class="op" id="6226467">.</span><span class="ident" id="6226468">IndirectSyms</span>&nbsp;<span class="op" id="6226481">=</span>&nbsp;<span class="ident" id="6226483">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226488">f</span><span class="op" id="6226489">.</span><span class="ident" id="6226490">Loads</span><span class="op" id="6226495">[</span><span class="ident" id="6226496">i</span><span class="op" id="6226497">]</span>&nbsp;<span class="op" id="6226499">=</span>&nbsp;<span class="ident" id="6226501">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226507">f</span><span class="op" id="6226508">.</span><span class="ident" id="6226509">Dysymtab</span>&nbsp;<span class="op" id="6226518">=</span>&nbsp;<span class="ident" id="6226520">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226526">case</span>&nbsp;<span class="ident" id="6226531">LoadCmdSegment</span><span class="op" id="6226545">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226550">var</span>&nbsp;<span class="ident" id="6226554">seg32</span>&nbsp;<span class="ident" id="6226560">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226573">b</span>&nbsp;<span class="op" id="6226575">:=</span>&nbsp;<span class="ident" id="6226578">bytes</span><span class="op" id="6226583">.</span><span class="ident" id="6226584">NewReader</span><span class="op" id="6226593">(</span><span class="ident" id="6226594">cmddat</span><span class="op" id="6226600">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226605">if</span>&nbsp;<span class="ident" id="6226608">err</span>&nbsp;<span class="op" id="6226612">:=</span>&nbsp;<span class="ident" id="6226615">binary</span><span class="op" id="6226621">.</span><span class="ident" id="6226622">Read</span><span class="op" id="6226626">(</span><span class="ident" id="6226627">b</span><span class="op" id="6226628">,</span>&nbsp;<span class="ident" id="6226630">bo</span><span class="op" id="6226632">,</span>&nbsp;<span class="op" id="6226634">&amp;</span><span class="ident" id="6226635">seg32</span><span class="op" id="6226640">)</span><span class="op" id="6226641">;</span>&nbsp;<span class="ident" id="6226643">err</span>&nbsp;<span class="op" id="6226647">!=</span>&nbsp;<span class="ident" id="6226650">nil</span>&nbsp;<span class="op" id="6226654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6226660">return</span>&nbsp;<span class="ident" id="6226667">nil</span><span class="op" id="6226670">,</span>&nbsp;<span class="ident" id="6226672">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6226679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226684">s</span>&nbsp;<span class="op" id="6226686">=</span>&nbsp;<span class="builtinfunc" id="6226688">new</span><span class="op" id="6226691">(</span><span class="ident" id="6226692">Segment</span><span class="op" id="6226699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226704">s</span><span class="op" id="6226705">.</span><span class="ident" id="6226706">LoadBytes</span>&nbsp;<span class="op" id="6226716">=</span>&nbsp;<span class="ident" id="6226718">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226728">s</span><span class="op" id="6226729">.</span><span class="ident" id="6226730">Cmd</span>&nbsp;<span class="op" id="6226734">=</span>&nbsp;<span class="ident" id="6226736">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226743">s</span><span class="op" id="6226744">.</span><span class="ident" id="6226745">Len</span>&nbsp;<span class="op" id="6226749">=</span>&nbsp;<span class="ident" id="6226751">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226758">s</span><span class="op" id="6226759">.</span><span class="ident" id="6226760">Name</span>&nbsp;<span class="op" id="6226765">=</span>&nbsp;<span class="ident" id="6226767">cstring</span><span class="op" id="6226774">(</span><span class="ident" id="6226775">seg32</span><span class="op" id="6226780">.</span><span class="ident" id="6226781">Name</span><span class="op" id="6226785">[</span><span class="num" id="6226786">0</span><span class="op" id="6226787">:</span><span class="op" id="6226788">]</span><span class="op" id="6226789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226794">s</span><span class="op" id="6226795">.</span><span class="ident" id="6226796">Addr</span>&nbsp;<span class="op" id="6226801">=</span>&nbsp;<span class="ident" id="6226803">uint64</span><span class="op" id="6226809">(</span><span class="ident" id="6226810">seg32</span><span class="op" id="6226815">.</span><span class="ident" id="6226816">Addr</span><span class="op" id="6226820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226825">s</span><span class="op" id="6226826">.</span><span class="ident" id="6226827">Memsz</span>&nbsp;<span class="op" id="6226833">=</span>&nbsp;<span class="ident" id="6226835">uint64</span><span class="op" id="6226841">(</span><span class="ident" id="6226842">seg32</span><span class="op" id="6226847">.</span><span class="ident" id="6226848">Memsz</span><span class="op" id="6226853">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226858">s</span><span class="op" id="6226859">.</span><span class="ident" id="6226860">Offset</span>&nbsp;<span class="op" id="6226867">=</span>&nbsp;<span class="ident" id="6226869">uint64</span><span class="op" id="6226875">(</span><span class="ident" id="6226876">seg32</span><span class="op" id="6226881">.</span><span class="ident" id="6226882">Offset</span><span class="op" id="6226888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226893">s</span><span class="op" id="6226894">.</span><span class="ident" id="6226895">Filesz</span>&nbsp;<span class="op" id="6226902">=</span>&nbsp;<span class="ident" id="6226904">uint64</span><span class="op" id="6226910">(</span><span class="ident" id="6226911">seg32</span><span class="op" id="6226916">.</span><span class="ident" id="6226917">Filesz</span><span class="op" id="6226923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226928">s</span><span class="op" id="6226929">.</span><span class="ident" id="6226930">Maxprot</span>&nbsp;<span class="op" id="6226938">=</span>&nbsp;<span class="ident" id="6226940">seg32</span><span class="op" id="6226945">.</span><span class="ident" id="6226946">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226957">s</span><span class="op" id="6226958">.</span><span class="ident" id="6226959">Prot</span>&nbsp;<span class="op" id="6226964">=</span>&nbsp;<span class="ident" id="6226966">seg32</span><span class="op" id="6226971">.</span><span class="ident" id="6226972">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226980">s</span><span class="op" id="6226981">.</span><span class="ident" id="6226982">Nsect</span>&nbsp;<span class="op" id="6226988">=</span>&nbsp;<span class="ident" id="6226990">seg32</span><span class="op" id="6226995">.</span><span class="ident" id="6226996">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227005">s</span><span class="op" id="6227006">.</span><span class="ident" id="6227007">Flag</span>&nbsp;<span class="op" id="6227012">=</span>&nbsp;<span class="ident" id="6227014">seg32</span><span class="op" id="6227019">.</span><span class="ident" id="6227020">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227028">f</span><span class="op" id="6227029">.</span><span class="ident" id="6227030">Loads</span><span class="op" id="6227035">[</span><span class="ident" id="6227036">i</span><span class="op" id="6227037">]</span>&nbsp;<span class="op" id="6227039">=</span>&nbsp;<span class="ident" id="6227041">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227046">for</span>&nbsp;<span class="ident" id="6227050">i</span>&nbsp;<span class="op" id="6227052">:=</span>&nbsp;<span class="num" id="6227055">0</span><span class="op" id="6227056">;</span>&nbsp;<span class="ident" id="6227058">i</span>&nbsp;<span class="op" id="6227060">&lt;</span>&nbsp;<span class="builtintype" id="6227062">int</span><span class="op" id="6227065">(</span><span class="ident" id="6227066">s</span><span class="op" id="6227067">.</span><span class="ident" id="6227068">Nsect</span><span class="op" id="6227073">)</span><span class="op" id="6227074">;</span>&nbsp;<span class="ident" id="6227076">i</span><span class="op" id="6227077">++</span>&nbsp;<span class="op" id="6227080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227086">var</span>&nbsp;<span class="ident" id="6227090">sh32</span>&nbsp;<span class="ident" id="6227095">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227109">if</span>&nbsp;<span class="ident" id="6227112">err</span>&nbsp;<span class="op" id="6227116">:=</span>&nbsp;<span class="ident" id="6227119">binary</span><span class="op" id="6227125">.</span><span class="ident" id="6227126">Read</span><span class="op" id="6227130">(</span><span class="ident" id="6227131">b</span><span class="op" id="6227132">,</span>&nbsp;<span class="ident" id="6227134">bo</span><span class="op" id="6227136">,</span>&nbsp;<span class="op" id="6227138">&amp;</span><span class="ident" id="6227139">sh32</span><span class="op" id="6227143">)</span><span class="op" id="6227144">;</span>&nbsp;<span class="ident" id="6227146">err</span>&nbsp;<span class="op" id="6227150">!=</span>&nbsp;<span class="ident" id="6227153">nil</span>&nbsp;<span class="op" id="6227157">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227164">return</span>&nbsp;<span class="ident" id="6227171">nil</span><span class="op" id="6227174">,</span>&nbsp;<span class="ident" id="6227176">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227190">sh</span>&nbsp;<span class="op" id="6227193">:=</span>&nbsp;<span class="builtinfunc" id="6227196">new</span><span class="op" id="6227199">(</span><span class="ident" id="6227200">Section</span><span class="op" id="6227207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227213">sh</span><span class="op" id="6227215">.</span><span class="ident" id="6227216">Name</span>&nbsp;<span class="op" id="6227221">=</span>&nbsp;<span class="ident" id="6227223">cstring</span><span class="op" id="6227230">(</span><span class="ident" id="6227231">sh32</span><span class="op" id="6227235">.</span><span class="ident" id="6227236">Name</span><span class="op" id="6227240">[</span><span class="num" id="6227241">0</span><span class="op" id="6227242">:</span><span class="op" id="6227243">]</span><span class="op" id="6227244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227250">sh</span><span class="op" id="6227252">.</span><span class="ident" id="6227253">Seg</span>&nbsp;<span class="op" id="6227257">=</span>&nbsp;<span class="ident" id="6227259">cstring</span><span class="op" id="6227266">(</span><span class="ident" id="6227267">sh32</span><span class="op" id="6227271">.</span><span class="ident" id="6227272">Seg</span><span class="op" id="6227275">[</span><span class="num" id="6227276">0</span><span class="op" id="6227277">:</span><span class="op" id="6227278">]</span><span class="op" id="6227279">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227285">sh</span><span class="op" id="6227287">.</span><span class="ident" id="6227288">Addr</span>&nbsp;<span class="op" id="6227293">=</span>&nbsp;<span class="ident" id="6227295">uint64</span><span class="op" id="6227301">(</span><span class="ident" id="6227302">sh32</span><span class="op" id="6227306">.</span><span class="ident" id="6227307">Addr</span><span class="op" id="6227311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227317">sh</span><span class="op" id="6227319">.</span><span class="ident" id="6227320">Size</span>&nbsp;<span class="op" id="6227325">=</span>&nbsp;<span class="ident" id="6227327">uint64</span><span class="op" id="6227333">(</span><span class="ident" id="6227334">sh32</span><span class="op" id="6227338">.</span><span class="ident" id="6227339">Size</span><span class="op" id="6227343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227349">sh</span><span class="op" id="6227351">.</span><span class="ident" id="6227352">Offset</span>&nbsp;<span class="op" id="6227359">=</span>&nbsp;<span class="ident" id="6227361">sh32</span><span class="op" id="6227365">.</span><span class="ident" id="6227366">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227377">sh</span><span class="op" id="6227379">.</span><span class="ident" id="6227380">Align</span>&nbsp;<span class="op" id="6227386">=</span>&nbsp;<span class="ident" id="6227388">sh32</span><span class="op" id="6227392">.</span><span class="ident" id="6227393">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227403">sh</span><span class="op" id="6227405">.</span><span class="ident" id="6227406">Reloff</span>&nbsp;<span class="op" id="6227413">=</span>&nbsp;<span class="ident" id="6227415">sh32</span><span class="op" id="6227419">.</span><span class="ident" id="6227420">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227431">sh</span><span class="op" id="6227433">.</span><span class="ident" id="6227434">Nreloc</span>&nbsp;<span class="op" id="6227441">=</span>&nbsp;<span class="ident" id="6227443">sh32</span><span class="op" id="6227447">.</span><span class="ident" id="6227448">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227459">sh</span><span class="op" id="6227461">.</span><span class="ident" id="6227462">Flags</span>&nbsp;<span class="op" id="6227468">=</span>&nbsp;<span class="ident" id="6227470">sh32</span><span class="op" id="6227474">.</span><span class="ident" id="6227475">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227485">f</span><span class="op" id="6227486">.</span><span class="ident" id="6227487">pushSection</span><span class="op" id="6227498">(</span><span class="ident" id="6227499">sh</span><span class="op" id="6227501">,</span>&nbsp;<span class="ident" id="6227503">r</span><span class="op" id="6227504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227514">case</span>&nbsp;<span class="ident" id="6227519">LoadCmdSegment64</span><span class="op" id="6227535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227540">var</span>&nbsp;<span class="ident" id="6227544">seg64</span>&nbsp;<span class="ident" id="6227550">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227563">b</span>&nbsp;<span class="op" id="6227565">:=</span>&nbsp;<span class="ident" id="6227568">bytes</span><span class="op" id="6227573">.</span><span class="ident" id="6227574">NewReader</span><span class="op" id="6227583">(</span><span class="ident" id="6227584">cmddat</span><span class="op" id="6227590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227595">if</span>&nbsp;<span class="ident" id="6227598">err</span>&nbsp;<span class="op" id="6227602">:=</span>&nbsp;<span class="ident" id="6227605">binary</span><span class="op" id="6227611">.</span><span class="ident" id="6227612">Read</span><span class="op" id="6227616">(</span><span class="ident" id="6227617">b</span><span class="op" id="6227618">,</span>&nbsp;<span class="ident" id="6227620">bo</span><span class="op" id="6227622">,</span>&nbsp;<span class="op" id="6227624">&amp;</span><span class="ident" id="6227625">seg64</span><span class="op" id="6227630">)</span><span class="op" id="6227631">;</span>&nbsp;<span class="ident" id="6227633">err</span>&nbsp;<span class="op" id="6227637">!=</span>&nbsp;<span class="ident" id="6227640">nil</span>&nbsp;<span class="op" id="6227644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227650">return</span>&nbsp;<span class="ident" id="6227657">nil</span><span class="op" id="6227660">,</span>&nbsp;<span class="ident" id="6227662">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227674">s</span>&nbsp;<span class="op" id="6227676">=</span>&nbsp;<span class="builtinfunc" id="6227678">new</span><span class="op" id="6227681">(</span><span class="ident" id="6227682">Segment</span><span class="op" id="6227689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227694">s</span><span class="op" id="6227695">.</span><span class="ident" id="6227696">LoadBytes</span>&nbsp;<span class="op" id="6227706">=</span>&nbsp;<span class="ident" id="6227708">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227718">s</span><span class="op" id="6227719">.</span><span class="ident" id="6227720">Cmd</span>&nbsp;<span class="op" id="6227724">=</span>&nbsp;<span class="ident" id="6227726">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227733">s</span><span class="op" id="6227734">.</span><span class="ident" id="6227735">Len</span>&nbsp;<span class="op" id="6227739">=</span>&nbsp;<span class="ident" id="6227741">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227748">s</span><span class="op" id="6227749">.</span><span class="ident" id="6227750">Name</span>&nbsp;<span class="op" id="6227755">=</span>&nbsp;<span class="ident" id="6227757">cstring</span><span class="op" id="6227764">(</span><span class="ident" id="6227765">seg64</span><span class="op" id="6227770">.</span><span class="ident" id="6227771">Name</span><span class="op" id="6227775">[</span><span class="num" id="6227776">0</span><span class="op" id="6227777">:</span><span class="op" id="6227778">]</span><span class="op" id="6227779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227784">s</span><span class="op" id="6227785">.</span><span class="ident" id="6227786">Addr</span>&nbsp;<span class="op" id="6227791">=</span>&nbsp;<span class="ident" id="6227793">seg64</span><span class="op" id="6227798">.</span><span class="ident" id="6227799">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227807">s</span><span class="op" id="6227808">.</span><span class="ident" id="6227809">Memsz</span>&nbsp;<span class="op" id="6227815">=</span>&nbsp;<span class="ident" id="6227817">seg64</span><span class="op" id="6227822">.</span><span class="ident" id="6227823">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227832">s</span><span class="op" id="6227833">.</span><span class="ident" id="6227834">Offset</span>&nbsp;<span class="op" id="6227841">=</span>&nbsp;<span class="ident" id="6227843">seg64</span><span class="op" id="6227848">.</span><span class="ident" id="6227849">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227859">s</span><span class="op" id="6227860">.</span><span class="ident" id="6227861">Filesz</span>&nbsp;<span class="op" id="6227868">=</span>&nbsp;<span class="ident" id="6227870">seg64</span><span class="op" id="6227875">.</span><span class="ident" id="6227876">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227886">s</span><span class="op" id="6227887">.</span><span class="ident" id="6227888">Maxprot</span>&nbsp;<span class="op" id="6227896">=</span>&nbsp;<span class="ident" id="6227898">seg64</span><span class="op" id="6227903">.</span><span class="ident" id="6227904">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227915">s</span><span class="op" id="6227916">.</span><span class="ident" id="6227917">Prot</span>&nbsp;<span class="op" id="6227922">=</span>&nbsp;<span class="ident" id="6227924">seg64</span><span class="op" id="6227929">.</span><span class="ident" id="6227930">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227938">s</span><span class="op" id="6227939">.</span><span class="ident" id="6227940">Nsect</span>&nbsp;<span class="op" id="6227946">=</span>&nbsp;<span class="ident" id="6227948">seg64</span><span class="op" id="6227953">.</span><span class="ident" id="6227954">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227963">s</span><span class="op" id="6227964">.</span><span class="ident" id="6227965">Flag</span>&nbsp;<span class="op" id="6227970">=</span>&nbsp;<span class="ident" id="6227972">seg64</span><span class="op" id="6227977">.</span><span class="ident" id="6227978">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227986">f</span><span class="op" id="6227987">.</span><span class="ident" id="6227988">Loads</span><span class="op" id="6227993">[</span><span class="ident" id="6227994">i</span><span class="op" id="6227995">]</span>&nbsp;<span class="op" id="6227997">=</span>&nbsp;<span class="ident" id="6227999">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228004">for</span>&nbsp;<span class="ident" id="6228008">i</span>&nbsp;<span class="op" id="6228010">:=</span>&nbsp;<span class="num" id="6228013">0</span><span class="op" id="6228014">;</span>&nbsp;<span class="ident" id="6228016">i</span>&nbsp;<span class="op" id="6228018">&lt;</span>&nbsp;<span class="builtintype" id="6228020">int</span><span class="op" id="6228023">(</span><span class="ident" id="6228024">s</span><span class="op" id="6228025">.</span><span class="ident" id="6228026">Nsect</span><span class="op" id="6228031">)</span><span class="op" id="6228032">;</span>&nbsp;<span class="ident" id="6228034">i</span><span class="op" id="6228035">++</span>&nbsp;<span class="op" id="6228038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228044">var</span>&nbsp;<span class="ident" id="6228048">sh64</span>&nbsp;<span class="ident" id="6228053">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228067">if</span>&nbsp;<span class="ident" id="6228070">err</span>&nbsp;<span class="op" id="6228074">:=</span>&nbsp;<span class="ident" id="6228077">binary</span><span class="op" id="6228083">.</span><span class="ident" id="6228084">Read</span><span class="op" id="6228088">(</span><span class="ident" id="6228089">b</span><span class="op" id="6228090">,</span>&nbsp;<span class="ident" id="6228092">bo</span><span class="op" id="6228094">,</span>&nbsp;<span class="op" id="6228096">&amp;</span><span class="ident" id="6228097">sh64</span><span class="op" id="6228101">)</span><span class="op" id="6228102">;</span>&nbsp;<span class="ident" id="6228104">err</span>&nbsp;<span class="op" id="6228108">!=</span>&nbsp;<span class="ident" id="6228111">nil</span>&nbsp;<span class="op" id="6228115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228122">return</span>&nbsp;<span class="ident" id="6228129">nil</span><span class="op" id="6228132">,</span>&nbsp;<span class="ident" id="6228134">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228142">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228148">sh</span>&nbsp;<span class="op" id="6228151">:=</span>&nbsp;<span class="builtinfunc" id="6228154">new</span><span class="op" id="6228157">(</span><span class="ident" id="6228158">Section</span><span class="op" id="6228165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228171">sh</span><span class="op" id="6228173">.</span><span class="ident" id="6228174">Name</span>&nbsp;<span class="op" id="6228179">=</span>&nbsp;<span class="ident" id="6228181">cstring</span><span class="op" id="6228188">(</span><span class="ident" id="6228189">sh64</span><span class="op" id="6228193">.</span><span class="ident" id="6228194">Name</span><span class="op" id="6228198">[</span><span class="num" id="6228199">0</span><span class="op" id="6228200">:</span><span class="op" id="6228201">]</span><span class="op" id="6228202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228208">sh</span><span class="op" id="6228210">.</span><span class="ident" id="6228211">Seg</span>&nbsp;<span class="op" id="6228215">=</span>&nbsp;<span class="ident" id="6228217">cstring</span><span class="op" id="6228224">(</span><span class="ident" id="6228225">sh64</span><span class="op" id="6228229">.</span><span class="ident" id="6228230">Seg</span><span class="op" id="6228233">[</span><span class="num" id="6228234">0</span><span class="op" id="6228235">:</span><span class="op" id="6228236">]</span><span class="op" id="6228237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228243">sh</span><span class="op" id="6228245">.</span><span class="ident" id="6228246">Addr</span>&nbsp;<span class="op" id="6228251">=</span>&nbsp;<span class="ident" id="6228253">sh64</span><span class="op" id="6228257">.</span><span class="ident" id="6228258">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228267">sh</span><span class="op" id="6228269">.</span><span class="ident" id="6228270">Size</span>&nbsp;<span class="op" id="6228275">=</span>&nbsp;<span class="ident" id="6228277">sh64</span><span class="op" id="6228281">.</span><span class="ident" id="6228282">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228291">sh</span><span class="op" id="6228293">.</span><span class="ident" id="6228294">Offset</span>&nbsp;<span class="op" id="6228301">=</span>&nbsp;<span class="ident" id="6228303">sh64</span><span class="op" id="6228307">.</span><span class="ident" id="6228308">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228319">sh</span><span class="op" id="6228321">.</span><span class="ident" id="6228322">Align</span>&nbsp;<span class="op" id="6228328">=</span>&nbsp;<span class="ident" id="6228330">sh64</span><span class="op" id="6228334">.</span><span class="ident" id="6228335">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228345">sh</span><span class="op" id="6228347">.</span><span class="ident" id="6228348">Reloff</span>&nbsp;<span class="op" id="6228355">=</span>&nbsp;<span class="ident" id="6228357">sh64</span><span class="op" id="6228361">.</span><span class="ident" id="6228362">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228373">sh</span><span class="op" id="6228375">.</span><span class="ident" id="6228376">Nreloc</span>&nbsp;<span class="op" id="6228383">=</span>&nbsp;<span class="ident" id="6228385">sh64</span><span class="op" id="6228389">.</span><span class="ident" id="6228390">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228401">sh</span><span class="op" id="6228403">.</span><span class="ident" id="6228404">Flags</span>&nbsp;<span class="op" id="6228410">=</span>&nbsp;<span class="ident" id="6228412">sh64</span><span class="op" id="6228416">.</span><span class="ident" id="6228417">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228427">f</span><span class="op" id="6228428">.</span><span class="ident" id="6228429">pushSection</span><span class="op" id="6228440">(</span><span class="ident" id="6228441">sh</span><span class="op" id="6228443">,</span>&nbsp;<span class="ident" id="6228445">r</span><span class="op" id="6228446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228459">if</span>&nbsp;<span class="ident" id="6228462">s</span>&nbsp;<span class="op" id="6228464">!=</span>&nbsp;<span class="ident" id="6228467">nil</span>&nbsp;<span class="op" id="6228471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228476">s</span><span class="op" id="6228477">.</span><span class="ident" id="6228478">sr</span>&nbsp;<span class="op" id="6228481">=</span>&nbsp;<span class="ident" id="6228483">io</span><span class="op" id="6228485">.</span><span class="ident" id="6228486">NewSectionReader</span><span class="op" id="6228502">(</span><span class="ident" id="6228503">r</span><span class="op" id="6228504">,</span>&nbsp;<span class="ident" id="6228506">int64</span><span class="op" id="6228511">(</span><span class="ident" id="6228512">s</span><span class="op" id="6228513">.</span><span class="ident" id="6228514">Offset</span><span class="op" id="6228520">)</span><span class="op" id="6228521">,</span>&nbsp;<span class="ident" id="6228523">int64</span><span class="op" id="6228528">(</span><span class="ident" id="6228529">s</span><span class="op" id="6228530">.</span><span class="ident" id="6228531">Filesz</span><span class="op" id="6228537">)</span><span class="op" id="6228538">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228543">s</span><span class="op" id="6228544">.</span><span class="ident" id="6228545">ReaderAt</span>&nbsp;<span class="op" id="6228554">=</span>&nbsp;<span class="ident" id="6228556">s</span><span class="op" id="6228557">.</span><span class="ident" id="6228558">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228569">return</span>&nbsp;<span class="ident" id="6228576">f</span><span class="op" id="6228577">,</span>&nbsp;<span class="ident" id="6228579">nil</span><br>
<span class="lineno"></span><span class="op" id="6228583">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6228586">func</span>&nbsp;<span class="op" id="6228591">(</span><span class="ident" id="6228592">f</span>&nbsp;<span class="op" id="6228594">*</span><span class="ident" id="6228595">File</span><span class="op" id="6228599">)</span>&nbsp;<span class="ident" id="6228601">parseSymtab</span><span class="op" id="6228612">(</span><span class="ident" id="6228613">symdat</span><span class="op" id="6228619">,</span>&nbsp;<span class="ident" id="6228621">strtab</span><span class="op" id="6228627">,</span>&nbsp;<span class="ident" id="6228629">cmddat</span>&nbsp;<span class="op" id="6228636">[</span><span class="op" id="6228637">]</span><span class="builtintype" id="6228638">byte</span><span class="op" id="6228642">,</span>&nbsp;<span class="ident" id="6228644">hdr</span>&nbsp;<span class="op" id="6228648">*</span><span class="ident" id="6228649">SymtabCmd</span><span class="op" id="6228658">,</span>&nbsp;<span class="ident" id="6228660">offset</span>&nbsp;<span class="ident" id="6228667">int64</span><span class="op" id="6228672">)</span>&nbsp;<span class="op" id="6228674">(</span><span class="op" id="6228675">*</span><span class="ident" id="6228676">Symtab</span><span class="op" id="6228682">,</span>&nbsp;<span class="builtintype" id="6228684">error</span><span class="op" id="6228689">)</span>&nbsp;<span class="op" id="6228691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228694">bo</span>&nbsp;<span class="op" id="6228697">:=</span>&nbsp;<span class="ident" id="6228700">f</span><span class="op" id="6228701">.</span><span class="ident" id="6228702">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228713">symtab</span>&nbsp;<span class="op" id="6228720">:=</span>&nbsp;<span class="builtinfunc" id="6228723">make</span><span class="op" id="6228727">(</span><span class="op" id="6228728">[</span><span class="op" id="6228729">]</span><span class="ident" id="6228730">Symbol</span><span class="op" id="6228736">,</span>&nbsp;<span class="ident" id="6228738">hdr</span><span class="op" id="6228741">.</span><span class="ident" id="6228742">Nsyms</span><span class="op" id="6228747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228750">b</span>&nbsp;<span class="op" id="6228752">:=</span>&nbsp;<span class="ident" id="6228755">bytes</span><span class="op" id="6228760">.</span><span class="ident" id="6228761">NewReader</span><span class="op" id="6228770">(</span><span class="ident" id="6228771">symdat</span><span class="op" id="6228777">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228780">for</span>&nbsp;<span class="ident" id="6228784">i</span>&nbsp;<span class="op" id="6228786">:=</span>&nbsp;<span class="keyword" id="6228789">range</span>&nbsp;<span class="ident" id="6228795">symtab</span>&nbsp;<span class="op" id="6228802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228806">var</span>&nbsp;<span class="ident" id="6228810">n</span>&nbsp;<span class="ident" id="6228812">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228822">if</span>&nbsp;<span class="ident" id="6228825">f</span><span class="op" id="6228826">.</span><span class="ident" id="6228827">Magic</span>&nbsp;<span class="op" id="6228833">==</span>&nbsp;<span class="ident" id="6228836">Magic64</span>&nbsp;<span class="op" id="6228844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228849">if</span>&nbsp;<span class="ident" id="6228852">err</span>&nbsp;<span class="op" id="6228856">:=</span>&nbsp;<span class="ident" id="6228859">binary</span><span class="op" id="6228865">.</span><span class="ident" id="6228866">Read</span><span class="op" id="6228870">(</span><span class="ident" id="6228871">b</span><span class="op" id="6228872">,</span>&nbsp;<span class="ident" id="6228874">bo</span><span class="op" id="6228876">,</span>&nbsp;<span class="op" id="6228878">&amp;</span><span class="ident" id="6228879">n</span><span class="op" id="6228880">)</span><span class="op" id="6228881">;</span>&nbsp;<span class="ident" id="6228883">err</span>&nbsp;<span class="op" id="6228887">!=</span>&nbsp;<span class="ident" id="6228890">nil</span>&nbsp;<span class="op" id="6228894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228900">return</span>&nbsp;<span class="ident" id="6228907">nil</span><span class="op" id="6228910">,</span>&nbsp;<span class="ident" id="6228912">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228923">}</span>&nbsp;<span class="keyword" id="6228925">else</span>&nbsp;<span class="op" id="6228930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228935">var</span>&nbsp;<span class="ident" id="6228939">n32</span>&nbsp;<span class="ident" id="6228943">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228954">if</span>&nbsp;<span class="ident" id="6228957">err</span>&nbsp;<span class="op" id="6228961">:=</span>&nbsp;<span class="ident" id="6228964">binary</span><span class="op" id="6228970">.</span><span class="ident" id="6228971">Read</span><span class="op" id="6228975">(</span><span class="ident" id="6228976">b</span><span class="op" id="6228977">,</span>&nbsp;<span class="ident" id="6228979">bo</span><span class="op" id="6228981">,</span>&nbsp;<span class="op" id="6228983">&amp;</span><span class="ident" id="6228984">n32</span><span class="op" id="6228987">)</span><span class="op" id="6228988">;</span>&nbsp;<span class="ident" id="6228990">err</span>&nbsp;<span class="op" id="6228994">!=</span>&nbsp;<span class="ident" id="6228997">nil</span>&nbsp;<span class="op" id="6229001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229007">return</span>&nbsp;<span class="ident" id="6229014">nil</span><span class="op" id="6229017">,</span>&nbsp;<span class="ident" id="6229019">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229031">n</span><span class="op" id="6229032">.</span><span class="ident" id="6229033">Name</span>&nbsp;<span class="op" id="6229038">=</span>&nbsp;<span class="ident" id="6229040">n32</span><span class="op" id="6229043">.</span><span class="ident" id="6229044">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229052">n</span><span class="op" id="6229053">.</span><span class="ident" id="6229054">Type</span>&nbsp;<span class="op" id="6229059">=</span>&nbsp;<span class="ident" id="6229061">n32</span><span class="op" id="6229064">.</span><span class="ident" id="6229065">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229073">n</span><span class="op" id="6229074">.</span><span class="ident" id="6229075">Sect</span>&nbsp;<span class="op" id="6229080">=</span>&nbsp;<span class="ident" id="6229082">n32</span><span class="op" id="6229085">.</span><span class="ident" id="6229086">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229094">n</span><span class="op" id="6229095">.</span><span class="ident" id="6229096">Desc</span>&nbsp;<span class="op" id="6229101">=</span>&nbsp;<span class="ident" id="6229103">n32</span><span class="op" id="6229106">.</span><span class="ident" id="6229107">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229115">n</span><span class="op" id="6229116">.</span><span class="ident" id="6229117">Value</span>&nbsp;<span class="op" id="6229123">=</span>&nbsp;<span class="ident" id="6229125">uint64</span><span class="op" id="6229131">(</span><span class="ident" id="6229132">n32</span><span class="op" id="6229135">.</span><span class="ident" id="6229136">Value</span><span class="op" id="6229141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229149">sym</span>&nbsp;<span class="op" id="6229153">:=</span>&nbsp;<span class="op" id="6229156">&amp;</span><span class="ident" id="6229157">symtab</span><span class="op" id="6229163">[</span><span class="ident" id="6229164">i</span><span class="op" id="6229165">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229169">if</span>&nbsp;<span class="ident" id="6229172">n</span><span class="op" id="6229173">.</span><span class="ident" id="6229174">Name</span>&nbsp;<span class="op" id="6229179">&gt;=</span>&nbsp;<span class="builtintype" id="6229182">uint32</span><span class="op" id="6229188">(</span><span class="builtinfunc" id="6229189">len</span><span class="op" id="6229192">(</span><span class="ident" id="6229193">strtab</span><span class="op" id="6229199">)</span><span class="op" id="6229200">)</span>&nbsp;<span class="op" id="6229202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229207">return</span>&nbsp;<span class="ident" id="6229214">nil</span><span class="op" id="6229217">,</span>&nbsp;<span class="op" id="6229219">&amp;</span><span class="ident" id="6229220">FormatError</span><span class="op" id="6229231">{</span><span class="ident" id="6229232">offset</span><span class="op" id="6229238">,</span>&nbsp;<span class="string" id="6229240">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6229270">,</span>&nbsp;<span class="ident" id="6229272">n</span><span class="op" id="6229273">.</span><span class="ident" id="6229274">Name</span><span class="op" id="6229278">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229286">sym</span><span class="op" id="6229289">.</span><span class="ident" id="6229290">Name</span>&nbsp;<span class="op" id="6229295">=</span>&nbsp;<span class="ident" id="6229297">cstring</span><span class="op" id="6229304">(</span><span class="ident" id="6229305">strtab</span><span class="op" id="6229311">[</span><span class="ident" id="6229312">n</span><span class="op" id="6229313">.</span><span class="ident" id="6229314">Name</span><span class="op" id="6229318">:</span><span class="op" id="6229319">]</span><span class="op" id="6229320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229324">sym</span><span class="op" id="6229327">.</span><span class="ident" id="6229328">Type</span>&nbsp;<span class="op" id="6229333">=</span>&nbsp;<span class="ident" id="6229335">n</span><span class="op" id="6229336">.</span><span class="ident" id="6229337">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229344">sym</span><span class="op" id="6229347">.</span><span class="ident" id="6229348">Sect</span>&nbsp;<span class="op" id="6229353">=</span>&nbsp;<span class="ident" id="6229355">n</span><span class="op" id="6229356">.</span><span class="ident" id="6229357">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229364">sym</span><span class="op" id="6229367">.</span><span class="ident" id="6229368">Desc</span>&nbsp;<span class="op" id="6229373">=</span>&nbsp;<span class="ident" id="6229375">n</span><span class="op" id="6229376">.</span><span class="ident" id="6229377">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229384">sym</span><span class="op" id="6229387">.</span><span class="ident" id="6229388">Value</span>&nbsp;<span class="op" id="6229394">=</span>&nbsp;<span class="ident" id="6229396">n</span><span class="op" id="6229397">.</span><span class="ident" id="6229398">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229408">st</span>&nbsp;<span class="op" id="6229411">:=</span>&nbsp;<span class="builtinfunc" id="6229414">new</span><span class="op" id="6229417">(</span><span class="ident" id="6229418">Symtab</span><span class="op" id="6229424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229427">st</span><span class="op" id="6229429">.</span><span class="ident" id="6229430">LoadBytes</span>&nbsp;<span class="op" id="6229440">=</span>&nbsp;<span class="ident" id="6229442">LoadBytes</span><span class="op" id="6229451">(</span><span class="ident" id="6229452">cmddat</span><span class="op" id="6229458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229461">st</span><span class="op" id="6229463">.</span><span class="ident" id="6229464">Syms</span>&nbsp;<span class="op" id="6229469">=</span>&nbsp;<span class="ident" id="6229471">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229479">return</span>&nbsp;<span class="ident" id="6229486">st</span><span class="op" id="6229488">,</span>&nbsp;<span class="ident" id="6229490">nil</span><br>
<span class="lineno"></span><span class="op" id="6229494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6229497">func</span>&nbsp;<span class="op" id="6229502">(</span><span class="ident" id="6229503">f</span>&nbsp;<span class="op" id="6229505">*</span><span class="ident" id="6229506">File</span><span class="op" id="6229510">)</span>&nbsp;<span class="ident" id="6229512">pushSection</span><span class="op" id="6229523">(</span><span class="ident" id="6229524">sh</span>&nbsp;<span class="op" id="6229527">*</span><span class="ident" id="6229528">Section</span><span class="op" id="6229535">,</span>&nbsp;<span class="ident" id="6229537">r</span>&nbsp;<span class="ident" id="6229539">io</span><span class="op" id="6229541">.</span><span class="ident" id="6229542">ReaderAt</span><span class="op" id="6229550">)</span>&nbsp;<span class="op" id="6229552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229555">f</span><span class="op" id="6229556">.</span><span class="ident" id="6229557">Sections</span>&nbsp;<span class="op" id="6229566">=</span>&nbsp;<span class="builtinfunc" id="6229568">append</span><span class="op" id="6229574">(</span><span class="ident" id="6229575">f</span><span class="op" id="6229576">.</span><span class="ident" id="6229577">Sections</span><span class="op" id="6229585">,</span>&nbsp;<span class="ident" id="6229587">sh</span><span class="op" id="6229589">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229592">sh</span><span class="op" id="6229594">.</span><span class="ident" id="6229595">sr</span>&nbsp;<span class="op" id="6229598">=</span>&nbsp;<span class="ident" id="6229600">io</span><span class="op" id="6229602">.</span><span class="ident" id="6229603">NewSectionReader</span><span class="op" id="6229619">(</span><span class="ident" id="6229620">r</span><span class="op" id="6229621">,</span>&nbsp;<span class="ident" id="6229623">int64</span><span class="op" id="6229628">(</span><span class="ident" id="6229629">sh</span><span class="op" id="6229631">.</span><span class="ident" id="6229632">Offset</span><span class="op" id="6229638">)</span><span class="op" id="6229639">,</span>&nbsp;<span class="ident" id="6229641">int64</span><span class="op" id="6229646">(</span><span class="ident" id="6229647">sh</span><span class="op" id="6229649">.</span><span class="ident" id="6229650">Size</span><span class="op" id="6229654">)</span><span class="op" id="6229655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229658">sh</span><span class="op" id="6229660">.</span><span class="ident" id="6229661">ReaderAt</span>&nbsp;<span class="op" id="6229670">=</span>&nbsp;<span class="ident" id="6229672">sh</span><span class="op" id="6229674">.</span><span class="ident" id="6229675">sr</span><br>
<span class="lineno"></span><span class="op" id="6229678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6229681">func</span>&nbsp;<span class="ident" id="6229686">cstring</span><span class="op" id="6229693">(</span><span class="ident" id="6229694">b</span>&nbsp;<span class="op" id="6229696">[</span><span class="op" id="6229697">]</span><span class="builtintype" id="6229698">byte</span><span class="op" id="6229702">)</span>&nbsp;<span class="builtintype" id="6229704">string</span>&nbsp;<span class="op" id="6229711">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229714">var</span>&nbsp;<span class="ident" id="6229718">i</span>&nbsp;<span class="builtintype" id="6229720">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229725">for</span>&nbsp;<span class="ident" id="6229729">i</span>&nbsp;<span class="op" id="6229731">=</span>&nbsp;<span class="num" id="6229733">0</span><span class="op" id="6229734">;</span>&nbsp;<span class="ident" id="6229736">i</span>&nbsp;<span class="op" id="6229738">&lt;</span>&nbsp;<span class="builtinfunc" id="6229740">len</span><span class="op" id="6229743">(</span><span class="ident" id="6229744">b</span><span class="op" id="6229745">)</span>&nbsp;<span class="op" id="6229747">&amp;&amp;</span>&nbsp;<span class="ident" id="6229750">b</span><span class="op" id="6229751">[</span><span class="ident" id="6229752">i</span><span class="op" id="6229753">]</span>&nbsp;<span class="op" id="6229755">!=</span>&nbsp;<span class="num" id="6229758">0</span><span class="op" id="6229759">;</span>&nbsp;<span class="ident" id="6229761">i</span><span class="op" id="6229762">++</span>&nbsp;<span class="op" id="6229765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229771">return</span>&nbsp;<span class="builtintype" id="6229778">string</span><span class="op" id="6229784">(</span><span class="ident" id="6229785">b</span><span class="op" id="6229786">[</span><span class="num" id="6229787">0</span><span class="op" id="6229788">:</span><span class="ident" id="6229789">i</span><span class="op" id="6229790">]</span><span class="op" id="6229791">)</span><br>
<span class="lineno"></span><span class="op" id="6229793">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6229796">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6229888">func</span>&nbsp;<span class="op" id="6229893">(</span><span class="ident" id="6229894">f</span>&nbsp;<span class="op" id="6229896">*</span><span class="ident" id="6229897">File</span><span class="op" id="6229901">)</span>&nbsp;<span class="ident" id="6229903">Segment</span><span class="op" id="6229910">(</span><span class="ident" id="6229911">name</span>&nbsp;<span class="builtintype" id="6229916">string</span><span class="op" id="6229922">)</span>&nbsp;<span class="op" id="6229924">*</span><span class="ident" id="6229925">Segment</span>&nbsp;<span class="op" id="6229933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229936">for</span>&nbsp;<span class="ident" id="6229940">_</span><span class="op" id="6229941">,</span>&nbsp;<span class="ident" id="6229943">l</span>&nbsp;<span class="op" id="6229945">:=</span>&nbsp;<span class="keyword" id="6229948">range</span>&nbsp;<span class="ident" id="6229954">f</span><span class="op" id="6229955">.</span><span class="ident" id="6229956">Loads</span>&nbsp;<span class="op" id="6229962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229966">if</span>&nbsp;<span class="ident" id="6229969">s</span><span class="op" id="6229970">,</span>&nbsp;<span class="ident" id="6229972">ok</span>&nbsp;<span class="op" id="6229975">:=</span>&nbsp;<span class="ident" id="6229978">l</span><span class="op" id="6229979">.</span><span class="op" id="6229980">(</span><span class="op" id="6229981">*</span><span class="ident" id="6229982">Segment</span><span class="op" id="6229989">)</span><span class="op" id="6229990">;</span>&nbsp;<span class="ident" id="6229992">ok</span>&nbsp;<span class="op" id="6229995">&amp;&amp;</span>&nbsp;<span class="ident" id="6229998">s</span><span class="op" id="6229999">.</span><span class="ident" id="6230000">Name</span>&nbsp;<span class="op" id="6230005">==</span>&nbsp;<span class="ident" id="6230008">name</span>&nbsp;<span class="op" id="6230013">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230018">return</span>&nbsp;<span class="ident" id="6230025">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230035">return</span>&nbsp;<span class="ident" id="6230042">nil</span><br>
<span class="lineno"></span><span class="op" id="6230046">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6230049">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6230125">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6230144">func</span>&nbsp;<span class="op" id="6230149">(</span><span class="ident" id="6230150">f</span>&nbsp;<span class="op" id="6230152">*</span><span class="ident" id="6230153">File</span><span class="op" id="6230157">)</span>&nbsp;<span class="ident" id="6230159">Section</span><span class="op" id="6230166">(</span><span class="ident" id="6230167">name</span>&nbsp;<span class="builtintype" id="6230172">string</span><span class="op" id="6230178">)</span>&nbsp;<span class="op" id="6230180">*</span><span class="ident" id="6230181">Section</span>&nbsp;<span class="op" id="6230189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230192">for</span>&nbsp;<span class="ident" id="6230196">_</span><span class="op" id="6230197">,</span>&nbsp;<span class="ident" id="6230199">s</span>&nbsp;<span class="op" id="6230201">:=</span>&nbsp;<span class="keyword" id="6230204">range</span>&nbsp;<span class="ident" id="6230210">f</span><span class="op" id="6230211">.</span><span class="ident" id="6230212">Sections</span>&nbsp;<span class="op" id="6230221">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230225">if</span>&nbsp;<span class="ident" id="6230228">s</span><span class="op" id="6230229">.</span><span class="ident" id="6230230">Name</span>&nbsp;<span class="op" id="6230235">==</span>&nbsp;<span class="ident" id="6230238">name</span>&nbsp;<span class="op" id="6230243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230248">return</span>&nbsp;<span class="ident" id="6230255">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230265">return</span>&nbsp;<span class="ident" id="6230272">nil</span><br>
<span class="lineno">470</span><span class="op" id="6230276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6230279">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6230345">func</span>&nbsp;<span class="op" id="6230350">(</span><span class="ident" id="6230351">f</span>&nbsp;<span class="op" id="6230353">*</span><span class="ident" id="6230354">File</span><span class="op" id="6230358">)</span>&nbsp;<span class="ident" id="6230360">DWARF</span><span class="op" id="6230365">(</span><span class="op" id="6230366">)</span>&nbsp;<span class="op" id="6230368">(</span><span class="op" id="6230369">*</span><span class="ident" id="6230370">dwarf</span><span class="op" id="6230375">.</span><span class="ident" id="6230376">Data</span><span class="op" id="6230380">,</span>&nbsp;<span class="builtintype" id="6230382">error</span><span class="op" id="6230387">)</span>&nbsp;<span class="op" id="6230389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230392">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230443">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6230498">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230557">var</span>&nbsp;<span class="ident" id="6230561">names</span>&nbsp;<span class="op" id="6230567">=</span>&nbsp;<span class="op" id="6230569">[</span><span class="op" id="6230570">...</span><span class="op" id="6230573">]</span><span class="builtintype" id="6230574">string</span><span class="op" id="6230580">{</span><span class="string" id="6230581">&#34;abbrev&#34;</span><span class="op" id="6230589">,</span>&nbsp;<span class="string" id="6230591">&#34;info&#34;</span><span class="op" id="6230597">,</span>&nbsp;<span class="string" id="6230599">&#34;str&#34;</span><span class="op" id="6230604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230607">var</span>&nbsp;<span class="ident" id="6230611">dat</span>&nbsp;<span class="op" id="6230615">[</span><span class="builtinfunc" id="6230616">len</span><span class="op" id="6230619">(</span><span class="ident" id="6230620">names</span><span class="op" id="6230625">)</span><span class="op" id="6230626">]</span><span class="op" id="6230627">[</span><span class="op" id="6230628">]</span><span class="builtintype" id="6230629">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230635">for</span>&nbsp;<span class="ident" id="6230639">i</span><span class="op" id="6230640">,</span>&nbsp;<span class="ident" id="6230642">name</span>&nbsp;<span class="op" id="6230647">:=</span>&nbsp;<span class="keyword" id="6230650">range</span>&nbsp;<span class="ident" id="6230656">names</span>&nbsp;<span class="op" id="6230662">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230666">name</span>&nbsp;<span class="op" id="6230671">=</span>&nbsp;<span class="string" id="6230673">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6230684">+</span>&nbsp;<span class="ident" id="6230686">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230693">s</span>&nbsp;<span class="op" id="6230695">:=</span>&nbsp;<span class="ident" id="6230698">f</span><span class="op" id="6230699">.</span><span class="ident" id="6230700">Section</span><span class="op" id="6230707">(</span><span class="ident" id="6230708">name</span><span class="op" id="6230712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230716">if</span>&nbsp;<span class="ident" id="6230719">s</span>&nbsp;<span class="op" id="6230721">==</span>&nbsp;<span class="ident" id="6230724">nil</span>&nbsp;<span class="op" id="6230728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230733">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230744">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230748">b</span><span class="op" id="6230749">,</span>&nbsp;<span class="ident" id="6230751">err</span>&nbsp;<span class="op" id="6230755">:=</span>&nbsp;<span class="ident" id="6230758">s</span><span class="op" id="6230759">.</span><span class="ident" id="6230760">Data</span><span class="op" id="6230764">(</span><span class="op" id="6230765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230769">if</span>&nbsp;<span class="ident" id="6230772">err</span>&nbsp;<span class="op" id="6230776">!=</span>&nbsp;<span class="ident" id="6230779">nil</span>&nbsp;<span class="op" id="6230783">&amp;&amp;</span>&nbsp;<span class="ident" id="6230786">uint64</span><span class="op" id="6230792">(</span><span class="builtinfunc" id="6230793">len</span><span class="op" id="6230796">(</span><span class="ident" id="6230797">b</span><span class="op" id="6230798">)</span><span class="op" id="6230799">)</span>&nbsp;<span class="op" id="6230801">&lt;</span>&nbsp;<span class="ident" id="6230803">s</span><span class="op" id="6230804">.</span><span class="ident" id="6230805">Size</span>&nbsp;<span class="op" id="6230810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230815">return</span>&nbsp;<span class="ident" id="6230822">nil</span><span class="op" id="6230825">,</span>&nbsp;<span class="ident" id="6230827">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230837">dat</span><span class="op" id="6230840">[</span><span class="ident" id="6230841">i</span><span class="op" id="6230842">]</span>&nbsp;<span class="op" id="6230844">=</span>&nbsp;<span class="ident" id="6230846">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230853">abbrev</span><span class="op" id="6230859">,</span>&nbsp;<span class="ident" id="6230861">info</span><span class="op" id="6230865">,</span>&nbsp;<span class="ident" id="6230867">str</span>&nbsp;<span class="op" id="6230871">:=</span>&nbsp;<span class="ident" id="6230874">dat</span><span class="op" id="6230877">[</span><span class="num" id="6230878">0</span><span class="op" id="6230879">]</span><span class="op" id="6230880">,</span>&nbsp;<span class="ident" id="6230882">dat</span><span class="op" id="6230885">[</span><span class="num" id="6230886">1</span><span class="op" id="6230887">]</span><span class="op" id="6230888">,</span>&nbsp;<span class="ident" id="6230890">dat</span><span class="op" id="6230893">[</span><span class="num" id="6230894">2</span><span class="op" id="6230895">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230898">return</span>&nbsp;<span class="ident" id="6230905">dwarf</span><span class="op" id="6230910">.</span><span class="ident" id="6230911">New</span><span class="op" id="6230914">(</span><span class="ident" id="6230915">abbrev</span><span class="op" id="6230921">,</span>&nbsp;<span class="ident" id="6230923">nil</span><span class="op" id="6230926">,</span>&nbsp;<span class="ident" id="6230928">nil</span><span class="op" id="6230931">,</span>&nbsp;<span class="ident" id="6230933">info</span><span class="op" id="6230937">,</span>&nbsp;<span class="ident" id="6230939">nil</span><span class="op" id="6230942">,</span>&nbsp;<span class="ident" id="6230944">nil</span><span class="op" id="6230947">,</span>&nbsp;<span class="ident" id="6230949">nil</span><span class="op" id="6230952">,</span>&nbsp;<span class="ident" id="6230954">str</span><span class="op" id="6230957">)</span><br>
<span class="lineno"></span><span class="op" id="6230959">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6230962">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6231014">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6231069">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6231123">func</span>&nbsp;<span class="op" id="6231128">(</span><span class="ident" id="6231129">f</span>&nbsp;<span class="op" id="6231131">*</span><span class="ident" id="6231132">File</span><span class="op" id="6231136">)</span>&nbsp;<span class="ident" id="6231138">ImportedSymbols</span><span class="op" id="6231153">(</span><span class="op" id="6231154">)</span>&nbsp;<span class="op" id="6231156">(</span><span class="op" id="6231157">[</span><span class="op" id="6231158">]</span><span class="builtintype" id="6231159">string</span><span class="op" id="6231165">,</span>&nbsp;<span class="builtintype" id="6231167">error</span><span class="op" id="6231172">)</span>&nbsp;<span class="op" id="6231174">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231177">if</span>&nbsp;<span class="ident" id="6231180">f</span><span class="op" id="6231181">.</span><span class="ident" id="6231182">Dysymtab</span>&nbsp;<span class="op" id="6231191">==</span>&nbsp;<span class="ident" id="6231194">nil</span>&nbsp;<span class="op" id="6231198">||</span>&nbsp;<span class="ident" id="6231201">f</span><span class="op" id="6231202">.</span><span class="ident" id="6231203">Symtab</span>&nbsp;<span class="op" id="6231210">==</span>&nbsp;<span class="ident" id="6231213">nil</span>&nbsp;<span class="op" id="6231217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231221">return</span>&nbsp;<span class="ident" id="6231228">nil</span><span class="op" id="6231231">,</span>&nbsp;<span class="op" id="6231233">&amp;</span><span class="ident" id="6231234">FormatError</span><span class="op" id="6231245">{</span><span class="num" id="6231246">0</span><span class="op" id="6231247">,</span>&nbsp;<span class="string" id="6231249">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6231271">,</span>&nbsp;<span class="ident" id="6231273">nil</span><span class="op" id="6231276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231283">st</span>&nbsp;<span class="op" id="6231286">:=</span>&nbsp;<span class="ident" id="6231289">f</span><span class="op" id="6231290">.</span><span class="ident" id="6231291">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231299">dt</span>&nbsp;<span class="op" id="6231302">:=</span>&nbsp;<span class="ident" id="6231305">f</span><span class="op" id="6231306">.</span><span class="ident" id="6231307">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231317">var</span>&nbsp;<span class="ident" id="6231321">all</span>&nbsp;<span class="op" id="6231325">[</span><span class="op" id="6231326">]</span><span class="builtintype" id="6231327">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231335">for</span>&nbsp;<span class="ident" id="6231339">_</span><span class="op" id="6231340">,</span>&nbsp;<span class="ident" id="6231342">s</span>&nbsp;<span class="op" id="6231344">:=</span>&nbsp;<span class="keyword" id="6231347">range</span>&nbsp;<span class="ident" id="6231353">st</span><span class="op" id="6231355">.</span><span class="ident" id="6231356">Syms</span><span class="op" id="6231360">[</span><span class="ident" id="6231361">dt</span><span class="op" id="6231363">.</span><span class="ident" id="6231364">Iundefsym</span>&nbsp;<span class="op" id="6231374">:</span>&nbsp;<span class="ident" id="6231376">dt</span><span class="op" id="6231378">.</span><span class="ident" id="6231379">Iundefsym</span><span class="op" id="6231388">+</span><span class="ident" id="6231389">dt</span><span class="op" id="6231391">.</span><span class="ident" id="6231392">Nundefsym</span><span class="op" id="6231401">]</span>&nbsp;<span class="op" id="6231403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231407">all</span>&nbsp;<span class="op" id="6231411">=</span>&nbsp;<span class="builtinfunc" id="6231413">append</span><span class="op" id="6231419">(</span><span class="ident" id="6231420">all</span><span class="op" id="6231423">,</span>&nbsp;<span class="ident" id="6231425">s</span><span class="op" id="6231426">.</span><span class="ident" id="6231427">Name</span><span class="op" id="6231431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231434">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231437">return</span>&nbsp;<span class="ident" id="6231444">all</span><span class="op" id="6231447">,</span>&nbsp;<span class="ident" id="6231449">nil</span><br>
<span class="lineno"></span><span class="op" id="6231453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6231456">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6231512">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6231567">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6231615">func</span>&nbsp;<span class="op" id="6231620">(</span><span class="ident" id="6231621">f</span>&nbsp;<span class="op" id="6231623">*</span><span class="ident" id="6231624">File</span><span class="op" id="6231628">)</span>&nbsp;<span class="ident" id="6231630">ImportedLibraries</span><span class="op" id="6231647">(</span><span class="op" id="6231648">)</span>&nbsp;<span class="op" id="6231650">(</span><span class="op" id="6231651">[</span><span class="op" id="6231652">]</span><span class="builtintype" id="6231653">string</span><span class="op" id="6231659">,</span>&nbsp;<span class="builtintype" id="6231661">error</span><span class="op" id="6231666">)</span>&nbsp;<span class="op" id="6231668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231671">var</span>&nbsp;<span class="ident" id="6231675">all</span>&nbsp;<span class="op" id="6231679">[</span><span class="op" id="6231680">]</span><span class="builtintype" id="6231681">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231689">for</span>&nbsp;<span class="ident" id="6231693">_</span><span class="op" id="6231694">,</span>&nbsp;<span class="ident" id="6231696">l</span>&nbsp;<span class="op" id="6231698">:=</span>&nbsp;<span class="keyword" id="6231701">range</span>&nbsp;<span class="ident" id="6231707">f</span><span class="op" id="6231708">.</span><span class="ident" id="6231709">Loads</span>&nbsp;<span class="op" id="6231715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231719">if</span>&nbsp;<span class="ident" id="6231722">lib</span><span class="op" id="6231725">,</span>&nbsp;<span class="ident" id="6231727">ok</span>&nbsp;<span class="op" id="6231730">:=</span>&nbsp;<span class="ident" id="6231733">l</span><span class="op" id="6231734">.</span><span class="op" id="6231735">(</span><span class="op" id="6231736">*</span><span class="ident" id="6231737">Dylib</span><span class="op" id="6231742">)</span><span class="op" id="6231743">;</span>&nbsp;<span class="ident" id="6231745">ok</span>&nbsp;<span class="op" id="6231748">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231753">all</span>&nbsp;<span class="op" id="6231757">=</span>&nbsp;<span class="builtinfunc" id="6231759">append</span><span class="op" id="6231765">(</span><span class="ident" id="6231766">all</span><span class="op" id="6231769">,</span>&nbsp;<span class="ident" id="6231771">lib</span><span class="op" id="6231774">.</span><span class="ident" id="6231775">Name</span><span class="op" id="6231779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231789">return</span>&nbsp;<span class="ident" id="6231796">all</span><span class="op" id="6231799">,</span>&nbsp;<span class="ident" id="6231801">nil</span><br>
<span class="lineno"></span><span class="op" id="6231805">}</span>
</div>
</body>
</html>
