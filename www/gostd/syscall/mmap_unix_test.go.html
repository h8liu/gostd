<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>syscall</h2>
<ul>
<li><a href="/gostd/syscall/creds_test.go.html">creds_test.go</a></li>
<li><a href="/gostd/syscall/env_unix.go.html">env_unix.go</a></li>
<li><a href="/gostd/syscall/exec_linux.go.html">exec_linux.go</a></li>
<li><a href="/gostd/syscall/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/syscall/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/syscall/flock.go.html">flock.go</a></li>
<li><a href="/gostd/syscall/lsf_linux.go.html">lsf_linux.go</a></li>
<li><a href="/gostd/syscall/mmap_unix_test.go.html" class="current">mmap_unix_test.go</a></li>
<li><a href="/gostd/syscall/netlink_linux.go.html">netlink_linux.go</a></li>
<li><a href="/gostd/syscall/race0.go.html">race0.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_linux.go.html">sockcmsg_linux.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_unix.go.html">sockcmsg_unix.go</a></li>
<li><a href="/gostd/syscall/str.go.html">str.go</a></li>
<li><a href="/gostd/syscall/syscall.go.html">syscall.go</a></li>
<li><a href="/gostd/syscall/syscall_linux.go.html">syscall_linux.go</a></li>
<li><a href="/gostd/syscall/syscall_linux_amd64.go.html">syscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/syscall_test.go.html">syscall_test.go</a></li>
<li><a href="/gostd/syscall/syscall_unix.go.html">syscall_unix.go</a></li>
<li><a href="/gostd/syscall/syscall_unix_test.go.html">syscall_unix_test.go</a></li>
<li><a href="/gostd/syscall/zerrors_linux_amd64.go.html">zerrors_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsyscall_linux_amd64.go.html">zsyscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsysnum_linux_amd64.go.html">zsysnum_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/ztypes_linux_amd64.go.html">ztypes_linux_amd64.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1187258">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1187313">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1187367">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1187418">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1187475">package</span>&nbsp;<span class="ident" id="1187483">syscall_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1187497">import</span>&nbsp;<span class="op" id="1187504">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1187507">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1187518">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="1187528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1187531">func</span>&nbsp;<span class="ident" id="1187536">TestMmap</span><span class="op" id="1187544">(</span><span class="ident" id="1187545">t</span>&nbsp;<span class="op" id="1187547">*</span><span class="ident" id="1187548">testing</span><span class="op" id="1187555">.</span><span class="ident" id="1187556">T</span><span class="op" id="1187557">)</span>&nbsp;<span class="op" id="1187559">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1187562">b</span><span class="op" id="1187563">,</span>&nbsp;<span class="ident" id="1187565">err</span>&nbsp;<span class="op" id="1187569">:=</span>&nbsp;<span class="ident" id="1187572">syscall</span><span class="op" id="1187579">.</span><span class="ident" id="1187580">Mmap</span><span class="op" id="1187584">(</span><span class="op" id="1187585">-</span><span class="num" id="1187586">1</span><span class="op" id="1187587">,</span>&nbsp;<span class="num" id="1187589">0</span><span class="op" id="1187590">,</span>&nbsp;<span class="ident" id="1187592">syscall</span><span class="op" id="1187599">.</span><span class="ident" id="1187600">Getpagesize</span><span class="op" id="1187611">(</span><span class="op" id="1187612">)</span><span class="op" id="1187613">,</span>&nbsp;<span class="ident" id="1187615">syscall</span><span class="op" id="1187622">.</span><span class="ident" id="1187623">PROT_NONE</span><span class="op" id="1187632">,</span>&nbsp;<span class="ident" id="1187634">syscall</span><span class="op" id="1187641">.</span><span class="ident" id="1187642">MAP_ANON</span><span class="op" id="1187650">|</span><span class="ident" id="1187651">syscall</span><span class="op" id="1187658">.</span><span class="ident" id="1187659">MAP_PRIVATE</span><span class="op" id="1187670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1187673">if</span>&nbsp;<span class="ident" id="1187676">err</span>&nbsp;<span class="op" id="1187680">!=</span>&nbsp;<span class="builtintype" id="1187683">nil</span>&nbsp;<span class="op" id="1187687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1187691">t</span><span class="op" id="1187692">.</span><span class="ident" id="1187693">Fatalf</span><span class="op" id="1187699">(</span><span class="string" id="1187700">&#34;Mmap:&nbsp;%v&#34;</span><span class="op" id="1187710">,</span>&nbsp;<span class="ident" id="1187712">err</span><span class="op" id="1187715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1187718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1187721">if</span>&nbsp;<span class="ident" id="1187724">err</span>&nbsp;<span class="op" id="1187728">:=</span>&nbsp;<span class="ident" id="1187731">syscall</span><span class="op" id="1187738">.</span><span class="ident" id="1187739">Munmap</span><span class="op" id="1187745">(</span><span class="ident" id="1187746">b</span><span class="op" id="1187747">)</span><span class="op" id="1187748">;</span>&nbsp;<span class="ident" id="1187750">err</span>&nbsp;<span class="op" id="1187754">!=</span>&nbsp;<span class="builtintype" id="1187757">nil</span>&nbsp;<span class="op" id="1187761">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1187765">t</span><span class="op" id="1187766">.</span><span class="ident" id="1187767">Fatalf</span><span class="op" id="1187773">(</span><span class="string" id="1187774">&#34;Munmap:&nbsp;%v&#34;</span><span class="op" id="1187786">,</span>&nbsp;<span class="ident" id="1187788">err</span><span class="op" id="1187791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1187794">}</span><br>
<span class="lineno"></span><span class="op" id="1187796">}</span>
</div>
</body>
</html>
