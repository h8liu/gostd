<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4621007">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4621062">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4621116">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4621167">//&nbsp;+build&nbsp;amd64&nbsp;amd64p32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4621193">package</span>&nbsp;<span class="ident" id="4621201">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4621208">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;the&nbsp;code&nbsp;to&nbsp;call&nbsp;the&nbsp;SSE&nbsp;4.2&nbsp;version&nbsp;of&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno">10</span><span class="comment" id="4621285">//&nbsp;CRC.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4621294">//&nbsp;haveSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;CPUID&nbsp;to&nbsp;test&nbsp;for&nbsp;SSE&nbsp;4.2</span><br>
<span class="lineno"></span><span class="comment" id="4621368">//&nbsp;support.</span><br>
<span class="lineno"></span><span class="keyword" id="4621380">func</span>&nbsp;<span class="ident" id="4621385">haveSSE42</span><span class="op" id="4621394">(</span><span class="op" id="4621395">)</span>&nbsp;<span class="builtintype" id="4621397">bool</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4621403">//&nbsp;castagnoliSSE42&nbsp;is&nbsp;defined&nbsp;in&nbsp;crc_amd64.s&nbsp;and&nbsp;uses&nbsp;the&nbsp;SSE4.2&nbsp;CRC32</span><br>
<span class="lineno"></span><span class="comment" id="4621474">//&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="keyword" id="4621490">func</span>&nbsp;<span class="ident" id="4621495">castagnoliSSE42</span><span class="op" id="4621510">(</span><span class="ident" id="4621511">crc</span>&nbsp;<span class="builtintype" id="4621515">uint32</span><span class="op" id="4621521">,</span>&nbsp;<span class="ident" id="4621523">p</span>&nbsp;<span class="op" id="4621525">[</span><span class="op" id="4621526">]</span><span class="builtintype" id="4621527">byte</span><span class="op" id="4621531">)</span>&nbsp;<span class="builtintype" id="4621533">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="4621541">var</span>&nbsp;<span class="ident" id="4621545">sse42</span>&nbsp;<span class="op" id="4621551">=</span>&nbsp;<span class="ident" id="4621553"><a href="/hash/crc32/crc32_amd64x.go.html#4621385">haveSSE42</a></span><span class="op" id="4621562">(</span><span class="op" id="4621563">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4621566">func</span>&nbsp;<span class="ident" id="4621571">updateCastagnoli</span><span class="op" id="4621587">(</span><span class="ident" id="4621588">crc</span>&nbsp;<span class="builtintype" id="4621592">uint32</span><span class="op" id="4621598">,</span>&nbsp;<span class="ident" id="4621600">p</span>&nbsp;<span class="op" id="4621602">[</span><span class="op" id="4621603">]</span><span class="builtintype" id="4621604">byte</span><span class="op" id="4621608">)</span>&nbsp;<span class="builtintype" id="4621610">uint32</span>&nbsp;<span class="op" id="4621617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4621620">if</span>&nbsp;<span class="ident" id="4621623"><a href="/hash/crc32/crc32_amd64x.go.html#4621545">sse42</a></span>&nbsp;<span class="op" id="4621629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4621633">return</span>&nbsp;<span class="ident" id="4621640"><a href="/hash/crc32/crc32_amd64x.go.html#4621495">castagnoliSSE42</a></span><span class="op" id="4621655">(</span><span class="ident" id="4621656"><a href="/hash/crc32/crc32_amd64x.go.html#4621588">crc</a></span><span class="op" id="4621659">,</span>&nbsp;<span class="ident" id="4621661"><a href="/hash/crc32/crc32_amd64x.go.html#4621600">p</a></span><span class="op" id="4621662">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4621665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4621668">return</span>&nbsp;<span class="ident" id="4621675"><a href="/hash/crc32/crc32.go.html#4620025">update</a></span><span class="op" id="4621681">(</span><span class="ident" id="4621682"><a href="/hash/crc32/crc32_amd64x.go.html#4621588">crc</a></span><span class="op" id="4621685">,</span>&nbsp;<span class="ident" id="4621687"><a href="/hash/crc32/crc32.go.html#4618672">castagnoliTable</a></span><span class="op" id="4621702">,</span>&nbsp;<span class="ident" id="4621704"><a href="/hash/crc32/crc32_amd64x.go.html#4621600">p</a></span><span class="op" id="4621705">)</span><br>
<span class="lineno"></span><span class="op" id="4621707">}</span>
</div>
</body>
</html>
