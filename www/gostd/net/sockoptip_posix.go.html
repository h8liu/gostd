<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html" class="current">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3358953">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3359009">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3359063">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3359114">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3359179">package</span>&nbsp;<span class="ident" id="3359187">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3359192">import</span>&nbsp;<span class="op" id="3359199">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3359202">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3359208">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3359218">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3359221">func</span>&nbsp;<span class="ident" id="3359226">joinIPv4Group</span><span class="op" id="3359239">(</span><span class="ident" id="3359240">fd</span>&nbsp;<span class="op" id="3359243">*</span><span class="ident" id="3359244">netFD</span><span class="op" id="3359249">,</span>&nbsp;<span class="ident" id="3359251">ifi</span>&nbsp;<span class="op" id="3359255">*</span><span class="ident" id="3359256">Interface</span><span class="op" id="3359265">,</span>&nbsp;<span class="ident" id="3359267">ip</span>&nbsp;<span class="ident" id="3359270">IP</span><span class="op" id="3359272">)</span>&nbsp;<span class="builtintype" id="3359274">error</span>&nbsp;<span class="op" id="3359280">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359283">mreq</span>&nbsp;<span class="op" id="3359288">:=</span>&nbsp;<span class="op" id="3359291">&amp;</span><span class="ident" id="3359292">syscall</span><span class="op" id="3359299">.</span><span class="ident" id="3359300">IPMreq</span><span class="op" id="3359306">{</span><span class="ident" id="3359307">Multiaddr</span><span class="op" id="3359316">:</span>&nbsp;<span class="op" id="3359318">[</span><span class="num" id="3359319">4</span><span class="op" id="3359320">]</span><span class="builtintype" id="3359321">byte</span><span class="op" id="3359325">{</span><span class="ident" id="3359326">ip</span><span class="op" id="3359328">[</span><span class="num" id="3359329">0</span><span class="op" id="3359330">]</span><span class="op" id="3359331">,</span>&nbsp;<span class="ident" id="3359333">ip</span><span class="op" id="3359335">[</span><span class="num" id="3359336">1</span><span class="op" id="3359337">]</span><span class="op" id="3359338">,</span>&nbsp;<span class="ident" id="3359340">ip</span><span class="op" id="3359342">[</span><span class="num" id="3359343">2</span><span class="op" id="3359344">]</span><span class="op" id="3359345">,</span>&nbsp;<span class="ident" id="3359347">ip</span><span class="op" id="3359349">[</span><span class="num" id="3359350">3</span><span class="op" id="3359351">]</span><span class="op" id="3359352">}</span><span class="op" id="3359353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359356">if</span>&nbsp;<span class="ident" id="3359359">err</span>&nbsp;<span class="op" id="3359363">:=</span>&nbsp;<span class="ident" id="3359366">setIPv4MreqToInterface</span><span class="op" id="3359388">(</span><span class="ident" id="3359389">mreq</span><span class="op" id="3359393">,</span>&nbsp;<span class="ident" id="3359395">ifi</span><span class="op" id="3359398">)</span><span class="op" id="3359399">;</span>&nbsp;<span class="ident" id="3359401">err</span>&nbsp;<span class="op" id="3359405">!=</span>&nbsp;<span class="builtintype" id="3359408">nil</span>&nbsp;<span class="op" id="3359412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359416">return</span>&nbsp;<span class="ident" id="3359423">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359431">if</span>&nbsp;<span class="ident" id="3359434">err</span>&nbsp;<span class="op" id="3359438">:=</span>&nbsp;<span class="ident" id="3359441">fd</span><span class="op" id="3359443">.</span><span class="ident" id="3359444">incref</span><span class="op" id="3359450">(</span><span class="op" id="3359451">)</span><span class="op" id="3359452">;</span>&nbsp;<span class="ident" id="3359454">err</span>&nbsp;<span class="op" id="3359458">!=</span>&nbsp;<span class="builtintype" id="3359461">nil</span>&nbsp;<span class="op" id="3359465">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359469">return</span>&nbsp;<span class="ident" id="3359476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359484">defer</span>&nbsp;<span class="ident" id="3359490">fd</span><span class="op" id="3359492">.</span><span class="ident" id="3359493">decref</span><span class="op" id="3359499">(</span><span class="op" id="3359500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359503">return</span>&nbsp;<span class="ident" id="3359510">os</span><span class="op" id="3359512">.</span><span class="ident" id="3359513">NewSyscallError</span><span class="op" id="3359528">(</span><span class="string" id="3359529">&#34;setsockopt&#34;</span><span class="op" id="3359541">,</span>&nbsp;<span class="ident" id="3359543">syscall</span><span class="op" id="3359550">.</span><span class="ident" id="3359551">SetsockoptIPMreq</span><span class="op" id="3359567">(</span><span class="ident" id="3359568">fd</span><span class="op" id="3359570">.</span><span class="ident" id="3359571">sysfd</span><span class="op" id="3359576">,</span>&nbsp;<span class="ident" id="3359578">syscall</span><span class="op" id="3359585">.</span><span class="ident" id="3359586">IPPROTO_IP</span><span class="op" id="3359596">,</span>&nbsp;<span class="ident" id="3359598">syscall</span><span class="op" id="3359605">.</span><span class="ident" id="3359606">IP_ADD_MEMBERSHIP</span><span class="op" id="3359623">,</span>&nbsp;<span class="ident" id="3359625">mreq</span><span class="op" id="3359629">)</span><span class="op" id="3359630">)</span><br>
<span class="lineno"></span><span class="op" id="3359632">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3359635">func</span>&nbsp;<span class="ident" id="3359640">setIPv6MulticastInterface</span><span class="op" id="3359665">(</span><span class="ident" id="3359666">fd</span>&nbsp;<span class="op" id="3359669">*</span><span class="ident" id="3359670">netFD</span><span class="op" id="3359675">,</span>&nbsp;<span class="ident" id="3359677">ifi</span>&nbsp;<span class="op" id="3359681">*</span><span class="ident" id="3359682">Interface</span><span class="op" id="3359691">)</span>&nbsp;<span class="builtintype" id="3359693">error</span>&nbsp;<span class="op" id="3359699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359702">var</span>&nbsp;<span class="ident" id="3359706">v</span>&nbsp;<span class="builtintype" id="3359708">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359713">if</span>&nbsp;<span class="ident" id="3359716">ifi</span>&nbsp;<span class="op" id="3359720">!=</span>&nbsp;<span class="builtintype" id="3359723">nil</span>&nbsp;<span class="op" id="3359727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359731">v</span>&nbsp;<span class="op" id="3359733">=</span>&nbsp;<span class="ident" id="3359735">ifi</span><span class="op" id="3359738">.</span><span class="ident" id="3359739">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359749">if</span>&nbsp;<span class="ident" id="3359752">err</span>&nbsp;<span class="op" id="3359756">:=</span>&nbsp;<span class="ident" id="3359759">fd</span><span class="op" id="3359761">.</span><span class="ident" id="3359762">incref</span><span class="op" id="3359768">(</span><span class="op" id="3359769">)</span><span class="op" id="3359770">;</span>&nbsp;<span class="ident" id="3359772">err</span>&nbsp;<span class="op" id="3359776">!=</span>&nbsp;<span class="builtintype" id="3359779">nil</span>&nbsp;<span class="op" id="3359783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359787">return</span>&nbsp;<span class="ident" id="3359794">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359802">defer</span>&nbsp;<span class="ident" id="3359808">fd</span><span class="op" id="3359810">.</span><span class="ident" id="3359811">decref</span><span class="op" id="3359817">(</span><span class="op" id="3359818">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359821">return</span>&nbsp;<span class="ident" id="3359828">os</span><span class="op" id="3359830">.</span><span class="ident" id="3359831">NewSyscallError</span><span class="op" id="3359846">(</span><span class="string" id="3359847">&#34;setsockopt&#34;</span><span class="op" id="3359859">,</span>&nbsp;<span class="ident" id="3359861">syscall</span><span class="op" id="3359868">.</span><span class="ident" id="3359869">SetsockoptInt</span><span class="op" id="3359882">(</span><span class="ident" id="3359883">fd</span><span class="op" id="3359885">.</span><span class="ident" id="3359886">sysfd</span><span class="op" id="3359891">,</span>&nbsp;<span class="ident" id="3359893">syscall</span><span class="op" id="3359900">.</span><span class="ident" id="3359901">IPPROTO_IPV6</span><span class="op" id="3359913">,</span>&nbsp;<span class="ident" id="3359915">syscall</span><span class="op" id="3359922">.</span><span class="ident" id="3359923">IPV6_MULTICAST_IF</span><span class="op" id="3359940">,</span>&nbsp;<span class="ident" id="3359942">v</span><span class="op" id="3359943">)</span><span class="op" id="3359944">)</span><br>
<span class="lineno"></span><span class="op" id="3359946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3359949">func</span>&nbsp;<span class="ident" id="3359954">setIPv6MulticastLoopback</span><span class="op" id="3359978">(</span><span class="ident" id="3359979">fd</span>&nbsp;<span class="op" id="3359982">*</span><span class="ident" id="3359983">netFD</span><span class="op" id="3359988">,</span>&nbsp;<span class="ident" id="3359990">v</span>&nbsp;<span class="builtintype" id="3359992">bool</span><span class="op" id="3359996">)</span>&nbsp;<span class="builtintype" id="3359998">error</span>&nbsp;<span class="op" id="3360004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360007">if</span>&nbsp;<span class="ident" id="3360010">err</span>&nbsp;<span class="op" id="3360014">:=</span>&nbsp;<span class="ident" id="3360017">fd</span><span class="op" id="3360019">.</span><span class="ident" id="3360020">incref</span><span class="op" id="3360026">(</span><span class="op" id="3360027">)</span><span class="op" id="3360028">;</span>&nbsp;<span class="ident" id="3360030">err</span>&nbsp;<span class="op" id="3360034">!=</span>&nbsp;<span class="builtintype" id="3360037">nil</span>&nbsp;<span class="op" id="3360041">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360045">return</span>&nbsp;<span class="ident" id="3360052">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360060">defer</span>&nbsp;<span class="ident" id="3360066">fd</span><span class="op" id="3360068">.</span><span class="ident" id="3360069">decref</span><span class="op" id="3360075">(</span><span class="op" id="3360076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360079">return</span>&nbsp;<span class="ident" id="3360086">os</span><span class="op" id="3360088">.</span><span class="ident" id="3360089">NewSyscallError</span><span class="op" id="3360104">(</span><span class="string" id="3360105">&#34;setsockopt&#34;</span><span class="op" id="3360117">,</span>&nbsp;<span class="ident" id="3360119">syscall</span><span class="op" id="3360126">.</span><span class="ident" id="3360127">SetsockoptInt</span><span class="op" id="3360140">(</span><span class="ident" id="3360141">fd</span><span class="op" id="3360143">.</span><span class="ident" id="3360144">sysfd</span><span class="op" id="3360149">,</span>&nbsp;<span class="ident" id="3360151">syscall</span><span class="op" id="3360158">.</span><span class="ident" id="3360159">IPPROTO_IPV6</span><span class="op" id="3360171">,</span>&nbsp;<span class="ident" id="3360173">syscall</span><span class="op" id="3360180">.</span><span class="ident" id="3360181">IPV6_MULTICAST_LOOP</span><span class="op" id="3360200">,</span>&nbsp;<span class="ident" id="3360202">boolint</span><span class="op" id="3360209">(</span><span class="ident" id="3360210">v</span><span class="op" id="3360211">)</span><span class="op" id="3360212">)</span><span class="op" id="3360213">)</span><br>
<span class="lineno"></span><span class="op" id="3360215">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3360218">func</span>&nbsp;<span class="ident" id="3360223">joinIPv6Group</span><span class="op" id="3360236">(</span><span class="ident" id="3360237">fd</span>&nbsp;<span class="op" id="3360240">*</span><span class="ident" id="3360241">netFD</span><span class="op" id="3360246">,</span>&nbsp;<span class="ident" id="3360248">ifi</span>&nbsp;<span class="op" id="3360252">*</span><span class="ident" id="3360253">Interface</span><span class="op" id="3360262">,</span>&nbsp;<span class="ident" id="3360264">ip</span>&nbsp;<span class="ident" id="3360267">IP</span><span class="op" id="3360269">)</span>&nbsp;<span class="builtintype" id="3360271">error</span>&nbsp;<span class="op" id="3360277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3360280">mreq</span>&nbsp;<span class="op" id="3360285">:=</span>&nbsp;<span class="op" id="3360288">&amp;</span><span class="ident" id="3360289">syscall</span><span class="op" id="3360296">.</span><span class="ident" id="3360297">IPv6Mreq</span><span class="op" id="3360305">{</span><span class="op" id="3360306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3360309">copy</span><span class="op" id="3360313">(</span><span class="ident" id="3360314">mreq</span><span class="op" id="3360318">.</span><span class="ident" id="3360319">Multiaddr</span><span class="op" id="3360328">[</span><span class="op" id="3360329">:</span><span class="op" id="3360330">]</span><span class="op" id="3360331">,</span>&nbsp;<span class="ident" id="3360333">ip</span><span class="op" id="3360335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360338">if</span>&nbsp;<span class="ident" id="3360341">ifi</span>&nbsp;<span class="op" id="3360345">!=</span>&nbsp;<span class="builtintype" id="3360348">nil</span>&nbsp;<span class="op" id="3360352">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3360356">mreq</span><span class="op" id="3360360">.</span><span class="ident" id="3360361">Interface</span>&nbsp;<span class="op" id="3360371">=</span>&nbsp;<span class="builtintype" id="3360373">uint32</span><span class="op" id="3360379">(</span><span class="ident" id="3360380">ifi</span><span class="op" id="3360383">.</span><span class="ident" id="3360384">Index</span><span class="op" id="3360389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360395">if</span>&nbsp;<span class="ident" id="3360398">err</span>&nbsp;<span class="op" id="3360402">:=</span>&nbsp;<span class="ident" id="3360405">fd</span><span class="op" id="3360407">.</span><span class="ident" id="3360408">incref</span><span class="op" id="3360414">(</span><span class="op" id="3360415">)</span><span class="op" id="3360416">;</span>&nbsp;<span class="ident" id="3360418">err</span>&nbsp;<span class="op" id="3360422">!=</span>&nbsp;<span class="builtintype" id="3360425">nil</span>&nbsp;<span class="op" id="3360429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360433">return</span>&nbsp;<span class="ident" id="3360440">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360445">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360448">defer</span>&nbsp;<span class="ident" id="3360454">fd</span><span class="op" id="3360456">.</span><span class="ident" id="3360457">decref</span><span class="op" id="3360463">(</span><span class="op" id="3360464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360467">return</span>&nbsp;<span class="ident" id="3360474">os</span><span class="op" id="3360476">.</span><span class="ident" id="3360477">NewSyscallError</span><span class="op" id="3360492">(</span><span class="string" id="3360493">&#34;setsockopt&#34;</span><span class="op" id="3360505">,</span>&nbsp;<span class="ident" id="3360507">syscall</span><span class="op" id="3360514">.</span><span class="ident" id="3360515">SetsockoptIPv6Mreq</span><span class="op" id="3360533">(</span><span class="ident" id="3360534">fd</span><span class="op" id="3360536">.</span><span class="ident" id="3360537">sysfd</span><span class="op" id="3360542">,</span>&nbsp;<span class="ident" id="3360544">syscall</span><span class="op" id="3360551">.</span><span class="ident" id="3360552">IPPROTO_IPV6</span><span class="op" id="3360564">,</span>&nbsp;<span class="ident" id="3360566">syscall</span><span class="op" id="3360573">.</span><span class="ident" id="3360574">IPV6_JOIN_GROUP</span><span class="op" id="3360589">,</span>&nbsp;<span class="ident" id="3360591">mreq</span><span class="op" id="3360595">)</span><span class="op" id="3360596">)</span><br>
<span class="lineno"></span><span class="op" id="3360598">}</span>
</div>
</body>
</html>
