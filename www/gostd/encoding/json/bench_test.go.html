<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html" class="current">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7356287">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7356343">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7356397">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7356448">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="7356473">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7356527">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="7356577">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="7356626">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7356661">package</span>&nbsp;<span class="ident" id="7356669">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356675">import</span>&nbsp;<span class="op" id="7356682">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356685">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356694">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356711">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356724">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356730">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7356740">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7356743">type</span>&nbsp;<span class="ident" id="7356748">codeResponse</span>&nbsp;<span class="keyword" id="7356761">struct</span>&nbsp;<span class="op" id="7356768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356771">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356780">*</span><span class="ident" id="7356781">codeNode</span>&nbsp;<span class="string" id="7356790">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356805">Username</span>&nbsp;<span class="builtintype" id="7356814">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356824">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="7356842">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7356845">type</span>&nbsp;<span class="ident" id="7356850">codeNode</span>&nbsp;<span class="keyword" id="7356859">struct</span>&nbsp;<span class="op" id="7356866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356869">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7356878">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356890">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356905">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356914">[</span><span class="op" id="7356915">]</span><span class="op" id="7356916">*</span><span class="ident" id="7356917">codeNode</span>&nbsp;<span class="string" id="7356926">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356941">CLWeight</span>&nbsp;<span class="builtintype" id="7356950">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356962">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356982">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="7356991">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357003">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357021">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357030">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357042">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357058">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357067">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357079">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357095">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357104">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357116">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="7357132">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7357135">var</span>&nbsp;<span class="ident" id="7357139">codeJSON</span>&nbsp;<span class="op" id="7357148">[</span><span class="op" id="7357149">]</span><span class="builtintype" id="7357150">byte</span><br>
<span class="lineno"></span><span class="keyword" id="7357155">var</span>&nbsp;<span class="ident" id="7357159">codeStruct</span>&nbsp;<span class="ident" id="7357170">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357184">func</span>&nbsp;<span class="ident" id="7357189">codeInit</span><span class="op" id="7357197">(</span><span class="op" id="7357198">)</span>&nbsp;<span class="op" id="7357200">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357203">f</span><span class="op" id="7357204">,</span>&nbsp;<span class="ident" id="7357206">err</span>&nbsp;<span class="op" id="7357210">:=</span>&nbsp;<span class="ident" id="7357213">os</span><span class="op" id="7357215">.</span><span class="ident" id="7357216">Open</span><span class="op" id="7357220">(</span><span class="string" id="7357221">&#34;testdata/code.json.gz&#34;</span><span class="op" id="7357244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357247">if</span>&nbsp;<span class="ident" id="7357250">err</span>&nbsp;<span class="op" id="7357254">!=</span>&nbsp;<span class="ident" id="7357257">nil</span>&nbsp;<span class="op" id="7357261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357265">panic</span><span class="op" id="7357270">(</span><span class="ident" id="7357271">err</span><span class="op" id="7357274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357280">defer</span>&nbsp;<span class="ident" id="7357286">f</span><span class="op" id="7357287">.</span><span class="ident" id="7357288">Close</span><span class="op" id="7357293">(</span><span class="op" id="7357294">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357297">gz</span><span class="op" id="7357299">,</span>&nbsp;<span class="ident" id="7357301">err</span>&nbsp;<span class="op" id="7357305">:=</span>&nbsp;<span class="ident" id="7357308">gzip</span><span class="op" id="7357312">.</span><span class="ident" id="7357313">NewReader</span><span class="op" id="7357322">(</span><span class="ident" id="7357323">f</span><span class="op" id="7357324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357327">if</span>&nbsp;<span class="ident" id="7357330">err</span>&nbsp;<span class="op" id="7357334">!=</span>&nbsp;<span class="ident" id="7357337">nil</span>&nbsp;<span class="op" id="7357341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357345">panic</span><span class="op" id="7357350">(</span><span class="ident" id="7357351">err</span><span class="op" id="7357354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357360">data</span><span class="op" id="7357364">,</span>&nbsp;<span class="ident" id="7357366">err</span>&nbsp;<span class="op" id="7357370">:=</span>&nbsp;<span class="ident" id="7357373">ioutil</span><span class="op" id="7357379">.</span><span class="ident" id="7357380">ReadAll</span><span class="op" id="7357387">(</span><span class="ident" id="7357388">gz</span><span class="op" id="7357390">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357393">if</span>&nbsp;<span class="ident" id="7357396">err</span>&nbsp;<span class="op" id="7357400">!=</span>&nbsp;<span class="ident" id="7357403">nil</span>&nbsp;<span class="op" id="7357407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357411">panic</span><span class="op" id="7357416">(</span><span class="ident" id="7357417">err</span><span class="op" id="7357420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357427">codeJSON</span>&nbsp;<span class="op" id="7357436">=</span>&nbsp;<span class="ident" id="7357438">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357445">if</span>&nbsp;<span class="ident" id="7357448">err</span>&nbsp;<span class="op" id="7357452">:=</span>&nbsp;<span class="ident" id="7357455">Unmarshal</span><span class="op" id="7357464">(</span><span class="ident" id="7357465">codeJSON</span><span class="op" id="7357473">,</span>&nbsp;<span class="op" id="7357475">&amp;</span><span class="ident" id="7357476">codeStruct</span><span class="op" id="7357486">)</span><span class="op" id="7357487">;</span>&nbsp;<span class="ident" id="7357489">err</span>&nbsp;<span class="op" id="7357493">!=</span>&nbsp;<span class="ident" id="7357496">nil</span>&nbsp;<span class="op" id="7357500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357504">panic</span><span class="op" id="7357509">(</span><span class="string" id="7357510">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="7357534">+</span>&nbsp;<span class="ident" id="7357536">err</span><span class="op" id="7357539">.</span><span class="ident" id="7357540">Error</span><span class="op" id="7357545">(</span><span class="op" id="7357546">)</span><span class="op" id="7357547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357554">if</span>&nbsp;<span class="ident" id="7357557">data</span><span class="op" id="7357561">,</span>&nbsp;<span class="ident" id="7357563">err</span>&nbsp;<span class="op" id="7357567">=</span>&nbsp;<span class="ident" id="7357569">Marshal</span><span class="op" id="7357576">(</span><span class="op" id="7357577">&amp;</span><span class="ident" id="7357578">codeStruct</span><span class="op" id="7357588">)</span><span class="op" id="7357589">;</span>&nbsp;<span class="ident" id="7357591">err</span>&nbsp;<span class="op" id="7357595">!=</span>&nbsp;<span class="ident" id="7357598">nil</span>&nbsp;<span class="op" id="7357602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357606">panic</span><span class="op" id="7357611">(</span><span class="string" id="7357612">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="7357634">+</span>&nbsp;<span class="ident" id="7357636">err</span><span class="op" id="7357639">.</span><span class="ident" id="7357640">Error</span><span class="op" id="7357645">(</span><span class="op" id="7357646">)</span><span class="op" id="7357647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357654">if</span>&nbsp;<span class="op" id="7357657">!</span><span class="ident" id="7357658">bytes</span><span class="op" id="7357663">.</span><span class="ident" id="7357664">Equal</span><span class="op" id="7357669">(</span><span class="ident" id="7357670">data</span><span class="op" id="7357674">,</span>&nbsp;<span class="ident" id="7357676">codeJSON</span><span class="op" id="7357684">)</span>&nbsp;<span class="op" id="7357686">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357690">println</span><span class="op" id="7357697">(</span><span class="string" id="7357698">&#34;different&nbsp;lengths&#34;</span><span class="op" id="7357717">,</span>&nbsp;<span class="builtinfunc" id="7357719">len</span><span class="op" id="7357722">(</span><span class="ident" id="7357723">data</span><span class="op" id="7357727">)</span><span class="op" id="7357728">,</span>&nbsp;<span class="builtinfunc" id="7357730">len</span><span class="op" id="7357733">(</span><span class="ident" id="7357734">codeJSON</span><span class="op" id="7357742">)</span><span class="op" id="7357743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357747">for</span>&nbsp;<span class="ident" id="7357751">i</span>&nbsp;<span class="op" id="7357753">:=</span>&nbsp;<span class="num" id="7357756">0</span><span class="op" id="7357757">;</span>&nbsp;<span class="ident" id="7357759">i</span>&nbsp;<span class="op" id="7357761">&lt;</span>&nbsp;<span class="builtinfunc" id="7357763">len</span><span class="op" id="7357766">(</span><span class="ident" id="7357767">data</span><span class="op" id="7357771">)</span>&nbsp;<span class="op" id="7357773">&amp;&amp;</span>&nbsp;<span class="ident" id="7357776">i</span>&nbsp;<span class="op" id="7357778">&lt;</span>&nbsp;<span class="builtinfunc" id="7357780">len</span><span class="op" id="7357783">(</span><span class="ident" id="7357784">codeJSON</span><span class="op" id="7357792">)</span><span class="op" id="7357793">;</span>&nbsp;<span class="ident" id="7357795">i</span><span class="op" id="7357796">++</span>&nbsp;<span class="op" id="7357799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357804">if</span>&nbsp;<span class="ident" id="7357807">data</span><span class="op" id="7357811">[</span><span class="ident" id="7357812">i</span><span class="op" id="7357813">]</span>&nbsp;<span class="op" id="7357815">!=</span>&nbsp;<span class="ident" id="7357818">codeJSON</span><span class="op" id="7357826">[</span><span class="ident" id="7357827">i</span><span class="op" id="7357828">]</span>&nbsp;<span class="op" id="7357830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357836">println</span><span class="op" id="7357843">(</span><span class="string" id="7357844">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="7357873">,</span>&nbsp;<span class="ident" id="7357875">i</span><span class="op" id="7357876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357882">println</span><span class="op" id="7357889">(</span><span class="string" id="7357890">&#34;orig:&nbsp;&#34;</span><span class="op" id="7357898">,</span>&nbsp;<span class="builtintype" id="7357900">string</span><span class="op" id="7357906">(</span><span class="ident" id="7357907">codeJSON</span><span class="op" id="7357915">[</span><span class="ident" id="7357916">i</span><span class="op" id="7357917">-</span><span class="num" id="7357918">10</span><span class="op" id="7357920">:</span><span class="ident" id="7357921">i</span><span class="op" id="7357922">+</span><span class="num" id="7357923">10</span><span class="op" id="7357925">]</span><span class="op" id="7357926">)</span><span class="op" id="7357927">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357933">println</span><span class="op" id="7357940">(</span><span class="string" id="7357941">&#34;new:&nbsp;&#34;</span><span class="op" id="7357948">,</span>&nbsp;<span class="builtintype" id="7357950">string</span><span class="op" id="7357956">(</span><span class="ident" id="7357957">data</span><span class="op" id="7357961">[</span><span class="ident" id="7357962">i</span><span class="op" id="7357963">-</span><span class="num" id="7357964">10</span><span class="op" id="7357966">:</span><span class="ident" id="7357967">i</span><span class="op" id="7357968">+</span><span class="num" id="7357969">10</span><span class="op" id="7357971">]</span><span class="op" id="7357972">)</span><span class="op" id="7357973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357979">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357996">panic</span><span class="op" id="7358001">(</span><span class="string" id="7358002">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="7358042">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358045">}</span><br>
<span class="lineno"></span><span class="op" id="7358047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358050">func</span>&nbsp;<span class="ident" id="7358055">BenchmarkCodeEncoder</span><span class="op" id="7358075">(</span><span class="ident" id="7358076">b</span>&nbsp;<span class="op" id="7358078">*</span><span class="ident" id="7358079">testing</span><span class="op" id="7358086">.</span><span class="ident" id="7358087">B</span><span class="op" id="7358088">)</span>&nbsp;<span class="op" id="7358090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358093">if</span>&nbsp;<span class="ident" id="7358096">codeJSON</span>&nbsp;<span class="op" id="7358105">==</span>&nbsp;<span class="ident" id="7358108">nil</span>&nbsp;<span class="op" id="7358112">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358116">b</span><span class="op" id="7358117">.</span><span class="ident" id="7358118">StopTimer</span><span class="op" id="7358127">(</span><span class="op" id="7358128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358132">codeInit</span><span class="op" id="7358140">(</span><span class="op" id="7358141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358145">b</span><span class="op" id="7358146">.</span><span class="ident" id="7358147">StartTimer</span><span class="op" id="7358157">(</span><span class="op" id="7358158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358164">enc</span>&nbsp;<span class="op" id="7358168">:=</span>&nbsp;<span class="ident" id="7358171">NewEncoder</span><span class="op" id="7358181">(</span><span class="ident" id="7358182">ioutil</span><span class="op" id="7358188">.</span><span class="ident" id="7358189">Discard</span><span class="op" id="7358196">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358199">for</span>&nbsp;<span class="ident" id="7358203">i</span>&nbsp;<span class="op" id="7358205">:=</span>&nbsp;<span class="num" id="7358208">0</span><span class="op" id="7358209">;</span>&nbsp;<span class="ident" id="7358211">i</span>&nbsp;<span class="op" id="7358213">&lt;</span>&nbsp;<span class="ident" id="7358215">b</span><span class="op" id="7358216">.</span><span class="ident" id="7358217">N</span><span class="op" id="7358218">;</span>&nbsp;<span class="ident" id="7358220">i</span><span class="op" id="7358221">++</span>&nbsp;<span class="op" id="7358224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358228">if</span>&nbsp;<span class="ident" id="7358231">err</span>&nbsp;<span class="op" id="7358235">:=</span>&nbsp;<span class="ident" id="7358238">enc</span><span class="op" id="7358241">.</span><span class="ident" id="7358242">Encode</span><span class="op" id="7358248">(</span><span class="op" id="7358249">&amp;</span><span class="ident" id="7358250">codeStruct</span><span class="op" id="7358260">)</span><span class="op" id="7358261">;</span>&nbsp;<span class="ident" id="7358263">err</span>&nbsp;<span class="op" id="7358267">!=</span>&nbsp;<span class="ident" id="7358270">nil</span>&nbsp;<span class="op" id="7358274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358279">b</span><span class="op" id="7358280">.</span><span class="ident" id="7358281">Fatal</span><span class="op" id="7358286">(</span><span class="string" id="7358287">&#34;Encode:&#34;</span><span class="op" id="7358296">,</span>&nbsp;<span class="ident" id="7358298">err</span><span class="op" id="7358301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358308">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358311">b</span><span class="op" id="7358312">.</span><span class="ident" id="7358313">SetBytes</span><span class="op" id="7358321">(</span><span class="ident" id="7358322">int64</span><span class="op" id="7358327">(</span><span class="builtinfunc" id="7358328">len</span><span class="op" id="7358331">(</span><span class="ident" id="7358332">codeJSON</span><span class="op" id="7358340">)</span><span class="op" id="7358341">)</span><span class="op" id="7358342">)</span><br>
<span class="lineno"></span><span class="op" id="7358344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358347">func</span>&nbsp;<span class="ident" id="7358352">BenchmarkCodeMarshal</span><span class="op" id="7358372">(</span><span class="ident" id="7358373">b</span>&nbsp;<span class="op" id="7358375">*</span><span class="ident" id="7358376">testing</span><span class="op" id="7358383">.</span><span class="ident" id="7358384">B</span><span class="op" id="7358385">)</span>&nbsp;<span class="op" id="7358387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358390">if</span>&nbsp;<span class="ident" id="7358393">codeJSON</span>&nbsp;<span class="op" id="7358402">==</span>&nbsp;<span class="ident" id="7358405">nil</span>&nbsp;<span class="op" id="7358409">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358413">b</span><span class="op" id="7358414">.</span><span class="ident" id="7358415">StopTimer</span><span class="op" id="7358424">(</span><span class="op" id="7358425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358429">codeInit</span><span class="op" id="7358437">(</span><span class="op" id="7358438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358442">b</span><span class="op" id="7358443">.</span><span class="ident" id="7358444">StartTimer</span><span class="op" id="7358454">(</span><span class="op" id="7358455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358461">for</span>&nbsp;<span class="ident" id="7358465">i</span>&nbsp;<span class="op" id="7358467">:=</span>&nbsp;<span class="num" id="7358470">0</span><span class="op" id="7358471">;</span>&nbsp;<span class="ident" id="7358473">i</span>&nbsp;<span class="op" id="7358475">&lt;</span>&nbsp;<span class="ident" id="7358477">b</span><span class="op" id="7358478">.</span><span class="ident" id="7358479">N</span><span class="op" id="7358480">;</span>&nbsp;<span class="ident" id="7358482">i</span><span class="op" id="7358483">++</span>&nbsp;<span class="op" id="7358486">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358490">if</span>&nbsp;<span class="ident" id="7358493">_</span><span class="op" id="7358494">,</span>&nbsp;<span class="ident" id="7358496">err</span>&nbsp;<span class="op" id="7358500">:=</span>&nbsp;<span class="ident" id="7358503">Marshal</span><span class="op" id="7358510">(</span><span class="op" id="7358511">&amp;</span><span class="ident" id="7358512">codeStruct</span><span class="op" id="7358522">)</span><span class="op" id="7358523">;</span>&nbsp;<span class="ident" id="7358525">err</span>&nbsp;<span class="op" id="7358529">!=</span>&nbsp;<span class="ident" id="7358532">nil</span>&nbsp;<span class="op" id="7358536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358541">b</span><span class="op" id="7358542">.</span><span class="ident" id="7358543">Fatal</span><span class="op" id="7358548">(</span><span class="string" id="7358549">&#34;Marshal:&#34;</span><span class="op" id="7358559">,</span>&nbsp;<span class="ident" id="7358561">err</span><span class="op" id="7358564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358574">b</span><span class="op" id="7358575">.</span><span class="ident" id="7358576">SetBytes</span><span class="op" id="7358584">(</span><span class="ident" id="7358585">int64</span><span class="op" id="7358590">(</span><span class="builtinfunc" id="7358591">len</span><span class="op" id="7358594">(</span><span class="ident" id="7358595">codeJSON</span><span class="op" id="7358603">)</span><span class="op" id="7358604">)</span><span class="op" id="7358605">)</span><br>
<span class="lineno">105</span><span class="op" id="7358607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358610">func</span>&nbsp;<span class="ident" id="7358615">BenchmarkCodeDecoder</span><span class="op" id="7358635">(</span><span class="ident" id="7358636">b</span>&nbsp;<span class="op" id="7358638">*</span><span class="ident" id="7358639">testing</span><span class="op" id="7358646">.</span><span class="ident" id="7358647">B</span><span class="op" id="7358648">)</span>&nbsp;<span class="op" id="7358650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358653">if</span>&nbsp;<span class="ident" id="7358656">codeJSON</span>&nbsp;<span class="op" id="7358665">==</span>&nbsp;<span class="ident" id="7358668">nil</span>&nbsp;<span class="op" id="7358672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358676">b</span><span class="op" id="7358677">.</span><span class="ident" id="7358678">StopTimer</span><span class="op" id="7358687">(</span><span class="op" id="7358688">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358692">codeInit</span><span class="op" id="7358700">(</span><span class="op" id="7358701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358705">b</span><span class="op" id="7358706">.</span><span class="ident" id="7358707">StartTimer</span><span class="op" id="7358717">(</span><span class="op" id="7358718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358724">var</span>&nbsp;<span class="ident" id="7358728">buf</span>&nbsp;<span class="ident" id="7358732">bytes</span><span class="op" id="7358737">.</span><span class="ident" id="7358738">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358746">dec</span>&nbsp;<span class="op" id="7358750">:=</span>&nbsp;<span class="ident" id="7358753">NewDecoder</span><span class="op" id="7358763">(</span><span class="op" id="7358764">&amp;</span><span class="ident" id="7358765">buf</span><span class="op" id="7358768">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358771">var</span>&nbsp;<span class="ident" id="7358775">r</span>&nbsp;<span class="ident" id="7358777">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358791">for</span>&nbsp;<span class="ident" id="7358795">i</span>&nbsp;<span class="op" id="7358797">:=</span>&nbsp;<span class="num" id="7358800">0</span><span class="op" id="7358801">;</span>&nbsp;<span class="ident" id="7358803">i</span>&nbsp;<span class="op" id="7358805">&lt;</span>&nbsp;<span class="ident" id="7358807">b</span><span class="op" id="7358808">.</span><span class="ident" id="7358809">N</span><span class="op" id="7358810">;</span>&nbsp;<span class="ident" id="7358812">i</span><span class="op" id="7358813">++</span>&nbsp;<span class="op" id="7358816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358820">buf</span><span class="op" id="7358823">.</span><span class="ident" id="7358824">Write</span><span class="op" id="7358829">(</span><span class="ident" id="7358830">codeJSON</span><span class="op" id="7358838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7358842">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358856">buf</span><span class="op" id="7358859">.</span><span class="ident" id="7358860">WriteByte</span><span class="op" id="7358869">(</span><span class="string" id="7358870">&#39;\n&#39;</span><span class="op" id="7358874">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358878">buf</span><span class="op" id="7358881">.</span><span class="ident" id="7358882">WriteByte</span><span class="op" id="7358891">(</span><span class="string" id="7358892">&#39;\n&#39;</span><span class="op" id="7358896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358900">buf</span><span class="op" id="7358903">.</span><span class="ident" id="7358904">WriteByte</span><span class="op" id="7358913">(</span><span class="string" id="7358914">&#39;\n&#39;</span><span class="op" id="7358918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358922">if</span>&nbsp;<span class="ident" id="7358925">err</span>&nbsp;<span class="op" id="7358929">:=</span>&nbsp;<span class="ident" id="7358932">dec</span><span class="op" id="7358935">.</span><span class="ident" id="7358936">Decode</span><span class="op" id="7358942">(</span><span class="op" id="7358943">&amp;</span><span class="ident" id="7358944">r</span><span class="op" id="7358945">)</span><span class="op" id="7358946">;</span>&nbsp;<span class="ident" id="7358948">err</span>&nbsp;<span class="op" id="7358952">!=</span>&nbsp;<span class="ident" id="7358955">nil</span>&nbsp;<span class="op" id="7358959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358964">b</span><span class="op" id="7358965">.</span><span class="ident" id="7358966">Fatal</span><span class="op" id="7358971">(</span><span class="string" id="7358972">&#34;Decode:&#34;</span><span class="op" id="7358981">,</span>&nbsp;<span class="ident" id="7358983">err</span><span class="op" id="7358986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358990">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358996">b</span><span class="op" id="7358997">.</span><span class="ident" id="7358998">SetBytes</span><span class="op" id="7359006">(</span><span class="ident" id="7359007">int64</span><span class="op" id="7359012">(</span><span class="builtinfunc" id="7359013">len</span><span class="op" id="7359016">(</span><span class="ident" id="7359017">codeJSON</span><span class="op" id="7359025">)</span><span class="op" id="7359026">)</span><span class="op" id="7359027">)</span><br>
<span class="lineno"></span><span class="op" id="7359029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359032">func</span>&nbsp;<span class="ident" id="7359037">BenchmarkCodeUnmarshal</span><span class="op" id="7359059">(</span><span class="ident" id="7359060">b</span>&nbsp;<span class="op" id="7359062">*</span><span class="ident" id="7359063">testing</span><span class="op" id="7359070">.</span><span class="ident" id="7359071">B</span><span class="op" id="7359072">)</span>&nbsp;<span class="op" id="7359074">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359077">if</span>&nbsp;<span class="ident" id="7359080">codeJSON</span>&nbsp;<span class="op" id="7359089">==</span>&nbsp;<span class="ident" id="7359092">nil</span>&nbsp;<span class="op" id="7359096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359100">b</span><span class="op" id="7359101">.</span><span class="ident" id="7359102">StopTimer</span><span class="op" id="7359111">(</span><span class="op" id="7359112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359116">codeInit</span><span class="op" id="7359124">(</span><span class="op" id="7359125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359129">b</span><span class="op" id="7359130">.</span><span class="ident" id="7359131">StartTimer</span><span class="op" id="7359141">(</span><span class="op" id="7359142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359145">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359148">for</span>&nbsp;<span class="ident" id="7359152">i</span>&nbsp;<span class="op" id="7359154">:=</span>&nbsp;<span class="num" id="7359157">0</span><span class="op" id="7359158">;</span>&nbsp;<span class="ident" id="7359160">i</span>&nbsp;<span class="op" id="7359162">&lt;</span>&nbsp;<span class="ident" id="7359164">b</span><span class="op" id="7359165">.</span><span class="ident" id="7359166">N</span><span class="op" id="7359167">;</span>&nbsp;<span class="ident" id="7359169">i</span><span class="op" id="7359170">++</span>&nbsp;<span class="op" id="7359173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359177">var</span>&nbsp;<span class="ident" id="7359181">r</span>&nbsp;<span class="ident" id="7359183">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359198">if</span>&nbsp;<span class="ident" id="7359201">err</span>&nbsp;<span class="op" id="7359205">:=</span>&nbsp;<span class="ident" id="7359208">Unmarshal</span><span class="op" id="7359217">(</span><span class="ident" id="7359218">codeJSON</span><span class="op" id="7359226">,</span>&nbsp;<span class="op" id="7359228">&amp;</span><span class="ident" id="7359229">r</span><span class="op" id="7359230">)</span><span class="op" id="7359231">;</span>&nbsp;<span class="ident" id="7359233">err</span>&nbsp;<span class="op" id="7359237">!=</span>&nbsp;<span class="ident" id="7359240">nil</span>&nbsp;<span class="op" id="7359244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359249">b</span><span class="op" id="7359250">.</span><span class="ident" id="7359251">Fatal</span><span class="op" id="7359256">(</span><span class="string" id="7359257">&#34;Unmmarshal:&#34;</span><span class="op" id="7359270">,</span>&nbsp;<span class="ident" id="7359272">err</span><span class="op" id="7359275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359279">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359285">b</span><span class="op" id="7359286">.</span><span class="ident" id="7359287">SetBytes</span><span class="op" id="7359295">(</span><span class="ident" id="7359296">int64</span><span class="op" id="7359301">(</span><span class="builtinfunc" id="7359302">len</span><span class="op" id="7359305">(</span><span class="ident" id="7359306">codeJSON</span><span class="op" id="7359314">)</span><span class="op" id="7359315">)</span><span class="op" id="7359316">)</span><br>
<span class="lineno"></span><span class="op" id="7359318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359321">func</span>&nbsp;<span class="ident" id="7359326">BenchmarkCodeUnmarshalReuse</span><span class="op" id="7359353">(</span><span class="ident" id="7359354">b</span>&nbsp;<span class="op" id="7359356">*</span><span class="ident" id="7359357">testing</span><span class="op" id="7359364">.</span><span class="ident" id="7359365">B</span><span class="op" id="7359366">)</span>&nbsp;<span class="op" id="7359368">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359371">if</span>&nbsp;<span class="ident" id="7359374">codeJSON</span>&nbsp;<span class="op" id="7359383">==</span>&nbsp;<span class="ident" id="7359386">nil</span>&nbsp;<span class="op" id="7359390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359394">b</span><span class="op" id="7359395">.</span><span class="ident" id="7359396">StopTimer</span><span class="op" id="7359405">(</span><span class="op" id="7359406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359410">codeInit</span><span class="op" id="7359418">(</span><span class="op" id="7359419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359423">b</span><span class="op" id="7359424">.</span><span class="ident" id="7359425">StartTimer</span><span class="op" id="7359435">(</span><span class="op" id="7359436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359439">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359442">var</span>&nbsp;<span class="ident" id="7359446">r</span>&nbsp;<span class="ident" id="7359448">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359462">for</span>&nbsp;<span class="ident" id="7359466">i</span>&nbsp;<span class="op" id="7359468">:=</span>&nbsp;<span class="num" id="7359471">0</span><span class="op" id="7359472">;</span>&nbsp;<span class="ident" id="7359474">i</span>&nbsp;<span class="op" id="7359476">&lt;</span>&nbsp;<span class="ident" id="7359478">b</span><span class="op" id="7359479">.</span><span class="ident" id="7359480">N</span><span class="op" id="7359481">;</span>&nbsp;<span class="ident" id="7359483">i</span><span class="op" id="7359484">++</span>&nbsp;<span class="op" id="7359487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359491">if</span>&nbsp;<span class="ident" id="7359494">err</span>&nbsp;<span class="op" id="7359498">:=</span>&nbsp;<span class="ident" id="7359501">Unmarshal</span><span class="op" id="7359510">(</span><span class="ident" id="7359511">codeJSON</span><span class="op" id="7359519">,</span>&nbsp;<span class="op" id="7359521">&amp;</span><span class="ident" id="7359522">r</span><span class="op" id="7359523">)</span><span class="op" id="7359524">;</span>&nbsp;<span class="ident" id="7359526">err</span>&nbsp;<span class="op" id="7359530">!=</span>&nbsp;<span class="ident" id="7359533">nil</span>&nbsp;<span class="op" id="7359537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359542">b</span><span class="op" id="7359543">.</span><span class="ident" id="7359544">Fatal</span><span class="op" id="7359549">(</span><span class="string" id="7359550">&#34;Unmmarshal:&#34;</span><span class="op" id="7359563">,</span>&nbsp;<span class="ident" id="7359565">err</span><span class="op" id="7359568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359572">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359575">}</span><br>
<span class="lineno"></span><span class="op" id="7359577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359580">func</span>&nbsp;<span class="ident" id="7359585">BenchmarkUnmarshalString</span><span class="op" id="7359609">(</span><span class="ident" id="7359610">b</span>&nbsp;<span class="op" id="7359612">*</span><span class="ident" id="7359613">testing</span><span class="op" id="7359620">.</span><span class="ident" id="7359621">B</span><span class="op" id="7359622">)</span>&nbsp;<span class="op" id="7359624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359627">data</span>&nbsp;<span class="op" id="7359632">:=</span>&nbsp;<span class="op" id="7359635">[</span><span class="op" id="7359636">]</span><span class="builtintype" id="7359637">byte</span><span class="op" id="7359641">(</span><span class="string" id="7359642">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="7359658">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359661">var</span>&nbsp;<span class="ident" id="7359665">s</span>&nbsp;<span class="builtintype" id="7359667">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359676">for</span>&nbsp;<span class="ident" id="7359680">i</span>&nbsp;<span class="op" id="7359682">:=</span>&nbsp;<span class="num" id="7359685">0</span><span class="op" id="7359686">;</span>&nbsp;<span class="ident" id="7359688">i</span>&nbsp;<span class="op" id="7359690">&lt;</span>&nbsp;<span class="ident" id="7359692">b</span><span class="op" id="7359693">.</span><span class="ident" id="7359694">N</span><span class="op" id="7359695">;</span>&nbsp;<span class="ident" id="7359697">i</span><span class="op" id="7359698">++</span>&nbsp;<span class="op" id="7359701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359705">if</span>&nbsp;<span class="ident" id="7359708">err</span>&nbsp;<span class="op" id="7359712">:=</span>&nbsp;<span class="ident" id="7359715">Unmarshal</span><span class="op" id="7359724">(</span><span class="ident" id="7359725">data</span><span class="op" id="7359729">,</span>&nbsp;<span class="op" id="7359731">&amp;</span><span class="ident" id="7359732">s</span><span class="op" id="7359733">)</span><span class="op" id="7359734">;</span>&nbsp;<span class="ident" id="7359736">err</span>&nbsp;<span class="op" id="7359740">!=</span>&nbsp;<span class="ident" id="7359743">nil</span>&nbsp;<span class="op" id="7359747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359752">b</span><span class="op" id="7359753">.</span><span class="ident" id="7359754">Fatal</span><span class="op" id="7359759">(</span><span class="string" id="7359760">&#34;Unmarshal:&#34;</span><span class="op" id="7359772">,</span>&nbsp;<span class="ident" id="7359774">err</span><span class="op" id="7359777">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359784">}</span><br>
<span class="lineno"></span><span class="op" id="7359786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359789">func</span>&nbsp;<span class="ident" id="7359794">BenchmarkUnmarshalFloat64</span><span class="op" id="7359819">(</span><span class="ident" id="7359820">b</span>&nbsp;<span class="op" id="7359822">*</span><span class="ident" id="7359823">testing</span><span class="op" id="7359830">.</span><span class="ident" id="7359831">B</span><span class="op" id="7359832">)</span>&nbsp;<span class="op" id="7359834">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359837">var</span>&nbsp;<span class="ident" id="7359841">f</span>&nbsp;<span class="builtintype" id="7359843">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359852">data</span>&nbsp;<span class="op" id="7359857">:=</span>&nbsp;<span class="op" id="7359860">[</span><span class="op" id="7359861">]</span><span class="builtintype" id="7359862">byte</span><span class="op" id="7359866">(</span><span class="string" id="7359867">`3.14`</span><span class="op" id="7359873">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359877">for</span>&nbsp;<span class="ident" id="7359881">i</span>&nbsp;<span class="op" id="7359883">:=</span>&nbsp;<span class="num" id="7359886">0</span><span class="op" id="7359887">;</span>&nbsp;<span class="ident" id="7359889">i</span>&nbsp;<span class="op" id="7359891">&lt;</span>&nbsp;<span class="ident" id="7359893">b</span><span class="op" id="7359894">.</span><span class="ident" id="7359895">N</span><span class="op" id="7359896">;</span>&nbsp;<span class="ident" id="7359898">i</span><span class="op" id="7359899">++</span>&nbsp;<span class="op" id="7359902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7359906">if</span>&nbsp;<span class="ident" id="7359909">err</span>&nbsp;<span class="op" id="7359913">:=</span>&nbsp;<span class="ident" id="7359916">Unmarshal</span><span class="op" id="7359925">(</span><span class="ident" id="7359926">data</span><span class="op" id="7359930">,</span>&nbsp;<span class="op" id="7359932">&amp;</span><span class="ident" id="7359933">f</span><span class="op" id="7359934">)</span><span class="op" id="7359935">;</span>&nbsp;<span class="ident" id="7359937">err</span>&nbsp;<span class="op" id="7359941">!=</span>&nbsp;<span class="ident" id="7359944">nil</span>&nbsp;<span class="op" id="7359948">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359953">b</span><span class="op" id="7359954">.</span><span class="ident" id="7359955">Fatal</span><span class="op" id="7359960">(</span><span class="string" id="7359961">&#34;Unmarshal:&#34;</span><span class="op" id="7359973">,</span>&nbsp;<span class="ident" id="7359975">err</span><span class="op" id="7359978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7359985">}</span><br>
<span class="lineno"></span><span class="op" id="7359987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7359990">func</span>&nbsp;<span class="ident" id="7359995">BenchmarkUnmarshalInt64</span><span class="op" id="7360018">(</span><span class="ident" id="7360019">b</span>&nbsp;<span class="op" id="7360021">*</span><span class="ident" id="7360022">testing</span><span class="op" id="7360029">.</span><span class="ident" id="7360030">B</span><span class="op" id="7360031">)</span>&nbsp;<span class="op" id="7360033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7360036">var</span>&nbsp;<span class="ident" id="7360040">x</span>&nbsp;<span class="ident" id="7360042">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7360049">data</span>&nbsp;<span class="op" id="7360054">:=</span>&nbsp;<span class="op" id="7360057">[</span><span class="op" id="7360058">]</span><span class="builtintype" id="7360059">byte</span><span class="op" id="7360063">(</span><span class="string" id="7360064">`3`</span><span class="op" id="7360067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7360071">for</span>&nbsp;<span class="ident" id="7360075">i</span>&nbsp;<span class="op" id="7360077">:=</span>&nbsp;<span class="num" id="7360080">0</span><span class="op" id="7360081">;</span>&nbsp;<span class="ident" id="7360083">i</span>&nbsp;<span class="op" id="7360085">&lt;</span>&nbsp;<span class="ident" id="7360087">b</span><span class="op" id="7360088">.</span><span class="ident" id="7360089">N</span><span class="op" id="7360090">;</span>&nbsp;<span class="ident" id="7360092">i</span><span class="op" id="7360093">++</span>&nbsp;<span class="op" id="7360096">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7360100">if</span>&nbsp;<span class="ident" id="7360103">err</span>&nbsp;<span class="op" id="7360107">:=</span>&nbsp;<span class="ident" id="7360110">Unmarshal</span><span class="op" id="7360119">(</span><span class="ident" id="7360120">data</span><span class="op" id="7360124">,</span>&nbsp;<span class="op" id="7360126">&amp;</span><span class="ident" id="7360127">x</span><span class="op" id="7360128">)</span><span class="op" id="7360129">;</span>&nbsp;<span class="ident" id="7360131">err</span>&nbsp;<span class="op" id="7360135">!=</span>&nbsp;<span class="ident" id="7360138">nil</span>&nbsp;<span class="op" id="7360142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7360147">b</span><span class="op" id="7360148">.</span><span class="ident" id="7360149">Fatal</span><span class="op" id="7360154">(</span><span class="string" id="7360155">&#34;Unmarshal:&#34;</span><span class="op" id="7360167">,</span>&nbsp;<span class="ident" id="7360169">err</span><span class="op" id="7360172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7360176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7360179">}</span><br>
<span class="lineno"></span><span class="op" id="7360181">}</span>
</div>
</body>
</html>
