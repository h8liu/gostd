<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4836307">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4836362">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4836416">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4836467">package</span>&nbsp;<span class="ident" id="4836475">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4836481">import</span>&nbsp;<span class="op" id="4836488">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4836491">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4836501">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4836504">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4836577">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4836645">type</span>&nbsp;<span class="ident" id="4836650">tagOptions</span>&nbsp;<span class="builtintype" id="4836661">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4836669">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4836732">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4836760">func</span>&nbsp;<span class="ident" id="4836765">parseTag</span><span class="op" id="4836773">(</span><span class="ident" id="4836774">tag</span>&nbsp;<span class="builtintype" id="4836778">string</span><span class="op" id="4836784">)</span>&nbsp;<span class="op" id="4836786">(</span><span class="builtintype" id="4836787">string</span><span class="op" id="4836793">,</span>&nbsp;<span class="ident" id="4836795">tagOptions</span><span class="op" id="4836805">)</span>&nbsp;<span class="op" id="4836807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4836810">if</span>&nbsp;<span class="ident" id="4836813">idx</span>&nbsp;<span class="op" id="4836817">:=</span>&nbsp;<span class="ident" id="4836820">strings</span><span class="op" id="4836827">.</span><span class="ident" id="4836828">Index</span><span class="op" id="4836833">(</span><span class="ident" id="4836834">tag</span><span class="op" id="4836837">,</span>&nbsp;<span class="string" id="4836839">&#34;,&#34;</span><span class="op" id="4836842">)</span><span class="op" id="4836843">;</span>&nbsp;<span class="ident" id="4836845">idx</span>&nbsp;<span class="op" id="4836849">!=</span>&nbsp;<span class="op" id="4836852">-</span><span class="num" id="4836853">1</span>&nbsp;<span class="op" id="4836855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4836859">return</span>&nbsp;<span class="ident" id="4836866">tag</span><span class="op" id="4836869">[</span><span class="op" id="4836870">:</span><span class="ident" id="4836871">idx</span><span class="op" id="4836874">]</span><span class="op" id="4836875">,</span>&nbsp;<span class="ident" id="4836877">tagOptions</span><span class="op" id="4836887">(</span><span class="ident" id="4836888">tag</span><span class="op" id="4836891">[</span><span class="ident" id="4836892">idx</span><span class="op" id="4836895">+</span><span class="num" id="4836896">1</span><span class="op" id="4836897">:</span><span class="op" id="4836898">]</span><span class="op" id="4836899">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4836902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4836905">return</span>&nbsp;<span class="ident" id="4836912">tag</span><span class="op" id="4836915">,</span>&nbsp;<span class="ident" id="4836917">tagOptions</span><span class="op" id="4836927">(</span><span class="string" id="4836928">&#34;&#34;</span><span class="op" id="4836930">)</span><br>
<span class="lineno"></span><span class="op" id="4836932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4836935">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4836997">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4837066">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4837096">func</span>&nbsp;<span class="op" id="4837101">(</span><span class="ident" id="4837102">o</span>&nbsp;<span class="ident" id="4837104">tagOptions</span><span class="op" id="4837114">)</span>&nbsp;<span class="ident" id="4837116">Contains</span><span class="op" id="4837124">(</span><span class="ident" id="4837125">optionName</span>&nbsp;<span class="builtintype" id="4837136">string</span><span class="op" id="4837142">)</span>&nbsp;<span class="builtintype" id="4837144">bool</span>&nbsp;<span class="op" id="4837149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837152">if</span>&nbsp;<span class="builtinfunc" id="4837155">len</span><span class="op" id="4837158">(</span><span class="ident" id="4837159">o</span><span class="op" id="4837160">)</span>&nbsp;<span class="op" id="4837162">==</span>&nbsp;<span class="num" id="4837165">0</span>&nbsp;<span class="op" id="4837167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837171">return</span>&nbsp;<span class="builtintype" id="4837178">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4837185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4837188">s</span>&nbsp;<span class="op" id="4837190">:=</span>&nbsp;<span class="builtintype" id="4837193">string</span><span class="op" id="4837199">(</span><span class="ident" id="4837200">o</span><span class="op" id="4837201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837204">for</span>&nbsp;<span class="ident" id="4837208">s</span>&nbsp;<span class="op" id="4837210">!=</span>&nbsp;<span class="string" id="4837213">&#34;&#34;</span>&nbsp;<span class="op" id="4837216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837220">var</span>&nbsp;<span class="ident" id="4837224">next</span>&nbsp;<span class="builtintype" id="4837229">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4837238">i</span>&nbsp;<span class="op" id="4837240">:=</span>&nbsp;<span class="ident" id="4837243">strings</span><span class="op" id="4837250">.</span><span class="ident" id="4837251">Index</span><span class="op" id="4837256">(</span><span class="ident" id="4837257">s</span><span class="op" id="4837258">,</span>&nbsp;<span class="string" id="4837260">&#34;,&#34;</span><span class="op" id="4837263">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837267">if</span>&nbsp;<span class="ident" id="4837270">i</span>&nbsp;<span class="op" id="4837272">&gt;=</span>&nbsp;<span class="num" id="4837275">0</span>&nbsp;<span class="op" id="4837277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4837282">s</span><span class="op" id="4837283">,</span>&nbsp;<span class="ident" id="4837285">next</span>&nbsp;<span class="op" id="4837290">=</span>&nbsp;<span class="ident" id="4837292">s</span><span class="op" id="4837293">[</span><span class="op" id="4837294">:</span><span class="ident" id="4837295">i</span><span class="op" id="4837296">]</span><span class="op" id="4837297">,</span>&nbsp;<span class="ident" id="4837299">s</span><span class="op" id="4837300">[</span><span class="ident" id="4837301">i</span><span class="op" id="4837302">+</span><span class="num" id="4837303">1</span><span class="op" id="4837304">:</span><span class="op" id="4837305">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4837309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837313">if</span>&nbsp;<span class="ident" id="4837316">s</span>&nbsp;<span class="op" id="4837318">==</span>&nbsp;<span class="ident" id="4837321">optionName</span>&nbsp;<span class="op" id="4837332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837337">return</span>&nbsp;<span class="builtintype" id="4837344">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4837351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4837355">s</span>&nbsp;<span class="op" id="4837357">=</span>&nbsp;<span class="ident" id="4837359">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4837365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4837368">return</span>&nbsp;<span class="builtintype" id="4837375">false</span><br>
<span class="lineno"></span><span class="op" id="4837381">}</span>
</div>
</body>
</html>
