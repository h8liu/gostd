<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html" class="current">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7044794">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7044849">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7044903">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7044954">package</span>&nbsp;<span class="ident" id="7044962">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7044968">import</span>&nbsp;<span class="op" id="7044975">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7044978">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7044988">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7044991">var</span>&nbsp;<span class="ident" id="7044995">ParseRangeTests</span>&nbsp;<span class="op" id="7045011">=</span>&nbsp;<span class="op" id="7045013">[</span><span class="op" id="7045014">]</span><span class="keyword" id="7045015">struct</span>&nbsp;<span class="op" id="7045022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045025">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7045032">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045040">length</span>&nbsp;<span class="ident" id="7045047">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045054">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7045061">[</span><span class="op" id="7045062">]</span><span class="ident" id="7045063">httpRange</span><br>
<span class="lineno">15</span><span class="op" id="7045073">}</span><span class="op" id="7045074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045077">{</span><span class="string" id="7045078">&#34;&#34;</span><span class="op" id="7045080">,</span>&nbsp;<span class="num" id="7045082">0</span><span class="op" id="7045083">,</span>&nbsp;<span class="ident" id="7045085">nil</span><span class="op" id="7045088">}</span><span class="op" id="7045089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045092">{</span><span class="string" id="7045093">&#34;&#34;</span><span class="op" id="7045095">,</span>&nbsp;<span class="num" id="7045097">1000</span><span class="op" id="7045101">,</span>&nbsp;<span class="ident" id="7045103">nil</span><span class="op" id="7045106">}</span><span class="op" id="7045107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045110">{</span><span class="string" id="7045111">&#34;foo&#34;</span><span class="op" id="7045116">,</span>&nbsp;<span class="num" id="7045118">0</span><span class="op" id="7045119">,</span>&nbsp;<span class="ident" id="7045121">nil</span><span class="op" id="7045124">}</span><span class="op" id="7045125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045128">{</span><span class="string" id="7045129">&#34;bytes=&#34;</span><span class="op" id="7045137">,</span>&nbsp;<span class="num" id="7045139">0</span><span class="op" id="7045140">,</span>&nbsp;<span class="ident" id="7045142">nil</span><span class="op" id="7045145">}</span><span class="op" id="7045146">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045149">{</span><span class="string" id="7045150">&#34;bytes=7&#34;</span><span class="op" id="7045159">,</span>&nbsp;<span class="num" id="7045161">10</span><span class="op" id="7045163">,</span>&nbsp;<span class="ident" id="7045165">nil</span><span class="op" id="7045168">}</span><span class="op" id="7045169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045172">{</span><span class="string" id="7045173">&#34;bytes=&nbsp;7&nbsp;&#34;</span><span class="op" id="7045184">,</span>&nbsp;<span class="num" id="7045186">10</span><span class="op" id="7045188">,</span>&nbsp;<span class="ident" id="7045190">nil</span><span class="op" id="7045193">}</span><span class="op" id="7045194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045197">{</span><span class="string" id="7045198">&#34;bytes=1-&#34;</span><span class="op" id="7045208">,</span>&nbsp;<span class="num" id="7045210">0</span><span class="op" id="7045211">,</span>&nbsp;<span class="ident" id="7045213">nil</span><span class="op" id="7045216">}</span><span class="op" id="7045217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045220">{</span><span class="string" id="7045221">&#34;bytes=5-4&#34;</span><span class="op" id="7045232">,</span>&nbsp;<span class="num" id="7045234">10</span><span class="op" id="7045236">,</span>&nbsp;<span class="ident" id="7045238">nil</span><span class="op" id="7045241">}</span><span class="op" id="7045242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045245">{</span><span class="string" id="7045246">&#34;bytes=0-2,5-4&#34;</span><span class="op" id="7045261">,</span>&nbsp;<span class="num" id="7045263">10</span><span class="op" id="7045265">,</span>&nbsp;<span class="ident" id="7045267">nil</span><span class="op" id="7045270">}</span><span class="op" id="7045271">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045274">{</span><span class="string" id="7045275">&#34;bytes=2-5,4-3&#34;</span><span class="op" id="7045290">,</span>&nbsp;<span class="num" id="7045292">10</span><span class="op" id="7045294">,</span>&nbsp;<span class="ident" id="7045296">nil</span><span class="op" id="7045299">}</span><span class="op" id="7045300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045303">{</span><span class="string" id="7045304">&#34;bytes=--5,4--3&#34;</span><span class="op" id="7045320">,</span>&nbsp;<span class="num" id="7045322">10</span><span class="op" id="7045324">,</span>&nbsp;<span class="ident" id="7045326">nil</span><span class="op" id="7045329">}</span><span class="op" id="7045330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045333">{</span><span class="string" id="7045334">&#34;bytes=A-&#34;</span><span class="op" id="7045344">,</span>&nbsp;<span class="num" id="7045346">10</span><span class="op" id="7045348">,</span>&nbsp;<span class="ident" id="7045350">nil</span><span class="op" id="7045353">}</span><span class="op" id="7045354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045357">{</span><span class="string" id="7045358">&#34;bytes=A-&nbsp;&#34;</span><span class="op" id="7045369">,</span>&nbsp;<span class="num" id="7045371">10</span><span class="op" id="7045373">,</span>&nbsp;<span class="ident" id="7045375">nil</span><span class="op" id="7045378">}</span><span class="op" id="7045379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045382">{</span><span class="string" id="7045383">&#34;bytes=A-Z&#34;</span><span class="op" id="7045394">,</span>&nbsp;<span class="num" id="7045396">10</span><span class="op" id="7045398">,</span>&nbsp;<span class="ident" id="7045400">nil</span><span class="op" id="7045403">}</span><span class="op" id="7045404">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045407">{</span><span class="string" id="7045408">&#34;bytes=&nbsp;-Z&#34;</span><span class="op" id="7045419">,</span>&nbsp;<span class="num" id="7045421">10</span><span class="op" id="7045423">,</span>&nbsp;<span class="ident" id="7045425">nil</span><span class="op" id="7045428">}</span><span class="op" id="7045429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045432">{</span><span class="string" id="7045433">&#34;bytes=5-Z&#34;</span><span class="op" id="7045444">,</span>&nbsp;<span class="num" id="7045446">10</span><span class="op" id="7045448">,</span>&nbsp;<span class="ident" id="7045450">nil</span><span class="op" id="7045453">}</span><span class="op" id="7045454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045457">{</span><span class="string" id="7045458">&#34;bytes=Ran-dom,&nbsp;garbage&#34;</span><span class="op" id="7045482">,</span>&nbsp;<span class="num" id="7045484">10</span><span class="op" id="7045486">,</span>&nbsp;<span class="ident" id="7045488">nil</span><span class="op" id="7045491">}</span><span class="op" id="7045492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045495">{</span><span class="string" id="7045496">&#34;bytes=0x01-0x02&#34;</span><span class="op" id="7045513">,</span>&nbsp;<span class="num" id="7045515">10</span><span class="op" id="7045517">,</span>&nbsp;<span class="ident" id="7045519">nil</span><span class="op" id="7045522">}</span><span class="op" id="7045523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045526">{</span><span class="string" id="7045527">&#34;bytes=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7045544">,</span>&nbsp;<span class="num" id="7045546">10</span><span class="op" id="7045548">,</span>&nbsp;<span class="ident" id="7045550">nil</span><span class="op" id="7045553">}</span><span class="op" id="7045554">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045557">{</span><span class="string" id="7045558">&#34;bytes=&nbsp;,&nbsp;,&nbsp;,&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7045575">,</span>&nbsp;<span class="num" id="7045577">10</span><span class="op" id="7045579">,</span>&nbsp;<span class="ident" id="7045581">nil</span><span class="op" id="7045584">}</span><span class="op" id="7045585">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045589">{</span><span class="string" id="7045590">&#34;bytes=0-9&#34;</span><span class="op" id="7045601">,</span>&nbsp;<span class="num" id="7045603">10</span><span class="op" id="7045605">,</span>&nbsp;<span class="op" id="7045607">[</span><span class="op" id="7045608">]</span><span class="ident" id="7045609">httpRange</span><span class="op" id="7045618">{</span><span class="op" id="7045619">{</span><span class="num" id="7045620">0</span><span class="op" id="7045621">,</span>&nbsp;<span class="num" id="7045623">10</span><span class="op" id="7045625">}</span><span class="op" id="7045626">}</span><span class="op" id="7045627">}</span><span class="op" id="7045628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045631">{</span><span class="string" id="7045632">&#34;bytes=0-&#34;</span><span class="op" id="7045642">,</span>&nbsp;<span class="num" id="7045644">10</span><span class="op" id="7045646">,</span>&nbsp;<span class="op" id="7045648">[</span><span class="op" id="7045649">]</span><span class="ident" id="7045650">httpRange</span><span class="op" id="7045659">{</span><span class="op" id="7045660">{</span><span class="num" id="7045661">0</span><span class="op" id="7045662">,</span>&nbsp;<span class="num" id="7045664">10</span><span class="op" id="7045666">}</span><span class="op" id="7045667">}</span><span class="op" id="7045668">}</span><span class="op" id="7045669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045672">{</span><span class="string" id="7045673">&#34;bytes=5-&#34;</span><span class="op" id="7045683">,</span>&nbsp;<span class="num" id="7045685">10</span><span class="op" id="7045687">,</span>&nbsp;<span class="op" id="7045689">[</span><span class="op" id="7045690">]</span><span class="ident" id="7045691">httpRange</span><span class="op" id="7045700">{</span><span class="op" id="7045701">{</span><span class="num" id="7045702">5</span><span class="op" id="7045703">,</span>&nbsp;<span class="num" id="7045705">5</span><span class="op" id="7045706">}</span><span class="op" id="7045707">}</span><span class="op" id="7045708">}</span><span class="op" id="7045709">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045712">{</span><span class="string" id="7045713">&#34;bytes=0-20&#34;</span><span class="op" id="7045725">,</span>&nbsp;<span class="num" id="7045727">10</span><span class="op" id="7045729">,</span>&nbsp;<span class="op" id="7045731">[</span><span class="op" id="7045732">]</span><span class="ident" id="7045733">httpRange</span><span class="op" id="7045742">{</span><span class="op" id="7045743">{</span><span class="num" id="7045744">0</span><span class="op" id="7045745">,</span>&nbsp;<span class="num" id="7045747">10</span><span class="op" id="7045749">}</span><span class="op" id="7045750">}</span><span class="op" id="7045751">}</span><span class="op" id="7045752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045755">{</span><span class="string" id="7045756">&#34;bytes=15-,0-5&#34;</span><span class="op" id="7045771">,</span>&nbsp;<span class="num" id="7045773">10</span><span class="op" id="7045775">,</span>&nbsp;<span class="ident" id="7045777">nil</span><span class="op" id="7045780">}</span><span class="op" id="7045781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045784">{</span><span class="string" id="7045785">&#34;bytes=1-2,5-&#34;</span><span class="op" id="7045799">,</span>&nbsp;<span class="num" id="7045801">10</span><span class="op" id="7045803">,</span>&nbsp;<span class="op" id="7045805">[</span><span class="op" id="7045806">]</span><span class="ident" id="7045807">httpRange</span><span class="op" id="7045816">{</span><span class="op" id="7045817">{</span><span class="num" id="7045818">1</span><span class="op" id="7045819">,</span>&nbsp;<span class="num" id="7045821">2</span><span class="op" id="7045822">}</span><span class="op" id="7045823">,</span>&nbsp;<span class="op" id="7045825">{</span><span class="num" id="7045826">5</span><span class="op" id="7045827">,</span>&nbsp;<span class="num" id="7045829">5</span><span class="op" id="7045830">}</span><span class="op" id="7045831">}</span><span class="op" id="7045832">}</span><span class="op" id="7045833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045836">{</span><span class="string" id="7045837">&#34;bytes=-2&nbsp;,&nbsp;7-&#34;</span><span class="op" id="7045852">,</span>&nbsp;<span class="num" id="7045854">11</span><span class="op" id="7045856">,</span>&nbsp;<span class="op" id="7045858">[</span><span class="op" id="7045859">]</span><span class="ident" id="7045860">httpRange</span><span class="op" id="7045869">{</span><span class="op" id="7045870">{</span><span class="num" id="7045871">9</span><span class="op" id="7045872">,</span>&nbsp;<span class="num" id="7045874">2</span><span class="op" id="7045875">}</span><span class="op" id="7045876">,</span>&nbsp;<span class="op" id="7045878">{</span><span class="num" id="7045879">7</span><span class="op" id="7045880">,</span>&nbsp;<span class="num" id="7045882">4</span><span class="op" id="7045883">}</span><span class="op" id="7045884">}</span><span class="op" id="7045885">}</span><span class="op" id="7045886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045889">{</span><span class="string" id="7045890">&#34;bytes=0-0&nbsp;,2-2,&nbsp;7-&#34;</span><span class="op" id="7045910">,</span>&nbsp;<span class="num" id="7045912">11</span><span class="op" id="7045914">,</span>&nbsp;<span class="op" id="7045916">[</span><span class="op" id="7045917">]</span><span class="ident" id="7045918">httpRange</span><span class="op" id="7045927">{</span><span class="op" id="7045928">{</span><span class="num" id="7045929">0</span><span class="op" id="7045930">,</span>&nbsp;<span class="num" id="7045932">1</span><span class="op" id="7045933">}</span><span class="op" id="7045934">,</span>&nbsp;<span class="op" id="7045936">{</span><span class="num" id="7045937">2</span><span class="op" id="7045938">,</span>&nbsp;<span class="num" id="7045940">1</span><span class="op" id="7045941">}</span><span class="op" id="7045942">,</span>&nbsp;<span class="op" id="7045944">{</span><span class="num" id="7045945">7</span><span class="op" id="7045946">,</span>&nbsp;<span class="num" id="7045948">4</span><span class="op" id="7045949">}</span><span class="op" id="7045950">}</span><span class="op" id="7045951">}</span><span class="op" id="7045952">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045955">{</span><span class="string" id="7045956">&#34;bytes=-5&#34;</span><span class="op" id="7045966">,</span>&nbsp;<span class="num" id="7045968">10</span><span class="op" id="7045970">,</span>&nbsp;<span class="op" id="7045972">[</span><span class="op" id="7045973">]</span><span class="ident" id="7045974">httpRange</span><span class="op" id="7045983">{</span><span class="op" id="7045984">{</span><span class="num" id="7045985">5</span><span class="op" id="7045986">,</span>&nbsp;<span class="num" id="7045988">5</span><span class="op" id="7045989">}</span><span class="op" id="7045990">}</span><span class="op" id="7045991">}</span><span class="op" id="7045992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045995">{</span><span class="string" id="7045996">&#34;bytes=-15&#34;</span><span class="op" id="7046007">,</span>&nbsp;<span class="num" id="7046009">10</span><span class="op" id="7046011">,</span>&nbsp;<span class="op" id="7046013">[</span><span class="op" id="7046014">]</span><span class="ident" id="7046015">httpRange</span><span class="op" id="7046024">{</span><span class="op" id="7046025">{</span><span class="num" id="7046026">0</span><span class="op" id="7046027">,</span>&nbsp;<span class="num" id="7046029">10</span><span class="op" id="7046031">}</span><span class="op" id="7046032">}</span><span class="op" id="7046033">}</span><span class="op" id="7046034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046037">{</span><span class="string" id="7046038">&#34;bytes=0-499&#34;</span><span class="op" id="7046051">,</span>&nbsp;<span class="num" id="7046053">10000</span><span class="op" id="7046058">,</span>&nbsp;<span class="op" id="7046060">[</span><span class="op" id="7046061">]</span><span class="ident" id="7046062">httpRange</span><span class="op" id="7046071">{</span><span class="op" id="7046072">{</span><span class="num" id="7046073">0</span><span class="op" id="7046074">,</span>&nbsp;<span class="num" id="7046076">500</span><span class="op" id="7046079">}</span><span class="op" id="7046080">}</span><span class="op" id="7046081">}</span><span class="op" id="7046082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046085">{</span><span class="string" id="7046086">&#34;bytes=500-999&#34;</span><span class="op" id="7046101">,</span>&nbsp;<span class="num" id="7046103">10000</span><span class="op" id="7046108">,</span>&nbsp;<span class="op" id="7046110">[</span><span class="op" id="7046111">]</span><span class="ident" id="7046112">httpRange</span><span class="op" id="7046121">{</span><span class="op" id="7046122">{</span><span class="num" id="7046123">500</span><span class="op" id="7046126">,</span>&nbsp;<span class="num" id="7046128">500</span><span class="op" id="7046131">}</span><span class="op" id="7046132">}</span><span class="op" id="7046133">}</span><span class="op" id="7046134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046137">{</span><span class="string" id="7046138">&#34;bytes=-500&#34;</span><span class="op" id="7046150">,</span>&nbsp;<span class="num" id="7046152">10000</span><span class="op" id="7046157">,</span>&nbsp;<span class="op" id="7046159">[</span><span class="op" id="7046160">]</span><span class="ident" id="7046161">httpRange</span><span class="op" id="7046170">{</span><span class="op" id="7046171">{</span><span class="num" id="7046172">9500</span><span class="op" id="7046176">,</span>&nbsp;<span class="num" id="7046178">500</span><span class="op" id="7046181">}</span><span class="op" id="7046182">}</span><span class="op" id="7046183">}</span><span class="op" id="7046184">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046187">{</span><span class="string" id="7046188">&#34;bytes=9500-&#34;</span><span class="op" id="7046201">,</span>&nbsp;<span class="num" id="7046203">10000</span><span class="op" id="7046208">,</span>&nbsp;<span class="op" id="7046210">[</span><span class="op" id="7046211">]</span><span class="ident" id="7046212">httpRange</span><span class="op" id="7046221">{</span><span class="op" id="7046222">{</span><span class="num" id="7046223">9500</span><span class="op" id="7046227">,</span>&nbsp;<span class="num" id="7046229">500</span><span class="op" id="7046232">}</span><span class="op" id="7046233">}</span><span class="op" id="7046234">}</span><span class="op" id="7046235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046238">{</span><span class="string" id="7046239">&#34;bytes=0-0,-1&#34;</span><span class="op" id="7046253">,</span>&nbsp;<span class="num" id="7046255">10000</span><span class="op" id="7046260">,</span>&nbsp;<span class="op" id="7046262">[</span><span class="op" id="7046263">]</span><span class="ident" id="7046264">httpRange</span><span class="op" id="7046273">{</span><span class="op" id="7046274">{</span><span class="num" id="7046275">0</span><span class="op" id="7046276">,</span>&nbsp;<span class="num" id="7046278">1</span><span class="op" id="7046279">}</span><span class="op" id="7046280">,</span>&nbsp;<span class="op" id="7046282">{</span><span class="num" id="7046283">9999</span><span class="op" id="7046287">,</span>&nbsp;<span class="num" id="7046289">1</span><span class="op" id="7046290">}</span><span class="op" id="7046291">}</span><span class="op" id="7046292">}</span><span class="op" id="7046293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046296">{</span><span class="string" id="7046297">&#34;bytes=500-600,601-999&#34;</span><span class="op" id="7046320">,</span>&nbsp;<span class="num" id="7046322">10000</span><span class="op" id="7046327">,</span>&nbsp;<span class="op" id="7046329">[</span><span class="op" id="7046330">]</span><span class="ident" id="7046331">httpRange</span><span class="op" id="7046340">{</span><span class="op" id="7046341">{</span><span class="num" id="7046342">500</span><span class="op" id="7046345">,</span>&nbsp;<span class="num" id="7046347">101</span><span class="op" id="7046350">}</span><span class="op" id="7046351">,</span>&nbsp;<span class="op" id="7046353">{</span><span class="num" id="7046354">601</span><span class="op" id="7046357">,</span>&nbsp;<span class="num" id="7046359">399</span><span class="op" id="7046362">}</span><span class="op" id="7046363">}</span><span class="op" id="7046364">}</span><span class="op" id="7046365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046368">{</span><span class="string" id="7046369">&#34;bytes=500-700,601-999&#34;</span><span class="op" id="7046392">,</span>&nbsp;<span class="num" id="7046394">10000</span><span class="op" id="7046399">,</span>&nbsp;<span class="op" id="7046401">[</span><span class="op" id="7046402">]</span><span class="ident" id="7046403">httpRange</span><span class="op" id="7046412">{</span><span class="op" id="7046413">{</span><span class="num" id="7046414">500</span><span class="op" id="7046417">,</span>&nbsp;<span class="num" id="7046419">201</span><span class="op" id="7046422">}</span><span class="op" id="7046423">,</span>&nbsp;<span class="op" id="7046425">{</span><span class="num" id="7046426">601</span><span class="op" id="7046429">,</span>&nbsp;<span class="num" id="7046431">399</span><span class="op" id="7046434">}</span><span class="op" id="7046435">}</span><span class="op" id="7046436">}</span><span class="op" id="7046437">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7046441">//&nbsp;Match&nbsp;Apache&nbsp;laxity:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046466">{</span><span class="string" id="7046467">&#34;bytes=&nbsp;&nbsp;&nbsp;1&nbsp;-2&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;4-&nbsp;5,&nbsp;7&nbsp;-&nbsp;8&nbsp;,&nbsp;,,&#34;</span><span class="op" id="7046504">,</span>&nbsp;<span class="num" id="7046506">11</span><span class="op" id="7046508">,</span>&nbsp;<span class="op" id="7046510">[</span><span class="op" id="7046511">]</span><span class="ident" id="7046512">httpRange</span><span class="op" id="7046521">{</span><span class="op" id="7046522">{</span><span class="num" id="7046523">1</span><span class="op" id="7046524">,</span>&nbsp;<span class="num" id="7046526">2</span><span class="op" id="7046527">}</span><span class="op" id="7046528">,</span>&nbsp;<span class="op" id="7046530">{</span><span class="num" id="7046531">4</span><span class="op" id="7046532">,</span>&nbsp;<span class="num" id="7046534">2</span><span class="op" id="7046535">}</span><span class="op" id="7046536">,</span>&nbsp;<span class="op" id="7046538">{</span><span class="num" id="7046539">7</span><span class="op" id="7046540">,</span>&nbsp;<span class="num" id="7046542">2</span><span class="op" id="7046543">}</span><span class="op" id="7046544">}</span><span class="op" id="7046545">}</span><span class="op" id="7046546">,</span><br>
<span class="lineno"></span><span class="op" id="7046548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7046551">func</span>&nbsp;<span class="ident" id="7046556">TestParseRange</span><span class="op" id="7046570">(</span><span class="ident" id="7046571">t</span>&nbsp;<span class="op" id="7046573">*</span><span class="ident" id="7046574">testing</span><span class="op" id="7046581">.</span><span class="ident" id="7046582">T</span><span class="op" id="7046583">)</span>&nbsp;<span class="op" id="7046585">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046588">for</span>&nbsp;<span class="ident" id="7046592">_</span><span class="op" id="7046593">,</span>&nbsp;<span class="ident" id="7046595">test</span>&nbsp;<span class="op" id="7046600">:=</span>&nbsp;<span class="keyword" id="7046603">range</span>&nbsp;<span class="ident" id="7046609">ParseRangeTests</span>&nbsp;<span class="op" id="7046625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046629">r</span>&nbsp;<span class="op" id="7046631">:=</span>&nbsp;<span class="ident" id="7046634">test</span><span class="op" id="7046638">.</span><span class="ident" id="7046639">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046643">ranges</span><span class="op" id="7046649">,</span>&nbsp;<span class="ident" id="7046651">err</span>&nbsp;<span class="op" id="7046655">:=</span>&nbsp;<span class="ident" id="7046658">parseRange</span><span class="op" id="7046668">(</span><span class="ident" id="7046669">test</span><span class="op" id="7046673">.</span><span class="ident" id="7046674">s</span><span class="op" id="7046675">,</span>&nbsp;<span class="ident" id="7046677">test</span><span class="op" id="7046681">.</span><span class="ident" id="7046682">length</span><span class="op" id="7046688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046692">if</span>&nbsp;<span class="ident" id="7046695">err</span>&nbsp;<span class="op" id="7046699">!=</span>&nbsp;<span class="ident" id="7046702">nil</span>&nbsp;<span class="op" id="7046706">&amp;&amp;</span>&nbsp;<span class="ident" id="7046709">r</span>&nbsp;<span class="op" id="7046711">!=</span>&nbsp;<span class="ident" id="7046714">nil</span>&nbsp;<span class="op" id="7046718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046723">t</span><span class="op" id="7046724">.</span><span class="ident" id="7046725">Errorf</span><span class="op" id="7046731">(</span><span class="string" id="7046732">&#34;parseRange(%q)&nbsp;returned&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7046766">,</span>&nbsp;<span class="ident" id="7046768">test</span><span class="op" id="7046772">.</span><span class="ident" id="7046773">s</span><span class="op" id="7046774">,</span>&nbsp;<span class="ident" id="7046776">err</span><span class="op" id="7046779">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046787">if</span>&nbsp;<span class="builtinfunc" id="7046790">len</span><span class="op" id="7046793">(</span><span class="ident" id="7046794">ranges</span><span class="op" id="7046800">)</span>&nbsp;<span class="op" id="7046802">!=</span>&nbsp;<span class="builtinfunc" id="7046805">len</span><span class="op" id="7046808">(</span><span class="ident" id="7046809">r</span><span class="op" id="7046810">)</span>&nbsp;<span class="op" id="7046812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046817">t</span><span class="op" id="7046818">.</span><span class="ident" id="7046819">Errorf</span><span class="op" id="7046825">(</span><span class="string" id="7046826">&#34;len(parseRange(%q))&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7046861">,</span>&nbsp;<span class="ident" id="7046863">test</span><span class="op" id="7046867">.</span><span class="ident" id="7046868">s</span><span class="op" id="7046869">,</span>&nbsp;<span class="builtinfunc" id="7046871">len</span><span class="op" id="7046874">(</span><span class="ident" id="7046875">ranges</span><span class="op" id="7046881">)</span><span class="op" id="7046882">,</span>&nbsp;<span class="builtinfunc" id="7046884">len</span><span class="op" id="7046887">(</span><span class="ident" id="7046888">r</span><span class="op" id="7046889">)</span><span class="op" id="7046890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046895">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7046906">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046910">for</span>&nbsp;<span class="ident" id="7046914">i</span>&nbsp;<span class="op" id="7046916">:=</span>&nbsp;<span class="keyword" id="7046919">range</span>&nbsp;<span class="ident" id="7046925">r</span>&nbsp;<span class="op" id="7046927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7046932">if</span>&nbsp;<span class="ident" id="7046935">ranges</span><span class="op" id="7046941">[</span><span class="ident" id="7046942">i</span><span class="op" id="7046943">]</span><span class="op" id="7046944">.</span><span class="ident" id="7046945">start</span>&nbsp;<span class="op" id="7046951">!=</span>&nbsp;<span class="ident" id="7046954">r</span><span class="op" id="7046955">[</span><span class="ident" id="7046956">i</span><span class="op" id="7046957">]</span><span class="op" id="7046958">.</span><span class="ident" id="7046959">start</span>&nbsp;<span class="op" id="7046965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7046971">t</span><span class="op" id="7046972">.</span><span class="ident" id="7046973">Errorf</span><span class="op" id="7046979">(</span><span class="string" id="7046980">&#34;parseRange(%q)[%d].start&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7047020">,</span>&nbsp;<span class="ident" id="7047022">test</span><span class="op" id="7047026">.</span><span class="ident" id="7047027">s</span><span class="op" id="7047028">,</span>&nbsp;<span class="ident" id="7047030">i</span><span class="op" id="7047031">,</span>&nbsp;<span class="ident" id="7047033">ranges</span><span class="op" id="7047039">[</span><span class="ident" id="7047040">i</span><span class="op" id="7047041">]</span><span class="op" id="7047042">.</span><span class="ident" id="7047043">start</span><span class="op" id="7047048">,</span>&nbsp;<span class="ident" id="7047050">r</span><span class="op" id="7047051">[</span><span class="ident" id="7047052">i</span><span class="op" id="7047053">]</span><span class="op" id="7047054">.</span><span class="ident" id="7047055">start</span><span class="op" id="7047060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7047070">if</span>&nbsp;<span class="ident" id="7047073">ranges</span><span class="op" id="7047079">[</span><span class="ident" id="7047080">i</span><span class="op" id="7047081">]</span><span class="op" id="7047082">.</span><span class="ident" id="7047083">length</span>&nbsp;<span class="op" id="7047090">!=</span>&nbsp;<span class="ident" id="7047093">r</span><span class="op" id="7047094">[</span><span class="ident" id="7047095">i</span><span class="op" id="7047096">]</span><span class="op" id="7047097">.</span><span class="ident" id="7047098">length</span>&nbsp;<span class="op" id="7047105">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047111">t</span><span class="op" id="7047112">.</span><span class="ident" id="7047113">Errorf</span><span class="op" id="7047119">(</span><span class="string" id="7047120">&#34;parseRange(%q)[%d].length&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7047161">,</span>&nbsp;<span class="ident" id="7047163">test</span><span class="op" id="7047167">.</span><span class="ident" id="7047168">s</span><span class="op" id="7047169">,</span>&nbsp;<span class="ident" id="7047171">i</span><span class="op" id="7047172">,</span>&nbsp;<span class="ident" id="7047174">ranges</span><span class="op" id="7047180">[</span><span class="ident" id="7047181">i</span><span class="op" id="7047182">]</span><span class="op" id="7047183">.</span><span class="ident" id="7047184">length</span><span class="op" id="7047190">,</span>&nbsp;<span class="ident" id="7047192">r</span><span class="op" id="7047193">[</span><span class="ident" id="7047194">i</span><span class="op" id="7047195">]</span><span class="op" id="7047196">.</span><span class="ident" id="7047197">length</span><span class="op" id="7047203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047215">}</span><br>
<span class="lineno"></span><span class="op" id="7047217">}</span>
</div>
</body>
</html>
