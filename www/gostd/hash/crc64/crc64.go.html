<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc64</h2>
<ul>
<li><a href="/gostd/hash/crc64/crc64.go.html" class="current">crc64.go</a></li>
<li><a href="/gostd/hash/crc64/crc64_test.go.html">crc64_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6066065">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6066120">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6066174">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6066225">//&nbsp;Package&nbsp;crc64&nbsp;implements&nbsp;the&nbsp;64-bit&nbsp;cyclic&nbsp;redundancy&nbsp;check,&nbsp;or&nbsp;CRC-64,</span><br>
<span class="lineno"></span><span class="comment" id="6066300">//&nbsp;checksum.&nbsp;See&nbsp;http://en.wikipedia.org/wiki/Cyclic_redundancy_check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6066374">//&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="6066390">package</span>&nbsp;<span class="ident" id="6066398">crc64</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6066405">import</span>&nbsp;<span class="string" id="6066412">&#34;hash&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066420">//&nbsp;The&nbsp;size&nbsp;of&nbsp;a&nbsp;CRC-64&nbsp;checksum&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="6066463">const</span>&nbsp;<span class="ident" id="6066469">Size</span>&nbsp;<span class="op" id="6066474">=</span>&nbsp;<span class="num" id="6066476">8</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6066479">//&nbsp;Predefined&nbsp;polynomials.</span><br>
<span class="lineno"></span><span class="keyword" id="6066506">const</span>&nbsp;<span class="op" id="6066512">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6066515">//&nbsp;The&nbsp;ISO&nbsp;polynomial,&nbsp;defined&nbsp;in&nbsp;ISO&nbsp;3309&nbsp;and&nbsp;used&nbsp;in&nbsp;HDLC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6066577">ISO</span>&nbsp;<span class="op" id="6066581">=</span>&nbsp;<span class="num" id="6066583">0xD800000000000000</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6066604">//&nbsp;The&nbsp;ECMA&nbsp;polynomial,&nbsp;defined&nbsp;in&nbsp;ECMA&nbsp;182.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6066650">ECMA</span>&nbsp;<span class="op" id="6066655">=</span>&nbsp;<span class="num" id="6066657">0xC96C5795D7870F42</span><br>
<span class="lineno"></span><span class="op" id="6066676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066679">//&nbsp;Table&nbsp;is&nbsp;a&nbsp;256-word&nbsp;table&nbsp;representing&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;efficient&nbsp;processing.</span><br>
<span class="lineno">25</span><span class="keyword" id="6066762">type</span>&nbsp;<span class="ident" id="6066767">Table</span>&nbsp;<span class="op" id="6066773">[</span><span class="num" id="6066774">256</span><span class="op" id="6066777">]</span><span class="ident" id="6066778">uint64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066786">//&nbsp;MakeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="6066860">func</span>&nbsp;<span class="ident" id="6066865">MakeTable</span><span class="op" id="6066874">(</span><span class="ident" id="6066875">poly</span>&nbsp;<span class="ident" id="6066880">uint64</span><span class="op" id="6066886">)</span>&nbsp;<span class="op" id="6066888">*</span><span class="ident" id="6066889">Table</span>&nbsp;<span class="op" id="6066895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6066898">t</span>&nbsp;<span class="op" id="6066900">:=</span>&nbsp;<span class="builtinfunc" id="6066903">new</span><span class="op" id="6066906">(</span><span class="ident" id="6066907">Table</span><span class="op" id="6066912">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6066915">for</span>&nbsp;<span class="ident" id="6066919">i</span>&nbsp;<span class="op" id="6066921">:=</span>&nbsp;<span class="num" id="6066924">0</span><span class="op" id="6066925">;</span>&nbsp;<span class="ident" id="6066927">i</span>&nbsp;<span class="op" id="6066929">&lt;</span>&nbsp;<span class="num" id="6066931">256</span><span class="op" id="6066934">;</span>&nbsp;<span class="ident" id="6066936">i</span><span class="op" id="6066937">++</span>&nbsp;<span class="op" id="6066940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6066944">crc</span>&nbsp;<span class="op" id="6066948">:=</span>&nbsp;<span class="ident" id="6066951">uint64</span><span class="op" id="6066957">(</span><span class="ident" id="6066958">i</span><span class="op" id="6066959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6066963">for</span>&nbsp;<span class="ident" id="6066967">j</span>&nbsp;<span class="op" id="6066969">:=</span>&nbsp;<span class="num" id="6066972">0</span><span class="op" id="6066973">;</span>&nbsp;<span class="ident" id="6066975">j</span>&nbsp;<span class="op" id="6066977">&lt;</span>&nbsp;<span class="num" id="6066979">8</span><span class="op" id="6066980">;</span>&nbsp;<span class="ident" id="6066982">j</span><span class="op" id="6066983">++</span>&nbsp;<span class="op" id="6066986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6066991">if</span>&nbsp;<span class="ident" id="6066994">crc</span><span class="op" id="6066997">&amp;</span><span class="num" id="6066998">1</span>&nbsp;<span class="op" id="6067000">==</span>&nbsp;<span class="num" id="6067003">1</span>&nbsp;<span class="op" id="6067005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067011">crc</span>&nbsp;<span class="op" id="6067015">=</span>&nbsp;<span class="op" id="6067017">(</span><span class="ident" id="6067018">crc</span>&nbsp;<span class="op" id="6067022">&gt;&gt;</span>&nbsp;<span class="num" id="6067025">1</span><span class="op" id="6067026">)</span>&nbsp;<span class="op" id="6067028">^</span>&nbsp;<span class="ident" id="6067030">poly</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067038">}</span>&nbsp;<span class="keyword" id="6067040">else</span>&nbsp;<span class="op" id="6067045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067051">crc</span>&nbsp;<span class="op" id="6067055">&gt;&gt;=</span>&nbsp;<span class="num" id="6067059">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067072">t</span><span class="op" id="6067073">[</span><span class="ident" id="6067074">i</span><span class="op" id="6067075">]</span>&nbsp;<span class="op" id="6067077">=</span>&nbsp;<span class="ident" id="6067079">crc</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067087">return</span>&nbsp;<span class="ident" id="6067094">t</span><br>
<span class="lineno"></span><span class="op" id="6067096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6067099">//&nbsp;digest&nbsp;represents&nbsp;the&nbsp;partial&nbsp;evaluation&nbsp;of&nbsp;a&nbsp;checksum.</span><br>
<span class="lineno">45</span><span class="keyword" id="6067158">type</span>&nbsp;<span class="ident" id="6067163">digest</span>&nbsp;<span class="keyword" id="6067170">struct</span>&nbsp;<span class="op" id="6067177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067180">crc</span>&nbsp;<span class="ident" id="6067184">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067192">tab</span>&nbsp;<span class="op" id="6067196">*</span><span class="ident" id="6067197">Table</span><br>
<span class="lineno"></span><span class="op" id="6067203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="6067206">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash64&nbsp;computing&nbsp;the&nbsp;CRC-64&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="6067269">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="6067319">func</span>&nbsp;<span class="ident" id="6067324">New</span><span class="op" id="6067327">(</span><span class="ident" id="6067328">tab</span>&nbsp;<span class="op" id="6067332">*</span><span class="ident" id="6067333">Table</span><span class="op" id="6067338">)</span>&nbsp;<span class="ident" id="6067340">hash</span><span class="op" id="6067344">.</span><span class="ident" id="6067345">Hash64</span>&nbsp;<span class="op" id="6067352">{</span>&nbsp;<span class="keyword" id="6067354">return</span>&nbsp;<span class="op" id="6067361">&amp;</span><span class="ident" id="6067362">digest</span><span class="op" id="6067368">{</span><span class="num" id="6067369">0</span><span class="op" id="6067370">,</span>&nbsp;<span class="ident" id="6067372">tab</span><span class="op" id="6067375">}</span>&nbsp;<span class="op" id="6067377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067380">func</span>&nbsp;<span class="op" id="6067385">(</span><span class="ident" id="6067386">d</span>&nbsp;<span class="op" id="6067388">*</span><span class="ident" id="6067389">digest</span><span class="op" id="6067395">)</span>&nbsp;<span class="ident" id="6067397">Size</span><span class="op" id="6067401">(</span><span class="op" id="6067402">)</span>&nbsp;<span class="builtintype" id="6067404">int</span>&nbsp;<span class="op" id="6067408">{</span>&nbsp;<span class="keyword" id="6067410">return</span>&nbsp;<span class="ident" id="6067417">Size</span>&nbsp;<span class="op" id="6067422">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6067425">func</span>&nbsp;<span class="op" id="6067430">(</span><span class="ident" id="6067431">d</span>&nbsp;<span class="op" id="6067433">*</span><span class="ident" id="6067434">digest</span><span class="op" id="6067440">)</span>&nbsp;<span class="ident" id="6067442">BlockSize</span><span class="op" id="6067451">(</span><span class="op" id="6067452">)</span>&nbsp;<span class="builtintype" id="6067454">int</span>&nbsp;<span class="op" id="6067458">{</span>&nbsp;<span class="keyword" id="6067460">return</span>&nbsp;<span class="num" id="6067467">1</span>&nbsp;<span class="op" id="6067469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067472">func</span>&nbsp;<span class="op" id="6067477">(</span><span class="ident" id="6067478">d</span>&nbsp;<span class="op" id="6067480">*</span><span class="ident" id="6067481">digest</span><span class="op" id="6067487">)</span>&nbsp;<span class="ident" id="6067489">Reset</span><span class="op" id="6067494">(</span><span class="op" id="6067495">)</span>&nbsp;<span class="op" id="6067497">{</span>&nbsp;<span class="ident" id="6067499">d</span><span class="op" id="6067500">.</span><span class="ident" id="6067501">crc</span>&nbsp;<span class="op" id="6067505">=</span>&nbsp;<span class="num" id="6067507">0</span>&nbsp;<span class="op" id="6067509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6067512">func</span>&nbsp;<span class="ident" id="6067517">update</span><span class="op" id="6067523">(</span><span class="ident" id="6067524">crc</span>&nbsp;<span class="ident" id="6067528">uint64</span><span class="op" id="6067534">,</span>&nbsp;<span class="ident" id="6067536">tab</span>&nbsp;<span class="op" id="6067540">*</span><span class="ident" id="6067541">Table</span><span class="op" id="6067546">,</span>&nbsp;<span class="ident" id="6067548">p</span>&nbsp;<span class="op" id="6067550">[</span><span class="op" id="6067551">]</span><span class="builtintype" id="6067552">byte</span><span class="op" id="6067556">)</span>&nbsp;<span class="ident" id="6067558">uint64</span>&nbsp;<span class="op" id="6067565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067568">crc</span>&nbsp;<span class="op" id="6067572">=</span>&nbsp;<span class="op" id="6067574">^</span><span class="ident" id="6067575">crc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067580">for</span>&nbsp;<span class="ident" id="6067584">_</span><span class="op" id="6067585">,</span>&nbsp;<span class="ident" id="6067587">v</span>&nbsp;<span class="op" id="6067589">:=</span>&nbsp;<span class="keyword" id="6067592">range</span>&nbsp;<span class="ident" id="6067598">p</span>&nbsp;<span class="op" id="6067600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067604">crc</span>&nbsp;<span class="op" id="6067608">=</span>&nbsp;<span class="ident" id="6067610">tab</span><span class="op" id="6067613">[</span><span class="builtintype" id="6067614">byte</span><span class="op" id="6067618">(</span><span class="ident" id="6067619">crc</span><span class="op" id="6067622">)</span><span class="op" id="6067623">^</span><span class="ident" id="6067624">v</span><span class="op" id="6067625">]</span>&nbsp;<span class="op" id="6067627">^</span>&nbsp;<span class="op" id="6067629">(</span><span class="ident" id="6067630">crc</span>&nbsp;<span class="op" id="6067634">&gt;&gt;</span>&nbsp;<span class="num" id="6067637">8</span><span class="op" id="6067638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067641">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067644">return</span>&nbsp;<span class="op" id="6067651">^</span><span class="ident" id="6067652">crc</span><br>
<span class="lineno"></span><span class="op" id="6067656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6067659">//&nbsp;Update&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;adding&nbsp;the&nbsp;bytes&nbsp;in&nbsp;p&nbsp;to&nbsp;the&nbsp;crc.</span><br>
<span class="lineno"></span><span class="keyword" id="6067725">func</span>&nbsp;<span class="ident" id="6067730">Update</span><span class="op" id="6067736">(</span><span class="ident" id="6067737">crc</span>&nbsp;<span class="ident" id="6067741">uint64</span><span class="op" id="6067747">,</span>&nbsp;<span class="ident" id="6067749">tab</span>&nbsp;<span class="op" id="6067753">*</span><span class="ident" id="6067754">Table</span><span class="op" id="6067759">,</span>&nbsp;<span class="ident" id="6067761">p</span>&nbsp;<span class="op" id="6067763">[</span><span class="op" id="6067764">]</span><span class="builtintype" id="6067765">byte</span><span class="op" id="6067769">)</span>&nbsp;<span class="ident" id="6067771">uint64</span>&nbsp;<span class="op" id="6067778">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067781">return</span>&nbsp;<span class="ident" id="6067788">update</span><span class="op" id="6067794">(</span><span class="ident" id="6067795">crc</span><span class="op" id="6067798">,</span>&nbsp;<span class="ident" id="6067800">tab</span><span class="op" id="6067803">,</span>&nbsp;<span class="ident" id="6067805">p</span><span class="op" id="6067806">)</span><br>
<span class="lineno"></span><span class="op" id="6067808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067811">func</span>&nbsp;<span class="op" id="6067816">(</span><span class="ident" id="6067817">d</span>&nbsp;<span class="op" id="6067819">*</span><span class="ident" id="6067820">digest</span><span class="op" id="6067826">)</span>&nbsp;<span class="ident" id="6067828">Write</span><span class="op" id="6067833">(</span><span class="ident" id="6067834">p</span>&nbsp;<span class="op" id="6067836">[</span><span class="op" id="6067837">]</span><span class="builtintype" id="6067838">byte</span><span class="op" id="6067842">)</span>&nbsp;<span class="op" id="6067844">(</span><span class="ident" id="6067845">n</span>&nbsp;<span class="builtintype" id="6067847">int</span><span class="op" id="6067850">,</span>&nbsp;<span class="ident" id="6067852">err</span>&nbsp;<span class="builtintype" id="6067856">error</span><span class="op" id="6067861">)</span>&nbsp;<span class="op" id="6067863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067866">d</span><span class="op" id="6067867">.</span><span class="ident" id="6067868">crc</span>&nbsp;<span class="op" id="6067872">=</span>&nbsp;<span class="ident" id="6067874">update</span><span class="op" id="6067880">(</span><span class="ident" id="6067881">d</span><span class="op" id="6067882">.</span><span class="ident" id="6067883">crc</span><span class="op" id="6067886">,</span>&nbsp;<span class="ident" id="6067888">d</span><span class="op" id="6067889">.</span><span class="ident" id="6067890">tab</span><span class="op" id="6067893">,</span>&nbsp;<span class="ident" id="6067895">p</span><span class="op" id="6067896">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067899">return</span>&nbsp;<span class="builtinfunc" id="6067906">len</span><span class="op" id="6067909">(</span><span class="ident" id="6067910">p</span><span class="op" id="6067911">)</span><span class="op" id="6067912">,</span>&nbsp;<span class="builtintype" id="6067914">nil</span><br>
<span class="lineno"></span><span class="op" id="6067918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067921">func</span>&nbsp;<span class="op" id="6067926">(</span><span class="ident" id="6067927">d</span>&nbsp;<span class="op" id="6067929">*</span><span class="ident" id="6067930">digest</span><span class="op" id="6067936">)</span>&nbsp;<span class="ident" id="6067938">Sum64</span><span class="op" id="6067943">(</span><span class="op" id="6067944">)</span>&nbsp;<span class="ident" id="6067946">uint64</span>&nbsp;<span class="op" id="6067953">{</span>&nbsp;<span class="keyword" id="6067955">return</span>&nbsp;<span class="ident" id="6067962">d</span><span class="op" id="6067963">.</span><span class="ident" id="6067964">crc</span>&nbsp;<span class="op" id="6067968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="6067971">func</span>&nbsp;<span class="op" id="6067976">(</span><span class="ident" id="6067977">d</span>&nbsp;<span class="op" id="6067979">*</span><span class="ident" id="6067980">digest</span><span class="op" id="6067986">)</span>&nbsp;<span class="ident" id="6067988">Sum</span><span class="op" id="6067991">(</span><span class="ident" id="6067992">in</span>&nbsp;<span class="op" id="6067995">[</span><span class="op" id="6067996">]</span><span class="builtintype" id="6067997">byte</span><span class="op" id="6068001">)</span>&nbsp;<span class="op" id="6068003">[</span><span class="op" id="6068004">]</span><span class="builtintype" id="6068005">byte</span>&nbsp;<span class="op" id="6068010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068013">s</span>&nbsp;<span class="op" id="6068015">:=</span>&nbsp;<span class="ident" id="6068018">d</span><span class="op" id="6068019">.</span><span class="ident" id="6068020">Sum64</span><span class="op" id="6068025">(</span><span class="op" id="6068026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068029">return</span>&nbsp;<span class="builtinfunc" id="6068036">append</span><span class="op" id="6068042">(</span><span class="ident" id="6068043">in</span><span class="op" id="6068045">,</span>&nbsp;<span class="builtintype" id="6068047">byte</span><span class="op" id="6068051">(</span><span class="ident" id="6068052">s</span><span class="op" id="6068053">&gt;&gt;</span><span class="num" id="6068055">56</span><span class="op" id="6068057">)</span><span class="op" id="6068058">,</span>&nbsp;<span class="builtintype" id="6068060">byte</span><span class="op" id="6068064">(</span><span class="ident" id="6068065">s</span><span class="op" id="6068066">&gt;&gt;</span><span class="num" id="6068068">48</span><span class="op" id="6068070">)</span><span class="op" id="6068071">,</span>&nbsp;<span class="builtintype" id="6068073">byte</span><span class="op" id="6068077">(</span><span class="ident" id="6068078">s</span><span class="op" id="6068079">&gt;&gt;</span><span class="num" id="6068081">40</span><span class="op" id="6068083">)</span><span class="op" id="6068084">,</span>&nbsp;<span class="builtintype" id="6068086">byte</span><span class="op" id="6068090">(</span><span class="ident" id="6068091">s</span><span class="op" id="6068092">&gt;&gt;</span><span class="num" id="6068094">32</span><span class="op" id="6068096">)</span><span class="op" id="6068097">,</span>&nbsp;<span class="builtintype" id="6068099">byte</span><span class="op" id="6068103">(</span><span class="ident" id="6068104">s</span><span class="op" id="6068105">&gt;&gt;</span><span class="num" id="6068107">24</span><span class="op" id="6068109">)</span><span class="op" id="6068110">,</span>&nbsp;<span class="builtintype" id="6068112">byte</span><span class="op" id="6068116">(</span><span class="ident" id="6068117">s</span><span class="op" id="6068118">&gt;&gt;</span><span class="num" id="6068120">16</span><span class="op" id="6068122">)</span><span class="op" id="6068123">,</span>&nbsp;<span class="builtintype" id="6068125">byte</span><span class="op" id="6068129">(</span><span class="ident" id="6068130">s</span><span class="op" id="6068131">&gt;&gt;</span><span class="num" id="6068133">8</span><span class="op" id="6068134">)</span><span class="op" id="6068135">,</span>&nbsp;<span class="builtintype" id="6068137">byte</span><span class="op" id="6068141">(</span><span class="ident" id="6068142">s</span><span class="op" id="6068143">)</span><span class="op" id="6068144">)</span><br>
<span class="lineno"></span><span class="op" id="6068146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="6068149">//&nbsp;Checksum&nbsp;returns&nbsp;the&nbsp;CRC-64&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="6068197">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="6068247">func</span>&nbsp;<span class="ident" id="6068252">Checksum</span><span class="op" id="6068260">(</span><span class="ident" id="6068261">data</span>&nbsp;<span class="op" id="6068266">[</span><span class="op" id="6068267">]</span><span class="builtintype" id="6068268">byte</span><span class="op" id="6068272">,</span>&nbsp;<span class="ident" id="6068274">tab</span>&nbsp;<span class="op" id="6068278">*</span><span class="ident" id="6068279">Table</span><span class="op" id="6068284">)</span>&nbsp;<span class="ident" id="6068286">uint64</span>&nbsp;<span class="op" id="6068293">{</span>&nbsp;<span class="keyword" id="6068295">return</span>&nbsp;<span class="ident" id="6068302">update</span><span class="op" id="6068308">(</span><span class="num" id="6068309">0</span><span class="op" id="6068310">,</span>&nbsp;<span class="ident" id="6068312">tab</span><span class="op" id="6068315">,</span>&nbsp;<span class="ident" id="6068317">data</span><span class="op" id="6068321">)</span>&nbsp;<span class="op" id="6068323">}</span>
</div>
</body>
</html>
