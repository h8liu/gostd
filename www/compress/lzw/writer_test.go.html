<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6687507">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6687562">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6687616">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6687667">package</span>&nbsp;<span class="ident" id="6687675">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6687680">import</span>&nbsp;<span class="op" id="6687687">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687690">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687696">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687709">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687715">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687726">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6687736">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6687739">var</span>&nbsp;<span class="ident" id="6687743">filenames</span>&nbsp;<span class="op" id="6687753">=</span>&nbsp;<span class="op" id="6687755">[</span><span class="op" id="6687756">]</span><span class="builtintype" id="6687757">string</span><span class="op" id="6687763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687766">&#34;../testdata/e.txt&#34;</span><span class="op" id="6687785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6687788">&#34;../testdata/pi.txt&#34;</span><span class="op" id="6687808">,</span><br>
<span class="lineno"></span><span class="op" id="6687810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6687813">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6687891">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6687958">func</span>&nbsp;<span class="ident" id="6687963">testFile</span><span class="op" id="6687971">(</span><span class="ident" id="6687972">t</span>&nbsp;<span class="op" id="6687974">*</span><span class="ident" id="6687975"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6687982">.</span><span class="ident" id="6687983">T</span><span class="op" id="6687984">,</span>&nbsp;<span class="ident" id="6687986">fn</span>&nbsp;<span class="builtintype" id="6687989">string</span><span class="op" id="6687995">,</span>&nbsp;<span class="ident" id="6687997">order</span>&nbsp;<span class="ident" id="6688003"><a href="/compress/lzw/reader.go.html#6326022">Order</a></span><span class="op" id="6688008">,</span>&nbsp;<span class="ident" id="6688010">litWidth</span>&nbsp;<span class="builtintype" id="6688019">int</span><span class="op" id="6688022">)</span>&nbsp;<span class="op" id="6688024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6688027">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688064">golden</span><span class="op" id="6688070">,</span>&nbsp;<span class="ident" id="6688072">err</span>&nbsp;<span class="op" id="6688076">:=</span>&nbsp;<span class="ident" id="6688079"><a href="/compress/lzw/writer_test.go.html#6687709">os</a></span><span class="op" id="6688081">.</span><span class="ident" id="6688082">Open</span><span class="op" id="6688086">(</span><span class="ident" id="6688087"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688089">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688092">if</span>&nbsp;<span class="ident" id="6688095"><a href="/compress/lzw/writer_test.go.html#6688072">err</a></span>&nbsp;<span class="op" id="6688099">!=</span>&nbsp;<span class="ident" id="6688102">nil</span>&nbsp;<span class="op" id="6688106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688110"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6688111">.</span><span class="ident" id="6688112">Errorf</span><span class="op" id="6688118">(</span><span class="string" id="6688119">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6688150">,</span>&nbsp;<span class="ident" id="6688152"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688154">,</span>&nbsp;<span class="ident" id="6688156"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6688161">,</span>&nbsp;<span class="ident" id="6688163"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6688171">,</span>&nbsp;<span class="ident" id="6688173"><a href="/compress/lzw/writer_test.go.html#6688072">err</a></span><span class="op" id="6688176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688180">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688191">defer</span>&nbsp;<span class="ident" id="6688197"><a href="/compress/lzw/writer_test.go.html#6688064">golden</a></span><span class="op" id="6688203">.</span><span class="ident" id="6688204">Close</span><span class="op" id="6688209">(</span><span class="op" id="6688210">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6688214">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688334">raw</span><span class="op" id="6688337">,</span>&nbsp;<span class="ident" id="6688339"><a href="/compress/lzw/writer_test.go.html#6688072">err</a></span>&nbsp;<span class="op" id="6688343">:=</span>&nbsp;<span class="ident" id="6688346"><a href="/compress/lzw/writer_test.go.html#6687709">os</a></span><span class="op" id="6688348">.</span><span class="ident" id="6688349">Open</span><span class="op" id="6688353">(</span><span class="ident" id="6688354"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688359">if</span>&nbsp;<span class="ident" id="6688362"><a href="/compress/lzw/writer_test.go.html#6688072">err</a></span>&nbsp;<span class="op" id="6688366">!=</span>&nbsp;<span class="ident" id="6688369">nil</span>&nbsp;<span class="op" id="6688373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688377"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6688378">.</span><span class="ident" id="6688379">Errorf</span><span class="op" id="6688385">(</span><span class="string" id="6688386">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6688417">,</span>&nbsp;<span class="ident" id="6688419"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688421">,</span>&nbsp;<span class="ident" id="6688423"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6688428">,</span>&nbsp;<span class="ident" id="6688430"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6688438">,</span>&nbsp;<span class="ident" id="6688440"><a href="/compress/lzw/writer_test.go.html#6688072">err</a></span><span class="op" id="6688443">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688447">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688459">piper</span><span class="op" id="6688464">,</span>&nbsp;<span class="ident" id="6688466">pipew</span>&nbsp;<span class="op" id="6688472">:=</span>&nbsp;<span class="ident" id="6688475"><a href="/compress/lzw/writer_test.go.html#6687690">io</a></span><span class="op" id="6688477">.</span><span class="ident" id="6688478">Pipe</span><span class="op" id="6688482">(</span><span class="op" id="6688483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688486">defer</span>&nbsp;<span class="ident" id="6688492"><a href="/compress/lzw/writer_test.go.html#6688459">piper</a></span><span class="op" id="6688497">.</span><span class="ident" id="6688498">Close</span><span class="op" id="6688503">(</span><span class="op" id="6688504">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688507">go</span>&nbsp;<span class="keyword" id="6688510">func</span><span class="op" id="6688514">(</span><span class="op" id="6688515">)</span>&nbsp;<span class="op" id="6688517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688521">defer</span>&nbsp;<span class="ident" id="6688527"><a href="/compress/lzw/writer_test.go.html#6688334">raw</a></span><span class="op" id="6688530">.</span><span class="ident" id="6688531">Close</span><span class="op" id="6688536">(</span><span class="op" id="6688537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688541">defer</span>&nbsp;<span class="ident" id="6688547"><a href="/compress/lzw/writer_test.go.html#6688466">pipew</a></span><span class="op" id="6688552">.</span><span class="ident" id="6688553">Close</span><span class="op" id="6688558">(</span><span class="op" id="6688559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688563">lzww</span>&nbsp;<span class="op" id="6688568">:=</span>&nbsp;<span class="ident" id="6688571"><a href="/compress/lzw/writer.go.html#6338391">NewWriter</a></span><span class="op" id="6688580">(</span><span class="ident" id="6688581"><a href="/compress/lzw/writer_test.go.html#6688466">pipew</a></span><span class="op" id="6688586">,</span>&nbsp;<span class="ident" id="6688588"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6688593">,</span>&nbsp;<span class="ident" id="6688595"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6688603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688607">defer</span>&nbsp;<span class="ident" id="6688613"><a href="/compress/lzw/writer_test.go.html#6688563">lzww</a></span><span class="op" id="6688617">.</span><span class="ident" id="6688618">Close</span><span class="op" id="6688623">(</span><span class="op" id="6688624">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688628">var</span>&nbsp;<span class="ident" id="6688632">b</span>&nbsp;<span class="op" id="6688634">[</span><span class="num" id="6688635">4096</span><span class="op" id="6688639">]</span><span class="builtintype" id="6688640">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688647">for</span>&nbsp;<span class="op" id="6688651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688656">n</span><span class="op" id="6688657">,</span>&nbsp;<span class="ident" id="6688659">err0</span>&nbsp;<span class="op" id="6688664">:=</span>&nbsp;<span class="ident" id="6688667"><a href="/compress/lzw/writer_test.go.html#6688334">raw</a></span><span class="op" id="6688670">.</span><span class="ident" id="6688671">Read</span><span class="op" id="6688675">(</span><span class="ident" id="6688676"><a href="/compress/lzw/writer_test.go.html#6688632">b</a></span><span class="op" id="6688677">[</span><span class="op" id="6688678">:</span><span class="op" id="6688679">]</span><span class="op" id="6688680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688685">if</span>&nbsp;<span class="ident" id="6688688"><a href="/compress/lzw/writer_test.go.html#6688659">err0</a></span>&nbsp;<span class="op" id="6688693">!=</span>&nbsp;<span class="ident" id="6688696">nil</span>&nbsp;<span class="op" id="6688700">&amp;&amp;</span>&nbsp;<span class="ident" id="6688703"><a href="/compress/lzw/writer_test.go.html#6688659">err0</a></span>&nbsp;<span class="op" id="6688708">!=</span>&nbsp;<span class="ident" id="6688711"><a href="/compress/lzw/writer_test.go.html#6687690">io</a></span><span class="op" id="6688713">.</span><span class="ident" id="6688714">EOF</span>&nbsp;<span class="op" id="6688718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688724"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6688725">.</span><span class="ident" id="6688726">Errorf</span><span class="op" id="6688732">(</span><span class="string" id="6688733">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6688764">,</span>&nbsp;<span class="ident" id="6688766"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688768">,</span>&nbsp;<span class="ident" id="6688770"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6688775">,</span>&nbsp;<span class="ident" id="6688777"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6688785">,</span>&nbsp;<span class="ident" id="6688787"><a href="/compress/lzw/writer_test.go.html#6688659">err0</a></span><span class="op" id="6688791">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688797">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688812">_</span><span class="op" id="6688813">,</span>&nbsp;<span class="ident" id="6688815">err1</span>&nbsp;<span class="op" id="6688820">:=</span>&nbsp;<span class="ident" id="6688823"><a href="/compress/lzw/writer_test.go.html#6688563">lzww</a></span><span class="op" id="6688827">.</span><span class="ident" id="6688828">Write</span><span class="op" id="6688833">(</span><span class="ident" id="6688834"><a href="/compress/lzw/writer_test.go.html#6688632">b</a></span><span class="op" id="6688835">[</span><span class="op" id="6688836">:</span><span class="ident" id="6688837"><a href="/compress/lzw/writer_test.go.html#6688656">n</a></span><span class="op" id="6688838">]</span><span class="op" id="6688839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688844">if</span>&nbsp;<span class="ident" id="6688847"><a href="/compress/lzw/writer_test.go.html#6688815">err1</a></span>&nbsp;<span class="op" id="6688852">!=</span>&nbsp;<span class="ident" id="6688855">nil</span>&nbsp;<span class="op" id="6688859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688865"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6688866">.</span><span class="ident" id="6688867">Errorf</span><span class="op" id="6688873">(</span><span class="string" id="6688874">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6688905">,</span>&nbsp;<span class="ident" id="6688907"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6688909">,</span>&nbsp;<span class="ident" id="6688911"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6688916">,</span>&nbsp;<span class="ident" id="6688918"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6688926">,</span>&nbsp;<span class="ident" id="6688928"><a href="/compress/lzw/writer_test.go.html#6688815">err1</a></span><span class="op" id="6688932">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688938">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688953">if</span>&nbsp;<span class="ident" id="6688956"><a href="/compress/lzw/writer_test.go.html#6688659">err0</a></span>&nbsp;<span class="op" id="6688961">==</span>&nbsp;<span class="ident" id="6688964"><a href="/compress/lzw/writer_test.go.html#6687690">io</a></span><span class="op" id="6688966">.</span><span class="ident" id="6688967">EOF</span>&nbsp;<span class="op" id="6688971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6688977">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688986">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6688993">}</span><span class="op" id="6688994">(</span><span class="op" id="6688995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6688998">lzwr</span>&nbsp;<span class="op" id="6689003">:=</span>&nbsp;<span class="ident" id="6689006"><a href="/compress/lzw/reader.go.html#6331475">NewReader</a></span><span class="op" id="6689015">(</span><span class="ident" id="6689016"><a href="/compress/lzw/writer_test.go.html#6688459">piper</a></span><span class="op" id="6689021">,</span>&nbsp;<span class="ident" id="6689023"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6689028">,</span>&nbsp;<span class="ident" id="6689030"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6689038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689041">defer</span>&nbsp;<span class="ident" id="6689047"><a href="/compress/lzw/writer_test.go.html#6688998">lzwr</a></span><span class="op" id="6689051">.</span><span class="ident" id="6689052">Close</span><span class="op" id="6689057">(</span><span class="op" id="6689058">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689062">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689083">b0</span><span class="op" id="6689085">,</span>&nbsp;<span class="ident" id="6689087">err0</span>&nbsp;<span class="op" id="6689092">:=</span>&nbsp;<span class="ident" id="6689095"><a href="/compress/lzw/writer_test.go.html#6687696">ioutil</a></span><span class="op" id="6689101">.</span><span class="ident" id="6689102">ReadAll</span><span class="op" id="6689109">(</span><span class="ident" id="6689110"><a href="/compress/lzw/writer_test.go.html#6688064">golden</a></span><span class="op" id="6689116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689119">b1</span><span class="op" id="6689121">,</span>&nbsp;<span class="ident" id="6689123">err1</span>&nbsp;<span class="op" id="6689128">:=</span>&nbsp;<span class="ident" id="6689131"><a href="/compress/lzw/writer_test.go.html#6687696">ioutil</a></span><span class="op" id="6689137">.</span><span class="ident" id="6689138">ReadAll</span><span class="op" id="6689145">(</span><span class="ident" id="6689146"><a href="/compress/lzw/writer_test.go.html#6688998">lzwr</a></span><span class="op" id="6689150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689153">if</span>&nbsp;<span class="ident" id="6689156"><a href="/compress/lzw/writer_test.go.html#6689087">err0</a></span>&nbsp;<span class="op" id="6689161">!=</span>&nbsp;<span class="ident" id="6689164">nil</span>&nbsp;<span class="op" id="6689168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689172"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6689173">.</span><span class="ident" id="6689174">Errorf</span><span class="op" id="6689180">(</span><span class="string" id="6689181">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6689212">,</span>&nbsp;<span class="ident" id="6689214"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6689216">,</span>&nbsp;<span class="ident" id="6689218"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6689223">,</span>&nbsp;<span class="ident" id="6689225"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6689233">,</span>&nbsp;<span class="ident" id="6689235"><a href="/compress/lzw/writer_test.go.html#6689087">err0</a></span><span class="op" id="6689239">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689243">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689254">if</span>&nbsp;<span class="ident" id="6689257"><a href="/compress/lzw/writer_test.go.html#6689123">err1</a></span>&nbsp;<span class="op" id="6689262">!=</span>&nbsp;<span class="ident" id="6689265">nil</span>&nbsp;<span class="op" id="6689269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689273"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6689274">.</span><span class="ident" id="6689275">Errorf</span><span class="op" id="6689281">(</span><span class="string" id="6689282">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6689313">,</span>&nbsp;<span class="ident" id="6689315"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6689317">,</span>&nbsp;<span class="ident" id="6689319"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6689324">,</span>&nbsp;<span class="ident" id="6689326"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6689334">,</span>&nbsp;<span class="ident" id="6689336"><a href="/compress/lzw/writer_test.go.html#6689123">err1</a></span><span class="op" id="6689340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689344">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689355">if</span>&nbsp;<span class="builtinfunc" id="6689358">len</span><span class="op" id="6689361">(</span><span class="ident" id="6689362"><a href="/compress/lzw/writer_test.go.html#6689119">b1</a></span><span class="op" id="6689364">)</span>&nbsp;<span class="op" id="6689366">!=</span>&nbsp;<span class="builtinfunc" id="6689369">len</span><span class="op" id="6689372">(</span><span class="ident" id="6689373"><a href="/compress/lzw/writer_test.go.html#6689083">b0</a></span><span class="op" id="6689375">)</span>&nbsp;<span class="op" id="6689377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689381"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6689382">.</span><span class="ident" id="6689383">Errorf</span><span class="op" id="6689389">(</span><span class="string" id="6689390">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="6689443">,</span>&nbsp;<span class="ident" id="6689445"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6689447">,</span>&nbsp;<span class="ident" id="6689449"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6689454">,</span>&nbsp;<span class="ident" id="6689456"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6689464">,</span>&nbsp;<span class="builtinfunc" id="6689466">len</span><span class="op" id="6689469">(</span><span class="ident" id="6689470"><a href="/compress/lzw/writer_test.go.html#6689119">b1</a></span><span class="op" id="6689472">)</span><span class="op" id="6689473">,</span>&nbsp;<span class="builtinfunc" id="6689475">len</span><span class="op" id="6689478">(</span><span class="ident" id="6689479"><a href="/compress/lzw/writer_test.go.html#6689083">b0</a></span><span class="op" id="6689481">)</span><span class="op" id="6689482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689486">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689494">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689497">for</span>&nbsp;<span class="ident" id="6689501">i</span>&nbsp;<span class="op" id="6689503">:=</span>&nbsp;<span class="num" id="6689506">0</span><span class="op" id="6689507">;</span>&nbsp;<span class="ident" id="6689509"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span>&nbsp;<span class="op" id="6689511">&lt;</span>&nbsp;<span class="builtinfunc" id="6689513">len</span><span class="op" id="6689516">(</span><span class="ident" id="6689517"><a href="/compress/lzw/writer_test.go.html#6689083">b0</a></span><span class="op" id="6689519">)</span><span class="op" id="6689520">;</span>&nbsp;<span class="ident" id="6689522"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689523">++</span>&nbsp;<span class="op" id="6689526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689530">if</span>&nbsp;<span class="ident" id="6689533"><a href="/compress/lzw/writer_test.go.html#6689119">b1</a></span><span class="op" id="6689535">[</span><span class="ident" id="6689536"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689537">]</span>&nbsp;<span class="op" id="6689539">!=</span>&nbsp;<span class="ident" id="6689542"><a href="/compress/lzw/writer_test.go.html#6689083">b0</a></span><span class="op" id="6689544">[</span><span class="ident" id="6689545"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689546">]</span>&nbsp;<span class="op" id="6689548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689553"><a href="/compress/lzw/writer_test.go.html#6687972">t</a></span><span class="op" id="6689554">.</span><span class="ident" id="6689555">Errorf</span><span class="op" id="6689561">(</span><span class="string" id="6689562">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="6689625">,</span>&nbsp;<span class="ident" id="6689627"><a href="/compress/lzw/writer_test.go.html#6687986">fn</a></span><span class="op" id="6689629">,</span>&nbsp;<span class="ident" id="6689631"><a href="/compress/lzw/writer_test.go.html#6687997">order</a></span><span class="op" id="6689636">,</span>&nbsp;<span class="ident" id="6689638"><a href="/compress/lzw/writer_test.go.html#6688010">litWidth</a></span><span class="op" id="6689646">,</span>&nbsp;<span class="ident" id="6689648"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689649">,</span>&nbsp;<span class="ident" id="6689651"><a href="/compress/lzw/writer_test.go.html#6689119">b1</a></span><span class="op" id="6689653">[</span><span class="ident" id="6689654"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689655">]</span><span class="op" id="6689656">,</span>&nbsp;<span class="ident" id="6689658"><a href="/compress/lzw/writer_test.go.html#6689083">b0</a></span><span class="op" id="6689660">[</span><span class="ident" id="6689661"><a href="/compress/lzw/writer_test.go.html#6689501">i</a></span><span class="op" id="6689662">]</span><span class="op" id="6689663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689668">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689677">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689680">}</span><br>
<span class="lineno"></span><span class="op" id="6689682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6689685">func</span>&nbsp;<span class="ident" id="6689690">TestWriter</span><span class="op" id="6689700">(</span><span class="ident" id="6689701">t</span>&nbsp;<span class="op" id="6689703">*</span><span class="ident" id="6689704"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6689711">.</span><span class="ident" id="6689712">T</span><span class="op" id="6689713">)</span>&nbsp;<span class="op" id="6689715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689718">for</span>&nbsp;<span class="ident" id="6689722">_</span><span class="op" id="6689723">,</span>&nbsp;<span class="ident" id="6689725">filename</span>&nbsp;<span class="op" id="6689734">:=</span>&nbsp;<span class="keyword" id="6689737">range</span>&nbsp;<span class="ident" id="6689743"><a href="/compress/lzw/writer_test.go.html#6687743">filenames</a></span>&nbsp;<span class="op" id="6689753">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689757">for</span>&nbsp;<span class="ident" id="6689761">_</span><span class="op" id="6689762">,</span>&nbsp;<span class="ident" id="6689764">order</span>&nbsp;<span class="op" id="6689770">:=</span>&nbsp;<span class="keyword" id="6689773">range</span>&nbsp;<span class="op" id="6689779">[</span><span class="op" id="6689780">...</span><span class="op" id="6689783">]</span><span class="ident" id="6689784"><a href="/compress/lzw/reader.go.html#6326022">Order</a></span><span class="op" id="6689789">{</span><span class="ident" id="6689790"><a href="/compress/lzw/reader.go.html#6326118">LSB</a></span><span class="op" id="6689793">,</span>&nbsp;<span class="ident" id="6689795"><a href="/compress/lzw/reader.go.html#6326225">MSB</a></span><span class="op" id="6689798">}</span>&nbsp;<span class="op" id="6689800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6689805">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6689885">for</span>&nbsp;<span class="ident" id="6689889">_</span><span class="op" id="6689890">,</span>&nbsp;<span class="ident" id="6689892">litWidth</span>&nbsp;<span class="op" id="6689901">:=</span>&nbsp;<span class="keyword" id="6689904">range</span>&nbsp;<span class="op" id="6689910">[</span><span class="op" id="6689911">...</span><span class="op" id="6689914">]</span><span class="builtintype" id="6689915">int</span><span class="op" id="6689918">{</span><span class="num" id="6689919">6</span><span class="op" id="6689920">,</span>&nbsp;<span class="num" id="6689922">7</span><span class="op" id="6689923">,</span>&nbsp;<span class="num" id="6689925">8</span><span class="op" id="6689926">}</span>&nbsp;<span class="op" id="6689928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6689934"><a href="/compress/lzw/writer_test.go.html#6687963">testFile</a></span><span class="op" id="6689942">(</span><span class="ident" id="6689943"><a href="/compress/lzw/writer_test.go.html#6689701">t</a></span><span class="op" id="6689944">,</span>&nbsp;<span class="ident" id="6689946"><a href="/compress/lzw/writer_test.go.html#6689725">filename</a></span><span class="op" id="6689954">,</span>&nbsp;<span class="ident" id="6689956"><a href="/compress/lzw/writer_test.go.html#6689764">order</a></span><span class="op" id="6689961">,</span>&nbsp;<span class="ident" id="6689963"><a href="/compress/lzw/writer_test.go.html#6689892">litWidth</a></span><span class="op" id="6689971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689976">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6689983">}</span><br>
<span class="lineno"></span><span class="op" id="6689985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6689988">func</span>&nbsp;<span class="ident" id="6689993">TestWriterReturnValues</span><span class="op" id="6690015">(</span><span class="ident" id="6690016">t</span>&nbsp;<span class="op" id="6690018">*</span><span class="ident" id="6690019"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6690026">.</span><span class="ident" id="6690027">T</span><span class="op" id="6690028">)</span>&nbsp;<span class="op" id="6690030">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690033">w</span>&nbsp;<span class="op" id="6690035">:=</span>&nbsp;<span class="ident" id="6690038"><a href="/compress/lzw/writer.go.html#6338391">NewWriter</a></span><span class="op" id="6690047">(</span><span class="ident" id="6690048"><a href="/compress/lzw/writer_test.go.html#6687696">ioutil</a></span><span class="op" id="6690054">.</span><span class="ident" id="6690055">Discard</span><span class="op" id="6690062">,</span>&nbsp;<span class="ident" id="6690064"><a href="/compress/lzw/reader.go.html#6326118">LSB</a></span><span class="op" id="6690067">,</span>&nbsp;<span class="num" id="6690069">8</span><span class="op" id="6690070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690073">n</span><span class="op" id="6690074">,</span>&nbsp;<span class="ident" id="6690076">err</span>&nbsp;<span class="op" id="6690080">:=</span>&nbsp;<span class="ident" id="6690083"><a href="/compress/lzw/writer_test.go.html#6690033">w</a></span><span class="op" id="6690084">.</span><span class="ident" id="6690085">Write</span><span class="op" id="6690090">(</span><span class="op" id="6690091">[</span><span class="op" id="6690092">]</span><span class="builtintype" id="6690093">byte</span><span class="op" id="6690097">(</span><span class="string" id="6690098">&#34;asdf&#34;</span><span class="op" id="6690104">)</span><span class="op" id="6690105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690108">if</span>&nbsp;<span class="ident" id="6690111"><a href="/compress/lzw/writer_test.go.html#6690073">n</a></span>&nbsp;<span class="op" id="6690113">!=</span>&nbsp;<span class="num" id="6690116">4</span>&nbsp;<span class="op" id="6690118">||</span>&nbsp;<span class="ident" id="6690121"><a href="/compress/lzw/writer_test.go.html#6690076">err</a></span>&nbsp;<span class="op" id="6690125">!=</span>&nbsp;<span class="ident" id="6690128">nil</span>&nbsp;<span class="op" id="6690132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690136"><a href="/compress/lzw/writer_test.go.html#6690016">t</a></span><span class="op" id="6690137">.</span><span class="ident" id="6690138">Errorf</span><span class="op" id="6690144">(</span><span class="string" id="6690145">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="6690170">,</span>&nbsp;<span class="ident" id="6690172"><a href="/compress/lzw/writer_test.go.html#6690073">n</a></span><span class="op" id="6690173">,</span>&nbsp;<span class="ident" id="6690175"><a href="/compress/lzw/writer_test.go.html#6690076">err</a></span><span class="op" id="6690178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690181">}</span><br>
<span class="lineno">105</span><span class="op" id="6690183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6690186">func</span>&nbsp;<span class="ident" id="6690191">benchmarkEncoder</span><span class="op" id="6690207">(</span><span class="ident" id="6690208">b</span>&nbsp;<span class="op" id="6690210">*</span><span class="ident" id="6690211"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6690218">.</span><span class="ident" id="6690219">B</span><span class="op" id="6690220">,</span>&nbsp;<span class="ident" id="6690222">n</span>&nbsp;<span class="builtintype" id="6690224">int</span><span class="op" id="6690227">)</span>&nbsp;<span class="op" id="6690229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690232"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690233">.</span><span class="ident" id="6690234">StopTimer</span><span class="op" id="6690243">(</span><span class="op" id="6690244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690247"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690248">.</span><span class="ident" id="6690249">SetBytes</span><span class="op" id="6690257">(</span><span class="ident" id="6690258">int64</span><span class="op" id="6690263">(</span><span class="ident" id="6690264"><a href="/compress/lzw/writer_test.go.html#6690222">n</a></span><span class="op" id="6690265">)</span><span class="op" id="6690266">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690269">buf0</span><span class="op" id="6690273">,</span>&nbsp;<span class="ident" id="6690275">err</span>&nbsp;<span class="op" id="6690279">:=</span>&nbsp;<span class="ident" id="6690282"><a href="/compress/lzw/writer_test.go.html#6687696">ioutil</a></span><span class="op" id="6690288">.</span><span class="ident" id="6690289">ReadFile</span><span class="op" id="6690297">(</span><span class="string" id="6690298">&#34;../testdata/e.txt&#34;</span><span class="op" id="6690317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690320">if</span>&nbsp;<span class="ident" id="6690323"><a href="/compress/lzw/writer_test.go.html#6690275">err</a></span>&nbsp;<span class="op" id="6690327">!=</span>&nbsp;<span class="ident" id="6690330">nil</span>&nbsp;<span class="op" id="6690334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690338"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690339">.</span><span class="ident" id="6690340">Fatal</span><span class="op" id="6690345">(</span><span class="ident" id="6690346"><a href="/compress/lzw/writer_test.go.html#6690275">err</a></span><span class="op" id="6690349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690355">if</span>&nbsp;<span class="builtinfunc" id="6690358">len</span><span class="op" id="6690361">(</span><span class="ident" id="6690362"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span><span class="op" id="6690366">)</span>&nbsp;<span class="op" id="6690368">==</span>&nbsp;<span class="num" id="6690371">0</span>&nbsp;<span class="op" id="6690373">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690377"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690378">.</span><span class="ident" id="6690379">Fatalf</span><span class="op" id="6690385">(</span><span class="string" id="6690386">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="6690409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690415">buf1</span>&nbsp;<span class="op" id="6690420">:=</span>&nbsp;<span class="builtinfunc" id="6690423">make</span><span class="op" id="6690427">(</span><span class="op" id="6690428">[</span><span class="op" id="6690429">]</span><span class="builtintype" id="6690430">byte</span><span class="op" id="6690434">,</span>&nbsp;<span class="ident" id="6690436"><a href="/compress/lzw/writer_test.go.html#6690222">n</a></span><span class="op" id="6690437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690440">for</span>&nbsp;<span class="ident" id="6690444">i</span>&nbsp;<span class="op" id="6690446">:=</span>&nbsp;<span class="num" id="6690449">0</span><span class="op" id="6690450">;</span>&nbsp;<span class="ident" id="6690452"><a href="/compress/lzw/writer_test.go.html#6690444">i</a></span>&nbsp;<span class="op" id="6690454">&lt;</span>&nbsp;<span class="ident" id="6690456"><a href="/compress/lzw/writer_test.go.html#6690222">n</a></span><span class="op" id="6690457">;</span>&nbsp;<span class="ident" id="6690459"><a href="/compress/lzw/writer_test.go.html#6690444">i</a></span>&nbsp;<span class="op" id="6690461">+=</span>&nbsp;<span class="builtinfunc" id="6690464">len</span><span class="op" id="6690467">(</span><span class="ident" id="6690468"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span><span class="op" id="6690472">)</span>&nbsp;<span class="op" id="6690474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690478">if</span>&nbsp;<span class="builtinfunc" id="6690481">len</span><span class="op" id="6690484">(</span><span class="ident" id="6690485"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span><span class="op" id="6690489">)</span>&nbsp;<span class="op" id="6690491">&gt;</span>&nbsp;<span class="ident" id="6690493"><a href="/compress/lzw/writer_test.go.html#6690222">n</a></span><span class="op" id="6690494">-</span><span class="ident" id="6690495"><a href="/compress/lzw/writer_test.go.html#6690444">i</a></span>&nbsp;<span class="op" id="6690497">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690502"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span>&nbsp;<span class="op" id="6690507">=</span>&nbsp;<span class="ident" id="6690509"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span><span class="op" id="6690513">[</span><span class="op" id="6690514">:</span><span class="ident" id="6690515"><a href="/compress/lzw/writer_test.go.html#6690222">n</a></span><span class="op" id="6690516">-</span><span class="ident" id="6690517"><a href="/compress/lzw/writer_test.go.html#6690444">i</a></span><span class="op" id="6690518">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6690526">copy</span><span class="op" id="6690530">(</span><span class="ident" id="6690531"><a href="/compress/lzw/writer_test.go.html#6690415">buf1</a></span><span class="op" id="6690535">[</span><span class="ident" id="6690536"><a href="/compress/lzw/writer_test.go.html#6690444">i</a></span><span class="op" id="6690537">:</span><span class="op" id="6690538">]</span><span class="op" id="6690539">,</span>&nbsp;<span class="ident" id="6690541"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span><span class="op" id="6690545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690551"><a href="/compress/lzw/writer_test.go.html#6690269">buf0</a></span>&nbsp;<span class="op" id="6690556">=</span>&nbsp;<span class="ident" id="6690558">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690563"><a href="/compress/lzw/writer_test.go.html#6687715">runtime</a></span><span class="op" id="6690570">.</span><span class="ident" id="6690571">GC</span><span class="op" id="6690573">(</span><span class="op" id="6690574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690577"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690578">.</span><span class="ident" id="6690579">StartTimer</span><span class="op" id="6690589">(</span><span class="op" id="6690590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6690593">for</span>&nbsp;<span class="ident" id="6690597">i</span>&nbsp;<span class="op" id="6690599">:=</span>&nbsp;<span class="num" id="6690602">0</span><span class="op" id="6690603">;</span>&nbsp;<span class="ident" id="6690605"><a href="/compress/lzw/writer_test.go.html#6690597">i</a></span>&nbsp;<span class="op" id="6690607">&lt;</span>&nbsp;<span class="ident" id="6690609"><a href="/compress/lzw/writer_test.go.html#6690208">b</a></span><span class="op" id="6690610">.</span><span class="ident" id="6690611">N</span><span class="op" id="6690612">;</span>&nbsp;<span class="ident" id="6690614"><a href="/compress/lzw/writer_test.go.html#6690597">i</a></span><span class="op" id="6690615">++</span>&nbsp;<span class="op" id="6690618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690622">w</span>&nbsp;<span class="op" id="6690624">:=</span>&nbsp;<span class="ident" id="6690627"><a href="/compress/lzw/writer.go.html#6338391">NewWriter</a></span><span class="op" id="6690636">(</span><span class="ident" id="6690637"><a href="/compress/lzw/writer_test.go.html#6687696">ioutil</a></span><span class="op" id="6690643">.</span><span class="ident" id="6690644">Discard</span><span class="op" id="6690651">,</span>&nbsp;<span class="ident" id="6690653"><a href="/compress/lzw/reader.go.html#6326118">LSB</a></span><span class="op" id="6690656">,</span>&nbsp;<span class="num" id="6690658">8</span><span class="op" id="6690659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690663"><a href="/compress/lzw/writer_test.go.html#6690622">w</a></span><span class="op" id="6690664">.</span><span class="ident" id="6690665">Write</span><span class="op" id="6690670">(</span><span class="ident" id="6690671"><a href="/compress/lzw/writer_test.go.html#6690415">buf1</a></span><span class="op" id="6690675">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690679"><a href="/compress/lzw/writer_test.go.html#6690622">w</a></span><span class="op" id="6690680">.</span><span class="ident" id="6690681">Close</span><span class="op" id="6690686">(</span><span class="op" id="6690687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6690690">}</span><br>
<span class="lineno"></span><span class="op" id="6690692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6690695">func</span>&nbsp;<span class="ident" id="6690700">BenchmarkEncoder1e4</span><span class="op" id="6690719">(</span><span class="ident" id="6690720">b</span>&nbsp;<span class="op" id="6690722">*</span><span class="ident" id="6690723"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6690730">.</span><span class="ident" id="6690731">B</span><span class="op" id="6690732">)</span>&nbsp;<span class="op" id="6690734">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690737"><a href="/compress/lzw/writer_test.go.html#6690191">benchmarkEncoder</a></span><span class="op" id="6690753">(</span><span class="ident" id="6690754"><a href="/compress/lzw/writer_test.go.html#6690720">b</a></span><span class="op" id="6690755">,</span>&nbsp;<span class="num" id="6690757">1e4</span><span class="op" id="6690760">)</span><br>
<span class="lineno"></span><span class="op" id="6690762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6690765">func</span>&nbsp;<span class="ident" id="6690770">BenchmarkEncoder1e5</span><span class="op" id="6690789">(</span><span class="ident" id="6690790">b</span>&nbsp;<span class="op" id="6690792">*</span><span class="ident" id="6690793"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6690800">.</span><span class="ident" id="6690801">B</span><span class="op" id="6690802">)</span>&nbsp;<span class="op" id="6690804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690807"><a href="/compress/lzw/writer_test.go.html#6690191">benchmarkEncoder</a></span><span class="op" id="6690823">(</span><span class="ident" id="6690824"><a href="/compress/lzw/writer_test.go.html#6690790">b</a></span><span class="op" id="6690825">,</span>&nbsp;<span class="num" id="6690827">1e5</span><span class="op" id="6690830">)</span><br>
<span class="lineno">140</span><span class="op" id="6690832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6690835">func</span>&nbsp;<span class="ident" id="6690840">BenchmarkEncoder1e6</span><span class="op" id="6690859">(</span><span class="ident" id="6690860">b</span>&nbsp;<span class="op" id="6690862">*</span><span class="ident" id="6690863"><a href="/compress/lzw/writer_test.go.html#6687726">testing</a></span><span class="op" id="6690870">.</span><span class="ident" id="6690871">B</span><span class="op" id="6690872">)</span>&nbsp;<span class="op" id="6690874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6690877"><a href="/compress/lzw/writer_test.go.html#6690191">benchmarkEncoder</a></span><span class="op" id="6690893">(</span><span class="ident" id="6690894"><a href="/compress/lzw/writer_test.go.html#6690860">b</a></span><span class="op" id="6690895">,</span>&nbsp;<span class="num" id="6690897">1e6</span><span class="op" id="6690900">)</span><br>
<span class="lineno"></span><span class="op" id="6690902">}</span>
</div>
</body>
</html>
