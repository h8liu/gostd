<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4329822">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4329877">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4329931">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4329982">package</span>&nbsp;<span class="ident" id="4329990">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4329997">import</span>&nbsp;<span class="op" id="4330004">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330007">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330013">&#34;math&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4330020">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4330023">const</span>&nbsp;<span class="op" id="4330029">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330032">//&nbsp;The&nbsp;largest&nbsp;offset&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330061">offsetCodeCount</span>&nbsp;<span class="op" id="4330077">=</span>&nbsp;<span class="num" id="4330079">30</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330084">//&nbsp;The&nbsp;special&nbsp;code&nbsp;used&nbsp;to&nbsp;mark&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330138">endBlockMarker</span>&nbsp;<span class="op" id="4330153">=</span>&nbsp;<span class="num" id="4330155">256</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330161">//&nbsp;The&nbsp;first&nbsp;length&nbsp;code.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330188">lengthCodesStart</span>&nbsp;<span class="op" id="4330205">=</span>&nbsp;<span class="num" id="4330207">257</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330213">//&nbsp;The&nbsp;number&nbsp;of&nbsp;codegen&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330246">codegenCodeCount</span>&nbsp;<span class="op" id="4330263">=</span>&nbsp;<span class="num" id="4330265">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330269">badCode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4330286">=</span>&nbsp;<span class="num" id="4330288">255</span><br>
<span class="lineno">25</span><span class="op" id="4330292">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330295">//&nbsp;The&nbsp;number&nbsp;of&nbsp;extra&nbsp;bits&nbsp;needed&nbsp;by&nbsp;length&nbsp;code&nbsp;X&nbsp;-&nbsp;LENGTH_CODES_START.</span><br>
<span class="lineno"></span><span class="keyword" id="4330369">var</span>&nbsp;<span class="ident" id="4330373">lengthExtraBits</span>&nbsp;<span class="op" id="4330389">=</span>&nbsp;<span class="op" id="4330391">[</span><span class="op" id="4330392">]</span><span class="builtintype" id="4330393">int8</span><span class="op" id="4330397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330400">/*&nbsp;257&nbsp;*/</span>&nbsp;<span class="num" id="4330410">0</span><span class="op" id="4330411">,</span>&nbsp;<span class="num" id="4330413">0</span><span class="op" id="4330414">,</span>&nbsp;<span class="num" id="4330416">0</span><span class="op" id="4330417">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330420">/*&nbsp;260&nbsp;*/</span>&nbsp;<span class="num" id="4330430">0</span><span class="op" id="4330431">,</span>&nbsp;<span class="num" id="4330433">0</span><span class="op" id="4330434">,</span>&nbsp;<span class="num" id="4330436">0</span><span class="op" id="4330437">,</span>&nbsp;<span class="num" id="4330439">0</span><span class="op" id="4330440">,</span>&nbsp;<span class="num" id="4330442">0</span><span class="op" id="4330443">,</span>&nbsp;<span class="num" id="4330445">1</span><span class="op" id="4330446">,</span>&nbsp;<span class="num" id="4330448">1</span><span class="op" id="4330449">,</span>&nbsp;<span class="num" id="4330451">1</span><span class="op" id="4330452">,</span>&nbsp;<span class="num" id="4330454">1</span><span class="op" id="4330455">,</span>&nbsp;<span class="num" id="4330457">2</span><span class="op" id="4330458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330461">/*&nbsp;270&nbsp;*/</span>&nbsp;<span class="num" id="4330471">2</span><span class="op" id="4330472">,</span>&nbsp;<span class="num" id="4330474">2</span><span class="op" id="4330475">,</span>&nbsp;<span class="num" id="4330477">2</span><span class="op" id="4330478">,</span>&nbsp;<span class="num" id="4330480">3</span><span class="op" id="4330481">,</span>&nbsp;<span class="num" id="4330483">3</span><span class="op" id="4330484">,</span>&nbsp;<span class="num" id="4330486">3</span><span class="op" id="4330487">,</span>&nbsp;<span class="num" id="4330489">3</span><span class="op" id="4330490">,</span>&nbsp;<span class="num" id="4330492">4</span><span class="op" id="4330493">,</span>&nbsp;<span class="num" id="4330495">4</span><span class="op" id="4330496">,</span>&nbsp;<span class="num" id="4330498">4</span><span class="op" id="4330499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330502">/*&nbsp;280&nbsp;*/</span>&nbsp;<span class="num" id="4330512">4</span><span class="op" id="4330513">,</span>&nbsp;<span class="num" id="4330515">5</span><span class="op" id="4330516">,</span>&nbsp;<span class="num" id="4330518">5</span><span class="op" id="4330519">,</span>&nbsp;<span class="num" id="4330521">5</span><span class="op" id="4330522">,</span>&nbsp;<span class="num" id="4330524">5</span><span class="op" id="4330525">,</span>&nbsp;<span class="num" id="4330527">0</span><span class="op" id="4330528">,</span><br>
<span class="lineno"></span><span class="op" id="4330530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4330533">//&nbsp;The&nbsp;length&nbsp;indicated&nbsp;by&nbsp;length&nbsp;code&nbsp;X&nbsp;-&nbsp;LENGTH_CODES_START.</span><br>
<span class="lineno"></span><span class="keyword" id="4330596">var</span>&nbsp;<span class="ident" id="4330600">lengthBase</span>&nbsp;<span class="op" id="4330611">=</span>&nbsp;<span class="op" id="4330613">[</span><span class="op" id="4330614">]</span><span class="builtintype" id="4330615">uint32</span><span class="op" id="4330621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330624">0</span><span class="op" id="4330625">,</span>&nbsp;<span class="num" id="4330627">1</span><span class="op" id="4330628">,</span>&nbsp;<span class="num" id="4330630">2</span><span class="op" id="4330631">,</span>&nbsp;<span class="num" id="4330633">3</span><span class="op" id="4330634">,</span>&nbsp;<span class="num" id="4330636">4</span><span class="op" id="4330637">,</span>&nbsp;<span class="num" id="4330639">5</span><span class="op" id="4330640">,</span>&nbsp;<span class="num" id="4330642">6</span><span class="op" id="4330643">,</span>&nbsp;<span class="num" id="4330645">7</span><span class="op" id="4330646">,</span>&nbsp;<span class="num" id="4330648">8</span><span class="op" id="4330649">,</span>&nbsp;<span class="num" id="4330651">10</span><span class="op" id="4330653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330656">12</span><span class="op" id="4330658">,</span>&nbsp;<span class="num" id="4330660">14</span><span class="op" id="4330662">,</span>&nbsp;<span class="num" id="4330664">16</span><span class="op" id="4330666">,</span>&nbsp;<span class="num" id="4330668">20</span><span class="op" id="4330670">,</span>&nbsp;<span class="num" id="4330672">24</span><span class="op" id="4330674">,</span>&nbsp;<span class="num" id="4330676">28</span><span class="op" id="4330678">,</span>&nbsp;<span class="num" id="4330680">32</span><span class="op" id="4330682">,</span>&nbsp;<span class="num" id="4330684">40</span><span class="op" id="4330686">,</span>&nbsp;<span class="num" id="4330688">48</span><span class="op" id="4330690">,</span>&nbsp;<span class="num" id="4330692">56</span><span class="op" id="4330694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330697">64</span><span class="op" id="4330699">,</span>&nbsp;<span class="num" id="4330701">80</span><span class="op" id="4330703">,</span>&nbsp;<span class="num" id="4330705">96</span><span class="op" id="4330707">,</span>&nbsp;<span class="num" id="4330709">112</span><span class="op" id="4330712">,</span>&nbsp;<span class="num" id="4330714">128</span><span class="op" id="4330717">,</span>&nbsp;<span class="num" id="4330719">160</span><span class="op" id="4330722">,</span>&nbsp;<span class="num" id="4330724">192</span><span class="op" id="4330727">,</span>&nbsp;<span class="num" id="4330729">224</span><span class="op" id="4330732">,</span>&nbsp;<span class="num" id="4330734">255</span><span class="op" id="4330737">,</span><br>
<span class="lineno">40</span><span class="op" id="4330739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330742">//&nbsp;offset&nbsp;code&nbsp;word&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span><span class="keyword" id="4330774">var</span>&nbsp;<span class="ident" id="4330778">offsetExtraBits</span>&nbsp;<span class="op" id="4330794">=</span>&nbsp;<span class="op" id="4330796">[</span><span class="op" id="4330797">]</span><span class="builtintype" id="4330798">int8</span><span class="op" id="4330802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330805">0</span><span class="op" id="4330806">,</span>&nbsp;<span class="num" id="4330808">0</span><span class="op" id="4330809">,</span>&nbsp;<span class="num" id="4330811">0</span><span class="op" id="4330812">,</span>&nbsp;<span class="num" id="4330814">0</span><span class="op" id="4330815">,</span>&nbsp;<span class="num" id="4330817">1</span><span class="op" id="4330818">,</span>&nbsp;<span class="num" id="4330820">1</span><span class="op" id="4330821">,</span>&nbsp;<span class="num" id="4330823">2</span><span class="op" id="4330824">,</span>&nbsp;<span class="num" id="4330826">2</span><span class="op" id="4330827">,</span>&nbsp;<span class="num" id="4330829">3</span><span class="op" id="4330830">,</span>&nbsp;<span class="num" id="4330832">3</span><span class="op" id="4330833">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330836">4</span><span class="op" id="4330837">,</span>&nbsp;<span class="num" id="4330839">4</span><span class="op" id="4330840">,</span>&nbsp;<span class="num" id="4330842">5</span><span class="op" id="4330843">,</span>&nbsp;<span class="num" id="4330845">5</span><span class="op" id="4330846">,</span>&nbsp;<span class="num" id="4330848">6</span><span class="op" id="4330849">,</span>&nbsp;<span class="num" id="4330851">6</span><span class="op" id="4330852">,</span>&nbsp;<span class="num" id="4330854">7</span><span class="op" id="4330855">,</span>&nbsp;<span class="num" id="4330857">7</span><span class="op" id="4330858">,</span>&nbsp;<span class="num" id="4330860">8</span><span class="op" id="4330861">,</span>&nbsp;<span class="num" id="4330863">8</span><span class="op" id="4330864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330867">9</span><span class="op" id="4330868">,</span>&nbsp;<span class="num" id="4330870">9</span><span class="op" id="4330871">,</span>&nbsp;<span class="num" id="4330873">10</span><span class="op" id="4330875">,</span>&nbsp;<span class="num" id="4330877">10</span><span class="op" id="4330879">,</span>&nbsp;<span class="num" id="4330881">11</span><span class="op" id="4330883">,</span>&nbsp;<span class="num" id="4330885">11</span><span class="op" id="4330887">,</span>&nbsp;<span class="num" id="4330889">12</span><span class="op" id="4330891">,</span>&nbsp;<span class="num" id="4330893">12</span><span class="op" id="4330895">,</span>&nbsp;<span class="num" id="4330897">13</span><span class="op" id="4330899">,</span>&nbsp;<span class="num" id="4330901">13</span><span class="op" id="4330903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330906">/*&nbsp;extended&nbsp;window&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4330929">14</span><span class="op" id="4330931">,</span>&nbsp;<span class="num" id="4330933">14</span><span class="op" id="4330935">,</span>&nbsp;<span class="num" id="4330937">15</span><span class="op" id="4330939">,</span>&nbsp;<span class="num" id="4330941">15</span><span class="op" id="4330943">,</span>&nbsp;<span class="num" id="4330945">16</span><span class="op" id="4330947">,</span>&nbsp;<span class="num" id="4330949">16</span><span class="op" id="4330951">,</span>&nbsp;<span class="num" id="4330953">17</span><span class="op" id="4330955">,</span>&nbsp;<span class="num" id="4330957">17</span><span class="op" id="4330959">,</span>&nbsp;<span class="num" id="4330961">18</span><span class="op" id="4330963">,</span>&nbsp;<span class="num" id="4330965">18</span><span class="op" id="4330967">,</span>&nbsp;<span class="num" id="4330969">19</span><span class="op" id="4330971">,</span>&nbsp;<span class="num" id="4330973">19</span><span class="op" id="4330975">,</span>&nbsp;<span class="num" id="4330977">20</span><span class="op" id="4330979">,</span>&nbsp;<span class="num" id="4330981">20</span><span class="op" id="4330983">,</span><br>
<span class="lineno"></span><span class="op" id="4330985">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4330988">var</span>&nbsp;<span class="ident" id="4330992">offsetBase</span>&nbsp;<span class="op" id="4331003">=</span>&nbsp;<span class="op" id="4331005">[</span><span class="op" id="4331006">]</span><span class="builtintype" id="4331007">uint32</span><span class="op" id="4331013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331016">/*&nbsp;normal&nbsp;deflate&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331038">0x000000</span><span class="op" id="4331046">,</span>&nbsp;<span class="num" id="4331048">0x000001</span><span class="op" id="4331056">,</span>&nbsp;<span class="num" id="4331058">0x000002</span><span class="op" id="4331066">,</span>&nbsp;<span class="num" id="4331068">0x000003</span><span class="op" id="4331076">,</span>&nbsp;<span class="num" id="4331078">0x000004</span><span class="op" id="4331086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331089">0x000006</span><span class="op" id="4331097">,</span>&nbsp;<span class="num" id="4331099">0x000008</span><span class="op" id="4331107">,</span>&nbsp;<span class="num" id="4331109">0x00000c</span><span class="op" id="4331117">,</span>&nbsp;<span class="num" id="4331119">0x000010</span><span class="op" id="4331127">,</span>&nbsp;<span class="num" id="4331129">0x000018</span><span class="op" id="4331137">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331140">0x000020</span><span class="op" id="4331148">,</span>&nbsp;<span class="num" id="4331150">0x000030</span><span class="op" id="4331158">,</span>&nbsp;<span class="num" id="4331160">0x000040</span><span class="op" id="4331168">,</span>&nbsp;<span class="num" id="4331170">0x000060</span><span class="op" id="4331178">,</span>&nbsp;<span class="num" id="4331180">0x000080</span><span class="op" id="4331188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331191">0x0000c0</span><span class="op" id="4331199">,</span>&nbsp;<span class="num" id="4331201">0x000100</span><span class="op" id="4331209">,</span>&nbsp;<span class="num" id="4331211">0x000180</span><span class="op" id="4331219">,</span>&nbsp;<span class="num" id="4331221">0x000200</span><span class="op" id="4331229">,</span>&nbsp;<span class="num" id="4331231">0x000300</span><span class="op" id="4331239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331242">0x000400</span><span class="op" id="4331250">,</span>&nbsp;<span class="num" id="4331252">0x000600</span><span class="op" id="4331260">,</span>&nbsp;<span class="num" id="4331262">0x000800</span><span class="op" id="4331270">,</span>&nbsp;<span class="num" id="4331272">0x000c00</span><span class="op" id="4331280">,</span>&nbsp;<span class="num" id="4331282">0x001000</span><span class="op" id="4331290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331293">0x001800</span><span class="op" id="4331301">,</span>&nbsp;<span class="num" id="4331303">0x002000</span><span class="op" id="4331311">,</span>&nbsp;<span class="num" id="4331313">0x003000</span><span class="op" id="4331321">,</span>&nbsp;<span class="num" id="4331323">0x004000</span><span class="op" id="4331331">,</span>&nbsp;<span class="num" id="4331333">0x006000</span><span class="op" id="4331341">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331345">/*&nbsp;extended&nbsp;window&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331368">0x008000</span><span class="op" id="4331376">,</span>&nbsp;<span class="num" id="4331378">0x00c000</span><span class="op" id="4331386">,</span>&nbsp;<span class="num" id="4331388">0x010000</span><span class="op" id="4331396">,</span>&nbsp;<span class="num" id="4331398">0x018000</span><span class="op" id="4331406">,</span>&nbsp;<span class="num" id="4331408">0x020000</span><span class="op" id="4331416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331419">0x030000</span><span class="op" id="4331427">,</span>&nbsp;<span class="num" id="4331429">0x040000</span><span class="op" id="4331437">,</span>&nbsp;<span class="num" id="4331439">0x060000</span><span class="op" id="4331447">,</span>&nbsp;<span class="num" id="4331449">0x080000</span><span class="op" id="4331457">,</span>&nbsp;<span class="num" id="4331459">0x0c0000</span><span class="op" id="4331467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4331470">0x100000</span><span class="op" id="4331478">,</span>&nbsp;<span class="num" id="4331480">0x180000</span><span class="op" id="4331488">,</span>&nbsp;<span class="num" id="4331490">0x200000</span><span class="op" id="4331498">,</span>&nbsp;<span class="num" id="4331500">0x300000</span><span class="op" id="4331508">,</span><br>
<span class="lineno"></span><span class="op" id="4331510">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4331513">//&nbsp;The&nbsp;odd&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;codegen&nbsp;code&nbsp;sizes&nbsp;are&nbsp;written.</span><br>
<span class="lineno"></span><span class="keyword" id="4331575">var</span>&nbsp;<span class="ident" id="4331579">codegenOrder</span>&nbsp;<span class="op" id="4331592">=</span>&nbsp;<span class="op" id="4331594">[</span><span class="op" id="4331595">]</span><span class="builtintype" id="4331596">uint32</span><span class="op" id="4331602">{</span><span class="num" id="4331603">16</span><span class="op" id="4331605">,</span>&nbsp;<span class="num" id="4331607">17</span><span class="op" id="4331609">,</span>&nbsp;<span class="num" id="4331611">18</span><span class="op" id="4331613">,</span>&nbsp;<span class="num" id="4331615">0</span><span class="op" id="4331616">,</span>&nbsp;<span class="num" id="4331618">8</span><span class="op" id="4331619">,</span>&nbsp;<span class="num" id="4331621">7</span><span class="op" id="4331622">,</span>&nbsp;<span class="num" id="4331624">9</span><span class="op" id="4331625">,</span>&nbsp;<span class="num" id="4331627">6</span><span class="op" id="4331628">,</span>&nbsp;<span class="num" id="4331630">10</span><span class="op" id="4331632">,</span>&nbsp;<span class="num" id="4331634">5</span><span class="op" id="4331635">,</span>&nbsp;<span class="num" id="4331637">11</span><span class="op" id="4331639">,</span>&nbsp;<span class="num" id="4331641">4</span><span class="op" id="4331642">,</span>&nbsp;<span class="num" id="4331644">12</span><span class="op" id="4331646">,</span>&nbsp;<span class="num" id="4331648">3</span><span class="op" id="4331649">,</span>&nbsp;<span class="num" id="4331651">13</span><span class="op" id="4331653">,</span>&nbsp;<span class="num" id="4331655">2</span><span class="op" id="4331656">,</span>&nbsp;<span class="num" id="4331658">14</span><span class="op" id="4331660">,</span>&nbsp;<span class="num" id="4331662">1</span><span class="op" id="4331663">,</span>&nbsp;<span class="num" id="4331665">15</span><span class="op" id="4331667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4331670">type</span>&nbsp;<span class="ident" id="4331675">huffmanBitWriter</span>&nbsp;<span class="keyword" id="4331692">struct</span>&nbsp;<span class="op" id="4331699">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331702">w</span>&nbsp;<span class="ident" id="4331704"><a href="/compress/flate/huffman_bit_writer.go.html#4330007">io</a></span><span class="op" id="4331706">.</span><span class="ident" id="4331707">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331715">//&nbsp;Data&nbsp;waiting&nbsp;to&nbsp;be&nbsp;written&nbsp;is&nbsp;bytes[0:nbytes]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331765">//&nbsp;and&nbsp;then&nbsp;the&nbsp;low&nbsp;nbits&nbsp;of&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331801">bits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331817">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331825">nbits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331841">uint32</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331849">bytes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331865">[</span><span class="num" id="4331866">64</span><span class="op" id="4331868">]</span><span class="builtintype" id="4331869">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331875">nbytes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331891">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331896">literalFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331912">[</span><span class="op" id="4331913">]</span><span class="builtintype" id="4331914">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331921">offsetFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331937">[</span><span class="op" id="4331938">]</span><span class="builtintype" id="4331939">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331946">codegen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331962">[</span><span class="op" id="4331963">]</span><span class="builtintype" id="4331964">uint8</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331971">codegenFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4331987">[</span><span class="op" id="4331988">]</span><span class="builtintype" id="4331989">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331996">literalEncoding</span>&nbsp;<span class="op" id="4332012">*</span><span class="ident" id="4332013"><a href="/compress/flate/huffman_code.go.html#4343250">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332029">offsetEncoding</span>&nbsp;&nbsp;<span class="op" id="4332045">*</span><span class="ident" id="4332046"><a href="/compress/flate/huffman_code.go.html#4343250">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332062">codegenEncoding</span>&nbsp;<span class="op" id="4332078">*</span><span class="ident" id="4332079"><a href="/compress/flate/huffman_code.go.html#4343250">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332095">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4332111">error</span><br>
<span class="lineno">85</span><span class="op" id="4332117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4332120">func</span>&nbsp;<span class="ident" id="4332125">newHuffmanBitWriter</span><span class="op" id="4332144">(</span><span class="ident" id="4332145">w</span>&nbsp;<span class="ident" id="4332147"><a href="/compress/flate/huffman_bit_writer.go.html#4330007">io</a></span><span class="op" id="4332149">.</span><span class="ident" id="4332150">Writer</span><span class="op" id="4332156">)</span>&nbsp;<span class="op" id="4332158">*</span><span class="ident" id="4332159"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span>&nbsp;<span class="op" id="4332176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332179">return</span>&nbsp;<span class="op" id="4332186">&amp;</span><span class="ident" id="4332187"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4332203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332207">w</span><span class="op" id="4332208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4332224"><a href="/compress/flate/huffman_bit_writer.go.html#4332145">w</a></span><span class="op" id="4332225">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332229">literalFreq</span><span class="op" id="4332240">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4332246">make</span><span class="op" id="4332250">(</span><span class="op" id="4332251">[</span><span class="op" id="4332252">]</span><span class="builtintype" id="4332253">int32</span><span class="op" id="4332258">,</span>&nbsp;<span class="ident" id="4332260"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span><span class="op" id="4332266">)</span><span class="op" id="4332267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332271">offsetFreq</span><span class="op" id="4332281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4332288">make</span><span class="op" id="4332292">(</span><span class="op" id="4332293">[</span><span class="op" id="4332294">]</span><span class="builtintype" id="4332295">int32</span><span class="op" id="4332300">,</span>&nbsp;<span class="ident" id="4332302"><a href="/compress/flate/huffman_bit_writer.go.html#4330061">offsetCodeCount</a></span><span class="op" id="4332317">)</span><span class="op" id="4332318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332322">codegen</span><span class="op" id="4332329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4332339">make</span><span class="op" id="4332343">(</span><span class="op" id="4332344">[</span><span class="op" id="4332345">]</span><span class="builtintype" id="4332346">uint8</span><span class="op" id="4332351">,</span>&nbsp;<span class="ident" id="4332353"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span><span class="op" id="4332359">+</span><span class="ident" id="4332360"><a href="/compress/flate/huffman_bit_writer.go.html#4330061">offsetCodeCount</a></span><span class="op" id="4332375">+</span><span class="num" id="4332376">1</span><span class="op" id="4332377">)</span><span class="op" id="4332378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332382">codegenFreq</span><span class="op" id="4332393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4332399">make</span><span class="op" id="4332403">(</span><span class="op" id="4332404">[</span><span class="op" id="4332405">]</span><span class="builtintype" id="4332406">int32</span><span class="op" id="4332411">,</span>&nbsp;<span class="ident" id="4332413"><a href="/compress/flate/huffman_bit_writer.go.html#4330246">codegenCodeCount</a></span><span class="op" id="4332429">)</span><span class="op" id="4332430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332434">literalEncoding</span><span class="op" id="4332449">:</span>&nbsp;<span class="ident" id="4332451"><a href="/compress/flate/huffman_code.go.html#4344043">newHuffmanEncoder</a></span><span class="op" id="4332468">(</span><span class="ident" id="4332469"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span><span class="op" id="4332475">)</span><span class="op" id="4332476">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332480">offsetEncoding</span><span class="op" id="4332494">:</span>&nbsp;&nbsp;<span class="ident" id="4332497"><a href="/compress/flate/huffman_code.go.html#4344043">newHuffmanEncoder</a></span><span class="op" id="4332514">(</span><span class="ident" id="4332515"><a href="/compress/flate/huffman_bit_writer.go.html#4330061">offsetCodeCount</a></span><span class="op" id="4332530">)</span><span class="op" id="4332531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332535">codegenEncoding</span><span class="op" id="4332550">:</span>&nbsp;<span class="ident" id="4332552"><a href="/compress/flate/huffman_code.go.html#4344043">newHuffmanEncoder</a></span><span class="op" id="4332569">(</span><span class="ident" id="4332570"><a href="/compress/flate/huffman_bit_writer.go.html#4330246">codegenCodeCount</a></span><span class="op" id="4332586">)</span><span class="op" id="4332587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332590">}</span><br>
<span class="lineno"></span><span class="op" id="4332592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="4332595">func</span>&nbsp;<span class="op" id="4332600">(</span><span class="ident" id="4332601">w</span>&nbsp;<span class="op" id="4332603">*</span><span class="ident" id="4332604"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4332620">)</span>&nbsp;<span class="ident" id="4332622">reset</span><span class="op" id="4332627">(</span><span class="ident" id="4332628">writer</span>&nbsp;<span class="ident" id="4332635"><a href="/compress/flate/huffman_bit_writer.go.html#4330007">io</a></span><span class="op" id="4332637">.</span><span class="ident" id="4332638">Writer</span><span class="op" id="4332644">)</span>&nbsp;<span class="op" id="4332646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332649"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332650">.</span><span class="ident" id="4332651">w</span>&nbsp;<span class="op" id="4332653">=</span>&nbsp;<span class="ident" id="4332655"><a href="/compress/flate/huffman_bit_writer.go.html#4332628">writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332663"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332664">.</span><span class="ident" id="4332665">bits</span><span class="op" id="4332669">,</span>&nbsp;<span class="ident" id="4332671"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332672">.</span><span class="ident" id="4332673">nbits</span><span class="op" id="4332678">,</span>&nbsp;<span class="ident" id="4332680"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332681">.</span><span class="ident" id="4332682">nbytes</span><span class="op" id="4332688">,</span>&nbsp;<span class="ident" id="4332690"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332691">.</span><span class="ident" id="4332692">err</span>&nbsp;<span class="op" id="4332696">=</span>&nbsp;<span class="num" id="4332698">0</span><span class="op" id="4332699">,</span>&nbsp;<span class="num" id="4332701">0</span><span class="op" id="4332702">,</span>&nbsp;<span class="num" id="4332704">0</span><span class="op" id="4332705">,</span>&nbsp;<span class="ident" id="4332707">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332712"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332713">.</span><span class="ident" id="4332714">bytes</span>&nbsp;<span class="op" id="4332720">=</span>&nbsp;<span class="op" id="4332722">[</span><span class="num" id="4332723">64</span><span class="op" id="4332725">]</span><span class="builtintype" id="4332726">byte</span><span class="op" id="4332730">{</span><span class="op" id="4332731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332734">for</span>&nbsp;<span class="ident" id="4332738">i</span>&nbsp;<span class="op" id="4332740">:=</span>&nbsp;<span class="keyword" id="4332743">range</span>&nbsp;<span class="ident" id="4332749"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332750">.</span><span class="ident" id="4332751">codegen</span>&nbsp;<span class="op" id="4332759">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332763"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332764">.</span><span class="ident" id="4332765">codegen</span><span class="op" id="4332772">[</span><span class="ident" id="4332773"><a href="/compress/flate/huffman_bit_writer.go.html#4332738">i</a></span><span class="op" id="4332774">]</span>&nbsp;<span class="op" id="4332776">=</span>&nbsp;<span class="num" id="4332778">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332784">for</span>&nbsp;<span class="ident" id="4332788">_</span><span class="op" id="4332789">,</span>&nbsp;<span class="ident" id="4332791">s</span>&nbsp;<span class="op" id="4332793">:=</span>&nbsp;<span class="keyword" id="4332796">range</span>&nbsp;<span class="op" id="4332802">[</span><span class="op" id="4332803">...</span><span class="op" id="4332806">]</span><span class="op" id="4332807">[</span><span class="op" id="4332808">]</span><span class="builtintype" id="4332809">int32</span><span class="op" id="4332814">{</span><span class="ident" id="4332815"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332816">.</span><span class="ident" id="4332817">literalFreq</span><span class="op" id="4332828">,</span>&nbsp;<span class="ident" id="4332830"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332831">.</span><span class="ident" id="4332832">offsetFreq</span><span class="op" id="4332842">,</span>&nbsp;<span class="ident" id="4332844"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332845">.</span><span class="ident" id="4332846">codegenFreq</span><span class="op" id="4332857">}</span>&nbsp;<span class="op" id="4332859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332863">for</span>&nbsp;<span class="ident" id="4332867">i</span>&nbsp;<span class="op" id="4332869">:=</span>&nbsp;<span class="keyword" id="4332872">range</span>&nbsp;<span class="ident" id="4332878"><a href="/compress/flate/huffman_bit_writer.go.html#4332791">s</a></span>&nbsp;<span class="op" id="4332880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332885"><a href="/compress/flate/huffman_bit_writer.go.html#4332791">s</a></span><span class="op" id="4332886">[</span><span class="ident" id="4332887"><a href="/compress/flate/huffman_bit_writer.go.html#4332867">i</a></span><span class="op" id="4332888">]</span>&nbsp;<span class="op" id="4332890">=</span>&nbsp;<span class="num" id="4332892">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332902">for</span>&nbsp;<span class="ident" id="4332906">_</span><span class="op" id="4332907">,</span>&nbsp;<span class="ident" id="4332909">enc</span>&nbsp;<span class="op" id="4332913">:=</span>&nbsp;<span class="keyword" id="4332916">range</span>&nbsp;<span class="op" id="4332922">[</span><span class="op" id="4332923">...</span><span class="op" id="4332926">]</span><span class="op" id="4332927">*</span><span class="ident" id="4332928"><a href="/compress/flate/huffman_code.go.html#4343250">huffmanEncoder</a></span><span class="op" id="4332942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332946"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332947">.</span><span class="ident" id="4332948">literalEncoding</span><span class="op" id="4332963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332967"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332968">.</span><span class="ident" id="4332969">offsetEncoding</span><span class="op" id="4332983">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332987"><a href="/compress/flate/huffman_bit_writer.go.html#4332601">w</a></span><span class="op" id="4332988">.</span><span class="ident" id="4332989">codegenEncoding</span><span class="op" id="4333004">}</span>&nbsp;<span class="op" id="4333006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333010">for</span>&nbsp;<span class="ident" id="4333014">i</span>&nbsp;<span class="op" id="4333016">:=</span>&nbsp;<span class="keyword" id="4333019">range</span>&nbsp;<span class="ident" id="4333025"><a href="/compress/flate/huffman_bit_writer.go.html#4332909">enc</a></span><span class="op" id="4333028">.</span><span class="ident" id="4333029">code</span>&nbsp;<span class="op" id="4333034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333039"><a href="/compress/flate/huffman_bit_writer.go.html#4332909">enc</a></span><span class="op" id="4333042">.</span><span class="ident" id="4333043">code</span><span class="op" id="4333047">[</span><span class="ident" id="4333048"><a href="/compress/flate/huffman_bit_writer.go.html#4333014">i</a></span><span class="op" id="4333049">]</span>&nbsp;<span class="op" id="4333051">=</span>&nbsp;<span class="num" id="4333053">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333061">for</span>&nbsp;<span class="ident" id="4333065">i</span>&nbsp;<span class="op" id="4333067">:=</span>&nbsp;<span class="keyword" id="4333070">range</span>&nbsp;<span class="ident" id="4333076"><a href="/compress/flate/huffman_bit_writer.go.html#4332909">enc</a></span><span class="op" id="4333079">.</span><span class="ident" id="4333080">codeBits</span>&nbsp;<span class="op" id="4333089">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333094"><a href="/compress/flate/huffman_bit_writer.go.html#4332909">enc</a></span><span class="op" id="4333097">.</span><span class="ident" id="4333098">codeBits</span><span class="op" id="4333106">[</span><span class="ident" id="4333107"><a href="/compress/flate/huffman_bit_writer.go.html#4333065">i</a></span><span class="op" id="4333108">]</span>&nbsp;<span class="op" id="4333110">=</span>&nbsp;<span class="num" id="4333112">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333119">}</span><br>
<span class="lineno"></span><span class="op" id="4333121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="4333124">func</span>&nbsp;<span class="op" id="4333129">(</span><span class="ident" id="4333130">w</span>&nbsp;<span class="op" id="4333132">*</span><span class="ident" id="4333133"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4333149">)</span>&nbsp;<span class="ident" id="4333151">flushBits</span><span class="op" id="4333160">(</span><span class="op" id="4333161">)</span>&nbsp;<span class="op" id="4333163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333166">if</span>&nbsp;<span class="ident" id="4333169"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333170">.</span><span class="ident" id="4333171">err</span>&nbsp;<span class="op" id="4333175">!=</span>&nbsp;<span class="ident" id="4333178">nil</span>&nbsp;<span class="op" id="4333182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333186"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333187">.</span><span class="ident" id="4333188">nbits</span>&nbsp;<span class="op" id="4333194">=</span>&nbsp;<span class="num" id="4333196">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333200">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333208">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333211">bits</span>&nbsp;<span class="op" id="4333216">:=</span>&nbsp;<span class="ident" id="4333219"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333220">.</span><span class="ident" id="4333221">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333227"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333228">.</span><span class="ident" id="4333229">bits</span>&nbsp;<span class="op" id="4333234">&gt;&gt;=</span>&nbsp;<span class="num" id="4333238">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333242"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333243">.</span><span class="ident" id="4333244">nbits</span>&nbsp;<span class="op" id="4333250">-=</span>&nbsp;<span class="num" id="4333253">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333257">n</span>&nbsp;<span class="op" id="4333259">:=</span>&nbsp;<span class="ident" id="4333262"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333263">.</span><span class="ident" id="4333264">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333272"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333273">.</span><span class="ident" id="4333274">bytes</span><span class="op" id="4333279">[</span><span class="ident" id="4333280"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span><span class="op" id="4333281">]</span>&nbsp;<span class="op" id="4333283">=</span>&nbsp;<span class="builtintype" id="4333285">byte</span><span class="op" id="4333289">(</span><span class="ident" id="4333290"><a href="/compress/flate/huffman_bit_writer.go.html#4333211">bits</a></span><span class="op" id="4333294">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333297"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333298">.</span><span class="ident" id="4333299">bytes</span><span class="op" id="4333304">[</span><span class="ident" id="4333305"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span><span class="op" id="4333306">+</span><span class="num" id="4333307">1</span><span class="op" id="4333308">]</span>&nbsp;<span class="op" id="4333310">=</span>&nbsp;<span class="builtintype" id="4333312">byte</span><span class="op" id="4333316">(</span><span class="ident" id="4333317"><a href="/compress/flate/huffman_bit_writer.go.html#4333211">bits</a></span>&nbsp;<span class="op" id="4333322">&gt;&gt;</span>&nbsp;<span class="num" id="4333325">8</span><span class="op" id="4333326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333329">if</span>&nbsp;<span class="ident" id="4333332"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span>&nbsp;<span class="op" id="4333334">+=</span>&nbsp;<span class="num" id="4333337">2</span><span class="op" id="4333338">;</span>&nbsp;<span class="ident" id="4333340"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span>&nbsp;<span class="op" id="4333342">&gt;=</span>&nbsp;<span class="builtinfunc" id="4333345">len</span><span class="op" id="4333348">(</span><span class="ident" id="4333349"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333350">.</span><span class="ident" id="4333351">bytes</span><span class="op" id="4333356">)</span>&nbsp;<span class="op" id="4333358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333362">_</span><span class="op" id="4333363">,</span>&nbsp;<span class="ident" id="4333365"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333366">.</span><span class="ident" id="4333367">err</span>&nbsp;<span class="op" id="4333371">=</span>&nbsp;<span class="ident" id="4333373"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333374">.</span><span class="ident" id="4333375">w</span><span class="op" id="4333376">.</span><span class="ident" id="4333377">Write</span><span class="op" id="4333382">(</span><span class="ident" id="4333383"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333384">.</span><span class="ident" id="4333385">bytes</span><span class="op" id="4333390">[</span><span class="num" id="4333391">0</span><span class="op" id="4333392">:</span><span class="op" id="4333393">]</span><span class="op" id="4333394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333398"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span>&nbsp;<span class="op" id="4333400">=</span>&nbsp;<span class="num" id="4333402">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333405">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333408"><a href="/compress/flate/huffman_bit_writer.go.html#4333130">w</a></span><span class="op" id="4333409">.</span><span class="ident" id="4333410">nbytes</span>&nbsp;<span class="op" id="4333417">=</span>&nbsp;<span class="ident" id="4333419"><a href="/compress/flate/huffman_bit_writer.go.html#4333257">n</a></span><br>
<span class="lineno"></span><span class="op" id="4333421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4333424">func</span>&nbsp;<span class="op" id="4333429">(</span><span class="ident" id="4333430">w</span>&nbsp;<span class="op" id="4333432">*</span><span class="ident" id="4333433"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4333449">)</span>&nbsp;<span class="ident" id="4333451">flush</span><span class="op" id="4333456">(</span><span class="op" id="4333457">)</span>&nbsp;<span class="op" id="4333459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333462">if</span>&nbsp;<span class="ident" id="4333465"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333466">.</span><span class="ident" id="4333467">err</span>&nbsp;<span class="op" id="4333471">!=</span>&nbsp;<span class="ident" id="4333474">nil</span>&nbsp;<span class="op" id="4333478">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333482"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333483">.</span><span class="ident" id="4333484">nbits</span>&nbsp;<span class="op" id="4333490">=</span>&nbsp;<span class="num" id="4333492">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333496">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333507">n</span>&nbsp;<span class="op" id="4333509">:=</span>&nbsp;<span class="ident" id="4333512"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333513">.</span><span class="ident" id="4333514">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333522">if</span>&nbsp;<span class="ident" id="4333525"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333526">.</span><span class="ident" id="4333527">nbits</span>&nbsp;<span class="op" id="4333533">&gt;</span>&nbsp;<span class="num" id="4333535">8</span>&nbsp;<span class="op" id="4333537">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333541"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333542">.</span><span class="ident" id="4333543">bytes</span><span class="op" id="4333548">[</span><span class="ident" id="4333549"><a href="/compress/flate/huffman_bit_writer.go.html#4333507">n</a></span><span class="op" id="4333550">]</span>&nbsp;<span class="op" id="4333552">=</span>&nbsp;<span class="builtintype" id="4333554">byte</span><span class="op" id="4333558">(</span><span class="ident" id="4333559"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333560">.</span><span class="ident" id="4333561">bits</span><span class="op" id="4333565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333569"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333570">.</span><span class="ident" id="4333571">bits</span>&nbsp;<span class="op" id="4333576">&gt;&gt;=</span>&nbsp;<span class="num" id="4333580">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333584"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333585">.</span><span class="ident" id="4333586">nbits</span>&nbsp;<span class="op" id="4333592">-=</span>&nbsp;<span class="num" id="4333595">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333599"><a href="/compress/flate/huffman_bit_writer.go.html#4333507">n</a></span><span class="op" id="4333600">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333604">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333607">if</span>&nbsp;<span class="ident" id="4333610"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333611">.</span><span class="ident" id="4333612">nbits</span>&nbsp;<span class="op" id="4333618">&gt;</span>&nbsp;<span class="num" id="4333620">0</span>&nbsp;<span class="op" id="4333622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333626"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333627">.</span><span class="ident" id="4333628">bytes</span><span class="op" id="4333633">[</span><span class="ident" id="4333634"><a href="/compress/flate/huffman_bit_writer.go.html#4333507">n</a></span><span class="op" id="4333635">]</span>&nbsp;<span class="op" id="4333637">=</span>&nbsp;<span class="builtintype" id="4333639">byte</span><span class="op" id="4333643">(</span><span class="ident" id="4333644"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333645">.</span><span class="ident" id="4333646">bits</span><span class="op" id="4333650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333654"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333655">.</span><span class="ident" id="4333656">nbits</span>&nbsp;<span class="op" id="4333662">=</span>&nbsp;<span class="num" id="4333664">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333668"><a href="/compress/flate/huffman_bit_writer.go.html#4333507">n</a></span><span class="op" id="4333669">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333673">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333676"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333677">.</span><span class="ident" id="4333678">bits</span>&nbsp;<span class="op" id="4333683">=</span>&nbsp;<span class="num" id="4333685">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333688">_</span><span class="op" id="4333689">,</span>&nbsp;<span class="ident" id="4333691"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333692">.</span><span class="ident" id="4333693">err</span>&nbsp;<span class="op" id="4333697">=</span>&nbsp;<span class="ident" id="4333699"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333700">.</span><span class="ident" id="4333701">w</span><span class="op" id="4333702">.</span><span class="ident" id="4333703">Write</span><span class="op" id="4333708">(</span><span class="ident" id="4333709"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333710">.</span><span class="ident" id="4333711">bytes</span><span class="op" id="4333716">[</span><span class="num" id="4333717">0</span><span class="op" id="4333718">:</span><span class="ident" id="4333719"><a href="/compress/flate/huffman_bit_writer.go.html#4333507">n</a></span><span class="op" id="4333720">]</span><span class="op" id="4333721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333724"><a href="/compress/flate/huffman_bit_writer.go.html#4333430">w</a></span><span class="op" id="4333725">.</span><span class="ident" id="4333726">nbytes</span>&nbsp;<span class="op" id="4333733">=</span>&nbsp;<span class="num" id="4333735">0</span><br>
<span class="lineno"></span><span class="op" id="4333737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="4333740">func</span>&nbsp;<span class="op" id="4333745">(</span><span class="ident" id="4333746">w</span>&nbsp;<span class="op" id="4333748">*</span><span class="ident" id="4333749"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4333765">)</span>&nbsp;<span class="ident" id="4333767">writeBits</span><span class="op" id="4333776">(</span><span class="ident" id="4333777">b</span><span class="op" id="4333778">,</span>&nbsp;<span class="ident" id="4333780">nb</span>&nbsp;<span class="builtintype" id="4333783">int32</span><span class="op" id="4333788">)</span>&nbsp;<span class="op" id="4333790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333793"><a href="/compress/flate/huffman_bit_writer.go.html#4333746">w</a></span><span class="op" id="4333794">.</span><span class="ident" id="4333795">bits</span>&nbsp;<span class="op" id="4333800">|=</span>&nbsp;<span class="builtintype" id="4333803">uint32</span><span class="op" id="4333809">(</span><span class="ident" id="4333810"><a href="/compress/flate/huffman_bit_writer.go.html#4333777">b</a></span><span class="op" id="4333811">)</span>&nbsp;<span class="op" id="4333813">&lt;&lt;</span>&nbsp;<span class="ident" id="4333816"><a href="/compress/flate/huffman_bit_writer.go.html#4333746">w</a></span><span class="op" id="4333817">.</span><span class="ident" id="4333818">nbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333825">if</span>&nbsp;<span class="ident" id="4333828"><a href="/compress/flate/huffman_bit_writer.go.html#4333746">w</a></span><span class="op" id="4333829">.</span><span class="ident" id="4333830">nbits</span>&nbsp;<span class="op" id="4333836">+=</span>&nbsp;<span class="builtintype" id="4333839">uint32</span><span class="op" id="4333845">(</span><span class="ident" id="4333846"><a href="/compress/flate/huffman_bit_writer.go.html#4333780">nb</a></span><span class="op" id="4333848">)</span><span class="op" id="4333849">;</span>&nbsp;<span class="ident" id="4333851"><a href="/compress/flate/huffman_bit_writer.go.html#4333746">w</a></span><span class="op" id="4333852">.</span><span class="ident" id="4333853">nbits</span>&nbsp;<span class="op" id="4333859">&gt;=</span>&nbsp;<span class="num" id="4333862">16</span>&nbsp;<span class="op" id="4333865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333869"><a href="/compress/flate/huffman_bit_writer.go.html#4333746">w</a></span><span class="op" id="4333870">.</span><span class="ident" id="4333871">flushBits</span><span class="op" id="4333880">(</span><span class="op" id="4333881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333884">}</span><br>
<span class="lineno">170</span><span class="op" id="4333886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4333889">func</span>&nbsp;<span class="op" id="4333894">(</span><span class="ident" id="4333895">w</span>&nbsp;<span class="op" id="4333897">*</span><span class="ident" id="4333898"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4333914">)</span>&nbsp;<span class="ident" id="4333916">writeBytes</span><span class="op" id="4333926">(</span><span class="ident" id="4333927">bytes</span>&nbsp;<span class="op" id="4333933">[</span><span class="op" id="4333934">]</span><span class="builtintype" id="4333935">byte</span><span class="op" id="4333939">)</span>&nbsp;<span class="op" id="4333941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333944">if</span>&nbsp;<span class="ident" id="4333947"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4333948">.</span><span class="ident" id="4333949">err</span>&nbsp;<span class="op" id="4333953">!=</span>&nbsp;<span class="ident" id="4333956">nil</span>&nbsp;<span class="op" id="4333960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333964">return</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333975">n</span>&nbsp;<span class="op" id="4333977">:=</span>&nbsp;<span class="ident" id="4333980"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4333981">.</span><span class="ident" id="4333982">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333990">if</span>&nbsp;<span class="ident" id="4333993"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4333994">.</span><span class="ident" id="4333995">nbits</span>&nbsp;<span class="op" id="4334001">==</span>&nbsp;<span class="num" id="4334004">8</span>&nbsp;<span class="op" id="4334006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334010"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334011">.</span><span class="ident" id="4334012">bytes</span><span class="op" id="4334017">[</span><span class="ident" id="4334018"><a href="/compress/flate/huffman_bit_writer.go.html#4333975">n</a></span><span class="op" id="4334019">]</span>&nbsp;<span class="op" id="4334021">=</span>&nbsp;<span class="builtintype" id="4334023">byte</span><span class="op" id="4334027">(</span><span class="ident" id="4334028"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334029">.</span><span class="ident" id="4334030">bits</span><span class="op" id="4334034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334038"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334039">.</span><span class="ident" id="4334040">nbits</span>&nbsp;<span class="op" id="4334046">=</span>&nbsp;<span class="num" id="4334048">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334052"><a href="/compress/flate/huffman_bit_writer.go.html#4333975">n</a></span><span class="op" id="4334053">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334060">if</span>&nbsp;<span class="ident" id="4334063"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334064">.</span><span class="ident" id="4334065">nbits</span>&nbsp;<span class="op" id="4334071">!=</span>&nbsp;<span class="num" id="4334074">0</span>&nbsp;<span class="op" id="4334076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334080"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334081">.</span><span class="ident" id="4334082">err</span>&nbsp;<span class="op" id="4334086">=</span>&nbsp;<span class="ident" id="4334088"><a href="/compress/flate/inflate.go.html#4353403">InternalError</a></span><span class="op" id="4334101">(</span><span class="string" id="4334102">&#34;writeBytes&nbsp;with&nbsp;unfinished&nbsp;bits&#34;</span><span class="op" id="4334135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334139">return</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334150">if</span>&nbsp;<span class="ident" id="4334153"><a href="/compress/flate/huffman_bit_writer.go.html#4333975">n</a></span>&nbsp;<span class="op" id="4334155">!=</span>&nbsp;<span class="num" id="4334158">0</span>&nbsp;<span class="op" id="4334160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334164">_</span><span class="op" id="4334165">,</span>&nbsp;<span class="ident" id="4334167"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334168">.</span><span class="ident" id="4334169">err</span>&nbsp;<span class="op" id="4334173">=</span>&nbsp;<span class="ident" id="4334175"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334176">.</span><span class="ident" id="4334177">w</span><span class="op" id="4334178">.</span><span class="ident" id="4334179">Write</span><span class="op" id="4334184">(</span><span class="ident" id="4334185"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334186">.</span><span class="ident" id="4334187">bytes</span><span class="op" id="4334192">[</span><span class="num" id="4334193">0</span><span class="op" id="4334194">:</span><span class="ident" id="4334195"><a href="/compress/flate/huffman_bit_writer.go.html#4333975">n</a></span><span class="op" id="4334196">]</span><span class="op" id="4334197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334201">if</span>&nbsp;<span class="ident" id="4334204"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334205">.</span><span class="ident" id="4334206">err</span>&nbsp;<span class="op" id="4334210">!=</span>&nbsp;<span class="ident" id="4334213">nil</span>&nbsp;<span class="op" id="4334217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334222">return</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334237"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334238">.</span><span class="ident" id="4334239">nbytes</span>&nbsp;<span class="op" id="4334246">=</span>&nbsp;<span class="num" id="4334248">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334251">_</span><span class="op" id="4334252">,</span>&nbsp;<span class="ident" id="4334254"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334255">.</span><span class="ident" id="4334256">err</span>&nbsp;<span class="op" id="4334260">=</span>&nbsp;<span class="ident" id="4334262"><a href="/compress/flate/huffman_bit_writer.go.html#4333895">w</a></span><span class="op" id="4334263">.</span><span class="ident" id="4334264">w</span><span class="op" id="4334265">.</span><span class="ident" id="4334266">Write</span><span class="op" id="4334271">(</span><span class="ident" id="4334272"><a href="/compress/flate/huffman_bit_writer.go.html#4333927">bytes</a></span><span class="op" id="4334277">)</span><br>
<span class="lineno"></span><span class="op" id="4334279">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4334282">//&nbsp;RFC&nbsp;1951&nbsp;3.2.7&nbsp;specifies&nbsp;a&nbsp;special&nbsp;run-length&nbsp;encoding&nbsp;for&nbsp;specifying</span><br>
<span class="lineno"></span><span class="comment" id="4334355">//&nbsp;the&nbsp;literal&nbsp;and&nbsp;offset&nbsp;lengths&nbsp;arrays&nbsp;(which&nbsp;are&nbsp;concatenated&nbsp;into&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span><span class="comment" id="4334434">//&nbsp;array).&nbsp;&nbsp;This&nbsp;method&nbsp;generates&nbsp;that&nbsp;run-length&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="4334494">//</span><br>
<span class="lineno">200</span><span class="comment" id="4334497">//&nbsp;The&nbsp;result&nbsp;is&nbsp;written&nbsp;into&nbsp;the&nbsp;codegen&nbsp;array,&nbsp;and&nbsp;the&nbsp;frequencies</span><br>
<span class="lineno"></span><span class="comment" id="4334566">//&nbsp;of&nbsp;each&nbsp;code&nbsp;is&nbsp;written&nbsp;into&nbsp;the&nbsp;codegenFreq&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4334621">//&nbsp;Codes&nbsp;0-15&nbsp;are&nbsp;single&nbsp;byte&nbsp;codes.&nbsp;Codes&nbsp;16-18&nbsp;are&nbsp;followed&nbsp;by&nbsp;additional</span><br>
<span class="lineno"></span><span class="comment" id="4334697">//&nbsp;information.&nbsp;&nbsp;Code&nbsp;badCode&nbsp;is&nbsp;an&nbsp;end&nbsp;marker</span><br>
<span class="lineno"></span><span class="comment" id="4334744">//</span><br>
<span class="lineno">205</span><span class="comment" id="4334747">//&nbsp;&nbsp;numLiterals&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;literals&nbsp;in&nbsp;literalEncoding</span><br>
<span class="lineno"></span><span class="comment" id="4334810">//&nbsp;&nbsp;numOffsets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;offsets&nbsp;in&nbsp;offsetEncoding</span><br>
<span class="lineno"></span><span class="keyword" id="4334871">func</span>&nbsp;<span class="op" id="4334876">(</span><span class="ident" id="4334877">w</span>&nbsp;<span class="op" id="4334879">*</span><span class="ident" id="4334880"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4334896">)</span>&nbsp;<span class="ident" id="4334898">generateCodegen</span><span class="op" id="4334913">(</span><span class="ident" id="4334914">numLiterals</span>&nbsp;<span class="builtintype" id="4334926">int</span><span class="op" id="4334929">,</span>&nbsp;<span class="ident" id="4334931">numOffsets</span>&nbsp;<span class="builtintype" id="4334942">int</span><span class="op" id="4334945">)</span>&nbsp;<span class="op" id="4334947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334950">for</span>&nbsp;<span class="ident" id="4334954">i</span>&nbsp;<span class="op" id="4334956">:=</span>&nbsp;<span class="keyword" id="4334959">range</span>&nbsp;<span class="ident" id="4334965"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4334966">.</span><span class="ident" id="4334967">codegenFreq</span>&nbsp;<span class="op" id="4334979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334983"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4334984">.</span><span class="ident" id="4334985">codegenFreq</span><span class="op" id="4334996">[</span><span class="ident" id="4334997"><a href="/compress/flate/huffman_bit_writer.go.html#4334954">i</a></span><span class="op" id="4334998">]</span>&nbsp;<span class="op" id="4335000">=</span>&nbsp;<span class="num" id="4335002">0</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335008">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;using&nbsp;codegen&nbsp;both&nbsp;as&nbsp;a&nbsp;temporary&nbsp;variable&nbsp;for&nbsp;holding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335084">//&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;frequencies,&nbsp;and&nbsp;as&nbsp;the&nbsp;place&nbsp;where&nbsp;we&nbsp;put&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335157">//&nbsp;This&nbsp;is&nbsp;fine&nbsp;because&nbsp;the&nbsp;output&nbsp;is&nbsp;always&nbsp;shorter&nbsp;than&nbsp;the&nbsp;input&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335231">//&nbsp;so&nbsp;far.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335243">codegen</span>&nbsp;<span class="op" id="4335251">:=</span>&nbsp;<span class="ident" id="4335254"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4335255">.</span><span class="ident" id="4335256">codegen</span>&nbsp;<span class="comment" id="4335264">//&nbsp;cache</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335274">//&nbsp;Copy&nbsp;the&nbsp;concatenated&nbsp;code&nbsp;sizes&nbsp;to&nbsp;codegen.&nbsp;&nbsp;Put&nbsp;a&nbsp;marker&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4335349">copy</span><span class="op" id="4335353">(</span><span class="ident" id="4335354"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335361">[</span><span class="num" id="4335362">0</span><span class="op" id="4335363">:</span><span class="ident" id="4335364"><a href="/compress/flate/huffman_bit_writer.go.html#4334914">numLiterals</a></span><span class="op" id="4335375">]</span><span class="op" id="4335376">,</span>&nbsp;<span class="ident" id="4335378"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4335379">.</span><span class="ident" id="4335380">literalEncoding</span><span class="op" id="4335395">.</span><span class="ident" id="4335396">codeBits</span><span class="op" id="4335404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4335407">copy</span><span class="op" id="4335411">(</span><span class="ident" id="4335412"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335419">[</span><span class="ident" id="4335420"><a href="/compress/flate/huffman_bit_writer.go.html#4334914">numLiterals</a></span><span class="op" id="4335431">:</span><span class="ident" id="4335432"><a href="/compress/flate/huffman_bit_writer.go.html#4334914">numLiterals</a></span><span class="op" id="4335443">+</span><span class="ident" id="4335444"><a href="/compress/flate/huffman_bit_writer.go.html#4334931">numOffsets</a></span><span class="op" id="4335454">]</span><span class="op" id="4335455">,</span>&nbsp;<span class="ident" id="4335457"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4335458">.</span><span class="ident" id="4335459">offsetEncoding</span><span class="op" id="4335473">.</span><span class="ident" id="4335474">codeBits</span><span class="op" id="4335482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335485"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335492">[</span><span class="ident" id="4335493"><a href="/compress/flate/huffman_bit_writer.go.html#4334914">numLiterals</a></span><span class="op" id="4335504">+</span><span class="ident" id="4335505"><a href="/compress/flate/huffman_bit_writer.go.html#4334931">numOffsets</a></span><span class="op" id="4335515">]</span>&nbsp;<span class="op" id="4335517">=</span>&nbsp;<span class="ident" id="4335519"><a href="/compress/flate/huffman_bit_writer.go.html#4330269">badCode</a></span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335529">size</span>&nbsp;<span class="op" id="4335534">:=</span>&nbsp;<span class="ident" id="4335537"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335544">[</span><span class="num" id="4335545">0</span><span class="op" id="4335546">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335549">count</span>&nbsp;<span class="op" id="4335555">:=</span>&nbsp;<span class="num" id="4335558">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335561">outIndex</span>&nbsp;<span class="op" id="4335570">:=</span>&nbsp;<span class="num" id="4335573">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335576">for</span>&nbsp;<span class="ident" id="4335580">inIndex</span>&nbsp;<span class="op" id="4335588">:=</span>&nbsp;<span class="num" id="4335591">1</span><span class="op" id="4335592">;</span>&nbsp;<span class="ident" id="4335594"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span>&nbsp;<span class="op" id="4335599">!=</span>&nbsp;<span class="ident" id="4335602"><a href="/compress/flate/huffman_bit_writer.go.html#4330269">badCode</a></span><span class="op" id="4335609">;</span>&nbsp;<span class="ident" id="4335611"><a href="/compress/flate/huffman_bit_writer.go.html#4335580">inIndex</a></span><span class="op" id="4335618">++</span>&nbsp;<span class="op" id="4335621">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335625">//&nbsp;INVARIANT:&nbsp;We&nbsp;have&nbsp;seen&nbsp;&#34;count&#34;&nbsp;copies&nbsp;of&nbsp;size&nbsp;that&nbsp;have&nbsp;not&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335695">//&nbsp;had&nbsp;output&nbsp;generated&nbsp;for&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335731">nextSize</span>&nbsp;<span class="op" id="4335740">:=</span>&nbsp;<span class="ident" id="4335743"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335750">[</span><span class="ident" id="4335751"><a href="/compress/flate/huffman_bit_writer.go.html#4335580">inIndex</a></span><span class="op" id="4335758">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335762">if</span>&nbsp;<span class="ident" id="4335765"><a href="/compress/flate/huffman_bit_writer.go.html#4335731">nextSize</a></span>&nbsp;<span class="op" id="4335774">==</span>&nbsp;<span class="ident" id="4335777"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span>&nbsp;<span class="op" id="4335782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335787"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><span class="op" id="4335792">++</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335798">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335813">//&nbsp;We&nbsp;need&nbsp;to&nbsp;generate&nbsp;codegen&nbsp;indicating&nbsp;&#34;count&#34;&nbsp;of&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335874">if</span>&nbsp;<span class="ident" id="4335877"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span>&nbsp;<span class="op" id="4335882">!=</span>&nbsp;<span class="num" id="4335885">0</span>&nbsp;<span class="op" id="4335887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335892"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4335899">[</span><span class="ident" id="4335900"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4335908">]</span>&nbsp;<span class="op" id="4335910">=</span>&nbsp;<span class="ident" id="4335912"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335920"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4335928">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335934"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4335935">.</span><span class="ident" id="4335936">codegenFreq</span><span class="op" id="4335947">[</span><span class="ident" id="4335948"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span><span class="op" id="4335952">]</span><span class="op" id="4335953">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335959"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><span class="op" id="4335964">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335970">for</span>&nbsp;<span class="ident" id="4335974"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4335980">&gt;=</span>&nbsp;<span class="num" id="4335983">3</span>&nbsp;<span class="op" id="4335985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335991">n</span>&nbsp;<span class="op" id="4335993">:=</span>&nbsp;<span class="num" id="4335996">6</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336002">if</span>&nbsp;<span class="ident" id="4336005"><a href="/compress/flate/huffman_bit_writer.go.html#4335991">n</a></span>&nbsp;<span class="op" id="4336007">&gt;</span>&nbsp;<span class="ident" id="4336009"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336022"><a href="/compress/flate/huffman_bit_writer.go.html#4335991">n</a></span>&nbsp;<span class="op" id="4336024">=</span>&nbsp;<span class="ident" id="4336026"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336042"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336049">[</span><span class="ident" id="4336050"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336058">]</span>&nbsp;<span class="op" id="4336060">=</span>&nbsp;<span class="num" id="4336062">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336069"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336077">++</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336084"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336091">[</span><span class="ident" id="4336092"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336100">]</span>&nbsp;<span class="op" id="4336102">=</span>&nbsp;<span class="builtintype" id="4336104">uint8</span><span class="op" id="4336109">(</span><span class="ident" id="4336110"><a href="/compress/flate/huffman_bit_writer.go.html#4335991">n</a></span>&nbsp;<span class="op" id="4336112">-</span>&nbsp;<span class="num" id="4336114">3</span><span class="op" id="4336115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336121"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336129">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336136"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4336137">.</span><span class="ident" id="4336138">codegenFreq</span><span class="op" id="4336149">[</span><span class="num" id="4336150">16</span><span class="op" id="4336152">]</span><span class="op" id="4336153">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336160"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336166">-=</span>&nbsp;<span class="ident" id="4336169"><a href="/compress/flate/huffman_bit_writer.go.html#4335991">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336174">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336178">}</span>&nbsp;<span class="keyword" id="4336180">else</span>&nbsp;<span class="op" id="4336185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336190">for</span>&nbsp;<span class="ident" id="4336194"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336200">&gt;=</span>&nbsp;<span class="num" id="4336203">11</span>&nbsp;<span class="op" id="4336206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336212">n</span>&nbsp;<span class="op" id="4336214">:=</span>&nbsp;<span class="num" id="4336217">138</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336225">if</span>&nbsp;<span class="ident" id="4336228"><a href="/compress/flate/huffman_bit_writer.go.html#4336212">n</a></span>&nbsp;<span class="op" id="4336230">&gt;</span>&nbsp;<span class="ident" id="4336232"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336245"><a href="/compress/flate/huffman_bit_writer.go.html#4336212">n</a></span>&nbsp;<span class="op" id="4336247">=</span>&nbsp;<span class="ident" id="4336249"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336265"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336272">[</span><span class="ident" id="4336273"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336281">]</span>&nbsp;<span class="op" id="4336283">=</span>&nbsp;<span class="num" id="4336285">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336292"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336300">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336307"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336314">[</span><span class="ident" id="4336315"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336323">]</span>&nbsp;<span class="op" id="4336325">=</span>&nbsp;<span class="builtintype" id="4336327">uint8</span><span class="op" id="4336332">(</span><span class="ident" id="4336333"><a href="/compress/flate/huffman_bit_writer.go.html#4336212">n</a></span>&nbsp;<span class="op" id="4336335">-</span>&nbsp;<span class="num" id="4336337">11</span><span class="op" id="4336339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336345"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336353">++</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336360"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4336361">.</span><span class="ident" id="4336362">codegenFreq</span><span class="op" id="4336373">[</span><span class="num" id="4336374">18</span><span class="op" id="4336376">]</span><span class="op" id="4336377">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336384"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336390">-=</span>&nbsp;<span class="ident" id="4336393"><a href="/compress/flate/huffman_bit_writer.go.html#4336212">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336403">if</span>&nbsp;<span class="ident" id="4336406"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336412">&gt;=</span>&nbsp;<span class="num" id="4336415">3</span>&nbsp;<span class="op" id="4336417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336423">//&nbsp;count&nbsp;&gt;=&nbsp;3&nbsp;&amp;&amp;&nbsp;count&nbsp;&lt;=&nbsp;10</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336456"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336463">[</span><span class="ident" id="4336464"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336472">]</span>&nbsp;<span class="op" id="4336474">=</span>&nbsp;<span class="num" id="4336476">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336483"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336491">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336498"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336505">[</span><span class="ident" id="4336506"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336514">]</span>&nbsp;<span class="op" id="4336516">=</span>&nbsp;<span class="builtintype" id="4336518">uint8</span><span class="op" id="4336523">(</span><span class="ident" id="4336524"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336530">-</span>&nbsp;<span class="num" id="4336532">3</span><span class="op" id="4336533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336539"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336547">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336554"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4336555">.</span><span class="ident" id="4336556">codegenFreq</span><span class="op" id="4336567">[</span><span class="num" id="4336568">17</span><span class="op" id="4336570">]</span><span class="op" id="4336571">++</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336578"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336584">=</span>&nbsp;<span class="num" id="4336586">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336599"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><span class="op" id="4336604">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336609">for</span>&nbsp;<span class="op" id="4336613">;</span>&nbsp;<span class="ident" id="4336615"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336621">&gt;=</span>&nbsp;<span class="num" id="4336624">0</span><span class="op" id="4336625">;</span>&nbsp;<span class="ident" id="4336627"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span><span class="op" id="4336632">--</span>&nbsp;<span class="op" id="4336635">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336640"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336647">[</span><span class="ident" id="4336648"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336656">]</span>&nbsp;<span class="op" id="4336658">=</span>&nbsp;<span class="ident" id="4336660"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336668"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336676">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336682"><a href="/compress/flate/huffman_bit_writer.go.html#4334877">w</a></span><span class="op" id="4336683">.</span><span class="ident" id="4336684">codegenFreq</span><span class="op" id="4336695">[</span><span class="ident" id="4336696"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span><span class="op" id="4336700">]</span><span class="op" id="4336701">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336710">//&nbsp;Set&nbsp;up&nbsp;invariant&nbsp;for&nbsp;next&nbsp;time&nbsp;through&nbsp;the&nbsp;loop.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336764"><a href="/compress/flate/huffman_bit_writer.go.html#4335529">size</a></span>&nbsp;<span class="op" id="4336769">=</span>&nbsp;<span class="ident" id="4336771"><a href="/compress/flate/huffman_bit_writer.go.html#4335731">nextSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336782"><a href="/compress/flate/huffman_bit_writer.go.html#4335549">count</a></span>&nbsp;<span class="op" id="4336788">=</span>&nbsp;<span class="num" id="4336790">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336796">//&nbsp;Marker&nbsp;indicating&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;codegen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336842"><a href="/compress/flate/huffman_bit_writer.go.html#4335243">codegen</a></span><span class="op" id="4336849">[</span><span class="ident" id="4336850"><a href="/compress/flate/huffman_bit_writer.go.html#4335561">outIndex</a></span><span class="op" id="4336858">]</span>&nbsp;<span class="op" id="4336860">=</span>&nbsp;<span class="ident" id="4336862"><a href="/compress/flate/huffman_bit_writer.go.html#4330269">badCode</a></span><br>
<span class="lineno">285</span><span class="op" id="4336870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4336873">func</span>&nbsp;<span class="op" id="4336878">(</span><span class="ident" id="4336879">w</span>&nbsp;<span class="op" id="4336881">*</span><span class="ident" id="4336882"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4336898">)</span>&nbsp;<span class="ident" id="4336900">writeCode</span><span class="op" id="4336909">(</span><span class="ident" id="4336910">code</span>&nbsp;<span class="op" id="4336915">*</span><span class="ident" id="4336916"><a href="/compress/flate/huffman_code.go.html#4343250">huffmanEncoder</a></span><span class="op" id="4336930">,</span>&nbsp;<span class="ident" id="4336932">literal</span>&nbsp;<span class="builtintype" id="4336940">uint32</span><span class="op" id="4336946">)</span>&nbsp;<span class="op" id="4336948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336951">if</span>&nbsp;<span class="ident" id="4336954"><a href="/compress/flate/huffman_bit_writer.go.html#4336879">w</a></span><span class="op" id="4336955">.</span><span class="ident" id="4336956">err</span>&nbsp;<span class="op" id="4336960">!=</span>&nbsp;<span class="ident" id="4336963">nil</span>&nbsp;<span class="op" id="4336967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336971">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336982"><a href="/compress/flate/huffman_bit_writer.go.html#4336879">w</a></span><span class="op" id="4336983">.</span><span class="ident" id="4336984">writeBits</span><span class="op" id="4336993">(</span><span class="builtintype" id="4336994">int32</span><span class="op" id="4336999">(</span><span class="ident" id="4337000"><a href="/compress/flate/huffman_bit_writer.go.html#4336910">code</a></span><span class="op" id="4337004">.</span><span class="ident" id="4337005">code</span><span class="op" id="4337009">[</span><span class="ident" id="4337010"><a href="/compress/flate/huffman_bit_writer.go.html#4336932">literal</a></span><span class="op" id="4337017">]</span><span class="op" id="4337018">)</span><span class="op" id="4337019">,</span>&nbsp;<span class="builtintype" id="4337021">int32</span><span class="op" id="4337026">(</span><span class="ident" id="4337027"><a href="/compress/flate/huffman_bit_writer.go.html#4336910">code</a></span><span class="op" id="4337031">.</span><span class="ident" id="4337032">codeBits</span><span class="op" id="4337040">[</span><span class="ident" id="4337041"><a href="/compress/flate/huffman_bit_writer.go.html#4336932">literal</a></span><span class="op" id="4337048">]</span><span class="op" id="4337049">)</span><span class="op" id="4337050">)</span><br>
<span class="lineno"></span><span class="op" id="4337052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4337055">//&nbsp;Write&nbsp;the&nbsp;header&nbsp;of&nbsp;a&nbsp;dynamic&nbsp;Huffman&nbsp;block&nbsp;to&nbsp;the&nbsp;output&nbsp;stream.</span><br>
<span class="lineno">295</span><span class="comment" id="4337124">//</span><br>
<span class="lineno"></span><span class="comment" id="4337127">//&nbsp;&nbsp;numLiterals&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;literals&nbsp;specified&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="comment" id="4337188">//&nbsp;&nbsp;numOffsets&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;offsets&nbsp;specified&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="comment" id="4337248">//&nbsp;&nbsp;numCodegens&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;codegens&nbsp;used&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="keyword" id="4337304">func</span>&nbsp;<span class="op" id="4337309">(</span><span class="ident" id="4337310">w</span>&nbsp;<span class="op" id="4337312">*</span><span class="ident" id="4337313"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4337329">)</span>&nbsp;<span class="ident" id="4337331">writeDynamicHeader</span><span class="op" id="4337349">(</span><span class="ident" id="4337350">numLiterals</span>&nbsp;<span class="builtintype" id="4337362">int</span><span class="op" id="4337365">,</span>&nbsp;<span class="ident" id="4337367">numOffsets</span>&nbsp;<span class="builtintype" id="4337378">int</span><span class="op" id="4337381">,</span>&nbsp;<span class="ident" id="4337383">numCodegens</span>&nbsp;<span class="builtintype" id="4337395">int</span><span class="op" id="4337398">,</span>&nbsp;<span class="ident" id="4337400">isEof</span>&nbsp;<span class="builtintype" id="4337406">bool</span><span class="op" id="4337410">)</span>&nbsp;<span class="op" id="4337412">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337415">if</span>&nbsp;<span class="ident" id="4337418"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337419">.</span><span class="ident" id="4337420">err</span>&nbsp;<span class="op" id="4337424">!=</span>&nbsp;<span class="ident" id="4337427">nil</span>&nbsp;<span class="op" id="4337431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337435">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337446">var</span>&nbsp;<span class="ident" id="4337450">firstBits</span>&nbsp;<span class="builtintype" id="4337460">int32</span>&nbsp;<span class="op" id="4337466">=</span>&nbsp;<span class="num" id="4337468">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337471">if</span>&nbsp;<span class="ident" id="4337474"><a href="/compress/flate/huffman_bit_writer.go.html#4337400">isEof</a></span>&nbsp;<span class="op" id="4337480">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337484"><a href="/compress/flate/huffman_bit_writer.go.html#4337450">firstBits</a></span>&nbsp;<span class="op" id="4337494">=</span>&nbsp;<span class="num" id="4337496">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337502"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337503">.</span><span class="ident" id="4337504">writeBits</span><span class="op" id="4337513">(</span><span class="ident" id="4337514"><a href="/compress/flate/huffman_bit_writer.go.html#4337450">firstBits</a></span><span class="op" id="4337523">,</span>&nbsp;<span class="num" id="4337525">3</span><span class="op" id="4337526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337529"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337530">.</span><span class="ident" id="4337531">writeBits</span><span class="op" id="4337540">(</span><span class="builtintype" id="4337541">int32</span><span class="op" id="4337546">(</span><span class="ident" id="4337547"><a href="/compress/flate/huffman_bit_writer.go.html#4337350">numLiterals</a></span><span class="op" id="4337558">-</span><span class="num" id="4337559">257</span><span class="op" id="4337562">)</span><span class="op" id="4337563">,</span>&nbsp;<span class="num" id="4337565">5</span><span class="op" id="4337566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337569"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337570">.</span><span class="ident" id="4337571">writeBits</span><span class="op" id="4337580">(</span><span class="builtintype" id="4337581">int32</span><span class="op" id="4337586">(</span><span class="ident" id="4337587"><a href="/compress/flate/huffman_bit_writer.go.html#4337367">numOffsets</a></span><span class="op" id="4337597">-</span><span class="num" id="4337598">1</span><span class="op" id="4337599">)</span><span class="op" id="4337600">,</span>&nbsp;<span class="num" id="4337602">5</span><span class="op" id="4337603">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337606"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337607">.</span><span class="ident" id="4337608">writeBits</span><span class="op" id="4337617">(</span><span class="builtintype" id="4337618">int32</span><span class="op" id="4337623">(</span><span class="ident" id="4337624"><a href="/compress/flate/huffman_bit_writer.go.html#4337383">numCodegens</a></span><span class="op" id="4337635">-</span><span class="num" id="4337636">4</span><span class="op" id="4337637">)</span><span class="op" id="4337638">,</span>&nbsp;<span class="num" id="4337640">4</span><span class="op" id="4337641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337645">for</span>&nbsp;<span class="ident" id="4337649">i</span>&nbsp;<span class="op" id="4337651">:=</span>&nbsp;<span class="num" id="4337654">0</span><span class="op" id="4337655">;</span>&nbsp;<span class="ident" id="4337657"><a href="/compress/flate/huffman_bit_writer.go.html#4337649">i</a></span>&nbsp;<span class="op" id="4337659">&lt;</span>&nbsp;<span class="ident" id="4337661"><a href="/compress/flate/huffman_bit_writer.go.html#4337383">numCodegens</a></span><span class="op" id="4337672">;</span>&nbsp;<span class="ident" id="4337674"><a href="/compress/flate/huffman_bit_writer.go.html#4337649">i</a></span><span class="op" id="4337675">++</span>&nbsp;<span class="op" id="4337678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337682">value</span>&nbsp;<span class="op" id="4337688">:=</span>&nbsp;<span class="ident" id="4337691"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337692">.</span><span class="ident" id="4337693">codegenEncoding</span><span class="op" id="4337708">.</span><span class="ident" id="4337709">codeBits</span><span class="op" id="4337717">[</span><span class="ident" id="4337718"><a href="/compress/flate/huffman_bit_writer.go.html#4331579">codegenOrder</a></span><span class="op" id="4337730">[</span><span class="ident" id="4337731"><a href="/compress/flate/huffman_bit_writer.go.html#4337649">i</a></span><span class="op" id="4337732">]</span><span class="op" id="4337733">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337737"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337738">.</span><span class="ident" id="4337739">writeBits</span><span class="op" id="4337748">(</span><span class="builtintype" id="4337749">int32</span><span class="op" id="4337754">(</span><span class="ident" id="4337755"><a href="/compress/flate/huffman_bit_writer.go.html#4337682">value</a></span><span class="op" id="4337760">)</span><span class="op" id="4337761">,</span>&nbsp;<span class="num" id="4337763">3</span><span class="op" id="4337764">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337771">i</span>&nbsp;<span class="op" id="4337773">:=</span>&nbsp;<span class="num" id="4337776">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337779">for</span>&nbsp;<span class="op" id="4337783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337787">var</span>&nbsp;<span class="ident" id="4337791">codeWord</span>&nbsp;<span class="builtintype" id="4337800">int</span>&nbsp;<span class="op" id="4337804">=</span>&nbsp;<span class="builtintype" id="4337806">int</span><span class="op" id="4337809">(</span><span class="ident" id="4337810"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337811">.</span><span class="ident" id="4337812">codegen</span><span class="op" id="4337819">[</span><span class="ident" id="4337820"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4337821">]</span><span class="op" id="4337822">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337826"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4337827">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337832">if</span>&nbsp;<span class="ident" id="4337835"><a href="/compress/flate/huffman_bit_writer.go.html#4337791">codeWord</a></span>&nbsp;<span class="op" id="4337844">==</span>&nbsp;<span class="ident" id="4337847"><a href="/compress/flate/huffman_bit_writer.go.html#4330269">badCode</a></span>&nbsp;<span class="op" id="4337855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337860">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4337872">//&nbsp;The&nbsp;low&nbsp;byte&nbsp;contains&nbsp;the&nbsp;actual&nbsp;code&nbsp;to&nbsp;generate.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337928"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337929">.</span><span class="ident" id="4337930">writeCode</span><span class="op" id="4337939">(</span><span class="ident" id="4337940"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4337941">.</span><span class="ident" id="4337942">codegenEncoding</span><span class="op" id="4337957">,</span>&nbsp;<span class="builtintype" id="4337959">uint32</span><span class="op" id="4337965">(</span><span class="ident" id="4337966"><a href="/compress/flate/huffman_bit_writer.go.html#4337791">codeWord</a></span><span class="op" id="4337974">)</span><span class="op" id="4337975">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337980">switch</span>&nbsp;<span class="ident" id="4337987"><a href="/compress/flate/huffman_bit_writer.go.html#4337791">codeWord</a></span>&nbsp;<span class="op" id="4337996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338000">case</span>&nbsp;<span class="num" id="4338005">16</span><span class="op" id="4338007">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338012"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338013">.</span><span class="ident" id="4338014">writeBits</span><span class="op" id="4338023">(</span><span class="builtintype" id="4338024">int32</span><span class="op" id="4338029">(</span><span class="ident" id="4338030"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338031">.</span><span class="ident" id="4338032">codegen</span><span class="op" id="4338039">[</span><span class="ident" id="4338040"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338041">]</span><span class="op" id="4338042">)</span><span class="op" id="4338043">,</span>&nbsp;<span class="num" id="4338045">2</span><span class="op" id="4338046">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338051"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338052">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338058">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338066">case</span>&nbsp;<span class="num" id="4338071">17</span><span class="op" id="4338073">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338078"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338079">.</span><span class="ident" id="4338080">writeBits</span><span class="op" id="4338089">(</span><span class="builtintype" id="4338090">int32</span><span class="op" id="4338095">(</span><span class="ident" id="4338096"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338097">.</span><span class="ident" id="4338098">codegen</span><span class="op" id="4338105">[</span><span class="ident" id="4338106"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338107">]</span><span class="op" id="4338108">)</span><span class="op" id="4338109">,</span>&nbsp;<span class="num" id="4338111">3</span><span class="op" id="4338112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338117"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338118">++</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338124">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338132">case</span>&nbsp;<span class="num" id="4338137">18</span><span class="op" id="4338139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338144"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338145">.</span><span class="ident" id="4338146">writeBits</span><span class="op" id="4338155">(</span><span class="builtintype" id="4338156">int32</span><span class="op" id="4338161">(</span><span class="ident" id="4338162"><a href="/compress/flate/huffman_bit_writer.go.html#4337310">w</a></span><span class="op" id="4338163">.</span><span class="ident" id="4338164">codegen</span><span class="op" id="4338171">[</span><span class="ident" id="4338172"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338173">]</span><span class="op" id="4338174">)</span><span class="op" id="4338175">,</span>&nbsp;<span class="num" id="4338177">7</span><span class="op" id="4338178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338183"><a href="/compress/flate/huffman_bit_writer.go.html#4337771">i</a></span><span class="op" id="4338184">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338190">break</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338201">}</span><br>
<span class="lineno"></span><span class="op" id="4338203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4338206">func</span>&nbsp;<span class="op" id="4338211">(</span><span class="ident" id="4338212">w</span>&nbsp;<span class="op" id="4338214">*</span><span class="ident" id="4338215"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4338231">)</span>&nbsp;<span class="ident" id="4338233">writeStoredHeader</span><span class="op" id="4338250">(</span><span class="ident" id="4338251">length</span>&nbsp;<span class="builtintype" id="4338258">int</span><span class="op" id="4338261">,</span>&nbsp;<span class="ident" id="4338263">isEof</span>&nbsp;<span class="builtintype" id="4338269">bool</span><span class="op" id="4338273">)</span>&nbsp;<span class="op" id="4338275">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338278">if</span>&nbsp;<span class="ident" id="4338281"><a href="/compress/flate/huffman_bit_writer.go.html#4338212">w</a></span><span class="op" id="4338282">.</span><span class="ident" id="4338283">err</span>&nbsp;<span class="op" id="4338287">!=</span>&nbsp;<span class="ident" id="4338290">nil</span>&nbsp;<span class="op" id="4338294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338298">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338309">var</span>&nbsp;<span class="ident" id="4338313">flag</span>&nbsp;<span class="builtintype" id="4338318">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338325">if</span>&nbsp;<span class="ident" id="4338328"><a href="/compress/flate/huffman_bit_writer.go.html#4338263">isEof</a></span>&nbsp;<span class="op" id="4338334">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338338"><a href="/compress/flate/huffman_bit_writer.go.html#4338313">flag</a></span>&nbsp;<span class="op" id="4338343">=</span>&nbsp;<span class="num" id="4338345">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338351"><a href="/compress/flate/huffman_bit_writer.go.html#4338212">w</a></span><span class="op" id="4338352">.</span><span class="ident" id="4338353">writeBits</span><span class="op" id="4338362">(</span><span class="ident" id="4338363"><a href="/compress/flate/huffman_bit_writer.go.html#4338313">flag</a></span><span class="op" id="4338367">,</span>&nbsp;<span class="num" id="4338369">3</span><span class="op" id="4338370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338373"><a href="/compress/flate/huffman_bit_writer.go.html#4338212">w</a></span><span class="op" id="4338374">.</span><span class="ident" id="4338375">flush</span><span class="op" id="4338380">(</span><span class="op" id="4338381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338384"><a href="/compress/flate/huffman_bit_writer.go.html#4338212">w</a></span><span class="op" id="4338385">.</span><span class="ident" id="4338386">writeBits</span><span class="op" id="4338395">(</span><span class="builtintype" id="4338396">int32</span><span class="op" id="4338401">(</span><span class="ident" id="4338402"><a href="/compress/flate/huffman_bit_writer.go.html#4338251">length</a></span><span class="op" id="4338408">)</span><span class="op" id="4338409">,</span>&nbsp;<span class="num" id="4338411">16</span><span class="op" id="4338413">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338416"><a href="/compress/flate/huffman_bit_writer.go.html#4338212">w</a></span><span class="op" id="4338417">.</span><span class="ident" id="4338418">writeBits</span><span class="op" id="4338427">(</span><span class="builtintype" id="4338428">int32</span><span class="op" id="4338433">(</span><span class="op" id="4338434">^</span><span class="builtintype" id="4338435">uint16</span><span class="op" id="4338441">(</span><span class="ident" id="4338442"><a href="/compress/flate/huffman_bit_writer.go.html#4338251">length</a></span><span class="op" id="4338448">)</span><span class="op" id="4338449">)</span><span class="op" id="4338450">,</span>&nbsp;<span class="num" id="4338452">16</span><span class="op" id="4338454">)</span><br>
<span class="lineno"></span><span class="op" id="4338456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4338459">func</span>&nbsp;<span class="op" id="4338464">(</span><span class="ident" id="4338465">w</span>&nbsp;<span class="op" id="4338467">*</span><span class="ident" id="4338468"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4338484">)</span>&nbsp;<span class="ident" id="4338486">writeFixedHeader</span><span class="op" id="4338502">(</span><span class="ident" id="4338503">isEof</span>&nbsp;<span class="builtintype" id="4338509">bool</span><span class="op" id="4338513">)</span>&nbsp;<span class="op" id="4338515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338518">if</span>&nbsp;<span class="ident" id="4338521"><a href="/compress/flate/huffman_bit_writer.go.html#4338465">w</a></span><span class="op" id="4338522">.</span><span class="ident" id="4338523">err</span>&nbsp;<span class="op" id="4338527">!=</span>&nbsp;<span class="ident" id="4338530">nil</span>&nbsp;<span class="op" id="4338534">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338538">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4338549">//&nbsp;Indicate&nbsp;that&nbsp;we&nbsp;are&nbsp;a&nbsp;fixed&nbsp;Huffman&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338596">var</span>&nbsp;<span class="ident" id="4338600">value</span>&nbsp;<span class="builtintype" id="4338606">int32</span>&nbsp;<span class="op" id="4338612">=</span>&nbsp;<span class="num" id="4338614">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338617">if</span>&nbsp;<span class="ident" id="4338620"><a href="/compress/flate/huffman_bit_writer.go.html#4338503">isEof</a></span>&nbsp;<span class="op" id="4338626">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338630"><a href="/compress/flate/huffman_bit_writer.go.html#4338600">value</a></span>&nbsp;<span class="op" id="4338636">=</span>&nbsp;<span class="num" id="4338638">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338644"><a href="/compress/flate/huffman_bit_writer.go.html#4338465">w</a></span><span class="op" id="4338645">.</span><span class="ident" id="4338646">writeBits</span><span class="op" id="4338655">(</span><span class="ident" id="4338656"><a href="/compress/flate/huffman_bit_writer.go.html#4338600">value</a></span><span class="op" id="4338661">,</span>&nbsp;<span class="num" id="4338663">3</span><span class="op" id="4338664">)</span><br>
<span class="lineno"></span><span class="op" id="4338666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="4338669">func</span>&nbsp;<span class="op" id="4338674">(</span><span class="ident" id="4338675">w</span>&nbsp;<span class="op" id="4338677">*</span><span class="ident" id="4338678"><a href="/compress/flate/huffman_bit_writer.go.html#4331675">huffmanBitWriter</a></span><span class="op" id="4338694">)</span>&nbsp;<span class="ident" id="4338696">writeBlock</span><span class="op" id="4338706">(</span><span class="ident" id="4338707">tokens</span>&nbsp;<span class="op" id="4338714">[</span><span class="op" id="4338715">]</span><span class="ident" id="4338716"><a href="/compress/flate/token.go.html#4374045">token</a></span><span class="op" id="4338721">,</span>&nbsp;<span class="ident" id="4338723">eof</span>&nbsp;<span class="builtintype" id="4338727">bool</span><span class="op" id="4338731">,</span>&nbsp;<span class="ident" id="4338733">input</span>&nbsp;<span class="op" id="4338739">[</span><span class="op" id="4338740">]</span><span class="builtintype" id="4338741">byte</span><span class="op" id="4338745">)</span>&nbsp;<span class="op" id="4338747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338750">if</span>&nbsp;<span class="ident" id="4338753"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4338754">.</span><span class="ident" id="4338755">err</span>&nbsp;<span class="op" id="4338759">!=</span>&nbsp;<span class="ident" id="4338762">nil</span>&nbsp;<span class="op" id="4338766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338770">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338781">for</span>&nbsp;<span class="ident" id="4338785">i</span>&nbsp;<span class="op" id="4338787">:=</span>&nbsp;<span class="keyword" id="4338790">range</span>&nbsp;<span class="ident" id="4338796"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4338797">.</span><span class="ident" id="4338798">literalFreq</span>&nbsp;<span class="op" id="4338810">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338814"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4338815">.</span><span class="ident" id="4338816">literalFreq</span><span class="op" id="4338827">[</span><span class="ident" id="4338828"><a href="/compress/flate/huffman_bit_writer.go.html#4338785">i</a></span><span class="op" id="4338829">]</span>&nbsp;<span class="op" id="4338831">=</span>&nbsp;<span class="num" id="4338833">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338839">for</span>&nbsp;<span class="ident" id="4338843">i</span>&nbsp;<span class="op" id="4338845">:=</span>&nbsp;<span class="keyword" id="4338848">range</span>&nbsp;<span class="ident" id="4338854"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4338855">.</span><span class="ident" id="4338856">offsetFreq</span>&nbsp;<span class="op" id="4338867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338871"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4338872">.</span><span class="ident" id="4338873">offsetFreq</span><span class="op" id="4338883">[</span><span class="ident" id="4338884"><a href="/compress/flate/huffman_bit_writer.go.html#4338843">i</a></span><span class="op" id="4338885">]</span>&nbsp;<span class="op" id="4338887">=</span>&nbsp;<span class="num" id="4338889">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338892">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338896">n</span>&nbsp;<span class="op" id="4338898">:=</span>&nbsp;<span class="builtinfunc" id="4338901">len</span><span class="op" id="4338904">(</span><span class="ident" id="4338905"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span><span class="op" id="4338911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338914"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span>&nbsp;<span class="op" id="4338921">=</span>&nbsp;<span class="ident" id="4338923"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span><span class="op" id="4338929">[</span><span class="num" id="4338930">0</span>&nbsp;<span class="op" id="4338932">:</span>&nbsp;<span class="ident" id="4338934"><a href="/compress/flate/huffman_bit_writer.go.html#4338896">n</a></span><span class="op" id="4338935">+</span><span class="num" id="4338936">1</span><span class="op" id="4338937">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338940"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span><span class="op" id="4338946">[</span><span class="ident" id="4338947"><a href="/compress/flate/huffman_bit_writer.go.html#4338896">n</a></span><span class="op" id="4338948">]</span>&nbsp;<span class="op" id="4338950">=</span>&nbsp;<span class="ident" id="4338952"><a href="/compress/flate/huffman_bit_writer.go.html#4330138">endBlockMarker</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338969">for</span>&nbsp;<span class="ident" id="4338973">_</span><span class="op" id="4338974">,</span>&nbsp;<span class="ident" id="4338976">t</span>&nbsp;<span class="op" id="4338978">:=</span>&nbsp;<span class="keyword" id="4338981">range</span>&nbsp;<span class="ident" id="4338987"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span>&nbsp;<span class="op" id="4338994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338998">switch</span>&nbsp;<span class="ident" id="4339005"><a href="/compress/flate/huffman_bit_writer.go.html#4338976">t</a></span><span class="op" id="4339006">.</span><span class="ident" id="4339007">typ</span><span class="op" id="4339010">(</span><span class="op" id="4339011">)</span>&nbsp;<span class="op" id="4339013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339017">case</span>&nbsp;<span class="ident" id="4339022"><a href="/compress/flate/token.go.html#4371757">literalType</a></span><span class="op" id="4339033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339038"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339039">.</span><span class="ident" id="4339040">literalFreq</span><span class="op" id="4339051">[</span><span class="ident" id="4339052"><a href="/compress/flate/huffman_bit_writer.go.html#4338976">t</a></span><span class="op" id="4339053">.</span><span class="ident" id="4339054">literal</span><span class="op" id="4339061">(</span><span class="op" id="4339062">)</span><span class="op" id="4339063">]</span><span class="op" id="4339064">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339069">case</span>&nbsp;<span class="ident" id="4339074"><a href="/compress/flate/token.go.html#4371780">matchType</a></span><span class="op" id="4339083">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339088">length</span>&nbsp;<span class="op" id="4339095">:=</span>&nbsp;<span class="ident" id="4339098"><a href="/compress/flate/huffman_bit_writer.go.html#4338976">t</a></span><span class="op" id="4339099">.</span><span class="ident" id="4339100">length</span><span class="op" id="4339106">(</span><span class="op" id="4339107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339112">offset</span>&nbsp;<span class="op" id="4339119">:=</span>&nbsp;<span class="ident" id="4339122"><a href="/compress/flate/huffman_bit_writer.go.html#4338976">t</a></span><span class="op" id="4339123">.</span><span class="ident" id="4339124">offset</span><span class="op" id="4339130">(</span><span class="op" id="4339131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339136"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339137">.</span><span class="ident" id="4339138">literalFreq</span><span class="op" id="4339149">[</span><span class="ident" id="4339150"><a href="/compress/flate/huffman_bit_writer.go.html#4330188">lengthCodesStart</a></span><span class="op" id="4339166">+</span><span class="ident" id="4339167"><a href="/compress/flate/token.go.html#4374759">lengthCode</a></span><span class="op" id="4339177">(</span><span class="ident" id="4339178"><a href="/compress/flate/huffman_bit_writer.go.html#4339088">length</a></span><span class="op" id="4339184">)</span><span class="op" id="4339185">]</span><span class="op" id="4339186">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339192"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339193">.</span><span class="ident" id="4339194">offsetFreq</span><span class="op" id="4339204">[</span><span class="ident" id="4339205"><a href="/compress/flate/token.go.html#4374885">offsetCode</a></span><span class="op" id="4339215">(</span><span class="ident" id="4339216"><a href="/compress/flate/huffman_bit_writer.go.html#4339112">offset</a></span><span class="op" id="4339222">)</span><span class="op" id="4339223">]</span><span class="op" id="4339224">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339229">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4339236">//&nbsp;get&nbsp;the&nbsp;number&nbsp;of&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339267">numLiterals</span>&nbsp;<span class="op" id="4339279">:=</span>&nbsp;<span class="builtinfunc" id="4339282">len</span><span class="op" id="4339285">(</span><span class="ident" id="4339286"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339287">.</span><span class="ident" id="4339288">literalFreq</span><span class="op" id="4339299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339302">for</span>&nbsp;<span class="ident" id="4339306"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339307">.</span><span class="ident" id="4339308">literalFreq</span><span class="op" id="4339319">[</span><span class="ident" id="4339320"><a href="/compress/flate/huffman_bit_writer.go.html#4339267">numLiterals</a></span><span class="op" id="4339331">-</span><span class="num" id="4339332">1</span><span class="op" id="4339333">]</span>&nbsp;<span class="op" id="4339335">==</span>&nbsp;<span class="num" id="4339338">0</span>&nbsp;<span class="op" id="4339340">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339344"><a href="/compress/flate/huffman_bit_writer.go.html#4339267">numLiterals</a></span><span class="op" id="4339355">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4339362">//&nbsp;get&nbsp;the&nbsp;number&nbsp;of&nbsp;offsets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339392">numOffsets</span>&nbsp;<span class="op" id="4339403">:=</span>&nbsp;<span class="builtinfunc" id="4339406">len</span><span class="op" id="4339409">(</span><span class="ident" id="4339410"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339411">.</span><span class="ident" id="4339412">offsetFreq</span><span class="op" id="4339422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339425">for</span>&nbsp;<span class="ident" id="4339429"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span>&nbsp;<span class="op" id="4339440">&gt;</span>&nbsp;<span class="num" id="4339442">0</span>&nbsp;<span class="op" id="4339444">&amp;&amp;</span>&nbsp;<span class="ident" id="4339447"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339448">.</span><span class="ident" id="4339449">offsetFreq</span><span class="op" id="4339459">[</span><span class="ident" id="4339460"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span><span class="op" id="4339470">-</span><span class="num" id="4339471">1</span><span class="op" id="4339472">]</span>&nbsp;<span class="op" id="4339474">==</span>&nbsp;<span class="num" id="4339477">0</span>&nbsp;<span class="op" id="4339479">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339483"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span><span class="op" id="4339493">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339500">if</span>&nbsp;<span class="ident" id="4339503"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span>&nbsp;<span class="op" id="4339514">==</span>&nbsp;<span class="num" id="4339517">0</span>&nbsp;<span class="op" id="4339519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4339523">//&nbsp;We&nbsp;haven&#39;t&nbsp;found&nbsp;a&nbsp;single&nbsp;match.&nbsp;If&nbsp;we&nbsp;want&nbsp;to&nbsp;go&nbsp;with&nbsp;the&nbsp;dynamic&nbsp;encoding,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4339605">//&nbsp;we&nbsp;should&nbsp;count&nbsp;at&nbsp;least&nbsp;one&nbsp;offset&nbsp;to&nbsp;be&nbsp;sure&nbsp;that&nbsp;the&nbsp;offset&nbsp;huffman&nbsp;tree&nbsp;could&nbsp;be&nbsp;encoded.</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339704"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339705">.</span><span class="ident" id="4339706">offsetFreq</span><span class="op" id="4339716">[</span><span class="num" id="4339717">0</span><span class="op" id="4339718">]</span>&nbsp;<span class="op" id="4339720">=</span>&nbsp;<span class="num" id="4339722">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339726"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span>&nbsp;<span class="op" id="4339737">=</span>&nbsp;<span class="num" id="4339739">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339746"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339747">.</span><span class="ident" id="4339748">literalEncoding</span><span class="op" id="4339763">.</span><span class="ident" id="4339764">generate</span><span class="op" id="4339772">(</span><span class="ident" id="4339773"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339774">.</span><span class="ident" id="4339775">literalFreq</span><span class="op" id="4339786">,</span>&nbsp;<span class="num" id="4339788">15</span><span class="op" id="4339790">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339793"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339794">.</span><span class="ident" id="4339795">offsetEncoding</span><span class="op" id="4339809">.</span><span class="ident" id="4339810">generate</span><span class="op" id="4339818">(</span><span class="ident" id="4339819"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4339820">.</span><span class="ident" id="4339821">offsetFreq</span><span class="op" id="4339831">,</span>&nbsp;<span class="num" id="4339833">15</span><span class="op" id="4339835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339839">storedBytes</span>&nbsp;<span class="op" id="4339851">:=</span>&nbsp;<span class="num" id="4339854">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339857">if</span>&nbsp;<span class="ident" id="4339860"><a href="/compress/flate/huffman_bit_writer.go.html#4338733">input</a></span>&nbsp;<span class="op" id="4339866">!=</span>&nbsp;<span class="ident" id="4339869">nil</span>&nbsp;<span class="op" id="4339873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339877"><a href="/compress/flate/huffman_bit_writer.go.html#4339839">storedBytes</a></span>&nbsp;<span class="op" id="4339889">=</span>&nbsp;<span class="builtinfunc" id="4339891">len</span><span class="op" id="4339894">(</span><span class="ident" id="4339895"><a href="/compress/flate/huffman_bit_writer.go.html#4338733">input</a></span><span class="op" id="4339900">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339906">var</span>&nbsp;<span class="ident" id="4339910">extraBits</span>&nbsp;<span class="ident" id="4339920">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339927">var</span>&nbsp;<span class="ident" id="4339931">storedSize</span>&nbsp;<span class="ident" id="4339942">int64</span>&nbsp;<span class="op" id="4339948">=</span>&nbsp;<span class="ident" id="4339950"><a href="/compress/flate/huffman_bit_writer.go.html#4330013">math</a></span><span class="op" id="4339954">.</span><span class="ident" id="4339955">MaxInt64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339965">if</span>&nbsp;<span class="ident" id="4339968"><a href="/compress/flate/huffman_bit_writer.go.html#4339839">storedBytes</a></span>&nbsp;<span class="op" id="4339980">&lt;=</span>&nbsp;<span class="ident" id="4339983"><a href="/compress/flate/deflate.go.html#4310816">maxStoreBlockSize</a></span>&nbsp;<span class="op" id="4340001">&amp;&amp;</span>&nbsp;<span class="ident" id="4340004"><a href="/compress/flate/huffman_bit_writer.go.html#4338733">input</a></span>&nbsp;<span class="op" id="4340010">!=</span>&nbsp;<span class="ident" id="4340013">nil</span>&nbsp;<span class="op" id="4340017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340021"><a href="/compress/flate/huffman_bit_writer.go.html#4339931">storedSize</a></span>&nbsp;<span class="op" id="4340032">=</span>&nbsp;<span class="ident" id="4340034">int64</span><span class="op" id="4340039">(</span><span class="op" id="4340040">(</span><span class="ident" id="4340041"><a href="/compress/flate/huffman_bit_writer.go.html#4339839">storedBytes</a></span>&nbsp;<span class="op" id="4340053">+</span>&nbsp;<span class="num" id="4340055">5</span><span class="op" id="4340056">)</span>&nbsp;<span class="op" id="4340058">*</span>&nbsp;<span class="num" id="4340060">8</span><span class="op" id="4340061">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340065">//&nbsp;We&nbsp;only&nbsp;bother&nbsp;calculating&nbsp;the&nbsp;costs&nbsp;of&nbsp;the&nbsp;extra&nbsp;bits&nbsp;required&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340137">//&nbsp;the&nbsp;length&nbsp;of&nbsp;offset&nbsp;fields&nbsp;(which&nbsp;will&nbsp;be&nbsp;the&nbsp;same&nbsp;for&nbsp;both&nbsp;fixed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340209">//&nbsp;and&nbsp;dynamic&nbsp;encoding),&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;compare&nbsp;those&nbsp;two&nbsp;encodings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340279">//&nbsp;against&nbsp;stored&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340309">for</span>&nbsp;<span class="ident" id="4340313">lengthCode</span>&nbsp;<span class="op" id="4340324">:=</span>&nbsp;<span class="ident" id="4340327"><a href="/compress/flate/huffman_bit_writer.go.html#4330188">lengthCodesStart</a></span>&nbsp;<span class="op" id="4340344">+</span>&nbsp;<span class="num" id="4340346">8</span><span class="op" id="4340347">;</span>&nbsp;<span class="ident" id="4340349"><a href="/compress/flate/huffman_bit_writer.go.html#4340313">lengthCode</a></span>&nbsp;<span class="op" id="4340360">&lt;</span>&nbsp;<span class="ident" id="4340362"><a href="/compress/flate/huffman_bit_writer.go.html#4339267">numLiterals</a></span><span class="op" id="4340373">;</span>&nbsp;<span class="ident" id="4340375"><a href="/compress/flate/huffman_bit_writer.go.html#4340313">lengthCode</a></span><span class="op" id="4340385">++</span>&nbsp;<span class="op" id="4340388">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340393">//&nbsp;First&nbsp;eight&nbsp;length&nbsp;codes&nbsp;have&nbsp;extra&nbsp;size&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340445"><a href="/compress/flate/huffman_bit_writer.go.html#4339910">extraBits</a></span>&nbsp;<span class="op" id="4340455">+=</span>&nbsp;<span class="ident" id="4340458">int64</span><span class="op" id="4340463">(</span><span class="ident" id="4340464"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4340465">.</span><span class="ident" id="4340466">literalFreq</span><span class="op" id="4340477">[</span><span class="ident" id="4340478"><a href="/compress/flate/huffman_bit_writer.go.html#4340313">lengthCode</a></span><span class="op" id="4340488">]</span><span class="op" id="4340489">)</span>&nbsp;<span class="op" id="4340491">*</span>&nbsp;<span class="ident" id="4340493">int64</span><span class="op" id="4340498">(</span><span class="ident" id="4340499"><a href="/compress/flate/huffman_bit_writer.go.html#4330373">lengthExtraBits</a></span><span class="op" id="4340514">[</span><span class="ident" id="4340515"><a href="/compress/flate/huffman_bit_writer.go.html#4340313">lengthCode</a></span><span class="op" id="4340525">-</span><span class="ident" id="4340526"><a href="/compress/flate/huffman_bit_writer.go.html#4330188">lengthCodesStart</a></span><span class="op" id="4340542">]</span><span class="op" id="4340543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340551">for</span>&nbsp;<span class="ident" id="4340555">offsetCode</span>&nbsp;<span class="op" id="4340566">:=</span>&nbsp;<span class="num" id="4340569">4</span><span class="op" id="4340570">;</span>&nbsp;<span class="ident" id="4340572"><a href="/compress/flate/huffman_bit_writer.go.html#4340555">offsetCode</a></span>&nbsp;<span class="op" id="4340583">&lt;</span>&nbsp;<span class="ident" id="4340585"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span><span class="op" id="4340595">;</span>&nbsp;<span class="ident" id="4340597"><a href="/compress/flate/huffman_bit_writer.go.html#4340555">offsetCode</a></span><span class="op" id="4340607">++</span>&nbsp;<span class="op" id="4340610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340615">//&nbsp;First&nbsp;four&nbsp;offset&nbsp;codes&nbsp;have&nbsp;extra&nbsp;size&nbsp;=&nbsp;0.</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340666"><a href="/compress/flate/huffman_bit_writer.go.html#4339910">extraBits</a></span>&nbsp;<span class="op" id="4340676">+=</span>&nbsp;<span class="ident" id="4340679">int64</span><span class="op" id="4340684">(</span><span class="ident" id="4340685"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4340686">.</span><span class="ident" id="4340687">offsetFreq</span><span class="op" id="4340697">[</span><span class="ident" id="4340698"><a href="/compress/flate/huffman_bit_writer.go.html#4340555">offsetCode</a></span><span class="op" id="4340708">]</span><span class="op" id="4340709">)</span>&nbsp;<span class="op" id="4340711">*</span>&nbsp;<span class="ident" id="4340713">int64</span><span class="op" id="4340718">(</span><span class="ident" id="4340719"><a href="/compress/flate/huffman_bit_writer.go.html#4330778">offsetExtraBits</a></span><span class="op" id="4340734">[</span><span class="ident" id="4340735"><a href="/compress/flate/huffman_bit_writer.go.html#4340555">offsetCode</a></span><span class="op" id="4340745">]</span><span class="op" id="4340746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340757">//&nbsp;Figure&nbsp;out&nbsp;smallest&nbsp;code.</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340787">//&nbsp;Fixed&nbsp;Huffman&nbsp;baseline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340815">var</span>&nbsp;<span class="ident" id="4340819">size</span>&nbsp;<span class="op" id="4340824">=</span>&nbsp;<span class="ident" id="4340826">int64</span><span class="op" id="4340831">(</span><span class="num" id="4340832">3</span><span class="op" id="4340833">)</span>&nbsp;<span class="op" id="4340835">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340839"><a href="/compress/flate/huffman_code.go.html#4345122">fixedLiteralEncoding</a></span><span class="op" id="4340859">.</span><span class="ident" id="4340860">bitLength</span><span class="op" id="4340869">(</span><span class="ident" id="4340870"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4340871">.</span><span class="ident" id="4340872">literalFreq</span><span class="op" id="4340883">)</span>&nbsp;<span class="op" id="4340885">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340889"><a href="/compress/flate/huffman_code.go.html#4345196">fixedOffsetEncoding</a></span><span class="op" id="4340908">.</span><span class="ident" id="4340909">bitLength</span><span class="op" id="4340918">(</span><span class="ident" id="4340919"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4340920">.</span><span class="ident" id="4340921">offsetFreq</span><span class="op" id="4340931">)</span>&nbsp;<span class="op" id="4340933">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340937"><a href="/compress/flate/huffman_bit_writer.go.html#4339910">extraBits</a></span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340948">var</span>&nbsp;<span class="ident" id="4340952">literalEncoding</span>&nbsp;<span class="op" id="4340968">=</span>&nbsp;<span class="ident" id="4340970"><a href="/compress/flate/huffman_code.go.html#4345122">fixedLiteralEncoding</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340992">var</span>&nbsp;<span class="ident" id="4340996">offsetEncoding</span>&nbsp;<span class="op" id="4341011">=</span>&nbsp;<span class="ident" id="4341013"><a href="/compress/flate/huffman_code.go.html#4345196">fixedOffsetEncoding</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4341035">//&nbsp;Dynamic&nbsp;Huffman?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341056">var</span>&nbsp;<span class="ident" id="4341060">numCodegens</span>&nbsp;<span class="builtintype" id="4341072">int</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4341078">//&nbsp;Generate&nbsp;codegen&nbsp;and&nbsp;codegenFrequencies,&nbsp;which&nbsp;indicates&nbsp;how&nbsp;to&nbsp;encode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4341153">//&nbsp;the&nbsp;literalEncoding&nbsp;and&nbsp;the&nbsp;offsetEncoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341201"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341202">.</span><span class="ident" id="4341203">generateCodegen</span><span class="op" id="4341218">(</span><span class="ident" id="4341219"><a href="/compress/flate/huffman_bit_writer.go.html#4339267">numLiterals</a></span><span class="op" id="4341230">,</span>&nbsp;<span class="ident" id="4341232"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span><span class="op" id="4341242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341245"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341246">.</span><span class="ident" id="4341247">codegenEncoding</span><span class="op" id="4341262">.</span><span class="ident" id="4341263">generate</span><span class="op" id="4341271">(</span><span class="ident" id="4341272"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341273">.</span><span class="ident" id="4341274">codegenFreq</span><span class="op" id="4341285">,</span>&nbsp;<span class="num" id="4341287">7</span><span class="op" id="4341288">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341291"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span>&nbsp;<span class="op" id="4341303">=</span>&nbsp;<span class="builtinfunc" id="4341305">len</span><span class="op" id="4341308">(</span><span class="ident" id="4341309"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341310">.</span><span class="ident" id="4341311">codegenFreq</span><span class="op" id="4341322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341325">for</span>&nbsp;<span class="ident" id="4341329"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span>&nbsp;<span class="op" id="4341341">&gt;</span>&nbsp;<span class="num" id="4341343">4</span>&nbsp;<span class="op" id="4341345">&amp;&amp;</span>&nbsp;<span class="ident" id="4341348"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341349">.</span><span class="ident" id="4341350">codegenFreq</span><span class="op" id="4341361">[</span><span class="ident" id="4341362"><a href="/compress/flate/huffman_bit_writer.go.html#4331579">codegenOrder</a></span><span class="op" id="4341374">[</span><span class="ident" id="4341375"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span><span class="op" id="4341386">-</span><span class="num" id="4341387">1</span><span class="op" id="4341388">]</span><span class="op" id="4341389">]</span>&nbsp;<span class="op" id="4341391">==</span>&nbsp;<span class="num" id="4341394">0</span>&nbsp;<span class="op" id="4341396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341400"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span><span class="op" id="4341411">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341418">dynamicHeader</span>&nbsp;<span class="op" id="4341432">:=</span>&nbsp;<span class="ident" id="4341435">int64</span><span class="op" id="4341440">(</span><span class="num" id="4341441">3</span><span class="op" id="4341442">+</span><span class="num" id="4341443">5</span><span class="op" id="4341444">+</span><span class="num" id="4341445">5</span><span class="op" id="4341446">+</span><span class="num" id="4341447">4</span><span class="op" id="4341448">+</span><span class="op" id="4341449">(</span><span class="num" id="4341450">3</span><span class="op" id="4341451">*</span><span class="ident" id="4341452"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span><span class="op" id="4341463">)</span><span class="op" id="4341464">)</span>&nbsp;<span class="op" id="4341466">+</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341470"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341471">.</span><span class="ident" id="4341472">codegenEncoding</span><span class="op" id="4341487">.</span><span class="ident" id="4341488">bitLength</span><span class="op" id="4341497">(</span><span class="ident" id="4341498"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341499">.</span><span class="ident" id="4341500">codegenFreq</span><span class="op" id="4341511">)</span>&nbsp;<span class="op" id="4341513">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341517">int64</span><span class="op" id="4341522">(</span><span class="ident" id="4341523"><a href="/compress/flate/huffman_bit_writer.go.html#4339910">extraBits</a></span><span class="op" id="4341532">)</span>&nbsp;<span class="op" id="4341534">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341538">int64</span><span class="op" id="4341543">(</span><span class="ident" id="4341544"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341545">.</span><span class="ident" id="4341546">codegenFreq</span><span class="op" id="4341557">[</span><span class="num" id="4341558">16</span><span class="op" id="4341560">]</span><span class="op" id="4341561">*</span><span class="num" id="4341562">2</span><span class="op" id="4341563">)</span>&nbsp;<span class="op" id="4341565">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341569">int64</span><span class="op" id="4341574">(</span><span class="ident" id="4341575"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341576">.</span><span class="ident" id="4341577">codegenFreq</span><span class="op" id="4341588">[</span><span class="num" id="4341589">17</span><span class="op" id="4341591">]</span><span class="op" id="4341592">*</span><span class="num" id="4341593">3</span><span class="op" id="4341594">)</span>&nbsp;<span class="op" id="4341596">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341600">int64</span><span class="op" id="4341605">(</span><span class="ident" id="4341606"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341607">.</span><span class="ident" id="4341608">codegenFreq</span><span class="op" id="4341619">[</span><span class="num" id="4341620">18</span><span class="op" id="4341622">]</span><span class="op" id="4341623">*</span><span class="num" id="4341624">7</span><span class="op" id="4341625">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341628">dynamicSize</span>&nbsp;<span class="op" id="4341640">:=</span>&nbsp;<span class="ident" id="4341643"><a href="/compress/flate/huffman_bit_writer.go.html#4341418">dynamicHeader</a></span>&nbsp;<span class="op" id="4341657">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341661"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341662">.</span><span class="ident" id="4341663">literalEncoding</span><span class="op" id="4341678">.</span><span class="ident" id="4341679">bitLength</span><span class="op" id="4341688">(</span><span class="ident" id="4341689"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341690">.</span><span class="ident" id="4341691">literalFreq</span><span class="op" id="4341702">)</span>&nbsp;<span class="op" id="4341704">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341708"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341709">.</span><span class="ident" id="4341710">offsetEncoding</span><span class="op" id="4341724">.</span><span class="ident" id="4341725">bitLength</span><span class="op" id="4341734">(</span><span class="ident" id="4341735"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341736">.</span><span class="ident" id="4341737">offsetFreq</span><span class="op" id="4341747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341751">if</span>&nbsp;<span class="ident" id="4341754"><a href="/compress/flate/huffman_bit_writer.go.html#4341628">dynamicSize</a></span>&nbsp;<span class="op" id="4341766">&lt;</span>&nbsp;<span class="ident" id="4341768"><a href="/compress/flate/huffman_bit_writer.go.html#4340819">size</a></span>&nbsp;<span class="op" id="4341773">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341777"><a href="/compress/flate/huffman_bit_writer.go.html#4340819">size</a></span>&nbsp;<span class="op" id="4341782">=</span>&nbsp;<span class="ident" id="4341784"><a href="/compress/flate/huffman_bit_writer.go.html#4341628">dynamicSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341798"><a href="/compress/flate/huffman_bit_writer.go.html#4340952">literalEncoding</a></span>&nbsp;<span class="op" id="4341814">=</span>&nbsp;<span class="ident" id="4341816"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341817">.</span><span class="ident" id="4341818">literalEncoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341836"><a href="/compress/flate/huffman_bit_writer.go.html#4340996">offsetEncoding</a></span>&nbsp;<span class="op" id="4341851">=</span>&nbsp;<span class="ident" id="4341853"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341854">.</span><span class="ident" id="4341855">offsetEncoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4341875">//&nbsp;Stored&nbsp;bytes?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341893">if</span>&nbsp;<span class="ident" id="4341896"><a href="/compress/flate/huffman_bit_writer.go.html#4339931">storedSize</a></span>&nbsp;<span class="op" id="4341907">&lt;</span>&nbsp;<span class="ident" id="4341909"><a href="/compress/flate/huffman_bit_writer.go.html#4340819">size</a></span>&nbsp;<span class="op" id="4341914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341918"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341919">.</span><span class="ident" id="4341920">writeStoredHeader</span><span class="op" id="4341937">(</span><span class="ident" id="4341938"><a href="/compress/flate/huffman_bit_writer.go.html#4339839">storedBytes</a></span><span class="op" id="4341949">,</span>&nbsp;<span class="ident" id="4341951"><a href="/compress/flate/huffman_bit_writer.go.html#4338723">eof</a></span><span class="op" id="4341954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341958"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4341959">.</span><span class="ident" id="4341960">writeBytes</span><span class="op" id="4341970">(</span><span class="ident" id="4341971"><a href="/compress/flate/huffman_bit_writer.go.html#4338733">input</a></span><span class="op" id="4341976">[</span><span class="num" id="4341977">0</span><span class="op" id="4341978">:</span><span class="ident" id="4341979"><a href="/compress/flate/huffman_bit_writer.go.html#4339839">storedBytes</a></span><span class="op" id="4341990">]</span><span class="op" id="4341991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341995">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4342007">//&nbsp;Huffman.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342020">if</span>&nbsp;<span class="ident" id="4342023"><a href="/compress/flate/huffman_bit_writer.go.html#4340952">literalEncoding</a></span>&nbsp;<span class="op" id="4342039">==</span>&nbsp;<span class="ident" id="4342042"><a href="/compress/flate/huffman_code.go.html#4345122">fixedLiteralEncoding</a></span>&nbsp;<span class="op" id="4342063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342067"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342068">.</span><span class="ident" id="4342069">writeFixedHeader</span><span class="op" id="4342085">(</span><span class="ident" id="4342086"><a href="/compress/flate/huffman_bit_writer.go.html#4338723">eof</a></span><span class="op" id="4342089">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342092">}</span>&nbsp;<span class="keyword" id="4342094">else</span>&nbsp;<span class="op" id="4342099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342103"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342104">.</span><span class="ident" id="4342105">writeDynamicHeader</span><span class="op" id="4342123">(</span><span class="ident" id="4342124"><a href="/compress/flate/huffman_bit_writer.go.html#4339267">numLiterals</a></span><span class="op" id="4342135">,</span>&nbsp;<span class="ident" id="4342137"><a href="/compress/flate/huffman_bit_writer.go.html#4339392">numOffsets</a></span><span class="op" id="4342147">,</span>&nbsp;<span class="ident" id="4342149"><a href="/compress/flate/huffman_bit_writer.go.html#4341060">numCodegens</a></span><span class="op" id="4342160">,</span>&nbsp;<span class="ident" id="4342162"><a href="/compress/flate/huffman_bit_writer.go.html#4338723">eof</a></span><span class="op" id="4342165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342171">for</span>&nbsp;<span class="ident" id="4342175">_</span><span class="op" id="4342176">,</span>&nbsp;<span class="ident" id="4342178">t</span>&nbsp;<span class="op" id="4342180">:=</span>&nbsp;<span class="keyword" id="4342183">range</span>&nbsp;<span class="ident" id="4342189"><a href="/compress/flate/huffman_bit_writer.go.html#4338707">tokens</a></span>&nbsp;<span class="op" id="4342196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342200">switch</span>&nbsp;<span class="ident" id="4342207"><a href="/compress/flate/huffman_bit_writer.go.html#4342178">t</a></span><span class="op" id="4342208">.</span><span class="ident" id="4342209">typ</span><span class="op" id="4342212">(</span><span class="op" id="4342213">)</span>&nbsp;<span class="op" id="4342215">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342219">case</span>&nbsp;<span class="ident" id="4342224"><a href="/compress/flate/token.go.html#4371757">literalType</a></span><span class="op" id="4342235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342240"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342241">.</span><span class="ident" id="4342242">writeCode</span><span class="op" id="4342251">(</span><span class="ident" id="4342252"><a href="/compress/flate/huffman_bit_writer.go.html#4340952">literalEncoding</a></span><span class="op" id="4342267">,</span>&nbsp;<span class="ident" id="4342269"><a href="/compress/flate/huffman_bit_writer.go.html#4342178">t</a></span><span class="op" id="4342270">.</span><span class="ident" id="4342271">literal</span><span class="op" id="4342278">(</span><span class="op" id="4342279">)</span><span class="op" id="4342280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342285">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342293">case</span>&nbsp;<span class="ident" id="4342298"><a href="/compress/flate/token.go.html#4371780">matchType</a></span><span class="op" id="4342307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4342312">//&nbsp;Write&nbsp;the&nbsp;length</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342335">length</span>&nbsp;<span class="op" id="4342342">:=</span>&nbsp;<span class="ident" id="4342345"><a href="/compress/flate/huffman_bit_writer.go.html#4342178">t</a></span><span class="op" id="4342346">.</span><span class="ident" id="4342347">length</span><span class="op" id="4342353">(</span><span class="op" id="4342354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342359">lengthCode</span>&nbsp;<span class="op" id="4342370">:=</span>&nbsp;<span class="ident" id="4342373"><a href="/compress/flate/token.go.html#4374759">lengthCode</a></span><span class="op" id="4342383">(</span><span class="ident" id="4342384"><a href="/compress/flate/huffman_bit_writer.go.html#4342335">length</a></span><span class="op" id="4342390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342395"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342396">.</span><span class="ident" id="4342397">writeCode</span><span class="op" id="4342406">(</span><span class="ident" id="4342407"><a href="/compress/flate/huffman_bit_writer.go.html#4340952">literalEncoding</a></span><span class="op" id="4342422">,</span>&nbsp;<span class="ident" id="4342424"><a href="/compress/flate/huffman_bit_writer.go.html#4342359">lengthCode</a></span><span class="op" id="4342434">+</span><span class="ident" id="4342435"><a href="/compress/flate/huffman_bit_writer.go.html#4330188">lengthCodesStart</a></span><span class="op" id="4342451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342456">extraLengthBits</span>&nbsp;<span class="op" id="4342472">:=</span>&nbsp;<span class="builtintype" id="4342475">int32</span><span class="op" id="4342480">(</span><span class="ident" id="4342481"><a href="/compress/flate/huffman_bit_writer.go.html#4330373">lengthExtraBits</a></span><span class="op" id="4342496">[</span><span class="ident" id="4342497"><a href="/compress/flate/huffman_bit_writer.go.html#4342359">lengthCode</a></span><span class="op" id="4342507">]</span><span class="op" id="4342508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342513">if</span>&nbsp;<span class="ident" id="4342516"><a href="/compress/flate/huffman_bit_writer.go.html#4342456">extraLengthBits</a></span>&nbsp;<span class="op" id="4342532">&gt;</span>&nbsp;<span class="num" id="4342534">0</span>&nbsp;<span class="op" id="4342536">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342542">extraLength</span>&nbsp;<span class="op" id="4342554">:=</span>&nbsp;<span class="builtintype" id="4342557">int32</span><span class="op" id="4342562">(</span><span class="ident" id="4342563"><a href="/compress/flate/huffman_bit_writer.go.html#4342335">length</a></span>&nbsp;<span class="op" id="4342570">-</span>&nbsp;<span class="ident" id="4342572"><a href="/compress/flate/huffman_bit_writer.go.html#4330600">lengthBase</a></span><span class="op" id="4342582">[</span><span class="ident" id="4342583"><a href="/compress/flate/huffman_bit_writer.go.html#4342359">lengthCode</a></span><span class="op" id="4342593">]</span><span class="op" id="4342594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342600"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342601">.</span><span class="ident" id="4342602">writeBits</span><span class="op" id="4342611">(</span><span class="ident" id="4342612"><a href="/compress/flate/huffman_bit_writer.go.html#4342542">extraLength</a></span><span class="op" id="4342623">,</span>&nbsp;<span class="ident" id="4342625"><a href="/compress/flate/huffman_bit_writer.go.html#4342456">extraLengthBits</a></span><span class="op" id="4342640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4342650">//&nbsp;Write&nbsp;the&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342673">offset</span>&nbsp;<span class="op" id="4342680">:=</span>&nbsp;<span class="ident" id="4342683"><a href="/compress/flate/huffman_bit_writer.go.html#4342178">t</a></span><span class="op" id="4342684">.</span><span class="ident" id="4342685">offset</span><span class="op" id="4342691">(</span><span class="op" id="4342692">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342697">offsetCode</span>&nbsp;<span class="op" id="4342708">:=</span>&nbsp;<span class="ident" id="4342711"><a href="/compress/flate/token.go.html#4374885">offsetCode</a></span><span class="op" id="4342721">(</span><span class="ident" id="4342722"><a href="/compress/flate/huffman_bit_writer.go.html#4342673">offset</a></span><span class="op" id="4342728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342733"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342734">.</span><span class="ident" id="4342735">writeCode</span><span class="op" id="4342744">(</span><span class="ident" id="4342745"><a href="/compress/flate/huffman_bit_writer.go.html#4340996">offsetEncoding</a></span><span class="op" id="4342759">,</span>&nbsp;<span class="ident" id="4342761"><a href="/compress/flate/huffman_bit_writer.go.html#4342697">offsetCode</a></span><span class="op" id="4342771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342776">extraOffsetBits</span>&nbsp;<span class="op" id="4342792">:=</span>&nbsp;<span class="builtintype" id="4342795">int32</span><span class="op" id="4342800">(</span><span class="ident" id="4342801"><a href="/compress/flate/huffman_bit_writer.go.html#4330778">offsetExtraBits</a></span><span class="op" id="4342816">[</span><span class="ident" id="4342817"><a href="/compress/flate/huffman_bit_writer.go.html#4342697">offsetCode</a></span><span class="op" id="4342827">]</span><span class="op" id="4342828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342833">if</span>&nbsp;<span class="ident" id="4342836"><a href="/compress/flate/huffman_bit_writer.go.html#4342776">extraOffsetBits</a></span>&nbsp;<span class="op" id="4342852">&gt;</span>&nbsp;<span class="num" id="4342854">0</span>&nbsp;<span class="op" id="4342856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342862">extraOffset</span>&nbsp;<span class="op" id="4342874">:=</span>&nbsp;<span class="builtintype" id="4342877">int32</span><span class="op" id="4342882">(</span><span class="ident" id="4342883"><a href="/compress/flate/huffman_bit_writer.go.html#4342673">offset</a></span>&nbsp;<span class="op" id="4342890">-</span>&nbsp;<span class="ident" id="4342892"><a href="/compress/flate/huffman_bit_writer.go.html#4330992">offsetBase</a></span><span class="op" id="4342902">[</span><span class="ident" id="4342903"><a href="/compress/flate/huffman_bit_writer.go.html#4342697">offsetCode</a></span><span class="op" id="4342913">]</span><span class="op" id="4342914">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342920"><a href="/compress/flate/huffman_bit_writer.go.html#4338675">w</a></span><span class="op" id="4342921">.</span><span class="ident" id="4342922">writeBits</span><span class="op" id="4342931">(</span><span class="ident" id="4342932"><a href="/compress/flate/huffman_bit_writer.go.html#4342862">extraOffset</a></span><span class="op" id="4342943">,</span>&nbsp;<span class="ident" id="4342945"><a href="/compress/flate/huffman_bit_writer.go.html#4342776">extraOffsetBits</a></span><span class="op" id="4342960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342970">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342978">default</span><span class="op" id="4342985">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4342990">panic</span><span class="op" id="4342995">(</span><span class="string" id="4342996">&#34;unknown&nbsp;token&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="4343019">+</span>&nbsp;<span class="builtintype" id="4343021">string</span><span class="op" id="4343027">(</span><span class="ident" id="4343028"><a href="/compress/flate/huffman_bit_writer.go.html#4342178">t</a></span><span class="op" id="4343029">)</span><span class="op" id="4343030">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4343034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4343037">}</span><br>
<span class="lineno"></span><span class="op" id="4343039">}</span>
</div>
</body>
</html>
