<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html" class="current">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8519284">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8519339">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8519393">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8519444">package</span>&nbsp;<span class="ident" id="8519452">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8519457">import</span>&nbsp;<span class="op" id="8519464">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8519467">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8519476">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8519489">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8519499">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8519502">func</span>&nbsp;<span class="ident" id="8519507">slowAbs</span><span class="op" id="8519514">(</span><span class="ident" id="8519515">x</span>&nbsp;<span class="builtintype" id="8519517">int</span><span class="op" id="8519520">)</span>&nbsp;<span class="builtintype" id="8519522">int</span>&nbsp;<span class="op" id="8519526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519529">if</span>&nbsp;<span class="ident" id="8519532">x</span>&nbsp;<span class="op" id="8519534">&lt;</span>&nbsp;<span class="num" id="8519536">0</span>&nbsp;<span class="op" id="8519538">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519542">return</span>&nbsp;<span class="op" id="8519549">-</span><span class="ident" id="8519550">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519556">return</span>&nbsp;<span class="ident" id="8519563">x</span><br>
<span class="lineno"></span><span class="op" id="8519565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8519568">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="8519640">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="8519714">func</span>&nbsp;<span class="ident" id="8519719">slowPaeth</span><span class="op" id="8519728">(</span><span class="ident" id="8519729">a</span><span class="op" id="8519730">,</span>&nbsp;<span class="ident" id="8519732">b</span><span class="op" id="8519733">,</span>&nbsp;<span class="ident" id="8519735">c</span>&nbsp;<span class="builtintype" id="8519737">uint8</span><span class="op" id="8519742">)</span>&nbsp;<span class="builtintype" id="8519744">uint8</span>&nbsp;<span class="op" id="8519750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519753">p</span>&nbsp;<span class="op" id="8519755">:=</span>&nbsp;<span class="builtintype" id="8519758">int</span><span class="op" id="8519761">(</span><span class="ident" id="8519762">a</span><span class="op" id="8519763">)</span>&nbsp;<span class="op" id="8519765">+</span>&nbsp;<span class="builtintype" id="8519767">int</span><span class="op" id="8519770">(</span><span class="ident" id="8519771">b</span><span class="op" id="8519772">)</span>&nbsp;<span class="op" id="8519774">-</span>&nbsp;<span class="builtintype" id="8519776">int</span><span class="op" id="8519779">(</span><span class="ident" id="8519780">c</span><span class="op" id="8519781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519784">pa</span>&nbsp;<span class="op" id="8519787">:=</span>&nbsp;<span class="ident" id="8519790">slowAbs</span><span class="op" id="8519797">(</span><span class="ident" id="8519798">p</span>&nbsp;<span class="op" id="8519800">-</span>&nbsp;<span class="builtintype" id="8519802">int</span><span class="op" id="8519805">(</span><span class="ident" id="8519806">a</span><span class="op" id="8519807">)</span><span class="op" id="8519808">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519811">pb</span>&nbsp;<span class="op" id="8519814">:=</span>&nbsp;<span class="ident" id="8519817">slowAbs</span><span class="op" id="8519824">(</span><span class="ident" id="8519825">p</span>&nbsp;<span class="op" id="8519827">-</span>&nbsp;<span class="builtintype" id="8519829">int</span><span class="op" id="8519832">(</span><span class="ident" id="8519833">b</span><span class="op" id="8519834">)</span><span class="op" id="8519835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8519838">pc</span>&nbsp;<span class="op" id="8519841">:=</span>&nbsp;<span class="ident" id="8519844">slowAbs</span><span class="op" id="8519851">(</span><span class="ident" id="8519852">p</span>&nbsp;<span class="op" id="8519854">-</span>&nbsp;<span class="builtintype" id="8519856">int</span><span class="op" id="8519859">(</span><span class="ident" id="8519860">c</span><span class="op" id="8519861">)</span><span class="op" id="8519862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519865">if</span>&nbsp;<span class="ident" id="8519868">pa</span>&nbsp;<span class="op" id="8519871">&lt;=</span>&nbsp;<span class="ident" id="8519874">pb</span>&nbsp;<span class="op" id="8519877">&amp;&amp;</span>&nbsp;<span class="ident" id="8519880">pa</span>&nbsp;<span class="op" id="8519883">&lt;=</span>&nbsp;<span class="ident" id="8519886">pc</span>&nbsp;<span class="op" id="8519889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519893">return</span>&nbsp;<span class="ident" id="8519900">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519903">}</span>&nbsp;<span class="keyword" id="8519905">else</span>&nbsp;<span class="keyword" id="8519910">if</span>&nbsp;<span class="ident" id="8519913">pb</span>&nbsp;<span class="op" id="8519916">&lt;=</span>&nbsp;<span class="ident" id="8519919">pc</span>&nbsp;<span class="op" id="8519922">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519926">return</span>&nbsp;<span class="ident" id="8519933">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8519936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8519939">return</span>&nbsp;<span class="ident" id="8519946">c</span><br>
<span class="lineno"></span><span class="op" id="8519948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="8519951">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="8520027">func</span>&nbsp;<span class="ident" id="8520032">slowFilterPaeth</span><span class="op" id="8520047">(</span><span class="ident" id="8520048">cdat</span><span class="op" id="8520052">,</span>&nbsp;<span class="ident" id="8520054">pdat</span>&nbsp;<span class="op" id="8520059">[</span><span class="op" id="8520060">]</span><span class="builtintype" id="8520061">byte</span><span class="op" id="8520065">,</span>&nbsp;<span class="ident" id="8520067">bytesPerPixel</span>&nbsp;<span class="builtintype" id="8520081">int</span><span class="op" id="8520084">)</span>&nbsp;<span class="op" id="8520086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520089">for</span>&nbsp;<span class="ident" id="8520093">i</span>&nbsp;<span class="op" id="8520095">:=</span>&nbsp;<span class="num" id="8520098">0</span><span class="op" id="8520099">;</span>&nbsp;<span class="ident" id="8520101">i</span>&nbsp;<span class="op" id="8520103">&lt;</span>&nbsp;<span class="ident" id="8520105">bytesPerPixel</span><span class="op" id="8520118">;</span>&nbsp;<span class="ident" id="8520120">i</span><span class="op" id="8520121">++</span>&nbsp;<span class="op" id="8520124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520128">cdat</span><span class="op" id="8520132">[</span><span class="ident" id="8520133">i</span><span class="op" id="8520134">]</span>&nbsp;<span class="op" id="8520136">+=</span>&nbsp;<span class="ident" id="8520139">paeth</span><span class="op" id="8520144">(</span><span class="num" id="8520145">0</span><span class="op" id="8520146">,</span>&nbsp;<span class="ident" id="8520148">pdat</span><span class="op" id="8520152">[</span><span class="ident" id="8520153">i</span><span class="op" id="8520154">]</span><span class="op" id="8520155">,</span>&nbsp;<span class="num" id="8520157">0</span><span class="op" id="8520158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520161">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520164">for</span>&nbsp;<span class="ident" id="8520168">i</span>&nbsp;<span class="op" id="8520170">:=</span>&nbsp;<span class="ident" id="8520173">bytesPerPixel</span><span class="op" id="8520186">;</span>&nbsp;<span class="ident" id="8520188">i</span>&nbsp;<span class="op" id="8520190">&lt;</span>&nbsp;<span class="builtinfunc" id="8520192">len</span><span class="op" id="8520195">(</span><span class="ident" id="8520196">cdat</span><span class="op" id="8520200">)</span><span class="op" id="8520201">;</span>&nbsp;<span class="ident" id="8520203">i</span><span class="op" id="8520204">++</span>&nbsp;<span class="op" id="8520207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520211">cdat</span><span class="op" id="8520215">[</span><span class="ident" id="8520216">i</span><span class="op" id="8520217">]</span>&nbsp;<span class="op" id="8520219">+=</span>&nbsp;<span class="ident" id="8520222">paeth</span><span class="op" id="8520227">(</span><span class="ident" id="8520228">cdat</span><span class="op" id="8520232">[</span><span class="ident" id="8520233">i</span><span class="op" id="8520234">-</span><span class="ident" id="8520235">bytesPerPixel</span><span class="op" id="8520248">]</span><span class="op" id="8520249">,</span>&nbsp;<span class="ident" id="8520251">pdat</span><span class="op" id="8520255">[</span><span class="ident" id="8520256">i</span><span class="op" id="8520257">]</span><span class="op" id="8520258">,</span>&nbsp;<span class="ident" id="8520260">pdat</span><span class="op" id="8520264">[</span><span class="ident" id="8520265">i</span><span class="op" id="8520266">-</span><span class="ident" id="8520267">bytesPerPixel</span><span class="op" id="8520280">]</span><span class="op" id="8520281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520284">}</span><br>
<span class="lineno"></span><span class="op" id="8520286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8520289">func</span>&nbsp;<span class="ident" id="8520294">TestPaeth</span><span class="op" id="8520303">(</span><span class="ident" id="8520304">t</span>&nbsp;<span class="op" id="8520306">*</span><span class="ident" id="8520307">testing</span><span class="op" id="8520314">.</span><span class="ident" id="8520315">T</span><span class="op" id="8520316">)</span>&nbsp;<span class="op" id="8520318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520321">for</span>&nbsp;<span class="ident" id="8520325">a</span>&nbsp;<span class="op" id="8520327">:=</span>&nbsp;<span class="num" id="8520330">0</span><span class="op" id="8520331">;</span>&nbsp;<span class="ident" id="8520333">a</span>&nbsp;<span class="op" id="8520335">&lt;</span>&nbsp;<span class="num" id="8520337">256</span><span class="op" id="8520340">;</span>&nbsp;<span class="ident" id="8520342">a</span>&nbsp;<span class="op" id="8520344">+=</span>&nbsp;<span class="num" id="8520347">15</span>&nbsp;<span class="op" id="8520350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520354">for</span>&nbsp;<span class="ident" id="8520358">b</span>&nbsp;<span class="op" id="8520360">:=</span>&nbsp;<span class="num" id="8520363">0</span><span class="op" id="8520364">;</span>&nbsp;<span class="ident" id="8520366">b</span>&nbsp;<span class="op" id="8520368">&lt;</span>&nbsp;<span class="num" id="8520370">256</span><span class="op" id="8520373">;</span>&nbsp;<span class="ident" id="8520375">b</span>&nbsp;<span class="op" id="8520377">+=</span>&nbsp;<span class="num" id="8520380">15</span>&nbsp;<span class="op" id="8520383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520388">for</span>&nbsp;<span class="ident" id="8520392">c</span>&nbsp;<span class="op" id="8520394">:=</span>&nbsp;<span class="num" id="8520397">0</span><span class="op" id="8520398">;</span>&nbsp;<span class="ident" id="8520400">c</span>&nbsp;<span class="op" id="8520402">&lt;</span>&nbsp;<span class="num" id="8520404">256</span><span class="op" id="8520407">;</span>&nbsp;<span class="ident" id="8520409">c</span>&nbsp;<span class="op" id="8520411">+=</span>&nbsp;<span class="num" id="8520414">15</span>&nbsp;<span class="op" id="8520417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520423">got</span>&nbsp;<span class="op" id="8520427">:=</span>&nbsp;<span class="ident" id="8520430">paeth</span><span class="op" id="8520435">(</span><span class="builtintype" id="8520436">uint8</span><span class="op" id="8520441">(</span><span class="ident" id="8520442">a</span><span class="op" id="8520443">)</span><span class="op" id="8520444">,</span>&nbsp;<span class="builtintype" id="8520446">uint8</span><span class="op" id="8520451">(</span><span class="ident" id="8520452">b</span><span class="op" id="8520453">)</span><span class="op" id="8520454">,</span>&nbsp;<span class="builtintype" id="8520456">uint8</span><span class="op" id="8520461">(</span><span class="ident" id="8520462">c</span><span class="op" id="8520463">)</span><span class="op" id="8520464">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520470">want</span>&nbsp;<span class="op" id="8520475">:=</span>&nbsp;<span class="ident" id="8520478">slowPaeth</span><span class="op" id="8520487">(</span><span class="builtintype" id="8520488">uint8</span><span class="op" id="8520493">(</span><span class="ident" id="8520494">a</span><span class="op" id="8520495">)</span><span class="op" id="8520496">,</span>&nbsp;<span class="builtintype" id="8520498">uint8</span><span class="op" id="8520503">(</span><span class="ident" id="8520504">b</span><span class="op" id="8520505">)</span><span class="op" id="8520506">,</span>&nbsp;<span class="builtintype" id="8520508">uint8</span><span class="op" id="8520513">(</span><span class="ident" id="8520514">c</span><span class="op" id="8520515">)</span><span class="op" id="8520516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520522">if</span>&nbsp;<span class="ident" id="8520525">got</span>&nbsp;<span class="op" id="8520529">!=</span>&nbsp;<span class="ident" id="8520532">want</span>&nbsp;<span class="op" id="8520537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520544">t</span><span class="op" id="8520545">.</span><span class="ident" id="8520546">Errorf</span><span class="op" id="8520552">(</span><span class="string" id="8520553">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8520592">,</span>&nbsp;<span class="ident" id="8520594">a</span><span class="op" id="8520595">,</span>&nbsp;<span class="ident" id="8520597">b</span><span class="op" id="8520598">,</span>&nbsp;<span class="ident" id="8520600">c</span><span class="op" id="8520601">,</span>&nbsp;<span class="ident" id="8520603">got</span><span class="op" id="8520606">,</span>&nbsp;<span class="ident" id="8520608">want</span><span class="op" id="8520612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520623">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520630">}</span><br>
<span class="lineno"></span><span class="op" id="8520632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8520635">func</span>&nbsp;<span class="ident" id="8520640">BenchmarkPaeth</span><span class="op" id="8520654">(</span><span class="ident" id="8520655">b</span>&nbsp;<span class="op" id="8520657">*</span><span class="ident" id="8520658">testing</span><span class="op" id="8520665">.</span><span class="ident" id="8520666">B</span><span class="op" id="8520667">)</span>&nbsp;<span class="op" id="8520669">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520672">for</span>&nbsp;<span class="ident" id="8520676">i</span>&nbsp;<span class="op" id="8520678">:=</span>&nbsp;<span class="num" id="8520681">0</span><span class="op" id="8520682">;</span>&nbsp;<span class="ident" id="8520684">i</span>&nbsp;<span class="op" id="8520686">&lt;</span>&nbsp;<span class="ident" id="8520688">b</span><span class="op" id="8520689">.</span><span class="ident" id="8520690">N</span><span class="op" id="8520691">;</span>&nbsp;<span class="ident" id="8520693">i</span><span class="op" id="8520694">++</span>&nbsp;<span class="op" id="8520697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520701">paeth</span><span class="op" id="8520706">(</span><span class="builtintype" id="8520707">uint8</span><span class="op" id="8520712">(</span><span class="ident" id="8520713">i</span><span class="op" id="8520714">&gt;&gt;</span><span class="num" id="8520716">16</span><span class="op" id="8520718">)</span><span class="op" id="8520719">,</span>&nbsp;<span class="builtintype" id="8520721">uint8</span><span class="op" id="8520726">(</span><span class="ident" id="8520727">i</span><span class="op" id="8520728">&gt;&gt;</span><span class="num" id="8520730">8</span><span class="op" id="8520731">)</span><span class="op" id="8520732">,</span>&nbsp;<span class="builtintype" id="8520734">uint8</span><span class="op" id="8520739">(</span><span class="ident" id="8520740">i</span><span class="op" id="8520741">)</span><span class="op" id="8520742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8520745">}</span><br>
<span class="lineno"></span><span class="op" id="8520747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8520750">func</span>&nbsp;<span class="ident" id="8520755">TestPaethDecode</span><span class="op" id="8520770">(</span><span class="ident" id="8520771">t</span>&nbsp;<span class="op" id="8520773">*</span><span class="ident" id="8520774">testing</span><span class="op" id="8520781">.</span><span class="ident" id="8520782">T</span><span class="op" id="8520783">)</span>&nbsp;<span class="op" id="8520785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520788">pdat0</span>&nbsp;<span class="op" id="8520794">:=</span>&nbsp;<span class="builtinfunc" id="8520797">make</span><span class="op" id="8520801">(</span><span class="op" id="8520802">[</span><span class="op" id="8520803">]</span><span class="builtintype" id="8520804">byte</span><span class="op" id="8520808">,</span>&nbsp;<span class="num" id="8520810">32</span><span class="op" id="8520812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520815">pdat1</span>&nbsp;<span class="op" id="8520821">:=</span>&nbsp;<span class="builtinfunc" id="8520824">make</span><span class="op" id="8520828">(</span><span class="op" id="8520829">[</span><span class="op" id="8520830">]</span><span class="builtintype" id="8520831">byte</span><span class="op" id="8520835">,</span>&nbsp;<span class="num" id="8520837">32</span><span class="op" id="8520839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520842">pdat2</span>&nbsp;<span class="op" id="8520848">:=</span>&nbsp;<span class="builtinfunc" id="8520851">make</span><span class="op" id="8520855">(</span><span class="op" id="8520856">[</span><span class="op" id="8520857">]</span><span class="builtintype" id="8520858">byte</span><span class="op" id="8520862">,</span>&nbsp;<span class="num" id="8520864">32</span><span class="op" id="8520866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520869">cdat0</span>&nbsp;<span class="op" id="8520875">:=</span>&nbsp;<span class="builtinfunc" id="8520878">make</span><span class="op" id="8520882">(</span><span class="op" id="8520883">[</span><span class="op" id="8520884">]</span><span class="builtintype" id="8520885">byte</span><span class="op" id="8520889">,</span>&nbsp;<span class="num" id="8520891">32</span><span class="op" id="8520893">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520896">cdat1</span>&nbsp;<span class="op" id="8520902">:=</span>&nbsp;<span class="builtinfunc" id="8520905">make</span><span class="op" id="8520909">(</span><span class="op" id="8520910">[</span><span class="op" id="8520911">]</span><span class="builtintype" id="8520912">byte</span><span class="op" id="8520916">,</span>&nbsp;<span class="num" id="8520918">32</span><span class="op" id="8520920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520923">cdat2</span>&nbsp;<span class="op" id="8520929">:=</span>&nbsp;<span class="builtinfunc" id="8520932">make</span><span class="op" id="8520936">(</span><span class="op" id="8520937">[</span><span class="op" id="8520938">]</span><span class="builtintype" id="8520939">byte</span><span class="op" id="8520943">,</span>&nbsp;<span class="num" id="8520945">32</span><span class="op" id="8520947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8520950">r</span>&nbsp;<span class="op" id="8520952">:=</span>&nbsp;<span class="ident" id="8520955">rand</span><span class="op" id="8520959">.</span><span class="ident" id="8520960">New</span><span class="op" id="8520963">(</span><span class="ident" id="8520964">rand</span><span class="op" id="8520968">.</span><span class="ident" id="8520969">NewSource</span><span class="op" id="8520978">(</span><span class="num" id="8520979">1</span><span class="op" id="8520980">)</span><span class="op" id="8520981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8520984">for</span>&nbsp;<span class="ident" id="8520988">bytesPerPixel</span>&nbsp;<span class="op" id="8521002">:=</span>&nbsp;<span class="num" id="8521005">1</span><span class="op" id="8521006">;</span>&nbsp;<span class="ident" id="8521008">bytesPerPixel</span>&nbsp;<span class="op" id="8521022">&lt;=</span>&nbsp;<span class="num" id="8521025">8</span><span class="op" id="8521026">;</span>&nbsp;<span class="ident" id="8521028">bytesPerPixel</span><span class="op" id="8521041">++</span>&nbsp;<span class="op" id="8521044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8521048">for</span>&nbsp;<span class="ident" id="8521052">i</span>&nbsp;<span class="op" id="8521054">:=</span>&nbsp;<span class="num" id="8521057">0</span><span class="op" id="8521058">;</span>&nbsp;<span class="ident" id="8521060">i</span>&nbsp;<span class="op" id="8521062">&lt;</span>&nbsp;<span class="num" id="8521064">100</span><span class="op" id="8521067">;</span>&nbsp;<span class="ident" id="8521069">i</span><span class="op" id="8521070">++</span>&nbsp;<span class="op" id="8521073">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8521078">for</span>&nbsp;<span class="ident" id="8521082">j</span>&nbsp;<span class="op" id="8521084">:=</span>&nbsp;<span class="keyword" id="8521087">range</span>&nbsp;<span class="ident" id="8521093">pdat0</span>&nbsp;<span class="op" id="8521099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8521105">pdat0</span><span class="op" id="8521110">[</span><span class="ident" id="8521111">j</span><span class="op" id="8521112">]</span>&nbsp;<span class="op" id="8521114">=</span>&nbsp;<span class="builtintype" id="8521116">uint8</span><span class="op" id="8521121">(</span><span class="ident" id="8521122">r</span><span class="op" id="8521123">.</span><span class="ident" id="8521124">Uint32</span><span class="op" id="8521130">(</span><span class="op" id="8521131">)</span><span class="op" id="8521132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8521138">cdat0</span><span class="op" id="8521143">[</span><span class="ident" id="8521144">j</span><span class="op" id="8521145">]</span>&nbsp;<span class="op" id="8521147">=</span>&nbsp;<span class="builtintype" id="8521149">uint8</span><span class="op" id="8521154">(</span><span class="ident" id="8521155">r</span><span class="op" id="8521156">.</span><span class="ident" id="8521157">Uint32</span><span class="op" id="8521163">(</span><span class="op" id="8521164">)</span><span class="op" id="8521165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8521170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8521175">copy</span><span class="op" id="8521179">(</span><span class="ident" id="8521180">pdat1</span><span class="op" id="8521185">,</span>&nbsp;<span class="ident" id="8521187">pdat0</span><span class="op" id="8521192">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8521197">copy</span><span class="op" id="8521201">(</span><span class="ident" id="8521202">pdat2</span><span class="op" id="8521207">,</span>&nbsp;<span class="ident" id="8521209">pdat0</span><span class="op" id="8521214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8521219">copy</span><span class="op" id="8521223">(</span><span class="ident" id="8521224">cdat1</span><span class="op" id="8521229">,</span>&nbsp;<span class="ident" id="8521231">cdat0</span><span class="op" id="8521236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8521241">copy</span><span class="op" id="8521245">(</span><span class="ident" id="8521246">cdat2</span><span class="op" id="8521251">,</span>&nbsp;<span class="ident" id="8521253">cdat0</span><span class="op" id="8521258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8521263">filterPaeth</span><span class="op" id="8521274">(</span><span class="ident" id="8521275">cdat1</span><span class="op" id="8521280">,</span>&nbsp;<span class="ident" id="8521282">pdat1</span><span class="op" id="8521287">,</span>&nbsp;<span class="ident" id="8521289">bytesPerPixel</span><span class="op" id="8521302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8521307">slowFilterPaeth</span><span class="op" id="8521322">(</span><span class="ident" id="8521323">cdat2</span><span class="op" id="8521328">,</span>&nbsp;<span class="ident" id="8521330">pdat2</span><span class="op" id="8521335">,</span>&nbsp;<span class="ident" id="8521337">bytesPerPixel</span><span class="op" id="8521350">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8521355">if</span>&nbsp;<span class="op" id="8521358">!</span><span class="ident" id="8521359">bytes</span><span class="op" id="8521364">.</span><span class="ident" id="8521365">Equal</span><span class="op" id="8521370">(</span><span class="ident" id="8521371">cdat1</span><span class="op" id="8521376">,</span>&nbsp;<span class="ident" id="8521378">cdat2</span><span class="op" id="8521383">)</span>&nbsp;<span class="op" id="8521385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8521391">t</span><span class="op" id="8521392">.</span><span class="ident" id="8521393">Errorf</span><span class="op" id="8521399">(</span><span class="string" id="8521400">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="8521467">,</span>&nbsp;<span class="ident" id="8521469">bytesPerPixel</span><span class="op" id="8521482">,</span>&nbsp;<span class="ident" id="8521484">pdat0</span><span class="op" id="8521489">,</span>&nbsp;<span class="ident" id="8521491">cdat0</span><span class="op" id="8521496">,</span>&nbsp;<span class="ident" id="8521498">cdat1</span><span class="op" id="8521503">,</span>&nbsp;<span class="ident" id="8521505">cdat2</span><span class="op" id="8521510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8521516">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8521525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8521529">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8521532">}</span><br>
<span class="lineno"></span><span class="op" id="8521534">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
