<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3648827">package</span>&nbsp;<span class="ident" id="3648835">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3648841">import</span>&nbsp;<span class="op" id="3648848">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3648851">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3648874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3648877">//&nbsp;PkgObj&nbsp;is&nbsp;a&nbsp;package&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="3648908">type</span>&nbsp;<span class="ident" id="3648913">lib</span>&nbsp;<span class="keyword" id="3648917">struct</span>&nbsp;<span class="op" id="3648924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3648927">*</span><span class="ident" id="3648928">link8</span><span class="op" id="3648933">.</span><span class="ident" id="3648934">Package</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648944">requires</span>&nbsp;<span class="keyword" id="3648953">map</span><span class="op" id="3648956">[</span><span class="builtintype" id="3648957">uint32</span><span class="op" id="3648963">]</span><span class="op" id="3648964">*</span><span class="ident" id="3648965">lib</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648970">symbols</span>&nbsp;&nbsp;<span class="keyword" id="3648979">map</span><span class="op" id="3648982">[</span><span class="builtintype" id="3648983">string</span><span class="op" id="3648989">]</span><span class="op" id="3648990">*</span><span class="ident" id="3648991">symbol</span><br>
<span class="lineno"></span><span class="op" id="3648998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3649001">//&nbsp;NewPkgObj&nbsp;creates&nbsp;a&nbsp;new&nbsp;package&nbsp;compile&nbsp;object</span><br>
<span class="lineno"></span><span class="keyword" id="3649051">func</span>&nbsp;<span class="ident" id="3649056">newLib</span><span class="op" id="3649062">(</span><span class="ident" id="3649063">p</span>&nbsp;<span class="builtintype" id="3649065">string</span><span class="op" id="3649071">)</span>&nbsp;<span class="op" id="3649073">*</span><span class="ident" id="3649074">lib</span>&nbsp;<span class="op" id="3649078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649081">ret</span>&nbsp;<span class="op" id="3649085">:=</span>&nbsp;<span class="builtinfunc" id="3649088">new</span><span class="op" id="3649091">(</span><span class="ident" id="3649092">lib</span><span class="op" id="3649095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649098">ret</span><span class="op" id="3649101">.</span><span class="ident" id="3649102">Package</span>&nbsp;<span class="op" id="3649110">=</span>&nbsp;<span class="ident" id="3649112">link8</span><span class="op" id="3649117">.</span><span class="ident" id="3649118">NewPackage</span><span class="op" id="3649128">(</span><span class="ident" id="3649129">p</span><span class="op" id="3649130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649134">ret</span><span class="op" id="3649137">.</span><span class="ident" id="3649138">requires</span>&nbsp;<span class="op" id="3649147">=</span>&nbsp;<span class="builtinfunc" id="3649149">make</span><span class="op" id="3649153">(</span><span class="keyword" id="3649154">map</span><span class="op" id="3649157">[</span><span class="builtintype" id="3649158">uint32</span><span class="op" id="3649164">]</span><span class="op" id="3649165">*</span><span class="ident" id="3649166">lib</span><span class="op" id="3649169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649172">ret</span><span class="op" id="3649175">.</span><span class="ident" id="3649176">symbols</span>&nbsp;<span class="op" id="3649184">=</span>&nbsp;<span class="builtinfunc" id="3649186">make</span><span class="op" id="3649190">(</span><span class="keyword" id="3649191">map</span><span class="op" id="3649194">[</span><span class="builtintype" id="3649195">string</span><span class="op" id="3649201">]</span><span class="op" id="3649202">*</span><span class="ident" id="3649203">symbol</span><span class="op" id="3649209">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649213">id</span>&nbsp;<span class="op" id="3649216">:=</span>&nbsp;<span class="ident" id="3649219">ret</span><span class="op" id="3649222">.</span><span class="ident" id="3649223">Require</span><span class="op" id="3649230">(</span><span class="ident" id="3649231">ret</span><span class="op" id="3649234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649237">if</span>&nbsp;<span class="ident" id="3649240">id</span>&nbsp;<span class="op" id="3649243">!=</span>&nbsp;<span class="num" id="3649246">0</span>&nbsp;<span class="op" id="3649248">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3649252">panic</span><span class="op" id="3649257">(</span><span class="string" id="3649258">&#34;bug&#34;</span><span class="op" id="3649263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649270">return</span>&nbsp;<span class="ident" id="3649277">ret</span><br>
<span class="lineno"></span><span class="op" id="3649281">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="3649284">//&nbsp;Require&nbsp;imports&nbsp;a&nbsp;package&nbsp;in&nbsp;and&nbsp;grants&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="3649339">//&nbsp;a&nbsp;import&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="3649358">func</span>&nbsp;<span class="op" id="3649363">(</span><span class="ident" id="3649364">p</span>&nbsp;<span class="op" id="3649366">*</span><span class="ident" id="3649367">lib</span><span class="op" id="3649370">)</span>&nbsp;<span class="ident" id="3649372">Require</span><span class="op" id="3649379">(</span><span class="ident" id="3649380">req</span>&nbsp;<span class="op" id="3649384">*</span><span class="ident" id="3649385">lib</span><span class="op" id="3649388">)</span>&nbsp;<span class="builtintype" id="3649390">uint32</span>&nbsp;<span class="op" id="3649397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649400">ret</span>&nbsp;<span class="op" id="3649404">:=</span>&nbsp;<span class="ident" id="3649407">p</span><span class="op" id="3649408">.</span><span class="ident" id="3649409">Package</span><span class="op" id="3649416">.</span><span class="ident" id="3649417">Require</span><span class="op" id="3649424">(</span><span class="ident" id="3649425">req</span><span class="op" id="3649428">.</span><span class="ident" id="3649429">Package</span><span class="op" id="3649436">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649439">_</span><span class="op" id="3649440">,</span>&nbsp;<span class="ident" id="3649442">found</span>&nbsp;<span class="op" id="3649448">:=</span>&nbsp;<span class="ident" id="3649451">p</span><span class="op" id="3649452">.</span><span class="ident" id="3649453">requires</span><span class="op" id="3649461">[</span><span class="ident" id="3649462">ret</span><span class="op" id="3649465">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649468">if</span>&nbsp;<span class="op" id="3649471">!</span><span class="ident" id="3649472">found</span>&nbsp;<span class="op" id="3649478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649482">p</span><span class="op" id="3649483">.</span><span class="ident" id="3649484">requires</span><span class="op" id="3649492">[</span><span class="ident" id="3649493">ret</span><span class="op" id="3649496">]</span>&nbsp;<span class="op" id="3649498">=</span>&nbsp;<span class="ident" id="3649500">req</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649509">return</span>&nbsp;<span class="ident" id="3649516">ret</span><br>
<span class="lineno"></span><span class="op" id="3649520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3649523">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;package&nbsp;import&nbsp;index,&nbsp;consistent&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3649585">//&nbsp;the&nbsp;underlying&nbsp;link8.Package.</span><br>
<span class="lineno">45</span><span class="keyword" id="3649618">func</span>&nbsp;<span class="op" id="3649623">(</span><span class="ident" id="3649624">p</span>&nbsp;<span class="op" id="3649626">*</span><span class="ident" id="3649627">lib</span><span class="op" id="3649630">)</span>&nbsp;<span class="ident" id="3649632">LibIndex</span><span class="op" id="3649640">(</span><span class="ident" id="3649641">path</span>&nbsp;<span class="builtintype" id="3649646">string</span><span class="op" id="3649652">)</span>&nbsp;<span class="op" id="3649654">(</span><span class="op" id="3649655">*</span><span class="ident" id="3649656">lib</span><span class="op" id="3649659">,</span>&nbsp;<span class="builtintype" id="3649661">uint32</span><span class="op" id="3649667">)</span>&nbsp;<span class="op" id="3649669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649672">pkg</span><span class="op" id="3649675">,</span>&nbsp;<span class="ident" id="3649677">index</span>&nbsp;<span class="op" id="3649683">:=</span>&nbsp;<span class="ident" id="3649686">p</span><span class="op" id="3649687">.</span><span class="ident" id="3649688">Package</span><span class="op" id="3649695">.</span><span class="ident" id="3649696">PkgIndex</span><span class="op" id="3649704">(</span><span class="ident" id="3649705">path</span><span class="op" id="3649709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649712">if</span>&nbsp;<span class="ident" id="3649715">pkg</span>&nbsp;<span class="op" id="3649719">==</span>&nbsp;<span class="ident" id="3649722">nil</span>&nbsp;<span class="op" id="3649726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649730">return</span>&nbsp;<span class="ident" id="3649737">nil</span><span class="op" id="3649740">,</span>&nbsp;<span class="num" id="3649742">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649745">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649749">ret</span><span class="op" id="3649752">,</span>&nbsp;<span class="ident" id="3649754">found</span>&nbsp;<span class="op" id="3649760">:=</span>&nbsp;<span class="ident" id="3649763">p</span><span class="op" id="3649764">.</span><span class="ident" id="3649765">requires</span><span class="op" id="3649773">[</span><span class="ident" id="3649774">index</span><span class="op" id="3649779">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649782">if</span>&nbsp;<span class="op" id="3649785">!</span><span class="ident" id="3649786">found</span>&nbsp;<span class="op" id="3649792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3649796">panic</span><span class="op" id="3649801">(</span><span class="string" id="3649802">&#34;bug&#34;</span><span class="op" id="3649807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649810">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649814">return</span>&nbsp;<span class="ident" id="3649821">ret</span><span class="op" id="3649824">,</span>&nbsp;<span class="ident" id="3649826">index</span><br>
<span class="lineno"></span><span class="op" id="3649832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3649835">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbol&nbsp;inside&nbsp;the&nbsp;package.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function</span><br>
<span class="lineno">60</span><span class="comment" id="3649913">//&nbsp;or&nbsp;variable,&nbsp;it&nbsp;is&nbsp;also&nbsp;declared&nbsp;as&nbsp;an&nbsp;object&nbsp;file&nbsp;symbol&nbsp;in&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="3649992">//&nbsp;link8.Package,&nbsp;and&nbsp;it&nbsp;returns&nbsp;the&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;constant,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3650069">//&nbsp;returns&nbsp;0&nbsp;after&nbsp;the&nbsp;declaration.&nbsp;Other&nbsp;types&nbsp;will&nbsp;panic.&nbsp;Redeclaration&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3650148">//&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="3650158">func</span>&nbsp;<span class="op" id="3650163">(</span><span class="ident" id="3650164">p</span>&nbsp;<span class="op" id="3650166">*</span><span class="ident" id="3650167">lib</span><span class="op" id="3650170">)</span>&nbsp;<span class="ident" id="3650172">Declare</span><span class="op" id="3650179">(</span><span class="ident" id="3650180">s</span>&nbsp;<span class="op" id="3650182">*</span><span class="ident" id="3650183">symbol</span><span class="op" id="3650189">)</span>&nbsp;<span class="builtintype" id="3650191">uint32</span>&nbsp;<span class="op" id="3650198">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650201">_</span><span class="op" id="3650202">,</span>&nbsp;<span class="ident" id="3650204">found</span>&nbsp;<span class="op" id="3650210">:=</span>&nbsp;<span class="ident" id="3650213">p</span><span class="op" id="3650214">.</span><span class="ident" id="3650215">symbols</span><span class="op" id="3650222">[</span><span class="ident" id="3650223">s</span><span class="op" id="3650224">.</span><span class="ident" id="3650225">Name</span><span class="op" id="3650229">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650232">if</span>&nbsp;<span class="ident" id="3650235">found</span>&nbsp;<span class="op" id="3650241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3650245">panic</span><span class="op" id="3650250">(</span><span class="string" id="3650251">&#34;redeclare&#34;</span><span class="op" id="3650262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3650265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650268">p</span><span class="op" id="3650269">.</span><span class="ident" id="3650270">symbols</span><span class="op" id="3650277">[</span><span class="ident" id="3650278">s</span><span class="op" id="3650279">.</span><span class="ident" id="3650280">Name</span><span class="op" id="3650284">]</span>&nbsp;<span class="op" id="3650286">=</span>&nbsp;<span class="ident" id="3650288">s</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650292">switch</span>&nbsp;<span class="ident" id="3650299">s</span><span class="op" id="3650300">.</span><span class="ident" id="3650301">Type</span>&nbsp;<span class="op" id="3650306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650309">case</span>&nbsp;<span class="ident" id="3650314">SymConst</span><span class="op" id="3650322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650326">return</span>&nbsp;<span class="num" id="3650333">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650336">case</span>&nbsp;<span class="ident" id="3650341">SymFunc</span><span class="op" id="3650348">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650352">return</span>&nbsp;<span class="ident" id="3650359">p</span><span class="op" id="3650360">.</span><span class="ident" id="3650361">Package</span><span class="op" id="3650368">.</span><span class="ident" id="3650369">Declare</span><span class="op" id="3650376">(</span><span class="op" id="3650377">&amp;</span><span class="ident" id="3650378">link8</span><span class="op" id="3650383">.</span><span class="ident" id="3650384">Symbol</span><span class="op" id="3650390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650395">Name</span><span class="op" id="3650399">:</span>&nbsp;<span class="ident" id="3650401">s</span><span class="op" id="3650402">.</span><span class="ident" id="3650403">Name</span><span class="op" id="3650407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650412">Type</span><span class="op" id="3650416">:</span>&nbsp;<span class="ident" id="3650418">link8</span><span class="op" id="3650423">.</span><span class="ident" id="3650424">SymFunc</span><span class="op" id="3650431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3650435">}</span><span class="op" id="3650436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650439">case</span>&nbsp;<span class="ident" id="3650444">SymVar</span><span class="op" id="3650450">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650454">return</span>&nbsp;<span class="ident" id="3650461">p</span><span class="op" id="3650462">.</span><span class="ident" id="3650463">Package</span><span class="op" id="3650470">.</span><span class="ident" id="3650471">Declare</span><span class="op" id="3650478">(</span><span class="op" id="3650479">&amp;</span><span class="ident" id="3650480">link8</span><span class="op" id="3650485">.</span><span class="ident" id="3650486">Symbol</span><span class="op" id="3650492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650497">Name</span><span class="op" id="3650501">:</span>&nbsp;<span class="ident" id="3650503">s</span><span class="op" id="3650504">.</span><span class="ident" id="3650505">Name</span><span class="op" id="3650509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650514">Type</span><span class="op" id="3650518">:</span>&nbsp;<span class="ident" id="3650520">link8</span><span class="op" id="3650525">.</span><span class="ident" id="3650526">SymVar</span><span class="op" id="3650532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3650536">}</span><span class="op" id="3650537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650540">default</span><span class="op" id="3650547">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3650551">panic</span><span class="op" id="3650556">(</span><span class="string" id="3650557">&#34;declare&nbsp;with&nbsp;invalid&nbsp;sym&nbsp;type&#34;</span><span class="op" id="3650588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3650591">}</span><br>
<span class="lineno"></span><span class="op" id="3650593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3650596">//&nbsp;Query&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;declared&nbsp;by&nbsp;name&nbsp;and&nbsp;its&nbsp;symbol&nbsp;index</span><br>
<span class="lineno">90</span><span class="comment" id="3650662">//&nbsp;if&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function&nbsp;or&nbsp;variable.&nbsp;It&nbsp;returns&nbsp;nil,&nbsp;0&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3650729">//&nbsp;the&nbsp;symbol&nbsp;of&nbsp;name&nbsp;is&nbsp;not&nbsp;found.</span><br>
<span class="lineno"></span><span class="keyword" id="3650765">func</span>&nbsp;<span class="op" id="3650770">(</span><span class="ident" id="3650771">p</span>&nbsp;<span class="op" id="3650773">*</span><span class="ident" id="3650774">lib</span><span class="op" id="3650777">)</span>&nbsp;<span class="ident" id="3650779">Query</span><span class="op" id="3650784">(</span><span class="ident" id="3650785">name</span>&nbsp;<span class="builtintype" id="3650790">string</span><span class="op" id="3650796">)</span>&nbsp;<span class="op" id="3650798">(</span><span class="op" id="3650799">*</span><span class="ident" id="3650800">symbol</span><span class="op" id="3650806">,</span>&nbsp;<span class="builtintype" id="3650808">uint32</span><span class="op" id="3650814">)</span>&nbsp;<span class="op" id="3650816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650819">ret</span><span class="op" id="3650822">,</span>&nbsp;<span class="ident" id="3650824">found</span>&nbsp;<span class="op" id="3650830">:=</span>&nbsp;<span class="ident" id="3650833">p</span><span class="op" id="3650834">.</span><span class="ident" id="3650835">symbols</span><span class="op" id="3650842">[</span><span class="ident" id="3650843">name</span><span class="op" id="3650847">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650850">if</span>&nbsp;<span class="op" id="3650853">!</span><span class="ident" id="3650854">found</span>&nbsp;<span class="op" id="3650860">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650864">return</span>&nbsp;<span class="ident" id="3650871">nil</span><span class="op" id="3650874">,</span>&nbsp;<span class="num" id="3650876">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3650879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650883">switch</span>&nbsp;<span class="ident" id="3650890">ret</span><span class="op" id="3650893">.</span><span class="ident" id="3650894">Type</span>&nbsp;<span class="op" id="3650899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650902">case</span>&nbsp;<span class="ident" id="3650907">SymConst</span><span class="op" id="3650915">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650919">return</span>&nbsp;<span class="ident" id="3650926">ret</span><span class="op" id="3650929">,</span>&nbsp;<span class="num" id="3650931">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650934">case</span>&nbsp;<span class="ident" id="3650939">SymFunc</span><span class="op" id="3650946">,</span>&nbsp;<span class="ident" id="3650948">SymVar</span><span class="op" id="3650954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3650958">s</span><span class="op" id="3650959">,</span>&nbsp;<span class="ident" id="3650961">index</span>&nbsp;<span class="op" id="3650967">:=</span>&nbsp;<span class="ident" id="3650970">p</span><span class="op" id="3650971">.</span><span class="ident" id="3650972">Package</span><span class="op" id="3650979">.</span><span class="ident" id="3650980">Query</span><span class="op" id="3650985">(</span><span class="ident" id="3650986">name</span><span class="op" id="3650990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650994">if</span>&nbsp;<span class="ident" id="3650997">s</span>&nbsp;<span class="op" id="3650999">==</span>&nbsp;<span class="ident" id="3651002">nil</span>&nbsp;<span class="op" id="3651006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3651011">panic</span><span class="op" id="3651016">(</span><span class="string" id="3651017">&#34;symbol&nbsp;missing&#34;</span><span class="op" id="3651033">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3651037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651041">return</span>&nbsp;<span class="ident" id="3651048">ret</span><span class="op" id="3651051">,</span>&nbsp;<span class="ident" id="3651053">index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651060">default</span><span class="op" id="3651067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3651071">panic</span><span class="op" id="3651076">(</span><span class="string" id="3651077">&#34;bug&#34;</span><span class="op" id="3651082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3651085">}</span><br>
<span class="lineno">110</span><span class="op" id="3651087">}</span>
</div>
</body>
</html>
