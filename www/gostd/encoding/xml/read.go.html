<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6100060">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6100116">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6100170">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6100221">package</span>&nbsp;<span class="ident" id="6100229">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6100234">import</span>&nbsp;<span class="op" id="6100241">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100244">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100253">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100265">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100275">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100282">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100293">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6100304">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6100314">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6100317">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6100401">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6100465">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6100534">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6100554">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6100617">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6100641">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6100707">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6100772">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6100838">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6100852">//</span><br>
<span class="lineno"></span><span class="comment" id="6100855">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6100921">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6100990">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6101056">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6101072">//</span><br>
<span class="lineno"></span><span class="comment" id="6101075">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6101147">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6101223">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6101287">//</span><br>
<span class="lineno"></span><span class="comment" id="6101290">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6101357">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6101430">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6101497">//</span><br>
<span class="lineno"></span><span class="comment" id="6101500">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6101565">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6101623">//</span><br>
<span class="lineno">45</span><span class="comment" id="6101626">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6101688">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6101754">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6101825">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6101851">//</span><br>
<span class="lineno">50</span><span class="comment" id="6101854">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6101918">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6101989">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6102062">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6102123">//</span><br>
<span class="lineno">55</span><span class="comment" id="6102126">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6102190">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6102262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6102319">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6102387">//</span><br>
<span class="lineno">60</span><span class="comment" id="6102390">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6102459">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6102527">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6102594">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6102637">//</span><br>
<span class="lineno">65</span><span class="comment" id="6102640">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6102708">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6102775">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6102849">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6102921">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6102990">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6103035">//</span><br>
<span class="lineno"></span><span class="comment" id="6103038">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6103106">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6103171">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6103238">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6103284">//</span><br>
<span class="lineno"></span><span class="comment" id="6103287">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6103357">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6103433">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6103484">//</span><br>
<span class="lineno"></span><span class="comment" id="6103487">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6103560">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6103631">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6103692">//</span><br>
<span class="lineno">85</span><span class="comment" id="6103695">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6103763">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6103808">//</span><br>
<span class="lineno"></span><span class="comment" id="6103811">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6103874">//</span><br>
<span class="lineno">90</span><span class="comment" id="6103877">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6103946">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6104013">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6104055">//</span><br>
<span class="lineno"></span><span class="comment" id="6104058">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6104127">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6104164">//</span><br>
<span class="lineno"></span><span class="comment" id="6104167">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6104238">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6104303">//</span><br>
<span class="lineno">100</span><span class="comment" id="6104306">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6104371">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6104433">//</span><br>
<span class="lineno"></span><span class="comment" id="6104436">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6104505">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6104567">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6104635">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6104648">//</span><br>
<span class="lineno"></span><span class="comment" id="6104651">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6104716">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6104733">//</span><br>
<span class="lineno"></span><span class="comment" id="6104736">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6104805">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6104881">//</span><br>
<span class="lineno"></span><span class="keyword" id="6104884">func</span>&nbsp;<span class="ident" id="6104889">Unmarshal</span><span class="op" id="6104898">(</span><span class="ident" id="6104899">data</span>&nbsp;<span class="op" id="6104904">[</span><span class="op" id="6104905">]</span><span class="builtintype" id="6104906">byte</span><span class="op" id="6104910">,</span>&nbsp;<span class="ident" id="6104912">v</span>&nbsp;<span class="keyword" id="6104914">interface</span><span class="op" id="6104923">{</span><span class="op" id="6104924">}</span><span class="op" id="6104925">)</span>&nbsp;<span class="builtintype" id="6104927">error</span>&nbsp;<span class="op" id="6104933">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6104936">return</span>&nbsp;<span class="ident" id="6104943">NewDecoder</span><span class="op" id="6104953">(</span><span class="ident" id="6104954">bytes</span><span class="op" id="6104959">.</span><span class="ident" id="6104960">NewReader</span><span class="op" id="6104969">(</span><span class="ident" id="6104970">data</span><span class="op" id="6104974">)</span><span class="op" id="6104975">)</span><span class="op" id="6104976">.</span><span class="ident" id="6104977">Decode</span><span class="op" id="6104983">(</span><span class="ident" id="6104984">v</span><span class="op" id="6104985">)</span><br>
<span class="lineno"></span><span class="op" id="6104987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6104990">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6105054">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6105091">func</span>&nbsp;<span class="op" id="6105096">(</span><span class="ident" id="6105097">d</span>&nbsp;<span class="op" id="6105099">*</span><span class="ident" id="6105100">Decoder</span><span class="op" id="6105107">)</span>&nbsp;<span class="ident" id="6105109">Decode</span><span class="op" id="6105115">(</span><span class="ident" id="6105116">v</span>&nbsp;<span class="keyword" id="6105118">interface</span><span class="op" id="6105127">{</span><span class="op" id="6105128">}</span><span class="op" id="6105129">)</span>&nbsp;<span class="builtintype" id="6105131">error</span>&nbsp;<span class="op" id="6105137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6105140">return</span>&nbsp;<span class="ident" id="6105147">d</span><span class="op" id="6105148">.</span><span class="ident" id="6105149">DecodeElement</span><span class="op" id="6105162">(</span><span class="ident" id="6105163">v</span><span class="op" id="6105164">,</span>&nbsp;<span class="ident" id="6105166">nil</span><span class="op" id="6105169">)</span><br>
<span class="lineno"></span><span class="op" id="6105171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6105174">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6105237">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6105293">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6105356">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6105415">func</span>&nbsp;<span class="op" id="6105420">(</span><span class="ident" id="6105421">d</span>&nbsp;<span class="op" id="6105423">*</span><span class="ident" id="6105424">Decoder</span><span class="op" id="6105431">)</span>&nbsp;<span class="ident" id="6105433">DecodeElement</span><span class="op" id="6105446">(</span><span class="ident" id="6105447">v</span>&nbsp;<span class="keyword" id="6105449">interface</span><span class="op" id="6105458">{</span><span class="op" id="6105459">}</span><span class="op" id="6105460">,</span>&nbsp;<span class="ident" id="6105462">start</span>&nbsp;<span class="op" id="6105468">*</span><span class="ident" id="6105469">StartElement</span><span class="op" id="6105481">)</span>&nbsp;<span class="builtintype" id="6105483">error</span>&nbsp;<span class="op" id="6105489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6105492">val</span>&nbsp;<span class="op" id="6105496">:=</span>&nbsp;<span class="ident" id="6105499">reflect</span><span class="op" id="6105506">.</span><span class="ident" id="6105507">ValueOf</span><span class="op" id="6105514">(</span><span class="ident" id="6105515">v</span><span class="op" id="6105516">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6105519">if</span>&nbsp;<span class="ident" id="6105522">val</span><span class="op" id="6105525">.</span><span class="ident" id="6105526">Kind</span><span class="op" id="6105530">(</span><span class="op" id="6105531">)</span>&nbsp;<span class="op" id="6105533">!=</span>&nbsp;<span class="ident" id="6105536">reflect</span><span class="op" id="6105543">.</span><span class="ident" id="6105544">Ptr</span>&nbsp;<span class="op" id="6105548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6105552">return</span>&nbsp;<span class="ident" id="6105559">errors</span><span class="op" id="6105565">.</span><span class="ident" id="6105566">New</span><span class="op" id="6105569">(</span><span class="string" id="6105570">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6105603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6105606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6105609">return</span>&nbsp;<span class="ident" id="6105616">d</span><span class="op" id="6105617">.</span><span class="ident" id="6105618">unmarshal</span><span class="op" id="6105627">(</span><span class="ident" id="6105628">val</span><span class="op" id="6105631">.</span><span class="ident" id="6105632">Elem</span><span class="op" id="6105636">(</span><span class="op" id="6105637">)</span><span class="op" id="6105638">,</span>&nbsp;<span class="ident" id="6105640">start</span><span class="op" id="6105645">)</span><br>
<span class="lineno"></span><span class="op" id="6105647">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6105650">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6105721">type</span>&nbsp;<span class="ident" id="6105726">UnmarshalError</span>&nbsp;<span class="builtintype" id="6105741">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6105749">func</span>&nbsp;<span class="op" id="6105754">(</span><span class="ident" id="6105755">e</span>&nbsp;<span class="ident" id="6105757">UnmarshalError</span><span class="op" id="6105771">)</span>&nbsp;<span class="ident" id="6105773">Error</span><span class="op" id="6105778">(</span><span class="op" id="6105779">)</span>&nbsp;<span class="builtintype" id="6105781">string</span>&nbsp;<span class="op" id="6105788">{</span>&nbsp;<span class="keyword" id="6105790">return</span>&nbsp;<span class="builtintype" id="6105797">string</span><span class="op" id="6105803">(</span><span class="ident" id="6105804">e</span><span class="op" id="6105805">)</span>&nbsp;<span class="op" id="6105807">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6105810">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6105884">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6105929">//</span><br>
<span class="lineno"></span><span class="comment" id="6105932">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6105977">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6106020">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6106085">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6106108">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6106162">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6106221">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6106281">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6106339">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6106372">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6106432">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6106467">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6106507">type</span>&nbsp;<span class="ident" id="6106512">Unmarshaler</span>&nbsp;<span class="keyword" id="6106524">interface</span>&nbsp;<span class="op" id="6106534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6106537">UnmarshalXML</span><span class="op" id="6106549">(</span><span class="ident" id="6106550">d</span>&nbsp;<span class="op" id="6106552">*</span><span class="ident" id="6106553">Decoder</span><span class="op" id="6106560">,</span>&nbsp;<span class="ident" id="6106562">start</span>&nbsp;<span class="ident" id="6106568">StartElement</span><span class="op" id="6106580">)</span>&nbsp;<span class="builtintype" id="6106582">error</span><br>
<span class="lineno"></span><span class="op" id="6106588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6106591">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6106669">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6106716">//</span><br>
<span class="lineno"></span><span class="comment" id="6106719">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6106771">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6106836">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6106859">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6106919">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6106954">type</span>&nbsp;<span class="ident" id="6106959">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6106975">interface</span>&nbsp;<span class="op" id="6106985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6106988">UnmarshalXMLAttr</span><span class="op" id="6107004">(</span><span class="ident" id="6107005">attr</span>&nbsp;<span class="ident" id="6107010">Attr</span><span class="op" id="6107014">)</span>&nbsp;<span class="builtintype" id="6107016">error</span><br>
<span class="lineno">170</span><span class="op" id="6107022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6107025">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6107113">func</span>&nbsp;<span class="ident" id="6107118">receiverType</span><span class="op" id="6107130">(</span><span class="ident" id="6107131">val</span>&nbsp;<span class="keyword" id="6107135">interface</span><span class="op" id="6107144">{</span><span class="op" id="6107145">}</span><span class="op" id="6107146">)</span>&nbsp;<span class="builtintype" id="6107148">string</span>&nbsp;<span class="op" id="6107155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107158">t</span>&nbsp;<span class="op" id="6107160">:=</span>&nbsp;<span class="ident" id="6107163">reflect</span><span class="op" id="6107170">.</span><span class="ident" id="6107171">TypeOf</span><span class="op" id="6107177">(</span><span class="ident" id="6107178">val</span><span class="op" id="6107181">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107184">if</span>&nbsp;<span class="ident" id="6107187">t</span><span class="op" id="6107188">.</span><span class="ident" id="6107189">Name</span><span class="op" id="6107193">(</span><span class="op" id="6107194">)</span>&nbsp;<span class="op" id="6107196">!=</span>&nbsp;<span class="string" id="6107199">&#34;&#34;</span>&nbsp;<span class="op" id="6107202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107206">return</span>&nbsp;<span class="ident" id="6107213">t</span><span class="op" id="6107214">.</span><span class="ident" id="6107215">String</span><span class="op" id="6107221">(</span><span class="op" id="6107222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6107225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107228">return</span>&nbsp;<span class="string" id="6107235">&#34;(&#34;</span>&nbsp;<span class="op" id="6107239">+</span>&nbsp;<span class="ident" id="6107241">t</span><span class="op" id="6107242">.</span><span class="ident" id="6107243">String</span><span class="op" id="6107249">(</span><span class="op" id="6107250">)</span>&nbsp;<span class="op" id="6107252">+</span>&nbsp;<span class="string" id="6107254">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6107258">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6107261">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6107325">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6107369">func</span>&nbsp;<span class="op" id="6107374">(</span><span class="ident" id="6107375">p</span>&nbsp;<span class="op" id="6107377">*</span><span class="ident" id="6107378">Decoder</span><span class="op" id="6107385">)</span>&nbsp;<span class="ident" id="6107387">unmarshalInterface</span><span class="op" id="6107405">(</span><span class="ident" id="6107406">val</span>&nbsp;<span class="ident" id="6107410">Unmarshaler</span><span class="op" id="6107421">,</span>&nbsp;<span class="ident" id="6107423">start</span>&nbsp;<span class="op" id="6107429">*</span><span class="ident" id="6107430">StartElement</span><span class="op" id="6107442">)</span>&nbsp;<span class="builtintype" id="6107444">error</span>&nbsp;<span class="op" id="6107450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6107453">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107522">p</span><span class="op" id="6107523">.</span><span class="ident" id="6107524">pushEOF</span><span class="op" id="6107531">(</span><span class="op" id="6107532">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107536">p</span><span class="op" id="6107537">.</span><span class="ident" id="6107538">unmarshalDepth</span><span class="op" id="6107552">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107556">err</span>&nbsp;<span class="op" id="6107560">:=</span>&nbsp;<span class="ident" id="6107563">val</span><span class="op" id="6107566">.</span><span class="ident" id="6107567">UnmarshalXML</span><span class="op" id="6107579">(</span><span class="ident" id="6107580">p</span><span class="op" id="6107581">,</span>&nbsp;<span class="op" id="6107583">*</span><span class="ident" id="6107584">start</span><span class="op" id="6107589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107592">p</span><span class="op" id="6107593">.</span><span class="ident" id="6107594">unmarshalDepth</span><span class="op" id="6107608">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107612">if</span>&nbsp;<span class="ident" id="6107615">err</span>&nbsp;<span class="op" id="6107619">!=</span>&nbsp;<span class="ident" id="6107622">nil</span>&nbsp;<span class="op" id="6107626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6107630">p</span><span class="op" id="6107631">.</span><span class="ident" id="6107632">popEOF</span><span class="op" id="6107638">(</span><span class="op" id="6107639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107643">return</span>&nbsp;<span class="ident" id="6107650">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6107655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107659">if</span>&nbsp;<span class="op" id="6107662">!</span><span class="ident" id="6107663">p</span><span class="op" id="6107664">.</span><span class="ident" id="6107665">popEOF</span><span class="op" id="6107671">(</span><span class="op" id="6107672">)</span>&nbsp;<span class="op" id="6107674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107678">return</span>&nbsp;<span class="ident" id="6107685">fmt</span><span class="op" id="6107688">.</span><span class="ident" id="6107689">Errorf</span><span class="op" id="6107695">(</span><span class="string" id="6107696">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6107754">,</span>&nbsp;<span class="ident" id="6107756">receiverType</span><span class="op" id="6107768">(</span><span class="ident" id="6107769">val</span><span class="op" id="6107772">)</span><span class="op" id="6107773">,</span>&nbsp;<span class="ident" id="6107775">start</span><span class="op" id="6107780">.</span><span class="ident" id="6107781">Name</span><span class="op" id="6107785">.</span><span class="ident" id="6107786">Local</span><span class="op" id="6107791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6107794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6107798">return</span>&nbsp;<span class="ident" id="6107805">nil</span><br>
<span class="lineno">200</span><span class="op" id="6107809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6107812">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6107880">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6107944">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6107982">func</span>&nbsp;<span class="op" id="6107987">(</span><span class="ident" id="6107988">p</span>&nbsp;<span class="op" id="6107990">*</span><span class="ident" id="6107991">Decoder</span><span class="op" id="6107998">)</span>&nbsp;<span class="ident" id="6108000">unmarshalTextInterface</span><span class="op" id="6108022">(</span><span class="ident" id="6108023">val</span>&nbsp;<span class="ident" id="6108027">encoding</span><span class="op" id="6108035">.</span><span class="ident" id="6108036">TextUnmarshaler</span><span class="op" id="6108051">,</span>&nbsp;<span class="ident" id="6108053">start</span>&nbsp;<span class="op" id="6108059">*</span><span class="ident" id="6108060">StartElement</span><span class="op" id="6108072">)</span>&nbsp;<span class="builtintype" id="6108074">error</span>&nbsp;<span class="op" id="6108080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108083">var</span>&nbsp;<span class="ident" id="6108087">buf</span>&nbsp;<span class="op" id="6108091">[</span><span class="op" id="6108092">]</span><span class="builtintype" id="6108093">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108099">depth</span>&nbsp;<span class="op" id="6108105">:=</span>&nbsp;<span class="num" id="6108108">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108111">for</span>&nbsp;<span class="ident" id="6108115">depth</span>&nbsp;<span class="op" id="6108121">&gt;</span>&nbsp;<span class="num" id="6108123">0</span>&nbsp;<span class="op" id="6108125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108129">t</span><span class="op" id="6108130">,</span>&nbsp;<span class="ident" id="6108132">err</span>&nbsp;<span class="op" id="6108136">:=</span>&nbsp;<span class="ident" id="6108139">p</span><span class="op" id="6108140">.</span><span class="ident" id="6108141">Token</span><span class="op" id="6108146">(</span><span class="op" id="6108147">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108151">if</span>&nbsp;<span class="ident" id="6108154">err</span>&nbsp;<span class="op" id="6108158">!=</span>&nbsp;<span class="ident" id="6108161">nil</span>&nbsp;<span class="op" id="6108165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108170">return</span>&nbsp;<span class="ident" id="6108177">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108187">switch</span>&nbsp;<span class="ident" id="6108194">t</span>&nbsp;<span class="op" id="6108196">:=</span>&nbsp;<span class="ident" id="6108199">t</span><span class="op" id="6108200">.</span><span class="op" id="6108201">(</span><span class="keyword" id="6108202">type</span><span class="op" id="6108206">)</span>&nbsp;<span class="op" id="6108208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108212">case</span>&nbsp;<span class="ident" id="6108217">CharData</span><span class="op" id="6108225">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108230">if</span>&nbsp;<span class="ident" id="6108233">depth</span>&nbsp;<span class="op" id="6108239">==</span>&nbsp;<span class="num" id="6108242">1</span>&nbsp;<span class="op" id="6108244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108250">buf</span>&nbsp;<span class="op" id="6108254">=</span>&nbsp;<span class="builtinfunc" id="6108256">append</span><span class="op" id="6108262">(</span><span class="ident" id="6108263">buf</span><span class="op" id="6108266">,</span>&nbsp;<span class="ident" id="6108268">t</span><span class="op" id="6108269">...</span><span class="op" id="6108272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108281">case</span>&nbsp;<span class="ident" id="6108286">StartElement</span><span class="op" id="6108298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108303">depth</span><span class="op" id="6108308">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108313">case</span>&nbsp;<span class="ident" id="6108318">EndElement</span><span class="op" id="6108328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108333">depth</span><span class="op" id="6108338">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108349">return</span>&nbsp;<span class="ident" id="6108356">val</span><span class="op" id="6108359">.</span><span class="ident" id="6108360">UnmarshalText</span><span class="op" id="6108373">(</span><span class="ident" id="6108374">buf</span><span class="op" id="6108377">)</span><br>
<span class="lineno">225</span><span class="op" id="6108379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6108382">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6108443">func</span>&nbsp;<span class="op" id="6108448">(</span><span class="ident" id="6108449">p</span>&nbsp;<span class="op" id="6108451">*</span><span class="ident" id="6108452">Decoder</span><span class="op" id="6108459">)</span>&nbsp;<span class="ident" id="6108461">unmarshalAttr</span><span class="op" id="6108474">(</span><span class="ident" id="6108475">val</span>&nbsp;<span class="ident" id="6108479">reflect</span><span class="op" id="6108486">.</span><span class="ident" id="6108487">Value</span><span class="op" id="6108492">,</span>&nbsp;<span class="ident" id="6108494">attr</span>&nbsp;<span class="ident" id="6108499">Attr</span><span class="op" id="6108503">)</span>&nbsp;<span class="builtintype" id="6108505">error</span>&nbsp;<span class="op" id="6108511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108514">if</span>&nbsp;<span class="ident" id="6108517">val</span><span class="op" id="6108520">.</span><span class="ident" id="6108521">Kind</span><span class="op" id="6108525">(</span><span class="op" id="6108526">)</span>&nbsp;<span class="op" id="6108528">==</span>&nbsp;<span class="ident" id="6108531">reflect</span><span class="op" id="6108538">.</span><span class="ident" id="6108539">Ptr</span>&nbsp;<span class="op" id="6108543">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108547">if</span>&nbsp;<span class="ident" id="6108550">val</span><span class="op" id="6108553">.</span><span class="ident" id="6108554">IsNil</span><span class="op" id="6108559">(</span><span class="op" id="6108560">)</span>&nbsp;<span class="op" id="6108562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108567">val</span><span class="op" id="6108570">.</span><span class="ident" id="6108571">Set</span><span class="op" id="6108574">(</span><span class="ident" id="6108575">reflect</span><span class="op" id="6108582">.</span><span class="ident" id="6108583">New</span><span class="op" id="6108586">(</span><span class="ident" id="6108587">val</span><span class="op" id="6108590">.</span><span class="ident" id="6108591">Type</span><span class="op" id="6108595">(</span><span class="op" id="6108596">)</span><span class="op" id="6108597">.</span><span class="ident" id="6108598">Elem</span><span class="op" id="6108602">(</span><span class="op" id="6108603">)</span><span class="op" id="6108604">)</span><span class="op" id="6108605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108613">val</span>&nbsp;<span class="op" id="6108617">=</span>&nbsp;<span class="ident" id="6108619">val</span><span class="op" id="6108622">.</span><span class="ident" id="6108623">Elem</span><span class="op" id="6108627">(</span><span class="op" id="6108628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108631">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108635">if</span>&nbsp;<span class="ident" id="6108638">val</span><span class="op" id="6108641">.</span><span class="ident" id="6108642">CanInterface</span><span class="op" id="6108654">(</span><span class="op" id="6108655">)</span>&nbsp;<span class="op" id="6108657">&amp;&amp;</span>&nbsp;<span class="ident" id="6108660">val</span><span class="op" id="6108663">.</span><span class="ident" id="6108664">Type</span><span class="op" id="6108668">(</span><span class="op" id="6108669">)</span><span class="op" id="6108670">.</span><span class="ident" id="6108671">Implements</span><span class="op" id="6108681">(</span><span class="ident" id="6108682">unmarshalerAttrType</span><span class="op" id="6108701">)</span>&nbsp;<span class="op" id="6108703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6108707">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6108764">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108828">return</span>&nbsp;<span class="ident" id="6108835">val</span><span class="op" id="6108838">.</span><span class="ident" id="6108839">Interface</span><span class="op" id="6108848">(</span><span class="op" id="6108849">)</span><span class="op" id="6108850">.</span><span class="op" id="6108851">(</span><span class="ident" id="6108852">UnmarshalerAttr</span><span class="op" id="6108867">)</span><span class="op" id="6108868">.</span><span class="ident" id="6108869">UnmarshalXMLAttr</span><span class="op" id="6108885">(</span><span class="ident" id="6108886">attr</span><span class="op" id="6108890">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6108893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108896">if</span>&nbsp;<span class="ident" id="6108899">val</span><span class="op" id="6108902">.</span><span class="ident" id="6108903">CanAddr</span><span class="op" id="6108910">(</span><span class="op" id="6108911">)</span>&nbsp;<span class="op" id="6108913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6108917">pv</span>&nbsp;<span class="op" id="6108920">:=</span>&nbsp;<span class="ident" id="6108923">val</span><span class="op" id="6108926">.</span><span class="ident" id="6108927">Addr</span><span class="op" id="6108931">(</span><span class="op" id="6108932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6108936">if</span>&nbsp;<span class="ident" id="6108939">pv</span><span class="op" id="6108941">.</span><span class="ident" id="6108942">CanInterface</span><span class="op" id="6108954">(</span><span class="op" id="6108955">)</span>&nbsp;<span class="op" id="6108957">&amp;&amp;</span>&nbsp;<span class="ident" id="6108960">pv</span><span class="op" id="6108962">.</span><span class="ident" id="6108963">Type</span><span class="op" id="6108967">(</span><span class="op" id="6108968">)</span><span class="op" id="6108969">.</span><span class="ident" id="6108970">Implements</span><span class="op" id="6108980">(</span><span class="ident" id="6108981">unmarshalerAttrType</span><span class="op" id="6109000">)</span>&nbsp;<span class="op" id="6109002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109007">return</span>&nbsp;<span class="ident" id="6109014">pv</span><span class="op" id="6109016">.</span><span class="ident" id="6109017">Interface</span><span class="op" id="6109026">(</span><span class="op" id="6109027">)</span><span class="op" id="6109028">.</span><span class="op" id="6109029">(</span><span class="ident" id="6109030">UnmarshalerAttr</span><span class="op" id="6109045">)</span><span class="op" id="6109046">.</span><span class="ident" id="6109047">UnmarshalXMLAttr</span><span class="op" id="6109063">(</span><span class="ident" id="6109064">attr</span><span class="op" id="6109068">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6109072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6109075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6109079">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109137">if</span>&nbsp;<span class="ident" id="6109140">val</span><span class="op" id="6109143">.</span><span class="ident" id="6109144">CanInterface</span><span class="op" id="6109156">(</span><span class="op" id="6109157">)</span>&nbsp;<span class="op" id="6109159">&amp;&amp;</span>&nbsp;<span class="ident" id="6109162">val</span><span class="op" id="6109165">.</span><span class="ident" id="6109166">Type</span><span class="op" id="6109170">(</span><span class="op" id="6109171">)</span><span class="op" id="6109172">.</span><span class="ident" id="6109173">Implements</span><span class="op" id="6109183">(</span><span class="ident" id="6109184">textUnmarshalerType</span><span class="op" id="6109203">)</span>&nbsp;<span class="op" id="6109205">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6109209">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6109266">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109330">return</span>&nbsp;<span class="ident" id="6109337">val</span><span class="op" id="6109340">.</span><span class="ident" id="6109341">Interface</span><span class="op" id="6109350">(</span><span class="op" id="6109351">)</span><span class="op" id="6109352">.</span><span class="op" id="6109353">(</span><span class="ident" id="6109354">encoding</span><span class="op" id="6109362">.</span><span class="ident" id="6109363">TextUnmarshaler</span><span class="op" id="6109378">)</span><span class="op" id="6109379">.</span><span class="ident" id="6109380">UnmarshalText</span><span class="op" id="6109393">(</span><span class="op" id="6109394">[</span><span class="op" id="6109395">]</span><span class="builtintype" id="6109396">byte</span><span class="op" id="6109400">(</span><span class="ident" id="6109401">attr</span><span class="op" id="6109405">.</span><span class="ident" id="6109406">Value</span><span class="op" id="6109411">)</span><span class="op" id="6109412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6109415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109418">if</span>&nbsp;<span class="ident" id="6109421">val</span><span class="op" id="6109424">.</span><span class="ident" id="6109425">CanAddr</span><span class="op" id="6109432">(</span><span class="op" id="6109433">)</span>&nbsp;<span class="op" id="6109435">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6109439">pv</span>&nbsp;<span class="op" id="6109442">:=</span>&nbsp;<span class="ident" id="6109445">val</span><span class="op" id="6109448">.</span><span class="ident" id="6109449">Addr</span><span class="op" id="6109453">(</span><span class="op" id="6109454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109458">if</span>&nbsp;<span class="ident" id="6109461">pv</span><span class="op" id="6109463">.</span><span class="ident" id="6109464">CanInterface</span><span class="op" id="6109476">(</span><span class="op" id="6109477">)</span>&nbsp;<span class="op" id="6109479">&amp;&amp;</span>&nbsp;<span class="ident" id="6109482">pv</span><span class="op" id="6109484">.</span><span class="ident" id="6109485">Type</span><span class="op" id="6109489">(</span><span class="op" id="6109490">)</span><span class="op" id="6109491">.</span><span class="ident" id="6109492">Implements</span><span class="op" id="6109502">(</span><span class="ident" id="6109503">textUnmarshalerType</span><span class="op" id="6109522">)</span>&nbsp;<span class="op" id="6109524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109529">return</span>&nbsp;<span class="ident" id="6109536">pv</span><span class="op" id="6109538">.</span><span class="ident" id="6109539">Interface</span><span class="op" id="6109548">(</span><span class="op" id="6109549">)</span><span class="op" id="6109550">.</span><span class="op" id="6109551">(</span><span class="ident" id="6109552">encoding</span><span class="op" id="6109560">.</span><span class="ident" id="6109561">TextUnmarshaler</span><span class="op" id="6109576">)</span><span class="op" id="6109577">.</span><span class="ident" id="6109578">UnmarshalText</span><span class="op" id="6109591">(</span><span class="op" id="6109592">[</span><span class="op" id="6109593">]</span><span class="builtintype" id="6109594">byte</span><span class="op" id="6109598">(</span><span class="ident" id="6109599">attr</span><span class="op" id="6109603">.</span><span class="ident" id="6109604">Value</span><span class="op" id="6109609">)</span><span class="op" id="6109610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6109614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6109617">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6109621">copyValue</span><span class="op" id="6109630">(</span><span class="ident" id="6109631">val</span><span class="op" id="6109634">,</span>&nbsp;<span class="op" id="6109636">[</span><span class="op" id="6109637">]</span><span class="builtintype" id="6109638">byte</span><span class="op" id="6109642">(</span><span class="ident" id="6109643">attr</span><span class="op" id="6109647">.</span><span class="ident" id="6109648">Value</span><span class="op" id="6109653">)</span><span class="op" id="6109654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6109657">return</span>&nbsp;<span class="ident" id="6109664">nil</span><br>
<span class="lineno"></span><span class="op" id="6109668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6109671">var</span>&nbsp;<span class="op" id="6109675">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6109678">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6109698">=</span>&nbsp;<span class="ident" id="6109700">reflect</span><span class="op" id="6109707">.</span><span class="ident" id="6109708">TypeOf</span><span class="op" id="6109714">(</span><span class="op" id="6109715">(</span><span class="op" id="6109716">*</span><span class="ident" id="6109717">Unmarshaler</span><span class="op" id="6109728">)</span><span class="op" id="6109729">(</span><span class="ident" id="6109730">nil</span><span class="op" id="6109733">)</span><span class="op" id="6109734">)</span><span class="op" id="6109735">.</span><span class="ident" id="6109736">Elem</span><span class="op" id="6109740">(</span><span class="op" id="6109741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6109744">unmarshalerAttrType</span>&nbsp;<span class="op" id="6109764">=</span>&nbsp;<span class="ident" id="6109766">reflect</span><span class="op" id="6109773">.</span><span class="ident" id="6109774">TypeOf</span><span class="op" id="6109780">(</span><span class="op" id="6109781">(</span><span class="op" id="6109782">*</span><span class="ident" id="6109783">UnmarshalerAttr</span><span class="op" id="6109798">)</span><span class="op" id="6109799">(</span><span class="ident" id="6109800">nil</span><span class="op" id="6109803">)</span><span class="op" id="6109804">)</span><span class="op" id="6109805">.</span><span class="ident" id="6109806">Elem</span><span class="op" id="6109810">(</span><span class="op" id="6109811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6109814">textUnmarshalerType</span>&nbsp;<span class="op" id="6109834">=</span>&nbsp;<span class="ident" id="6109836">reflect</span><span class="op" id="6109843">.</span><span class="ident" id="6109844">TypeOf</span><span class="op" id="6109850">(</span><span class="op" id="6109851">(</span><span class="op" id="6109852">*</span><span class="ident" id="6109853">encoding</span><span class="op" id="6109861">.</span><span class="ident" id="6109862">TextUnmarshaler</span><span class="op" id="6109877">)</span><span class="op" id="6109878">(</span><span class="ident" id="6109879">nil</span><span class="op" id="6109882">)</span><span class="op" id="6109883">)</span><span class="op" id="6109884">.</span><span class="ident" id="6109885">Elem</span><span class="op" id="6109889">(</span><span class="op" id="6109890">)</span><br>
<span class="lineno"></span><span class="op" id="6109892">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6109895">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6109939">func</span>&nbsp;<span class="op" id="6109944">(</span><span class="ident" id="6109945">p</span>&nbsp;<span class="op" id="6109947">*</span><span class="ident" id="6109948">Decoder</span><span class="op" id="6109955">)</span>&nbsp;<span class="ident" id="6109957">unmarshal</span><span class="op" id="6109966">(</span><span class="ident" id="6109967">val</span>&nbsp;<span class="ident" id="6109971">reflect</span><span class="op" id="6109978">.</span><span class="ident" id="6109979">Value</span><span class="op" id="6109984">,</span>&nbsp;<span class="ident" id="6109986">start</span>&nbsp;<span class="op" id="6109992">*</span><span class="ident" id="6109993">StartElement</span><span class="op" id="6110005">)</span>&nbsp;<span class="builtintype" id="6110007">error</span>&nbsp;<span class="op" id="6110013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6110016">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110054">if</span>&nbsp;<span class="ident" id="6110057">start</span>&nbsp;<span class="op" id="6110063">==</span>&nbsp;<span class="ident" id="6110066">nil</span>&nbsp;<span class="op" id="6110070">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110074">for</span>&nbsp;<span class="op" id="6110078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110083">tok</span><span class="op" id="6110086">,</span>&nbsp;<span class="ident" id="6110088">err</span>&nbsp;<span class="op" id="6110092">:=</span>&nbsp;<span class="ident" id="6110095">p</span><span class="op" id="6110096">.</span><span class="ident" id="6110097">Token</span><span class="op" id="6110102">(</span><span class="op" id="6110103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110108">if</span>&nbsp;<span class="ident" id="6110111">err</span>&nbsp;<span class="op" id="6110115">!=</span>&nbsp;<span class="ident" id="6110118">nil</span>&nbsp;<span class="op" id="6110122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110128">return</span>&nbsp;<span class="ident" id="6110135">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110142">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110147">if</span>&nbsp;<span class="ident" id="6110150">t</span><span class="op" id="6110151">,</span>&nbsp;<span class="ident" id="6110153">ok</span>&nbsp;<span class="op" id="6110156">:=</span>&nbsp;<span class="ident" id="6110159">tok</span><span class="op" id="6110162">.</span><span class="op" id="6110163">(</span><span class="ident" id="6110164">StartElement</span><span class="op" id="6110176">)</span><span class="op" id="6110177">;</span>&nbsp;<span class="ident" id="6110179">ok</span>&nbsp;<span class="op" id="6110182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110188">start</span>&nbsp;<span class="op" id="6110194">=</span>&nbsp;<span class="op" id="6110196">&amp;</span><span class="ident" id="6110197">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110203">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110216">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6110223">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6110285">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110311">if</span>&nbsp;<span class="ident" id="6110314">val</span><span class="op" id="6110317">.</span><span class="ident" id="6110318">Kind</span><span class="op" id="6110322">(</span><span class="op" id="6110323">)</span>&nbsp;<span class="op" id="6110325">==</span>&nbsp;<span class="ident" id="6110328">reflect</span><span class="op" id="6110335">.</span><span class="ident" id="6110336">Interface</span>&nbsp;<span class="op" id="6110346">&amp;&amp;</span>&nbsp;<span class="op" id="6110349">!</span><span class="ident" id="6110350">val</span><span class="op" id="6110353">.</span><span class="ident" id="6110354">IsNil</span><span class="op" id="6110359">(</span><span class="op" id="6110360">)</span>&nbsp;<span class="op" id="6110362">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110366">e</span>&nbsp;<span class="op" id="6110368">:=</span>&nbsp;<span class="ident" id="6110371">val</span><span class="op" id="6110374">.</span><span class="ident" id="6110375">Elem</span><span class="op" id="6110379">(</span><span class="op" id="6110380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110384">if</span>&nbsp;<span class="ident" id="6110387">e</span><span class="op" id="6110388">.</span><span class="ident" id="6110389">Kind</span><span class="op" id="6110393">(</span><span class="op" id="6110394">)</span>&nbsp;<span class="op" id="6110396">==</span>&nbsp;<span class="ident" id="6110399">reflect</span><span class="op" id="6110406">.</span><span class="ident" id="6110407">Ptr</span>&nbsp;<span class="op" id="6110411">&amp;&amp;</span>&nbsp;<span class="op" id="6110414">!</span><span class="ident" id="6110415">e</span><span class="op" id="6110416">.</span><span class="ident" id="6110417">IsNil</span><span class="op" id="6110422">(</span><span class="op" id="6110423">)</span>&nbsp;<span class="op" id="6110425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110430">val</span>&nbsp;<span class="op" id="6110434">=</span>&nbsp;<span class="ident" id="6110436">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110443">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110447">if</span>&nbsp;<span class="ident" id="6110450">val</span><span class="op" id="6110453">.</span><span class="ident" id="6110454">Kind</span><span class="op" id="6110458">(</span><span class="op" id="6110459">)</span>&nbsp;<span class="op" id="6110461">==</span>&nbsp;<span class="ident" id="6110464">reflect</span><span class="op" id="6110471">.</span><span class="ident" id="6110472">Ptr</span>&nbsp;<span class="op" id="6110476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110480">if</span>&nbsp;<span class="ident" id="6110483">val</span><span class="op" id="6110486">.</span><span class="ident" id="6110487">IsNil</span><span class="op" id="6110492">(</span><span class="op" id="6110493">)</span>&nbsp;<span class="op" id="6110495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110500">val</span><span class="op" id="6110503">.</span><span class="ident" id="6110504">Set</span><span class="op" id="6110507">(</span><span class="ident" id="6110508">reflect</span><span class="op" id="6110515">.</span><span class="ident" id="6110516">New</span><span class="op" id="6110519">(</span><span class="ident" id="6110520">val</span><span class="op" id="6110523">.</span><span class="ident" id="6110524">Type</span><span class="op" id="6110528">(</span><span class="op" id="6110529">)</span><span class="op" id="6110530">.</span><span class="ident" id="6110531">Elem</span><span class="op" id="6110535">(</span><span class="op" id="6110536">)</span><span class="op" id="6110537">)</span><span class="op" id="6110538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110542">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110546">val</span>&nbsp;<span class="op" id="6110550">=</span>&nbsp;<span class="ident" id="6110552">val</span><span class="op" id="6110555">.</span><span class="ident" id="6110556">Elem</span><span class="op" id="6110560">(</span><span class="op" id="6110561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110568">if</span>&nbsp;<span class="ident" id="6110571">val</span><span class="op" id="6110574">.</span><span class="ident" id="6110575">CanInterface</span><span class="op" id="6110587">(</span><span class="op" id="6110588">)</span>&nbsp;<span class="op" id="6110590">&amp;&amp;</span>&nbsp;<span class="ident" id="6110593">val</span><span class="op" id="6110596">.</span><span class="ident" id="6110597">Type</span><span class="op" id="6110601">(</span><span class="op" id="6110602">)</span><span class="op" id="6110603">.</span><span class="ident" id="6110604">Implements</span><span class="op" id="6110614">(</span><span class="ident" id="6110615">unmarshalerType</span><span class="op" id="6110630">)</span>&nbsp;<span class="op" id="6110632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6110636">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6110693">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110757">return</span>&nbsp;<span class="ident" id="6110764">p</span><span class="op" id="6110765">.</span><span class="ident" id="6110766">unmarshalInterface</span><span class="op" id="6110784">(</span><span class="ident" id="6110785">val</span><span class="op" id="6110788">.</span><span class="ident" id="6110789">Interface</span><span class="op" id="6110798">(</span><span class="op" id="6110799">)</span><span class="op" id="6110800">.</span><span class="op" id="6110801">(</span><span class="ident" id="6110802">Unmarshaler</span><span class="op" id="6110813">)</span><span class="op" id="6110814">,</span>&nbsp;<span class="ident" id="6110816">start</span><span class="op" id="6110821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6110824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110828">if</span>&nbsp;<span class="ident" id="6110831">val</span><span class="op" id="6110834">.</span><span class="ident" id="6110835">CanAddr</span><span class="op" id="6110842">(</span><span class="op" id="6110843">)</span>&nbsp;<span class="op" id="6110845">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6110849">pv</span>&nbsp;<span class="op" id="6110852">:=</span>&nbsp;<span class="ident" id="6110855">val</span><span class="op" id="6110858">.</span><span class="ident" id="6110859">Addr</span><span class="op" id="6110863">(</span><span class="op" id="6110864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110868">if</span>&nbsp;<span class="ident" id="6110871">pv</span><span class="op" id="6110873">.</span><span class="ident" id="6110874">CanInterface</span><span class="op" id="6110886">(</span><span class="op" id="6110887">)</span>&nbsp;<span class="op" id="6110889">&amp;&amp;</span>&nbsp;<span class="ident" id="6110892">pv</span><span class="op" id="6110894">.</span><span class="ident" id="6110895">Type</span><span class="op" id="6110899">(</span><span class="op" id="6110900">)</span><span class="op" id="6110901">.</span><span class="ident" id="6110902">Implements</span><span class="op" id="6110912">(</span><span class="ident" id="6110913">unmarshalerType</span><span class="op" id="6110928">)</span>&nbsp;<span class="op" id="6110930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6110935">return</span>&nbsp;<span class="ident" id="6110942">p</span><span class="op" id="6110943">.</span><span class="ident" id="6110944">unmarshalInterface</span><span class="op" id="6110962">(</span><span class="ident" id="6110963">pv</span><span class="op" id="6110965">.</span><span class="ident" id="6110966">Interface</span><span class="op" id="6110975">(</span><span class="op" id="6110976">)</span><span class="op" id="6110977">.</span><span class="op" id="6110978">(</span><span class="ident" id="6110979">Unmarshaler</span><span class="op" id="6110990">)</span><span class="op" id="6110991">,</span>&nbsp;<span class="ident" id="6110993">start</span><span class="op" id="6110998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111005">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111009">if</span>&nbsp;<span class="ident" id="6111012">val</span><span class="op" id="6111015">.</span><span class="ident" id="6111016">CanInterface</span><span class="op" id="6111028">(</span><span class="op" id="6111029">)</span>&nbsp;<span class="op" id="6111031">&amp;&amp;</span>&nbsp;<span class="ident" id="6111034">val</span><span class="op" id="6111037">.</span><span class="ident" id="6111038">Type</span><span class="op" id="6111042">(</span><span class="op" id="6111043">)</span><span class="op" id="6111044">.</span><span class="ident" id="6111045">Implements</span><span class="op" id="6111055">(</span><span class="ident" id="6111056">textUnmarshalerType</span><span class="op" id="6111075">)</span>&nbsp;<span class="op" id="6111077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111081">return</span>&nbsp;<span class="ident" id="6111088">p</span><span class="op" id="6111089">.</span><span class="ident" id="6111090">unmarshalTextInterface</span><span class="op" id="6111112">(</span><span class="ident" id="6111113">val</span><span class="op" id="6111116">.</span><span class="ident" id="6111117">Interface</span><span class="op" id="6111126">(</span><span class="op" id="6111127">)</span><span class="op" id="6111128">.</span><span class="op" id="6111129">(</span><span class="ident" id="6111130">encoding</span><span class="op" id="6111138">.</span><span class="ident" id="6111139">TextUnmarshaler</span><span class="op" id="6111154">)</span><span class="op" id="6111155">,</span>&nbsp;<span class="ident" id="6111157">start</span><span class="op" id="6111162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111169">if</span>&nbsp;<span class="ident" id="6111172">val</span><span class="op" id="6111175">.</span><span class="ident" id="6111176">CanAddr</span><span class="op" id="6111183">(</span><span class="op" id="6111184">)</span>&nbsp;<span class="op" id="6111186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111190">pv</span>&nbsp;<span class="op" id="6111193">:=</span>&nbsp;<span class="ident" id="6111196">val</span><span class="op" id="6111199">.</span><span class="ident" id="6111200">Addr</span><span class="op" id="6111204">(</span><span class="op" id="6111205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111209">if</span>&nbsp;<span class="ident" id="6111212">pv</span><span class="op" id="6111214">.</span><span class="ident" id="6111215">CanInterface</span><span class="op" id="6111227">(</span><span class="op" id="6111228">)</span>&nbsp;<span class="op" id="6111230">&amp;&amp;</span>&nbsp;<span class="ident" id="6111233">pv</span><span class="op" id="6111235">.</span><span class="ident" id="6111236">Type</span><span class="op" id="6111240">(</span><span class="op" id="6111241">)</span><span class="op" id="6111242">.</span><span class="ident" id="6111243">Implements</span><span class="op" id="6111253">(</span><span class="ident" id="6111254">textUnmarshalerType</span><span class="op" id="6111273">)</span>&nbsp;<span class="op" id="6111275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111280">return</span>&nbsp;<span class="ident" id="6111287">p</span><span class="op" id="6111288">.</span><span class="ident" id="6111289">unmarshalTextInterface</span><span class="op" id="6111311">(</span><span class="ident" id="6111312">pv</span><span class="op" id="6111314">.</span><span class="ident" id="6111315">Interface</span><span class="op" id="6111324">(</span><span class="op" id="6111325">)</span><span class="op" id="6111326">.</span><span class="op" id="6111327">(</span><span class="ident" id="6111328">encoding</span><span class="op" id="6111336">.</span><span class="ident" id="6111337">TextUnmarshaler</span><span class="op" id="6111352">)</span><span class="op" id="6111353">,</span>&nbsp;<span class="ident" id="6111355">start</span><span class="op" id="6111360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111364">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111371">var</span>&nbsp;<span class="op" id="6111375">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111379">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6111392">[</span><span class="op" id="6111393">]</span><span class="builtintype" id="6111394">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111401">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6111414">reflect</span><span class="op" id="6111421">.</span><span class="ident" id="6111422">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111430">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6111443">[</span><span class="op" id="6111444">]</span><span class="builtintype" id="6111445">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111452">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6111465">reflect</span><span class="op" id="6111472">.</span><span class="ident" id="6111473">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111481">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6111494">reflect</span><span class="op" id="6111501">.</span><span class="ident" id="6111502">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111510">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6111523">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111529">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6111542">[</span><span class="op" id="6111543">]</span><span class="builtintype" id="6111544">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111551">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6111564">reflect</span><span class="op" id="6111571">.</span><span class="ident" id="6111572">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111580">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6111593">reflect</span><span class="op" id="6111600">.</span><span class="ident" id="6111601">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111609">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6111622">*</span><span class="ident" id="6111623">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111634">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6111647">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6111654">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111658">switch</span>&nbsp;<span class="ident" id="6111665">v</span>&nbsp;<span class="op" id="6111667">:=</span>&nbsp;<span class="ident" id="6111670">val</span><span class="op" id="6111673">;</span>&nbsp;<span class="ident" id="6111675">v</span><span class="op" id="6111676">.</span><span class="ident" id="6111677">Kind</span><span class="op" id="6111681">(</span><span class="op" id="6111682">)</span>&nbsp;<span class="op" id="6111684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111687">default</span><span class="op" id="6111694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111698">return</span>&nbsp;<span class="ident" id="6111705">errors</span><span class="op" id="6111711">.</span><span class="ident" id="6111712">New</span><span class="op" id="6111715">(</span><span class="string" id="6111716">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6111732">+</span>&nbsp;<span class="ident" id="6111734">v</span><span class="op" id="6111735">.</span><span class="ident" id="6111736">Type</span><span class="op" id="6111740">(</span><span class="op" id="6111741">)</span><span class="op" id="6111742">.</span><span class="ident" id="6111743">String</span><span class="op" id="6111749">(</span><span class="op" id="6111750">)</span><span class="op" id="6111751">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111755">case</span>&nbsp;<span class="ident" id="6111760">reflect</span><span class="op" id="6111767">.</span><span class="ident" id="6111768">Interface</span><span class="op" id="6111777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6111781">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6111838">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6111893">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111931">return</span>&nbsp;<span class="ident" id="6111938">p</span><span class="op" id="6111939">.</span><span class="ident" id="6111940">Skip</span><span class="op" id="6111944">(</span><span class="op" id="6111945">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111949">case</span>&nbsp;<span class="ident" id="6111954">reflect</span><span class="op" id="6111961">.</span><span class="ident" id="6111962">Slice</span><span class="op" id="6111967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6111971">typ</span>&nbsp;<span class="op" id="6111975">:=</span>&nbsp;<span class="ident" id="6111978">v</span><span class="op" id="6111979">.</span><span class="ident" id="6111980">Type</span><span class="op" id="6111984">(</span><span class="op" id="6111985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6111989">if</span>&nbsp;<span class="ident" id="6111992">typ</span><span class="op" id="6111995">.</span><span class="ident" id="6111996">Elem</span><span class="op" id="6112000">(</span><span class="op" id="6112001">)</span><span class="op" id="6112002">.</span><span class="ident" id="6112003">Kind</span><span class="op" id="6112007">(</span><span class="op" id="6112008">)</span>&nbsp;<span class="op" id="6112010">==</span>&nbsp;<span class="ident" id="6112013">reflect</span><span class="op" id="6112020">.</span><span class="ident" id="6112021">Uint8</span>&nbsp;<span class="op" id="6112027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6112032">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112045">saveData</span>&nbsp;<span class="op" id="6112054">=</span>&nbsp;<span class="ident" id="6112056">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6112074">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6112104">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112121">n</span>&nbsp;<span class="op" id="6112123">:=</span>&nbsp;<span class="ident" id="6112126">v</span><span class="op" id="6112127">.</span><span class="ident" id="6112128">Len</span><span class="op" id="6112131">(</span><span class="op" id="6112132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112136">if</span>&nbsp;<span class="ident" id="6112139">n</span>&nbsp;<span class="op" id="6112141">&gt;=</span>&nbsp;<span class="ident" id="6112144">v</span><span class="op" id="6112145">.</span><span class="ident" id="6112146">Cap</span><span class="op" id="6112149">(</span><span class="op" id="6112150">)</span>&nbsp;<span class="op" id="6112152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112157">ncap</span>&nbsp;<span class="op" id="6112162">:=</span>&nbsp;<span class="num" id="6112165">2</span>&nbsp;<span class="op" id="6112167">*</span>&nbsp;<span class="ident" id="6112169">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112174">if</span>&nbsp;<span class="ident" id="6112177">ncap</span>&nbsp;<span class="op" id="6112182">&lt;</span>&nbsp;<span class="num" id="6112184">4</span>&nbsp;<span class="op" id="6112186">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112192">ncap</span>&nbsp;<span class="op" id="6112197">=</span>&nbsp;<span class="num" id="6112199">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6112209">new</span>&nbsp;<span class="op" id="6112213">:=</span>&nbsp;<span class="ident" id="6112216">reflect</span><span class="op" id="6112223">.</span><span class="ident" id="6112224">MakeSlice</span><span class="op" id="6112233">(</span><span class="ident" id="6112234">typ</span><span class="op" id="6112237">,</span>&nbsp;<span class="ident" id="6112239">n</span><span class="op" id="6112240">,</span>&nbsp;<span class="ident" id="6112242">ncap</span><span class="op" id="6112246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112251">reflect</span><span class="op" id="6112258">.</span><span class="ident" id="6112259">Copy</span><span class="op" id="6112263">(</span><span class="builtinfunc" id="6112264">new</span><span class="op" id="6112267">,</span>&nbsp;<span class="ident" id="6112269">v</span><span class="op" id="6112270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112275">v</span><span class="op" id="6112276">.</span><span class="ident" id="6112277">Set</span><span class="op" id="6112280">(</span><span class="builtinfunc" id="6112281">new</span><span class="op" id="6112284">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112292">v</span><span class="op" id="6112293">.</span><span class="ident" id="6112294">SetLen</span><span class="op" id="6112300">(</span><span class="ident" id="6112301">n</span>&nbsp;<span class="op" id="6112303">+</span>&nbsp;<span class="num" id="6112305">1</span><span class="op" id="6112306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6112311">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112350">if</span>&nbsp;<span class="ident" id="6112353">err</span>&nbsp;<span class="op" id="6112357">:=</span>&nbsp;<span class="ident" id="6112360">p</span><span class="op" id="6112361">.</span><span class="ident" id="6112362">unmarshal</span><span class="op" id="6112371">(</span><span class="ident" id="6112372">v</span><span class="op" id="6112373">.</span><span class="ident" id="6112374">Index</span><span class="op" id="6112379">(</span><span class="ident" id="6112380">n</span><span class="op" id="6112381">)</span><span class="op" id="6112382">,</span>&nbsp;<span class="ident" id="6112384">start</span><span class="op" id="6112389">)</span><span class="op" id="6112390">;</span>&nbsp;<span class="ident" id="6112392">err</span>&nbsp;<span class="op" id="6112396">!=</span>&nbsp;<span class="ident" id="6112399">nil</span>&nbsp;<span class="op" id="6112403">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112408">v</span><span class="op" id="6112409">.</span><span class="ident" id="6112410">SetLen</span><span class="op" id="6112416">(</span><span class="ident" id="6112417">n</span><span class="op" id="6112418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112423">return</span>&nbsp;<span class="ident" id="6112430">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112440">return</span>&nbsp;<span class="ident" id="6112447">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112453">case</span>&nbsp;<span class="ident" id="6112458">reflect</span><span class="op" id="6112465">.</span><span class="ident" id="6112466">Bool</span><span class="op" id="6112470">,</span>&nbsp;<span class="ident" id="6112472">reflect</span><span class="op" id="6112479">.</span><span class="ident" id="6112480">Float32</span><span class="op" id="6112487">,</span>&nbsp;<span class="ident" id="6112489">reflect</span><span class="op" id="6112496">.</span><span class="ident" id="6112497">Float64</span><span class="op" id="6112504">,</span>&nbsp;<span class="ident" id="6112506">reflect</span><span class="op" id="6112513">.</span><span class="ident" id="6112514">Int</span><span class="op" id="6112517">,</span>&nbsp;<span class="ident" id="6112519">reflect</span><span class="op" id="6112526">.</span><span class="ident" id="6112527">Int8</span><span class="op" id="6112531">,</span>&nbsp;<span class="ident" id="6112533">reflect</span><span class="op" id="6112540">.</span><span class="ident" id="6112541">Int16</span><span class="op" id="6112546">,</span>&nbsp;<span class="ident" id="6112548">reflect</span><span class="op" id="6112555">.</span><span class="ident" id="6112556">Int32</span><span class="op" id="6112561">,</span>&nbsp;<span class="ident" id="6112563">reflect</span><span class="op" id="6112570">.</span><span class="ident" id="6112571">Int64</span><span class="op" id="6112576">,</span>&nbsp;<span class="ident" id="6112578">reflect</span><span class="op" id="6112585">.</span><span class="ident" id="6112586">Uint</span><span class="op" id="6112590">,</span>&nbsp;<span class="ident" id="6112592">reflect</span><span class="op" id="6112599">.</span><span class="ident" id="6112600">Uint8</span><span class="op" id="6112605">,</span>&nbsp;<span class="ident" id="6112607">reflect</span><span class="op" id="6112614">.</span><span class="ident" id="6112615">Uint16</span><span class="op" id="6112621">,</span>&nbsp;<span class="ident" id="6112623">reflect</span><span class="op" id="6112630">.</span><span class="ident" id="6112631">Uint32</span><span class="op" id="6112637">,</span>&nbsp;<span class="ident" id="6112639">reflect</span><span class="op" id="6112646">.</span><span class="ident" id="6112647">Uint64</span><span class="op" id="6112653">,</span>&nbsp;<span class="ident" id="6112655">reflect</span><span class="op" id="6112662">.</span><span class="ident" id="6112663">Uintptr</span><span class="op" id="6112670">,</span>&nbsp;<span class="ident" id="6112672">reflect</span><span class="op" id="6112679">.</span><span class="ident" id="6112680">String</span><span class="op" id="6112686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112690">saveData</span>&nbsp;<span class="op" id="6112699">=</span>&nbsp;<span class="ident" id="6112701">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112705">case</span>&nbsp;<span class="ident" id="6112710">reflect</span><span class="op" id="6112717">.</span><span class="ident" id="6112718">Struct</span><span class="op" id="6112724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112728">typ</span>&nbsp;<span class="op" id="6112732">:=</span>&nbsp;<span class="ident" id="6112735">v</span><span class="op" id="6112736">.</span><span class="ident" id="6112737">Type</span><span class="op" id="6112741">(</span><span class="op" id="6112742">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112746">if</span>&nbsp;<span class="ident" id="6112749">typ</span>&nbsp;<span class="op" id="6112753">==</span>&nbsp;<span class="ident" id="6112756">nameType</span>&nbsp;<span class="op" id="6112765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112770">v</span><span class="op" id="6112771">.</span><span class="ident" id="6112772">Set</span><span class="op" id="6112775">(</span><span class="ident" id="6112776">reflect</span><span class="op" id="6112783">.</span><span class="ident" id="6112784">ValueOf</span><span class="op" id="6112791">(</span><span class="ident" id="6112792">start</span><span class="op" id="6112797">.</span><span class="ident" id="6112798">Name</span><span class="op" id="6112802">)</span><span class="op" id="6112803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112808">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112821">sv</span>&nbsp;<span class="op" id="6112824">=</span>&nbsp;<span class="ident" id="6112826">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112830">tinfo</span><span class="op" id="6112835">,</span>&nbsp;<span class="ident" id="6112837">err</span>&nbsp;<span class="op" id="6112841">=</span>&nbsp;<span class="ident" id="6112843">getTypeInfo</span><span class="op" id="6112854">(</span><span class="ident" id="6112855">typ</span><span class="op" id="6112858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112862">if</span>&nbsp;<span class="ident" id="6112865">err</span>&nbsp;<span class="op" id="6112869">!=</span>&nbsp;<span class="ident" id="6112872">nil</span>&nbsp;<span class="op" id="6112876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112881">return</span>&nbsp;<span class="ident" id="6112888">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6112894">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6112899">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112938">if</span>&nbsp;<span class="ident" id="6112941">tinfo</span><span class="op" id="6112946">.</span><span class="ident" id="6112947">xmlname</span>&nbsp;<span class="op" id="6112955">!=</span>&nbsp;<span class="ident" id="6112958">nil</span>&nbsp;<span class="op" id="6112962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6112967">finfo</span>&nbsp;<span class="op" id="6112973">:=</span>&nbsp;<span class="ident" id="6112976">tinfo</span><span class="op" id="6112981">.</span><span class="ident" id="6112982">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6112993">if</span>&nbsp;<span class="ident" id="6112996">finfo</span><span class="op" id="6113001">.</span><span class="ident" id="6113002">name</span>&nbsp;<span class="op" id="6113007">!=</span>&nbsp;<span class="string" id="6113010">&#34;&#34;</span>&nbsp;<span class="op" id="6113013">&amp;&amp;</span>&nbsp;<span class="ident" id="6113016">finfo</span><span class="op" id="6113021">.</span><span class="ident" id="6113022">name</span>&nbsp;<span class="op" id="6113027">!=</span>&nbsp;<span class="ident" id="6113030">start</span><span class="op" id="6113035">.</span><span class="ident" id="6113036">Name</span><span class="op" id="6113040">.</span><span class="ident" id="6113041">Local</span>&nbsp;<span class="op" id="6113047">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113053">return</span>&nbsp;<span class="ident" id="6113060">UnmarshalError</span><span class="op" id="6113074">(</span><span class="string" id="6113075">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6113101">+</span>&nbsp;<span class="ident" id="6113103">finfo</span><span class="op" id="6113108">.</span><span class="ident" id="6113109">name</span>&nbsp;<span class="op" id="6113114">+</span>&nbsp;<span class="string" id="6113116">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6113131">+</span>&nbsp;<span class="ident" id="6113133">start</span><span class="op" id="6113138">.</span><span class="ident" id="6113139">Name</span><span class="op" id="6113143">.</span><span class="ident" id="6113144">Local</span>&nbsp;<span class="op" id="6113150">+</span>&nbsp;<span class="string" id="6113152">&#34;&gt;&#34;</span><span class="op" id="6113155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113165">if</span>&nbsp;<span class="ident" id="6113168">finfo</span><span class="op" id="6113173">.</span><span class="ident" id="6113174">xmlns</span>&nbsp;<span class="op" id="6113180">!=</span>&nbsp;<span class="string" id="6113183">&#34;&#34;</span>&nbsp;<span class="op" id="6113186">&amp;&amp;</span>&nbsp;<span class="ident" id="6113189">finfo</span><span class="op" id="6113194">.</span><span class="ident" id="6113195">xmlns</span>&nbsp;<span class="op" id="6113201">!=</span>&nbsp;<span class="ident" id="6113204">start</span><span class="op" id="6113209">.</span><span class="ident" id="6113210">Name</span><span class="op" id="6113214">.</span><span class="ident" id="6113215">Space</span>&nbsp;<span class="op" id="6113221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113227">e</span>&nbsp;<span class="op" id="6113229">:=</span>&nbsp;<span class="string" id="6113232">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6113253">+</span>&nbsp;<span class="ident" id="6113255">finfo</span><span class="op" id="6113260">.</span><span class="ident" id="6113261">name</span>&nbsp;<span class="op" id="6113266">+</span>&nbsp;<span class="string" id="6113268">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6113287">+</span>&nbsp;<span class="ident" id="6113289">finfo</span><span class="op" id="6113294">.</span><span class="ident" id="6113295">xmlns</span>&nbsp;<span class="op" id="6113301">+</span>&nbsp;<span class="string" id="6113303">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113320">if</span>&nbsp;<span class="ident" id="6113323">start</span><span class="op" id="6113328">.</span><span class="ident" id="6113329">Name</span><span class="op" id="6113333">.</span><span class="ident" id="6113334">Space</span>&nbsp;<span class="op" id="6113340">==</span>&nbsp;<span class="string" id="6113343">&#34;&#34;</span>&nbsp;<span class="op" id="6113346">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113353">e</span>&nbsp;<span class="op" id="6113355">+=</span>&nbsp;<span class="string" id="6113358">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113378">}</span>&nbsp;<span class="keyword" id="6113380">else</span>&nbsp;<span class="op" id="6113385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113392">e</span>&nbsp;<span class="op" id="6113394">+=</span>&nbsp;<span class="ident" id="6113397">start</span><span class="op" id="6113402">.</span><span class="ident" id="6113403">Name</span><span class="op" id="6113407">.</span><span class="ident" id="6113408">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113424">return</span>&nbsp;<span class="ident" id="6113431">UnmarshalError</span><span class="op" id="6113445">(</span><span class="ident" id="6113446">e</span><span class="op" id="6113447">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113457">fv</span>&nbsp;<span class="op" id="6113460">:=</span>&nbsp;<span class="ident" id="6113463">finfo</span><span class="op" id="6113468">.</span><span class="ident" id="6113469">value</span><span class="op" id="6113474">(</span><span class="ident" id="6113475">sv</span><span class="op" id="6113477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113482">if</span>&nbsp;<span class="ident" id="6113485">_</span><span class="op" id="6113486">,</span>&nbsp;<span class="ident" id="6113488">ok</span>&nbsp;<span class="op" id="6113491">:=</span>&nbsp;<span class="ident" id="6113494">fv</span><span class="op" id="6113496">.</span><span class="ident" id="6113497">Interface</span><span class="op" id="6113506">(</span><span class="op" id="6113507">)</span><span class="op" id="6113508">.</span><span class="op" id="6113509">(</span><span class="ident" id="6113510">Name</span><span class="op" id="6113514">)</span><span class="op" id="6113515">;</span>&nbsp;<span class="ident" id="6113517">ok</span>&nbsp;<span class="op" id="6113520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113526">fv</span><span class="op" id="6113528">.</span><span class="ident" id="6113529">Set</span><span class="op" id="6113532">(</span><span class="ident" id="6113533">reflect</span><span class="op" id="6113540">.</span><span class="ident" id="6113541">ValueOf</span><span class="op" id="6113548">(</span><span class="ident" id="6113549">start</span><span class="op" id="6113554">.</span><span class="ident" id="6113555">Name</span><span class="op" id="6113559">)</span><span class="op" id="6113560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113565">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6113569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6113574">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6113598">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113671">for</span>&nbsp;<span class="ident" id="6113675">i</span>&nbsp;<span class="op" id="6113677">:=</span>&nbsp;<span class="keyword" id="6113680">range</span>&nbsp;<span class="ident" id="6113686">tinfo</span><span class="op" id="6113691">.</span><span class="ident" id="6113692">fields</span>&nbsp;<span class="op" id="6113699">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113704">finfo</span>&nbsp;<span class="op" id="6113710">:=</span>&nbsp;<span class="op" id="6113713">&amp;</span><span class="ident" id="6113714">tinfo</span><span class="op" id="6113719">.</span><span class="ident" id="6113720">fields</span><span class="op" id="6113726">[</span><span class="ident" id="6113727">i</span><span class="op" id="6113728">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113733">switch</span>&nbsp;<span class="ident" id="6113740">finfo</span><span class="op" id="6113745">.</span><span class="ident" id="6113746">flags</span>&nbsp;<span class="op" id="6113752">&amp;</span>&nbsp;<span class="ident" id="6113754">fMode</span>&nbsp;<span class="op" id="6113760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113765">case</span>&nbsp;<span class="ident" id="6113770">fAttr</span><span class="op" id="6113775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6113781">strv</span>&nbsp;<span class="op" id="6113786">:=</span>&nbsp;<span class="ident" id="6113789">finfo</span><span class="op" id="6113794">.</span><span class="ident" id="6113795">value</span><span class="op" id="6113800">(</span><span class="ident" id="6113801">sv</span><span class="op" id="6113803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6113809">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113836">for</span>&nbsp;<span class="ident" id="6113840">_</span><span class="op" id="6113841">,</span>&nbsp;<span class="ident" id="6113843">a</span>&nbsp;<span class="op" id="6113845">:=</span>&nbsp;<span class="keyword" id="6113848">range</span>&nbsp;<span class="ident" id="6113854">start</span><span class="op" id="6113859">.</span><span class="ident" id="6113860">Attr</span>&nbsp;<span class="op" id="6113865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113872">if</span>&nbsp;<span class="ident" id="6113875">a</span><span class="op" id="6113876">.</span><span class="ident" id="6113877">Name</span><span class="op" id="6113881">.</span><span class="ident" id="6113882">Local</span>&nbsp;<span class="op" id="6113888">==</span>&nbsp;<span class="ident" id="6113891">finfo</span><span class="op" id="6113896">.</span><span class="ident" id="6113897">name</span>&nbsp;<span class="op" id="6113902">&amp;&amp;</span>&nbsp;<span class="op" id="6113905">(</span><span class="ident" id="6113906">finfo</span><span class="op" id="6113911">.</span><span class="ident" id="6113912">xmlns</span>&nbsp;<span class="op" id="6113918">==</span>&nbsp;<span class="string" id="6113921">&#34;&#34;</span>&nbsp;<span class="op" id="6113924">||</span>&nbsp;<span class="ident" id="6113927">finfo</span><span class="op" id="6113932">.</span><span class="ident" id="6113933">xmlns</span>&nbsp;<span class="op" id="6113939">==</span>&nbsp;<span class="ident" id="6113942">a</span><span class="op" id="6113943">.</span><span class="ident" id="6113944">Name</span><span class="op" id="6113948">.</span><span class="ident" id="6113949">Space</span><span class="op" id="6113954">)</span>&nbsp;<span class="op" id="6113956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6113964">if</span>&nbsp;<span class="ident" id="6113967">err</span>&nbsp;<span class="op" id="6113971">:=</span>&nbsp;<span class="ident" id="6113974">p</span><span class="op" id="6113975">.</span><span class="ident" id="6113976">unmarshalAttr</span><span class="op" id="6113989">(</span><span class="ident" id="6113990">strv</span><span class="op" id="6113994">,</span>&nbsp;<span class="ident" id="6113996">a</span><span class="op" id="6113997">)</span><span class="op" id="6113998">;</span>&nbsp;<span class="ident" id="6114000">err</span>&nbsp;<span class="op" id="6114004">!=</span>&nbsp;<span class="ident" id="6114007">nil</span>&nbsp;<span class="op" id="6114011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114020">return</span>&nbsp;<span class="ident" id="6114027">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114037">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114045">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114068">case</span>&nbsp;<span class="ident" id="6114073">fCharData</span><span class="op" id="6114082">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114088">if</span>&nbsp;<span class="op" id="6114091">!</span><span class="ident" id="6114092">saveData</span><span class="op" id="6114100">.</span><span class="ident" id="6114101">IsValid</span><span class="op" id="6114108">(</span><span class="op" id="6114109">)</span>&nbsp;<span class="op" id="6114111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114118">saveData</span>&nbsp;<span class="op" id="6114127">=</span>&nbsp;<span class="ident" id="6114129">finfo</span><span class="op" id="6114134">.</span><span class="ident" id="6114135">value</span><span class="op" id="6114140">(</span><span class="ident" id="6114141">sv</span><span class="op" id="6114143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114155">case</span>&nbsp;<span class="ident" id="6114160">fComment</span><span class="op" id="6114168">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114174">if</span>&nbsp;<span class="op" id="6114177">!</span><span class="ident" id="6114178">saveComment</span><span class="op" id="6114189">.</span><span class="ident" id="6114190">IsValid</span><span class="op" id="6114197">(</span><span class="op" id="6114198">)</span>&nbsp;<span class="op" id="6114200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114207">saveComment</span>&nbsp;<span class="op" id="6114219">=</span>&nbsp;<span class="ident" id="6114221">finfo</span><span class="op" id="6114226">.</span><span class="ident" id="6114227">value</span><span class="op" id="6114232">(</span><span class="ident" id="6114233">sv</span><span class="op" id="6114235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114247">case</span>&nbsp;<span class="ident" id="6114252">fAny</span><span class="op" id="6114256">,</span>&nbsp;<span class="ident" id="6114258">fAny</span>&nbsp;<span class="op" id="6114263">|</span>&nbsp;<span class="ident" id="6114265">fElement</span><span class="op" id="6114273">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114279">if</span>&nbsp;<span class="op" id="6114282">!</span><span class="ident" id="6114283">saveAny</span><span class="op" id="6114290">.</span><span class="ident" id="6114291">IsValid</span><span class="op" id="6114298">(</span><span class="op" id="6114299">)</span>&nbsp;<span class="op" id="6114301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114308">saveAny</span>&nbsp;<span class="op" id="6114316">=</span>&nbsp;<span class="ident" id="6114318">finfo</span><span class="op" id="6114323">.</span><span class="ident" id="6114324">value</span><span class="op" id="6114329">(</span><span class="ident" id="6114330">sv</span><span class="op" id="6114332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114344">case</span>&nbsp;<span class="ident" id="6114349">fInnerXml</span><span class="op" id="6114358">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114364">if</span>&nbsp;<span class="op" id="6114367">!</span><span class="ident" id="6114368">saveXML</span><span class="op" id="6114375">.</span><span class="ident" id="6114376">IsValid</span><span class="op" id="6114383">(</span><span class="op" id="6114384">)</span>&nbsp;<span class="op" id="6114386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114393">saveXML</span>&nbsp;<span class="op" id="6114401">=</span>&nbsp;<span class="ident" id="6114403">finfo</span><span class="op" id="6114408">.</span><span class="ident" id="6114409">value</span><span class="op" id="6114414">(</span><span class="ident" id="6114415">sv</span><span class="op" id="6114417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114424">if</span>&nbsp;<span class="ident" id="6114427">p</span><span class="op" id="6114428">.</span><span class="ident" id="6114429">saved</span>&nbsp;<span class="op" id="6114435">==</span>&nbsp;<span class="ident" id="6114438">nil</span>&nbsp;<span class="op" id="6114442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114450">saveXMLIndex</span>&nbsp;<span class="op" id="6114463">=</span>&nbsp;<span class="num" id="6114465">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114473">p</span><span class="op" id="6114474">.</span><span class="ident" id="6114475">saved</span>&nbsp;<span class="op" id="6114481">=</span>&nbsp;<span class="builtinfunc" id="6114483">new</span><span class="op" id="6114486">(</span><span class="ident" id="6114487">bytes</span><span class="op" id="6114492">.</span><span class="ident" id="6114493">Buffer</span><span class="op" id="6114499">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114506">}</span>&nbsp;<span class="keyword" id="6114508">else</span>&nbsp;<span class="op" id="6114513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114521">saveXMLIndex</span>&nbsp;<span class="op" id="6114534">=</span>&nbsp;<span class="ident" id="6114536">p</span><span class="op" id="6114537">.</span><span class="ident" id="6114538">savedOffset</span><span class="op" id="6114549">(</span><span class="op" id="6114550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114568">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6114579">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6114601">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6114640">Loop</span><span class="op" id="6114644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114647">for</span>&nbsp;<span class="op" id="6114651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114655">var</span>&nbsp;<span class="ident" id="6114659">savedOffset</span>&nbsp;<span class="builtintype" id="6114671">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114677">if</span>&nbsp;<span class="ident" id="6114680">saveXML</span><span class="op" id="6114687">.</span><span class="ident" id="6114688">IsValid</span><span class="op" id="6114695">(</span><span class="op" id="6114696">)</span>&nbsp;<span class="op" id="6114698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114703">savedOffset</span>&nbsp;<span class="op" id="6114715">=</span>&nbsp;<span class="ident" id="6114717">p</span><span class="op" id="6114718">.</span><span class="ident" id="6114719">savedOffset</span><span class="op" id="6114730">(</span><span class="op" id="6114731">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114739">tok</span><span class="op" id="6114742">,</span>&nbsp;<span class="ident" id="6114744">err</span>&nbsp;<span class="op" id="6114748">:=</span>&nbsp;<span class="ident" id="6114751">p</span><span class="op" id="6114752">.</span><span class="ident" id="6114753">Token</span><span class="op" id="6114758">(</span><span class="op" id="6114759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114763">if</span>&nbsp;<span class="ident" id="6114766">err</span>&nbsp;<span class="op" id="6114770">!=</span>&nbsp;<span class="ident" id="6114773">nil</span>&nbsp;<span class="op" id="6114777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114782">return</span>&nbsp;<span class="ident" id="6114789">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114795">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114799">switch</span>&nbsp;<span class="ident" id="6114806">t</span>&nbsp;<span class="op" id="6114808">:=</span>&nbsp;<span class="ident" id="6114811">tok</span><span class="op" id="6114814">.</span><span class="op" id="6114815">(</span><span class="keyword" id="6114816">type</span><span class="op" id="6114820">)</span>&nbsp;<span class="op" id="6114822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114826">case</span>&nbsp;<span class="ident" id="6114831">StartElement</span><span class="op" id="6114843">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114848">consumed</span>&nbsp;<span class="op" id="6114857">:=</span>&nbsp;<span class="builtintype" id="6114860">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114869">if</span>&nbsp;<span class="ident" id="6114872">sv</span><span class="op" id="6114874">.</span><span class="ident" id="6114875">IsValid</span><span class="op" id="6114882">(</span><span class="op" id="6114883">)</span>&nbsp;<span class="op" id="6114885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6114891">consumed</span><span class="op" id="6114899">,</span>&nbsp;<span class="ident" id="6114901">err</span>&nbsp;<span class="op" id="6114905">=</span>&nbsp;<span class="ident" id="6114907">p</span><span class="op" id="6114908">.</span><span class="ident" id="6114909">unmarshalPath</span><span class="op" id="6114922">(</span><span class="ident" id="6114923">tinfo</span><span class="op" id="6114928">,</span>&nbsp;<span class="ident" id="6114930">sv</span><span class="op" id="6114932">,</span>&nbsp;<span class="ident" id="6114934">nil</span><span class="op" id="6114937">,</span>&nbsp;<span class="op" id="6114939">&amp;</span><span class="ident" id="6114940">t</span><span class="op" id="6114941">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114947">if</span>&nbsp;<span class="ident" id="6114950">err</span>&nbsp;<span class="op" id="6114954">!=</span>&nbsp;<span class="ident" id="6114957">nil</span>&nbsp;<span class="op" id="6114961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114968">return</span>&nbsp;<span class="ident" id="6114975">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6114983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6114989">if</span>&nbsp;<span class="op" id="6114992">!</span><span class="ident" id="6114993">consumed</span>&nbsp;<span class="op" id="6115002">&amp;&amp;</span>&nbsp;<span class="ident" id="6115005">saveAny</span><span class="op" id="6115012">.</span><span class="ident" id="6115013">IsValid</span><span class="op" id="6115020">(</span><span class="op" id="6115021">)</span>&nbsp;<span class="op" id="6115023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115030">consumed</span>&nbsp;<span class="op" id="6115039">=</span>&nbsp;<span class="builtintype" id="6115041">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115051">if</span>&nbsp;<span class="ident" id="6115054">err</span>&nbsp;<span class="op" id="6115058">:=</span>&nbsp;<span class="ident" id="6115061">p</span><span class="op" id="6115062">.</span><span class="ident" id="6115063">unmarshal</span><span class="op" id="6115072">(</span><span class="ident" id="6115073">saveAny</span><span class="op" id="6115080">,</span>&nbsp;<span class="op" id="6115082">&amp;</span><span class="ident" id="6115083">t</span><span class="op" id="6115084">)</span><span class="op" id="6115085">;</span>&nbsp;<span class="ident" id="6115087">err</span>&nbsp;<span class="op" id="6115091">!=</span>&nbsp;<span class="ident" id="6115094">nil</span>&nbsp;<span class="op" id="6115098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115106">return</span>&nbsp;<span class="ident" id="6115113">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115133">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115138">if</span>&nbsp;<span class="op" id="6115141">!</span><span class="ident" id="6115142">consumed</span>&nbsp;<span class="op" id="6115151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115157">if</span>&nbsp;<span class="ident" id="6115160">err</span>&nbsp;<span class="op" id="6115164">:=</span>&nbsp;<span class="ident" id="6115167">p</span><span class="op" id="6115168">.</span><span class="ident" id="6115169">Skip</span><span class="op" id="6115173">(</span><span class="op" id="6115174">)</span><span class="op" id="6115175">;</span>&nbsp;<span class="ident" id="6115177">err</span>&nbsp;<span class="op" id="6115181">!=</span>&nbsp;<span class="ident" id="6115184">nil</span>&nbsp;<span class="op" id="6115188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115195">return</span>&nbsp;<span class="ident" id="6115202">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115215">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115220">case</span>&nbsp;<span class="ident" id="6115225">EndElement</span><span class="op" id="6115235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115240">if</span>&nbsp;<span class="ident" id="6115243">saveXML</span><span class="op" id="6115250">.</span><span class="ident" id="6115251">IsValid</span><span class="op" id="6115258">(</span><span class="op" id="6115259">)</span>&nbsp;<span class="op" id="6115261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115267">saveXMLData</span>&nbsp;<span class="op" id="6115279">=</span>&nbsp;<span class="ident" id="6115281">p</span><span class="op" id="6115282">.</span><span class="ident" id="6115283">saved</span><span class="op" id="6115288">.</span><span class="ident" id="6115289">Bytes</span><span class="op" id="6115294">(</span><span class="op" id="6115295">)</span><span class="op" id="6115296">[</span><span class="ident" id="6115297">saveXMLIndex</span><span class="op" id="6115309">:</span><span class="ident" id="6115310">savedOffset</span><span class="op" id="6115321">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115327">if</span>&nbsp;<span class="ident" id="6115330">saveXMLIndex</span>&nbsp;<span class="op" id="6115343">==</span>&nbsp;<span class="num" id="6115346">0</span>&nbsp;<span class="op" id="6115348">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115355">p</span><span class="op" id="6115356">.</span><span class="ident" id="6115357">saved</span>&nbsp;<span class="op" id="6115363">=</span>&nbsp;<span class="ident" id="6115365">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115383">break</span>&nbsp;<span class="ident" id="6115389">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115397">case</span>&nbsp;<span class="ident" id="6115402">CharData</span><span class="op" id="6115410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115415">if</span>&nbsp;<span class="ident" id="6115418">saveData</span><span class="op" id="6115426">.</span><span class="ident" id="6115427">IsValid</span><span class="op" id="6115434">(</span><span class="op" id="6115435">)</span>&nbsp;<span class="op" id="6115437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115443">data</span>&nbsp;<span class="op" id="6115448">=</span>&nbsp;<span class="builtinfunc" id="6115450">append</span><span class="op" id="6115456">(</span><span class="ident" id="6115457">data</span><span class="op" id="6115461">,</span>&nbsp;<span class="ident" id="6115463">t</span><span class="op" id="6115464">...</span><span class="op" id="6115467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115477">case</span>&nbsp;<span class="ident" id="6115482">Comment</span><span class="op" id="6115489">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115494">if</span>&nbsp;<span class="ident" id="6115497">saveComment</span><span class="op" id="6115508">.</span><span class="ident" id="6115509">IsValid</span><span class="op" id="6115516">(</span><span class="op" id="6115517">)</span>&nbsp;<span class="op" id="6115519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115525">comment</span>&nbsp;<span class="op" id="6115533">=</span>&nbsp;<span class="builtinfunc" id="6115535">append</span><span class="op" id="6115541">(</span><span class="ident" id="6115542">comment</span><span class="op" id="6115549">,</span>&nbsp;<span class="ident" id="6115551">t</span><span class="op" id="6115552">...</span><span class="op" id="6115555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115564">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115571">if</span>&nbsp;<span class="ident" id="6115574">saveData</span><span class="op" id="6115582">.</span><span class="ident" id="6115583">IsValid</span><span class="op" id="6115590">(</span><span class="op" id="6115591">)</span>&nbsp;<span class="op" id="6115593">&amp;&amp;</span>&nbsp;<span class="ident" id="6115596">saveData</span><span class="op" id="6115604">.</span><span class="ident" id="6115605">CanInterface</span><span class="op" id="6115617">(</span><span class="op" id="6115618">)</span>&nbsp;<span class="op" id="6115620">&amp;&amp;</span>&nbsp;<span class="ident" id="6115623">saveData</span><span class="op" id="6115631">.</span><span class="ident" id="6115632">Type</span><span class="op" id="6115636">(</span><span class="op" id="6115637">)</span><span class="op" id="6115638">.</span><span class="ident" id="6115639">Implements</span><span class="op" id="6115649">(</span><span class="ident" id="6115650">textUnmarshalerType</span><span class="op" id="6115669">)</span>&nbsp;<span class="op" id="6115671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115675">if</span>&nbsp;<span class="ident" id="6115678">err</span>&nbsp;<span class="op" id="6115682">:=</span>&nbsp;<span class="ident" id="6115685">saveData</span><span class="op" id="6115693">.</span><span class="ident" id="6115694">Interface</span><span class="op" id="6115703">(</span><span class="op" id="6115704">)</span><span class="op" id="6115705">.</span><span class="op" id="6115706">(</span><span class="ident" id="6115707">encoding</span><span class="op" id="6115715">.</span><span class="ident" id="6115716">TextUnmarshaler</span><span class="op" id="6115731">)</span><span class="op" id="6115732">.</span><span class="ident" id="6115733">UnmarshalText</span><span class="op" id="6115746">(</span><span class="ident" id="6115747">data</span><span class="op" id="6115751">)</span><span class="op" id="6115752">;</span>&nbsp;<span class="ident" id="6115754">err</span>&nbsp;<span class="op" id="6115758">!=</span>&nbsp;<span class="ident" id="6115761">nil</span>&nbsp;<span class="op" id="6115765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115770">return</span>&nbsp;<span class="ident" id="6115777">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115787">saveData</span>&nbsp;<span class="op" id="6115796">=</span>&nbsp;<span class="ident" id="6115798">reflect</span><span class="op" id="6115805">.</span><span class="ident" id="6115806">Value</span><span class="op" id="6115811">{</span><span class="op" id="6115812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6115815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115819">if</span>&nbsp;<span class="ident" id="6115822">saveData</span><span class="op" id="6115830">.</span><span class="ident" id="6115831">IsValid</span><span class="op" id="6115838">(</span><span class="op" id="6115839">)</span>&nbsp;<span class="op" id="6115841">&amp;&amp;</span>&nbsp;<span class="ident" id="6115844">saveData</span><span class="op" id="6115852">.</span><span class="ident" id="6115853">CanAddr</span><span class="op" id="6115860">(</span><span class="op" id="6115861">)</span>&nbsp;<span class="op" id="6115863">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6115867">pv</span>&nbsp;<span class="op" id="6115870">:=</span>&nbsp;<span class="ident" id="6115873">saveData</span><span class="op" id="6115881">.</span><span class="ident" id="6115882">Addr</span><span class="op" id="6115886">(</span><span class="op" id="6115887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115891">if</span>&nbsp;<span class="ident" id="6115894">pv</span><span class="op" id="6115896">.</span><span class="ident" id="6115897">CanInterface</span><span class="op" id="6115909">(</span><span class="op" id="6115910">)</span>&nbsp;<span class="op" id="6115912">&amp;&amp;</span>&nbsp;<span class="ident" id="6115915">pv</span><span class="op" id="6115917">.</span><span class="ident" id="6115918">Type</span><span class="op" id="6115922">(</span><span class="op" id="6115923">)</span><span class="op" id="6115924">.</span><span class="ident" id="6115925">Implements</span><span class="op" id="6115935">(</span><span class="ident" id="6115936">textUnmarshalerType</span><span class="op" id="6115955">)</span>&nbsp;<span class="op" id="6115957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6115962">if</span>&nbsp;<span class="ident" id="6115965">err</span>&nbsp;<span class="op" id="6115969">:=</span>&nbsp;<span class="ident" id="6115972">pv</span><span class="op" id="6115974">.</span><span class="ident" id="6115975">Interface</span><span class="op" id="6115984">(</span><span class="op" id="6115985">)</span><span class="op" id="6115986">.</span><span class="op" id="6115987">(</span><span class="ident" id="6115988">encoding</span><span class="op" id="6115996">.</span><span class="ident" id="6115997">TextUnmarshaler</span><span class="op" id="6116012">)</span><span class="op" id="6116013">.</span><span class="ident" id="6116014">UnmarshalText</span><span class="op" id="6116027">(</span><span class="ident" id="6116028">data</span><span class="op" id="6116032">)</span><span class="op" id="6116033">;</span>&nbsp;<span class="ident" id="6116035">err</span>&nbsp;<span class="op" id="6116039">!=</span>&nbsp;<span class="ident" id="6116042">nil</span>&nbsp;<span class="op" id="6116046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116052">return</span>&nbsp;<span class="ident" id="6116059">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116066">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116071">saveData</span>&nbsp;<span class="op" id="6116080">=</span>&nbsp;<span class="ident" id="6116082">reflect</span><span class="op" id="6116089">.</span><span class="ident" id="6116090">Value</span><span class="op" id="6116095">{</span><span class="op" id="6116096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116107">if</span>&nbsp;<span class="ident" id="6116110">err</span>&nbsp;<span class="op" id="6116114">:=</span>&nbsp;<span class="ident" id="6116117">copyValue</span><span class="op" id="6116126">(</span><span class="ident" id="6116127">saveData</span><span class="op" id="6116135">,</span>&nbsp;<span class="ident" id="6116137">data</span><span class="op" id="6116141">)</span><span class="op" id="6116142">;</span>&nbsp;<span class="ident" id="6116144">err</span>&nbsp;<span class="op" id="6116148">!=</span>&nbsp;<span class="ident" id="6116151">nil</span>&nbsp;<span class="op" id="6116155">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116159">return</span>&nbsp;<span class="ident" id="6116166">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116175">switch</span>&nbsp;<span class="ident" id="6116182">t</span>&nbsp;<span class="op" id="6116184">:=</span>&nbsp;<span class="ident" id="6116187">saveComment</span><span class="op" id="6116198">;</span>&nbsp;<span class="ident" id="6116200">t</span><span class="op" id="6116201">.</span><span class="ident" id="6116202">Kind</span><span class="op" id="6116206">(</span><span class="op" id="6116207">)</span>&nbsp;<span class="op" id="6116209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116212">case</span>&nbsp;<span class="ident" id="6116217">reflect</span><span class="op" id="6116224">.</span><span class="ident" id="6116225">String</span><span class="op" id="6116231">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116235">t</span><span class="op" id="6116236">.</span><span class="ident" id="6116237">SetString</span><span class="op" id="6116246">(</span><span class="builtintype" id="6116247">string</span><span class="op" id="6116253">(</span><span class="ident" id="6116254">comment</span><span class="op" id="6116261">)</span><span class="op" id="6116262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116265">case</span>&nbsp;<span class="ident" id="6116270">reflect</span><span class="op" id="6116277">.</span><span class="ident" id="6116278">Slice</span><span class="op" id="6116283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116287">t</span><span class="op" id="6116288">.</span><span class="ident" id="6116289">Set</span><span class="op" id="6116292">(</span><span class="ident" id="6116293">reflect</span><span class="op" id="6116300">.</span><span class="ident" id="6116301">ValueOf</span><span class="op" id="6116308">(</span><span class="ident" id="6116309">comment</span><span class="op" id="6116316">)</span><span class="op" id="6116317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116324">switch</span>&nbsp;<span class="ident" id="6116331">t</span>&nbsp;<span class="op" id="6116333">:=</span>&nbsp;<span class="ident" id="6116336">saveXML</span><span class="op" id="6116343">;</span>&nbsp;<span class="ident" id="6116345">t</span><span class="op" id="6116346">.</span><span class="ident" id="6116347">Kind</span><span class="op" id="6116351">(</span><span class="op" id="6116352">)</span>&nbsp;<span class="op" id="6116354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116357">case</span>&nbsp;<span class="ident" id="6116362">reflect</span><span class="op" id="6116369">.</span><span class="ident" id="6116370">String</span><span class="op" id="6116376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116380">t</span><span class="op" id="6116381">.</span><span class="ident" id="6116382">SetString</span><span class="op" id="6116391">(</span><span class="builtintype" id="6116392">string</span><span class="op" id="6116398">(</span><span class="ident" id="6116399">saveXMLData</span><span class="op" id="6116410">)</span><span class="op" id="6116411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116414">case</span>&nbsp;<span class="ident" id="6116419">reflect</span><span class="op" id="6116426">.</span><span class="ident" id="6116427">Slice</span><span class="op" id="6116432">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116436">t</span><span class="op" id="6116437">.</span><span class="ident" id="6116438">Set</span><span class="op" id="6116441">(</span><span class="ident" id="6116442">reflect</span><span class="op" id="6116449">.</span><span class="ident" id="6116450">ValueOf</span><span class="op" id="6116457">(</span><span class="ident" id="6116458">saveXMLData</span><span class="op" id="6116469">)</span><span class="op" id="6116470">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116477">return</span>&nbsp;<span class="ident" id="6116484">nil</span><br>
<span class="lineno"></span><span class="op" id="6116488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6116491">func</span>&nbsp;<span class="ident" id="6116496">copyValue</span><span class="op" id="6116505">(</span><span class="ident" id="6116506">dst</span>&nbsp;<span class="ident" id="6116510">reflect</span><span class="op" id="6116517">.</span><span class="ident" id="6116518">Value</span><span class="op" id="6116523">,</span>&nbsp;<span class="ident" id="6116525">src</span>&nbsp;<span class="op" id="6116529">[</span><span class="op" id="6116530">]</span><span class="builtintype" id="6116531">byte</span><span class="op" id="6116535">)</span>&nbsp;<span class="op" id="6116537">(</span><span class="ident" id="6116538">err</span>&nbsp;<span class="builtintype" id="6116542">error</span><span class="op" id="6116547">)</span>&nbsp;<span class="op" id="6116549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116552">dst0</span>&nbsp;<span class="op" id="6116557">:=</span>&nbsp;<span class="ident" id="6116560">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116566">if</span>&nbsp;<span class="ident" id="6116569">dst</span><span class="op" id="6116572">.</span><span class="ident" id="6116573">Kind</span><span class="op" id="6116577">(</span><span class="op" id="6116578">)</span>&nbsp;<span class="op" id="6116580">==</span>&nbsp;<span class="ident" id="6116583">reflect</span><span class="op" id="6116590">.</span><span class="ident" id="6116591">Ptr</span>&nbsp;<span class="op" id="6116595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116599">if</span>&nbsp;<span class="ident" id="6116602">dst</span><span class="op" id="6116605">.</span><span class="ident" id="6116606">IsNil</span><span class="op" id="6116611">(</span><span class="op" id="6116612">)</span>&nbsp;<span class="op" id="6116614">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116619">dst</span><span class="op" id="6116622">.</span><span class="ident" id="6116623">Set</span><span class="op" id="6116626">(</span><span class="ident" id="6116627">reflect</span><span class="op" id="6116634">.</span><span class="ident" id="6116635">New</span><span class="op" id="6116638">(</span><span class="ident" id="6116639">dst</span><span class="op" id="6116642">.</span><span class="ident" id="6116643">Type</span><span class="op" id="6116647">(</span><span class="op" id="6116648">)</span><span class="op" id="6116649">.</span><span class="ident" id="6116650">Elem</span><span class="op" id="6116654">(</span><span class="op" id="6116655">)</span><span class="op" id="6116656">)</span><span class="op" id="6116657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116665">dst</span>&nbsp;<span class="op" id="6116669">=</span>&nbsp;<span class="ident" id="6116671">dst</span><span class="op" id="6116674">.</span><span class="ident" id="6116675">Elem</span><span class="op" id="6116679">(</span><span class="op" id="6116680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6116683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6116687">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116714">switch</span>&nbsp;<span class="ident" id="6116721">dst</span><span class="op" id="6116724">.</span><span class="ident" id="6116725">Kind</span><span class="op" id="6116729">(</span><span class="op" id="6116730">)</span>&nbsp;<span class="op" id="6116732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116735">case</span>&nbsp;<span class="ident" id="6116740">reflect</span><span class="op" id="6116747">.</span><span class="ident" id="6116748">Invalid</span><span class="op" id="6116755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6116759">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116783">default</span><span class="op" id="6116790">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116794">return</span>&nbsp;<span class="ident" id="6116801">errors</span><span class="op" id="6116807">.</span><span class="ident" id="6116808">New</span><span class="op" id="6116811">(</span><span class="string" id="6116812">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6116837">+</span>&nbsp;<span class="ident" id="6116839">dst0</span><span class="op" id="6116843">.</span><span class="ident" id="6116844">Type</span><span class="op" id="6116848">(</span><span class="op" id="6116849">)</span><span class="op" id="6116850">.</span><span class="ident" id="6116851">String</span><span class="op" id="6116857">(</span><span class="op" id="6116858">)</span><span class="op" id="6116859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6116862">case</span>&nbsp;<span class="ident" id="6116867">reflect</span><span class="op" id="6116874">.</span><span class="ident" id="6116875">Int</span><span class="op" id="6116878">,</span>&nbsp;<span class="ident" id="6116880">reflect</span><span class="op" id="6116887">.</span><span class="ident" id="6116888">Int8</span><span class="op" id="6116892">,</span>&nbsp;<span class="ident" id="6116894">reflect</span><span class="op" id="6116901">.</span><span class="ident" id="6116902">Int16</span><span class="op" id="6116907">,</span>&nbsp;<span class="ident" id="6116909">reflect</span><span class="op" id="6116916">.</span><span class="ident" id="6116917">Int32</span><span class="op" id="6116922">,</span>&nbsp;<span class="ident" id="6116924">reflect</span><span class="op" id="6116931">.</span><span class="ident" id="6116932">Int64</span><span class="op" id="6116937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6116941">itmp</span><span class="op" id="6116945">,</span>&nbsp;<span class="ident" id="6116947">err</span>&nbsp;<span class="op" id="6116951">:=</span>&nbsp;<span class="ident" id="6116954">strconv</span><span class="op" id="6116961">.</span><span class="ident" id="6116962">ParseInt</span><span class="op" id="6116970">(</span><span class="builtintype" id="6116971">string</span><span class="op" id="6116977">(</span><span class="ident" id="6116978">src</span><span class="op" id="6116981">)</span><span class="op" id="6116982">,</span>&nbsp;<span class="num" id="6116984">10</span><span class="op" id="6116986">,</span>&nbsp;<span class="ident" id="6116988">dst</span><span class="op" id="6116991">.</span><span class="ident" id="6116992">Type</span><span class="op" id="6116996">(</span><span class="op" id="6116997">)</span><span class="op" id="6116998">.</span><span class="ident" id="6116999">Bits</span><span class="op" id="6117003">(</span><span class="op" id="6117004">)</span><span class="op" id="6117005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117009">if</span>&nbsp;<span class="ident" id="6117012">err</span>&nbsp;<span class="op" id="6117016">!=</span>&nbsp;<span class="ident" id="6117019">nil</span>&nbsp;<span class="op" id="6117023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117028">return</span>&nbsp;<span class="ident" id="6117035">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117045">dst</span><span class="op" id="6117048">.</span><span class="ident" id="6117049">SetInt</span><span class="op" id="6117055">(</span><span class="ident" id="6117056">itmp</span><span class="op" id="6117060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117063">case</span>&nbsp;<span class="ident" id="6117068">reflect</span><span class="op" id="6117075">.</span><span class="ident" id="6117076">Uint</span><span class="op" id="6117080">,</span>&nbsp;<span class="ident" id="6117082">reflect</span><span class="op" id="6117089">.</span><span class="ident" id="6117090">Uint8</span><span class="op" id="6117095">,</span>&nbsp;<span class="ident" id="6117097">reflect</span><span class="op" id="6117104">.</span><span class="ident" id="6117105">Uint16</span><span class="op" id="6117111">,</span>&nbsp;<span class="ident" id="6117113">reflect</span><span class="op" id="6117120">.</span><span class="ident" id="6117121">Uint32</span><span class="op" id="6117127">,</span>&nbsp;<span class="ident" id="6117129">reflect</span><span class="op" id="6117136">.</span><span class="ident" id="6117137">Uint64</span><span class="op" id="6117143">,</span>&nbsp;<span class="ident" id="6117145">reflect</span><span class="op" id="6117152">.</span><span class="ident" id="6117153">Uintptr</span><span class="op" id="6117160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117164">utmp</span><span class="op" id="6117168">,</span>&nbsp;<span class="ident" id="6117170">err</span>&nbsp;<span class="op" id="6117174">:=</span>&nbsp;<span class="ident" id="6117177">strconv</span><span class="op" id="6117184">.</span><span class="ident" id="6117185">ParseUint</span><span class="op" id="6117194">(</span><span class="builtintype" id="6117195">string</span><span class="op" id="6117201">(</span><span class="ident" id="6117202">src</span><span class="op" id="6117205">)</span><span class="op" id="6117206">,</span>&nbsp;<span class="num" id="6117208">10</span><span class="op" id="6117210">,</span>&nbsp;<span class="ident" id="6117212">dst</span><span class="op" id="6117215">.</span><span class="ident" id="6117216">Type</span><span class="op" id="6117220">(</span><span class="op" id="6117221">)</span><span class="op" id="6117222">.</span><span class="ident" id="6117223">Bits</span><span class="op" id="6117227">(</span><span class="op" id="6117228">)</span><span class="op" id="6117229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117233">if</span>&nbsp;<span class="ident" id="6117236">err</span>&nbsp;<span class="op" id="6117240">!=</span>&nbsp;<span class="ident" id="6117243">nil</span>&nbsp;<span class="op" id="6117247">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117252">return</span>&nbsp;<span class="ident" id="6117259">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117269">dst</span><span class="op" id="6117272">.</span><span class="ident" id="6117273">SetUint</span><span class="op" id="6117280">(</span><span class="ident" id="6117281">utmp</span><span class="op" id="6117285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117288">case</span>&nbsp;<span class="ident" id="6117293">reflect</span><span class="op" id="6117300">.</span><span class="ident" id="6117301">Float32</span><span class="op" id="6117308">,</span>&nbsp;<span class="ident" id="6117310">reflect</span><span class="op" id="6117317">.</span><span class="ident" id="6117318">Float64</span><span class="op" id="6117325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117329">ftmp</span><span class="op" id="6117333">,</span>&nbsp;<span class="ident" id="6117335">err</span>&nbsp;<span class="op" id="6117339">:=</span>&nbsp;<span class="ident" id="6117342">strconv</span><span class="op" id="6117349">.</span><span class="ident" id="6117350">ParseFloat</span><span class="op" id="6117360">(</span><span class="builtintype" id="6117361">string</span><span class="op" id="6117367">(</span><span class="ident" id="6117368">src</span><span class="op" id="6117371">)</span><span class="op" id="6117372">,</span>&nbsp;<span class="ident" id="6117374">dst</span><span class="op" id="6117377">.</span><span class="ident" id="6117378">Type</span><span class="op" id="6117382">(</span><span class="op" id="6117383">)</span><span class="op" id="6117384">.</span><span class="ident" id="6117385">Bits</span><span class="op" id="6117389">(</span><span class="op" id="6117390">)</span><span class="op" id="6117391">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117395">if</span>&nbsp;<span class="ident" id="6117398">err</span>&nbsp;<span class="op" id="6117402">!=</span>&nbsp;<span class="ident" id="6117405">nil</span>&nbsp;<span class="op" id="6117409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117414">return</span>&nbsp;<span class="ident" id="6117421">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117431">dst</span><span class="op" id="6117434">.</span><span class="ident" id="6117435">SetFloat</span><span class="op" id="6117443">(</span><span class="ident" id="6117444">ftmp</span><span class="op" id="6117448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117451">case</span>&nbsp;<span class="ident" id="6117456">reflect</span><span class="op" id="6117463">.</span><span class="ident" id="6117464">Bool</span><span class="op" id="6117468">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117472">value</span><span class="op" id="6117477">,</span>&nbsp;<span class="ident" id="6117479">err</span>&nbsp;<span class="op" id="6117483">:=</span>&nbsp;<span class="ident" id="6117486">strconv</span><span class="op" id="6117493">.</span><span class="ident" id="6117494">ParseBool</span><span class="op" id="6117503">(</span><span class="ident" id="6117504">strings</span><span class="op" id="6117511">.</span><span class="ident" id="6117512">TrimSpace</span><span class="op" id="6117521">(</span><span class="builtintype" id="6117522">string</span><span class="op" id="6117528">(</span><span class="ident" id="6117529">src</span><span class="op" id="6117532">)</span><span class="op" id="6117533">)</span><span class="op" id="6117534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117538">if</span>&nbsp;<span class="ident" id="6117541">err</span>&nbsp;<span class="op" id="6117545">!=</span>&nbsp;<span class="ident" id="6117548">nil</span>&nbsp;<span class="op" id="6117552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117557">return</span>&nbsp;<span class="ident" id="6117564">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117574">dst</span><span class="op" id="6117577">.</span><span class="ident" id="6117578">SetBool</span><span class="op" id="6117585">(</span><span class="ident" id="6117586">value</span><span class="op" id="6117591">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117594">case</span>&nbsp;<span class="ident" id="6117599">reflect</span><span class="op" id="6117606">.</span><span class="ident" id="6117607">String</span><span class="op" id="6117613">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117617">dst</span><span class="op" id="6117620">.</span><span class="ident" id="6117621">SetString</span><span class="op" id="6117630">(</span><span class="builtintype" id="6117631">string</span><span class="op" id="6117637">(</span><span class="ident" id="6117638">src</span><span class="op" id="6117641">)</span><span class="op" id="6117642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117645">case</span>&nbsp;<span class="ident" id="6117650">reflect</span><span class="op" id="6117657">.</span><span class="ident" id="6117658">Slice</span><span class="op" id="6117663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117667">if</span>&nbsp;<span class="builtinfunc" id="6117670">len</span><span class="op" id="6117673">(</span><span class="ident" id="6117674">src</span><span class="op" id="6117677">)</span>&nbsp;<span class="op" id="6117679">==</span>&nbsp;<span class="num" id="6117682">0</span>&nbsp;<span class="op" id="6117684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6117689">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117720">src</span>&nbsp;<span class="op" id="6117724">=</span>&nbsp;<span class="op" id="6117726">[</span><span class="op" id="6117727">]</span><span class="builtintype" id="6117728">byte</span><span class="op" id="6117732">{</span><span class="op" id="6117733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6117741">dst</span><span class="op" id="6117744">.</span><span class="ident" id="6117745">SetBytes</span><span class="op" id="6117753">(</span><span class="ident" id="6117754">src</span><span class="op" id="6117757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6117760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6117763">return</span>&nbsp;<span class="ident" id="6117770">nil</span><br>
<span class="lineno">605</span><span class="op" id="6117774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6117777">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6117841">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6117880">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6117949">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6118016">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6118083">func</span>&nbsp;<span class="op" id="6118088">(</span><span class="ident" id="6118089">p</span>&nbsp;<span class="op" id="6118091">*</span><span class="ident" id="6118092">Decoder</span><span class="op" id="6118099">)</span>&nbsp;<span class="ident" id="6118101">unmarshalPath</span><span class="op" id="6118114">(</span><span class="ident" id="6118115">tinfo</span>&nbsp;<span class="op" id="6118121">*</span><span class="ident" id="6118122">typeInfo</span><span class="op" id="6118130">,</span>&nbsp;<span class="ident" id="6118132">sv</span>&nbsp;<span class="ident" id="6118135">reflect</span><span class="op" id="6118142">.</span><span class="ident" id="6118143">Value</span><span class="op" id="6118148">,</span>&nbsp;<span class="ident" id="6118150">parents</span>&nbsp;<span class="op" id="6118158">[</span><span class="op" id="6118159">]</span><span class="builtintype" id="6118160">string</span><span class="op" id="6118166">,</span>&nbsp;<span class="ident" id="6118168">start</span>&nbsp;<span class="op" id="6118174">*</span><span class="ident" id="6118175">StartElement</span><span class="op" id="6118187">)</span>&nbsp;<span class="op" id="6118189">(</span><span class="ident" id="6118190">consumed</span>&nbsp;<span class="builtintype" id="6118199">bool</span><span class="op" id="6118203">,</span>&nbsp;<span class="ident" id="6118205">err</span>&nbsp;<span class="builtintype" id="6118209">error</span><span class="op" id="6118214">)</span>&nbsp;<span class="op" id="6118216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6118219">recurse</span>&nbsp;<span class="op" id="6118227">:=</span>&nbsp;<span class="builtintype" id="6118230">false</span><br>
<span class="lineno"></span><span class="ident" id="6118236">Loop</span><span class="op" id="6118240">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118243">for</span>&nbsp;<span class="ident" id="6118247">i</span>&nbsp;<span class="op" id="6118249">:=</span>&nbsp;<span class="keyword" id="6118252">range</span>&nbsp;<span class="ident" id="6118258">tinfo</span><span class="op" id="6118263">.</span><span class="ident" id="6118264">fields</span>&nbsp;<span class="op" id="6118271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6118275">finfo</span>&nbsp;<span class="op" id="6118281">:=</span>&nbsp;<span class="op" id="6118284">&amp;</span><span class="ident" id="6118285">tinfo</span><span class="op" id="6118290">.</span><span class="ident" id="6118291">fields</span><span class="op" id="6118297">[</span><span class="ident" id="6118298">i</span><span class="op" id="6118299">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118303">if</span>&nbsp;<span class="ident" id="6118306">finfo</span><span class="op" id="6118311">.</span><span class="ident" id="6118312">flags</span><span class="op" id="6118317">&amp;</span><span class="ident" id="6118318">fElement</span>&nbsp;<span class="op" id="6118327">==</span>&nbsp;<span class="num" id="6118330">0</span>&nbsp;<span class="op" id="6118332">||</span>&nbsp;<span class="builtinfunc" id="6118335">len</span><span class="op" id="6118338">(</span><span class="ident" id="6118339">finfo</span><span class="op" id="6118344">.</span><span class="ident" id="6118345">parents</span><span class="op" id="6118352">)</span>&nbsp;<span class="op" id="6118354">&lt;</span>&nbsp;<span class="builtinfunc" id="6118356">len</span><span class="op" id="6118359">(</span><span class="ident" id="6118360">parents</span><span class="op" id="6118367">)</span>&nbsp;<span class="op" id="6118369">||</span>&nbsp;<span class="ident" id="6118372">finfo</span><span class="op" id="6118377">.</span><span class="ident" id="6118378">xmlns</span>&nbsp;<span class="op" id="6118384">!=</span>&nbsp;<span class="string" id="6118387">&#34;&#34;</span>&nbsp;<span class="op" id="6118390">&amp;&amp;</span>&nbsp;<span class="ident" id="6118393">finfo</span><span class="op" id="6118398">.</span><span class="ident" id="6118399">xmlns</span>&nbsp;<span class="op" id="6118405">!=</span>&nbsp;<span class="ident" id="6118408">start</span><span class="op" id="6118413">.</span><span class="ident" id="6118414">Name</span><span class="op" id="6118418">.</span><span class="ident" id="6118419">Space</span>&nbsp;<span class="op" id="6118425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118430">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6118441">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118445">for</span>&nbsp;<span class="ident" id="6118449">j</span>&nbsp;<span class="op" id="6118451">:=</span>&nbsp;<span class="keyword" id="6118454">range</span>&nbsp;<span class="ident" id="6118460">parents</span>&nbsp;<span class="op" id="6118468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118473">if</span>&nbsp;<span class="ident" id="6118476">parents</span><span class="op" id="6118483">[</span><span class="ident" id="6118484">j</span><span class="op" id="6118485">]</span>&nbsp;<span class="op" id="6118487">!=</span>&nbsp;<span class="ident" id="6118490">finfo</span><span class="op" id="6118495">.</span><span class="ident" id="6118496">parents</span><span class="op" id="6118503">[</span><span class="ident" id="6118504">j</span><span class="op" id="6118505">]</span>&nbsp;<span class="op" id="6118507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118513">continue</span>&nbsp;<span class="ident" id="6118522">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6118530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6118534">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118538">if</span>&nbsp;<span class="builtinfunc" id="6118541">len</span><span class="op" id="6118544">(</span><span class="ident" id="6118545">finfo</span><span class="op" id="6118550">.</span><span class="ident" id="6118551">parents</span><span class="op" id="6118558">)</span>&nbsp;<span class="op" id="6118560">==</span>&nbsp;<span class="builtinfunc" id="6118563">len</span><span class="op" id="6118566">(</span><span class="ident" id="6118567">parents</span><span class="op" id="6118574">)</span>&nbsp;<span class="op" id="6118576">&amp;&amp;</span>&nbsp;<span class="ident" id="6118579">finfo</span><span class="op" id="6118584">.</span><span class="ident" id="6118585">name</span>&nbsp;<span class="op" id="6118590">==</span>&nbsp;<span class="ident" id="6118593">start</span><span class="op" id="6118598">.</span><span class="ident" id="6118599">Name</span><span class="op" id="6118603">.</span><span class="ident" id="6118604">Local</span>&nbsp;<span class="op" id="6118610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6118615">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118664">return</span>&nbsp;<span class="builtintype" id="6118671">true</span><span class="op" id="6118675">,</span>&nbsp;<span class="ident" id="6118677">p</span><span class="op" id="6118678">.</span><span class="ident" id="6118679">unmarshal</span><span class="op" id="6118688">(</span><span class="ident" id="6118689">finfo</span><span class="op" id="6118694">.</span><span class="ident" id="6118695">value</span><span class="op" id="6118700">(</span><span class="ident" id="6118701">sv</span><span class="op" id="6118703">)</span><span class="op" id="6118704">,</span>&nbsp;<span class="ident" id="6118706">start</span><span class="op" id="6118711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6118715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6118719">if</span>&nbsp;<span class="builtinfunc" id="6118722">len</span><span class="op" id="6118725">(</span><span class="ident" id="6118726">finfo</span><span class="op" id="6118731">.</span><span class="ident" id="6118732">parents</span><span class="op" id="6118739">)</span>&nbsp;<span class="op" id="6118741">&gt;</span>&nbsp;<span class="builtinfunc" id="6118743">len</span><span class="op" id="6118746">(</span><span class="ident" id="6118747">parents</span><span class="op" id="6118754">)</span>&nbsp;<span class="op" id="6118756">&amp;&amp;</span>&nbsp;<span class="ident" id="6118759">finfo</span><span class="op" id="6118764">.</span><span class="ident" id="6118765">parents</span><span class="op" id="6118772">[</span><span class="builtinfunc" id="6118773">len</span><span class="op" id="6118776">(</span><span class="ident" id="6118777">parents</span><span class="op" id="6118784">)</span><span class="op" id="6118785">]</span>&nbsp;<span class="op" id="6118787">==</span>&nbsp;<span class="ident" id="6118790">start</span><span class="op" id="6118795">.</span><span class="ident" id="6118796">Name</span><span class="op" id="6118800">.</span><span class="ident" id="6118801">Local</span>&nbsp;<span class="op" id="6118807">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6118812">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6118865">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6118921">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6118962">recurse</span>&nbsp;<span class="op" id="6118970">=</span>&nbsp;<span class="builtintype" id="6118972">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6118981">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6119029">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6119062">parents</span>&nbsp;<span class="op" id="6119070">=</span>&nbsp;<span class="ident" id="6119072">finfo</span><span class="op" id="6119077">.</span><span class="ident" id="6119078">parents</span><span class="op" id="6119085">[</span><span class="op" id="6119086">:</span><span class="builtinfunc" id="6119087">len</span><span class="op" id="6119090">(</span><span class="ident" id="6119091">parents</span><span class="op" id="6119098">)</span><span class="op" id="6119099">+</span><span class="num" id="6119100">1</span><span class="op" id="6119101">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119106">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119114">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119120">if</span>&nbsp;<span class="op" id="6119123">!</span><span class="ident" id="6119124">recurse</span>&nbsp;<span class="op" id="6119132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6119136">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119180">return</span>&nbsp;<span class="builtintype" id="6119187">false</span><span class="op" id="6119192">,</span>&nbsp;<span class="ident" id="6119194">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119199">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6119202">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6119264">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6119325">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119373">for</span>&nbsp;<span class="op" id="6119377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119381">var</span>&nbsp;<span class="ident" id="6119385">tok</span>&nbsp;<span class="ident" id="6119389">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6119397">tok</span><span class="op" id="6119400">,</span>&nbsp;<span class="ident" id="6119402">err</span>&nbsp;<span class="op" id="6119406">=</span>&nbsp;<span class="ident" id="6119408">p</span><span class="op" id="6119409">.</span><span class="ident" id="6119410">Token</span><span class="op" id="6119415">(</span><span class="op" id="6119416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119420">if</span>&nbsp;<span class="ident" id="6119423">err</span>&nbsp;<span class="op" id="6119427">!=</span>&nbsp;<span class="ident" id="6119430">nil</span>&nbsp;<span class="op" id="6119434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119439">return</span>&nbsp;<span class="builtintype" id="6119446">true</span><span class="op" id="6119450">,</span>&nbsp;<span class="ident" id="6119452">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119462">switch</span>&nbsp;<span class="ident" id="6119469">t</span>&nbsp;<span class="op" id="6119471">:=</span>&nbsp;<span class="ident" id="6119474">tok</span><span class="op" id="6119477">.</span><span class="op" id="6119478">(</span><span class="keyword" id="6119479">type</span><span class="op" id="6119483">)</span>&nbsp;<span class="op" id="6119485">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119489">case</span>&nbsp;<span class="ident" id="6119494">StartElement</span><span class="op" id="6119506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6119511">consumed2</span><span class="op" id="6119520">,</span>&nbsp;<span class="ident" id="6119522">err</span>&nbsp;<span class="op" id="6119526">:=</span>&nbsp;<span class="ident" id="6119529">p</span><span class="op" id="6119530">.</span><span class="ident" id="6119531">unmarshalPath</span><span class="op" id="6119544">(</span><span class="ident" id="6119545">tinfo</span><span class="op" id="6119550">,</span>&nbsp;<span class="ident" id="6119552">sv</span><span class="op" id="6119554">,</span>&nbsp;<span class="ident" id="6119556">parents</span><span class="op" id="6119563">,</span>&nbsp;<span class="op" id="6119565">&amp;</span><span class="ident" id="6119566">t</span><span class="op" id="6119567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119572">if</span>&nbsp;<span class="ident" id="6119575">err</span>&nbsp;<span class="op" id="6119579">!=</span>&nbsp;<span class="ident" id="6119582">nil</span>&nbsp;<span class="op" id="6119586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119592">return</span>&nbsp;<span class="builtintype" id="6119599">true</span><span class="op" id="6119603">,</span>&nbsp;<span class="ident" id="6119605">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119612">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119617">if</span>&nbsp;<span class="op" id="6119620">!</span><span class="ident" id="6119621">consumed2</span>&nbsp;<span class="op" id="6119631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119637">if</span>&nbsp;<span class="ident" id="6119640">err</span>&nbsp;<span class="op" id="6119644">:=</span>&nbsp;<span class="ident" id="6119647">p</span><span class="op" id="6119648">.</span><span class="ident" id="6119649">Skip</span><span class="op" id="6119653">(</span><span class="op" id="6119654">)</span><span class="op" id="6119655">;</span>&nbsp;<span class="ident" id="6119657">err</span>&nbsp;<span class="op" id="6119661">!=</span>&nbsp;<span class="ident" id="6119664">nil</span>&nbsp;<span class="op" id="6119668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119675">return</span>&nbsp;<span class="builtintype" id="6119682">true</span><span class="op" id="6119686">,</span>&nbsp;<span class="ident" id="6119688">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119701">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119705">case</span>&nbsp;<span class="ident" id="6119710">EndElement</span><span class="op" id="6119720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6119725">return</span>&nbsp;<span class="builtintype" id="6119732">true</span><span class="op" id="6119736">,</span>&nbsp;<span class="ident" id="6119738">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6119747">}</span><br>
<span class="lineno"></span><span class="op" id="6119749">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6119752">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6119811">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6119871">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6119939">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6119966">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6120030">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6120096">func</span>&nbsp;<span class="op" id="6120101">(</span><span class="ident" id="6120102">d</span>&nbsp;<span class="op" id="6120104">*</span><span class="ident" id="6120105">Decoder</span><span class="op" id="6120112">)</span>&nbsp;<span class="ident" id="6120114">Skip</span><span class="op" id="6120118">(</span><span class="op" id="6120119">)</span>&nbsp;<span class="builtintype" id="6120121">error</span>&nbsp;<span class="op" id="6120127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120130">for</span>&nbsp;<span class="op" id="6120134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6120138">tok</span><span class="op" id="6120141">,</span>&nbsp;<span class="ident" id="6120143">err</span>&nbsp;<span class="op" id="6120147">:=</span>&nbsp;<span class="ident" id="6120150">d</span><span class="op" id="6120151">.</span><span class="ident" id="6120152">Token</span><span class="op" id="6120157">(</span><span class="op" id="6120158">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120162">if</span>&nbsp;<span class="ident" id="6120165">err</span>&nbsp;<span class="op" id="6120169">!=</span>&nbsp;<span class="ident" id="6120172">nil</span>&nbsp;<span class="op" id="6120176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120181">return</span>&nbsp;<span class="ident" id="6120188">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6120194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120198">switch</span>&nbsp;<span class="ident" id="6120205">tok</span><span class="op" id="6120208">.</span><span class="op" id="6120209">(</span><span class="keyword" id="6120210">type</span><span class="op" id="6120214">)</span>&nbsp;<span class="op" id="6120216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120220">case</span>&nbsp;<span class="ident" id="6120225">StartElement</span><span class="op" id="6120237">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120242">if</span>&nbsp;<span class="ident" id="6120245">err</span>&nbsp;<span class="op" id="6120249">:=</span>&nbsp;<span class="ident" id="6120252">d</span><span class="op" id="6120253">.</span><span class="ident" id="6120254">Skip</span><span class="op" id="6120258">(</span><span class="op" id="6120259">)</span><span class="op" id="6120260">;</span>&nbsp;<span class="ident" id="6120262">err</span>&nbsp;<span class="op" id="6120266">!=</span>&nbsp;<span class="ident" id="6120269">nil</span>&nbsp;<span class="op" id="6120273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120279">return</span>&nbsp;<span class="ident" id="6120286">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6120293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120297">case</span>&nbsp;<span class="ident" id="6120302">EndElement</span><span class="op" id="6120312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6120317">return</span>&nbsp;<span class="ident" id="6120324">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6120330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6120333">}</span><br>
<span class="lineno"></span><span class="op" id="6120335">}</span>
</div>
</body>
</html>
