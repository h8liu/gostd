<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html" class="current">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6888560">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6888616">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6888670">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6888721">package</span>&nbsp;<span class="ident" id="6888729">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6888735">import</span>&nbsp;<span class="op" id="6888742">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6888745">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6888754">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6888762">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6888775">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6888786">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6888796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6888799">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6888829">type</span>&nbsp;<span class="ident" id="6888834">example</span>&nbsp;<span class="keyword" id="6888842">struct</span>&nbsp;<span class="op" id="6888849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888852">compact</span>&nbsp;<span class="builtintype" id="6888860">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6888868">indent</span>&nbsp;&nbsp;<span class="builtintype" id="6888876">string</span><br>
<span class="lineno">20</span><span class="op" id="6888883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6888886">var</span>&nbsp;<span class="ident" id="6888890">examples</span>&nbsp;<span class="op" id="6888899">=</span>&nbsp;<span class="op" id="6888901">[</span><span class="op" id="6888902">]</span><span class="ident" id="6888903">example</span><span class="op" id="6888910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888913">{</span><span class="string" id="6888914">`1`</span><span class="op" id="6888917">,</span>&nbsp;<span class="string" id="6888919">`1`</span><span class="op" id="6888922">}</span><span class="op" id="6888923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888926">{</span><span class="string" id="6888927">`{}`</span><span class="op" id="6888931">,</span>&nbsp;<span class="string" id="6888933">`{}`</span><span class="op" id="6888937">}</span><span class="op" id="6888938">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888941">{</span><span class="string" id="6888942">`[]`</span><span class="op" id="6888946">,</span>&nbsp;<span class="string" id="6888948">`[]`</span><span class="op" id="6888952">}</span><span class="op" id="6888953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888956">{</span><span class="string" id="6888957">`{&#34;&#34;:2}`</span><span class="op" id="6888965">,</span>&nbsp;<span class="string" id="6888967">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="6888984">}</span><span class="op" id="6888985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6888988">{</span><span class="string" id="6888989">`[3]`</span><span class="op" id="6888994">,</span>&nbsp;<span class="string" id="6888996">&#34;[\n\t3\n]&#34;</span><span class="op" id="6889007">}</span><span class="op" id="6889008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889011">{</span><span class="string" id="6889012">`[1,2,3]`</span><span class="op" id="6889021">,</span>&nbsp;<span class="string" id="6889023">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="6889046">}</span><span class="op" id="6889047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889050">{</span><span class="string" id="6889051">`{&#34;x&#34;:1}`</span><span class="op" id="6889060">,</span>&nbsp;<span class="string" id="6889062">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="6889080">}</span><span class="op" id="6889081">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889084">{</span><span class="ident" id="6889085">ex1</span><span class="op" id="6889088">,</span>&nbsp;<span class="ident" id="6889090">ex1i</span><span class="op" id="6889094">}</span><span class="op" id="6889095">,</span><br>
<span class="lineno"></span><span class="op" id="6889097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6889100">var</span>&nbsp;<span class="ident" id="6889104">ex1</span>&nbsp;<span class="op" id="6889108">=</span>&nbsp;<span class="string" id="6889110">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6889149">var</span>&nbsp;<span class="ident" id="6889153">ex1i</span>&nbsp;<span class="op" id="6889158">=</span>&nbsp;<span class="string" id="6889160">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;true,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;false,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6889216">func</span>&nbsp;<span class="ident" id="6889221">TestCompact</span><span class="op" id="6889232">(</span><span class="ident" id="6889233">t</span>&nbsp;<span class="op" id="6889235">*</span><span class="ident" id="6889236">testing</span><span class="op" id="6889243">.</span><span class="ident" id="6889244">T</span><span class="op" id="6889245">)</span>&nbsp;<span class="op" id="6889247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889250">var</span>&nbsp;<span class="ident" id="6889254">buf</span>&nbsp;<span class="ident" id="6889258">bytes</span><span class="op" id="6889263">.</span><span class="ident" id="6889264">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889272">for</span>&nbsp;<span class="ident" id="6889276">_</span><span class="op" id="6889277">,</span>&nbsp;<span class="ident" id="6889279">tt</span>&nbsp;<span class="op" id="6889282">:=</span>&nbsp;<span class="keyword" id="6889285">range</span>&nbsp;<span class="ident" id="6889291">examples</span>&nbsp;<span class="op" id="6889300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889304">buf</span><span class="op" id="6889307">.</span><span class="ident" id="6889308">Reset</span><span class="op" id="6889313">(</span><span class="op" id="6889314">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889318">if</span>&nbsp;<span class="ident" id="6889321">err</span>&nbsp;<span class="op" id="6889325">:=</span>&nbsp;<span class="ident" id="6889328">Compact</span><span class="op" id="6889335">(</span><span class="op" id="6889336">&amp;</span><span class="ident" id="6889337">buf</span><span class="op" id="6889340">,</span>&nbsp;<span class="op" id="6889342">[</span><span class="op" id="6889343">]</span><span class="builtintype" id="6889344">byte</span><span class="op" id="6889348">(</span><span class="ident" id="6889349">tt</span><span class="op" id="6889351">.</span><span class="ident" id="6889352">compact</span><span class="op" id="6889359">)</span><span class="op" id="6889360">)</span><span class="op" id="6889361">;</span>&nbsp;<span class="ident" id="6889363">err</span>&nbsp;<span class="op" id="6889367">!=</span>&nbsp;<span class="builtintype" id="6889370">nil</span>&nbsp;<span class="op" id="6889374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889379">t</span><span class="op" id="6889380">.</span><span class="ident" id="6889381">Errorf</span><span class="op" id="6889387">(</span><span class="string" id="6889388">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6889406">,</span>&nbsp;<span class="ident" id="6889408">tt</span><span class="op" id="6889410">.</span><span class="ident" id="6889411">compact</span><span class="op" id="6889418">,</span>&nbsp;<span class="ident" id="6889420">err</span><span class="op" id="6889423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889427">}</span>&nbsp;<span class="keyword" id="6889429">else</span>&nbsp;<span class="keyword" id="6889434">if</span>&nbsp;<span class="ident" id="6889437">s</span>&nbsp;<span class="op" id="6889439">:=</span>&nbsp;<span class="ident" id="6889442">buf</span><span class="op" id="6889445">.</span><span class="ident" id="6889446">String</span><span class="op" id="6889452">(</span><span class="op" id="6889453">)</span><span class="op" id="6889454">;</span>&nbsp;<span class="ident" id="6889456">s</span>&nbsp;<span class="op" id="6889458">!=</span>&nbsp;<span class="ident" id="6889461">tt</span><span class="op" id="6889463">.</span><span class="ident" id="6889464">compact</span>&nbsp;<span class="op" id="6889472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889477">t</span><span class="op" id="6889478">.</span><span class="ident" id="6889479">Errorf</span><span class="op" id="6889485">(</span><span class="string" id="6889486">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6889521">,</span>&nbsp;<span class="ident" id="6889523">tt</span><span class="op" id="6889525">.</span><span class="ident" id="6889526">compact</span><span class="op" id="6889533">,</span>&nbsp;<span class="ident" id="6889535">s</span><span class="op" id="6889536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889540">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889545">buf</span><span class="op" id="6889548">.</span><span class="ident" id="6889549">Reset</span><span class="op" id="6889554">(</span><span class="op" id="6889555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889559">if</span>&nbsp;<span class="ident" id="6889562">err</span>&nbsp;<span class="op" id="6889566">:=</span>&nbsp;<span class="ident" id="6889569">Compact</span><span class="op" id="6889576">(</span><span class="op" id="6889577">&amp;</span><span class="ident" id="6889578">buf</span><span class="op" id="6889581">,</span>&nbsp;<span class="op" id="6889583">[</span><span class="op" id="6889584">]</span><span class="builtintype" id="6889585">byte</span><span class="op" id="6889589">(</span><span class="ident" id="6889590">tt</span><span class="op" id="6889592">.</span><span class="ident" id="6889593">indent</span><span class="op" id="6889599">)</span><span class="op" id="6889600">)</span><span class="op" id="6889601">;</span>&nbsp;<span class="ident" id="6889603">err</span>&nbsp;<span class="op" id="6889607">!=</span>&nbsp;<span class="builtintype" id="6889610">nil</span>&nbsp;<span class="op" id="6889614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889619">t</span><span class="op" id="6889620">.</span><span class="ident" id="6889621">Errorf</span><span class="op" id="6889627">(</span><span class="string" id="6889628">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6889646">,</span>&nbsp;<span class="ident" id="6889648">tt</span><span class="op" id="6889650">.</span><span class="ident" id="6889651">indent</span><span class="op" id="6889657">,</span>&nbsp;<span class="ident" id="6889659">err</span><span class="op" id="6889662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6889667">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889678">}</span>&nbsp;<span class="keyword" id="6889680">else</span>&nbsp;<span class="keyword" id="6889685">if</span>&nbsp;<span class="ident" id="6889688">s</span>&nbsp;<span class="op" id="6889690">:=</span>&nbsp;<span class="ident" id="6889693">buf</span><span class="op" id="6889696">.</span><span class="ident" id="6889697">String</span><span class="op" id="6889703">(</span><span class="op" id="6889704">)</span><span class="op" id="6889705">;</span>&nbsp;<span class="ident" id="6889707">s</span>&nbsp;<span class="op" id="6889709">!=</span>&nbsp;<span class="ident" id="6889712">tt</span><span class="op" id="6889714">.</span><span class="ident" id="6889715">compact</span>&nbsp;<span class="op" id="6889723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889728">t</span><span class="op" id="6889729">.</span><span class="ident" id="6889730">Errorf</span><span class="op" id="6889736">(</span><span class="string" id="6889737">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6889767">,</span>&nbsp;<span class="ident" id="6889769">tt</span><span class="op" id="6889771">.</span><span class="ident" id="6889772">indent</span><span class="op" id="6889778">,</span>&nbsp;<span class="ident" id="6889780">s</span><span class="op" id="6889781">,</span>&nbsp;<span class="ident" id="6889783">tt</span><span class="op" id="6889785">.</span><span class="ident" id="6889786">compact</span><span class="op" id="6889793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889800">}</span><br>
<span class="lineno"></span><span class="op" id="6889802">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6889805">func</span>&nbsp;<span class="ident" id="6889810">TestCompactSeparators</span><span class="op" id="6889831">(</span><span class="ident" id="6889832">t</span>&nbsp;<span class="op" id="6889834">*</span><span class="ident" id="6889835">testing</span><span class="op" id="6889842">.</span><span class="ident" id="6889843">T</span><span class="op" id="6889844">)</span>&nbsp;<span class="op" id="6889846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6889849">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6889905">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889949">tests</span>&nbsp;<span class="op" id="6889955">:=</span>&nbsp;<span class="op" id="6889958">[</span><span class="op" id="6889959">]</span><span class="keyword" id="6889960">struct</span>&nbsp;<span class="op" id="6889967">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6889971">in</span><span class="op" id="6889973">,</span>&nbsp;<span class="ident" id="6889975">compact</span>&nbsp;<span class="builtintype" id="6889983">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889991">}</span><span class="op" id="6889992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6889996">{</span><span class="string" id="6889997">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="6890014">,</span>&nbsp;<span class="string" id="6890016">`{&#34;\u2028&#34;:1}`</span><span class="op" id="6890030">}</span><span class="op" id="6890031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890035">{</span><span class="string" id="6890036">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="6890053">,</span>&nbsp;<span class="string" id="6890055">`{&#34;\u2029&#34;:2}`</span><span class="op" id="6890069">}</span><span class="op" id="6890070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890073">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890076">for</span>&nbsp;<span class="ident" id="6890080">_</span><span class="op" id="6890081">,</span>&nbsp;<span class="ident" id="6890083">tt</span>&nbsp;<span class="op" id="6890086">:=</span>&nbsp;<span class="keyword" id="6890089">range</span>&nbsp;<span class="ident" id="6890095">tests</span>&nbsp;<span class="op" id="6890101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890105">var</span>&nbsp;<span class="ident" id="6890109">buf</span>&nbsp;<span class="ident" id="6890113">bytes</span><span class="op" id="6890118">.</span><span class="ident" id="6890119">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890128">if</span>&nbsp;<span class="ident" id="6890131">err</span>&nbsp;<span class="op" id="6890135">:=</span>&nbsp;<span class="ident" id="6890138">Compact</span><span class="op" id="6890145">(</span><span class="op" id="6890146">&amp;</span><span class="ident" id="6890147">buf</span><span class="op" id="6890150">,</span>&nbsp;<span class="op" id="6890152">[</span><span class="op" id="6890153">]</span><span class="builtintype" id="6890154">byte</span><span class="op" id="6890158">(</span><span class="ident" id="6890159">tt</span><span class="op" id="6890161">.</span><span class="ident" id="6890162">in</span><span class="op" id="6890164">)</span><span class="op" id="6890165">)</span><span class="op" id="6890166">;</span>&nbsp;<span class="ident" id="6890168">err</span>&nbsp;<span class="op" id="6890172">!=</span>&nbsp;<span class="builtintype" id="6890175">nil</span>&nbsp;<span class="op" id="6890179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890184">t</span><span class="op" id="6890185">.</span><span class="ident" id="6890186">Errorf</span><span class="op" id="6890192">(</span><span class="string" id="6890193">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="6890210">,</span>&nbsp;<span class="ident" id="6890212">tt</span><span class="op" id="6890214">.</span><span class="ident" id="6890215">in</span><span class="op" id="6890217">,</span>&nbsp;<span class="ident" id="6890219">err</span><span class="op" id="6890222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890226">}</span>&nbsp;<span class="keyword" id="6890228">else</span>&nbsp;<span class="keyword" id="6890233">if</span>&nbsp;<span class="ident" id="6890236">s</span>&nbsp;<span class="op" id="6890238">:=</span>&nbsp;<span class="ident" id="6890241">buf</span><span class="op" id="6890244">.</span><span class="ident" id="6890245">String</span><span class="op" id="6890251">(</span><span class="op" id="6890252">)</span><span class="op" id="6890253">;</span>&nbsp;<span class="ident" id="6890255">s</span>&nbsp;<span class="op" id="6890257">!=</span>&nbsp;<span class="ident" id="6890260">tt</span><span class="op" id="6890262">.</span><span class="ident" id="6890263">compact</span>&nbsp;<span class="op" id="6890271">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890276">t</span><span class="op" id="6890277">.</span><span class="ident" id="6890278">Errorf</span><span class="op" id="6890284">(</span><span class="string" id="6890285">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6890312">,</span>&nbsp;<span class="ident" id="6890314">tt</span><span class="op" id="6890316">.</span><span class="ident" id="6890317">in</span><span class="op" id="6890319">,</span>&nbsp;<span class="ident" id="6890321">s</span><span class="op" id="6890322">,</span>&nbsp;<span class="ident" id="6890324">tt</span><span class="op" id="6890326">.</span><span class="ident" id="6890327">compact</span><span class="op" id="6890334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890341">}</span><br>
<span class="lineno"></span><span class="op" id="6890343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6890346">func</span>&nbsp;<span class="ident" id="6890351">TestIndent</span><span class="op" id="6890361">(</span><span class="ident" id="6890362">t</span>&nbsp;<span class="op" id="6890364">*</span><span class="ident" id="6890365">testing</span><span class="op" id="6890372">.</span><span class="ident" id="6890373">T</span><span class="op" id="6890374">)</span>&nbsp;<span class="op" id="6890376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890379">var</span>&nbsp;<span class="ident" id="6890383">buf</span>&nbsp;<span class="ident" id="6890387">bytes</span><span class="op" id="6890392">.</span><span class="ident" id="6890393">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890401">for</span>&nbsp;<span class="ident" id="6890405">_</span><span class="op" id="6890406">,</span>&nbsp;<span class="ident" id="6890408">tt</span>&nbsp;<span class="op" id="6890411">:=</span>&nbsp;<span class="keyword" id="6890414">range</span>&nbsp;<span class="ident" id="6890420">examples</span>&nbsp;<span class="op" id="6890429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890433">buf</span><span class="op" id="6890436">.</span><span class="ident" id="6890437">Reset</span><span class="op" id="6890442">(</span><span class="op" id="6890443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890447">if</span>&nbsp;<span class="ident" id="6890450">err</span>&nbsp;<span class="op" id="6890454">:=</span>&nbsp;<span class="ident" id="6890457">Indent</span><span class="op" id="6890463">(</span><span class="op" id="6890464">&amp;</span><span class="ident" id="6890465">buf</span><span class="op" id="6890468">,</span>&nbsp;<span class="op" id="6890470">[</span><span class="op" id="6890471">]</span><span class="builtintype" id="6890472">byte</span><span class="op" id="6890476">(</span><span class="ident" id="6890477">tt</span><span class="op" id="6890479">.</span><span class="ident" id="6890480">indent</span><span class="op" id="6890486">)</span><span class="op" id="6890487">,</span>&nbsp;<span class="string" id="6890489">&#34;&#34;</span><span class="op" id="6890491">,</span>&nbsp;<span class="string" id="6890493">&#34;\t&#34;</span><span class="op" id="6890497">)</span><span class="op" id="6890498">;</span>&nbsp;<span class="ident" id="6890500">err</span>&nbsp;<span class="op" id="6890504">!=</span>&nbsp;<span class="builtintype" id="6890507">nil</span>&nbsp;<span class="op" id="6890511">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890516">t</span><span class="op" id="6890517">.</span><span class="ident" id="6890518">Errorf</span><span class="op" id="6890524">(</span><span class="string" id="6890525">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6890542">,</span>&nbsp;<span class="ident" id="6890544">tt</span><span class="op" id="6890546">.</span><span class="ident" id="6890547">indent</span><span class="op" id="6890553">,</span>&nbsp;<span class="ident" id="6890555">err</span><span class="op" id="6890558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890562">}</span>&nbsp;<span class="keyword" id="6890564">else</span>&nbsp;<span class="keyword" id="6890569">if</span>&nbsp;<span class="ident" id="6890572">s</span>&nbsp;<span class="op" id="6890574">:=</span>&nbsp;<span class="ident" id="6890577">buf</span><span class="op" id="6890580">.</span><span class="ident" id="6890581">String</span><span class="op" id="6890587">(</span><span class="op" id="6890588">)</span><span class="op" id="6890589">;</span>&nbsp;<span class="ident" id="6890591">s</span>&nbsp;<span class="op" id="6890593">!=</span>&nbsp;<span class="ident" id="6890596">tt</span><span class="op" id="6890598">.</span><span class="ident" id="6890599">indent</span>&nbsp;<span class="op" id="6890606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890611">t</span><span class="op" id="6890612">.</span><span class="ident" id="6890613">Errorf</span><span class="op" id="6890619">(</span><span class="string" id="6890620">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6890654">,</span>&nbsp;<span class="ident" id="6890656">tt</span><span class="op" id="6890658">.</span><span class="ident" id="6890659">indent</span><span class="op" id="6890665">,</span>&nbsp;<span class="ident" id="6890667">s</span><span class="op" id="6890668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890677">buf</span><span class="op" id="6890680">.</span><span class="ident" id="6890681">Reset</span><span class="op" id="6890686">(</span><span class="op" id="6890687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890691">if</span>&nbsp;<span class="ident" id="6890694">err</span>&nbsp;<span class="op" id="6890698">:=</span>&nbsp;<span class="ident" id="6890701">Indent</span><span class="op" id="6890707">(</span><span class="op" id="6890708">&amp;</span><span class="ident" id="6890709">buf</span><span class="op" id="6890712">,</span>&nbsp;<span class="op" id="6890714">[</span><span class="op" id="6890715">]</span><span class="builtintype" id="6890716">byte</span><span class="op" id="6890720">(</span><span class="ident" id="6890721">tt</span><span class="op" id="6890723">.</span><span class="ident" id="6890724">compact</span><span class="op" id="6890731">)</span><span class="op" id="6890732">,</span>&nbsp;<span class="string" id="6890734">&#34;&#34;</span><span class="op" id="6890736">,</span>&nbsp;<span class="string" id="6890738">&#34;\t&#34;</span><span class="op" id="6890742">)</span><span class="op" id="6890743">;</span>&nbsp;<span class="ident" id="6890745">err</span>&nbsp;<span class="op" id="6890749">!=</span>&nbsp;<span class="builtintype" id="6890752">nil</span>&nbsp;<span class="op" id="6890756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890761">t</span><span class="op" id="6890762">.</span><span class="ident" id="6890763">Errorf</span><span class="op" id="6890769">(</span><span class="string" id="6890770">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6890787">,</span>&nbsp;<span class="ident" id="6890789">tt</span><span class="op" id="6890791">.</span><span class="ident" id="6890792">compact</span><span class="op" id="6890799">,</span>&nbsp;<span class="ident" id="6890801">err</span><span class="op" id="6890804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6890809">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890820">}</span>&nbsp;<span class="keyword" id="6890822">else</span>&nbsp;<span class="keyword" id="6890827">if</span>&nbsp;<span class="ident" id="6890830">s</span>&nbsp;<span class="op" id="6890832">:=</span>&nbsp;<span class="ident" id="6890835">buf</span><span class="op" id="6890838">.</span><span class="ident" id="6890839">String</span><span class="op" id="6890845">(</span><span class="op" id="6890846">)</span><span class="op" id="6890847">;</span>&nbsp;<span class="ident" id="6890849">s</span>&nbsp;<span class="op" id="6890851">!=</span>&nbsp;<span class="ident" id="6890854">tt</span><span class="op" id="6890856">.</span><span class="ident" id="6890857">indent</span>&nbsp;<span class="op" id="6890864">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6890869">t</span><span class="op" id="6890870">.</span><span class="ident" id="6890871">Errorf</span><span class="op" id="6890877">(</span><span class="string" id="6890878">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6890907">,</span>&nbsp;<span class="ident" id="6890909">tt</span><span class="op" id="6890911">.</span><span class="ident" id="6890912">compact</span><span class="op" id="6890919">,</span>&nbsp;<span class="ident" id="6890921">s</span><span class="op" id="6890922">,</span>&nbsp;<span class="ident" id="6890924">tt</span><span class="op" id="6890926">.</span><span class="ident" id="6890927">indent</span><span class="op" id="6890933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6890940">}</span><br>
<span class="lineno"></span><span class="op" id="6890942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6890945">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6890984">func</span>&nbsp;<span class="ident" id="6890989">TestCompactBig</span><span class="op" id="6891003">(</span><span class="ident" id="6891004">t</span>&nbsp;<span class="op" id="6891006">*</span><span class="ident" id="6891007">testing</span><span class="op" id="6891014">.</span><span class="ident" id="6891015">T</span><span class="op" id="6891016">)</span>&nbsp;<span class="op" id="6891018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891021">initBig</span><span class="op" id="6891028">(</span><span class="op" id="6891029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891032">var</span>&nbsp;<span class="ident" id="6891036">buf</span>&nbsp;<span class="ident" id="6891040">bytes</span><span class="op" id="6891045">.</span><span class="ident" id="6891046">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891054">if</span>&nbsp;<span class="ident" id="6891057">err</span>&nbsp;<span class="op" id="6891061">:=</span>&nbsp;<span class="ident" id="6891064">Compact</span><span class="op" id="6891071">(</span><span class="op" id="6891072">&amp;</span><span class="ident" id="6891073">buf</span><span class="op" id="6891076">,</span>&nbsp;<span class="ident" id="6891078">jsonBig</span><span class="op" id="6891085">)</span><span class="op" id="6891086">;</span>&nbsp;<span class="ident" id="6891088">err</span>&nbsp;<span class="op" id="6891092">!=</span>&nbsp;<span class="builtintype" id="6891095">nil</span>&nbsp;<span class="op" id="6891099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891103">t</span><span class="op" id="6891104">.</span><span class="ident" id="6891105">Fatalf</span><span class="op" id="6891111">(</span><span class="string" id="6891112">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6891125">,</span>&nbsp;<span class="ident" id="6891127">err</span><span class="op" id="6891130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891136">b</span>&nbsp;<span class="op" id="6891138">:=</span>&nbsp;<span class="ident" id="6891141">buf</span><span class="op" id="6891144">.</span><span class="ident" id="6891145">Bytes</span><span class="op" id="6891150">(</span><span class="op" id="6891151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891154">if</span>&nbsp;<span class="op" id="6891157">!</span><span class="ident" id="6891158">bytes</span><span class="op" id="6891163">.</span><span class="ident" id="6891164">Equal</span><span class="op" id="6891169">(</span><span class="ident" id="6891170">b</span><span class="op" id="6891171">,</span>&nbsp;<span class="ident" id="6891173">jsonBig</span><span class="op" id="6891180">)</span>&nbsp;<span class="op" id="6891182">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891186">t</span><span class="op" id="6891187">.</span><span class="ident" id="6891188">Error</span><span class="op" id="6891193">(</span><span class="string" id="6891194">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6891223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891227">diff</span><span class="op" id="6891231">(</span><span class="ident" id="6891232">t</span><span class="op" id="6891233">,</span>&nbsp;<span class="ident" id="6891235">b</span><span class="op" id="6891236">,</span>&nbsp;<span class="ident" id="6891238">jsonBig</span><span class="op" id="6891245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891249">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891257">}</span><br>
<span class="lineno"></span><span class="op" id="6891259">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="6891262">func</span>&nbsp;<span class="ident" id="6891267">TestIndentBig</span><span class="op" id="6891280">(</span><span class="ident" id="6891281">t</span>&nbsp;<span class="op" id="6891283">*</span><span class="ident" id="6891284">testing</span><span class="op" id="6891291">.</span><span class="ident" id="6891292">T</span><span class="op" id="6891293">)</span>&nbsp;<span class="op" id="6891295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891298">initBig</span><span class="op" id="6891305">(</span><span class="op" id="6891306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891309">var</span>&nbsp;<span class="ident" id="6891313">buf</span>&nbsp;<span class="ident" id="6891317">bytes</span><span class="op" id="6891322">.</span><span class="ident" id="6891323">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891331">if</span>&nbsp;<span class="ident" id="6891334">err</span>&nbsp;<span class="op" id="6891338">:=</span>&nbsp;<span class="ident" id="6891341">Indent</span><span class="op" id="6891347">(</span><span class="op" id="6891348">&amp;</span><span class="ident" id="6891349">buf</span><span class="op" id="6891352">,</span>&nbsp;<span class="ident" id="6891354">jsonBig</span><span class="op" id="6891361">,</span>&nbsp;<span class="string" id="6891363">&#34;&#34;</span><span class="op" id="6891365">,</span>&nbsp;<span class="string" id="6891367">&#34;\t&#34;</span><span class="op" id="6891371">)</span><span class="op" id="6891372">;</span>&nbsp;<span class="ident" id="6891374">err</span>&nbsp;<span class="op" id="6891378">!=</span>&nbsp;<span class="builtintype" id="6891381">nil</span>&nbsp;<span class="op" id="6891385">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891389">t</span><span class="op" id="6891390">.</span><span class="ident" id="6891391">Fatalf</span><span class="op" id="6891397">(</span><span class="string" id="6891398">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="6891411">,</span>&nbsp;<span class="ident" id="6891413">err</span><span class="op" id="6891416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891422">b</span>&nbsp;<span class="op" id="6891424">:=</span>&nbsp;<span class="ident" id="6891427">buf</span><span class="op" id="6891430">.</span><span class="ident" id="6891431">Bytes</span><span class="op" id="6891436">(</span><span class="op" id="6891437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891440">if</span>&nbsp;<span class="builtinfunc" id="6891443">len</span><span class="op" id="6891446">(</span><span class="ident" id="6891447">b</span><span class="op" id="6891448">)</span>&nbsp;<span class="op" id="6891450">==</span>&nbsp;<span class="builtinfunc" id="6891453">len</span><span class="op" id="6891456">(</span><span class="ident" id="6891457">jsonBig</span><span class="op" id="6891464">)</span>&nbsp;<span class="op" id="6891466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6891470">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6891519">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891556">t</span><span class="op" id="6891557">.</span><span class="ident" id="6891558">Fatalf</span><span class="op" id="6891564">(</span><span class="string" id="6891565">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="6891601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6891608">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891633">var</span>&nbsp;<span class="ident" id="6891637">buf1</span>&nbsp;<span class="ident" id="6891642">bytes</span><span class="op" id="6891647">.</span><span class="ident" id="6891648">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891656">if</span>&nbsp;<span class="ident" id="6891659">err</span>&nbsp;<span class="op" id="6891663">:=</span>&nbsp;<span class="ident" id="6891666">Indent</span><span class="op" id="6891672">(</span><span class="op" id="6891673">&amp;</span><span class="ident" id="6891674">buf1</span><span class="op" id="6891678">,</span>&nbsp;<span class="ident" id="6891680">b</span><span class="op" id="6891681">,</span>&nbsp;<span class="string" id="6891683">&#34;&#34;</span><span class="op" id="6891685">,</span>&nbsp;<span class="string" id="6891687">&#34;\t&#34;</span><span class="op" id="6891691">)</span><span class="op" id="6891692">;</span>&nbsp;<span class="ident" id="6891694">err</span>&nbsp;<span class="op" id="6891698">!=</span>&nbsp;<span class="builtintype" id="6891701">nil</span>&nbsp;<span class="op" id="6891705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891709">t</span><span class="op" id="6891710">.</span><span class="ident" id="6891711">Fatalf</span><span class="op" id="6891717">(</span><span class="string" id="6891718">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="6891731">,</span>&nbsp;<span class="ident" id="6891733">err</span><span class="op" id="6891736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891742">b1</span>&nbsp;<span class="op" id="6891745">:=</span>&nbsp;<span class="ident" id="6891748">buf1</span><span class="op" id="6891752">.</span><span class="ident" id="6891753">Bytes</span><span class="op" id="6891758">(</span><span class="op" id="6891759">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891762">if</span>&nbsp;<span class="op" id="6891765">!</span><span class="ident" id="6891766">bytes</span><span class="op" id="6891771">.</span><span class="ident" id="6891772">Equal</span><span class="op" id="6891777">(</span><span class="ident" id="6891778">b1</span><span class="op" id="6891780">,</span>&nbsp;<span class="ident" id="6891782">b</span><span class="op" id="6891783">)</span>&nbsp;<span class="op" id="6891785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891789">t</span><span class="op" id="6891790">.</span><span class="ident" id="6891791">Error</span><span class="op" id="6891796">(</span><span class="string" id="6891797">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="6891841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891845">diff</span><span class="op" id="6891849">(</span><span class="ident" id="6891850">t</span><span class="op" id="6891851">,</span>&nbsp;<span class="ident" id="6891853">b1</span><span class="op" id="6891855">,</span>&nbsp;<span class="ident" id="6891857">b</span><span class="op" id="6891858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891862">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891870">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6891874">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891906">buf1</span><span class="op" id="6891910">.</span><span class="ident" id="6891911">Reset</span><span class="op" id="6891916">(</span><span class="op" id="6891917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891920">if</span>&nbsp;<span class="ident" id="6891923">err</span>&nbsp;<span class="op" id="6891927">:=</span>&nbsp;<span class="ident" id="6891930">Compact</span><span class="op" id="6891937">(</span><span class="op" id="6891938">&amp;</span><span class="ident" id="6891939">buf1</span><span class="op" id="6891943">,</span>&nbsp;<span class="ident" id="6891945">b</span><span class="op" id="6891946">)</span><span class="op" id="6891947">;</span>&nbsp;<span class="ident" id="6891949">err</span>&nbsp;<span class="op" id="6891953">!=</span>&nbsp;<span class="builtintype" id="6891956">nil</span>&nbsp;<span class="op" id="6891960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891964">t</span><span class="op" id="6891965">.</span><span class="ident" id="6891966">Fatalf</span><span class="op" id="6891972">(</span><span class="string" id="6891973">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6891986">,</span>&nbsp;<span class="ident" id="6891988">err</span><span class="op" id="6891991">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891997">b1</span>&nbsp;<span class="op" id="6892000">=</span>&nbsp;<span class="ident" id="6892002">buf1</span><span class="op" id="6892006">.</span><span class="ident" id="6892007">Bytes</span><span class="op" id="6892012">(</span><span class="op" id="6892013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892016">if</span>&nbsp;<span class="op" id="6892019">!</span><span class="ident" id="6892020">bytes</span><span class="op" id="6892025">.</span><span class="ident" id="6892026">Equal</span><span class="op" id="6892031">(</span><span class="ident" id="6892032">b1</span><span class="op" id="6892034">,</span>&nbsp;<span class="ident" id="6892036">jsonBig</span><span class="op" id="6892043">)</span>&nbsp;<span class="op" id="6892045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892049">t</span><span class="op" id="6892050">.</span><span class="ident" id="6892051">Error</span><span class="op" id="6892056">(</span><span class="string" id="6892057">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6892094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892098">diff</span><span class="op" id="6892102">(</span><span class="ident" id="6892103">t</span><span class="op" id="6892104">,</span>&nbsp;<span class="ident" id="6892106">b1</span><span class="op" id="6892108">,</span>&nbsp;<span class="ident" id="6892110">jsonBig</span><span class="op" id="6892117">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892121">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892129">}</span><br>
<span class="lineno"></span><span class="op" id="6892131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892134">type</span>&nbsp;<span class="ident" id="6892139">indentErrorTest</span>&nbsp;<span class="keyword" id="6892155">struct</span>&nbsp;<span class="op" id="6892162">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892165">in</span>&nbsp;&nbsp;<span class="builtintype" id="6892169">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892177">err</span>&nbsp;<span class="builtintype" id="6892181">error</span><br>
<span class="lineno"></span><span class="op" id="6892187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892190">var</span>&nbsp;<span class="ident" id="6892194">indentErrorTests</span>&nbsp;<span class="op" id="6892211">=</span>&nbsp;<span class="op" id="6892213">[</span><span class="op" id="6892214">]</span><span class="ident" id="6892215">indentErrorTest</span><span class="op" id="6892230">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892233">{</span><span class="string" id="6892234">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="6892253">,</span>&nbsp;<span class="op" id="6892255">&amp;</span><span class="ident" id="6892256">SyntaxError</span><span class="op" id="6892267">{</span><span class="string" id="6892268">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="6892308">,</span>&nbsp;<span class="num" id="6892310">17</span><span class="op" id="6892312">}</span><span class="op" id="6892313">}</span><span class="op" id="6892314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892317">{</span><span class="string" id="6892318">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="6892343">,</span>&nbsp;<span class="op" id="6892345">&amp;</span><span class="ident" id="6892346">SyntaxError</span><span class="op" id="6892357">{</span><span class="string" id="6892358">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="6892410">,</span>&nbsp;<span class="num" id="6892412">13</span><span class="op" id="6892414">}</span><span class="op" id="6892415">}</span><span class="op" id="6892416">,</span><br>
<span class="lineno"></span><span class="op" id="6892418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892421">func</span>&nbsp;<span class="ident" id="6892426">TestIndentErrors</span><span class="op" id="6892442">(</span><span class="ident" id="6892443">t</span>&nbsp;<span class="op" id="6892445">*</span><span class="ident" id="6892446">testing</span><span class="op" id="6892453">.</span><span class="ident" id="6892454">T</span><span class="op" id="6892455">)</span>&nbsp;<span class="op" id="6892457">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892460">for</span>&nbsp;<span class="ident" id="6892464">i</span><span class="op" id="6892465">,</span>&nbsp;<span class="ident" id="6892467">tt</span>&nbsp;<span class="op" id="6892470">:=</span>&nbsp;<span class="keyword" id="6892473">range</span>&nbsp;<span class="ident" id="6892479">indentErrorTests</span>&nbsp;<span class="op" id="6892496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892500">slice</span>&nbsp;<span class="op" id="6892506">:=</span>&nbsp;<span class="builtinfunc" id="6892509">make</span><span class="op" id="6892513">(</span><span class="op" id="6892514">[</span><span class="op" id="6892515">]</span><span class="builtintype" id="6892516">uint8</span><span class="op" id="6892521">,</span>&nbsp;<span class="num" id="6892523">0</span><span class="op" id="6892524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892528">buf</span>&nbsp;<span class="op" id="6892532">:=</span>&nbsp;<span class="ident" id="6892535">bytes</span><span class="op" id="6892540">.</span><span class="ident" id="6892541">NewBuffer</span><span class="op" id="6892550">(</span><span class="ident" id="6892551">slice</span><span class="op" id="6892556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892560">if</span>&nbsp;<span class="ident" id="6892563">err</span>&nbsp;<span class="op" id="6892567">:=</span>&nbsp;<span class="ident" id="6892570">Indent</span><span class="op" id="6892576">(</span><span class="ident" id="6892577">buf</span><span class="op" id="6892580">,</span>&nbsp;<span class="op" id="6892582">[</span><span class="op" id="6892583">]</span><span class="builtintype" id="6892584">uint8</span><span class="op" id="6892589">(</span><span class="ident" id="6892590">tt</span><span class="op" id="6892592">.</span><span class="ident" id="6892593">in</span><span class="op" id="6892595">)</span><span class="op" id="6892596">,</span>&nbsp;<span class="string" id="6892598">&#34;&#34;</span><span class="op" id="6892600">,</span>&nbsp;<span class="string" id="6892602">&#34;&#34;</span><span class="op" id="6892604">)</span><span class="op" id="6892605">;</span>&nbsp;<span class="ident" id="6892607">err</span>&nbsp;<span class="op" id="6892611">!=</span>&nbsp;<span class="builtintype" id="6892614">nil</span>&nbsp;<span class="op" id="6892618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892623">if</span>&nbsp;<span class="op" id="6892626">!</span><span class="ident" id="6892627">reflect</span><span class="op" id="6892634">.</span><span class="ident" id="6892635">DeepEqual</span><span class="op" id="6892644">(</span><span class="ident" id="6892645">err</span><span class="op" id="6892648">,</span>&nbsp;<span class="ident" id="6892650">tt</span><span class="op" id="6892652">.</span><span class="ident" id="6892653">err</span><span class="op" id="6892656">)</span>&nbsp;<span class="op" id="6892658">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892664">t</span><span class="op" id="6892665">.</span><span class="ident" id="6892666">Errorf</span><span class="op" id="6892672">(</span><span class="string" id="6892673">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="6892691">,</span>&nbsp;<span class="ident" id="6892693">i</span><span class="op" id="6892694">,</span>&nbsp;<span class="ident" id="6892696">err</span><span class="op" id="6892699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892705">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892724">}</span><br>
<span class="lineno">180</span><span class="op" id="6892726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892729">func</span>&nbsp;<span class="ident" id="6892734">TestNextValueBig</span><span class="op" id="6892750">(</span><span class="ident" id="6892751">t</span>&nbsp;<span class="op" id="6892753">*</span><span class="ident" id="6892754">testing</span><span class="op" id="6892761">.</span><span class="ident" id="6892762">T</span><span class="op" id="6892763">)</span>&nbsp;<span class="op" id="6892765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892768">initBig</span><span class="op" id="6892775">(</span><span class="op" id="6892776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892779">var</span>&nbsp;<span class="ident" id="6892783">scan</span>&nbsp;<span class="ident" id="6892788">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892797">item</span><span class="op" id="6892801">,</span>&nbsp;<span class="ident" id="6892803">rest</span><span class="op" id="6892807">,</span>&nbsp;<span class="ident" id="6892809">err</span>&nbsp;<span class="op" id="6892813">:=</span>&nbsp;<span class="ident" id="6892816">nextValue</span><span class="op" id="6892825">(</span><span class="ident" id="6892826">jsonBig</span><span class="op" id="6892833">,</span>&nbsp;<span class="op" id="6892835">&amp;</span><span class="ident" id="6892836">scan</span><span class="op" id="6892840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892843">if</span>&nbsp;<span class="ident" id="6892846">err</span>&nbsp;<span class="op" id="6892850">!=</span>&nbsp;<span class="builtintype" id="6892853">nil</span>&nbsp;<span class="op" id="6892857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892861">t</span><span class="op" id="6892862">.</span><span class="ident" id="6892863">Fatalf</span><span class="op" id="6892869">(</span><span class="string" id="6892870">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="6892885">,</span>&nbsp;<span class="ident" id="6892887">err</span><span class="op" id="6892890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892896">if</span>&nbsp;<span class="builtinfunc" id="6892899">len</span><span class="op" id="6892902">(</span><span class="ident" id="6892903">item</span><span class="op" id="6892907">)</span>&nbsp;<span class="op" id="6892909">!=</span>&nbsp;<span class="builtinfunc" id="6892912">len</span><span class="op" id="6892915">(</span><span class="ident" id="6892916">jsonBig</span><span class="op" id="6892923">)</span>&nbsp;<span class="op" id="6892925">||</span>&nbsp;<span class="op" id="6892928">&amp;</span><span class="ident" id="6892929">item</span><span class="op" id="6892933">[</span><span class="num" id="6892934">0</span><span class="op" id="6892935">]</span>&nbsp;<span class="op" id="6892937">!=</span>&nbsp;<span class="op" id="6892940">&amp;</span><span class="ident" id="6892941">jsonBig</span><span class="op" id="6892948">[</span><span class="num" id="6892949">0</span><span class="op" id="6892950">]</span>&nbsp;<span class="op" id="6892952">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892956">t</span><span class="op" id="6892957">.</span><span class="ident" id="6892958">Errorf</span><span class="op" id="6892964">(</span><span class="string" id="6892965">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6892986">,</span>&nbsp;<span class="builtinfunc" id="6892988">len</span><span class="op" id="6892991">(</span><span class="ident" id="6892992">item</span><span class="op" id="6892996">)</span><span class="op" id="6892997">,</span>&nbsp;<span class="builtinfunc" id="6892999">len</span><span class="op" id="6893002">(</span><span class="ident" id="6893003">jsonBig</span><span class="op" id="6893010">)</span><span class="op" id="6893011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893017">if</span>&nbsp;<span class="builtinfunc" id="6893020">len</span><span class="op" id="6893023">(</span><span class="ident" id="6893024">rest</span><span class="op" id="6893028">)</span>&nbsp;<span class="op" id="6893030">!=</span>&nbsp;<span class="num" id="6893033">0</span>&nbsp;<span class="op" id="6893035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893039">t</span><span class="op" id="6893040">.</span><span class="ident" id="6893041">Errorf</span><span class="op" id="6893047">(</span><span class="string" id="6893048">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6893066">,</span>&nbsp;<span class="builtinfunc" id="6893068">len</span><span class="op" id="6893071">(</span><span class="ident" id="6893072">rest</span><span class="op" id="6893076">)</span><span class="op" id="6893077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893080">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893084">item</span><span class="op" id="6893088">,</span>&nbsp;<span class="ident" id="6893090">rest</span><span class="op" id="6893094">,</span>&nbsp;<span class="ident" id="6893096">err</span>&nbsp;<span class="op" id="6893100">=</span>&nbsp;<span class="ident" id="6893102">nextValue</span><span class="op" id="6893111">(</span><span class="builtinfunc" id="6893112">append</span><span class="op" id="6893118">(</span><span class="ident" id="6893119">jsonBig</span><span class="op" id="6893126">,</span>&nbsp;<span class="string" id="6893128">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="6893141">...</span><span class="op" id="6893144">)</span><span class="op" id="6893145">,</span>&nbsp;<span class="op" id="6893147">&amp;</span><span class="ident" id="6893148">scan</span><span class="op" id="6893152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893155">if</span>&nbsp;<span class="ident" id="6893158">err</span>&nbsp;<span class="op" id="6893162">!=</span>&nbsp;<span class="builtintype" id="6893165">nil</span>&nbsp;<span class="op" id="6893169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893173">t</span><span class="op" id="6893174">.</span><span class="ident" id="6893175">Fatalf</span><span class="op" id="6893181">(</span><span class="string" id="6893182">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="6893203">,</span>&nbsp;<span class="ident" id="6893205">err</span><span class="op" id="6893208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893211">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893214">if</span>&nbsp;<span class="builtinfunc" id="6893217">len</span><span class="op" id="6893220">(</span><span class="ident" id="6893221">item</span><span class="op" id="6893225">)</span>&nbsp;<span class="op" id="6893227">!=</span>&nbsp;<span class="builtinfunc" id="6893230">len</span><span class="op" id="6893233">(</span><span class="ident" id="6893234">jsonBig</span><span class="op" id="6893241">)</span>&nbsp;<span class="op" id="6893243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893247">t</span><span class="op" id="6893248">.</span><span class="ident" id="6893249">Errorf</span><span class="op" id="6893255">(</span><span class="string" id="6893256">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6893277">,</span>&nbsp;<span class="builtinfunc" id="6893279">len</span><span class="op" id="6893282">(</span><span class="ident" id="6893283">item</span><span class="op" id="6893287">)</span><span class="op" id="6893288">,</span>&nbsp;<span class="builtinfunc" id="6893290">len</span><span class="op" id="6893293">(</span><span class="ident" id="6893294">jsonBig</span><span class="op" id="6893301">)</span><span class="op" id="6893302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893308">if</span>&nbsp;<span class="builtintype" id="6893311">string</span><span class="op" id="6893317">(</span><span class="ident" id="6893318">rest</span><span class="op" id="6893322">)</span>&nbsp;<span class="op" id="6893324">!=</span>&nbsp;<span class="string" id="6893327">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="6893341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893345">t</span><span class="op" id="6893346">.</span><span class="ident" id="6893347">Errorf</span><span class="op" id="6893353">(</span><span class="string" id="6893354">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6893372">,</span>&nbsp;<span class="builtinfunc" id="6893374">len</span><span class="op" id="6893377">(</span><span class="ident" id="6893378">rest</span><span class="op" id="6893382">)</span><span class="op" id="6893383">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893386">}</span><br>
<span class="lineno"></span><span class="op" id="6893388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893391">var</span>&nbsp;<span class="ident" id="6893395">benchScan</span>&nbsp;<span class="ident" id="6893405">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="6893414">func</span>&nbsp;<span class="ident" id="6893419">BenchmarkSkipValue</span><span class="op" id="6893437">(</span><span class="ident" id="6893438">b</span>&nbsp;<span class="op" id="6893440">*</span><span class="ident" id="6893441">testing</span><span class="op" id="6893448">.</span><span class="ident" id="6893449">B</span><span class="op" id="6893450">)</span>&nbsp;<span class="op" id="6893452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893455">initBig</span><span class="op" id="6893462">(</span><span class="op" id="6893463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893466">for</span>&nbsp;<span class="ident" id="6893470">i</span>&nbsp;<span class="op" id="6893472">:=</span>&nbsp;<span class="num" id="6893475">0</span><span class="op" id="6893476">;</span>&nbsp;<span class="ident" id="6893478">i</span>&nbsp;<span class="op" id="6893480">&lt;</span>&nbsp;<span class="ident" id="6893482">b</span><span class="op" id="6893483">.</span><span class="ident" id="6893484">N</span><span class="op" id="6893485">;</span>&nbsp;<span class="ident" id="6893487">i</span><span class="op" id="6893488">++</span>&nbsp;<span class="op" id="6893491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893495">nextValue</span><span class="op" id="6893504">(</span><span class="ident" id="6893505">jsonBig</span><span class="op" id="6893512">,</span>&nbsp;<span class="op" id="6893514">&amp;</span><span class="ident" id="6893515">benchScan</span><span class="op" id="6893524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893527">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893530">b</span><span class="op" id="6893531">.</span><span class="ident" id="6893532">SetBytes</span><span class="op" id="6893540">(</span><span class="ident" id="6893541">int64</span><span class="op" id="6893546">(</span><span class="builtinfunc" id="6893547">len</span><span class="op" id="6893550">(</span><span class="ident" id="6893551">jsonBig</span><span class="op" id="6893558">)</span><span class="op" id="6893559">)</span><span class="op" id="6893560">)</span><br>
<span class="lineno"></span><span class="op" id="6893562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893565">func</span>&nbsp;<span class="ident" id="6893570">diff</span><span class="op" id="6893574">(</span><span class="ident" id="6893575">t</span>&nbsp;<span class="op" id="6893577">*</span><span class="ident" id="6893578">testing</span><span class="op" id="6893585">.</span><span class="ident" id="6893586">T</span><span class="op" id="6893587">,</span>&nbsp;<span class="ident" id="6893589">a</span><span class="op" id="6893590">,</span>&nbsp;<span class="ident" id="6893592">b</span>&nbsp;<span class="op" id="6893594">[</span><span class="op" id="6893595">]</span><span class="builtintype" id="6893596">byte</span><span class="op" id="6893600">)</span>&nbsp;<span class="op" id="6893602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893605">for</span>&nbsp;<span class="ident" id="6893609">i</span>&nbsp;<span class="op" id="6893611">:=</span>&nbsp;<span class="num" id="6893614">0</span><span class="op" id="6893615">;</span>&nbsp;<span class="op" id="6893617">;</span>&nbsp;<span class="ident" id="6893619">i</span><span class="op" id="6893620">++</span>&nbsp;<span class="op" id="6893623">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893627">if</span>&nbsp;<span class="ident" id="6893630">i</span>&nbsp;<span class="op" id="6893632">&gt;=</span>&nbsp;<span class="builtinfunc" id="6893635">len</span><span class="op" id="6893638">(</span><span class="ident" id="6893639">a</span><span class="op" id="6893640">)</span>&nbsp;<span class="op" id="6893642">||</span>&nbsp;<span class="ident" id="6893645">i</span>&nbsp;<span class="op" id="6893647">&gt;=</span>&nbsp;<span class="builtinfunc" id="6893650">len</span><span class="op" id="6893653">(</span><span class="ident" id="6893654">b</span><span class="op" id="6893655">)</span>&nbsp;<span class="op" id="6893657">||</span>&nbsp;<span class="ident" id="6893660">a</span><span class="op" id="6893661">[</span><span class="ident" id="6893662">i</span><span class="op" id="6893663">]</span>&nbsp;<span class="op" id="6893665">!=</span>&nbsp;<span class="ident" id="6893668">b</span><span class="op" id="6893669">[</span><span class="ident" id="6893670">i</span><span class="op" id="6893671">]</span>&nbsp;<span class="op" id="6893673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893678">j</span>&nbsp;<span class="op" id="6893680">:=</span>&nbsp;<span class="ident" id="6893683">i</span>&nbsp;<span class="op" id="6893685">-</span>&nbsp;<span class="num" id="6893687">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893693">if</span>&nbsp;<span class="ident" id="6893696">j</span>&nbsp;<span class="op" id="6893698">&lt;</span>&nbsp;<span class="num" id="6893700">0</span>&nbsp;<span class="op" id="6893702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893708">j</span>&nbsp;<span class="op" id="6893710">=</span>&nbsp;<span class="num" id="6893712">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893717">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893722">t</span><span class="op" id="6893723">.</span><span class="ident" id="6893724">Errorf</span><span class="op" id="6893730">(</span><span class="string" id="6893731">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="6893764">,</span>&nbsp;<span class="ident" id="6893766">i</span><span class="op" id="6893767">,</span>&nbsp;<span class="ident" id="6893769">trim</span><span class="op" id="6893773">(</span><span class="ident" id="6893774">a</span><span class="op" id="6893775">[</span><span class="ident" id="6893776">j</span><span class="op" id="6893777">:</span><span class="op" id="6893778">]</span><span class="op" id="6893779">)</span><span class="op" id="6893780">,</span>&nbsp;<span class="ident" id="6893782">trim</span><span class="op" id="6893786">(</span><span class="ident" id="6893787">b</span><span class="op" id="6893788">[</span><span class="ident" id="6893789">j</span><span class="op" id="6893790">:</span><span class="op" id="6893791">]</span><span class="op" id="6893792">)</span><span class="op" id="6893793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893810">}</span><br>
<span class="lineno"></span><span class="op" id="6893812">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6893815">func</span>&nbsp;<span class="ident" id="6893820">trim</span><span class="op" id="6893824">(</span><span class="ident" id="6893825">b</span>&nbsp;<span class="op" id="6893827">[</span><span class="op" id="6893828">]</span><span class="builtintype" id="6893829">byte</span><span class="op" id="6893833">)</span>&nbsp;<span class="op" id="6893835">[</span><span class="op" id="6893836">]</span><span class="builtintype" id="6893837">byte</span>&nbsp;<span class="op" id="6893842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893845">if</span>&nbsp;<span class="builtinfunc" id="6893848">len</span><span class="op" id="6893851">(</span><span class="ident" id="6893852">b</span><span class="op" id="6893853">)</span>&nbsp;<span class="op" id="6893855">&gt;</span>&nbsp;<span class="num" id="6893857">20</span>&nbsp;<span class="op" id="6893860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893864">return</span>&nbsp;<span class="ident" id="6893871">b</span><span class="op" id="6893872">[</span><span class="num" id="6893873">0</span><span class="op" id="6893874">:</span><span class="num" id="6893875">20</span><span class="op" id="6893877">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893880">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893883">return</span>&nbsp;<span class="ident" id="6893890">b</span><br>
<span class="lineno"></span><span class="op" id="6893892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6893895">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6893930">var</span>&nbsp;<span class="ident" id="6893934">jsonBig</span>&nbsp;<span class="op" id="6893942">[</span><span class="op" id="6893943">]</span><span class="builtintype" id="6893944">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893950">func</span>&nbsp;<span class="ident" id="6893955">initBig</span><span class="op" id="6893962">(</span><span class="op" id="6893963">)</span>&nbsp;<span class="op" id="6893965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893968">n</span>&nbsp;<span class="op" id="6893970">:=</span>&nbsp;<span class="num" id="6893973">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893980">if</span>&nbsp;<span class="ident" id="6893983">testing</span><span class="op" id="6893990">.</span><span class="ident" id="6893991">Short</span><span class="op" id="6893996">(</span><span class="op" id="6893997">)</span>&nbsp;<span class="op" id="6893999">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894003">n</span>&nbsp;<span class="op" id="6894005">=</span>&nbsp;<span class="num" id="6894007">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894015">b</span><span class="op" id="6894016">,</span>&nbsp;<span class="ident" id="6894018">err</span>&nbsp;<span class="op" id="6894022">:=</span>&nbsp;<span class="ident" id="6894025">Marshal</span><span class="op" id="6894032">(</span><span class="ident" id="6894033">genValue</span><span class="op" id="6894041">(</span><span class="ident" id="6894042">n</span><span class="op" id="6894043">)</span><span class="op" id="6894044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894047">if</span>&nbsp;<span class="ident" id="6894050">err</span>&nbsp;<span class="op" id="6894054">!=</span>&nbsp;<span class="builtintype" id="6894057">nil</span>&nbsp;<span class="op" id="6894061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6894065">panic</span><span class="op" id="6894070">(</span><span class="ident" id="6894071">err</span><span class="op" id="6894074">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894080">jsonBig</span>&nbsp;<span class="op" id="6894088">=</span>&nbsp;<span class="ident" id="6894090">b</span><br>
<span class="lineno"></span><span class="op" id="6894092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894095">func</span>&nbsp;<span class="ident" id="6894100">genValue</span><span class="op" id="6894108">(</span><span class="ident" id="6894109">n</span>&nbsp;<span class="builtintype" id="6894111">int</span><span class="op" id="6894114">)</span>&nbsp;<span class="keyword" id="6894116">interface</span><span class="op" id="6894125">{</span><span class="op" id="6894126">}</span>&nbsp;<span class="op" id="6894128">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894131">if</span>&nbsp;<span class="ident" id="6894134">n</span>&nbsp;<span class="op" id="6894136">&gt;</span>&nbsp;<span class="num" id="6894138">1</span>&nbsp;<span class="op" id="6894140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894144">switch</span>&nbsp;<span class="ident" id="6894151">rand</span><span class="op" id="6894155">.</span><span class="ident" id="6894156">Intn</span><span class="op" id="6894160">(</span><span class="num" id="6894161">2</span><span class="op" id="6894162">)</span>&nbsp;<span class="op" id="6894164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894168">case</span>&nbsp;<span class="num" id="6894173">0</span><span class="op" id="6894174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894179">return</span>&nbsp;<span class="ident" id="6894186">genArray</span><span class="op" id="6894194">(</span><span class="ident" id="6894195">n</span><span class="op" id="6894196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894200">case</span>&nbsp;<span class="num" id="6894205">1</span><span class="op" id="6894206">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894211">return</span>&nbsp;<span class="ident" id="6894218">genMap</span><span class="op" id="6894224">(</span><span class="ident" id="6894225">n</span><span class="op" id="6894226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894236">switch</span>&nbsp;<span class="ident" id="6894243">rand</span><span class="op" id="6894247">.</span><span class="ident" id="6894248">Intn</span><span class="op" id="6894252">(</span><span class="num" id="6894253">3</span><span class="op" id="6894254">)</span>&nbsp;<span class="op" id="6894256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894259">case</span>&nbsp;<span class="num" id="6894264">0</span><span class="op" id="6894265">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894269">return</span>&nbsp;<span class="ident" id="6894276">rand</span><span class="op" id="6894280">.</span><span class="ident" id="6894281">Intn</span><span class="op" id="6894285">(</span><span class="num" id="6894286">2</span><span class="op" id="6894287">)</span>&nbsp;<span class="op" id="6894289">==</span>&nbsp;<span class="num" id="6894292">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894295">case</span>&nbsp;<span class="num" id="6894300">1</span><span class="op" id="6894301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894305">return</span>&nbsp;<span class="ident" id="6894312">rand</span><span class="op" id="6894316">.</span><span class="ident" id="6894317">NormFloat64</span><span class="op" id="6894328">(</span><span class="op" id="6894329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894332">case</span>&nbsp;<span class="num" id="6894337">2</span><span class="op" id="6894338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894342">return</span>&nbsp;<span class="ident" id="6894349">genString</span><span class="op" id="6894358">(</span><span class="num" id="6894359">30</span><span class="op" id="6894361">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6894367">panic</span><span class="op" id="6894372">(</span><span class="string" id="6894373">&#34;unreachable&#34;</span><span class="op" id="6894386">)</span><br>
<span class="lineno"></span><span class="op" id="6894388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894391">func</span>&nbsp;<span class="ident" id="6894396">genString</span><span class="op" id="6894405">(</span><span class="ident" id="6894406">stddev</span>&nbsp;<span class="builtintype" id="6894413">float64</span><span class="op" id="6894420">)</span>&nbsp;<span class="builtintype" id="6894422">string</span>&nbsp;<span class="op" id="6894429">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894432">n</span>&nbsp;<span class="op" id="6894434">:=</span>&nbsp;<span class="builtintype" id="6894437">int</span><span class="op" id="6894440">(</span><span class="ident" id="6894441">math</span><span class="op" id="6894445">.</span><span class="ident" id="6894446">Abs</span><span class="op" id="6894449">(</span><span class="ident" id="6894450">rand</span><span class="op" id="6894454">.</span><span class="ident" id="6894455">NormFloat64</span><span class="op" id="6894466">(</span><span class="op" id="6894467">)</span><span class="op" id="6894468">*</span><span class="ident" id="6894469">stddev</span>&nbsp;<span class="op" id="6894476">+</span>&nbsp;<span class="ident" id="6894478">stddev</span><span class="op" id="6894484">/</span><span class="num" id="6894485">2</span><span class="op" id="6894486">)</span><span class="op" id="6894487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894490">c</span>&nbsp;<span class="op" id="6894492">:=</span>&nbsp;<span class="builtinfunc" id="6894495">make</span><span class="op" id="6894499">(</span><span class="op" id="6894500">[</span><span class="op" id="6894501">]</span><span class="builtintype" id="6894502">rune</span><span class="op" id="6894506">,</span>&nbsp;<span class="ident" id="6894508">n</span><span class="op" id="6894509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894512">for</span>&nbsp;<span class="ident" id="6894516">i</span>&nbsp;<span class="op" id="6894518">:=</span>&nbsp;<span class="keyword" id="6894521">range</span>&nbsp;<span class="ident" id="6894527">c</span>&nbsp;<span class="op" id="6894529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894533">f</span>&nbsp;<span class="op" id="6894535">:=</span>&nbsp;<span class="ident" id="6894538">math</span><span class="op" id="6894542">.</span><span class="ident" id="6894543">Abs</span><span class="op" id="6894546">(</span><span class="ident" id="6894547">rand</span><span class="op" id="6894551">.</span><span class="ident" id="6894552">NormFloat64</span><span class="op" id="6894563">(</span><span class="op" id="6894564">)</span><span class="op" id="6894565">*</span><span class="num" id="6894566">64</span>&nbsp;<span class="op" id="6894569">+</span>&nbsp;<span class="num" id="6894571">32</span><span class="op" id="6894573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894577">if</span>&nbsp;<span class="ident" id="6894580">f</span>&nbsp;<span class="op" id="6894582">&gt;</span>&nbsp;<span class="num" id="6894584">0x10ffff</span>&nbsp;<span class="op" id="6894593">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894598">f</span>&nbsp;<span class="op" id="6894600">=</span>&nbsp;<span class="num" id="6894602">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894617">c</span><span class="op" id="6894618">[</span><span class="ident" id="6894619">i</span><span class="op" id="6894620">]</span>&nbsp;<span class="op" id="6894622">=</span>&nbsp;<span class="builtintype" id="6894624">rune</span><span class="op" id="6894628">(</span><span class="ident" id="6894629">f</span><span class="op" id="6894630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894636">return</span>&nbsp;<span class="builtintype" id="6894643">string</span><span class="op" id="6894649">(</span><span class="ident" id="6894650">c</span><span class="op" id="6894651">)</span><br>
<span class="lineno">285</span><span class="op" id="6894653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894656">func</span>&nbsp;<span class="ident" id="6894661">genArray</span><span class="op" id="6894669">(</span><span class="ident" id="6894670">n</span>&nbsp;<span class="builtintype" id="6894672">int</span><span class="op" id="6894675">)</span>&nbsp;<span class="op" id="6894677">[</span><span class="op" id="6894678">]</span><span class="keyword" id="6894679">interface</span><span class="op" id="6894688">{</span><span class="op" id="6894689">}</span>&nbsp;<span class="op" id="6894691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894694">f</span>&nbsp;<span class="op" id="6894696">:=</span>&nbsp;<span class="builtintype" id="6894699">int</span><span class="op" id="6894702">(</span><span class="ident" id="6894703">math</span><span class="op" id="6894707">.</span><span class="ident" id="6894708">Abs</span><span class="op" id="6894711">(</span><span class="ident" id="6894712">rand</span><span class="op" id="6894716">.</span><span class="ident" id="6894717">NormFloat64</span><span class="op" id="6894728">(</span><span class="op" id="6894729">)</span><span class="op" id="6894730">)</span>&nbsp;<span class="op" id="6894732">*</span>&nbsp;<span class="ident" id="6894734">math</span><span class="op" id="6894738">.</span><span class="ident" id="6894739">Min</span><span class="op" id="6894742">(</span><span class="num" id="6894743">10</span><span class="op" id="6894745">,</span>&nbsp;<span class="builtintype" id="6894747">float64</span><span class="op" id="6894754">(</span><span class="ident" id="6894755">n</span><span class="op" id="6894756">/</span><span class="num" id="6894757">2</span><span class="op" id="6894758">)</span><span class="op" id="6894759">)</span><span class="op" id="6894760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894763">if</span>&nbsp;<span class="ident" id="6894766">f</span>&nbsp;<span class="op" id="6894768">&gt;</span>&nbsp;<span class="ident" id="6894770">n</span>&nbsp;<span class="op" id="6894772">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894776">f</span>&nbsp;<span class="op" id="6894778">=</span>&nbsp;<span class="ident" id="6894780">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894786">if</span>&nbsp;<span class="ident" id="6894789">f</span>&nbsp;<span class="op" id="6894791">&lt;</span>&nbsp;<span class="num" id="6894793">1</span>&nbsp;<span class="op" id="6894795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894799">f</span>&nbsp;<span class="op" id="6894801">=</span>&nbsp;<span class="num" id="6894803">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894806">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894809">x</span>&nbsp;<span class="op" id="6894811">:=</span>&nbsp;<span class="builtinfunc" id="6894814">make</span><span class="op" id="6894818">(</span><span class="op" id="6894819">[</span><span class="op" id="6894820">]</span><span class="keyword" id="6894821">interface</span><span class="op" id="6894830">{</span><span class="op" id="6894831">}</span><span class="op" id="6894832">,</span>&nbsp;<span class="ident" id="6894834">f</span><span class="op" id="6894835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894838">for</span>&nbsp;<span class="ident" id="6894842">i</span>&nbsp;<span class="op" id="6894844">:=</span>&nbsp;<span class="keyword" id="6894847">range</span>&nbsp;<span class="ident" id="6894853">x</span>&nbsp;<span class="op" id="6894855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894859">x</span><span class="op" id="6894860">[</span><span class="ident" id="6894861">i</span><span class="op" id="6894862">]</span>&nbsp;<span class="op" id="6894864">=</span>&nbsp;<span class="ident" id="6894866">genValue</span><span class="op" id="6894874">(</span><span class="op" id="6894875">(</span><span class="op" id="6894876">(</span><span class="ident" id="6894877">i</span><span class="op" id="6894878">+</span><span class="num" id="6894879">1</span><span class="op" id="6894880">)</span><span class="op" id="6894881">*</span><span class="ident" id="6894882">n</span><span class="op" id="6894883">)</span><span class="op" id="6894884">/</span><span class="ident" id="6894885">f</span>&nbsp;<span class="op" id="6894887">-</span>&nbsp;<span class="op" id="6894889">(</span><span class="ident" id="6894890">i</span><span class="op" id="6894891">*</span><span class="ident" id="6894892">n</span><span class="op" id="6894893">)</span><span class="op" id="6894894">/</span><span class="ident" id="6894895">f</span><span class="op" id="6894896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894902">return</span>&nbsp;<span class="ident" id="6894909">x</span><br>
<span class="lineno">300</span><span class="op" id="6894911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894914">func</span>&nbsp;<span class="ident" id="6894919">genMap</span><span class="op" id="6894925">(</span><span class="ident" id="6894926">n</span>&nbsp;<span class="builtintype" id="6894928">int</span><span class="op" id="6894931">)</span>&nbsp;<span class="keyword" id="6894933">map</span><span class="op" id="6894936">[</span><span class="builtintype" id="6894937">string</span><span class="op" id="6894943">]</span><span class="keyword" id="6894944">interface</span><span class="op" id="6894953">{</span><span class="op" id="6894954">}</span>&nbsp;<span class="op" id="6894956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894959">f</span>&nbsp;<span class="op" id="6894961">:=</span>&nbsp;<span class="builtintype" id="6894964">int</span><span class="op" id="6894967">(</span><span class="ident" id="6894968">math</span><span class="op" id="6894972">.</span><span class="ident" id="6894973">Abs</span><span class="op" id="6894976">(</span><span class="ident" id="6894977">rand</span><span class="op" id="6894981">.</span><span class="ident" id="6894982">NormFloat64</span><span class="op" id="6894993">(</span><span class="op" id="6894994">)</span><span class="op" id="6894995">)</span>&nbsp;<span class="op" id="6894997">*</span>&nbsp;<span class="ident" id="6894999">math</span><span class="op" id="6895003">.</span><span class="ident" id="6895004">Min</span><span class="op" id="6895007">(</span><span class="num" id="6895008">10</span><span class="op" id="6895010">,</span>&nbsp;<span class="builtintype" id="6895012">float64</span><span class="op" id="6895019">(</span><span class="ident" id="6895020">n</span><span class="op" id="6895021">/</span><span class="num" id="6895022">2</span><span class="op" id="6895023">)</span><span class="op" id="6895024">)</span><span class="op" id="6895025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6895028">if</span>&nbsp;<span class="ident" id="6895031">f</span>&nbsp;<span class="op" id="6895033">&gt;</span>&nbsp;<span class="ident" id="6895035">n</span>&nbsp;<span class="op" id="6895037">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6895041">f</span>&nbsp;<span class="op" id="6895043">=</span>&nbsp;<span class="ident" id="6895045">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6895048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6895051">if</span>&nbsp;<span class="ident" id="6895054">n</span>&nbsp;<span class="op" id="6895056">&gt;</span>&nbsp;<span class="num" id="6895058">0</span>&nbsp;<span class="op" id="6895060">&amp;&amp;</span>&nbsp;<span class="ident" id="6895063">f</span>&nbsp;<span class="op" id="6895065">==</span>&nbsp;<span class="num" id="6895068">0</span>&nbsp;<span class="op" id="6895070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6895074">f</span>&nbsp;<span class="op" id="6895076">=</span>&nbsp;<span class="num" id="6895078">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6895081">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6895084">x</span>&nbsp;<span class="op" id="6895086">:=</span>&nbsp;<span class="builtinfunc" id="6895089">make</span><span class="op" id="6895093">(</span><span class="keyword" id="6895094">map</span><span class="op" id="6895097">[</span><span class="builtintype" id="6895098">string</span><span class="op" id="6895104">]</span><span class="keyword" id="6895105">interface</span><span class="op" id="6895114">{</span><span class="op" id="6895115">}</span><span class="op" id="6895116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6895119">for</span>&nbsp;<span class="ident" id="6895123">i</span>&nbsp;<span class="op" id="6895125">:=</span>&nbsp;<span class="num" id="6895128">0</span><span class="op" id="6895129">;</span>&nbsp;<span class="ident" id="6895131">i</span>&nbsp;<span class="op" id="6895133">&lt;</span>&nbsp;<span class="ident" id="6895135">f</span><span class="op" id="6895136">;</span>&nbsp;<span class="ident" id="6895138">i</span><span class="op" id="6895139">++</span>&nbsp;<span class="op" id="6895142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6895146">x</span><span class="op" id="6895147">[</span><span class="ident" id="6895148">genString</span><span class="op" id="6895157">(</span><span class="num" id="6895158">10</span><span class="op" id="6895160">)</span><span class="op" id="6895161">]</span>&nbsp;<span class="op" id="6895163">=</span>&nbsp;<span class="ident" id="6895165">genValue</span><span class="op" id="6895173">(</span><span class="op" id="6895174">(</span><span class="op" id="6895175">(</span><span class="ident" id="6895176">i</span><span class="op" id="6895177">+</span><span class="num" id="6895178">1</span><span class="op" id="6895179">)</span><span class="op" id="6895180">*</span><span class="ident" id="6895181">n</span><span class="op" id="6895182">)</span><span class="op" id="6895183">/</span><span class="ident" id="6895184">f</span>&nbsp;<span class="op" id="6895186">-</span>&nbsp;<span class="op" id="6895188">(</span><span class="ident" id="6895189">i</span><span class="op" id="6895190">*</span><span class="ident" id="6895191">n</span><span class="op" id="6895192">)</span><span class="op" id="6895193">/</span><span class="ident" id="6895194">f</span><span class="op" id="6895195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6895198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6895201">return</span>&nbsp;<span class="ident" id="6895208">x</span><br>
<span class="lineno">315</span><span class="op" id="6895210">}</span>
</div>
</body>
</html>
