<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6916591">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6916647">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6916701">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6916752">package</span>&nbsp;<span class="ident" id="6916760">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6916767">import</span>&nbsp;<span class="op" id="6916774">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6916777">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6916783">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6916794">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6916804">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6916807">const</span>&nbsp;<span class="ident" id="6916813">quote</span>&nbsp;<span class="op" id="6916819">=</span>&nbsp;<span class="string" id="6916821">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6916826">type</span>&nbsp;<span class="ident" id="6916831">readTest</span>&nbsp;<span class="keyword" id="6916840">struct</span>&nbsp;<span class="op" id="6916847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6916850">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6916909">in</span>&nbsp;&nbsp;<span class="builtintype" id="6916913">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6916921">err</span>&nbsp;<span class="builtintype" id="6916925">string</span><br>
<span class="lineno"></span><span class="op" id="6916932">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6916935">var</span>&nbsp;<span class="ident" id="6916939">readImportsTests</span>&nbsp;<span class="op" id="6916956">=</span>&nbsp;<span class="op" id="6916958">[</span><span class="op" id="6916959">]</span><span class="ident" id="6916960">readTest</span><span class="op" id="6916968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6916971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6916975">`package&nbsp;p`</span><span class="op" id="6916986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6916990">&#34;&#34;</span><span class="op" id="6916992">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6916995">}</span><span class="op" id="6916996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6916999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917003">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="6917026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917030">&#34;&#34;</span><span class="op" id="6917032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917035">}</span><span class="op" id="6917036">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917043">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="6917068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917072">&#34;&#34;</span><span class="op" id="6917074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917077">}</span><span class="op" id="6917078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917081">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917085">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="6917121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917125">&#34;&#34;</span><span class="op" id="6917127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917130">}</span><span class="op" id="6917131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917138">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span>&nbsp;<span class="op" id="6917299">+</span>&nbsp;<span class="ident" id="6917301">quote</span>&nbsp;<span class="op" id="6917307">+</span>&nbsp;<span class="string" id="6917309">`x`</span>&nbsp;<span class="op" id="6917313">+</span>&nbsp;<span class="ident" id="6917315">quote</span>&nbsp;<span class="op" id="6917321">+</span>&nbsp;<span class="string" id="6917323">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="6917344">+</span>&nbsp;<span class="ident" id="6917346">quote</span>&nbsp;<span class="op" id="6917352">+</span>&nbsp;<span class="string" id="6917354">`x`</span>&nbsp;<span class="op" id="6917358">+</span>&nbsp;<span class="ident" id="6917360">quote</span>&nbsp;<span class="op" id="6917366">+</span>&nbsp;<span class="string" id="6917368">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspa&nbsp;`</span>&nbsp;<span class="op" id="6917377">+</span>&nbsp;<span class="ident" id="6917379">quote</span>&nbsp;<span class="op" id="6917385">+</span>&nbsp;<span class="string" id="6917387">`x`</span>&nbsp;<span class="op" id="6917391">+</span>&nbsp;<span class="ident" id="6917393">quote</span>&nbsp;<span class="op" id="6917399">+</span>&nbsp;<span class="string" id="6917401">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspimport();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp`</span><span class="op" id="6917511">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917515">&#34;&#34;</span><span class="op" id="6917517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917520">}</span><span class="op" id="6917521">,</span><br>
<span class="lineno"></span><span class="op" id="6917523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6917526">var</span>&nbsp;<span class="ident" id="6917530">readCommentsTests</span>&nbsp;<span class="op" id="6917548">=</span>&nbsp;<span class="op" id="6917550">[</span><span class="op" id="6917551">]</span><span class="ident" id="6917552">readTest</span><span class="op" id="6917560">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917567">`ℙpackage&nbsp;p`</span><span class="op" id="6917581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917585">&#34;&#34;</span><span class="op" id="6917587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917590">}</span><span class="op" id="6917591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917594">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917598">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="6917624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917628">&#34;&#34;</span><span class="op" id="6917630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917633">}</span><span class="op" id="6917634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917641">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="6917669">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917673">&#34;&#34;</span><span class="op" id="6917675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917678">}</span><span class="op" id="6917679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917686">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspℙHello,&nbsp;world`</span><span class="op" id="6917773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6917777">&#34;&#34;</span><span class="op" id="6917779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6917782">}</span><span class="op" id="6917783">,</span><br>
<span class="lineno">95</span><span class="op" id="6917785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6917788">func</span>&nbsp;<span class="ident" id="6917793">testRead</span><span class="op" id="6917801">(</span><span class="ident" id="6917802">t</span>&nbsp;<span class="op" id="6917804">*</span><span class="ident" id="6917805">testing</span><span class="op" id="6917812">.</span><span class="ident" id="6917813">T</span><span class="op" id="6917814">,</span>&nbsp;<span class="ident" id="6917816">tests</span>&nbsp;<span class="op" id="6917822">[</span><span class="op" id="6917823">]</span><span class="ident" id="6917824">readTest</span><span class="op" id="6917832">,</span>&nbsp;<span class="ident" id="6917834">read</span>&nbsp;<span class="keyword" id="6917839">func</span><span class="op" id="6917843">(</span><span class="ident" id="6917844">io</span><span class="op" id="6917846">.</span><span class="ident" id="6917847">Reader</span><span class="op" id="6917853">)</span>&nbsp;<span class="op" id="6917855">(</span><span class="op" id="6917856">[</span><span class="op" id="6917857">]</span><span class="builtintype" id="6917858">byte</span><span class="op" id="6917862">,</span>&nbsp;<span class="builtintype" id="6917864">error</span><span class="op" id="6917869">)</span><span class="op" id="6917870">)</span>&nbsp;<span class="op" id="6917872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6917875">for</span>&nbsp;<span class="ident" id="6917879">i</span><span class="op" id="6917880">,</span>&nbsp;<span class="ident" id="6917882">tt</span>&nbsp;<span class="op" id="6917885">:=</span>&nbsp;<span class="keyword" id="6917888">range</span>&nbsp;<span class="ident" id="6917894">tests</span>&nbsp;<span class="op" id="6917900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6917904">var</span>&nbsp;<span class="ident" id="6917908">in</span><span class="op" id="6917910">,</span>&nbsp;<span class="ident" id="6917912">testOut</span>&nbsp;<span class="builtintype" id="6917920">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6917929">j</span>&nbsp;<span class="op" id="6917931">:=</span>&nbsp;<span class="ident" id="6917934">strings</span><span class="op" id="6917941">.</span><span class="ident" id="6917942">Index</span><span class="op" id="6917947">(</span><span class="ident" id="6917948">tt</span><span class="op" id="6917950">.</span><span class="ident" id="6917951">in</span><span class="op" id="6917953">,</span>&nbsp;<span class="string" id="6917955">&#34;ℙ&#34;</span><span class="op" id="6917960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6917964">if</span>&nbsp;<span class="ident" id="6917967">j</span>&nbsp;<span class="op" id="6917969">&lt;</span>&nbsp;<span class="num" id="6917971">0</span>&nbsp;<span class="op" id="6917973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6917978">in</span>&nbsp;<span class="op" id="6917981">=</span>&nbsp;<span class="ident" id="6917983">tt</span><span class="op" id="6917985">.</span><span class="ident" id="6917986">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6917992">testOut</span>&nbsp;<span class="op" id="6918000">=</span>&nbsp;<span class="ident" id="6918002">tt</span><span class="op" id="6918004">.</span><span class="ident" id="6918005">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918010">}</span>&nbsp;<span class="keyword" id="6918012">else</span>&nbsp;<span class="op" id="6918017">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918022">in</span>&nbsp;<span class="op" id="6918025">=</span>&nbsp;<span class="ident" id="6918027">tt</span><span class="op" id="6918029">.</span><span class="ident" id="6918030">in</span><span class="op" id="6918032">[</span><span class="op" id="6918033">:</span><span class="ident" id="6918034">j</span><span class="op" id="6918035">]</span>&nbsp;<span class="op" id="6918037">+</span>&nbsp;<span class="ident" id="6918039">tt</span><span class="op" id="6918041">.</span><span class="ident" id="6918042">in</span><span class="op" id="6918044">[</span><span class="ident" id="6918045">j</span><span class="op" id="6918046">+</span><span class="builtinfunc" id="6918047">len</span><span class="op" id="6918050">(</span><span class="string" id="6918051">&#34;ℙ&#34;</span><span class="op" id="6918056">)</span><span class="op" id="6918057">:</span><span class="op" id="6918058">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918063">testOut</span>&nbsp;<span class="op" id="6918071">=</span>&nbsp;<span class="ident" id="6918073">tt</span><span class="op" id="6918075">.</span><span class="ident" id="6918076">in</span><span class="op" id="6918078">[</span><span class="op" id="6918079">:</span><span class="ident" id="6918080">j</span><span class="op" id="6918081">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918089">r</span>&nbsp;<span class="op" id="6918091">:=</span>&nbsp;<span class="ident" id="6918094">strings</span><span class="op" id="6918101">.</span><span class="ident" id="6918102">NewReader</span><span class="op" id="6918111">(</span><span class="ident" id="6918112">in</span><span class="op" id="6918114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918118">buf</span><span class="op" id="6918121">,</span>&nbsp;<span class="ident" id="6918123">err</span>&nbsp;<span class="op" id="6918127">:=</span>&nbsp;<span class="ident" id="6918130">read</span><span class="op" id="6918134">(</span><span class="ident" id="6918135">r</span><span class="op" id="6918136">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918140">if</span>&nbsp;<span class="ident" id="6918143">err</span>&nbsp;<span class="op" id="6918147">!=</span>&nbsp;<span class="ident" id="6918150">nil</span>&nbsp;<span class="op" id="6918154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918159">if</span>&nbsp;<span class="ident" id="6918162">tt</span><span class="op" id="6918164">.</span><span class="ident" id="6918165">err</span>&nbsp;<span class="op" id="6918169">==</span>&nbsp;<span class="string" id="6918172">&#34;&#34;</span>&nbsp;<span class="op" id="6918175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918181">t</span><span class="op" id="6918182">.</span><span class="ident" id="6918183">Errorf</span><span class="op" id="6918189">(</span><span class="string" id="6918190">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="6918226">,</span>&nbsp;<span class="ident" id="6918228">i</span><span class="op" id="6918229">,</span>&nbsp;<span class="ident" id="6918231">err</span><span class="op" id="6918234">,</span>&nbsp;<span class="builtintype" id="6918236">string</span><span class="op" id="6918242">(</span><span class="ident" id="6918243">buf</span><span class="op" id="6918246">)</span><span class="op" id="6918247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918253">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918265">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918270">if</span>&nbsp;<span class="op" id="6918273">!</span><span class="ident" id="6918274">strings</span><span class="op" id="6918281">.</span><span class="ident" id="6918282">Contains</span><span class="op" id="6918290">(</span><span class="ident" id="6918291">err</span><span class="op" id="6918294">.</span><span class="ident" id="6918295">Error</span><span class="op" id="6918300">(</span><span class="op" id="6918301">)</span><span class="op" id="6918302">,</span>&nbsp;<span class="ident" id="6918304">tt</span><span class="op" id="6918306">.</span><span class="ident" id="6918307">err</span><span class="op" id="6918310">)</span>&nbsp;<span class="op" id="6918312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918318">t</span><span class="op" id="6918319">.</span><span class="ident" id="6918320">Errorf</span><span class="op" id="6918326">(</span><span class="string" id="6918327">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6918353">,</span>&nbsp;<span class="ident" id="6918355">i</span><span class="op" id="6918356">,</span>&nbsp;<span class="ident" id="6918358">err</span><span class="op" id="6918361">,</span>&nbsp;<span class="ident" id="6918363">tt</span><span class="op" id="6918365">.</span><span class="ident" id="6918366">err</span><span class="op" id="6918369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918375">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918392">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918407">if</span>&nbsp;<span class="ident" id="6918410">err</span>&nbsp;<span class="op" id="6918414">==</span>&nbsp;<span class="ident" id="6918417">nil</span>&nbsp;<span class="op" id="6918421">&amp;&amp;</span>&nbsp;<span class="ident" id="6918424">tt</span><span class="op" id="6918426">.</span><span class="ident" id="6918427">err</span>&nbsp;<span class="op" id="6918431">!=</span>&nbsp;<span class="string" id="6918434">&#34;&#34;</span>&nbsp;<span class="op" id="6918437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918442">t</span><span class="op" id="6918443">.</span><span class="ident" id="6918444">Errorf</span><span class="op" id="6918450">(</span><span class="string" id="6918451">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6918478">,</span>&nbsp;<span class="ident" id="6918480">i</span><span class="op" id="6918481">,</span>&nbsp;<span class="ident" id="6918483">tt</span><span class="op" id="6918485">.</span><span class="ident" id="6918486">err</span><span class="op" id="6918489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918494">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918505">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918510">out</span>&nbsp;<span class="op" id="6918514">:=</span>&nbsp;<span class="builtintype" id="6918517">string</span><span class="op" id="6918523">(</span><span class="ident" id="6918524">buf</span><span class="op" id="6918527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6918531">if</span>&nbsp;<span class="ident" id="6918534">out</span>&nbsp;<span class="op" id="6918538">!=</span>&nbsp;<span class="ident" id="6918541">testOut</span>&nbsp;<span class="op" id="6918549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918554">t</span><span class="op" id="6918555">.</span><span class="ident" id="6918556">Errorf</span><span class="op" id="6918562">(</span><span class="string" id="6918563">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="6918603">,</span>&nbsp;<span class="ident" id="6918605">i</span><span class="op" id="6918606">,</span>&nbsp;<span class="ident" id="6918608">out</span><span class="op" id="6918611">,</span>&nbsp;<span class="ident" id="6918613">testOut</span><span class="op" id="6918620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918624">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918627">}</span><br>
<span class="lineno"></span><span class="op" id="6918629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6918632">func</span>&nbsp;<span class="ident" id="6918637">TestReadImports</span><span class="op" id="6918652">(</span><span class="ident" id="6918653">t</span>&nbsp;<span class="op" id="6918655">*</span><span class="ident" id="6918656">testing</span><span class="op" id="6918663">.</span><span class="ident" id="6918664">T</span><span class="op" id="6918665">)</span>&nbsp;<span class="op" id="6918667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918670">testRead</span><span class="op" id="6918678">(</span><span class="ident" id="6918679">t</span><span class="op" id="6918680">,</span>&nbsp;<span class="ident" id="6918682">readImportsTests</span><span class="op" id="6918698">,</span>&nbsp;<span class="keyword" id="6918700">func</span><span class="op" id="6918704">(</span><span class="ident" id="6918705">r</span>&nbsp;<span class="ident" id="6918707">io</span><span class="op" id="6918709">.</span><span class="ident" id="6918710">Reader</span><span class="op" id="6918716">)</span>&nbsp;<span class="op" id="6918718">(</span><span class="op" id="6918719">[</span><span class="op" id="6918720">]</span><span class="builtintype" id="6918721">byte</span><span class="op" id="6918725">,</span>&nbsp;<span class="builtintype" id="6918727">error</span><span class="op" id="6918732">)</span>&nbsp;<span class="op" id="6918734">{</span>&nbsp;<span class="keyword" id="6918736">return</span>&nbsp;<span class="ident" id="6918743">readImports</span><span class="op" id="6918754">(</span><span class="ident" id="6918755">r</span><span class="op" id="6918756">,</span>&nbsp;<span class="builtintype" id="6918758">true</span><span class="op" id="6918762">)</span>&nbsp;<span class="op" id="6918764">}</span><span class="op" id="6918765">)</span><br>
<span class="lineno">135</span><span class="op" id="6918767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6918770">func</span>&nbsp;<span class="ident" id="6918775">TestReadComments</span><span class="op" id="6918791">(</span><span class="ident" id="6918792">t</span>&nbsp;<span class="op" id="6918794">*</span><span class="ident" id="6918795">testing</span><span class="op" id="6918802">.</span><span class="ident" id="6918803">T</span><span class="op" id="6918804">)</span>&nbsp;<span class="op" id="6918806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6918809">testRead</span><span class="op" id="6918817">(</span><span class="ident" id="6918818">t</span><span class="op" id="6918819">,</span>&nbsp;<span class="ident" id="6918821">readCommentsTests</span><span class="op" id="6918838">,</span>&nbsp;<span class="ident" id="6918840">readComments</span><span class="op" id="6918852">)</span><br>
<span class="lineno"></span><span class="op" id="6918854">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6918857">var</span>&nbsp;<span class="ident" id="6918861">readFailuresTests</span>&nbsp;<span class="op" id="6918879">=</span>&nbsp;<span class="op" id="6918881">[</span><span class="op" id="6918882">]</span><span class="ident" id="6918883">readTest</span><span class="op" id="6918891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6918898">`package`</span><span class="op" id="6918907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6918911">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6918925">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918928">}</span><span class="op" id="6918929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6918932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6918936">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="6918970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6918974">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="6918999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919002">}</span><span class="op" id="6919003">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919010">`package&nbsp;p;&nbsp;import`</span><span class="op" id="6919029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919033">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919050">}</span><span class="op" id="6919051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919054">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919058">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="6919079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919083">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919100">}</span><span class="op" id="6919101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919108">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="6919134">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919138">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919155">}</span><span class="op" id="6919156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919163">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="6919185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919189">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919203">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919206">}</span><span class="op" id="6919207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919214">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="6919235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919239">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919256">}</span><span class="op" id="6919257">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919264">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="6919287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919291">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919308">}</span><span class="op" id="6919309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919312">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919316">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="6919340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919344">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919361">}</span><span class="op" id="6919362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919369">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="6919390">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919394">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919411">}</span><span class="op" id="6919412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919419">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="6919442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919446">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919460">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919463">}</span><span class="op" id="6919464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919471">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="6919495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919499">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919516">}</span><span class="op" id="6919517">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919524">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="6919545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919549">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919566">}</span><span class="op" id="6919567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919570">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919574">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="6919596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919600">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919617">}</span><span class="op" id="6919618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919625">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="6919648">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919652">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919669">}</span><span class="op" id="6919670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919677">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="6919701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6919705">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6919719">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6919722">}</span><span class="op" id="6919723">,</span><br>
<span class="lineno"></span><span class="op" id="6919725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6919728">func</span>&nbsp;<span class="ident" id="6919733">TestReadFailures</span><span class="op" id="6919749">(</span><span class="ident" id="6919750">t</span>&nbsp;<span class="op" id="6919752">*</span><span class="ident" id="6919753">testing</span><span class="op" id="6919760">.</span><span class="ident" id="6919761">T</span><span class="op" id="6919762">)</span>&nbsp;<span class="op" id="6919764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6919767">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6919824">testRead</span><span class="op" id="6919832">(</span><span class="ident" id="6919833">t</span><span class="op" id="6919834">,</span>&nbsp;<span class="ident" id="6919836">readFailuresTests</span><span class="op" id="6919853">,</span>&nbsp;<span class="keyword" id="6919855">func</span><span class="op" id="6919859">(</span><span class="ident" id="6919860">r</span>&nbsp;<span class="ident" id="6919862">io</span><span class="op" id="6919864">.</span><span class="ident" id="6919865">Reader</span><span class="op" id="6919871">)</span>&nbsp;<span class="op" id="6919873">(</span><span class="op" id="6919874">[</span><span class="op" id="6919875">]</span><span class="builtintype" id="6919876">byte</span><span class="op" id="6919880">,</span>&nbsp;<span class="builtintype" id="6919882">error</span><span class="op" id="6919887">)</span>&nbsp;<span class="op" id="6919889">{</span>&nbsp;<span class="keyword" id="6919891">return</span>&nbsp;<span class="ident" id="6919898">readImports</span><span class="op" id="6919909">(</span><span class="ident" id="6919910">r</span><span class="op" id="6919911">,</span>&nbsp;<span class="builtintype" id="6919913">true</span><span class="op" id="6919917">)</span>&nbsp;<span class="op" id="6919919">}</span><span class="op" id="6919920">)</span><br>
<span class="lineno"></span><span class="op" id="6919922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6919925">func</span>&nbsp;<span class="ident" id="6919930">TestReadFailuresIgnored</span><span class="op" id="6919953">(</span><span class="ident" id="6919954">t</span>&nbsp;<span class="op" id="6919956">*</span><span class="ident" id="6919957">testing</span><span class="op" id="6919964">.</span><span class="ident" id="6919965">T</span><span class="op" id="6919966">)</span>&nbsp;<span class="op" id="6919968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6919971">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6920040">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6920100">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920147">tests</span>&nbsp;<span class="op" id="6920153">:=</span>&nbsp;<span class="builtinfunc" id="6920156">make</span><span class="op" id="6920160">(</span><span class="op" id="6920161">[</span><span class="op" id="6920162">]</span><span class="ident" id="6920163">readTest</span><span class="op" id="6920171">,</span>&nbsp;<span class="builtinfunc" id="6920173">len</span><span class="op" id="6920176">(</span><span class="ident" id="6920177">readFailuresTests</span><span class="op" id="6920194">)</span><span class="op" id="6920195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6920198">copy</span><span class="op" id="6920202">(</span><span class="ident" id="6920203">tests</span><span class="op" id="6920208">,</span>&nbsp;<span class="ident" id="6920210">readFailuresTests</span><span class="op" id="6920227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920230">for</span>&nbsp;<span class="ident" id="6920234">i</span>&nbsp;<span class="op" id="6920236">:=</span>&nbsp;<span class="keyword" id="6920239">range</span>&nbsp;<span class="ident" id="6920245">tests</span>&nbsp;<span class="op" id="6920251">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920255">tt</span>&nbsp;<span class="op" id="6920258">:=</span>&nbsp;<span class="op" id="6920261">&amp;</span><span class="ident" id="6920262">tests</span><span class="op" id="6920267">[</span><span class="ident" id="6920268">i</span><span class="op" id="6920269">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6920273">if</span>&nbsp;<span class="op" id="6920276">!</span><span class="ident" id="6920277">strings</span><span class="op" id="6920284">.</span><span class="ident" id="6920285">Contains</span><span class="op" id="6920293">(</span><span class="ident" id="6920294">tt</span><span class="op" id="6920296">.</span><span class="ident" id="6920297">err</span><span class="op" id="6920300">,</span>&nbsp;<span class="string" id="6920302">&#34;NUL&#34;</span><span class="op" id="6920307">)</span>&nbsp;<span class="op" id="6920309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920314">tt</span><span class="op" id="6920316">.</span><span class="ident" id="6920317">err</span>&nbsp;<span class="op" id="6920321">=</span>&nbsp;<span class="string" id="6920323">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6920328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6920331">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6920334">testRead</span><span class="op" id="6920342">(</span><span class="ident" id="6920343">t</span><span class="op" id="6920344">,</span>&nbsp;<span class="ident" id="6920346">tests</span><span class="op" id="6920351">,</span>&nbsp;<span class="keyword" id="6920353">func</span><span class="op" id="6920357">(</span><span class="ident" id="6920358">r</span>&nbsp;<span class="ident" id="6920360">io</span><span class="op" id="6920362">.</span><span class="ident" id="6920363">Reader</span><span class="op" id="6920369">)</span>&nbsp;<span class="op" id="6920371">(</span><span class="op" id="6920372">[</span><span class="op" id="6920373">]</span><span class="builtintype" id="6920374">byte</span><span class="op" id="6920378">,</span>&nbsp;<span class="builtintype" id="6920380">error</span><span class="op" id="6920385">)</span>&nbsp;<span class="op" id="6920387">{</span>&nbsp;<span class="keyword" id="6920389">return</span>&nbsp;<span class="ident" id="6920396">readImports</span><span class="op" id="6920407">(</span><span class="ident" id="6920408">r</span><span class="op" id="6920409">,</span>&nbsp;<span class="builtintype" id="6920411">false</span><span class="op" id="6920416">)</span>&nbsp;<span class="op" id="6920418">}</span><span class="op" id="6920419">)</span><br>
<span class="lineno"></span><span class="op" id="6920421">}</span>
</div>
</body>
</html>
