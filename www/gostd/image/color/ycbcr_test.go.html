<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6853168">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6853223">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6853277">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6853328">package</span>&nbsp;<span class="ident" id="6853336">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6853343">import</span>&nbsp;<span class="op" id="6853350">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6853353">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6853363">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6853366">func</span>&nbsp;<span class="ident" id="6853371">delta</span><span class="op" id="6853376">(</span><span class="ident" id="6853377">x</span><span class="op" id="6853378">,</span>&nbsp;<span class="ident" id="6853380">y</span>&nbsp;<span class="builtintype" id="6853382">uint8</span><span class="op" id="6853387">)</span>&nbsp;<span class="builtintype" id="6853389">uint8</span>&nbsp;<span class="op" id="6853395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853398">if</span>&nbsp;<span class="ident" id="6853401">x</span>&nbsp;<span class="op" id="6853403">&gt;=</span>&nbsp;<span class="ident" id="6853406">y</span>&nbsp;<span class="op" id="6853408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853412">return</span>&nbsp;<span class="ident" id="6853419">x</span>&nbsp;<span class="op" id="6853421">-</span>&nbsp;<span class="ident" id="6853423">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6853426">}</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853429">return</span>&nbsp;<span class="ident" id="6853436">y</span>&nbsp;<span class="op" id="6853438">-</span>&nbsp;<span class="ident" id="6853440">x</span><br>
<span class="lineno"></span><span class="op" id="6853442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6853445">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;subset&nbsp;of&nbsp;RGB&nbsp;space&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;YCbCr&nbsp;and&nbsp;back&nbsp;to&nbsp;within</span><br>
<span class="lineno"></span><span class="comment" id="6853525">//&nbsp;1/256&nbsp;tolerance.</span><br>
<span class="lineno">20</span><span class="keyword" id="6853545">func</span>&nbsp;<span class="ident" id="6853550">TestRoundtrip</span><span class="op" id="6853563">(</span><span class="ident" id="6853564">t</span>&nbsp;<span class="op" id="6853566">*</span><span class="ident" id="6853567">testing</span><span class="op" id="6853574">.</span><span class="ident" id="6853575">T</span><span class="op" id="6853576">)</span>&nbsp;<span class="op" id="6853578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853581">for</span>&nbsp;<span class="ident" id="6853585">r</span>&nbsp;<span class="op" id="6853587">:=</span>&nbsp;<span class="num" id="6853590">0</span><span class="op" id="6853591">;</span>&nbsp;<span class="ident" id="6853593">r</span>&nbsp;<span class="op" id="6853595">&lt;</span>&nbsp;<span class="num" id="6853597">255</span><span class="op" id="6853600">;</span>&nbsp;<span class="ident" id="6853602">r</span>&nbsp;<span class="op" id="6853604">+=</span>&nbsp;<span class="num" id="6853607">7</span>&nbsp;<span class="op" id="6853609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853613">for</span>&nbsp;<span class="ident" id="6853617">g</span>&nbsp;<span class="op" id="6853619">:=</span>&nbsp;<span class="num" id="6853622">0</span><span class="op" id="6853623">;</span>&nbsp;<span class="ident" id="6853625">g</span>&nbsp;<span class="op" id="6853627">&lt;</span>&nbsp;<span class="num" id="6853629">255</span><span class="op" id="6853632">;</span>&nbsp;<span class="ident" id="6853634">g</span>&nbsp;<span class="op" id="6853636">+=</span>&nbsp;<span class="num" id="6853639">5</span>&nbsp;<span class="op" id="6853641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853646">for</span>&nbsp;<span class="ident" id="6853650">b</span>&nbsp;<span class="op" id="6853652">:=</span>&nbsp;<span class="num" id="6853655">0</span><span class="op" id="6853656">;</span>&nbsp;<span class="ident" id="6853658">b</span>&nbsp;<span class="op" id="6853660">&lt;</span>&nbsp;<span class="num" id="6853662">255</span><span class="op" id="6853665">;</span>&nbsp;<span class="ident" id="6853667">b</span>&nbsp;<span class="op" id="6853669">+=</span>&nbsp;<span class="num" id="6853672">3</span>&nbsp;<span class="op" id="6853674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6853680">r0</span><span class="op" id="6853682">,</span>&nbsp;<span class="ident" id="6853684">g0</span><span class="op" id="6853686">,</span>&nbsp;<span class="ident" id="6853688">b0</span>&nbsp;<span class="op" id="6853691">:=</span>&nbsp;<span class="builtintype" id="6853694">uint8</span><span class="op" id="6853699">(</span><span class="ident" id="6853700">r</span><span class="op" id="6853701">)</span><span class="op" id="6853702">,</span>&nbsp;<span class="builtintype" id="6853704">uint8</span><span class="op" id="6853709">(</span><span class="ident" id="6853710">g</span><span class="op" id="6853711">)</span><span class="op" id="6853712">,</span>&nbsp;<span class="builtintype" id="6853714">uint8</span><span class="op" id="6853719">(</span><span class="ident" id="6853720">b</span><span class="op" id="6853721">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6853727">y</span><span class="op" id="6853728">,</span>&nbsp;<span class="ident" id="6853730">cb</span><span class="op" id="6853732">,</span>&nbsp;<span class="ident" id="6853734">cr</span>&nbsp;<span class="op" id="6853737">:=</span>&nbsp;<span class="ident" id="6853740">RGBToYCbCr</span><span class="op" id="6853750">(</span><span class="ident" id="6853751">r0</span><span class="op" id="6853753">,</span>&nbsp;<span class="ident" id="6853755">g0</span><span class="op" id="6853757">,</span>&nbsp;<span class="ident" id="6853759">b0</span><span class="op" id="6853761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6853767">r1</span><span class="op" id="6853769">,</span>&nbsp;<span class="ident" id="6853771">g1</span><span class="op" id="6853773">,</span>&nbsp;<span class="ident" id="6853775">b1</span>&nbsp;<span class="op" id="6853778">:=</span>&nbsp;<span class="ident" id="6853781">YCbCrToRGB</span><span class="op" id="6853791">(</span><span class="ident" id="6853792">y</span><span class="op" id="6853793">,</span>&nbsp;<span class="ident" id="6853795">cb</span><span class="op" id="6853797">,</span>&nbsp;<span class="ident" id="6853799">cr</span><span class="op" id="6853801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6853807">if</span>&nbsp;<span class="ident" id="6853810">delta</span><span class="op" id="6853815">(</span><span class="ident" id="6853816">r0</span><span class="op" id="6853818">,</span>&nbsp;<span class="ident" id="6853820">r1</span><span class="op" id="6853822">)</span>&nbsp;<span class="op" id="6853824">&gt;</span>&nbsp;<span class="num" id="6853826">1</span>&nbsp;<span class="op" id="6853828">||</span>&nbsp;<span class="ident" id="6853831">delta</span><span class="op" id="6853836">(</span><span class="ident" id="6853837">g0</span><span class="op" id="6853839">,</span>&nbsp;<span class="ident" id="6853841">g1</span><span class="op" id="6853843">)</span>&nbsp;<span class="op" id="6853845">&gt;</span>&nbsp;<span class="num" id="6853847">1</span>&nbsp;<span class="op" id="6853849">||</span>&nbsp;<span class="ident" id="6853852">delta</span><span class="op" id="6853857">(</span><span class="ident" id="6853858">b0</span><span class="op" id="6853860">,</span>&nbsp;<span class="ident" id="6853862">b1</span><span class="op" id="6853864">)</span>&nbsp;<span class="op" id="6853866">&gt;</span>&nbsp;<span class="num" id="6853868">1</span>&nbsp;<span class="op" id="6853870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6853877">t</span><span class="op" id="6853878">.</span><span class="ident" id="6853879">Fatalf</span><span class="op" id="6853885">(</span><span class="string" id="6853886">&#34;r0,&nbsp;g0,&nbsp;b0&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&nbsp;&nbsp;&nbsp;r1,&nbsp;g1,&nbsp;b1&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&#34;</span><span class="op" id="6853937">,</span>&nbsp;<span class="ident" id="6853939">r0</span><span class="op" id="6853941">,</span>&nbsp;<span class="ident" id="6853943">g0</span><span class="op" id="6853945">,</span>&nbsp;<span class="ident" id="6853947">b0</span><span class="op" id="6853949">,</span>&nbsp;<span class="ident" id="6853951">r1</span><span class="op" id="6853953">,</span>&nbsp;<span class="ident" id="6853955">g1</span><span class="op" id="6853957">,</span>&nbsp;<span class="ident" id="6853959">b1</span><span class="op" id="6853961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6853967">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6853972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6853976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6853979">}</span><br>
<span class="lineno"></span><span class="op" id="6853981">}</span>
</div>
</body>
</html>
