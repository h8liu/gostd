<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7852947">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7853003">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7853057">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7853108">package</span>&nbsp;<span class="ident" id="7853116">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7853122">import</span>&nbsp;<span class="op" id="7853129">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853132">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853141">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853152">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853163">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7853170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7853173">var</span>&nbsp;<span class="ident" id="7853177">headerWriteTests</span>&nbsp;<span class="op" id="7853194">=</span>&nbsp;<span class="op" id="7853196">[</span><span class="op" id="7853197">]</span><span class="keyword" id="7853198">struct</span>&nbsp;<span class="op" id="7853205">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853208">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853217">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853225">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7853234">map</span><span class="op" id="7853237">[</span><span class="builtintype" id="7853238">string</span><span class="op" id="7853244">]</span><span class="builtintype" id="7853245">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853251">expected</span>&nbsp;<span class="builtintype" id="7853260">string</span><br>
<span class="lineno"></span><span class="op" id="7853267">}</span><span class="op" id="7853268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853271">{</span><span class="ident" id="7853272">Header</span><span class="op" id="7853278">{</span><span class="op" id="7853279">}</span><span class="op" id="7853280">,</span>&nbsp;<span class="builtintype" id="7853282">nil</span><span class="op" id="7853285">,</span>&nbsp;<span class="string" id="7853287">&#34;&#34;</span><span class="op" id="7853289">}</span><span class="op" id="7853290">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853297">Header</span><span class="op" id="7853303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853308">&#34;Content-Type&#34;</span><span class="op" id="7853322">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7853326">{</span><span class="string" id="7853327">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7853353">}</span><span class="op" id="7853354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853359">&#34;Content-Length&#34;</span><span class="op" id="7853375">:</span>&nbsp;<span class="op" id="7853377">{</span><span class="string" id="7853378">&#34;0&#34;</span><span class="op" id="7853381">}</span><span class="op" id="7853382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853386">}</span><span class="op" id="7853387">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7853391">nil</span><span class="op" id="7853394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853398">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7853463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853466">}</span><span class="op" id="7853467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853474">Header</span><span class="op" id="7853480">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853485">&#34;Content-Length&#34;</span><span class="op" id="7853501">:</span>&nbsp;<span class="op" id="7853503">{</span><span class="string" id="7853504">&#34;0&#34;</span><span class="op" id="7853507">,</span>&nbsp;<span class="string" id="7853509">&#34;1&#34;</span><span class="op" id="7853512">,</span>&nbsp;<span class="string" id="7853514">&#34;2&#34;</span><span class="op" id="7853517">}</span><span class="op" id="7853518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853522">}</span><span class="op" id="7853523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7853527">nil</span><span class="op" id="7853530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853534">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7853599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853602">}</span><span class="op" id="7853603">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853610">Header</span><span class="op" id="7853616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853621">&#34;Expires&#34;</span><span class="op" id="7853630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853641">{</span><span class="string" id="7853642">&#34;-1&#34;</span><span class="op" id="7853646">}</span><span class="op" id="7853647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853652">&#34;Content-Length&#34;</span><span class="op" id="7853668">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7853672">{</span><span class="string" id="7853673">&#34;0&#34;</span><span class="op" id="7853676">}</span><span class="op" id="7853677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853682">&#34;Content-Encoding&#34;</span><span class="op" id="7853700">:</span>&nbsp;<span class="op" id="7853702">{</span><span class="string" id="7853703">&#34;gzip&#34;</span><span class="op" id="7853709">}</span><span class="op" id="7853710">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853714">}</span><span class="op" id="7853715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7853719">map</span><span class="op" id="7853722">[</span><span class="builtintype" id="7853723">string</span><span class="op" id="7853729">]</span><span class="builtintype" id="7853730">bool</span><span class="op" id="7853734">{</span><span class="string" id="7853735">&#34;Content-Length&#34;</span><span class="op" id="7853751">:</span>&nbsp;<span class="builtintype" id="7853753">true</span><span class="op" id="7853757">}</span><span class="op" id="7853758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853762">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7853805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853808">}</span><span class="op" id="7853809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853812">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7853816">Header</span><span class="op" id="7853822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853827">&#34;Expires&#34;</span><span class="op" id="7853836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853847">{</span><span class="string" id="7853848">&#34;-1&#34;</span><span class="op" id="7853852">}</span><span class="op" id="7853853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853858">&#34;Content-Length&#34;</span><span class="op" id="7853874">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7853878">{</span><span class="string" id="7853879">&#34;0&#34;</span><span class="op" id="7853882">,</span>&nbsp;<span class="string" id="7853884">&#34;1&#34;</span><span class="op" id="7853887">,</span>&nbsp;<span class="string" id="7853889">&#34;2&#34;</span><span class="op" id="7853892">}</span><span class="op" id="7853893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853898">&#34;Content-Encoding&#34;</span><span class="op" id="7853916">:</span>&nbsp;<span class="op" id="7853918">{</span><span class="string" id="7853919">&#34;gzip&#34;</span><span class="op" id="7853925">}</span><span class="op" id="7853926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7853930">}</span><span class="op" id="7853931">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7853935">map</span><span class="op" id="7853938">[</span><span class="builtintype" id="7853939">string</span><span class="op" id="7853945">]</span><span class="builtintype" id="7853946">bool</span><span class="op" id="7853950">{</span><span class="string" id="7853951">&#34;Content-Length&#34;</span><span class="op" id="7853967">:</span>&nbsp;<span class="builtintype" id="7853969">true</span><span class="op" id="7853973">}</span><span class="op" id="7853974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7853978">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7854021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854024">}</span><span class="op" id="7854025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7854032">Header</span><span class="op" id="7854038">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854043">&#34;Expires&#34;</span><span class="op" id="7854052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854063">{</span><span class="string" id="7854064">&#34;-1&#34;</span><span class="op" id="7854068">}</span><span class="op" id="7854069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854074">&#34;Content-Length&#34;</span><span class="op" id="7854090">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7854094">{</span><span class="string" id="7854095">&#34;0&#34;</span><span class="op" id="7854098">}</span><span class="op" id="7854099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854104">&#34;Content-Encoding&#34;</span><span class="op" id="7854122">:</span>&nbsp;<span class="op" id="7854124">{</span><span class="string" id="7854125">&#34;gzip&#34;</span><span class="op" id="7854131">}</span><span class="op" id="7854132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854136">}</span><span class="op" id="7854137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7854141">map</span><span class="op" id="7854144">[</span><span class="builtintype" id="7854145">string</span><span class="op" id="7854151">]</span><span class="builtintype" id="7854152">bool</span><span class="op" id="7854156">{</span><span class="string" id="7854157">&#34;Content-Length&#34;</span><span class="op" id="7854173">:</span>&nbsp;<span class="builtintype" id="7854175">true</span><span class="op" id="7854179">,</span>&nbsp;<span class="string" id="7854181">&#34;Expires&#34;</span><span class="op" id="7854190">:</span>&nbsp;<span class="builtintype" id="7854192">true</span><span class="op" id="7854196">,</span>&nbsp;<span class="string" id="7854198">&#34;Content-Encoding&#34;</span><span class="op" id="7854216">:</span>&nbsp;<span class="builtintype" id="7854218">true</span><span class="op" id="7854222">}</span><span class="op" id="7854223">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854227">&#34;&#34;</span><span class="op" id="7854229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854232">}</span><span class="op" id="7854233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7854240">Header</span><span class="op" id="7854246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854251">&#34;Nil&#34;</span><span class="op" id="7854256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7854267">nil</span><span class="op" id="7854270">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854275">&#34;Empty&#34;</span><span class="op" id="7854282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854291">{</span><span class="op" id="7854292">}</span><span class="op" id="7854293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854298">&#34;Blank&#34;</span><span class="op" id="7854305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854314">{</span><span class="string" id="7854315">&#34;&#34;</span><span class="op" id="7854317">}</span><span class="op" id="7854318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854323">&#34;Double-Blank&#34;</span><span class="op" id="7854337">:</span>&nbsp;<span class="op" id="7854339">{</span><span class="string" id="7854340">&#34;&#34;</span><span class="op" id="7854342">,</span>&nbsp;<span class="string" id="7854344">&#34;&#34;</span><span class="op" id="7854346">}</span><span class="op" id="7854347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854351">}</span><span class="op" id="7854352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7854356">nil</span><span class="op" id="7854359">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854363">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7854412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854415">}</span><span class="op" id="7854416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7854419">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7854493">Header</span><span class="op" id="7854499">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854504">&#34;k1&#34;</span><span class="op" id="7854508">:</span>&nbsp;<span class="op" id="7854510">{</span><span class="string" id="7854511">&#34;1a&#34;</span><span class="op" id="7854515">,</span>&nbsp;<span class="string" id="7854517">&#34;1b&#34;</span><span class="op" id="7854521">}</span><span class="op" id="7854522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854527">&#34;k2&#34;</span><span class="op" id="7854531">:</span>&nbsp;<span class="op" id="7854533">{</span><span class="string" id="7854534">&#34;2a&#34;</span><span class="op" id="7854538">,</span>&nbsp;<span class="string" id="7854540">&#34;2b&#34;</span><span class="op" id="7854544">}</span><span class="op" id="7854545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854550">&#34;k3&#34;</span><span class="op" id="7854554">:</span>&nbsp;<span class="op" id="7854556">{</span><span class="string" id="7854557">&#34;3a&#34;</span><span class="op" id="7854561">,</span>&nbsp;<span class="string" id="7854563">&#34;3b&#34;</span><span class="op" id="7854567">}</span><span class="op" id="7854568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854573">&#34;k4&#34;</span><span class="op" id="7854577">:</span>&nbsp;<span class="op" id="7854579">{</span><span class="string" id="7854580">&#34;4a&#34;</span><span class="op" id="7854584">,</span>&nbsp;<span class="string" id="7854586">&#34;4b&#34;</span><span class="op" id="7854590">}</span><span class="op" id="7854591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854596">&#34;k5&#34;</span><span class="op" id="7854600">:</span>&nbsp;<span class="op" id="7854602">{</span><span class="string" id="7854603">&#34;5a&#34;</span><span class="op" id="7854607">,</span>&nbsp;<span class="string" id="7854609">&#34;5b&#34;</span><span class="op" id="7854613">}</span><span class="op" id="7854614">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854619">&#34;k6&#34;</span><span class="op" id="7854623">:</span>&nbsp;<span class="op" id="7854625">{</span><span class="string" id="7854626">&#34;6a&#34;</span><span class="op" id="7854630">,</span>&nbsp;<span class="string" id="7854632">&#34;6b&#34;</span><span class="op" id="7854636">}</span><span class="op" id="7854637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854642">&#34;k7&#34;</span><span class="op" id="7854646">:</span>&nbsp;<span class="op" id="7854648">{</span><span class="string" id="7854649">&#34;7a&#34;</span><span class="op" id="7854653">,</span>&nbsp;<span class="string" id="7854655">&#34;7b&#34;</span><span class="op" id="7854659">}</span><span class="op" id="7854660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854665">&#34;k8&#34;</span><span class="op" id="7854669">:</span>&nbsp;<span class="op" id="7854671">{</span><span class="string" id="7854672">&#34;8a&#34;</span><span class="op" id="7854676">,</span>&nbsp;<span class="string" id="7854678">&#34;8b&#34;</span><span class="op" id="7854682">}</span><span class="op" id="7854683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854688">&#34;k9&#34;</span><span class="op" id="7854692">:</span>&nbsp;<span class="op" id="7854694">{</span><span class="string" id="7854695">&#34;9a&#34;</span><span class="op" id="7854699">,</span>&nbsp;<span class="string" id="7854701">&#34;9b&#34;</span><span class="op" id="7854705">}</span><span class="op" id="7854706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854710">}</span><span class="op" id="7854711">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7854715">map</span><span class="op" id="7854718">[</span><span class="builtintype" id="7854719">string</span><span class="op" id="7854725">]</span><span class="builtintype" id="7854726">bool</span><span class="op" id="7854730">{</span><span class="string" id="7854731">&#34;k5&#34;</span><span class="op" id="7854735">:</span>&nbsp;<span class="builtintype" id="7854737">true</span><span class="op" id="7854741">}</span><span class="op" id="7854742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854746">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7854809">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854814">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7854857">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7854862">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7854924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7854927">}</span><span class="op" id="7854928">,</span><br>
<span class="lineno">90</span><span class="op" id="7854930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7854933">func</span>&nbsp;<span class="ident" id="7854938">TestHeaderWrite</span><span class="op" id="7854953">(</span><span class="ident" id="7854954">t</span>&nbsp;<span class="op" id="7854956">*</span><span class="ident" id="7854957">testing</span><span class="op" id="7854964">.</span><span class="ident" id="7854965">T</span><span class="op" id="7854966">)</span>&nbsp;<span class="op" id="7854968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7854971">var</span>&nbsp;<span class="ident" id="7854975">buf</span>&nbsp;<span class="ident" id="7854979">bytes</span><span class="op" id="7854984">.</span><span class="ident" id="7854985">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7854993">for</span>&nbsp;<span class="ident" id="7854997">i</span><span class="op" id="7854998">,</span>&nbsp;<span class="ident" id="7855000">test</span>&nbsp;<span class="op" id="7855005">:=</span>&nbsp;<span class="keyword" id="7855008">range</span>&nbsp;<span class="ident" id="7855014">headerWriteTests</span>&nbsp;<span class="op" id="7855031">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855035">test</span><span class="op" id="7855039">.</span><span class="ident" id="7855040">h</span><span class="op" id="7855041">.</span><span class="ident" id="7855042">WriteSubset</span><span class="op" id="7855053">(</span><span class="op" id="7855054">&amp;</span><span class="ident" id="7855055">buf</span><span class="op" id="7855058">,</span>&nbsp;<span class="ident" id="7855060">test</span><span class="op" id="7855064">.</span><span class="ident" id="7855065">exclude</span><span class="op" id="7855072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855076">if</span>&nbsp;<span class="ident" id="7855079">buf</span><span class="op" id="7855082">.</span><span class="ident" id="7855083">String</span><span class="op" id="7855089">(</span><span class="op" id="7855090">)</span>&nbsp;<span class="op" id="7855092">!=</span>&nbsp;<span class="ident" id="7855095">test</span><span class="op" id="7855099">.</span><span class="ident" id="7855100">expected</span>&nbsp;<span class="op" id="7855109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855114">t</span><span class="op" id="7855115">.</span><span class="ident" id="7855116">Errorf</span><span class="op" id="7855122">(</span><span class="string" id="7855123">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7855149">,</span>&nbsp;<span class="ident" id="7855151">i</span><span class="op" id="7855152">,</span>&nbsp;<span class="ident" id="7855154">buf</span><span class="op" id="7855157">.</span><span class="ident" id="7855158">String</span><span class="op" id="7855164">(</span><span class="op" id="7855165">)</span><span class="op" id="7855166">,</span>&nbsp;<span class="ident" id="7855168">test</span><span class="op" id="7855172">.</span><span class="ident" id="7855173">expected</span><span class="op" id="7855181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855189">buf</span><span class="op" id="7855192">.</span><span class="ident" id="7855193">Reset</span><span class="op" id="7855198">(</span><span class="op" id="7855199">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855202">}</span><br>
<span class="lineno"></span><span class="op" id="7855204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7855207">var</span>&nbsp;<span class="ident" id="7855211">parseTimeTests</span>&nbsp;<span class="op" id="7855226">=</span>&nbsp;<span class="op" id="7855228">[</span><span class="op" id="7855229">]</span><span class="keyword" id="7855230">struct</span>&nbsp;<span class="op" id="7855237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855240">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7855244">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855252">err</span>&nbsp;<span class="builtintype" id="7855256">bool</span><br>
<span class="lineno"></span><span class="op" id="7855261">}</span><span class="op" id="7855262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855265">{</span><span class="ident" id="7855266">Header</span><span class="op" id="7855272">{</span><span class="string" id="7855273">&#34;Date&#34;</span><span class="op" id="7855279">:</span>&nbsp;<span class="op" id="7855281">{</span><span class="string" id="7855282">&#34;&#34;</span><span class="op" id="7855284">}</span><span class="op" id="7855285">}</span><span class="op" id="7855286">,</span>&nbsp;<span class="builtintype" id="7855288">true</span><span class="op" id="7855292">}</span><span class="op" id="7855293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855296">{</span><span class="ident" id="7855297">Header</span><span class="op" id="7855303">{</span><span class="string" id="7855304">&#34;Date&#34;</span><span class="op" id="7855310">:</span>&nbsp;<span class="op" id="7855312">{</span><span class="string" id="7855313">&#34;invalid&#34;</span><span class="op" id="7855322">}</span><span class="op" id="7855323">}</span><span class="op" id="7855324">,</span>&nbsp;<span class="builtintype" id="7855326">true</span><span class="op" id="7855330">}</span><span class="op" id="7855331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855334">{</span><span class="ident" id="7855335">Header</span><span class="op" id="7855341">{</span><span class="string" id="7855342">&#34;Date&#34;</span><span class="op" id="7855348">:</span>&nbsp;<span class="op" id="7855350">{</span><span class="string" id="7855351">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7855378">}</span><span class="op" id="7855379">}</span><span class="op" id="7855380">,</span>&nbsp;<span class="builtintype" id="7855382">true</span><span class="op" id="7855386">}</span><span class="op" id="7855387">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855390">{</span><span class="ident" id="7855391">Header</span><span class="op" id="7855397">{</span><span class="string" id="7855398">&#34;Date&#34;</span><span class="op" id="7855404">:</span>&nbsp;<span class="op" id="7855406">{</span><span class="string" id="7855407">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7855438">}</span><span class="op" id="7855439">}</span><span class="op" id="7855440">,</span>&nbsp;<span class="builtintype" id="7855442">false</span><span class="op" id="7855447">}</span><span class="op" id="7855448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855451">{</span><span class="ident" id="7855452">Header</span><span class="op" id="7855458">{</span><span class="string" id="7855459">&#34;Date&#34;</span><span class="op" id="7855465">:</span>&nbsp;<span class="op" id="7855467">{</span><span class="string" id="7855468">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7855500">}</span><span class="op" id="7855501">}</span><span class="op" id="7855502">,</span>&nbsp;<span class="builtintype" id="7855504">false</span><span class="op" id="7855509">}</span><span class="op" id="7855510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855513">{</span><span class="ident" id="7855514">Header</span><span class="op" id="7855520">{</span><span class="string" id="7855521">&#34;Date&#34;</span><span class="op" id="7855527">:</span>&nbsp;<span class="op" id="7855529">{</span><span class="string" id="7855530">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7855556">}</span><span class="op" id="7855557">}</span><span class="op" id="7855558">,</span>&nbsp;<span class="builtintype" id="7855560">false</span><span class="op" id="7855565">}</span><span class="op" id="7855566">,</span><br>
<span class="lineno"></span><span class="op" id="7855568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7855571">func</span>&nbsp;<span class="ident" id="7855576">TestParseTime</span><span class="op" id="7855589">(</span><span class="ident" id="7855590">t</span>&nbsp;<span class="op" id="7855592">*</span><span class="ident" id="7855593">testing</span><span class="op" id="7855600">.</span><span class="ident" id="7855601">T</span><span class="op" id="7855602">)</span>&nbsp;<span class="op" id="7855604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855607">expect</span>&nbsp;<span class="op" id="7855614">:=</span>&nbsp;<span class="ident" id="7855617">time</span><span class="op" id="7855621">.</span><span class="ident" id="7855622">Date</span><span class="op" id="7855626">(</span><span class="num" id="7855627">1994</span><span class="op" id="7855631">,</span>&nbsp;<span class="num" id="7855633">11</span><span class="op" id="7855635">,</span>&nbsp;<span class="num" id="7855637">6</span><span class="op" id="7855638">,</span>&nbsp;<span class="num" id="7855640">8</span><span class="op" id="7855641">,</span>&nbsp;<span class="num" id="7855643">49</span><span class="op" id="7855645">,</span>&nbsp;<span class="num" id="7855647">37</span><span class="op" id="7855649">,</span>&nbsp;<span class="num" id="7855651">0</span><span class="op" id="7855652">,</span>&nbsp;<span class="ident" id="7855654">time</span><span class="op" id="7855658">.</span><span class="ident" id="7855659">UTC</span><span class="op" id="7855662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855665">for</span>&nbsp;<span class="ident" id="7855669">i</span><span class="op" id="7855670">,</span>&nbsp;<span class="ident" id="7855672">test</span>&nbsp;<span class="op" id="7855677">:=</span>&nbsp;<span class="keyword" id="7855680">range</span>&nbsp;<span class="ident" id="7855686">parseTimeTests</span>&nbsp;<span class="op" id="7855701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855705">d</span><span class="op" id="7855706">,</span>&nbsp;<span class="ident" id="7855708">err</span>&nbsp;<span class="op" id="7855712">:=</span>&nbsp;<span class="ident" id="7855715">ParseTime</span><span class="op" id="7855724">(</span><span class="ident" id="7855725">test</span><span class="op" id="7855729">.</span><span class="ident" id="7855730">h</span><span class="op" id="7855731">.</span><span class="ident" id="7855732">Get</span><span class="op" id="7855735">(</span><span class="string" id="7855736">&#34;Date&#34;</span><span class="op" id="7855742">)</span><span class="op" id="7855743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855747">if</span>&nbsp;<span class="ident" id="7855750">err</span>&nbsp;<span class="op" id="7855754">!=</span>&nbsp;<span class="builtintype" id="7855757">nil</span>&nbsp;<span class="op" id="7855761">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855766">if</span>&nbsp;<span class="op" id="7855769">!</span><span class="ident" id="7855770">test</span><span class="op" id="7855774">.</span><span class="ident" id="7855775">err</span>&nbsp;<span class="op" id="7855779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855785">t</span><span class="op" id="7855786">.</span><span class="ident" id="7855787">Errorf</span><span class="op" id="7855793">(</span><span class="string" id="7855794">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7855814">,</span>&nbsp;<span class="ident" id="7855816">i</span><span class="op" id="7855817">,</span>&nbsp;<span class="ident" id="7855819">err</span><span class="op" id="7855822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855832">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855843">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855847">if</span>&nbsp;<span class="ident" id="7855850">test</span><span class="op" id="7855854">.</span><span class="ident" id="7855855">err</span>&nbsp;<span class="op" id="7855859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855864">t</span><span class="op" id="7855865">.</span><span class="ident" id="7855866">Errorf</span><span class="op" id="7855872">(</span><span class="string" id="7855873">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7855893">,</span>&nbsp;<span class="ident" id="7855895">i</span><span class="op" id="7855896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855901">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7855916">if</span>&nbsp;<span class="op" id="7855919">!</span><span class="ident" id="7855920">expect</span><span class="op" id="7855926">.</span><span class="ident" id="7855927">Equal</span><span class="op" id="7855932">(</span><span class="ident" id="7855933">d</span><span class="op" id="7855934">)</span>&nbsp;<span class="op" id="7855936">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7855941">t</span><span class="op" id="7855942">.</span><span class="ident" id="7855943">Errorf</span><span class="op" id="7855949">(</span><span class="string" id="7855950">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7855976">,</span>&nbsp;<span class="ident" id="7855978">i</span><span class="op" id="7855979">,</span>&nbsp;<span class="ident" id="7855981">d</span><span class="op" id="7855982">,</span>&nbsp;<span class="ident" id="7855984">expect</span><span class="op" id="7855990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7855997">}</span><br>
<span class="lineno"></span><span class="op" id="7855999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7856002">type</span>&nbsp;<span class="ident" id="7856007">hasTokenTest</span>&nbsp;<span class="keyword" id="7856020">struct</span>&nbsp;<span class="op" id="7856027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7856030">header</span>&nbsp;<span class="builtintype" id="7856037">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7856045">token</span>&nbsp;&nbsp;<span class="builtintype" id="7856052">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7856060">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7856067">bool</span><br>
<span class="lineno"></span><span class="op" id="7856072">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7856075">var</span>&nbsp;<span class="ident" id="7856079">hasTokenTests</span>&nbsp;<span class="op" id="7856093">=</span>&nbsp;<span class="op" id="7856095">[</span><span class="op" id="7856096">]</span><span class="ident" id="7856097">hasTokenTest</span><span class="op" id="7856109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856112">{</span><span class="string" id="7856113">&#34;&#34;</span><span class="op" id="7856115">,</span>&nbsp;<span class="string" id="7856117">&#34;&#34;</span><span class="op" id="7856119">,</span>&nbsp;<span class="builtintype" id="7856121">false</span><span class="op" id="7856126">}</span><span class="op" id="7856127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856130">{</span><span class="string" id="7856131">&#34;&#34;</span><span class="op" id="7856133">,</span>&nbsp;<span class="string" id="7856135">&#34;foo&#34;</span><span class="op" id="7856140">,</span>&nbsp;<span class="builtintype" id="7856142">false</span><span class="op" id="7856147">}</span><span class="op" id="7856148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856151">{</span><span class="string" id="7856152">&#34;foo&#34;</span><span class="op" id="7856157">,</span>&nbsp;<span class="string" id="7856159">&#34;foo&#34;</span><span class="op" id="7856164">,</span>&nbsp;<span class="builtintype" id="7856166">true</span><span class="op" id="7856170">}</span><span class="op" id="7856171">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856174">{</span><span class="string" id="7856175">&#34;foo&nbsp;&#34;</span><span class="op" id="7856181">,</span>&nbsp;<span class="string" id="7856183">&#34;foo&#34;</span><span class="op" id="7856188">,</span>&nbsp;<span class="builtintype" id="7856190">true</span><span class="op" id="7856194">}</span><span class="op" id="7856195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856198">{</span><span class="string" id="7856199">&#34;&nbsp;foo&#34;</span><span class="op" id="7856205">,</span>&nbsp;<span class="string" id="7856207">&#34;foo&#34;</span><span class="op" id="7856212">,</span>&nbsp;<span class="builtintype" id="7856214">true</span><span class="op" id="7856218">}</span><span class="op" id="7856219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856222">{</span><span class="string" id="7856223">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7856230">,</span>&nbsp;<span class="string" id="7856232">&#34;foo&#34;</span><span class="op" id="7856237">,</span>&nbsp;<span class="builtintype" id="7856239">true</span><span class="op" id="7856243">}</span><span class="op" id="7856244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856247">{</span><span class="string" id="7856248">&#34;foo,bar&#34;</span><span class="op" id="7856257">,</span>&nbsp;<span class="string" id="7856259">&#34;foo&#34;</span><span class="op" id="7856264">,</span>&nbsp;<span class="builtintype" id="7856266">true</span><span class="op" id="7856270">}</span><span class="op" id="7856271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856274">{</span><span class="string" id="7856275">&#34;bar,foo&#34;</span><span class="op" id="7856284">,</span>&nbsp;<span class="string" id="7856286">&#34;foo&#34;</span><span class="op" id="7856291">,</span>&nbsp;<span class="builtintype" id="7856293">true</span><span class="op" id="7856297">}</span><span class="op" id="7856298">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856301">{</span><span class="string" id="7856302">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7856312">,</span>&nbsp;<span class="string" id="7856314">&#34;foo&#34;</span><span class="op" id="7856319">,</span>&nbsp;<span class="builtintype" id="7856321">true</span><span class="op" id="7856325">}</span><span class="op" id="7856326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856329">{</span><span class="string" id="7856330">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7856344">,</span>&nbsp;<span class="string" id="7856346">&#34;foo&#34;</span><span class="op" id="7856351">,</span>&nbsp;<span class="builtintype" id="7856353">true</span><span class="op" id="7856357">}</span><span class="op" id="7856358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856361">{</span><span class="string" id="7856362">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7856376">,</span>&nbsp;<span class="string" id="7856378">&#34;foo&#34;</span><span class="op" id="7856383">,</span>&nbsp;<span class="builtintype" id="7856385">true</span><span class="op" id="7856389">}</span><span class="op" id="7856390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856393">{</span><span class="string" id="7856394">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7856408">,</span>&nbsp;<span class="string" id="7856410">&#34;foo&#34;</span><span class="op" id="7856415">,</span>&nbsp;<span class="builtintype" id="7856417">true</span><span class="op" id="7856421">}</span><span class="op" id="7856422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856425">{</span><span class="string" id="7856426">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7856441">,</span>&nbsp;<span class="string" id="7856443">&#34;foo&#34;</span><span class="op" id="7856448">,</span>&nbsp;<span class="builtintype" id="7856450">true</span><span class="op" id="7856454">}</span><span class="op" id="7856455">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856458">{</span><span class="string" id="7856459">&#34;FOO&#34;</span><span class="op" id="7856464">,</span>&nbsp;<span class="string" id="7856466">&#34;foo&#34;</span><span class="op" id="7856471">,</span>&nbsp;<span class="builtintype" id="7856473">true</span><span class="op" id="7856477">}</span><span class="op" id="7856478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856481">{</span><span class="string" id="7856482">&#34;FOO&nbsp;&#34;</span><span class="op" id="7856488">,</span>&nbsp;<span class="string" id="7856490">&#34;foo&#34;</span><span class="op" id="7856495">,</span>&nbsp;<span class="builtintype" id="7856497">true</span><span class="op" id="7856501">}</span><span class="op" id="7856502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856505">{</span><span class="string" id="7856506">&#34;&nbsp;FOO&#34;</span><span class="op" id="7856512">,</span>&nbsp;<span class="string" id="7856514">&#34;foo&#34;</span><span class="op" id="7856519">,</span>&nbsp;<span class="builtintype" id="7856521">true</span><span class="op" id="7856525">}</span><span class="op" id="7856526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856529">{</span><span class="string" id="7856530">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7856537">,</span>&nbsp;<span class="string" id="7856539">&#34;foo&#34;</span><span class="op" id="7856544">,</span>&nbsp;<span class="builtintype" id="7856546">true</span><span class="op" id="7856550">}</span><span class="op" id="7856551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856554">{</span><span class="string" id="7856555">&#34;FOO,BAR&#34;</span><span class="op" id="7856564">,</span>&nbsp;<span class="string" id="7856566">&#34;foo&#34;</span><span class="op" id="7856571">,</span>&nbsp;<span class="builtintype" id="7856573">true</span><span class="op" id="7856577">}</span><span class="op" id="7856578">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856581">{</span><span class="string" id="7856582">&#34;BAR,FOO&#34;</span><span class="op" id="7856591">,</span>&nbsp;<span class="string" id="7856593">&#34;foo&#34;</span><span class="op" id="7856598">,</span>&nbsp;<span class="builtintype" id="7856600">true</span><span class="op" id="7856604">}</span><span class="op" id="7856605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856608">{</span><span class="string" id="7856609">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7856619">,</span>&nbsp;<span class="string" id="7856621">&#34;foo&#34;</span><span class="op" id="7856626">,</span>&nbsp;<span class="builtintype" id="7856628">true</span><span class="op" id="7856632">}</span><span class="op" id="7856633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856636">{</span><span class="string" id="7856637">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7856651">,</span>&nbsp;<span class="string" id="7856653">&#34;foo&#34;</span><span class="op" id="7856658">,</span>&nbsp;<span class="builtintype" id="7856660">true</span><span class="op" id="7856664">}</span><span class="op" id="7856665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856668">{</span><span class="string" id="7856669">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7856683">,</span>&nbsp;<span class="string" id="7856685">&#34;foo&#34;</span><span class="op" id="7856690">,</span>&nbsp;<span class="builtintype" id="7856692">true</span><span class="op" id="7856696">}</span><span class="op" id="7856697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856700">{</span><span class="string" id="7856701">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7856715">,</span>&nbsp;<span class="string" id="7856717">&#34;foo&#34;</span><span class="op" id="7856722">,</span>&nbsp;<span class="builtintype" id="7856724">true</span><span class="op" id="7856728">}</span><span class="op" id="7856729">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856732">{</span><span class="string" id="7856733">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7856748">,</span>&nbsp;<span class="string" id="7856750">&#34;foo&#34;</span><span class="op" id="7856755">,</span>&nbsp;<span class="builtintype" id="7856757">true</span><span class="op" id="7856761">}</span><span class="op" id="7856762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856765">{</span><span class="string" id="7856766">&#34;foobar&#34;</span><span class="op" id="7856774">,</span>&nbsp;<span class="string" id="7856776">&#34;foo&#34;</span><span class="op" id="7856781">,</span>&nbsp;<span class="builtintype" id="7856783">false</span><span class="op" id="7856788">}</span><span class="op" id="7856789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7856792">{</span><span class="string" id="7856793">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7856802">,</span>&nbsp;<span class="string" id="7856804">&#34;foo&#34;</span><span class="op" id="7856809">,</span>&nbsp;<span class="builtintype" id="7856811">false</span><span class="op" id="7856816">}</span><span class="op" id="7856817">,</span><br>
<span class="lineno"></span><span class="op" id="7856819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7856822">func</span>&nbsp;<span class="ident" id="7856827">TestHasToken</span><span class="op" id="7856839">(</span><span class="ident" id="7856840">t</span>&nbsp;<span class="op" id="7856842">*</span><span class="ident" id="7856843">testing</span><span class="op" id="7856850">.</span><span class="ident" id="7856851">T</span><span class="op" id="7856852">)</span>&nbsp;<span class="op" id="7856854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7856857">for</span>&nbsp;<span class="ident" id="7856861">_</span><span class="op" id="7856862">,</span>&nbsp;<span class="ident" id="7856864">tt</span>&nbsp;<span class="op" id="7856867">:=</span>&nbsp;<span class="keyword" id="7856870">range</span>&nbsp;<span class="ident" id="7856876">hasTokenTests</span>&nbsp;<span class="op" id="7856890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7856894">if</span>&nbsp;<span class="ident" id="7856897">hasToken</span><span class="op" id="7856905">(</span><span class="ident" id="7856906">tt</span><span class="op" id="7856908">.</span><span class="ident" id="7856909">header</span><span class="op" id="7856915">,</span>&nbsp;<span class="ident" id="7856917">tt</span><span class="op" id="7856919">.</span><span class="ident" id="7856920">token</span><span class="op" id="7856925">)</span>&nbsp;<span class="op" id="7856927">!=</span>&nbsp;<span class="ident" id="7856930">tt</span><span class="op" id="7856932">.</span><span class="ident" id="7856933">want</span>&nbsp;<span class="op" id="7856938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7856943">t</span><span class="op" id="7856944">.</span><span class="ident" id="7856945">Errorf</span><span class="op" id="7856951">(</span><span class="string" id="7856952">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7856984">,</span>&nbsp;<span class="ident" id="7856986">tt</span><span class="op" id="7856988">.</span><span class="ident" id="7856989">header</span><span class="op" id="7856995">,</span>&nbsp;<span class="ident" id="7856997">tt</span><span class="op" id="7856999">.</span><span class="ident" id="7857000">token</span><span class="op" id="7857005">,</span>&nbsp;<span class="op" id="7857007">!</span><span class="ident" id="7857008">tt</span><span class="op" id="7857010">.</span><span class="ident" id="7857011">want</span><span class="op" id="7857015">,</span>&nbsp;<span class="ident" id="7857017">tt</span><span class="op" id="7857019">.</span><span class="ident" id="7857020">want</span><span class="op" id="7857024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857028">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857031">}</span><br>
<span class="lineno"></span><span class="op" id="7857033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7857036">var</span>&nbsp;<span class="ident" id="7857040">testHeader</span>&nbsp;<span class="op" id="7857051">=</span>&nbsp;<span class="ident" id="7857053">Header</span><span class="op" id="7857059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7857062">&#34;Content-Length&#34;</span><span class="op" id="7857078">:</span>&nbsp;<span class="op" id="7857080">{</span><span class="string" id="7857081">&#34;123&#34;</span><span class="op" id="7857086">}</span><span class="op" id="7857087">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7857090">&#34;Content-Type&#34;</span><span class="op" id="7857104">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7857108">{</span><span class="string" id="7857109">&#34;text/plain&#34;</span><span class="op" id="7857121">}</span><span class="op" id="7857122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7857125">&#34;Date&#34;</span><span class="op" id="7857131">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857143">{</span><span class="string" id="7857144">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7857170">}</span><span class="op" id="7857171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7857174">&#34;Server&#34;</span><span class="op" id="7857182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857192">{</span><span class="ident" id="7857193">DefaultUserAgent</span><span class="op" id="7857209">}</span><span class="op" id="7857210">,</span><br>
<span class="lineno"></span><span class="op" id="7857212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7857215">var</span>&nbsp;<span class="ident" id="7857219">buf</span>&nbsp;<span class="ident" id="7857223">bytes</span><span class="op" id="7857228">.</span><span class="ident" id="7857229">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7857237">func</span>&nbsp;<span class="ident" id="7857242">BenchmarkHeaderWriteSubset</span><span class="op" id="7857268">(</span><span class="ident" id="7857269">b</span>&nbsp;<span class="op" id="7857271">*</span><span class="ident" id="7857272">testing</span><span class="op" id="7857279">.</span><span class="ident" id="7857280">B</span><span class="op" id="7857281">)</span>&nbsp;<span class="op" id="7857283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857286">b</span><span class="op" id="7857287">.</span><span class="ident" id="7857288">ReportAllocs</span><span class="op" id="7857300">(</span><span class="op" id="7857301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7857304">for</span>&nbsp;<span class="ident" id="7857308">i</span>&nbsp;<span class="op" id="7857310">:=</span>&nbsp;<span class="num" id="7857313">0</span><span class="op" id="7857314">;</span>&nbsp;<span class="ident" id="7857316">i</span>&nbsp;<span class="op" id="7857318">&lt;</span>&nbsp;<span class="ident" id="7857320">b</span><span class="op" id="7857321">.</span><span class="ident" id="7857322">N</span><span class="op" id="7857323">;</span>&nbsp;<span class="ident" id="7857325">i</span><span class="op" id="7857326">++</span>&nbsp;<span class="op" id="7857329">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857333">buf</span><span class="op" id="7857336">.</span><span class="ident" id="7857337">Reset</span><span class="op" id="7857342">(</span><span class="op" id="7857343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857347">testHeader</span><span class="op" id="7857357">.</span><span class="ident" id="7857358">WriteSubset</span><span class="op" id="7857369">(</span><span class="op" id="7857370">&amp;</span><span class="ident" id="7857371">buf</span><span class="op" id="7857374">,</span>&nbsp;<span class="builtintype" id="7857376">nil</span><span class="op" id="7857379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857382">}</span><br>
<span class="lineno"></span><span class="op" id="7857384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7857387">func</span>&nbsp;<span class="ident" id="7857392">TestHeaderWriteSubsetAllocs</span><span class="op" id="7857419">(</span><span class="ident" id="7857420">t</span>&nbsp;<span class="op" id="7857422">*</span><span class="ident" id="7857423">testing</span><span class="op" id="7857430">.</span><span class="ident" id="7857431">T</span><span class="op" id="7857432">)</span>&nbsp;<span class="op" id="7857434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7857437">if</span>&nbsp;<span class="ident" id="7857440">testing</span><span class="op" id="7857447">.</span><span class="ident" id="7857448">Short</span><span class="op" id="7857453">(</span><span class="op" id="7857454">)</span>&nbsp;<span class="op" id="7857456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857460">t</span><span class="op" id="7857461">.</span><span class="ident" id="7857462">Skip</span><span class="op" id="7857466">(</span><span class="string" id="7857467">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7857502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7857508">if</span>&nbsp;<span class="ident" id="7857511">raceEnabled</span>&nbsp;<span class="op" id="7857523">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857527">t</span><span class="op" id="7857528">.</span><span class="ident" id="7857529">Skip</span><span class="op" id="7857533">(</span><span class="string" id="7857534">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7857569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7857575">if</span>&nbsp;<span class="ident" id="7857578">runtime</span><span class="op" id="7857585">.</span><span class="ident" id="7857586">GOMAXPROCS</span><span class="op" id="7857596">(</span><span class="num" id="7857597">0</span><span class="op" id="7857598">)</span>&nbsp;<span class="op" id="7857600">&gt;</span>&nbsp;<span class="num" id="7857602">1</span>&nbsp;<span class="op" id="7857604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857608">t</span><span class="op" id="7857609">.</span><span class="ident" id="7857610">Skip</span><span class="op" id="7857614">(</span><span class="string" id="7857615">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7857639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857642">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857645">n</span>&nbsp;<span class="op" id="7857647">:=</span>&nbsp;<span class="ident" id="7857650">testing</span><span class="op" id="7857657">.</span><span class="ident" id="7857658">AllocsPerRun</span><span class="op" id="7857670">(</span><span class="num" id="7857671">100</span><span class="op" id="7857674">,</span>&nbsp;<span class="keyword" id="7857676">func</span><span class="op" id="7857680">(</span><span class="op" id="7857681">)</span>&nbsp;<span class="op" id="7857683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857687">buf</span><span class="op" id="7857690">.</span><span class="ident" id="7857691">Reset</span><span class="op" id="7857696">(</span><span class="op" id="7857697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857701">testHeader</span><span class="op" id="7857711">.</span><span class="ident" id="7857712">WriteSubset</span><span class="op" id="7857723">(</span><span class="op" id="7857724">&amp;</span><span class="ident" id="7857725">buf</span><span class="op" id="7857728">,</span>&nbsp;<span class="builtintype" id="7857730">nil</span><span class="op" id="7857733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857736">}</span><span class="op" id="7857737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7857740">if</span>&nbsp;<span class="ident" id="7857743">n</span>&nbsp;<span class="op" id="7857745">&gt;</span>&nbsp;<span class="num" id="7857747">0</span>&nbsp;<span class="op" id="7857749">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7857753">t</span><span class="op" id="7857754">.</span><span class="ident" id="7857755">Errorf</span><span class="op" id="7857761">(</span><span class="string" id="7857762">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7857783">,</span>&nbsp;<span class="ident" id="7857785">n</span><span class="op" id="7857786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7857789">}</span><br>
<span class="lineno"></span><span class="op" id="7857791">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
