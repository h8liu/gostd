<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6818195">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6818250">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6818304">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6818355">package</span>&nbsp;<span class="ident" id="6818363">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6818370">import</span>&nbsp;<span class="op" id="6818377">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6818380">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6818390">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6818393">func</span>&nbsp;<span class="ident" id="6818398">delta</span><span class="op" id="6818403">(</span><span class="ident" id="6818404">x</span><span class="op" id="6818405">,</span>&nbsp;<span class="ident" id="6818407">y</span>&nbsp;<span class="builtintype" id="6818409">uint8</span><span class="op" id="6818414">)</span>&nbsp;<span class="builtintype" id="6818416">uint8</span>&nbsp;<span class="op" id="6818422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818425">if</span>&nbsp;<span class="ident" id="6818428">x</span>&nbsp;<span class="op" id="6818430">&gt;=</span>&nbsp;<span class="ident" id="6818433">y</span>&nbsp;<span class="op" id="6818435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818439">return</span>&nbsp;<span class="ident" id="6818446">x</span>&nbsp;<span class="op" id="6818448">-</span>&nbsp;<span class="ident" id="6818450">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6818453">}</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818456">return</span>&nbsp;<span class="ident" id="6818463">y</span>&nbsp;<span class="op" id="6818465">-</span>&nbsp;<span class="ident" id="6818467">x</span><br>
<span class="lineno"></span><span class="op" id="6818469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6818472">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;subset&nbsp;of&nbsp;RGB&nbsp;space&nbsp;can&nbsp;be&nbsp;converted&nbsp;to&nbsp;YCbCr&nbsp;and&nbsp;back&nbsp;to&nbsp;within</span><br>
<span class="lineno"></span><span class="comment" id="6818552">//&nbsp;1/256&nbsp;tolerance.</span><br>
<span class="lineno">20</span><span class="keyword" id="6818572">func</span>&nbsp;<span class="ident" id="6818577">TestRoundtrip</span><span class="op" id="6818590">(</span><span class="ident" id="6818591">t</span>&nbsp;<span class="op" id="6818593">*</span><span class="ident" id="6818594">testing</span><span class="op" id="6818601">.</span><span class="ident" id="6818602">T</span><span class="op" id="6818603">)</span>&nbsp;<span class="op" id="6818605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818608">for</span>&nbsp;<span class="ident" id="6818612">r</span>&nbsp;<span class="op" id="6818614">:=</span>&nbsp;<span class="num" id="6818617">0</span><span class="op" id="6818618">;</span>&nbsp;<span class="ident" id="6818620">r</span>&nbsp;<span class="op" id="6818622">&lt;</span>&nbsp;<span class="num" id="6818624">255</span><span class="op" id="6818627">;</span>&nbsp;<span class="ident" id="6818629">r</span>&nbsp;<span class="op" id="6818631">+=</span>&nbsp;<span class="num" id="6818634">7</span>&nbsp;<span class="op" id="6818636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818640">for</span>&nbsp;<span class="ident" id="6818644">g</span>&nbsp;<span class="op" id="6818646">:=</span>&nbsp;<span class="num" id="6818649">0</span><span class="op" id="6818650">;</span>&nbsp;<span class="ident" id="6818652">g</span>&nbsp;<span class="op" id="6818654">&lt;</span>&nbsp;<span class="num" id="6818656">255</span><span class="op" id="6818659">;</span>&nbsp;<span class="ident" id="6818661">g</span>&nbsp;<span class="op" id="6818663">+=</span>&nbsp;<span class="num" id="6818666">5</span>&nbsp;<span class="op" id="6818668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818673">for</span>&nbsp;<span class="ident" id="6818677">b</span>&nbsp;<span class="op" id="6818679">:=</span>&nbsp;<span class="num" id="6818682">0</span><span class="op" id="6818683">;</span>&nbsp;<span class="ident" id="6818685">b</span>&nbsp;<span class="op" id="6818687">&lt;</span>&nbsp;<span class="num" id="6818689">255</span><span class="op" id="6818692">;</span>&nbsp;<span class="ident" id="6818694">b</span>&nbsp;<span class="op" id="6818696">+=</span>&nbsp;<span class="num" id="6818699">3</span>&nbsp;<span class="op" id="6818701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6818707">r0</span><span class="op" id="6818709">,</span>&nbsp;<span class="ident" id="6818711">g0</span><span class="op" id="6818713">,</span>&nbsp;<span class="ident" id="6818715">b0</span>&nbsp;<span class="op" id="6818718">:=</span>&nbsp;<span class="builtintype" id="6818721">uint8</span><span class="op" id="6818726">(</span><span class="ident" id="6818727">r</span><span class="op" id="6818728">)</span><span class="op" id="6818729">,</span>&nbsp;<span class="builtintype" id="6818731">uint8</span><span class="op" id="6818736">(</span><span class="ident" id="6818737">g</span><span class="op" id="6818738">)</span><span class="op" id="6818739">,</span>&nbsp;<span class="builtintype" id="6818741">uint8</span><span class="op" id="6818746">(</span><span class="ident" id="6818747">b</span><span class="op" id="6818748">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6818754">y</span><span class="op" id="6818755">,</span>&nbsp;<span class="ident" id="6818757">cb</span><span class="op" id="6818759">,</span>&nbsp;<span class="ident" id="6818761">cr</span>&nbsp;<span class="op" id="6818764">:=</span>&nbsp;<span class="ident" id="6818767">RGBToYCbCr</span><span class="op" id="6818777">(</span><span class="ident" id="6818778">r0</span><span class="op" id="6818780">,</span>&nbsp;<span class="ident" id="6818782">g0</span><span class="op" id="6818784">,</span>&nbsp;<span class="ident" id="6818786">b0</span><span class="op" id="6818788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6818794">r1</span><span class="op" id="6818796">,</span>&nbsp;<span class="ident" id="6818798">g1</span><span class="op" id="6818800">,</span>&nbsp;<span class="ident" id="6818802">b1</span>&nbsp;<span class="op" id="6818805">:=</span>&nbsp;<span class="ident" id="6818808">YCbCrToRGB</span><span class="op" id="6818818">(</span><span class="ident" id="6818819">y</span><span class="op" id="6818820">,</span>&nbsp;<span class="ident" id="6818822">cb</span><span class="op" id="6818824">,</span>&nbsp;<span class="ident" id="6818826">cr</span><span class="op" id="6818828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6818834">if</span>&nbsp;<span class="ident" id="6818837">delta</span><span class="op" id="6818842">(</span><span class="ident" id="6818843">r0</span><span class="op" id="6818845">,</span>&nbsp;<span class="ident" id="6818847">r1</span><span class="op" id="6818849">)</span>&nbsp;<span class="op" id="6818851">&gt;</span>&nbsp;<span class="num" id="6818853">1</span>&nbsp;<span class="op" id="6818855">||</span>&nbsp;<span class="ident" id="6818858">delta</span><span class="op" id="6818863">(</span><span class="ident" id="6818864">g0</span><span class="op" id="6818866">,</span>&nbsp;<span class="ident" id="6818868">g1</span><span class="op" id="6818870">)</span>&nbsp;<span class="op" id="6818872">&gt;</span>&nbsp;<span class="num" id="6818874">1</span>&nbsp;<span class="op" id="6818876">||</span>&nbsp;<span class="ident" id="6818879">delta</span><span class="op" id="6818884">(</span><span class="ident" id="6818885">b0</span><span class="op" id="6818887">,</span>&nbsp;<span class="ident" id="6818889">b1</span><span class="op" id="6818891">)</span>&nbsp;<span class="op" id="6818893">&gt;</span>&nbsp;<span class="num" id="6818895">1</span>&nbsp;<span class="op" id="6818897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6818904">t</span><span class="op" id="6818905">.</span><span class="ident" id="6818906">Fatalf</span><span class="op" id="6818912">(</span><span class="string" id="6818913">&#34;r0,&nbsp;g0,&nbsp;b0&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&nbsp;&nbsp;&nbsp;r1,&nbsp;g1,&nbsp;b1&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d&#34;</span><span class="op" id="6818964">,</span>&nbsp;<span class="ident" id="6818966">r0</span><span class="op" id="6818968">,</span>&nbsp;<span class="ident" id="6818970">g0</span><span class="op" id="6818972">,</span>&nbsp;<span class="ident" id="6818974">b0</span><span class="op" id="6818976">,</span>&nbsp;<span class="ident" id="6818978">r1</span><span class="op" id="6818980">,</span>&nbsp;<span class="ident" id="6818982">g1</span><span class="op" id="6818984">,</span>&nbsp;<span class="ident" id="6818986">b1</span><span class="op" id="6818988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6818994">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6818999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6819003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6819006">}</span><br>
<span class="lineno"></span><span class="op" id="6819008">}</span>
</div>
</body>
</html>
