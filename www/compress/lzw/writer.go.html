<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6279602">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6279657">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6279711">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6279762">package</span>&nbsp;<span class="ident" id="6279770">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6279775">import</span>&nbsp;<span class="op" id="6279782">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6279785">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6279794">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6279804">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6279811">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6279816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6279819">//&nbsp;A&nbsp;writer&nbsp;is&nbsp;a&nbsp;buffered,&nbsp;flushable&nbsp;writer.</span><br>
<span class="lineno">15</span><span class="keyword" id="6279864">type</span>&nbsp;<span class="ident" id="6279869">writer</span>&nbsp;<span class="keyword" id="6279876">interface</span>&nbsp;<span class="op" id="6279886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6279889"><a href="/compress/lzw/writer.go.html#6279811">io</a></span><span class="op" id="6279891">.</span><span class="ident" id="6279892">ByteWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6279904">Flush</span><span class="op" id="6279909">(</span><span class="op" id="6279910">)</span>&nbsp;<span class="builtintype" id="6279912">error</span><br>
<span class="lineno"></span><span class="op" id="6279918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6279921">//&nbsp;An&nbsp;errWriteCloser&nbsp;is&nbsp;an&nbsp;io.WriteCloser&nbsp;that&nbsp;always&nbsp;returns&nbsp;a&nbsp;given&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6279998">type</span>&nbsp;<span class="ident" id="6280003">errWriteCloser</span>&nbsp;<span class="keyword" id="6280018">struct</span>&nbsp;<span class="op" id="6280025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280028">err</span>&nbsp;<span class="builtintype" id="6280032">error</span><br>
<span class="lineno"></span><span class="op" id="6280038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6280041">func</span>&nbsp;<span class="op" id="6280046">(</span><span class="ident" id="6280047">e</span>&nbsp;<span class="op" id="6280049">*</span><span class="ident" id="6280050"><a href="/compress/lzw/writer.go.html#6280003">errWriteCloser</a></span><span class="op" id="6280064">)</span>&nbsp;<span class="ident" id="6280066">Write</span><span class="op" id="6280071">(</span><span class="op" id="6280072">[</span><span class="op" id="6280073">]</span><span class="builtintype" id="6280074">byte</span><span class="op" id="6280078">)</span>&nbsp;<span class="op" id="6280080">(</span><span class="builtintype" id="6280081">int</span><span class="op" id="6280084">,</span>&nbsp;<span class="builtintype" id="6280086">error</span><span class="op" id="6280091">)</span>&nbsp;<span class="op" id="6280093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6280096">return</span>&nbsp;<span class="num" id="6280103">0</span><span class="op" id="6280104">,</span>&nbsp;<span class="ident" id="6280106"><a href="/compress/lzw/writer.go.html#6280047">e</a></span><span class="op" id="6280107">.</span><span class="ident" id="6280108">err</span><br>
<span class="lineno"></span><span class="op" id="6280112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6280115">func</span>&nbsp;<span class="op" id="6280120">(</span><span class="ident" id="6280121">e</span>&nbsp;<span class="op" id="6280123">*</span><span class="ident" id="6280124"><a href="/compress/lzw/writer.go.html#6280003">errWriteCloser</a></span><span class="op" id="6280138">)</span>&nbsp;<span class="ident" id="6280140">Close</span><span class="op" id="6280145">(</span><span class="op" id="6280146">)</span>&nbsp;<span class="builtintype" id="6280148">error</span>&nbsp;<span class="op" id="6280154">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6280157">return</span>&nbsp;<span class="ident" id="6280164"><a href="/compress/lzw/writer.go.html#6280121">e</a></span><span class="op" id="6280165">.</span><span class="ident" id="6280166">err</span><br>
<span class="lineno"></span><span class="op" id="6280170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6280173">const</span>&nbsp;<span class="op" id="6280179">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280182">//&nbsp;A&nbsp;code&nbsp;is&nbsp;a&nbsp;12&nbsp;bit&nbsp;value,&nbsp;stored&nbsp;as&nbsp;a&nbsp;uint32&nbsp;when&nbsp;encoding&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280254">//&nbsp;type&nbsp;conversions&nbsp;when&nbsp;shifting&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280295">maxCode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6280307">=</span>&nbsp;<span class="num" id="6280309">1</span><span class="op" id="6280310">&lt;&lt;</span><span class="num" id="6280312">12</span>&nbsp;<span class="op" id="6280315">-</span>&nbsp;<span class="num" id="6280317">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280320">invalidCode</span>&nbsp;<span class="op" id="6280332">=</span>&nbsp;<span class="num" id="6280334">1</span><span class="op" id="6280335">&lt;&lt;</span><span class="num" id="6280337">32</span>&nbsp;<span class="op" id="6280340">-</span>&nbsp;<span class="num" id="6280342">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280345">//&nbsp;There&nbsp;are&nbsp;1&lt;&lt;12&nbsp;possible&nbsp;codes,&nbsp;which&nbsp;is&nbsp;an&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280422">//&nbsp;valid&nbsp;hash&nbsp;table&nbsp;entries&nbsp;at&nbsp;any&nbsp;given&nbsp;point&nbsp;in&nbsp;time.&nbsp;tableSize&nbsp;is&nbsp;4x&nbsp;that.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280501">tableSize</span>&nbsp;<span class="op" id="6280511">=</span>&nbsp;<span class="num" id="6280513">4</span>&nbsp;<span class="op" id="6280515">*</span>&nbsp;<span class="num" id="6280517">1</span>&nbsp;<span class="op" id="6280519">&lt;&lt;</span>&nbsp;<span class="num" id="6280522">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280526">tableMask</span>&nbsp;<span class="op" id="6280536">=</span>&nbsp;<span class="ident" id="6280538"><a href="/compress/lzw/writer.go.html#6280501">tableSize</a></span>&nbsp;<span class="op" id="6280548">-</span>&nbsp;<span class="num" id="6280550">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280553">//&nbsp;A&nbsp;hash&nbsp;table&nbsp;entry&nbsp;is&nbsp;a&nbsp;uint32.&nbsp;Zero&nbsp;is&nbsp;an&nbsp;invalid&nbsp;entry&nbsp;since&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280624">//&nbsp;lower&nbsp;12&nbsp;bits&nbsp;of&nbsp;a&nbsp;valid&nbsp;entry&nbsp;must&nbsp;be&nbsp;a&nbsp;non-literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280687">invalidEntry</span>&nbsp;<span class="op" id="6280700">=</span>&nbsp;<span class="num" id="6280702">0</span><br>
<span class="lineno">45</span><span class="op" id="6280704">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6280707">//&nbsp;encoder&nbsp;is&nbsp;LZW&nbsp;compressor.</span><br>
<span class="lineno"></span><span class="keyword" id="6280737">type</span>&nbsp;<span class="ident" id="6280742">encoder</span>&nbsp;<span class="keyword" id="6280750">struct</span>&nbsp;<span class="op" id="6280757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280760">//&nbsp;w&nbsp;is&nbsp;the&nbsp;writer&nbsp;that&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;written&nbsp;to.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280818">w</span>&nbsp;<span class="ident" id="6280820"><a href="/compress/lzw/writer.go.html#6279869">writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280828">//&nbsp;order,&nbsp;write,&nbsp;bits,&nbsp;nBits&nbsp;and&nbsp;width&nbsp;are&nbsp;the&nbsp;state&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6280886">//&nbsp;converting&nbsp;a&nbsp;code&nbsp;stream&nbsp;into&nbsp;a&nbsp;byte&nbsp;stream.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280935">order</span>&nbsp;<span class="ident" id="6280941"><a href="/compress/lzw/reader.go.html#6273491">Order</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280948">write</span>&nbsp;<span class="keyword" id="6280954">func</span><span class="op" id="6280958">(</span><span class="op" id="6280959">*</span><span class="ident" id="6280960"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6280967">,</span>&nbsp;<span class="builtintype" id="6280969">uint32</span><span class="op" id="6280975">)</span>&nbsp;<span class="builtintype" id="6280977">error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280984">bits</span>&nbsp;&nbsp;<span class="builtintype" id="6280990">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6280998">nBits</span>&nbsp;<span class="builtintype" id="6281004">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281010">width</span>&nbsp;<span class="builtintype" id="6281016">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281022">//&nbsp;litWidth&nbsp;is&nbsp;the&nbsp;width&nbsp;in&nbsp;bits&nbsp;of&nbsp;literal&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281074">litWidth</span>&nbsp;<span class="builtintype" id="6281083">uint</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281089">//&nbsp;hi&nbsp;is&nbsp;the&nbsp;code&nbsp;implied&nbsp;by&nbsp;the&nbsp;next&nbsp;code&nbsp;emission.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281143">//&nbsp;overflow&nbsp;is&nbsp;the&nbsp;code&nbsp;at&nbsp;which&nbsp;hi&nbsp;overflows&nbsp;the&nbsp;code&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281206">hi</span><span class="op" id="6281208">,</span>&nbsp;<span class="ident" id="6281210">overflow</span>&nbsp;<span class="builtintype" id="6281219">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281227">//&nbsp;savedCode&nbsp;is&nbsp;the&nbsp;accumulated&nbsp;code&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281301">//&nbsp;call.&nbsp;It&nbsp;is&nbsp;equal&nbsp;to&nbsp;invalidCode&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;such&nbsp;call.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281365">savedCode</span>&nbsp;<span class="builtintype" id="6281375">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281383">//&nbsp;err&nbsp;is&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;during&nbsp;writing.&nbsp;Closing&nbsp;the&nbsp;encoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281458">//&nbsp;will&nbsp;make&nbsp;any&nbsp;future&nbsp;Write&nbsp;calls&nbsp;return&nbsp;errClosed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281512">err</span>&nbsp;<span class="builtintype" id="6281516">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281523">//&nbsp;table&nbsp;is&nbsp;the&nbsp;hash&nbsp;table&nbsp;from&nbsp;20-bit&nbsp;keys&nbsp;to&nbsp;12-bit&nbsp;values.&nbsp;Each&nbsp;table</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281597">//&nbsp;entry&nbsp;contains&nbsp;key&lt;&lt;12|val&nbsp;and&nbsp;collisions&nbsp;resolve&nbsp;by&nbsp;linear&nbsp;probing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281670">//&nbsp;The&nbsp;keys&nbsp;consist&nbsp;of&nbsp;a&nbsp;12-bit&nbsp;code&nbsp;prefix&nbsp;and&nbsp;an&nbsp;8-bit&nbsp;byte&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6281741">//&nbsp;The&nbsp;values&nbsp;are&nbsp;a&nbsp;12-bit&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281775">table</span>&nbsp;<span class="op" id="6281781">[</span><span class="ident" id="6281782"><a href="/compress/lzw/writer.go.html#6280501">tableSize</a></span><span class="op" id="6281791">]</span><span class="builtintype" id="6281792">uint32</span><br>
<span class="lineno"></span><span class="op" id="6281799">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6281802">//&nbsp;writeLSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Least&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="6281873">func</span>&nbsp;<span class="op" id="6281878">(</span><span class="ident" id="6281879">e</span>&nbsp;<span class="op" id="6281881">*</span><span class="ident" id="6281882"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6281889">)</span>&nbsp;<span class="ident" id="6281891">writeLSB</span><span class="op" id="6281899">(</span><span class="ident" id="6281900">c</span>&nbsp;<span class="builtintype" id="6281902">uint32</span><span class="op" id="6281908">)</span>&nbsp;<span class="builtintype" id="6281910">error</span>&nbsp;<span class="op" id="6281916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281919"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281920">.</span><span class="ident" id="6281921">bits</span>&nbsp;<span class="op" id="6281926">|=</span>&nbsp;<span class="ident" id="6281929"><a href="/compress/lzw/writer.go.html#6281900">c</a></span>&nbsp;<span class="op" id="6281931">&lt;&lt;</span>&nbsp;<span class="ident" id="6281934"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281935">.</span><span class="ident" id="6281936">nBits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6281943"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281944">.</span><span class="ident" id="6281945">nBits</span>&nbsp;<span class="op" id="6281951">+=</span>&nbsp;<span class="ident" id="6281954"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281955">.</span><span class="ident" id="6281956">width</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6281963">for</span>&nbsp;<span class="ident" id="6281967"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281968">.</span><span class="ident" id="6281969">nBits</span>&nbsp;<span class="op" id="6281975">&gt;=</span>&nbsp;<span class="num" id="6281978">8</span>&nbsp;<span class="op" id="6281980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6281984">if</span>&nbsp;<span class="ident" id="6281987">err</span>&nbsp;<span class="op" id="6281991">:=</span>&nbsp;<span class="ident" id="6281994"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6281995">.</span><span class="ident" id="6281996">w</span><span class="op" id="6281997">.</span><span class="ident" id="6281998">WriteByte</span><span class="op" id="6282007">(</span><span class="builtintype" id="6282008">uint8</span><span class="op" id="6282013">(</span><span class="ident" id="6282014"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6282015">.</span><span class="ident" id="6282016">bits</span><span class="op" id="6282020">)</span><span class="op" id="6282021">)</span><span class="op" id="6282022">;</span>&nbsp;<span class="ident" id="6282024"><a href="/compress/lzw/writer.go.html#6281987">err</a></span>&nbsp;<span class="op" id="6282028">!=</span>&nbsp;<span class="ident" id="6282031">nil</span>&nbsp;<span class="op" id="6282035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282040">return</span>&nbsp;<span class="ident" id="6282047"><a href="/compress/lzw/writer.go.html#6281987">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6282053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282057"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6282058">.</span><span class="ident" id="6282059">bits</span>&nbsp;<span class="op" id="6282064">&gt;&gt;=</span>&nbsp;<span class="num" id="6282068">8</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282072"><a href="/compress/lzw/writer.go.html#6281879">e</a></span><span class="op" id="6282073">.</span><span class="ident" id="6282074">nBits</span>&nbsp;<span class="op" id="6282080">-=</span>&nbsp;<span class="num" id="6282083">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6282086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282089">return</span>&nbsp;<span class="ident" id="6282096">nil</span><br>
<span class="lineno"></span><span class="op" id="6282100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="6282103">//&nbsp;writeMSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Most&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="6282173">func</span>&nbsp;<span class="op" id="6282178">(</span><span class="ident" id="6282179">e</span>&nbsp;<span class="op" id="6282181">*</span><span class="ident" id="6282182"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6282189">)</span>&nbsp;<span class="ident" id="6282191">writeMSB</span><span class="op" id="6282199">(</span><span class="ident" id="6282200">c</span>&nbsp;<span class="builtintype" id="6282202">uint32</span><span class="op" id="6282208">)</span>&nbsp;<span class="builtintype" id="6282210">error</span>&nbsp;<span class="op" id="6282216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282219"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282220">.</span><span class="ident" id="6282221">bits</span>&nbsp;<span class="op" id="6282226">|=</span>&nbsp;<span class="ident" id="6282229"><a href="/compress/lzw/writer.go.html#6282200">c</a></span>&nbsp;<span class="op" id="6282231">&lt;&lt;</span>&nbsp;<span class="op" id="6282234">(</span><span class="num" id="6282235">32</span>&nbsp;<span class="op" id="6282238">-</span>&nbsp;<span class="ident" id="6282240"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282241">.</span><span class="ident" id="6282242">width</span>&nbsp;<span class="op" id="6282248">-</span>&nbsp;<span class="ident" id="6282250"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282251">.</span><span class="ident" id="6282252">nBits</span><span class="op" id="6282257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282260"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282261">.</span><span class="ident" id="6282262">nBits</span>&nbsp;<span class="op" id="6282268">+=</span>&nbsp;<span class="ident" id="6282271"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282272">.</span><span class="ident" id="6282273">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282280">for</span>&nbsp;<span class="ident" id="6282284"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282285">.</span><span class="ident" id="6282286">nBits</span>&nbsp;<span class="op" id="6282292">&gt;=</span>&nbsp;<span class="num" id="6282295">8</span>&nbsp;<span class="op" id="6282297">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282301">if</span>&nbsp;<span class="ident" id="6282304">err</span>&nbsp;<span class="op" id="6282308">:=</span>&nbsp;<span class="ident" id="6282311"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282312">.</span><span class="ident" id="6282313">w</span><span class="op" id="6282314">.</span><span class="ident" id="6282315">WriteByte</span><span class="op" id="6282324">(</span><span class="builtintype" id="6282325">uint8</span><span class="op" id="6282330">(</span><span class="ident" id="6282331"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282332">.</span><span class="ident" id="6282333">bits</span>&nbsp;<span class="op" id="6282338">&gt;&gt;</span>&nbsp;<span class="num" id="6282341">24</span><span class="op" id="6282343">)</span><span class="op" id="6282344">)</span><span class="op" id="6282345">;</span>&nbsp;<span class="ident" id="6282347"><a href="/compress/lzw/writer.go.html#6282304">err</a></span>&nbsp;<span class="op" id="6282351">!=</span>&nbsp;<span class="ident" id="6282354">nil</span>&nbsp;<span class="op" id="6282358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282363">return</span>&nbsp;<span class="ident" id="6282370"><a href="/compress/lzw/writer.go.html#6282304">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6282376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282380"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282381">.</span><span class="ident" id="6282382">bits</span>&nbsp;<span class="op" id="6282387">&lt;&lt;=</span>&nbsp;<span class="num" id="6282391">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282395"><a href="/compress/lzw/writer.go.html#6282179">e</a></span><span class="op" id="6282396">.</span><span class="ident" id="6282397">nBits</span>&nbsp;<span class="op" id="6282403">-=</span>&nbsp;<span class="num" id="6282406">8</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6282409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282412">return</span>&nbsp;<span class="ident" id="6282419">nil</span><br>
<span class="lineno"></span><span class="op" id="6282423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6282426">//&nbsp;errOutOfCodes&nbsp;is&nbsp;an&nbsp;internal&nbsp;error&nbsp;that&nbsp;means&nbsp;that&nbsp;the&nbsp;encoder&nbsp;has&nbsp;run&nbsp;out</span><br>
<span class="lineno">105</span><span class="comment" id="6282504">//&nbsp;of&nbsp;unused&nbsp;codes&nbsp;and&nbsp;a&nbsp;clear&nbsp;code&nbsp;needs&nbsp;to&nbsp;be&nbsp;sent&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="6282563">var</span>&nbsp;<span class="ident" id="6282567">errOutOfCodes</span>&nbsp;<span class="op" id="6282581">=</span>&nbsp;<span class="ident" id="6282583"><a href="/compress/lzw/writer.go.html#6279794">errors</a></span><span class="op" id="6282589">.</span><span class="ident" id="6282590">New</span><span class="op" id="6282593">(</span><span class="string" id="6282594">&#34;lzw:&nbsp;out&nbsp;of&nbsp;codes&#34;</span><span class="op" id="6282613">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6282616">//&nbsp;incHi&nbsp;increments&nbsp;e.hi&nbsp;and&nbsp;checks&nbsp;for&nbsp;both&nbsp;overflow&nbsp;and&nbsp;running&nbsp;out&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6282689">//&nbsp;unused&nbsp;codes.&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;incHi&nbsp;sends&nbsp;a&nbsp;clear&nbsp;code,&nbsp;resets&nbsp;the</span><br>
<span class="lineno">110</span><span class="comment" id="6282763">//&nbsp;encoder&nbsp;state&nbsp;and&nbsp;returns&nbsp;errOutOfCodes.</span><br>
<span class="lineno"></span><span class="keyword" id="6282807">func</span>&nbsp;<span class="op" id="6282812">(</span><span class="ident" id="6282813">e</span>&nbsp;<span class="op" id="6282815">*</span><span class="ident" id="6282816"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6282823">)</span>&nbsp;<span class="ident" id="6282825">incHi</span><span class="op" id="6282830">(</span><span class="op" id="6282831">)</span>&nbsp;<span class="builtintype" id="6282833">error</span>&nbsp;<span class="op" id="6282839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282842"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282843">.</span><span class="ident" id="6282844">hi</span><span class="op" id="6282846">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282850">if</span>&nbsp;<span class="ident" id="6282853"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282854">.</span><span class="ident" id="6282855">hi</span>&nbsp;<span class="op" id="6282858">==</span>&nbsp;<span class="ident" id="6282861"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282862">.</span><span class="ident" id="6282863">overflow</span>&nbsp;<span class="op" id="6282872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282876"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282877">.</span><span class="ident" id="6282878">width</span><span class="op" id="6282883">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282888"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282889">.</span><span class="ident" id="6282890">overflow</span>&nbsp;<span class="op" id="6282899">&lt;&lt;=</span>&nbsp;<span class="num" id="6282903">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6282906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282909">if</span>&nbsp;<span class="ident" id="6282912"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282913">.</span><span class="ident" id="6282914">hi</span>&nbsp;<span class="op" id="6282917">==</span>&nbsp;<span class="ident" id="6282920"><a href="/compress/lzw/writer.go.html#6280295">maxCode</a></span>&nbsp;<span class="op" id="6282928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6282932">clear</span>&nbsp;<span class="op" id="6282938">:=</span>&nbsp;<span class="builtintype" id="6282941">uint32</span><span class="op" id="6282947">(</span><span class="num" id="6282948">1</span><span class="op" id="6282949">)</span>&nbsp;<span class="op" id="6282951">&lt;&lt;</span>&nbsp;<span class="ident" id="6282954"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282955">.</span><span class="ident" id="6282956">litWidth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6282967">if</span>&nbsp;<span class="ident" id="6282970">err</span>&nbsp;<span class="op" id="6282974">:=</span>&nbsp;<span class="ident" id="6282977"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282978">.</span><span class="ident" id="6282979">write</span><span class="op" id="6282984">(</span><span class="ident" id="6282985"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6282986">,</span>&nbsp;<span class="ident" id="6282988"><a href="/compress/lzw/writer.go.html#6282932">clear</a></span><span class="op" id="6282993">)</span><span class="op" id="6282994">;</span>&nbsp;<span class="ident" id="6282996"><a href="/compress/lzw/writer.go.html#6282970">err</a></span>&nbsp;<span class="op" id="6283000">!=</span>&nbsp;<span class="ident" id="6283003">nil</span>&nbsp;<span class="op" id="6283007">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283012">return</span>&nbsp;<span class="ident" id="6283019"><a href="/compress/lzw/writer.go.html#6282970">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283029"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283030">.</span><span class="ident" id="6283031">width</span>&nbsp;<span class="op" id="6283037">=</span>&nbsp;<span class="builtintype" id="6283039">uint</span><span class="op" id="6283043">(</span><span class="ident" id="6283044"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283045">.</span><span class="ident" id="6283046">litWidth</span><span class="op" id="6283054">)</span>&nbsp;<span class="op" id="6283056">+</span>&nbsp;<span class="num" id="6283058">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283062"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283063">.</span><span class="ident" id="6283064">hi</span>&nbsp;<span class="op" id="6283067">=</span>&nbsp;<span class="ident" id="6283069"><a href="/compress/lzw/writer.go.html#6282932">clear</a></span>&nbsp;<span class="op" id="6283075">+</span>&nbsp;<span class="num" id="6283077">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283081"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283082">.</span><span class="ident" id="6283083">overflow</span>&nbsp;<span class="op" id="6283092">=</span>&nbsp;<span class="ident" id="6283094"><a href="/compress/lzw/writer.go.html#6282932">clear</a></span>&nbsp;<span class="op" id="6283100">&lt;&lt;</span>&nbsp;<span class="num" id="6283103">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283107">for</span>&nbsp;<span class="ident" id="6283111">i</span>&nbsp;<span class="op" id="6283113">:=</span>&nbsp;<span class="keyword" id="6283116">range</span>&nbsp;<span class="ident" id="6283122"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283123">.</span><span class="ident" id="6283124">table</span>&nbsp;<span class="op" id="6283130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283135"><a href="/compress/lzw/writer.go.html#6282813">e</a></span><span class="op" id="6283136">.</span><span class="ident" id="6283137">table</span><span class="op" id="6283142">[</span><span class="ident" id="6283143"><a href="/compress/lzw/writer.go.html#6283111">i</a></span><span class="op" id="6283144">]</span>&nbsp;<span class="op" id="6283146">=</span>&nbsp;<span class="ident" id="6283148"><a href="/compress/lzw/writer.go.html#6280687">invalidEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283167">return</span>&nbsp;<span class="ident" id="6283174"><a href="/compress/lzw/writer.go.html#6282567">errOutOfCodes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283189">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283192">return</span>&nbsp;<span class="ident" id="6283199">nil</span><br>
<span class="lineno"></span><span class="op" id="6283203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6283206">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;representation&nbsp;of&nbsp;p&nbsp;to&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="6283281">func</span>&nbsp;<span class="op" id="6283286">(</span><span class="ident" id="6283287">e</span>&nbsp;<span class="op" id="6283289">*</span><span class="ident" id="6283290"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6283297">)</span>&nbsp;<span class="ident" id="6283299">Write</span><span class="op" id="6283304">(</span><span class="ident" id="6283305">p</span>&nbsp;<span class="op" id="6283307">[</span><span class="op" id="6283308">]</span><span class="builtintype" id="6283309">byte</span><span class="op" id="6283313">)</span>&nbsp;<span class="op" id="6283315">(</span><span class="ident" id="6283316">n</span>&nbsp;<span class="builtintype" id="6283318">int</span><span class="op" id="6283321">,</span>&nbsp;<span class="ident" id="6283323">err</span>&nbsp;<span class="builtintype" id="6283327">error</span><span class="op" id="6283332">)</span>&nbsp;<span class="op" id="6283334">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283337">if</span>&nbsp;<span class="ident" id="6283340"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283341">.</span><span class="ident" id="6283342">err</span>&nbsp;<span class="op" id="6283346">!=</span>&nbsp;<span class="ident" id="6283349">nil</span>&nbsp;<span class="op" id="6283353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283357">return</span>&nbsp;<span class="num" id="6283364">0</span><span class="op" id="6283365">,</span>&nbsp;<span class="ident" id="6283367"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283368">.</span><span class="ident" id="6283369">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283377">if</span>&nbsp;<span class="builtinfunc" id="6283380">len</span><span class="op" id="6283383">(</span><span class="ident" id="6283384"><a href="/compress/lzw/writer.go.html#6283305">p</a></span><span class="op" id="6283385">)</span>&nbsp;<span class="op" id="6283387">==</span>&nbsp;<span class="num" id="6283390">0</span>&nbsp;<span class="op" id="6283392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283396">return</span>&nbsp;<span class="num" id="6283403">0</span><span class="op" id="6283404">,</span>&nbsp;<span class="ident" id="6283406">nil</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283414"><a href="/compress/lzw/writer.go.html#6283316">n</a></span>&nbsp;<span class="op" id="6283416">=</span>&nbsp;<span class="builtinfunc" id="6283418">len</span><span class="op" id="6283421">(</span><span class="ident" id="6283422"><a href="/compress/lzw/writer.go.html#6283305">p</a></span><span class="op" id="6283423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283426">litMask</span>&nbsp;<span class="op" id="6283434">:=</span>&nbsp;<span class="builtintype" id="6283437">uint32</span><span class="op" id="6283443">(</span><span class="num" id="6283444">1</span><span class="op" id="6283445">&lt;&lt;</span><span class="ident" id="6283447"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283448">.</span><span class="ident" id="6283449">litWidth</span>&nbsp;<span class="op" id="6283458">-</span>&nbsp;<span class="num" id="6283460">1</span><span class="op" id="6283461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283464">code</span>&nbsp;<span class="op" id="6283469">:=</span>&nbsp;<span class="ident" id="6283472"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283473">.</span><span class="ident" id="6283474">savedCode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283485">if</span>&nbsp;<span class="ident" id="6283488"><a href="/compress/lzw/writer.go.html#6283464">code</a></span>&nbsp;<span class="op" id="6283493">==</span>&nbsp;<span class="ident" id="6283496"><a href="/compress/lzw/writer.go.html#6280320">invalidCode</a></span>&nbsp;<span class="op" id="6283508">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6283512">//&nbsp;The&nbsp;first&nbsp;code&nbsp;sent&nbsp;is&nbsp;always&nbsp;a&nbsp;literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283563"><a href="/compress/lzw/writer.go.html#6283464">code</a></span><span class="op" id="6283567">,</span>&nbsp;<span class="ident" id="6283569"><a href="/compress/lzw/writer.go.html#6283305">p</a></span>&nbsp;<span class="op" id="6283571">=</span>&nbsp;<span class="builtintype" id="6283573">uint32</span><span class="op" id="6283579">(</span><span class="ident" id="6283580"><a href="/compress/lzw/writer.go.html#6283305">p</a></span><span class="op" id="6283581">[</span><span class="num" id="6283582">0</span><span class="op" id="6283583">]</span><span class="op" id="6283584">)</span><span class="op" id="6283585">&amp;</span><span class="ident" id="6283586"><a href="/compress/lzw/writer.go.html#6283426">litMask</a></span><span class="op" id="6283593">,</span>&nbsp;<span class="ident" id="6283595"><a href="/compress/lzw/writer.go.html#6283305">p</a></span><span class="op" id="6283596">[</span><span class="num" id="6283597">1</span><span class="op" id="6283598">:</span><span class="op" id="6283599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283602">}</span><br>
<span class="lineno"></span><span class="ident" id="6283604">loop</span><span class="op" id="6283608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283611">for</span>&nbsp;<span class="ident" id="6283615">_</span><span class="op" id="6283616">,</span>&nbsp;<span class="ident" id="6283618">x</span>&nbsp;<span class="op" id="6283620">:=</span>&nbsp;<span class="keyword" id="6283623">range</span>&nbsp;<span class="ident" id="6283629"><a href="/compress/lzw/writer.go.html#6283305">p</a></span>&nbsp;<span class="op" id="6283631">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283635">literal</span>&nbsp;<span class="op" id="6283643">:=</span>&nbsp;<span class="builtintype" id="6283646">uint32</span><span class="op" id="6283652">(</span><span class="ident" id="6283653"><a href="/compress/lzw/writer.go.html#6283618">x</a></span><span class="op" id="6283654">)</span>&nbsp;<span class="op" id="6283656">&amp;</span>&nbsp;<span class="ident" id="6283658"><a href="/compress/lzw/writer.go.html#6283426">litMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283668">key</span>&nbsp;<span class="op" id="6283672">:=</span>&nbsp;<span class="ident" id="6283675"><a href="/compress/lzw/writer.go.html#6283464">code</a></span><span class="op" id="6283679">&lt;&lt;</span><span class="num" id="6283681">8</span>&nbsp;<span class="op" id="6283683">|</span>&nbsp;<span class="ident" id="6283685"><a href="/compress/lzw/writer.go.html#6283635">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6283695">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;hash&nbsp;table&nbsp;hit&nbsp;for&nbsp;this&nbsp;key&nbsp;then&nbsp;we&nbsp;continue&nbsp;the&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6283768">//&nbsp;and&nbsp;do&nbsp;not&nbsp;emit&nbsp;a&nbsp;code&nbsp;yet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283801">hash</span>&nbsp;<span class="op" id="6283806">:=</span>&nbsp;<span class="op" id="6283809">(</span><span class="ident" id="6283810"><a href="/compress/lzw/writer.go.html#6283668">key</a></span><span class="op" id="6283813">&gt;&gt;</span><span class="num" id="6283815">12</span>&nbsp;<span class="op" id="6283818">^</span>&nbsp;<span class="ident" id="6283820"><a href="/compress/lzw/writer.go.html#6283668">key</a></span><span class="op" id="6283823">)</span>&nbsp;<span class="op" id="6283825">&amp;</span>&nbsp;<span class="ident" id="6283827"><a href="/compress/lzw/writer.go.html#6280526">tableMask</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283839">for</span>&nbsp;<span class="ident" id="6283843">h</span><span class="op" id="6283844">,</span>&nbsp;<span class="ident" id="6283846">t</span>&nbsp;<span class="op" id="6283848">:=</span>&nbsp;<span class="ident" id="6283851"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span><span class="op" id="6283855">,</span>&nbsp;<span class="ident" id="6283857"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283858">.</span><span class="ident" id="6283859">table</span><span class="op" id="6283864">[</span><span class="ident" id="6283865"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span><span class="op" id="6283869">]</span><span class="op" id="6283870">;</span>&nbsp;<span class="ident" id="6283872"><a href="/compress/lzw/writer.go.html#6283846">t</a></span>&nbsp;<span class="op" id="6283874">!=</span>&nbsp;<span class="ident" id="6283877"><a href="/compress/lzw/writer.go.html#6280687">invalidEntry</a></span><span class="op" id="6283889">;</span>&nbsp;<span class="op" id="6283891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283896">if</span>&nbsp;<span class="ident" id="6283899"><a href="/compress/lzw/writer.go.html#6283668">key</a></span>&nbsp;<span class="op" id="6283903">==</span>&nbsp;<span class="ident" id="6283906"><a href="/compress/lzw/writer.go.html#6283846">t</a></span><span class="op" id="6283907">&gt;&gt;</span><span class="num" id="6283909">12</span>&nbsp;<span class="op" id="6283912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283918"><a href="/compress/lzw/writer.go.html#6283464">code</a></span>&nbsp;<span class="op" id="6283923">=</span>&nbsp;<span class="ident" id="6283925"><a href="/compress/lzw/writer.go.html#6283846">t</a></span>&nbsp;<span class="op" id="6283927">&amp;</span>&nbsp;<span class="ident" id="6283929"><a href="/compress/lzw/writer.go.html#6280295">maxCode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6283941">continue</span>&nbsp;<span class="ident" id="6283950">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6283958">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283963"><a href="/compress/lzw/writer.go.html#6283843">h</a></span>&nbsp;<span class="op" id="6283965">=</span>&nbsp;<span class="op" id="6283967">(</span><span class="ident" id="6283968"><a href="/compress/lzw/writer.go.html#6283843">h</a></span>&nbsp;<span class="op" id="6283970">+</span>&nbsp;<span class="num" id="6283972">1</span><span class="op" id="6283973">)</span>&nbsp;<span class="op" id="6283975">&amp;</span>&nbsp;<span class="ident" id="6283977"><a href="/compress/lzw/writer.go.html#6280526">tableMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6283990"><a href="/compress/lzw/writer.go.html#6283846">t</a></span>&nbsp;<span class="op" id="6283992">=</span>&nbsp;<span class="ident" id="6283994"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6283995">.</span><span class="ident" id="6283996">table</span><span class="op" id="6284001">[</span><span class="ident" id="6284002"><a href="/compress/lzw/writer.go.html#6283843">h</a></span><span class="op" id="6284003">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284011">//&nbsp;Otherwise,&nbsp;write&nbsp;the&nbsp;current&nbsp;code,&nbsp;and&nbsp;literal&nbsp;becomes&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284084">//&nbsp;the&nbsp;next&nbsp;emitted&nbsp;code.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284112">if</span>&nbsp;<span class="ident" id="6284115"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284116">.</span><span class="ident" id="6284117">err</span>&nbsp;<span class="op" id="6284121">=</span>&nbsp;<span class="ident" id="6284123"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284124">.</span><span class="ident" id="6284125">write</span><span class="op" id="6284130">(</span><span class="ident" id="6284131"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284132">,</span>&nbsp;<span class="ident" id="6284134"><a href="/compress/lzw/writer.go.html#6283464">code</a></span><span class="op" id="6284138">)</span><span class="op" id="6284139">;</span>&nbsp;<span class="ident" id="6284141"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284142">.</span><span class="ident" id="6284143">err</span>&nbsp;<span class="op" id="6284147">!=</span>&nbsp;<span class="ident" id="6284150">nil</span>&nbsp;<span class="op" id="6284154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284159">return</span>&nbsp;<span class="num" id="6284166">0</span><span class="op" id="6284167">,</span>&nbsp;<span class="ident" id="6284169"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284170">.</span><span class="ident" id="6284171">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284181"><a href="/compress/lzw/writer.go.html#6283464">code</a></span>&nbsp;<span class="op" id="6284186">=</span>&nbsp;<span class="ident" id="6284188"><a href="/compress/lzw/writer.go.html#6283635">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284198">//&nbsp;Increment&nbsp;e.hi,&nbsp;the&nbsp;next&nbsp;implied&nbsp;code.&nbsp;If&nbsp;we&nbsp;run&nbsp;out&nbsp;of&nbsp;codes,&nbsp;reset</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284272">//&nbsp;the&nbsp;encoder&nbsp;state&nbsp;(including&nbsp;clearing&nbsp;the&nbsp;hash&nbsp;table)&nbsp;and&nbsp;continue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284345">if</span>&nbsp;<span class="ident" id="6284348">err1</span>&nbsp;<span class="op" id="6284353">:=</span>&nbsp;<span class="ident" id="6284356"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284357">.</span><span class="ident" id="6284358">incHi</span><span class="op" id="6284363">(</span><span class="op" id="6284364">)</span><span class="op" id="6284365">;</span>&nbsp;<span class="ident" id="6284367"><a href="/compress/lzw/writer.go.html#6284348">err1</a></span>&nbsp;<span class="op" id="6284372">!=</span>&nbsp;<span class="ident" id="6284375">nil</span>&nbsp;<span class="op" id="6284379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284384">if</span>&nbsp;<span class="ident" id="6284387"><a href="/compress/lzw/writer.go.html#6284348">err1</a></span>&nbsp;<span class="op" id="6284392">==</span>&nbsp;<span class="ident" id="6284395"><a href="/compress/lzw/writer.go.html#6282567">errOutOfCodes</a></span>&nbsp;<span class="op" id="6284409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284415">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284427">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284432"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284433">.</span><span class="ident" id="6284434">err</span>&nbsp;<span class="op" id="6284438">=</span>&nbsp;<span class="ident" id="6284440"><a href="/compress/lzw/writer.go.html#6284348">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284448">return</span>&nbsp;<span class="num" id="6284455">0</span><span class="op" id="6284456">,</span>&nbsp;<span class="ident" id="6284458"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284459">.</span><span class="ident" id="6284460">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284470">//&nbsp;Otherwise,&nbsp;insert&nbsp;key&nbsp;-&gt;&nbsp;e.hi&nbsp;into&nbsp;the&nbsp;map&nbsp;that&nbsp;e.table&nbsp;represents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284543">for</span>&nbsp;<span class="op" id="6284547">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284552">if</span>&nbsp;<span class="ident" id="6284555"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284556">.</span><span class="ident" id="6284557">table</span><span class="op" id="6284562">[</span><span class="ident" id="6284563"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span><span class="op" id="6284567">]</span>&nbsp;<span class="op" id="6284569">==</span>&nbsp;<span class="ident" id="6284572"><a href="/compress/lzw/writer.go.html#6280687">invalidEntry</a></span>&nbsp;<span class="op" id="6284585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284591"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284592">.</span><span class="ident" id="6284593">table</span><span class="op" id="6284598">[</span><span class="ident" id="6284599"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span><span class="op" id="6284603">]</span>&nbsp;<span class="op" id="6284605">=</span>&nbsp;<span class="op" id="6284607">(</span><span class="ident" id="6284608"><a href="/compress/lzw/writer.go.html#6283668">key</a></span>&nbsp;<span class="op" id="6284612">&lt;&lt;</span>&nbsp;<span class="num" id="6284615">12</span><span class="op" id="6284617">)</span>&nbsp;<span class="op" id="6284619">|</span>&nbsp;<span class="ident" id="6284621"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284622">.</span><span class="ident" id="6284623">hi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284630">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284644"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span>&nbsp;<span class="op" id="6284649">=</span>&nbsp;<span class="op" id="6284651">(</span><span class="ident" id="6284652"><a href="/compress/lzw/writer.go.html#6283801">hash</a></span>&nbsp;<span class="op" id="6284657">+</span>&nbsp;<span class="num" id="6284659">1</span><span class="op" id="6284660">)</span>&nbsp;<span class="op" id="6284662">&amp;</span>&nbsp;<span class="ident" id="6284664"><a href="/compress/lzw/writer.go.html#6280526">tableMask</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284682"><a href="/compress/lzw/writer.go.html#6283287">e</a></span><span class="op" id="6284683">.</span><span class="ident" id="6284684">savedCode</span>&nbsp;<span class="op" id="6284694">=</span>&nbsp;<span class="ident" id="6284696"><a href="/compress/lzw/writer.go.html#6283464">code</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284702">return</span>&nbsp;<span class="ident" id="6284709"><a href="/compress/lzw/writer.go.html#6283316">n</a></span><span class="op" id="6284710">,</span>&nbsp;<span class="ident" id="6284712">nil</span><br>
<span class="lineno"></span><span class="op" id="6284716">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6284719">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;encoder,&nbsp;flushing&nbsp;any&nbsp;pending&nbsp;output.&nbsp;It&nbsp;does&nbsp;not&nbsp;close&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6284798">//&nbsp;flush&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="6284830">func</span>&nbsp;<span class="op" id="6284835">(</span><span class="ident" id="6284836">e</span>&nbsp;<span class="op" id="6284838">*</span><span class="ident" id="6284839"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6284846">)</span>&nbsp;<span class="ident" id="6284848">Close</span><span class="op" id="6284853">(</span><span class="op" id="6284854">)</span>&nbsp;<span class="builtintype" id="6284856">error</span>&nbsp;<span class="op" id="6284862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284865">if</span>&nbsp;<span class="ident" id="6284868"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6284869">.</span><span class="ident" id="6284870">err</span>&nbsp;<span class="op" id="6284874">!=</span>&nbsp;<span class="ident" id="6284877">nil</span>&nbsp;<span class="op" id="6284881">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284885">if</span>&nbsp;<span class="ident" id="6284888"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6284889">.</span><span class="ident" id="6284890">err</span>&nbsp;<span class="op" id="6284894">==</span>&nbsp;<span class="ident" id="6284897"><a href="/compress/lzw/reader.go.html#6278346">errClosed</a></span>&nbsp;<span class="op" id="6284907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284912">return</span>&nbsp;<span class="ident" id="6284919">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6284929">return</span>&nbsp;<span class="ident" id="6284936"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6284937">.</span><span class="ident" id="6284938">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6284943">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6284946">//&nbsp;Make&nbsp;any&nbsp;future&nbsp;calls&nbsp;to&nbsp;Write&nbsp;return&nbsp;errClosed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6284999"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285000">.</span><span class="ident" id="6285001">err</span>&nbsp;<span class="op" id="6285005">=</span>&nbsp;<span class="ident" id="6285007"><a href="/compress/lzw/reader.go.html#6278346">errClosed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6285018">//&nbsp;Write&nbsp;the&nbsp;savedCode&nbsp;if&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285052">if</span>&nbsp;<span class="ident" id="6285055"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285056">.</span><span class="ident" id="6285057">savedCode</span>&nbsp;<span class="op" id="6285067">!=</span>&nbsp;<span class="ident" id="6285070"><a href="/compress/lzw/writer.go.html#6280320">invalidCode</a></span>&nbsp;<span class="op" id="6285082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285086">if</span>&nbsp;<span class="ident" id="6285089">err</span>&nbsp;<span class="op" id="6285093">:=</span>&nbsp;<span class="ident" id="6285096"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285097">.</span><span class="ident" id="6285098">write</span><span class="op" id="6285103">(</span><span class="ident" id="6285104"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285105">,</span>&nbsp;<span class="ident" id="6285107"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285108">.</span><span class="ident" id="6285109">savedCode</span><span class="op" id="6285118">)</span><span class="op" id="6285119">;</span>&nbsp;<span class="ident" id="6285121"><a href="/compress/lzw/writer.go.html#6285089">err</a></span>&nbsp;<span class="op" id="6285125">!=</span>&nbsp;<span class="ident" id="6285128">nil</span>&nbsp;<span class="op" id="6285132">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285137">return</span>&nbsp;<span class="ident" id="6285144"><a href="/compress/lzw/writer.go.html#6285089">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285154">if</span>&nbsp;<span class="ident" id="6285157">err</span>&nbsp;<span class="op" id="6285161">:=</span>&nbsp;<span class="ident" id="6285164"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285165">.</span><span class="ident" id="6285166">incHi</span><span class="op" id="6285171">(</span><span class="op" id="6285172">)</span><span class="op" id="6285173">;</span>&nbsp;<span class="ident" id="6285175"><a href="/compress/lzw/writer.go.html#6285157">err</a></span>&nbsp;<span class="op" id="6285179">!=</span>&nbsp;<span class="ident" id="6285182">nil</span>&nbsp;<span class="op" id="6285186">&amp;&amp;</span>&nbsp;<span class="ident" id="6285189"><a href="/compress/lzw/writer.go.html#6285157">err</a></span>&nbsp;<span class="op" id="6285193">!=</span>&nbsp;<span class="ident" id="6285196"><a href="/compress/lzw/writer.go.html#6282567">errOutOfCodes</a></span>&nbsp;<span class="op" id="6285210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285215">return</span>&nbsp;<span class="ident" id="6285222"><a href="/compress/lzw/writer.go.html#6285157">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285228">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6285234">//&nbsp;Write&nbsp;the&nbsp;eof&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6285258">eof</span>&nbsp;<span class="op" id="6285262">:=</span>&nbsp;<span class="builtintype" id="6285265">uint32</span><span class="op" id="6285271">(</span><span class="num" id="6285272">1</span><span class="op" id="6285273">)</span><span class="op" id="6285274">&lt;&lt;</span><span class="ident" id="6285276"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285277">.</span><span class="ident" id="6285278">litWidth</span>&nbsp;<span class="op" id="6285287">+</span>&nbsp;<span class="num" id="6285289">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285292">if</span>&nbsp;<span class="ident" id="6285295">err</span>&nbsp;<span class="op" id="6285299">:=</span>&nbsp;<span class="ident" id="6285302"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285303">.</span><span class="ident" id="6285304">write</span><span class="op" id="6285309">(</span><span class="ident" id="6285310"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285311">,</span>&nbsp;<span class="ident" id="6285313"><a href="/compress/lzw/writer.go.html#6285258">eof</a></span><span class="op" id="6285316">)</span><span class="op" id="6285317">;</span>&nbsp;<span class="ident" id="6285319"><a href="/compress/lzw/writer.go.html#6285295">err</a></span>&nbsp;<span class="op" id="6285323">!=</span>&nbsp;<span class="ident" id="6285326">nil</span>&nbsp;<span class="op" id="6285330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285334">return</span>&nbsp;<span class="ident" id="6285341"><a href="/compress/lzw/writer.go.html#6285295">err</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6285349">//&nbsp;Write&nbsp;the&nbsp;final&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285375">if</span>&nbsp;<span class="ident" id="6285378"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285379">.</span><span class="ident" id="6285380">nBits</span>&nbsp;<span class="op" id="6285386">&gt;</span>&nbsp;<span class="num" id="6285388">0</span>&nbsp;<span class="op" id="6285390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285394">if</span>&nbsp;<span class="ident" id="6285397"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285398">.</span><span class="ident" id="6285399">order</span>&nbsp;<span class="op" id="6285405">==</span>&nbsp;<span class="ident" id="6285408"><a href="/compress/lzw/reader.go.html#6273694">MSB</a></span>&nbsp;<span class="op" id="6285412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6285417"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285418">.</span><span class="ident" id="6285419">bits</span>&nbsp;<span class="op" id="6285424">&gt;&gt;=</span>&nbsp;<span class="num" id="6285428">24</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285437">if</span>&nbsp;<span class="ident" id="6285440">err</span>&nbsp;<span class="op" id="6285444">:=</span>&nbsp;<span class="ident" id="6285447"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285448">.</span><span class="ident" id="6285449">w</span><span class="op" id="6285450">.</span><span class="ident" id="6285451">WriteByte</span><span class="op" id="6285460">(</span><span class="builtintype" id="6285461">uint8</span><span class="op" id="6285466">(</span><span class="ident" id="6285467"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285468">.</span><span class="ident" id="6285469">bits</span><span class="op" id="6285473">)</span><span class="op" id="6285474">)</span><span class="op" id="6285475">;</span>&nbsp;<span class="ident" id="6285477"><a href="/compress/lzw/writer.go.html#6285440">err</a></span>&nbsp;<span class="op" id="6285481">!=</span>&nbsp;<span class="ident" id="6285484">nil</span>&nbsp;<span class="op" id="6285488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285493">return</span>&nbsp;<span class="ident" id="6285500"><a href="/compress/lzw/writer.go.html#6285440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6285509">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285512">return</span>&nbsp;<span class="ident" id="6285519"><a href="/compress/lzw/writer.go.html#6284836">e</a></span><span class="op" id="6285520">.</span><span class="ident" id="6285521">w</span><span class="op" id="6285522">.</span><span class="ident" id="6285523">Flush</span><span class="op" id="6285528">(</span><span class="op" id="6285529">)</span><br>
<span class="lineno"></span><span class="op" id="6285531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6285534">//&nbsp;NewWriter&nbsp;creates&nbsp;a&nbsp;new&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="6285577">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;io.WriteCloser&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno">230</span><span class="comment" id="6285651">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6285726">//&nbsp;finished&nbsp;writing.</span><br>
<span class="lineno"></span><span class="comment" id="6285747">//&nbsp;The&nbsp;number&nbsp;of&nbsp;bits&nbsp;to&nbsp;use&nbsp;for&nbsp;literal&nbsp;codes,&nbsp;litWidth,&nbsp;must&nbsp;be&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6285820">//&nbsp;range&nbsp;[2,8]&nbsp;and&nbsp;is&nbsp;typically&nbsp;8.</span><br>
<span class="lineno"></span><span class="keyword" id="6285855">func</span>&nbsp;<span class="ident" id="6285860">NewWriter</span><span class="op" id="6285869">(</span><span class="ident" id="6285870">w</span>&nbsp;<span class="ident" id="6285872"><a href="/compress/lzw/writer.go.html#6279811">io</a></span><span class="op" id="6285874">.</span><span class="ident" id="6285875">Writer</span><span class="op" id="6285881">,</span>&nbsp;<span class="ident" id="6285883">order</span>&nbsp;<span class="ident" id="6285889"><a href="/compress/lzw/reader.go.html#6273491">Order</a></span><span class="op" id="6285894">,</span>&nbsp;<span class="ident" id="6285896">litWidth</span>&nbsp;<span class="builtintype" id="6285905">int</span><span class="op" id="6285908">)</span>&nbsp;<span class="ident" id="6285910"><a href="/compress/lzw/writer.go.html#6279811">io</a></span><span class="op" id="6285912">.</span><span class="ident" id="6285913">WriteCloser</span>&nbsp;<span class="op" id="6285925">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285928">var</span>&nbsp;<span class="ident" id="6285932">write</span>&nbsp;<span class="keyword" id="6285938">func</span><span class="op" id="6285942">(</span><span class="op" id="6285943">*</span><span class="ident" id="6285944"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6285951">,</span>&nbsp;<span class="builtintype" id="6285953">uint32</span><span class="op" id="6285959">)</span>&nbsp;<span class="builtintype" id="6285961">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285968">switch</span>&nbsp;<span class="ident" id="6285975"><a href="/compress/lzw/writer.go.html#6285883">order</a></span>&nbsp;<span class="op" id="6285981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6285984">case</span>&nbsp;<span class="ident" id="6285989"><a href="/compress/lzw/reader.go.html#6273587">LSB</a></span><span class="op" id="6285992">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6285996"><a href="/compress/lzw/writer.go.html#6285932">write</a></span>&nbsp;<span class="op" id="6286002">=</span>&nbsp;<span class="op" id="6286004">(</span><span class="op" id="6286005">*</span><span class="ident" id="6286006"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6286013">)</span><span class="op" id="6286014">.</span><span class="ident" id="6286015">writeLSB</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286025">case</span>&nbsp;<span class="ident" id="6286030"><a href="/compress/lzw/reader.go.html#6273694">MSB</a></span><span class="op" id="6286033">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286037"><a href="/compress/lzw/writer.go.html#6285932">write</a></span>&nbsp;<span class="op" id="6286043">=</span>&nbsp;<span class="op" id="6286045">(</span><span class="op" id="6286046">*</span><span class="ident" id="6286047"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6286054">)</span><span class="op" id="6286055">.</span><span class="ident" id="6286056">writeMSB</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286066">default</span><span class="op" id="6286073">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286077">return</span>&nbsp;<span class="op" id="6286084">&amp;</span><span class="ident" id="6286085"><a href="/compress/lzw/writer.go.html#6280003">errWriteCloser</a></span><span class="op" id="6286099">{</span><span class="ident" id="6286100"><a href="/compress/lzw/writer.go.html#6279794">errors</a></span><span class="op" id="6286106">.</span><span class="ident" id="6286107">New</span><span class="op" id="6286110">(</span><span class="string" id="6286111">&#34;lzw:&nbsp;unknown&nbsp;order&#34;</span><span class="op" id="6286131">)</span><span class="op" id="6286132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6286135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286138">if</span>&nbsp;<span class="ident" id="6286141"><a href="/compress/lzw/writer.go.html#6285896">litWidth</a></span>&nbsp;<span class="op" id="6286150">&lt;</span>&nbsp;<span class="num" id="6286152">2</span>&nbsp;<span class="op" id="6286154">||</span>&nbsp;<span class="num" id="6286157">8</span>&nbsp;<span class="op" id="6286159">&lt;</span>&nbsp;<span class="ident" id="6286161"><a href="/compress/lzw/writer.go.html#6285896">litWidth</a></span>&nbsp;<span class="op" id="6286170">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286174">return</span>&nbsp;<span class="op" id="6286181">&amp;</span><span class="ident" id="6286182"><a href="/compress/lzw/writer.go.html#6280003">errWriteCloser</a></span><span class="op" id="6286196">{</span><span class="ident" id="6286197"><a href="/compress/lzw/writer.go.html#6279804">fmt</a></span><span class="op" id="6286200">.</span><span class="ident" id="6286201">Errorf</span><span class="op" id="6286207">(</span><span class="string" id="6286208">&#34;lzw:&nbsp;litWidth&nbsp;%d&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="6286239">,</span>&nbsp;<span class="ident" id="6286241"><a href="/compress/lzw/writer.go.html#6285896">litWidth</a></span><span class="op" id="6286249">)</span><span class="op" id="6286250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6286253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286256">bw</span><span class="op" id="6286258">,</span>&nbsp;<span class="ident" id="6286260">ok</span>&nbsp;<span class="op" id="6286263">:=</span>&nbsp;<span class="ident" id="6286266"><a href="/compress/lzw/writer.go.html#6285870">w</a></span><span class="op" id="6286267">.</span><span class="op" id="6286268">(</span><span class="ident" id="6286269"><a href="/compress/lzw/writer.go.html#6279869">writer</a></span><span class="op" id="6286275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286278">if</span>&nbsp;<span class="op" id="6286281">!</span><span class="ident" id="6286282"><a href="/compress/lzw/writer.go.html#6286260">ok</a></span>&nbsp;<span class="op" id="6286285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286289"><a href="/compress/lzw/writer.go.html#6286256">bw</a></span>&nbsp;<span class="op" id="6286292">=</span>&nbsp;<span class="ident" id="6286294"><a href="/compress/lzw/writer.go.html#6279785">bufio</a></span><span class="op" id="6286299">.</span><span class="ident" id="6286300">NewWriter</span><span class="op" id="6286309">(</span><span class="ident" id="6286310"><a href="/compress/lzw/writer.go.html#6285870">w</a></span><span class="op" id="6286311">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6286314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286317">lw</span>&nbsp;<span class="op" id="6286320">:=</span>&nbsp;<span class="builtintype" id="6286323">uint</span><span class="op" id="6286327">(</span><span class="ident" id="6286328"><a href="/compress/lzw/writer.go.html#6285896">litWidth</a></span><span class="op" id="6286336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6286339">return</span>&nbsp;<span class="op" id="6286346">&amp;</span><span class="ident" id="6286347"><a href="/compress/lzw/writer.go.html#6280742">encoder</a></span><span class="op" id="6286354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286358">w</span><span class="op" id="6286359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286369"><a href="/compress/lzw/writer.go.html#6286256">bw</a></span><span class="op" id="6286371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286375">order</span><span class="op" id="6286380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286386"><a href="/compress/lzw/writer.go.html#6285883">order</a></span><span class="op" id="6286391">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286395">write</span><span class="op" id="6286400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286406"><a href="/compress/lzw/writer.go.html#6285932">write</a></span><span class="op" id="6286411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286415">width</span><span class="op" id="6286420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6286426">1</span>&nbsp;<span class="op" id="6286428">+</span>&nbsp;<span class="ident" id="6286430"><a href="/compress/lzw/writer.go.html#6286317">lw</a></span><span class="op" id="6286432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286436">litWidth</span><span class="op" id="6286444">:</span>&nbsp;&nbsp;<span class="ident" id="6286447"><a href="/compress/lzw/writer.go.html#6286317">lw</a></span><span class="op" id="6286449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286453">hi</span><span class="op" id="6286455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6286464">1</span><span class="op" id="6286465">&lt;&lt;</span><span class="ident" id="6286467"><a href="/compress/lzw/writer.go.html#6286317">lw</a></span>&nbsp;<span class="op" id="6286470">+</span>&nbsp;<span class="num" id="6286472">1</span><span class="op" id="6286473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286477">overflow</span><span class="op" id="6286485">:</span>&nbsp;&nbsp;<span class="num" id="6286488">1</span>&nbsp;<span class="op" id="6286490">&lt;&lt;</span>&nbsp;<span class="op" id="6286493">(</span><span class="ident" id="6286494"><a href="/compress/lzw/writer.go.html#6286317">lw</a></span>&nbsp;<span class="op" id="6286497">+</span>&nbsp;<span class="num" id="6286499">1</span><span class="op" id="6286500">)</span><span class="op" id="6286501">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6286505">savedCode</span><span class="op" id="6286514">:</span>&nbsp;<span class="ident" id="6286516"><a href="/compress/lzw/writer.go.html#6280320">invalidCode</a></span><span class="op" id="6286527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6286530">}</span><br>
<span class="lineno"></span><span class="op" id="6286532">}</span>
</div>
</body>
</html>
