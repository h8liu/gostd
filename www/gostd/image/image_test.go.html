<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7514631">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7514686">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7514740">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7514791">package</span>&nbsp;<span class="ident" id="7514799">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7514806">import</span>&nbsp;<span class="op" id="7514813">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7514816">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7514831">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7514841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7514844">type</span>&nbsp;<span class="ident" id="7514849">image</span>&nbsp;<span class="keyword" id="7514855">interface</span>&nbsp;<span class="op" id="7514865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514868">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514875">Opaque</span><span class="op" id="7514881">(</span><span class="op" id="7514882">)</span>&nbsp;<span class="builtintype" id="7514884">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514890">Set</span><span class="op" id="7514893">(</span><span class="builtintype" id="7514894">int</span><span class="op" id="7514897">,</span>&nbsp;<span class="builtintype" id="7514899">int</span><span class="op" id="7514902">,</span>&nbsp;<span class="ident" id="7514904">color</span><span class="op" id="7514909">.</span><span class="ident" id="7514910">Color</span><span class="op" id="7514915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514918">SubImage</span><span class="op" id="7514926">(</span><span class="ident" id="7514927">Rectangle</span><span class="op" id="7514936">)</span>&nbsp;<span class="ident" id="7514938">Image</span><br>
<span class="lineno"></span><span class="op" id="7514944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7514947">func</span>&nbsp;<span class="ident" id="7514952">cmp</span><span class="op" id="7514955">(</span><span class="ident" id="7514956">t</span>&nbsp;<span class="op" id="7514958">*</span><span class="ident" id="7514959">testing</span><span class="op" id="7514966">.</span><span class="ident" id="7514967">T</span><span class="op" id="7514968">,</span>&nbsp;<span class="ident" id="7514970">cm</span>&nbsp;<span class="ident" id="7514973">color</span><span class="op" id="7514978">.</span><span class="ident" id="7514979">Model</span><span class="op" id="7514984">,</span>&nbsp;<span class="ident" id="7514986">c0</span><span class="op" id="7514988">,</span>&nbsp;<span class="ident" id="7514990">c1</span>&nbsp;<span class="ident" id="7514993">color</span><span class="op" id="7514998">.</span><span class="ident" id="7514999">Color</span><span class="op" id="7515004">)</span>&nbsp;<span class="builtintype" id="7515006">bool</span>&nbsp;<span class="op" id="7515011">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515014">r0</span><span class="op" id="7515016">,</span>&nbsp;<span class="ident" id="7515018">g0</span><span class="op" id="7515020">,</span>&nbsp;<span class="ident" id="7515022">b0</span><span class="op" id="7515024">,</span>&nbsp;<span class="ident" id="7515026">a0</span>&nbsp;<span class="op" id="7515029">:=</span>&nbsp;<span class="ident" id="7515032">cm</span><span class="op" id="7515034">.</span><span class="ident" id="7515035">Convert</span><span class="op" id="7515042">(</span><span class="ident" id="7515043">c0</span><span class="op" id="7515045">)</span><span class="op" id="7515046">.</span><span class="ident" id="7515047">RGBA</span><span class="op" id="7515051">(</span><span class="op" id="7515052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515055">r1</span><span class="op" id="7515057">,</span>&nbsp;<span class="ident" id="7515059">g1</span><span class="op" id="7515061">,</span>&nbsp;<span class="ident" id="7515063">b1</span><span class="op" id="7515065">,</span>&nbsp;<span class="ident" id="7515067">a1</span>&nbsp;<span class="op" id="7515070">:=</span>&nbsp;<span class="ident" id="7515073">cm</span><span class="op" id="7515075">.</span><span class="ident" id="7515076">Convert</span><span class="op" id="7515083">(</span><span class="ident" id="7515084">c1</span><span class="op" id="7515086">)</span><span class="op" id="7515087">.</span><span class="ident" id="7515088">RGBA</span><span class="op" id="7515092">(</span><span class="op" id="7515093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515096">return</span>&nbsp;<span class="ident" id="7515103">r0</span>&nbsp;<span class="op" id="7515106">==</span>&nbsp;<span class="ident" id="7515109">r1</span>&nbsp;<span class="op" id="7515112">&amp;&amp;</span>&nbsp;<span class="ident" id="7515115">g0</span>&nbsp;<span class="op" id="7515118">==</span>&nbsp;<span class="ident" id="7515121">g1</span>&nbsp;<span class="op" id="7515124">&amp;&amp;</span>&nbsp;<span class="ident" id="7515127">b0</span>&nbsp;<span class="op" id="7515130">==</span>&nbsp;<span class="ident" id="7515133">b1</span>&nbsp;<span class="op" id="7515136">&amp;&amp;</span>&nbsp;<span class="ident" id="7515139">a0</span>&nbsp;<span class="op" id="7515142">==</span>&nbsp;<span class="ident" id="7515145">a1</span><br>
<span class="lineno"></span><span class="op" id="7515148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7515151">func</span>&nbsp;<span class="ident" id="7515156">TestImage</span><span class="op" id="7515165">(</span><span class="ident" id="7515166">t</span>&nbsp;<span class="op" id="7515168">*</span><span class="ident" id="7515169">testing</span><span class="op" id="7515176">.</span><span class="ident" id="7515177">T</span><span class="op" id="7515178">)</span>&nbsp;<span class="op" id="7515180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515183">testImage</span>&nbsp;<span class="op" id="7515193">:=</span>&nbsp;<span class="op" id="7515196">[</span><span class="op" id="7515197">]</span><span class="ident" id="7515198">image</span><span class="op" id="7515203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515207">NewRGBA</span><span class="op" id="7515214">(</span><span class="ident" id="7515215">Rect</span><span class="op" id="7515219">(</span><span class="num" id="7515220">0</span><span class="op" id="7515221">,</span>&nbsp;<span class="num" id="7515223">0</span><span class="op" id="7515224">,</span>&nbsp;<span class="num" id="7515226">10</span><span class="op" id="7515228">,</span>&nbsp;<span class="num" id="7515230">10</span><span class="op" id="7515232">)</span><span class="op" id="7515233">)</span><span class="op" id="7515234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515238">NewRGBA64</span><span class="op" id="7515247">(</span><span class="ident" id="7515248">Rect</span><span class="op" id="7515252">(</span><span class="num" id="7515253">0</span><span class="op" id="7515254">,</span>&nbsp;<span class="num" id="7515256">0</span><span class="op" id="7515257">,</span>&nbsp;<span class="num" id="7515259">10</span><span class="op" id="7515261">,</span>&nbsp;<span class="num" id="7515263">10</span><span class="op" id="7515265">)</span><span class="op" id="7515266">)</span><span class="op" id="7515267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515271">NewNRGBA</span><span class="op" id="7515279">(</span><span class="ident" id="7515280">Rect</span><span class="op" id="7515284">(</span><span class="num" id="7515285">0</span><span class="op" id="7515286">,</span>&nbsp;<span class="num" id="7515288">0</span><span class="op" id="7515289">,</span>&nbsp;<span class="num" id="7515291">10</span><span class="op" id="7515293">,</span>&nbsp;<span class="num" id="7515295">10</span><span class="op" id="7515297">)</span><span class="op" id="7515298">)</span><span class="op" id="7515299">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515303">NewNRGBA64</span><span class="op" id="7515313">(</span><span class="ident" id="7515314">Rect</span><span class="op" id="7515318">(</span><span class="num" id="7515319">0</span><span class="op" id="7515320">,</span>&nbsp;<span class="num" id="7515322">0</span><span class="op" id="7515323">,</span>&nbsp;<span class="num" id="7515325">10</span><span class="op" id="7515327">,</span>&nbsp;<span class="num" id="7515329">10</span><span class="op" id="7515331">)</span><span class="op" id="7515332">)</span><span class="op" id="7515333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515337">NewAlpha</span><span class="op" id="7515345">(</span><span class="ident" id="7515346">Rect</span><span class="op" id="7515350">(</span><span class="num" id="7515351">0</span><span class="op" id="7515352">,</span>&nbsp;<span class="num" id="7515354">0</span><span class="op" id="7515355">,</span>&nbsp;<span class="num" id="7515357">10</span><span class="op" id="7515359">,</span>&nbsp;<span class="num" id="7515361">10</span><span class="op" id="7515363">)</span><span class="op" id="7515364">)</span><span class="op" id="7515365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515369">NewAlpha16</span><span class="op" id="7515379">(</span><span class="ident" id="7515380">Rect</span><span class="op" id="7515384">(</span><span class="num" id="7515385">0</span><span class="op" id="7515386">,</span>&nbsp;<span class="num" id="7515388">0</span><span class="op" id="7515389">,</span>&nbsp;<span class="num" id="7515391">10</span><span class="op" id="7515393">,</span>&nbsp;<span class="num" id="7515395">10</span><span class="op" id="7515397">)</span><span class="op" id="7515398">)</span><span class="op" id="7515399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515403">NewGray</span><span class="op" id="7515410">(</span><span class="ident" id="7515411">Rect</span><span class="op" id="7515415">(</span><span class="num" id="7515416">0</span><span class="op" id="7515417">,</span>&nbsp;<span class="num" id="7515419">0</span><span class="op" id="7515420">,</span>&nbsp;<span class="num" id="7515422">10</span><span class="op" id="7515424">,</span>&nbsp;<span class="num" id="7515426">10</span><span class="op" id="7515428">)</span><span class="op" id="7515429">)</span><span class="op" id="7515430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515434">NewGray16</span><span class="op" id="7515443">(</span><span class="ident" id="7515444">Rect</span><span class="op" id="7515448">(</span><span class="num" id="7515449">0</span><span class="op" id="7515450">,</span>&nbsp;<span class="num" id="7515452">0</span><span class="op" id="7515453">,</span>&nbsp;<span class="num" id="7515455">10</span><span class="op" id="7515457">,</span>&nbsp;<span class="num" id="7515459">10</span><span class="op" id="7515461">)</span><span class="op" id="7515462">)</span><span class="op" id="7515463">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515467">NewPaletted</span><span class="op" id="7515478">(</span><span class="ident" id="7515479">Rect</span><span class="op" id="7515483">(</span><span class="num" id="7515484">0</span><span class="op" id="7515485">,</span>&nbsp;<span class="num" id="7515487">0</span><span class="op" id="7515488">,</span>&nbsp;<span class="num" id="7515490">10</span><span class="op" id="7515492">,</span>&nbsp;<span class="num" id="7515494">10</span><span class="op" id="7515496">)</span><span class="op" id="7515497">,</span>&nbsp;<span class="ident" id="7515499">color</span><span class="op" id="7515504">.</span><span class="ident" id="7515505">Palette</span><span class="op" id="7515512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515517">Transparent</span><span class="op" id="7515528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515533">Opaque</span><span class="op" id="7515539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515543">}</span><span class="op" id="7515544">)</span><span class="op" id="7515545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515548">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515551">for</span>&nbsp;<span class="ident" id="7515555">_</span><span class="op" id="7515556">,</span>&nbsp;<span class="ident" id="7515558">m</span>&nbsp;<span class="op" id="7515560">:=</span>&nbsp;<span class="keyword" id="7515563">range</span>&nbsp;<span class="ident" id="7515569">testImage</span>&nbsp;<span class="op" id="7515579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515583">if</span>&nbsp;<span class="op" id="7515586">!</span><span class="ident" id="7515587">Rect</span><span class="op" id="7515591">(</span><span class="num" id="7515592">0</span><span class="op" id="7515593">,</span>&nbsp;<span class="num" id="7515595">0</span><span class="op" id="7515596">,</span>&nbsp;<span class="num" id="7515598">10</span><span class="op" id="7515600">,</span>&nbsp;<span class="num" id="7515602">10</span><span class="op" id="7515604">)</span><span class="op" id="7515605">.</span><span class="ident" id="7515606">Eq</span><span class="op" id="7515608">(</span><span class="ident" id="7515609">m</span><span class="op" id="7515610">.</span><span class="ident" id="7515611">Bounds</span><span class="op" id="7515617">(</span><span class="op" id="7515618">)</span><span class="op" id="7515619">)</span>&nbsp;<span class="op" id="7515621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515626">t</span><span class="op" id="7515627">.</span><span class="ident" id="7515628">Errorf</span><span class="op" id="7515634">(</span><span class="string" id="7515635">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7515663">,</span>&nbsp;<span class="ident" id="7515665">m</span><span class="op" id="7515666">,</span>&nbsp;<span class="ident" id="7515668">Rect</span><span class="op" id="7515672">(</span><span class="num" id="7515673">0</span><span class="op" id="7515674">,</span>&nbsp;<span class="num" id="7515676">0</span><span class="op" id="7515677">,</span>&nbsp;<span class="num" id="7515679">10</span><span class="op" id="7515681">,</span>&nbsp;<span class="num" id="7515683">10</span><span class="op" id="7515685">)</span><span class="op" id="7515686">,</span>&nbsp;<span class="ident" id="7515688">m</span><span class="op" id="7515689">.</span><span class="ident" id="7515690">Bounds</span><span class="op" id="7515696">(</span><span class="op" id="7515697">)</span><span class="op" id="7515698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515703">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515714">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515718">if</span>&nbsp;<span class="op" id="7515721">!</span><span class="ident" id="7515722">cmp</span><span class="op" id="7515725">(</span><span class="ident" id="7515726">t</span><span class="op" id="7515727">,</span>&nbsp;<span class="ident" id="7515729">m</span><span class="op" id="7515730">.</span><span class="ident" id="7515731">ColorModel</span><span class="op" id="7515741">(</span><span class="op" id="7515742">)</span><span class="op" id="7515743">,</span>&nbsp;<span class="ident" id="7515745">Transparent</span><span class="op" id="7515756">,</span>&nbsp;<span class="ident" id="7515758">m</span><span class="op" id="7515759">.</span><span class="ident" id="7515760">At</span><span class="op" id="7515762">(</span><span class="num" id="7515763">6</span><span class="op" id="7515764">,</span>&nbsp;<span class="num" id="7515766">3</span><span class="op" id="7515767">)</span><span class="op" id="7515768">)</span>&nbsp;<span class="op" id="7515770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515775">t</span><span class="op" id="7515776">.</span><span class="ident" id="7515777">Errorf</span><span class="op" id="7515783">(</span><span class="string" id="7515784">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7515826">,</span>&nbsp;<span class="ident" id="7515828">m</span><span class="op" id="7515829">,</span>&nbsp;<span class="ident" id="7515831">m</span><span class="op" id="7515832">.</span><span class="ident" id="7515833">At</span><span class="op" id="7515835">(</span><span class="num" id="7515836">6</span><span class="op" id="7515837">,</span>&nbsp;<span class="num" id="7515839">3</span><span class="op" id="7515840">)</span><span class="op" id="7515841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515846">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515861">m</span><span class="op" id="7515862">.</span><span class="ident" id="7515863">Set</span><span class="op" id="7515866">(</span><span class="num" id="7515867">6</span><span class="op" id="7515868">,</span>&nbsp;<span class="num" id="7515870">3</span><span class="op" id="7515871">,</span>&nbsp;<span class="ident" id="7515873">Opaque</span><span class="op" id="7515879">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515883">if</span>&nbsp;<span class="op" id="7515886">!</span><span class="ident" id="7515887">cmp</span><span class="op" id="7515890">(</span><span class="ident" id="7515891">t</span><span class="op" id="7515892">,</span>&nbsp;<span class="ident" id="7515894">m</span><span class="op" id="7515895">.</span><span class="ident" id="7515896">ColorModel</span><span class="op" id="7515906">(</span><span class="op" id="7515907">)</span><span class="op" id="7515908">,</span>&nbsp;<span class="ident" id="7515910">Opaque</span><span class="op" id="7515916">,</span>&nbsp;<span class="ident" id="7515918">m</span><span class="op" id="7515919">.</span><span class="ident" id="7515920">At</span><span class="op" id="7515922">(</span><span class="num" id="7515923">6</span><span class="op" id="7515924">,</span>&nbsp;<span class="num" id="7515926">3</span><span class="op" id="7515927">)</span><span class="op" id="7515928">)</span>&nbsp;<span class="op" id="7515930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515935">t</span><span class="op" id="7515936">.</span><span class="ident" id="7515937">Errorf</span><span class="op" id="7515943">(</span><span class="string" id="7515944">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7515990">,</span>&nbsp;<span class="ident" id="7515992">m</span><span class="op" id="7515993">,</span>&nbsp;<span class="ident" id="7515995">m</span><span class="op" id="7515996">.</span><span class="ident" id="7515997">At</span><span class="op" id="7515999">(</span><span class="num" id="7516000">6</span><span class="op" id="7516001">,</span>&nbsp;<span class="num" id="7516003">3</span><span class="op" id="7516004">)</span><span class="op" id="7516005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516010">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516025">if</span>&nbsp;<span class="op" id="7516028">!</span><span class="ident" id="7516029">m</span><span class="op" id="7516030">.</span><span class="ident" id="7516031">SubImage</span><span class="op" id="7516039">(</span><span class="ident" id="7516040">Rect</span><span class="op" id="7516044">(</span><span class="num" id="7516045">6</span><span class="op" id="7516046">,</span>&nbsp;<span class="num" id="7516048">3</span><span class="op" id="7516049">,</span>&nbsp;<span class="num" id="7516051">7</span><span class="op" id="7516052">,</span>&nbsp;<span class="num" id="7516054">4</span><span class="op" id="7516055">)</span><span class="op" id="7516056">)</span><span class="op" id="7516057">.</span><span class="op" id="7516058">(</span><span class="ident" id="7516059">image</span><span class="op" id="7516064">)</span><span class="op" id="7516065">.</span><span class="ident" id="7516066">Opaque</span><span class="op" id="7516072">(</span><span class="op" id="7516073">)</span>&nbsp;<span class="op" id="7516075">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516080">t</span><span class="op" id="7516081">.</span><span class="ident" id="7516082">Errorf</span><span class="op" id="7516088">(</span><span class="string" id="7516089">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="7516119">,</span>&nbsp;<span class="ident" id="7516121">m</span><span class="op" id="7516122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516127">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516142">m</span>&nbsp;<span class="op" id="7516144">=</span>&nbsp;<span class="ident" id="7516146">m</span><span class="op" id="7516147">.</span><span class="ident" id="7516148">SubImage</span><span class="op" id="7516156">(</span><span class="ident" id="7516157">Rect</span><span class="op" id="7516161">(</span><span class="num" id="7516162">3</span><span class="op" id="7516163">,</span>&nbsp;<span class="num" id="7516165">2</span><span class="op" id="7516166">,</span>&nbsp;<span class="num" id="7516168">9</span><span class="op" id="7516169">,</span>&nbsp;<span class="num" id="7516171">8</span><span class="op" id="7516172">)</span><span class="op" id="7516173">)</span><span class="op" id="7516174">.</span><span class="op" id="7516175">(</span><span class="ident" id="7516176">image</span><span class="op" id="7516181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516185">if</span>&nbsp;<span class="op" id="7516188">!</span><span class="ident" id="7516189">Rect</span><span class="op" id="7516193">(</span><span class="num" id="7516194">3</span><span class="op" id="7516195">,</span>&nbsp;<span class="num" id="7516197">2</span><span class="op" id="7516198">,</span>&nbsp;<span class="num" id="7516200">9</span><span class="op" id="7516201">,</span>&nbsp;<span class="num" id="7516203">8</span><span class="op" id="7516204">)</span><span class="op" id="7516205">.</span><span class="ident" id="7516206">Eq</span><span class="op" id="7516208">(</span><span class="ident" id="7516209">m</span><span class="op" id="7516210">.</span><span class="ident" id="7516211">Bounds</span><span class="op" id="7516217">(</span><span class="op" id="7516218">)</span><span class="op" id="7516219">)</span>&nbsp;<span class="op" id="7516221">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516226">t</span><span class="op" id="7516227">.</span><span class="ident" id="7516228">Errorf</span><span class="op" id="7516234">(</span><span class="string" id="7516235">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7516273">,</span>&nbsp;<span class="ident" id="7516275">m</span><span class="op" id="7516276">,</span>&nbsp;<span class="ident" id="7516278">Rect</span><span class="op" id="7516282">(</span><span class="num" id="7516283">3</span><span class="op" id="7516284">,</span>&nbsp;<span class="num" id="7516286">2</span><span class="op" id="7516287">,</span>&nbsp;<span class="num" id="7516289">9</span><span class="op" id="7516290">,</span>&nbsp;<span class="num" id="7516292">8</span><span class="op" id="7516293">)</span><span class="op" id="7516294">,</span>&nbsp;<span class="ident" id="7516296">m</span><span class="op" id="7516297">.</span><span class="ident" id="7516298">Bounds</span><span class="op" id="7516304">(</span><span class="op" id="7516305">)</span><span class="op" id="7516306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516311">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516326">if</span>&nbsp;<span class="op" id="7516329">!</span><span class="ident" id="7516330">cmp</span><span class="op" id="7516333">(</span><span class="ident" id="7516334">t</span><span class="op" id="7516335">,</span>&nbsp;<span class="ident" id="7516337">m</span><span class="op" id="7516338">.</span><span class="ident" id="7516339">ColorModel</span><span class="op" id="7516349">(</span><span class="op" id="7516350">)</span><span class="op" id="7516351">,</span>&nbsp;<span class="ident" id="7516353">Opaque</span><span class="op" id="7516359">,</span>&nbsp;<span class="ident" id="7516361">m</span><span class="op" id="7516362">.</span><span class="ident" id="7516363">At</span><span class="op" id="7516365">(</span><span class="num" id="7516366">6</span><span class="op" id="7516367">,</span>&nbsp;<span class="num" id="7516369">3</span><span class="op" id="7516370">)</span><span class="op" id="7516371">)</span>&nbsp;<span class="op" id="7516373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516378">t</span><span class="op" id="7516379">.</span><span class="ident" id="7516380">Errorf</span><span class="op" id="7516386">(</span><span class="string" id="7516387">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7516443">,</span>&nbsp;<span class="ident" id="7516445">m</span><span class="op" id="7516446">,</span>&nbsp;<span class="ident" id="7516448">m</span><span class="op" id="7516449">.</span><span class="ident" id="7516450">At</span><span class="op" id="7516452">(</span><span class="num" id="7516453">6</span><span class="op" id="7516454">,</span>&nbsp;<span class="num" id="7516456">3</span><span class="op" id="7516457">)</span><span class="op" id="7516458">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516463">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516478">if</span>&nbsp;<span class="op" id="7516481">!</span><span class="ident" id="7516482">cmp</span><span class="op" id="7516485">(</span><span class="ident" id="7516486">t</span><span class="op" id="7516487">,</span>&nbsp;<span class="ident" id="7516489">m</span><span class="op" id="7516490">.</span><span class="ident" id="7516491">ColorModel</span><span class="op" id="7516501">(</span><span class="op" id="7516502">)</span><span class="op" id="7516503">,</span>&nbsp;<span class="ident" id="7516505">Transparent</span><span class="op" id="7516516">,</span>&nbsp;<span class="ident" id="7516518">m</span><span class="op" id="7516519">.</span><span class="ident" id="7516520">At</span><span class="op" id="7516522">(</span><span class="num" id="7516523">3</span><span class="op" id="7516524">,</span>&nbsp;<span class="num" id="7516526">3</span><span class="op" id="7516527">)</span><span class="op" id="7516528">)</span>&nbsp;<span class="op" id="7516530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516535">t</span><span class="op" id="7516536">.</span><span class="ident" id="7516537">Errorf</span><span class="op" id="7516543">(</span><span class="string" id="7516544">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7516596">,</span>&nbsp;<span class="ident" id="7516598">m</span><span class="op" id="7516599">,</span>&nbsp;<span class="ident" id="7516601">m</span><span class="op" id="7516602">.</span><span class="ident" id="7516603">At</span><span class="op" id="7516605">(</span><span class="num" id="7516606">3</span><span class="op" id="7516607">,</span>&nbsp;<span class="num" id="7516609">3</span><span class="op" id="7516610">)</span><span class="op" id="7516611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516616">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516631">m</span><span class="op" id="7516632">.</span><span class="ident" id="7516633">Set</span><span class="op" id="7516636">(</span><span class="num" id="7516637">3</span><span class="op" id="7516638">,</span>&nbsp;<span class="num" id="7516640">3</span><span class="op" id="7516641">,</span>&nbsp;<span class="ident" id="7516643">Opaque</span><span class="op" id="7516649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516653">if</span>&nbsp;<span class="op" id="7516656">!</span><span class="ident" id="7516657">cmp</span><span class="op" id="7516660">(</span><span class="ident" id="7516661">t</span><span class="op" id="7516662">,</span>&nbsp;<span class="ident" id="7516664">m</span><span class="op" id="7516665">.</span><span class="ident" id="7516666">ColorModel</span><span class="op" id="7516676">(</span><span class="op" id="7516677">)</span><span class="op" id="7516678">,</span>&nbsp;<span class="ident" id="7516680">Opaque</span><span class="op" id="7516686">,</span>&nbsp;<span class="ident" id="7516688">m</span><span class="op" id="7516689">.</span><span class="ident" id="7516690">At</span><span class="op" id="7516692">(</span><span class="num" id="7516693">3</span><span class="op" id="7516694">,</span>&nbsp;<span class="num" id="7516696">3</span><span class="op" id="7516697">)</span><span class="op" id="7516698">)</span>&nbsp;<span class="op" id="7516700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516705">t</span><span class="op" id="7516706">.</span><span class="ident" id="7516707">Errorf</span><span class="op" id="7516713">(</span><span class="string" id="7516714">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7516770">,</span>&nbsp;<span class="ident" id="7516772">m</span><span class="op" id="7516773">,</span>&nbsp;<span class="ident" id="7516775">m</span><span class="op" id="7516776">.</span><span class="ident" id="7516777">At</span><span class="op" id="7516779">(</span><span class="num" id="7516780">3</span><span class="op" id="7516781">,</span>&nbsp;<span class="num" id="7516783">3</span><span class="op" id="7516784">)</span><span class="op" id="7516785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516790">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7516805">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516883">m</span><span class="op" id="7516884">.</span><span class="ident" id="7516885">SubImage</span><span class="op" id="7516893">(</span><span class="ident" id="7516894">Rect</span><span class="op" id="7516898">(</span><span class="num" id="7516899">0</span><span class="op" id="7516900">,</span>&nbsp;<span class="num" id="7516902">0</span><span class="op" id="7516903">,</span>&nbsp;<span class="num" id="7516905">0</span><span class="op" id="7516906">,</span>&nbsp;<span class="num" id="7516908">0</span><span class="op" id="7516909">)</span><span class="op" id="7516910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516914">m</span><span class="op" id="7516915">.</span><span class="ident" id="7516916">SubImage</span><span class="op" id="7516924">(</span><span class="ident" id="7516925">Rect</span><span class="op" id="7516929">(</span><span class="num" id="7516930">10</span><span class="op" id="7516932">,</span>&nbsp;<span class="num" id="7516934">0</span><span class="op" id="7516935">,</span>&nbsp;<span class="num" id="7516937">10</span><span class="op" id="7516939">,</span>&nbsp;<span class="num" id="7516941">0</span><span class="op" id="7516942">)</span><span class="op" id="7516943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516947">m</span><span class="op" id="7516948">.</span><span class="ident" id="7516949">SubImage</span><span class="op" id="7516957">(</span><span class="ident" id="7516958">Rect</span><span class="op" id="7516962">(</span><span class="num" id="7516963">0</span><span class="op" id="7516964">,</span>&nbsp;<span class="num" id="7516966">10</span><span class="op" id="7516968">,</span>&nbsp;<span class="num" id="7516970">0</span><span class="op" id="7516971">,</span>&nbsp;<span class="num" id="7516973">10</span><span class="op" id="7516975">)</span><span class="op" id="7516976">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516980">m</span><span class="op" id="7516981">.</span><span class="ident" id="7516982">SubImage</span><span class="op" id="7516990">(</span><span class="ident" id="7516991">Rect</span><span class="op" id="7516995">(</span><span class="num" id="7516996">10</span><span class="op" id="7516998">,</span>&nbsp;<span class="num" id="7517000">10</span><span class="op" id="7517002">,</span>&nbsp;<span class="num" id="7517004">10</span><span class="op" id="7517006">,</span>&nbsp;<span class="num" id="7517008">10</span><span class="op" id="7517010">)</span><span class="op" id="7517011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517014">}</span><br>
<span class="lineno"></span><span class="op" id="7517016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7517019">func</span>&nbsp;<span class="ident" id="7517024">Test16BitsPerColorChannel</span><span class="op" id="7517049">(</span><span class="ident" id="7517050">t</span>&nbsp;<span class="op" id="7517052">*</span><span class="ident" id="7517053">testing</span><span class="op" id="7517060">.</span><span class="ident" id="7517061">T</span><span class="op" id="7517062">)</span>&nbsp;<span class="op" id="7517064">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517067">testColorModel</span>&nbsp;<span class="op" id="7517082">:=</span>&nbsp;<span class="op" id="7517085">[</span><span class="op" id="7517086">]</span><span class="ident" id="7517087">color</span><span class="op" id="7517092">.</span><span class="ident" id="7517093">Model</span><span class="op" id="7517098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517102">color</span><span class="op" id="7517107">.</span><span class="ident" id="7517108">RGBA64Model</span><span class="op" id="7517119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517123">color</span><span class="op" id="7517128">.</span><span class="ident" id="7517129">NRGBA64Model</span><span class="op" id="7517141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517145">color</span><span class="op" id="7517150">.</span><span class="ident" id="7517151">Alpha16Model</span><span class="op" id="7517163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517167">color</span><span class="op" id="7517172">.</span><span class="ident" id="7517173">Gray16Model</span><span class="op" id="7517184">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517190">for</span>&nbsp;<span class="ident" id="7517194">_</span><span class="op" id="7517195">,</span>&nbsp;<span class="ident" id="7517197">cm</span>&nbsp;<span class="op" id="7517200">:=</span>&nbsp;<span class="keyword" id="7517203">range</span>&nbsp;<span class="ident" id="7517209">testColorModel</span>&nbsp;<span class="op" id="7517224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517228">c</span>&nbsp;<span class="op" id="7517230">:=</span>&nbsp;<span class="ident" id="7517233">cm</span><span class="op" id="7517235">.</span><span class="ident" id="7517236">Convert</span><span class="op" id="7517243">(</span><span class="ident" id="7517244">color</span><span class="op" id="7517249">.</span><span class="ident" id="7517250">RGBA64</span><span class="op" id="7517256">{</span><span class="num" id="7517257">0x1234</span><span class="op" id="7517263">,</span>&nbsp;<span class="num" id="7517265">0x1234</span><span class="op" id="7517271">,</span>&nbsp;<span class="num" id="7517273">0x1234</span><span class="op" id="7517279">,</span>&nbsp;<span class="num" id="7517281">0x1234</span><span class="op" id="7517287">}</span><span class="op" id="7517288">)</span>&nbsp;<span class="comment" id="7517290">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517316">r</span><span class="op" id="7517317">,</span>&nbsp;<span class="ident" id="7517319">_</span><span class="op" id="7517320">,</span>&nbsp;<span class="ident" id="7517322">_</span><span class="op" id="7517323">,</span>&nbsp;<span class="ident" id="7517325">_</span>&nbsp;<span class="op" id="7517327">:=</span>&nbsp;<span class="ident" id="7517330">c</span><span class="op" id="7517331">.</span><span class="ident" id="7517332">RGBA</span><span class="op" id="7517336">(</span><span class="op" id="7517337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517341">if</span>&nbsp;<span class="ident" id="7517344">r</span>&nbsp;<span class="op" id="7517346">!=</span>&nbsp;<span class="num" id="7517349">0x1234</span>&nbsp;<span class="op" id="7517356">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517361">t</span><span class="op" id="7517362">.</span><span class="ident" id="7517363">Errorf</span><span class="op" id="7517369">(</span><span class="string" id="7517370">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7517408">,</span>&nbsp;<span class="ident" id="7517410">c</span><span class="op" id="7517411">,</span>&nbsp;<span class="num" id="7517413">0x1234</span><span class="op" id="7517419">,</span>&nbsp;<span class="ident" id="7517421">r</span><span class="op" id="7517422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517427">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517444">testImage</span>&nbsp;<span class="op" id="7517454">:=</span>&nbsp;<span class="op" id="7517457">[</span><span class="op" id="7517458">]</span><span class="ident" id="7517459">image</span><span class="op" id="7517464">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517468">NewRGBA64</span><span class="op" id="7517477">(</span><span class="ident" id="7517478">Rect</span><span class="op" id="7517482">(</span><span class="num" id="7517483">0</span><span class="op" id="7517484">,</span>&nbsp;<span class="num" id="7517486">0</span><span class="op" id="7517487">,</span>&nbsp;<span class="num" id="7517489">10</span><span class="op" id="7517491">,</span>&nbsp;<span class="num" id="7517493">10</span><span class="op" id="7517495">)</span><span class="op" id="7517496">)</span><span class="op" id="7517497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517501">NewNRGBA64</span><span class="op" id="7517511">(</span><span class="ident" id="7517512">Rect</span><span class="op" id="7517516">(</span><span class="num" id="7517517">0</span><span class="op" id="7517518">,</span>&nbsp;<span class="num" id="7517520">0</span><span class="op" id="7517521">,</span>&nbsp;<span class="num" id="7517523">10</span><span class="op" id="7517525">,</span>&nbsp;<span class="num" id="7517527">10</span><span class="op" id="7517529">)</span><span class="op" id="7517530">)</span><span class="op" id="7517531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517535">NewAlpha16</span><span class="op" id="7517545">(</span><span class="ident" id="7517546">Rect</span><span class="op" id="7517550">(</span><span class="num" id="7517551">0</span><span class="op" id="7517552">,</span>&nbsp;<span class="num" id="7517554">0</span><span class="op" id="7517555">,</span>&nbsp;<span class="num" id="7517557">10</span><span class="op" id="7517559">,</span>&nbsp;<span class="num" id="7517561">10</span><span class="op" id="7517563">)</span><span class="op" id="7517564">)</span><span class="op" id="7517565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517569">NewGray16</span><span class="op" id="7517578">(</span><span class="ident" id="7517579">Rect</span><span class="op" id="7517583">(</span><span class="num" id="7517584">0</span><span class="op" id="7517585">,</span>&nbsp;<span class="num" id="7517587">0</span><span class="op" id="7517588">,</span>&nbsp;<span class="num" id="7517590">10</span><span class="op" id="7517592">,</span>&nbsp;<span class="num" id="7517594">10</span><span class="op" id="7517596">)</span><span class="op" id="7517597">)</span><span class="op" id="7517598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517601">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517604">for</span>&nbsp;<span class="ident" id="7517608">_</span><span class="op" id="7517609">,</span>&nbsp;<span class="ident" id="7517611">m</span>&nbsp;<span class="op" id="7517613">:=</span>&nbsp;<span class="keyword" id="7517616">range</span>&nbsp;<span class="ident" id="7517622">testImage</span>&nbsp;<span class="op" id="7517632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517636">m</span><span class="op" id="7517637">.</span><span class="ident" id="7517638">Set</span><span class="op" id="7517641">(</span><span class="num" id="7517642">1</span><span class="op" id="7517643">,</span>&nbsp;<span class="num" id="7517645">2</span><span class="op" id="7517646">,</span>&nbsp;<span class="ident" id="7517648">color</span><span class="op" id="7517653">.</span><span class="ident" id="7517654">NRGBA64</span><span class="op" id="7517661">{</span><span class="num" id="7517662">0xffff</span><span class="op" id="7517668">,</span>&nbsp;<span class="num" id="7517670">0xffff</span><span class="op" id="7517676">,</span>&nbsp;<span class="num" id="7517678">0xffff</span><span class="op" id="7517684">,</span>&nbsp;<span class="num" id="7517686">0x1357</span><span class="op" id="7517692">}</span><span class="op" id="7517693">)</span>&nbsp;<span class="comment" id="7517695">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517725">r</span><span class="op" id="7517726">,</span>&nbsp;<span class="ident" id="7517728">_</span><span class="op" id="7517729">,</span>&nbsp;<span class="ident" id="7517731">_</span><span class="op" id="7517732">,</span>&nbsp;<span class="ident" id="7517734">_</span>&nbsp;<span class="op" id="7517736">:=</span>&nbsp;<span class="ident" id="7517739">m</span><span class="op" id="7517740">.</span><span class="ident" id="7517741">At</span><span class="op" id="7517743">(</span><span class="num" id="7517744">1</span><span class="op" id="7517745">,</span>&nbsp;<span class="num" id="7517747">2</span><span class="op" id="7517748">)</span><span class="op" id="7517749">.</span><span class="ident" id="7517750">RGBA</span><span class="op" id="7517754">(</span><span class="op" id="7517755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517759">if</span>&nbsp;<span class="ident" id="7517762">r</span>&nbsp;<span class="op" id="7517764">!=</span>&nbsp;<span class="num" id="7517767">0x1357</span>&nbsp;<span class="op" id="7517774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517779">t</span><span class="op" id="7517780">.</span><span class="ident" id="7517781">Errorf</span><span class="op" id="7517787">(</span><span class="string" id="7517788">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="7517826">,</span>&nbsp;<span class="ident" id="7517828">m</span><span class="op" id="7517829">,</span>&nbsp;<span class="num" id="7517831">0x1357</span><span class="op" id="7517837">,</span>&nbsp;<span class="ident" id="7517839">r</span><span class="op" id="7517840">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517845">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517859">}</span><br>
<span class="lineno"></span><span class="op" id="7517861">}</span>
</div>
</body>
</html>
