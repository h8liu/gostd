<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6404811">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6404866">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6404920">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6404971">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405004">package</span>&nbsp;<span class="ident" id="6405012">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405020">import</span>&nbsp;<span class="op" id="6405027">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405030">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405040">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6405046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6405049">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6405118">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405164">func</span>&nbsp;<span class="ident" id="6405169">unixSyslog</span><span class="op" id="6405179">(</span><span class="op" id="6405180">)</span>&nbsp;<span class="op" id="6405182">(</span><span class="ident" id="6405183">conn</span>&nbsp;<span class="ident" id="6405188">serverConn</span><span class="op" id="6405198">,</span>&nbsp;<span class="ident" id="6405200">err</span>&nbsp;<span class="builtintype" id="6405204">error</span><span class="op" id="6405209">)</span>&nbsp;<span class="op" id="6405211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405214">logTypes</span>&nbsp;<span class="op" id="6405223">:=</span>&nbsp;<span class="op" id="6405226">[</span><span class="op" id="6405227">]</span><span class="builtintype" id="6405228">string</span><span class="op" id="6405234">{</span><span class="string" id="6405235">&#34;unixgram&#34;</span><span class="op" id="6405245">,</span>&nbsp;<span class="string" id="6405247">&#34;unix&#34;</span><span class="op" id="6405253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405256">logPaths</span>&nbsp;<span class="op" id="6405265">:=</span>&nbsp;<span class="op" id="6405268">[</span><span class="op" id="6405269">]</span><span class="builtintype" id="6405270">string</span><span class="op" id="6405276">{</span><span class="string" id="6405277">&#34;/dev/log&#34;</span><span class="op" id="6405287">,</span>&nbsp;<span class="string" id="6405289">&#34;/var/run/syslog&#34;</span><span class="op" id="6405306">,</span>&nbsp;<span class="string" id="6405308">&#34;/var/run/log&#34;</span><span class="op" id="6405322">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405325">for</span>&nbsp;<span class="ident" id="6405329">_</span><span class="op" id="6405330">,</span>&nbsp;<span class="ident" id="6405332">network</span>&nbsp;<span class="op" id="6405340">:=</span>&nbsp;<span class="keyword" id="6405343">range</span>&nbsp;<span class="ident" id="6405349">logTypes</span>&nbsp;<span class="op" id="6405358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405362">for</span>&nbsp;<span class="ident" id="6405366">_</span><span class="op" id="6405367">,</span>&nbsp;<span class="ident" id="6405369">path</span>&nbsp;<span class="op" id="6405374">:=</span>&nbsp;<span class="keyword" id="6405377">range</span>&nbsp;<span class="ident" id="6405383">logPaths</span>&nbsp;<span class="op" id="6405392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405397">conn</span><span class="op" id="6405401">,</span>&nbsp;<span class="ident" id="6405403">err</span>&nbsp;<span class="op" id="6405407">:=</span>&nbsp;<span class="ident" id="6405410">net</span><span class="op" id="6405413">.</span><span class="ident" id="6405414">Dial</span><span class="op" id="6405418">(</span><span class="ident" id="6405419">network</span><span class="op" id="6405426">,</span>&nbsp;<span class="ident" id="6405428">path</span><span class="op" id="6405432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405437">if</span>&nbsp;<span class="ident" id="6405440">err</span>&nbsp;<span class="op" id="6405444">!=</span>&nbsp;<span class="ident" id="6405447">nil</span>&nbsp;<span class="op" id="6405451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405457">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405469">}</span>&nbsp;<span class="keyword" id="6405471">else</span>&nbsp;<span class="op" id="6405476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405482">return</span>&nbsp;<span class="op" id="6405489">&amp;</span><span class="ident" id="6405490">netConn</span><span class="op" id="6405497">{</span><span class="ident" id="6405498">conn</span><span class="op" id="6405502">:</span>&nbsp;<span class="ident" id="6405504">conn</span><span class="op" id="6405508">,</span>&nbsp;<span class="ident" id="6405510">local</span><span class="op" id="6405515">:</span>&nbsp;<span class="ident" id="6405517">true</span><span class="op" id="6405521">}</span><span class="op" id="6405522">,</span>&nbsp;<span class="ident" id="6405524">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405538">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405541">return</span>&nbsp;<span class="ident" id="6405548">nil</span><span class="op" id="6405551">,</span>&nbsp;<span class="ident" id="6405553">errors</span><span class="op" id="6405559">.</span><span class="ident" id="6405560">New</span><span class="op" id="6405563">(</span><span class="string" id="6405564">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6405592">)</span><br>
<span class="lineno"></span><span class="op" id="6405594">}</span>
</div>
</body>
</html>
